(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{508:function(a,s,t){"use strict";t.r(s);var n=t(29),r=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"centos-7-安装-mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-安装-mongodb"}},[a._v("#")]),a._v(" CentOS 7 安装 MongoDB")]),a._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),t("p",[a._v("MongoDB是一个基于分布式文件存储 [1] 的数据库。由"),t("a",{attrs:{href:"https://baike.baidu.com/item/C%2B%2B",target:"_blank",rel:"noopener noreferrer"}},[a._v("C++"),t("OutboundLink")],1),a._v("语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。")]),a._v(" "),t("p",[a._v("MongoDB是一个介于"),t("a",{attrs:{href:"https://baike.baidu.com/item/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93",target:"_blank",rel:"noopener noreferrer"}},[a._v("关系数据库"),t("OutboundLink")],1),a._v("和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。它支持的数据结构非常松散，是类似"),t("a",{attrs:{href:"https://baike.baidu.com/item/json",target:"_blank",rel:"noopener noreferrer"}},[a._v("json"),t("OutboundLink")],1),a._v("的"),t("a",{attrs:{href:"https://baike.baidu.com/item/bson",target:"_blank",rel:"noopener noreferrer"}},[a._v("bson"),t("OutboundLink")],1),a._v("格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立"),t("a",{attrs:{href:"https://baike.baidu.com/item/%E7%B4%A2%E5%BC%95",target:"_blank",rel:"noopener noreferrer"}},[a._v("索引"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("CentOS上安装epel-release的yum源之后就可以安装MongoDB，但是版本都是比较老的，如果使用MongoDB官方的yum就可以安装到比较新版本的MongoDB。")]),a._v(" "),t("h2",{attrs:{id:"配置yum源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置yum源"}},[a._v("#")]),a._v(" 配置yum源")]),a._v(" "),t("p",[a._v("创建一个"),t("code",[a._v("/etc/yum.repos.d/mongodb-org-3.6.repo")]),a._v("文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/yum.repos.d/mongodb-org-3.6.repo\n")])])]),t("p",[a._v("添加如下内容：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[mongodb-org-3.6]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc\n")])])]),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y mongodb-org\n")])])]),t("h3",{attrs:{id:"修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[a._v("#")]),a._v(" 修改配置文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/mongod.conf\n")])])]),t("p",[a._v("将"),t("code",[a._v("net.bindIp")]),a._v("设置为"),t("code",[a._v("0.0.0.0")]),a._v("允许远程访问，主要用户部署过程中的数据导入和调试。")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[a._v(" ")]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# mongod.conf\n\n# for documentation of all options, see:\n#   http://docs.mongodb.org/manual/reference/configuration-options/\n\n# where to write logging data.\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n\n# Where and how to store data.\nstorage:\n  dbPath: /var/lib/mongo\n  journal:\n    enabled: true\n#  engine:\n#  mmapv1:\n#  wiredTiger:\n\n# how the process runs\nprocessManagement:\n  fork: true  # fork and run in background\n  pidFilePath: /var/run/mongodb/mongod.pid  # location of pidfile\n  timeZoneInfo: /usr/share/zoneinfo\n\n# network interfaces\nnet:\n  port: 27017\n  bindIp: 0.0.0.0  # Listen to local interface only, comment to listen on all interfaces.\n\n#security:\n#  authorization: enabled  # 这里是开启验证功能，暂时先关闭，等创建完root用户再开起来进行验证\n#operationProfiling:\n\n#replication:\n\n#sharding:\n\n## Enterprise-Only Options\n\n#auditLog:\n\n#snmp:\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),t("p",[a._v("先注释掉"),t("code",[a._v("security.authorization")]),a._v("配置，这个配置用于启用权限认证，后续创建完用户时再打开，注意"),t("strong",[a._v("空格缩进")])])]),a._v(" "),t("h3",{attrs:{id:"启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[a._v("#")]),a._v(" 启动服务")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start mongod.service\n")])])]),t("h3",{attrs:{id:"连接mongodb数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接mongodb数据库"}},[a._v("#")]),a._v(" 连接MongoDB数据库")]),a._v(" "),t("p",[a._v("直接使用mongo命令进行连接，默认端口是27017")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mongo\n")])])]),t("h3",{attrs:{id:"创建验证用户-提示rootpassword替换成你自己的密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建验证用户-提示rootpassword替换成你自己的密码"}},[a._v("#")]),a._v(" 创建验证用户, 提示rootpassword替换成你自己的密码")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" use admin\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" db.createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("user:"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"root"')]),a._v(",pwd:"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rootpassword"')]),a._v(",roles:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("role:"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"root"')]),a._v(",db:"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("h3",{attrs:{id:"修改配置文件-开启认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件-开启认证"}},[a._v("#")]),a._v(" 修改配置文件，开启认证")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/mongod.conf\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("security:\n  authorization: enabled\n")])])]),t("h3",{attrs:{id:"添加上验证-重启mongodb服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加上验证-重启mongodb服务"}},[a._v("#")]),a._v(" 添加上验证，重启mongodb服务")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl restart mongod.service\n")])])]),t("h3",{attrs:{id:"登录验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录验证"}},[a._v("#")]),a._v(" 登录验证")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("p",[a._v("提示"),t("code",[a._v("rootpassword")]),a._v("替换成你自己的密码")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mongo -u root -p rootpassword --authenticationDatabase admin\n")])])]),t("h3",{attrs:{id:"添加普通用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加普通用户"}},[a._v("#")]),a._v(" 添加普通用户")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("p",[a._v("使用用户管理账户登录认证，提示"),t("code",[a._v("rootpassword")]),a._v("替换成你自己的密码")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mongo")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" use admin\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" db.auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'root'")]),a._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'rootpassword'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("h3",{attrs:{id:"建立普通账户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立普通账户"}},[a._v("#")]),a._v(" 建立普通账户")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("use portal\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("db.createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"user"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"portal"')]),a._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pwd"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"heyuqiang"')]),a._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"roles"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"role"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"readWrite"')]),a._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"db"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"portal"')]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("h3",{attrs:{id:"普通用户登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#普通用户登录"}},[a._v("#")]),a._v(" 普通用户登录")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("db.auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'portal'")]),a._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'heyuqiang'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("至此，MongoDB 部署完成 (゜-゜)つロ 干杯~")])])}),[],!1,null,null,null);s.default=r.exports}}]);