(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],u=0,p=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(n[r]=c[r]);for(d&&d(e);p.length;)p.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var n,e=0;e<i.length;e++){for(var t=i[e],r=!0,s=1;s<t.length;s++){var c=t[s];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),n=a(a.s=t[0]))}return n}var r={},o={1:0},i=[];function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(n){var e=[],t=o[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=o[n]=[e,r]}));e.push(t[2]=r);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(n){return a.p+"assets/js/"+({}[n]||n)+"."+{2:"df69d635",3:"c76bdb66",4:"ce850d9b",5:"1faa936b",6:"5a088ba5",7:"8f4bed74",8:"b1937d38",9:"ebe72a00",10:"788e911f",11:"76e4b896",12:"88aeacb8",13:"ef864632",14:"ddfa3e6b",15:"68f8ce44",16:"aff0328f",17:"125748af",18:"fa6cd919",19:"4bac67a7",20:"c78801f0",21:"64cc6926",22:"cacbe2f9",23:"70f001e8",24:"e4a1dc80",25:"607f30bb",26:"60c54e7d",27:"48c44b2e",28:"eb44c0ba",29:"3f35baff",30:"5ceb6f39",31:"df68a33c",32:"0870e048",33:"3b446daa",34:"fd564325",35:"0e1dceb3",36:"6ea040e9",37:"d0f64292",38:"da592564",39:"f2413731",40:"7c003d2a",41:"61dee31e",42:"dc1cfeb4",43:"3fe14024",44:"b66c9969",45:"281f7712",46:"fb40bb01",47:"311785d3",48:"0070f89f",49:"0a752342",50:"d46282a9",51:"5a52f209",52:"1ec82ee7",53:"01e08d71",54:"0ef033a3",55:"602b8614",56:"3a886341",57:"feae1a28",58:"6d2f12be",59:"9325c1da",60:"a265bf7c",61:"30146ded",62:"662b760a",63:"5d59c7f0",64:"faabd330",65:"9ced9383",66:"2ff8ca8d",67:"9000451e",68:"c63a2ef0",69:"8c8e119e",70:"de3ec280",71:"0009b157",72:"31a06f9d",73:"e84721d3",74:"8da44d3d",75:"0c64e4b0",76:"3db2aba9",77:"b00b1560",78:"53a1c343",79:"1218161f",80:"b85cb7a2",81:"d4f058f7",82:"bd0f843c",83:"b6f1d5c6",84:"e3469377",85:"1f3e7bd0",86:"179e9bc8",87:"9c3f44b4",88:"79659ee4",89:"bea5895d",90:"a7bf2270",91:"82f3a339",92:"89864afc",93:"6a775a5a",94:"dede140a",95:"e182e5da",96:"bca74f0c",97:"0b7a1a08",98:"33ae82c8",99:"4f690b51",100:"5869e407",101:"4735f8c8",102:"0afc9257",103:"deaaedc9",104:"e5de9bfa",105:"04f52d11",106:"a0c4adf4",107:"72cf41ff",108:"2185b4f1",109:"a1966f5b",110:"f0666616",111:"2d52e7dc",112:"7705a466",113:"2f1ab226",114:"4aa4d6ae",115:"4a9765c7",116:"31d2b63f",117:"d2af2299",118:"70b7c00b",119:"50227395",120:"b2f1f2eb",121:"e9e3e5bf",122:"8821ca4c",123:"5c481679",124:"90aefb34",125:"3c2d8a2e",126:"ca38566c",127:"74131025",128:"da48cef5",129:"3122af0d",130:"1e22d289",131:"706af342",132:"50c671ee",133:"db98fa8a",134:"7fe8cf44",135:"6219a109",136:"27f3f774",137:"b4e57291",138:"82aaf97d",139:"cab10f5a",140:"4b42a53f",141:"ba14455a",142:"4acedada",143:"e89a5e92",144:"27ae0dda",145:"6bbfb61f",146:"55df497b",147:"40936f4a",148:"4be699c3",149:"fc77592a",150:"e7fb1666",151:"40ff52a0",152:"fda432cf",153:"1b165d6b",154:"3bb5bcb3",155:"6cd504f2",156:"b1ff07fd",157:"57a6101a",158:"0a18c4db",159:"89815b25",160:"9a45fd99",161:"82e463d5",162:"5a06785b",163:"08555c19",164:"9f890f94",165:"2e875427",166:"3f418177",167:"06c2cc48",168:"3e5efe52",169:"637e7376",170:"319e96c6",171:"a09af050",172:"23d78708",173:"c057313f",174:"8d168208",175:"d81d3c21",176:"8ba38854",177:"620927ce",178:"3c001e58",179:"0acd475a",180:"e910d853",181:"7798460e",182:"3c1fc210",183:"8cc80600",184:"fff56765",185:"c63f91e5",186:"7870decd",187:"3cb205f3",188:"3215c6b1",189:"5e324d91",190:"71194c3e",191:"3d513d7f",192:"66f1b9c4",193:"cfe9beef",194:"d54494f6",195:"91f8acc9",196:"a727b0fb",197:"dcd6487d",198:"4734520f",199:"4946dc06",200:"72242046",201:"87f62686",202:"38ace3e6",203:"2827a086",204:"4c8342e0",205:"e1de7f41",206:"94f84999",207:"95ca2dd7",208:"f293b55a",209:"056b496b",210:"7f232344",211:"748e6034",212:"06e705a7",213:"a9f317f4",214:"65b257a7",215:"1260a609",216:"c1b39ca2",217:"084bb897",218:"02aa4cd9",219:"35339213",220:"1c043025",221:"af0028af",222:"43ea3237",223:"8c59c2c8",224:"ceff003f",225:"d7aa9f36",226:"7d7574e8",227:"3786dac4",228:"67433714",229:"874cf521",230:"63255993",231:"2771635e",232:"1a846631",233:"7950c15f",234:"9c9d2947",235:"3423e660",236:"2d15acb2",237:"5e3e145a",238:"ffb20d88",239:"2d0bd5a9",240:"987df996",241:"9e67aa11",242:"20c57ba1",243:"b3b4e01f"}[n]+".js"}(n);var c=new Error;i=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=o[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,t[1](c)}o[n]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(e)},a.m=n,a.c=r,a.d=function(n,e,t){a.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,e){if(1&e&&(n=a(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)a.d(t,r,function(e){return n[e]}.bind(null,r));return t},a.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(e,"a",e),e},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a.p="/",a.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;i.push([233,0]),t()}([function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e,t){var r=t(0),o=t(39).f,i=t(23),a=t(14),s=t(110),c=t(115),l=t(101);n.exports=function(n,e){var t,d,u,p,m,g=n.target,h=n.global,b=n.stat;if(t=h?r:b?r[g]||s(g,{}):(r[g]||{}).prototype)for(d in e){if(p=e[d],u=n.noTargetGet?(m=o(t,d))&&m.value:t[d],!l(h?d:g+(b?".":"#")+d,n.forced)&&void 0!==u){if(typeof p==typeof u)continue;c(p,u)}(n.sham||u&&u.sham)&&i(p,"sham",!0),a(t,d,p,n)}}},function(n,e,t){var r=t(62),o=Function.prototype,i=o.bind,a=o.call,s=r&&i.bind(a,a);n.exports=r?function(n){return n&&s(n)}:function(n){return n&&function(){return a.apply(n,arguments)}}},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e,t){var r=t(118),o=t(14),i=t(249);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(n,e,t){var r=t(0),o=t(78),i=t(10),a=t(79),s=t(111),c=t(152),l=o("wks"),d=r.Symbol,u=d&&d.for,p=c?d:d&&d.withoutSetter||a;n.exports=function(n){if(!i(l,n)||!s&&"string"!=typeof l[n]){var e="Symbol."+n;s&&i(d,n)?l[n]=d[n]:l[n]=c&&u?u(e):p(e)}return l[n]}},function(n,e,t){var r=t(0),o=t(8),i=r.String,a=r.TypeError;n.exports=function(n){if(o(n))return n;throw a(i(n)+" is not an object")}},function(n,e,t){var r=t(4);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var r=t(2),o=t(15),i=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return i(o(n),e)}},function(n,e,t){var r=t(62),o=Function.prototype.call;n.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},function(n,e,t){var r=t(0),o=t(75),i=r.String;n.exports=function(n){if("Symbol"===o(n))throw TypeError("Cannot convert a Symbol value to a string");return i(n)}},function(n,e,t){var r=t(0),o=t(9),i=t(154),a=t(153),s=t(7),c=t(81),l=r.TypeError,d=Object.defineProperty,u=Object.getOwnPropertyDescriptor;e.f=o?a?function(n,e,t){if(s(n),e=c(e),s(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=u(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return d(n,e,t)}:d:function(n,e,t){if(s(n),e=c(e),s(t),i)try{return d(n,e,t)}catch(n){}if("get"in t||"set"in t)throw l("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(0),o=t(4),i=t(10),a=t(23),s=t(110),c=t(87),l=t(38),d=t(65).CONFIGURABLE,u=l.get,p=l.enforce,m=String(String).split("String");(n.exports=function(n,e,t,c){var l,u=!!c&&!!c.unsafe,g=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,b=c&&void 0!==c.name?c.name:e;o(t)&&("Symbol("===String(b).slice(0,7)&&(b="["+String(b).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(t,"name")||d&&t.name!==b)&&a(t,"name",b),(l=p(t)).source||(l.source=m.join("string"==typeof b?b:""))),n!==r?(u?!h&&n[e]&&(g=!0):delete n[e],g?n[e]=t:a(n,e,t)):g?n[e]=t:s(e,t)})(Function.prototype,"toString",(function(){return o(this)&&u(this).source||c(this)}))},function(n,e,t){var r=t(0),o=t(17),i=r.Object;n.exports=function(n){return i(o(n))}},function(n,e,t){var r=t(0),o=t(4),i=function(n){return o(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?i(r[n]):r[n]&&r[n][e]}},function(n,e,t){var r=t(0).TypeError;n.exports=function(n){if(null==n)throw r("Can't call method on "+n);return n}},function(n,e,t){"use strict";var r=t(1),o=t(92);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(n,e,t){var r=t(52);n.exports=function(n){return r(n.length)}},function(n,e,t){var r=t(61),o=t(17);n.exports=function(n){return r(o(n))}},function(n,e,t){var r=t(2),o=r({}.toString),i=r("".slice);n.exports=function(n){return i(o(n),8,-1)}},function(n,e){n.exports=!1},function(n,e,t){var r=t(9),o=t(13),i=t(49);n.exports=r?function(n,e,t){return o.f(n,e,i(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){"use strict";var r=t(171).charAt,o=t(12),i=t(38),a=t(158),s=i.set,c=i.getterFor("String Iterator");a(String,"String",(function(n){s(this,{type:"String Iterator",string:o(n),index:0})}),(function(){var n,e=c(this),t=e.string,o=e.index;return o>=t.length?{value:void 0,done:!0}:(n=r(t,o),e.index+=n.length,{value:n,done:!1})}))},function(n,e,t){var r=t(14),o=t(265),i=Error.prototype;i.toString!==o&&r(i,"toString",o)},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){var r=t(16);n.exports=r("navigator","userAgent")||""},function(n,e,t){var r=t(187),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();n.exports=i},function(n,e,t){"use strict";function r(n,e,t,r,o,i,a,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),a?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(n,e){return c.call(e),d(n,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(1),o=t(56).filter;r({target:"Array",proto:!0,forced:!t(68)("filter")},{filter:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),o=t(172),i=t(173),a=t(140),s=t(23),c=t(6),l=c("iterator"),d=c("toStringTag"),u=a.values,p=function(n,e){if(n){if(n[l]!==u)try{s(n,l,u)}catch(e){n[l]=u}if(n[d]||s(n,d,e),o[e])for(var t in a)if(n[t]!==a[t])try{s(n,t,a[t])}catch(e){n[t]=a[t]}}};for(var m in o)p(r[m]&&r[m].prototype,m);p(i,"DOMTokenList")},function(n,e,t){"use strict";var r=t(1),o=t(177);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(n,e,t){var r=t(0),o=t(172),i=t(173),a=t(177),s=t(23),c=function(n){if(n&&n.forEach!==a)try{s(n,"forEach",a)}catch(e){n.forEach=a}};for(var l in o)o[l]&&c(r[l]&&r[l].prototype);c(i)},function(n,e,t){var r,o=t(7),i=t(141),a=t(113),s=t(63),c=t(157),l=t(80),d=t(86),u=d("IE_PROTO"),p=function(){},m=function(n){return"<script>"+n+"<\/script>"},g=function(n){n.write(m("")),n.close();var e=n.parentWindow.Object;return n=null,e},h=function(){try{r=new ActiveXObject("htmlfile")}catch(n){}var n,e;h="undefined"!=typeof document?document.domain&&r?g(r):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(n=e.contentWindow.document).open(),n.write(m("document.F=Object")),n.close(),n.F):g(r);for(var t=a.length;t--;)delete h.prototype[a[t]];return h()};s[u]=!0,n.exports=Object.create||function(n,e){var t;return null!==n?(p.prototype=o(n),t=new p,p.prototype=null,t[u]=n):t=h(),void 0===e?t:i.f(t,e)}},function(n,e,t){var r=t(2);n.exports=r({}.isPrototypeOf)},function(n,e,t){var r=t(62),o=Function.prototype,i=o.apply,a=o.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},function(n,e,t){var r=t(0),o=t(4),i=t(83),a=r.TypeError;n.exports=function(n){if(o(n))return n;throw a(i(n)+" is not a function")}},function(n,e,t){var r,o,i,a=t(235),s=t(0),c=t(2),l=t(8),d=t(23),u=t(10),p=t(109),m=t(86),g=t(63),h=s.TypeError,b=s.WeakMap;if(a||p.state){var f=p.state||(p.state=new b),v=c(f.get),k=c(f.has),y=c(f.set);r=function(n,e){if(k(f,n))throw new h("Object already initialized");return e.facade=n,y(f,n,e),e},o=function(n){return v(f,n)||{}},i=function(n){return k(f,n)}}else{var x=m("state");g[x]=!0,r=function(n,e){if(u(n,x))throw new h("Object already initialized");return e.facade=n,d(n,x,e),e},o=function(n){return u(n,x)?n[x]:{}},i=function(n){return u(n,x)}}n.exports={set:r,get:o,has:i,enforce:function(n){return i(n)?o(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=o(e)).type!==n)throw h("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){var r=t(9),o=t(11),i=t(114),a=t(49),s=t(20),c=t(81),l=t(10),d=t(154),u=Object.getOwnPropertyDescriptor;e.f=r?u:function(n,e){if(n=s(n),e=c(e),d)try{return u(n,e)}catch(n){}if(l(n,e))return a(!o(i.f,n,e),n[e])}},function(n,e,t){var r=t(1),o=t(0),i=t(36),a=t(261),s=o.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=a(n,e,c),r({global:!0,forced:c},t)},d=function(n,e){if(s&&s[n]){var t={};t[n]=a("WebAssembly."+n,e,c),r({target:"WebAssembly",stat:!0,forced:c},t)}};l("Error",(function(n){return function(e){return i(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return i(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return i(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return i(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return i(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return i(n,this,arguments)}})),l("URIError",(function(n){return function(e){return i(n,this,arguments)}})),d("CompileError",(function(n){return function(e){return i(n,this,arguments)}})),d("LinkError",(function(n){return function(e){return i(n,this,arguments)}})),d("RuntimeError",(function(n){return function(e){return i(n,this,arguments)}}))},function(n,e,t){var r=t(285),o=t(288);n.exports=function(n,e){var t=o(n,e);return r(t)?t:void 0}},function(n,e,t){var r=t(1),o=t(0),i=t(36),a=t(4),s=t(27),c=t(67),l=t(143),d=/MSIE .\./.test(s),u=o.Function,p=function(n){return function(e,t){var r=l(arguments.length,1)>2,o=a(e)?e:u(e),s=r?c(arguments,2):void 0;return n(r?function(){i(o,this,s)}:o,t)}};r({global:!0,bind:!0,forced:d},{setTimeout:p(o.setTimeout),setInterval:p(o.setInterval)})},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return i})),t.d(e,"j",(function(){return a})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return d})),t.d(e,"c",(function(){return u})),t.d(e,"f",(function(){return p})),t.d(e,"l",(function(){return m})),t.d(e,"m",(function(){return g})),t.d(e,"d",(function(){return b})),t.d(e,"k",(function(){return f})),t.d(e,"n",(function(){return v})),t.d(e,"a",(function(){return y}));t(18),t(45),t(135),t(74),t(133),t(108),t(44),t(32),t(5),t(33),t(30),t(77),t(73),t(151),t(72),t(207),t(25),t(139);var r=/#.*$/,o=/\.(md|html)$/,i=/\/$/,a=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(o,"")}function c(n){return a.test(n)}function l(n){return/^mailto:/.test(n)}function d(n){return/^tel:/.test(n)}function u(n){if(c(n))return n;var e=n.match(r),t=e?e[0]:"",o=s(n);return i.test(o)?n:o+".html"+t}function p(n,e){var t=n.hash,o=function(n){var e=n.match(r);if(e)return e[0]}(e);return(!o||t===o)&&s(n.path)===s(e)}function m(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var o=e.split("/");t&&o[o.length-1]||o.pop();for(var i=n.replace(/^\//,"").split("/"),a=0;a<i.length;a++){var s=i[a];".."===s?o.pop():"."!==s&&o.push(s)}""!==o[0]&&o.unshift("");return o.join("/")}(e,t));for(var r=s(e),o=0;o<n.length;o++)if(s(n[o].regularPath)===r)return Object.assign({},n[o],{type:"page",path:u(n[o].path)});return console.error('[vuepress] No matching page found for sidebar item "'.concat(e,'"')),{}}function g(n,e,t,r){var o=t.pages,i=t.themeConfig,a=r&&i.locales&&i.locales[r]||i;if("auto"===(n.frontmatter.sidebar||a.sidebar||i.sidebar))return h(n);var s=a.sidebar||i.sidebar;if(s){var c=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(var t in e)if(0===(r=n,/(\.html|\/)$/.test(r)?r:r+"/").indexOf(encodeURI(t)))return{base:t,config:e[t]};var r;return{}}(e,s),l=c.base,d=c.config;return"auto"===d?h(n):d?d.map((function(n){return function n(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if("string"==typeof e)return m(t,e,r);if(Array.isArray(e))return Object.assign(m(t,e[0],r),{title:e[1]});o>3&&console.error("[vuepress] detected a too deep nested sidebar group.");var i=e.children||[];return 0===i.length&&e.path?Object.assign(m(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:i.map((function(e){return n(e,t,r,o+1)})),collapsable:!1!==e.collapsable}}(n,o,l)})):[]}return[]}function h(n){var e=b(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map((function(e){return{type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}}))}]}function b(n){var e;return(n=n.map((function(n){return Object.assign({},n)}))).forEach((function(n){2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)})),n.filter((function(n){return 2===n.level}))}function f(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function v(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function k(n){var e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function y(n,e){return k(e)-k(n)}},function(n,e,t){"use strict";var r=t(1),o=t(56).map;r({target:"Array",proto:!0,forced:!t(68)("map")},{map:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r=t(36),o=t(11),i=t(2),a=t(106),s=t(3),c=t(7),l=t(4),d=t(46),u=t(52),p=t(12),m=t(17),g=t(122),h=t(48),b=t(266),f=t(107),v=t(6)("replace"),k=Math.max,y=Math.min,x=i([].concat),w=i([].push),S=i("".indexOf),_=i("".slice),E="$0"==="a".replace(/./,"$0"),T=!!/./[v]&&""===/./[v]("a","$0");a("replace",(function(n,e,t){var i=T?"$":"$0";return[function(n,t){var r=m(this),i=null==n?void 0:h(n,v);return i?o(i,n,r,t):o(e,p(r),n,t)},function(n,o){var a=c(this),s=p(n);if("string"==typeof o&&-1===S(o,i)&&-1===S(o,"$<")){var m=t(e,a,s,o);if(m.done)return m.value}var h=l(o);h||(o=p(o));var v=a.global;if(v){var E=a.unicode;a.lastIndex=0}for(var T=[];;){var I=f(a,s);if(null===I)break;if(w(T,I),!v)break;""===p(I[0])&&(a.lastIndex=g(s,u(a.lastIndex),E))}for(var j,A="",C=0,D=0;D<T.length;D++){for(var z=p((I=T[D])[0]),M=k(y(d(I.index),s.length),0),P=[],O=1;O<I.length;O++)w(P,void 0===(j=I[O])?j:String(j));var R=I.groups;if(h){var N=x([z],P,M,s);void 0!==R&&w(N,R);var L=p(r(o,void 0,N))}else L=b(z,s,M,P,R,o);M>=C&&(A+=_(s,C,M)+L,C=M+z.length)}return A+_(s,C)}]}),!!s((function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")}))||!E||T)},function(n,e){var t=Math.ceil,r=Math.floor;n.exports=function(n){var e=+n;return e!=e||0===e?0:(e>0?r:t)(e)}},function(n,e,t){"use strict";var r=t(3);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){var r=t(37);n.exports=function(n,e){var t=n[e];return null==t?void 0:r(t)}},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r,o,i=t(0),a=t(27),s=i.process,c=i.Deno,l=s&&s.versions||c&&c.version,d=l&&l.v8;d&&(o=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),n.exports=o},function(n,e,t){var r=t(46),o=Math.min;n.exports=function(n){return n>0?o(r(n),9007199254740991):0}},function(n,e,t){"use strict";var r=t(81),o=t(13),i=t(49);n.exports=function(n,e,t){var a=r(e);a in n?o.f(n,a,i(0,t)):n[a]=t}},function(n,e,t){"use strict";var r=t(1),o=t(0),i=t(59),a=t(88),s=t(8),c=t(85),l=t(19),d=t(20),u=t(53),p=t(6),m=t(68),g=t(67),h=m("slice"),b=p("species"),f=o.Array,v=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(n,e){var t,r,o,p=d(this),m=l(p),h=c(n,m),k=c(void 0===e?m:e,m);if(i(p)&&(t=p.constructor,(a(t)&&(t===f||i(t.prototype))||s(t)&&null===(t=t[b]))&&(t=void 0),t===f||void 0===t))return g(p,h,k);for(r=new(void 0===t?f:t)(v(k-h,0)),o=0;h<k;h++,o++)h in p&&u(r,o,p[h]);return r.length=o,r}})},function(n,e,t){var r=t(2),o=t(37),i=t(62),a=r(r.bind);n.exports=function(n,e){return o(n),void 0===e?n:i?a(n,e):function(){return n.apply(e,arguments)}}},function(n,e,t){var r=t(55),o=t(2),i=t(61),a=t(15),s=t(19),c=t(103),l=o([].push),d=function(n){var e=1==n,t=2==n,o=3==n,d=4==n,u=6==n,p=7==n,m=5==n||u;return function(g,h,b,f){for(var v,k,y=a(g),x=i(y),w=r(h,b),S=s(x),_=0,E=f||c,T=e?E(g,S):t||p?E(g,0):void 0;S>_;_++)if((m||_ in x)&&(k=w(v=x[_],_,y),n))if(e)T[_]=k;else if(k)switch(n){case 3:return!0;case 5:return v;case 6:return _;case 2:l(T,v)}else switch(n){case 4:return!1;case 7:l(T,v)}return u?-1:o||d?d:T}};n.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},function(n,e,t){var r=t(156),o=t(113).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,o)}},function(n,e,t){var r=t(13).f,o=t(10),i=t(6)("toStringTag");n.exports=function(n,e,t){n&&!t&&(n=n.prototype),n&&!o(n,i)&&r(n,i,{configurable:!0,value:e})}},function(n,e,t){var r=t(21);n.exports=Array.isArray||function(n){return"Array"==r(n)}},function(n,e,t){var r=t(69),o=t(270),i=t(271),a=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":a&&a in Object(n)?o(n):i(n)}},function(n,e,t){var r=t(0),o=t(2),i=t(3),a=t(21),s=r.Object,c=o("".split);n.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(n){return"String"==a(n)?c(n,""):s(n)}:s},function(n,e,t){var r=t(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e){n.exports={}},function(n,e){n.exports={}},function(n,e,t){var r=t(9),o=t(10),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,l=s&&(!r||r&&a(i,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){var r=t(2),o=t(7),i=t(236);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return o(t),i(r),e?n(t,r):t.__proto__=r,t}}():void 0)},function(n,e,t){var r=t(2);n.exports=r([].slice)},function(n,e,t){var r=t(3),o=t(6),i=t(51),a=o("species");n.exports=function(n){return i>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[n](Boolean).foo}))}},function(n,e,t){var r=t(28).Symbol;n.exports=r},function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));t(77);var r=t(71);t(76),t(91),t(5),t(121),t(24),t(31),t(182);var o=t(98);t(40),t(25);function i(n){return function(n){if(Array.isArray(n))return Object(r.a)(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Object(o.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(1),o=t(0),i=t(3),a=t(59),s=t(8),c=t(15),l=t(19),d=t(53),u=t(103),p=t(68),m=t(6),g=t(51),h=m("isConcatSpreadable"),b=o.TypeError,f=g>=51||!i((function(){var n=[];return n[h]=!1,n.concat()[0]!==n})),v=p("concat"),k=function(n){if(!s(n))return!1;var e=n[h];return void 0!==e?!!e:a(n)};r({target:"Array",proto:!0,forced:!f||!v},{concat:function(n){var e,t,r,o,i,a=c(this),s=u(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(k(i=-1===e?a:arguments[e])){if(p+(o=l(i))>9007199254740991)throw b("Maximum allowed index exceeded");for(t=0;t<o;t++,p++)t in i&&d(s,p,i[t])}else{if(p>=9007199254740991)throw b("Maximum allowed index exceeded");d(s,p++,i)}return s.length=p,s}})},function(n,e,t){"use strict";var r=t(1),o=t(2),i=t(112).indexOf,a=t(47),s=o([].indexOf),c=!!s&&1/s([1],1,-0)<0,l=a("indexOf");r({target:"Array",proto:!0,forced:c||!l},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return c?s(this,n,e)||0:i(this,n,e)}})},function(n,e,t){"use strict";t(18);var r,o,i=t(1),a=t(0),s=t(11),c=t(2),l=t(4),d=t(8),u=(r=!1,(o=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===o.test("abc")&&r),p=a.Error,m=c(/./.test);i({target:"RegExp",proto:!0,forced:!u},{test:function(n){var e=this.exec;if(!l(e))return m(this,n);var t=s(e,this,n);if(null!==t&&!d(t))throw new p("RegExp exec method returned something other than an Object or null");return!!t}})},function(n,e,t){var r=t(0),o=t(118),i=t(4),a=t(21),s=t(6)("toStringTag"),c=r.Object,l="Arguments"==a(function(){return arguments}());n.exports=o?a:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=c(n),s))?t:l?a(e):"Object"==(r=a(e))&&i(e.callee)?"Arguments":r}},function(n,e,t){"use strict";var r=t(1),o=t(0),i=t(16),a=t(36),s=t(11),c=t(2),l=t(22),d=t(9),u=t(111),p=t(3),m=t(10),g=t(59),h=t(4),b=t(8),f=t(35),v=t(82),k=t(7),y=t(15),x=t(20),w=t(81),S=t(12),_=t(49),E=t(34),T=t(84),I=t(57),j=t(179),A=t(116),C=t(39),D=t(13),z=t(141),M=t(114),P=t(67),O=t(14),R=t(78),N=t(86),L=t(63),q=t(79),B=t(6),U=t(180),$=t(181),G=t(58),F=t(38),H=t(56).forEach,K=N("hidden"),J=B("toPrimitive"),V=F.set,W=F.getterFor("Symbol"),Q=Object.prototype,Y=o.Symbol,X=Y&&Y.prototype,Z=o.TypeError,nn=o.QObject,en=i("JSON","stringify"),tn=C.f,rn=D.f,on=j.f,an=M.f,sn=c([].push),cn=R("symbols"),ln=R("op-symbols"),dn=R("string-to-symbol-registry"),un=R("symbol-to-string-registry"),pn=R("wks"),mn=!nn||!nn.prototype||!nn.prototype.findChild,gn=d&&p((function(){return 7!=E(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(n,e,t){var r=tn(Q,e);r&&delete Q[e],rn(n,e,t),r&&n!==Q&&rn(Q,e,r)}:rn,hn=function(n,e){var t=cn[n]=E(X);return V(t,{type:"Symbol",tag:n,description:e}),d||(t.description=e),t},bn=function(n,e,t){n===Q&&bn(ln,e,t),k(n);var r=w(e);return k(t),m(cn,r)?(t.enumerable?(m(n,K)&&n[K][r]&&(n[K][r]=!1),t=E(t,{enumerable:_(0,!1)})):(m(n,K)||rn(n,K,_(1,{})),n[K][r]=!0),gn(n,r,t)):rn(n,r,t)},fn=function(n,e){k(n);var t=x(e),r=T(t).concat(xn(t));return H(r,(function(e){d&&!s(vn,t,e)||bn(n,e,t[e])})),n},vn=function(n){var e=w(n),t=s(an,this,e);return!(this===Q&&m(cn,e)&&!m(ln,e))&&(!(t||!m(this,e)||!m(cn,e)||m(this,K)&&this[K][e])||t)},kn=function(n,e){var t=x(n),r=w(e);if(t!==Q||!m(cn,r)||m(ln,r)){var o=tn(t,r);return!o||!m(cn,r)||m(t,K)&&t[K][r]||(o.enumerable=!0),o}},yn=function(n){var e=on(x(n)),t=[];return H(e,(function(n){m(cn,n)||m(L,n)||sn(t,n)})),t},xn=function(n){var e=n===Q,t=on(e?ln:x(n)),r=[];return H(t,(function(n){!m(cn,n)||e&&!m(Q,n)||sn(r,cn[n])})),r};(u||(O(X=(Y=function(){if(f(X,this))throw Z("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?S(arguments[0]):void 0,e=q(n),t=function(n){this===Q&&s(t,ln,n),m(this,K)&&m(this[K],e)&&(this[K][e]=!1),gn(this,e,_(1,n))};return d&&mn&&gn(Q,e,{configurable:!0,set:t}),hn(e,n)}).prototype,"toString",(function(){return W(this).tag})),O(Y,"withoutSetter",(function(n){return hn(q(n),n)})),M.f=vn,D.f=bn,z.f=fn,C.f=kn,I.f=j.f=yn,A.f=xn,U.f=function(n){return hn(B(n),n)},d&&(rn(X,"description",{configurable:!0,get:function(){return W(this).description}}),l||O(Q,"propertyIsEnumerable",vn,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Y}),H(T(pn),(function(n){$(n)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(n){var e=S(n);if(m(dn,e))return dn[e];var t=Y(e);return dn[e]=t,un[t]=e,t},keyFor:function(n){if(!v(n))throw Z(n+" is not a symbol");if(m(un,n))return un[n]},useSetter:function(){mn=!0},useSimple:function(){mn=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!d},{create:function(n,e){return void 0===e?E(n):fn(E(n),e)},defineProperty:bn,defineProperties:fn,getOwnPropertyDescriptor:kn}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:yn,getOwnPropertySymbols:xn}),r({target:"Object",stat:!0,forced:p((function(){A.f(1)}))},{getOwnPropertySymbols:function(n){return A.f(y(n))}}),en)&&r({target:"JSON",stat:!0,forced:!u||p((function(){var n=Y();return"[null]"!=en([n])||"{}"!=en({a:n})||"{}"!=en(Object(n))}))},{stringify:function(n,e,t){var r=P(arguments),o=e;if((b(e)||void 0!==n)&&!v(n))return g(e)||(e=function(n,e){if(h(o)&&(e=s(o,this,n,e)),!v(e))return e}),r[1]=e,a(en,null,r)}});if(!X[J]){var wn=X.valueOf;O(X,J,(function(n){return s(wn,this)}))}G(Y,"Symbol"),L[K]=!0},function(n,e,t){t(1)({target:"Array",stat:!0},{isArray:t(59)})},function(n,e,t){var r=t(22),o=t(109);(n.exports=function(n,e){return o[n]||(o[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){var r=t(2),o=0,i=Math.random(),a=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+a(++o+i,36)}},function(n,e,t){var r=t(0),o=t(8),i=r.document,a=o(i)&&o(i.createElement);n.exports=function(n){return a?i.createElement(n):{}}},function(n,e,t){var r=t(155),o=t(82);n.exports=function(n){var e=r(n,"string");return o(e)?e:e+""}},function(n,e,t){var r=t(0),o=t(16),i=t(4),a=t(35),s=t(152),c=r.Object;n.exports=s?function(n){return"symbol"==typeof n}:function(n){var e=o("Symbol");return i(e)&&a(e.prototype,c(n))}},function(n,e,t){var r=t(0).String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){var r=t(156),o=t(113);n.exports=Object.keys||function(n){return r(n,o)}},function(n,e,t){var r=t(46),o=Math.max,i=Math.min;n.exports=function(n,e){var t=r(n);return t<0?o(t+e,0):i(t,e)}},function(n,e,t){var r=t(78),o=t(79),i=r("keys");n.exports=function(n){return i[n]||(i[n]=o(n))}},function(n,e,t){var r=t(2),o=t(4),i=t(109),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(n){return a(n)}),n.exports=i.inspectSource},function(n,e,t){var r=t(2),o=t(3),i=t(4),a=t(75),s=t(16),c=t(87),l=function(){},d=[],u=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,m=r(p.exec),g=!p.exec(l),h=function(n){if(!i(n))return!1;try{return u(l,d,n),!0}catch(n){return!1}},b=function(n){if(!i(n))return!1;switch(a(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!m(p,c(n))}catch(n){return!0}};b.sham=!0,n.exports=!u||o((function(){var n;return h(h.call)||!h(Object)||!h((function(){n=!0}))||n}))?b:h},function(n,e,t){var r=t(21),o=t(0);n.exports="process"==r(o.process)},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(5);function r(n,e,t,r,o,i,a){try{var s=n[i](a),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function o(n){return function(){var e=this,t=arguments;return new Promise((function(o,i){var a=n.apply(e,t);function s(n){r(a,o,i,s,c,"next",n)}function c(n){r(a,o,i,s,c,"throw",n)}s(void 0)}))}}},function(n,e,t){"use strict";var r=t(1),o=t(9),i=t(0),a=t(2),s=t(10),c=t(4),l=t(35),d=t(12),u=t(13).f,p=t(115),m=i.Symbol,g=m&&m.prototype;if(o&&c(m)&&(!("description"in g)||void 0!==m().description)){var h={},b=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=l(g,this)?new m(n):void 0===n?m():m(n);return""===n&&(h[e]=!0),e};p(b,m),b.prototype=g,g.constructor=b;var f="Symbol(test)"==String(m("test")),v=a(g.toString),k=a(g.valueOf),y=/^Symbol\((.*)\)[^)]+$/,x=a("".replace),w=a("".slice);u(g,"description",{configurable:!0,get:function(){var n=k(this),e=v(n);if(s(h,n))return"";var t=f?w(e,7,-1):x(e,y,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:b})}},function(n,e,t){"use strict";var r,o,i=t(11),a=t(2),s=t(12),c=t(145),l=t(105),d=t(78),u=t(34),p=t(38).get,m=t(220),g=t(226),h=d("native-string-replace",String.prototype.replace),b=RegExp.prototype.exec,f=b,v=a("".charAt),k=a("".indexOf),y=a("".replace),x=a("".slice),w=(o=/b*/g,i(b,r=/a/,"a"),i(b,o,"a"),0!==r.lastIndex||0!==o.lastIndex),S=l.BROKEN_CARET,_=void 0!==/()??/.exec("")[1];(w||_||S||m||g)&&(f=function(n){var e,t,r,o,a,l,d,m=this,g=p(m),E=s(n),T=g.raw;if(T)return T.lastIndex=m.lastIndex,e=i(f,T,E),m.lastIndex=T.lastIndex,e;var I=g.groups,j=S&&m.sticky,A=i(c,m),C=m.source,D=0,z=E;if(j&&(A=y(A,"y",""),-1===k(A,"g")&&(A+="g"),z=x(E,m.lastIndex),m.lastIndex>0&&(!m.multiline||m.multiline&&"\n"!==v(E,m.lastIndex-1))&&(C="(?: "+C+")",z=" "+z,D++),t=new RegExp("^(?:"+C+")",A)),_&&(t=new RegExp("^"+C+"$(?!\\s)",A)),w&&(r=m.lastIndex),o=i(b,j?t:m,z),j?o?(o.input=x(o.input,D),o[0]=x(o[0],D),o.index=m.lastIndex,m.lastIndex+=o[0].length):m.lastIndex=0:w&&o&&(m.lastIndex=m.global?o.index+o[0].length:r),_&&o&&o.length>1&&i(h,o[0],t,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&I)for(o.groups=l=u(null),a=0;a<I.length;a++)l[(d=I[a])[0]]=o[d[1]];return o}),n.exports=f},function(n,e,t){var r=t(275),o=t(276),i=t(277),a=t(278),s=t(279);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(189);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(41)(Object,"create");n.exports=r},function(n,e,t){var r=t(297);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(130);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(54),t(5),t(104),t(182),t(24),t(18),t(74);var r=t(71);function o(n,e){if(n){if("string"==typeof n)return Object(r.a)(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(n,e):void 0}}},function(n,e,t){var r,o;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(o="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(n,e,t){return n<e?e:n>t?t:n}function i(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=o(n,r.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(r.barSelector),d=r.speed,u=r.easing;return c.offsetWidth,a((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var o;return(o="translate3d"===r.positionUsing?{transform:"translate3d("+i(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+i(n)+"%,0)"}:{"margin-left":i(n)+"%"}).transition="all "+e+"ms "+t,o}(n,d,u)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+d+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),d)}),d)):setTimeout(e,d)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*o(Math.random()*e,.1,.95)),e=o(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var o,a=e.querySelector(r.barSelector),c=n?"-100":i(t.status||0),d=document.querySelector(r.parent);return s(a,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(o=e.querySelector(r.spinnerSelector))&&p(o),d!=document.body&&l(d,"nprogress-custom-parent"),d.appendChild(e),e},t.remove=function(){d(document.documentElement,"nprogress-busy"),d(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&p(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var a=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,o=n.length,i=e.charAt(0).toUpperCase()+e.slice(1);o--;)if((r=n[o]+i)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,o,i=arguments;if(2==i.length)for(t in e)void 0!==(o=e[t])&&e.hasOwnProperty(t)&&r(n,t,o);else r(n,i[1],i[2])}}();function c(n,e){return("string"==typeof n?n:u(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=u(n),r=t+e;c(t,e)||(n.className=r.substring(1))}function d(n,e){var t,r=u(n);c(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function u(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function p(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=o)},function(n,e,t){var r=t(1),o=t(15),i=t(84);r({target:"Object",stat:!0,forced:t(3)((function(){i(1)}))},{keys:function(n){return i(o(n))}})},function(n,e,t){var r=t(3),o=t(4),i=/#|\.prototype\./,a=function(n,e){var t=c[s(n)];return t==d||t!=l&&(o(e)?r(e):!!e)},s=a.normalize=function(n){return String(n).replace(i,".").toLowerCase()},c=a.data={},l=a.NATIVE="N",d=a.POLYFILL="P";n.exports=a},function(n,e,t){var r=t(75),o=t(48),i=t(64),a=t(6)("iterator");n.exports=function(n){if(null!=n)return o(n,a)||o(n,"@@iterator")||i[r(n)]}},function(n,e,t){var r=t(250);n.exports=function(n,e){return new(r(n))(0===e?0:e)}},function(n,e,t){var r=t(9),o=t(65).EXISTS,i=t(2),a=t(13).f,s=Function.prototype,c=i(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=i(l.exec);r&&!o&&a(s,"name",{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(n){return""}}})},function(n,e,t){var r=t(3),o=t(0).RegExp,i=r((function(){var n=o("a","y");return n.lastIndex=2,null!=n.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),s=i||r((function(){var n=o("^r","gy");return n.lastIndex=2,null!=n.exec("str")}));n.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},function(n,e,t){"use strict";t(18);var r=t(2),o=t(14),i=t(92),a=t(3),s=t(6),c=t(23),l=s("species"),d=RegExp.prototype;n.exports=function(n,e,t,u){var p=s(n),m=!a((function(){var e={};return e[p]=function(){return 7},7!=""[n](e)})),g=m&&!a((function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[l]=function(){return t},t.flags="",t[p]=/./[p]),t.exec=function(){return e=!0,null},t[p](""),!e}));if(!m||!g||t){var h=r(/./[p]),b=e(p,""[n],(function(n,e,t,o,a){var s=r(n),c=e.exec;return c===i||c===d.exec?m&&!a?{done:!0,value:h(e,t,o)}:{done:!0,value:s(t,e,o)}:{done:!1}}));o(String.prototype,n,b[0]),o(d,p,b[1])}u&&c(d[p],"sham",!0)}},function(n,e,t){var r=t(0),o=t(11),i=t(7),a=t(4),s=t(21),c=t(92),l=r.TypeError;n.exports=function(n,e){var t=n.exec;if(a(t)){var r=o(t,n,e);return null!==r&&i(r),r}if("RegExp"===s(n))return o(c,n,e);throw l("RegExp#exec called on incompatible receiver")}},function(n,e,t){"use strict";var r=t(1),o=t(2),i=t(61),a=t(20),s=t(47),c=o([].join),l=i!=Object,d=s("join",",");r({target:"Array",proto:!0,forced:l||!d},{join:function(n){return c(a(this),void 0===n?",":n)}})},function(n,e,t){var r=t(0),o=t(110),i=r["__core-js_shared__"]||o("__core-js_shared__",{});n.exports=i},function(n,e,t){var r=t(0),o=Object.defineProperty;n.exports=function(n,e){try{o(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(51),o=t(3);n.exports=!!Object.getOwnPropertySymbols&&!o((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){var r=t(20),o=t(85),i=t(19),a=function(n){return function(e,t,a){var s,c=r(e),l=i(c),d=o(a,l);if(n&&t!=t){for(;l>d;)if((s=c[d++])!=s)return!0}else for(;l>d;d++)if((n||d in c)&&c[d]===t)return n||d||0;return!n&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(n){var e=o(this,n);return!!e&&e.enumerable}:r},function(n,e,t){var r=t(10),o=t(159),i=t(39),a=t(13);n.exports=function(n,e,t){for(var s=o(e),c=a.f,l=i.f,d=0;d<s.length;d++){var u=s[d];r(n,u)||t&&r(t,u)||c(n,u,l(e,u))}}},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var r=t(0),o=t(10),i=t(4),a=t(15),s=t(86),c=t(161),l=s("IE_PROTO"),d=r.Object,u=d.prototype;n.exports=c?d.getPrototypeOf:function(n){var e=a(n);if(o(e,l))return e[l];var t=e.constructor;return i(t)&&e instanceof t?t.prototype:e instanceof d?u:null}},function(n,e,t){var r={};r[t(6)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){var r=t(7),o=t(166),i=t(6)("species");n.exports=function(n,e){var t,a=r(n).constructor;return void 0===a||null==(t=r(a)[i])?e:o(t)}},function(n,e,t){var r=t(0),o=t(85),i=t(19),a=t(53),s=r.Array,c=Math.max;n.exports=function(n,e,t){for(var r=i(n),l=o(e,r),d=o(void 0===t?r:t,r),u=s(c(d-l,0)),p=0;l<d;l++,p++)a(u,p,n[l]);return u.length=p,u}},function(n,e,t){t(181)("iterator")},function(n,e,t){"use strict";var r=t(171).charAt;n.exports=function(n,e,t){return e+(t?r(n,e).length:1)}},function(n,e,t){var r=t(269),o=t(50),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(n){return o(n)&&a.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var r=t(41)(t(28),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(289),o=t(296),i=t(298),a=t(299),s=t(300);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(26),o=t(130),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!o(n))||(a.test(n)||!i.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(60),o=t(50);n.exports=function(n){return"symbol"==typeof n||o(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(77);t(76),t(91),t(5),t(121),t(24),t(31);var r=t(98);t(40),t(25);function o(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i=[],a=!0,s=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(n){s=!0,o=n}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(n,e)||Object(r.a)(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";var r=t(36),o=t(11),i=t(2),a=t(106),s=t(144),c=t(7),l=t(17),d=t(119),u=t(122),p=t(52),m=t(12),g=t(48),h=t(120),b=t(107),f=t(92),v=t(105),k=t(3),y=v.UNSUPPORTED_Y,x=Math.min,w=[].push,S=i(/./.exec),_=i(w),E=i("".slice);a("split",(function(n,e,t){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(n,t){var i=m(l(this)),a=void 0===t?4294967295:t>>>0;if(0===a)return[];if(void 0===n)return[i];if(!s(n))return o(e,i,n,a);for(var c,d,u,p=[],g=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),b=0,v=new RegExp(n.source,g+"g");(c=o(f,v,i))&&!((d=v.lastIndex)>b&&(_(p,E(i,b,c.index)),c.length>1&&c.index<i.length&&r(w,p,h(c,1)),u=c[0].length,b=d,p.length>=a));)v.lastIndex===c.index&&v.lastIndex++;return b===i.length?!u&&S(v,"")||_(p,""):_(p,E(i,b)),p.length>a?h(p,0,a):p}:"0".split(void 0,0).length?function(n,t){return void 0===n&&0===t?[]:o(e,this,n,t)}:e,[function(e,t){var r=l(this),a=null==e?void 0:g(e,n);return a?o(a,e,r,t):o(i,m(r),e,t)},function(n,r){var o=c(this),a=m(n),s=t(i,o,a,r,i!==e);if(s.done)return s.value;var l=d(o,RegExp),g=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(y?"g":"y"),f=new l(y?"^(?:"+o.source+")":o,h),v=void 0===r?4294967295:r>>>0;if(0===v)return[];if(0===a.length)return null===b(f,a)?[a]:[];for(var k=0,w=0,S=[];w<a.length;){f.lastIndex=y?0:w;var T,I=b(f,y?E(a,w):a);if(null===I||(T=x(p(f.lastIndex+(y?w:0)),a.length))===k)w=u(a,w,g);else{if(_(S,E(a,k,w)),S.length===v)return S;for(var j=1;j<=I.length-1;j++)if(_(S,I[j]),S.length===v)return S;w=k=T}}return _(S,E(a,k)),S}]}),!!k((function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var t="ab".split(n);return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),y)},function(n,e,t){"use strict";var r=t(1),o=t(56).some;r({target:"Array",proto:!0,forced:!t(47)("some")},{some:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r=t(11),o=t(106),i=t(7),a=t(52),s=t(12),c=t(17),l=t(48),d=t(122),u=t(107);o("match",(function(n,e,t){return[function(e){var t=c(this),o=null==e?void 0:l(e,n);return o?r(o,e,t):new RegExp(e)[n](s(t))},function(n){var r=i(this),o=s(n),c=t(e,r,o);if(c.done)return c.value;if(!r.global)return u(r,o);var l=r.unicode;r.lastIndex=0;for(var p,m=[],g=0;null!==(p=u(r,o));){var h=s(p[0]);m[g]=h,""===h&&(r.lastIndex=d(o,a(r.lastIndex),l)),g++}return 0===g?null:m}]}))},function(n,e,t){var r=t(6),o=t(34),i=t(13),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),n.exports=function(n){s[a][n]=!0}},function(n,e,t){var r=function(n){"use strict";var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{s({},"")}catch(n){s=function(n,e,t){return n[e]=t}}function c(n,e,t,r){var o=e&&e.prototype instanceof u?e:u,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(n,e,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(t.method=o,t.arg=i;;){var a=t.delegate;if(a){var s=y(a,t);if(s){if(s===d)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=l(n,e,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(n,t,a),i}function l(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var d={};function u(){}function p(){}function m(){}var g={};s(g,o,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(_([])));b&&b!==e&&t.call(b,o)&&(g=b);var f=m.prototype=u.prototype=Object.create(g);function v(n){["next","throw","return"].forEach((function(e){s(n,e,(function(n){return this._invoke(e,n)}))}))}function k(n,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=l(n[o],n,i);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==typeof u&&t.call(u,"__await")?e.resolve(u.__await).then((function(n){r("next",n,a,s)}),(function(n){r("throw",n,a,s)})):e.resolve(u).then((function(n){d.value=n,a(d)}),(function(n){return r("throw",n,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function y(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,y(n,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function w(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function S(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(x,this),this.reset(!0)}function _(n){if(n){var e=n[o];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(f,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,m):(n.__proto__=m,s(n,a,"GeneratorFunction")),n.prototype=Object.create(f),n},n.awrap=function(n){return{__await:n}},v(k.prototype),s(k.prototype,i,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new k(c(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},v(f),s(f,a,"Generator"),s(f,o,(function(){return this})),s(f,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=_,S.prototype={constructor:S,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return a.type="throw",a.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=t.call(i,"catchLoc"),c=t.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),d},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),w(t),d}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;w(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:_(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),d}},n}(n.exports);try{regeneratorRuntime=r}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(n,e,t){var r=t(1),o=t(9),i=t(13).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(n,e,t){"use strict";var r=t(2),o=t(65).PROPER,i=t(14),a=t(7),s=t(35),c=t(12),l=t(3),d=t(145),u=RegExp.prototype,p=u.toString,m=r(d),g=l((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),h=o&&"toString"!=p.name;(g||h)&&i(RegExp.prototype,"toString",(function(){var n=a(this),e=c(n.source),t=n.flags;return"/"+e+"/"+c(void 0===t&&s(u,n)&&!("flags"in u)?m(n):t)}),{unsafe:!0})},function(n,e,t){"use strict";var r=t(20),o=t(136),i=t(64),a=t(38),s=t(13).f,c=t(158),l=t(22),d=t(9),u=a.set,p=a.getterFor("Array Iterator");n.exports=c(Array,"Array",(function(n,e){u(this,{type:"Array Iterator",target:r(n),index:0,kind:e})}),(function(){var n=p(this),e=n.target,t=n.kind,r=n.index++;return!e||r>=e.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var m=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!l&&d&&"values"!==m.name)try{s(m,"name",{value:"values"})}catch(n){}},function(n,e,t){var r=t(9),o=t(153),i=t(13),a=t(7),s=t(20),c=t(84);e.f=r&&!o?Object.defineProperties:function(n,e){a(n);for(var t,r=s(e),o=c(e),l=o.length,d=0;l>d;)i.f(n,t=o[d++],r[t]);return n}},function(n,e,t){var r=t(0),o=t(11),i=t(37),a=t(7),s=t(83),c=t(102),l=r.TypeError;n.exports=function(n,e){var t=arguments.length<2?c(n):e;if(i(t))return a(o(t,n));throw l(s(n)+" is not iterable")}},function(n,e,t){var r=t(0).TypeError;n.exports=function(n,e){if(n<e)throw r("Not enough arguments");return n}},function(n,e,t){var r=t(8),o=t(21),i=t(6)("match");n.exports=function(n){var e;return r(n)&&(void 0!==(e=n[i])?!!e:"RegExp"==o(n))}},function(n,e,t){"use strict";var r=t(7);n.exports=function(){var n=r(this),e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}},function(n,e,t){var r=t(4),o=t(8),i=t(66);n.exports=function(n,e,t){var a,s;return i&&r(a=e.constructor)&&a!==t&&o(s=a.prototype)&&s!==t.prototype&&i(n,s),n}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),d=Object.prototype.toString,u=Math.max,p=Math.min,m=function(){return l.Date.now()};function g(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function h(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==d.call(n)}(n))return NaN;if(g(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=g(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=o.test(n);return s||i.test(n)?a(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,o,i,a,s,c,l=0,d=!1,b=!1,f=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function v(e){var t=r,i=o;return r=o=void 0,l=e,a=n.apply(i,t)}function k(n){return l=n,s=setTimeout(x,e),d?v(n):a}function y(n){var t=n-c;return void 0===c||t>=e||t<0||b&&n-l>=i}function x(){var n=m();if(y(n))return w(n);s=setTimeout(x,function(n){var t=e-(n-c);return b?p(t,i-(n-l)):t}(n))}function w(n){return s=void 0,f&&r?v(n):(r=o=void 0,a)}function S(){var n=m(),t=y(n);if(r=arguments,o=this,c=n,t){if(void 0===s)return k(c);if(b)return s=setTimeout(x,e),v(c)}return void 0===s&&(s=setTimeout(x,e)),a}return e=h(e)||0,g(t)&&(d=!!t.leading,i=(b="maxWait"in t)?u(h(t.maxWait)||0,e):i,f="trailing"in t?!!t.trailing:f),S.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},S.flush=function(){return void 0===s?a:w(m())},S}},function(n,e,t){var r=t(2),o=t(17),i=t(12),a=t(150),s=r("".replace),c="["+a+"]",l=RegExp("^"+c+c+"*"),d=RegExp(c+c+"*$"),u=function(n){return function(e){var t=i(o(e));return 1&n&&(t=s(t,l,"")),2&n&&(t=s(t,d,"")),t}};n.exports={start:u(1),end:u(2),trim:u(3)}},function(n,e){n.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},function(n,e,t){var r=t(2),o=t(14),i=Date.prototype,a=r(i.toString),s=r(i.getTime);"Invalid Date"!=String(new Date(NaN))&&o(i,"toString",(function(){var n=s(this);return n==n?a(this):"Invalid Date"}))},function(n,e,t){var r=t(111);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var r=t(9),o=t(3);n.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var r=t(9),o=t(3),i=t(80);n.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var r=t(0),o=t(11),i=t(8),a=t(82),s=t(48),c=t(234),l=t(6),d=r.TypeError,u=l("toPrimitive");n.exports=function(n,e){if(!i(n)||a(n))return n;var t,r=s(n,u);if(r){if(void 0===e&&(e="default"),t=o(r,n,e),!i(t)||a(t))return t;throw d("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(n,e)}},function(n,e,t){var r=t(2),o=t(10),i=t(20),a=t(112).indexOf,s=t(63),c=r([].push);n.exports=function(n,e){var t,r=i(n),l=0,d=[];for(t in r)!o(s,t)&&o(r,t)&&c(d,t);for(;e.length>l;)o(r,t=e[l++])&&(~a(d,t)||c(d,t));return d}},function(n,e,t){var r=t(16);n.exports=r("document","documentElement")},function(n,e,t){"use strict";var r=t(1),o=t(11),i=t(22),a=t(65),s=t(4),c=t(221),l=t(117),d=t(66),u=t(58),p=t(23),m=t(14),g=t(6),h=t(64),b=t(160),f=a.PROPER,v=a.CONFIGURABLE,k=b.IteratorPrototype,y=b.BUGGY_SAFARI_ITERATORS,x=g("iterator"),w=function(){return this};n.exports=function(n,e,t,a,g,b,S){c(t,e,a);var _,E,T,I=function(n){if(n===g&&z)return z;if(!y&&n in C)return C[n];switch(n){case"keys":case"values":case"entries":return function(){return new t(this,n)}}return function(){return new t(this)}},j=e+" Iterator",A=!1,C=n.prototype,D=C[x]||C["@@iterator"]||g&&C[g],z=!y&&D||I(g),M="Array"==e&&C.entries||D;if(M&&(_=l(M.call(new n)))!==Object.prototype&&_.next&&(i||l(_)===k||(d?d(_,k):s(_[x])||m(_,x,w)),u(_,j,!0,!0),i&&(h[j]=w)),f&&"values"==g&&D&&"values"!==D.name&&(!i&&v?p(C,"name","values"):(A=!0,z=function(){return o(D,this)})),g)if(E={values:I("values"),keys:b?z:I("keys"),entries:I("entries")},S)for(T in E)(y||A||!(T in C))&&m(C,T,E[T]);else r({target:e,proto:!0,forced:y||A},E);return i&&!S||C[x]===z||m(C,x,z,{name:g}),h[e]=z,E}},function(n,e,t){var r=t(16),o=t(2),i=t(57),a=t(116),s=t(7),c=o([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=i.f(s(n)),t=a.f;return t?c(e,t(n)):e}},function(n,e,t){"use strict";var r,o,i,a=t(3),s=t(4),c=t(34),l=t(117),d=t(14),u=t(6),p=t(22),m=u("iterator"),g=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(r=o):g=!0),null==r||a((function(){var n={};return r[m].call(n)!==n}))?r={}:p&&(r=c(r)),s(r[m])||d(r,m,(function(){return this})),n.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},function(n,e,t){var r=t(3);n.exports=!r((function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))},function(n,e,t){var r=t(0);n.exports=r.Promise},function(n,e,t){var r=t(6),o=t(64),i=r("iterator"),a=Array.prototype;n.exports=function(n){return void 0!==n&&(o.Array===n||a[i]===n)}},function(n,e,t){var r=t(11),o=t(7),i=t(48);n.exports=function(n,e,t){var a,s;o(n);try{if(!(a=i(n,"return"))){if("throw"===e)throw t;return t}a=r(a,n)}catch(n){s=!0,a=n}if("throw"===e)throw t;if(s)throw a;return o(a),t}},function(n,e,t){var r=t(6)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(n){}n.exports=function(n,e){if(!e&&!o)return!1;var t=!1;try{var i={};i[r]=function(){return{next:function(){return{done:t=!0}}}},n(i)}catch(n){}return t}},function(n,e,t){var r=t(0),o=t(88),i=t(83),a=r.TypeError;n.exports=function(n){if(o(n))return n;throw a(i(n)+" is not a constructor")}},function(n,e,t){var r,o,i,a,s=t(0),c=t(36),l=t(55),d=t(4),u=t(10),p=t(3),m=t(157),g=t(67),h=t(80),b=t(143),f=t(168),v=t(89),k=s.setImmediate,y=s.clearImmediate,x=s.process,w=s.Dispatch,S=s.Function,_=s.MessageChannel,E=s.String,T=0,I={};try{r=s.location}catch(n){}var j=function(n){if(u(I,n)){var e=I[n];delete I[n],e()}},A=function(n){return function(){j(n)}},C=function(n){j(n.data)},D=function(n){s.postMessage(E(n),r.protocol+"//"+r.host)};k&&y||(k=function(n){b(arguments.length,1);var e=d(n)?n:S(n),t=g(arguments,1);return I[++T]=function(){c(e,void 0,t)},o(T),T},y=function(n){delete I[n]},v?o=function(n){x.nextTick(A(n))}:w&&w.now?o=function(n){w.now(A(n))}:_&&!f?(a=(i=new _).port2,i.port1.onmessage=C,o=l(a.postMessage,a)):s.addEventListener&&d(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!p(D)?(o=D,s.addEventListener("message",C,!1)):o="onreadystatechange"in h("script")?function(n){m.appendChild(h("script")).onreadystatechange=function(){m.removeChild(this),j(n)}}:function(n){setTimeout(A(n),0)}),n.exports={set:k,clear:y}},function(n,e,t){var r=t(27);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(n,e,t){var r=t(7),o=t(8),i=t(170);n.exports=function(n,e){if(r(n),o(e)&&e.constructor===n)return e;var t=i.f(n);return(0,t.resolve)(e),t.promise}},function(n,e,t){"use strict";var r=t(37),o=function(n){var e,t;this.promise=new n((function(n,r){if(void 0!==e||void 0!==t)throw TypeError("Bad Promise constructor");e=n,t=r})),this.resolve=r(e),this.reject=r(t)};n.exports.f=function(n){return new o(n)}},function(n,e,t){var r=t(2),o=t(46),i=t(12),a=t(17),s=r("".charAt),c=r("".charCodeAt),l=r("".slice),d=function(n){return function(e,t){var r,d,u=i(a(e)),p=o(t),m=u.length;return p<0||p>=m?n?"":void 0:(r=c(u,p))<55296||r>56319||p+1===m||(d=c(u,p+1))<56320||d>57343?n?s(u,p):r:n?l(u,p,p+2):d-56320+(r-55296<<10)+65536}};n.exports={codeAt:d(!1),charAt:d(!0)}},function(n,e){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,e,t){var r=t(80)("span").classList,o=r&&r.constructor&&r.constructor.prototype;n.exports=o===Object.prototype?void 0:o},function(n,e,t){var r=t(1),o=t(3),i=t(15),a=t(117),s=t(161);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!s},{getPrototypeOf:function(n){return a(i(n))}})},function(n,e,t){var r=t(0),o=t(144),i=r.TypeError;n.exports=function(n){if(o(n))throw i("The method doesn't accept regular expressions");return n}},function(n,e,t){var r=t(6)("match");n.exports=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[r]=!1,"/./"[n](e)}catch(n){}}return!1}},function(n,e,t){"use strict";var r=t(56).forEach,o=t(47)("forEach");n.exports=o?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(n,e,t){var r=t(21),o=t(20),i=t(57).f,a=t(120),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(n){return s&&"Window"==r(n)?function(n){try{return i(n)}catch(n){return a(s)}}(n):i(o(n))}},function(n,e,t){var r=t(6);e.f=r},function(n,e,t){var r=t(258),o=t(10),i=t(180),a=t(13).f;n.exports=function(n){var e=r.Symbol||(r.Symbol={});o(e,n)||a(e,n,{value:i.f(n)})}},function(n,e,t){var r=t(1),o=t(259);r({target:"Array",stat:!0,forced:!t(165)((function(n){Array.from(n)}))},{from:o})},function(n,e,t){var r=t(12);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){t(1)({target:"Object",stat:!0,sham:!t(9)},{create:t(34)})},function(n,e,t){var r=t(1),o=t(0),i=t(16),a=t(36),s=t(2),c=t(3),l=o.Array,d=i("JSON","stringify"),u=s(/./.exec),p=s("".charAt),m=s("".charCodeAt),g=s("".replace),h=s(1..toString),b=/[\uD800-\uDFFF]/g,f=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,k=function(n,e,t){var r=p(t,e-1),o=p(t,e+1);return u(f,n)&&!u(v,o)||u(v,n)&&!u(f,r)?"\\u"+h(m(n,0),16):n},y=c((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&r({target:"JSON",stat:!0,forced:y},{stringify:function(n,e,t){for(var r=0,o=arguments.length,i=l(o);r<o;r++)i[r]=arguments[r];var s=a(d,null,i);return"string"==typeof s?g(s,b,k):s}})},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,o=n.length;++t<r;)n[o+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(93),o=t(280),i=t(281),a=t(282),s=t(283),c=t(284);function l(n){var e=this.__data__=new r(n);this.size=e.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(60),o=t(125);n.exports=function(n){if(!o(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(301),o=t(50);n.exports=function n(e,t,i,a,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!=e&&t!=t:r(e,t,i,a,n,s))}},function(n,e,t){var r=t(194),o=t(304),i=t(195);n.exports=function(n,e,t,a,s,c){var l=1&t,d=n.length,u=e.length;if(d!=u&&!(l&&u>d))return!1;var p=c.get(n),m=c.get(e);if(p&&m)return p==e&&m==n;var g=-1,h=!0,b=2&t?new r:void 0;for(c.set(n,e),c.set(e,n);++g<d;){var f=n[g],v=e[g];if(a)var k=l?a(v,f,g,e,n,c):a(f,v,g,n,e,c);if(void 0!==k){if(k)continue;h=!1;break}if(b){if(!o(e,(function(n,e){if(!i(b,e)&&(f===n||s(f,n,t,a,c)))return b.push(e)}))){h=!1;break}}else if(f!==v&&!s(f,v,t,a,c)){h=!1;break}}return c.delete(n),c.delete(e),h}},function(n,e,t){var r=t(126),o=t(302),i=t(303);function a(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,n.exports=a},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(314),o=t(320),i=t(200);n.exports=function(n){return i(n)?r(n):o(n)}},function(n,e,t){(function(n){var r=t(28),o=t(316),i=e&&!e.nodeType&&e,a=i&&"object"==typeof n&&n&&!n.nodeType&&n,s=a&&a.exports===i?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;n.exports=c}).call(this,t(147)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(317),o=t(318),i=t(319),a=i&&i.isTypedArray,s=a?o(a):r;n.exports=s},function(n,e,t){var r=t(190),o=t(128);n.exports=function(n){return null!=n&&o(n.length)&&!r(n)}},function(n,e,t){var r=t(41)(t(28),"Set");n.exports=r},function(n,e,t){var r=t(125);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(205),o=t(97);n.exports=function(n,e){for(var t=0,i=(e=r(e,n)).length;null!=n&&t<i;)n=n[o(e[t++])];return t&&t==i?n:void 0}},function(n,e,t){var r=t(26),o=t(129),i=t(331),a=t(334);n.exports=function(n,e){return r(n)?n:o(n,e)?[n]:i(a(n))}},function(n,e,t){"use strict";var r=t(0),o=t(2),i=t(37),a=t(8),s=t(10),c=t(67),l=t(62),d=r.Function,u=o([].concat),p=o([].join),m={},g=function(n,e,t){if(!s(m,e)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";m[e]=d("C,a","return new C("+p(r,",")+")")}return m[e](n,t)};n.exports=l?d.bind:function(n){var e=i(this),t=e.prototype,r=c(arguments,1),o=function(){var t=u(r,c(arguments));return this instanceof o?g(e,t.length,t):e.apply(n,t)};return a(t)&&(o.prototype=t),o}},function(n,e,t){"use strict";var r=t(1),o=t(366).start;r({target:"String",proto:!0,forced:t(368)},{padStart:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){},function(n,e,t){},function(n,e,t){t(1)({target:"Object",stat:!0},{setPrototypeOf:t(66)})},function(n,e,t){var r=t(1),o=t(16),i=t(36),a=t(206),s=t(166),c=t(7),l=t(8),d=t(34),u=t(3),p=o("Reflect","construct"),m=Object.prototype,g=[].push,h=u((function(){function n(){}return!(p((function(){}),[],n)instanceof n)})),b=!u((function(){p((function(){}))})),f=h||b;r({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(n,e){s(n),c(e);var t=arguments.length<3?n:s(arguments[2]);if(b&&!h)return p(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return i(g,r,e),new(i(a,n,r))}var o=t.prototype,u=d(l(o)?o:m),f=i(n,u,e);return l(f)?f:u}})},function(n,e,t){var r=t(1),o=t(0),i=t(58);r({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(267),o=t(272),i=t(343),a=t(351),s=t(360),c=t(229),l=i((function(n){var e=c(n);return s(e)&&(e=void 0),a(r(n,1,s,!0),o(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,o=r.exec(t);if(!o)return t;var i="",a=0,s=0;for(a=o.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==a&&(i+=t.substring(s,a)),s=a+1,i+=e}return s!==a?i+t.substring(s,a):i}},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},o=(t(369),t(29)),i=Object(o.a)(r,(function(){var n=this.$createElement;return(this._self._c||n)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=i.exports},function(n,e,t){"use strict";t.r(e);t(32),t(5),t(33),t(44),t(30);var r={name:"CodeGroup",data:function(){return{codeTabs:[],activeCodeTabIndex:-1}},watch:{activeCodeTabIndex:function(n){this.codeTabs.forEach((function(n){n.elm.classList.remove("theme-code-block__active")})),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted:function(){var n=this;this.codeTabs=(this.$slots.default||[]).filter((function(n){return Boolean(n.componentOptions)})).map((function(e,t){return""===e.componentOptions.propsData.active&&(n.activeCodeTabIndex=t),{title:e.componentOptions.propsData.title,elm:e.elm}})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab:function(n){this.activeCodeTabIndex=n}}},o=(t(370),t(29)),i=Object(o.a)(r,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"theme-code-group"},[t("div",{staticClass:"theme-code-group__nav"},[t("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(e,r){return t("li",{key:e.title,staticClass:"theme-code-group__li"},[t("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(e.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?t("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=i.exports},function(n,e,t){"use strict";var r=t(9),o=t(0),i=t(2),a=t(101),s=t(14),c=t(10),l=t(146),d=t(35),u=t(82),p=t(155),m=t(3),g=t(57).f,h=t(39).f,b=t(13).f,f=t(365),v=t(149).trim,k=o.Number,y=k.prototype,x=o.TypeError,w=i("".slice),S=i("".charCodeAt),_=function(n){var e=p(n,"number");return"bigint"==typeof e?e:E(e)},E=function(n){var e,t,r,o,i,a,s,c,l=p(n,"number");if(u(l))throw x("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),43===(e=S(l,0))||45===e){if(88===(t=S(l,2))||120===t)return NaN}else if(48===e){switch(S(l,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+l}for(a=(i=w(l,2)).length,s=0;s<a;s++)if((c=S(i,s))<48||c>o)return NaN;return parseInt(i,r)}return+l};if(a("Number",!k(" 0o1")||!k("0b1")||k("+0x1"))){for(var T,I=function(n){var e=arguments.length<1?0:k(_(n)),t=this;return d(y,t)&&m((function(){f(t)}))?l(Object(e),t,I):e},j=r?g(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;j.length>A;A++)c(k,T=j[A])&&!c(I,T)&&b(I,T,h(k,T));I.prototype=y,y.constructor=I,s(o,"Number",I)}},function(n,e,t){var r=t(3),o=t(0).RegExp;n.exports=r((function(){var n=o(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}))},function(n,e,t){"use strict";var r=t(160).IteratorPrototype,o=t(34),i=t(49),a=t(58),s=t(64),c=function(){return this};n.exports=function(n,e,t,l){var d=e+" Iterator";return n.prototype=o(r,{next:i(+!l,t)}),a(n,d,!1,!0),s[d]=c,n}},function(n,e,t){var r=t(14);n.exports=function(n,e,t){for(var o in e)r(n,o,e[o],t);return n}},function(n,e,t){"use strict";var r=t(16),o=t(13),i=t(6),a=t(9),s=i("species");n.exports=function(n){var e=r(n),t=o.f;a&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},function(n,e,t){var r=t(0),o=t(35),i=r.TypeError;n.exports=function(n,e){if(o(e,n))return n;throw i("Incorrect invocation")}},function(n,e,t){var r=t(1),o=t(9),i=t(159),a=t(20),s=t(39),c=t(53);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(n){for(var e,t,r=a(n),o=s.f,l=i(r),d={},u=0;l.length>u;)void 0!==(t=o(r,e=l[u++]))&&c(d,e,t);return d}})},function(n,e,t){var r=t(3),o=t(0).RegExp;n.exports=r((function(){var n=o("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}))},function(n,e,t){"use strict";var r=t(1),o=t(112).includes,i=t(136);r({target:"Array",proto:!0},{includes:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(n,e,t){"use strict";var r=t(1),o=t(2),i=t(175),a=t(17),s=t(12),c=t(176),l=o("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(n){return!!~l(s(a(this)),s(i(n)),arguments.length>1?arguments[1]:void 0)}})},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){"use strict";var r=t(1),o=t(149).trim;r({target:"String",proto:!0,forced:t(363)("trim")},{trim:function(){return o(this)}})},function(n,e,t){var r=t(120),o=Math.floor,i=function(n,e){var t=n.length,c=o(t/2);return t<8?a(n,e):s(n,i(r(n,0,c),e),i(r(n,c),e),e)},a=function(n,e){for(var t,r,o=n.length,i=1;i<o;){for(r=i,t=n[i];r&&e(n[r-1],t)>0;)n[r]=n[--r];r!==i++&&(n[r]=t)}return n},s=function(n,e,t,r){for(var o=e.length,i=t.length,a=0,s=0;a<o||s<i;)n[a+s]=a<o&&s<i?r(e[a],t[s])<=0?e[a++]:t[s++]:a<o?e[a++]:t[s++];return n};n.exports=i},function(n,e,t){var r=t(0),o=t(9),i=t(105).MISSED_STICKY,a=t(21),s=t(13).f,c=t(38).get,l=RegExp.prototype,d=r.TypeError;o&&i&&s(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===a(this))return!!c(this).sticky;throw d("Incompatible receiver, RegExp required")}}})},function(n,e,t){n.exports=t(380)},function(n,e,t){var r=t(0),o=t(11),i=t(4),a=t(8),s=r.TypeError;n.exports=function(n,e){var t,r;if("string"===e&&i(t=n.toString)&&!a(r=o(t,n)))return r;if(i(t=n.valueOf)&&!a(r=o(t,n)))return r;if("string"!==e&&i(t=n.toString)&&!a(r=o(t,n)))return r;throw s("Can't convert object to primitive value")}},function(n,e,t){var r=t(0),o=t(4),i=t(87),a=r.WeakMap;n.exports=o(a)&&/native code/.test(i(a))},function(n,e,t){var r=t(0),o=t(4),i=r.String,a=r.TypeError;n.exports=function(n){if("object"==typeof n||o(n))return n;throw a("Can't set "+i(n)+" as a prototype")}},function(n,e,t){"use strict";var r,o,i,a,s=t(1),c=t(22),l=t(0),d=t(16),u=t(11),p=t(162),m=t(14),g=t(222),h=t(66),b=t(58),f=t(223),v=t(37),k=t(4),y=t(8),x=t(224),w=t(87),S=t(238),_=t(165),E=t(119),T=t(167).set,I=t(239),j=t(169),A=t(242),C=t(170),D=t(243),z=t(244),M=t(38),P=t(101),O=t(6),R=t(245),N=t(89),L=t(51),q=O("species"),B="Promise",U=M.getterFor(B),$=M.set,G=M.getterFor(B),F=p&&p.prototype,H=p,K=F,J=l.TypeError,V=l.document,W=l.process,Q=C.f,Y=Q,X=!!(V&&V.createEvent&&l.dispatchEvent),Z=k(l.PromiseRejectionEvent),nn=!1,en=P(B,(function(){var n=w(H),e=n!==String(H);if(!e&&66===L)return!0;if(c&&!K.finally)return!0;if(L>=51&&/native code/.test(n))return!1;var t=new H((function(n){n(1)})),r=function(n){n((function(){}),(function(){}))};return(t.constructor={})[q]=r,!(nn=t.then((function(){}))instanceof r)||!e&&R&&!Z})),tn=en||!_((function(n){H.all(n).catch((function(){}))})),rn=function(n){var e;return!(!y(n)||!k(e=n.then))&&e},on=function(n,e){var t,r,o,i=e.value,a=1==e.state,s=a?n.ok:n.fail,c=n.resolve,l=n.reject,d=n.domain;try{s?(a||(2===e.rejection&&dn(e),e.rejection=1),!0===s?t=i:(d&&d.enter(),t=s(i),d&&(d.exit(),o=!0)),t===n.promise?l(J("Promise-chain cycle")):(r=rn(t))?u(r,t,c,l):c(t)):l(i)}catch(n){d&&!o&&d.exit(),l(n)}},an=function(n,e){n.notified||(n.notified=!0,I((function(){for(var t,r=n.reactions;t=r.get();)on(t,n);n.notified=!1,e&&!n.rejection&&cn(n)})))},sn=function(n,e,t){var r,o;X?((r=V.createEvent("Event")).promise=e,r.reason=t,r.initEvent(n,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:t},!Z&&(o=l["on"+n])?o(r):"unhandledrejection"===n&&A("Unhandled promise rejection",t)},cn=function(n){u(T,l,(function(){var e,t=n.facade,r=n.value;if(ln(n)&&(e=D((function(){N?W.emit("unhandledRejection",r,t):sn("unhandledrejection",t,r)})),n.rejection=N||ln(n)?2:1,e.error))throw e.value}))},ln=function(n){return 1!==n.rejection&&!n.parent},dn=function(n){u(T,l,(function(){var e=n.facade;N?W.emit("rejectionHandled",e):sn("rejectionhandled",e,n.value)}))},un=function(n,e,t){return function(r){n(e,r,t)}},pn=function(n,e,t){n.done||(n.done=!0,t&&(n=t),n.value=e,n.state=2,an(n,!0))},mn=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw J("Promise can't be resolved itself");var r=rn(e);r?I((function(){var t={done:!1};try{u(r,e,un(mn,t,n),un(pn,t,n))}catch(e){pn(t,e,n)}})):(n.value=e,n.state=1,an(n,!1))}catch(e){pn({done:!1},e,n)}}};if(en&&(K=(H=function(n){x(this,K),v(n),u(r,this);var e=U(this);try{n(un(mn,e),un(pn,e))}catch(n){pn(e,n)}}).prototype,(r=function(n){$(this,{type:B,done:!1,notified:!1,parent:!1,reactions:new z,rejection:!1,state:0,value:void 0})}).prototype=g(K,{then:function(n,e){var t=G(this),r=Q(E(this,H));return t.parent=!0,r.ok=!k(n)||n,r.fail=k(e)&&e,r.domain=N?W.domain:void 0,0==t.state?t.reactions.add(r):I((function(){on(r,t)})),r.promise},catch:function(n){return this.then(void 0,n)}}),o=function(){var n=new r,e=U(n);this.promise=n,this.resolve=un(mn,e),this.reject=un(pn,e)},C.f=Q=function(n){return n===H||n===i?new o(n):Y(n)},!c&&k(p)&&F!==Object.prototype)){a=F.then,nn||(m(F,"then",(function(n,e){var t=this;return new H((function(n,e){u(a,t,n,e)})).then(n,e)}),{unsafe:!0}),m(F,"catch",K.catch,{unsafe:!0}));try{delete F.constructor}catch(n){}h&&h(F,K)}s({global:!0,wrap:!0,forced:en},{Promise:H}),b(H,B,!1,!0),f(B),i=d(B),s({target:B,stat:!0,forced:en},{reject:function(n){var e=Q(this);return u(e.reject,void 0,n),e.promise}}),s({target:B,stat:!0,forced:c||en},{resolve:function(n){return j(c&&this===i?H:this,n)}}),s({target:B,stat:!0,forced:tn},{all:function(n){var e=this,t=Q(e),r=t.resolve,o=t.reject,i=D((function(){var t=v(e.resolve),i=[],a=0,s=1;S(n,(function(n){var c=a++,l=!1;s++,u(t,e,n).then((function(n){l||(l=!0,i[c]=n,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),t.promise},race:function(n){var e=this,t=Q(e),r=t.reject,o=D((function(){var o=v(e.resolve);S(n,(function(n){u(o,e,n).then(t.resolve,r)}))}));return o.error&&r(o.value),t.promise}})},function(n,e,t){var r=t(0),o=t(55),i=t(11),a=t(7),s=t(83),c=t(163),l=t(19),d=t(35),u=t(142),p=t(102),m=t(164),g=r.TypeError,h=function(n,e){this.stopped=n,this.result=e},b=h.prototype;n.exports=function(n,e,t){var r,f,v,k,y,x,w,S=t&&t.that,_=!(!t||!t.AS_ENTRIES),E=!(!t||!t.IS_ITERATOR),T=!(!t||!t.INTERRUPTED),I=o(e,S),j=function(n){return r&&m(r,"normal",n),new h(!0,n)},A=function(n){return _?(a(n),T?I(n[0],n[1],j):I(n[0],n[1])):T?I(n,j):I(n)};if(E)r=n;else{if(!(f=p(n)))throw g(s(n)+" is not iterable");if(c(f)){for(v=0,k=l(n);k>v;v++)if((y=A(n[v]))&&d(b,y))return y;return new h(!1)}r=u(n,f)}for(x=r.next;!(w=i(x,r)).done;){try{y=A(w.value)}catch(n){m(r,"throw",n)}if("object"==typeof y&&y&&d(b,y))return y}return new h(!1)}},function(n,e,t){var r,o,i,a,s,c,l,d,u=t(0),p=t(55),m=t(39).f,g=t(167).set,h=t(168),b=t(240),f=t(241),v=t(89),k=u.MutationObserver||u.WebKitMutationObserver,y=u.document,x=u.process,w=u.Promise,S=m(u,"queueMicrotask"),_=S&&S.value;_||(r=function(){var n,e;for(v&&(n=x.domain)&&n.exit();o;){e=o.fn,o=o.next;try{e()}catch(n){throw o?a():i=void 0,n}}i=void 0,n&&n.enter()},h||v||f||!k||!y?!b&&w&&w.resolve?((l=w.resolve(void 0)).constructor=w,d=p(l.then,l),a=function(){d(r)}):v?a=function(){x.nextTick(r)}:(g=p(g,u),a=function(){g(r)}):(s=!0,c=y.createTextNode(""),new k(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),n.exports=_||function(n){var e={fn:n,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},function(n,e,t){var r=t(27),o=t(0);n.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},function(n,e,t){var r=t(27);n.exports=/web0s(?!.*chrome)/i.test(r)},function(n,e,t){var r=t(0);n.exports=function(n,e){var t=r.console;t&&t.error&&(1==arguments.length?t.error(n):t.error(n,e))}},function(n,e){n.exports=function(n){try{return{error:!1,value:n()}}catch(n){return{error:!0,value:n}}}},function(n,e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(n){var e={item:n,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},n.exports=t},function(n,e){n.exports="object"==typeof window},function(n,e,t){var r=t(1),o=t(247);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(n,e,t){"use strict";var r=t(9),o=t(2),i=t(11),a=t(3),s=t(84),c=t(116),l=t(114),d=t(15),u=t(61),p=Object.assign,m=Object.defineProperty,g=o([].concat);n.exports=!p||a((function(){if(r&&1!==p({b:1},p(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},e={},t=Symbol();return n[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(n){e[n]=n})),7!=p({},n)[t]||"abcdefghijklmnopqrst"!=s(p({},e)).join("")}))?function(n,e){for(var t=d(n),o=arguments.length,a=1,p=c.f,m=l.f;o>a;)for(var h,b=u(arguments[a++]),f=p?g(s(b),p(b)):s(b),v=f.length,k=0;v>k;)h=f[k++],r&&!i(m,b,h)||(t[h]=b[h]);return t}:p},function(n,e,t){"use strict";var r=t(1),o=t(22),i=t(162),a=t(3),s=t(16),c=t(4),l=t(119),d=t(169),u=t(14);if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(n){var e=l(this,s("Promise")),t=c(n);return this.then(t?function(t){return d(e,n()).then((function(){return t}))}:n,t?function(t){return d(e,n()).then((function(){throw t}))}:n)}}),!o&&c(i)){var p=s("Promise").prototype.finally;i.prototype.finally!==p&&u(i.prototype,"finally",p,{unsafe:!0})}},function(n,e,t){"use strict";var r=t(118),o=t(75);n.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(n,e,t){var r=t(0),o=t(59),i=t(88),a=t(8),s=t(6)("species"),c=r.Array;n.exports=function(n){var e;return o(n)&&(e=n.constructor,(i(e)&&(e===c||o(e.prototype))||a(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},function(n,e,t){"use strict";var r=t(1),o=t(252).left,i=t(47),a=t(51),s=t(89);r({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(n){var e=arguments.length;return o(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),o=t(37),i=t(15),a=t(61),s=t(19),c=r.TypeError,l=function(n){return function(e,t,r,l){o(t);var d=i(e),u=a(d),p=s(d),m=n?p-1:0,g=n?-1:1;if(r<2)for(;;){if(m in u){l=u[m],m+=g;break}if(m+=g,n?m<0:p<=m)throw c("Reduce of empty array with no initial value")}for(;n?m>=0:p>m;m+=g)m in u&&(l=t(l,u[m],m,d));return l}};n.exports={left:l(!1),right:l(!0)}},function(n,e,t){"use strict";var r,o=t(1),i=t(2),a=t(39).f,s=t(52),c=t(12),l=t(175),d=t(17),u=t(176),p=t(22),m=i("".startsWith),g=i("".slice),h=Math.min,b=u("startsWith");o({target:"String",proto:!0,forced:!!(p||b||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!b},{startsWith:function(n){var e=c(d(this));l(n);var t=s(h(arguments.length>1?arguments[1]:void 0,e.length)),r=c(n);return m?m(e,r,t):g(e,t,t+r.length)===r}})},function(n,e,t){var r=t(1),o=t(178),i=t(3),a=t(8),s=t(255).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:i((function(){c(1)})),sham:!o},{freeze:function(n){return c&&a(n)?c(s(n)):n}})},function(n,e,t){var r=t(1),o=t(2),i=t(63),a=t(8),s=t(10),c=t(13).f,l=t(57),d=t(179),u=t(256),p=t(79),m=t(178),g=!1,h=p("meta"),b=0,f=function(n){c(n,h,{value:{objectID:"O"+b++,weakData:{}}})},v=n.exports={enable:function(){v.enable=function(){},g=!0;var n=l.f,e=o([].splice),t={};t[h]=1,n(t).length&&(l.f=function(t){for(var r=n(t),o=0,i=r.length;o<i;o++)if(r[o]===h){e(r,o,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(n,e){if(!a(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!s(n,h)){if(!u(n))return"F";if(!e)return"E";f(n)}return n[h].objectID},getWeakData:function(n,e){if(!s(n,h)){if(!u(n))return!0;if(!e)return!1;f(n)}return n[h].weakData},onFreeze:function(n){return m&&g&&u(n)&&!s(n,h)&&f(n),n}};i[h]=!0},function(n,e,t){var r=t(3),o=t(8),i=t(21),a=t(257),s=Object.isExtensible,c=r((function(){s(1)}));n.exports=c||a?function(n){return!!o(n)&&((!a||"ArrayBuffer"!=i(n))&&(!s||s(n)))}:s},function(n,e,t){var r=t(3);n.exports=r((function(){if("function"==typeof ArrayBuffer){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}))},function(n,e,t){var r=t(0);n.exports=r},function(n,e,t){"use strict";var r=t(0),o=t(55),i=t(11),a=t(15),s=t(260),c=t(163),l=t(88),d=t(19),u=t(53),p=t(142),m=t(102),g=r.Array;n.exports=function(n){var e=a(n),t=l(this),r=arguments.length,h=r>1?arguments[1]:void 0,b=void 0!==h;b&&(h=o(h,r>2?arguments[2]:void 0));var f,v,k,y,x,w,S=m(e),_=0;if(!S||this==g&&c(S))for(f=d(e),v=t?new this(f):g(f);f>_;_++)w=b?h(e[_],_):e[_],u(v,_,w);else for(x=(y=p(e,S)).next,v=t?new this:[];!(k=i(x,y)).done;_++)w=b?s(y,h,[k.value,_],!0):k.value,u(v,_,w);return v.length=_,v}},function(n,e,t){var r=t(7),o=t(164);n.exports=function(n,e,t,i){try{return i?e(r(t)[0],t[1]):e(t)}catch(e){o(n,"throw",e)}}},function(n,e,t){"use strict";var r=t(16),o=t(10),i=t(23),a=t(35),s=t(66),c=t(115),l=t(146),d=t(183),u=t(262),p=t(263),m=t(264),g=t(22);n.exports=function(n,e,t,h){var b=h?2:1,f=n.split("."),v=f[f.length-1],k=r.apply(null,f);if(k){var y=k.prototype;if(!g&&o(y,"cause")&&delete y.cause,!t)return k;var x=r("Error"),w=e((function(n,e){var t=d(h?e:n,void 0),r=h?new k(n):new k;return void 0!==t&&i(r,"message",t),m&&i(r,"stack",p(r.stack,2)),this&&a(y,this)&&l(r,this,w),arguments.length>b&&u(r,arguments[b]),r}));if(w.prototype=y,"Error"!==v&&(s?s(w,x):c(w,x,{name:!0})),c(w,k),!g)try{y.name!==v&&i(y,"name",v),y.constructor=w}catch(n){}return w}}},function(n,e,t){var r=t(8),o=t(23);n.exports=function(n,e){r(e)&&"cause"in e&&o(n,"cause",e.cause)}},function(n,e,t){var r=t(2)("".replace),o=String(Error("zxcasd").stack),i=/\n\s*at [^:]*:[^\n]*/,a=i.test(o);n.exports=function(n,e){if(a&&"string"==typeof n)for(;e--;)n=r(n,i,"");return n}},function(n,e,t){var r=t(3),o=t(49);n.exports=!r((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",o(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(9),o=t(3),i=t(7),a=t(34),s=t(183),c=Error.prototype.toString,l=o((function(){if(r){var n=a(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==c.call(n))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));n.exports=l?function(){var n=i(this),e=s(n.name,"Error"),t=s(n.message);return e?t?e+": "+t:e:t}:c},function(n,e,t){var r=t(2),o=t(15),i=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;n.exports=function(n,e,t,r,u,p){var m=t+n.length,g=r.length,h=d;return void 0!==u&&(u=o(u),h=l),s(p,h,(function(o,s){var l;switch(a(s,0)){case"$":return"$";case"&":return n;case"`":return c(e,0,t);case"'":return c(e,m);case"<":l=u[c(s,1,-1)];break;default:var d=+s;if(0===d)return o;if(d>g){var p=i(d/10);return 0===p?o:p<=g?void 0===r[p-1]?a(s,1):r[p-1]+a(s,1):o}l=r[d-1]}return void 0===l?"":l}))}},function(n,e,t){var r=t(186),o=t(268);n.exports=function n(e,t,i,a,s){var c=-1,l=e.length;for(i||(i=o),s||(s=[]);++c<l;){var d=e[c];t>0&&i(d)?t>1?n(d,t-1,i,a,s):r(s,d):a||(s[s.length]=d)}return s}},function(n,e,t){var r=t(69),o=t(123),i=t(26),a=r?r.isConcatSpreadable:void 0;n.exports=function(n){return i(n)||o(n)||!!(a&&n&&n[a])}},function(n,e,t){var r=t(60),o=t(50);n.exports=function(n){return o(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(69),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=i.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var o=a.call(n);return r&&(e?n[s]=t:delete n[s]),o}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(273),o=t(329),i=t(131),a=t(26),s=t(340);n.exports=function(n){return"function"==typeof n?n:null==n?i:"object"==typeof n?a(n)?o(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(274),o=t(328),i=t(203);n.exports=function(n){var e=o(n);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(188),o=t(192);n.exports=function(n,e,t,i){var a=t.length,s=a,c=!i;if(null==n)return!s;for(n=Object(n);a--;){var l=t[a];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++a<s;){var d=(l=t[a])[0],u=n[d],p=l[1];if(c&&l[2]){if(void 0===u&&!(d in n))return!1}else{var m=new r;if(i)var g=i(u,p,d,n,e,m);if(!(void 0===g?o(p,u,3,i,m):g))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(94),o=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():o.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(94);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(94);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(94);n.exports=function(n,e){var t=this.__data__,o=r(t,n);return o<0?(++this.size,t.push([n,e])):t[o][1]=e,this}},function(n,e,t){var r=t(93);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(93),o=t(124),i=t(126);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var a=t.__data__;if(!o||a.length<199)return a.push([n,e]),this.size=++t.size,this;t=this.__data__=new i(a)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(190),o=t(286),i=t(125),a=t(191),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,d=c.toString,u=l.hasOwnProperty,p=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!i(n)||o(n))&&(r(n)?p:s).test(a(n))}},function(n,e,t){var r,o=t(287),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!i&&i in n}},function(n,e,t){var r=t(28)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(290),o=t(93),i=t(124);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(n,e,t){var r=t(291),o=t(292),i=t(293),a=t(294),s=t(295);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(95);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(95),o=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return o.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(95),o=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:o.call(e,n)}},function(n,e,t){var r=t(95);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(96);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(96);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(96);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(96);n.exports=function(n,e){var t=r(this,n),o=t.size;return t.set(n,e),this.size+=t.size==o?0:1,this}},function(n,e,t){var r=t(188),o=t(193),i=t(305),a=t(308),s=t(324),c=t(26),l=t(197),d=t(199),u="[object Object]",p=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,m,g,h){var b=c(n),f=c(e),v=b?"[object Array]":s(n),k=f?"[object Array]":s(e),y=(v="[object Arguments]"==v?u:v)==u,x=(k="[object Arguments]"==k?u:k)==u,w=v==k;if(w&&l(n)){if(!l(e))return!1;b=!0,y=!1}if(w&&!y)return h||(h=new r),b||d(n)?o(n,e,t,m,g,h):i(n,e,v,t,m,g,h);if(!(1&t)){var S=y&&p.call(n,"__wrapped__"),_=x&&p.call(e,"__wrapped__");if(S||_){var E=S?n.value():n,T=_?e.value():e;return h||(h=new r),g(E,T,t,m,h)}}return!!w&&(h||(h=new r),a(n,e,t,m,g,h))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(69),o=t(306),i=t(189),a=t(193),s=t(307),c=t(127),l=r?r.prototype:void 0,d=l?l.valueOf:void 0;n.exports=function(n,e,t,r,l,u,p){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!u(new o(n),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var m=s;case"[object Set]":var g=1&r;if(m||(m=c),n.size!=e.size&&!g)return!1;var h=p.get(n);if(h)return h==e;r|=2,p.set(n,e);var b=a(m(n),m(e),r,l,u,p);return p.delete(n),b;case"[object Symbol]":if(d)return d.call(n)==d.call(e)}return!1}},function(n,e,t){var r=t(28).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(309),o=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,i,a,s){var c=1&t,l=r(n),d=l.length;if(d!=r(e).length&&!c)return!1;for(var u=d;u--;){var p=l[u];if(!(c?p in e:o.call(e,p)))return!1}var m=s.get(n),g=s.get(e);if(m&&g)return m==e&&g==n;var h=!0;s.set(n,e),s.set(e,n);for(var b=c;++u<d;){var f=n[p=l[u]],v=e[p];if(i)var k=c?i(v,f,p,e,n,s):i(f,v,p,n,e,s);if(!(void 0===k?f===v||a(f,v,t,i,s):k)){h=!1;break}b||(b="constructor"==p)}if(h&&!b){var y=n.constructor,x=e.constructor;y==x||!("constructor"in n)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(h=!1)}return s.delete(n),s.delete(e),h}},function(n,e,t){var r=t(310),o=t(311),i=t(196);n.exports=function(n){return r(n,i,o)}},function(n,e,t){var r=t(186),o=t(26);n.exports=function(n,e,t){var i=e(n);return o(n)?i:r(i,t(n))}},function(n,e,t){var r=t(312),o=t(313),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(n){return null==n?[]:(n=Object(n),r(a(n),(function(e){return i.call(n,e)})))}:o;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,o=0,i=[];++t<r;){var a=n[t];e(a,t,n)&&(i[o++]=a)}return i}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(315),o=t(123),i=t(26),a=t(197),s=t(198),c=t(199),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=i(n),d=!t&&o(n),u=!t&&!d&&a(n),p=!t&&!d&&!u&&c(n),m=t||d||u||p,g=m?r(n.length,String):[],h=g.length;for(var b in n)!e&&!l.call(n,b)||m&&("length"==b||u&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||s(b,h))||g.push(b);return g}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(60),o=t(128),i=t(50),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,n.exports=function(n){return i(n)&&o(n.length)&&!!a[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(187),o=e&&!e.nodeType&&e,i=o&&"object"==typeof n&&n&&!n.nodeType&&n,a=i&&i.exports===o&&r.process,s=function(){try{var n=i&&i.require&&i.require("util").types;return n||a&&a.binding&&a.binding("util")}catch(n){}}();n.exports=s}).call(this,t(147)(n))},function(n,e,t){var r=t(321),o=t(322),i=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return o(n);var e=[];for(var t in Object(n))i.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(323)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(325),o=t(124),i=t(326),a=t(201),s=t(327),c=t(60),l=t(191),d=l(r),u=l(o),p=l(i),m=l(a),g=l(s),h=c;(r&&"[object DataView]"!=h(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=h(new o)||i&&"[object Promise]"!=h(i.resolve())||a&&"[object Set]"!=h(new a)||s&&"[object WeakMap]"!=h(new s))&&(h=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,r=t?l(t):"";if(r)switch(r){case d:return"[object DataView]";case u:return"[object Map]";case p:return"[object Promise]";case m:return"[object Set]";case g:return"[object WeakMap]"}return e}),n.exports=h},function(n,e,t){var r=t(41)(t(28),"DataView");n.exports=r},function(n,e,t){var r=t(41)(t(28),"Promise");n.exports=r},function(n,e,t){var r=t(41)(t(28),"WeakMap");n.exports=r},function(n,e,t){var r=t(202),o=t(196);n.exports=function(n){for(var e=o(n),t=e.length;t--;){var i=e[t],a=n[i];e[t]=[i,a,r(a)]}return e}},function(n,e,t){var r=t(192),o=t(330),i=t(337),a=t(129),s=t(202),c=t(203),l=t(97);n.exports=function(n,e){return a(n)&&s(e)?c(l(n),e):function(t){var a=o(t,n);return void 0===a&&a===e?i(t,n):r(e,a,3)}}},function(n,e,t){var r=t(204);n.exports=function(n,e,t){var o=null==n?void 0:r(n,e);return void 0===o?t:o}},function(n,e,t){var r=t(332),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(o,(function(n,t,r,o){e.push(r?o.replace(i,"$1"):t||n)})),e}));n.exports=a},function(n,e,t){var r=t(333);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(126);function o(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=t.cache;if(i.has(o))return i.get(o);var a=n.apply(this,r);return t.cache=i.set(o,a)||i,a};return t.cache=new(o.Cache||r),t}o.Cache=r,n.exports=o},function(n,e,t){var r=t(335);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(69),o=t(336),i=t(26),a=t(130),s=r?r.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(i(e))return o(e,n)+"";if(a(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,o=Array(r);++t<r;)o[t]=e(n[t],t,n);return o}},function(n,e,t){var r=t(338),o=t(339);n.exports=function(n,e){return null!=n&&o(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(205),o=t(123),i=t(26),a=t(198),s=t(128),c=t(97);n.exports=function(n,e,t){for(var l=-1,d=(e=r(e,n)).length,u=!1;++l<d;){var p=c(e[l]);if(!(u=null!=n&&t(n,p)))break;n=n[p]}return u||++l!=d?u:!!(d=null==n?0:n.length)&&s(d)&&a(p,d)&&(i(n)||o(n))}},function(n,e,t){var r=t(341),o=t(342),i=t(129),a=t(97);n.exports=function(n){return i(n)?r(a(n)):o(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(204);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(131),o=t(344),i=t(346);n.exports=function(n,e){return i(o(n,e,r),n+"")}},function(n,e,t){var r=t(345),o=Math.max;n.exports=function(n,e,t){return e=o(void 0===e?n.length-1:e,0),function(){for(var i=arguments,a=-1,s=o(i.length-e,0),c=Array(s);++a<s;)c[a]=i[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=i[a];return l[e]=t(c),r(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(347),o=t(350)(r);n.exports=o},function(n,e,t){var r=t(348),o=t(349),i=t(131),a=o?function(n,e){return o(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;n.exports=a},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(41),o=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=o},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var o=t(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(194),o=t(352),i=t(357),a=t(195),s=t(358),c=t(127);n.exports=function(n,e,t){var l=-1,d=o,u=n.length,p=!0,m=[],g=m;if(t)p=!1,d=i;else if(u>=200){var h=e?null:s(n);if(h)return c(h);p=!1,d=a,g=new r}else g=e?[]:m;n:for(;++l<u;){var b=n[l],f=e?e(b):b;if(b=t||0!==b?b:0,p&&f==f){for(var v=g.length;v--;)if(g[v]===f)continue n;e&&g.push(f),m.push(b)}else d(g,f,t)||(g!==m&&g.push(f),m.push(b))}return m}},function(n,e,t){var r=t(353);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(354),o=t(355),i=t(356);n.exports=function(n,e,t){return e==e?i(n,e,t):r(n,o,t)}},function(n,e){n.exports=function(n,e,t,r){for(var o=n.length,i=t+(r?1:-1);r?i--:++i<o;)if(e(n[i],i,n))return i;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,o=n.length;++r<o;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,o=null==n?0:n.length;++r<o;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(201),o=t(359),i=t(127),a=r&&1/i(new r([,-0]))[1]==1/0?function(n){return new r(n)}:o;n.exports=a},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(200),o=t(50);n.exports=function(n){return o(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(65).PROPER,o=t(3),i=t(150);n.exports=function(n){return o((function(){return!!i[n]()||"âÂá "!=="âÂá "[n]()||r&&i[n].name!==n}))}},function(n,e,t){var r=t(1),o=t(206);r({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},function(n,e,t){var r=t(2);n.exports=r(1..valueOf)},function(n,e,t){var r=t(2),o=t(52),i=t(12),a=t(367),s=t(17),c=r(a),l=r("".slice),d=Math.ceil,u=function(n){return function(e,t,r){var a,u,p=i(s(e)),m=o(t),g=p.length,h=void 0===r?" ":i(r);return m<=g||""==h?p:((u=c(h,d((a=m-g)/h.length))).length>a&&(u=l(u,0,a)),n?p+u:u+p)}};n.exports={start:u(!1),end:u(!0)}},function(n,e,t){"use strict";var r=t(0),o=t(46),i=t(12),a=t(17),s=r.RangeError;n.exports=function(n){var e=i(a(this)),t="",r=o(n);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(t+=e);return t}},function(n,e,t){var r=t(27);n.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(n,e,t){"use strict";t(208)},function(n,e,t){"use strict";t(209)},function(n,e,t){"use strict";var r=t(1),o=t(2),i=t(37),a=t(15),s=t(19),c=t(12),l=t(3),d=t(231),u=t(47),p=t(372),m=t(373),g=t(51),h=t(374),b=[],f=o(b.sort),v=o(b.push),k=l((function(){b.sort(void 0)})),y=l((function(){b.sort(null)})),x=u("sort"),w=!l((function(){if(g)return g<70;if(!(p&&p>3)){if(m)return!0;if(h)return h<603;var n,e,t,r,o="";for(n=65;n<76;n++){switch(e=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)b.push({k:e+r,v:t})}for(b.sort((function(n,e){return e.v-n.v})),r=0;r<b.length;r++)e=b[r].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));r({target:"Array",proto:!0,forced:k||!y||!x||!w},{sort:function(n){void 0!==n&&i(n);var e=a(this);if(w)return void 0===n?f(e):f(e,n);var t,r,o=[],l=s(e);for(r=0;r<l;r++)r in e&&v(o,e[r]);for(d(o,function(n){return function(e,t){return void 0===t?-1:void 0===e?1:void 0!==n?+n(e,t)||0:c(e)>c(t)?1:-1}}(n)),t=o.length,r=0;r<t;)e[r]=o[r++];for(;r<l;)delete e[r++];return e}})},function(n,e,t){var r=t(27).match(/firefox\/(\d+)/i);n.exports=!!r&&+r[1]},function(n,e,t){var r=t(27);n.exports=/MSIE|Trident/.test(r)},function(n,e,t){var r=t(27).match(/AppleWebKit\/(\d+)\./);n.exports=!!r&&+r[1]},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";var r=t(1),o=t(0),i=t(85),a=t(46),s=t(19),c=t(15),l=t(103),d=t(53),u=t(68)("splice"),p=o.TypeError,m=Math.max,g=Math.min;r({target:"Array",proto:!0,forced:!u},{splice:function(n,e){var t,r,o,u,h,b,f=c(this),v=s(f),k=i(n,v),y=arguments.length;if(0===y?t=r=0:1===y?(t=0,r=v-k):(t=y-2,r=g(m(a(e),0),v-k)),v+t-r>9007199254740991)throw p("Maximum allowed length exceeded");for(o=l(f,r),u=0;u<r;u++)(h=k+u)in f&&d(o,u,f[h]);if(o.length=r,t<r){for(u=k;u<v-r;u++)b=u+t,(h=u+r)in f?f[b]=f[h]:delete f[b];for(u=v;u>v-r+t;u--)delete f[u-1]}else if(t>r)for(u=v-r;u>k;u--)b=u+t-1,(h=u+r-1)in f?f[b]=f[h]:delete f[b];for(u=0;u<t;u++)f[u+k]=arguments[u+2];return f.length=v-r+t,o}})},function(n,e,t){"use strict";t(213)},function(n,e,t){"use strict";t(214)},function(n,e,t){"use strict";t.r(e);t(140),t(237),t(246),t(248);var r=t(90),o=(t(137),t(54),t(5),t(24),t(31),t(44),t(30),Object.freeze({}));function i(n){return null==n}function a(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return null!==n&&"object"==typeof n}var d=Object.prototype.toString;function u(n){return"[object Object]"===d.call(n)}function p(n){return"[object RegExp]"===d.call(n)}function m(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function g(n){return a(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function h(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===d?JSON.stringify(n,null,2):String(n)}function b(n){var e=parseFloat(n);return isNaN(e)?n:e}function f(n,e){for(var t=Object.create(null),r=n.split(","),o=0;o<r.length;o++)t[r[o]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}f("slot,component",!0);var v=f("key,ref,slot,slot-scope,is");function k(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var y=Object.prototype.hasOwnProperty;function x(n,e){return y.call(n,e)}function w(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var S=/-(\w)/g,_=w((function(n){return n.replace(S,(function(n,e){return e?e.toUpperCase():""}))})),E=w((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),T=/\B([A-Z])/g,I=w((function(n){return n.replace(T,"-$1").toLowerCase()}));var j=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function A(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function C(n,e){for(var t in e)n[t]=e[t];return n}function D(n){for(var e={},t=0;t<n.length;t++)n[t]&&C(e,n[t]);return e}function z(n,e,t){}var M=function(n,e,t){return!1},P=function(n){return n};function O(n,e){if(n===e)return!0;var t=l(n),r=l(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var o=Array.isArray(n),i=Array.isArray(e);if(o&&i)return n.length===e.length&&n.every((function(n,t){return O(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(o||i)return!1;var a=Object.keys(n),s=Object.keys(e);return a.length===s.length&&a.every((function(t){return O(n[t],e[t])}))}catch(n){return!1}}function R(n,e){for(var t=0;t<n.length;t++)if(O(n[t],e))return t;return-1}function N(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}var L=["component","directive","filter"],q=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],B={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:M,isReservedAttr:M,isUnknownElement:M,getTagNamespace:z,parsePlatformTagName:P,mustUseProp:M,async:!0,_lifecycleHooks:q},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function $(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var G=new RegExp("[^"+U.source+".$_\\d]");var F,H="__proto__"in{},K="undefined"!=typeof window,J="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,V=J&&WXEnvironment.platform.toLowerCase(),W=K&&window.navigator.userAgent.toLowerCase(),Q=W&&/msie|trident/.test(W),Y=W&&W.indexOf("msie 9.0")>0,X=W&&W.indexOf("edge/")>0,Z=(W&&W.indexOf("android"),W&&/iphone|ipad|ipod|ios/.test(W)||"ios"===V),nn=(W&&/chrome\/\d+/.test(W),W&&/phantomjs/.test(W),W&&W.match(/firefox\/(\d+)/)),en={}.watch,tn=!1;if(K)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){tn=!0}}),window.addEventListener("test-passive",null,rn)}catch(n){}var on=function(){return void 0===F&&(F=!K&&!J&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),F},an=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function sn(n){return"function"==typeof n&&/native code/.test(n.toString())}var cn,ln="undefined"!=typeof Symbol&&sn(Symbol)&&"undefined"!=typeof Reflect&&sn(Reflect.ownKeys);cn="undefined"!=typeof Set&&sn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var dn=z,un=0,pn=function(){this.id=un++,this.subs=[]};pn.prototype.addSub=function(n){this.subs.push(n)},pn.prototype.removeSub=function(n){k(this.subs,n)},pn.prototype.depend=function(){pn.target&&pn.target.addDep(this)},pn.prototype.notify=function(){var n=this.subs.slice();for(var e=0,t=n.length;e<t;e++)n[e].update()},pn.target=null;var mn=[];function gn(n){mn.push(n),pn.target=n}function hn(){mn.pop(),pn.target=mn[mn.length-1]}var bn=function(n,e,t,r,o,i,a,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},fn={child:{configurable:!0}};fn.child.get=function(){return this.componentInstance},Object.defineProperties(bn.prototype,fn);var vn=function(n){void 0===n&&(n="");var e=new bn;return e.text=n,e.isComment=!0,e};function kn(n){return new bn(void 0,void 0,void 0,String(n))}function yn(n){var e=new bn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var xn=Array.prototype,wn=Object.create(xn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=xn[n];$(wn,n,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var o,i=e.apply(this,t),a=this.__ob__;switch(n){case"push":case"unshift":o=t;break;case"splice":o=t.slice(2)}return o&&a.observeArray(o),a.dep.notify(),i}))}));var Sn=Object.getOwnPropertyNames(wn),_n=!0;function En(n){_n=n}var Tn=function(n){this.value=n,this.dep=new pn,this.vmCount=0,$(n,"__ob__",this),Array.isArray(n)?(H?function(n,e){n.__proto__=e}(n,wn):function(n,e,t){for(var r=0,o=t.length;r<o;r++){var i=t[r];$(n,i,e[i])}}(n,wn,Sn),this.observeArray(n)):this.walk(n)};function In(n,e){var t;if(l(n)&&!(n instanceof bn))return x(n,"__ob__")&&n.__ob__ instanceof Tn?t=n.__ob__:_n&&!on()&&(Array.isArray(n)||u(n))&&Object.isExtensible(n)&&!n._isVue&&(t=new Tn(n)),e&&t&&t.vmCount++,t}function jn(n,e,t,r,o){var i=new pn,a=Object.getOwnPropertyDescriptor(n,e);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(t=n[e]);var l=!o&&In(t);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(n):t;return pn.target&&(i.depend(),l&&(l.dep.depend(),Array.isArray(e)&&Dn(e))),e},set:function(e){var r=s?s.call(n):t;e===r||e!=e&&r!=r||s&&!c||(c?c.call(n,e):t=e,l=!o&&In(e),i.notify())}})}}function An(n,e,t){if(Array.isArray(n)&&m(e))return n.length=Math.max(n.length,e),n.splice(e,1,t),t;if(e in n&&!(e in Object.prototype))return n[e]=t,t;var r=n.__ob__;return n._isVue||r&&r.vmCount?t:r?(jn(r.value,e,t),r.dep.notify(),t):(n[e]=t,t)}function Cn(n,e){if(Array.isArray(n)&&m(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||x(n,e)&&(delete n[e],t&&t.dep.notify())}}function Dn(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Dn(e)}Tn.prototype.walk=function(n){for(var e=Object.keys(n),t=0;t<e.length;t++)jn(n,e[t])},Tn.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)In(n[e])};var zn=B.optionMergeStrategies;function Mn(n,e){if(!e)return n;for(var t,r,o,i=ln?Reflect.ownKeys(e):Object.keys(e),a=0;a<i.length;a++)"__ob__"!==(t=i[a])&&(r=n[t],o=e[t],x(n,t)?r!==o&&u(r)&&u(o)&&Mn(r,o):An(n,t,o));return n}function Pn(n,e,t){return t?function(){var r="function"==typeof e?e.call(t,t):e,o="function"==typeof n?n.call(t,t):n;return r?Mn(r,o):o}:e?n?function(){return Mn("function"==typeof e?e.call(this,this):e,"function"==typeof n?n.call(this,this):n)}:e:n}function On(n,e){var t=e?n?n.concat(e):Array.isArray(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Rn(n,e,t,r){var o=Object.create(n||null);return e?C(o,e):o}zn.data=function(n,e,t){return t?Pn(n,e,t):e&&"function"!=typeof e?n:Pn(n,e)},q.forEach((function(n){zn[n]=On})),L.forEach((function(n){zn[n+"s"]=Rn})),zn.watch=function(n,e,t,r){if(n===en&&(n=void 0),e===en&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var o={};for(var i in C(o,n),e){var a=o[i],s=e[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},zn.props=zn.methods=zn.inject=zn.computed=function(n,e,t,r){if(!n)return e;var o=Object.create(null);return C(o,n),e&&C(o,e),o},zn.provide=Pn;var Nn=function(n,e){return void 0===e?n:e};function Ln(n,e,t){if("function"==typeof e&&(e=e.options),function(n,e){var t=n.props;if(t){var r,o,i={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(o=t[r])&&(i[_(o)]={type:null});else if(u(t))for(var a in t)o=t[a],i[_(a)]=u(o)?o:{type:o};else 0;n.props=i}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(Array.isArray(t))for(var o=0;o<t.length;o++)r[t[o]]={from:t[o]};else if(u(t))for(var i in t){var a=t[i];r[i]=u(a)?C({from:i},a):{from:a}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];"function"==typeof r&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=Ln(n,e.extends,t)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)n=Ln(n,e.mixins[r],t);var i,a={};for(i in n)s(i);for(i in e)x(n,i)||s(i);function s(r){var o=zn[r]||Nn;a[r]=o(n[r],e[r],t,r)}return a}function qn(n,e,t,r){if("string"==typeof t){var o=n[e];if(x(o,t))return o[t];var i=_(t);if(x(o,i))return o[i];var a=E(i);return x(o,a)?o[a]:o[t]||o[i]||o[a]}}function Bn(n,e,t,r){var o=e[n],i=!x(t,n),a=t[n],s=Fn(Boolean,o.type);if(s>-1)if(i&&!x(o,"default"))a=!1;else if(""===a||a===I(n)){var c=Fn(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=function(n,e,t){if(!x(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return"function"==typeof r&&"Function"!==$n(e.type)?r.call(n):r}(r,o,n);var l=_n;En(!0),In(a),En(l)}return a}var Un=/^\s*function (\w+)/;function $n(n){var e=n&&n.toString().match(Un);return e?e[1]:""}function Gn(n,e){return $n(n)===$n(e)}function Fn(n,e){if(!Array.isArray(e))return Gn(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Gn(e[t],n))return t;return-1}function Hn(n,e,t){gn();try{if(e)for(var r=e;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{if(!1===o[i].call(r,n,e,t))return}catch(n){Jn(n,r,"errorCaptured hook")}}Jn(n,e,t)}finally{hn()}}function Kn(n,e,t,r,o){var i;try{(i=t?n.apply(e,t):n.call(e))&&!i._isVue&&g(i)&&!i._handled&&(i.catch((function(n){return Hn(n,r,o+" (Promise/async)")})),i._handled=!0)}catch(n){Hn(n,r,o)}return i}function Jn(n,e,t){if(B.errorHandler)try{return B.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Vn(e,null,"config.errorHandler")}Vn(n,e,t)}function Vn(n,e,t){if(!K&&!J||"undefined"==typeof console)throw n;console.error(n)}var Wn,Qn=!1,Yn=[],Xn=!1;function Zn(){Xn=!1;var n=Yn.slice(0);Yn.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&sn(Promise)){var ne=Promise.resolve();Wn=function(){ne.then(Zn),Z&&setTimeout(z)},Qn=!0}else if(Q||"undefined"==typeof MutationObserver||!sn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Wn="undefined"!=typeof setImmediate&&sn(setImmediate)?function(){setImmediate(Zn)}:function(){setTimeout(Zn,0)};else{var ee=1,te=new MutationObserver(Zn),re=document.createTextNode(String(ee));te.observe(re,{characterData:!0}),Wn=function(){ee=(ee+1)%2,re.data=String(ee)},Qn=!0}function oe(n,e){var t;if(Yn.push((function(){if(n)try{n.call(e)}catch(n){Hn(n,e,"nextTick")}else t&&t(e)})),Xn||(Xn=!0,Wn()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}var ie=new cn;function ae(n){!function n(e,t){var r,o,i=Array.isArray(e);if(!i&&!l(e)||Object.isFrozen(e)||e instanceof bn)return;if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(i)for(r=e.length;r--;)n(e[r],t);else for(o=Object.keys(e),r=o.length;r--;)n(e[o[r]],t)}(n,ie),ie.clear()}var se=w((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function ce(n,e){function t(){var n=arguments,r=t.fns;if(!Array.isArray(r))return Kn(r,null,arguments,e,"v-on handler");for(var o=r.slice(),i=0;i<o.length;i++)Kn(o[i],null,n,e,"v-on handler")}return t.fns=n,t}function le(n,e,t,r,o,a){var c,l,d,u;for(c in n)l=n[c],d=e[c],u=se(c),i(l)||(i(d)?(i(l.fns)&&(l=n[c]=ce(l,a)),s(u.once)&&(l=n[c]=o(u.name,l,u.capture)),t(u.name,l,u.capture,u.passive,u.params)):l!==d&&(d.fns=l,n[c]=d));for(c in e)i(n[c])&&r((u=se(c)).name,e[c],u.capture)}function de(n,e,t){var r;n instanceof bn&&(n=n.data.hook||(n.data.hook={}));var o=n[e];function c(){t.apply(this,arguments),k(r.fns,c)}i(o)?r=ce([c]):a(o.fns)&&s(o.merged)?(r=o).fns.push(c):r=ce([o,c]),r.merged=!0,n[e]=r}function ue(n,e,t,r,o){if(a(e)){if(x(e,t))return n[t]=e[t],o||delete e[t],!0;if(x(e,r))return n[t]=e[r],o||delete e[r],!0}return!1}function pe(n){return c(n)?[kn(n)]:Array.isArray(n)?function n(e,t){var r,o,l,d,u=[];for(r=0;r<e.length;r++)i(o=e[r])||"boolean"==typeof o||(l=u.length-1,d=u[l],Array.isArray(o)?o.length>0&&(me((o=n(o,(t||"")+"_"+r))[0])&&me(d)&&(u[l]=kn(d.text+o[0].text),o.shift()),u.push.apply(u,o)):c(o)?me(d)?u[l]=kn(d.text+o):""!==o&&u.push(kn(o)):me(o)&&me(d)?u[l]=kn(d.text+o.text):(s(e._isVList)&&a(o.tag)&&i(o.key)&&a(t)&&(o.key="__vlist"+t+"_"+r+"__"),u.push(o)));return u}(n):void 0}function me(n){return a(n)&&a(n.text)&&!1===n.isComment}function ge(n,e){if(n){for(var t=Object.create(null),r=ln?Reflect.ownKeys(n):Object.keys(n),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){for(var a=n[i].from,s=e;s;){if(s._provided&&x(s._provided,a)){t[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in n[i]){var c=n[i].default;t[i]="function"==typeof c?c.call(e):c}else 0}}return t}}function he(n,e){if(!n||!n.length)return{};for(var t={},r=0,o=n.length;r<o;r++){var i=n[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==e&&i.fnContext!==e||!a||null==a.slot)(t.default||(t.default=[])).push(i);else{var s=a.slot,c=t[s]||(t[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var l in t)t[l].every(be)&&delete t[l];return t}function be(n){return n.isComment&&!n.asyncFactory||" "===n.text}function fe(n){return n.isComment&&n.asyncFactory}function ve(n,e,t){var r,i=Object.keys(e).length>0,a=n?!!n.$stable:!i,s=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(a&&t&&t!==o&&s===t.$key&&!i&&!t.$hasNormal)return t;for(var c in r={},n)n[c]&&"$"!==c[0]&&(r[c]=ke(e,c,n[c]))}else r={};for(var l in e)l in r||(r[l]=ye(e,l));return n&&Object.isExtensible(n)&&(n._normalized=r),$(r,"$stable",a),$(r,"$key",s),$(r,"$hasNormal",i),r}function ke(n,e,t){var r=function(){var n=arguments.length?t.apply(null,arguments):t({}),e=(n=n&&"object"==typeof n&&!Array.isArray(n)?[n]:pe(n))&&n[0];return n&&(!e||1===n.length&&e.isComment&&!fe(e))?void 0:n};return t.proxy&&Object.defineProperty(n,e,{get:r,enumerable:!0,configurable:!0}),r}function ye(n,e){return function(){return n[e]}}function xe(n,e){var t,r,o,i,s;if(Array.isArray(n)||"string"==typeof n)for(t=new Array(n.length),r=0,o=n.length;r<o;r++)t[r]=e(n[r],r);else if("number"==typeof n)for(t=new Array(n),r=0;r<n;r++)t[r]=e(r+1,r);else if(l(n))if(ln&&n[Symbol.iterator]){t=[];for(var c=n[Symbol.iterator](),d=c.next();!d.done;)t.push(e(d.value,t.length)),d=c.next()}else for(i=Object.keys(n),t=new Array(i.length),r=0,o=i.length;r<o;r++)s=i[r],t[r]=e(n[s],s,r);return a(t)||(t=[]),t._isVList=!0,t}function we(n,e,t,r){var o,i=this.$scopedSlots[n];i?(t=t||{},r&&(t=C(C({},r),t)),o=i(t)||("function"==typeof e?e():e)):o=this.$slots[n]||("function"==typeof e?e():e);var a=t&&t.slot;return a?this.$createElement("template",{slot:a},o):o}function Se(n){return qn(this.$options,"filters",n)||P}function _e(n,e){return Array.isArray(n)?-1===n.indexOf(e):n!==e}function Ee(n,e,t,r,o){var i=B.keyCodes[e]||t;return o&&r&&!B.keyCodes[e]?_e(o,r):i?_e(i,n):r?I(r)!==e:void 0===n}function Te(n,e,t,r,o){if(t)if(l(t)){var i;Array.isArray(t)&&(t=D(t));var a=function(a){if("class"===a||"style"===a||v(a))i=n;else{var s=n.attrs&&n.attrs.type;i=r||B.mustUseProp(e,s,a)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=_(a),l=I(a);c in i||l in i||(i[a]=t[a],o&&((n.on||(n.on={}))["update:"+a]=function(n){t[a]=n}))};for(var s in t)a(s)}else;return n}function Ie(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||Ae(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,null,this),"__static__"+n,!1),r}function je(n,e,t){return Ae(n,"__once__"+e+(t?"_"+t:""),!0),n}function Ae(n,e,t){if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&Ce(n[r],e+"_"+r,t);else Ce(n,e,t)}function Ce(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function De(n,e){if(e)if(u(e)){var t=n.on=n.on?C({},n.on):{};for(var r in e){var o=t[r],i=e[r];t[r]=o?[].concat(o,i):i}}else;return n}function ze(n,e,t,r){e=e||{$stable:!t};for(var o=0;o<n.length;o++){var i=n[o];Array.isArray(i)?ze(i,e,t):i&&(i.proxy&&(i.fn.proxy=!0),e[i.key]=i.fn)}return r&&(e.$key=r),e}function Me(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function Pe(n,e){return"string"==typeof n?e+n:n}function Oe(n){n._o=je,n._n=b,n._s=h,n._l=xe,n._t=we,n._q=O,n._i=R,n._m=Ie,n._f=Se,n._k=Ee,n._b=Te,n._v=kn,n._e=vn,n._u=ze,n._g=De,n._d=Me,n._p=Pe}function Re(n,e,t,r,i){var a,c=this,l=i.options;x(r,"_uid")?(a=Object.create(r))._original=r:(a=r,r=r._original);var d=s(l._compiled),u=!d;this.data=n,this.props=e,this.children=t,this.parent=r,this.listeners=n.on||o,this.injections=ge(l.inject,r),this.slots=function(){return c.$slots||ve(n.scopedSlots,c.$slots=he(t,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ve(n.scopedSlots,this.slots())}}),d&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=ve(n.scopedSlots,this.$slots)),l._scopeId?this._c=function(n,e,t,o){var i=Ge(a,n,e,t,o,u);return i&&!Array.isArray(i)&&(i.fnScopeId=l._scopeId,i.fnContext=r),i}:this._c=function(n,e,t,r){return Ge(a,n,e,t,r,u)}}function Ne(n,e,t,r,o){var i=yn(n);return i.fnContext=t,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function Le(n,e){for(var t in e)n[_(t)]=e[t]}Oe(Re.prototype);var qe={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;qe.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;a(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Xe)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,r,i){0;var a=r.data.scopedSlots,s=n.$scopedSlots,c=!!(a&&!a.$stable||s!==o&&!s.$stable||a&&n.$scopedSlots.$key!==a.$key||!a&&n.$scopedSlots.$key),l=!!(i||n.$options._renderChildren||c);n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r);if(n.$options._renderChildren=i,n.$attrs=r.data.attrs||o,n.$listeners=t||o,e&&n.$options.props){En(!1);for(var d=n._props,u=n.$options._propKeys||[],p=0;p<u.length;p++){var m=u[p],g=n.$options.props;d[m]=Bn(m,g,e,n)}En(!0),n.$options.propsData=e}t=t||o;var h=n.$options._parentListeners;n.$options._parentListeners=t,Ye(n,t,h),l&&(n.$slots=he(i,r.context),n.$forceUpdate());0}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,tt(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,ot.push(e)):et(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(t&&(e._directInactive=!0,nt(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);tt(e,"deactivated")}}(e,!0):e.$destroy())}},Be=Object.keys(qe);function Ue(n,e,t,r,c){if(!i(n)){var d=t.$options._base;if(l(n)&&(n=d.extend(n)),"function"==typeof n){var u;if(i(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&a(n.errorComp))return n.errorComp;if(a(n.resolved))return n.resolved;var t=He;t&&a(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t);if(s(n.loading)&&a(n.loadingComp))return n.loadingComp;if(t&&!a(n.owners)){var r=n.owners=[t],o=!0,c=null,d=null;t.$on("hook:destroyed",(function(){return k(r,t)}));var u=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==d&&(clearTimeout(d),d=null))},p=N((function(t){n.resolved=Ke(t,e),o?r.length=0:u(!0)})),m=N((function(e){a(n.errorComp)&&(n.error=!0,u(!0))})),h=n(p,m);return l(h)&&(g(h)?i(n.resolved)&&h.then(p,m):g(h.component)&&(h.component.then(p,m),a(h.error)&&(n.errorComp=Ke(h.error,e)),a(h.loading)&&(n.loadingComp=Ke(h.loading,e),0===h.delay?n.loading=!0:c=setTimeout((function(){c=null,i(n.resolved)&&i(n.error)&&(n.loading=!0,u(!1))}),h.delay||200)),a(h.timeout)&&(d=setTimeout((function(){d=null,i(n.resolved)&&m(null)}),h.timeout)))),o=!1,n.loading?n.loadingComp:n.resolved}}(u=n,d)))return function(n,e,t,r,o){var i=vn();return i.asyncFactory=n,i.asyncMeta={data:e,context:t,children:r,tag:o},i}(u,e,t,r,c);e=e||{},_t(n),a(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var o=e.on||(e.on={}),i=o[r],s=e.model.callback;a(i)?(Array.isArray(i)?-1===i.indexOf(s):i!==s)&&(o[r]=[s].concat(i)):o[r]=s}(n.options,e);var p=function(n,e,t){var r=e.options.props;if(!i(r)){var o={},s=n.attrs,c=n.props;if(a(s)||a(c))for(var l in r){var d=I(l);ue(o,c,l,d,!0)||ue(o,s,l,d,!1)}return o}}(e,n);if(s(n.options.functional))return function(n,e,t,r,i){var s=n.options,c={},l=s.props;if(a(l))for(var d in l)c[d]=Bn(d,l,e||o);else a(t.attrs)&&Le(c,t.attrs),a(t.props)&&Le(c,t.props);var u=new Re(t,c,i,r,n),p=s.render.call(null,u._c,u);if(p instanceof bn)return Ne(p,t,u.parent,s,u);if(Array.isArray(p)){for(var m=pe(p)||[],g=new Array(m.length),h=0;h<m.length;h++)g[h]=Ne(m[h],t,u.parent,s,u);return g}}(n,p,e,t,r);var m=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var h=e.slot;e={},h&&(e.slot=h)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<Be.length;t++){var r=Be[t],o=e[r],i=qe[r];o===i||o&&o._merged||(e[r]=o?$e(i,o):i)}}(e);var b=n.options.name||c;return new bn("vue-component-"+n.cid+(b?"-"+b:""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:p,listeners:m,tag:c,children:r},u)}}}function $e(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}function Ge(n,e,t,r,o,d){return(Array.isArray(t)||c(t))&&(o=r,r=t,t=void 0),s(d)&&(o=2),function(n,e,t,r,o){if(a(t)&&a(t.__ob__))return vn();a(t)&&a(t.is)&&(e=t.is);if(!e)return vn();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===o?r=pe(r):1===o&&(r=function(n){for(var e=0;e<n.length;e++)if(Array.isArray(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var c,d;if("string"==typeof e){var u;d=n.$vnode&&n.$vnode.ns||B.getTagNamespace(e),c=B.isReservedTag(e)?new bn(B.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!a(u=qn(n.$options,"components",e))?new bn(e,t,r,void 0,void 0,n):Ue(u,t,n,r,e)}else c=Ue(e,t,n,r);return Array.isArray(c)?c:a(c)?(a(d)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(a(e.children))for(var o=0,c=e.children.length;o<c;o++){var l=e.children[o];a(l.tag)&&(i(l.ns)||s(r)&&"svg"!==l.tag)&&n(l,t,r)}}(c,d),a(t)&&function(n){l(n.style)&&ae(n.style);l(n.class)&&ae(n.class)}(t),c):vn()}(n,e,t,r,o)}var Fe,He=null;function Ke(n,e){return(n.__esModule||ln&&"Module"===n[Symbol.toStringTag])&&(n=n.default),l(n)?e.extend(n):n}function Je(n){if(Array.isArray(n))for(var e=0;e<n.length;e++){var t=n[e];if(a(t)&&(a(t.componentOptions)||fe(t)))return t}}function Ve(n,e){Fe.$on(n,e)}function We(n,e){Fe.$off(n,e)}function Qe(n,e){var t=Fe;return function r(){var o=e.apply(null,arguments);null!==o&&t.$off(n,r)}}function Ye(n,e,t){Fe=n,le(e,t||{},Ve,We,Qe,n),Fe=void 0}var Xe=null;function Ze(n){var e=Xe;return Xe=n,function(){Xe=e}}function nt(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function et(n,e){if(e){if(n._directInactive=!1,nt(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)et(n.$children[t]);tt(n,"activated")}}function tt(n,e){gn();var t=n.$options[e],r=e+" hook";if(t)for(var o=0,i=t.length;o<i;o++)Kn(t[o],n,null,n,r);n._hasHookEvent&&n.$emit("hook:"+e),hn()}var rt=[],ot=[],it={},at=!1,st=!1,ct=0;var lt=0,dt=Date.now;if(K&&!Q){var ut=window.performance;ut&&"function"==typeof ut.now&&dt()>document.createEvent("Event").timeStamp&&(dt=function(){return ut.now()})}function pt(){var n,e;for(lt=dt(),st=!0,rt.sort((function(n,e){return n.id-e.id})),ct=0;ct<rt.length;ct++)(n=rt[ct]).before&&n.before(),e=n.id,it[e]=null,n.run();var t=ot.slice(),r=rt.slice();ct=rt.length=ot.length=0,it={},at=st=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,et(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&tt(r,"updated")}}(r),an&&B.devtools&&an.emit("flush")}var mt=0,gt=function(n,e,t,r,o){this.vm=n,o&&(n._watcher=this),n._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++mt,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cn,this.newDepIds=new cn,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(n){if(!G.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=z)),this.value=this.lazy?void 0:this.get()};gt.prototype.get=function(){var n;gn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Hn(n,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ae(n),hn(),this.cleanupDeps()}return n},gt.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},gt.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},gt.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(n){var e=n.id;if(null==it[e]){if(it[e]=!0,st){for(var t=rt.length-1;t>ct&&rt[t].id>n.id;)t--;rt.splice(t+1,0,n)}else rt.push(n);at||(at=!0,oe(pt))}}(this)},gt.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||l(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'+this.expression+'"';Kn(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},gt.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},gt.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},gt.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||k(this.vm._watchers,this);for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1}};var ht={enumerable:!0,configurable:!0,get:z,set:z};function bt(n,e,t){ht.get=function(){return this[e][t]},ht.set=function(n){this[e][t]=n},Object.defineProperty(n,t,ht)}function ft(n){n._watchers=[];var e=n.$options;e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props={},o=n.$options._propKeys=[];n.$parent&&En(!1);var i=function(i){o.push(i);var a=Bn(i,e,t,n);jn(r,i,a),i in n||bt(n,"_props",i)};for(var a in e)i(a);En(!0)}(n,e.props),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?z:j(e[t],n)}(n,e.methods),e.data?function(n){var e=n.$options.data;u(e=n._data="function"==typeof e?function(n,e){gn();try{return n.call(e,e)}catch(n){return Hn(n,e,"data()"),{}}finally{hn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,o=(n.$options.methods,t.length);for(;o--;){var i=t[o];0,r&&x(r,i)||(a=void 0,36!==(a=(i+"").charCodeAt(0))&&95!==a&&bt(n,"_data",i))}var a;In(e,!0)}(n):In(n._data={},!0),e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=on();for(var o in e){var i=e[o],a="function"==typeof i?i:i.get;0,r||(t[o]=new gt(n,a||z,z,vt)),o in n||kt(n,o,i)}}(n,e.computed),e.watch&&e.watch!==en&&function(n,e){for(var t in e){var r=e[t];if(Array.isArray(r))for(var o=0;o<r.length;o++)wt(n,t,r[o]);else wt(n,t,r)}}(n,e.watch)}var vt={lazy:!0};function kt(n,e,t){var r=!on();"function"==typeof t?(ht.get=r?yt(e):xt(t),ht.set=z):(ht.get=t.get?r&&!1!==t.cache?yt(e):xt(t.get):z,ht.set=t.set||z),Object.defineProperty(n,e,ht)}function yt(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),pn.target&&e.depend(),e.value}}function xt(n){return function(){return n.call(this,this)}}function wt(n,e,t,r){return u(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var St=0;function _t(n){var e=n.options;if(n.super){var t=_t(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var o in t)t[o]!==r[o]&&(e||(e={}),e[o]=t[o]);return e}(n);r&&C(n.extendOptions,r),(e=n.options=Ln(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Et(n){this._init(n)}function Tt(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,o=n._Ctor||(n._Ctor={});if(o[r])return o[r];var i=n.name||t.options.name;var a=function(n){this._init(n)};return(a.prototype=Object.create(t.prototype)).constructor=a,a.cid=e++,a.options=Ln(t.options,n),a.super=t,a.options.props&&function(n){var e=n.options.props;for(var t in e)bt(n.prototype,"_props",t)}(a),a.options.computed&&function(n){var e=n.options.computed;for(var t in e)kt(n.prototype,t,e[t])}(a),a.extend=t.extend,a.mixin=t.mixin,a.use=t.use,L.forEach((function(n){a[n]=t[n]})),i&&(a.options.components[i]=a),a.superOptions=t.options,a.extendOptions=n,a.sealedOptions=C({},a.options),o[r]=a,a}}function It(n){return n&&(n.Ctor.options.name||n.tag)}function jt(n,e){return Array.isArray(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!p(n)&&n.test(e)}function At(n,e){var t=n.cache,r=n.keys,o=n._vnode;for(var i in t){var a=t[i];if(a){var s=a.name;s&&!e(s)&&Ct(t,i,r,o)}}}function Ct(n,e,t,r){var o=n[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),n[e]=null,k(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=St++,e._isVue=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var o=r.componentOptions;t.propsData=o.propsData,t._parentListeners=o.listeners,t._renderChildren=o.children,t._componentTag=o.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=Ln(_t(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Ye(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,r=t&&t.context;n.$slots=he(e._renderChildren,r),n.$scopedSlots=o,n._c=function(e,t,r,o){return Ge(n,e,t,r,o,!1)},n.$createElement=function(e,t,r,o){return Ge(n,e,t,r,o,!0)};var i=t&&t.data;jn(n,"$attrs",i&&i.attrs||o,null,!0),jn(n,"$listeners",e._parentListeners||o,null,!0)}(e),tt(e,"beforeCreate"),function(n){var e=ge(n.$options.inject,n);e&&(En(!1),Object.keys(e).forEach((function(t){jn(n,t,e[t])})),En(!0))}(e),ft(e),function(n){var e=n.$options.provide;e&&(n._provided="function"==typeof e?e.call(n):e)}(e),tt(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Et),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=An,n.prototype.$delete=Cn,n.prototype.$watch=function(n,e,t){if(u(e))return wt(this,n,e,t);(t=t||{}).user=!0;var r=new gt(this,n,e,t);if(t.immediate){var o='callback for immediate watcher "'+r.expression+'"';gn(),Kn(e,this,[r.value],this,o),hn()}return function(){r.teardown()}}}(Et),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)r.$on(n[o],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(n)){for(var r=0,o=n.length;r<o;r++)t.$off(n[r],e);return t}var i,a=t._events[n];if(!a)return t;if(!e)return t._events[n]=null,t;for(var s=a.length;s--;)if((i=a[s])===e||i.fn===e){a.splice(s,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?A(t):t;for(var r=A(arguments,1),o='event handler for "'+n+'"',i=0,a=t.length;i<a;i++)Kn(t[i],e,r,e,o)}return e}}(Et),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,o=t._vnode,i=Ze(t);t._vnode=n,t.$el=o?t.__patch__(o,n):t.__patch__(t.$el,n,e,!1),i(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){tt(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||k(e.$children,n),n._watcher&&n._watcher.teardown();for(var t=n._watchers.length;t--;)n._watchers[t].teardown();n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),tt(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Et),function(n){Oe(n.prototype),n.prototype.$nextTick=function(n){return oe(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,r=t.render,o=t._parentVnode;o&&(e.$scopedSlots=ve(o.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=o;try{He=e,n=r.call(e._renderProxy,e.$createElement)}catch(t){Hn(t,e,"render"),n=e._vnode}finally{He=null}return Array.isArray(n)&&1===n.length&&(n=n[0]),n instanceof bn||(n=vn()),n.parent=o,n}}(Et);var Dt=[String,RegExp,Array],zt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Dt,exclude:Dt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var o=t.tag,i=t.componentInstance,a=t.componentOptions;n[r]={name:It(a),tag:o,componentInstance:i},e.push(r),this.max&&e.length>parseInt(this.max)&&Ct(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Ct(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){At(n,(function(n){return jt(e,n)}))})),this.$watch("exclude",(function(e){At(n,(function(n){return!jt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=Je(n),t=e&&e.componentOptions;if(t){var r=It(t),o=this.include,i=this.exclude;if(o&&(!r||!jt(o,r))||i&&r&&jt(i,r))return e;var a=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;a[c]?(e.componentInstance=a[c].componentInstance,k(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return B}};Object.defineProperty(n,"config",e),n.util={warn:dn,extend:C,mergeOptions:Ln,defineReactive:jn},n.set=An,n.delete=Cn,n.nextTick=oe,n.observable=function(n){return In(n),n},n.options=Object.create(null),L.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,C(n.options.components,zt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=A(arguments,1);return t.unshift(this),"function"==typeof n.install?n.install.apply(n,t):"function"==typeof n&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Ln(this.options,n),this}}(n),Tt(n),function(n){L.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&"function"==typeof t&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Et),Object.defineProperty(Et.prototype,"$isServer",{get:on}),Object.defineProperty(Et.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Et,"FunctionalRenderContext",{value:Re}),Et.version="2.6.14";var Mt=f("style,class"),Pt=f("input,textarea,option,select,progress"),Ot=f("contenteditable,draggable,spellcheck"),Rt=f("events,caret,typing,plaintext-only"),Nt=f("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Lt="http://www.w3.org/1999/xlink",qt=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},Bt=function(n){return qt(n)?n.slice(6,n.length):""},Ut=function(n){return null==n||!1===n};function $t(n){for(var e=n.data,t=n,r=n;a(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=Gt(r.data,e));for(;a(t=t.parent);)t&&t.data&&(e=Gt(e,t.data));return function(n,e){if(a(n)||a(e))return Ft(n,Ht(e));return""}(e.staticClass,e.class)}function Gt(n,e){return{staticClass:Ft(n.staticClass,e.staticClass),class:a(n.class)?[n.class,e.class]:e.class}}function Ft(n,e){return n?e?n+" "+e:n:e||""}function Ht(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,o=n.length;r<o;r++)a(e=Ht(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):l(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var Kt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Jt=f("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Vt=f("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Wt=function(n){return Jt(n)||Vt(n)};var Qt=Object.create(null);var Yt=f("text,number,password,search,email,tel,url");var Xt=Object.freeze({createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(Kt[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),Zt={create:function(n,e){nr(e)},update:function(n,e){n.data.ref!==e.data.ref&&(nr(n,!0),nr(e))},destroy:function(n){nr(n,!0)}};function nr(n,e){var t=n.data.ref;if(a(t)){var r=n.context,o=n.componentInstance||n.elm,i=r.$refs;e?Array.isArray(i[t])?k(i[t],o):i[t]===o&&(i[t]=void 0):n.data.refInFor?Array.isArray(i[t])?i[t].indexOf(o)<0&&i[t].push(o):i[t]=[o]:i[t]=o}}var er=new bn("",{},[]),tr=["create","activate","update","remove","destroy"];function rr(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&a(n.data)===a(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=a(t=n.data)&&a(t=t.attrs)&&t.type,o=a(t=e.data)&&a(t=t.attrs)&&t.type;return r===o||Yt(r)&&Yt(o)}(n,e)||s(n.isAsyncPlaceholder)&&i(e.asyncFactory.error))}function or(n,e,t){var r,o,i={};for(r=e;r<=t;++r)a(o=n[r].key)&&(i[o]=r);return i}var ir={create:ar,update:ar,destroy:function(n){ar(n,er)}};function ar(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,o,i=n===er,a=e===er,s=cr(n.data.directives,n.context),c=cr(e.data.directives,e.context),l=[],d=[];for(t in c)r=s[t],o=c[t],r?(o.oldValue=r.value,o.oldArg=r.arg,dr(o,"update",e,n),o.def&&o.def.componentUpdated&&d.push(o)):(dr(o,"bind",e,n),o.def&&o.def.inserted&&l.push(o));if(l.length){var u=function(){for(var t=0;t<l.length;t++)dr(l[t],"inserted",e,n)};i?de(e,"insert",u):u()}d.length&&de(e,"postpatch",(function(){for(var t=0;t<d.length;t++)dr(d[t],"componentUpdated",e,n)}));if(!i)for(t in s)c[t]||dr(s[t],"unbind",n,n,a)}(n,e)}var sr=Object.create(null);function cr(n,e){var t,r,o=Object.create(null);if(!n)return o;for(t=0;t<n.length;t++)(r=n[t]).modifiers||(r.modifiers=sr),o[lr(r)]=r,r.def=qn(e.$options,"directives",r.name);return o}function lr(n){return n.rawName||n.name+"."+Object.keys(n.modifiers||{}).join(".")}function dr(n,e,t,r,o){var i=n.def&&n.def[e];if(i)try{i(t.elm,n,t,r,o)}catch(r){Hn(r,t.context,"directive "+n.name+" "+e+" hook")}}var ur=[Zt,ir];function pr(n,e){var t=e.componentOptions;if(!(a(t)&&!1===t.Ctor.options.inheritAttrs||i(n.data.attrs)&&i(e.data.attrs))){var r,o,s=e.elm,c=n.data.attrs||{},l=e.data.attrs||{};for(r in a(l.__ob__)&&(l=e.data.attrs=C({},l)),l)o=l[r],c[r]!==o&&mr(s,r,o,e.data.pre);for(r in(Q||X)&&l.value!==c.value&&mr(s,"value",l.value),c)i(l[r])&&(qt(r)?s.removeAttributeNS(Lt,Bt(r)):Ot(r)||s.removeAttribute(r))}}function mr(n,e,t,r){r||n.tagName.indexOf("-")>-1?gr(n,e,t):Nt(e)?Ut(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):Ot(e)?n.setAttribute(e,function(n,e){return Ut(e)||"false"===e?"false":"contenteditable"===n&&Rt(e)?e:"true"}(e,t)):qt(e)?Ut(t)?n.removeAttributeNS(Lt,Bt(e)):n.setAttributeNS(Lt,e,t):gr(n,e,t)}function gr(n,e,t){if(Ut(t))n.removeAttribute(e);else{if(Q&&!Y&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var hr={create:pr,update:pr};function br(n,e){var t=e.elm,r=e.data,o=n.data;if(!(i(r.staticClass)&&i(r.class)&&(i(o)||i(o.staticClass)&&i(o.class)))){var s=$t(e),c=t._transitionClasses;a(c)&&(s=Ft(s,Ht(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var fr,vr={create:br,update:br};function kr(n,e,t){var r=fr;return function o(){var i=e.apply(null,arguments);null!==i&&wr(n,o,t,r)}}var yr=Qn&&!(nn&&Number(nn[1])<=53);function xr(n,e,t,r){if(yr){var o=lt,i=e;e=i._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=o||n.timeStamp<=0||n.target.ownerDocument!==document)return i.apply(this,arguments)}}fr.addEventListener(n,e,tn?{capture:t,passive:r}:t)}function wr(n,e,t,r){(r||fr).removeEventListener(n,e._wrapper||e,t)}function Sr(n,e){if(!i(n.data.on)||!i(e.data.on)){var t=e.data.on||{},r=n.data.on||{};fr=e.elm,function(n){if(a(n.__r)){var e=Q?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}a(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),le(t,r,xr,wr,kr,e.context),fr=void 0}}var _r,Er={create:Sr,update:Sr};function Tr(n,e){if(!i(n.data.domProps)||!i(e.data.domProps)){var t,r,o=e.elm,s=n.data.domProps||{},c=e.data.domProps||{};for(t in a(c.__ob__)&&(c=e.data.domProps=C({},c)),s)t in c||(o[t]="");for(t in c){if(r=c[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===s[t])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===t&&"PROGRESS"!==o.tagName){o._value=r;var l=i(r)?"":String(r);Ir(o,l)&&(o.value=l)}else if("innerHTML"===t&&Vt(o.tagName)&&i(o.innerHTML)){(_r=_r||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var d=_r.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;d.firstChild;)o.appendChild(d.firstChild)}else if(r!==s[t])try{o[t]=r}catch(n){}}}}function Ir(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(a(r)){if(r.number)return b(t)!==b(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var jr={create:Tr,update:Tr},Ar=w((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Cr(n){var e=Dr(n.style);return n.staticStyle?C(n.staticStyle,e):e}function Dr(n){return Array.isArray(n)?D(n):"string"==typeof n?Ar(n):n}var zr,Mr=/^--/,Pr=/\s*!important$/,Or=function(n,e,t){if(Mr.test(e))n.style.setProperty(e,t);else if(Pr.test(t))n.style.setProperty(I(e),t.replace(Pr,""),"important");else{var r=Nr(e);if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)n.style[r]=t[o];else n.style[r]=t}},Rr=["Webkit","Moz","ms"],Nr=w((function(n){if(zr=zr||document.createElement("div").style,"filter"!==(n=_(n))&&n in zr)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<Rr.length;t++){var r=Rr[t]+e;if(r in zr)return r}}));function Lr(n,e){var t=e.data,r=n.data;if(!(i(t.staticStyle)&&i(t.style)&&i(r.staticStyle)&&i(r.style))){var o,s,c=e.elm,l=r.staticStyle,d=r.normalizedStyle||r.style||{},u=l||d,p=Dr(e.data.style)||{};e.data.normalizedStyle=a(p.__ob__)?C({},p):p;var m=function(n,e){var t,r={};if(e)for(var o=n;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(t=Cr(o.data))&&C(r,t);(t=Cr(n.data))&&C(r,t);for(var i=n;i=i.parent;)i.data&&(t=Cr(i.data))&&C(r,t);return r}(e,!0);for(s in u)i(m[s])&&Or(c,s,"");for(s in m)(o=m[s])!==u[s]&&Or(c,s,null==o?"":o)}}var qr={create:Lr,update:Lr},Br=/\s+/;function Ur(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(Br).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" "+(n.getAttribute("class")||"")+" ";t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function $r(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(Br).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" "+(n.getAttribute("class")||"")+" ",r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function Gr(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&C(e,Fr(n.name||"v")),C(e,n),e}return"string"==typeof n?Fr(n):void 0}}var Fr=w((function(n){return{enterClass:n+"-enter",enterToClass:n+"-enter-to",enterActiveClass:n+"-enter-active",leaveClass:n+"-leave",leaveToClass:n+"-leave-to",leaveActiveClass:n+"-leave-active"}})),Hr=K&&!Y,Kr="transition",Jr="transitionend",Vr="animation",Wr="animationend";Hr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Kr="WebkitTransition",Jr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Vr="WebkitAnimation",Wr="webkitAnimationEnd"));var Qr=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function Yr(n){Qr((function(){Qr(n)}))}function Xr(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),Ur(n,e))}function Zr(n,e){n._transitionClasses&&k(n._transitionClasses,e),$r(n,e)}function no(n,e,t){var r=to(n,e),o=r.type,i=r.timeout,a=r.propCount;if(!o)return t();var s="transition"===o?Jr:Wr,c=0,l=function(){n.removeEventListener(s,d),t()},d=function(e){e.target===n&&++c>=a&&l()};setTimeout((function(){c<a&&l()}),i+1),n.addEventListener(s,d)}var eo=/\b(transform|all)(,|$)/;function to(n,e){var t,r=window.getComputedStyle(n),o=(r[Kr+"Delay"]||"").split(", "),i=(r[Kr+"Duration"]||"").split(", "),a=ro(o,i),s=(r[Vr+"Delay"]||"").split(", "),c=(r[Vr+"Duration"]||"").split(", "),l=ro(s,c),d=0,u=0;return"transition"===e?a>0&&(t="transition",d=a,u=i.length):"animation"===e?l>0&&(t="animation",d=l,u=c.length):u=(t=(d=Math.max(a,l))>0?a>l?"transition":"animation":null)?"transition"===t?i.length:c.length:0,{type:t,timeout:d,propCount:u,hasTransform:"transition"===t&&eo.test(r[Kr+"Property"])}}function ro(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return oo(e)+oo(n[t])})))}function oo(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function io(n,e){var t=n.elm;a(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Gr(n.data.transition);if(!i(r)&&!a(t._enterCb)&&1===t.nodeType){for(var o=r.css,s=r.type,c=r.enterClass,d=r.enterToClass,u=r.enterActiveClass,p=r.appearClass,m=r.appearToClass,g=r.appearActiveClass,h=r.beforeEnter,f=r.enter,v=r.afterEnter,k=r.enterCancelled,y=r.beforeAppear,x=r.appear,w=r.afterAppear,S=r.appearCancelled,_=r.duration,E=Xe,T=Xe.$vnode;T&&T.parent;)E=T.context,T=T.parent;var I=!E._isMounted||!n.isRootInsert;if(!I||x||""===x){var j=I&&p?p:c,A=I&&g?g:u,C=I&&m?m:d,D=I&&y||h,z=I&&"function"==typeof x?x:f,M=I&&w||v,P=I&&S||k,O=b(l(_)?_.enter:_);0;var R=!1!==o&&!Y,L=co(z),q=t._enterCb=N((function(){R&&(Zr(t,C),Zr(t,A)),q.cancelled?(R&&Zr(t,j),P&&P(t)):M&&M(t),t._enterCb=null}));n.data.show||de(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),z&&z(t,q)})),D&&D(t),R&&(Xr(t,j),Xr(t,A),Yr((function(){Zr(t,j),q.cancelled||(Xr(t,C),L||(so(O)?setTimeout(q,O):no(t,s,q)))}))),n.data.show&&(e&&e(),z&&z(t,q)),R||L||q()}}}function ao(n,e){var t=n.elm;a(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=Gr(n.data.transition);if(i(r)||1!==t.nodeType)return e();if(!a(t._leaveCb)){var o=r.css,s=r.type,c=r.leaveClass,d=r.leaveToClass,u=r.leaveActiveClass,p=r.beforeLeave,m=r.leave,g=r.afterLeave,h=r.leaveCancelled,f=r.delayLeave,v=r.duration,k=!1!==o&&!Y,y=co(m),x=b(l(v)?v.leave:v);0;var w=t._leaveCb=N((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),k&&(Zr(t,d),Zr(t,u)),w.cancelled?(k&&Zr(t,c),h&&h(t)):(e(),g&&g(t)),t._leaveCb=null}));f?f(S):S()}function S(){w.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),p&&p(t),k&&(Xr(t,c),Xr(t,u),Yr((function(){Zr(t,c),w.cancelled||(Xr(t,d),y||(so(x)?setTimeout(w,x):no(t,s,w)))}))),m&&m(t,w),k||y||w())}}function so(n){return"number"==typeof n&&!isNaN(n)}function co(n){if(i(n))return!1;var e=n.fns;return a(e)?co(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function lo(n,e){!0!==e.data.show&&io(e)}var uo=function(n){var e,t,r={},o=n.modules,l=n.nodeOps;for(e=0;e<tr.length;++e)for(r[tr[e]]=[],t=0;t<o.length;++t)a(o[t][tr[e]])&&r[tr[e]].push(o[t][tr[e]]);function d(n){var e=l.parentNode(n);a(e)&&l.removeChild(e,n)}function u(n,e,t,o,i,c,d){if(a(n.elm)&&a(c)&&(n=c[d]=yn(n)),n.isRootInsert=!i,!function(n,e,t,o){var i=n.data;if(a(i)){var c=a(n.componentInstance)&&i.keepAlive;if(a(i=i.hook)&&a(i=i.init)&&i(n,!1),a(n.componentInstance))return p(n,e),m(t,n.elm,o),s(c)&&function(n,e,t,o){var i,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,a(i=s.data)&&a(i=i.transition)){for(i=0;i<r.activate.length;++i)r.activate[i](er,s);e.push(s);break}m(t,n.elm,o)}(n,e,t,o),!0}}(n,e,t,o)){var u=n.data,h=n.children,f=n.tag;a(f)?(n.elm=n.ns?l.createElementNS(n.ns,f):l.createElement(f,n),v(n),g(n,h,e),a(u)&&b(n,e),m(t,n.elm,o)):s(n.isComment)?(n.elm=l.createComment(n.text),m(t,n.elm,o)):(n.elm=l.createTextNode(n.text),m(t,n.elm,o))}}function p(n,e){a(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,h(n)?(b(n,e),v(n)):(nr(n),e.push(n))}function m(n,e,t){a(n)&&(a(t)?l.parentNode(t)===n&&l.insertBefore(n,e,t):l.appendChild(n,e))}function g(n,e,t){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)u(e[r],t,n.elm,null,!0,e,r)}else c(n.text)&&l.appendChild(n.elm,l.createTextNode(String(n.text)))}function h(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return a(n.tag)}function b(n,t){for(var o=0;o<r.create.length;++o)r.create[o](er,n);a(e=n.data.hook)&&(a(e.create)&&e.create(er,n),a(e.insert)&&t.push(n))}function v(n){var e;if(a(e=n.fnScopeId))l.setStyleScope(n.elm,e);else for(var t=n;t;)a(e=t.context)&&a(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e),t=t.parent;a(e=Xe)&&e!==n.context&&e!==n.fnContext&&a(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e)}function k(n,e,t,r,o,i){for(;r<=o;++r)u(t[r],i,n,e,!1,t,r)}function y(n){var e,t,o=n.data;if(a(o))for(a(e=o.hook)&&a(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(a(e=n.children))for(t=0;t<n.children.length;++t)y(n.children[t])}function x(n,e,t){for(;e<=t;++e){var r=n[e];a(r)&&(a(r.tag)?(w(r),y(r)):d(r.elm))}}function w(n,e){if(a(e)||a(n.data)){var t,o=r.remove.length+1;for(a(e)?e.listeners+=o:e=function(n,e){function t(){0==--t.listeners&&d(n)}return t.listeners=e,t}(n.elm,o),a(t=n.componentInstance)&&a(t=t._vnode)&&a(t.data)&&w(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);a(t=n.data.hook)&&a(t=t.remove)?t(n,e):e()}else d(n.elm)}function S(n,e,t,r){for(var o=t;o<r;o++){var i=e[o];if(a(i)&&rr(n,i))return o}}function _(n,e,t,o,c,d){if(n!==e){a(e.elm)&&a(o)&&(e=o[c]=yn(e));var p=e.elm=n.elm;if(s(n.isAsyncPlaceholder))a(e.asyncFactory.resolved)?I(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var m,g=e.data;a(g)&&a(m=g.hook)&&a(m=m.prepatch)&&m(n,e);var b=n.children,f=e.children;if(a(g)&&h(e)){for(m=0;m<r.update.length;++m)r.update[m](n,e);a(m=g.hook)&&a(m=m.update)&&m(n,e)}i(e.text)?a(b)&&a(f)?b!==f&&function(n,e,t,r,o){var s,c,d,p=0,m=0,g=e.length-1,h=e[0],b=e[g],f=t.length-1,v=t[0],y=t[f],w=!o;for(0;p<=g&&m<=f;)i(h)?h=e[++p]:i(b)?b=e[--g]:rr(h,v)?(_(h,v,r,t,m),h=e[++p],v=t[++m]):rr(b,y)?(_(b,y,r,t,f),b=e[--g],y=t[--f]):rr(h,y)?(_(h,y,r,t,f),w&&l.insertBefore(n,h.elm,l.nextSibling(b.elm)),h=e[++p],y=t[--f]):rr(b,v)?(_(b,v,r,t,m),w&&l.insertBefore(n,b.elm,h.elm),b=e[--g],v=t[++m]):(i(s)&&(s=or(e,p,g)),i(c=a(v.key)?s[v.key]:S(v,e,p,g))?u(v,r,n,h.elm,!1,t,m):rr(d=e[c],v)?(_(d,v,r,t,m),e[c]=void 0,w&&l.insertBefore(n,d.elm,h.elm)):u(v,r,n,h.elm,!1,t,m),v=t[++m]);p>g?k(n,i(t[f+1])?null:t[f+1].elm,t,m,f,r):m>f&&x(e,p,g)}(p,b,f,t,d):a(f)?(a(n.text)&&l.setTextContent(p,""),k(p,null,f,0,f.length-1,t)):a(b)?x(b,0,b.length-1):a(n.text)&&l.setTextContent(p,""):n.text!==e.text&&l.setTextContent(p,e.text),a(g)&&a(m=g.hook)&&a(m=m.postpatch)&&m(n,e)}}}function E(n,e,t){if(s(t)&&a(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var T=f("attrs,class,staticClass,staticStyle,key");function I(n,e,t,r){var o,i=e.tag,c=e.data,l=e.children;if(r=r||c&&c.pre,e.elm=n,s(e.isComment)&&a(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(a(c)&&(a(o=c.hook)&&a(o=o.init)&&o(e,!0),a(o=e.componentInstance)))return p(e,t),!0;if(a(i)){if(a(l))if(n.hasChildNodes())if(a(o=c)&&a(o=o.domProps)&&a(o=o.innerHTML)){if(o!==n.innerHTML)return!1}else{for(var d=!0,u=n.firstChild,m=0;m<l.length;m++){if(!u||!I(u,l[m],t,r)){d=!1;break}u=u.nextSibling}if(!d||u)return!1}else g(e,l,t);if(a(c)){var h=!1;for(var f in c)if(!T(f)){h=!0,b(e,t);break}!h&&c.class&&ae(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,o){if(!i(e)){var c,d=!1,p=[];if(i(n))d=!0,u(e,p);else{var m=a(n.nodeType);if(!m&&rr(n,e))_(n,e,p,null,null,o);else{if(m){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&I(n,e,p))return E(e,p,!0),n;c=n,n=new bn(l.tagName(c).toLowerCase(),{},[],void 0,c)}var g=n.elm,b=l.parentNode(g);if(u(e,p,g._leaveCb?null:b,l.nextSibling(g)),a(e.parent))for(var f=e.parent,v=h(e);f;){for(var k=0;k<r.destroy.length;++k)r.destroy[k](f);if(f.elm=e.elm,v){for(var w=0;w<r.create.length;++w)r.create[w](er,f);var S=f.data.hook.insert;if(S.merged)for(var T=1;T<S.fns.length;T++)S.fns[T]()}else nr(f);f=f.parent}a(b)?x([n],0,0):a(n.tag)&&y(n)}}return E(e,p,d),e.elm}a(n)&&y(n)}}({nodeOps:Xt,modules:[hr,vr,Er,jr,qr,K?{create:lo,activate:lo,remove:function(n,e){!0!==n.data.show?ao(n,e):e()}}:{}].concat(ur)});Y&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&ko(n,"input")}));var po={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?de(t,"postpatch",(function(){po.componentUpdated(n,e,t)})):mo(n,e,t.context),n._vOptions=[].map.call(n.options,bo)):("textarea"===t.tag||Yt(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",fo),n.addEventListener("compositionend",vo),n.addEventListener("change",vo),Y&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){mo(n,e,t.context);var r=n._vOptions,o=n._vOptions=[].map.call(n.options,bo);if(o.some((function(n,e){return!O(n,r[e])})))(n.multiple?e.value.some((function(n){return ho(n,o)})):e.value!==e.oldValue&&ho(e.value,o))&&ko(n,"change")}}};function mo(n,e,t){go(n,e,t),(Q||X)&&setTimeout((function(){go(n,e,t)}),0)}function go(n,e,t){var r=e.value,o=n.multiple;if(!o||Array.isArray(r)){for(var i,a,s=0,c=n.options.length;s<c;s++)if(a=n.options[s],o)i=R(r,bo(a))>-1,a.selected!==i&&(a.selected=i);else if(O(bo(a),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));o||(n.selectedIndex=-1)}}function ho(n,e){return e.every((function(e){return!O(e,n)}))}function bo(n){return"_value"in n?n._value:n.value}function fo(n){n.target.composing=!0}function vo(n){n.target.composing&&(n.target.composing=!1,ko(n.target,"input"))}function ko(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function yo(n){return!n.componentInstance||n.data&&n.data.transition?n:yo(n.componentInstance._vnode)}var xo={model:po,show:{bind:function(n,e,t){var r=e.value,o=(t=yo(t)).data&&t.data.transition,i=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&o?(t.data.show=!0,io(t,(function(){n.style.display=i}))):n.style.display=r?i:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=yo(t)).data&&t.data.transition?(t.data.show=!0,r?io(t,(function(){n.style.display=n.__vOriginalDisplay})):ao(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,o){o||(n.style.display=n.__vOriginalDisplay)}}},wo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function So(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?So(Je(e.children)):n}function _o(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var o=t._parentListeners;for(var i in o)e[_(i)]=o[i];return e}function Eo(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var To=function(n){return n.tag||fe(n)},Io=function(n){return"show"===n.name},jo={name:"transition",props:wo,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(To)).length){0;var r=this.mode;0;var o=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return o;var i=So(o);if(!i)return o;if(this._leaving)return Eo(n,o);var a="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?a+"comment":a+i.tag:c(i.key)?0===String(i.key).indexOf(a)?i.key:a+i.key:i.key;var s=(i.data||(i.data={})).transition=_o(this),l=this._vnode,d=So(l);if(i.data.directives&&i.data.directives.some(Io)&&(i.data.show=!0),d&&d.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(i,d)&&!fe(d)&&(!d.componentInstance||!d.componentInstance._vnode.isComment)){var u=d.data.transition=C({},s);if("out-in"===r)return this._leaving=!0,de(u,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Eo(n,o);if("in-out"===r){if(fe(i))return l;var p,m=function(){p()};de(s,"afterEnter",m),de(s,"enterCancelled",m),de(u,"delayLeave",(function(n){p=n}))}}return o}}},Ao=C({tag:String,moveClass:String},wo);function Co(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Do(n){n.data.newPos=n.elm.getBoundingClientRect()}function zo(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,o=e.top-t.top;if(r||o){n.data.moved=!0;var i=n.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}delete Ao.mode;var Mo={Transition:jo,TransitionGroup:{props:Ao,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var o=Ze(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,o(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=_o(this),s=0;s<o.length;s++){var c=o[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))i.push(c),t[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){for(var l=[],d=[],u=0;u<r.length;u++){var p=r[u];p.data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),t[p.key]?l.push(p):d.push(p)}this.kept=n(e,null,l),this.removed=d}return n(e,null,i)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Co),n.forEach(Do),n.forEach(zo),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;Xr(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Jr,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Jr,n),t._moveCb=null,Zr(t,e))})}})))},methods:{hasMove:function(n,e){if(!Hr)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){$r(t,n)})),Ur(t,e),t.style.display="none",this.$el.appendChild(t);var r=to(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};Et.config.mustUseProp=function(n,e,t){return"value"===t&&Pt(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Et.config.isReservedTag=Wt,Et.config.isReservedAttr=Mt,Et.config.getTagNamespace=function(n){return Vt(n)?"svg":"math"===n?"math":void 0},Et.config.isUnknownElement=function(n){if(!K)return!0;if(Wt(n))return!1;if(n=n.toLowerCase(),null!=Qt[n])return Qt[n];var e=document.createElement(n);return n.indexOf("-")>-1?Qt[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Qt[n]=/HTMLUnknownElement/.test(e.toString())},C(Et.options.directives,xo),C(Et.options.components,Mo),Et.prototype.__patch__=K?uo:z,Et.prototype.$mount=function(n,e){return function(n,e,t){var r;return n.$el=e,n.$options.render||(n.$options.render=vn),tt(n,"beforeMount"),r=function(){n._update(n._render(),t)},new gt(n,r,z,{before:function(){n._isMounted&&!n._isDestroyed&&tt(n,"beforeUpdate")}},!0),t=!1,null==n.$vnode&&(n._isMounted=!0,tt(n,"mounted")),n}(this,n=n&&K?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},K&&setTimeout((function(){B.devtools&&an&&an.emit("init",Et)}),0);var Po=Et;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function Oo(n,e){for(var t in e)n[t]=e[t];return n}var Ro=/[!'()*]/g,No=function(n){return"%"+n.charCodeAt(0).toString(16)},Lo=/%2C/g,qo=function(n){return encodeURIComponent(n).replace(Ro,No).replace(Lo,",")};function Bo(n){try{return decodeURIComponent(n)}catch(n){0}return n}var Uo=function(n){return null==n||"object"==typeof n?n:String(n)};function $o(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=Bo(t.shift()),o=t.length>0?Bo(t.join("=")):null;void 0===e[r]?e[r]=o:Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]})),e):e}function Go(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return qo(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push(qo(e)):r.push(qo(e)+"="+qo(n)))})),r.join("&")}return qo(e)+"="+qo(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var Fo=/\/?$/;function Ho(n,e,t,r){var o=r&&r.options.stringifyQuery,i=e.query||{};try{i=Ko(i)}catch(n){}var a={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:i,params:e.params||{},fullPath:Wo(e,o),matched:n?Vo(n):[]};return t&&(a.redirectedFrom=Wo(t,o)),Object.freeze(a)}function Ko(n){if(Array.isArray(n))return n.map(Ko);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=Ko(n[t]);return e}return n}var Jo=Ho(null,{path:"/"});function Vo(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function Wo(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var o=n.hash;return void 0===o&&(o=""),(t||"/")+(e||Go)(r)+o}function Qo(n,e,t){return e===Jo?n===e:!!e&&(n.path&&e.path?n.path.replace(Fo,"")===e.path.replace(Fo,"")&&(t||n.hash===e.hash&&Yo(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&Yo(n.query,e.query)&&Yo(n.params,e.params))))}function Yo(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,o){var i=n[t];if(r[o]!==t)return!1;var a=e[t];return null==i||null==a?i===a:"object"==typeof i&&"object"==typeof a?Yo(i,a):String(i)===String(a)}))}function Xo(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var o=t.instances[r],i=t.enteredCbs[r];if(o&&i){delete t.enteredCbs[r];for(var a=0;a<i.length;a++)o._isBeingDestroyed||i[a](o)}}}}var Zo={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,o=e.parent,i=e.data;i.routerView=!0;for(var a=o.$createElement,s=t.name,c=o.$route,l=o._routerViewCache||(o._routerViewCache={}),d=0,u=!1;o&&o._routerRoot!==o;){var p=o.$vnode?o.$vnode.data:{};p.routerView&&d++,p.keepAlive&&o._directInactive&&o._inactive&&(u=!0),o=o.$parent}if(i.routerViewDepth=d,u){var m=l[s],g=m&&m.component;return g?(m.configProps&&ni(g,i,m.route,m.configProps),a(g,i,r)):a()}var h=c.matched[d],b=h&&h.components[s];if(!h||!b)return l[s]=null,a();l[s]={component:b},i.registerRouteInstance=function(n,e){var t=h.instances[s];(e&&t!==n||!e&&t===n)&&(h.instances[s]=e)},(i.hook||(i.hook={})).prepatch=function(n,e){h.instances[s]=e.componentInstance},i.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==h.instances[s]&&(h.instances[s]=n.componentInstance),Xo(c)};var f=h.props&&h.props[s];return f&&(Oo(l[s],{route:c,configProps:f}),ni(b,i,c,f)),a(b,i,r)}};function ni(n,e,t,r){var o=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(o){o=e.props=Oo({},o);var i=e.attrs=e.attrs||{};for(var a in o)n.props&&a in n.props||(i[a]=o[a],delete o[a])}}function ei(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var o=e.split("/");t&&o[o.length-1]||o.pop();for(var i=n.replace(/^\//,"").split("/"),a=0;a<i.length;a++){var s=i[a];".."===s?o.pop():"."!==s&&o.push(s)}return""!==o[0]&&o.unshift(""),o.join("/")}function ti(n){return n.replace(/\/+/g,"/")}var ri=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},oi=vi,ii=di,ai=function(n,e){return pi(di(n,e),e)},si=pi,ci=fi,li=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function di(n,e){for(var t,r=[],o=0,i=0,a="",s=e&&e.delimiter||"/";null!=(t=li.exec(n));){var c=t[0],l=t[1],d=t.index;if(a+=n.slice(i,d),i=d+c.length,l)a+=l[1];else{var u=n[i],p=t[2],m=t[3],g=t[4],h=t[5],b=t[6],f=t[7];a&&(r.push(a),a="");var v=null!=p&&null!=u&&u!==p,k="+"===b||"*"===b,y="?"===b||"*"===b,x=t[2]||s,w=g||h;r.push({name:m||o++,prefix:p||"",delimiter:x,optional:y,repeat:k,partial:v,asterisk:!!f,pattern:w?gi(w):f?".*":"[^"+mi(x)+"]+?"})}}return i<n.length&&(a+=n.substr(i)),a&&r.push(a),r}function ui(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function pi(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",bi(e)));return function(e,r){for(var o="",i=e||{},a=(r||{}).pretty?ui:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,d=i[c.name];if(null==d){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(ri(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var u=0;u<d.length;u++){if(l=a(d[u]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");o+=(0===u?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):a(d),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');o+=c.prefix+l}}else o+=c}return o}}function mi(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function gi(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function hi(n,e){return n.keys=e,n}function bi(n){return n&&n.sensitive?"":"i"}function fi(n,e,t){ri(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,o=!1!==t.end,i="",a=0;a<n.length;a++){var s=n[a];if("string"==typeof s)i+=mi(s);else{var c=mi(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),i+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var d=mi(t.delimiter||"/"),u=i.slice(-d.length)===d;return r||(i=(u?i.slice(0,-d.length):i)+"(?:"+d+"(?=$))?"),i+=o?"$":r&&u?"":"(?="+d+"|$)",hi(new RegExp("^"+i,bi(t)),e)}function vi(n,e,t){return ri(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return hi(n,e)}(n,e):ri(n)?function(n,e,t){for(var r=[],o=0;o<n.length;o++)r.push(vi(n[o],e,t).source);return hi(new RegExp("(?:"+r.join("|")+")",bi(t)),e)}(n,e,t):function(n,e,t){return fi(di(n,t),e,t)}(n,e,t)}oi.parse=ii,oi.compile=ai,oi.tokensToFunction=si,oi.tokensToRegExp=ci;var ki=Object.create(null);function yi(n,e,t){e=e||{};try{var r=ki[n]||(ki[n]=oi.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function xi(n,e,t,r){var o="string"==typeof n?{path:n}:n;if(o._normalized)return o;if(o.name){var i=(o=Oo({},n)).params;return i&&"object"==typeof i&&(o.params=Oo({},i)),o}if(!o.path&&o.params&&e){(o=Oo({},o))._normalized=!0;var a=Oo(Oo({},e.params),o.params);if(e.name)o.name=e.name,o.params=a;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;o.path=yi(s,a,e.path)}else 0;return o}var c=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var o=n.indexOf("?");return o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),{path:n,query:t,hash:e}}(o.path||""),l=e&&e.path||"/",d=c.path?ei(c.path,l,t||o.append):l,u=function(n,e,t){void 0===e&&(e={});var r,o=t||$o;try{r=o(n||"")}catch(n){r={}}for(var i in e){var a=e[i];r[i]=Array.isArray(a)?a.map(Uo):Uo(a)}return r}(c.query,o.query,r&&r.options.parseQuery),p=o.hash||c.hash;return p&&"#"!==p.charAt(0)&&(p="#"+p),{_normalized:!0,path:d,query:u,hash:p}}var wi,Si=function(){},_i={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,o=t.resolve(this.to,r,this.append),i=o.location,a=o.route,s=o.href,c={},l=t.options.linkActiveClass,d=t.options.linkExactActiveClass,u=null==l?"router-link-active":l,p=null==d?"router-link-exact-active":d,m=null==this.activeClass?u:this.activeClass,g=null==this.exactActiveClass?p:this.exactActiveClass,h=a.redirectedFrom?Ho(null,xi(a.redirectedFrom),null,t):a;c[g]=Qo(r,h,this.exactPath),c[m]=this.exact||this.exactPath?c[g]:function(n,e){return 0===n.path.replace(Fo,"/").indexOf(e.path.replace(Fo,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,h);var b=c[g]?this.ariaCurrentValue:null,f=function(n){Ei(n)&&(e.replace?t.replace(i,Si):t.push(i,Si))},v={click:Ei};Array.isArray(this.event)?this.event.forEach((function(n){v[n]=f})):v[this.event]=f;var k={class:c},y=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:a,navigate:f,isActive:c[m],isExactActive:c[g]});if(y){if(1===y.length)return y[0];if(y.length>1||!y.length)return 0===y.length?n():n("span",{},y)}if("a"===this.tag)k.on=v,k.attrs={href:s,"aria-current":b};else{var x=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(x){x.isStatic=!1;var w=x.data=Oo({},x.data);for(var S in w.on=w.on||{},w.on){var _=w.on[S];S in v&&(w.on[S]=Array.isArray(_)?_:[_])}for(var E in v)E in w.on?w.on[E].push(v[E]):w.on[E]=f;var T=x.data.attrs=Oo({},x.data.attrs);T.href=s,T["aria-current"]=b}else k.on=v}return n(this.tag,k,this.$slots.default)}};function Ei(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Ti="undefined"!=typeof window;function Ii(n,e,t,r,o){var i=e||[],a=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,o,i,a){var s=o.path,c=o.name;0;var l=o.pathToRegexpOptions||{},d=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return ti(e.path+"/"+n)}(s,i,l.strict);"boolean"==typeof o.caseSensitive&&(l.sensitive=o.caseSensitive);var u={path:d,regex:ji(d,l),components:o.components||{default:o.component},alias:o.alias?"string"==typeof o.alias?[o.alias]:o.alias:[],instances:{},enteredCbs:{},name:c,parent:i,matchAs:a,redirect:o.redirect,beforeEnter:o.beforeEnter,meta:o.meta||{},props:null==o.props?{}:o.components?o.props:{default:o.props}};o.children&&o.children.forEach((function(o){var i=a?ti(a+"/"+o.path):void 0;n(e,t,r,o,u,i)}));t[u.path]||(e.push(u.path),t[u.path]=u);if(void 0!==o.alias)for(var p=Array.isArray(o.alias)?o.alias:[o.alias],m=0;m<p.length;++m){0;var g={path:p[m],children:o.children};n(e,t,r,g,i,u.path||"/")}c&&(r[c]||(r[c]=u))}(i,a,s,n,o)}));for(var c=0,l=i.length;c<l;c++)"*"===i[c]&&(i.push(i.splice(c,1)[0]),l--,c--);return{pathList:i,pathMap:a,nameMap:s}}function ji(n,e){return oi(n,[],e)}function Ai(n,e){var t=Ii(n),r=t.pathList,o=t.pathMap,i=t.nameMap;function a(n,t,a){var s=xi(n,t,!1,e),l=s.name;if(l){var d=i[l];if(!d)return c(null,s);var u=d.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var p in t.params)!(p in s.params)&&u.indexOf(p)>-1&&(s.params[p]=t.params[p]);return s.path=yi(d.path,s.params),c(d,s,a)}if(s.path){s.params={};for(var m=0;m<r.length;m++){var g=r[m],h=o[g];if(Ci(h.regex,s.path,s.params))return c(h,s,a)}}return c(null,s)}function s(n,t){var r=n.redirect,o="function"==typeof r?r(Ho(n,t,null,e)):r;if("string"==typeof o&&(o={path:o}),!o||"object"!=typeof o)return c(null,t);var s=o,l=s.name,d=s.path,u=t.query,p=t.hash,m=t.params;if(u=s.hasOwnProperty("query")?s.query:u,p=s.hasOwnProperty("hash")?s.hash:p,m=s.hasOwnProperty("params")?s.params:m,l){i[l];return a({_normalized:!0,name:l,query:u,hash:p,params:m},void 0,t)}if(d){var g=function(n,e){return ei(n,e.parent?e.parent.path:"/",!0)}(d,n);return a({_normalized:!0,path:yi(g,m),query:u,hash:p},void 0,t)}return c(null,t)}function c(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=a({_normalized:!0,path:yi(t,e.params)});if(r){var o=r.matched,i=o[o.length-1];return e.params=r.params,c(i,e)}return c(null,e)}(0,t,n.matchAs):Ho(n,t,r,e)}return{match:a,addRoute:function(n,e){var t="object"!=typeof n?i[n]:void 0;Ii([e||n],r,o,i,t),t&&t.alias.length&&Ii(t.alias.map((function(n){return{path:n,children:[e]}})),r,o,i,t)},getRoutes:function(){return r.map((function(n){return o[n]}))},addRoutes:function(n){Ii(n,r,o,i)}}}function Ci(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var o=1,i=r.length;o<i;++o){var a=n.keys[o-1];a&&(t[a.name||"pathMatch"]="string"==typeof r[o]?Bo(r[o]):r[o])}return!0}var Di=Ti&&window.performance&&window.performance.now?window.performance:Date;function zi(){return Di.now().toFixed(3)}var Mi=zi();function Pi(){return Mi}function Oi(n){return Mi=n}var Ri=Object.create(null);function Ni(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=Oo({},window.history.state);return t.key=Pi(),window.history.replaceState(t,"",e),window.addEventListener("popstate",Bi),function(){window.removeEventListener("popstate",Bi)}}function Li(n,e,t,r){if(n.app){var o=n.options.scrollBehavior;o&&n.app.$nextTick((function(){var i=function(){var n=Pi();if(n)return Ri[n]}(),a=o.call(n,e,t,r?i:null);a&&("function"==typeof a.then?a.then((function(n){Hi(n,i)})).catch((function(n){0})):Hi(a,i))}))}}function qi(){var n=Pi();n&&(Ri[n]={x:window.pageXOffset,y:window.pageYOffset})}function Bi(n){qi(),n.state&&n.state.key&&Oi(n.state.key)}function Ui(n){return Gi(n.x)||Gi(n.y)}function $i(n){return{x:Gi(n.x)?n.x:window.pageXOffset,y:Gi(n.y)?n.y:window.pageYOffset}}function Gi(n){return"number"==typeof n}var Fi=/^#\d/;function Hi(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var o=Fi.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(o){var i=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(o,i={x:Gi((t=i).x)?t.x:0,y:Gi(t.y)?t.y:0})}else Ui(n)&&(e=$i(n))}else r&&Ui(n)&&(e=$i(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var Ki,Ji=Ti&&((-1===(Ki=window.navigator.userAgent).indexOf("Android 2.")&&-1===Ki.indexOf("Android 4.0")||-1===Ki.indexOf("Mobile Safari")||-1!==Ki.indexOf("Chrome")||-1!==Ki.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Vi(n,e){qi();var t=window.history;try{if(e){var r=Oo({},t.state);r.key=Pi(),t.replaceState(r,"",n)}else t.pushState({key:Oi(zi())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function Wi(n){Vi(n,!0)}function Qi(n,e,t){var r=function(o){o>=n.length?t():n[o]?e(n[o],(function(){r(o+1)})):r(o+1)};r(0)}var Yi={redirected:2,aborted:4,cancelled:8,duplicated:16};function Xi(n,e){return na(n,e,Yi.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return ea.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function Zi(n,e){return na(n,e,Yi.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function na(n,e,t,r){var o=new Error(r);return o._isRouter=!0,o.from=n,o.to=e,o.type=t,o}var ea=["params","query","hash"];function ta(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function ra(n,e){return ta(n)&&n._isRouter&&(null==e||n.type===e)}function oa(n){return function(e,t,r){var o=!1,i=0,a=null;ia(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){o=!0,i++;var c,l=ca((function(e){var o;((o=e).__esModule||sa&&"Module"===o[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:wi.extend(e),t.components[s]=e,--i<=0&&r()})),d=ca((function(n){var e="Failed to resolve async component "+s+": "+n;a||(a=ta(n)?n:new Error(e),r(a))}));try{c=n(l,d)}catch(n){d(n)}if(c)if("function"==typeof c.then)c.then(l,d);else{var u=c.component;u&&"function"==typeof u.then&&u.then(l,d)}}})),o||r()}}function ia(n,e){return aa(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function aa(n){return Array.prototype.concat.apply([],n)}var sa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ca(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var la=function(n,e){this.router=n,this.base=function(n){if(!n)if(Ti){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=Jo,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function da(n,e,t,r){var o=ia(n,(function(n,r,o,i){var a=function(n,e){"function"!=typeof n&&(n=wi.extend(n));return n.options[e]}(n,e);if(a)return Array.isArray(a)?a.map((function(n){return t(n,r,o,i)})):t(a,r,o,i)}));return aa(r?o.reverse():o)}function ua(n,e){if(e)return function(){return n.apply(e,arguments)}}la.prototype.listen=function(n){this.cb=n},la.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},la.prototype.onError=function(n){this.errorCbs.push(n)},la.prototype.transitionTo=function(n,e,t){var r,o=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var i=this.current;this.confirmTransition(r,(function(){o.updateRoute(r),e&&e(r),o.ensureURL(),o.router.afterHooks.forEach((function(n){n&&n(r,i)})),o.ready||(o.ready=!0,o.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!o.ready&&(ra(n,Yi.redirected)&&i===Jo||(o.ready=!0,o.readyErrorCbs.forEach((function(e){e(n)}))))}))},la.prototype.confirmTransition=function(n,e,t){var r=this,o=this.current;this.pending=n;var i,a,s=function(n){!ra(n)&&ta(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=o.matched.length-1;if(Qo(n,o)&&c===l&&n.matched[c]===o.matched[l])return this.ensureURL(),n.hash&&Li(this.router,o,n,!1),s(((a=na(i=o,n,Yi.duplicated,'Avoided redundant navigation to current location: "'+i.fullPath+'".')).name="NavigationDuplicated",a));var d=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),u=d.updated,p=d.deactivated,m=d.activated,g=[].concat(function(n){return da(n,"beforeRouteLeave",ua,!0)}(p),this.router.beforeHooks,function(n){return da(n,"beforeRouteUpdate",ua)}(u),m.map((function(n){return n.beforeEnter})),oa(m)),h=function(e,t){if(r.pending!==n)return s(Zi(o,n));try{e(n,o,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return na(n,e,Yi.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(o,n))):ta(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(Xi(o,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};Qi(g,h,(function(){Qi(function(n){return da(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,o,i){return n(r,o,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),i(n)}))}}(n,t,r)}))}(m).concat(r.router.resolveHooks),h,(function(){if(r.pending!==n)return s(Zi(o,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){Xo(n)}))}))}))},la.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},la.prototype.setupListeners=function(){},la.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=Jo,this.pending=null};var pa=function(n){function e(e,t){n.call(this,e,t),this._startLocation=ma(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=Ji&&t;r&&this.listeners.push(Ni());var o=function(){var t=n.current,o=ma(n.base);n.current===Jo&&o===n._startLocation||n.transitionTo(o,(function(n){r&&Li(e,n,t,!0)}))};window.addEventListener("popstate",o),this.listeners.push((function(){window.removeEventListener("popstate",o)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){Vi(ti(r.base+n.fullPath)),Li(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){Wi(ti(r.base+n.fullPath)),Li(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(ma(this.base)!==this.current.fullPath){var e=ti(this.base+this.current.fullPath);n?Vi(e):Wi(e)}},e.prototype.getCurrentLocation=function(){return ma(this.base)},e}(la);function ma(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(ti(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var ga=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=ma(n);if(!/^\/#/.test(e))return window.location.replace(ti(n+"/#"+e)),!0}(this.base)||ha()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=Ji&&e;t&&this.listeners.push(Ni());var r=function(){var e=n.current;ha()&&n.transitionTo(ba(),(function(r){t&&Li(n.router,r,e,!0),Ji||ka(r.fullPath)}))},o=Ji?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push((function(){window.removeEventListener(o,r)}))}},e.prototype.push=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){va(n.fullPath),Li(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){ka(n.fullPath),Li(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;ba()!==e&&(n?va(e):ka(e))},e.prototype.getCurrentLocation=function(){return ba()},e}(la);function ha(){var n=ba();return"/"===n.charAt(0)||(ka("/"+n),!1)}function ba(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function fa(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function va(n){Ji?Vi(fa(n)):window.location.hash=n}function ka(n){Ji?Wi(fa(n)):window.location.replace(fa(n))}var ya=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){ra(n,Yi.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(la),xa=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Ai(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!Ji&&!1!==n.fallback,this.fallback&&(e="hash"),Ti||(e="abstract"),this.mode=e,e){case"history":this.history=new pa(this,n.base);break;case"hash":this.history=new ga(this,n.base,this.fallback);break;case"abstract":this.history=new ya(this,n.base);break;default:0}},wa={currentRoute:{configurable:!0}};function Sa(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}xa.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},wa.currentRoute.get=function(){return this.history&&this.history.current},xa.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof pa||t instanceof ga){var r=function(n){t.setupListeners(),function(n){var r=t.current,o=e.options.scrollBehavior;Ji&&o&&"fullPath"in n&&Li(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},xa.prototype.beforeEach=function(n){return Sa(this.beforeHooks,n)},xa.prototype.beforeResolve=function(n){return Sa(this.resolveHooks,n)},xa.prototype.afterEach=function(n){return Sa(this.afterHooks,n)},xa.prototype.onReady=function(n,e){this.history.onReady(n,e)},xa.prototype.onError=function(n){this.history.onError(n)},xa.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},xa.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},xa.prototype.go=function(n){this.history.go(n)},xa.prototype.back=function(){this.go(-1)},xa.prototype.forward=function(){this.go(1)},xa.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},xa.prototype.resolve=function(n,e,t){var r=xi(n,e=e||this.history.current,t,this),o=this.match(r,e),i=o.redirectedFrom||o.fullPath;return{location:r,route:o,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?ti(n+"/"+r):r}(this.history.base,i,this.mode),normalizedTo:r,resolved:o}},xa.prototype.getRoutes=function(){return this.matcher.getRoutes()},xa.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==Jo&&this.history.transitionTo(this.history.getCurrentLocation())},xa.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==Jo&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(xa.prototype,wa),xa.install=function n(e){if(!n.installed||wi!==e){n.installed=!0,wi=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Zo),e.component("RouterLink",_i);var o=e.config.optionMergeStrategies;o.beforeRouteEnter=o.beforeRouteLeave=o.beforeRouteUpdate=o.created}},xa.version="3.5.3",xa.isNavigationFailure=ra,xa.NavigationFailureType=Yi,xa.START_LOCATION=Jo,Ti&&window.Vue&&window.Vue.use(xa);var _a=xa;t(225),t(174),t(251),t(100),t(253),t(32),t(33),t(254);function Ea(n){n.locales&&Object.keys(n.locales).forEach((function(e){n.locales[e].path=e})),Object.freeze(n)}t(76),t(91),t(121);function Ta(n){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var Ia=t(70),ja=(t(184),t(18),t(45),t(227),t(228),t(40),t(25),{NotFound:function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,476))},Layout:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,475))}}),Aa={"v-dc140a80":function(){return t.e(6).then(t.bind(null,477))},"v-c6d7e3c0":function(){return t.e(7).then(t.bind(null,478))},"v-812c033c":function(){return t.e(8).then(t.bind(null,479))},"v-30b385c2":function(){return t.e(9).then(t.bind(null,480))},"v-5a2cd282":function(){return t.e(10).then(t.bind(null,481))},"v-2f93a0e6":function(){return t.e(11).then(t.bind(null,482))},"v-95827e74":function(){return t.e(12).then(t.bind(null,483))},"v-00e5aa38":function(){return t.e(13).then(t.bind(null,484))},"v-ea2cdb88":function(){return t.e(14).then(t.bind(null,485))},"v-63a62e60":function(){return t.e(15).then(t.bind(null,486))},"v-bded170c":function(){return t.e(16).then(t.bind(null,487))},"v-0e25e56a":function(){return t.e(17).then(t.bind(null,488))},"v-68dd6adb":function(){return t.e(18).then(t.bind(null,489))},"v-1893221c":function(){return t.e(19).then(t.bind(null,490))},"v-1094a947":function(){return t.e(20).then(t.bind(null,491))},"v-9690772c":function(){return t.e(21).then(t.bind(null,492))},"v-2ded6bf9":function(){return t.e(22).then(t.bind(null,493))},"v-1f7d690b":function(){return t.e(23).then(t.bind(null,494))},"v-56be3166":function(){return t.e(24).then(t.bind(null,495))},"v-02353645":function(){return t.e(25).then(t.bind(null,496))},"v-7bc439b8":function(){return t.e(26).then(t.bind(null,497))},"v-8a53495c":function(){return t.e(27).then(t.bind(null,498))},"v-3834644e":function(){return t.e(28).then(t.bind(null,499))},"v-a54afc5a":function(){return t.e(29).then(t.bind(null,500))},"v-0a8f6788":function(){return t.e(30).then(t.bind(null,501))},"v-cfad191a":function(){return t.e(31).then(t.bind(null,502))},"v-2a54cea8":function(){return t.e(32).then(t.bind(null,503))},"v-0a4aaf0e":function(){return t.e(33).then(t.bind(null,504))},"v-93569b68":function(){return t.e(34).then(t.bind(null,505))},"v-eba23aa0":function(){return t.e(35).then(t.bind(null,506))},"v-2d9e6cf8":function(){return t.e(36).then(t.bind(null,507))},"v-7d6fc128":function(){return t.e(37).then(t.bind(null,508))},"v-98da2ee0":function(){return t.e(38).then(t.bind(null,509))},"v-9bb044a0":function(){return t.e(39).then(t.bind(null,510))},"v-12e16df6":function(){return t.e(40).then(t.bind(null,511))},"v-6a35a7dc":function(){return t.e(41).then(t.bind(null,512))},"v-4c567690":function(){return t.e(42).then(t.bind(null,513))},"v-3fe1ff73":function(){return t.e(43).then(t.bind(null,514))},"v-20b52a0c":function(){return t.e(44).then(t.bind(null,515))},"v-1a563de3":function(){return t.e(45).then(t.bind(null,516))},"v-1ce7bb32":function(){return t.e(46).then(t.bind(null,517))},"v-095cc5ff":function(){return t.e(47).then(t.bind(null,518))},"v-19944e88":function(){return t.e(48).then(t.bind(null,519))},"v-35935e9c":function(){return t.e(49).then(t.bind(null,520))},"v-0a2f2246":function(){return t.e(50).then(t.bind(null,521))},"v-150d8184":function(){return t.e(54).then(t.bind(null,522))},"v-e5b55ae4":function(){return t.e(55).then(t.bind(null,523))},"v-4fa0bc5f":function(){return t.e(56).then(t.bind(null,524))},"v-536252ab":function(){return t.e(57).then(t.bind(null,525))},"v-6694efc8":function(){return t.e(58).then(t.bind(null,526))},"v-2835dba9":function(){return t.e(59).then(t.bind(null,527))},"v-37c9db00":function(){return t.e(60).then(t.bind(null,528))},"v-30105e6e":function(){return t.e(61).then(t.bind(null,529))},"v-a983545e":function(){return t.e(62).then(t.bind(null,530))},"v-5adc669c":function(){return t.e(63).then(t.bind(null,531))},"v-0670b552":function(){return t.e(64).then(t.bind(null,532))},"v-685bb760":function(){return t.e(65).then(t.bind(null,533))},"v-7dad8b02":function(){return t.e(66).then(t.bind(null,534))},"v-77b753e2":function(){return t.e(67).then(t.bind(null,535))},"v-220226bd":function(){return t.e(68).then(t.bind(null,536))},"v-d809a770":function(){return t.e(69).then(t.bind(null,537))},"v-e3e7063c":function(){return t.e(70).then(t.bind(null,538))},"v-704eb51c":function(){return t.e(71).then(t.bind(null,539))},"v-48944d5a":function(){return t.e(72).then(t.bind(null,540))},"v-695dfcb6":function(){return t.e(73).then(t.bind(null,541))},"v-7ddb1434":function(){return t.e(74).then(t.bind(null,542))},"v-f26a2222":function(){return t.e(75).then(t.bind(null,543))},"v-5f044039":function(){return t.e(76).then(t.bind(null,544))},"v-310b44d6":function(){return t.e(77).then(t.bind(null,545))},"v-0163bee7":function(){return t.e(78).then(t.bind(null,546))},"v-a4144134":function(){return t.e(79).then(t.bind(null,547))},"v-818a32e0":function(){return t.e(80).then(t.bind(null,548))},"v-8ba9dd7a":function(){return t.e(81).then(t.bind(null,549))},"v-8cb52cfc":function(){return t.e(82).then(t.bind(null,550))},"v-48788de2":function(){return t.e(83).then(t.bind(null,551))},"v-4c9ef69c":function(){return t.e(84).then(t.bind(null,552))},"v-c80a5a9c":function(){return t.e(85).then(t.bind(null,553))},"v-e4187760":function(){return t.e(86).then(t.bind(null,554))},"v-29934bff":function(){return t.e(87).then(t.bind(null,555))},"v-6b185955":function(){return t.e(88).then(t.bind(null,556))},"v-9431b692":function(){return t.e(89).then(t.bind(null,557))},"v-79bebf43":function(){return t.e(90).then(t.bind(null,558))},"v-bf7747fa":function(){return t.e(91).then(t.bind(null,559))},"v-2a4a0bb7":function(){return t.e(92).then(t.bind(null,560))},"v-7f6889c6":function(){return t.e(93).then(t.bind(null,561))},"v-459c694a":function(){return t.e(94).then(t.bind(null,562))},"v-7a72d387":function(){return t.e(95).then(t.bind(null,563))},"v-e6c9547a":function(){return t.e(96).then(t.bind(null,564))},"v-1128e807":function(){return t.e(97).then(t.bind(null,565))},"v-a77e2b92":function(){return t.e(98).then(t.bind(null,566))},"v-40000776":function(){return t.e(51).then(t.bind(null,567))},"v-2ac12114":function(){return t.e(99).then(t.bind(null,568))},"v-d416917a":function(){return t.e(100).then(t.bind(null,569))},"v-3785d681":function(){return t.e(101).then(t.bind(null,570))},"v-117cc90e":function(){return t.e(102).then(t.bind(null,571))},"v-84e3ebde":function(){return t.e(103).then(t.bind(null,572))},"v-427cb080":function(){return t.e(104).then(t.bind(null,573))},"v-03ae78c4":function(){return t.e(105).then(t.bind(null,574))},"v-931f934a":function(){return t.e(106).then(t.bind(null,575))},"v-4b4c35dc":function(){return t.e(107).then(t.bind(null,576))},"v-0a92eeec":function(){return t.e(109).then(t.bind(null,577))},"v-c205d0b2":function(){return t.e(108).then(t.bind(null,578))},"v-50673fcc":function(){return t.e(110).then(t.bind(null,579))},"v-6680c492":function(){return t.e(111).then(t.bind(null,580))},"v-12cc11ea":function(){return t.e(113).then(t.bind(null,581))},"v-8f47802a":function(){return t.e(112).then(t.bind(null,582))},"v-dc3c5474":function(){return t.e(114).then(t.bind(null,583))},"v-08740c32":function(){return t.e(115).then(t.bind(null,584))},"v-3704fefa":function(){return t.e(116).then(t.bind(null,585))},"v-fc4d58d8":function(){return t.e(118).then(t.bind(null,586))},"v-1dd07656":function(){return t.e(119).then(t.bind(null,587))},"v-13de5e4a":function(){return t.e(120).then(t.bind(null,588))},"v-c2d87842":function(){return t.e(121).then(t.bind(null,589))},"v-c1a66828":function(){return t.e(122).then(t.bind(null,590))},"v-ed96cd98":function(){return t.e(123).then(t.bind(null,591))},"v-19430f44":function(){return t.e(124).then(t.bind(null,592))},"v-5b9e5448":function(){return t.e(125).then(t.bind(null,593))},"v-3058349d":function(){return t.e(126).then(t.bind(null,594))},"v-741ac0fb":function(){return t.e(127).then(t.bind(null,595))},"v-0dc6bf26":function(){return t.e(128).then(t.bind(null,596))},"v-17b7bcd2":function(){return t.e(129).then(t.bind(null,597))},"v-397e4290":function(){return t.e(130).then(t.bind(null,598))},"v-4b0f9931":function(){return t.e(131).then(t.bind(null,599))},"v-2046e738":function(){return t.e(132).then(t.bind(null,600))},"v-05980e1b":function(){return t.e(133).then(t.bind(null,601))},"v-4637e644":function(){return t.e(134).then(t.bind(null,602))},"v-5b6a58d6":function(){return t.e(135).then(t.bind(null,603))},"v-a1271344":function(){return t.e(136).then(t.bind(null,604))},"v-79b29984":function(){return t.e(137).then(t.bind(null,605))},"v-782329dc":function(){return t.e(138).then(t.bind(null,606))},"v-36dcd140":function(){return t.e(139).then(t.bind(null,607))},"v-02185a76":function(){return t.e(140).then(t.bind(null,608))},"v-38a7db08":function(){return t.e(141).then(t.bind(null,609))},"v-1bf741b0":function(){return t.e(142).then(t.bind(null,610))},"v-74089f43":function(){return t.e(143).then(t.bind(null,611))},"v-16c13813":function(){return t.e(144).then(t.bind(null,612))},"v-65ae1b58":function(){return t.e(145).then(t.bind(null,613))},"v-92e32acc":function(){return t.e(146).then(t.bind(null,614))},"v-12b8a377":function(){return t.e(147).then(t.bind(null,615))},"v-dd62df30":function(){return t.e(148).then(t.bind(null,616))},"v-1247ca23":function(){return t.e(149).then(t.bind(null,617))},"v-39ac2c18":function(){return t.e(150).then(t.bind(null,618))},"v-80330662":function(){return t.e(151).then(t.bind(null,619))},"v-73993688":function(){return t.e(152).then(t.bind(null,620))},"v-570536b6":function(){return t.e(153).then(t.bind(null,621))},"v-045a323e":function(){return t.e(154).then(t.bind(null,622))},"v-ae2ed992":function(){return t.e(155).then(t.bind(null,623))},"v-059385f2":function(){return t.e(156).then(t.bind(null,624))},"v-687cd7b8":function(){return t.e(157).then(t.bind(null,625))},"v-f8655a0e":function(){return t.e(158).then(t.bind(null,626))},"v-093f317f":function(){return t.e(159).then(t.bind(null,627))},"v-9766780a":function(){return t.e(160).then(t.bind(null,628))},"v-59a33950":function(){return t.e(161).then(t.bind(null,629))},"v-87ec7d3a":function(){return t.e(162).then(t.bind(null,630))},"v-046481ec":function(){return t.e(163).then(t.bind(null,631))},"v-098439d0":function(){return t.e(164).then(t.bind(null,632))},"v-8eabad82":function(){return t.e(165).then(t.bind(null,633))},"v-262a1fde":function(){return t.e(166).then(t.bind(null,634))},"v-0c749932":function(){return t.e(167).then(t.bind(null,635))},"v-3c3f9ba1":function(){return t.e(168).then(t.bind(null,636))},"v-ae86ef32":function(){return t.e(169).then(t.bind(null,637))},"v-28665664":function(){return t.e(117).then(t.bind(null,638))},"v-4c82f50b":function(){return t.e(170).then(t.bind(null,639))},"v-6272dfb6":function(){return t.e(172).then(t.bind(null,640))},"v-1dfe3ec2":function(){return t.e(171).then(t.bind(null,641))},"v-a0974e96":function(){return t.e(173).then(t.bind(null,642))},"v-321c5958":function(){return t.e(174).then(t.bind(null,643))},"v-efa3c938":function(){return t.e(175).then(t.bind(null,644))},"v-255f6b29":function(){return t.e(176).then(t.bind(null,645))},"v-28726c01":function(){return t.e(177).then(t.bind(null,646))},"v-4a1b2e40":function(){return t.e(178).then(t.bind(null,647))},"v-f8a50a56":function(){return t.e(179).then(t.bind(null,648))},"v-4b869476":function(){return t.e(180).then(t.bind(null,649))},"v-20e14c4b":function(){return t.e(181).then(t.bind(null,650))},"v-7e4ade2c":function(){return t.e(182).then(t.bind(null,651))},"v-61b52e07":function(){return t.e(183).then(t.bind(null,652))},"v-88106b62":function(){return t.e(184).then(t.bind(null,653))},"v-18890533":function(){return t.e(185).then(t.bind(null,654))},"v-74c698d0":function(){return t.e(186).then(t.bind(null,655))},"v-78a70910":function(){return t.e(187).then(t.bind(null,656))},"v-3222f444":function(){return t.e(188).then(t.bind(null,657))},"v-3c995a47":function(){return t.e(189).then(t.bind(null,658))},"v-18111e3e":function(){return t.e(190).then(t.bind(null,659))},"v-2d7230e8":function(){return t.e(191).then(t.bind(null,660))},"v-2fa8ca6b":function(){return t.e(192).then(t.bind(null,661))},"v-ca52ce64":function(){return t.e(193).then(t.bind(null,662))},"v-620b25ca":function(){return t.e(194).then(t.bind(null,663))},"v-d70c8d9c":function(){return t.e(195).then(t.bind(null,664))},"v-8dc9cdca":function(){return t.e(196).then(t.bind(null,665))},"v-994030a6":function(){return t.e(197).then(t.bind(null,666))},"v-c4e4c304":function(){return t.e(198).then(t.bind(null,667))},"v-c4de77d8":function(){return t.e(199).then(t.bind(null,668))},"v-8851eab0":function(){return t.e(200).then(t.bind(null,669))},"v-f80986b8":function(){return t.e(201).then(t.bind(null,670))},"v-7afa71b5":function(){return t.e(202).then(t.bind(null,671))},"v-bee7b4c4":function(){return t.e(203).then(t.bind(null,672))},"v-7bad6842":function(){return t.e(204).then(t.bind(null,673))},"v-d8f92f9e":function(){return t.e(205).then(t.bind(null,674))},"v-f6cd3ec8":function(){return t.e(206).then(t.bind(null,675))},"v-d7bef6c8":function(){return t.e(207).then(t.bind(null,676))},"v-4988c303":function(){return t.e(208).then(t.bind(null,677))},"v-7073a58e":function(){return t.e(209).then(t.bind(null,678))},"v-60dca1e3":function(){return t.e(210).then(t.bind(null,679))},"v-69282982":function(){return t.e(211).then(t.bind(null,680))},"v-fae7c1bc":function(){return t.e(212).then(t.bind(null,681))},"v-7c133ad0":function(){return t.e(213).then(t.bind(null,682))},"v-0f2a3d88":function(){return t.e(214).then(t.bind(null,683))},"v-78c2fe6d":function(){return t.e(215).then(t.bind(null,684))},"v-7183b4d5":function(){return t.e(216).then(t.bind(null,685))},"v-8f10297e":function(){return t.e(217).then(t.bind(null,686))},"v-233d0506":function(){return t.e(218).then(t.bind(null,687))},"v-64d0cdf1":function(){return t.e(219).then(t.bind(null,688))},"v-6dbf4a31":function(){return t.e(220).then(t.bind(null,689))},"v-f97f4056":function(){return t.e(221).then(t.bind(null,690))},"v-03f86a9e":function(){return t.e(222).then(t.bind(null,691))},"v-31abbd86":function(){return t.e(223).then(t.bind(null,692))},"v-77f35f9e":function(){return t.e(224).then(t.bind(null,693))},"v-6de74afa":function(){return t.e(226).then(t.bind(null,694))},"v-4c1cfbd2":function(){return t.e(225).then(t.bind(null,695))},"v-a146c5d8":function(){return t.e(227).then(t.bind(null,696))},"v-9d6dab12":function(){return t.e(228).then(t.bind(null,697))},"v-1572d344":function(){return t.e(229).then(t.bind(null,698))},"v-613443b0":function(){return t.e(230).then(t.bind(null,699))},"v-2da1a437":function(){return t.e(231).then(t.bind(null,700))},"v-a0a5c11c":function(){return t.e(232).then(t.bind(null,701))},"v-229229ee":function(){return t.e(233).then(t.bind(null,702))},"v-0792908f":function(){return t.e(234).then(t.bind(null,703))},"v-0ba2fba8":function(){return t.e(235).then(t.bind(null,704))},"v-89e63956":function(){return t.e(236).then(t.bind(null,705))},"v-080f0c7c":function(){return t.e(237).then(t.bind(null,706))},"v-5840b4cb":function(){return t.e(238).then(t.bind(null,707))},"v-4de06ab6":function(){return t.e(239).then(t.bind(null,708))},"v-eb9fcf56":function(){return t.e(240).then(t.bind(null,709))},"v-183d693e":function(){return t.e(241).then(t.bind(null,710))},"v-09f5c492":function(){return t.e(242).then(t.bind(null,711))},"v-0a72df0a":function(){return t.e(243).then(t.bind(null,712))},"v-363a61d8":function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,713))},"v-250b49a5":function(){return t.e(53).then(t.bind(null,714))},"v-2617300a":function(){return t.e(52).then(t.bind(null,715))}};function Ca(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var Da=/-(\w)/g,za=Ca((function(n){return n.replace(Da,(function(n,e){return e?e.toUpperCase():""}))})),Ma=/\B([A-Z])/g,Pa=Ca((function(n){return n.replace(Ma,"-$1").toLowerCase()})),Oa=Ca((function(n){return n.charAt(0).toUpperCase()+n.slice(1)}));function Ra(n,e){if(e)return n(e)?n(e):e.includes("-")?n(Oa(za(e))):n(Oa(e))||n(Pa(e))}var Na=Object.assign({},ja,Aa),La=function(n){return Na[n]},qa=function(n){return Aa[n]},Ba=function(n){return ja[n]},Ua=function(n){return Po.component(n)};function $a(n){return Ra(qa,n)}function Ga(n){return Ra(Ba,n)}function Fa(n){return Ra(La,n)}function Ha(n){return Ra(Ua,n)}function Ka(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Promise.all(e.filter((function(n){return n})).map(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ha(e)||!Fa(e)){n.next=5;break}return n.next=3,Fa(e)();case 3:t=n.sent,Po.component(e,t.default);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()))}function Ja(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var Va=t(132),Wa=(t(185),t(108),t(72),t(215)),Qa=t.n(Wa),Ya=t(216),Xa=t.n(Ya),Za={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(n){return"meta"===Object(Va.a)(n,1)[0]})).map((function(n){var e=Object(Va.a)(n,2);e[0];return e[1]})),this.$ssrContext){var n=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(e=n)?e.map((function(n){var e="<meta";return Object.keys(n).forEach((function(t){e+=" ".concat(t,'="').concat(Xa()(n[t]),'"')})),e+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=es(this.$canonicalUrl)}var e},mounted:function(){this.currentMetaTags=Object(Ia.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var n=this.getMergedMetaTags();this.currentMetaTags=ts(n,this.currentMetaTags)},getMergedMetaTags:function(){var n=this.$page.frontmatter.meta||[];return Qa()([{name:"description",content:this.$description}],n,this.siteMeta,rs)},updateCanonicalLink:function(){ns(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",es(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){ts(null,this.currentMetaTags),ns()}};function ns(){var n=document.querySelector("link[rel='canonical']");n&&n.remove()}function es(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n?'<link href="'.concat(n,'" rel="canonical" />'):""}function ts(n,e){if(e&&Object(Ia.a)(e).filter((function(n){return n.parentNode===document.head})).forEach((function(n){return document.head.removeChild(n)})),n)return n.map((function(n){var e=document.createElement("meta");return Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),document.head.appendChild(e),e}))}function rs(n){for(var e=0,t=["name","property","itemprop"];e<t.length;e++){var r=t[e];if(n.hasOwnProperty(r))return n[r]+r}return JSON.stringify(n)}t(134);var os=t(148),is={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(os)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var n=this,e=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(n){return e.some((function(e){return e.hash===n.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=window.innerHeight+r,a=0;a<t.length;a++){var s=t[a],c=t[a+1],l=0===a&&0===r||r>=s.parentElement.offsetTop+10&&(!c||r<c.parentElement.offsetTop-10),d=decodeURIComponent(this.$route.hash);if(l&&d!==decodeURIComponent(s.hash)){var u=s;if(i===o)for(var p=a+1;p<t.length;p++)if(d===decodeURIComponent(t[p].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(u.hash),(function(){n.$nextTick((function(){n.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},as=(t(104),t(99)),ss=t.n(as),cs={mounted:function(){var n=this;ss.a.configure({showSpinner:!1}),this.$router.beforeEach((function(n,e,t){n.path===e.path||Po.component(n.name)||ss.a.start(),t()})),this.$router.afterEach((function(){ss.a.done(),n.isSidebarOpen=!1}))}};t(74),t(42),t(77),t(361);function ls(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t(138);function ds(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function us(n,e,t){return e&&ds(n.prototype,e),t&&ds(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}t(362);var ps=function(){function n(){ls(this,n);this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}return us(n,[{key:"show",value:function(n){var e=this,t=n.text,r=void 0===t?"":t,o=n.duration,i=void 0===o?3e3:o,a=document.createElement("div");a.className="message move-in",a.innerHTML='\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">'.concat(r,"</div>\n    "),this.containerEl.appendChild(a),i>0&&setTimeout((function(){e.close(a)}),i)}},{key:"close",value:function(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",(function(){n.remove()}))}}]),n}(),ms={mounted:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy:function(){var n=this;setTimeout((function(){(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach((function(e){document.querySelectorAll(e).forEach(n.generateCopyButton)}))}),1e3)},generateCopyButton:function(n){var e=this;if(!n.classList.contains("codecopy-enabled")){var t=document.createElement("i");t.className="code-copy",t.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',t.title="Copy to clipboard",t.addEventListener("click",(function(){e.copyToClipboard(n.innerText)})),n.appendChild(t),n.classList.add("codecopy-enabled")}},copyToClipboard:function(n){var e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),(new ps).show({text:"å¤å¶æå",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};t(230),t(73),t(133),t(135),t(364);!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var gs={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},hs={},bs=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},fs=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:gs[n]},vs=function n(e,t,r){var o=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))o[n]=t[n];else{var e=n.replace("data","");o.dataset[e]=t[n]}})),r&&r.forEach((function(e){var t=e.tag,r=e.attrs,i=e.children;o.appendChild(n(t,r,i))})),o},ks=function(n,e,t){var r,o=(r=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(r));return 1!==o.length||t?o:o[0]},ys=function(n,e){var t,r,o=n.match(/<style>([\s\S]+)<\/style>/),i=n.match(/<template>([\s\S]+)<\/template>/),a=n.match(/<script>([\s\S]+)<\/script>/),s={css:o&&o[1].replace(/^\n|\n$/g,""),html:i&&i[1].replace(/^\n|\n$/g,""),js:a&&a[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=bs(s.html),s.jsTpl=(t=s.js,r=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(r,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),r="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),o=window.Babel?window.Babel.transform(r,{presets:["es2015"]}).code:r,i=[eval][0](o);return i.template=e,i}(s.js,s.html);var c=fs("vue");return s.jsLib.unshift(c),s},xs=function(n,e){var t,r=n.match(/<style>([\s\S]+)<\/style>/),o=n.match(/<html>([\s\S]+)<\/html>/),i=n.match(/<script>([\s\S]+)<\/script>/),a={css:r&&r[1].replace(/^\n|\n$/g,""),html:o&&o[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return a.htmlTpl=a.html,a.jsTpl=a.js,a.script=(t=a.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),a},ws=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function Ss(){var n=ks(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=ks(n,"vuepress-plugin-demo-block__code"),t=ks(n,"vuepress-plugin-demo-block__display"),r=ks(n,"vuepress-plugin-demo-block__footer"),o=ks(t,"vuepress-plugin-demo-block__app"),i=decodeURIComponent(n.dataset.code),a=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);a=a?JSON.parse(a):{};var c=e.querySelector("div").clientHeight,l="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,r="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),o=new Function("return ".concat(r))(),i={js:o,css:o.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:ws(n),htmlTpl:bs("")},a=fs("react"),s=fs("reactDOM");return i.jsLib.unshift(a,s),i}(i,a):"vanilla"===s?xs(i,a):ys(i,a),d=vs("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(r.appendChild(d),d.addEventListener("click",_s.bind(null,d,c,e,r)),fs("jsfiddle")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,o=n.jsLib,i=n.cssLib,a=o.concat(i).concat(fs("cssLib")).concat(fs("jsLib")).join(",");return vs("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:r}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:a}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(l)),fs("codepen")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,o=n.jsLib,i=n.cssLib,a=JSON.stringify({css:e,html:t,js:r,js_external:o.concat(fs("jsLib")).join(";"),css_external:i.concat(fs("cssLib")).join(";"),layout:fs("codepenLayout"),js_pre_processor:fs("codepenJsProcessor"),editors:fs("codepenEditors")});return vs("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:a}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(l)),void 0!==a.horizontal?a.horizontal:fs("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var u=e.firstChild.cloneNode(!0);u.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(u)}if(l.css&&function(n){if(!hs[n]){var e=vs("style",{innerHTML:n});document.body.appendChild(e),hs[n]=!0}}(l.css),"react"===s)ReactDOM.render(React.createElement(l.js),o);else if("vue"===s){var p=(new(Vue.extend(l.script))).$mount();o.appendChild(p.$el)}else"vanilla"===s&&(o.innerHTML=l.html,new Function("return (function(){".concat(l.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){Ss()}),300)}function _s(n,e,t,r){var o="1"!==n.dataset.isExpand;t.style.height=o?"".concat(e,"px"):0,o?r.classList.add("vuepress-plugin-demo-block__show-link"):r.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=o?"1":"0"}var Es={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},Ss()},updated:function(){Ss()}},Ts=(t(219),"auto"),Is="zoom-in",js="zoom-out",As="grab",Cs="move";function Ds(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o={passive:!1};r?n.addEventListener(e,t,o):n.removeEventListener(e,t,o)}function zs(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function Ms(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Ps(n,e,t){!function(n){var e=Os,t=Rs;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var o=n.transform;delete n.transform,n[t]=o}}(e);var r=n.style,o={};for(var i in e)t&&(o[i]=r[i]||""),r[i]=e[i];return o}var Os="transition",Rs="transform",Ns="transform",Ls="transitionend";var qs=function(){},Bs={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:qs,onClose:qs,onGrab:qs,onMove:qs,onRelease:qs,onBeforeOpen:qs,onBeforeClose:qs,onBeforeGrab:qs,onBeforeRelease:qs,onImageLoading:qs,onImageLoaded:qs},Us={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),Gs(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,o=this.lastScrollPosition.y-t,i=this.options.scrollThreshold;(Math.abs(o)>=i||Math.abs(r)>=i)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if($s(n)&&!Gs(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){$s(n)&&!Gs(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function $s(n){return 0===n.button}function Gs(n){return n.metaKey||n.ctrlKey}var Fs={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Ps(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),Ds(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Ps(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ks=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Js=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vs={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Ms(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,o=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?As:js,transition:Ns+"\n        "+r+"s\n        "+o,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Ps(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Ps(this.el,{transform:"none"})},grab:function(n,e,t){var r=Ws(),o=r.x-n,i=r.y-e;Ps(this.el,{cursor:Cs,transform:"translate3d(\n        "+(this.translate.x+o)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=Ws(),o=r.x-n,i=r.y-e;Ps(this.el,{transition:Ns,transform:"translate3d(\n        "+(this.translate.x+o)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Ps(this.el,this.styleClose)},restoreOpenStyle:function(){Ps(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=Ws(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,o=r.customSize,i=r.scaleBase;if(!o&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(o&&"object"===(void 0===o?"undefined":Hs(o)))return{x:o.width/this.rect.width,y:o.height/this.rect.height};var a=this.rect.width/2,s=this.rect.height/2,c=Ws(),l={x:c.x-a,y:c.y-s},d=l.x/a,u=l.y/s,p=i+Math.min(d,u);if(o&&"string"==typeof o){var m=t||this.el.naturalWidth,g=e||this.el.naturalHeight,h=parseFloat(o)*m/(100*this.rect.width),b=parseFloat(o)*g/(100*this.rect.height);if(p>h||p>b)return{x:h,y:b}}return{x:p,y:p}}};function Ws(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function Qs(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){Ds(n,r,e[r],t)}))}var Ys=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(Vs),this.overlay=Object.create(Fs),this.handler=Object.create(Us),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=Js({},Bs,e),this.overlay.init(this),this.handler.init(this)}return Ks(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=Is,Ds(n,"click",this.handler.click),this.options.preloadImage&&zs(Ms(n)));return this}},{key:"config",value:function(n){return n?(Js(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var o=this.target.srcOriginal;null!=o&&(this.options.onImageLoading(r),zs(o,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Ds(document,"scroll",this.handler.scroll),Ds(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Ds(window,"resize",this.handler.resizeWindow);var i=function n(){Ds(r,Ls,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&Qs(document,e.handler,!0),t(r)};return Ds(r,Ls,i),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=Ts,this.overlay.fadeOut(),this.target.zoomOut(),Ds(document,"scroll",this.handler.scroll,!1),Ds(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Ds(window,"resize",this.handler.resizeWindow,!1);var r=function r(){Ds(t,Ls,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&Qs(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return Ds(t,Ls,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var o=this.target.el;this.options.onBeforeGrab(o),this.released=!1,this.target.grab(n,e,t);var i=function n(){Ds(o,Ls,n,!1),r(o)};return Ds(o,Ls,i),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Cs,this.target.move(n,e,t);var o=this.target.el,i=function n(){Ds(o,Ls,n,!1),r(o)};return Ds(o,Ls,i),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=Ts,this.target.restoreOpenStyle();var r=function r(){Ds(t,Ls,r,!1),n.lock=!1,n.released=!0,e(t)};return Ds(t,Ls,r),this}}}]),n}(),Xs=".theme-vdoing-content img:not(.no-zoom)",Zs=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),nc=Number("500"),ec=function(){function n(){ls(this,n),this.instance=new Ys(Zs)}return us(n,[{key:"update",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xs;"undefined"!=typeof window&&this.instance.listen(n)}},{key:"updateDelay",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nc;setTimeout((function(){return n.update(e)}),t)}}]),n}(),tc=[Za,is,cs,ms,Es,{watch:{"$page.path":function(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted:function(){this.$vuepress.zooming=new ec,this.$vuepress.zooming.updateDelay()}}],rc={name:"GlobalLayout",computed:{layout:function(){var n=this.getLayout();return Ja("layout",n),Po.component(n)}},methods:{getLayout:function(){if(this.$page.path){var n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},oc=t(29),ic=Object(oc.a)(rc,(function(){var n=this.$createElement;return(this._self._c||n)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){var r;switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),(r=n[e]).push.apply(r,Object(Ia.a)(t));break;default:throw new Error("Unknown option name.")}}(ic,"mixins",tc);var ac=[{name:"v-dc140a80",path:"/pages/250f21/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-dc140a80").then(t)}},{path:"/pages/250f21/index.html",redirect:"/pages/250f21/"},{path:"/01.æå/01.åºç¡/01.åºç¡è®¾æ½å³æå¡.html",redirect:"/pages/250f21/"},{name:"v-c6d7e3c0",path:"/pages/f04654/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-c6d7e3c0").then(t)}},{path:"/pages/f04654/index.html",redirect:"/pages/f04654/"},{path:"/01.æå/01.åºç¡/02.å¹³å°å³æå¡.html",redirect:"/pages/f04654/"},{name:"v-812c033c",path:"/pages/58bcba/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-812c033c").then(t)}},{path:"/pages/58bcba/index.html",redirect:"/pages/58bcba/"},{path:"/01.æå/01.åºç¡/03.å¾®æå¡è§£å³å¤æé®é¢.html",redirect:"/pages/58bcba/"},{name:"v-30b385c2",path:"/pages/b05793/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-30b385c2").then(t)}},{path:"/pages/b05793/index.html",redirect:"/pages/b05793/"},{path:"/01.æå/01.åºç¡/04.Spring Cloud.html",redirect:"/pages/b05793/"},{name:"v-5a2cd282",path:"/pages/1946f3/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-5a2cd282").then(t)}},{path:"/pages/1946f3/index.html",redirect:"/pages/1946f3/"},{path:"/01.æå/01.åºç¡/05.Spring Cloud Alibaba.html",redirect:"/pages/1946f3/"},{name:"v-2f93a0e6",path:"/pages/aeaf26/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2f93a0e6").then(t)}},{path:"/pages/aeaf26/index.html",redirect:"/pages/aeaf26/"},{path:"/01.æå/02.é«çº§/01.Docker.html",redirect:"/pages/aeaf26/"},{name:"v-95827e74",path:"/pages/059418/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-95827e74").then(t)}},{path:"/pages/059418/index.html",redirect:"/pages/059418/"},{path:"/01.æå/02.é«çº§/02.Kubernetes.html",redirect:"/pages/059418/"},{name:"v-00e5aa38",path:"/pages/fbef9a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-00e5aa38").then(t)}},{path:"/pages/fbef9a/index.html",redirect:"/pages/fbef9a/"},{path:"/01.æå/03.ä¸é¢/01.Spring Security OAuth2.html",redirect:"/pages/fbef9a/"},{name:"v-ea2cdb88",path:"/pages/72ccd6/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-ea2cdb88").then(t)}},{path:"/pages/72ccd6/index.html",redirect:"/pages/72ccd6/"},{path:"/01.æå/03.ä¸é¢/02.ä¼ä¸çº§ DevOps å®è·µ.html",redirect:"/pages/72ccd6/"},{name:"v-63a62e60",path:"/pages/202ee1/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-63a62e60").then(t)}},{path:"/pages/202ee1/index.html",redirect:"/pages/202ee1/"},{path:"/02.Linux/01.Linux/01.Linux ç®ä».html",redirect:"/pages/202ee1/"},{name:"v-bded170c",path:"/pages/715f2d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-bded170c").then(t)}},{path:"/pages/715f2d/index.html",redirect:"/pages/715f2d/"},{path:"/02.Linux/01.Linux/02.Linux ä¸ Windows æ¯è¾.html",redirect:"/pages/715f2d/"},{name:"v-0e25e56a",path:"/pages/56abb4/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0e25e56a").then(t)}},{path:"/pages/56abb4/index.html",redirect:"/pages/56abb4/"},{path:"/02.Linux/01.Linux/03.Linux è¿ç¨æ§å¶ç®¡ç.html",redirect:"/pages/56abb4/"},{name:"v-68dd6adb",path:"/pages/1e9034/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-68dd6adb").then(t)}},{path:"/pages/1e9034/index.html",redirect:"/pages/1e9034/"},{path:"/02.Linux/01.Linux/04.Linux çç®å½ç»æ.html",redirect:"/pages/1e9034/"},{name:"v-1893221c",path:"/pages/8ad474/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1893221c").then(t)}},{path:"/pages/8ad474/index.html",redirect:"/pages/8ad474/"},{path:"/02.Linux/01.Linux/05.Linux æä½æä»¶ç®å½.html",redirect:"/pages/8ad474/"},{name:"v-1094a947",path:"/pages/6f8d47/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1094a947").then(t)}},{path:"/pages/6f8d47/index.html",redirect:"/pages/6f8d47/"},{path:"/02.Linux/01.Linux/06.Linux ç³»ç»ç®¡çå½ä»¤.html",redirect:"/pages/6f8d47/"},{name:"v-9690772c",path:"/pages/ef1cfd/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-9690772c").then(t)}},{path:"/pages/ef1cfd/index.html",redirect:"/pages/ef1cfd/"},{path:"/02.Linux/01.Linux/07.Linux å¼å³æºå½ä»¤.html",redirect:"/pages/ef1cfd/"},{name:"v-2ded6bf9",path:"/pages/657e76/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2ded6bf9").then(t)}},{path:"/pages/657e76/index.html",redirect:"/pages/657e76/"},{path:"/02.Linux/01.Linux/08.Linux åç¼©å½ä»¤.html",redirect:"/pages/657e76/"},{name:"v-1f7d690b",path:"/pages/287d9f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1f7d690b").then(t)}},{path:"/pages/287d9f/index.html",redirect:"/pages/287d9f/"},{path:"/02.Linux/01.Linux/09.Linux ç¼è¾å¨.html",redirect:"/pages/287d9f/"},{name:"v-56be3166",path:"/pages/0d3526/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-56be3166").then(t)}},{path:"/pages/0d3526/index.html",redirect:"/pages/0d3526/"},{path:"/02.Linux/01.Linux/10.Linux è½¯ä»¶åç®¡ç.html",redirect:"/pages/0d3526/"},{name:"v-02353645",path:"/pages/037bdb/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-02353645").then(t)}},{path:"/pages/037bdb/index.html",redirect:"/pages/037bdb/"},{path:"/02.Linux/01.Linux/11.Linux ç¨æ·åç»ç®¡ç.html",redirect:"/pages/037bdb/"},{name:"v-7bc439b8",path:"/pages/c29423/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7bc439b8").then(t)}},{path:"/pages/c29423/index.html",redirect:"/pages/c29423/"},{path:"/02.Linux/01.Linux/12.Linux æä»¶æéç®¡ç.html",redirect:"/pages/c29423/"},{name:"v-8a53495c",path:"/pages/6afa9f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8a53495c").then(t)}},{path:"/pages/6afa9f/index.html",redirect:"/pages/6afa9f/"},{path:"/02.Linux/01.Linux/13.Linux LVM ç£çæ©å®¹.html",redirect:"/pages/6afa9f/"},{name:"v-3834644e",path:"/pages/8eb38e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3834644e").then(t)}},{path:"/pages/8eb38e/index.html",redirect:"/pages/8eb38e/"},{path:"/03.CentOS/01.å¥é¨/01.ä»ä¹æ¯ CentOS.html",redirect:"/pages/8eb38e/"},{name:"v-a54afc5a",path:"/pages/4d8bf7/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a54afc5a").then(t)}},{path:"/pages/4d8bf7/index.html",redirect:"/pages/4d8bf7/"},{path:"/03.CentOS/01.å¥é¨/02.CentOS 7 ä¸­ä½¿ç¨é¿éäºçyumæº.html",redirect:"/pages/4d8bf7/"},{name:"v-0a8f6788",path:"/pages/801448/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0a8f6788").then(t)}},{path:"/pages/801448/index.html",redirect:"/pages/801448/"},{path:"/03.CentOS/01.å¥é¨/03.CentOS 7 è®¾ç½® SSH éè¿å¯é¥ç»å½.html",redirect:"/pages/801448/"},{name:"v-cfad191a",path:"/pages/72cb23/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-cfad191a").then(t)}},{path:"/pages/72cb23/index.html",redirect:"/pages/72cb23/"},{path:"/03.CentOS/01.å¥é¨/04.CentOS 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥.html",redirect:"/pages/72cb23/"},{name:"v-2a54cea8",path:"/pages/b65cee/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2a54cea8").then(t)}},{path:"/pages/b65cee/index.html",redirect:"/pages/b65cee/"},{path:"/03.CentOS/01.å¥é¨/05.CentOS 7 å®è£Jdkå¹¶éç½®ç¯å¢åé.html",redirect:"/pages/b65cee/"},{name:"v-0a4aaf0e",path:"/pages/8a00d6/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0a4aaf0e").then(t)}},{path:"/pages/8a00d6/index.html",redirect:"/pages/8a00d6/"},{path:"/03.CentOS/01.å¥é¨/06.CentOS 7 éç½®éæipåå¨æip.html",redirect:"/pages/8a00d6/"},{name:"v-93569b68",path:"/pages/2bd107/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-93569b68").then(t)}},{path:"/pages/2bd107/index.html",redirect:"/pages/2bd107/"},{path:"/03.CentOS/01.å¥é¨/07.CentOS 7 å®è£ Nginx.html",redirect:"/pages/2bd107/"},{name:"v-eba23aa0",path:"/pages/b0c71d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-eba23aa0").then(t)}},{path:"/pages/b0c71d/index.html",redirect:"/pages/b0c71d/"},{path:"/03.CentOS/01.å¥é¨/08.CentOS 7 å®è£ Tomcat.html",redirect:"/pages/b0c71d/"},{name:"v-2d9e6cf8",path:"/pages/3748a2/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2d9e6cf8").then(t)}},{path:"/pages/3748a2/index.html",redirect:"/pages/3748a2/"},{path:"/03.CentOS/01.å¥é¨/09.CentOS 7 å®è£ MySQL.html",redirect:"/pages/3748a2/"},{name:"v-7d6fc128",path:"/pages/866b2e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7d6fc128").then(t)}},{path:"/pages/866b2e/index.html",redirect:"/pages/866b2e/"},{path:"/03.CentOS/01.å¥é¨/10.CentOS 7 å®è£ MongoDB.html",redirect:"/pages/866b2e/"},{name:"v-98da2ee0",path:"/pages/39ed97/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-98da2ee0").then(t)}},{path:"/pages/39ed97/index.html",redirect:"/pages/39ed97/"},{path:"/03.CentOS/01.å¥é¨/11.CentOS 7 å®è£ NodeJS.html",redirect:"/pages/39ed97/"},{name:"v-9bb044a0",path:"/pages/5cddbb/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-9bb044a0").then(t)}},{path:"/pages/5cddbb/index.html",redirect:"/pages/5cddbb/"},{path:"/03.CentOS/01.å¥é¨/12.CentOS 7 å®è£ Gitlab.html",redirect:"/pages/5cddbb/"},{name:"v-12e16df6",path:"/pages/1dfc9f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-12e16df6").then(t)}},{path:"/pages/1dfc9f/index.html",redirect:"/pages/1dfc9f/"},{path:"/03.CentOS/01.å¥é¨/13.CentOS 7 å®è£ SonarQube.html",redirect:"/pages/1dfc9f/"},{name:"v-6a35a7dc",path:"/pages/893d19/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-6a35a7dc").then(t)}},{path:"/pages/893d19/index.html",redirect:"/pages/893d19/"},{path:"/03.CentOS/01.å¥é¨/14.CentOS 7 å®è£ Jenkins.html",redirect:"/pages/893d19/"},{name:"v-4c567690",path:"/pages/54c917/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4c567690").then(t)}},{path:"/pages/54c917/index.html",redirect:"/pages/54c917/"},{path:"/03.CentOS/01.å¥é¨/15.CentOS 7 å®è£ Redis.html",redirect:"/pages/54c917/"},{name:"v-3fe1ff73",path:"/pages/8c6aad/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3fe1ff73").then(t)}},{path:"/pages/8c6aad/index.html",redirect:"/pages/8c6aad/"},{path:"/03.CentOS/01.å¥é¨/16.CentOS 7 å®è£ TigerVNC Server.html",redirect:"/pages/8c6aad/"},{name:"v-20b52a0c",path:"/pages/50595e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-20b52a0c").then(t)}},{path:"/pages/50595e/index.html",redirect:"/pages/50595e/"},{path:"/03.CentOS/01.å¥é¨/17.CentOS 7 å®è£ NFS.html",redirect:"/pages/50595e/"},{name:"v-1a563de3",path:"/pages/619aa3/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1a563de3").then(t)}},{path:"/pages/619aa3/index.html",redirect:"/pages/619aa3/"},{path:"/03.CentOS/02.é«çº§/01.CentOS7 LVMæä½å®æ.html",redirect:"/pages/619aa3/"},{name:"v-1ce7bb32",path:"/pages/1b51c8/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1ce7bb32").then(t)}},{path:"/pages/1b51c8/index.html",redirect:"/pages/1b51c8/"},{path:"/03.CentOS/03.å®æ/01.é¨ç½²åå°portal-webé¡¹ç®.html",redirect:"/pages/1b51c8/"},{name:"v-095cc5ff",path:"/pages/7ba23c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-095cc5ff").then(t)}},{path:"/pages/7ba23c/index.html",redirect:"/pages/7ba23c/"},{path:"/03.CentOS/03.å®æ/02.é¨ç½²åç«¯ITPé¡¹ç®.html",redirect:"/pages/7ba23c/"},{name:"v-19944e88",path:"/pages/49420c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-19944e88").then(t)}},{path:"/pages/49420c/index.html",redirect:"/pages/49420c/"},{path:"/04.Ubuntu/01.Ubuntu/01.ä»ä¹æ¯ Ubuntu.html",redirect:"/pages/49420c/"},{name:"v-35935e9c",path:"/pages/075d45/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-35935e9c").then(t)}},{path:"/pages/075d45/index.html",redirect:"/pages/075d45/"},{path:"/04.Ubuntu/02.Ubuntu ä½¿ç¨/01.Ubuntu å®è£æç¨.html",redirect:"/pages/075d45/"},{name:"v-0a2f2246",path:"/pages/5d8a7e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0a2f2246").then(t)}},{path:"/pages/5d8a7e/index.html",redirect:"/pages/5d8a7e/"},{path:"/04.Ubuntu/02.Ubuntu ä½¿ç¨/02.Ubuntu æ´æ¢å½åæº.html",redirect:"/pages/5d8a7e/"},{name:"v-150d8184",path:"/pages/d6e0ac/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-150d8184").then(t)}},{path:"/pages/d6e0ac/index.html",redirect:"/pages/d6e0ac/"},{path:"/05.MacOS/01.macOS/01.macOSå¼åç¯å¢å®è£.html",redirect:"/pages/d6e0ac/"},{name:"v-e5b55ae4",path:"/pages/3b1a68/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-e5b55ae4").then(t)}},{path:"/pages/3b1a68/index.html",redirect:"/pages/3b1a68/"},{path:"/05.MacOS/01.macOS/02.macOSç»ç«¯å©å¨iTerm2.html",redirect:"/pages/3b1a68/"},{name:"v-4fa0bc5f",path:"/pages/078f4d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4fa0bc5f").then(t)}},{path:"/pages/078f4d/index.html",redirect:"/pages/078f4d/"},{path:"/05.MacOS/01.macOS/03.macOSèªå¸¦ç»ç«¯ç¾å.html",redirect:"/pages/078f4d/"},{name:"v-536252ab",path:"/pages/9ee77d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-536252ab").then(t)}},{path:"/pages/9ee77d/index.html",redirect:"/pages/9ee77d/"},{path:"/05.MacOS/01.macOS/04.macOSå¸¸ç¨è½¯ä»¶.html",redirect:"/pages/9ee77d/"},{name:"v-6694efc8",path:"/pages/22c758/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-6694efc8").then(t)}},{path:"/pages/22c758/index.html",redirect:"/pages/22c758/"},{path:"/06.GitLab/01.GitLab/01.ä»ä¹æ¯ Git.html",redirect:"/pages/22c758/"},{name:"v-2835dba9",path:"/pages/75dfd9/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2835dba9").then(t)}},{path:"/pages/75dfd9/index.html",redirect:"/pages/75dfd9/"},{path:"/06.GitLab/01.GitLab/02.å®è£ Git.html",redirect:"/pages/75dfd9/"},{name:"v-37c9db00",path:"/pages/8383bb/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-37c9db00").then(t)}},{path:"/pages/8383bb/index.html",redirect:"/pages/8383bb/"},{path:"/06.GitLab/01.GitLab/03.Git çä¸è¬å·¥ä½æµç¨.html",redirect:"/pages/8383bb/"},{name:"v-30105e6e",path:"/pages/20e9b1/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-30105e6e").then(t)}},{path:"/pages/20e9b1/index.html",redirect:"/pages/20e9b1/"},{path:"/06.GitLab/01.GitLab/04.Git çåºæ¬æä½.html",redirect:"/pages/20e9b1/"},{name:"v-a983545e",path:"/pages/7eca40/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a983545e").then(t)}},{path:"/pages/7eca40/index.html",redirect:"/pages/7eca40/"},{path:"/06.GitLab/01.GitLab/05.TortoiseGit ç®å Git æä½.html",redirect:"/pages/7eca40/"},{name:"v-5adc669c",path:"/pages/89c106/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-5adc669c").then(t)}},{path:"/pages/89c106/index.html",redirect:"/pages/89c106/"},{path:"/06.GitLab/01.GitLab/06.ä»ä¹æ¯ GitLab.html",redirect:"/pages/89c106/"},{name:"v-0670b552",path:"/pages/ffc177/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0670b552").then(t)}},{path:"/pages/ffc177/index.html",redirect:"/pages/ffc177/"},{path:"/06.GitLab/01.GitLab/07.åºäº Docker å®è£ GitLab.html",redirect:"/pages/ffc177/"},{name:"v-685bb760",path:"/pages/655544/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-685bb760").then(t)}},{path:"/pages/655544/index.html",redirect:"/pages/655544/"},{path:"/06.GitLab/01.GitLab/08.GitLab çåºæ¬è®¾ç½®.html",redirect:"/pages/655544/"},{name:"v-7dad8b02",path:"/pages/0ba162/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7dad8b02").then(t)}},{path:"/pages/0ba162/index.html",redirect:"/pages/0ba162/"},{path:"/06.GitLab/01.GitLab/09.GitLab çè´¦æ·ç®¡ç.html",redirect:"/pages/0ba162/"},{name:"v-77b753e2",path:"/pages/aa27ff/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-77b753e2").then(t)}},{path:"/pages/aa27ff/index.html",redirect:"/pages/aa27ff/"},{path:"/06.GitLab/01.GitLab/10.GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®.html",redirect:"/pages/aa27ff/"},{name:"v-220226bd",path:"/pages/2b230d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-220226bd").then(t)}},{path:"/pages/2b230d/index.html",redirect:"/pages/2b230d/"},{path:"/06.GitLab/01.GitLab/11.GitLab ä½¿ç¨ SSH åå¯ç»å½.html",redirect:"/pages/2b230d/"},{name:"v-d809a770",path:"/pages/ceff17/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-d809a770").then(t)}},{path:"/pages/ceff17/index.html",redirect:"/pages/ceff17/"},{path:"/07.Nexus/01.Nexus/01.ä»ä¹æ¯ Nexus.html",redirect:"/pages/ceff17/"},{name:"v-e3e7063c",path:"/pages/dc57a4/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-e3e7063c").then(t)}},{path:"/pages/dc57a4/index.html",redirect:"/pages/dc57a4/"},{path:"/07.Nexus/01.Nexus/02.åºäº Docker å®è£ Nexus.html",redirect:"/pages/dc57a4/"},{name:"v-704eb51c",path:"/pages/159c7d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-704eb51c").then(t)}},{path:"/pages/159c7d/index.html",redirect:"/pages/159c7d/"},{path:"/07.Nexus/01.Nexus/03.Nexuséç½®é¿éäºä»£çä»åº.html",redirect:"/pages/159c7d/"},{name:"v-48944d5a",path:"/pages/ee14ce/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-48944d5a").then(t)}},{path:"/pages/ee14ce/index.html",redirect:"/pages/ee14ce/"},{path:"/07.Nexus/01.Nexus/04.Maven ä»åºä»ç».html",redirect:"/pages/ee14ce/"},{name:"v-695dfcb6",path:"/pages/433dea/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-695dfcb6").then(t)}},{path:"/pages/433dea/index.html",redirect:"/pages/433dea/"},{path:"/07.Nexus/01.Nexus/05.å¨é¡¹ç®ä¸­ä½¿ç¨ Maven ç§æ.html",redirect:"/pages/433dea/"},{name:"v-7ddb1434",path:"/pages/d1f496/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7ddb1434").then(t)}},{path:"/pages/d1f496/index.html",redirect:"/pages/d1f496/"},{path:"/07.Nexus/01.Nexus/06.Maven pomæä»¶æ ç­¾å¤§å¨è¯¦è§£.html",redirect:"/pages/d1f496/"},{name:"v-f26a2222",path:"/pages/f28aa7/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-f26a2222").then(t)}},{path:"/pages/f28aa7/index.html",redirect:"/pages/f28aa7/"},{path:"/07.Nexus/01.Nexus/07.å°é¡¹ç®æ¨éå° Maven ä¸­å¤®ä»åºå®è·µ.html",redirect:"/pages/f28aa7/"},{name:"v-5f044039",path:"/pages/654ea2/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-5f044039").then(t)}},{path:"/pages/654ea2/index.html",redirect:"/pages/654ea2/"},{path:"/08.Registry/01.Registry/01.å®è£ Docker Registry ç§æ.html",redirect:"/pages/654ea2/"},{name:"v-310b44d6",path:"/pages/87fa6f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-310b44d6").then(t)}},{path:"/pages/87fa6f/index.html",redirect:"/pages/87fa6f/"},{path:"/08.Registry/01.Registry/02.éç½® Docker Registry å®¢æ·ç«¯.html",redirect:"/pages/87fa6f/"},{name:"v-0163bee7",path:"/pages/22b02b/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0163bee7").then(t)}},{path:"/pages/22b02b/index.html",redirect:"/pages/22b02b/"},{path:"/08.Registry/01.Registry/03.é¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨.html",redirect:"/pages/22b02b/"},{name:"v-a4144134",path:"/pages/7ad507/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a4144134").then(t)}},{path:"/pages/7ad507/index.html",redirect:"/pages/7ad507/"},{path:"/08.Registry/01.Registry/04.é¨ç½² Docker å¯è§åç®¡çå·¥å·Portainer.html",redirect:"/pages/7ad507/"},{name:"v-818a32e0",path:"/pages/5b81e8/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-818a32e0").then(t)}},{path:"/pages/5b81e8/index.html",redirect:"/pages/5b81e8/"},{path:"/09.Redis/01.Redis/01.Redis ç®ä».html",redirect:"/pages/5b81e8/"},{name:"v-8ba9dd7a",path:"/pages/3f32a2/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8ba9dd7a").then(t)}},{path:"/pages/3f32a2/index.html",redirect:"/pages/3f32a2/"},{path:"/09.Redis/01.Redis/02.åºäºæºç ç¼è¯å®è£ Redis.html",redirect:"/pages/3f32a2/"},{name:"v-8cb52cfc",path:"/pages/7a3c10/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8cb52cfc").then(t)}},{path:"/pages/7a3c10/index.html",redirect:"/pages/7a3c10/"},{path:"/09.Redis/01.Redis/03.åºäº Docker å®è£ Redis.html",redirect:"/pages/7a3c10/"},{name:"v-48788de2",path:"/pages/8c9288/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-48788de2").then(t)}},{path:"/pages/8c9288/index.html",redirect:"/pages/8c9288/"},{path:"/10.Nginx/01.Nginx/01.ä»ä¹æ¯ Nginx.html",redirect:"/pages/8c9288/"},{name:"v-4c9ef69c",path:"/pages/df904c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4c9ef69c").then(t)}},{path:"/pages/df904c/index.html",redirect:"/pages/df904c/"},{path:"/10.Nginx/01.Nginx/02.Nginx å®è£SSLè¯ä¹¦.html",redirect:"/pages/df904c/"},{name:"v-c80a5a9c",path:"/pages/73e9ae/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-c80a5a9c").then(t)}},{path:"/pages/73e9ae/index.html",redirect:"/pages/73e9ae/"},{path:"/10.Nginx/01.Nginx/03.Nginx å¼å¯gzipåç¼©.html",redirect:"/pages/73e9ae/"},{name:"v-e4187760",path:"/pages/9d4443/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-e4187760").then(t)}},{path:"/pages/9d4443/index.html",redirect:"/pages/9d4443/"},{path:"/10.Nginx/01.Nginx/04.Nginx locationæ­£ååæ³.html",redirect:"/pages/9d4443/"},{name:"v-29934bff",path:"/pages/035a1b/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-29934bff").then(t)}},{path:"/pages/035a1b/index.html",redirect:"/pages/035a1b/"},{path:"/11.MongoDB/01.MongoDB/01.ä»ä¹æ¯MongoDB.html",redirect:"/pages/035a1b/"},{name:"v-6b185955",path:"/pages/25c76e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-6b185955").then(t)}},{path:"/pages/25c76e/index.html",redirect:"/pages/25c76e/"},{path:"/11.MongoDB/01.MongoDB/02.CentOS7 ç¦»çº¿å®è£MongoDB.html",redirect:"/pages/25c76e/"},{name:"v-9431b692",path:"/pages/76dc6a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-9431b692").then(t)}},{path:"/pages/76dc6a/index.html",redirect:"/pages/76dc6a/"},{path:"/12.MinIO/01.Minioæå¡å¨/01.Minioå¿«éå¥é¨æå.html",redirect:"/pages/76dc6a/"},{name:"v-79bebf43",path:"/pages/0cd85f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-79bebf43").then(t)}},{path:"/pages/0cd85f/index.html",redirect:"/pages/0cd85f/"},{path:"/12.MinIO/01.Minioæå¡å¨/02.Minio Dockerå¿«éå¥é¨.html",redirect:"/pages/0cd85f/"},{name:"v-bf7747fa",path:"/pages/6bd2f8/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-bf7747fa").then(t)}},{path:"/pages/6bd2f8/index.html",redirect:"/pages/6bd2f8/"},{path:"/12.MinIO/01.Minioæå¡å¨/03.Minioçº å ç å¿«éå¥é¨.html",redirect:"/pages/6bd2f8/"},{name:"v-2a4a0bb7",path:"/pages/8153b1/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2a4a0bb7").then(t)}},{path:"/pages/8153b1/index.html",redirect:"/pages/8153b1/"},{path:"/12.MinIO/01.Minioæå¡å¨/04.åå¸å¼Minioå¿«éå¥é¨.html",redirect:"/pages/8153b1/"},{name:"v-7f6889c6",path:"/pages/98cf59/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7f6889c6").then(t)}},{path:"/pages/98cf59/index.html",redirect:"/pages/98cf59/"},{path:"/12.MinIO/01.Minioæå¡å¨/05.å¦ä½ä½¿ç¨ TLS ä¿æ¤å¯¹ MinIO æå¡å¨çè®¿é®.html",redirect:"/pages/98cf59/"},{name:"v-459c694a",path:"/pages/50e89b/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-459c694a").then(t)}},{path:"/pages/50e89b/index.html",redirect:"/pages/50e89b/"},{path:"/12.MinIO/01.Minioæå¡å¨/06.Minioå­å¨æ¡¶éç¥æå.html",redirect:"/pages/50e89b/"},{name:"v-7a72d387",path:"/pages/f9e3a2/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7a72d387").then(t)}},{path:"/pages/f9e3a2/index.html",redirect:"/pages/f9e3a2/"},{path:"/12.MinIO/01.Minioæå¡å¨/07.Minioæå¡éå¶ç§æ·.html",redirect:"/pages/f9e3a2/"},{name:"v-e6c9547a",path:"/pages/625c17/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-e6c9547a").then(t)}},{path:"/pages/625c17/index.html",redirect:"/pages/625c17/"},{path:"/12.MinIO/01.Minioæå¡å¨/08.Minio Serveréç½®æå.html",redirect:"/pages/625c17/"},{name:"v-1128e807",path:"/pages/9b5f74/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1128e807").then(t)}},{path:"/pages/9b5f74/index.html",redirect:"/pages/9b5f74/"},{path:"/12.MinIO/01.Minioæå¡å¨/09.Minioå¤ç§æ·ï¼Multi-tenantï¼é¨ç½²æå.html",redirect:"/pages/9b5f74/"},{name:"v-a77e2b92",path:"/pages/17c975/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a77e2b92").then(t)}},{path:"/pages/17c975/index.html",redirect:"/pages/17c975/"},{path:"/12.MinIO/02.Minioå®¢æ·ç«¯å¿«éå¥é¨æå/01.Minioå®¢æ·ç«¯å¿«éå¥é¨æå.html",redirect:"/pages/17c975/"},{name:"v-40000776",path:"/pages/65555a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-40000776").then(t)}},{path:"/pages/65555a/index.html",redirect:"/pages/65555a/"},{path:"/04.Ubuntu/02.Ubuntu ä½¿ç¨/03.Ubuntu å¼åç¯å¢åééç½®.html",redirect:"/pages/65555a/"},{name:"v-2ac12114",path:"/pages/538f88/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2ac12114").then(t)}},{path:"/pages/538f88/index.html",redirect:"/pages/538f88/"},{path:"/12.MinIO/02.Minioå®¢æ·ç«¯å¿«éå¥é¨æå/02.Minio Clientå®å¨æå.html",redirect:"/pages/538f88/"},{name:"v-d416917a",path:"/pages/53a165/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-d416917a").then(t)}},{path:"/pages/53a165/index.html",redirect:"/pages/53a165/"},{path:"/12.MinIO/03.Minio SDKs/01.Java Clientå¿«éå¥é¨æå.html",redirect:"/pages/53a165/"},{name:"v-3785d681",path:"/pages/b8b311/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3785d681").then(t)}},{path:"/pages/b8b311/index.html",redirect:"/pages/b8b311/"},{path:"/12.MinIO/03.Minio SDKs/02.Java Client APIåèææ¡£.html",redirect:"/pages/b8b311/"},{name:"v-117cc90e",path:"/pages/4a395a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-117cc90e").then(t)}},{path:"/pages/4a395a/index.html",redirect:"/pages/4a395a/"},{path:"/12.MinIO/04.å®æç§ç±/01.ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦.html",redirect:"/pages/4a395a/"},{name:"v-84e3ebde",path:"/pages/7acf5a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-84e3ebde").then(t)}},{path:"/pages/7acf5a/index.html",redirect:"/pages/7acf5a/"},{path:"/12.MinIO/04.å®æç§ç±/02.ä½¿ç¨ MinIO æå¡å¨è®¾ç½® Nginx ä»£ç.html",redirect:"/pages/7acf5a/"},{name:"v-427cb080",path:"/pages/542516/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-427cb080").then(t)}},{path:"/pages/542516/index.html",redirect:"/pages/542516/"},{path:"/12.MinIO/05.Minioé¨ç½²/01.Minioé¨ç½²å¿«éå¥é¨.html",redirect:"/pages/542516/"},{name:"v-03ae78c4",path:"/pages/b1ea49/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-03ae78c4").then(t)}},{path:"/pages/b1ea49/index.html",redirect:"/pages/b1ea49/"},{path:"/12.MinIO/05.Minioé¨ç½²/02.ä½¿ç¨Docker Swarmé¨ç½²Minio.html",redirect:"/pages/b1ea49/"},{name:"v-931f934a",path:"/pages/01eafc/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-931f934a").then(t)}},{path:"/pages/01eafc/index.html",redirect:"/pages/01eafc/"},{path:"/12.MinIO/05.Minioé¨ç½²/03.ä½¿ç¨Kubernetesé¨ç½²Minio.html",redirect:"/pages/01eafc/"},{name:"v-4b4c35dc",path:"/pages/46c251/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4b4c35dc").then(t)}},{path:"/pages/46c251/index.html",redirect:"/pages/46c251/"},{path:"/12.MinIO/05.Minioé¨ç½²/04.å¨ Docker Compose ä¸é¨ç½² MinIO.html",redirect:"/pages/46c251/"},{name:"v-0a92eeec",path:"/pages/1a684e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0a92eeec").then(t)}},{path:"/pages/1a684e/index.html",redirect:"/pages/1a684e/"},{path:"/13.RabbitMQ/01.å¿«éå¥é¨/02.RabbitMQ å¿«éå¥é¨.html",redirect:"/pages/1a684e/"},{name:"v-c205d0b2",path:"/pages/d710e9/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-c205d0b2").then(t)}},{path:"/pages/d710e9/index.html",redirect:"/pages/d710e9/"},{path:"/13.RabbitMQ/01.å¿«éå¥é¨/01.RabbitMQ ç®ä».html",redirect:"/pages/d710e9/"},{name:"v-50673fcc",path:"/pages/05a61a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-50673fcc").then(t)}},{path:"/pages/05a61a/index.html",redirect:"/pages/05a61a/"},{path:"/13.RabbitMQ/01.å¿«éå¥é¨/03.RabbitMQ æ¶æ¯æ¨¡å.html",redirect:"/pages/05a61a/"},{name:"v-6680c492",path:"/pages/36085c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-6680c492").then(t)}},{path:"/pages/36085c/index.html",redirect:"/pages/36085c/"},{path:"/13.RabbitMQ/01.å¿«éå¥é¨/04.Springæ´åRabbitMQ.html",redirect:"/pages/36085c/"},{name:"v-12cc11ea",path:"/pages/593778/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-12cc11ea").then(t)}},{path:"/pages/593778/index.html",redirect:"/pages/593778/"},{path:"/14.å¾®æå¡/01.å¾®æå¡ç®ä»/01.æå»ºåä½åºç¨æ¨¡å.html",redirect:"/pages/593778/"},{name:"v-8f47802a",path:"/pages/c5c502/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8f47802a").then(t)}},{path:"/pages/c5c502/index.html",redirect:"/pages/c5c502/"},{path:"/13.RabbitMQ/02.é«çº§ç¨æ³/01.TTLéå_æ­»ä¿¡éå.html",redirect:"/pages/c5c502/"},{name:"v-dc3c5474",path:"/pages/72d00f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-dc3c5474").then(t)}},{path:"/pages/72d00f/index.html",redirect:"/pages/72d00f/"},{path:"/14.å¾®æå¡/01.å¾®æå¡ç®ä»/02.èµ°ååä½å°ç±.html",redirect:"/pages/72d00f/"},{name:"v-08740c32",path:"/pages/0b2d6e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-08740c32").then(t)}},{path:"/pages/0b2d6e/index.html",redirect:"/pages/0b2d6e/"},{path:"/14.å¾®æå¡/01.å¾®æå¡ç®ä»/03.å¾®æå¡-è§£å³å¤æé®é¢.html",redirect:"/pages/0b2d6e/"},{name:"v-3704fefa",path:"/pages/47dac2/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3704fefa").then(t)}},{path:"/pages/47dac2/index.html",redirect:"/pages/47dac2/"},{path:"/14.å¾®æå¡/01.å¾®æå¡ç®ä»/04.å¾®æå¡çä¼ç¹.html",redirect:"/pages/47dac2/"},{name:"v-fc4d58d8",path:"/pages/aa8849/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-fc4d58d8").then(t)}},{path:"/pages/aa8849/index.html",redirect:"/pages/aa8849/"},{path:"/15.Spring Cloud Gateway/01.Spring Cloud Gateway/01.Spring Cloud ä¹ Gateway.html",redirect:"/pages/aa8849/"},{name:"v-1dd07656",path:"/pages/f0610e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1dd07656").then(t)}},{path:"/pages/f0610e/index.html",redirect:"/pages/f0610e/"},{path:"/15.Spring Cloud Gateway/01.Spring Cloud Gateway/02.Spring Cloud Gateway éç½®å¤§å¨.html",redirect:"/pages/f0610e/"},{name:"v-13de5e4a",path:"/pages/f7b8bf/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-13de5e4a").then(t)}},{path:"/pages/f7b8bf/index.html",redirect:"/pages/f7b8bf/"},{path:"/15.Spring Cloud Gateway/01.Spring Cloud Gateway/03.Spring Cloud Gateway ä¸­æå®ç½ææ¡£.html",redirect:"/pages/f7b8bf/"},{name:"v-c2d87842",path:"/pages/b62716/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-c2d87842").then(t)}},{path:"/pages/b62716/index.html",redirect:"/pages/b62716/"},{path:"/16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/01.ç®ä».html",redirect:"/pages/b62716/"},{name:"v-c1a66828",path:"/pages/e48516/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-c1a66828").then(t)}},{path:"/pages/e48516/index.html",redirect:"/pages/e48516/"},{path:"/16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/02.æå¡æ³¨åä¸åç°.html",redirect:"/pages/e48516/"},{name:"v-ed96cd98",path:"/pages/01bdf6/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-ed96cd98").then(t)}},{path:"/pages/01bdf6/index.html",redirect:"/pages/01bdf6/"},{path:"/16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/03.Nacos discovery.html",redirect:"/pages/01bdf6/"},{name:"v-19430f44",path:"/pages/3a1e7d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-19430f44").then(t)}},{path:"/pages/3a1e7d/index.html",redirect:"/pages/3a1e7d/"},{path:"/16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/04.Nacos config.html",redirect:"/pages/3a1e7d/"},{name:"v-5b9e5448",path:"/pages/555c55/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-5b9e5448").then(t)}},{path:"/pages/555c55/index.html",redirect:"/pages/555c55/"},{path:"/17.Docker/01.Docker/01.ä»ä¹æ¯ Docker.html",redirect:"/pages/555c55/"},{name:"v-3058349d",path:"/pages/d1d9db/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3058349d").then(t)}},{path:"/pages/d1d9db/index.html",redirect:"/pages/d1d9db/"},{path:"/17.Docker/01.Docker/02.ä¸ºä»ä¹è¦ä½¿ç¨ Docker.html",redirect:"/pages/d1d9db/"},{name:"v-741ac0fb",path:"/pages/ad1da1/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-741ac0fb").then(t)}},{path:"/pages/ad1da1/index.html",redirect:"/pages/ad1da1/"},{path:"/17.Docker/02.Docker åºæ¬æ¦å¿µ/01.Docker åºæ¬æ¦å¿µ.html",redirect:"/pages/ad1da1/"},{name:"v-0dc6bf26",path:"/pages/77a885/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0dc6bf26").then(t)}},{path:"/pages/77a885/index.html",redirect:"/pages/77a885/"},{path:"/17.Docker/02.Docker åºæ¬æ¦å¿µ/02.Docker å¼æ.html",redirect:"/pages/77a885/"},{name:"v-17b7bcd2",path:"/pages/f566e4/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-17b7bcd2").then(t)}},{path:"/pages/f566e4/index.html",redirect:"/pages/f566e4/"},{path:"/17.Docker/02.Docker åºæ¬æ¦å¿µ/03.Docker ç³»ç»æ¶æ.html",redirect:"/pages/f566e4/"},{name:"v-397e4290",path:"/pages/546146/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-397e4290").then(t)}},{path:"/pages/546146/index.html",redirect:"/pages/546146/"},{path:"/17.Docker/02.Docker åºæ¬æ¦å¿µ/04.Docker éå.html",redirect:"/pages/546146/"},{name:"v-4b0f9931",path:"/pages/c9e8a8/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4b0f9931").then(t)}},{path:"/pages/c9e8a8/index.html",redirect:"/pages/c9e8a8/"},{path:"/17.Docker/02.Docker åºæ¬æ¦å¿µ/05.Docker å®¹å¨.html",redirect:"/pages/c9e8a8/"},{name:"v-2046e738",path:"/pages/f00cd0/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2046e738").then(t)}},{path:"/pages/f00cd0/index.html",redirect:"/pages/f00cd0/"},{path:"/17.Docker/02.Docker åºæ¬æ¦å¿µ/06.Docker ä»åº.html",redirect:"/pages/f00cd0/"},{name:"v-05980e1b",path:"/pages/11ef44/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-05980e1b").then(t)}},{path:"/pages/11ef44/index.html",redirect:"/pages/11ef44/"},{path:"/17.Docker/03.å®è£ Docker/01.å®è£ Docker.html",redirect:"/pages/11ef44/"},{name:"v-4637e644",path:"/pages/748872/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4637e644").then(t)}},{path:"/pages/748872/index.html",redirect:"/pages/748872/"},{path:"/17.Docker/03.å®è£ Docker/02.Ubuntu å®è£ Docker.html",redirect:"/pages/748872/"},{name:"v-5b6a58d6",path:"/pages/102284/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-5b6a58d6").then(t)}},{path:"/pages/102284/index.html",redirect:"/pages/102284/"},{path:"/17.Docker/03.å®è£ Docker/03.CentOS å®è£ Docker.html",redirect:"/pages/102284/"},{name:"v-a1271344",path:"/pages/847488/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a1271344").then(t)}},{path:"/pages/847488/index.html",redirect:"/pages/847488/"},{path:"/17.Docker/03.å®è£ Docker/04.macOS å®è£ Docker.html",redirect:"/pages/847488/"},{name:"v-79b29984",path:"/pages/c4f755/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-79b29984").then(t)}},{path:"/pages/c4f755/index.html",redirect:"/pages/c4f755/"},{path:"/17.Docker/03.å®è£ Docker/05.Windows å®è£ Docker.html",redirect:"/pages/c4f755/"},{name:"v-782329dc",path:"/pages/87062e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-782329dc").then(t)}},{path:"/pages/87062e/index.html",redirect:"/pages/87062e/"},{path:"/17.Docker/03.å®è£ Docker/06.Docker éåå éå¨.html",redirect:"/pages/87062e/"},{name:"v-36dcd140",path:"/pages/13e1d1/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-36dcd140").then(t)}},{path:"/pages/13e1d1/index.html",redirect:"/pages/13e1d1/"},{path:"/17.Docker/04.Docker éå/01.ä½¿ç¨ Docker éå.html",redirect:"/pages/13e1d1/"},{name:"v-02185a76",path:"/pages/840a1a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-02185a76").then(t)}},{path:"/pages/840a1a/index.html",redirect:"/pages/840a1a/"},{path:"/17.Docker/04.Docker éå/02.Docker è·åéå.html",redirect:"/pages/840a1a/"},{name:"v-38a7db08",path:"/pages/be83bd/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-38a7db08").then(t)}},{path:"/pages/be83bd/index.html",redirect:"/pages/be83bd/"},{path:"/17.Docker/04.Docker éå/03.Docker ååºéå.html",redirect:"/pages/be83bd/"},{name:"v-1bf741b0",path:"/pages/058894/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1bf741b0").then(t)}},{path:"/pages/058894/index.html",redirect:"/pages/058894/"},{path:"/17.Docker/04.Docker éå/04.Docker å é¤æ¬å°éå.html",redirect:"/pages/058894/"},{name:"v-74089f43",path:"/pages/79f5f4/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-74089f43").then(t)}},{path:"/pages/79f5f4/index.html",redirect:"/pages/79f5f4/"},{path:"/17.Docker/04.Docker éå/05.Docker éåå¯¼å¥å¯¼åº.html",redirect:"/pages/79f5f4/"},{name:"v-16c13813",path:"/pages/134f38/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-16c13813").then(t)}},{path:"/pages/134f38/index.html",redirect:"/pages/134f38/"},{path:"/17.Docker/04.Docker éå/06.å©ç¨ commit çè§£éåææ.html",redirect:"/pages/134f38/"},{name:"v-65ae1b58",path:"/pages/ffea77/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-65ae1b58").then(t)}},{path:"/pages/ffea77/index.html",redirect:"/pages/ffea77/"},{path:"/17.Docker/04.Docker éå/07.ä½¿ç¨ Dockerfile å®å¶éå.html",redirect:"/pages/ffea77/"},{name:"v-92e32acc",path:"/pages/6d2add/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-92e32acc").then(t)}},{path:"/pages/6d2add/index.html",redirect:"/pages/6d2add/"},{path:"/17.Docker/04.Docker éå/08.Dockerfile æä»¤è¯¦è§£.html",redirect:"/pages/6d2add/"},{name:"v-12b8a377",path:"/pages/f99491/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-12b8a377").then(t)}},{path:"/pages/f99491/index.html",redirect:"/pages/f99491/"},{path:"/17.Docker/04.Docker éå/09.Dockerfile å¤é¶æ®µæå»º.html",redirect:"/pages/f99491/"},{name:"v-dd62df30",path:"/pages/3937d4/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-dd62df30").then(t)}},{path:"/pages/3937d4/index.html",redirect:"/pages/3937d4/"},{path:"/17.Docker/04.Docker éå/10.éåçå®ç°åç.html",redirect:"/pages/3937d4/"},{name:"v-1247ca23",path:"/pages/7e034a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1247ca23").then(t)}},{path:"/pages/7e034a/index.html",redirect:"/pages/7e034a/"},{path:"/17.Docker/05.Docker å®¹å¨/01.æä½ Docker å®¹å¨.html",redirect:"/pages/7e034a/"},{name:"v-39ac2c18",path:"/pages/f5a508/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-39ac2c18").then(t)}},{path:"/pages/f5a508/index.html",redirect:"/pages/f5a508/"},{path:"/17.Docker/05.Docker å®¹å¨/02.Docker å¯å¨å®¹å¨.html",redirect:"/pages/f5a508/"},{name:"v-80330662",path:"/pages/4c0f60/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-80330662").then(t)}},{path:"/pages/4c0f60/index.html",redirect:"/pages/4c0f60/"},{path:"/17.Docker/05.Docker å®¹å¨/03.Docker å®æ¤æè¿è¡.html",redirect:"/pages/4c0f60/"},{name:"v-73993688",path:"/pages/a777e4/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-73993688").then(t)}},{path:"/pages/a777e4/index.html",redirect:"/pages/a777e4/"},{path:"/17.Docker/05.Docker å®¹å¨/04.Docker ç»æ­¢å®¹å¨.html",redirect:"/pages/a777e4/"},{name:"v-570536b6",path:"/pages/9efa8d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-570536b6").then(t)}},{path:"/pages/9efa8d/index.html",redirect:"/pages/9efa8d/"},{path:"/17.Docker/05.Docker å®¹å¨/05.Docker è¿å¥å®¹å¨.html",redirect:"/pages/9efa8d/"},{name:"v-045a323e",path:"/pages/d3a79f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-045a323e").then(t)}},{path:"/pages/d3a79f/index.html",redirect:"/pages/d3a79f/"},{path:"/17.Docker/05.Docker å®¹å¨/06.Docker å¯¼åºåå¯¼å¥å®¹å¨.html",redirect:"/pages/d3a79f/"},{name:"v-ae2ed992",path:"/pages/8b2f36/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-ae2ed992").then(t)}},{path:"/pages/8b2f36/index.html",redirect:"/pages/8b2f36/"},{path:"/17.Docker/05.Docker å®¹å¨/07.Docker å é¤å®¹å¨.html",redirect:"/pages/8b2f36/"},{name:"v-059385f2",path:"/pages/c0886b/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-059385f2").then(t)}},{path:"/pages/c0886b/index.html",redirect:"/pages/c0886b/"},{path:"/17.Docker/06.è®¿é® Docker ä»åº/01.è®¿é® Docker ä»åº.html",redirect:"/pages/c0886b/"},{name:"v-687cd7b8",path:"/pages/ebce48/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-687cd7b8").then(t)}},{path:"/pages/ebce48/index.html",redirect:"/pages/ebce48/"},{path:"/17.Docker/06.è®¿é® Docker ä»åº/02.Docker Hub.html",redirect:"/pages/ebce48/"},{name:"v-f8655a0e",path:"/pages/92e266/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-f8655a0e").then(t)}},{path:"/pages/92e266/index.html",redirect:"/pages/92e266/"},{path:"/17.Docker/06.è®¿é® Docker ä»åº/03.Docker ç§æä»åº.html",redirect:"/pages/92e266/"},{name:"v-093f317f",path:"/pages/141d21/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-093f317f").then(t)}},{path:"/pages/141d21/index.html",redirect:"/pages/141d21/"},{path:"/17.Docker/06.è®¿é® Docker ä»åº/04.Docker ç§æä»åºé«çº§éç½®.html",redirect:"/pages/141d21/"},{name:"v-9766780a",path:"/pages/bcfae7/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-9766780a").then(t)}},{path:"/pages/bcfae7/index.html",redirect:"/pages/bcfae7/"},{path:"/17.Docker/07.Docker æ°æ®ç®¡ç/01.Docker æ°æ®ç®¡ç.html",redirect:"/pages/bcfae7/"},{name:"v-59a33950",path:"/pages/5f0882/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-59a33950").then(t)}},{path:"/pages/5f0882/index.html",redirect:"/pages/5f0882/"},{path:"/17.Docker/07.Docker æ°æ®ç®¡ç/02.Docker æ°æ®å·.html",redirect:"/pages/5f0882/"},{name:"v-87ec7d3a",path:"/pages/565ee4/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-87ec7d3a").then(t)}},{path:"/pages/565ee4/index.html",redirect:"/pages/565ee4/"},{path:"/17.Docker/07.Docker æ°æ®ç®¡ç/03.çå¬ä¸»æºç®å½.html",redirect:"/pages/565ee4/"},{name:"v-046481ec",path:"/pages/e17a65/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-046481ec").then(t)}},{path:"/pages/e17a65/index.html",redirect:"/pages/e17a65/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/01.ä»ä¹æ¯ Docker Compose.html",redirect:"/pages/e17a65/"},{name:"v-098439d0",path:"/pages/f7fbae/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-098439d0").then(t)}},{path:"/pages/f7fbae/index.html",redirect:"/pages/f7fbae/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/02.Docker Compose å®è£ä¸å¸è½½.html",redirect:"/pages/f7fbae/"},{name:"v-8eabad82",path:"/pages/a48959/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8eabad82").then(t)}},{path:"/pages/a48959/index.html",redirect:"/pages/a48959/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/03.Docker Compose å¥é¨.html",redirect:"/pages/a48959/"},{name:"v-262a1fde",path:"/pages/cddd90/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-262a1fde").then(t)}},{path:"/pages/cddd90/index.html",redirect:"/pages/cddd90/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/04.Docker Compose å½ä»¤è¯´æ.html",redirect:"/pages/cddd90/"},{name:"v-0c749932",path:"/pages/5e9e65/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0c749932").then(t)}},{path:"/pages/5e9e65/index.html",redirect:"/pages/5e9e65/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/05.Docker Compose æ¨¡æ¿æä»¶.html",redirect:"/pages/5e9e65/"},{name:"v-3c3f9ba1",path:"/pages/7285c6/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3c3f9ba1").then(t)}},{path:"/pages/7285c6/index.html",redirect:"/pages/7285c6/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/06.Docker Compose å®æ WordPress.html",redirect:"/pages/7285c6/"},{name:"v-ae86ef32",path:"/pages/8a9ceb/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-ae86ef32").then(t)}},{path:"/pages/8a9ceb/index.html",redirect:"/pages/8a9ceb/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/07.Docker Compose å®æ Tomcat.html",redirect:"/pages/8a9ceb/"},{name:"v-28665664",path:"/pages/fb92c3/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-28665664").then(t)}},{path:"/pages/fb92c3/index.html",redirect:"/pages/fb92c3/"},{path:"/14.å¾®æå¡/01.å¾®æå¡ç®ä»/05.å¾®æå¡çç¼ºç¹.html",redirect:"/pages/fb92c3/"},{name:"v-4c82f50b",path:"/pages/853cbd/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4c82f50b").then(t)}},{path:"/pages/853cbd/index.html",redirect:"/pages/853cbd/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/08.Docker Compose å®æ MySQL.html",redirect:"/pages/853cbd/"},{name:"v-6272dfb6",path:"/pages/bd41de/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-6272dfb6").then(t)}},{path:"/pages/bd41de/index.html",redirect:"/pages/bd41de/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/10.YAML éç½®æä»¶è¯­è¨.html",redirect:"/pages/bd41de/"},{name:"v-1dfe3ec2",path:"/pages/f508e3/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1dfe3ec2").then(t)}},{path:"/pages/f508e3/index.html",redirect:"/pages/f508e3/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/09.Docker Compose å¸¸ç¨å½ä»¤.html",redirect:"/pages/f508e3/"},{name:"v-a0974e96",path:"/pages/0c8168/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a0974e96").then(t)}},{path:"/pages/0c8168/index.html",redirect:"/pages/0c8168/"},{path:"/17.Docker/08.Docker ä¸åå®¢ Compose/11.éï¼ä¸ºä»ä¹è¯´ JSON ä¸éååéç½®æä»¶ï¼.html",redirect:"/pages/0c8168/"},{name:"v-321c5958",path:"/pages/be0094/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-321c5958").then(t)}},{path:"/pages/be0094/index.html",redirect:"/pages/be0094/"},{path:"/17.Docker/09.å¸¸è§é®é¢/01.dockerç£çç©ºé´ä¸è¶³è§£å³åæ³.html",redirect:"/pages/be0094/"},{name:"v-efa3c938",path:"/pages/419ea5/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-efa3c938").then(t)}},{path:"/pages/419ea5/index.html",redirect:"/pages/419ea5/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/01.ä»ä¹æ¯ Kubernetes.html",redirect:"/pages/419ea5/"},{name:"v-255f6b29",path:"/pages/b2e7fa/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-255f6b29").then(t)}},{path:"/pages/b2e7fa/index.html",redirect:"/pages/b2e7fa/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/02.Kubernetes å®è£åçåå¤.html",redirect:"/pages/b2e7fa/"},{name:"v-28726c01",path:"/pages/babf51/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-28726c01").then(t)}},{path:"/pages/babf51/index.html",redirect:"/pages/babf51/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/03.å®è£ kubeadm.html",redirect:"/pages/babf51/"},{name:"v-4a1b2e40",path:"/pages/14ea2d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4a1b2e40").then(t)}},{path:"/pages/14ea2d/index.html",redirect:"/pages/14ea2d/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/05.éç½® kubeadm.html",redirect:"/pages/14ea2d/"},{name:"v-f8a50a56",path:"/pages/9b17d0/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-f8a50a56").then(t)}},{path:"/pages/9b17d0/index.html",redirect:"/pages/9b17d0/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/06.ä½¿ç¨ kubeadm é¨ç½² Master èç¹.html",redirect:"/pages/9b17d0/"},{name:"v-4b869476",path:"/pages/9477b8/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4b869476").then(t)}},{path:"/pages/9477b8/index.html",redirect:"/pages/9477b8/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/07.å®è£ç½ç»æä»¶.html",redirect:"/pages/9477b8/"},{name:"v-20e14c4b",path:"/pages/f6617c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-20e14c4b").then(t)}},{path:"/pages/f6617c/index.html",redirect:"/pages/f6617c/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/08.ä½¿ç¨ kubeadm éç½® Worker èç¹.html",redirect:"/pages/f6617c/"},{name:"v-7e4ade2c",path:"/pages/f4b696/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7e4ade2c").then(t)}},{path:"/pages/f4b696/index.html",redirect:"/pages/f4b696/"},{path:"/18.Kubernetes/01.Kubernetes å¥é¨/09.æ¦å¿µæ»ç».html",redirect:"/pages/f4b696/"},{name:"v-61b52e07",path:"/pages/e68987/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-61b52e07").then(t)}},{path:"/pages/e68987/index.html",redirect:"/pages/e68987/"},{path:"/18.Kubernetes/02.Kubernetes å®è·µ/01.Kubernetes Dashboard.html",redirect:"/pages/e68987/"},{name:"v-88106b62",path:"/pages/1b012a/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-88106b62").then(t)}},{path:"/pages/1b012a/index.html",redirect:"/pages/1b012a/"},{path:"/18.Kubernetes/02.Kubernetes å®è·µ/02.NFS é«å¯ç¨æ¹æ¡.html",redirect:"/pages/1b012a/"},{name:"v-18890533",path:"/pages/8a1473/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-18890533").then(t)}},{path:"/pages/8a1473/index.html",redirect:"/pages/8a1473/"},{path:"/18.Kubernetes/02.Kubernetes å®è·µ/03.ç¦»çº¿é¨ç½² Kubernetess + KubeSphere.html",redirect:"/pages/8a1473/"},{name:"v-74c698d0",path:"/pages/1b4b4e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-74c698d0").then(t)}},{path:"/pages/1b4b4e/index.html",redirect:"/pages/1b4b4e/"},{path:"/19.Spring Security OAuth2/01.Spring Security OAuth2/01.ä»ç».html",redirect:"/pages/1b4b4e/"},{name:"v-78a70910",path:"/pages/17b300/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-78a70910").then(t)}},{path:"/pages/17b300/index.html",redirect:"/pages/17b300/"},{path:"/19.Spring Security OAuth2/01.Spring Security OAuth2/02.ä¸ºä»ä¹éè¦ OAuth2.html",redirect:"/pages/17b300/"},{name:"v-3222f444",path:"/pages/5cb943/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3222f444").then(t)}},{path:"/pages/5cb943/index.html",redirect:"/pages/5cb943/"},{path:"/19.Spring Security OAuth2/01.Spring Security OAuth2/03.å¼æ¾å¹³å°.html",redirect:"/pages/5cb943/"},{name:"v-3c995a47",path:"/pages/37f648/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-3c995a47").then(t)}},{path:"/pages/37f648/index.html",redirect:"/pages/37f648/"},{path:"/19.Spring Security OAuth2/01.Spring Security OAuth2/04.ä»¤ççè®¿é®ä¸å·æ°.html",redirect:"/pages/37f648/"},{name:"v-18111e3e",path:"/pages/fbe541/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-18111e3e").then(t)}},{path:"/pages/fbe541/index.html",redirect:"/pages/fbe541/"},{path:"/19.Spring Security OAuth2/01.Spring Security OAuth2/05.å®¢æ·ç«¯æææ¨¡å¼.html",redirect:"/pages/fbe541/"},{name:"v-2d7230e8",path:"/pages/00c356/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2d7230e8").then(t)}},{path:"/pages/00c356/index.html",redirect:"/pages/00c356/"},{path:"/19.Spring Security OAuth2/02.åå»ºæ¡ä¾å·¥ç¨/01.åå»ºæ¡ä¾å·¥ç¨é¡¹ç®.html",redirect:"/pages/00c356/"},{name:"v-2fa8ca6b",path:"/pages/c3686c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2fa8ca6b").then(t)}},{path:"/pages/c3686c/index.html",redirect:"/pages/c3686c/"},{path:"/19.Spring Security OAuth2/02.åå»ºæ¡ä¾å·¥ç¨/02.åå»ºç»ä¸çä¾èµç®¡çæ¨¡å.html",redirect:"/pages/c3686c/"},{name:"v-ca52ce64",path:"/pages/5eb137/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-ca52ce64").then(t)}},{path:"/pages/5eb137/index.html",redirect:"/pages/5eb137/"},{path:"/19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/01.æææå¡å¨éç½®.html",redirect:"/pages/5eb137/"},{name:"v-620b25ca",path:"/pages/2279cf/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-620b25ca").then(t)}},{path:"/pages/2279cf/index.html",redirect:"/pages/2279cf/"},{path:"/19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/02.åºäºåå­å­å¨ä»¤ç.html",redirect:"/pages/2279cf/"},{name:"v-d70c8d9c",path:"/pages/9b9a7b/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-d70c8d9c").then(t)}},{path:"/pages/9b9a7b/index.html",redirect:"/pages/9b9a7b/"},{path:"/19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/03.åºäº JDBC å­å¨ä»¤ç.html",redirect:"/pages/9b9a7b/"},{name:"v-8dc9cdca",path:"/pages/cee981/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8dc9cdca").then(t)}},{path:"/pages/cee981/index.html",redirect:"/pages/cee981/"},{path:"/19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/04.RBAC åºäºè§è²çæéæ§å¶.html",redirect:"/pages/cee981/"},{name:"v-994030a6",path:"/pages/4bff79/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-994030a6").then(t)}},{path:"/pages/4bff79/index.html",redirect:"/pages/4bff79/"},{path:"/19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/05.åºäº RBAC çèªå®ä¹è®¤è¯.html",redirect:"/pages/4bff79/"},{name:"v-c4e4c304",path:"/pages/8dc90c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-c4e4c304").then(t)}},{path:"/pages/8dc90c/index.html",redirect:"/pages/8dc90c/"},{path:"/19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/06.JWTä»¤ç.html",redirect:"/pages/8dc90c/"},{name:"v-c4de77d8",path:"/pages/3414a7/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-c4de77d8").then(t)}},{path:"/pages/3414a7/index.html",redirect:"/pages/3414a7/"},{path:"/19.Spring Security OAuth2/04.åå»ºèµæºæå¡å¨/01.èµæºæå¡å¨éç½®.html",redirect:"/pages/3414a7/"},{name:"v-8851eab0",path:"/pages/d62ff2/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8851eab0").then(t)}},{path:"/pages/d62ff2/index.html",redirect:"/pages/d62ff2/"},{path:"/19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/01.ä»ä¹æ¯åå¸å¼ç³»ç».html",redirect:"/pages/d62ff2/"},{name:"v-f80986b8",path:"/pages/16b31e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-f80986b8").then(t)}},{path:"/pages/16b31e/index.html",redirect:"/pages/16b31e/"},{path:"/19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/02.åå¸å¼è®¤è¯éæ±.html",redirect:"/pages/16b31e/"},{name:"v-7afa71b5",path:"/pages/d6bec0/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7afa71b5").then(t)}},{path:"/pages/d6bec0/index.html",redirect:"/pages/d6bec0/"},{path:"/19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/03.åå¸å¼è®¤è¯æ¹æ¡.html",redirect:"/pages/d6bec0/"},{name:"v-bee7b4c4",path:"/pages/7b210e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-bee7b4c4").then(t)}},{path:"/pages/7b210e/index.html",redirect:"/pages/7b210e/"},{path:"/19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/04.åå¸å¼è®¤è¯å®æ.html",redirect:"/pages/7b210e/"},{name:"v-7bad6842",path:"/pages/11f8a5/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7bad6842").then(t)}},{path:"/pages/11f8a5/index.html",redirect:"/pages/11f8a5/"},{path:"/20.DevOps/01.å¥é¨/01.è½¯ä»¶å·¥ç¨ä»ç».html",redirect:"/pages/11f8a5/"},{name:"v-d8f92f9e",path:"/pages/5b4493/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-d8f92f9e").then(t)}},{path:"/pages/5b4493/index.html",redirect:"/pages/5b4493/"},{path:"/20.DevOps/01.å¥é¨/02.æç»­ç»§æ¿æµç¨è¯´æ.html",redirect:"/pages/5b4493/"},{name:"v-f6cd3ec8",path:"/pages/eaeddc/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-f6cd3ec8").then(t)}},{path:"/pages/eaeddc/index.html",redirect:"/pages/eaeddc/"},{path:"/20.DevOps/01.å¥é¨/03.Gitlabä»£ç æç®¡æå¡å¨å®è£.html",redirect:"/pages/eaeddc/"},{name:"v-d7bef6c8",path:"/pages/605fde/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-d7bef6c8").then(t)}},{path:"/pages/605fde/index.html",redirect:"/pages/605fde/"},{path:"/20.DevOps/01.å¥é¨/04.Jenkinsèªå¨åæå¡å¨å®è£.html",redirect:"/pages/605fde/"},{name:"v-4988c303",path:"/pages/6519b5/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4988c303").then(t)}},{path:"/pages/6519b5/index.html",redirect:"/pages/6519b5/"},{path:"/20.DevOps/01.å¥é¨/05.Jenkinsæä»¶ç®¡ç.html",redirect:"/pages/6519b5/"},{name:"v-7073a58e",path:"/pages/61d667/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7073a58e").then(t)}},{path:"/pages/61d667/index.html",redirect:"/pages/61d667/"},{path:"/20.DevOps/01.å¥é¨/06.Jenkinsç¨æ·æéç®¡ç.html",redirect:"/pages/61d667/"},{name:"v-60dca1e3",path:"/pages/a1fe86/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-60dca1e3").then(t)}},{path:"/pages/a1fe86/index.html",redirect:"/pages/a1fe86/"},{path:"/20.DevOps/01.å¥é¨/07.Jenkinså­è¯ç®¡ç.html",redirect:"/pages/a1fe86/"},{name:"v-69282982",path:"/pages/c15beb/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-69282982").then(t)}},{path:"/pages/c15beb/index.html",redirect:"/pages/c15beb/"},{path:"/20.DevOps/01.å¥é¨/08.Mavenå®è£åéç½®.html",redirect:"/pages/c15beb/"},{name:"v-fae7c1bc",path:"/pages/9d384b/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-fae7c1bc").then(t)}},{path:"/pages/9d384b/index.html",redirect:"/pages/9d384b/"},{path:"/20.DevOps/01.å¥é¨/09.Tomcatå®è£åéç½®.html",redirect:"/pages/9d384b/"},{name:"v-7c133ad0",path:"/pages/5448da/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7c133ad0").then(t)}},{path:"/pages/5448da/index.html",redirect:"/pages/5448da/"},{path:"/20.DevOps/02.å®æ/01.Jenkinsæå»ºMavené¡¹ç®.html",redirect:"/pages/5448da/"},{name:"v-0f2a3d88",path:"/pages/bf228f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0f2a3d88").then(t)}},{path:"/pages/bf228f/index.html",redirect:"/pages/bf228f/"},{path:"/20.DevOps/02.å®æ/02.Jenkinså¸¸ç¨æå»ºè§¦åå¨.html",redirect:"/pages/bf228f/"},{name:"v-78c2fe6d",path:"/pages/991f2e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-78c2fe6d").then(t)}},{path:"/pages/991f2e/index.html",redirect:"/pages/991f2e/"},{path:"/20.DevOps/02.å®æ/03.Jenkinsåæ°åæå»º.html",redirect:"/pages/991f2e/"},{name:"v-7183b4d5",path:"/pages/bd7581/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-7183b4d5").then(t)}},{path:"/pages/bd7581/index.html",redirect:"/pages/bd7581/"},{path:"/20.DevOps/02.å®æ/04.Jenkinséç½®é®ç®±æå¡å¨.html",redirect:"/pages/bd7581/"},{name:"v-8f10297e",path:"/pages/e2748f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-8f10297e").then(t)}},{path:"/pages/e2748f/index.html",redirect:"/pages/e2748f/"},{path:"/20.DevOps/02.å®æ/05.SonarQubeèªå¨ä»£ç å®¡æ¥å·¥å·.html",redirect:"/pages/e2748f/"},{name:"v-233d0506",path:"/pages/848aec/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-233d0506").then(t)}},{path:"/pages/848aec/index.html",redirect:"/pages/848aec/"},{path:"/20.DevOps/02.å®æ/06.Jenkinsæ´åSonarQubeå®ç°ä»£ç å®¡æ¥.html",redirect:"/pages/848aec/"},{name:"v-64d0cdf1",path:"/pages/8e8067/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-64d0cdf1").then(t)}},{path:"/pages/8e8067/index.html",redirect:"/pages/8e8067/"},{path:"/20.DevOps/02.å®æ/07.å¾®æå¡æç»­éæ(ä¸).html",redirect:"/pages/8e8067/"},{name:"v-6dbf4a31",path:"/pages/b7044d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-6dbf4a31").then(t)}},{path:"/pages/b7044d/index.html",redirect:"/pages/b7044d/"},{path:"/20.DevOps/02.å®æ/08.å¾®æå¡æç»­éæ(ä¸).html",redirect:"/pages/b7044d/"},{name:"v-f97f4056",path:"/pages/d49c54/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-f97f4056").then(t)}},{path:"/pages/d49c54/index.html",redirect:"/pages/d49c54/"},{path:"/21.Simplify/01.Simplify Docs/01.Lombokä½¿ç¨æå.html",redirect:"/pages/d49c54/"},{name:"v-03f86a9e",path:"/pages/ff62ec/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-03f86a9e").then(t)}},{path:"/pages/ff62ec/index.html",redirect:"/pages/ff62ec/"},{path:"/21.Simplify/01.Simplify Docs/02.Spring Bootæ´åSwagger.html",redirect:"/pages/ff62ec/"},{name:"v-31abbd86",path:"/pages/92c82f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-31abbd86").then(t)}},{path:"/pages/92c82f/index.html",redirect:"/pages/92c82f/"},{path:"/21.Simplify/01.Simplify Docs/03.axiosä¸­æææ¡£.html",redirect:"/pages/92c82f/"},{name:"v-77f35f9e",path:"/pages/305234/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-77f35f9e").then(t)}},{path:"/pages/305234/index.html",redirect:"/pages/305234/"},{path:"/21.Simplify/01.Simplify Docs/04.vue-axios.html",redirect:"/pages/305234/"},{name:"v-6de74afa",path:"/pages/46a509/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-6de74afa").then(t)}},{path:"/pages/46a509/index.html",redirect:"/pages/46a509/"},{path:"/21.Simplify/01.Simplify Docs/06.èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå.html",redirect:"/pages/46a509/"},{name:"v-4c1cfbd2",path:"/pages/59f664/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4c1cfbd2").then(t)}},{path:"/pages/59f664/index.html",redirect:"/pages/59f664/"},{path:"/21.Simplify/01.Simplify Docs/05.ä¼åDockerä¸­çSpring Bootåºç¨.html",redirect:"/pages/59f664/"},{name:"v-a146c5d8",path:"/pages/97d41d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a146c5d8").then(t)}},{path:"/pages/97d41d/index.html",redirect:"/pages/97d41d/"},{path:"/21.Simplify/01.Simplify Docs/07.Spring Boot æ°ç¹æ§ Layered Jar.html",redirect:"/pages/97d41d/"},{name:"v-9d6dab12",path:"/pages/a60efa/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-9d6dab12").then(t)}},{path:"/pages/a60efa/index.html",redirect:"/pages/a60efa/"},{path:"/21.Simplify/01.Simplify Docs/08.Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡.html",redirect:"/pages/a60efa/"},{name:"v-1572d344",path:"/pages/779e01/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-1572d344").then(t)}},{path:"/pages/779e01/index.html",redirect:"/pages/779e01/"},{path:"/21.Simplify/01.Simplify Docs/09.docker-maven-plugin.html",redirect:"/pages/779e01/"},{name:"v-613443b0",path:"/pages/9dfd5c/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-613443b0").then(t)}},{path:"/pages/9dfd5c/index.html",redirect:"/pages/9dfd5c/"},{path:"/21.Simplify/01.Simplify Docs/10.Inneræ³¨è§£ä½¿ç¨è¯´æ.html",redirect:"/pages/9dfd5c/"},{name:"v-2da1a437",path:"/pages/5f71ee/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2da1a437").then(t)}},{path:"/pages/5f71ee/index.html",redirect:"/pages/5f71ee/"},{path:"/21.Simplify/01.Simplify Docs/11.Java8 Stream.html",redirect:"/pages/5f71ee/"},{name:"v-a0a5c11c",path:"/pages/e51b3b/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-a0a5c11c").then(t)}},{path:"/pages/e51b3b/index.html",redirect:"/pages/e51b3b/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/01.ä»ä¹æ¯ Kubernetes.html",redirect:"/pages/e51b3b/"},{name:"v-229229ee",path:"/pages/43a41d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-229229ee").then(t)}},{path:"/pages/43a41d/index.html",redirect:"/pages/43a41d/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/02.Kubernetes å®è£åçåå¤.html",redirect:"/pages/43a41d/"},{name:"v-0792908f",path:"/pages/248b3e/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0792908f").then(t)}},{path:"/pages/248b3e/index.html",redirect:"/pages/248b3e/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/03.å®è£ kubeadm.html",redirect:"/pages/248b3e/"},{name:"v-0ba2fba8",path:"/pages/f792df/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0ba2fba8").then(t)}},{path:"/pages/f792df/index.html",redirect:"/pages/f792df/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/04.éç½® kubeadm.html",redirect:"/pages/f792df/"},{name:"v-89e63956",path:"/pages/91b30f/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-89e63956").then(t)}},{path:"/pages/91b30f/index.html",redirect:"/pages/91b30f/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/05.ä½¿ç¨ kubeadm é¨ç½² Master èç¹.html",redirect:"/pages/91b30f/"},{name:"v-080f0c7c",path:"/pages/1d4070/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-080f0c7c").then(t)}},{path:"/pages/1d4070/index.html",redirect:"/pages/1d4070/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/06.å®è£ç½ç»æä»¶.html",redirect:"/pages/1d4070/"},{name:"v-5840b4cb",path:"/pages/b23692/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-5840b4cb").then(t)}},{path:"/pages/b23692/index.html",redirect:"/pages/b23692/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/07.ä½¿ç¨ kubeadm éç½® Worker èç¹.html",redirect:"/pages/b23692/"},{name:"v-4de06ab6",path:"/pages/cfa4e2/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-4de06ab6").then(t)}},{path:"/pages/cfa4e2/index.html",redirect:"/pages/cfa4e2/"},{path:"/22.Kubernetes/01.Kubernetes å¥é¨/08.æ¦å¿µæ»ç».html",redirect:"/pages/cfa4e2/"},{name:"v-eb9fcf56",path:"/pages/11af34/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-eb9fcf56").then(t)}},{path:"/pages/11af34/index.html",redirect:"/pages/11af34/"},{path:"/22.Kubernetes/02.Kubernetes å®è·µ/01.Kubernetes Dashboard.html",redirect:"/pages/11af34/"},{name:"v-183d693e",path:"/pages/f61a3d/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-183d693e").then(t)}},{path:"/pages/f61a3d/index.html",redirect:"/pages/f61a3d/"},{path:"/22.Kubernetes/03.åé¨å¹³å°å¯¹æ¥/01.æ´åäºå¹³å°ç¸å³éç½®ï¼åé¨ï¼.html",redirect:"/pages/f61a3d/"},{name:"v-09f5c492",path:"/pages/1b12ed/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-09f5c492").then(t)}},{path:"/pages/1b12ed/index.html",redirect:"/pages/1b12ed/"},{path:"/99.æ¯æ/01.æ¯æ.html",redirect:"/pages/1b12ed/"},{name:"v-0a72df0a",path:"/blog/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-0a72df0a").then(t)}},{path:"/blog/index.html",redirect:"/blog/"},{path:"/@pages/archivesPage.html",redirect:"/blog/"},{name:"v-363a61d8",path:"/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-363a61d8").then(t)}},{path:"/index.html",redirect:"/"},{name:"v-250b49a5",path:"/pages/7b6be8/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-250b49a5").then(t)}},{path:"/pages/7b6be8/index.html",redirect:"/pages/7b6be8/"},{path:"/04.Ubuntu/02.Ubuntu ä½¿ç¨/05.å¸¸è§é®é¢ä¸è§£å³æ¹æ¡.html",redirect:"/pages/7b6be8/"},{name:"v-2617300a",path:"/pages/63ed35/",component:ic,beforeEnter:function(n,e,t){Ka("Layout","v-2617300a").then(t)}},{path:"/pages/63ed35/index.html",redirect:"/pages/63ed35/"},{path:"/04.Ubuntu/02.Ubuntu ä½¿ç¨/04.Ubuntu éç½®éæipåå¨æip.html",redirect:"/pages/63ed35/"},{path:"*",component:ic}],sc={title:"Javaå¨æ ",description:"ðæéæ æ¯ï¼æ¯å°å¯æ±ï¼ææ¯æ éï¼æ­¢äºæ¯",base:"/",headTags:[["link",{rel:"icon",href:"/img/favicon.ico"}],["meta",{name:"keywords",content:"vuepress,theme,blog,vdoing"}],["meta",{name:"theme-color",content:"#11a8cd"}]],pages:[{title:"åºç¡è®¾æ½å³æå¡",frontmatter:{title:"åºç¡è®¾æ½å³æå¡",date:"2022-02-09T09:30:38.000Z",permalink:"/pages/250f21/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.%E5%9F%BA%E7%A1%80/01.%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%8D%B3%E6%9C%8D%E5%8A%A1.html",relativePath:"01.æå/01.åºç¡/01.åºç¡è®¾æ½å³æå¡.md",key:"v-dc140a80",path:"/pages/250f21/",headers:[{level:2,title:"Linux",slug:"linux",normalizedTitle:"linux",charIndex:14},{level:2,title:"CentOS",slug:"centos",normalizedTitle:"centos",charIndex:200},{level:2,title:"Ubuntu",slug:"ubuntu",normalizedTitle:"ubuntu",charIndex:425},{level:2,title:"macOS",slug:"macos",normalizedTitle:"macos",charIndex:673}],headersStr:"Linux CentOS Ubuntu macOS",content:'# åºç¡è®¾æ½å³æå¡\n\n\n# Linux\n\nLinux æ¯ä¸ç§èªç±åå¼æ¾æºç çç±» UNIX æä½ç³»ç»ï¼ä½¿ç¨ Linux åæ ¸ãç®åå­å¨çè®¸å¤ä¸åç Linux åè¡çï¼å¯å®è£å¨åç§åæ ·ççµèç¡¬ä»¶è®¾å¤ï¼ä»ææºãå¹³æ¿çµèãè·¯ç±å¨åå½±é³æ¸¸ææ§å¶å°ï¼å°æ¡ä¸åçµèï¼å¤§åçµèåè¶çº§çµèã Linux æ¯ä¸ä¸ªé¢åçæä½ç³»ç»ï¼ä¸çä¸è¿ç®æå¿«ç 10 å°è¶çº§çµèè¿è¡çé½æ¯ Linux æä½ç³»ç»ã\n\nå¼å§å­¦ä¹ \n\n\n# CentOS\n\nCentOSï¼Community Enterprise Operating Systemï¼ä¸­ææææ¯ç¤¾åºä¼ä¸æä½ç³»ç»ï¼æ¯Linuxåè¡çä¹ä¸ï¼å®æ¯æ¥èªäºRed Hat Enterprise Linuxä¾ç§å¼æ¾æºä»£ç è§å®éåºçæºä»£ç æç¼è¯èæãç±äºåºèªåæ ·çæºä»£ç ï¼å æ­¤æäºè¦æ±é«åº¦ç¨³å®æ§çæå¡å¨ä»¥CentOSæ¿ä»£åä¸ççRed Hat Enterprise Linuxä½¿ç¨ãä¸¤èçä¸åï¼å¨äºCentOSå®å¨å¼æºã\n\nå¼å§å­¦ä¹ \n\n\n# Ubuntu\n\nUbuntuæ¯ä¸ä¸ªä»¥æ¡é¢åºç¨ä¸ºä¸»çLinuxæä½ç³»ç»ï¼å¶åç§°æ¥èªéæ´²åé¨ç¥é²è¯­æè±ªè¨è¯­çâubuntu"ä¸è¯ï¼æææ¯âäººæ§ââæçå­å¨æ¯å ä¸ºå¤§å®¶çå­å¨"ï¼æ¯éæ´²ä¼ ç»çä¸ç§ä»·å¼è§ãUbuntuåºäºDebianåè¡çåGnomeæ¡é¢ç¯å¢ï¼èä»11.04çèµ·ï¼Ubuntuåè¡çæ¾å¼äºGnomeæ¡é¢ç¯å¢ï¼æ¹ä¸ºUnityãä»åäººä»¬è®¤ä¸ºLinuxé¾ä»¥å®è£ãé¾ä»¥ä½¿ç¨ï¼å¨Ubuntuåºç°åè¿äºé½æä¸ºäºåå²ãUbuntuä¹æ¥æåºå¤§çç¤¾åºåéï¼ç¨æ·å¯ä»¥æ¹ä¾¿å°ä»ç¤¾åºè·å¾å¸®å©ã\n\nå¼å§å­¦ä¹ \n\n\n# macOS\n\nå¼å§å­¦ä¹ ',normalizedContent:'# åºç¡è®¾æ½å³æå¡\n\n\n# linux\n\nlinux æ¯ä¸ç§èªç±åå¼æ¾æºç çç±» unix æä½ç³»ç»ï¼ä½¿ç¨ linux åæ ¸ãç®åå­å¨çè®¸å¤ä¸åç linux åè¡çï¼å¯å®è£å¨åç§åæ ·ççµèç¡¬ä»¶è®¾å¤ï¼ä»ææºãå¹³æ¿çµèãè·¯ç±å¨åå½±é³æ¸¸ææ§å¶å°ï¼å°æ¡ä¸åçµèï¼å¤§åçµèåè¶çº§çµèã linux æ¯ä¸ä¸ªé¢åçæä½ç³»ç»ï¼ä¸çä¸è¿ç®æå¿«ç 10 å°è¶çº§çµèè¿è¡çé½æ¯ linux æä½ç³»ç»ã\n\nå¼å§å­¦ä¹ \n\n\n# centos\n\ncentosï¼community enterprise operating systemï¼ä¸­ææææ¯ç¤¾åºä¼ä¸æä½ç³»ç»ï¼æ¯linuxåè¡çä¹ä¸ï¼å®æ¯æ¥èªäºred hat enterprise linuxä¾ç§å¼æ¾æºä»£ç è§å®éåºçæºä»£ç æç¼è¯èæãç±äºåºèªåæ ·çæºä»£ç ï¼å æ­¤æäºè¦æ±é«åº¦ç¨³å®æ§çæå¡å¨ä»¥centosæ¿ä»£åä¸ççred hat enterprise linuxä½¿ç¨ãä¸¤èçä¸åï¼å¨äºcentoså®å¨å¼æºã\n\nå¼å§å­¦ä¹ \n\n\n# ubuntu\n\nubuntuæ¯ä¸ä¸ªä»¥æ¡é¢åºç¨ä¸ºä¸»çlinuxæä½ç³»ç»ï¼å¶åç§°æ¥èªéæ´²åé¨ç¥é²è¯­æè±ªè¨è¯­çâubuntu"ä¸è¯ï¼æææ¯âäººæ§ââæçå­å¨æ¯å ä¸ºå¤§å®¶çå­å¨"ï¼æ¯éæ´²ä¼ ç»çä¸ç§ä»·å¼è§ãubuntuåºäºdebianåè¡çågnomeæ¡é¢ç¯å¢ï¼èä»11.04çèµ·ï¼ubuntuåè¡çæ¾å¼äºgnomeæ¡é¢ç¯å¢ï¼æ¹ä¸ºunityãä»åäººä»¬è®¤ä¸ºlinuxé¾ä»¥å®è£ãé¾ä»¥ä½¿ç¨ï¼å¨ubuntuåºç°åè¿äºé½æä¸ºäºåå²ãubuntuä¹æ¥æåºå¤§çç¤¾åºåéï¼ç¨æ·å¯ä»¥æ¹ä¾¿å°ä»ç¤¾åºè·å¾å¸®å©ã\n\nå¼å§å­¦ä¹ \n\n\n# macos\n\nå¼å§å­¦ä¹ ',charsets:{cjk:!0},lastUpdated:"2022/02/10, 09:38:09",lastUpdatedTimestamp:1644457089e3},{title:"å¹³å°å³æå¡",frontmatter:{title:"å¹³å°å³æå¡",date:"2022-02-09T09:30:38.000Z",permalink:"/pages/f04654/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.%E5%9F%BA%E7%A1%80/02.%E5%B9%B3%E5%8F%B0%E5%8D%B3%E6%9C%8D%E5%8A%A1.html",relativePath:"01.æå/01.åºç¡/02.å¹³å°å³æå¡.md",key:"v-c6d7e3c0",path:"/pages/f04654/",headers:[{level:2,title:"GitLab",slug:"gitlab",normalizedTitle:"gitlab",charIndex:12},{level:2,title:"Nexus",slug:"nexus",normalizedTitle:"nexus",charIndex:251},{level:2,title:"Registry",slug:"registry",normalizedTitle:"registry",charIndex:309},{level:2,title:"Redis",slug:"redis",normalizedTitle:"redis",charIndex:471},{level:2,title:"Nginx",slug:"nginx",normalizedTitle:"nginx",charIndex:736},{level:2,title:"MongoDB",slug:"mongodb",normalizedTitle:"mongodb",charIndex:1122},{level:2,title:"MinIO",slug:"minio",normalizedTitle:"minio",charIndex:1263},{level:2,title:"RabbitMQ",slug:"rabbitmq",normalizedTitle:"rabbitmq",charIndex:1473}],headersStr:"GitLab Nexus Registry Redis Nginx MongoDB MinIO RabbitMQ",content:"# å¹³å°å³æå¡\n\n\n# GitLab\n\nGitLab æ¯å©ç¨ Ruby on Rails ä¸ä¸ªå¼æºççæ¬ç®¡çç³»ç»ï¼å®ç°ä¸ä¸ªèªæç®¡ç Git é¡¹ç®ä»åºï¼å¯éè¿ Web çé¢è¿è¡è®¿é®å¬å¼çæèç§äººé¡¹ç®ãå®æ¥æä¸ Github ç±»ä¼¼çåè½ï¼è½å¤æµè§æºä»£ç ï¼ç®¡çç¼ºé·åæ³¨éãå¯ä»¥ç®¡çå¢éå¯¹ä»åºçè®¿é®ï¼å®éå¸¸æäºæµè§æäº¤è¿ççæ¬å¹¶æä¾ä¸ä¸ªæä»¶åå²åºãå¢éæåå¯ä»¥å©ç¨åç½®çç®åèå¤©ç¨åº (Wall) è¿è¡äº¤æµãå®è¿æä¾ä¸ä¸ªä»£ç çæ®µæ¶éåè½å¯ä»¥è½»æ¾å®ç°ä»£ç å¤ç¨ï¼ä¾¿äºæ¥åæéè¦çæ¶åè¿è¡æ¥æ¾ã\n\nå¼å§å­¦ä¹ \n\n\n# Nexus\n\nNexus æ¯ä¸ä¸ªå¼ºå¤§çä»åºç®¡çå¨ï¼æå¤§å°ç®åäºåé¨ä»åºçç»´æ¤åå¤é¨ä»åºçè®¿é®ã\n\nå¼å§å­¦ä¹ \n\n\n# Registry\n\nå®æ¹ç Docker Hub æ¯ä¸ä¸ªç¨äºç®¡çå¬å±éåçå°æ¹ï¼æä»¬å¯ä»¥å¨ä¸é¢æ¾å°æä»¬æ³è¦çéåï¼ä¹å¯ä»¥ææä»¬èªå·±çéåæ¨éä¸å»ãä½æ¯ï¼ææ¶åæä»¬çæå¡å¨æ æ³è®¿é®äºèç½ï¼æèä½ ä¸å¸æå°èªå·±çéåæ¾å°å¬ç½å½ä¸­ï¼é£ä¹ä½ å°±éè¦ Docker Registryï¼å®å¯ä»¥ç¨æ¥å­å¨åç®¡çèªå·±çéåã\n\nå¼å§å­¦ä¹ \n\n\n# Redis\n\nRedisï¼Remote Dictionary Server ) æ¯ä¸ä¸ªç±Salvatore Sanfilippoåçkey-valueå­å¨ç³»ç»ã\n\nRedisæ¯ä¸ä¸ªå¼æºçä½¿ç¨ANSI Cè¯­è¨ç¼åãéµå®BSDåè®®ãæ¯æç½ç»ãå¯åºäºåå­äº¦å¯æä¹åçæ¥å¿åãKey-Valueæ°æ®åºï¼å¹¶æä¾å¤ç§è¯­è¨çAPIã\n\nå®éå¸¸è¢«ç§°ä¸ºæ°æ®ç»ææå¡å¨ï¼å ä¸ºå¼ï¼valueï¼å¯ä»¥æ¯ å­ç¬¦ä¸²(String), åå¸(Hash), åè¡¨(list), éå(sets) å æåºéå(sorted sets)ç­ç±»åã\n\nå¼å§å­¦ä¹ \n\n\n# Nginx\n\nNginx (engine x) æ¯ä¸ä¸ªé«æ§è½çHTTPåååä»£çwebæå¡å¨ï¼åæ¶ä¹æä¾äºIMAP/POP3/SMTPæå¡ãNginxæ¯ç±ä¼æå°Â·èµç´¢è¶å¤«ä¸ºä¿ç½æ¯è®¿é®éç¬¬äºçRambler.ruç«ç¹ï¼ä¿æï¼Ð Ð°Ð¼Ð±Ð»ÐµÑï¼å¼åçï¼ç¬¬ä¸ä¸ªå¬å¼çæ¬0.1.0åå¸äº2004å¹´10æ4æ¥ã\n\nå¶å°æºä»£ç ä»¥ç±»BSDè®¸å¯è¯çå½¢å¼åå¸ï¼å å®çç¨³å®æ§ãä¸°å¯çåè½éãç¤ºä¾éç½®æä»¶åä½ç³»ç»èµæºçæ¶èèé»åã2011å¹´6æ1æ¥ï¼nginx 1.0.4åå¸ã\n\nNginxæ¯ä¸æ¬¾è½»éçº§çWeb æå¡å¨/ååä»£çæå¡å¨åçµå­é®ä»¶ï¼IMAP/POP3ï¼ä»£çæå¡å¨ï¼å¨BSD-like åè®®ä¸åè¡ãå¶ç¹ç¹æ¯å æåå­å°ï¼å¹¶åè½åå¼ºï¼äºå®ä¸nginxçå¹¶åè½åå¨åç±»åçç½é¡µæå¡å¨ä¸­è¡¨ç°è¾å¥½ï¼ä¸­å½å¤§éä½¿ç¨nginxç½ç«ç¨æ·æï¼ç¾åº¦ãäº¬ä¸ãæ°æµªãç½æãè¾è®¯ãæ·å®ç­ã\n\nå¼å§å­¦ä¹ \n\n\n# MongoDB\n\nMongoDB æ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çæ°æ®åºãç± C++ è¯­è¨ç¼åãæ¨å¨ä¸º WEB åºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\nMongoDB æ¯ä¸ä¸ªä»äºå³ç³»æ°æ®åºåéå³ç³»æ°æ®åºä¹é´çäº§åï¼æ¯éå³ç³»æ°æ®åºå½ä¸­åè½æä¸°å¯ï¼æåå³ç³»æ°æ®åºçã\n\nå¼å§å­¦ä¹ \n\n\n# MinIO\n\nMinIO æ¯ä¸ä¸ªåºäºApache License v2.0å¼æºåè®®çå¯¹è±¡å­å¨æå¡ãå®å¼å®¹äºé©¬éS3äºå­å¨æå¡æ¥å£ï¼é å¸¸éåäºå­å¨å¤§å®¹ééç»æåçæ°æ®ï¼ä¾å¦å¾çãè§é¢ãæ¥å¿æä»¶ãå¤ä»½æ°æ®åå®¹å¨/èææºéåç­ï¼è ä¸ä¸ªå¯¹è±¡æä»¶å¯ä»¥æ¯ä»»æå¤§å°ï¼ä»å kbå°æå¤§5Tä¸ç­ã\n\nMinIOæ¯ä¸ä¸ªéå¸¸è½»éçæå¡,å¯ä»¥å¾ç®åçåå¶ä»åºç¨çç»åï¼ç±»ä¼¼ NodeJS, Redis æè MySQLã\n\nå¼å§å­¦ä¹ \n\n\n# RabbitMQ\n\nRabbitMQæ¯ç±erlangè¯­è¨å¼åï¼åºäºAMQPï¼Advanced Message Queue é«çº§æ¶æ¯éååè®®ï¼åè®®å®ç°çæ¶æ¯éåï¼å®æ¯ä¸ç§åºç¨ç¨åºä¹é´çéä¿¡æ¹æ³ï¼æ¶æ¯éåå¨åå¸å¼ç³»ç»å¼åä¸­åºç¨éå¸¸å¹¿æ³ãRabbitMQå®æ¹å°åï¼http://www.rabbitmq.com\n\nå¼å§å­¦ä¹ ",normalizedContent:"# å¹³å°å³æå¡\n\n\n# gitlab\n\ngitlab æ¯å©ç¨ ruby on rails ä¸ä¸ªå¼æºççæ¬ç®¡çç³»ç»ï¼å®ç°ä¸ä¸ªèªæç®¡ç git é¡¹ç®ä»åºï¼å¯éè¿ web çé¢è¿è¡è®¿é®å¬å¼çæèç§äººé¡¹ç®ãå®æ¥æä¸ github ç±»ä¼¼çåè½ï¼è½å¤æµè§æºä»£ç ï¼ç®¡çç¼ºé·åæ³¨éãå¯ä»¥ç®¡çå¢éå¯¹ä»åºçè®¿é®ï¼å®éå¸¸æäºæµè§æäº¤è¿ççæ¬å¹¶æä¾ä¸ä¸ªæä»¶åå²åºãå¢éæåå¯ä»¥å©ç¨åç½®çç®åèå¤©ç¨åº (wall) è¿è¡äº¤æµãå®è¿æä¾ä¸ä¸ªä»£ç çæ®µæ¶éåè½å¯ä»¥è½»æ¾å®ç°ä»£ç å¤ç¨ï¼ä¾¿äºæ¥åæéè¦çæ¶åè¿è¡æ¥æ¾ã\n\nå¼å§å­¦ä¹ \n\n\n# nexus\n\nnexus æ¯ä¸ä¸ªå¼ºå¤§çä»åºç®¡çå¨ï¼æå¤§å°ç®åäºåé¨ä»åºçç»´æ¤åå¤é¨ä»åºçè®¿é®ã\n\nå¼å§å­¦ä¹ \n\n\n# registry\n\nå®æ¹ç docker hub æ¯ä¸ä¸ªç¨äºç®¡çå¬å±éåçå°æ¹ï¼æä»¬å¯ä»¥å¨ä¸é¢æ¾å°æä»¬æ³è¦çéåï¼ä¹å¯ä»¥ææä»¬èªå·±çéåæ¨éä¸å»ãä½æ¯ï¼ææ¶åæä»¬çæå¡å¨æ æ³è®¿é®äºèç½ï¼æèä½ ä¸å¸æå°èªå·±çéåæ¾å°å¬ç½å½ä¸­ï¼é£ä¹ä½ å°±éè¦ docker registryï¼å®å¯ä»¥ç¨æ¥å­å¨åç®¡çèªå·±çéåã\n\nå¼å§å­¦ä¹ \n\n\n# redis\n\nredisï¼remote dictionary server ) æ¯ä¸ä¸ªç±salvatore sanfilippoåçkey-valueå­å¨ç³»ç»ã\n\nredisæ¯ä¸ä¸ªå¼æºçä½¿ç¨ansi cè¯­è¨ç¼åãéµå®bsdåè®®ãæ¯æç½ç»ãå¯åºäºåå­äº¦å¯æä¹åçæ¥å¿åãkey-valueæ°æ®åºï¼å¹¶æä¾å¤ç§è¯­è¨çapiã\n\nå®éå¸¸è¢«ç§°ä¸ºæ°æ®ç»ææå¡å¨ï¼å ä¸ºå¼ï¼valueï¼å¯ä»¥æ¯ å­ç¬¦ä¸²(string), åå¸(hash), åè¡¨(list), éå(sets) å æåºéå(sorted sets)ç­ç±»åã\n\nå¼å§å­¦ä¹ \n\n\n# nginx\n\nnginx (engine x) æ¯ä¸ä¸ªé«æ§è½çhttpåååä»£çwebæå¡å¨ï¼åæ¶ä¹æä¾äºimap/pop3/smtpæå¡ãnginxæ¯ç±ä¼æå°Â·èµç´¢è¶å¤«ä¸ºä¿ç½æ¯è®¿é®éç¬¬äºçrambler.ruç«ç¹ï¼ä¿æï¼ÑÐ°Ð¼Ð±Ð»ÐµÑï¼å¼åçï¼ç¬¬ä¸ä¸ªå¬å¼çæ¬0.1.0åå¸äº2004å¹´10æ4æ¥ã\n\nå¶å°æºä»£ç ä»¥ç±»bsdè®¸å¯è¯çå½¢å¼åå¸ï¼å å®çç¨³å®æ§ãä¸°å¯çåè½éãç¤ºä¾éç½®æä»¶åä½ç³»ç»èµæºçæ¶èèé»åã2011å¹´6æ1æ¥ï¼nginx 1.0.4åå¸ã\n\nnginxæ¯ä¸æ¬¾è½»éçº§çweb æå¡å¨/ååä»£çæå¡å¨åçµå­é®ä»¶ï¼imap/pop3ï¼ä»£çæå¡å¨ï¼å¨bsd-like åè®®ä¸åè¡ãå¶ç¹ç¹æ¯å æåå­å°ï¼å¹¶åè½åå¼ºï¼äºå®ä¸nginxçå¹¶åè½åå¨åç±»åçç½é¡µæå¡å¨ä¸­è¡¨ç°è¾å¥½ï¼ä¸­å½å¤§éä½¿ç¨nginxç½ç«ç¨æ·æï¼ç¾åº¦ãäº¬ä¸ãæ°æµªãç½æãè¾è®¯ãæ·å®ç­ã\n\nå¼å§å­¦ä¹ \n\n\n# mongodb\n\nmongodb æ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çæ°æ®åºãç± c++ è¯­è¨ç¼åãæ¨å¨ä¸º web åºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\nmongodb æ¯ä¸ä¸ªä»äºå³ç³»æ°æ®åºåéå³ç³»æ°æ®åºä¹é´çäº§åï¼æ¯éå³ç³»æ°æ®åºå½ä¸­åè½æä¸°å¯ï¼æåå³ç³»æ°æ®åºçã\n\nå¼å§å­¦ä¹ \n\n\n# minio\n\nminio æ¯ä¸ä¸ªåºäºapache license v2.0å¼æºåè®®çå¯¹è±¡å­å¨æå¡ãå®å¼å®¹äºé©¬és3äºå­å¨æå¡æ¥å£ï¼é å¸¸éåäºå­å¨å¤§å®¹ééç»æåçæ°æ®ï¼ä¾å¦å¾çãè§é¢ãæ¥å¿æä»¶ãå¤ä»½æ°æ®åå®¹å¨/èææºéåç­ï¼è ä¸ä¸ªå¯¹è±¡æä»¶å¯ä»¥æ¯ä»»æå¤§å°ï¼ä»å kbå°æå¤§5tä¸ç­ã\n\nminioæ¯ä¸ä¸ªéå¸¸è½»éçæå¡,å¯ä»¥å¾ç®åçåå¶ä»åºç¨çç»åï¼ç±»ä¼¼ nodejs, redis æè mysqlã\n\nå¼å§å­¦ä¹ \n\n\n# rabbitmq\n\nrabbitmqæ¯ç±erlangè¯­è¨å¼åï¼åºäºamqpï¼advanced message queue é«çº§æ¶æ¯éååè®®ï¼åè®®å®ç°çæ¶æ¯éåï¼å®æ¯ä¸ç§åºç¨ç¨åºä¹é´çéä¿¡æ¹æ³ï¼æ¶æ¯éåå¨åå¸å¼ç³»ç»å¼åä¸­åºç¨éå¸¸å¹¿æ³ãrabbitmqå®æ¹å°åï¼http://www.rabbitmq.com\n\nå¼å§å­¦ä¹ ",charsets:{cyrillic:!0,cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"å¾®æå¡è§£å³å¤æé®é¢",frontmatter:{title:"å¾®æå¡è§£å³å¤æé®é¢",date:"2022-02-09T09:30:38.000Z",permalink:"/pages/58bcba/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.%E5%9F%BA%E7%A1%80/03.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%A7%A3%E5%86%B3%E5%A4%8D%E6%9D%82%E9%97%AE%E9%A2%98.html",relativePath:"01.æå/01.åºç¡/03.å¾®æå¡è§£å³å¤æé®é¢.md",key:"v-812c033c",path:"/pages/58bcba/",headers:[{level:2,title:"å¾®æå¡ç®ä»",slug:"å¾®æå¡ç®ä»",normalizedTitle:"å¾®æå¡ç®ä»",charIndex:201}],headersStr:"å¾®æå¡ç®ä»",content:"# å¾®æå¡è§£å³å¤æé®é¢\n\nJava å¾®æå¡æ¶æï¼äºèç½å¼åçæ­£éè¦çææ¯ï¼ä¹æ¯æä»¬é«èªå°±ä¸çä¿è¯ï¼ç»è¿æ¬è½®å­¦ä¹ ï¼æä»¬ä¼ææ¡ä»åºå± Linux çå®è£å°æç» DevOps çæéæè½ãåæ¬ä½ä¸éäº Spring BootãSpring CloudãDubboãZookeeperãRedisãELKãRabbitMQãUbuntuãDockerãKubernetesãJenkins ç­å¨æ æè½\n\n\n# å¾®æå¡ç®ä»\n\nè¿å¹´æ¥ï¼å¾®æå¡å¨åºç¨å¼ååé¨ç½²æ¹é¢åå¾äºæ¾èçè¿æ­¥ãå°åºç¨å¼åæèéææå¾®æå¡ä»¥åç¦»æå¡ï¼éè¿ API ä»¥æç¡®çæ¹å¼æ¥ç¸äºâå¯¹è¯â ãä¾å¦ï¼æ¯ä¸ªå¾®æå¡é½æ¯èªåå«ï¼self-containedï¼ï¼åèªç»´æ¤èªå·±çæ°æ®å­å¨ï¼è¿éå¸¸ææä¹ï¼ï¼å¯ä»¥ç¬ç«æ´æ°å¶ä»æå¡ã\n\nå¼å§å­¦ä¹ ",normalizedContent:"# å¾®æå¡è§£å³å¤æé®é¢\n\njava å¾®æå¡æ¶æï¼äºèç½å¼åçæ­£éè¦çææ¯ï¼ä¹æ¯æä»¬é«èªå°±ä¸çä¿è¯ï¼ç»è¿æ¬è½®å­¦ä¹ ï¼æä»¬ä¼ææ¡ä»åºå± linux çå®è£å°æç» devops çæéæè½ãåæ¬ä½ä¸éäº spring bootãspring cloudãdubboãzookeeperãredisãelkãrabbitmqãubuntuãdockerãkubernetesãjenkins ç­å¨æ æè½\n\n\n# å¾®æå¡ç®ä»\n\nè¿å¹´æ¥ï¼å¾®æå¡å¨åºç¨å¼ååé¨ç½²æ¹é¢åå¾äºæ¾èçè¿æ­¥ãå°åºç¨å¼åæèéææå¾®æå¡ä»¥åç¦»æå¡ï¼éè¿ api ä»¥æç¡®çæ¹å¼æ¥ç¸äºâå¯¹è¯â ãä¾å¦ï¼æ¯ä¸ªå¾®æå¡é½æ¯èªåå«ï¼self-containedï¼ï¼åèªç»´æ¤èªå·±çæ°æ®å­å¨ï¼è¿éå¸¸ææä¹ï¼ï¼å¯ä»¥ç¬ç«æ´æ°å¶ä»æå¡ã\n\nå¼å§å­¦ä¹ ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Spring Cloud",frontmatter:{title:"Spring Cloud",date:"2022-02-09T09:30:38.000Z",permalink:"/pages/b05793/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.%E5%9F%BA%E7%A1%80/04.Spring%20Cloud.html",relativePath:"01.æå/01.åºç¡/04.Spring Cloud.md",key:"v-30b385c2",path:"/pages/b05793/",headers:[{level:2,title:"Spring Cloud Gateway",slug:"spring-cloud-gateway",normalizedTitle:"spring cloud gateway",charIndex:149}],headersStr:"Spring Cloud Gateway",content:"# Spring Cloud\n\nSpring Cloud ä¸ºå¼åèæä¾äºå¨åå¸å¼ç³»ç»ï¼å¦éç½®ç®¡çãæå¡åç°ãæ­è·¯å¨ãæºè½è·¯ç±ãå¾®ä»£çãæ§å¶æ»çº¿ãä¸æ¬¡æ§ Tokenãå¨å±éãå³ç­ç«éãåå¸å¼ä¼è¯åéç¾¤ç¶æï¼æä½çå¼åå·¥å·ãä½¿ç¨ Spring Cloud å¼åèå¯ä»¥å¿«éå®ç°ä¸è¿°è¿äºæ¨¡å¼ã\n\n\n\n\n# Spring Cloud Gateway\n\nGatewayå»ºç«å¨Spring Framework 5ï¼Project Reactor åSpring Boot 2 ä¸ï¼ä½¿ç¨éé»å¡APIãæ¯æWebsocketï¼å ä¸ºå®ä¸Springç´§å¯éæï¼æä»¥å®æ¯ä¸ä¸ªæ´å¥½çå¼åèä½éªã\n\nå¼å§å­¦ä¹ ",normalizedContent:"# spring cloud\n\nspring cloud ä¸ºå¼åèæä¾äºå¨åå¸å¼ç³»ç»ï¼å¦éç½®ç®¡çãæå¡åç°ãæ­è·¯å¨ãæºè½è·¯ç±ãå¾®ä»£çãæ§å¶æ»çº¿ãä¸æ¬¡æ§ tokenãå¨å±éãå³ç­ç«éãåå¸å¼ä¼è¯åéç¾¤ç¶æï¼æä½çå¼åå·¥å·ãä½¿ç¨ spring cloud å¼åèå¯ä»¥å¿«éå®ç°ä¸è¿°è¿äºæ¨¡å¼ã\n\n\n\n\n# spring cloud gateway\n\ngatewayå»ºç«å¨spring framework 5ï¼project reactor åspring boot 2 ä¸ï¼ä½¿ç¨éé»å¡apiãæ¯æwebsocketï¼å ä¸ºå®ä¸springç´§å¯éæï¼æä»¥å®æ¯ä¸ä¸ªæ´å¥½çå¼åèä½éªã\n\nå¼å§å­¦ä¹ ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Spring Cloud Alibaba",frontmatter:{title:"Spring Cloud Alibaba",date:"2022-02-09T09:30:39.000Z",permalink:"/pages/1946f3/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.%E5%9F%BA%E7%A1%80/05.Spring%20Cloud%20Alibaba.html",relativePath:"01.æå/01.åºç¡/05.Spring Cloud Alibaba.md",key:"v-5a2cd282",path:"/pages/1946f3/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:85}],headersStr:"æ¦è¿°",content:"# Spring Cloud Alibaba\n\nç®åå¸åºä¸ä¸»æµç ç¬¬ä¸å¥å¾®æå¡æ¶æè§£å³æ¹æ¡ï¼Spring Boot + Spring Cloud Alibaba\n\n\n# æ¦è¿°\n\nSpring Cloud Alibaba è´åäºæä¾å¾®æå¡å¼åçä¸ç«å¼è§£å³æ¹æ¡ãæ­¤é¡¹ç®åå«å¼ååå¸å¼åºç¨å¾®æå¡çå¿éç»ä»¶ï¼æ¹ä¾¿å¼åèéè¿ Spring Cloud ç¼ç¨æ¨¡åè½»æ¾ä½¿ç¨è¿äºç»ä»¶æ¥å¼ååå¸å¼åºç¨æå¡ã\n\nä¾æ Spring Cloud Alibabaï¼æ¨åªéè¦æ·»å ä¸äºæ³¨è§£åå°ééç½®ï¼å°±å¯ä»¥å° Spring Cloud åºç¨æ¥å¥é¿éåå¸å¼åºç¨è§£å³æ¹æ¡ï¼éè¿é¿éä¸­é´ä»¶æ¥è¿éæ­å»ºåå¸å¼åºç¨ç³»ç»ã\n\nå¼å§å­¦ä¹ ",normalizedContent:"# spring cloud alibaba\n\nç®åå¸åºä¸ä¸»æµç ç¬¬ä¸å¥å¾®æå¡æ¶æè§£å³æ¹æ¡ï¼spring boot + spring cloud alibaba\n\n\n# æ¦è¿°\n\nspring cloud alibaba è´åäºæä¾å¾®æå¡å¼åçä¸ç«å¼è§£å³æ¹æ¡ãæ­¤é¡¹ç®åå«å¼ååå¸å¼åºç¨å¾®æå¡çå¿éç»ä»¶ï¼æ¹ä¾¿å¼åèéè¿ spring cloud ç¼ç¨æ¨¡åè½»æ¾ä½¿ç¨è¿äºç»ä»¶æ¥å¼ååå¸å¼åºç¨æå¡ã\n\nä¾æ spring cloud alibabaï¼æ¨åªéè¦æ·»å ä¸äºæ³¨è§£åå°ééç½®ï¼å°±å¯ä»¥å° spring cloud åºç¨æ¥å¥é¿éåå¸å¼åºç¨è§£å³æ¹æ¡ï¼éè¿é¿éä¸­é´ä»¶æ¥è¿éæ­å»ºåå¸å¼åºç¨ç³»ç»ã\n\nå¼å§å­¦ä¹ ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:47:02",lastUpdatedTimestamp:1644378422e3},{title:"Docker",frontmatter:{title:"Docker",date:"2022-02-09T09:34:28.000Z",permalink:"/pages/aeaf26/"},regularPath:"/01.%E6%8C%87%E5%8D%97/02.%E9%AB%98%E7%BA%A7/01.Docker.html",relativePath:"01.æå/02.é«çº§/01.Docker.md",key:"v-2f93a0e6",path:"/pages/aeaf26/",headers:[{level:2,title:"Build onceï¼Run anywhere",slug:"build-once-run-anywhere",normalizedTitle:"build onceï¼run anywhere",charIndex:13}],headersStr:"Build onceï¼Run anywhere",content:"# Docker\n\n\n# Build onceï¼Run anywhere\n\nDocker ä½¿ç¨ Google å¬å¸æ¨åºç Go è¯­è¨ è¿è¡å¼åå®ç°ï¼åºäº Linux åæ ¸ç cgroupï¼namespaceï¼ä»¥å AUFS ç±»ç Union FS ç­ææ¯ï¼å¯¹è¿ç¨è¿è¡å°è£éç¦»ï¼å±äº æä½ç³»ç»å±é¢çèæåææ¯ãç±äºéç¦»çè¿ç¨ç¬ç«äºå®¿ä¸»åå¶å®çéç¦»çè¿ç¨ï¼å æ­¤ä¹ç§°å¶ä¸ºå®¹å¨ãæåå®ç°æ¯åºäº LXCï¼ä» 0.7 çæ¬ä»¥åå¼å§å»é¤ LXCï¼è½¬èä½¿ç¨èªè¡å¼åç libcontainerï¼ä» 1.11 å¼å§ï¼åè¿ä¸æ­¥æ¼è¿ä¸ºä½¿ç¨ runC å containerdã\n\nå¼å§å­¦ä¹ ",normalizedContent:"# docker\n\n\n# build onceï¼run anywhere\n\ndocker ä½¿ç¨ google å¬å¸æ¨åºç go è¯­è¨ è¿è¡å¼åå®ç°ï¼åºäº linux åæ ¸ç cgroupï¼namespaceï¼ä»¥å aufs ç±»ç union fs ç­ææ¯ï¼å¯¹è¿ç¨è¿è¡å°è£éç¦»ï¼å±äº æä½ç³»ç»å±é¢çèæåææ¯ãç±äºéç¦»çè¿ç¨ç¬ç«äºå®¿ä¸»åå¶å®çéç¦»çè¿ç¨ï¼å æ­¤ä¹ç§°å¶ä¸ºå®¹å¨ãæåå®ç°æ¯åºäº lxcï¼ä» 0.7 çæ¬ä»¥åå¼å§å»é¤ lxcï¼è½¬èä½¿ç¨èªè¡å¼åç libcontainerï¼ä» 1.11 å¼å§ï¼åè¿ä¸æ­¥æ¼è¿ä¸ºä½¿ç¨ runc å containerdã\n\nå¼å§å­¦ä¹ ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Kubernetes",frontmatter:{title:"Kubernetes",date:"2022-02-09T09:34:28.000Z",permalink:"/pages/059418/"},regularPath:"/01.%E6%8C%87%E5%8D%97/02.%E9%AB%98%E7%BA%A7/02.Kubernetes.html",relativePath:"01.æå/02.é«çº§/02.Kubernetes.md",key:"v-95827e74",path:"/pages/059418/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:17}],headersStr:"æ¦è¿°",content:"# Kubernetes\n\n\n# æ¦è¿°\n\nKubernetes æ¯ Google 2014 å¹´åå»ºç®¡ççï¼æ¯ Google 10 å¤å¹´å¤§è§æ¨¡å®¹å¨ç®¡çææ¯ Borg çå¼æºçæ¬ãæ¯å®¹å¨éç¾¤ç®¡çç³»ç»ï¼æ¯ä¸ä¸ªå¼æºçå¹³å°ï¼å¯ä»¥å®ç°å®¹å¨éç¾¤çèªå¨åé¨ç½²ãèªå¨æ©ç¼©å®¹ãç»´æ¤ç­åè½ãå¶ç®æ æ¯ä¿è¿å®åç»ä»¶åå·¥å·ççæç³»ç»ï¼ä»¥åè½»åºç¨ç¨åºå¨å¬æäºæç§æäºä¸­è¿è¡çè´æã\n\nå¼å§å­¦ä¹ ",normalizedContent:"# kubernetes\n\n\n# æ¦è¿°\n\nkubernetes æ¯ google 2014 å¹´åå»ºç®¡ççï¼æ¯ google 10 å¤å¹´å¤§è§æ¨¡å®¹å¨ç®¡çææ¯ borg çå¼æºçæ¬ãæ¯å®¹å¨éç¾¤ç®¡çç³»ç»ï¼æ¯ä¸ä¸ªå¼æºçå¹³å°ï¼å¯ä»¥å®ç°å®¹å¨éç¾¤çèªå¨åé¨ç½²ãèªå¨æ©ç¼©å®¹ãç»´æ¤ç­åè½ãå¶ç®æ æ¯ä¿è¿å®åç»ä»¶åå·¥å·ççæç³»ç»ï¼ä»¥åè½»åºç¨ç¨åºå¨å¬æäºæç§æäºä¸­è¿è¡çè´æã\n\nå¼å§å­¦ä¹ ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Spring Security OAuth2",frontmatter:{title:"Spring Security OAuth2",date:"2022-02-09T09:35:05.000Z",permalink:"/pages/fbef9a/"},regularPath:"/01.%E6%8C%87%E5%8D%97/03.%E4%B8%93%E9%A2%98/01.Spring%20Security%20OAuth2.html",relativePath:"01.æå/03.ä¸é¢/01.Spring Security OAuth2.md",key:"v-00e5aa38",path:"/pages/fbef9a/",headers:[{level:2,title:"ä»ä¹æ¯Spring Security OAuth2",slug:"ä»ä¹æ¯spring-security-oauth2",normalizedTitle:"ä»ä¹æ¯spring security oauth2",charIndex:29},{level:2,title:"ä»ä¹æ¯åå¸å¼ç³»ç»",slug:"ä»ä¹æ¯åå¸å¼ç³»ç»",normalizedTitle:"ä»ä¹æ¯åå¸å¼ç³»ç»",charIndex:197}],headersStr:"ä»ä¹æ¯Spring Security OAuth2 ä»ä¹æ¯åå¸å¼ç³»ç»",content:"# Spring Security OAuth2\n\n\n# ä»ä¹æ¯Spring Security OAuth2\n\nSpring Security OAuth2å»ºç«å¨Spring Securityçåºç¡ä¹ä¸ï¼å®ç°äºOAuth2çè§èï¼å®æ¹åæé¾æ¥ï¼http://projects.spring.io/spring-security-oauth/docs/oauth2.html\n\nå¼å§å­¦ä¹ \n\n\n# ä»ä¹æ¯åå¸å¼ç³»ç»\n\néçè½¯ä»¶ç¯å¢åéæ±çååï¼è½¯ä»¶çæ¶æç±åä½ç»ææ¼åä¸ºåå¸å¼æ¶æï¼å·æåå¸å¼æ¶æçç³»ç»å«åå¸å¼ç³»ç»ï¼åå¸å¼ç³»ç»çè¿è¡éå¸¸ä¾èµç½ç»ï¼å®å°åä½ç»æçç³»ç»åä¸ºè¥å¹²æå¡ï¼æå¡ä¹é´éè¿ç½ç»äº¤äºæ¥å®æç¨æ·çä¸å¡å¤çï¼å½åæµè¡çå¾®æå¡æ¶æå°±æ¯åå¸å¼ç³»ç»æ¶æã\n\nå¼å§å­¦ä¹ ",normalizedContent:"# spring security oauth2\n\n\n# ä»ä¹æ¯spring security oauth2\n\nspring security oauth2å»ºç«å¨spring securityçåºç¡ä¹ä¸ï¼å®ç°äºoauth2çè§èï¼å®æ¹åæé¾æ¥ï¼http://projects.spring.io/spring-security-oauth/docs/oauth2.html\n\nå¼å§å­¦ä¹ \n\n\n# ä»ä¹æ¯åå¸å¼ç³»ç»\n\néçè½¯ä»¶ç¯å¢åéæ±çååï¼è½¯ä»¶çæ¶æç±åä½ç»ææ¼åä¸ºåå¸å¼æ¶æï¼å·æåå¸å¼æ¶æçç³»ç»å«åå¸å¼ç³»ç»ï¼åå¸å¼ç³»ç»çè¿è¡éå¸¸ä¾èµç½ç»ï¼å®å°åä½ç»æçç³»ç»åä¸ºè¥å¹²æå¡ï¼æå¡ä¹é´éè¿ç½ç»äº¤äºæ¥å®æç¨æ·çä¸å¡å¤çï¼å½åæµè¡çå¾®æå¡æ¶æå°±æ¯åå¸å¼ç³»ç»æ¶æã\n\nå¼å§å­¦ä¹ ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä¼ä¸çº§ DevOps CI/CDå®è·µ",frontmatter:{title:"ä¼ä¸çº§ DevOps CI/CDå®è·µ",date:"2022-02-09T09:35:05.000Z",permalink:"/pages/72ccd6/"},regularPath:"/01.%E6%8C%87%E5%8D%97/03.%E4%B8%93%E9%A2%98/02.%E4%BC%81%E4%B8%9A%E7%BA%A7%20DevOps%20%E5%AE%9E%E8%B7%B5.html",relativePath:"01.æå/03.ä¸é¢/02.ä¼ä¸çº§ DevOps å®è·µ.md",key:"v-ea2cdb88",path:"/pages/72ccd6/",headers:[{level:2,title:"ä»ä¹æ¯DevOps",slug:"ä»ä¹æ¯devops",normalizedTitle:"ä»ä¹æ¯devops",charIndex:25},{level:2,title:"CI",slug:"ci",normalizedTitle:"ci",charIndex:13},{level:2,title:"CD",slug:"cd",normalizedTitle:"cd",charIndex:16},{level:3,title:"æç»­äº¤ä»",slug:"æç»­äº¤ä»",normalizedTitle:"æç»­äº¤ä»",charIndex:711},{level:3,title:"æç»­é¨ç½²",slug:"æç»­é¨ç½²",normalizedTitle:"æç»­é¨ç½²",charIndex:735},{level:2,title:"CIãCDãDevOpså³ç³»",slug:"ciãcdãdevopså³ç³»",normalizedTitle:"ciãcdãdevopså³ç³»",charIndex:1328},{level:2,title:"å¦ä½è½å°å®ç°DevOpsçå¿µ",slug:"å¦ä½è½å°å®ç°devopsçå¿µ",normalizedTitle:"å¦ä½è½å°å®ç°devopsçå¿µ",charIndex:1435}],headersStr:"ä»ä¹æ¯DevOps CI CD æç»­äº¤ä» æç»­é¨ç½² CIãCDãDevOpså³ç³» å¦ä½è½å°å®ç°DevOpsçå¿µ",content:"# ä¼ä¸çº§ DevOps CI/CDå®è·µ\n\n\n# ä»ä¹æ¯DevOps\n\nDevOpsæ¯DevelopmentåOperationsçç»åï¼æ¯ä¸ç§æ¹æ³è®ºï¼æ¯ä¸ç»è¿ç¨ãæ¹æ³ä¸ç³»ç»çç»ç§°ï¼ç¨äºä¿è¿åºç¨å¼åãåºç¨è¿ç»´åè´¨éä¿éï¼QAï¼é¨é¨ä¹é´çæ²éãåä½ä¸æ´åãä»¥ææç ´ä¼ ç»å¼ååè¿è¥ä¹é´çå£ååé¸¿æ²ã\n\n\n\nDevOpsæ¯ä¸ç§éè§âè½¯ä»¶å¼åäººåï¼Devï¼âåâITè¿ç»´ææ¯äººåï¼Opsï¼âä¹é´æ²éåä½çæåãè¿å¨ææ¯ä¾ãéè¿èªå¨åâè½¯ä»¶äº¤ä»âåâæ¶æåæ´âçæµç¨ï¼æ¥ä½¿å¾æå»ºãæµè¯ãåå¸è½¯ä»¶è½å¤æ´å å°å¿«æ·ãé¢ç¹åå¯é ãå·ä½æ¥è¯´ï¼å°±æ¯å¨è½¯ä»¶äº¤ä»åé¨ç½²è¿ç¨ä¸­æé«æ²éä¸åä½çæçï¼æ¨å¨æ´å¿«ãæ´å¯é ççåå¸æ´é«è´¨éçäº§åã\n\nä¹å°±æ¯è¯´DevOpsæ¯ä¸ç»è¿ç¨åæ¹æ³çç»ç§°ï¼å¹¶ä¸æä»£æä¸ç¹å®çè½¯ä»¶å·¥å·æè½¯ä»¶å·¥å·ç»åãåç§å·¥å·è½¯ä»¶æè½¯ä»¶ç»åå¯ä»¥å®ç°DevOpsçæ¦å¿µæ¹æ³ãå¶æ¬è´¨æ¯ä¸æ´å¥çæ¹æ³è®ºï¼èä¸æ¯ææç§ææäºå·¥å·éåï¼ä¸è½¯ä»¶å¼åä¸­è®¾è®¡å°çOOPãAOPãIOCï¼æDIï¼ç­ç±»ä¼¼ï¼æ¯ä¸ç§çè®ºæè¿ç¨ææ¹æ³çæ½è±¡æä»£ç§°ã\n\n\n# CI\n\nCIçè±æåç§°æ¯Continuous Integrationï¼ä¸­æç¿»è¯ä¸ºï¼æç»­éæã\n\n\n\nCIä¸­ï¼å¼åäººåå°ä¼é¢ç¹å°åä¸»å¹²æäº¤ä»£ç ï¼è¿äºæ°æäº¤çä»£ç å¨æç»åå¹¶å°ä¸»å¹²åï¼éè¦ç»è¿ç¼è¯åèªå¨åæµè¯æµè¿è¡éªè¯ã\n\næç»­éæï¼CIï¼æ¯å¨æºä»£ç åæ´åèªå¨æ£æµãæåãæå»ºåï¼å¨å¤§å¤æ°æåµä¸ï¼è¿è¡ååæµè¯çè¿ç¨ãæç»­éæçç®æ æ¯å¿«éç¡®ä¿å¼åäººåæ°æäº¤çåæ´æ¯å¥½çï¼å¹¶ä¸éåå¨ä»£ç åºä¸­è¿ä¸æ­¥ä½¿ç¨ãCIçæµç¨æ§è¡åçè®ºå®è·µè®©æä»¬å¯ä»¥ç¡®å®æ°ä»£ç ååæä»£ç è½å¦æ­£ç¡®å°éæå¨ä¸èµ·ã\n\n\n# CD\n\nCDå¯å¯¹åºå¤ä¸ªè±æåç§°ï¼æç»­äº¤ä»Continuous Deliveryåæç»­é¨ç½²Continuous Deployment ï¼ä¸ä¸åå«ä»ç»ã\n\næ¥äºä¸äºèµæï¼å³äºæç»­äº¤äºåæç»­é¨ç½²çæ¦å¿µæ¯è¾æ··ä¹±ï¼ä»¥ä¸çæ¦å¿µæ»ç»æå¤§é¨åçèµææ»ç»èæ¥ã\n\n\n# æç»­äº¤ä»\n\nå®æ CI ä¸­æå»ºåååæµè¯åéææµè¯çèªå¨åæµç¨åï¼æç»­äº¤ä»å¯èªå¨å°å·²éªè¯çä»£ç åå¸å°å­å¨åºãä¸ºäºå®ç°é«æçæç»­äº¤ä»æµç¨ï¼å¡å¿è¦ç¡®ä¿ CI å·²åç½®äºå¼åç®¡éãæç»­äº¤ä»çç®æ æ¯æ¥æä¸ä¸ªå¯éæ¶é¨ç½²å°çäº§ç¯å¢çä»£ç åºã\n\n\n\nå¨æç»­äº¤ä»ä¸­ï¼æ¯ä¸ªé¶æ®µï¼ä»ä»£ç æ´æ¹çåå¹¶ï¼å°çäº§å°±ç»ªåæå»ºçæ¬çäº¤ä»ï¼é½æ¶åæµè¯èªå¨ååä»£ç åå¸èªå¨åãå¨æµç¨ç»ææ¶ï¼è¿ç»´å¢éå¯ä»¥å¿«éãè½»æ¾å°å°åºç¨é¨ç½²å°çäº§ç¯å¢ä¸­æåå¸ç»æç»ä½¿ç¨çç¨æ·ã\n\n\n# æç»­é¨ç½²\n\nå¯¹äºä¸ä¸ªæççCI/CDç®¡éï¼Pipelineï¼æ¥è¯´ï¼æåçé¶æ®µæ¯æç»­é¨ç½²ãä½ä¸ºæç»­äº¤ä»ââèªå¨å°çäº§å°±ç»ªåæå»ºçæ¬åå¸å°ä»£ç å­å¨åºââçå»¶ä¼¸ï¼æç»­é¨ç½²å¯ä»¥èªå¨å°åºç¨åå¸å°çäº§ç¯å¢ã\n\n\n\næç»­é¨ç½²æå³çææçåæ´é½ä¼è¢«èªå¨é¨ç½²å°çäº§ç¯å¢ä¸­ãæç»­äº¤ä»æå³çææçåæ´é½å¯ä»¥è¢«é¨ç½²å°çäº§ç¯å¢ä¸­ï¼ä½æ¯åºäºä¸å¡èèï¼å¯ä»¥éæ©ä¸é¨ç½²ãå¦æè¦å®æ½æç»­é¨ç½²ï¼å¿é¡»åå®æ½æç»­äº¤ä»ã\n\næç»­äº¤ä»å¹¶ä¸æ¯æè½¯ä»¶æ¯ä¸ä¸ªæ¹å¨é½è¦å°½å¿«é¨ç½²å°äº§åç¯å¢ä¸­ï¼å®æçæ¯ä»»ä½çä»£ç ä¿®æ¹é½å¯ä»¥å¨ä»»ä½æ¶åå®æ½é¨ç½²ã\n\næç»­äº¤ä»è¡¨ç¤ºçæ¯ä¸ç§è½åï¼èæç»­é¨ç½²è¡¨ç¤ºçåä¸ç§æ¹å¼ãæç»­é¨ç½²æ¯æç»­äº¤ä»çæé«é¶æ®µ\n\n\n# CIãCDãDevOpså³ç³»\n\næ¦å¿µæ§çåå®¹ï¼æ¯ä¸ªäººççè§£é½ææä¸åãå°±å¥½æ¯CGI è¿ä¸ªè¯ï¼å³å¯ä»¥çè§£æCGIè¿ç§åè®®ï¼ä¹å¯ä»¥çè§£æå®ç°äºCGIåè®®çè½¯ä»¶å·¥å·ï¼é½æ²¡æé®é¢ï¼å¬æå¼å­è¿ç¹ä¸åãçä¸ä¸å¾ï¼\n\n\n\n\n# å¦ä½è½å°å®ç°DevOpsçå¿µ\n\nDevOpså´èµ·äº2009å¹´,è¿å¹´æ¥ç±äºäºè®¡ç®ãäºèç½çåå±ï¼ä¿è¿äºDevOpsçåºç¡è®¾æ½åå·¥å·é¾çåå±,æ¶ç°äº-å¤§æ¹ä¼ç§çå·¥å·ï¼è¿äºå·¥å·åæ¬å¼å,æµè¯ï¼è¿ç»´çåä¸ªé¢åï¼ä¾å¦: GitHubãGit/SVNãDockerãJenkinsãHudSonãAnt/Maven/GradleãQUnitãJMeterç­ï¼ çä¸å¾:\n\n\n\nå¼å§å­¦ä¹ ",normalizedContent:"# ä¼ä¸çº§ devops ci/cdå®è·µ\n\n\n# ä»ä¹æ¯devops\n\ndevopsæ¯developmentåoperationsçç»åï¼æ¯ä¸ç§æ¹æ³è®ºï¼æ¯ä¸ç»è¿ç¨ãæ¹æ³ä¸ç³»ç»çç»ç§°ï¼ç¨äºä¿è¿åºç¨å¼åãåºç¨è¿ç»´åè´¨éä¿éï¼qaï¼é¨é¨ä¹é´çæ²éãåä½ä¸æ´åãä»¥ææç ´ä¼ ç»å¼ååè¿è¥ä¹é´çå£ååé¸¿æ²ã\n\n\n\ndevopsæ¯ä¸ç§éè§âè½¯ä»¶å¼åäººåï¼devï¼âåâitè¿ç»´ææ¯äººåï¼opsï¼âä¹é´æ²éåä½çæåãè¿å¨ææ¯ä¾ãéè¿èªå¨åâè½¯ä»¶äº¤ä»âåâæ¶æåæ´âçæµç¨ï¼æ¥ä½¿å¾æå»ºãæµè¯ãåå¸è½¯ä»¶è½å¤æ´å å°å¿«æ·ãé¢ç¹åå¯é ãå·ä½æ¥è¯´ï¼å°±æ¯å¨è½¯ä»¶äº¤ä»åé¨ç½²è¿ç¨ä¸­æé«æ²éä¸åä½çæçï¼æ¨å¨æ´å¿«ãæ´å¯é ççåå¸æ´é«è´¨éçäº§åã\n\nä¹å°±æ¯è¯´devopsæ¯ä¸ç»è¿ç¨åæ¹æ³çç»ç§°ï¼å¹¶ä¸æä»£æä¸ç¹å®çè½¯ä»¶å·¥å·æè½¯ä»¶å·¥å·ç»åãåç§å·¥å·è½¯ä»¶æè½¯ä»¶ç»åå¯ä»¥å®ç°devopsçæ¦å¿µæ¹æ³ãå¶æ¬è´¨æ¯ä¸æ´å¥çæ¹æ³è®ºï¼èä¸æ¯ææç§ææäºå·¥å·éåï¼ä¸è½¯ä»¶å¼åä¸­è®¾è®¡å°çoopãaopãiocï¼ædiï¼ç­ç±»ä¼¼ï¼æ¯ä¸ç§çè®ºæè¿ç¨ææ¹æ³çæ½è±¡æä»£ç§°ã\n\n\n# ci\n\nciçè±æåç§°æ¯continuous integrationï¼ä¸­æç¿»è¯ä¸ºï¼æç»­éæã\n\n\n\nciä¸­ï¼å¼åäººåå°ä¼é¢ç¹å°åä¸»å¹²æäº¤ä»£ç ï¼è¿äºæ°æäº¤çä»£ç å¨æç»åå¹¶å°ä¸»å¹²åï¼éè¦ç»è¿ç¼è¯åèªå¨åæµè¯æµè¿è¡éªè¯ã\n\næç»­éæï¼ciï¼æ¯å¨æºä»£ç åæ´åèªå¨æ£æµãæåãæå»ºåï¼å¨å¤§å¤æ°æåµä¸ï¼è¿è¡ååæµè¯çè¿ç¨ãæç»­éæçç®æ æ¯å¿«éç¡®ä¿å¼åäººåæ°æäº¤çåæ´æ¯å¥½çï¼å¹¶ä¸éåå¨ä»£ç åºä¸­è¿ä¸æ­¥ä½¿ç¨ãciçæµç¨æ§è¡åçè®ºå®è·µè®©æä»¬å¯ä»¥ç¡®å®æ°ä»£ç ååæä»£ç è½å¦æ­£ç¡®å°éæå¨ä¸èµ·ã\n\n\n# cd\n\ncdå¯å¯¹åºå¤ä¸ªè±æåç§°ï¼æç»­äº¤ä»continuous deliveryåæç»­é¨ç½²continuous deployment ï¼ä¸ä¸åå«ä»ç»ã\n\næ¥äºä¸äºèµæï¼å³äºæç»­äº¤äºåæç»­é¨ç½²çæ¦å¿µæ¯è¾æ··ä¹±ï¼ä»¥ä¸çæ¦å¿µæ»ç»æå¤§é¨åçèµææ»ç»èæ¥ã\n\n\n# æç»­äº¤ä»\n\nå®æ ci ä¸­æå»ºåååæµè¯åéææµè¯çèªå¨åæµç¨åï¼æç»­äº¤ä»å¯èªå¨å°å·²éªè¯çä»£ç åå¸å°å­å¨åºãä¸ºäºå®ç°é«æçæç»­äº¤ä»æµç¨ï¼å¡å¿è¦ç¡®ä¿ ci å·²åç½®äºå¼åç®¡éãæç»­äº¤ä»çç®æ æ¯æ¥æä¸ä¸ªå¯éæ¶é¨ç½²å°çäº§ç¯å¢çä»£ç åºã\n\n\n\nå¨æç»­äº¤ä»ä¸­ï¼æ¯ä¸ªé¶æ®µï¼ä»ä»£ç æ´æ¹çåå¹¶ï¼å°çäº§å°±ç»ªåæå»ºçæ¬çäº¤ä»ï¼é½æ¶åæµè¯èªå¨ååä»£ç åå¸èªå¨åãå¨æµç¨ç»ææ¶ï¼è¿ç»´å¢éå¯ä»¥å¿«éãè½»æ¾å°å°åºç¨é¨ç½²å°çäº§ç¯å¢ä¸­æåå¸ç»æç»ä½¿ç¨çç¨æ·ã\n\n\n# æç»­é¨ç½²\n\nå¯¹äºä¸ä¸ªæççci/cdç®¡éï¼pipelineï¼æ¥è¯´ï¼æåçé¶æ®µæ¯æç»­é¨ç½²ãä½ä¸ºæç»­äº¤ä»ââèªå¨å°çäº§å°±ç»ªåæå»ºçæ¬åå¸å°ä»£ç å­å¨åºââçå»¶ä¼¸ï¼æç»­é¨ç½²å¯ä»¥èªå¨å°åºç¨åå¸å°çäº§ç¯å¢ã\n\n\n\næç»­é¨ç½²æå³çææçåæ´é½ä¼è¢«èªå¨é¨ç½²å°çäº§ç¯å¢ä¸­ãæç»­äº¤ä»æå³çææçåæ´é½å¯ä»¥è¢«é¨ç½²å°çäº§ç¯å¢ä¸­ï¼ä½æ¯åºäºä¸å¡èèï¼å¯ä»¥éæ©ä¸é¨ç½²ãå¦æè¦å®æ½æç»­é¨ç½²ï¼å¿é¡»åå®æ½æç»­äº¤ä»ã\n\næç»­äº¤ä»å¹¶ä¸æ¯æè½¯ä»¶æ¯ä¸ä¸ªæ¹å¨é½è¦å°½å¿«é¨ç½²å°äº§åç¯å¢ä¸­ï¼å®æçæ¯ä»»ä½çä»£ç ä¿®æ¹é½å¯ä»¥å¨ä»»ä½æ¶åå®æ½é¨ç½²ã\n\næç»­äº¤ä»è¡¨ç¤ºçæ¯ä¸ç§è½åï¼èæç»­é¨ç½²è¡¨ç¤ºçåä¸ç§æ¹å¼ãæç»­é¨ç½²æ¯æç»­äº¤ä»çæé«é¶æ®µ\n\n\n# ciãcdãdevopså³ç³»\n\næ¦å¿µæ§çåå®¹ï¼æ¯ä¸ªäººççè§£é½ææä¸åãå°±å¥½æ¯cgi è¿ä¸ªè¯ï¼å³å¯ä»¥çè§£æcgiè¿ç§åè®®ï¼ä¹å¯ä»¥çè§£æå®ç°äºcgiåè®®çè½¯ä»¶å·¥å·ï¼é½æ²¡æé®é¢ï¼å¬æå¼å­è¿ç¹ä¸åãçä¸ä¸å¾ï¼\n\n\n\n\n# å¦ä½è½å°å®ç°devopsçå¿µ\n\ndevopså´èµ·äº2009å¹´,è¿å¹´æ¥ç±äºäºè®¡ç®ãäºèç½çåå±ï¼ä¿è¿äºdevopsçåºç¡è®¾æ½åå·¥å·é¾çåå±,æ¶ç°äº-å¤§æ¹ä¼ç§çå·¥å·ï¼è¿äºå·¥å·åæ¬å¼å,æµè¯ï¼è¿ç»´çåä¸ªé¢åï¼ä¾å¦: githubãgit/svnãdockerãjenkinsãhudsonãant/maven/gradleãqunitãjmeterç­ï¼ çä¸å¾:\n\n\n\nå¼å§å­¦ä¹ ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Linux ç®ä»",frontmatter:{title:"Linux ç®ä»",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/202ee1/"},regularPath:"/02.Linux/01.Linux/01.Linux%20%E7%AE%80%E4%BB%8B.html",relativePath:"02.Linux/01.Linux/01.Linux ç®ä».md",key:"v-63a62e60",path:"/pages/202ee1/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:15}],headersStr:"æ¦è¿°",content:"# Linux ç®ä»\n\n\n# æ¦è¿°\n\nLinux æ¯ä¸ç§èªç±åå¼æ¾æºç çç±» UNIX æä½ç³»ç»ï¼ä½¿ç¨ Linux åæ ¸ãç®åå­å¨çè®¸å¤ä¸åç Linux åè¡çï¼å¯å®è£å¨åç§åæ ·ççµèç¡¬ä»¶è®¾å¤ï¼ä»ææºãå¹³æ¿çµèãè·¯ç±å¨åå½±é³æ¸¸ææ§å¶å°ï¼å°æ¡ä¸åçµèï¼å¤§åçµèåè¶çº§çµèã Linux æ¯ä¸ä¸ªé¢åçæä½ç³»ç»ï¼ä¸çä¸è¿ç®æå¿«ç 10 å°è¶çº§çµèè¿è¡çé½æ¯ Linux æä½ç³»ç»ã\n\nLinux æä½ç³»ç»ä¹æ¯èªç±è½¯ä»¶åå¼æ¾æºä»£ç åå±ä¸­æèåçä¾å­ãåªè¦éµå¾ª GNU éç¨å¬å±è®¸å¯è¯,ä»»ä½äººåæºæé½å¯ä»¥èªç±å°ä½¿ç¨ Linux çææåºå±æºä»£ç ï¼ä¹å¯ä»¥èªç±å°ä¿®æ¹åååå¸ãä¸¥æ ¼æ¥è®²ï¼Linux è¿ä¸ªè¯æ¬èº«åªè¡¨ç¤º Linux åæ ¸ï¼ä½å¨å®éä¸äººä»¬å·²ç»ä¹ æ¯äºç¨ Linux æ¥å½¢å®¹æ´ä¸ªåºäº Linux åæ ¸ï¼å¹¶ä¸ä½¿ç¨ GNU å·¥ç¨åç§å·¥å·åæ°æ®åºçæä½ç³»ç» (ä¹è¢«ç§°ä¸º GNU/ Linux)ãéå¸¸æåµä¸ï¼Linux è¢«æåæä¾æ¡ä¸åçµèåæå¡å¨ä½¿ç¨ç Linux åè¡çæ¬ãä¸äºæµè¡çä¸»æµ Linux åè¡çæ¬ï¼åæ¬ Debian (åå¶è¡ççæ¬ Ubuntu)ï¼Fedora å OpenSUSE ç­ãKernel + Softwares + Tools å°±æ¯ Linux Distribution\n\nç®åå¸é¢ä¸è¾ç¥åçåè¡çæï¼UbuntuãRedHatãCentOSãDebianãFedoraãSuSEãOpenSUSEãTurboLinuxãBluePointãRedFlagãXtermãSlackWareç­ã",normalizedContent:"# linux ç®ä»\n\n\n# æ¦è¿°\n\nlinux æ¯ä¸ç§èªç±åå¼æ¾æºç çç±» unix æä½ç³»ç»ï¼ä½¿ç¨ linux åæ ¸ãç®åå­å¨çè®¸å¤ä¸åç linux åè¡çï¼å¯å®è£å¨åç§åæ ·ççµèç¡¬ä»¶è®¾å¤ï¼ä»ææºãå¹³æ¿çµèãè·¯ç±å¨åå½±é³æ¸¸ææ§å¶å°ï¼å°æ¡ä¸åçµèï¼å¤§åçµèåè¶çº§çµèã linux æ¯ä¸ä¸ªé¢åçæä½ç³»ç»ï¼ä¸çä¸è¿ç®æå¿«ç 10 å°è¶çº§çµèè¿è¡çé½æ¯ linux æä½ç³»ç»ã\n\nlinux æä½ç³»ç»ä¹æ¯èªç±è½¯ä»¶åå¼æ¾æºä»£ç åå±ä¸­æèåçä¾å­ãåªè¦éµå¾ª gnu éç¨å¬å±è®¸å¯è¯,ä»»ä½äººåæºæé½å¯ä»¥èªç±å°ä½¿ç¨ linux çææåºå±æºä»£ç ï¼ä¹å¯ä»¥èªç±å°ä¿®æ¹åååå¸ãä¸¥æ ¼æ¥è®²ï¼linux è¿ä¸ªè¯æ¬èº«åªè¡¨ç¤º linux åæ ¸ï¼ä½å¨å®éä¸äººä»¬å·²ç»ä¹ æ¯äºç¨ linux æ¥å½¢å®¹æ´ä¸ªåºäº linux åæ ¸ï¼å¹¶ä¸ä½¿ç¨ gnu å·¥ç¨åç§å·¥å·åæ°æ®åºçæä½ç³»ç» (ä¹è¢«ç§°ä¸º gnu/ linux)ãéå¸¸æåµä¸ï¼linux è¢«æåæä¾æ¡ä¸åçµèåæå¡å¨ä½¿ç¨ç linux åè¡çæ¬ãä¸äºæµè¡çä¸»æµ linux åè¡çæ¬ï¼åæ¬ debian (åå¶è¡ççæ¬ ubuntu)ï¼fedora å opensuse ç­ãkernel + softwares + tools å°±æ¯ linux distribution\n\nç®åå¸é¢ä¸è¾ç¥åçåè¡çæï¼ubuntuãredhatãcentosãdebianãfedoraãsuseãopensuseãturbolinuxãbluepointãredflagãxtermãslackwareç­ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux ä¸ Windows æ¯è¾",frontmatter:{title:"Linux ä¸ Windows æ¯è¾",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/715f2d/"},regularPath:"/02.Linux/01.Linux/02.Linux%20%E4%B8%8E%20Windows%20%E6%AF%94%E8%BE%83.html",relativePath:"02.Linux/01.Linux/02.Linux ä¸ Windows æ¯è¾.md",key:"v-bded170c",path:"/pages/715f2d/",headersStr:null,content:"# Linux ä¸ Windows æ¯è¾\n\nç®åå½å Linux æ´å¤çæ¯åºç¨äºæå¡å¨ä¸ï¼èæ¡é¢æä½ç³»ç»æ´å¤ä½¿ç¨çæ¯ Windowsãä¸»è¦åºå«å¦ä¸\n\næ¯è¾     WINDOWS                                                                                                     LINUX\nçé¢     çé¢ç»ä¸ï¼å¤å£³ç¨åºåºå®ææ Windows ç¨åºèåå ä¹ä¸è´ï¼å¿«æ·é®ä¹å ä¹ç¸å                                                                     å¾å½¢çé¢é£æ ¼ä¾åå¸çä¸åèä¸åï¼å¯è½äºä¸å¼å®¹ãGNU/Linux çç»ç«¯æºæ¯ä» UNIX\n                                                                                                                   ä¼ æ¿ä¸æ¥ï¼åºæ¬å½ä»¤åæä½æ¹æ³ä¹å ä¹ä¸è´ã\né©±å¨ç¨åº   é©±å¨ç¨åºä¸°å¯ï¼çæ¬æ´æ°é¢ç¹ãé»è®¤å®è£ç¨åºéé¢ä¸è¬åå«æè¯¥çæ¬åå¸æ¶æµè¡çç¡¬ä»¶é©±å¨ç¨åºï¼ä¹åæåºçæ°ç¡¬ä»¶é©±å¨ä¾èµäºç¡¬ä»¶ååæä¾ãå¯¹äºä¸äºèç¡¬ä»¶ï¼å¦ææ²¡æäºåéçé©±å¨ææ¶å¾é¾æ¯æãå¦å¤ï¼ææ¶ç¡¬ä»¶ååæªæä¾æéçæ¬ç   ç±å¿æ¿èå¼åï¼ç±Linuxæ ¸å¿å¼åå°ç»åå¸ï¼å¾å¤ç¡¬ä»¶åååºäºçæèèå¹¶æªæä¾é©±å¨ç¨åºï¼å°½ç®¡å¤æ°æ éæå¨å®è£ï¼ä½æ¯æ¶åå®è£åç¸å¯¹å¤æï¼ä½¿å¾æ°ç¨æ·é¢å¯¹é©±å¨ç¨åºé®é¢ï¼æ¯å¦å­å¨åå®è£æ¹æ³ï¼ä¼ä¸ç­¹è«å±ãä½æ¯å¨å¼æºå¼åæ¨¡å¼ä¸ï¼è®¸å¤èç¡¬ä»¶å°½ç®¡å¨\n       Windows ä¸çé©±å¨ï¼ä¹ä¼æ¯è¾å¤´çã                                                                                        Windows ä¸å¾é¾æ¯æçä¹å®¹ææ¾å°é©±å¨ãHPãIntelãAMD\n                                                                                                                   ç­ç¡¬ä»¶ååéæ­¥ä¸åç¨åº¦æ¯æå¼æºé©±å¨ï¼é®é¢æ­£å¨å¾å°ç¼è§£ã\nä½¿ç¨     ä½¿ç¨æ¯è¾ç®åï¼å®¹æå¥é¨ãå¾å½¢åçé¢å¯¹æ²¡æè®¡ç®æºèæ¯ç¥è¯çç¨æ·ä½¿ç¨ååæå©ã                                                                       å¾å½¢çé¢ä½¿ç¨ç®åï¼å®¹æå¥é¨ãæå­çé¢ï¼éè¦å­¦ä¹ æè½ææ¡ã\nå­¦ä¹      ç³»ç»æé å¤æãååé¢ç¹ï¼ä¸ç¥è¯ãæè½æ·æ±°å¿«ï¼æ·±å¥å­¦ä¹ å°é¾ã                                                                               ç³»ç»æé ç®åãç¨³å®ï¼ä¸ç¥è¯ãæè½ä¼ æ¿æ§å¥½ï¼æ·±å¥å­¦ä¹ ç¸å¯¹å®¹æã\nè½¯ä»¶     æ¯ä¸ç§ç¹å®åè½å¯è½é½éè¦åä¸è½¯ä»¶çæ¯æï¼éè¦è´­ä¹°ç¸åºçææã                                                                              å¤§é¨åè½¯ä»¶é½å¯ä»¥èªç±è·åï¼åæ ·åè½çè½¯ä»¶éæ©è¾å°ã",normalizedContent:"# linux ä¸ windows æ¯è¾\n\nç®åå½å linux æ´å¤çæ¯åºç¨äºæå¡å¨ä¸ï¼èæ¡é¢æä½ç³»ç»æ´å¤ä½¿ç¨çæ¯ windowsãä¸»è¦åºå«å¦ä¸\n\næ¯è¾     windows                                                                                                     linux\nçé¢     çé¢ç»ä¸ï¼å¤å£³ç¨åºåºå®ææ windows ç¨åºèåå ä¹ä¸è´ï¼å¿«æ·é®ä¹å ä¹ç¸å                                                                     å¾å½¢çé¢é£æ ¼ä¾åå¸çä¸åèä¸åï¼å¯è½äºä¸å¼å®¹ãgnu/linux çç»ç«¯æºæ¯ä» unix\n                                                                                                                   ä¼ æ¿ä¸æ¥ï¼åºæ¬å½ä»¤åæä½æ¹æ³ä¹å ä¹ä¸è´ã\né©±å¨ç¨åº   é©±å¨ç¨åºä¸°å¯ï¼çæ¬æ´æ°é¢ç¹ãé»è®¤å®è£ç¨åºéé¢ä¸è¬åå«æè¯¥çæ¬åå¸æ¶æµè¡çç¡¬ä»¶é©±å¨ç¨åºï¼ä¹åæåºçæ°ç¡¬ä»¶é©±å¨ä¾èµäºç¡¬ä»¶ååæä¾ãå¯¹äºä¸äºèç¡¬ä»¶ï¼å¦ææ²¡æäºåéçé©±å¨ææ¶å¾é¾æ¯æãå¦å¤ï¼ææ¶ç¡¬ä»¶ååæªæä¾æéçæ¬ç   ç±å¿æ¿èå¼åï¼ç±linuxæ ¸å¿å¼åå°ç»åå¸ï¼å¾å¤ç¡¬ä»¶åååºäºçæèèå¹¶æªæä¾é©±å¨ç¨åºï¼å°½ç®¡å¤æ°æ éæå¨å®è£ï¼ä½æ¯æ¶åå®è£åç¸å¯¹å¤æï¼ä½¿å¾æ°ç¨æ·é¢å¯¹é©±å¨ç¨åºé®é¢ï¼æ¯å¦å­å¨åå®è£æ¹æ³ï¼ä¼ä¸ç­¹è«å±ãä½æ¯å¨å¼æºå¼åæ¨¡å¼ä¸ï¼è®¸å¤èç¡¬ä»¶å°½ç®¡å¨\n       windows ä¸çé©±å¨ï¼ä¹ä¼æ¯è¾å¤´çã                                                                                        windows ä¸å¾é¾æ¯æçä¹å®¹ææ¾å°é©±å¨ãhpãintelãamd\n                                                                                                                   ç­ç¡¬ä»¶ååéæ­¥ä¸åç¨åº¦æ¯æå¼æºé©±å¨ï¼é®é¢æ­£å¨å¾å°ç¼è§£ã\nä½¿ç¨     ä½¿ç¨æ¯è¾ç®åï¼å®¹æå¥é¨ãå¾å½¢åçé¢å¯¹æ²¡æè®¡ç®æºèæ¯ç¥è¯çç¨æ·ä½¿ç¨ååæå©ã                                                                       å¾å½¢çé¢ä½¿ç¨ç®åï¼å®¹æå¥é¨ãæå­çé¢ï¼éè¦å­¦ä¹ æè½ææ¡ã\nå­¦ä¹      ç³»ç»æé å¤æãååé¢ç¹ï¼ä¸ç¥è¯ãæè½æ·æ±°å¿«ï¼æ·±å¥å­¦ä¹ å°é¾ã                                                                               ç³»ç»æé ç®åãç¨³å®ï¼ä¸ç¥è¯ãæè½ä¼ æ¿æ§å¥½ï¼æ·±å¥å­¦ä¹ ç¸å¯¹å®¹æã\nè½¯ä»¶     æ¯ä¸ç§ç¹å®åè½å¯è½é½éè¦åä¸è½¯ä»¶çæ¯æï¼éè¦è´­ä¹°ç¸åºçææã                                                                              å¤§é¨åè½¯ä»¶é½å¯ä»¥èªç±è·åï¼åæ ·åè½çè½¯ä»¶éæ©è¾å°ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux è¿ç¨æ§å¶ç®¡ç",frontmatter:{title:"Linux è¿ç¨æ§å¶ç®¡ç",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/56abb4/"},regularPath:"/02.Linux/01.Linux/03.Linux%20%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%AE%A1%E7%90%86.html",relativePath:"02.Linux/01.Linux/03.Linux è¿ç¨æ§å¶ç®¡ç.md",key:"v-0e25e56a",path:"/pages/56abb4/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:19},{level:2,title:"OpenSSH",slug:"openssh",normalizedTitle:"openssh",charIndex:159},{level:3,title:"æ£æ¥è½¯ä»¶æ¯å¦å®è£",slug:"æ£æ¥è½¯ä»¶æ¯å¦å®è£",normalizedTitle:"æ£æ¥è½¯ä»¶æ¯å¦å®è£",charIndex:371},{level:3,title:"å®è£æå¡ç«¯",slug:"å®è£æå¡ç«¯",normalizedTitle:"å®è£æå¡ç«¯",charIndex:433},{level:3,title:"å®è£å®¢æ·ç«¯",slug:"å®è£å®¢æ·ç«¯",normalizedTitle:"å®è£å®¢æ·ç«¯",charIndex:476},{level:2,title:"SecureCRT",slug:"securecrt",normalizedTitle:"securecrt",charIndex:578},{level:3,title:"ç¹ç¹",slug:"ç¹ç¹",normalizedTitle:"ç¹ç¹",charIndex:783},{level:3,title:"å¿«æ·é®",slug:"å¿«æ·é®",normalizedTitle:"å¿«æ·é®",charIndex:1417},{level:3,title:"é¡¹ç®ä¸­åºç¨",slug:"é¡¹ç®ä¸­åºç¨",normalizedTitle:"é¡¹ç®ä¸­åºç¨",charIndex:2038},{level:3,title:"è½¯ä»¶ææå¾",slug:"è½¯ä»¶ææå¾",normalizedTitle:"è½¯ä»¶ææå¾",charIndex:2132}],headersStr:"æ¦è¿° OpenSSH æ£æ¥è½¯ä»¶æ¯å¦å®è£ å®è£æå¡ç«¯ å®è£å®¢æ·ç«¯ SecureCRT ç¹ç¹ å¿«æ·é® é¡¹ç®ä¸­åºç¨ è½¯ä»¶ææå¾",content:"# Linux è¿ç¨æ§å¶ç®¡ç\n\n\n# æ¦è¿°\n\nä¼ ç»çç½ç»æå¡ç¨åºï¼FTPãPOPãtelnet æ¬è´¨ä¸é½æ¯ä¸å®å¨çï¼å ä¸ºå®ä»¬å¨ç½ç»ä¸éè¿ææä¼ éå£ä»¤åæ°æ®ï¼è¿äºæ°æ®éå¸¸å®¹æè¢«æªè·ãSSH å«å Secure Shellãéè¿ SSHï¼å¯ä»¥æä¼ è¾æ°æ®è¿è¡å å¯ï¼é¢é²æ»å»ï¼ä¼ è¾çæ°æ®è¿è¡äºåç¼©ï¼å¯ä»¥å å¿«ä¼ è¾éåº¦ã\n\n\n# OpenSSH\n\nSSH æ¯è¬å°ä¸å®¶å¬å¸å¼åãä½æ¯åå°çæåå å¯ç®æ³éå¶ï¼ç°å¨å¾å¤äººé½ä½¿ç¨ OpenSSHãOpenSSH æ¯ SSH çæ¿ä»£è½¯ä»¶ï¼åè´¹ã\n\nOpenSSH ç±å®¢æ·ç«¯åæå¡ç«¯ç»æã\n\n * åºäºå£ä»¤çå®å¨éªè¯ï¼ç¥éæå¡å¨çå¸å·å¯ç å³å¯è¿ç¨ç»å½ï¼å£ä»¤åæ°æ®å¨ä¼ è¾è¿ç¨ä¸­é½ä¼è¢«å å¯ã\n * åºäºå¯é¥çå®å¨éªè¯ï¼æ­¤æ¶éè¦å¨åå»ºä¸å¯¹å¯é¥ï¼æå¬æå¯é¥æ¾å°è¿ç¨æå¡å¨ä¸èªå·±çå®¿ä¸»ç®å½ä¸­ï¼èç§æå¯é¥åç±èªå·±ä¿å­ã\n\n\n# æ£æ¥è½¯ä»¶æ¯å¦å®è£\n\napt-cache policy openssh-client openssh-server\n\n\n\n# å®è£æå¡ç«¯\n\napt-get install openssh-server\n\n\n\n# å®è£å®¢æ·ç«¯\n\napt-get install openssh-client\n\n\nOpenSSH æå¡å¨çä¸»è¦éç½®æä»¶ä¸º /etc/ssh/sshd_configï¼å ä¹ææçéç½®ä¿¡æ¯é½å¨æ­¤æä»¶ä¸­ã\n\n\n# SecureCRT\n\nSecureCRTæ¯ä¸æ¬¾æ¯æSSHï¼SSH1åSSH2ï¼çç»ç«¯ä»¿çç¨åºï¼ç®åå°è¯´æ¯Windowsä¸ç»å½UNIXæLinuxæå¡å¨ä¸»æºçè½¯ä»¶ã\n\nSecureCRTæ¯æSSHï¼åæ¶æ¯æTelnetårloginåè®®ãSecureCRTæ¯ä¸æ¬¾ç¨äºè¿æ¥è¿è¡åæ¬WindowsãUNIXåVMSççæ³å·¥å·ãéè¿ä½¿ç¨åå«çVCPå½ä»¤è¡ç¨åºå¯ä»¥è¿è¡å å¯æä»¶çä¼ è¾ãææµè¡CRTTelnetå®¢æ·æºçææç¹ç¹,åæ¬:èªå¨æ³¨åãå¯¹ä¸åä¸»æºä¿æä¸åçç¹æ§ãæå°åè½ãé¢è²è®¾ç½®ãå¯åå±å¹å°ºå¯¸ãç¨æ·å®ä¹çé®ä½å¾åä¼è¯çVT100,VT102,VT220åANSIç«äº.è½ä»å½ä»¤è¡ä¸­è¿è¡æä»æµè§å¨ä¸­è¿è¡.å¶å®ç¹ç¹åæ¬ææ¬æç¨¿ãæäºä½¿ç¨çå·¥å·æ¡ãç¨æ·çé®ä½å¾ç¼è¾å¨ãå¯å®å¶çANSIé¢è²ç­.SecureCRTçSSHåè®®æ¯æDES,3DESåRC4å¯ç åå¯ç ä¸RSAé´å«ã\n\n\n# ç¹ç¹\n\nå¹¿æ³çç»ç«¯ä»¿çï¼\n\nVT100ï¼VT102ï¼VT220ï¼ANSIï¼SCO ANSIï¼Xtermï¼Wyse 50/60å Linux console ä»¿çï¼å¸¦æ ANSI é¢è²ï¼ã\n\nä¼ç§çä¼è¯ç®¡çç¹æ§ï¼\n\næ°çå¸¦æ ç­¾çç¨æ·çé¢å Activator æçå·¥å·ï¼æå°åæ¡é¢çæä¹±ã\n\nä¼è¯è®¾ç½®å¯ä»¥ä¿å­å¨å½åçä¼è¯ä¸­ã\n\nåè®®æ¯æ:\n\næ¯æ SSH1ï¼SSH2ï¼Telnetï¼RLoginï¼Serialï¼å TAPI åè®®ã\n\nSecure Shellï¼\n\nSecure Shell å å¯ç»å½åä¼è¯æ°æ®ï¼åæ¬ä»¥ä¸æ¯æï¼\n\n- ç«¯å£è½¬åä½¿ TCP/IP æ°æ®æ´å®å¨\n\n- å£ä»¤ï¼å¬é¥ï¼é®çäº¤äºå Kerberos éªè¯\n\n- AESï¼Twofishï¼Blowfishï¼3DESï¼RC4ï¼å DES å å¯\n\n- X11 è½¬å\n\næä»¶ä¼ è¾å·¥å·ï¼\n\nVCP å VSFTP å½ä»¤è¡å¬ç¨ç¨åºè®©ä½¿ç¨ SFTP çæä»¶ä¼ è¾æ´å®å¨ã\n\nèæ¬æ¯æï¼\n\næ¯æ VBScript å JScript èæ¬è¯­è¨ã\n\n\n# å¿«æ·é®\n\nå½ä»¤                     è¯´æ\nAlt + Enter            å¨å±\nAlt + B                æå¼æ°çè¿æ¥\nAlt + 1/2/3/4/5.../9   åæ¢å°ç¬¬1/2/3/4/5.../9ä¸ªæ ç­¾\nCtrl + A               åæ ç§»è³è¡é¦\nCtrl + B               åæ åç§»1ä¸ªå­ç¬¦\nCtrl + D               å é¤åæ å1ä¸ªå­ç¬¦\nCtrl + E               åæ ç§»è³è¡æ«\nCtrl + F               æ åç§»1ä¸ªå­ç¬¦\nCtrl + H               å é¤åæ åç1ä¸ªå­ç¬¦\nCtrl + J               åè½¦\nCtrl + k               å é¤å½ååæ è³è¡æ«çå­ç¬¦\nCtrl + P               æ¾ç¤ºåä¸æ¡å½ä»¤\nCtrl + M               åè½¦\nCtrl + N               ä¸ä¸æ¡å½ä»¤\nCtrl + T               äº¤æ¢åæ åæåä¸¤ä¸ªå­ç¬¦ï¼æç§è·¯ç±å¨å¯ç¨ï¼\nCtrl + U               æ¸é¤å½åè¡åç¼å­çè¾å¥\nCtrl + V               è¾å¥ctrlå­ç¬¦\nCtrl + W               å é¤å½ååæ è³è¡é¦çå­ç¬¦\n\n\n# é¡¹ç®ä¸­åºç¨\n\nå¨SecureCRTä¸­éç½®æ¬å°ç«¯å£è½¬åï¼æ¶åå°æ¬æºãè·³æ¿æºãç®æ æå¡å¨ï¼å ä¸ºæ¬æºä¸ç®æ æå¡å¨ä¸è½ç´æ¥pingéï¼æä»¥éè¦éç½®ç«¯å£è½¬åï¼å°æ¬æºçè¯·æ±è½¬åå°ç®æ æå¡å¨ã\n\n\n# è½¯ä»¶ææå¾\n\n",normalizedContent:"# linux è¿ç¨æ§å¶ç®¡ç\n\n\n# æ¦è¿°\n\nä¼ ç»çç½ç»æå¡ç¨åºï¼ftpãpopãtelnet æ¬è´¨ä¸é½æ¯ä¸å®å¨çï¼å ä¸ºå®ä»¬å¨ç½ç»ä¸éè¿ææä¼ éå£ä»¤åæ°æ®ï¼è¿äºæ°æ®éå¸¸å®¹æè¢«æªè·ãssh å«å secure shellãéè¿ sshï¼å¯ä»¥æä¼ è¾æ°æ®è¿è¡å å¯ï¼é¢é²æ»å»ï¼ä¼ è¾çæ°æ®è¿è¡äºåç¼©ï¼å¯ä»¥å å¿«ä¼ è¾éåº¦ã\n\n\n# openssh\n\nssh æ¯è¬å°ä¸å®¶å¬å¸å¼åãä½æ¯åå°çæåå å¯ç®æ³éå¶ï¼ç°å¨å¾å¤äººé½ä½¿ç¨ opensshãopenssh æ¯ ssh çæ¿ä»£è½¯ä»¶ï¼åè´¹ã\n\nopenssh ç±å®¢æ·ç«¯åæå¡ç«¯ç»æã\n\n * åºäºå£ä»¤çå®å¨éªè¯ï¼ç¥éæå¡å¨çå¸å·å¯ç å³å¯è¿ç¨ç»å½ï¼å£ä»¤åæ°æ®å¨ä¼ è¾è¿ç¨ä¸­é½ä¼è¢«å å¯ã\n * åºäºå¯é¥çå®å¨éªè¯ï¼æ­¤æ¶éè¦å¨åå»ºä¸å¯¹å¯é¥ï¼æå¬æå¯é¥æ¾å°è¿ç¨æå¡å¨ä¸èªå·±çå®¿ä¸»ç®å½ä¸­ï¼èç§æå¯é¥åç±èªå·±ä¿å­ã\n\n\n# æ£æ¥è½¯ä»¶æ¯å¦å®è£\n\napt-cache policy openssh-client openssh-server\n\n\n\n# å®è£æå¡ç«¯\n\napt-get install openssh-server\n\n\n\n# å®è£å®¢æ·ç«¯\n\napt-get install openssh-client\n\n\nopenssh æå¡å¨çä¸»è¦éç½®æä»¶ä¸º /etc/ssh/sshd_configï¼å ä¹ææçéç½®ä¿¡æ¯é½å¨æ­¤æä»¶ä¸­ã\n\n\n# securecrt\n\nsecurecrtæ¯ä¸æ¬¾æ¯æsshï¼ssh1åssh2ï¼çç»ç«¯ä»¿çç¨åºï¼ç®åå°è¯´æ¯windowsä¸ç»å½unixælinuxæå¡å¨ä¸»æºçè½¯ä»¶ã\n\nsecurecrtæ¯æsshï¼åæ¶æ¯ætelnetårloginåè®®ãsecurecrtæ¯ä¸æ¬¾ç¨äºè¿æ¥è¿è¡åæ¬windowsãunixåvmsççæ³å·¥å·ãéè¿ä½¿ç¨åå«çvcpå½ä»¤è¡ç¨åºå¯ä»¥è¿è¡å å¯æä»¶çä¼ è¾ãææµè¡crttelnetå®¢æ·æºçææç¹ç¹,åæ¬:èªå¨æ³¨åãå¯¹ä¸åä¸»æºä¿æä¸åçç¹æ§ãæå°åè½ãé¢è²è®¾ç½®ãå¯åå±å¹å°ºå¯¸ãç¨æ·å®ä¹çé®ä½å¾åä¼è¯çvt100,vt102,vt220åansiç«äº.è½ä»å½ä»¤è¡ä¸­è¿è¡æä»æµè§å¨ä¸­è¿è¡.å¶å®ç¹ç¹åæ¬ææ¬æç¨¿ãæäºä½¿ç¨çå·¥å·æ¡ãç¨æ·çé®ä½å¾ç¼è¾å¨ãå¯å®å¶çansié¢è²ç­.securecrtçsshåè®®æ¯ædes,3desårc4å¯ç åå¯ç ä¸rsaé´å«ã\n\n\n# ç¹ç¹\n\nå¹¿æ³çç»ç«¯ä»¿çï¼\n\nvt100ï¼vt102ï¼vt220ï¼ansiï¼sco ansiï¼xtermï¼wyse 50/60å linux console ä»¿çï¼å¸¦æ ansi é¢è²ï¼ã\n\nä¼ç§çä¼è¯ç®¡çç¹æ§ï¼\n\næ°çå¸¦æ ç­¾çç¨æ·çé¢å activator æçå·¥å·ï¼æå°åæ¡é¢çæä¹±ã\n\nä¼è¯è®¾ç½®å¯ä»¥ä¿å­å¨å½åçä¼è¯ä¸­ã\n\nåè®®æ¯æ:\n\næ¯æ ssh1ï¼ssh2ï¼telnetï¼rloginï¼serialï¼å tapi åè®®ã\n\nsecure shellï¼\n\nsecure shell å å¯ç»å½åä¼è¯æ°æ®ï¼åæ¬ä»¥ä¸æ¯æï¼\n\n- ç«¯å£è½¬åä½¿ tcp/ip æ°æ®æ´å®å¨\n\n- å£ä»¤ï¼å¬é¥ï¼é®çäº¤äºå kerberos éªè¯\n\n- aesï¼twofishï¼blowfishï¼3desï¼rc4ï¼å des å å¯\n\n- x11 è½¬å\n\næä»¶ä¼ è¾å·¥å·ï¼\n\nvcp å vsftp å½ä»¤è¡å¬ç¨ç¨åºè®©ä½¿ç¨ sftp çæä»¶ä¼ è¾æ´å®å¨ã\n\nèæ¬æ¯æï¼\n\næ¯æ vbscript å jscript èæ¬è¯­è¨ã\n\n\n# å¿«æ·é®\n\nå½ä»¤                     è¯´æ\nalt + enter            å¨å±\nalt + b                æå¼æ°çè¿æ¥\nalt + 1/2/3/4/5.../9   åæ¢å°ç¬¬1/2/3/4/5.../9ä¸ªæ ç­¾\nctrl + a               åæ ç§»è³è¡é¦\nctrl + b               åæ åç§»1ä¸ªå­ç¬¦\nctrl + d               å é¤åæ å1ä¸ªå­ç¬¦\nctrl + e               åæ ç§»è³è¡æ«\nctrl + f               æ åç§»1ä¸ªå­ç¬¦\nctrl + h               å é¤åæ åç1ä¸ªå­ç¬¦\nctrl + j               åè½¦\nctrl + k               å é¤å½ååæ è³è¡æ«çå­ç¬¦\nctrl + p               æ¾ç¤ºåä¸æ¡å½ä»¤\nctrl + m               åè½¦\nctrl + n               ä¸ä¸æ¡å½ä»¤\nctrl + t               äº¤æ¢åæ åæåä¸¤ä¸ªå­ç¬¦ï¼æç§è·¯ç±å¨å¯ç¨ï¼\nctrl + u               æ¸é¤å½åè¡åç¼å­çè¾å¥\nctrl + v               è¾å¥ctrlå­ç¬¦\nctrl + w               å é¤å½ååæ è³è¡é¦çå­ç¬¦\n\n\n# é¡¹ç®ä¸­åºç¨\n\nå¨securecrtä¸­éç½®æ¬å°ç«¯å£è½¬åï¼æ¶åå°æ¬æºãè·³æ¿æºãç®æ æå¡å¨ï¼å ä¸ºæ¬æºä¸ç®æ æå¡å¨ä¸è½ç´æ¥pingéï¼æä»¥éè¦éç½®ç«¯å£è½¬åï¼å°æ¬æºçè¯·æ±è½¬åå°ç®æ æå¡å¨ã\n\n\n# è½¯ä»¶ææå¾\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Linux çç®å½ç»æ",frontmatter:{title:"Linux çç®å½ç»æ",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/1e9034/"},regularPath:"/02.Linux/01.Linux/04.Linux%20%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html",relativePath:"02.Linux/01.Linux/04.Linux çç®å½ç»æ.md",key:"v-68dd6adb",path:"/pages/1e9034/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:18}],headersStr:"æ¦è¿°",content:"# Linux çç®å½ç»æ\n\n\n# æ¦è¿°\n\n\n\nç®å½     è¯´æ\nbin    å­æ¾äºè¿å¶å¯æ§è¡æä»¶(ls,cat,mkdirç­)\nboot   å­æ¾ç¨äºç³»ç»å¼å¯¼æ¶ä½¿ç¨çåç§æä»¶\ndev    ç¨äºå­æ¾è®¾å¤æä»¶\netc    å­æ¾ç³»ç»éç½®æä»¶\nhome   å­æ¾ææç¨æ·æä»¶çæ ¹ç®å½\nlib    å­æ¾è·æä»¶ç³»ç»ä¸­çç¨åºè¿è¡æéè¦çå±äº«åºååæ ¸æ¨¡å\nmnt    ç³»ç»ç®¡çåå®è£ä¸´æ¶æä»¶ç³»ç»çå®è£ç¹\nopt    é¢å¤å®è£çå¯éåºç¨ç¨åºåææ¾ç½®çä½ç½®\nproc   èææä»¶ç³»ç»ï¼å­æ¾å½ååå­çæ å°\nroot   è¶çº§ç¨æ·ç®å½\nsbin   å­æ¾äºè¿å¶å¯æ§è¡æä»¶ï¼åªærootæè½è®¿é®\ntmp    ç¨äºå­æ¾åç§ä¸´æ¶æä»¶\nusr    ç¨äºå­æ¾ç³»ç»åºç¨ç¨åºï¼æ¯è¾éè¦çç®å½/usr/local æ¬å°ç®¡çåè½¯ä»¶å®è£ç®å½\nvar    ç¨äºå­æ¾è¿è¡æ¶éè¦æ¹åæ°æ®çæä»¶",normalizedContent:"# linux çç®å½ç»æ\n\n\n# æ¦è¿°\n\n\n\nç®å½     è¯´æ\nbin    å­æ¾äºè¿å¶å¯æ§è¡æä»¶(ls,cat,mkdirç­)\nboot   å­æ¾ç¨äºç³»ç»å¼å¯¼æ¶ä½¿ç¨çåç§æä»¶\ndev    ç¨äºå­æ¾è®¾å¤æä»¶\netc    å­æ¾ç³»ç»éç½®æä»¶\nhome   å­æ¾ææç¨æ·æä»¶çæ ¹ç®å½\nlib    å­æ¾è·æä»¶ç³»ç»ä¸­çç¨åºè¿è¡æéè¦çå±äº«åºååæ ¸æ¨¡å\nmnt    ç³»ç»ç®¡çåå®è£ä¸´æ¶æä»¶ç³»ç»çå®è£ç¹\nopt    é¢å¤å®è£çå¯éåºç¨ç¨åºåææ¾ç½®çä½ç½®\nproc   èææä»¶ç³»ç»ï¼å­æ¾å½ååå­çæ å°\nroot   è¶çº§ç¨æ·ç®å½\nsbin   å­æ¾äºè¿å¶å¯æ§è¡æä»¶ï¼åªærootæè½è®¿é®\ntmp    ç¨äºå­æ¾åç§ä¸´æ¶æä»¶\nusr    ç¨äºå­æ¾ç³»ç»åºç¨ç¨åºï¼æ¯è¾éè¦çç®å½/usr/local æ¬å°ç®¡çåè½¯ä»¶å®è£ç®å½\nvar    ç¨äºå­æ¾è¿è¡æ¶éè¦æ¹åæ°æ®çæä»¶",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Linux æä½æä»¶ç®å½",frontmatter:{title:"Linux æä½æä»¶ç®å½",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/8ad474/"},regularPath:"/02.Linux/01.Linux/05.Linux%20%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95.html",relativePath:"02.Linux/01.Linux/05.Linux æä½æä»¶ç®å½.md",key:"v-1893221c",path:"/pages/8ad474/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:19}],headersStr:"æ¦è¿°",content:"# Linux æä½æä»¶ç®å½\n\n\n# æ¦è¿°\n\nå½ä»¤      è¯´æ                  è¯­æ³                                                åæ°      åæ°è¯´æ\nls      æ¾ç¤ºæä»¶åç®å½åè¡¨           ls [-alrtAFR] [name...]                                   \n                                                                              -l      ååºæä»¶çè¯¦ç»ä¿¡æ¯\n                                                                              -a      ååºå½åç®å½æææä»¶ï¼åå«éèæä»¶\nmkdir   åå»ºç®å½                mkdir [-p] dirName                                        \n                                                                              -p      ç¶ç®å½ä¸å­å¨æåµä¸åçæç¶ç®å½\ncd      åæ¢ç®å½                cd [dirName]                                              \ntouch   çæä¸ä¸ªç©ºæä»¶                                                                       \necho    çæä¸ä¸ªå¸¦åå®¹æä»¶           echo abcd > 1.txtï¼echo 1234 >> 1.txt                      \ncat     æ¾ç¤ºææ¬æä»¶åå®¹            cat [-AbeEnstTuv] [--help] [--version] fileName           \ncp      å¤å¶æä»¶æç®å½             cp [options] source dest                                  \nrm      å é¤æä»¶                rm [options] name...                                      \n                                                                              -f      å¼ºå¶å é¤æä»¶æç®å½\n                                                                              -r      åæ¶å é¤è¯¥ç®å½ä¸çæææä»¶\nmv      ç§»å¨æä»¶æç®å½             mv [options] source dest                                  \nfind    å¨æä»¶ç³»ç»ä¸­æ¥æ¾æå®çæä»¶                                                                 \n                                                                              -name   æä»¶å\ngrep    å¨æå®çææ¬æä»¶ä¸­æ¥æ¾æå®çå­ç¬¦ä¸²                                                             \ntree    ç¨äºä»¥æ ç¶å¾ååºç®å½çåå®¹                                                                 \npwd     æ¾ç¤ºå½åå·¥ä½ç®å½                                                                      \nln      å»ºç«è½¯é¾æ¥                                                                         \nmore    åé¡µæ¾ç¤ºææ¬æä»¶åå®¹                                                                    \nhead    æ¾ç¤ºæä»¶å¼å¤´åå®¹                                                                      \ntail    æ¾ç¤ºæä»¶ç»å°¾åå®¹                                                                      \n                                                                              -f      è·è¸ªè¾åº",normalizedContent:"# linux æä½æä»¶ç®å½\n\n\n# æ¦è¿°\n\nå½ä»¤      è¯´æ                  è¯­æ³                                                åæ°      åæ°è¯´æ\nls      æ¾ç¤ºæä»¶åç®å½åè¡¨           ls [-alrtafr] [name...]                                   \n                                                                              -l      ååºæä»¶çè¯¦ç»ä¿¡æ¯\n                                                                              -a      ååºå½åç®å½æææä»¶ï¼åå«éèæä»¶\nmkdir   åå»ºç®å½                mkdir [-p] dirname                                        \n                                                                              -p      ç¶ç®å½ä¸å­å¨æåµä¸åçæç¶ç®å½\ncd      åæ¢ç®å½                cd [dirname]                                              \ntouch   çæä¸ä¸ªç©ºæä»¶                                                                       \necho    çæä¸ä¸ªå¸¦åå®¹æä»¶           echo abcd > 1.txtï¼echo 1234 >> 1.txt                      \ncat     æ¾ç¤ºææ¬æä»¶åå®¹            cat [-abeensttuv] [--help] [--version] filename           \ncp      å¤å¶æä»¶æç®å½             cp [options] source dest                                  \nrm      å é¤æä»¶                rm [options] name...                                      \n                                                                              -f      å¼ºå¶å é¤æä»¶æç®å½\n                                                                              -r      åæ¶å é¤è¯¥ç®å½ä¸çæææä»¶\nmv      ç§»å¨æä»¶æç®å½             mv [options] source dest                                  \nfind    å¨æä»¶ç³»ç»ä¸­æ¥æ¾æå®çæä»¶                                                                 \n                                                                              -name   æä»¶å\ngrep    å¨æå®çææ¬æä»¶ä¸­æ¥æ¾æå®çå­ç¬¦ä¸²                                                             \ntree    ç¨äºä»¥æ ç¶å¾ååºç®å½çåå®¹                                                                 \npwd     æ¾ç¤ºå½åå·¥ä½ç®å½                                                                      \nln      å»ºç«è½¯é¾æ¥                                                                         \nmore    åé¡µæ¾ç¤ºææ¬æä»¶åå®¹                                                                    \nhead    æ¾ç¤ºæä»¶å¼å¤´åå®¹                                                                      \ntail    æ¾ç¤ºæä»¶ç»å°¾åå®¹                                                                      \n                                                                              -f      è·è¸ªè¾åº",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux ç³»ç»ç®¡çå½ä»¤",frontmatter:{title:"Linux ç³»ç»ç®¡çå½ä»¤",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/6f8d47/"},regularPath:"/02.Linux/01.Linux/06.Linux%20%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4.html",relativePath:"02.Linux/01.Linux/06.Linux ç³»ç»ç®¡çå½ä»¤.md",key:"v-1094a947",path:"/pages/6f8d47/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:19}],headersStr:"æ¦è¿°",content:"# Linux ç³»ç»ç®¡çå½ä»¤\n\n\n# æ¦è¿°\n\nå½ä»¤         è¯´æ\nstat       æ¾ç¤ºæå®æä»¶çç¸å³ä¿¡æ¯,æ¯lså½ä»¤æ¾ç¤ºåå®¹æ´å¤\nwho        æ¾ç¤ºå¨çº¿ç»å½ç¨æ·\nhostname   æ¾ç¤ºä¸»æºåç§°\nuname      æ¾ç¤ºç³»ç»ä¿¡æ¯\ntop        æ¾ç¤ºå½åç³»ç»ä¸­èè´¹èµæºæå¤çè¿ç¨\nps         æ¾ç¤ºç¬é´çè¿ç¨ç¶æ\ndu         æ¾ç¤ºæå®çæä»¶ï¼ç®å½ï¼å·²ä½¿ç¨çç£çç©ºé´çæ»é\ndf         æ¾ç¤ºæä»¶ç³»ç»ç£çç©ºé´çä½¿ç¨æåµ\nfree       æ¾ç¤ºå½ååå­åäº¤æ¢ç©ºé´çä½¿ç¨æåµ\nifconfig   æ¾ç¤ºç½ç»æ¥å£ä¿¡æ¯\nping       æµè¯ç½ç»çè¿éæ§\nnetstat    æ¾ç¤ºç½ç»ç¶æä¿¡æ¯\nclear      æ¸å±\nkill       ææ­»ä¸ä¸ªè¿ç¨",normalizedContent:"# linux ç³»ç»ç®¡çå½ä»¤\n\n\n# æ¦è¿°\n\nå½ä»¤         è¯´æ\nstat       æ¾ç¤ºæå®æä»¶çç¸å³ä¿¡æ¯,æ¯lså½ä»¤æ¾ç¤ºåå®¹æ´å¤\nwho        æ¾ç¤ºå¨çº¿ç»å½ç¨æ·\nhostname   æ¾ç¤ºä¸»æºåç§°\nuname      æ¾ç¤ºç³»ç»ä¿¡æ¯\ntop        æ¾ç¤ºå½åç³»ç»ä¸­èè´¹èµæºæå¤çè¿ç¨\nps         æ¾ç¤ºç¬é´çè¿ç¨ç¶æ\ndu         æ¾ç¤ºæå®çæä»¶ï¼ç®å½ï¼å·²ä½¿ç¨çç£çç©ºé´çæ»é\ndf         æ¾ç¤ºæä»¶ç³»ç»ç£çç©ºé´çä½¿ç¨æåµ\nfree       æ¾ç¤ºå½ååå­åäº¤æ¢ç©ºé´çä½¿ç¨æåµ\nifconfig   æ¾ç¤ºç½ç»æ¥å£ä¿¡æ¯\nping       æµè¯ç½ç»çè¿éæ§\nnetstat    æ¾ç¤ºç½ç»ç¶æä¿¡æ¯\nclear      æ¸å±\nkill       ææ­»ä¸ä¸ªè¿ç¨",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux å¼å³æºå½ä»¤",frontmatter:{title:"Linux å¼å³æºå½ä»¤",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/ef1cfd/"},regularPath:"/02.Linux/01.Linux/07.Linux%20%E5%BC%80%E5%85%B3%E6%9C%BA%E5%91%BD%E4%BB%A4.html",relativePath:"02.Linux/01.Linux/07.Linux å¼å³æºå½ä»¤.md",key:"v-9690772c",path:"/pages/ef1cfd/",headers:[{level:2,title:"éå¯",slug:"éå¯",normalizedTitle:"éå¯",charIndex:505},{level:2,title:"å³æº",slug:"å³æº",normalizedTitle:"å³æº",charIndex:9}],headersStr:"éå¯ å³æº",content:"# Linux å¼å³æºå½ä»¤\n\nshutdown å½ä»¤å¯ä»¥ç¨æ¥è¿è¡å³æºç¨åºï¼å¹¶ä¸å¨å³æºä»¥åä¼ éè®¯æ¯ç»ææä½¿ç¨èæ­£å¨æ§è¡çç¨åºï¼shutdown ä¹å¯ä»¥ç¨æ¥éå¼æºã\n\nå½ä»¤         è¯­æ³                                                åæ°           åæ°è¯´æ\nshutdown   shutdown [-t seconds] [-rkhncfF] time [message]                \n                                                             -t seconds   è®¾å®å¨å ç§éä¹åè¿è¡å³æºç¨åº\n                                                             -k           å¹¶ä¸ä¼ççå³æºï¼åªæ¯å°è­¦åè®¯æ¯ä¼ éç»ææåªç¨è\n                                                             -r           å³æºåéæ°å¼æºï¼éå¯ï¼\n                                                             -h           å³æºååæº\n                                                             -n           ä¸éç¨æ­£å¸¸ç¨åºæ¥å³æºï¼ç¨å¼ºè¿«çæ¹å¼æææææ§è¡ä¸­çç¨åºåèªè¡å³æº\n                                                             -c           åæ¶ç®åå·²ç»è¿è¡ä¸­çå³æºå¨ä½\n                                                             -f           å³æºæ¶ï¼ä¸å fcsk å¨ä½(æ£æ¥ Linux æ¡£ç³»ç»)\n                                                             -F           å³æºæ¶ï¼å¼ºè¿«è¿è¡ fsck å¨ä½\n                                                             time         è®¾å®å³æºçæ¶é´\n                                                             message      ä¼ éç»ææä½¿ç¨èçè­¦åè®¯æ¯\n\n\n# éå¯\n\n * reboot\n * shutdown -r now\n\n\n# å³æº\n\n * shutdown -h now",normalizedContent:"# linux å¼å³æºå½ä»¤\n\nshutdown å½ä»¤å¯ä»¥ç¨æ¥è¿è¡å³æºç¨åºï¼å¹¶ä¸å¨å³æºä»¥åä¼ éè®¯æ¯ç»ææä½¿ç¨èæ­£å¨æ§è¡çç¨åºï¼shutdown ä¹å¯ä»¥ç¨æ¥éå¼æºã\n\nå½ä»¤         è¯­æ³                                                åæ°           åæ°è¯´æ\nshutdown   shutdown [-t seconds] [-rkhncff] time [message]                \n                                                             -t seconds   è®¾å®å¨å ç§éä¹åè¿è¡å³æºç¨åº\n                                                             -k           å¹¶ä¸ä¼ççå³æºï¼åªæ¯å°è­¦åè®¯æ¯ä¼ éç»ææåªç¨è\n                                                             -r           å³æºåéæ°å¼æºï¼éå¯ï¼\n                                                             -h           å³æºååæº\n                                                             -n           ä¸éç¨æ­£å¸¸ç¨åºæ¥å³æºï¼ç¨å¼ºè¿«çæ¹å¼æææææ§è¡ä¸­çç¨åºåèªè¡å³æº\n                                                             -c           åæ¶ç®åå·²ç»è¿è¡ä¸­çå³æºå¨ä½\n                                                             -f           å³æºæ¶ï¼ä¸å fcsk å¨ä½(æ£æ¥ linux æ¡£ç³»ç»)\n                                                             -f           å³æºæ¶ï¼å¼ºè¿«è¿è¡ fsck å¨ä½\n                                                             time         è®¾å®å³æºçæ¶é´\n                                                             message      ä¼ éç»ææä½¿ç¨èçè­¦åè®¯æ¯\n\n\n# éå¯\n\n * reboot\n * shutdown -r now\n\n\n# å³æº\n\n * shutdown -h now",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux åç¼©å½ä»¤",frontmatter:{title:"Linux åç¼©å½ä»¤",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/657e76/"},regularPath:"/02.Linux/01.Linux/08.Linux%20%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4.html",relativePath:"02.Linux/01.Linux/08.Linux åç¼©å½ä»¤.md",key:"v-2ded6bf9",path:"/pages/657e76/",headers:[{level:2,title:"tar",slug:"tar",normalizedTitle:"tar",charIndex:17},{level:2,title:"gzip",slug:"gzip",normalizedTitle:"gzip",charIndex:282},{level:2,title:"bzip2",slug:"bzip2",normalizedTitle:"bzip2",charIndex:340}],headersStr:"tar gzip bzip2",content:"# Linux åç¼©å½ä»¤\n\n\n# tar\n\nå½ä»¤    è¯­æ³                              åæ°    åæ°è¯´æ\ntar   tar [-cxzjvf] åç¼©æåææ¡£çåç§° æ¬²æåç®å½         \n                                      -c    å»ºç«ä¸ä¸ªå½æ¡£æä»¶çåæ°æä»¤\n                                      -x    è§£å¼ä¸ä¸ªå½æ¡£æä»¶çåæ°æä»¤\n                                      -z    æ¯å¦éè¦ç¨ gzip åç¼©\n                                      -j    æ¯å¦éè¦ç¨ bzip2 åç¼©\n                                      -v    åç¼©çè¿ç¨ä¸­æ¾ç¤ºæä»¶\n                                      -f    ä½¿ç¨æ¡£åï¼å¨ f ä¹åè¦ç«å³æ¥æ¡£å\n                                      -tf   æ¥çå½æ¡£æä»¶éé¢çæä»¶\n\nä¾å­ï¼\n\n * åç¼©æä»¶å¤¹ï¼tar -zcvf test.tar.gz test\\\n * è§£åæä»¶å¤¹ï¼tar -zxvf test.tar.gz\n\n\n# gzip\n\nå½ä»¤     è¯­æ³                      åæ°     åæ°è¯´æ\ngzip   gzip [éé¡¹] åç¼©ï¼è§£åç¼©ï¼çæä»¶å          \n                               -d     è§£åç¼©\n                               -l     å¯¹æ¯ä¸ªåç¼©æä»¶ï¼æ¾ç¤ºåç¼©æä»¶çå¤§å°ï¼æªåç¼©æä»¶çå¤§å°ï¼åç¼©æ¯ï¼æªåç¼©æä»¶çåå­\n                               -v     å¯¹æ¯ä¸ä¸ªåç¼©åè§£åçæä»¶ï¼æ¾ç¤ºæä»¶åååç¼©æ¯\n                               -num   ç¨æå®çæ°å­numè°æ´åç¼©çéåº¦ï¼-1æ--fastè¡¨ç¤ºæå¿«åç¼©æ¹æ³ï¼ä½åç¼©æ¯ï¼ï¼-9æ--bestè¡¨ç¤ºææ¢åç¼©æ¹æ³ï¼é«åç¼©æ¯ï¼ãç³»ç»ç¼ºçå¼ä¸º6\n\nè¯´æï¼åç¼©æä»¶åç¼ä¸º gz\n\n\n# bzip2\n\nå½ä»¤      è¯­æ³             åæ°     åæ°è¯´æ\nbzip2   bzip2 [-cdz]          \n                       -d     è§£åç¼©\n                       -z     åç¼©åæ°\n                       -num   ç¨æå®çæ°å­numè°æ´åç¼©çéåº¦ï¼-1æ--fastè¡¨ç¤ºæå¿«åç¼©æ¹æ³ï¼ä½åç¼©æ¯ï¼ï¼-9æ--bestè¡¨ç¤ºææ¢åç¼©æ¹æ³ï¼é«åç¼©æ¯ï¼ãç³»ç»ç¼ºçå¼ä¸º6\n\nè¯´æï¼åç¼©æä»¶åç¼ä¸º bz2",normalizedContent:"# linux åç¼©å½ä»¤\n\n\n# tar\n\nå½ä»¤    è¯­æ³                              åæ°    åæ°è¯´æ\ntar   tar [-cxzjvf] åç¼©æåææ¡£çåç§° æ¬²æåç®å½         \n                                      -c    å»ºç«ä¸ä¸ªå½æ¡£æä»¶çåæ°æä»¤\n                                      -x    è§£å¼ä¸ä¸ªå½æ¡£æä»¶çåæ°æä»¤\n                                      -z    æ¯å¦éè¦ç¨ gzip åç¼©\n                                      -j    æ¯å¦éè¦ç¨ bzip2 åç¼©\n                                      -v    åç¼©çè¿ç¨ä¸­æ¾ç¤ºæä»¶\n                                      -f    ä½¿ç¨æ¡£åï¼å¨ f ä¹åè¦ç«å³æ¥æ¡£å\n                                      -tf   æ¥çå½æ¡£æä»¶éé¢çæä»¶\n\nä¾å­ï¼\n\n * åç¼©æä»¶å¤¹ï¼tar -zcvf test.tar.gz test\\\n * è§£åæä»¶å¤¹ï¼tar -zxvf test.tar.gz\n\n\n# gzip\n\nå½ä»¤     è¯­æ³                      åæ°     åæ°è¯´æ\ngzip   gzip [éé¡¹] åç¼©ï¼è§£åç¼©ï¼çæä»¶å          \n                               -d     è§£åç¼©\n                               -l     å¯¹æ¯ä¸ªåç¼©æä»¶ï¼æ¾ç¤ºåç¼©æä»¶çå¤§å°ï¼æªåç¼©æä»¶çå¤§å°ï¼åç¼©æ¯ï¼æªåç¼©æä»¶çåå­\n                               -v     å¯¹æ¯ä¸ä¸ªåç¼©åè§£åçæä»¶ï¼æ¾ç¤ºæä»¶åååç¼©æ¯\n                               -num   ç¨æå®çæ°å­numè°æ´åç¼©çéåº¦ï¼-1æ--fastè¡¨ç¤ºæå¿«åç¼©æ¹æ³ï¼ä½åç¼©æ¯ï¼ï¼-9æ--bestè¡¨ç¤ºææ¢åç¼©æ¹æ³ï¼é«åç¼©æ¯ï¼ãç³»ç»ç¼ºçå¼ä¸º6\n\nè¯´æï¼åç¼©æä»¶åç¼ä¸º gz\n\n\n# bzip2\n\nå½ä»¤      è¯­æ³             åæ°     åæ°è¯´æ\nbzip2   bzip2 [-cdz]          \n                       -d     è§£åç¼©\n                       -z     åç¼©åæ°\n                       -num   ç¨æå®çæ°å­numè°æ´åç¼©çéåº¦ï¼-1æ--fastè¡¨ç¤ºæå¿«åç¼©æ¹æ³ï¼ä½åç¼©æ¯ï¼ï¼-9æ--bestè¡¨ç¤ºææ¢åç¼©æ¹æ³ï¼é«åç¼©æ¯ï¼ãç³»ç»ç¼ºçå¼ä¸º6\n\nè¯´æï¼åç¼©æä»¶åç¼ä¸º bz2",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux ç¼è¾å¨",frontmatter:{title:"Linux ç¼è¾å¨",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/287d9f/"},regularPath:"/02.Linux/01.Linux/09.Linux%20%E7%BC%96%E8%BE%91%E5%99%A8.html",relativePath:"02.Linux/01.Linux/09.Linux ç¼è¾å¨.md",key:"v-1f7d690b",path:"/pages/287d9f/",headers:[{level:2,title:"vim",slug:"vim",normalizedTitle:"vim",charIndex:16},{level:3,title:"è¿è¡æ¨¡å¼",slug:"è¿è¡æ¨¡å¼",normalizedTitle:"è¿è¡æ¨¡å¼",charIndex:24},{level:3,title:"å½ä»¤",slug:"å½ä»¤",normalizedTitle:"å½ä»¤",charIndex:39},{level:2,title:"nano",slug:"nano",normalizedTitle:"nano",charIndex:225},{level:3,title:"å½ä»¤",slug:"å½ä»¤-2",normalizedTitle:"å½ä»¤",charIndex:39}],headersStr:"vim è¿è¡æ¨¡å¼ å½ä»¤ nano å½ä»¤",content:"# Linux ç¼è¾å¨\n\n\n# vim\n\n\n# è¿è¡æ¨¡å¼\n\nç¼è¾æ¨¡å¼ï¼ç­å¾ç¼è¾å½ä»¤è¾å¥\n\næå¥æ¨¡å¼ï¼ç¼è¾æ¨¡å¼ä¸ï¼è¾å¥ i è¿å¥æå¥æ¨¡å¼ï¼æå¥ææ¬ä¿¡æ¯\n\nå½ä»¤æ¨¡å¼ï¼å¨ç¼è¾æ¨¡å¼ä¸ï¼è¾å¥ : è¿è¡å½ä»¤æ¨¡å¼\n\n\n# å½ä»¤\n\n:q ç´æ¥éåºvi\n\n:wq ä¿å­åéåºvi ï¼å¹¶å¯ä»¥æ°å»ºæä»¶\n\n:q! å¼ºå¶éåº\n\n:w file å°å½ååå®¹ä¿å­ææä¸ªæä»¶\n\n:set number å¨ç¼è¾æä»¶æ¾ç¤ºè¡å·\n\n:set nonumber å¨ç¼è¾æä»¶ä¸æ¾ç¤ºè¡å·\n\n\n# nano\n\nnano æ¯ä¸ä¸ªå­ç¬¦ç»ç«¯çææ¬ç¼è¾å¨ï¼æç¹å DOS ä¸ç editor ç¨åºãå®æ¯ vi/vim è¦ç®åå¾å¤ï¼æ¯è¾éå Linux åå­¦èä½¿ç¨ãæäº Linux åè¡ççé»è®¤ç¼è¾å¨å°±æ¯ nanoã\n\n\n# å½ä»¤\n\n * ä¿å­ï¼ctrl + o\n * æç´¢ï¼ctrl + w\n * ä¸ä¸é¡µï¼ctrl + y\n * ä¸ä¸é¡µï¼ctrl + v\n * éåºï¼ctrl + x",normalizedContent:"# linux ç¼è¾å¨\n\n\n# vim\n\n\n# è¿è¡æ¨¡å¼\n\nç¼è¾æ¨¡å¼ï¼ç­å¾ç¼è¾å½ä»¤è¾å¥\n\næå¥æ¨¡å¼ï¼ç¼è¾æ¨¡å¼ä¸ï¼è¾å¥ i è¿å¥æå¥æ¨¡å¼ï¼æå¥ææ¬ä¿¡æ¯\n\nå½ä»¤æ¨¡å¼ï¼å¨ç¼è¾æ¨¡å¼ä¸ï¼è¾å¥ : è¿è¡å½ä»¤æ¨¡å¼\n\n\n# å½ä»¤\n\n:q ç´æ¥éåºvi\n\n:wq ä¿å­åéåºvi ï¼å¹¶å¯ä»¥æ°å»ºæä»¶\n\n:q! å¼ºå¶éåº\n\n:w file å°å½ååå®¹ä¿å­ææä¸ªæä»¶\n\n:set number å¨ç¼è¾æä»¶æ¾ç¤ºè¡å·\n\n:set nonumber å¨ç¼è¾æä»¶ä¸æ¾ç¤ºè¡å·\n\n\n# nano\n\nnano æ¯ä¸ä¸ªå­ç¬¦ç»ç«¯çææ¬ç¼è¾å¨ï¼æç¹å dos ä¸ç editor ç¨åºãå®æ¯ vi/vim è¦ç®åå¾å¤ï¼æ¯è¾éå linux åå­¦èä½¿ç¨ãæäº linux åè¡ççé»è®¤ç¼è¾å¨å°±æ¯ nanoã\n\n\n# å½ä»¤\n\n * ä¿å­ï¼ctrl + o\n * æç´¢ï¼ctrl + w\n * ä¸ä¸é¡µï¼ctrl + y\n * ä¸ä¸é¡µï¼ctrl + v\n * éåºï¼ctrl + x",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux è½¯ä»¶åç®¡ç",frontmatter:{title:"Linux è½¯ä»¶åç®¡ç",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/0d3526/"},regularPath:"/02.Linux/01.Linux/10.Linux%20%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86.html",relativePath:"02.Linux/01.Linux/10.Linux è½¯ä»¶åç®¡ç.md",key:"v-56be3166",path:"/pages/0d3526/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:18},{level:2,title:"ä¿®æ¹æ°æ®æº",slug:"ä¿®æ¹æ°æ®æº",normalizedTitle:"ä¿®æ¹æ°æ®æº",charIndex:184},{level:3,title:"æ¥çç³»ç»çæ¬",slug:"æ¥çç³»ç»çæ¬",normalizedTitle:"æ¥çç³»ç»çæ¬",charIndex:241},{level:3,title:"ç¼è¾æ°æ®æº",slug:"ç¼è¾æ°æ®æº",normalizedTitle:"ç¼è¾æ°æ®æº",charIndex:451},{level:3,title:"æ´æ°æ°æ®æº",slug:"æ´æ°æ°æ®æº",normalizedTitle:"æ´æ°æ°æ®æº",charIndex:1404},{level:2,title:"å¸¸ç¨ APT å½ä»¤",slug:"å¸¸ç¨-apt-å½ä»¤",normalizedTitle:"å¸¸ç¨ apt å½ä»¤",charIndex:1431},{level:3,title:"å®è£è½¯ä»¶å",slug:"å®è£è½¯ä»¶å",normalizedTitle:"å®è£è½¯ä»¶å",charIndex:1445},{level:3,title:"å é¤è½¯ä»¶å",slug:"å é¤è½¯ä»¶å",normalizedTitle:"å é¤è½¯ä»¶å",charIndex:1485},{level:3,title:"æ´æ°è½¯ä»¶ååè¡¨",slug:"æ´æ°è½¯ä»¶ååè¡¨",normalizedTitle:"æ´æ°è½¯ä»¶ååè¡¨",charIndex:1524},{level:3,title:"åçº§æå¯ç¨æ´æ°çç³»ç»ï¼æç¨ï¼",slug:"åçº§æå¯ç¨æ´æ°çç³»ç»-æç¨",normalizedTitle:"åçº§æå¯ç¨æ´æ°çç³»ç»ï¼æç¨ï¼",charIndex:1553},{level:2,title:"å¶å® APT å½ä»¤",slug:"å¶å®-apt-å½ä»¤",normalizedTitle:"å¶å® apt å½ä»¤",charIndex:1590},{level:3,title:"æç´¢",slug:"æç´¢",normalizedTitle:"æç´¢",charIndex:1604},{level:3,title:"è·ååä¿¡æ¯",slug:"è·ååä¿¡æ¯",normalizedTitle:"è·ååä¿¡æ¯",charIndex:1638},{level:3,title:"å é¤ååéç½®æä»¶",slug:"å é¤ååéç½®æä»¶",normalizedTitle:"å é¤ååéç½®æä»¶",charIndex:1673},{level:3,title:"äºè§£ä½¿ç¨ä¾èµ",slug:"äºè§£ä½¿ç¨ä¾èµ",normalizedTitle:"äºè§£ä½¿ç¨ä¾èµ",charIndex:1719},{level:3,title:"æ¥çè¢«åªäºåä¾èµ",slug:"æ¥çè¢«åªäºåä¾èµ",normalizedTitle:"æ¥çè¢«åªäºåä¾èµ",charIndex:1758},{level:3,title:"å®è£ç¸å³çç¼è¯ç¯å¢",slug:"å®è£ç¸å³çç¼è¯ç¯å¢",normalizedTitle:"å®è£ç¸å³çç¼è¯ç¯å¢",charIndex:1800},{level:3,title:"ä¸è½½æºä»£ç ",slug:"ä¸è½½æºä»£ç ",normalizedTitle:"ä¸è½½æºä»£ç ",charIndex:1842},{level:3,title:"æ¸çæ ç¨çå",slug:"æ¸çæ ç¨çå",normalizedTitle:"æ¸çæ ç¨çå",charIndex:1877},{level:3,title:"æ£æ¥æ¯å¦ææåçä¾èµ",slug:"æ£æ¥æ¯å¦ææåçä¾èµ",normalizedTitle:"æ£æ¥æ¯å¦ææåçä¾èµ",charIndex:1926}],headersStr:"æ¦è¿° ä¿®æ¹æ°æ®æº æ¥çç³»ç»çæ¬ ç¼è¾æ°æ®æº æ´æ°æ°æ®æº å¸¸ç¨ APT å½ä»¤ å®è£è½¯ä»¶å å é¤è½¯ä»¶å æ´æ°è½¯ä»¶ååè¡¨ åçº§æå¯ç¨æ´æ°çç³»ç»ï¼æç¨ï¼ å¶å® APT å½ä»¤ æç´¢ è·ååä¿¡æ¯ å é¤ååéç½®æä»¶ äºè§£ä½¿ç¨ä¾èµ æ¥çè¢«åªäºåä¾èµ å®è£ç¸å³çç¼è¯ç¯å¢ ä¸è½½æºä»£ç  æ¸çæ ç¨çå æ£æ¥æ¯å¦ææåçä¾èµ",content:"# Linux è½¯ä»¶åç®¡ç\n\n\n# æ¦è¿°\n\nAPT(Advanced Packaging Tool) æ¯ Debian/Ubuntu ç±» Linux ç³»ç»ä¸­çè½¯ä»¶åç®¡çç¨åº, ä½¿ç¨å®å¯ä»¥æ¾å°æ³è¦çè½¯ä»¶å, èä¸å®è£ãå¸è½½ãæ´æ°é½å¾ç®ä¾¿ï¼ä¹å¯ä»¥ç¨æ¥å¯¹ Ubuntu è¿è¡åçº§; APT çæºæä»¶ä¸º /etc/apt/ ç®å½ä¸ç sources.list æä»¶ã\n\n\n# ä¿®æ¹æ°æ®æº\n\nç±äºå½åçç½ç»ç¯å¢é®é¢ï¼æä»¬éè¦å° Ubuntu çæ°æ®æºä¿®æ¹ä¸ºå½åæ°æ®æºï¼æä½æ­¥éª¤å¦ä¸ï¼\n\n\n# æ¥çç³»ç»çæ¬\n\nlsb_release -a\n\n\nè¾åºç»æä¸º\n\nNo LSB modules are available.\nDistributor ID:\tUbuntu\nDescription:\tUbuntu 18.04.4 LTS\nRelease:\t18.04\nCodename:\tbionic\n\n\næ³¨æï¼ Codename ä¸º bionicï¼è¯¥åç§°ä¸ºæä»¬ Ubuntu ç³»ç»çåç§°ï¼ä¿®æ¹æ°æ®æºéè¦ç¨å°è¯¥åç§°\n\n\n# ç¼è¾æ°æ®æº\n\nvi /etc/apt/sources.list\n\n\nå é¤å¨é¨åå®¹å¹¶ä¿®æ¹ä¸º\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\n\n\n\n# æ´æ°æ°æ®æº\n\napt-get update\n\n\n\n# å¸¸ç¨ APT å½ä»¤\n\n\n# å®è£è½¯ä»¶å\n\napt-get install packagename\n\n\n\n# å é¤è½¯ä»¶å\n\napt-get remove packagename\n\n\n\n# æ´æ°è½¯ä»¶ååè¡¨\n\napt-get update\n\n\n\n# åçº§æå¯ç¨æ´æ°çç³»ç»ï¼æç¨ï¼\n\napt-get upgrade\n\n\n\n# å¶å® APT å½ä»¤\n\n\n# æç´¢\n\napt-cache search package\n\n\n\n# è·ååä¿¡æ¯\n\napt-cache show package\n\n\n\n# å é¤ååéç½®æä»¶\n\napt-get remove package --purge\n\n\n\n# äºè§£ä½¿ç¨ä¾èµ\n\napt-cache depends package\n\n\n\n# æ¥çè¢«åªäºåä¾èµ\n\napt-cache rdepends package\n\n\n\n# å®è£ç¸å³çç¼è¯ç¯å¢\n\napt-get build-dep package\n\n\n\n# ä¸è½½æºä»£ç \n\napt-get source package\n\n\n\n# æ¸çæ ç¨çå\n\napt-get clean && apt-get autoclean1\n\n\n\n# æ£æ¥æ¯å¦ææåçä¾èµ\n\napt-get check\n",normalizedContent:"# linux è½¯ä»¶åç®¡ç\n\n\n# æ¦è¿°\n\napt(advanced packaging tool) æ¯ debian/ubuntu ç±» linux ç³»ç»ä¸­çè½¯ä»¶åç®¡çç¨åº, ä½¿ç¨å®å¯ä»¥æ¾å°æ³è¦çè½¯ä»¶å, èä¸å®è£ãå¸è½½ãæ´æ°é½å¾ç®ä¾¿ï¼ä¹å¯ä»¥ç¨æ¥å¯¹ ubuntu è¿è¡åçº§; apt çæºæä»¶ä¸º /etc/apt/ ç®å½ä¸ç sources.list æä»¶ã\n\n\n# ä¿®æ¹æ°æ®æº\n\nç±äºå½åçç½ç»ç¯å¢é®é¢ï¼æä»¬éè¦å° ubuntu çæ°æ®æºä¿®æ¹ä¸ºå½åæ°æ®æºï¼æä½æ­¥éª¤å¦ä¸ï¼\n\n\n# æ¥çç³»ç»çæ¬\n\nlsb_release -a\n\n\nè¾åºç»æä¸º\n\nno lsb modules are available.\ndistributor id:\tubuntu\ndescription:\tubuntu 18.04.4 lts\nrelease:\t18.04\ncodename:\tbionic\n\n\næ³¨æï¼ codename ä¸º bionicï¼è¯¥åç§°ä¸ºæä»¬ ubuntu ç³»ç»çåç§°ï¼ä¿®æ¹æ°æ®æºéè¦ç¨å°è¯¥åç§°\n\n\n# ç¼è¾æ°æ®æº\n\nvi /etc/apt/sources.list\n\n\nå é¤å¨é¨åå®¹å¹¶ä¿®æ¹ä¸º\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\n\n\n\n# æ´æ°æ°æ®æº\n\napt-get update\n\n\n\n# å¸¸ç¨ apt å½ä»¤\n\n\n# å®è£è½¯ä»¶å\n\napt-get install packagename\n\n\n\n# å é¤è½¯ä»¶å\n\napt-get remove packagename\n\n\n\n# æ´æ°è½¯ä»¶ååè¡¨\n\napt-get update\n\n\n\n# åçº§æå¯ç¨æ´æ°çç³»ç»ï¼æç¨ï¼\n\napt-get upgrade\n\n\n\n# å¶å® apt å½ä»¤\n\n\n# æç´¢\n\napt-cache search package\n\n\n\n# è·ååä¿¡æ¯\n\napt-cache show package\n\n\n\n# å é¤ååéç½®æä»¶\n\napt-get remove package --purge\n\n\n\n# äºè§£ä½¿ç¨ä¾èµ\n\napt-cache depends package\n\n\n\n# æ¥çè¢«åªäºåä¾èµ\n\napt-cache rdepends package\n\n\n\n# å®è£ç¸å³çç¼è¯ç¯å¢\n\napt-get build-dep package\n\n\n\n# ä¸è½½æºä»£ç \n\napt-get source package\n\n\n\n# æ¸çæ ç¨çå\n\napt-get clean && apt-get autoclean1\n\n\n\n# æ£æ¥æ¯å¦ææåçä¾èµ\n\napt-get check\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux ç¨æ·åç»ç®¡ç",frontmatter:{title:"Linux ç¨æ·åç»ç®¡ç",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/037bdb/"},regularPath:"/02.Linux/01.Linux/11.Linux%20%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%E7%AE%A1%E7%90%86.html",relativePath:"02.Linux/01.Linux/11.Linux ç¨æ·åç»ç®¡ç.md",key:"v-02353645",path:"/pages/037bdb/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:19},{level:2,title:"ä½¿ç¨ Root ç¨æ·",slug:"ä½¿ç¨-root-ç¨æ·",normalizedTitle:"ä½¿ç¨ root ç¨æ·",charIndex:112},{level:3,title:"è®¾ç½® Root è´¦æ·å¯ç ",slug:"è®¾ç½®-root-è´¦æ·å¯ç ",normalizedTitle:"è®¾ç½® root è´¦æ·å¯ç ",charIndex:230},{level:3,title:"åæ¢å° Root",slug:"åæ¢å°-root",normalizedTitle:"åæ¢å° root",charIndex:266},{level:3,title:"è®¾ç½®åè®¸è¿ç¨ç»å½ root",slug:"è®¾ç½®åè®¸è¿ç¨ç»å½-root",normalizedTitle:"è®¾ç½®åè®¸è¿ç¨ç»å½ root",charIndex:284},{level:2,title:"ç¨æ·è´¦æ·è¯´æ",slug:"ç¨æ·è´¦æ·è¯´æ",normalizedTitle:"ç¨æ·è´¦æ·è¯´æ",charIndex:519},{level:3,title:"æ®éç¨æ·",slug:"æ®éç¨æ·",normalizedTitle:"æ®éç¨æ·",charIndex:530},{level:3,title:"è¶çº§ç®¡çå",slug:"è¶çº§ç®¡çå",normalizedTitle:"è¶çº§ç®¡çå",charIndex:142},{level:3,title:"å®è£æ¶åå»ºçç³»ç»ç¨æ·",slug:"å®è£æ¶åå»ºçç³»ç»ç¨æ·",normalizedTitle:"å®è£æ¶åå»ºçç³»ç»ç¨æ·",charIndex:678},{level:2,title:"ç»è´¦æ·è¯´æ",slug:"ç»è´¦æ·è¯´æ",normalizedTitle:"ç»è´¦æ·è¯´æ",charIndex:789},{level:3,title:"ç§æç»",slug:"ç§æç»",normalizedTitle:"ç§æç»",charIndex:799},{level:3,title:"æ åç»",slug:"æ åç»",normalizedTitle:"æ åç»",charIndex:860},{level:2,title:"è´¦æ·ç³»ç»æä»¶è¯´æ",slug:"è´¦æ·ç³»ç»æä»¶è¯´æ",normalizedTitle:"è´¦æ·ç³»ç»æä»¶è¯´æ",charIndex:922},{level:3,title:"/etc/passwd",slug:"etc-passwd",normalizedTitle:"/etc/passwd",charIndex:935},{level:3,title:"/etc/shadow",slug:"etc-shadow",normalizedTitle:"/etc/shadow",charIndex:1156},{level:3,title:"/etc/group",slug:"etc-group",normalizedTitle:"/etc/group",charIndex:1281},{level:3,title:"/etc/gshadow",slug:"etc-gshadow",normalizedTitle:"/etc/gshadow",charIndex:2199},{level:2,title:"è´¦æ·ç®¡çå¸¸ç¨å½ä»¤",slug:"è´¦æ·ç®¡çå¸¸ç¨å½ä»¤",normalizedTitle:"è´¦æ·ç®¡çå¸¸ç¨å½ä»¤",charIndex:2301},{level:3,title:"å¢å ç¨æ·",slug:"å¢å ç¨æ·",normalizedTitle:"å¢å ç¨æ·",charIndex:2314},{level:3,title:"ä¿®æ¹ç¨æ·",slug:"ä¿®æ¹ç¨æ·",normalizedTitle:"ä¿®æ¹ç¨æ·",charIndex:2461},{level:3,title:"å é¤ç¨æ·",slug:"å é¤ç¨æ·",normalizedTitle:"å é¤ç¨æ·",charIndex:2723},{level:3,title:"ç»è´¦æ·ç»´æ¤",slug:"ç»è´¦æ·ç»´æ¤",normalizedTitle:"ç»è´¦æ·ç»´æ¤",charIndex:2836},{level:3,title:"å£ä»¤ç»´æ¤",slug:"å£ä»¤ç»´æ¤",normalizedTitle:"å£ä»¤ç»´æ¤",charIndex:2951},{level:3,title:"ç¨æ·åç»ç¶æ",slug:"ç¨æ·åç»ç¶æ",normalizedTitle:"ç¨æ·åç»ç¶æ",charIndex:3166}],headersStr:"æ¦è¿° ä½¿ç¨ Root ç¨æ· è®¾ç½® Root è´¦æ·å¯ç  åæ¢å° Root è®¾ç½®åè®¸è¿ç¨ç»å½ root ç¨æ·è´¦æ·è¯´æ æ®éç¨æ· è¶çº§ç®¡çå å®è£æ¶åå»ºçç³»ç»ç¨æ· ç»è´¦æ·è¯´æ ç§æç» æ åç» è´¦æ·ç³»ç»æä»¶è¯´æ /etc/passwd /etc/shadow /etc/group /etc/gshadow è´¦æ·ç®¡çå¸¸ç¨å½ä»¤ å¢å ç¨æ· ä¿®æ¹ç¨æ· å é¤ç¨æ· ç»è´¦æ·ç»´æ¤ å£ä»¤ç»´æ¤ ç¨æ·åç»ç¶æ",content:"# Linux ç¨æ·åç»ç®¡ç\n\n\n# æ¦è¿°\n\nLinux æä½ç³»ç»æ¯ä¸ä¸ªå¤ç¨æ·æä½ç³»ç»ï¼å®åè®¸å¤ç¨æ·åæ¶ç»å½å°ç³»ç»ä¸å¹¶ä½¿ç¨èµæºãç³»ç»ä¼æ ¹æ®è´¦æ·æ¥åºåæ¯ä¸ªç¨æ·çæä»¶ï¼è¿ç¨ï¼ä»»å¡åå·¥ä½ç¯å¢ï¼ä½¿å¾æ¯ä¸ªç¨æ·å·¥ä½é½ä¸åå¹²æ°ã\n\n\n# ä½¿ç¨ Root ç¨æ·\n\nå¨å®éçäº§æä½ä¸­ï¼æä»¬åºæ¬ä¸é½æ¯ä½¿ç¨è¶çº§ç®¡çåè´¦æ·æä½ Linux ç³»ç»ï¼ä¹å°±æ¯ Root ç¨æ·ï¼Linux ç³»ç»é»è®¤æ¯å³é­ Root è´¦æ·çï¼æä»¬éè¦ä¸º Root ç¨æ·è®¾ç½®ä¸ä¸ªåå§å¯ç ä»¥æ¹ä¾¿æä»¬ä½¿ç¨ã\n\n\n# è®¾ç½® Root è´¦æ·å¯ç \n\nsudo passwd root\n\n\n\n# åæ¢å° Root\n\nsu\n\n\n\n# è®¾ç½®åè®¸è¿ç¨ç»å½ root\n\nvi /etc/ssh/sshd_config\n\n# Authentication:\nLoginGraceTime 120\n#PermitRootLogin without-password     //æ³¨éæ­¤è¡\nPermitRootLogin yes                             //å å¥æ­¤è¡\nStrictModes yes\n\néå¯æå¡\nsystemctl restart sshd.service\n\n\n\n# ç¨æ·è´¦æ·è¯´æ\n\n\n# æ®éç¨æ·\n\næ®éç¨æ·å¨ç³»ç»ä¸çä»»å¡æ¯è¿è¡æ®éæä½\n\n\n# è¶çº§ç®¡çå\n\nç®¡çåå¨ç³»ç»ä¸çä»»å¡æ¯å¯¹æ®éç¨æ·åæ´ä¸ªç³»ç»è¿è¡ç®¡çãå¯¹ç³»ç»å·æç»å¯¹çæ§å¶æï¼è½å¤å¯¹ç³»ç»è¿è¡ä¸åæä½ãç¨ root è¡¨ç¤ºï¼root ç¨æ·å¨ç³»ç»ä¸­æ¥ææé«æéï¼é»è®¤ä¸ Ubuntu ç¨æ·ç root ç¨æ·æ¯ä¸è½ç»å½çã\n\n\n# å®è£æ¶åå»ºçç³»ç»ç¨æ·\n\næ­¤ç¨æ·åå»ºæ¶è¢«æ·»å å° admin ç»ä¸­ï¼å¨ Ubuntu ä¸­ï¼admin ç»ä¸­çç¨æ·é»è®¤æ¯å¯ä»¥ä½¿ç¨ sudo å½ä»¤æ¥æ§è¡åªæç®¡çåæè½æ§è¡çå½ä»¤çãå¦æä¸ä½¿ç¨ sudo å°±æ¯ä¸ä¸ªæ®éç¨æ·ã\n\n\n# ç»è´¦æ·è¯´æ\n\n\n# ç§æç»\n\nå½åå»ºä¸ä¸ªç¨æ·æ¶æ²¡ææå®å±äºåªä¸ªç»ï¼Linux å°±ä¼å»ºç«ä¸ä¸ªä¸ç¨æ·ååçç§æç»ï¼æ­¤ç§æç»åªå«æè¯¥ç¨æ·ã\n\n\n# æ åç»\n\nå½åå»ºä¸ä¸ªç¨æ·æ¶å¯ä»¥éå®ä¸ä¸ªæ åç»ï¼å¦æä¸ä¸ªç¨æ·åæ¶å±äºå¤ä¸ªç»æ¶ï¼ç»å½åæå±çç»ä¸ºä¸»ç»ï¼å¶ä»çä¸ºéå ç»ã\n\n\n# è´¦æ·ç³»ç»æä»¶è¯´æ\n\n\n# /etc/passwd\n\næ¯ä¸è¡ä»£è¡¨ä¸ä¸ªè´¦å·ï¼ä¼å¤è´¦å·æ¯ç³»ç»æ­£å¸¸è¿è¡æå¿é¡»çï¼ä¾å¦ binï¼nobody æ¯è¡å®ä¹ä¸ä¸ªç¨æ·è´¦æ·ï¼æ­¤æä»¶å¯¹ææç¨æ·å¯è¯»ãæ¯è¡è´¦æ·åå«å¦ä¸ä¿¡æ¯ï¼\n\nroot:x:0:0:root:/root:/bin/bash\n\n\n * ç¨æ·åï¼ å°±æ¯è´¦å·ï¼ç¨æ¥å¯¹åº UIDï¼root UID æ¯ 0ã\n * å£ä»¤ï¼ å¯ç ï¼æ©æ UNIX ç³»ç»å¯ç å­å¨æ­¤å­æ®µï¼ç±äºæ­¤æä»¶ææç¨æ·é½å¯ä»¥è¯»åï¼å¯ç å®¹ææ³é²ï¼åæ¥è¿ä¸ªå­æ®µæ°æ®å°±å­æ¾å° /etc/shadow ä¸­ï¼è¿éåªè½çå° Xã\n * ç¨æ·æ ç¤ºå·ï¼UIDï¼ï¼ ç³»ç»åå¯ä¸ï¼root ç¨æ·ç UID ä¸º 0ï¼æ®éç¨æ·ä» 1000 å¼å§ï¼1-999 æ¯ç³»ç»çæ åè´¦æ·ï¼500-65536 æ¯å¯ç»éè´¦å·ã\n * ç»æ ç¤ºå·ï¼GIDï¼ï¼ ä¸ /etc/group ç¸å³ç¨æ¥è§å®ç»åå GID ç¸å¯¹åºã\n * æ³¨éï¼ æ³¨éè´¦å·\n * å®¿ä¸»ç®å½ï¼ä¸»æä»¶å¤¹ï¼ï¼ ç¨æ·ç»å½ç³»ç»åæè¿å¥çç®å½ root å¨ /root/itcast\n * å½ä»¤è§£éå¨ï¼shellï¼ï¼ æå®è¯¥ç¨æ·ä½¿ç¨ç shell ï¼é»è®¤çæ¯ /bin/bash\n\n\n# /etc/shadow\n\nä¸ºäºå¢å ç³»ç»çå®å¨æ§ï¼ç¨æ·å£ä»¤éå¸¸ç¨ shadow passwords ä¿æ¤ãåªæ root å¯è¯»ãæ¯è¡åå«å¦ä¸ä¿¡æ¯ï¼\n\nroot:$6$Reu571.V$Ci/kd.OTzaSGU.TagZ5KjYx2MLzQv2IkZ24E1.yeTT3Pp4o/yniTjus/rRaJ92Z18MVy6suf1W5uxxurqssel.:17465:0:99999:7:::\n\n\n * è´¦å·åç§°ï¼ éè¦å /etc/passwd ä¸è´ã\n * å¯ç ï¼ ç»è¿å å¯ï¼è½ç¶å å¯ï¼ä½ä¸è¡¨ç¤ºä¸ä¼è¢«ç ´è§£ï¼è¯¥æä»¶é»è®¤æéå¦ä¸ï¼\n   * -rw------- 1 root root 1560 Oct 26 17:20 passwd-\n   * åªærootè½é½è¯»å\n * æè¿ä¿®æ¹å¯ç æ¥æï¼ ä»1970-1-1èµ·ï¼å°ç¨æ·æåä¸æ¬¡æ´æ¹å£ä»¤çå¤©æ°\n * å¯ç æå°æ¶é´é´éï¼ ä»1970-1-1èµ·ï¼å°ç¨æ·å¯ä»¥æ´æ¹å£ä»¤çå¤©æ°\n * å¯ç æå¤§æ¶é´é´éï¼ ä»1970-1-1èµ·ï¼å¿é¡»æ´æ¹çå£ä»¤å¤©æ°\n * å¯ç å°æè­¦åæ¶é´ï¼ å¨å£ä»¤è¿æä¹åå å¤©éç¥\n * å¯ç å°æåè´¦å·å®½éæ¶é´\n * å¯ç å°æç¦ç¨è´¦æ·æ¶é´ï¼ å¨ç¨æ·å£ä»¤è¿æåå°ç¦ç¨è´¦æ·çå¤©æ°\n * ä¿ç\n\n\n# /etc/group\n\nç¨æ·ç»çéç½®æä»¶\n\nroot:x:0:\n\n\n * ç¨æ·ç»åç§°\n * ç¨æ·ç»å¯ç ï¼ ç»ç¨æ·ç»ç®¡çåä½¿ç¨ï¼éå¸¸ä¸ç¨\n * GIDï¼ ç¨æ·ç»çID\n * æ­¤ç¨æ·æ¯æçè´¦å·åç§°ï¼ ä¸ä¸ªè´¦å·å¯ä»¥å å¥å¤ä¸ªç¨æ·ç»ï¼ä¾å¦æ³è¦ itcast å å¥ root è¿ä¸ªç¨æ·ç»ï¼å°è¯¥è´¦å·å¡«å¥è¯¥å­æ®µå³å¯ root:x:0:root, icast å°ç¨æ·è¿è¡åç»æ¯ Linux å¯¹ç¨æ·è¿è¡ç®¡çåæ§å¶è®¿é®æéçä¸ç§ææ®µãä¸ä¸ªä¸­å¯ä»¥æå¤ä¸ªç¨æ·ï¼ä¸ä¸ªç¨æ·å¯ä»¥åæ¶å±äºå¤ä¸ªç»ãè¯¥æä»¶å¯¹ææç¨æ·å¯è¯»ã\n\n\n# /etc/gshadow\n\nè¯¥æä»¶ç¨æ·å®ä¹ç¨æ·ç»å£ä»¤ï¼ç»ç®¡çåç­ä¿¡æ¯åªærootç¨æ·å¯è¯»ã\n\nroot:\\*::\n\n\n * ç¨æ·ç»å\n * å¯ç å\n * ç¨æ·ç»ç®¡çåçè´¦å·\n * ç¨æ·ç»æå±è´¦å·\n\n\n# è´¦æ·ç®¡çå¸¸ç¨å½ä»¤\n\n\n# å¢å ç¨æ·\n\nuseradd ç¨æ·å\nuseradd -u (UIDå·)\nuseradd -p (å£ä»¤)\nuseradd -g (åç»)\nuseradd -s (SHELL)\nuseradd -d (ç¨æ·ç®å½)\n\n\nå¦ï¼useradd centos\n\nå¢å ç¨æ·åä¸º centos çè´¦æ·\n\n\n# ä¿®æ¹ç¨æ·\n\nusermod -u (æ°UID)\nusermod -d (ç¨æ·ç®å½)\nusermod -g (ç»å)\nusermod -s (SHELL)\nusermod -p (æ°å£ä»¤)\nusermod -l (æ°ç»å½å)\nusermod -L (éå®ç¨æ·è´¦å·å¯ç )\nusermod -U (è§£éç¨æ·è´¦å·)\n\n\nå¦ï¼usermod -u 1024 -g group2 -G root centos\n\nå° centos ç¨æ· uid ä¿®æ¹ä¸º 1024ï¼é»è®¤ç»æ¹ä¸ºç³»ç»ä¸­å·²ç»å­å¨ç group2ï¼å¹¶ä¸å å¥å°ç³»ç»ç®¡çåç»\n\n\n# å é¤ç¨æ·\n\nuserdel ç¨æ·å (å é¤ç¨æ·è´¦å·)\nuserdel -r å é¤è´¦å·æ¶åæ¶å é¤ç®å½\n\n\nå¦ï¼userdel -r centos\n\nå é¤ç¨æ·åä¸º centos çè´¦æ·å¹¶åæ¶å é¤ centos çç¨æ·ç®å½\n\n\n# ç»è´¦æ·ç»´æ¤\n\ngroupadd ç»è´¦æ·å (åå»ºæ°ç»)\ngroupadd -g æå®ç»GID\ngroupmod -g æ´æ¹ç»çGID\ngroupmod -n æ´æ¹ç»è´¦æ·å\ngroupdel ç»è´¦æ·å (å é¤æå®ç»è´¦æ·)\n\n\n\n# å£ä»¤ç»´æ¤\n\npasswd ç¨æ·è´¦æ·å (è®¾ç½®ç¨æ·å£ä»¤)\npasswd -l ç¨æ·è´¦æ·å (éå®ç¨æ·è´¦æ·)\npasswd -u ç¨æ·è´¦æ·å (è§£éç¨æ·è´¦æ·)\npasswd -d ç¨æ·è´¦æ·å (å é¤è´¦æ·å£ä»¤)\ngpasswd -a ç¨æ·è´¦æ·å ç»è´¦æ·å (å°æå®ç¨æ·æ·»å å°æå®ç»)\ngpasswd -d ç¨æ·è´¦æ·å ç»è´¦æ·å (å°ç¨æ·ä»æå®ç»ä¸­å é¤)\ngpasswd -A ç¨æ·è´¦æ·å ç»è´¦æ·å (å°ç¨æ·æå®ä¸ºç»çç®¡çå)\n\n\n\n# ç¨æ·åç»ç¶æ\n\nsu ç¨æ·å(åæ¢ç¨æ·è´¦æ·)\nid ç¨æ·å(æ¾ç¤ºç¨æ·çUIDï¼GID)\nwhoami (æ¾ç¤ºå½åç¨æ·åç§°)\ngroups (æ¾ç¤ºç¨æ·æå±ç»)\n",normalizedContent:"# linux ç¨æ·åç»ç®¡ç\n\n\n# æ¦è¿°\n\nlinux æä½ç³»ç»æ¯ä¸ä¸ªå¤ç¨æ·æä½ç³»ç»ï¼å®åè®¸å¤ç¨æ·åæ¶ç»å½å°ç³»ç»ä¸å¹¶ä½¿ç¨èµæºãç³»ç»ä¼æ ¹æ®è´¦æ·æ¥åºåæ¯ä¸ªç¨æ·çæä»¶ï¼è¿ç¨ï¼ä»»å¡åå·¥ä½ç¯å¢ï¼ä½¿å¾æ¯ä¸ªç¨æ·å·¥ä½é½ä¸åå¹²æ°ã\n\n\n# ä½¿ç¨ root ç¨æ·\n\nå¨å®éçäº§æä½ä¸­ï¼æä»¬åºæ¬ä¸é½æ¯ä½¿ç¨è¶çº§ç®¡çåè´¦æ·æä½ linux ç³»ç»ï¼ä¹å°±æ¯ root ç¨æ·ï¼linux ç³»ç»é»è®¤æ¯å³é­ root è´¦æ·çï¼æä»¬éè¦ä¸º root ç¨æ·è®¾ç½®ä¸ä¸ªåå§å¯ç ä»¥æ¹ä¾¿æä»¬ä½¿ç¨ã\n\n\n# è®¾ç½® root è´¦æ·å¯ç \n\nsudo passwd root\n\n\n\n# åæ¢å° root\n\nsu\n\n\n\n# è®¾ç½®åè®¸è¿ç¨ç»å½ root\n\nvi /etc/ssh/sshd_config\n\n# authentication:\nlogingracetime 120\n#permitrootlogin without-password     //æ³¨éæ­¤è¡\npermitrootlogin yes                             //å å¥æ­¤è¡\nstrictmodes yes\n\néå¯æå¡\nsystemctl restart sshd.service\n\n\n\n# ç¨æ·è´¦æ·è¯´æ\n\n\n# æ®éç¨æ·\n\næ®éç¨æ·å¨ç³»ç»ä¸çä»»å¡æ¯è¿è¡æ®éæä½\n\n\n# è¶çº§ç®¡çå\n\nç®¡çåå¨ç³»ç»ä¸çä»»å¡æ¯å¯¹æ®éç¨æ·åæ´ä¸ªç³»ç»è¿è¡ç®¡çãå¯¹ç³»ç»å·æç»å¯¹çæ§å¶æï¼è½å¤å¯¹ç³»ç»è¿è¡ä¸åæä½ãç¨ root è¡¨ç¤ºï¼root ç¨æ·å¨ç³»ç»ä¸­æ¥ææé«æéï¼é»è®¤ä¸ ubuntu ç¨æ·ç root ç¨æ·æ¯ä¸è½ç»å½çã\n\n\n# å®è£æ¶åå»ºçç³»ç»ç¨æ·\n\næ­¤ç¨æ·åå»ºæ¶è¢«æ·»å å° admin ç»ä¸­ï¼å¨ ubuntu ä¸­ï¼admin ç»ä¸­çç¨æ·é»è®¤æ¯å¯ä»¥ä½¿ç¨ sudo å½ä»¤æ¥æ§è¡åªæç®¡çåæè½æ§è¡çå½ä»¤çãå¦æä¸ä½¿ç¨ sudo å°±æ¯ä¸ä¸ªæ®éç¨æ·ã\n\n\n# ç»è´¦æ·è¯´æ\n\n\n# ç§æç»\n\nå½åå»ºä¸ä¸ªç¨æ·æ¶æ²¡ææå®å±äºåªä¸ªç»ï¼linux å°±ä¼å»ºç«ä¸ä¸ªä¸ç¨æ·ååçç§æç»ï¼æ­¤ç§æç»åªå«æè¯¥ç¨æ·ã\n\n\n# æ åç»\n\nå½åå»ºä¸ä¸ªç¨æ·æ¶å¯ä»¥éå®ä¸ä¸ªæ åç»ï¼å¦æä¸ä¸ªç¨æ·åæ¶å±äºå¤ä¸ªç»æ¶ï¼ç»å½åæå±çç»ä¸ºä¸»ç»ï¼å¶ä»çä¸ºéå ç»ã\n\n\n# è´¦æ·ç³»ç»æä»¶è¯´æ\n\n\n# /etc/passwd\n\næ¯ä¸è¡ä»£è¡¨ä¸ä¸ªè´¦å·ï¼ä¼å¤è´¦å·æ¯ç³»ç»æ­£å¸¸è¿è¡æå¿é¡»çï¼ä¾å¦ binï¼nobody æ¯è¡å®ä¹ä¸ä¸ªç¨æ·è´¦æ·ï¼æ­¤æä»¶å¯¹ææç¨æ·å¯è¯»ãæ¯è¡è´¦æ·åå«å¦ä¸ä¿¡æ¯ï¼\n\nroot:x:0:0:root:/root:/bin/bash\n\n\n * ç¨æ·åï¼ å°±æ¯è´¦å·ï¼ç¨æ¥å¯¹åº uidï¼root uid æ¯ 0ã\n * å£ä»¤ï¼ å¯ç ï¼æ©æ unix ç³»ç»å¯ç å­å¨æ­¤å­æ®µï¼ç±äºæ­¤æä»¶ææç¨æ·é½å¯ä»¥è¯»åï¼å¯ç å®¹ææ³é²ï¼åæ¥è¿ä¸ªå­æ®µæ°æ®å°±å­æ¾å° /etc/shadow ä¸­ï¼è¿éåªè½çå° xã\n * ç¨æ·æ ç¤ºå·ï¼uidï¼ï¼ ç³»ç»åå¯ä¸ï¼root ç¨æ·ç uid ä¸º 0ï¼æ®éç¨æ·ä» 1000 å¼å§ï¼1-999 æ¯ç³»ç»çæ åè´¦æ·ï¼500-65536 æ¯å¯ç»éè´¦å·ã\n * ç»æ ç¤ºå·ï¼gidï¼ï¼ ä¸ /etc/group ç¸å³ç¨æ¥è§å®ç»åå gid ç¸å¯¹åºã\n * æ³¨éï¼ æ³¨éè´¦å·\n * å®¿ä¸»ç®å½ï¼ä¸»æä»¶å¤¹ï¼ï¼ ç¨æ·ç»å½ç³»ç»åæè¿å¥çç®å½ root å¨ /root/itcast\n * å½ä»¤è§£éå¨ï¼shellï¼ï¼ æå®è¯¥ç¨æ·ä½¿ç¨ç shell ï¼é»è®¤çæ¯ /bin/bash\n\n\n# /etc/shadow\n\nä¸ºäºå¢å ç³»ç»çå®å¨æ§ï¼ç¨æ·å£ä»¤éå¸¸ç¨ shadow passwords ä¿æ¤ãåªæ root å¯è¯»ãæ¯è¡åå«å¦ä¸ä¿¡æ¯ï¼\n\nroot:$6$reu571.v$ci/kd.otzasgu.tagz5kjyx2mlzqv2ikz24e1.yett3pp4o/ynitjus/rraj92z18mvy6suf1w5uxxurqssel.:17465:0:99999:7:::\n\n\n * è´¦å·åç§°ï¼ éè¦å /etc/passwd ä¸è´ã\n * å¯ç ï¼ ç»è¿å å¯ï¼è½ç¶å å¯ï¼ä½ä¸è¡¨ç¤ºä¸ä¼è¢«ç ´è§£ï¼è¯¥æä»¶é»è®¤æéå¦ä¸ï¼\n   * -rw------- 1 root root 1560 oct 26 17:20 passwd-\n   * åªærootè½é½è¯»å\n * æè¿ä¿®æ¹å¯ç æ¥æï¼ ä»1970-1-1èµ·ï¼å°ç¨æ·æåä¸æ¬¡æ´æ¹å£ä»¤çå¤©æ°\n * å¯ç æå°æ¶é´é´éï¼ ä»1970-1-1èµ·ï¼å°ç¨æ·å¯ä»¥æ´æ¹å£ä»¤çå¤©æ°\n * å¯ç æå¤§æ¶é´é´éï¼ ä»1970-1-1èµ·ï¼å¿é¡»æ´æ¹çå£ä»¤å¤©æ°\n * å¯ç å°æè­¦åæ¶é´ï¼ å¨å£ä»¤è¿æä¹åå å¤©éç¥\n * å¯ç å°æåè´¦å·å®½éæ¶é´\n * å¯ç å°æç¦ç¨è´¦æ·æ¶é´ï¼ å¨ç¨æ·å£ä»¤è¿æåå°ç¦ç¨è´¦æ·çå¤©æ°\n * ä¿ç\n\n\n# /etc/group\n\nç¨æ·ç»çéç½®æä»¶\n\nroot:x:0:\n\n\n * ç¨æ·ç»åç§°\n * ç¨æ·ç»å¯ç ï¼ ç»ç¨æ·ç»ç®¡çåä½¿ç¨ï¼éå¸¸ä¸ç¨\n * gidï¼ ç¨æ·ç»çid\n * æ­¤ç¨æ·æ¯æçè´¦å·åç§°ï¼ ä¸ä¸ªè´¦å·å¯ä»¥å å¥å¤ä¸ªç¨æ·ç»ï¼ä¾å¦æ³è¦ itcast å å¥ root è¿ä¸ªç¨æ·ç»ï¼å°è¯¥è´¦å·å¡«å¥è¯¥å­æ®µå³å¯ root:x:0:root, icast å°ç¨æ·è¿è¡åç»æ¯ linux å¯¹ç¨æ·è¿è¡ç®¡çåæ§å¶è®¿é®æéçä¸ç§ææ®µãä¸ä¸ªä¸­å¯ä»¥æå¤ä¸ªç¨æ·ï¼ä¸ä¸ªç¨æ·å¯ä»¥åæ¶å±äºå¤ä¸ªç»ãè¯¥æä»¶å¯¹ææç¨æ·å¯è¯»ã\n\n\n# /etc/gshadow\n\nè¯¥æä»¶ç¨æ·å®ä¹ç¨æ·ç»å£ä»¤ï¼ç»ç®¡çåç­ä¿¡æ¯åªærootç¨æ·å¯è¯»ã\n\nroot:\\*::\n\n\n * ç¨æ·ç»å\n * å¯ç å\n * ç¨æ·ç»ç®¡çåçè´¦å·\n * ç¨æ·ç»æå±è´¦å·\n\n\n# è´¦æ·ç®¡çå¸¸ç¨å½ä»¤\n\n\n# å¢å ç¨æ·\n\nuseradd ç¨æ·å\nuseradd -u (uidå·)\nuseradd -p (å£ä»¤)\nuseradd -g (åç»)\nuseradd -s (shell)\nuseradd -d (ç¨æ·ç®å½)\n\n\nå¦ï¼useradd centos\n\nå¢å ç¨æ·åä¸º centos çè´¦æ·\n\n\n# ä¿®æ¹ç¨æ·\n\nusermod -u (æ°uid)\nusermod -d (ç¨æ·ç®å½)\nusermod -g (ç»å)\nusermod -s (shell)\nusermod -p (æ°å£ä»¤)\nusermod -l (æ°ç»å½å)\nusermod -l (éå®ç¨æ·è´¦å·å¯ç )\nusermod -u (è§£éç¨æ·è´¦å·)\n\n\nå¦ï¼usermod -u 1024 -g group2 -g root centos\n\nå° centos ç¨æ· uid ä¿®æ¹ä¸º 1024ï¼é»è®¤ç»æ¹ä¸ºç³»ç»ä¸­å·²ç»å­å¨ç group2ï¼å¹¶ä¸å å¥å°ç³»ç»ç®¡çåç»\n\n\n# å é¤ç¨æ·\n\nuserdel ç¨æ·å (å é¤ç¨æ·è´¦å·)\nuserdel -r å é¤è´¦å·æ¶åæ¶å é¤ç®å½\n\n\nå¦ï¼userdel -r centos\n\nå é¤ç¨æ·åä¸º centos çè´¦æ·å¹¶åæ¶å é¤ centos çç¨æ·ç®å½\n\n\n# ç»è´¦æ·ç»´æ¤\n\ngroupadd ç»è´¦æ·å (åå»ºæ°ç»)\ngroupadd -g æå®ç»gid\ngroupmod -g æ´æ¹ç»çgid\ngroupmod -n æ´æ¹ç»è´¦æ·å\ngroupdel ç»è´¦æ·å (å é¤æå®ç»è´¦æ·)\n\n\n\n# å£ä»¤ç»´æ¤\n\npasswd ç¨æ·è´¦æ·å (è®¾ç½®ç¨æ·å£ä»¤)\npasswd -l ç¨æ·è´¦æ·å (éå®ç¨æ·è´¦æ·)\npasswd -u ç¨æ·è´¦æ·å (è§£éç¨æ·è´¦æ·)\npasswd -d ç¨æ·è´¦æ·å (å é¤è´¦æ·å£ä»¤)\ngpasswd -a ç¨æ·è´¦æ·å ç»è´¦æ·å (å°æå®ç¨æ·æ·»å å°æå®ç»)\ngpasswd -d ç¨æ·è´¦æ·å ç»è´¦æ·å (å°ç¨æ·ä»æå®ç»ä¸­å é¤)\ngpasswd -a ç¨æ·è´¦æ·å ç»è´¦æ·å (å°ç¨æ·æå®ä¸ºç»çç®¡çå)\n\n\n\n# ç¨æ·åç»ç¶æ\n\nsu ç¨æ·å(åæ¢ç¨æ·è´¦æ·)\nid ç¨æ·å(æ¾ç¤ºç¨æ·çuidï¼gid)\nwhoami (æ¾ç¤ºå½åç¨æ·åç§°)\ngroups (æ¾ç¤ºç¨æ·æå±ç»)\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux æä»¶æéç®¡ç",frontmatter:{title:"Linux æä»¶æéç®¡ç",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/c29423/"},regularPath:"/02.Linux/01.Linux/12.Linux%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html",relativePath:"02.Linux/01.Linux/12.Linux æä»¶æéç®¡ç.md",key:"v-7bc439b8",path:"/pages/c29423/",headers:[{level:2,title:"æ¥çæä»¶åç®å½çæé",slug:"æ¥çæä»¶åç®å½çæé",normalizedTitle:"æ¥çæä»¶åç®å½çæé",charIndex:19},{level:3,title:"ææ¡£ç±»å",slug:"ææ¡£ç±»å",normalizedTitle:"ææ¡£ç±»å",charIndex:391},{level:3,title:"è¿æ¥æ°",slug:"è¿æ¥æ°",normalizedTitle:"è¿æ¥æ°",charIndex:404},{level:3,title:"ææ¡£æå±ç¨æ·åæå±ç»",slug:"ææ¡£æå±ç¨æ·åæå±ç»",normalizedTitle:"ææ¡£æå±ç¨æ·åæå±ç»",charIndex:708},{level:3,title:"ææ¡£å¤§å°",slug:"ææ¡£å¤§å°",normalizedTitle:"ææ¡£å¤§å°",charIndex:427},{level:2,title:"æ´æ¹æä½æé",slug:"æ´æ¹æä½æé",normalizedTitle:"æ´æ¹æä½æé",charIndex:774},{level:3,title:"chown",slug:"chown",normalizedTitle:"chown",charIndex:785},{level:3,title:"chmod",slug:"chmod",normalizedTitle:"chmod",charIndex:937},{level:2,title:"æ°å­è®¾å®æ³",slug:"æ°å­è®¾å®æ³",normalizedTitle:"æ°å­è®¾å®æ³",charIndex:1440}],headersStr:"æ¥çæä»¶åç®å½çæé ææ¡£ç±»å è¿æ¥æ° ææ¡£æå±ç¨æ·åæå±ç» ææ¡£å¤§å° æ´æ¹æä½æé chown chmod æ°å­è®¾å®æ³",content:"# Linux æä»¶æéç®¡ç\n\n\n# æ¥çæä»¶åç®å½çæé\n\nls âalä½¿ç¨ ls ä¸å¸¦åæ°åªæ¾ç¤ºæä»¶åç§°ï¼éè¿ls âal` å¯ä»¥æ¾ç¤ºæä»¶æèç®å½çæéä¿¡æ¯ã\n\nls -l æä»¶å æ¾ç¤ºä¿¡æ¯åæ¬ï¼æä»¶ç±»å (d ç®å½ï¼- æ®éæä»¶ï¼l é¾æ¥æä»¶)ï¼æä»¶æéï¼æä»¶çç¨æ·ï¼æä»¶çæå±ç»ï¼æä»¶çå¤§å°ï¼æä»¶çåå»ºæ¶é´ï¼æä»¶çåç§°\n\n-rw-r--r-- 1 ivoov ivoov 675 Oct 26 17:20 .profile\n\n\n * -ï¼æ®éæä»¶\n * rw-ï¼è¯´æç¨æ· ivoov æè¯»åæéï¼æ²¡æè¿è¡æé\n * r--ï¼è¡¨ç¤ºç¨æ·ç» ivoov åªæè¯»æéï¼æ²¡æååè¿è¡çæé\n * r--ï¼å¶ä»ç¨æ·åªæè¯»æéï¼æ²¡æåæéåè¿è¡çæé\n\n-RW-R--R--   1     IVOOV    IVOOV   675    OCT 26 17:20   .PROFILE\nææ¡£ç±»ååæé      è¿æ¥æ°   ææ¡£æå±ç¨æ·   ææ¡£æå±ç»   ææ¡£å¤§å°   ææ¡£æåè¢«ä¿®æ¹æ¥æ      ææ¡£åç§°\n\n-      RW-             R--                R--\nææ¡£ç±»å   ææ¡£ææèæéï¼userï¼   ææ¡£æå±ç¨æ·ç»æéï¼groupï¼   å¶ä»ç¨æ·æéï¼otherï¼\n\n\n# ææ¡£ç±»å\n\n * d è¡¨ç¤ºç®å½\n * l è¡¨ç¤ºè½¯è¿æ¥\n * â è¡¨ç¤ºæä»¶\n * c è¡¨ç¤ºä¸²è¡ç«¯å£å­ç¬¦è®¾å¤æä»¶\n * b è¡¨ç¤ºå¯ä¾å­å¨çåè®¾å¤æä»¶\n * ä½ä¸çå­ç¬¦ 3 ä¸ªå­ç¬¦ä¸ºä¸ç»ãr åªè¯»ï¼w å¯åï¼x å¯æ§è¡ï¼- è¡¨ç¤ºæ æ­¤æé\n\n\n# è¿æ¥æ°\n\nææå¤å°ä¸ªæä»¶æååä¸ä¸ªç´¢å¼èç¹ã\n\n\n# ææ¡£æå±ç¨æ·åæå±ç»\n\nå°±æ¯ææ¡£å±äºåªä¸ªç¨æ·åç¨æ·ç»ãæä»¶æå±ç¨æ·åç»æ¯å¯ä»¥æ´æ¹ç\n\n\n# ææ¡£å¤§å°\n\né»è®¤æ¯ bytes\n\n\n# æ´æ¹æä½æé\n\n\n# chown\n\næ¯ change owner çææï¼ä¸»è¦ä½ç¨å°±æ¯æ¹åæä»¶æèç®å½ææèï¼ææèåå«ç¨æ·åç¨æ·ç»\n\nchown [-R] ç¨æ·åç§° æä»¶æèç®å½\nchown [-R] ç¨æ·åç§° ç¨æ·ç»åç§° æä»¶æç®å½\n\n\n-Rï¼è¿è¡éå½å¼çæéæ´æ¹ï¼å°ç®å½ä¸çæææä»¶ãå­ç®å½æ´æ°ä¸ºæå®ç¨æ·ç»æé\n\n\n# chmod\n\næ¹åè®¿é®æé\n\nchmod [who] [+ | - | =] [mode] æä»¶å\n\n\n# who\n\nè¡¨ç¤ºæä½å¯¹è±¡å¯ä»¥æ¯ä»¥ä¸å­æ¯çä¸ä¸ªæèç»å\n\n * uï¼ç¨æ· user\n * gï¼ç¨æ·ç» group\n * oï¼è¡¨ç¤ºå¶ä»ç¨æ·\n * aï¼è¡¨ç¤ºææç¨æ·æ¯ç³»ç»é»è®¤ç\n\n# æä½ç¬¦å·\n\n * +ï¼è¡¨ç¤ºæ·»å æä¸ªæé\n * -ï¼è¡¨ç¤ºåæ¶æä¸ªæé\n * =ï¼èµäºç»å®çæéï¼åæ¶ææ¡£ä»¥åçæææé\n\n# mode\n\nè¡¨ç¤ºå¯æ§è¡çæéï¼å¯ä»¥æ¯ rãwãx\n\n# æä»¶å\n\næä»¶åå¯ä»¥ä½¿ç©ºæ ¼åå¼çæä»¶åè¡¨\n\n# ç¤ºä¾\n\nivoov@localhost:~$ ls -al test.txt \n-rw-rw-r-- 1 ivoov ivoov 6 Nov  2 21:47 test.txt\nivoov@localhost:~$ chmod u=rwx,g+r,o+r test.txt \nivoov@localhost:~$ ls -al test.txt \n-rwxrw-r-- 1 ivoov ivoov 6 Nov  2 21:47 test.txt\nivoov@localhost:~$\n\n\n\n# æ°å­è®¾å®æ³\n\næ°å­è®¾å®æ³ä¸­æ°å­è¡¨ç¤ºçå«ä¹\n\n * 0 è¡¨ç¤ºæ²¡æä»»ä½æé\n * 1 è¡¨ç¤ºæå¯æ§è¡æé = x\n * 2 è¡¨ç¤ºæå¯åæé = w\n * 4 è¡¨ç¤ºæå¯è¯»æé = r\n\nä¹å¯ä»¥ç¨æ°å­æ¥è¡¨ç¤ºæéå¦ chmod 755 file_name\n\nR W X   R â X   R - X\n4 2 1   4 - 1   4 - 1\nuser    group   others\n\nè¥è¦ rwx å±æ§å 4+2+1=7\n\nè¥è¦ rw- å±æ§å 4+2=6\n\nè¥è¦ r-x å±æ§å 4+1=5\n\nivoov@localhost:~$ chmod 777 test.txt \nivoov@localhost:~$ ls -al test.txt \n-rwxrwxrwx 1 ivoov ivoov 6 Nov  2 21:47 test.txt\n\nivoov@localhost:~$ chmod 770 test.txt \nivoov@localhost:~$ ls -al test.txt \n-rwxrwx--- 1 ivoov ivoov 6 Nov  2 21:47 test.txt\n",normalizedContent:"# linux æä»¶æéç®¡ç\n\n\n# æ¥çæä»¶åç®å½çæé\n\nls âalä½¿ç¨ ls ä¸å¸¦åæ°åªæ¾ç¤ºæä»¶åç§°ï¼éè¿ls âal` å¯ä»¥æ¾ç¤ºæä»¶æèç®å½çæéä¿¡æ¯ã\n\nls -l æä»¶å æ¾ç¤ºä¿¡æ¯åæ¬ï¼æä»¶ç±»å (d ç®å½ï¼- æ®éæä»¶ï¼l é¾æ¥æä»¶)ï¼æä»¶æéï¼æä»¶çç¨æ·ï¼æä»¶çæå±ç»ï¼æä»¶çå¤§å°ï¼æä»¶çåå»ºæ¶é´ï¼æä»¶çåç§°\n\n-rw-r--r-- 1 ivoov ivoov 675 oct 26 17:20 .profile\n\n\n * -ï¼æ®éæä»¶\n * rw-ï¼è¯´æç¨æ· ivoov æè¯»åæéï¼æ²¡æè¿è¡æé\n * r--ï¼è¡¨ç¤ºç¨æ·ç» ivoov åªæè¯»æéï¼æ²¡æååè¿è¡çæé\n * r--ï¼å¶ä»ç¨æ·åªæè¯»æéï¼æ²¡æåæéåè¿è¡çæé\n\n-rw-r--r--   1     ivoov    ivoov   675    oct 26 17:20   .profile\nææ¡£ç±»ååæé      è¿æ¥æ°   ææ¡£æå±ç¨æ·   ææ¡£æå±ç»   ææ¡£å¤§å°   ææ¡£æåè¢«ä¿®æ¹æ¥æ      ææ¡£åç§°\n\n-      rw-             r--                r--\nææ¡£ç±»å   ææ¡£ææèæéï¼userï¼   ææ¡£æå±ç¨æ·ç»æéï¼groupï¼   å¶ä»ç¨æ·æéï¼otherï¼\n\n\n# ææ¡£ç±»å\n\n * d è¡¨ç¤ºç®å½\n * l è¡¨ç¤ºè½¯è¿æ¥\n * â è¡¨ç¤ºæä»¶\n * c è¡¨ç¤ºä¸²è¡ç«¯å£å­ç¬¦è®¾å¤æä»¶\n * b è¡¨ç¤ºå¯ä¾å­å¨çåè®¾å¤æä»¶\n * ä½ä¸çå­ç¬¦ 3 ä¸ªå­ç¬¦ä¸ºä¸ç»ãr åªè¯»ï¼w å¯åï¼x å¯æ§è¡ï¼- è¡¨ç¤ºæ æ­¤æé\n\n\n# è¿æ¥æ°\n\nææå¤å°ä¸ªæä»¶æååä¸ä¸ªç´¢å¼èç¹ã\n\n\n# ææ¡£æå±ç¨æ·åæå±ç»\n\nå°±æ¯ææ¡£å±äºåªä¸ªç¨æ·åç¨æ·ç»ãæä»¶æå±ç¨æ·åç»æ¯å¯ä»¥æ´æ¹ç\n\n\n# ææ¡£å¤§å°\n\né»è®¤æ¯ bytes\n\n\n# æ´æ¹æä½æé\n\n\n# chown\n\næ¯ change owner çææï¼ä¸»è¦ä½ç¨å°±æ¯æ¹åæä»¶æèç®å½ææèï¼ææèåå«ç¨æ·åç¨æ·ç»\n\nchown [-r] ç¨æ·åç§° æä»¶æèç®å½\nchown [-r] ç¨æ·åç§° ç¨æ·ç»åç§° æä»¶æç®å½\n\n\n-rï¼è¿è¡éå½å¼çæéæ´æ¹ï¼å°ç®å½ä¸çæææä»¶ãå­ç®å½æ´æ°ä¸ºæå®ç¨æ·ç»æé\n\n\n# chmod\n\næ¹åè®¿é®æé\n\nchmod [who] [+ | - | =] [mode] æä»¶å\n\n\n# who\n\nè¡¨ç¤ºæä½å¯¹è±¡å¯ä»¥æ¯ä»¥ä¸å­æ¯çä¸ä¸ªæèç»å\n\n * uï¼ç¨æ· user\n * gï¼ç¨æ·ç» group\n * oï¼è¡¨ç¤ºå¶ä»ç¨æ·\n * aï¼è¡¨ç¤ºææç¨æ·æ¯ç³»ç»é»è®¤ç\n\n# æä½ç¬¦å·\n\n * +ï¼è¡¨ç¤ºæ·»å æä¸ªæé\n * -ï¼è¡¨ç¤ºåæ¶æä¸ªæé\n * =ï¼èµäºç»å®çæéï¼åæ¶ææ¡£ä»¥åçæææé\n\n# mode\n\nè¡¨ç¤ºå¯æ§è¡çæéï¼å¯ä»¥æ¯ rãwãx\n\n# æä»¶å\n\næä»¶åå¯ä»¥ä½¿ç©ºæ ¼åå¼çæä»¶åè¡¨\n\n# ç¤ºä¾\n\nivoov@localhost:~$ ls -al test.txt \n-rw-rw-r-- 1 ivoov ivoov 6 nov  2 21:47 test.txt\nivoov@localhost:~$ chmod u=rwx,g+r,o+r test.txt \nivoov@localhost:~$ ls -al test.txt \n-rwxrw-r-- 1 ivoov ivoov 6 nov  2 21:47 test.txt\nivoov@localhost:~$\n\n\n\n# æ°å­è®¾å®æ³\n\næ°å­è®¾å®æ³ä¸­æ°å­è¡¨ç¤ºçå«ä¹\n\n * 0 è¡¨ç¤ºæ²¡æä»»ä½æé\n * 1 è¡¨ç¤ºæå¯æ§è¡æé = x\n * 2 è¡¨ç¤ºæå¯åæé = w\n * 4 è¡¨ç¤ºæå¯è¯»æé = r\n\nä¹å¯ä»¥ç¨æ°å­æ¥è¡¨ç¤ºæéå¦ chmod 755 file_name\n\nr w x   r â x   r - x\n4 2 1   4 - 1   4 - 1\nuser    group   others\n\nè¥è¦ rwx å±æ§å 4+2+1=7\n\nè¥è¦ rw- å±æ§å 4+2=6\n\nè¥è¦ r-x å±æ§å 4+1=5\n\nivoov@localhost:~$ chmod 777 test.txt \nivoov@localhost:~$ ls -al test.txt \n-rwxrwxrwx 1 ivoov ivoov 6 nov  2 21:47 test.txt\n\nivoov@localhost:~$ chmod 770 test.txt \nivoov@localhost:~$ ls -al test.txt \n-rwxrwx--- 1 ivoov ivoov 6 nov  2 21:47 test.txt\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"Linux LVM ç£çæ©å®¹",frontmatter:{title:"Linux LVM ç£çæ©å®¹",date:"2022-02-09T09:59:32.000Z",permalink:"/pages/6afa9f/"},regularPath:"/02.Linux/01.Linux/13.Linux%20LVM%20%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9.html",relativePath:"02.Linux/01.Linux/13.Linux LVM ç£çæ©å®¹.md",key:"v-8a53495c",path:"/pages/6afa9f/",headers:[{level:2,title:"LVM çåºæ¬æ¦å¿µ",slug:"lvm-çåºæ¬æ¦å¿µ",normalizedTitle:"lvm çåºæ¬æ¦å¿µ",charIndex:21},{level:3,title:"ç©çå· Physical volume (PV)",slug:"ç©çå·-physical-volume-pv",normalizedTitle:"ç©çå· physical volume (pv)",charIndex:35},{level:3,title:"å·ç» Volume group (VG)",slug:"å·ç»-volume-group-vg",normalizedTitle:"å·ç» volume group (vg)",charIndex:169},{level:3,title:"é»è¾å· Logical volume (LV)",slug:"é»è¾å·-logical-volume-lv",normalizedTitle:"é»è¾å· logical volume (lv)",charIndex:212},{level:3,title:"ç©çåºå Physical extent (PE)",slug:"ç©çåºå-physical-extent-pe",normalizedTitle:"ç©çåºå physical extent (pe)",charIndex:273},{level:2,title:"ç£çæä½ç¸å³å½ä»¤",slug:"ç£çæä½ç¸å³å½ä»¤",normalizedTitle:"ç£çæä½ç¸å³å½ä»¤",charIndex:330},{level:3,title:"df -hï¼æ¥çæè½½ç¹ï¼",slug:"df-h-æ¥çæè½½ç¹",normalizedTitle:"df -hï¼æ¥çæè½½ç¹ï¼",charIndex:343},{level:3,title:"lvdisplayï¼æ¾ç¤ºå½åç logical volumeï¼",slug:"lvdisplay-æ¾ç¤ºå½åç-logical-volume",normalizedTitle:"lvdisplayï¼æ¾ç¤ºå½åç logical volumeï¼",charIndex:362},{level:3,title:"vgdisplayï¼æ¾ç¤ºå½åç volume groupï¼",slug:"vgdisplay-æ¾ç¤ºå½åç-volume-group",normalizedTitle:"vgdisplayï¼æ¾ç¤ºå½åç volume groupï¼",charIndex:471},{level:3,title:"pvdisplayï¼æ¾ç¤ºå½åç physical volumeï¼",slug:"pvdisplay-æ¾ç¤ºå½åç-physical-volume",normalizedTitle:"pvdisplayï¼æ¾ç¤ºå½åç physical volumeï¼",charIndex:559},{level:2,title:"å¼å§ LVM æ©å®¹",slug:"å¼å§-lvm-æ©å®¹",normalizedTitle:"å¼å§ lvm æ©å®¹",charIndex:598},{level:3,title:"æ¥ç fdisk",slug:"æ¥ç-fdisk",normalizedTitle:"æ¥ç fdisk",charIndex:612},{level:3,title:"æ¥çææè¿æ¥å°çµèä¸çå¨å­è®¾å¤",slug:"æ¥çææè¿æ¥å°çµèä¸çå¨å­è®¾å¤",normalizedTitle:"æ¥çææè¿æ¥å°çµèä¸çå¨å­è®¾å¤",charIndex:841},{level:3,title:"åå»º sdb ååº",slug:"åå»º-sdb-ååº",normalizedTitle:"åå»º sdb ååº",charIndex:924},{level:3,title:"æ ¼å¼åç£ç",slug:"æ ¼å¼åç£ç",normalizedTitle:"æ ¼å¼åç£ç",charIndex:1056},{level:3,title:"åå»º PV",slug:"åå»º-pv",normalizedTitle:"åå»º pv",charIndex:1095},{level:3,title:"æ¥çå·ç»",slug:"æ¥çå·ç»",normalizedTitle:"æ¥çå·ç»",charIndex:1126},{level:3,title:"æ©å®¹ VG",slug:"æ©å®¹-vg",normalizedTitle:"æ©å®¹ vg",charIndex:1146},{level:3,title:"æ©å®¹ LV",slug:"æ©å®¹-lv",normalizedTitle:"æ©å®¹ lv",charIndex:1201},{level:3,title:"å·æ°ååº",slug:"å·æ°ååº",normalizedTitle:"å·æ°ååº",charIndex:1314},{level:3,title:"å é¤ unknown device",slug:"å é¤-unknown-device",normalizedTitle:"å é¤ unknown device",charIndex:1355}],headersStr:"LVM çåºæ¬æ¦å¿µ ç©çå· Physical volume (PV) å·ç» Volume group (VG) é»è¾å· Logical volume (LV) ç©çåºå Physical extent (PE) ç£çæä½ç¸å³å½ä»¤ df -hï¼æ¥çæè½½ç¹ï¼ lvdisplayï¼æ¾ç¤ºå½åç logical volumeï¼ vgdisplayï¼æ¾ç¤ºå½åç volume groupï¼ pvdisplayï¼æ¾ç¤ºå½åç physical volumeï¼ å¼å§ LVM æ©å®¹ æ¥ç fdisk æ¥çææè¿æ¥å°çµèä¸çå¨å­è®¾å¤ åå»º sdb ååº æ ¼å¼åç£ç åå»º PV æ¥çå·ç» æ©å®¹ VG æ©å®¹ LV å·æ°ååº å é¤ unknown device",content:"# Linux LVM ç£çæ©å®¹\n\n\n# LVM çåºæ¬æ¦å¿µ\n\n\n# ç©çå· Physical volume (PV)\n\nå¯ä»¥å¨ä¸é¢å»ºç«å·ç»çåªä»ï¼å¯ä»¥æ¯ç¡¬çååºï¼ä¹å¯ä»¥æ¯ç¡¬çæ¬èº«æèåç¯æä»¶ï¼loopback fileï¼ãç©çå·åæ¬ä¸ä¸ªç¹æ®ç headerï¼å¶ä½é¨åè¢«åå²ä¸ºä¸ååç©çåºåï¼physical extentsï¼ã\n\n\n# å·ç» Volume group (VG)\n\nå°ä¸ç»ç©çå·æ¶éä¸ºä¸ä¸ªç®¡çååã\n\n\n# é»è¾å· Logical volume (LV)\n\nèæååºï¼ç±ç©çåºåï¼physical extentsï¼ç»æã\n\n\n# ç©çåºå Physical extent (PE)\n\nç¡¬çå¯ä¾ææ´¾ç»é»è¾å·çæå°åä½ï¼éå¸¸ä¸º 4MBï¼ã\n\n\n# ç£çæä½ç¸å³å½ä»¤\n\n\n# df -hï¼æ¥çæè½½ç¹ï¼\n\n\n\n\n# lvdisplayï¼æ¾ç¤ºå½åç logical volumeï¼\n\n\n\nå¤æ³¨ï¼ æ³¨æè¿éç®åæä¸¤ä¸ªï¼ä¸ä¸ªæ¯æä»¶ç³»ç»æå¨ç volumeï¼å¦ä¸ä¸ªæ¯ swap ååºä½¿ç¨ç volumeï¼å½ç¶ï¼æä»¬éè¦æ©å®¹çæ¯ç¬¬ä¸ä¸ª\n\n\n# vgdisplayï¼æ¾ç¤ºå½åç volume groupï¼\n\n\n\nå¤æ³¨ï¼ æ³¨æ VG SIZEï¼è¿éåºè¯¥æ¯ä½ å½åçå¯ç¨ç©ºé´å¤§å°ï¼å¾æ©å®¹å®æ¯ï¼è¿éæ¾ç¤ºçåºè¯¥æ¯æç»çå¤§å°\n\n\n# pvdisplayï¼æ¾ç¤ºå½åç physical volumeï¼\n\n\n\n\n# å¼å§ LVM æ©å®¹\n\n\n# æ¥ç fdisk\n\nfdisk -l\n\n\n\n\nå ä¸ºè¿å°æºå¨é»è®¤å¼å¯äº LVMï¼æä»¥ç®åæä¸ä¸ª extended ååºåä¸ä¸ª LVM ååºï¼å¹¶ä¸ä»ä»¬æ¯å®å¨éå çãè¿æ¯å ä¸ºï¼LVM ååºä½ä¸ºä¸ä¸ªèæçååºï¼å®å¨å ç¨äºè¿ä¸ª extended ååºï¼åçå¾è§ä¸ï¼\n\n\n\nå æ­¤ï¼ç°å¨éè¦åçå°±æ¯å° extended partition (sda2) æ©å±å°æå¤§ï¼ç¶ååå»ºä¸ä¸ªæ°ç LVM logical partition (sda6)ï¼ç¨å®æ¥å¡«æ»¡ sda2\n\n\n# æ¥çææè¿æ¥å°çµèä¸çå¨å­è®¾å¤\n\nfdisk -l |grep '/dev'\n\n\n# 1 åç£çææå¾\n\n\n\n# 2 åç£çææå¾ï¼æ°å¢ç£çï¼å°æªæè½½ï¼\n\n\n\n\n# åå»º sdb ååº\n\nfdisk /dev/sdb\nn\t# æ°å»ºååº\nl\t# éæ©é»è¾ååºï¼å¦ææ²¡æï¼åé¦ååå»ºæ©å±ååºï¼pï¼ï¼ç¶ååæ·»å é»è¾ååºï¼ç¡¬çï¼æå¤åä¸ªååº P-P-P-P æ P-P-P-Eï¼\n\n\n\n\nåè½¦\nåè½¦\nåè½¦\nw\t# åå¥ç£çååº\n\n\n\n# æ ¼å¼åç£ç\n\n\n\nmkfs -t ext4 /dev/sdb1\n\n\n\n\n\n# åå»º PV\n\npvcreate /dev/sdb1\n\n\n\n# æ¥çå·ç»\n\npvscan\n\n\n\n\n\n# æ©å®¹ VG\n\nvgdisplay\n\n\n\n\nvgextend ubuntu-vg /dev/sdb1\n\n\n\n# æ©å®¹ LV\n\n\n\n\n\n# å¢å æå®å¤§å°\nlvextend -L +30G /dev/ubuntu-vg/root\n# æç¾åæ¯æ©å®¹\nlvextend -l +100%FREE /dev/ubuntu-vg/root\n\n\n\n# å·æ°ååº\n\nresize2fs /dev/ubuntu-vg/root\n\n\n\n# å é¤ unknown device\n\npvscan\nvgreduce --removemissing ubuntu-vg\n\n\næ³¨æï¼ä¸è¦å¸è½½æ©å®¹çç£çï¼å¯è½åºç°ä¸¢å¤±æ°æ®ææ¯ç³»ç»æ æ³å¯å¨",normalizedContent:"# linux lvm ç£çæ©å®¹\n\n\n# lvm çåºæ¬æ¦å¿µ\n\n\n# ç©çå· physical volume (pv)\n\nå¯ä»¥å¨ä¸é¢å»ºç«å·ç»çåªä»ï¼å¯ä»¥æ¯ç¡¬çååºï¼ä¹å¯ä»¥æ¯ç¡¬çæ¬èº«æèåç¯æä»¶ï¼loopback fileï¼ãç©çå·åæ¬ä¸ä¸ªç¹æ®ç headerï¼å¶ä½é¨åè¢«åå²ä¸ºä¸ååç©çåºåï¼physical extentsï¼ã\n\n\n# å·ç» volume group (vg)\n\nå°ä¸ç»ç©çå·æ¶éä¸ºä¸ä¸ªç®¡çååã\n\n\n# é»è¾å· logical volume (lv)\n\nèæååºï¼ç±ç©çåºåï¼physical extentsï¼ç»æã\n\n\n# ç©çåºå physical extent (pe)\n\nç¡¬çå¯ä¾ææ´¾ç»é»è¾å·çæå°åä½ï¼éå¸¸ä¸º 4mbï¼ã\n\n\n# ç£çæä½ç¸å³å½ä»¤\n\n\n# df -hï¼æ¥çæè½½ç¹ï¼\n\n\n\n\n# lvdisplayï¼æ¾ç¤ºå½åç logical volumeï¼\n\n\n\nå¤æ³¨ï¼ æ³¨æè¿éç®åæä¸¤ä¸ªï¼ä¸ä¸ªæ¯æä»¶ç³»ç»æå¨ç volumeï¼å¦ä¸ä¸ªæ¯ swap ååºä½¿ç¨ç volumeï¼å½ç¶ï¼æä»¬éè¦æ©å®¹çæ¯ç¬¬ä¸ä¸ª\n\n\n# vgdisplayï¼æ¾ç¤ºå½åç volume groupï¼\n\n\n\nå¤æ³¨ï¼ æ³¨æ vg sizeï¼è¿éåºè¯¥æ¯ä½ å½åçå¯ç¨ç©ºé´å¤§å°ï¼å¾æ©å®¹å®æ¯ï¼è¿éæ¾ç¤ºçåºè¯¥æ¯æç»çå¤§å°\n\n\n# pvdisplayï¼æ¾ç¤ºå½åç physical volumeï¼\n\n\n\n\n# å¼å§ lvm æ©å®¹\n\n\n# æ¥ç fdisk\n\nfdisk -l\n\n\n\n\nå ä¸ºè¿å°æºå¨é»è®¤å¼å¯äº lvmï¼æä»¥ç®åæä¸ä¸ª extended ååºåä¸ä¸ª lvm ååºï¼å¹¶ä¸ä»ä»¬æ¯å®å¨éå çãè¿æ¯å ä¸ºï¼lvm ååºä½ä¸ºä¸ä¸ªèæçååºï¼å®å¨å ç¨äºè¿ä¸ª extended ååºï¼åçå¾è§ä¸ï¼\n\n\n\nå æ­¤ï¼ç°å¨éè¦åçå°±æ¯å° extended partition (sda2) æ©å±å°æå¤§ï¼ç¶ååå»ºä¸ä¸ªæ°ç lvm logical partition (sda6)ï¼ç¨å®æ¥å¡«æ»¡ sda2\n\n\n# æ¥çææè¿æ¥å°çµèä¸çå¨å­è®¾å¤\n\nfdisk -l |grep '/dev'\n\n\n# 1 åç£çææå¾\n\n\n\n# 2 åç£çææå¾ï¼æ°å¢ç£çï¼å°æªæè½½ï¼\n\n\n\n\n# åå»º sdb ååº\n\nfdisk /dev/sdb\nn\t# æ°å»ºååº\nl\t# éæ©é»è¾ååºï¼å¦ææ²¡æï¼åé¦ååå»ºæ©å±ååºï¼pï¼ï¼ç¶ååæ·»å é»è¾ååºï¼ç¡¬çï¼æå¤åä¸ªååº p-p-p-p æ p-p-p-eï¼\n\n\n\n\nåè½¦\nåè½¦\nåè½¦\nw\t# åå¥ç£çååº\n\n\n\n# æ ¼å¼åç£ç\n\n\n\nmkfs -t ext4 /dev/sdb1\n\n\n\n\n\n# åå»º pv\n\npvcreate /dev/sdb1\n\n\n\n# æ¥çå·ç»\n\npvscan\n\n\n\n\n\n# æ©å®¹ vg\n\nvgdisplay\n\n\n\n\nvgextend ubuntu-vg /dev/sdb1\n\n\n\n# æ©å®¹ lv\n\n\n\n\n\n# å¢å æå®å¤§å°\nlvextend -l +30g /dev/ubuntu-vg/root\n# æç¾åæ¯æ©å®¹\nlvextend -l +100%free /dev/ubuntu-vg/root\n\n\n\n# å·æ°ååº\n\nresize2fs /dev/ubuntu-vg/root\n\n\n\n# å é¤ unknown device\n\npvscan\nvgreduce --removemissing ubuntu-vg\n\n\næ³¨æï¼ä¸è¦å¸è½½æ©å®¹çç£çï¼å¯è½åºç°ä¸¢å¤±æ°æ®ææ¯ç³»ç»æ æ³å¯å¨",charsets:{cjk:!0},lastUpdated:"2022/02/09, 10:06:13",lastUpdatedTimestamp:1644372373e3},{title:"ä»ä¹æ¯ CentOS",frontmatter:{title:"ä»ä¹æ¯ CentOS",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/8eb38e/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/01.%E4%BB%80%E4%B9%88%E6%98%AF%20CentOS.html",relativePath:"03.CentOS/01.å¥é¨/01.ä»ä¹æ¯ CentOS.md",key:"v-3834644e",path:"/pages/8eb38e/",headers:[{level:2,title:"ä»ç»",slug:"ä»ç»",normalizedTitle:"ä»ç»",charIndex:17},{level:2,title:"ææ°çæ¬",slug:"ææ°çæ¬",normalizedTitle:"ææ°çæ¬",charIndex:618},{level:2,title:"ç¹ç¹",slug:"ç¹ç¹",normalizedTitle:"ç¹ç¹",charIndex:830}],headersStr:"ä»ç» ææ°çæ¬ ç¹ç¹",content:'# ä»ä¹æ¯ CentOS\n\n\n# ä»ç»\n\nCentOS æ¯ä¸ä¸ªåºäºRed Hat Linux æä¾çå¯èªç±ä½¿ç¨æºä»£ç çä¼ä¸çº§Linuxåè¡çæ¬ãæ¯ä¸ªçæ¬ç CentOSé½ä¼è·å¾åå¹´çæ¯æï¼éè¿å®å¨æ´æ°æ¹å¼ï¼ãæ°çæ¬ç CentOS å¤§çº¦æ¯ä¸¤å¹´åè¡ä¸æ¬¡ï¼èæ¯ä¸ªçæ¬ç CentOS ä¼å®æï¼å¤§æ¦æ¯å­ä¸ªæï¼æ´æ°ä¸æ¬¡ï¼ä»¥ä¾¿æ¯ææ°çç¡¬ä»¶ãè¿æ ·ï¼å»ºç«ä¸ä¸ªå®å¨ãä½ç»´æ¤ãç¨³å®ãé«é¢æµæ§ãé«éå¤æ§ç Linux ç¯å¢ãCentOSæ¯Community Enterprise Operating Systemçç¼©åã\n\nCentOS æ¯RHELï¼Red Hat Enterprise Linuxï¼æºä»£ç åç¼è¯çäº§ç©ï¼èä¸å¨RHELçåºç¡ä¸ä¿®æ­£äºä¸å°å·²ç¥ç Bug ï¼ç¸å¯¹äºå¶ä» Linux åè¡çï¼å¶ç¨³å®æ§å¼å¾ä¿¡èµã\n\nCentOSå¨2014åï¼å®£å¸å å¥Red Hatã\n\nCentOS å å¥çº¢å¸½åä¸åçæ¯ï¼\n\n 1. CentOS ç»§ç»­ä¸æ¶è´¹\n\n 2. ä¿æèµå©åå®¹é©±å¨çç½ç»ä¸­å¿ä¸å\n\n 3. BugãIssue åç´§æ¥äºä»¶å¤çç­ç¥ä¸å\n\n 4. Red Hat Enterprise Linux å CentOS é²ç«å¢ä¹ä¾ç¶å­å¨\n\nååçæ¯ï¼\n\n 1. æä»¬æ¯ä¸ºçº¢å¸½å·¥ä½ï¼ä¸æ¯ä¸º RHEL\n\n 2. çº¢å¸½æä¾æå»ºç³»ç»ååå§åå®¹ååèµæºçèµå©\n\n 3. ä¸äºå¼åçèµæºåæ¬æºç çè·åå°æ´å å®¹æ\n\n 4. é¿åäºåæ¥åçº¢å¸½ä¸ä¸äºæ³å¾çé®é¢\n\n\n# ææ°çæ¬\n\nææ°çæ¬ä¸º CentOS 8.0.1905ã\n\nä¸æ¸¸RHEL 7ä¸»è¦æ¹è¿ï¼\n\nåæ ¸æ´æ°è³3.10.0ï¼æ¯æLinuxå®¹å¨ï¼Dockerï¼ï¼Open VMware Toolså3Då¾åè½å³è£å³ç¨ï¼Open JDK7ä½ä¸ºç¼ºçJDKï¼ext4åXFSçLVMå¿«ç§ï¼è½¬ç¨systemdãfirewalldåGRUB2ï¼XFSä½ä¸ºç¼ºçæä»¶ç³»ç»ï¼åæ ¸ç©ºé´åçiSCSIåFCoEï¼æ¯æPTPv2ï¼æ¯æ40Gç½å¡ç­ã\n\n\n# ç¹ç¹\n\n1ï¼å¯ä»¥æCentOSçè§£ä¸ºRed Hat ASç³»åï¼å®å®å¨å°±æ¯å¯¹Red Hat ASè¿è¡æ¹è¿ååå¸çï¼åç§æä½ãä½¿ç¨åRED HATæ²¡æåºå«ï¼\n\n2ï¼CentOSå®å¨åè´¹ï¼ä¸å­å¨RED HAT AS4éè¦åºåå·çé®é¢ã\n\n3ï¼CentOSç¬æçyumå½ä»¤æ¯æå¨çº¿åçº§ï¼å¯ä»¥å³æ¶æ´æ°ç³»ç»ï¼ä¸åRED HATé£æ ·éè¦è±é±è´­ä¹°æ¯ææå¡ï¼\n\n4ï¼CentOSä¿®æ­£äºè®¸å¤RHELçBUGï¼\n\n5ï¼CentOSçæ¬è¯´æï¼CentOS3.1 ç­åäº RED HAT AS3 Update1 CentOS3.4 ç­åäº RED HAT AS3 Update4 CentOS4.0 ç­åäº RED HAT AS4\n\nä¸ RHELçå³ç³»\n\nRHEL å¨åè¡çæ¶åï¼æä¸¤ç§æ¹å¼ãä¸ç§æ¯äºè¿å¶çåè¡æ¹å¼ï¼å¦å¤ä¸ç§æ¯æºä»£ç çåè¡æ¹å¼ãæ è®ºæ¯åªä¸ç§åè¡æ¹å¼ï¼ä½ é½å¯ä»¥åè´¹è·å¾ï¼ä¾å¦ä»ç½ä¸ä¸è½½ï¼ï¼å¹¶åæ¬¡åå¸ãä½å¦æä½ ä½¿ç¨äºä»ä»¬çå¨çº¿åçº§ï¼åæ¬è¡¥ä¸ï¼æå¨è¯¢æå¡ï¼å°±å¿é¡»è¦ä»è´¹ãRHEL ä¸ç´é½æä¾æºä»£ç çåè¡æ¹å¼ï¼CentOS å°±æ¯å° RHEL åè¡çæºä»£ç éæ°ç¼è¯ä¸æ¬¡ï¼å½¢æä¸ä¸ªå¯ä½¿ç¨çäºè¿å¶çæ¬ãç±äº LINUX çæºä»£ç æ¯ GNUï¼æä»¥ä»è·å¾ RHEL çæºä»£ç å°ç¼è¯ææ°çäºè¿å¶ï¼é½æ¯åæ³ãåªæ¯ red hat æ¯åæ ï¼æä»¥å¿é¡»å¨æ°çåè¡çéå°red hat çåæ å»æãred hatå¯¹è¿ç§åè¡ççæåº¦æ¯ï¼"æä»¬å¶å®å¹¶ä¸åå¯¹è¿ç§åè¡çï¼çæ­£åæä»¬ä»è´¹çç¨æ·ï¼ä»ä»¬éè§çå¹¶ä¸æ¯ç³»ç»æ¬èº«ï¼èæ¯æä»¬ææä¾çåä¸æå¡ã" æä»¥ï¼CentOS å¯ä»¥å¾å° RHEL çææåè½ï¼çè³æ¯æ´å¥½çè½¯ä»¶ãä½ CentOS å¹¶ä¸åç¨æ·æä¾åä¸æ¯æï¼å½ç¶ä¹ä¸è´ä¸ä»»ä½åä¸è´£ä»»ãå¦æä½ è¦å°ä½ ç RHEL è½¬å° CentOS ä¸ï¼å ä¸ºä½ ä¸å¸æä¸º RHEL åçº§èä»è´¹ãå½ç¶ï¼ä½ å¿é¡»æä¸°å¯ linux ä½¿ç¨ç»éªï¼å æ­¤ RHEL çåä¸ææ¯æ¯æå¯¹ä½ æ¥è¯´å¹¶ä¸éè¦ãæ¯å¦è¯´ï¼å°½ç®¡æ²¡æRHELçåä¸æ¯æï¼2019å¹´ä¹æä¸å°ä¼ä¸éæ©ä½¿ç¨CentOSï¼æ¯å¦èåä¼è®®ç®¡çç³»ç»MUNPANELãä½å¦æä½ æ¯åçº¯çä¸å¡åä¼ä¸ï¼é£ä¹è¿æ¯å»ºè®®ä½ éè´­ RHEL è½¯ä»¶å¹¶è´­ä¹°ç¸åºæå¡ãè¿æ ·å¯ä»¥èçä½ ç IT ç®¡çè´¹ç¨ï¼å¹¶å¯å¾å°ä¸ä¸æå¡ãä¸å¥è¯ï¼éç¨ CentOS è¿æ¯ RHELï¼åå³äºä½ æå¨å¬å¸æ¯å¦æ¥æç¸åºçææ¯åéã',normalizedContent:'# ä»ä¹æ¯ centos\n\n\n# ä»ç»\n\ncentos æ¯ä¸ä¸ªåºäºred hat linux æä¾çå¯èªç±ä½¿ç¨æºä»£ç çä¼ä¸çº§linuxåè¡çæ¬ãæ¯ä¸ªçæ¬ç centosé½ä¼è·å¾åå¹´çæ¯æï¼éè¿å®å¨æ´æ°æ¹å¼ï¼ãæ°çæ¬ç centos å¤§çº¦æ¯ä¸¤å¹´åè¡ä¸æ¬¡ï¼èæ¯ä¸ªçæ¬ç centos ä¼å®æï¼å¤§æ¦æ¯å­ä¸ªæï¼æ´æ°ä¸æ¬¡ï¼ä»¥ä¾¿æ¯ææ°çç¡¬ä»¶ãè¿æ ·ï¼å»ºç«ä¸ä¸ªå®å¨ãä½ç»´æ¤ãç¨³å®ãé«é¢æµæ§ãé«éå¤æ§ç linux ç¯å¢ãcentosæ¯community enterprise operating systemçç¼©åã\n\ncentos æ¯rhelï¼red hat enterprise linuxï¼æºä»£ç åç¼è¯çäº§ç©ï¼èä¸å¨rhelçåºç¡ä¸ä¿®æ­£äºä¸å°å·²ç¥ç bug ï¼ç¸å¯¹äºå¶ä» linux åè¡çï¼å¶ç¨³å®æ§å¼å¾ä¿¡èµã\n\ncentoså¨2014åï¼å®£å¸å å¥red hatã\n\ncentos å å¥çº¢å¸½åä¸åçæ¯ï¼\n\n 1. centos ç»§ç»­ä¸æ¶è´¹\n\n 2. ä¿æèµå©åå®¹é©±å¨çç½ç»ä¸­å¿ä¸å\n\n 3. bugãissue åç´§æ¥äºä»¶å¤çç­ç¥ä¸å\n\n 4. red hat enterprise linux å centos é²ç«å¢ä¹ä¾ç¶å­å¨\n\nååçæ¯ï¼\n\n 1. æä»¬æ¯ä¸ºçº¢å¸½å·¥ä½ï¼ä¸æ¯ä¸º rhel\n\n 2. çº¢å¸½æä¾æå»ºç³»ç»ååå§åå®¹ååèµæºçèµå©\n\n 3. ä¸äºå¼åçèµæºåæ¬æºç çè·åå°æ´å å®¹æ\n\n 4. é¿åäºåæ¥åçº¢å¸½ä¸ä¸äºæ³å¾çé®é¢\n\n\n# ææ°çæ¬\n\nææ°çæ¬ä¸º centos 8.0.1905ã\n\nä¸æ¸¸rhel 7ä¸»è¦æ¹è¿ï¼\n\nåæ ¸æ´æ°è³3.10.0ï¼æ¯ælinuxå®¹å¨ï¼dockerï¼ï¼open vmware toolså3då¾åè½å³è£å³ç¨ï¼open jdk7ä½ä¸ºç¼ºçjdkï¼ext4åxfsçlvmå¿«ç§ï¼è½¬ç¨systemdãfirewalldågrub2ï¼xfsä½ä¸ºç¼ºçæä»¶ç³»ç»ï¼åæ ¸ç©ºé´åçiscsiåfcoeï¼æ¯æptpv2ï¼æ¯æ40gç½å¡ç­ã\n\n\n# ç¹ç¹\n\n1ï¼å¯ä»¥æcentosçè§£ä¸ºred hat asç³»åï¼å®å®å¨å°±æ¯å¯¹red hat asè¿è¡æ¹è¿ååå¸çï¼åç§æä½ãä½¿ç¨åred hatæ²¡æåºå«ï¼\n\n2ï¼centoså®å¨åè´¹ï¼ä¸å­å¨red hat as4éè¦åºåå·çé®é¢ã\n\n3ï¼centosç¬æçyumå½ä»¤æ¯æå¨çº¿åçº§ï¼å¯ä»¥å³æ¶æ´æ°ç³»ç»ï¼ä¸åred haté£æ ·éè¦è±é±è´­ä¹°æ¯ææå¡ï¼\n\n4ï¼centosä¿®æ­£äºè®¸å¤rhelçbugï¼\n\n5ï¼centosçæ¬è¯´æï¼centos3.1 ç­åäº red hat as3 update1 centos3.4 ç­åäº red hat as3 update4 centos4.0 ç­åäº red hat as4\n\nä¸ rhelçå³ç³»\n\nrhel å¨åè¡çæ¶åï¼æä¸¤ç§æ¹å¼ãä¸ç§æ¯äºè¿å¶çåè¡æ¹å¼ï¼å¦å¤ä¸ç§æ¯æºä»£ç çåè¡æ¹å¼ãæ è®ºæ¯åªä¸ç§åè¡æ¹å¼ï¼ä½ é½å¯ä»¥åè´¹è·å¾ï¼ä¾å¦ä»ç½ä¸ä¸è½½ï¼ï¼å¹¶åæ¬¡åå¸ãä½å¦æä½ ä½¿ç¨äºä»ä»¬çå¨çº¿åçº§ï¼åæ¬è¡¥ä¸ï¼æå¨è¯¢æå¡ï¼å°±å¿é¡»è¦ä»è´¹ãrhel ä¸ç´é½æä¾æºä»£ç çåè¡æ¹å¼ï¼centos å°±æ¯å° rhel åè¡çæºä»£ç éæ°ç¼è¯ä¸æ¬¡ï¼å½¢æä¸ä¸ªå¯ä½¿ç¨çäºè¿å¶çæ¬ãç±äº linux çæºä»£ç æ¯ gnuï¼æä»¥ä»è·å¾ rhel çæºä»£ç å°ç¼è¯ææ°çäºè¿å¶ï¼é½æ¯åæ³ãåªæ¯ red hat æ¯åæ ï¼æä»¥å¿é¡»å¨æ°çåè¡çéå°red hat çåæ å»æãred hatå¯¹è¿ç§åè¡ççæåº¦æ¯ï¼"æä»¬å¶å®å¹¶ä¸åå¯¹è¿ç§åè¡çï¼çæ­£åæä»¬ä»è´¹çç¨æ·ï¼ä»ä»¬éè§çå¹¶ä¸æ¯ç³»ç»æ¬èº«ï¼èæ¯æä»¬ææä¾çåä¸æå¡ã" æä»¥ï¼centos å¯ä»¥å¾å° rhel çææåè½ï¼çè³æ¯æ´å¥½çè½¯ä»¶ãä½ centos å¹¶ä¸åç¨æ·æä¾åä¸æ¯æï¼å½ç¶ä¹ä¸è´ä¸ä»»ä½åä¸è´£ä»»ãå¦æä½ è¦å°ä½ ç rhel è½¬å° centos ä¸ï¼å ä¸ºä½ ä¸å¸æä¸º rhel åçº§èä»è´¹ãå½ç¶ï¼ä½ å¿é¡»æä¸°å¯ linux ä½¿ç¨ç»éªï¼å æ­¤ rhel çåä¸ææ¯æ¯æå¯¹ä½ æ¥è¯´å¹¶ä¸éè¦ãæ¯å¦è¯´ï¼å°½ç®¡æ²¡ærhelçåä¸æ¯æï¼2019å¹´ä¹æä¸å°ä¼ä¸éæ©ä½¿ç¨centosï¼æ¯å¦èåä¼è®®ç®¡çç³»ç»munpanelãä½å¦æä½ æ¯åçº¯çä¸å¡åä¼ä¸ï¼é£ä¹è¿æ¯å»ºè®®ä½ éè´­ rhel è½¯ä»¶å¹¶è´­ä¹°ç¸åºæå¡ãè¿æ ·å¯ä»¥èçä½ ç it ç®¡çè´¹ç¨ï¼å¹¶å¯å¾å°ä¸ä¸æå¡ãä¸å¥è¯ï¼éç¨ centos è¿æ¯ rhelï¼åå³äºä½ æå¨å¬å¸æ¯å¦æ¥æç¸åºçææ¯åéã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 ä¸­ä½¿ç¨é¿éäºçyumæº",frontmatter:{title:"CentOS 7 ä¸­ä½¿ç¨é¿éäºçyumæº",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/4d8bf7/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/02.CentOS%207%20%E4%B8%AD%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E7%9A%84yum%E6%BA%90.html",relativePath:"03.CentOS/01.å¥é¨/02.CentOS 7 ä¸­ä½¿ç¨é¿éäºçyumæº.md",key:"v-a54afc5a",path:"/pages/4d8bf7/",headers:[{level:2,title:"å¤ä»½åæ¥çyumæº",slug:"å¤ä»½åæ¥çyumæº",normalizedTitle:"å¤ä»½åæ¥çyumæº",charIndex:27},{level:2,title:"ä¸è½½é¿éäºçCentOS-Base.repo å°/etc/yum.repos.d/",slug:"ä¸è½½é¿éäºçcentos-base-repo-å°-etc-yum-repos-d",normalizedTitle:"ä¸è½½é¿éäºçcentos-base.repo å°/etc/yum.repos.d/",charIndex:138},{level:2,title:"æ¸çç¼å­",slug:"æ¸çç¼å­",normalizedTitle:"æ¸çç¼å­",charIndex:374},{level:2,title:"çææ°çç¼å­",slug:"çææ°çç¼å­",normalizedTitle:"çææ°çç¼å­",charIndex:404}],headersStr:"å¤ä»½åæ¥çyumæº ä¸è½½é¿éäºçCentOS-Base.repo å°/etc/yum.repos.d/ æ¸çç¼å­ çææ°çç¼å­",content:"# CentOS 7 ä¸­ä½¿ç¨é¿éäºçyumæº\n\n\n# å¤ä»½åæ¥çyumæº\n\nyum install wget\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n\n\n\n# ä¸è½½é¿éäºçCentOS-Base.repo å°/etc/yum.repos.d/\n\nå®è£wget\n\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n\n\næè\n\ncurl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n\n\n\n# æ¸çç¼å­\n\nsudo yum clean all\n\n\n\n# çææ°çç¼å­\n\nsudo yum makecache\n",normalizedContent:"# centos 7 ä¸­ä½¿ç¨é¿éäºçyumæº\n\n\n# å¤ä»½åæ¥çyumæº\n\nyum install wget\nmv /etc/yum.repos.d/centos-base.repo /etc/yum.repos.d/centos-base.repo.backup\n\n\n\n# ä¸è½½é¿éäºçcentos-base.repo å°/etc/yum.repos.d/\n\nå®è£wget\n\nwget -o /etc/yum.repos.d/centos-base.repo http://mirrors.aliyun.com/repo/centos-7.repo\n\n\næè\n\ncurl -o /etc/yum.repos.d/centos-base.repo http://mirrors.aliyun.com/repo/centos-7.repo\n\n\n\n# æ¸çç¼å­\n\nsudo yum clean all\n\n\n\n# çææ°çç¼å­\n\nsudo yum makecache\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 è®¾ç½® SSH éè¿å¯é¥ç»å½",frontmatter:{title:"CentOS 7 è®¾ç½® SSH éè¿å¯é¥ç»å½",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/801448/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/03.CentOS%207%20%E8%AE%BE%E7%BD%AE%20SSH%20%E9%80%9A%E8%BF%87%E5%AF%86%E9%92%A5%E7%99%BB%E5%BD%95.html",relativePath:"03.CentOS/01.å¥é¨/03.CentOS 7 è®¾ç½® SSH éè¿å¯é¥ç»å½.md",key:"v-0a8f6788",path:"/pages/801448/",headers:[{level:2,title:"å¶ä½å¯é¥å¯¹",slug:"å¶ä½å¯é¥å¯¹",normalizedTitle:"å¶ä½å¯é¥å¯¹",charIndex:358},{level:2,title:"å¨æå¡å¨ä¸å®è£å¬é¥",slug:"å¨æå¡å¨ä¸å®è£å¬é¥",normalizedTitle:"å¨æå¡å¨ä¸å®è£å¬é¥",charIndex:1429},{level:2,title:"å°ç§é¥ä¸è½½å°å®¢æ·ç«¯ï¼ç¶åè½¬æ¢ä¸º PuTTY è½ä½¿ç¨çæ ¼å¼",slug:"å°ç§é¥ä¸è½½å°å®¢æ·ç«¯-ç¶åè½¬æ¢ä¸º-putty-è½ä½¿ç¨çæ ¼å¼",normalizedTitle:"å°ç§é¥ä¸è½½å°å®¢æ·ç«¯ï¼ç¶åè½¬æ¢ä¸º putty è½ä½¿ç¨çæ ¼å¼",charIndex:1783}],headersStr:"å¶ä½å¯é¥å¯¹ å¨æå¡å¨ä¸å®è£å¬é¥ å°ç§é¥ä¸è½½å°å®¢æ·ç«¯ï¼ç¶åè½¬æ¢ä¸º PuTTY è½ä½¿ç¨çæ ¼å¼",content:"# CentOS 7 è®¾ç½® SSH éè¿å¯é¥ç»å½\n\næä»¬ä¸è¬ä½¿ç¨ PuTTY ç­ SSH å®¢æ·ç«¯æ¥è¿ç¨ç®¡ç Linux æå¡å¨ãä½æ¯ï¼ä¸è¬çå¯ç æ¹å¼ç»å½ï¼å®¹ææå¯ç è¢«æ´åç ´è§£çé®é¢ãæä»¥ï¼ä¸è¬æä»¬ä¼å° SSH çç«¯å£è®¾ç½®ä¸ºé»è®¤ç 22 ä»¥å¤çç«¯å£ï¼æèç¦ç¨ root è´¦æ·ç»å½ãå¶å®ï¼æä¸ä¸ªæ´å¥½çåæ³æ¥ä¿è¯å®å¨ï¼èä¸è®©ä½ å¯ä»¥æ¾å¿å°ç¨ root è´¦æ·ä»è¿ç¨ç»å½ââé£å°±æ¯éè¿å¯é¥æ¹å¼ç»å½ã\n\nå¯é¥å½¢å¼ç»å½çåçæ¯ï¼å©ç¨å¯é¥çæå¨å¶ä½ä¸å¯¹å¯é¥ââä¸åªå¬é¥åä¸åªç§é¥ãå°å¬é¥æ·»å å°æå¡å¨çæä¸ªè´¦æ·ä¸ï¼ç¶åå¨å®¢æ·ç«¯å©ç¨ç§é¥å³å¯å®æè®¤è¯å¹¶ç»å½ãè¿æ ·ä¸æ¥ï¼æ²¡æç§é¥ï¼ä»»ä½äººé½æ æ³éè¿ SSH æ´åç ´è§£ä½ çå¯ç æ¥è¿ç¨ç»å½å°ç³»ç»ãæ­¤å¤ï¼å¦æå°å¬é¥å¤å¶å°å¶ä»è´¦æ·çè³ä¸»æºï¼å©ç¨ç§é¥ä¹å¯ä»¥ç»å½ã\n\nä¸é¢æ¥è®²è§£å¦ä½å¨ Linux æå¡å¨ä¸å¶ä½å¯é¥å¯¹ï¼å°å¬é¥æ·»å ç»è´¦æ·ï¼è®¾ç½® SSHï¼æåéè¿å®¢æ·ç«¯ç»å½ã\n\n\n# å¶ä½å¯é¥å¯¹\n\né¦åå¨æå¡å¨ä¸å¶ä½å¯é¥å¯¹ãé¦åç¨å¯ç ç»å½å°ä½ æç®ä½¿ç¨å¯é¥ç»å½çè´¦æ·ï¼ç¶åæ§è¡ä»¥ä¸å½ä»¤ï¼\n\nssh-keygen\n# æ\nssh-keygen -t rsa -b 4096 -C \"<info@ieooc.com>\"\n\n\nå¯é¥éç å¨ä½¿ç¨ç§é¥æ¶å¿é¡»è¾å¥ï¼è¿æ ·å°±å¯ä»¥ä¿æ¤ç§é¥ä¸è¢«çç¨ãå½ç¶ï¼ä¹å¯ä»¥çç©ºï¼å®ç°æ å¯ç ç»å½ã\n\nç°å¨ï¼å¨ root ç¨æ·çå®¶ç®å½ä¸­çæäºä¸ä¸ª .ssh çéèç®å½ï¼åå«ä¸¤ä¸ªå¯é¥æä»¶ãid_rsa ä¸ºç§é¥ï¼id_rsa.pub ä¸ºå¬é¥ã\n\n[root@localhost ~]# ssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa): <== æ Enter\nCreated directory '/root/.ssh'.\nEnter passphrase (empty for no passphrase): <== è¾å¥å¯é¥éç ï¼æç´æ¥æ Enter çç©º\nEnter same passphrase again: <== åè¾å¥ä¸éå¯é¥éç \nYour identification has been saved in /root/.ssh/id_rsa. <== ç§é¥\nYour public key has been saved in /root/.ssh/id_rsa.pub. <== å¬é¥\nThe key fingerprint is:\nSHA256:ARUt2gVZu6SqS7mn14XRLXwM1XHz1sEnAz6uVqkcfdI root@localhost.localdomain\nThe key's randomart image is:\n+---[RSA 2048]----+\n|   ..+*..ooo+.|\n|    .o +o +o*|\n|    o.=o+o o=|\n|   . o+++++ . |\n|    Sooo* E |\n|   . ....= o  |\n|  o .. .=   |\n|  . oo ..    |\n|  ==      |\n+----[SHA256]-----+\n\n\nå°å¬é¥æ·è´å°è¿ç¨æå¡å¨\n\n[root@localhost ~]# sshâcopyâid username@remotehost\n\n\n\n# å¨æå¡å¨ä¸å®è£å¬é¥\n\n 1. é®å¥ä»¥ä¸å½ä»¤ï¼å¨æå¡å¨ä¸å®è£å¬é¥ï¼\n\ncd .ssh\ncat id_rsa.pub >> authorized_keys\n\n\n 2. å¦æ­¤ä¾¿å®æäºå¬é¥çå®è£ãä¸ºäºç¡®ä¿è¿æ¥æåï¼è¯·ä¿è¯ä»¥ä¸æä»¶æéæ­£ç¡®ï¼\n\nchmod 600 authorized_keys\nchmod 700 ~/.ssh\n\n\n 3. è®¾ç½® SSHï¼æå¼å¯é¥ç»å½åè½\n\nç¼è¾ /etc/ssh/sshd_config æä»¶ï¼è¿è¡å¦ä¸è®¾ç½®ï¼\n\nPubkeyAuthentication yes\n\nå½ä½ å®æå¨é¨è®¾ç½®ï¼å¹¶ä»¥å¯é¥æ¹å¼ç»å½æååï¼åç¦ç¨å¯ç ç»å½ï¼\n\nPasswordAuthentication no\n\næåï¼éå¯ SSH æå¡ï¼\n\nsystemctl restart sshd.service\n\n\n\n# å°ç§é¥ä¸è½½å°å®¢æ·ç«¯ï¼ç¶åè½¬æ¢ä¸º PuTTY è½ä½¿ç¨çæ ¼å¼\n\nä½¿ç¨ WinSCPãSFTP ç­å·¥å·å°ç§é¥æä»¶ id_rsa ä¸è½½å°å®¢æ·ç«¯æºå¨ä¸ãç¶åæå¼ PuTTYGenï¼åå» Actions ä¸­ç Load æé®ï¼è½½å¥ä½ åæä¸è½½å°çç§é¥æä»¶ãå¦æä½ åæè®¾ç½®äºå¯é¥éç ï¼è¿æ¶åéè¦è¾å¥ã\n\nè½½å¥æååï¼PuTTYGen ä¼æ¾ç¤ºå¯é¥ç¸å³çä¿¡æ¯ãå¨ Key comment ä¸­é®å¥å¯¹å¯é¥çè¯´æä¿¡æ¯ï¼ç¶ååå» Save private key æé®å³å¯å°ç§é¥æä»¶å­æ¾ä¸º PuTTY è½ä½¿ç¨çæ ¼å¼ã\n\nä»åï¼å½ä½ ä½¿ç¨ PuTTY ç»å½æ¶ï¼å¯ä»¥å¨å·¦ä¾§ç Connection -> SSH -> Auth ä¸­ç Private key file for authentication: å¤éæ©ä½ çç§é¥æä»¶ï¼ç¶åå³å¯ç»å½äºï¼è¿ç¨ä¸­åªéè¾å¥å¯é¥éç å³å¯ã",normalizedContent:"# centos 7 è®¾ç½® ssh éè¿å¯é¥ç»å½\n\næä»¬ä¸è¬ä½¿ç¨ putty ç­ ssh å®¢æ·ç«¯æ¥è¿ç¨ç®¡ç linux æå¡å¨ãä½æ¯ï¼ä¸è¬çå¯ç æ¹å¼ç»å½ï¼å®¹ææå¯ç è¢«æ´åç ´è§£çé®é¢ãæä»¥ï¼ä¸è¬æä»¬ä¼å° ssh çç«¯å£è®¾ç½®ä¸ºé»è®¤ç 22 ä»¥å¤çç«¯å£ï¼æèç¦ç¨ root è´¦æ·ç»å½ãå¶å®ï¼æä¸ä¸ªæ´å¥½çåæ³æ¥ä¿è¯å®å¨ï¼èä¸è®©ä½ å¯ä»¥æ¾å¿å°ç¨ root è´¦æ·ä»è¿ç¨ç»å½ââé£å°±æ¯éè¿å¯é¥æ¹å¼ç»å½ã\n\nå¯é¥å½¢å¼ç»å½çåçæ¯ï¼å©ç¨å¯é¥çæå¨å¶ä½ä¸å¯¹å¯é¥ââä¸åªå¬é¥åä¸åªç§é¥ãå°å¬é¥æ·»å å°æå¡å¨çæä¸ªè´¦æ·ä¸ï¼ç¶åå¨å®¢æ·ç«¯å©ç¨ç§é¥å³å¯å®æè®¤è¯å¹¶ç»å½ãè¿æ ·ä¸æ¥ï¼æ²¡æç§é¥ï¼ä»»ä½äººé½æ æ³éè¿ ssh æ´åç ´è§£ä½ çå¯ç æ¥è¿ç¨ç»å½å°ç³»ç»ãæ­¤å¤ï¼å¦æå°å¬é¥å¤å¶å°å¶ä»è´¦æ·çè³ä¸»æºï¼å©ç¨ç§é¥ä¹å¯ä»¥ç»å½ã\n\nä¸é¢æ¥è®²è§£å¦ä½å¨ linux æå¡å¨ä¸å¶ä½å¯é¥å¯¹ï¼å°å¬é¥æ·»å ç»è´¦æ·ï¼è®¾ç½® sshï¼æåéè¿å®¢æ·ç«¯ç»å½ã\n\n\n# å¶ä½å¯é¥å¯¹\n\né¦åå¨æå¡å¨ä¸å¶ä½å¯é¥å¯¹ãé¦åç¨å¯ç ç»å½å°ä½ æç®ä½¿ç¨å¯é¥ç»å½çè´¦æ·ï¼ç¶åæ§è¡ä»¥ä¸å½ä»¤ï¼\n\nssh-keygen\n# æ\nssh-keygen -t rsa -b 4096 -c \"<info@ieooc.com>\"\n\n\nå¯é¥éç å¨ä½¿ç¨ç§é¥æ¶å¿é¡»è¾å¥ï¼è¿æ ·å°±å¯ä»¥ä¿æ¤ç§é¥ä¸è¢«çç¨ãå½ç¶ï¼ä¹å¯ä»¥çç©ºï¼å®ç°æ å¯ç ç»å½ã\n\nç°å¨ï¼å¨ root ç¨æ·çå®¶ç®å½ä¸­çæäºä¸ä¸ª .ssh çéèç®å½ï¼åå«ä¸¤ä¸ªå¯é¥æä»¶ãid_rsa ä¸ºç§é¥ï¼id_rsa.pub ä¸ºå¬é¥ã\n\n[root@localhost ~]# ssh-keygen\ngenerating public/private rsa key pair.\nenter file in which to save the key (/root/.ssh/id_rsa): <== æ enter\ncreated directory '/root/.ssh'.\nenter passphrase (empty for no passphrase): <== è¾å¥å¯é¥éç ï¼æç´æ¥æ enter çç©º\nenter same passphrase again: <== åè¾å¥ä¸éå¯é¥éç \nyour identification has been saved in /root/.ssh/id_rsa. <== ç§é¥\nyour public key has been saved in /root/.ssh/id_rsa.pub. <== å¬é¥\nthe key fingerprint is:\nsha256:arut2gvzu6sqs7mn14xrlxwm1xhz1senaz6uvqkcfdi root@localhost.localdomain\nthe key's randomart image is:\n+---[rsa 2048]----+\n|   ..+*..ooo+.|\n|    .o +o +o*|\n|    o.=o+o o=|\n|   . o+++++ . |\n|    sooo* e |\n|   . ....= o  |\n|  o .. .=   |\n|  . oo ..    |\n|  ==      |\n+----[sha256]-----+\n\n\nå°å¬é¥æ·è´å°è¿ç¨æå¡å¨\n\n[root@localhost ~]# sshâcopyâid username@remotehost\n\n\n\n# å¨æå¡å¨ä¸å®è£å¬é¥\n\n 1. é®å¥ä»¥ä¸å½ä»¤ï¼å¨æå¡å¨ä¸å®è£å¬é¥ï¼\n\ncd .ssh\ncat id_rsa.pub >> authorized_keys\n\n\n 2. å¦æ­¤ä¾¿å®æäºå¬é¥çå®è£ãä¸ºäºç¡®ä¿è¿æ¥æåï¼è¯·ä¿è¯ä»¥ä¸æä»¶æéæ­£ç¡®ï¼\n\nchmod 600 authorized_keys\nchmod 700 ~/.ssh\n\n\n 3. è®¾ç½® sshï¼æå¼å¯é¥ç»å½åè½\n\nç¼è¾ /etc/ssh/sshd_config æä»¶ï¼è¿è¡å¦ä¸è®¾ç½®ï¼\n\npubkeyauthentication yes\n\nå½ä½ å®æå¨é¨è®¾ç½®ï¼å¹¶ä»¥å¯é¥æ¹å¼ç»å½æååï¼åç¦ç¨å¯ç ç»å½ï¼\n\npasswordauthentication no\n\næåï¼éå¯ ssh æå¡ï¼\n\nsystemctl restart sshd.service\n\n\n\n# å°ç§é¥ä¸è½½å°å®¢æ·ç«¯ï¼ç¶åè½¬æ¢ä¸º putty è½ä½¿ç¨çæ ¼å¼\n\nä½¿ç¨ winscpãsftp ç­å·¥å·å°ç§é¥æä»¶ id_rsa ä¸è½½å°å®¢æ·ç«¯æºå¨ä¸ãç¶åæå¼ puttygenï¼åå» actions ä¸­ç load æé®ï¼è½½å¥ä½ åæä¸è½½å°çç§é¥æä»¶ãå¦æä½ åæè®¾ç½®äºå¯é¥éç ï¼è¿æ¶åéè¦è¾å¥ã\n\nè½½å¥æååï¼puttygen ä¼æ¾ç¤ºå¯é¥ç¸å³çä¿¡æ¯ãå¨ key comment ä¸­é®å¥å¯¹å¯é¥çè¯´æä¿¡æ¯ï¼ç¶ååå» save private key æé®å³å¯å°ç§é¥æä»¶å­æ¾ä¸º putty è½ä½¿ç¨çæ ¼å¼ã\n\nä»åï¼å½ä½ ä½¿ç¨ putty ç»å½æ¶ï¼å¯ä»¥å¨å·¦ä¾§ç connection -> ssh -> auth ä¸­ç private key file for authentication: å¤éæ©ä½ çç§é¥æä»¶ï¼ç¶åå³å¯ç»å½äºï¼è¿ç¨ä¸­åªéè¾å¥å¯é¥éç å³å¯ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥",frontmatter:{title:"CentOS 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/72cb23/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/04.CentOS%207%20%E6%97%B6%E9%97%B4%E4%B8%8E%E7%BD%91%E7%BB%9C%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5.html",relativePath:"03.CentOS/01.å¥é¨/04.CentOS 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥.md",key:"v-cfad191a",path:"/pages/72cb23/",headersStr:null,content:"# CentOS 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥\n\n1ãå®è£ntpdateå·¥å·\n\nyum -y install ntp ntpdate\n\n\n2ãè®¾ç½®ç³»ç»æ¶é´ä¸ç½ç»æ¶é´åæ­¥\n\nntpdate 0.asia.pool.ntp.org\n\n\nè¿éä¸»è¦å°±æ¯éè¿æ¶é´æå¡å¨å¯¹ç³»ç»æ¶é´è¿è¡åæ­¥ï¼æä»¥0.asia.pool.ntp.orgå¹¶ä¸æ¯åºå®çï¼å¤§å®¶å¯ä»¥éæ©time.nist.govãtime.nuri.netã0.asia.pool.ntp.orgã1.asia.pool.ntp.orgã2.asia.pool.ntp.orgã3.asia.pool.ntp.orgä¸­ä»»æä¸ä¸ªï¼åªè¦ä¿è¯å¯ç¨å°±OKã3ãå°ç³»ç»æ¶é´åå¥ç¡¬ä»¶æ¶é´\n\nhwclock --systohc\n",normalizedContent:"# centos 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥\n\n1ãå®è£ntpdateå·¥å·\n\nyum -y install ntp ntpdate\n\n\n2ãè®¾ç½®ç³»ç»æ¶é´ä¸ç½ç»æ¶é´åæ­¥\n\nntpdate 0.asia.pool.ntp.org\n\n\nè¿éä¸»è¦å°±æ¯éè¿æ¶é´æå¡å¨å¯¹ç³»ç»æ¶é´è¿è¡åæ­¥ï¼æä»¥0.asia.pool.ntp.orgå¹¶ä¸æ¯åºå®çï¼å¤§å®¶å¯ä»¥éæ©time.nist.govãtime.nuri.netã0.asia.pool.ntp.orgã1.asia.pool.ntp.orgã2.asia.pool.ntp.orgã3.asia.pool.ntp.orgä¸­ä»»æä¸ä¸ªï¼åªè¦ä¿è¯å¯ç¨å°±okã3ãå°ç³»ç»æ¶é´åå¥ç¡¬ä»¶æ¶é´\n\nhwclock --systohc\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£Jdkå¹¶éç½®ç¯å¢åé",frontmatter:{title:"CentOS 7 å®è£Jdkå¹¶éç½®ç¯å¢åé",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/b65cee/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/05.CentOS%207%20%E5%AE%89%E8%A3%85Jdk%E5%B9%B6%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.html",relativePath:"03.CentOS/01.å¥é¨/05.CentOS 7 å®è£Jdkå¹¶éç½®ç¯å¢åé.md",key:"v-2a54cea8",path:"/pages/b65cee/",headers:[{level:2,title:"ç¯å¢",slug:"ç¯å¢",normalizedTitle:"ç¯å¢",charIndex:19},{level:2,title:"ä¸è½½jdk-8u251-linux-x64.tar.gz",slug:"ä¸è½½jdk-8u251-linux-x64-tar-gz",normalizedTitle:"ä¸è½½jdk-8u251-linux-x64.tar.gz",charIndex:73},{level:2,title:"æ£æ¥åå é¤ç³»ç»é¢è£jdk",slug:"æ£æ¥åå é¤ç³»ç»é¢è£jdk",normalizedTitle:"æ£æ¥åå é¤ç³»ç»é¢è£jdk",charIndex:117},{level:2,title:"ä¸ä¼ jdk-8u251-linux-x64.tar.gzå°/usr/local/src",slug:"ä¸ä¼ jdk-8u251-linux-x64-tar-gzå°-usr-local-src",normalizedTitle:"ä¸ä¼ jdk-8u251-linux-x64.tar.gzå°/usr/local/src",charIndex:309},{level:2,title:"éç½®ç¯å¢åé",slug:"éç½®ç¯å¢åé",normalizedTitle:"éç½®ç¯å¢åé",charIndex:17},{level:2,title:"æ£æ¥jdkæ¯å¦çæ",slug:"æ£æ¥jdkæ¯å¦çæ",normalizedTitle:"æ£æ¥jdkæ¯å¦çæ",charIndex:736}],headersStr:"ç¯å¢ ä¸è½½jdk-8u251-linux-x64.tar.gz æ£æ¥åå é¤ç³»ç»é¢è£jdk ä¸ä¼ jdk-8u251-linux-x64.tar.gzå°/usr/local/src éç½®ç¯å¢åé æ£æ¥jdkæ¯å¦çæ",content:'# CentOS 7 å®è£Jdkå¹¶éç½®ç¯å¢åé\n\n\n# ç¯å¢\n\nCentOS Linux release 7.8.2003 (Core)\n\n\n# ä¸è½½jdk-8u251-linux-x64.tar.gz\n\né¾æ¥å°åï¼å®æ¹å°å\n\n\n# æ£æ¥åå é¤ç³»ç»é¢è£jdk\n\nå¦ææä½ç³»ç»ä¸æ¯æå°å®è£ï¼ä¼é»è®¤å®è£openjdk\n\nrpm -qa | grep java\n\n\nå é¤ç³»ç»é¢è£jdkï¼å¯ä»¥ä¸æ¡å½ä»¤ç´æ¥å é¤\n\nrpm -e --nodeps `rpm -qa | grep java`\n\n\nè¾å¥java -versionæµè¯ï¼æç¤ºbash: java: command not foundè¡¨é¢openjdkå·²ç»å é¤\n\n\n# ä¸ä¼ jdk-8u251-linux-x64.tar.gzå°/usr/local/src\n\næ°å»º/usr/local/java\n\nmkdir -p /usr/local/java\n\n\næjdkè§£åå°javaç®å½ä¸\n\ntar -zxvf /usr/local/src/jdk-8u251-linux-x64.tar.gz -C /usr/local/java\n\n\n\n# éç½®ç¯å¢åé\n\nvim /etc/profile\n\n\nå¨æä»¶æ«å°¾æå¥å¦ä¸åå®¹\n\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_251\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n\n\næ§è¡profile\n\nsource /etc/profile\n\n\n\n# æ£æ¥jdkæ¯å¦çæ\n\n[root@localhost src]# java -version \njava version "1.8.0_251"\nJava(TM) SE Runtime Environment (build 1.8.0_251-b08)\nJava HotSpot(TM) 64-Bit Server VM (build 25.251-b08, mixed mode)\n\n\nå°æ­¤ï¼å®è£éç½®æå',normalizedContent:'# centos 7 å®è£jdkå¹¶éç½®ç¯å¢åé\n\n\n# ç¯å¢\n\ncentos linux release 7.8.2003 (core)\n\n\n# ä¸è½½jdk-8u251-linux-x64.tar.gz\n\né¾æ¥å°åï¼å®æ¹å°å\n\n\n# æ£æ¥åå é¤ç³»ç»é¢è£jdk\n\nå¦ææä½ç³»ç»ä¸æ¯æå°å®è£ï¼ä¼é»è®¤å®è£openjdk\n\nrpm -qa | grep java\n\n\nå é¤ç³»ç»é¢è£jdkï¼å¯ä»¥ä¸æ¡å½ä»¤ç´æ¥å é¤\n\nrpm -e --nodeps `rpm -qa | grep java`\n\n\nè¾å¥java -versionæµè¯ï¼æç¤ºbash: java: command not foundè¡¨é¢openjdkå·²ç»å é¤\n\n\n# ä¸ä¼ jdk-8u251-linux-x64.tar.gzå°/usr/local/src\n\næ°å»º/usr/local/java\n\nmkdir -p /usr/local/java\n\n\næjdkè§£åå°javaç®å½ä¸\n\ntar -zxvf /usr/local/src/jdk-8u251-linux-x64.tar.gz -c /usr/local/java\n\n\n\n# éç½®ç¯å¢åé\n\nvim /etc/profile\n\n\nå¨æä»¶æ«å°¾æå¥å¦ä¸åå®¹\n\nexport java_home=/usr/local/java/jdk1.8.0_251\nexport jre_home=${java_home}/jre\nexport classpath=.:${java_home}/lib:${jre_home}/lib\nexport path=${java_home}/bin:$path\n\n\næ§è¡profile\n\nsource /etc/profile\n\n\n\n# æ£æ¥jdkæ¯å¦çæ\n\n[root@localhost src]# java -version \njava version "1.8.0_251"\njava(tm) se runtime environment (build 1.8.0_251-b08)\njava hotspot(tm) 64-bit server vm (build 25.251-b08, mixed mode)\n\n\nå°æ­¤ï¼å®è£éç½®æå',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 éç½®éæipåå¨æip",frontmatter:{title:"CentOS 7 éç½®éæipåå¨æip",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/8a00d6/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/06.CentOS%207%20%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81ip%E5%92%8C%E5%8A%A8%E6%80%81ip.html",relativePath:"03.CentOS/01.å¥é¨/06.CentOS 7 éç½®éæipåå¨æip.md",key:"v-0a4aaf0e",path:"/pages/8a00d6/",headers:[{level:2,title:"éç½®å¨æip",slug:"éç½®å¨æip",normalizedTitle:"éç½®å¨æip",charIndex:945},{level:3,title:"ä¿®æ¹ç½ç»éç½®",slug:"ä¿®æ¹ç½ç»éç½®",normalizedTitle:"ä¿®æ¹ç½ç»éç½®",charIndex:979},{level:3,title:"éå¯ç½ç»æå¡",slug:"éå¯ç½ç»æå¡",normalizedTitle:"éå¯ç½ç»æå¡",charIndex:1450},{level:2,title:"éç½®éæIP",slug:"éç½®éæip",normalizedTitle:"éç½®éæip",charIndex:2910},{level:3,title:"éå¯ç½ç»æå¡",slug:"éå¯ç½ç»æå¡-2",normalizedTitle:"éå¯ç½ç»æå¡",charIndex:1450},{level:3,title:"å®æ´éç½®",slug:"å®æ´éç½®",normalizedTitle:"å®æ´éç½®",charIndex:3224},{level:3,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:3746}],headersStr:"éç½®å¨æip ä¿®æ¹ç½ç»éç½® éå¯ç½ç»æå¡ éç½®éæIP éå¯ç½ç»æå¡ å®æ´éç½® æµè¯",content:'# CentOS 7 éç½®éæipåå¨æip\n\næå³äºcentos7è·åIPå°åçæ¹æ³ä¸»è¦æä¸¤ç§ï¼1ï¼å¨æè·åipï¼2ï¼è®¾ç½®éæIPå°å\n\nå¨éç½®ç½ç»ä¹åæä»¬åè¦ç¥écentosçç½å¡åç§°æ¯ä»ä¹ï¼centos7ä¸åä½¿ç¨ifconfigå½ä»¤ï¼å¯éè¿å½ä»¤ip addræ¥çï¼å¦å¾ï¼ç½å¡åä¸ºens32ï¼æ¯æ²¡æIPå°åç ç¼è¾ç½ç»éç½®æä»¶ä¹åï¼åæ¥çèªå·±çç½å¡åç§°ï¼æçæ¯ens192ã\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n[root@localhost ~]# ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000\n    link/ether 00:0c:29:39:a7:f7 brd ff:ff:ff:ff:ff:ff\n    inet 10.17.8.230/16 brd 10.17.255.255 scope global noprefixroute dynamic ens192\n       valid_lft 85701sec preferred_lft 85701sec\n    inet6 fe80::6f32:b40:a205:a076/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever\n\n\n\n# éç½®å¨æip\n\næç¤º\n\nåææ¯ä½ çè·¯ç±å¨å·²ç»å¼å¯äºDHCP\n\n\n# ä¿®æ¹ç½ç»éç½®\n\nä¿®æ¹ç½å¡éç½®æä»¶ (ens192ä¸ºç½å¡åç§°)\n\nvi /etc/sysconfig/network-scripts/ifcfg-ens192\n\n\nå¨æè·åIPå°åéè¦ä¿®æ¹ä¸¤å¤å°æ¹å³å¯\n\n * bootproto=dhcp\n * onboot=yes\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nÂ \n\n\nTYPE="Ethernet"\nPROXY_METHOD="none"\nBROWSER_ONLY="no"\nBOOTPROTO="dhcp"\nDEFROUTE="yes"\nIPV4_FAILURE_FATAL="no"\nIPV6INIT="yes"\nIPV6_AUTOCONF="yes"\nIPV6_DEFROUTE="yes"\nIPV6_FAILURE_FATAL="no"\nIPV6_ADDR_GEN_MODE="stable-privacy"\nNAME="ens192"\nUUID="fcc9095d-1ce4-421c-a2ca-a38e74b9622e"\nDEVICE="ens192"\nONBOOT="yes"\n\n\n\n# éå¯ç½ç»æå¡\n\nsystemctl restart network.service\n\n\nè¿æ ·å¨æéç½®IPå°åå°±è®¾ç½®å¥½äºï¼è¿ä¸ªæ¶ååæ¥çä¸ä¸ip addr å°±å¯ä»¥çå°å·²ç»è·åäºIPå°åï¼ä¸å¯ä»¥ä¸ç½ï¼ping ç¾åº¦ï¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000\n    link/ether 00:0c:29:39:a7:f7 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.1.100/16 brd 10.17.255.255 scope global noprefixroute dynamic ens192\n       valid_lft 85112sec preferred_lft 85112sec\n    inet6 fe80::6f32:b40:a205:a076/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ping www.baidu.com\nPING www.a.shifen.com (180.101.49.11) 56(84) bytes of data.\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=1 ttl=47 time=24.6 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=2 ttl=47 time=24.4 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=3 ttl=47 time=24.5 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=4 ttl=47 time=24.5 ms\n^C\n--- www.a.shifen.com ping statistics ---\n4 packets transmitted, 4 received, 0% packet loss, time 3004ms\nrtt min/avg/max/mdev = 24.408/24.530/24.600/0.206 ms\n[root@localhost ~]# \n\n\n\n# éç½®éæIP\n\nè®¾ç½®éæIPå°åä¸å¨æIPå·®ä¸å¤ï¼ä¹æ¯è¦ä¿®æ¹ç½å¡éç½®æä»¶ã(ens192ä¸ºç½å¡åç§°)\n\nvi /etc/sysconfig/network-scripts/ifcfg-ens192\n\n\n * bootproto=static\n * onboot=yes\n\nå¨æåå ä¸å è¡ï¼IPå°åãå­ç½æ©ç ãç½å³ãdnsæå¡å¨\n\nIPADDR=192.168.1.100\nNETMASK=255.255.255.0\nGATEWAY=192.168.1.1\nDNS1=114.114.114.114\nDNS2=8.8.8.8\n\n\n\n# éå¯ç½ç»æå¡\n\nsystemctl restart network.service\n\n\n\n# å®æ´éç½®\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n[root@localhost ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens192 \nTYPE="Ethernet"\nPROXY_METHOD="none"\nBROWSER_ONLY="no"\nBOOTPROTO="static"\nDEFROUTE="yes"\nIPV4_FAILURE_FATAL="no"\nIPV6INIT="yes"\nIPV6_AUTOCONF="yes"\nIPV6_DEFROUTE="yes"\nIPV6_FAILURE_FATAL="no"\nIPV6_ADDR_GEN_MODE="stable-privacy"\nNAME="ens192"\nUUID="fcc9095d-1ce4-421c-a2ca-a38e74b9622e"\nDEVICE="ens192"\nONBOOT="yes"\nIPADDR=192.168.1.100\nNETMASK=255.255.255.0\nGATEWAY=192.168.1.1\nDNS1=114.114.114.114\nDNS2=8.8.8.8\n\n\n\n# æµè¯\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000\n    link/ether 00:0c:29:39:a7:f7 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.1.100/16 brd 10.17.255.255 scope global noprefixroute dynamic ens192\n       valid_lft 85112sec preferred_lft 85112sec\n    inet6 fe80::6f32:b40:a205:a076/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ping www.baidu.com\nPING www.a.shifen.com (180.101.49.11) 56(84) bytes of data.\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=1 ttl=47 time=24.6 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=2 ttl=47 time=24.4 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=3 ttl=47 time=24.5 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=4 ttl=47 time=24.5 ms\n^C\n--- www.a.shifen.com ping statistics ---\n4 packets transmitted, 4 received, 0% packet loss, time 3004ms\nrtt min/avg/max/mdev = 24.408/24.530/24.600/0.206 ms\n[root@localhost ~]# \n',normalizedContent:'# centos 7 éç½®éæipåå¨æip\n\næå³äºcentos7è·åipå°åçæ¹æ³ä¸»è¦æä¸¤ç§ï¼1ï¼å¨æè·åipï¼2ï¼è®¾ç½®éæipå°å\n\nå¨éç½®ç½ç»ä¹åæä»¬åè¦ç¥écentosçç½å¡åç§°æ¯ä»ä¹ï¼centos7ä¸åä½¿ç¨ifconfigå½ä»¤ï¼å¯éè¿å½ä»¤ip addræ¥çï¼å¦å¾ï¼ç½å¡åä¸ºens32ï¼æ¯æ²¡æipå°åç ç¼è¾ç½ç»éç½®æä»¶ä¹åï¼åæ¥çèªå·±çç½å¡åç§°ï¼æçæ¯ens192ã\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n[root@localhost ~]# ip addr\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: ens192: <broadcast,multicast,up,lower_up> mtu 1500 qdisc mq state up group default qlen 1000\n    link/ether 00:0c:29:39:a7:f7 brd ff:ff:ff:ff:ff:ff\n    inet 10.17.8.230/16 brd 10.17.255.255 scope global noprefixroute dynamic ens192\n       valid_lft 85701sec preferred_lft 85701sec\n    inet6 fe80::6f32:b40:a205:a076/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever\n\n\n\n# éç½®å¨æip\n\næç¤º\n\nåææ¯ä½ çè·¯ç±å¨å·²ç»å¼å¯äºdhcp\n\n\n# ä¿®æ¹ç½ç»éç½®\n\nä¿®æ¹ç½å¡éç½®æä»¶ (ens192ä¸ºç½å¡åç§°)\n\nvi /etc/sysconfig/network-scripts/ifcfg-ens192\n\n\nå¨æè·åipå°åéè¦ä¿®æ¹ä¸¤å¤å°æ¹å³å¯\n\n * bootproto=dhcp\n * onboot=yes\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nÂ \n\n\ntype="ethernet"\nproxy_method="none"\nbrowser_only="no"\nbootproto="dhcp"\ndefroute="yes"\nipv4_failure_fatal="no"\nipv6init="yes"\nipv6_autoconf="yes"\nipv6_defroute="yes"\nipv6_failure_fatal="no"\nipv6_addr_gen_mode="stable-privacy"\nname="ens192"\nuuid="fcc9095d-1ce4-421c-a2ca-a38e74b9622e"\ndevice="ens192"\nonboot="yes"\n\n\n\n# éå¯ç½ç»æå¡\n\nsystemctl restart network.service\n\n\nè¿æ ·å¨æéç½®ipå°åå°±è®¾ç½®å¥½äºï¼è¿ä¸ªæ¶ååæ¥çä¸ä¸ip addr å°±å¯ä»¥çå°å·²ç»è·åäºipå°åï¼ä¸å¯ä»¥ä¸ç½ï¼ping ç¾åº¦ï¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# ip addr\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: ens192: <broadcast,multicast,up,lower_up> mtu 1500 qdisc mq state up group default qlen 1000\n    link/ether 00:0c:29:39:a7:f7 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.1.100/16 brd 10.17.255.255 scope global noprefixroute dynamic ens192\n       valid_lft 85112sec preferred_lft 85112sec\n    inet6 fe80::6f32:b40:a205:a076/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ping www.baidu.com\nping www.a.shifen.com (180.101.49.11) 56(84) bytes of data.\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=1 ttl=47 time=24.6 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=2 ttl=47 time=24.4 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=3 ttl=47 time=24.5 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=4 ttl=47 time=24.5 ms\n^c\n--- www.a.shifen.com ping statistics ---\n4 packets transmitted, 4 received, 0% packet loss, time 3004ms\nrtt min/avg/max/mdev = 24.408/24.530/24.600/0.206 ms\n[root@localhost ~]# \n\n\n\n# éç½®éæip\n\nè®¾ç½®éæipå°åä¸å¨æipå·®ä¸å¤ï¼ä¹æ¯è¦ä¿®æ¹ç½å¡éç½®æä»¶ã(ens192ä¸ºç½å¡åç§°)\n\nvi /etc/sysconfig/network-scripts/ifcfg-ens192\n\n\n * bootproto=static\n * onboot=yes\n\nå¨æåå ä¸å è¡ï¼ipå°åãå­ç½æ©ç ãç½å³ãdnsæå¡å¨\n\nipaddr=192.168.1.100\nnetmask=255.255.255.0\ngateway=192.168.1.1\ndns1=114.114.114.114\ndns2=8.8.8.8\n\n\n\n# éå¯ç½ç»æå¡\n\nsystemctl restart network.service\n\n\n\n# å®æ´éç½®\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n[root@localhost ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens192 \ntype="ethernet"\nproxy_method="none"\nbrowser_only="no"\nbootproto="static"\ndefroute="yes"\nipv4_failure_fatal="no"\nipv6init="yes"\nipv6_autoconf="yes"\nipv6_defroute="yes"\nipv6_failure_fatal="no"\nipv6_addr_gen_mode="stable-privacy"\nname="ens192"\nuuid="fcc9095d-1ce4-421c-a2ca-a38e74b9622e"\ndevice="ens192"\nonboot="yes"\nipaddr=192.168.1.100\nnetmask=255.255.255.0\ngateway=192.168.1.1\ndns1=114.114.114.114\ndns2=8.8.8.8\n\n\n\n# æµè¯\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# ip addr\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: ens192: <broadcast,multicast,up,lower_up> mtu 1500 qdisc mq state up group default qlen 1000\n    link/ether 00:0c:29:39:a7:f7 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.1.100/16 brd 10.17.255.255 scope global noprefixroute dynamic ens192\n       valid_lft 85112sec preferred_lft 85112sec\n    inet6 fe80::6f32:b40:a205:a076/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ping www.baidu.com\nping www.a.shifen.com (180.101.49.11) 56(84) bytes of data.\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=1 ttl=47 time=24.6 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=2 ttl=47 time=24.4 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=3 ttl=47 time=24.5 ms\n64 bytes from 180.101.49.11 (180.101.49.11): icmp_seq=4 ttl=47 time=24.5 ms\n^c\n--- www.a.shifen.com ping statistics ---\n4 packets transmitted, 4 received, 0% packet loss, time 3004ms\nrtt min/avg/max/mdev = 24.408/24.530/24.600/0.206 ms\n[root@localhost ~]# \n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ Nginx",frontmatter:{title:"CentOS 7 å®è£ Nginx",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/2bd107/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/07.CentOS%207%20%E5%AE%89%E8%A3%85%20Nginx.html",relativePath:"03.CentOS/01.å¥é¨/07.CentOS 7 å®è£ Nginx.md",key:"v-93569b68",path:"/pages/2bd107/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:24},{level:2,title:"æ·»å æº",slug:"æ·»å æº",normalizedTitle:"æ·»å æº",charIndex:704},{level:2,title:"å®è£Nginx",slug:"å®è£nginx",normalizedTitle:"å®è£nginx",charIndex:881}],headersStr:"æ¦è¿° æ·»å æº å®è£Nginx",content:"# CentOS 7 å®è£ Nginx\n\n\n# æ¦è¿°\n\nNginx (engine x) æ¯ä¸ä¸ªé«æ§è½çHTTP (opens new window)åååä»£ç (opens new window)webæå¡å¨ï¼åæ¶ä¹æä¾äºIMAP/POP3/SMTPæå¡ (opens new window)ãNginxæ¯ç±ä¼æå°Â·èµç´¢è¶å¤«ä¸ºä¿ç½æ¯ (opens new window)è®¿é®éç¬¬äºçRambler.ruç«ç¹ï¼ä¿æï¼Ð Ð°Ð¼Ð±Ð»ÐµÑï¼å¼åçï¼ç¬¬ä¸ä¸ªå¬å¼çæ¬0.1.0åå¸äº2004å¹´10æ4æ¥ã\n\nå¶å°æºä»£ç  (opens new window)ä»¥ç±»BSDè®¸å¯è¯çå½¢å¼åå¸ï¼å å®çç¨³å®æ§ãä¸°å¯çåè½éãç¤ºä¾éç½®æä»¶åä½ç³»ç»èµæºçæ¶èèé»å (opens new window)ã2011å¹´6æ1æ¥ï¼nginx 1.0.4åå¸ã\n\nNginxæ¯ä¸æ¬¾è½»éçº§ (opens new window)çWeb (opens new window)æå¡å¨/ååä»£ç (opens new window)æå¡å¨åçµå­é®ä»¶ (opens new window)ï¼IMAP/POP3ï¼ä»£çæå¡å¨ï¼å¨BSD-like åè®®ä¸åè¡ãå¶ç¹ç¹æ¯å æåå­å°ï¼å¹¶å (opens new window)è½åå¼ºï¼äºå®ä¸nginxçå¹¶åè½åå¨åç±»åçç½é¡µæå¡å¨ä¸­è¡¨ç°è¾å¥½ï¼ä¸­å½å¤§éä½¿ç¨nginxç½ç«ç¨æ·æï¼ç¾åº¦ãäº¬ä¸ (opens new window)ãæ°æµª (opens new window)ãç½æ (opens new window)ãè¾è®¯ (opens new window)ãæ·å® (opens new window)ç­ã\n\n\n# æ·»å æº\n\né»è®¤æåµCentos7ä¸­æ Nginxçæºï¼æè¿åç°Nginxå®ç½æä¾äºCentosçæºå°åãå æ­¤å¯ä»¥å¦ä¸æ§è¡å½ä»¤æ·»å æºï¼\n\nsudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n\n\n\n# å®è£Nginx\n\néè¿yum search nginxççæ¯å¦å·²ç»æ·»å æºæåãå¦ææååæ§è¡ä¸åå½ä»¤å®è£Nginxã\n\nyum install -y nginx\n\n\nå¯å¨Nginx\n\nsystemctl start nginx.service\n\n\nè®¾ç½®å¼æºèªå¨è¿è¡\n\nsystemctl enable nginx.service\n\n\næµè§å¨è®¿é®ï¼http://serverIP,å³å¯çå°nginxçé»è®¤æ¬¢è¿é¡µé¢\n\nè³æ­¤ï¼nginxé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",normalizedContent:"# centos 7 å®è£ nginx\n\n\n# æ¦è¿°\n\nnginx (engine x) æ¯ä¸ä¸ªé«æ§è½çhttp (opens new window)åååä»£ç (opens new window)webæå¡å¨ï¼åæ¶ä¹æä¾äºimap/pop3/smtpæå¡ (opens new window)ãnginxæ¯ç±ä¼æå°Â·èµç´¢è¶å¤«ä¸ºä¿ç½æ¯ (opens new window)è®¿é®éç¬¬äºçrambler.ruç«ç¹ï¼ä¿æï¼ÑÐ°Ð¼Ð±Ð»ÐµÑï¼å¼åçï¼ç¬¬ä¸ä¸ªå¬å¼çæ¬0.1.0åå¸äº2004å¹´10æ4æ¥ã\n\nå¶å°æºä»£ç  (opens new window)ä»¥ç±»bsdè®¸å¯è¯çå½¢å¼åå¸ï¼å å®çç¨³å®æ§ãä¸°å¯çåè½éãç¤ºä¾éç½®æä»¶åä½ç³»ç»èµæºçæ¶èèé»å (opens new window)ã2011å¹´6æ1æ¥ï¼nginx 1.0.4åå¸ã\n\nnginxæ¯ä¸æ¬¾è½»éçº§ (opens new window)çweb (opens new window)æå¡å¨/ååä»£ç (opens new window)æå¡å¨åçµå­é®ä»¶ (opens new window)ï¼imap/pop3ï¼ä»£çæå¡å¨ï¼å¨bsd-like åè®®ä¸åè¡ãå¶ç¹ç¹æ¯å æåå­å°ï¼å¹¶å (opens new window)è½åå¼ºï¼äºå®ä¸nginxçå¹¶åè½åå¨åç±»åçç½é¡µæå¡å¨ä¸­è¡¨ç°è¾å¥½ï¼ä¸­å½å¤§éä½¿ç¨nginxç½ç«ç¨æ·æï¼ç¾åº¦ãäº¬ä¸ (opens new window)ãæ°æµª (opens new window)ãç½æ (opens new window)ãè¾è®¯ (opens new window)ãæ·å® (opens new window)ç­ã\n\n\n# æ·»å æº\n\né»è®¤æåµcentos7ä¸­æ nginxçæºï¼æè¿åç°nginxå®ç½æä¾äºcentosçæºå°åãå æ­¤å¯ä»¥å¦ä¸æ§è¡å½ä»¤æ·»å æºï¼\n\nsudo rpm -uvh http://nginx.org/packages/centos/7/noarch/rpms/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n\n\n\n# å®è£nginx\n\néè¿yum search nginxççæ¯å¦å·²ç»æ·»å æºæåãå¦ææååæ§è¡ä¸åå½ä»¤å®è£nginxã\n\nyum install -y nginx\n\n\nå¯å¨nginx\n\nsystemctl start nginx.service\n\n\nè®¾ç½®å¼æºèªå¨è¿è¡\n\nsystemctl enable nginx.service\n\n\næµè§å¨è®¿é®ï¼http://serverip,å³å¯çå°nginxçé»è®¤æ¬¢è¿é¡µé¢\n\nè³æ­¤ï¼nginxé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",charsets:{cyrillic:!0,cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ Tomcat",frontmatter:{title:"CentOS 7 å®è£ Tomcat",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/b0c71d/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/08.CentOS%207%20%E5%AE%89%E8%A3%85%20Tomcat.html",relativePath:"03.CentOS/01.å¥é¨/08.CentOS 7 å®è£ Tomcat.md",key:"v-eba23aa0",path:"/pages/b0c71d/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:25},{level:2,title:"Tomcat ä¸è½½åè§£å",slug:"tomcat-ä¸è½½åè§£å",normalizedTitle:"tomcat ä¸è½½åè§£å",charIndex:290},{level:2,title:"è®¾ç½®å¼å¯å¯å¨",slug:"è®¾ç½®å¼å¯å¯å¨",normalizedTitle:"è®¾ç½®å¼å¯å¯å¨",charIndex:639},{level:3,title:"ä¸ºTomcatæ·»å å¯å¨åæ°",slug:"ä¸ºtomcatæ·»å å¯å¨åæ°",normalizedTitle:"ä¸ºtomcatæ·»å å¯å¨åæ°",charIndex:679},{level:3,title:"ç¼åtomcat.serviceæä»¶",slug:"ç¼åtomcat-serviceæä»¶",normalizedTitle:"ç¼åtomcat.serviceæä»¶",charIndex:1018},{level:3,title:"å°Tomcatå å¥æå¡ç®¡ç",slug:"å°tomcatå å¥æå¡ç®¡ç",normalizedTitle:"å°tomcatå å¥æå¡ç®¡ç",charIndex:1549}],headersStr:"æ¦è¿° Tomcat ä¸è½½åè§£å è®¾ç½®å¼å¯å¯å¨ ä¸ºTomcatæ·»å å¯å¨åæ° ç¼åtomcat.serviceæä»¶ å°Tomcatå å¥æå¡ç®¡ç",content:'# CentOS 7 å®è£ Tomcat\n\n\n# æ¦è¿°\n\nTomcatæ¯Apache è½¯ä»¶åºéä¼ï¼Apache Software Foundationï¼çJakarta é¡¹ç®ä¸­çä¸ä¸ªæ ¸å¿é¡¹ç®ï¼ç±ApacheãSun åå¶ä»ä¸äºå¬å¸åä¸ªäººå±åå¼åèæãç±äºæäºSun çåä¸åæ¯æï¼ææ°çServlet åJSP è§èæ»æ¯è½å¨Tomcat ä¸­å¾å°ä½ç°ï¼Tomcat 5æ¯æææ°çServlet 2.4 åJSP 2.0 è§èãå ä¸ºTomcat ææ¯åè¿ãæ§è½ç¨³å®ï¼èä¸åè´¹ï¼å èæ·±åJava ç±å¥½èçåç±å¹¶å¾å°äºé¨åè½¯ä»¶å¼ååçè®¤å¯ï¼æä¸ºç®åæ¯è¾æµè¡çWeb åºç¨æå¡å¨ã\n\n\n# Tomcat ä¸è½½åè§£å\n\nSetup 1 :åæ¢ç®å½\n\ncd /opt\n\n\nSetup 2 :ä¸è½½tomcat8\n\nwget https://archive.apache.org/dist/tomcat/tomcat-8/v8.0.53/bin/apache-tomcat-8.0.53.tar.gz\n\n\nSetup 3 :è§£å\n\ntar -zxvf apache-tomcat-8.0.53.tar.gz\n\n\nSetup 4 :åå»ºç¬¦å·é¾æ¥tomcat8ï¼å ä¸ºè§£ååºæ¥çååæ¯è¾é¿ï¼ä¸ºäºæ¹ä¾¿\n\nln -s apache-tomcat-8.0.53 tomcat\n\n\nSetup 5 :å¯ä»¥éæ©å é¤tomcatå\n\nrm -rf apache-tomcat-8.0.53.tar.gz\n\n\n\n# è®¾ç½®å¼å¯å¯å¨\n\næç¤º\n\nTomcatçå®è£è·¯å¾ä¸º/opt/tomcat\n\n\n# ä¸ºTomcatæ·»å å¯å¨åæ°\n\ncatalina.shå¨æ§è¡çæ¶åä¼è°ç¨åçº§è·¯å¾ä¸çsetenv.shæ¥è®¾ç½®é¢å¤çç¯å¢åéï¼å æ­¤å¨/opt/tomcat/binè·¯å¾ä¸åå»ºsetenv.shæä»¶ï¼åå®¹å¦ä¸ï¼\n\nexport CATALINA_HOME=/opt/tomcat\nexport CATALINA_BASE=/opt/tomcat\n#è®¾ç½®TomcatçPIDæä»¶\nCATALINA_PID="$CATALINA_BASE/tomcat.pid"\n#æ·»å JVMéé¡¹\nJAVA_OPTS="-server -XX:PermSize=256M -XX:MaxPermSize=1024m -Xms512M -Xmx1024M -XX:MaxNewSize=256m"\n\n\n\n# ç¼åtomcat.serviceæä»¶\n\nå¨/usr/lib/systemd/systemè·¯å¾ä¸æ·»å tomcat.serviceæä»¶ï¼åå®¹å¦ä¸ï¼\n\n[Unit]\nDescription=Tomcat\nAfter=syslog.target network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nPIDFile=/opt/tomcat/tomcat.pid\nExecStart=/opt/tomcat/bin/startup.sh\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s QUIT $MAINPID\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\n\næç¤º\n\nå®ä¹æ§å¶åå [Unit] éç½®äºæå¡çæè¿°ï¼è§å®äºå¨networkå¯å¨ä¹åæ§è¡\n\nå£°ææå¡ç±»å [Service] éç½®æå¡çpidï¼æå¡çå¯å¨ï¼åæ­¢ï¼éå¯\n\nå®è£æå¡ [install] å¨ multi-user.target å¯ç¨æ¶ï¼æä»¬çæå¡ä¹å°±ä¼è¢«å¯ç¨äº\n\n\n# å°Tomcatå å¥æå¡ç®¡ç\n\n# å¼æºèªå¨å¯å¨\nsystemctl enable tomcat.service\n# ç¦ç¨å¼æºèªå¯ä¸\nsystemctl disable tomcat.service\n# å¯å¨æå¡\nsystemctl start tomcat.service\n# åæ­¢æå¡\nsystemctl stop tomcat.service\n# éå¯æå¡\nsystemctl restart tomcat.service\n\n\næµè§å¨è®¿é®ï¼http://serverIP:8080,å³å¯çå°tomcatçé»è®¤æ¬¢è¿é¡µé¢\n\nè³æ­¤ï¼tomcaté¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~',normalizedContent:'# centos 7 å®è£ tomcat\n\n\n# æ¦è¿°\n\ntomcatæ¯apache è½¯ä»¶åºéä¼ï¼apache software foundationï¼çjakarta é¡¹ç®ä¸­çä¸ä¸ªæ ¸å¿é¡¹ç®ï¼ç±apacheãsun åå¶ä»ä¸äºå¬å¸åä¸ªäººå±åå¼åèæãç±äºæäºsun çåä¸åæ¯æï¼ææ°çservlet åjsp è§èæ»æ¯è½å¨tomcat ä¸­å¾å°ä½ç°ï¼tomcat 5æ¯æææ°çservlet 2.4 åjsp 2.0 è§èãå ä¸ºtomcat ææ¯åè¿ãæ§è½ç¨³å®ï¼èä¸åè´¹ï¼å èæ·±åjava ç±å¥½èçåç±å¹¶å¾å°äºé¨åè½¯ä»¶å¼ååçè®¤å¯ï¼æä¸ºç®åæ¯è¾æµè¡çweb åºç¨æå¡å¨ã\n\n\n# tomcat ä¸è½½åè§£å\n\nsetup 1 :åæ¢ç®å½\n\ncd /opt\n\n\nsetup 2 :ä¸è½½tomcat8\n\nwget https://archive.apache.org/dist/tomcat/tomcat-8/v8.0.53/bin/apache-tomcat-8.0.53.tar.gz\n\n\nsetup 3 :è§£å\n\ntar -zxvf apache-tomcat-8.0.53.tar.gz\n\n\nsetup 4 :åå»ºç¬¦å·é¾æ¥tomcat8ï¼å ä¸ºè§£ååºæ¥çååæ¯è¾é¿ï¼ä¸ºäºæ¹ä¾¿\n\nln -s apache-tomcat-8.0.53 tomcat\n\n\nsetup 5 :å¯ä»¥éæ©å é¤tomcatå\n\nrm -rf apache-tomcat-8.0.53.tar.gz\n\n\n\n# è®¾ç½®å¼å¯å¯å¨\n\næç¤º\n\ntomcatçå®è£è·¯å¾ä¸º/opt/tomcat\n\n\n# ä¸ºtomcatæ·»å å¯å¨åæ°\n\ncatalina.shå¨æ§è¡çæ¶åä¼è°ç¨åçº§è·¯å¾ä¸çsetenv.shæ¥è®¾ç½®é¢å¤çç¯å¢åéï¼å æ­¤å¨/opt/tomcat/binè·¯å¾ä¸åå»ºsetenv.shæä»¶ï¼åå®¹å¦ä¸ï¼\n\nexport catalina_home=/opt/tomcat\nexport catalina_base=/opt/tomcat\n#è®¾ç½®tomcatçpidæä»¶\ncatalina_pid="$catalina_base/tomcat.pid"\n#æ·»å jvméé¡¹\njava_opts="-server -xx:permsize=256m -xx:maxpermsize=1024m -xms512m -xmx1024m -xx:maxnewsize=256m"\n\n\n\n# ç¼åtomcat.serviceæä»¶\n\nå¨/usr/lib/systemd/systemè·¯å¾ä¸æ·»å tomcat.serviceæä»¶ï¼åå®¹å¦ä¸ï¼\n\n[unit]\ndescription=tomcat\nafter=syslog.target network.target remote-fs.target nss-lookup.target\n\n[service]\ntype=forking\npidfile=/opt/tomcat/tomcat.pid\nexecstart=/opt/tomcat/bin/startup.sh\nexecreload=/bin/kill -s hup $mainpid\nexecstop=/bin/kill -s quit $mainpid\nprivatetmp=true\n\n[install]\nwantedby=multi-user.target\n\n\næç¤º\n\nå®ä¹æ§å¶åå [unit] éç½®äºæå¡çæè¿°ï¼è§å®äºå¨networkå¯å¨ä¹åæ§è¡\n\nå£°ææå¡ç±»å [service] éç½®æå¡çpidï¼æå¡çå¯å¨ï¼åæ­¢ï¼éå¯\n\nå®è£æå¡ [install] å¨ multi-user.target å¯ç¨æ¶ï¼æä»¬çæå¡ä¹å°±ä¼è¢«å¯ç¨äº\n\n\n# å°tomcatå å¥æå¡ç®¡ç\n\n# å¼æºèªå¨å¯å¨\nsystemctl enable tomcat.service\n# ç¦ç¨å¼æºèªå¯ä¸\nsystemctl disable tomcat.service\n# å¯å¨æå¡\nsystemctl start tomcat.service\n# åæ­¢æå¡\nsystemctl stop tomcat.service\n# éå¯æå¡\nsystemctl restart tomcat.service\n\n\næµè§å¨è®¿é®ï¼http://serverip:8080,å³å¯çå°tomcatçé»è®¤æ¬¢è¿é¡µé¢\n\nè³æ­¤ï¼tomcaté¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ MySQL",frontmatter:{title:"CentOS 7 å®è£ MySQL",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/3748a2/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/09.CentOS%207%20%E5%AE%89%E8%A3%85%20MySQL.html",relativePath:"03.CentOS/01.å¥é¨/09.CentOS 7 å®è£ MySQL.md",key:"v-2d9e6cf8",path:"/pages/3748a2/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:24},{level:2,title:"è®¾ç½®Yumæº",slug:"è®¾ç½®yumæº",normalizedTitle:"è®¾ç½®yumæº",charIndex:385},{level:3,title:"ä¸è½½ MySQL Yum Repository",slug:"ä¸è½½-mysql-yum-repository",normalizedTitle:"ä¸è½½ mysql yum repository",charIndex:396},{level:3,title:"å®è£Yumæº",slug:"å®è£yumæº",normalizedTitle:"å®è£yumæº",charIndex:497},{level:3,title:"éªè¯ä¸æ¯å¦æ·»å æå",slug:"éªè¯ä¸æ¯å¦æ·»å æå",normalizedTitle:"éªè¯ä¸æ¯å¦æ·»å æå",charIndex:617},{level:3,title:"éæ©è¦å¯ç¨ MySQL çæ¬",slug:"éæ©è¦å¯ç¨-mysql-çæ¬",normalizedTitle:"éæ©è¦å¯ç¨ mysql çæ¬",charIndex:683},{level:2,title:"éè¿ Yum æ¥å®è£ MySQL",slug:"éè¿-yum-æ¥å®è£-mysql",normalizedTitle:"éè¿ yum æ¥å®è£ mysql",charIndex:750},{level:2,title:"å¯å¨åå³é­ MySQL Server",slug:"å¯å¨åå³é­-mysql-server",normalizedTitle:"å¯å¨åå³é­ mysql server",charIndex:853},{level:3,title:"å¯å¨ MySQL Server",slug:"å¯å¨-mysql-server",normalizedTitle:"å¯å¨ mysql server",charIndex:876},{level:3,title:"æ¥ç MySQL Server ç¶æ",slug:"æ¥ç-mysql-server-ç¶æ",normalizedTitle:"æ¥ç mysql server ç¶æ",charIndex:929},{level:3,title:"å³é­ MySQL Server",slug:"å³é­-mysql-server",normalizedTitle:"å³é­ mysql server",charIndex:856},{level:3,title:"å¼æºèªå¯å¨",slug:"å¼æºèªå¯å¨",normalizedTitle:"å¼æºèªå¯å¨",charIndex:1038},{level:3,title:"æµè¯æ¯å¦å®è£æå",slug:"æµè¯æ¯å¦å®è£æå",normalizedTitle:"æµè¯æ¯å¦å®è£æå",charIndex:1082},{level:2,title:"MySQL å®å¨è®¾ç½®",slug:"mysql-å®å¨è®¾ç½®",normalizedTitle:"mysql å®å¨è®¾ç½®",charIndex:1103},{level:2,title:"è¿ç¨è®¿é®è®¾ç½®",slug:"è¿ç¨è®¿é®è®¾ç½®",normalizedTitle:"è¿ç¨è®¿é®è®¾ç½®",charIndex:1159},{level:2,title:"ä¿®æ¹éç½®æä»¶",slug:"ä¿®æ¹éç½®æä»¶",normalizedTitle:"ä¿®æ¹éç½®æä»¶",charIndex:1407},{level:2,title:"éå¯ MySQL Server",slug:"éå¯-mysql-server",normalizedTitle:"éå¯ mysql server",charIndex:1683}],headersStr:"æ¦è¿° è®¾ç½®Yumæº ä¸è½½ MySQL Yum Repository å®è£Yumæº éªè¯ä¸æ¯å¦æ·»å æå éæ©è¦å¯ç¨ MySQL çæ¬ éè¿ Yum æ¥å®è£ MySQL å¯å¨åå³é­ MySQL Server å¯å¨ MySQL Server æ¥ç MySQL Server ç¶æ å³é­ MySQL Server å¼æºèªå¯å¨ æµè¯æ¯å¦å®è£æå MySQL å®å¨è®¾ç½® è¿ç¨è®¿é®è®¾ç½® ä¿®æ¹éç½®æä»¶ éå¯ MySQL Server",content:"# CentOS 7 å®è£ MySQL\n\n\n# æ¦è¿°\n\nMySQLæ¯ä¸ä¸ªå³ç³»åæ°æ®åºç®¡çç³»ç»ï¼ç±çå¸MySQL AB å¬å¸å¼åï¼å±äº Oracle æä¸äº§åãMySQL æ¯ææµè¡çå³ç³»åæ°æ®åºç®¡çç³»ç»ä¹ä¸ï¼å¨ WEB åºç¨æ¹é¢ï¼MySQLæ¯æå¥½ç RDBMS (Relational Database Management Systemï¼å³ç³»æ°æ®åºç®¡çç³»ç») åºç¨è½¯ä»¶ä¹ä¸ã\n\nMySQLæ¯ä¸ç§å³ç³»åæ°æ®åºç®¡çç³»ç»ï¼å³ç³»æ°æ®åºå°æ°æ®ä¿å­å¨ä¸åçè¡¨ä¸­ï¼èä¸æ¯å°æææ°æ®æ¾å¨ä¸ä¸ªå¤§ä»åºåï¼è¿æ ·å°±å¢å äºéåº¦å¹¶æé«äºçµæ´»æ§ã\n\nMySQLæä½¿ç¨ç SQL è¯­è¨æ¯ç¨äºè®¿é®æ°æ®åºçæå¸¸ç¨æ ååè¯­è¨ãMySQL è½¯ä»¶éç¨äºåæææ¿ç­ï¼åä¸ºç¤¾åºçååä¸çï¼ç±äºå¶ä½ç§¯å°ãéåº¦å¿«ãæ»ä½æ¥æææ¬ä½ï¼å°¤å¶æ¯å¼æ¾æºç è¿ä¸ç¹ç¹ï¼ä¸è¬ä¸­å°åç½ç«çå¼åé½éæ© MySQL ä½ä¸ºç½ç«æ°æ®åºã\n\n\n# è®¾ç½®Yumæº\n\n\n# ä¸è½½ MySQL Yum Repository\n\nwget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n\n\n\n# å®è£Yumæº\n\næ·»å  MySQL Yum Repository å°ä½ çç³»ç» repository åè¡¨ä¸­ï¼æ§è¡\n\nyum localinstall mysql-community-release-el7-5.noarch.rpm\n\n\n\n# éªè¯ä¸æ¯å¦æ·»å æå\n\nyum repolist enabled | grep \"mysql.*-community.*\"\n\n\n\n# éæ©è¦å¯ç¨ MySQL çæ¬\n\næ¥ç MySQL çæ¬ï¼æ§è¡\n\nyum repolist all | grep mysql\n\n\n\n# éè¿ Yum æ¥å®è£ MySQL\n\nyum install mysql-community-server\n\n\nå¯ä»¥çå° MySQL çå®è£ç®å½æ¯ /usr/bin/\n\nwhereis mysql\n\n\n\n# å¯å¨åå³é­ MySQL Server\n\n\n# å¯å¨ MySQL Server\n\nsystemctl start mysqld.service\n\n\n\n# æ¥ç MySQL Server ç¶æ\n\nsystemctl status mysqld.service\n\n\n\n# å³é­ MySQL Server\n\nsystemctl stop mysqld.service\n\n\n\n# å¼æºèªå¯å¨\n\nsystemctl enable mysqld.service\n\n\n\n# æµè¯æ¯å¦å®è£æå\n\nmysql\n\n\n\n# MySQL å®å¨è®¾ç½®\n\næå¡å¨å¯å¨åï¼å¯ä»¥æ§è¡\n\nmysql_secure_installation\n\n\n\n# è¿ç¨è®¿é®è®¾ç½®\n\nåè®¸mysqlè¿ç¨è®¿é®ï¼mysqlé»è®¤æ¯ä¸åè®¸è¿ç¨è®¿é®ç.\n\nmysql -u root -p xxxx\nmysql>use mysql\nmysql>grant all privileges on *.* to 'root'@'%' identified by 'xxxxx(å¯ç )';\nmysql>flush privileges;\n\n\næ³¨æ\n\næ³¨æä¸å®è¦æ¿æ¢xxxxx(å¯ç )ï¼å¯ç å¯ä»¥åä¸ä¸æ­¥å®å¨éç½®è¿ç¨ä¸­è®¾ç½®çå¯ç ç¸åï¼ä¹å¯ä»¥ä¸åï¼è¿ä¸ªå¯ç ç¨äºè¿ç¨è®¿é®ï¼æ³¨æåºå\n\n\n# ä¿®æ¹éç½®æä»¶\n\nç¼è¾/etc/my.cnfå¨[mysqld]èç¹ä¸æ·»å å¦ä¸åå®¹ï¼\n\nvi /etc/my.cnf\n\n\n[mysqld]\n# å¼å¯è®¡åä»»å¡\nevent_scheduler = on\n# ç©ºé²è¿æ¥è¶æ¶æ¶é´ é»è®¤å¼æ¯8å°æ¶(60*60*8=28800)\nwait_timeout=288000\ninteractive_timeout=288000\n# æå¤§æ°æ®å\nmax_allowed_packet=256M\n# å¨ææ£ç´¢\nft_min_word_len=1\n# åºåå¤§å°åè®¾ç½®\nlower_case_table_names=1\n\n\n\n# éå¯ MySQL Server\n\nsystemctl restart mysqld.service\n\n\nè³æ­¤ï¼MySQL é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",normalizedContent:"# centos 7 å®è£ mysql\n\n\n# æ¦è¿°\n\nmysqlæ¯ä¸ä¸ªå³ç³»åæ°æ®åºç®¡çç³»ç»ï¼ç±çå¸mysql ab å¬å¸å¼åï¼å±äº oracle æä¸äº§åãmysql æ¯ææµè¡çå³ç³»åæ°æ®åºç®¡çç³»ç»ä¹ä¸ï¼å¨ web åºç¨æ¹é¢ï¼mysqlæ¯æå¥½ç rdbms (relational database management systemï¼å³ç³»æ°æ®åºç®¡çç³»ç») åºç¨è½¯ä»¶ä¹ä¸ã\n\nmysqlæ¯ä¸ç§å³ç³»åæ°æ®åºç®¡çç³»ç»ï¼å³ç³»æ°æ®åºå°æ°æ®ä¿å­å¨ä¸åçè¡¨ä¸­ï¼èä¸æ¯å°æææ°æ®æ¾å¨ä¸ä¸ªå¤§ä»åºåï¼è¿æ ·å°±å¢å äºéåº¦å¹¶æé«äºçµæ´»æ§ã\n\nmysqlæä½¿ç¨ç sql è¯­è¨æ¯ç¨äºè®¿é®æ°æ®åºçæå¸¸ç¨æ ååè¯­è¨ãmysql è½¯ä»¶éç¨äºåæææ¿ç­ï¼åä¸ºç¤¾åºçååä¸çï¼ç±äºå¶ä½ç§¯å°ãéåº¦å¿«ãæ»ä½æ¥æææ¬ä½ï¼å°¤å¶æ¯å¼æ¾æºç è¿ä¸ç¹ç¹ï¼ä¸è¬ä¸­å°åç½ç«çå¼åé½éæ© mysql ä½ä¸ºç½ç«æ°æ®åºã\n\n\n# è®¾ç½®yumæº\n\n\n# ä¸è½½ mysql yum repository\n\nwget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n\n\n\n# å®è£yumæº\n\næ·»å  mysql yum repository å°ä½ çç³»ç» repository åè¡¨ä¸­ï¼æ§è¡\n\nyum localinstall mysql-community-release-el7-5.noarch.rpm\n\n\n\n# éªè¯ä¸æ¯å¦æ·»å æå\n\nyum repolist enabled | grep \"mysql.*-community.*\"\n\n\n\n# éæ©è¦å¯ç¨ mysql çæ¬\n\næ¥ç mysql çæ¬ï¼æ§è¡\n\nyum repolist all | grep mysql\n\n\n\n# éè¿ yum æ¥å®è£ mysql\n\nyum install mysql-community-server\n\n\nå¯ä»¥çå° mysql çå®è£ç®å½æ¯ /usr/bin/\n\nwhereis mysql\n\n\n\n# å¯å¨åå³é­ mysql server\n\n\n# å¯å¨ mysql server\n\nsystemctl start mysqld.service\n\n\n\n# æ¥ç mysql server ç¶æ\n\nsystemctl status mysqld.service\n\n\n\n# å³é­ mysql server\n\nsystemctl stop mysqld.service\n\n\n\n# å¼æºèªå¯å¨\n\nsystemctl enable mysqld.service\n\n\n\n# æµè¯æ¯å¦å®è£æå\n\nmysql\n\n\n\n# mysql å®å¨è®¾ç½®\n\næå¡å¨å¯å¨åï¼å¯ä»¥æ§è¡\n\nmysql_secure_installation\n\n\n\n# è¿ç¨è®¿é®è®¾ç½®\n\nåè®¸mysqlè¿ç¨è®¿é®ï¼mysqlé»è®¤æ¯ä¸åè®¸è¿ç¨è®¿é®ç.\n\nmysql -u root -p xxxx\nmysql>use mysql\nmysql>grant all privileges on *.* to 'root'@'%' identified by 'xxxxx(å¯ç )';\nmysql>flush privileges;\n\n\næ³¨æ\n\næ³¨æä¸å®è¦æ¿æ¢xxxxx(å¯ç )ï¼å¯ç å¯ä»¥åä¸ä¸æ­¥å®å¨éç½®è¿ç¨ä¸­è®¾ç½®çå¯ç ç¸åï¼ä¹å¯ä»¥ä¸åï¼è¿ä¸ªå¯ç ç¨äºè¿ç¨è®¿é®ï¼æ³¨æåºå\n\n\n# ä¿®æ¹éç½®æä»¶\n\nç¼è¾/etc/my.cnfå¨[mysqld]èç¹ä¸æ·»å å¦ä¸åå®¹ï¼\n\nvi /etc/my.cnf\n\n\n[mysqld]\n# å¼å¯è®¡åä»»å¡\nevent_scheduler = on\n# ç©ºé²è¿æ¥è¶æ¶æ¶é´ é»è®¤å¼æ¯8å°æ¶(60*60*8=28800)\nwait_timeout=288000\ninteractive_timeout=288000\n# æå¤§æ°æ®å\nmax_allowed_packet=256m\n# å¨ææ£ç´¢\nft_min_word_len=1\n# åºåå¤§å°åè®¾ç½®\nlower_case_table_names=1\n\n\n\n# éå¯ mysql server\n\nsystemctl restart mysqld.service\n\n\nè³æ­¤ï¼mysql é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ MongoDB",frontmatter:{title:"CentOS 7 å®è£ MongoDB",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/866b2e/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/10.CentOS%207%20%E5%AE%89%E8%A3%85%20MongoDB.html",relativePath:"03.CentOS/01.å¥é¨/10.CentOS 7 å®è£ MongoDB.md",key:"v-7d6fc128",path:"/pages/866b2e/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:26},{level:2,title:"åè¨",slug:"åè¨",normalizedTitle:"åè¨",charIndex:279},{level:2,title:"éç½®yumæº",slug:"éç½®yumæº",normalizedTitle:"éç½®yumæº",charIndex:377},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:11},{level:3,title:"ä¿®æ¹éç½®æä»¶",slug:"ä¿®æ¹éç½®æä»¶",normalizedTitle:"ä¿®æ¹éç½®æä»¶",charIndex:733},{level:3,title:"å¯å¨æå¡",slug:"å¯å¨æå¡",normalizedTitle:"å¯å¨æå¡",charIndex:1799},{level:3,title:"è¿æ¥MongoDBæ°æ®åº",slug:"è¿æ¥mongodbæ°æ®åº",normalizedTitle:"è¿æ¥mongodbæ°æ®åº",charIndex:1846},{level:3,title:"åå»ºéªè¯ç¨æ·, æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç ",slug:"åå»ºéªè¯ç¨æ·-æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç ",normalizedTitle:"åå»ºéªè¯ç¨æ·, æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç ",charIndex:1899},{level:3,title:"ä¿®æ¹éç½®æä»¶ï¼å¼å¯è®¤è¯",slug:"ä¿®æ¹éç½®æä»¶-å¼å¯è®¤è¯",normalizedTitle:"ä¿®æ¹éç½®æä»¶ï¼å¼å¯è®¤è¯",charIndex:2032},{level:3,title:"æ·»å ä¸éªè¯ï¼éå¯mongodbæå¡",slug:"æ·»å ä¸éªè¯-éå¯mongodbæå¡",normalizedTitle:"æ·»å ä¸éªè¯ï¼éå¯mongodbæå¡",charIndex:2112},{level:3,title:"ç»å½éªè¯",slug:"ç»å½éªè¯",normalizedTitle:"ç»å½éªè¯",charIndex:2169},{level:3,title:"æ·»å æ®éç¨æ·",slug:"æ·»å æ®éç¨æ·",normalizedTitle:"æ·»å æ®éç¨æ·",charIndex:2270},{level:3,title:"å»ºç«æ®éè´¦æ·",slug:"å»ºç«æ®éè´¦æ·",normalizedTitle:"å»ºç«æ®éè´¦æ·",charIndex:2381},{level:3,title:"æ®éç¨æ·ç»å½",slug:"æ®éç¨æ·ç»å½",normalizedTitle:"æ®éç¨æ·ç»å½",charIndex:2573}],headersStr:"æ¦è¿° åè¨ éç½®yumæº å®è£ ä¿®æ¹éç½®æä»¶ å¯å¨æå¡ è¿æ¥MongoDBæ°æ®åº åå»ºéªè¯ç¨æ·, æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç  ä¿®æ¹éç½®æä»¶ï¼å¼å¯è®¤è¯ æ·»å ä¸éªè¯ï¼éå¯mongodbæå¡ ç»å½éªè¯ æ·»å æ®éç¨æ· å»ºç«æ®éè´¦æ· æ®éç¨æ·ç»å½",content:'# CentOS 7 å®è£ MongoDB\n\n\n# æ¦è¿°\n\nMongoDBæ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨ [1] çæ°æ®åºãç±C++è¯­è¨ç¼åãæ¨å¨ä¸ºWEBåºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\nMongoDBæ¯ä¸ä¸ªä»äºå³ç³»æ°æ®åºåéå³ç³»æ°æ®åºä¹é´çäº§åï¼æ¯éå³ç³»æ°æ®åºå½ä¸­åè½æä¸°å¯ï¼æåå³ç³»æ°æ®åºçãå®æ¯æçæ°æ®ç»æéå¸¸æ¾æ£ï¼æ¯ç±»ä¼¼jsonçbsonæ ¼å¼ï¼å æ­¤å¯ä»¥å­å¨æ¯è¾å¤æçæ°æ®ç±»åãMongoæå¤§çç¹ç¹æ¯å®æ¯æçæ¥è¯¢è¯­è¨éå¸¸å¼ºå¤§ï¼å¶è¯­æ³æç¹ç±»ä¼¼äºé¢åå¯¹è±¡çæ¥è¯¢è¯­è¨ï¼å ä¹å¯ä»¥å®ç°ç±»ä¼¼å³ç³»æ°æ®åºåè¡¨æ¥è¯¢çç»å¤§é¨ååè½ï¼èä¸è¿æ¯æå¯¹æ°æ®å»ºç«ç´¢å¼ã\n\n\n# åè¨\n\nCentOSä¸å®è£epel-releaseçyumæºä¹åå°±å¯ä»¥å®è£MongoDBï¼ä½æ¯çæ¬é½æ¯æ¯è¾èçï¼å¦æä½¿ç¨MongoDBå®æ¹çyumå°±å¯ä»¥å®è£å°æ¯è¾æ°çæ¬çMongoDBã\n\n\n# éç½®yumæº\n\nåå»ºä¸ä¸ª/etc/yum.repos.d/mongodb-org-3.6.repoæä»¶\n\nsudo vi /etc/yum.repos.d/mongodb-org-3.6.repo\n\n\næ·»å å¦ä¸åå®¹ï¼\n\n[mongodb-org-3.6]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc\n\n\n\n# å®è£\n\nsudo yum install -y mongodb-org\n\n\n\n# ä¿®æ¹éç½®æä»¶\n\nsudo vi /etc/mongod.conf\n\n\nå°net.bindIpè®¾ç½®ä¸º0.0.0.0åè®¸è¿ç¨è®¿é®ï¼ä¸»è¦ç¨æ·é¨ç½²è¿ç¨ä¸­çæ°æ®å¯¼å¥åè°è¯ã\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# mongod.conf\n\n# for documentation of all options, see:\n#   http://docs.mongodb.org/manual/reference/configuration-options/\n\n# where to write logging data.\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n\n# Where and how to store data.\nstorage:\n  dbPath: /var/lib/mongo\n  journal:\n    enabled: true\n#  engine:\n#  mmapv1:\n#  wiredTiger:\n\n# how the process runs\nprocessManagement:\n  fork: true  # fork and run in background\n  pidFilePath: /var/run/mongodb/mongod.pid  # location of pidfile\n  timeZoneInfo: /usr/share/zoneinfo\n\n# network interfaces\nnet:\n  port: 27017\n  bindIp: 0.0.0.0  # Listen to local interface only, comment to listen on all interfaces.\n\n#security:\n#  authorization: enabled  # è¿éæ¯å¼å¯éªè¯åè½ï¼ææ¶åå³é­ï¼ç­åå»ºå®rootç¨æ·åå¼èµ·æ¥è¿è¡éªè¯\n#operationProfiling:\n\n#replication:\n\n#sharding:\n\n## Enterprise-Only Options\n\n#auditLog:\n\n#snmp:\n\n\næ³¨æ\n\nåæ³¨éæsecurity.authorizationéç½®ï¼è¿ä¸ªéç½®ç¨äºå¯ç¨æéè®¤è¯ï¼åç»­åå»ºå®ç¨æ·æ¶åæå¼ï¼æ³¨æç©ºæ ¼ç¼©è¿\n\n\n# å¯å¨æå¡\n\nsudo systemctl start mongod.service\n\n\n\n# è¿æ¥MongoDBæ°æ®åº\n\nç´æ¥ä½¿ç¨mongoå½ä»¤è¿è¡è¿æ¥ï¼é»è®¤ç«¯å£æ¯27017\n\nmongo\n\n\n\n# åå»ºéªè¯ç¨æ·, æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\n> use admin\n> db.createUser({user:"root",pwd:"rootpassword",roles:[{role:"root",db:"admin"}]})\n\n\n\n# ä¿®æ¹éç½®æä»¶ï¼å¼å¯è®¤è¯\n\nsudo vi /etc/mongod.conf\n\n\nsecurity:\n  authorization: enabled\n\n\n\n# æ·»å ä¸éªè¯ï¼éå¯mongodbæå¡\n\nsystemctl restart mongod.service\n\n\n\n# ç»å½éªè¯\n\næç¤º\n\næç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\nmongo -u root -p rootpassword --authenticationDatabase admin\n\n\n\n# æ·»å æ®éç¨æ·\n\næç¤º\n\nä½¿ç¨ç¨æ·ç®¡çè´¦æ·ç»å½è®¤è¯ï¼æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\n# mongo\n> use admin\n> db.auth(\'root\', \'rootpassword\')\n1\n\n\n\n# å»ºç«æ®éè´¦æ·\n\nuse portal\n\n\ndb.createUser({\n    "user": "portal",\n    "pwd": "heyuqiang",\n    "roles": [\n        {\n            "role": "readWrite",\n            "db": "portal"\n        }\n    ]\n})\n\n\n\n# æ®éç¨æ·ç»å½\n\ndb.auth(\'portal\', \'heyuqiang\')\n1\n\n\nè³æ­¤ï¼MongoDB é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~',normalizedContent:'# centos 7 å®è£ mongodb\n\n\n# æ¦è¿°\n\nmongodbæ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨ [1] çæ°æ®åºãç±c++è¯­è¨ç¼åãæ¨å¨ä¸ºwebåºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\nmongodbæ¯ä¸ä¸ªä»äºå³ç³»æ°æ®åºåéå³ç³»æ°æ®åºä¹é´çäº§åï¼æ¯éå³ç³»æ°æ®åºå½ä¸­åè½æä¸°å¯ï¼æåå³ç³»æ°æ®åºçãå®æ¯æçæ°æ®ç»æéå¸¸æ¾æ£ï¼æ¯ç±»ä¼¼jsonçbsonæ ¼å¼ï¼å æ­¤å¯ä»¥å­å¨æ¯è¾å¤æçæ°æ®ç±»åãmongoæå¤§çç¹ç¹æ¯å®æ¯æçæ¥è¯¢è¯­è¨éå¸¸å¼ºå¤§ï¼å¶è¯­æ³æç¹ç±»ä¼¼äºé¢åå¯¹è±¡çæ¥è¯¢è¯­è¨ï¼å ä¹å¯ä»¥å®ç°ç±»ä¼¼å³ç³»æ°æ®åºåè¡¨æ¥è¯¢çç»å¤§é¨ååè½ï¼èä¸è¿æ¯æå¯¹æ°æ®å»ºç«ç´¢å¼ã\n\n\n# åè¨\n\ncentosä¸å®è£epel-releaseçyumæºä¹åå°±å¯ä»¥å®è£mongodbï¼ä½æ¯çæ¬é½æ¯æ¯è¾èçï¼å¦æä½¿ç¨mongodbå®æ¹çyumå°±å¯ä»¥å®è£å°æ¯è¾æ°çæ¬çmongodbã\n\n\n# éç½®yumæº\n\nåå»ºä¸ä¸ª/etc/yum.repos.d/mongodb-org-3.6.repoæä»¶\n\nsudo vi /etc/yum.repos.d/mongodb-org-3.6.repo\n\n\næ·»å å¦ä¸åå®¹ï¼\n\n[mongodb-org-3.6]\nname=mongodb repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc\n\n\n\n# å®è£\n\nsudo yum install -y mongodb-org\n\n\n\n# ä¿®æ¹éç½®æä»¶\n\nsudo vi /etc/mongod.conf\n\n\nå°net.bindipè®¾ç½®ä¸º0.0.0.0åè®¸è¿ç¨è®¿é®ï¼ä¸»è¦ç¨æ·é¨ç½²è¿ç¨ä¸­çæ°æ®å¯¼å¥åè°è¯ã\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# mongod.conf\n\n# for documentation of all options, see:\n#   http://docs.mongodb.org/manual/reference/configuration-options/\n\n# where to write logging data.\nsystemlog:\n  destination: file\n  logappend: true\n  path: /var/log/mongodb/mongod.log\n\n# where and how to store data.\nstorage:\n  dbpath: /var/lib/mongo\n  journal:\n    enabled: true\n#  engine:\n#  mmapv1:\n#  wiredtiger:\n\n# how the process runs\nprocessmanagement:\n  fork: true  # fork and run in background\n  pidfilepath: /var/run/mongodb/mongod.pid  # location of pidfile\n  timezoneinfo: /usr/share/zoneinfo\n\n# network interfaces\nnet:\n  port: 27017\n  bindip: 0.0.0.0  # listen to local interface only, comment to listen on all interfaces.\n\n#security:\n#  authorization: enabled  # è¿éæ¯å¼å¯éªè¯åè½ï¼ææ¶åå³é­ï¼ç­åå»ºå®rootç¨æ·åå¼èµ·æ¥è¿è¡éªè¯\n#operationprofiling:\n\n#replication:\n\n#sharding:\n\n## enterprise-only options\n\n#auditlog:\n\n#snmp:\n\n\næ³¨æ\n\nåæ³¨éæsecurity.authorizationéç½®ï¼è¿ä¸ªéç½®ç¨äºå¯ç¨æéè®¤è¯ï¼åç»­åå»ºå®ç¨æ·æ¶åæå¼ï¼æ³¨æç©ºæ ¼ç¼©è¿\n\n\n# å¯å¨æå¡\n\nsudo systemctl start mongod.service\n\n\n\n# è¿æ¥mongodbæ°æ®åº\n\nç´æ¥ä½¿ç¨mongoå½ä»¤è¿è¡è¿æ¥ï¼é»è®¤ç«¯å£æ¯27017\n\nmongo\n\n\n\n# åå»ºéªè¯ç¨æ·, æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\n> use admin\n> db.createuser({user:"root",pwd:"rootpassword",roles:[{role:"root",db:"admin"}]})\n\n\n\n# ä¿®æ¹éç½®æä»¶ï¼å¼å¯è®¤è¯\n\nsudo vi /etc/mongod.conf\n\n\nsecurity:\n  authorization: enabled\n\n\n\n# æ·»å ä¸éªè¯ï¼éå¯mongodbæå¡\n\nsystemctl restart mongod.service\n\n\n\n# ç»å½éªè¯\n\næç¤º\n\næç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\nmongo -u root -p rootpassword --authenticationdatabase admin\n\n\n\n# æ·»å æ®éç¨æ·\n\næç¤º\n\nä½¿ç¨ç¨æ·ç®¡çè´¦æ·ç»å½è®¤è¯ï¼æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\n# mongo\n> use admin\n> db.auth(\'root\', \'rootpassword\')\n1\n\n\n\n# å»ºç«æ®éè´¦æ·\n\nuse portal\n\n\ndb.createuser({\n    "user": "portal",\n    "pwd": "heyuqiang",\n    "roles": [\n        {\n            "role": "readwrite",\n            "db": "portal"\n        }\n    ]\n})\n\n\n\n# æ®éç¨æ·ç»å½\n\ndb.auth(\'portal\', \'heyuqiang\')\n1\n\n\nè³æ­¤ï¼mongodb é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ NodeJS",frontmatter:{title:"CentOS 7 å®è£ NodeJS",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/39ed97/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/11.CentOS%207%20%E5%AE%89%E8%A3%85%20NodeJS.html",relativePath:"03.CentOS/01.å¥é¨/11.CentOS 7 å®è£ NodeJS.md",key:"v-98da2ee0",path:"/pages/39ed97/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:25},{level:2,title:"ä¸è½½",slug:"ä¸è½½",normalizedTitle:"ä¸è½½",charIndex:330},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:11},{level:3,title:"ä¸è½½å®æåè§£å",slug:"ä¸è½½å®æåè§£å",normalizedTitle:"ä¸è½½å®æåè§£å",charIndex:518},{level:3,title:"éå½å",slug:"éå½å",normalizedTitle:"éå½å",charIndex:573},{level:3,title:"éç½®ç¯å¢åé",slug:"éç½®ç¯å¢åé",normalizedTitle:"éç½®ç¯å¢åé",charIndex:624},{level:3,title:"ä¿å­éåºï¼:wqï¼æ§è¡å½ä»¤æ¯æ´æ¹çæ",slug:"ä¿å­éåº-wq-æ§è¡å½ä»¤æ¯æ´æ¹çæ",normalizedTitle:"ä¿å­éåºï¼:wqï¼æ§è¡å½ä»¤æ¯æ´æ¹çæ",charIndex:748},{level:3,title:"æ£æ¥",slug:"æ£æ¥",normalizedTitle:"æ£æ¥",charIndex:793}],headersStr:"æ¦è¿° ä¸è½½ å®è£ ä¸è½½å®æåè§£å éå½å éç½®ç¯å¢åé ä¿å­éåºï¼:wqï¼æ§è¡å½ä»¤æ¯æ´æ¹çæ æ£æ¥",content:"# CentOS 7 å®è£ NodeJS\n\n\n# æ¦è¿°\n\nNode.jsåå¸äº2009å¹´5æï¼ç±Ryan Dahlå¼åï¼æ¯ä¸ä¸ªåºäºChrome V8å¼æçJavaScriptè¿è¡ç¯å¢ï¼ä½¿ç¨äºä¸ä¸ªäºä»¶é©±å¨ãéé»å¡å¼I/Oæ¨¡åï¼ [1] è®©JavaScript è¿è¡å¨æå¡ç«¯çå¼åå¹³å°ï¼å®è®©JavaScriptæä¸ºä¸PHPãPythonãPerlãRubyç­æå¡ç«¯è¯­è¨å¹³èµ·å¹³åçèæ¬è¯­è¨ã [2]\n\nNode.jså¯¹ä¸äºç¹æ®ç¨ä¾è¿è¡ä¼åï¼æä¾æ¿ä»£çAPIï¼ä½¿å¾V8å¨éæµè§å¨ç¯å¢ä¸è¿è¡å¾æ´å¥½ï¼V8å¼ææ§è¡Javascriptçéåº¦éå¸¸å¿«ï¼æ§è½éå¸¸å¥½ï¼åºäºChrome JavaScriptè¿è¡æ¶å»ºç«çå¹³å°ï¼ ç¨äºæ¹ä¾¿å°æ­å»ºååºéåº¦å¿«ãæäºæ©å±çç½ç»åºç¨ã\n\n\n# ä¸è½½\n\né¦åæå¼å®ç½ä¸è½½å°åï¼https://nodejs.org/dist/v11.15.0/\n\næä»¬ä¸è½½ v11.15.0 çæ¬ï¼node-v11.15.0-linux-x64.tar.gz\n\ncd /opt\nwget https://nodejs.org/dist/v11.15.0/node-v11.15.0-linux-x64.tar.gz\n\n\n\n# å®è£\n\n\n# ä¸è½½å®æåè§£å\n\ntar -zxvf node-v11.15.0-linux-x64.tar.gz\n\n\n\n# éå½å\n\nmv node-v11.15.0-linux-x64 node-v11.15.0\n\n\n\n# éç½®ç¯å¢åé\n\nvi /etc/profile\n\n\nå¨æåè¾¹æ·»å \n\n#set for nodejs\nexport NODE_HOME=/opt/node-v11.15.0\nexport PATH=$NODE_HOME/bin:$PATH\n\n\n\n# ä¿å­éåºï¼:wqï¼æ§è¡å½ä»¤æ¯æ´æ¹çæ\n\nsource /etc/profile\n\n\n\n# æ£æ¥\n\nä½¿ç¨å½ä»¤æ¥ççæ¬ï¼åºç°v11.15.0çæ¬å·åè¡¨ç¤ºæå\n\nnode -v\n\n\nè³æ­¤ï¼NodeJS é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",normalizedContent:"# centos 7 å®è£ nodejs\n\n\n# æ¦è¿°\n\nnode.jsåå¸äº2009å¹´5æï¼ç±ryan dahlå¼åï¼æ¯ä¸ä¸ªåºäºchrome v8å¼æçjavascriptè¿è¡ç¯å¢ï¼ä½¿ç¨äºä¸ä¸ªäºä»¶é©±å¨ãéé»å¡å¼i/oæ¨¡åï¼ [1] è®©javascript è¿è¡å¨æå¡ç«¯çå¼åå¹³å°ï¼å®è®©javascriptæä¸ºä¸phpãpythonãperlãrubyç­æå¡ç«¯è¯­è¨å¹³èµ·å¹³åçèæ¬è¯­è¨ã [2]\n\nnode.jså¯¹ä¸äºç¹æ®ç¨ä¾è¿è¡ä¼åï¼æä¾æ¿ä»£çapiï¼ä½¿å¾v8å¨éæµè§å¨ç¯å¢ä¸è¿è¡å¾æ´å¥½ï¼v8å¼ææ§è¡javascriptçéåº¦éå¸¸å¿«ï¼æ§è½éå¸¸å¥½ï¼åºäºchrome javascriptè¿è¡æ¶å»ºç«çå¹³å°ï¼ ç¨äºæ¹ä¾¿å°æ­å»ºååºéåº¦å¿«ãæäºæ©å±çç½ç»åºç¨ã\n\n\n# ä¸è½½\n\né¦åæå¼å®ç½ä¸è½½å°åï¼https://nodejs.org/dist/v11.15.0/\n\næä»¬ä¸è½½ v11.15.0 çæ¬ï¼node-v11.15.0-linux-x64.tar.gz\n\ncd /opt\nwget https://nodejs.org/dist/v11.15.0/node-v11.15.0-linux-x64.tar.gz\n\n\n\n# å®è£\n\n\n# ä¸è½½å®æåè§£å\n\ntar -zxvf node-v11.15.0-linux-x64.tar.gz\n\n\n\n# éå½å\n\nmv node-v11.15.0-linux-x64 node-v11.15.0\n\n\n\n# éç½®ç¯å¢åé\n\nvi /etc/profile\n\n\nå¨æåè¾¹æ·»å \n\n#set for nodejs\nexport node_home=/opt/node-v11.15.0\nexport path=$node_home/bin:$path\n\n\n\n# ä¿å­éåºï¼:wqï¼æ§è¡å½ä»¤æ¯æ´æ¹çæ\n\nsource /etc/profile\n\n\n\n# æ£æ¥\n\nä½¿ç¨å½ä»¤æ¥ççæ¬ï¼åºç°v11.15.0çæ¬å·åè¡¨ç¤ºæå\n\nnode -v\n\n\nè³æ­¤ï¼nodejs é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ Gitlab",frontmatter:{title:"CentOS 7 å®è£ Gitlab",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/5cddbb/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/12.CentOS%207%20%E5%AE%89%E8%A3%85%20Gitlab.html",relativePath:"03.CentOS/01.å¥é¨/12.CentOS 7 å®è£ Gitlab.md",key:"v-9bb044a0",path:"/pages/5cddbb/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:25},{level:2,title:"ä¸è½½",slug:"ä¸è½½",normalizedTitle:"ä¸è½½",charIndex:118},{level:3,title:"å®è£å¹¶éç½®å¿è¦çä¾èµé¡¹",slug:"å®è£å¹¶éç½®å¿è¦çä¾èµé¡¹",normalizedTitle:"å®è£å¹¶éç½®å¿è¦çä¾èµé¡¹",charIndex:282},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:11},{level:3,title:"æ·è´å®è£åå¹¶å®è£",slug:"æ·è´å®è£åå¹¶å®è£",normalizedTitle:"æ·è´å®è£åå¹¶å®è£",charIndex:504},{level:3,title:"ä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£ï¼",slug:"ä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£",normalizedTitle:"ä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£ï¼",charIndex:665},{level:3,title:"éç½®å¹¶å¯å¨GitLab",slug:"éç½®å¹¶å¯å¨gitlab",normalizedTitle:"éç½®å¹¶å¯å¨gitlab",charIndex:792},{level:2,title:"åå»ºAccess Token",slug:"åå»ºaccess-token",normalizedTitle:"åå»ºaccess token",charIndex:877},{level:2,title:"å®å¨å¸è½½å é¤gitlab",slug:"å®å¨å¸è½½å é¤gitlab",normalizedTitle:"å®å¨å¸è½½å é¤gitlab",charIndex:1172},{level:3,title:"åæ­¢gitlab",slug:"åæ­¢gitlab",normalizedTitle:"åæ­¢gitlab",charIndex:1218},{level:3,title:"å¸è½½gitlabï¼æ³¨æè¿éåçæ¯gitlab-ceï¼",slug:"å¸è½½gitlab-æ³¨æè¿éåçæ¯gitlab-ce",normalizedTitle:"å¸è½½gitlabï¼æ³¨æè¿éåçæ¯gitlab-ceï¼",charIndex:1249},{level:3,title:"æ¥çgitlabè¿ç¨",slug:"æ¥çgitlabè¿ç¨",normalizedTitle:"æ¥çgitlabè¿ç¨",charIndex:1299},{level:3,title:"ææç¬¬ä¸ä¸ªè¿ç¨ï¼å°±æ¯å¸¦æå¥½å¤.............çè¿ç¨ï¼",slug:"ææç¬¬ä¸ä¸ªè¿ç¨-å°±æ¯å¸¦æå¥½å¤-çè¿ç¨",normalizedTitle:"ææç¬¬ä¸ä¸ªè¿ç¨ï¼å°±æ¯å¸¦æå¥½å¤.............çè¿ç¨ï¼",charIndex:1337},{level:3,title:"å é¤ææåå«gitlabæä»¶",slug:"å é¤ææåå«gitlabæä»¶",normalizedTitle:"å é¤ææåå«gitlabæä»¶",charIndex:1434},{level:2,title:"éªè¯å®è£",slug:"éªè¯å®è£",normalizedTitle:"éªè¯å®è£",charIndex:1490}],headersStr:"æ¦è¿° ä¸è½½ å®è£å¹¶éç½®å¿è¦çä¾èµé¡¹ å®è£ æ·è´å®è£åå¹¶å®è£ ä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£ï¼ éç½®å¹¶å¯å¨GitLab åå»ºAccess Token å®å¨å¸è½½å é¤gitlab åæ­¢gitlab å¸è½½gitlabï¼æ³¨æè¿éåçæ¯gitlab-ceï¼ æ¥çgitlabè¿ç¨ ææç¬¬ä¸ä¸ªè¿ç¨ï¼å°±æ¯å¸¦æå¥½å¤.............çè¿ç¨ï¼ å é¤ææåå«gitlabæä»¶ éªè¯å®è£",content:"# CentOS 7 å®è£ Gitlab\n\n\n# æ¦è¿°\n\nGitLab æ¯ä¸ä¸ªç¨äºä»åºç®¡çç³»ç»çå¼æºé¡¹ç®ï¼ä½¿ç¨Gitä½ä¸ºä»£ç ç®¡çå·¥å·ï¼å¹¶å¨æ­¤åºç¡ä¸æ­å»ºèµ·æ¥çWebæå¡ãå®è£æ¹æ³æ¯åèGitLabå¨GitHubä¸çWikié¡µé¢ã\n\n\n# ä¸è½½\n\nè®¿é®å®æ¹ä¸è½½å°åï¼https://packages.gitlab.com/gitlab/gitlab-ce\n\næå¼ä¸è½½å°åï¼å¨Search by package name...ä¸æ è¾å¥gitlab-ce-11.8.1-ce.0.el7.x86_64.rpmï¼ä¸è½½Distro/Versionä¸ºel/7çrpmå\n\n\n# å®è£å¹¶éç½®å¿è¦çä¾èµé¡¹\n\nsudo yum install -y curl policycoreutils-python openssh-server\nsudo systemctl enable sshd\nsudo systemctl start sshd\nsudo firewall-cmd --permanent --add-service=http\nsudo systemctl reload firewalld\n\n\n\n# å®è£\n\n\n# æ·è´å®è£åå¹¶å®è£\n\nå°ä¸è½½çgitlab-ce-11.8.1-ce.0.el7.x86_64.rpmå®è£åï¼æ·è´å°æå¡å¨ä»»æç®å½ï¼æ§è¡ä¸ä¸å½ä»¤è¿è¡å®è£ã\n\nrpm -i gitlab-ce-11.8.1-ce.0.el7.x86_64.rpm\n\n\nå®è£è¿ç¨éè¦äºæ¶é´ï¼å¦æåºç°æ¥å¿ï¼åè¯´æå®è£æåã\n\nå®è£æ¥å¿\n\n\n\n# ä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£ï¼\n\nvi /etc/gitlab/gitlab.rb\n\n\næ¾å°external_url 'http://gitlab.example.com'å¹¶ä¿®æ¹ä¸ºå½åæå¡å¨IPæååå°å\n\néç½®æä»¶åå®¹\n\n\n\n# éç½®å¹¶å¯å¨GitLab\n\n# gitlab-ctl reconfigure\n# gitlab-ctl restart\n\n\næç¤º \"ok: run:\"è¡¨ç¤ºå¯å¨æå\n\n\n# åå»ºAccess Token\n\næµè§å¨æå¼é¡µé¢ï¼http://ä¸»æºip/profile/personal_access_tokens\n\nå¾ç\n\nNameéä¾¿å¡«åãè¿ææ¶é´ä¸å¡«é»è®¤æ°¸ä¹ææï¼å¾éæææéï¼ç¹å»Create personal access tokenæé®çætokenã\n\nå¾ç\n\nç¹å»Create personal access tokenæé®å®ææé®ç½®ç°åï¼é¡µé¢ä¸æ¹ä½ç½®æ¾ç¤ºäºæä»¬æ°åå»ºäºaccess tokenãè¯·å¤å¶ä¿å­ï¼é¨ç½²åç«¯é¡¹ç®portal-webéç½®gitlabç¸å³éç½®æ¶ä½¿ç¨ã\n\næ³¨æ\n\néè¦æ³¨æçæ¯è¯¥é¡µé¢åªæ¾ç¤ºä¸æ¬¡ï¼å¦ææ²¡æåæ¶ä¿å­å¯éæ°åå»ºå³å¯ã\n\n\n# å®å¨å¸è½½å é¤gitlab\n\næç¤º\n\nå¦å®è£è¿ç¨ä¸­éå°é®é¢å¯ä»¥å°è¯å®å¨å¸è½½åéæ°å®è£\n\n\n# åæ­¢gitlab\n\ngitlab-ctl stop\n\n\n\n# å¸è½½gitlabï¼æ³¨æè¿éåçæ¯gitlab-ceï¼\n\nrpm -e gitlab-ce\n\n\n\n# æ¥çgitlabè¿ç¨\n\nps aux | grep gitlab\n\n\n\n# ææç¬¬ä¸ä¸ªè¿ç¨ï¼å°±æ¯å¸¦æå¥½å¤.............çè¿ç¨ï¼\n\nkill -9 18777\n\n\nææåï¼å¨ps aux | grep gitlabç¡®è®¤ä¸éï¼è¿ææ²¡ægitlabçè¿ç¨\n\n\n# å é¤ææåå«gitlabæä»¶\n\nfind / -name gitlab | xargs rm -rf\n\n\n\n# éªè¯å®è£\n\næµè§å¨è®¿é®ï¼http://serverIP,å³å¯çå°gitlabçç»å½é¡µé¢ï¼é¦æ¬¡ç»å½è¾å¥ä¸¤æ¬¡æ°å¯ç ï¼å³è®¾ç½®rootç¨æ·çå¯ç ã\n\nè³æ­¤ï¼gitlabé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",normalizedContent:"# centos 7 å®è£ gitlab\n\n\n# æ¦è¿°\n\ngitlab æ¯ä¸ä¸ªç¨äºä»åºç®¡çç³»ç»çå¼æºé¡¹ç®ï¼ä½¿ç¨gitä½ä¸ºä»£ç ç®¡çå·¥å·ï¼å¹¶å¨æ­¤åºç¡ä¸æ­å»ºèµ·æ¥çwebæå¡ãå®è£æ¹æ³æ¯åègitlabå¨githubä¸çwikié¡µé¢ã\n\n\n# ä¸è½½\n\nè®¿é®å®æ¹ä¸è½½å°åï¼https://packages.gitlab.com/gitlab/gitlab-ce\n\næå¼ä¸è½½å°åï¼å¨search by package name...ä¸æ è¾å¥gitlab-ce-11.8.1-ce.0.el7.x86_64.rpmï¼ä¸è½½distro/versionä¸ºel/7çrpmå\n\n\n# å®è£å¹¶éç½®å¿è¦çä¾èµé¡¹\n\nsudo yum install -y curl policycoreutils-python openssh-server\nsudo systemctl enable sshd\nsudo systemctl start sshd\nsudo firewall-cmd --permanent --add-service=http\nsudo systemctl reload firewalld\n\n\n\n# å®è£\n\n\n# æ·è´å®è£åå¹¶å®è£\n\nå°ä¸è½½çgitlab-ce-11.8.1-ce.0.el7.x86_64.rpmå®è£åï¼æ·è´å°æå¡å¨ä»»æç®å½ï¼æ§è¡ä¸ä¸å½ä»¤è¿è¡å®è£ã\n\nrpm -i gitlab-ce-11.8.1-ce.0.el7.x86_64.rpm\n\n\nå®è£è¿ç¨éè¦äºæ¶é´ï¼å¦æåºç°æ¥å¿ï¼åè¯´æå®è£æåã\n\nå®è£æ¥å¿\n\n\n\n# ä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£ï¼\n\nvi /etc/gitlab/gitlab.rb\n\n\næ¾å°external_url 'http://gitlab.example.com'å¹¶ä¿®æ¹ä¸ºå½åæå¡å¨ipæååå°å\n\néç½®æä»¶åå®¹\n\n\n\n# éç½®å¹¶å¯å¨gitlab\n\n# gitlab-ctl reconfigure\n# gitlab-ctl restart\n\n\næç¤º \"ok: run:\"è¡¨ç¤ºå¯å¨æå\n\n\n# åå»ºaccess token\n\næµè§å¨æå¼é¡µé¢ï¼http://ä¸»æºip/profile/personal_access_tokens\n\nå¾ç\n\nnameéä¾¿å¡«åãè¿ææ¶é´ä¸å¡«é»è®¤æ°¸ä¹ææï¼å¾éæææéï¼ç¹å»create personal access tokenæé®çætokenã\n\nå¾ç\n\nç¹å»create personal access tokenæé®å®ææé®ç½®ç°åï¼é¡µé¢ä¸æ¹ä½ç½®æ¾ç¤ºäºæä»¬æ°åå»ºäºaccess tokenãè¯·å¤å¶ä¿å­ï¼é¨ç½²åç«¯é¡¹ç®portal-webéç½®gitlabç¸å³éç½®æ¶ä½¿ç¨ã\n\næ³¨æ\n\néè¦æ³¨æçæ¯è¯¥é¡µé¢åªæ¾ç¤ºä¸æ¬¡ï¼å¦ææ²¡æåæ¶ä¿å­å¯éæ°åå»ºå³å¯ã\n\n\n# å®å¨å¸è½½å é¤gitlab\n\næç¤º\n\nå¦å®è£è¿ç¨ä¸­éå°é®é¢å¯ä»¥å°è¯å®å¨å¸è½½åéæ°å®è£\n\n\n# åæ­¢gitlab\n\ngitlab-ctl stop\n\n\n\n# å¸è½½gitlabï¼æ³¨æè¿éåçæ¯gitlab-ceï¼\n\nrpm -e gitlab-ce\n\n\n\n# æ¥çgitlabè¿ç¨\n\nps aux | grep gitlab\n\n\n\n# ææç¬¬ä¸ä¸ªè¿ç¨ï¼å°±æ¯å¸¦æå¥½å¤.............çè¿ç¨ï¼\n\nkill -9 18777\n\n\nææåï¼å¨ps aux | grep gitlabç¡®è®¤ä¸éï¼è¿ææ²¡ægitlabçè¿ç¨\n\n\n# å é¤ææåå«gitlabæä»¶\n\nfind / -name gitlab | xargs rm -rf\n\n\n\n# éªè¯å®è£\n\næµè§å¨è®¿é®ï¼http://serverip,å³å¯çå°gitlabçç»å½é¡µé¢ï¼é¦æ¬¡ç»å½è¾å¥ä¸¤æ¬¡æ°å¯ç ï¼å³è®¾ç½®rootç¨æ·çå¯ç ã\n\nè³æ­¤ï¼gitlabé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ SonarQube",frontmatter:{title:"CentOS 7 å®è£ SonarQube",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/1dfc9f/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/13.CentOS%207%20%E5%AE%89%E8%A3%85%20SonarQube.html",relativePath:"03.CentOS/01.å¥é¨/13.CentOS 7 å®è£ SonarQube.md",key:"v-12e16df6",path:"/pages/1dfc9f/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:28},{level:2,title:"åç½®æ¡ä»¶",slug:"åç½®æ¡ä»¶",normalizedTitle:"åç½®æ¡ä»¶",charIndex:145},{level:3,title:"æ¥çMySQLå¼æ",slug:"æ¥çmysqlå¼æ",normalizedTitle:"æ¥çmysqlå¼æ",charIndex:200},{level:3,title:"çä½ ç mysql å½åé»è®¤çå­å¨å¼æ:",slug:"çä½ ç-mysql-å½åé»è®¤çå­å¨å¼æ",normalizedTitle:"çä½ ç mysql å½åé»è®¤çå­å¨å¼æ:",charIndex:305},{level:3,title:"ä¿®æ¹ MySQL å­å¨å¼æä¸º InnoDB",slug:"ä¿®æ¹-mysql-å­å¨å¼æä¸º-innodb",normalizedTitle:"ä¿®æ¹ mysql å­å¨å¼æä¸º innodb",charIndex:408},{level:3,title:"éå¯ mysql æå¡å¨",slug:"éå¯-mysql-æå¡å¨",normalizedTitle:"éå¯ mysql æå¡å¨",charIndex:562},{level:3,title:"åæ¬¡ç»å½ MySQL æ¥çé»è®¤å¼æè®¾ç½®æ¯å¦çæ",slug:"åæ¬¡ç»å½-mysql-æ¥çé»è®¤å¼æè®¾ç½®æ¯å¦çæ",normalizedTitle:"åæ¬¡ç»å½ mysql æ¥çé»è®¤å¼æè®¾ç½®æ¯å¦çæ",charIndex:613},{level:2,title:"éç½®innodbbufferpool_size",slug:"éç½®innodb-buffer-pool-size",normalizedTitle:"éç½®innodbbufferpool_size",charIndex:null},{level:2,title:"éç½®querycachesize",slug:"éç½®query-cache-size",normalizedTitle:"éç½®querycachesize",charIndex:null},{level:3,title:"è®¾ç½® MySQL çæ¥è¯¢ç¼å­ querycachesize, æå°è®¾ç½® 15M",slug:"è®¾ç½®-mysql-çæ¥è¯¢ç¼å­-query-cache-size-æå°è®¾ç½®-15m",normalizedTitle:"è®¾ç½® mysql çæ¥è¯¢ç¼å­ querycachesize, æå°è®¾ç½® 15m",charIndex:null},{level:3,title:"éå¯ mysql æå¡å¨",slug:"éå¯-mysql-æå¡å¨-2",normalizedTitle:"éå¯ mysql æå¡å¨",charIndex:562},{level:3,title:"éªè¯ç¼å­è®¾ç½®æ¯å¦çæ:",slug:"éªè¯ç¼å­è®¾ç½®æ¯å¦çæ",normalizedTitle:"éªè¯ç¼å­è®¾ç½®æ¯å¦çæ:",charIndex:1201},{level:2,title:"åå»º sonarqube æ°æ®åº(UTF-8 ç¼ç )",slug:"åå»º-sonarqube-æ°æ®åº-utf-8-ç¼ç ",normalizedTitle:"åå»º sonarqube æ°æ®åº(utf-8 ç¼ç )",charIndex:1264},{level:2,title:"ä¸è½½ SonarQube",slug:"ä¸è½½-sonarqube",normalizedTitle:"ä¸è½½ sonarqube",charIndex:1354},{level:3,title:"åæ¢å°æ®éç¨æ·",slug:"åæ¢å°æ®éç¨æ·",normalizedTitle:"åæ¢å°æ®éç¨æ·",charIndex:1438},{level:3,title:"è§£åå®è£",slug:"è§£åå®è£",normalizedTitle:"è§£åå®è£",charIndex:1556},{level:2,title:"éç½® SonarQube",slug:"éç½®-sonarqube",normalizedTitle:"éç½® sonarqube",charIndex:1626},{level:2,title:"å¯å¨åæµè¯",slug:"å¯å¨åæµè¯",normalizedTitle:"å¯å¨åæµè¯",charIndex:2183},{level:3,title:"åæ¢å°æ®éç¨æ·å¯å¨SonarQube Web Server",slug:"åæ¢å°æ®éç¨æ·å¯å¨sonarqube-web-server",normalizedTitle:"åæ¢å°æ®éç¨æ·å¯å¨sonarqube web server",charIndex:2193},{level:3,title:"æ¥çæ¥å¿",slug:"æ¥çæ¥å¿",normalizedTitle:"æ¥çæ¥å¿",charIndex:2312},{level:2,title:"åæ¬¡ç»å½ SonarQube è®¾ç½®",slug:"åæ¬¡ç»å½-sonarqube-è®¾ç½®",normalizedTitle:"åæ¬¡ç»å½ sonarqube è®¾ç½®",charIndex:2374},{level:2,title:"è®¾ç½® SonarQube å¼æºå¯å¨",slug:"è®¾ç½®-sonarqube-å¼æºå¯å¨",normalizedTitle:"è®¾ç½® sonarqube å¼æºå¯å¨",charIndex:2466},{level:3,title:"ä½¿ç¨rootç¨æ·ç¼è¾/etc/rc.localæä»¶ï¼æ§è¡å½ä»¤ï¼",slug:"ä½¿ç¨rootç¨æ·ç¼è¾-etc-rc-localæä»¶-æ§è¡å½ä»¤",normalizedTitle:"ä½¿ç¨rootç¨æ·ç¼è¾/etc/rc.localæä»¶ï¼æ§è¡å½ä»¤ï¼",charIndex:2488}],headersStr:"æ¦è¿° åç½®æ¡ä»¶ æ¥çMySQLå¼æ çä½ ç mysql å½åé»è®¤çå­å¨å¼æ: ä¿®æ¹ MySQL å­å¨å¼æä¸º InnoDB éå¯ mysql æå¡å¨ åæ¬¡ç»å½ MySQL æ¥çé»è®¤å¼æè®¾ç½®æ¯å¦çæ éç½®innodbbufferpool_size éç½®querycachesize è®¾ç½® MySQL çæ¥è¯¢ç¼å­ querycachesize, æå°è®¾ç½® 15M éå¯ mysql æå¡å¨ éªè¯ç¼å­è®¾ç½®æ¯å¦çæ: åå»º sonarqube æ°æ®åº(UTF-8 ç¼ç ) ä¸è½½ SonarQube åæ¢å°æ®éç¨æ· è§£åå®è£ éç½® SonarQube å¯å¨åæµè¯ åæ¢å°æ®éç¨æ·å¯å¨SonarQube Web Server æ¥çæ¥å¿ åæ¬¡ç»å½ SonarQube è®¾ç½® è®¾ç½® SonarQube å¼æºå¯å¨ ä½¿ç¨rootç¨æ·ç¼è¾/etc/rc.localæä»¶ï¼æ§è¡å½ä»¤ï¼",content:"# CentOS 7 å®è£ SonarQube\n\n\n# æ¦è¿°\n\nSonarï¼SonarQubeï¼æ¯ä¸ä¸ªå¼æºå¹³å°ï¼ç¨äºç®¡çæºä»£ç çè´¨éãSonar ä¸åªæ¯ä¸ä¸ªè´¨éæ°æ®æ¥åå·¥å·ï¼æ´æ¯ä»£ç è´¨éç®¡çå¹³å°ãæ¯æçè¯­è¨åæ¬ï¼JavaãPHPãC#ãCãCobolãPL/SQLãFlex ç­ã\n\n\n# åç½®æ¡ä»¶\n\næç¤º\n\nSonarQube ä¾èµåç«¯æ°æ®å­å¨ï¼æ¬æç¨éæ© MySQL ä½ä¸ºåç«¯æ°æ®å­å¨ã\n\n\n# æ¥çMySQLå¼æ\n\nç»å SonarQubeï¼MySQL æ°æ®åºæå¥½ä½¿ç¨ InnoDB å¼æï¼å¯æé«æ§è½ã çä½ ç mysql ç°å¨å·²æä¾ä»ä¹å­å¨å¼æ:\n\nmysql> show engines;\n\n\n\n# çä½ ç mysql å½åé»è®¤çå­å¨å¼æ:\n\nmysql> show variables like '%storage_engine%';\n\n\nå¦ææ¥è¯¢çç»æåä¸å¾æ¾ç¤ºçææä¸ä¸è´ï¼éè¦åä¸ä¸éç½®ï¼\n\n\n# ä¿®æ¹ MySQL å­å¨å¼æä¸º InnoDB\n\nç¼è¾MySQLéç½®æä»¶ /etc/my.cnfæ¾å°[mysqld]ä¸é¢å å¥default-storage-engine=INNODB\n\nvi /etc/my.cnf\n\n\n[mysqld]\ndefault-storage-engine = INNODB\n\n\n\n# éå¯ mysql æå¡å¨\n\nsystemctl restart mysql.service\n\n\n\n# åæ¬¡ç»å½ MySQL æ¥çé»è®¤å¼æè®¾ç½®æ¯å¦çæ\n\nmysql> show variables like '%storage_engine%';\n\n\n\n# éç½®innodb_buffer_pool_size\n\ninnodb_buffer_pool_size åæ°å¼è®¾ç½®å¾å°½å¯è½å¤§ä¸ç¹ è¿ä¸ªåæ°ä¸»è¦ä½ç¨æ¯ç¼å­ innodb è¡¨çç´¢å¼ï¼æ°æ®ï¼æå¥æ°æ®æ¶çç¼å² é»è®¤å¼:128Mï¼ä¸ç¨ mysql æå¡å¨è®¾ç½®çå¤§å°:æä½ç³»ç»åå­ç 70%-80%æä½³ã\n\nè®¾ç½®æ¹æ³:my.cnf æä»¶[mysqld] ä¸é¢å å¥ innodb_buffer_pool_size åæ°\n\nvi /etc/my.cnf\n\n\n[mysqld]\ninnodb_buffer_pool_size=256M\n\n\næç¤º\n\næä»¬è¿éè®¾ç½®ä¸º 256Mï¼å ä¸ºæä»¬çä¸æ¯ä¸ç¨ç MySQL æ°æ®åºæå¡å¨ï¼è¿æå¾å¤å¶ä»çæå¡éè¦å ç¨ç³»ç»åå­\n\n\n# éç½®query_cache_size\n\n\n# è®¾ç½® MySQL çæ¥è¯¢ç¼å­ query_cache_size, æå°è®¾ç½® 15M\n\nvi /etc/my.cnf\n\n\n[mysqld]\nquery_cache_type=1\nquery_cache_size=32M\n\n\n\n# éå¯ mysql æå¡å¨\n\nsystemctl restart mysql.service\n\n\n\n# éªè¯ç¼å­è®¾ç½®æ¯å¦çæ:\n\nmysql> show variables like '%query_cache%'; \n\n\n\n# åå»º sonarqube æ°æ®åº(UTF-8 ç¼ç )\n\nmysql> CREATE SCHEMA `sonar` DEFAULT CHARACTER SET utf8;\n\n\n\n# ä¸è½½ SonarQube\n\næç¤º\n\nä¸è½½å°å: http://www.sonarqube.org/downloads/ ä¸è½½SonarQube 6.7.7çæ¬\n\n\n# åæ¢å°æ®éç¨æ·\n\n$ cd /home/heyuqiang\n$ wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-6.7.7.zip\n\n\n\n# è§£åå®è£\n\n$ unzip sonarqube-6.7.7.zip\n$ mv sonarqube-6.7.7 sonarqube\n\n\n\n# éç½® SonarQube\n\n$ vi /home/heyuqiang/sonarqube/conf/sonar.properties\n\n\nsonar.jdbc.username=root # MySQLç¨æ·å\nsonar.jdbc.password=root # MySQLå¯ç \n#----- MySQL 5.6 or greater\n# Only InnoDB storage engine is supported (not myISAM).\n# Only the bundled driver is supported. It can not be changed.\nsonar.jdbc.url=jdbc:mysql://mysql-ip:3306/sonarqube?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true&useConfigs=maxPerformance&useSSL=false\nsonar.web.host=0.0.0.0\nsonar.web.context=/sonar\nsonar.web.port=9000\n\n\næ³¨æ\n\nä¿å­ä»¥ä¸éç½®(æ³¨æï¼è¦ççé»è®¤ç 9000 ç«¯å£æ¯å¦å·²è¢«å ç¨)\n\n\n# å¯å¨åæµè¯\n\n\n# åæ¢å°æ®éç¨æ·å¯å¨SonarQube Web Server\n\n$ /home/heyuqiang/sonarqube/bin/linux-x86-64/sonar.sh start\n\n\næç¤º\n\nåæ¬¡å¯å¨ä¼èªå¨å»ºè¡¨ååç¸åºçåå§å\n\n\n# æ¥çæ¥å¿\n\n$ tail -f /home/heyuqiang/sonarqube/logs/sonar.log\n\n\n\n# åæ¬¡ç»å½ SonarQube è®¾ç½®\n\nsonarqubeé»è®¤ç¨æ·åï¼admin å¯ç ï¼adminï¼æµè§å¨è®¿é®ï¼http://server-ip:9000/sonarqube/\n\n\n# è®¾ç½® SonarQube å¼æºå¯å¨\n\n\n# ä½¿ç¨rootç¨æ·ç¼è¾/etc/rc.localæä»¶ï¼æ§è¡å½ä»¤ï¼\n\n# vi /etc/rc.local\n\n\nå å¥ï¼\n\n## sonarqube\nsu - heyuqiang -c '/home/heyuqiang/sonarqube/bin/linux-x86-64/sonar.sh start'\n\n\næç¤º\n\nç¬¬ä¸æ¬¡ä½¿ç¨å¼æºå¯å¨æ¶éè¦ä¸º/etc/rc.local æä»¶èµæé\n\nchmod +x /etc/rc.local\nchmod +x /etc/rc.d/rc.local\n\n\nè³æ­¤ï¼SonarQubeé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",normalizedContent:"# centos 7 å®è£ sonarqube\n\n\n# æ¦è¿°\n\nsonarï¼sonarqubeï¼æ¯ä¸ä¸ªå¼æºå¹³å°ï¼ç¨äºç®¡çæºä»£ç çè´¨éãsonar ä¸åªæ¯ä¸ä¸ªè´¨éæ°æ®æ¥åå·¥å·ï¼æ´æ¯ä»£ç è´¨éç®¡çå¹³å°ãæ¯æçè¯­è¨åæ¬ï¼javaãphpãc#ãcãcobolãpl/sqlãflex ç­ã\n\n\n# åç½®æ¡ä»¶\n\næç¤º\n\nsonarqube ä¾èµåç«¯æ°æ®å­å¨ï¼æ¬æç¨éæ© mysql ä½ä¸ºåç«¯æ°æ®å­å¨ã\n\n\n# æ¥çmysqlå¼æ\n\nç»å sonarqubeï¼mysql æ°æ®åºæå¥½ä½¿ç¨ innodb å¼æï¼å¯æé«æ§è½ã çä½ ç mysql ç°å¨å·²æä¾ä»ä¹å­å¨å¼æ:\n\nmysql> show engines;\n\n\n\n# çä½ ç mysql å½åé»è®¤çå­å¨å¼æ:\n\nmysql> show variables like '%storage_engine%';\n\n\nå¦ææ¥è¯¢çç»æåä¸å¾æ¾ç¤ºçææä¸ä¸è´ï¼éè¦åä¸ä¸éç½®ï¼\n\n\n# ä¿®æ¹ mysql å­å¨å¼æä¸º innodb\n\nç¼è¾mysqléç½®æä»¶ /etc/my.cnfæ¾å°[mysqld]ä¸é¢å å¥default-storage-engine=innodb\n\nvi /etc/my.cnf\n\n\n[mysqld]\ndefault-storage-engine = innodb\n\n\n\n# éå¯ mysql æå¡å¨\n\nsystemctl restart mysql.service\n\n\n\n# åæ¬¡ç»å½ mysql æ¥çé»è®¤å¼æè®¾ç½®æ¯å¦çæ\n\nmysql> show variables like '%storage_engine%';\n\n\n\n# éç½®innodb_buffer_pool_size\n\ninnodb_buffer_pool_size åæ°å¼è®¾ç½®å¾å°½å¯è½å¤§ä¸ç¹ è¿ä¸ªåæ°ä¸»è¦ä½ç¨æ¯ç¼å­ innodb è¡¨çç´¢å¼ï¼æ°æ®ï¼æå¥æ°æ®æ¶çç¼å² é»è®¤å¼:128mï¼ä¸ç¨ mysql æå¡å¨è®¾ç½®çå¤§å°:æä½ç³»ç»åå­ç 70%-80%æä½³ã\n\nè®¾ç½®æ¹æ³:my.cnf æä»¶[mysqld] ä¸é¢å å¥ innodb_buffer_pool_size åæ°\n\nvi /etc/my.cnf\n\n\n[mysqld]\ninnodb_buffer_pool_size=256m\n\n\næç¤º\n\næä»¬è¿éè®¾ç½®ä¸º 256mï¼å ä¸ºæä»¬çä¸æ¯ä¸ç¨ç mysql æ°æ®åºæå¡å¨ï¼è¿æå¾å¤å¶ä»çæå¡éè¦å ç¨ç³»ç»åå­\n\n\n# éç½®query_cache_size\n\n\n# è®¾ç½® mysql çæ¥è¯¢ç¼å­ query_cache_size, æå°è®¾ç½® 15m\n\nvi /etc/my.cnf\n\n\n[mysqld]\nquery_cache_type=1\nquery_cache_size=32m\n\n\n\n# éå¯ mysql æå¡å¨\n\nsystemctl restart mysql.service\n\n\n\n# éªè¯ç¼å­è®¾ç½®æ¯å¦çæ:\n\nmysql> show variables like '%query_cache%'; \n\n\n\n# åå»º sonarqube æ°æ®åº(utf-8 ç¼ç )\n\nmysql> create schema `sonar` default character set utf8;\n\n\n\n# ä¸è½½ sonarqube\n\næç¤º\n\nä¸è½½å°å: http://www.sonarqube.org/downloads/ ä¸è½½sonarqube 6.7.7çæ¬\n\n\n# åæ¢å°æ®éç¨æ·\n\n$ cd /home/heyuqiang\n$ wget https://binaries.sonarsource.com/distribution/sonarqube/sonarqube-6.7.7.zip\n\n\n\n# è§£åå®è£\n\n$ unzip sonarqube-6.7.7.zip\n$ mv sonarqube-6.7.7 sonarqube\n\n\n\n# éç½® sonarqube\n\n$ vi /home/heyuqiang/sonarqube/conf/sonar.properties\n\n\nsonar.jdbc.username=root # mysqlç¨æ·å\nsonar.jdbc.password=root # mysqlå¯ç \n#----- mysql 5.6 or greater\n# only innodb storage engine is supported (not myisam).\n# only the bundled driver is supported. it can not be changed.\nsonar.jdbc.url=jdbc:mysql://mysql-ip:3306/sonarqube?useunicode=true&characterencoding=utf8&rewritebatchedstatements=true&useconfigs=maxperformance&usessl=false\nsonar.web.host=0.0.0.0\nsonar.web.context=/sonar\nsonar.web.port=9000\n\n\næ³¨æ\n\nä¿å­ä»¥ä¸éç½®(æ³¨æï¼è¦ççé»è®¤ç 9000 ç«¯å£æ¯å¦å·²è¢«å ç¨)\n\n\n# å¯å¨åæµè¯\n\n\n# åæ¢å°æ®éç¨æ·å¯å¨sonarqube web server\n\n$ /home/heyuqiang/sonarqube/bin/linux-x86-64/sonar.sh start\n\n\næç¤º\n\nåæ¬¡å¯å¨ä¼èªå¨å»ºè¡¨ååç¸åºçåå§å\n\n\n# æ¥çæ¥å¿\n\n$ tail -f /home/heyuqiang/sonarqube/logs/sonar.log\n\n\n\n# åæ¬¡ç»å½ sonarqube è®¾ç½®\n\nsonarqubeé»è®¤ç¨æ·åï¼admin å¯ç ï¼adminï¼æµè§å¨è®¿é®ï¼http://server-ip:9000/sonarqube/\n\n\n# è®¾ç½® sonarqube å¼æºå¯å¨\n\n\n# ä½¿ç¨rootç¨æ·ç¼è¾/etc/rc.localæä»¶ï¼æ§è¡å½ä»¤ï¼\n\n# vi /etc/rc.local\n\n\nå å¥ï¼\n\n## sonarqube\nsu - heyuqiang -c '/home/heyuqiang/sonarqube/bin/linux-x86-64/sonar.sh start'\n\n\næç¤º\n\nç¬¬ä¸æ¬¡ä½¿ç¨å¼æºå¯å¨æ¶éè¦ä¸º/etc/rc.local æä»¶èµæé\n\nchmod +x /etc/rc.local\nchmod +x /etc/rc.d/rc.local\n\n\nè³æ­¤ï¼sonarqubeé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ Jenkins",frontmatter:{title:"CentOS 7 å®è£ Jenkins",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/893d19/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/14.CentOS%207%20%E5%AE%89%E8%A3%85%20Jenkins.html",relativePath:"03.CentOS/01.å¥é¨/14.CentOS 7 å®è£ Jenkins.md",key:"v-6a35a7dc",path:"/pages/893d19/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:26},{level:2,title:"ç¯å¢åå¤",slug:"ç¯å¢åå¤",normalizedTitle:"ç¯å¢åå¤",charIndex:112},{level:3,title:"å®è£maven",slug:"å®è£maven",normalizedTitle:"å®è£maven",charIndex:121},{level:3,title:"è§£å",slug:"è§£å",normalizedTitle:"è§£å",charIndex:181},{level:3,title:"å¤ä»½",slug:"å¤ä»½",normalizedTitle:"å¤ä»½",charIndex:244},{level:3,title:"éç½®maven",slug:"éç½®maven",normalizedTitle:"éç½®maven",charIndex:302},{level:3,title:"éªè¯maven",slug:"éªè¯maven",normalizedTitle:"éªè¯maven",charIndex:498},{level:2,title:"é¨ç½²Tomcat8 è¿è¡Jenkins.war",slug:"é¨ç½²tomcat8-è¿è¡jenkins-war",normalizedTitle:"é¨ç½²tomcat8 è¿è¡jenkins.war",charIndex:960},{level:3,title:"åå¤å®è£",slug:"åå¤å®è£",normalizedTitle:"åå¤å®è£",charIndex:1096},{level:3,title:"è§£å",slug:"è§£å-2",normalizedTitle:"è§£å",charIndex:181},{level:3,title:"ä¿®æ¹ç«¯å£ä¸éç½®",slug:"ä¿®æ¹ç«¯å£ä¸éç½®",normalizedTitle:"ä¿®æ¹ç«¯å£ä¸éç½®",charIndex:1385},{level:3,title:"åå­è°ä¼",slug:"åå­è°ä¼",normalizedTitle:"åå­è°ä¼",charIndex:1642},{level:2,title:"å¯å¨å¹¶éªè¯",slug:"å¯å¨å¹¶éªè¯",normalizedTitle:"å¯å¨å¹¶éªè¯",charIndex:1924},{level:2,title:"è®¾ç½® Jenkins-tomcat å¼æºå¯å¨",slug:"è®¾ç½®-jenkins-tomcat-å¼æºå¯å¨",normalizedTitle:"è®¾ç½® jenkins-tomcat å¼æºå¯å¨",charIndex:2093},{level:2,title:"é¨ç½²jenkins.war",slug:"é¨ç½²jenkins-war",normalizedTitle:"é¨ç½²jenkins.war",charIndex:2342},{level:2,title:"å¯å¨jenkinså®è£ç¨åº",slug:"å¯å¨jenkinså®è£ç¨åº",normalizedTitle:"å¯å¨jenkinså®è£ç¨åº",charIndex:2617},{level:2,title:"æä»¶å®è£",slug:"æä»¶å®è£",normalizedTitle:"æä»¶å®è£",charIndex:2910},{level:3,title:"ç»å¸å®è£æ¨¡å¼",slug:"ç»å¸å®è£æ¨¡å¼",normalizedTitle:"ç»å¸å®è£æ¨¡å¼",charIndex:2919},{level:3,title:"èªå®ä¹å®è£æ¨¡å¼",slug:"èªå®ä¹å®è£æ¨¡å¼",normalizedTitle:"èªå®ä¹å®è£æ¨¡å¼",charIndex:3071},{level:2,title:"åå»ºAdminç¨æ·",slug:"åå»ºadminç¨æ·",normalizedTitle:"åå»ºadminç¨æ·",charIndex:3181}],headersStr:"æ¦è¿° ç¯å¢åå¤ å®è£maven è§£å å¤ä»½ éç½®maven éªè¯maven é¨ç½²Tomcat8 è¿è¡Jenkins.war åå¤å®è£ è§£å ä¿®æ¹ç«¯å£ä¸éç½® åå­è°ä¼ å¯å¨å¹¶éªè¯ è®¾ç½® Jenkins-tomcat å¼æºå¯å¨ é¨ç½²jenkins.war å¯å¨jenkinså®è£ç¨åº æä»¶å®è£ ç»å¸å®è£æ¨¡å¼ èªå®ä¹å®è£æ¨¡å¼ åå»ºAdminç¨æ·",content:'# CentOS 7 å®è£ Jenkins\n\n\n# æ¦è¿°\n\nJenkinsæ¯ä¸ä¸ªå¼æºè½¯ä»¶é¡¹ç®ï¼æ¯åºäºJavaå¼åçä¸ç§æç»­éæå·¥å·ï¼ç¨äºçæ§æç»­éå¤çå·¥ä½ï¼æ¨å¨æä¾ä¸ä¸ªå¼æ¾æç¨çè½¯ä»¶å¹³å°ï¼ä½¿è½¯ä»¶é¡¹ç®å¯ä»¥è¿è¡æç»­éæ\n\n\n# ç¯å¢åå¤\n\n\n# å®è£maven\n\nå¤å¶æä»¶apache-maven-3.5.0-bin.tar.gz å° /usr/local\n\n\n# è§£å\n\ncd /usr/local\ntar -zxvf apache-maven-3.5.0-bin.tar.gz\n\n\n\n# å¤ä»½\n\ncp apache-maven-3.5.0-bin.tar.gz /root/software/\n\n\n\n# éç½®maven\n\nè®¾ç½®ç¯å¢åé ç¼è¾ /etc/profile å¨ææ¡£æåè¿½å ä¸ä¸åå®¹ï¼\n\nvi /etc/profile\n\n\n## maven env\nexport MAVEN_HOME=/usr/local/apache-maven-3.5.0\nexport PATH=$PATH:$MAVEN_HOME/bin\n\n\nä½¿éç½®æä»¶çæï¼\n\nsource /etc/profile\n\n\n\n# éªè¯maven\n\nmvn -v\n\n\næ­£ç¡®éç½®jdkä¼è¾åºä¸ä¸åå®¹ï¼\n\n[root@localhost apache-maven-3.5.0]# mvn -v\nApache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-04T03:39:06+08:00)\nMaven home: /usr/local/apache-maven-3.5.0\nJava version: 1.8.0_141, vendor: Oracle Corporation\nJava home: /usr/local/java/jdk1.8.0_221/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: "linux", version: "3.10.0-514.21.1.el7.x86_64", arch: "amd64", family: "unix"\n\n\nå¤§ååæmavenå®è£æåï¼\n\n\n# é¨ç½²Tomcat8 è¿è¡Jenkins.war\n\ncd /root\nmkdir software\nmkdir servers\n\n\næç¤º\n\nç®å½ç¨éè¯´æï¼software ç¨äºå­æ¾ææä½¿ç¨å°çå®è£åæä»¶ï¼servers ç¨äºé¨ç½²æætomcatç­åç§æå¡å¨è¿è¡ç¨åº\n\n\n# åå¤å®è£\n\nå¤å¶apache-tomcat-8.5.16.tar.gz å° /root/servers ç®å½ä¸ã\n\n\n# è§£å\n\ncd /root/servers\ntar -zxvf apache-tomcat-8.5.16.tar.gz\n\n\nå¤ä»½å®è£åå° /root/software ä»¥ä¾¿ä»¥åä½¿ç¨ã\n\ncp apache-tomcat-8.5.16.tar.gz /root/software\n\n\néå½åapache-tomcat-8.5.16 ä¸º jenkins-tomcat8\n\nmv apache-tomcat-8.5.16 jenkins-tomcat8\n\n\n\n# ä¿®æ¹ç«¯å£ä¸éç½®\n\nç¼è¾conf/server.xmlä¿®æ¹ç«¯å£å±3å¤ï¼\n\nvi /root/servers/jenkins-tomcat8/conf/server.xml\n\n\nå¢å  URIEncoding="UTF-8" è§£å³tomcat ä¸­æä¹±ç é®é¢ã\n\n<Connector port="8080" protocol="HTTP/1.1"\n      connectionTimeout="20000"\n      redirectPort="8443" URIEncoding="UTF-8" />\n\n\n\n# åå­è°ä¼\n\nç¼è¾bin/catalina.sh è®¾ç½®JAVA_OPTS æé«JVMæ åå­Increase JVM heap memory\n\nvi /root/servers/jenkins-tomcat8/bin/catalina.sh\n\n\nå¢å å¦ä¸åå®¹ï¼\n\nJAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1024m -Xmx2048m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:+DisableExplicitGC"\n\n\n\n# å¯å¨å¹¶éªè¯\n\nå¯å¨tomcatæå¡\n\n/opt/jenkins-tomcat8/bin/startup.sh\n\n\næ¥çæ¥å¿\n\ntail -f /opt/jenkins-tomcat8/logs/catalina.out\n\n\næµè§å¨è®¿é®å°åï¼http://server_ip:8080ï¼çå°tomcaté»è®¤æ¬¢è¿é¡µé¢è¯´æé¨ç½²æåäºï¼\n\n\n# è®¾ç½® Jenkins-tomcat å¼æºå¯å¨\n\nä½¿ç¨rootç¨æ·ç¼è¾ /etc/rc.local æä»¶ï¼æ§è¡å½ä»¤ï¼\n\nvi /etc/rc.local\n\n\nå å¥ï¼\n\n## jenkins-tomcat8\nsu - root -c \'/opt/jenkins-tomcat8/bin/startup.sh\'\n\n\næç¤º\n\nç¬¬ä¸æ¬¡ä½¿ç¨å¼æºå¯å¨æ¶éè¦ä¸º/etc/rc.local æä»¶èµæé\n\nchmod +x /etc/rc.local\nchmod +x /etc/rc.d/rc.local\n\n\n\n# é¨ç½²jenkins.war\n\nå é¤ tomcat-tomcat8/webapps/ éé¢ææé¡¹ç®æä»¶\n\nrm -rf /root/servers/jenkins-tomcat8/webapps/*\n\n\nå¤å¶ jenkins.war å° /root/servers/jenkins-tomcat8/webapps/ ç®å½ä¸\n\nåæ­¢å¹¶éæ°å¯å¨tomcatæå¡\n\n/root/servers/jenkins-tomcat8/bin/shutdown.sh\n/root/servers/jenkins-tomcat8/bin/startup.sh\n\n\n\n# å¯å¨jenkinså®è£ç¨åº\n\næµè§å¨è®¿é®å°åï¼http://server_ip:8080/jenkins è¿è¡jenkinså®è£ç¨åºã\n\næç¤º\n\né¦æ¬¡è®¿é®jenkinsæä»¬éè¦æä¾è¶çº§ç®¡çåå¯ç ï¼è¶çº§ç®¡çåå¯ç ä¸²å¨jenkinsé¦æ¬¡å¯å¨åä¼èªå¨çæï¼å­æ¾å¨/root/.jenkins/secrets/initialAdminPassword æä»¶ä¸­ã\n\nè·åè¶çº§ç®¡çå¯ç æ§è¡å½ä»¤ï¼\n\ncat /root/.jenkins/secrets/initialAdminPassword\n\n\nå¤å¶å¯ç ä¸²å¹¶ç²è´´å°Administrator passwordè¾å¥æ¡åç¹å»Continue\n\n\n# æä»¶å®è£\n\n\n# ç»å¸å®è£æ¨¡å¼\n\né¼ æ åå»å·¦ä¾§èè²æ¡å®è£ç¤¾åºæ¨èæä»¶åInstall suggested plugins Install plugins the Jenkins community finds most useful å®è£æä»¶ï¼è¿ä¸æ­¥å®è£æä»¶åç½ç»å½±åå®è£æ¶é´å¯è½æ¯è¾é¿ï¼å»ºè®®æ®éç¨æ·éæ©æ¨èå®è£\n\n\n# èªå®ä¹å®è£æ¨¡å¼\n\nå³ä¾§ç°è²èæ¯æ¡æ¯æä»¶å¯éæ¡ï¼å¯ä»¥çè§£ä¸ºæä»¶èªå®ä¹éæ©å®è£ï¼å»ºè®®æä¸äºç»éªçç¨æ·ä½¿ç¨ï¼æ¬æ¼ç¤ºæç¨å·²ç»å¸å®è£æ¨¡å¼ä¸ºä¾ã\n\næç¤º\n\nå¼å§å®è£æä»¶åï¼å¨å³ä¾§å¯ä»¥çå°äºå®çå®è£æ¥å¿ãç»¿è²å¯¹å¾è¡¨ç¤ºå®è£æå\n\n\n# åå»ºAdminç¨æ·\n\nè¿éæä»¬åç®åè®¾ç½®ä¸ä¸ªç¨æ·ï¼åç»­çéç½®ä¸­æä»¬ä¼åå»ºä¸ä¸ªè¶çº§ç®¡çåè´¦æ·ã\n\nç¹å»Save and Finish å®æç¨æ·åå»ºã\n\nè³æ­¤ï¼Jenkinsé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~',normalizedContent:'# centos 7 å®è£ jenkins\n\n\n# æ¦è¿°\n\njenkinsæ¯ä¸ä¸ªå¼æºè½¯ä»¶é¡¹ç®ï¼æ¯åºäºjavaå¼åçä¸ç§æç»­éæå·¥å·ï¼ç¨äºçæ§æç»­éå¤çå·¥ä½ï¼æ¨å¨æä¾ä¸ä¸ªå¼æ¾æç¨çè½¯ä»¶å¹³å°ï¼ä½¿è½¯ä»¶é¡¹ç®å¯ä»¥è¿è¡æç»­éæ\n\n\n# ç¯å¢åå¤\n\n\n# å®è£maven\n\nå¤å¶æä»¶apache-maven-3.5.0-bin.tar.gz å° /usr/local\n\n\n# è§£å\n\ncd /usr/local\ntar -zxvf apache-maven-3.5.0-bin.tar.gz\n\n\n\n# å¤ä»½\n\ncp apache-maven-3.5.0-bin.tar.gz /root/software/\n\n\n\n# éç½®maven\n\nè®¾ç½®ç¯å¢åé ç¼è¾ /etc/profile å¨ææ¡£æåè¿½å ä¸ä¸åå®¹ï¼\n\nvi /etc/profile\n\n\n## maven env\nexport maven_home=/usr/local/apache-maven-3.5.0\nexport path=$path:$maven_home/bin\n\n\nä½¿éç½®æä»¶çæï¼\n\nsource /etc/profile\n\n\n\n# éªè¯maven\n\nmvn -v\n\n\næ­£ç¡®éç½®jdkä¼è¾åºä¸ä¸åå®¹ï¼\n\n[root@localhost apache-maven-3.5.0]# mvn -v\napache maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-04t03:39:06+08:00)\nmaven home: /usr/local/apache-maven-3.5.0\njava version: 1.8.0_141, vendor: oracle corporation\njava home: /usr/local/java/jdk1.8.0_221/jre\ndefault locale: en_us, platform encoding: utf-8\nos name: "linux", version: "3.10.0-514.21.1.el7.x86_64", arch: "amd64", family: "unix"\n\n\nå¤§ååæmavenå®è£æåï¼\n\n\n# é¨ç½²tomcat8 è¿è¡jenkins.war\n\ncd /root\nmkdir software\nmkdir servers\n\n\næç¤º\n\nç®å½ç¨éè¯´æï¼software ç¨äºå­æ¾ææä½¿ç¨å°çå®è£åæä»¶ï¼servers ç¨äºé¨ç½²æætomcatç­åç§æå¡å¨è¿è¡ç¨åº\n\n\n# åå¤å®è£\n\nå¤å¶apache-tomcat-8.5.16.tar.gz å° /root/servers ç®å½ä¸ã\n\n\n# è§£å\n\ncd /root/servers\ntar -zxvf apache-tomcat-8.5.16.tar.gz\n\n\nå¤ä»½å®è£åå° /root/software ä»¥ä¾¿ä»¥åä½¿ç¨ã\n\ncp apache-tomcat-8.5.16.tar.gz /root/software\n\n\néå½åapache-tomcat-8.5.16 ä¸º jenkins-tomcat8\n\nmv apache-tomcat-8.5.16 jenkins-tomcat8\n\n\n\n# ä¿®æ¹ç«¯å£ä¸éç½®\n\nç¼è¾conf/server.xmlä¿®æ¹ç«¯å£å±3å¤ï¼\n\nvi /root/servers/jenkins-tomcat8/conf/server.xml\n\n\nå¢å  uriencoding="utf-8" è§£å³tomcat ä¸­æä¹±ç é®é¢ã\n\n<connector port="8080" protocol="http/1.1"\n      connectiontimeout="20000"\n      redirectport="8443" uriencoding="utf-8" />\n\n\n\n# åå­è°ä¼\n\nç¼è¾bin/catalina.sh è®¾ç½®java_opts æé«jvmæ åå­increase jvm heap memory\n\nvi /root/servers/jenkins-tomcat8/bin/catalina.sh\n\n\nå¢å å¦ä¸åå®¹ï¼\n\njava_opts="-djava.awt.headless=true -dfile.encoding=utf-8 -server -xms1024m -xmx2048m -xx:newsize=512m -xx:maxnewsize=512m -xx:+disableexplicitgc"\n\n\n\n# å¯å¨å¹¶éªè¯\n\nå¯å¨tomcatæå¡\n\n/opt/jenkins-tomcat8/bin/startup.sh\n\n\næ¥çæ¥å¿\n\ntail -f /opt/jenkins-tomcat8/logs/catalina.out\n\n\næµè§å¨è®¿é®å°åï¼http://server_ip:8080ï¼çå°tomcaté»è®¤æ¬¢è¿é¡µé¢è¯´æé¨ç½²æåäºï¼\n\n\n# è®¾ç½® jenkins-tomcat å¼æºå¯å¨\n\nä½¿ç¨rootç¨æ·ç¼è¾ /etc/rc.local æä»¶ï¼æ§è¡å½ä»¤ï¼\n\nvi /etc/rc.local\n\n\nå å¥ï¼\n\n## jenkins-tomcat8\nsu - root -c \'/opt/jenkins-tomcat8/bin/startup.sh\'\n\n\næç¤º\n\nç¬¬ä¸æ¬¡ä½¿ç¨å¼æºå¯å¨æ¶éè¦ä¸º/etc/rc.local æä»¶èµæé\n\nchmod +x /etc/rc.local\nchmod +x /etc/rc.d/rc.local\n\n\n\n# é¨ç½²jenkins.war\n\nå é¤ tomcat-tomcat8/webapps/ éé¢ææé¡¹ç®æä»¶\n\nrm -rf /root/servers/jenkins-tomcat8/webapps/*\n\n\nå¤å¶ jenkins.war å° /root/servers/jenkins-tomcat8/webapps/ ç®å½ä¸\n\nåæ­¢å¹¶éæ°å¯å¨tomcatæå¡\n\n/root/servers/jenkins-tomcat8/bin/shutdown.sh\n/root/servers/jenkins-tomcat8/bin/startup.sh\n\n\n\n# å¯å¨jenkinså®è£ç¨åº\n\næµè§å¨è®¿é®å°åï¼http://server_ip:8080/jenkins è¿è¡jenkinså®è£ç¨åºã\n\næç¤º\n\né¦æ¬¡è®¿é®jenkinsæä»¬éè¦æä¾è¶çº§ç®¡çåå¯ç ï¼è¶çº§ç®¡çåå¯ç ä¸²å¨jenkinsé¦æ¬¡å¯å¨åä¼èªå¨çæï¼å­æ¾å¨/root/.jenkins/secrets/initialadminpassword æä»¶ä¸­ã\n\nè·åè¶çº§ç®¡çå¯ç æ§è¡å½ä»¤ï¼\n\ncat /root/.jenkins/secrets/initialadminpassword\n\n\nå¤å¶å¯ç ä¸²å¹¶ç²è´´å°administrator passwordè¾å¥æ¡åç¹å»continue\n\n\n# æä»¶å®è£\n\n\n# ç»å¸å®è£æ¨¡å¼\n\né¼ æ åå»å·¦ä¾§èè²æ¡å®è£ç¤¾åºæ¨èæä»¶åinstall suggested plugins install plugins the jenkins community finds most useful å®è£æä»¶ï¼è¿ä¸æ­¥å®è£æä»¶åç½ç»å½±åå®è£æ¶é´å¯è½æ¯è¾é¿ï¼å»ºè®®æ®éç¨æ·éæ©æ¨èå®è£\n\n\n# èªå®ä¹å®è£æ¨¡å¼\n\nå³ä¾§ç°è²èæ¯æ¡æ¯æä»¶å¯éæ¡ï¼å¯ä»¥çè§£ä¸ºæä»¶èªå®ä¹éæ©å®è£ï¼å»ºè®®æä¸äºç»éªçç¨æ·ä½¿ç¨ï¼æ¬æ¼ç¤ºæç¨å·²ç»å¸å®è£æ¨¡å¼ä¸ºä¾ã\n\næç¤º\n\nå¼å§å®è£æä»¶åï¼å¨å³ä¾§å¯ä»¥çå°äºå®çå®è£æ¥å¿ãç»¿è²å¯¹å¾è¡¨ç¤ºå®è£æå\n\n\n# åå»ºadminç¨æ·\n\nè¿éæä»¬åç®åè®¾ç½®ä¸ä¸ªç¨æ·ï¼åç»­çéç½®ä¸­æä»¬ä¼åå»ºä¸ä¸ªè¶çº§ç®¡çåè´¦æ·ã\n\nç¹å»save and finish å®æç¨æ·åå»ºã\n\nè³æ­¤ï¼jenkinsé¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ Redis",frontmatter:{title:"CentOS 7 å®è£ Redis",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/54c917/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/15.CentOS%207%20%E5%AE%89%E8%A3%85%20Redis.html",relativePath:"03.CentOS/01.å¥é¨/15.CentOS 7 å®è£ Redis.md",key:"v-4c567690",path:"/pages/54c917/",headersStr:null,content:"# CentOS 7 å®è£ Redis\n\næç¤º\n\nææ¡£è¿ç§»è³åºäºæºç ç¼è¯å®è£ Redis",normalizedContent:"# centos 7 å®è£ redis\n\næç¤º\n\nææ¡£è¿ç§»è³åºäºæºç ç¼è¯å®è£ redis",charsets:{cjk:!0},lastUpdated:"2022/02/16, 16:19:51",lastUpdatedTimestamp:1644999591e3},{title:"CentOS 7 å®è£ TigerVNC Server",frontmatter:{title:"CentOS 7 å®è£ TigerVNC Server",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/8c6aad/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/16.CentOS%207%20%E5%AE%89%E8%A3%85%20TigerVNC%20Server.html",relativePath:"03.CentOS/01.å¥é¨/16.CentOS 7 å®è£ TigerVNC Server.md",key:"v-3fe1ff73",path:"/pages/8c6aad/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:34},{level:2,title:"ä¾èµ",slug:"ä¾èµ",normalizedTitle:"ä¾èµ",charIndex:115},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:11},{level:2,title:"éç½®ï¼ä»¥rootç¨æ·ç»å½ï¼",slug:"éç½®-ä»¥rootç¨æ·ç»å½",normalizedTitle:"éç½®ï¼ä»¥rootç¨æ·ç»å½ï¼",charIndex:376},{level:2,title:"é²ç«å¢è®¾ç½®",slug:"é²ç«å¢è®¾ç½®",normalizedTitle:"é²ç«å¢è®¾ç½®",charIndex:1132},{level:2,title:"è®¾ç½®VNCå¯ç ",slug:"è®¾ç½®vncå¯ç ",normalizedTitle:"è®¾ç½®vncå¯ç ",charIndex:1412},{level:2,title:"å¯å¨VNC Server",slug:"å¯å¨vnc-server",normalizedTitle:"å¯å¨vnc server",charIndex:1443},{level:2,title:"systemctlå¯å¨å¼å¸¸è§£å³",slug:"systemctlå¯å¨å¼å¸¸è§£å³",normalizedTitle:"systemctlå¯å¨å¼å¸¸è§£å³",charIndex:1501}],headersStr:"æ¦è¿° ä¾èµ å®è£ éç½®ï¼ä»¥rootç¨æ·ç»å½ï¼ é²ç«å¢è®¾ç½® è®¾ç½®VNCå¯ç  å¯å¨VNC Server systemctlå¯å¨å¼å¸¸è§£å³",content:'# CentOS 7 å®è£ TigerVNC Server\n\n\n# æ¦è¿°\n\nTigerVNCæ¯ä¸ä¸ªé«çº§ç VNC è¿ç¨è®¿é®çå®ç°ï¼åºäºç¬¬åä»£VNCï¼åå«ä¸ä¸ª JPEG åç¼©å éå¨ãæ¯æ X.Org å X serverã\n\n\n# ä¾èµ\n\nTigerVNCä¾èµå¾å½¢åæ¡é¢ï¼å¦æä½¿ç¨æå°å®è£çæ¬çcentoséè¦åå®è£å¾å½¢åæ¡é¢GNOMEçç¨åºåã\n\nyum groupinstall "GNOME Desktop"\n\n\nä¿®æ¹CentOSé»è®¤å¯å¨æ¨¡å¼ä¸ºå¾å½¢åæ¨¡å¼,ä»¥å½ä»¤systemctl get-default å¯æ¥çå½åé»è®¤çæ¨¡å¼ä¸ºmulti-user.targetï¼å³å½ä»¤è¡æ¨¡å¼\n\nsystemctl set-default graphical.target\n\n\n\n# å®è£\n\nyum install -y tigervnc-server\n\n\n\n# éç½®ï¼ä»¥rootç¨æ·ç»å½ï¼\n\n1.æ·è´\n\ncp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:1.service\n\n\n2.ä¿®æ¹éç½®æä»¶ï¼ï¼ä¸»è¦æ¯ä¿®æ¹rootç¨æ·ï¼\n\nvim /lib/systemd/system/vncserver@:1.service\n\n\n[Unit]\nDescription=Remote desktop service (VNC)\nAfter=syslog.target network.target\n \n[Service]\nType=forking\nUser=root\n# Clean any existing files in /tmp/.X11-unix environment\nExecStartPre=/bin/sh -c \'/usr/bin/vncserver -kill %i > /dev/null 2>&1 || :\'\nExecStart=/sbin/runuser -l root -c "/usr/bin/vncserver %i -geometry 1280x720 -SecurityTypes None"\nPIDFile=/root/.vnc/%H%i.pid\nExecStop=/bin/sh -c \'/usr/bin/vncserver -kill %i > /dev/null 2>&1 || :\'\n \n[Install]\nWantedBy=multi-user.target\n\n\n3.å è½½éç½®ï¼\n\nsystemctl daemon-reload\n\n\n4.è®¾ç½®å¼æºå¯å¨ï¼\n\nsystemctl enable vncserver@:1.service\n\n\n\n# é²ç«å¢è®¾ç½®\n\næç¤º\n\nç±äºæä»¬åå§çcentosç³»ç»é»è®¤å³é­äºé²ç«å¢ï¼æä»¥å¯ä»¥è·³è¿æ­¤æ­¥éª¤ã\n\n# æ¥çé²ç«å¢ç¶æï¼\nfirewall-cmd --state\n \n# å³é­é²ç«å¢ï¼\nsystemctl stop firewalld\nsystemctl disable firewalld\n \n# æèå¼å¯é²ç«å¢æ·»å 5901ç«¯å£ï¼è¿éåªå¼å¯ä¸ä¸ªç«¯å£ï¼å¦æå¤ä¸ªçé¢å¯ä»¥å¼å¯å¤ä¸ªç«¯å£ï¼ï¼\nsystemctl start firewalld\nfirewall-cmd --permanent --zone=public --add-port=5901/tcp\n\n\n\n# è®¾ç½®VNCå¯ç \n\nvncserver passwd\n\n\n\n# å¯å¨VNC Server\n\nsystemctl restart vncserver@:1.service\n\n\n\n# systemctlå¯å¨å¼å¸¸è§£å³\n\n[root@localhost ~]# systemctl start vncserver@:1.service\nJob for vncserver@:1.service failed because the control process exited with error code.\n See "systemctl status vncserver@:1.service" and "journalctl -xe" for details.\n \n[root@localhost ~]# systemctl status vncserver@:1.service\nâ vncserver@:1.service - Remote desktop service (VNC)\n   Loaded: loaded (/usr/lib/systemd/system/vncserver@:1.service; enabled; vendor preset:\n disabled)\n   Active: failed (Result: exit-code) since Fri 2021-05-28 19:46:46 CST; 1min 55s ago\n  Process: 5655 ExecStart=/sbin/runuser -l oracle -c /usr/bin/vncserver %i -geometry \n1280x720 (code=exited, status=1/FAILURE)\n  Process: 5650 ExecStartPre=/bin/sh -c /usr/bin/vncserver -kill %i > /dev/null 2>&1 \n|| : (code=exited, status=0/SUCCESS)\n \nJul 27 19:46:46 wyx.pc.com systemd[1]: Starting Remote desktop service (VNC)...\nJul 27 19:46:46 wyx.pc.com runuser[5655]: runuser: user oracle does not exist\nJul 27 19:46:46 wyx.pc.com systemd[1]: vncserver@:1.service: control process...=1\nJul 27 19:46:46 wyx.pc.com systemd[1]: Failed to start Remote desktop servic...).\nJul 27 19:46:46 wyx.pc.com systemd[1]: Unit vncserver@:1.service entered fai...e.\nJul 27 19:46:46 wyx.pc.com systemd[1]: vncserver@:1.service failed.\n\n\nå¦æå¯å¨è¿ç¨ä¸­éå°å¼å¸¸ï¼æ¥éå·²ç»æè¿ç¨å­å¨ï¼å¯ä»¥éè¿ä»¥ä¸å½ä»¤æ¥çå°\n\n[root@localhost ~]# netstat -antulp | grep 5901\ntcp        0      0 0.0.0.0:5901            0.0.0.0:*               LISTEN      5008/Xvnc           \ntcp6       0      0 :::5901                 :::*                    LISTEN      5008/Xvnc           \n[root@localhost ~]# ps -ef | grep vnc\nroot      5008     1  0 19:45 pts/0    00:00:00 /usr/bin/Xvnc :1 -auth /root/.Xauthority -\ndesktop wyx.pc.com:1 (root) -fp catalogue:/etc/X11/fontpath.d -geometry 1024x768 -pn \n-rfbauth /root/.vnc/passwd -rfbport 5901 -rfbwait 30000\nroot      5678  1640  0 19:48 pts/0    00:00:00 grep --color=auto vnc\n',normalizedContent:'# centos 7 å®è£ tigervnc server\n\n\n# æ¦è¿°\n\ntigervncæ¯ä¸ä¸ªé«çº§ç vnc è¿ç¨è®¿é®çå®ç°ï¼åºäºç¬¬åä»£vncï¼åå«ä¸ä¸ª jpeg åç¼©å éå¨ãæ¯æ x.org å x serverã\n\n\n# ä¾èµ\n\ntigervncä¾èµå¾å½¢åæ¡é¢ï¼å¦æä½¿ç¨æå°å®è£çæ¬çcentoséè¦åå®è£å¾å½¢åæ¡é¢gnomeçç¨åºåã\n\nyum groupinstall "gnome desktop"\n\n\nä¿®æ¹centosé»è®¤å¯å¨æ¨¡å¼ä¸ºå¾å½¢åæ¨¡å¼,ä»¥å½ä»¤systemctl get-default å¯æ¥çå½åé»è®¤çæ¨¡å¼ä¸ºmulti-user.targetï¼å³å½ä»¤è¡æ¨¡å¼\n\nsystemctl set-default graphical.target\n\n\n\n# å®è£\n\nyum install -y tigervnc-server\n\n\n\n# éç½®ï¼ä»¥rootç¨æ·ç»å½ï¼\n\n1.æ·è´\n\ncp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:1.service\n\n\n2.ä¿®æ¹éç½®æä»¶ï¼ï¼ä¸»è¦æ¯ä¿®æ¹rootç¨æ·ï¼\n\nvim /lib/systemd/system/vncserver@:1.service\n\n\n[unit]\ndescription=remote desktop service (vnc)\nafter=syslog.target network.target\n \n[service]\ntype=forking\nuser=root\n# clean any existing files in /tmp/.x11-unix environment\nexecstartpre=/bin/sh -c \'/usr/bin/vncserver -kill %i > /dev/null 2>&1 || :\'\nexecstart=/sbin/runuser -l root -c "/usr/bin/vncserver %i -geometry 1280x720 -securitytypes none"\npidfile=/root/.vnc/%h%i.pid\nexecstop=/bin/sh -c \'/usr/bin/vncserver -kill %i > /dev/null 2>&1 || :\'\n \n[install]\nwantedby=multi-user.target\n\n\n3.å è½½éç½®ï¼\n\nsystemctl daemon-reload\n\n\n4.è®¾ç½®å¼æºå¯å¨ï¼\n\nsystemctl enable vncserver@:1.service\n\n\n\n# é²ç«å¢è®¾ç½®\n\næç¤º\n\nç±äºæä»¬åå§çcentosç³»ç»é»è®¤å³é­äºé²ç«å¢ï¼æä»¥å¯ä»¥è·³è¿æ­¤æ­¥éª¤ã\n\n# æ¥çé²ç«å¢ç¶æï¼\nfirewall-cmd --state\n \n# å³é­é²ç«å¢ï¼\nsystemctl stop firewalld\nsystemctl disable firewalld\n \n# æèå¼å¯é²ç«å¢æ·»å 5901ç«¯å£ï¼è¿éåªå¼å¯ä¸ä¸ªç«¯å£ï¼å¦æå¤ä¸ªçé¢å¯ä»¥å¼å¯å¤ä¸ªç«¯å£ï¼ï¼\nsystemctl start firewalld\nfirewall-cmd --permanent --zone=public --add-port=5901/tcp\n\n\n\n# è®¾ç½®vncå¯ç \n\nvncserver passwd\n\n\n\n# å¯å¨vnc server\n\nsystemctl restart vncserver@:1.service\n\n\n\n# systemctlå¯å¨å¼å¸¸è§£å³\n\n[root@localhost ~]# systemctl start vncserver@:1.service\njob for vncserver@:1.service failed because the control process exited with error code.\n see "systemctl status vncserver@:1.service" and "journalctl -xe" for details.\n \n[root@localhost ~]# systemctl status vncserver@:1.service\nâ vncserver@:1.service - remote desktop service (vnc)\n   loaded: loaded (/usr/lib/systemd/system/vncserver@:1.service; enabled; vendor preset:\n disabled)\n   active: failed (result: exit-code) since fri 2021-05-28 19:46:46 cst; 1min 55s ago\n  process: 5655 execstart=/sbin/runuser -l oracle -c /usr/bin/vncserver %i -geometry \n1280x720 (code=exited, status=1/failure)\n  process: 5650 execstartpre=/bin/sh -c /usr/bin/vncserver -kill %i > /dev/null 2>&1 \n|| : (code=exited, status=0/success)\n \njul 27 19:46:46 wyx.pc.com systemd[1]: starting remote desktop service (vnc)...\njul 27 19:46:46 wyx.pc.com runuser[5655]: runuser: user oracle does not exist\njul 27 19:46:46 wyx.pc.com systemd[1]: vncserver@:1.service: control process...=1\njul 27 19:46:46 wyx.pc.com systemd[1]: failed to start remote desktop servic...).\njul 27 19:46:46 wyx.pc.com systemd[1]: unit vncserver@:1.service entered fai...e.\njul 27 19:46:46 wyx.pc.com systemd[1]: vncserver@:1.service failed.\n\n\nå¦æå¯å¨è¿ç¨ä¸­éå°å¼å¸¸ï¼æ¥éå·²ç»æè¿ç¨å­å¨ï¼å¯ä»¥éè¿ä»¥ä¸å½ä»¤æ¥çå°\n\n[root@localhost ~]# netstat -antulp | grep 5901\ntcp        0      0 0.0.0.0:5901            0.0.0.0:*               listen      5008/xvnc           \ntcp6       0      0 :::5901                 :::*                    listen      5008/xvnc           \n[root@localhost ~]# ps -ef | grep vnc\nroot      5008     1  0 19:45 pts/0    00:00:00 /usr/bin/xvnc :1 -auth /root/.xauthority -\ndesktop wyx.pc.com:1 (root) -fp catalogue:/etc/x11/fontpath.d -geometry 1024x768 -pn \n-rfbauth /root/.vnc/passwd -rfbport 5901 -rfbwait 30000\nroot      5678  1640  0 19:48 pts/0    00:00:00 grep --color=auto vnc\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS 7 å®è£ NFS",frontmatter:{title:"CentOS 7 å®è£ NFS",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/50595e/"},regularPath:"/03.CentOS/01.%E5%85%A5%E9%97%A8/17.CentOS%207%20%E5%AE%89%E8%A3%85%20NFS.html",relativePath:"03.CentOS/01.å¥é¨/17.CentOS 7 å®è£ NFS.md",key:"v-20b52a0c",path:"/pages/50595e/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:22},{level:2,title:"NFSæå¡ç«¯å®è£ï¼",slug:"nfsæå¡ç«¯å®è£",normalizedTitle:"nfsæå¡ç«¯å®è£ï¼",charIndex:143},{level:3,title:"åå»ºå±äº«",slug:"åå»ºå±äº«",normalizedTitle:"åå»ºå±äº«",charIndex:184},{level:3,title:"åå»ºå±äº«ç®å½å¹¶ç»äºåçæé",slug:"åå»ºå±äº«ç®å½å¹¶ç»äºåçæé",normalizedTitle:"åå»ºå±äº«ç®å½å¹¶ç»äºåçæé",charIndex:360},{level:3,title:"å¯å¨NFSæå¡",slug:"å¯å¨nfsæå¡",normalizedTitle:"å¯å¨nfsæå¡",charIndex:428},{level:3,title:"é²ç«å¢éç½®",slug:"é²ç«å¢éç½®",normalizedTitle:"é²ç«å¢éç½®",charIndex:600},{level:2,title:"NFSå®¢æ·ç«¯å®è£ï¼",slug:"nfså®¢æ·ç«¯å®è£",normalizedTitle:"nfså®¢æ·ç«¯å®è£ï¼",charIndex:813},{level:3,title:"åå»ºæè½½ç®å½",slug:"åå»ºæè½½ç®å½",normalizedTitle:"åå»ºæè½½ç®å½",charIndex:854},{level:3,title:"æè½½NFSå±äº«",slug:"æè½½nfså±äº«",normalizedTitle:"æè½½nfså±äº«",charIndex:892},{level:3,title:"æ¥çå®¢æ·ç«¯æè½½ä¿¡æ¯",slug:"æ¥çå®¢æ·ç«¯æè½½ä¿¡æ¯",normalizedTitle:"æ¥çå®¢æ·ç«¯æè½½ä¿¡æ¯",charIndex:966}],headersStr:"æ¦è¿° NFSæå¡ç«¯å®è£ï¼ åå»ºå±äº« åå»ºå±äº«ç®å½å¹¶ç»äºåçæé å¯å¨NFSæå¡ é²ç«å¢éç½® NFSå®¢æ·ç«¯å®è£ï¼ åå»ºæè½½ç®å½ æè½½NFSå±äº« æ¥çå®¢æ·ç«¯æè½½ä¿¡æ¯",content:"# CentOS 7 å®è£ NFS\n\n\n# æ¦è¿°\n\nç½ç»æä»¶ç³»ç»ï¼è±æNetwork File System(NFS)ï¼æ¯ç±SUNå¬å¸ç å¶çUNIXè¡¨ç¤ºå±åè®®(presentation layer protocol)ï¼è½ä½¿ä½¿ç¨èè®¿é®ç½ç»ä¸å«å¤çæä»¶å°±åå¨ä½¿ç¨èªå·±çè®¡ç®æºä¸æ ·ã\n\n\n# NFSæå¡ç«¯å®è£ï¼\n\nyum install nfs-utils -y\n\n\n\n# åå»ºå±äº«\n\n1.å¨/etc/exportséç½®æä»¶ä¸­æ·»å ä»¥ä¸åå®¹ï¼ä¿å­éåºï¼\n\n/home/ITP/share 172.16.134.252/255.255.255.0(rw,sync,no_root_squash)\n\n\næè\n\n/home/ITP/share 172.16.134.0/24(rw,sync,no_root_squash)\n\n\n\n# åå»ºå±äº«ç®å½å¹¶ç»äºåçæé\n\nmkdir /home/ITP/share\nchmod o+w /home/ITP/share\n\n\n\n# å¯å¨NFSæå¡\n\nsystemctl restart rpcbind\nsystemctl restart nfs-server\nsystemctl enable rpcbind\nsystemctl enable nfs-server\n\n\næ³¨æ\n\nnfså¶å®è¿ä¾èµnfs-lockãnfs-idmapä¸¤ä¸ªæå¡ï¼ä½æ¯æ éæä»¬å»åç¸å³éç½®ã\n\n\n# é²ç«å¢éç½®\n\nfirewall-cmd --permanent --zone=public --add-service=nfs\nfirewall-cmd --permanent --zone=public --add-service=mountd\nfirewall-cmd --permanent --zone=public --add-service=rpc-bind\nfirewall-cmd --reload\n\n\n\n# NFSå®¢æ·ç«¯å®è£ï¼\n\nyum install nfs-utils -y\n\n\n\n# åå»ºæè½½ç®å½\n\nmkdir -p /home/ITP/share\n\n\n\n# æè½½NFSå±äº«\n\nmount -t nfs 172.16.134.248:/home/ITP/share /home/ITP/share\n\n\n\n# æ¥çå®¢æ·ç«¯æè½½ä¿¡æ¯\n\ndf -h\n\n\nè³æ­¤ï¼NFS é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",normalizedContent:"# centos 7 å®è£ nfs\n\n\n# æ¦è¿°\n\nç½ç»æä»¶ç³»ç»ï¼è±ænetwork file system(nfs)ï¼æ¯ç±sunå¬å¸ç å¶çunixè¡¨ç¤ºå±åè®®(presentation layer protocol)ï¼è½ä½¿ä½¿ç¨èè®¿é®ç½ç»ä¸å«å¤çæä»¶å°±åå¨ä½¿ç¨èªå·±çè®¡ç®æºä¸æ ·ã\n\n\n# nfsæå¡ç«¯å®è£ï¼\n\nyum install nfs-utils -y\n\n\n\n# åå»ºå±äº«\n\n1.å¨/etc/exportséç½®æä»¶ä¸­æ·»å ä»¥ä¸åå®¹ï¼ä¿å­éåºï¼\n\n/home/itp/share 172.16.134.252/255.255.255.0(rw,sync,no_root_squash)\n\n\næè\n\n/home/itp/share 172.16.134.0/24(rw,sync,no_root_squash)\n\n\n\n# åå»ºå±äº«ç®å½å¹¶ç»äºåçæé\n\nmkdir /home/itp/share\nchmod o+w /home/itp/share\n\n\n\n# å¯å¨nfsæå¡\n\nsystemctl restart rpcbind\nsystemctl restart nfs-server\nsystemctl enable rpcbind\nsystemctl enable nfs-server\n\n\næ³¨æ\n\nnfså¶å®è¿ä¾èµnfs-lockãnfs-idmapä¸¤ä¸ªæå¡ï¼ä½æ¯æ éæä»¬å»åç¸å³éç½®ã\n\n\n# é²ç«å¢éç½®\n\nfirewall-cmd --permanent --zone=public --add-service=nfs\nfirewall-cmd --permanent --zone=public --add-service=mountd\nfirewall-cmd --permanent --zone=public --add-service=rpc-bind\nfirewall-cmd --reload\n\n\n\n# nfså®¢æ·ç«¯å®è£ï¼\n\nyum install nfs-utils -y\n\n\n\n# åå»ºæè½½ç®å½\n\nmkdir -p /home/itp/share\n\n\n\n# æè½½nfså±äº«\n\nmount -t nfs 172.16.134.248:/home/itp/share /home/itp/share\n\n\n\n# æ¥çå®¢æ·ç«¯æè½½ä¿¡æ¯\n\ndf -h\n\n\nè³æ­¤ï¼nfs é¨ç½²å®æ (ã-ã)ã¤ã­ å¹²æ¯~",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"CentOS7 LVMæä½å®æ",frontmatter:{title:"CentOS7 LVMæä½å®æ",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/619aa3/"},regularPath:"/03.CentOS/02.%E9%AB%98%E7%BA%A7/01.CentOS7%20LVM%E6%93%8D%E4%BD%9C%E5%AE%9E%E6%88%98.html",relativePath:"03.CentOS/02.é«çº§/01.CentOS7 LVMæä½å®æ.md",key:"v-1a563de3",path:"/pages/619aa3/",headers:[{level:2,title:"LVMç®ä»",slug:"lvmç®ä»",normalizedTitle:"lvmç®ä»",charIndex:22},{level:2,title:"LVMç¸å³æ¦å¿µåæºå¶",slug:"lvmç¸å³æ¦å¿µåæºå¶",normalizedTitle:"lvmç¸å³æ¦å¿µåæºå¶",charIndex:410},{level:3,title:"PV(Physical Volume)å³ç©çå·",slug:"pv-physical-volume-å³ç©çå·",normalizedTitle:"pv(physical volume)å³ç©çå·",charIndex:535},{level:3,title:"VG(Volume Group)å³å·ç»",slug:"vg-volume-group-å³å·ç»",normalizedTitle:"vg(volume group)å³å·ç»",charIndex:637},{level:3,title:"PE(Physical Extend)",slug:"pe-physical-extend",normalizedTitle:"pe(physical extend)",charIndex:805},{level:3,title:"LV(Logical Volume)",slug:"lv-logical-volume",normalizedTitle:"lv(logical volume)",charIndex:860},{level:3,title:"LE(logical extent)",slug:"le-logical-extent",normalizedTitle:"le(logical extent)",charIndex:1169},{level:2,title:"LVMçåå¥æºå¶",slug:"lvmçåå¥æºå¶",normalizedTitle:"lvmçåå¥æºå¶",charIndex:1338},{level:2,title:"LVMè¯¦è§£å¾",slug:"lvmè¯¦è§£å¾",normalizedTitle:"lvmè¯¦è§£å¾",charIndex:1620},{level:2,title:"æä½å®æ",slug:"æä½å®æ",normalizedTitle:"æä½å®æ",charIndex:13},{level:2,title:"åå»ºLVMé»è¾å·",slug:"åå»ºlvmé»è¾å·",normalizedTitle:"åå»ºlvmé»è¾å·",charIndex:3865},{level:2,title:"æ ¼å¼åå¹¶ä½¿ç¨é»è¾å·",slug:"æ ¼å¼åå¹¶ä½¿ç¨é»è¾å·",normalizedTitle:"æ ¼å¼åå¹¶ä½¿ç¨é»è¾å·",charIndex:6362},{level:2,title:"æ©å®¹é»è¾å·",slug:"æ©å®¹é»è¾å·",normalizedTitle:"æ©å®¹é»è¾å·",charIndex:8104},{level:3,title:"ç¬¬ä¸ç§æåµï¼æ©çç©ºé´å¤§å°å¨vgçå®¹éèå´ä¹å",slug:"ç¬¬ä¸ç§æåµ-æ©çç©ºé´å¤§å°å¨vgçå®¹éèå´ä¹å",normalizedTitle:"ç¬¬ä¸ç§æåµï¼æ©çç©ºé´å¤§å°å¨vgçå®¹éèå´ä¹å",charIndex:8205},{level:3,title:"ç¬¬äºç§æåµï¼æ©å®¹çå¤§å°è¶è¿äºvgçå¤§å°",slug:"ç¬¬äºç§æåµ-æ©å®¹çå¤§å°è¶è¿äºvgçå¤§å°",normalizedTitle:"ç¬¬äºç§æåµï¼æ©å®¹çå¤§å°è¶è¿äºvgçå¤§å°",charIndex:10157},{level:2,title:"ç¼©å°é»è¾å·",slug:"ç¼©å°é»è¾å·",normalizedTitle:"ç¼©å°é»è¾å·",charIndex:14360}],headersStr:"LVMç®ä» LVMç¸å³æ¦å¿µåæºå¶ PV(Physical Volume)å³ç©çå· VG(Volume Group)å³å·ç» PE(Physical Extend) LV(Logical Volume) LE(logical extent) LVMçåå¥æºå¶ LVMè¯¦è§£å¾ æä½å®æ åå»ºLVMé»è¾å· æ ¼å¼åå¹¶ä½¿ç¨é»è¾å· æ©å®¹é»è¾å· ç¬¬ä¸ç§æåµï¼æ©çç©ºé´å¤§å°å¨vgçå®¹éèå´ä¹å ç¬¬äºç§æåµï¼æ©å®¹çå¤§å°è¶è¿äºvgçå¤§å° ç¼©å°é»è¾å·",content:'# CentOS7 LVMæä½å®æ\n\n\n# LVMç®ä»\n\nLVMæ¯é»è¾çå·ç®¡çï¼LogicalVolumeManagerï¼çç®ç§°ï¼å®æ¯Linuxç¯å¢ä¸å¯¹ç£çååºè¿è¡ç®¡ççä¸ç§æºå¶ï¼LVMæ¯å»ºç«å¨ç¡¬çåååºä¹ä¸çä¸ä¸ªé»è¾å±ï¼æ¥æé«ç£çååºç®¡çççµæ´»æ§ãéè¿LVMç³»ç»ç®¡çåå¯ä»¥è½»æ¾ç®¡çç£çååºï¼å¦ï¼å°è¥å¹²ä¸ªç£çååºè¿æ¥ä¸ºä¸ä¸ªæ´åçå·ç» ï¼volumegroupï¼ï¼å½¢æä¸ä¸ªå­å¨æ± ãç®¡çåå¯ä»¥å¨å·ç»ä¸éæåå»ºé»è¾å·ç»ï¼logicalvolumesï¼ï¼å¹¶è¿ä¸æ­¥å¨é»è¾å·ç»ä¸åå»ºæä»¶ç³»ç»ã\n\n * LVMæ¯ Logical Volume Manager(é»è¾å·ç®¡ç)çç®å\n\n * PV:æ¯ç©ççç£çååº\n\n * VG:LVMä¸­çç©ççç£çååºï¼ä¹å°±æ¯PVï¼å¿é¡»å å¥VGï¼å¯ä»¥å°VGçè§£ä¸ºä¸ä¸ªä»åºç»ä¸ç®¡çäºå ä¸ªå¤§çç¡¬çï¼å½¢æäºä¸ä¸ªç»ä¸èæçå­å¨èµæºæ± ã\n\n * LVï¼ä¹å°±æ¯ä»VGä¸­ååçé»è¾ååº\n\næ½è±¡æ¨¡åå¦ä¸:\n\n\n\n\n# LVMç¸å³æ¦å¿µåæºå¶\n\nLVM(Logical Volume Manager)å¯ä»¥è®©ååºåå¾å¼¹æ§ï¼å¯ä»¥éæ¶éå°çæ©å¤§åç¼©å°ååºå¤§å°ï¼åææ¯è¯¥ååºæ¯LVMæ ¼å¼çã\n\nlvméè¦ä½¿ç¨çè½¯ä»¶åä¸ºlvm2ï¼ä¸è¬å¨CentOSåè¡çä¸­é½å·²ç»é¢å®è£äºã\n\n\n# PV(Physical Volume)å³ç©çå·\n\nç¡¬çååºå(è¿æªæ ¼å¼åä¸ºæä»¶ç³»ç»)ä½¿ç¨pvcreateå½ä»¤å¯ä»¥å°ååºåå»ºä¸ºPVï¼è¦æ±ååºçsystem IDä¸º8eï¼å³ä¸ºLVMæ ¼å¼çç³»ç»æ è¯ç¬¦ã\n\n\n# VG(Volume Group)å³å·ç»\n\nå°å¤ä¸ªPVç»åèµ·æ¥ï¼ä½¿ç¨vgcreateå½ä»¤åå»ºæå·ç»ï¼è¿æ ·å·ç»åå«äºå¤ä¸ªPVå°±æ¯è¾å¤§äºï¼ç¸å½äºéæ°æ´åäºå¤ä¸ªååºåå¾å°çç£çãè½ç¶VGæ¯æ´åå¤ä¸ªPVçï¼ä½æ¯åå»ºVGæ¶ä¼å°VGææçç©ºé´æ ¹æ®æå®çPEå¤§å°ååä¸ºå¤ä¸ªPEï¼å¨LVMæ¨¡å¼ä¸çå­å¨é½ä»¥PEä¸ºååï¼ç±»ä¼¼äºæä»¶ç³»ç»çBlockã\n\n\n# PE(Physical Extend)\n\nPEæ¯VGä¸­çå­å¨ååãå®éå­å¨çæ°æ®é½æ¯å­å¨å¨è¿éé¢çã\n\n\n# LV(Logical Volume)\n\nVGç¸å½äºæ´åè¿çç¡¬çï¼é£ä¹LVå°±ç¸å½äºååºï¼åªä¸è¿è¯¥ååºæ¯éè¿VGæ¥ååçãVGä¸­æå¾å¤PEååï¼å¯ä»¥æå®å°å¤å°ä¸ªPEååç»ä¸ä¸ªLVï¼ä¹å¯ä»¥ç´æ¥æå®å¤§å°(å¦å¤å°å)æ¥ååãååä¸ºLVä¹åå°±ç¸å½äºååäºååºï¼åªéåå¯¹LVè¿è¡æ ¼å¼åå³å¯åææ®éçæä»¶ç³»ç»ã\n\néä¿å°è®²ï¼éLVMç®¡ççååºæ­¥éª¤æ¯å°ç¡¬çååºï¼ç¶åå°ååºæ ¼å¼åä¸ºæä»¶ç³»ç»ãèä½¿ç¨LVMï¼åæ¯å¨ç¡¬çååºä¸ºç¹å®çLVMæ è¯ç¬¦çååºåå°å¶è½¬åä¸ºLVMå¯ç®¡ççPVï¼å¶å®PVä»ç¶ç±»ä¼¼äºååºï¼ç¶åå°å ä¸ªPVæ´åä¸ºç±»ä¼¼äºç£ççVGï¼æåååVGä¸ºLVï¼æ­¤æ¶LVå°±æäºLVMå¯ç®¡ççååºï¼åªéåå¯¹å¶æ ¼å¼åå³å¯æä¸ºæä»¶ç³»ç»ã\n\n\n# LE(logical extent)\n\nPEæ¯ç©çå­å¨ååï¼èLEåæ¯é»è¾å­å¨ååï¼ä¹å³ä¸ºLVä¸­çé»è¾å­å¨ååï¼åPEçå¤§å°æ¯ä¸æ ·çãä»VGä¸­ååLVï¼å®éä¸æ¯ä»VGä¸­ååVGä¸­çPEï¼åªä¸è¿ååLVåå®ä¸åç§°ä¸ºPEï¼èæ¯æä¸ºleã\n\nLVMä¹æä»¥è½å¤ä¼¸ç¼©å®¹éï¼å¶å®ç°çæ¹æ³å°±æ¯å°LVéç©ºé²çPEç§»åºï¼æåLVä¸­æ·»å ç©ºé²çPEã\n\n\n# LVMçåå¥æºå¶\n\nLVæ¯ä»VGä¸­åååºæ¥çï¼LVä¸­çPEå¾å¯è½æ¥èªäºå¤ä¸ªPVãå¨åLVå­å¨æ°æ®æ¶ï¼æå¤ç§å­å¨æºå¶ï¼å¶ä¸­ä¸¤ç§æ¯ï¼\n\nçº¿æ§æ¨¡å¼(linear)ï¼ååå®æ¥èªäºåä¸ä¸ªPVçPEï¼ååæ¥èªäºä¸ä¸ä¸ªPVçPEã\n\næ¡å¸¦æ¨¡å¼(striped)ï¼ä¸ä»½æ°æ®æåæå¤ä»½ï¼åå«åå¥è¯¥LVå¯¹åºçæ¯ä¸ªPVä¸­ï¼æä»¥è¯»åæ§è½è¾å¥½ï¼ç±»ä¼¼äºRAID 0ã\n\nå°½ç®¡stripedè¯»åæ§è½è¾å¥½ä¹ä¸å»ºè®®ä½¿ç¨è¯¥æ¨¡å¼ï¼å ä¸ºlvmççéç¹å¨äºå¼¹æ§å®¹éæ©å±èéæ§è½ï¼è¦å®ç°æ§è½åºè¯¥ä½¿ç¨RAIDæ¥å®ç°ï¼èä¸ä½¿ç¨stripedæ¨¡å¼æ¶è¦è¿è¡å®¹éçæ©å±åæ¶ç¼©å°æ¯è¾éº»ç¦ãé»è®¤çæ¯ä½¿ç¨çº¿æ§æ¨¡å¼ã\n\n\n# LVMè¯¦è§£å¾\n\n\n\n\n# æä½å®æ\n\néè¿å¨èææºçCentOS7ä¸åå»ºLVM ï¼ä½¿ç¨LVï¼æ©å®¹LVï¼ç¼©åLVå®ææ¥äºè§£LVMåçæå¯¹LVMçæä½ã\n\nåå¤å·¥ä½åå¤èææºï¼æä½ç³»ç»ä¸ºCentOS7ï¼åå§40Gçç¡¬ç\n\n\n\nåå§ç¶æå±20Gçç³»ç»ç\n\n[root@localhost ~]# df -h\nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 2.0G     0  2.0G   0% /dev\ntmpfs                    2.0G     0  2.0G   0% /dev/shm\ntmpfs                    2.0G  8.6M  2.0G   1% /run\ntmpfs                    2.0G     0  2.0G   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35G  1.3G   32G   4% /\n/dev/sda1                976M  108M  802M  12% /boot\ntmpfs                    396M     0  396M   0% /run/user/0\n\n\næ¥ä¸æ¥ï¼å³é­èææºå¹¶æ·»å ä¸¤åç¡¬çï¼å¤§å°è®¾ç½®100GB\n\n\n\nå¯å¨èææºéè¿pvså½ä»¤æ¥çç©çå·çæåµï¼ç®ååªçå°æèææºåå§å®è£æ¶æä¸ªpvä¸º/dv/sda2 vgä¸ºcentsoçç©çå· å¤§å°ä¸º40G\n\n[root@localhost ~]# pvs\n  PV         VG     Fmt  Attr PSize   PFree\n  /dev/sda2  centos lvm2 a--  <39.00g 4.00m\n\n\néè¿fdisk -l å¯ä»¥çå°æ°å çä¸¤ä¸ªçå¤§å°åå«é½æ¯100Gãæä»¬å°ç¨è¿ä¸¤ä¸ªçç»æä¸ä¸ªvgï¼è¿è¡lvmçç®¡çã\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# fdisk -l\n\nDisk /dev/sda: 42.9 GB, 42949672960 bytes, 83886080 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x000cbb0e\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048     2099199     1048576   83  Linux\n/dev/sda2         2099200    83886079    40893440   8e  Linux LVM\n\nDisk /dev/sdb: 107.4 GB, 107374182400 bytes, 209715200 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/sdc: 107.4 GB, 107374182400 bytes, 209715200 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/mapper/centos-root: 37.7 GB, 37706792960 bytes, 73646080 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/mapper/centos-swap: 4160 MB, 4160749568 bytes, 8126464 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\n\n# åå»ºLVMé»è¾å·\n\n1ãå°ç©çç¡¬çæ ¼å¼åæPVï¼ç©çå·ï¼ ä½¿ç¨çæ¯pvcreateå½ä»¤pvcreate /dev/sdb /dev/sdc (å°/dev/sdb /dev/sdcä¸¤åç¡¬çåå»ºä¸ºç©çå·)\n\n[root@localhost ~]# pvcreate /dev/sdb /dev/sdc\n  Physical volume "/dev/sdb" successfully created.\n  Physical volume "/dev/sdc" successfully created.\n\n\néè¿pvdisplayæpvsæ¥çå½åçPVä¿¡æ¯ï¼å¯ä»¥çå°ä¸¤å100Gçç©çå·å·²ç»æååå»º\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n[root@localhost ~]# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/sda2\n  VG Name               centos\n  PV Size               <39.00 GiB / not usable 3.00 MiB\n  Allocatable           yes \n  PE Size               4.00 MiB\n  Total PE              9983\n  Free PE               1\n  Allocated PE          9982\n  PV UUID               uT8J7D-rCmM-npfd-Cfzc-HDXf-3oGz-cx0sI8\n   \n  "/dev/sdb" is a new physical volume of "100.00 GiB"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdb\n  VG Name               \n  PV Size               100.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               XcglBd-zjL5-SGRC-4F5i-huhz-2mac-DECnQA\n   \n  "/dev/sdc" is a new physical volume of "100.00 GiB"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdc\n  VG Name               \n  PV Size               100.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               bgqoKV-1ncH-VqjQ-tpT3-KxEb-oiQl-UPvq9h\n\n\n2ãåå»ºå·ç»ï¼VGï¼ï¼å¹¶å°PVå å¥å°å·ç»ä¸­ éè¿vgcreateå½ä»¤vgcreate vg /dev/sdb /dev/sdc\n\n[root@localhost ~]# vgcreate vg /dev/sdb /dev/sdc\n  Volume group "vg" successfully created\n\n\néè¿vgdisplayævgså½ä»¤æ¥çvgçä¿¡æ¯ãçå°vgå·²ç»åå»ºå¥½äºï¼å¤§å°æ¯ä¸¤ä¸ªpvçå¤§å¤§å°ä¹å°±æ¯100G+100Gï¼å¤§æ¦æ¯200Gçæ ·å­ï¼è¿éæ¾ç¤º199.99G\n\n[root@localhost ~]# vgs\n  VG     #PV #LV #SN Attr   VSize   VFree  \n  centos   1   2   0 wz--n- <39.00g   4.00m\n  vg       2   0   0 wz--n- 199.99g 199.99g\n\n\n3ãåºäºå·ç»ï¼VGï¼åå»ºé»è¾å·(LV) éè¿lvcreateå½ä»¤lvcreate -n app -L 50G vg (åºäºvgåå»ºé»è¾å·lv,åå­ä¸ºapp,å¤§å°ä¸º50G)\n\n[root@localhost ~]# lvcreate -n app -L 50G vg\n  Logical volume "app" created.\n\n\nç¨lvdisplayælvså½ä»¤æ¥çåå»ºå¥½çé»è¾å·ãå¯ä»¥çå°åå­ä¸ºappçé»è¾å·lvå·²ç»åå»ºå¥½äºï¼å®æ¯åºäºvgåå»ºçï¼å¤§å°ä¸º50G\n\n[root@localhost ~]# lvs\n  LV   VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  root centos -wi-ao---- <35.12g                                                    \n  swap centos -wi-ao----  <3.88g                                                    \n  app  vg     -wi-a-----  50.00g   \n\n\nå°è¿éï¼lvå°±åå»ºå¥½äºï¼ä½æ¯è¦ç¨èµ·æ¥ï¼è¿å¾æ ¼å¼åå¹¶æè½½å°æä»¬çæä»¶ç³»ç»ã\n\n\n# æ ¼å¼åå¹¶ä½¿ç¨é»è¾å·\n\n1ãæ ¼å¼å mkfs -t ext4 /dev/vg/app ç¨ext4çæ ¼å¼æ ¼å¼å/dev/vg/app\n\n[root@localhost ~]# mkfs -t ext4 /dev/vg/app\nmke2fs 1.42.9 (28-Dec-2013)\nFilesystem label=\nOS type: Linux\nBlock size=4096 (log=2)\nFragment size=4096 (log=2)\nStride=0 blocks, Stripe width=0 blocks\n3276800 inodes, 13107200 blocks\n655360 blocks (5.00%) reserved for the super user\nFirst data block=0\nMaximum filesystem blocks=2162163712\n400 block groups\n32768 blocks per group, 32768 fragments per group\n8192 inodes per group\nSuperblock backups stored on blocks: \n        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, \n        4096000, 7962624, 11239424\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done  \n\n\n2ãæè½½ åå»ºæè½½ç¹ mkdir /app å°/dev/vg/app æè½½å°/app\n\nmount /dev/vg/app /app\n\n\nç¶ådf -h å¯ä»¥çå°å·²ç»æè½½å°/appä¸äº ï¼å¤§å°ä¸ºlv çå¤§å°50G\n\n[root@localhost app]# df -h\nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 2.0G     0  2.0G   0% /dev\ntmpfs                    2.0G     0  2.0G   0% /dev/shm\ntmpfs                    2.0G  8.6M  2.0G   1% /run\ntmpfs                    2.0G     0  2.0G   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35G  1.3G   32G   4% /\n/dev/sda1                976M  108M  802M  12% /boot\ntmpfs                    396M     0  396M   0% /run/user/0\n/dev/mapper/vg-app        50G   53M   47G   1% /app\n\n\nè¿å¥/appç®å½æ§è¡å½ä»¤touch test.txt åå»ºä¸ä¸ªæµè¯æä»¶test.txtï¼å¯ä»¥çå°è¯¥æè½½ç¹æ¯å¯ä»¥ç¨äºã\n\n[root@localhost app]# touch test.txt\n[root@localhost app]# ll\ntotal 0\n-rw-r--r--. 1 root root 0 May 28 17:50 test.txt\n\n\nè®¾ç½®å¼æºå è½½\n\necho "/dev/vg/app /app ext4 defaults 0 0" >>/etc/fstab\n\n\n\n# æ©å®¹é»è¾å·\n\nè¿éæ©å®¹åä¸¤ç§æåµï¼ä¸ç§æåµæ¯vgè¿æè¶³å¤çç©ºé´ï¼é£ä¹å°±å¯ä»¥ç´æ¥æ©lvå°±å¯ä»¥äºãå¦å¤ä¸ç§æåµæ¯è¦æ©çç©ºé´å·²ç»è¶è¿äºvgçå¤§å°ï¼é£ä¹å°±å¯ä»¥éè¿å ç©çç£çæ©åå°vgéï¼ç¶ååæ©lvã\n\n\n# ç¬¬ä¸ç§æåµï¼æ©çç©ºé´å¤§å°å¨vgçå®¹éèå´ä¹å\n\n[root@localhost app]# vgs\n  VG     #PV #LV #SN Attr   VSize   VFree  \n  centos   1   2   0 wz--n- <39.00g   4.00m\n  vg       2   1   0 wz--n- 199.99g 149.99g\n\n\nç°å¨vgçå¤§å°ä¸º200Gï¼ç°å¨/appæ¯50Gï¼è®¡åæ©å°80Gï¼æ²¡æè¶è¿vgçå¤§å°é£ä¹å¯ä»¥ç´æ¥æ©lvå°±å¯ä»¥äºã\n\nç¬¬ä¸æ­¥ï¼é¦åå¸è½½è®¾å¤åæè½½ç¹çå³è\n\numount /app\n\n\nç¬¬äºæ­¥ï¼å°é»è¾å·/dev/vg/app æ©å±å°80G lvextend -L 80G /dev/vg/app å¯ä»¥æ¸æ¥ççå°vg/appä»50Gæ©å®¹å°äº80G\n\n[root@localhost app]# lvextend -L 80G /dev/vg/app\n  Size of logical volume vg/app changed from 50.00 GiB (12800 extents) to 80.00 GiB (20480 extents).\n  Logical volume vg/app successfully resized.\n\n\nç¬¬ä¸æ­¥ï¼æ£æ¥ç¡¬çï¼lvï¼å®æ´æ§ï¼å¹¶éç½®ç¡¬ç(lv)å®¹é e2fsck -f /dev/vg/app æ£æ¥ç¡¬çå®æ´æ§\n\n[root@localhost app]# e2fsck -f /dev/vg/app\ne2fsck 1.42.9 (28-Dec-2013)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/vg/app: 11/3276800 files (0.0% non-contiguous), 251790/13107200 blocks\n\n\nresize2fs /dev/vg/app éç½®ç¡¬ç(lv)å®¹éï¼è¿ä¸æ­¥å¿éè¦åï¼å¦åå³ä½¿æ©äºå®¹éï¼ä½çå°çè¿æ¯æ©å®¹ä¹åçå®¹éã\n\n[root@localhost app]# resize2fs /dev/vg/app\nresize2fs 1.42.9 (28-Dec-2013)\nResizing the filesystem on /dev/vg/app to 20971520 (4k) blocks.\nThe filesystem on /dev/vg/app is now 20971520 blocks long.\n\n\nç¬¬åæ­¥ï¼éæ°æè½½ç¡¬çå¹¶æ¥ç mount -aå¹¶æ§è¡df -h å¯ä»¥çå°/appå·²ç»æåæ©å®¹å°80Gäº\n\n[root@localhost app]# mount -a\n[root@localhost app]# df -h\nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 2.0G     0  2.0G   0% /dev\ntmpfs                    2.0G     0  2.0G   0% /dev/shm\ntmpfs                    2.0G  8.6M  2.0G   1% /run\ntmpfs                    2.0G     0  2.0G   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35G  1.3G   32G   4% /\n/dev/sda1                976M  108M  802M  12% /boot\ntmpfs                    396M     0  396M   0% /run/user/0\n/dev/mapper/vg-app        79G   56M   75G   1% /app\n\n\nls æ¥ç/appéé¢çæä»¶è¿å¨ï¼è¯´ææ©å®¹å¯¹æä»¶æ°æ®æ²¡æå¥å½±åã\n\n[root@localhost app]# ls\ntest.txt\n\n\nå¦ææ©å®¹çå¤§å°è¶è¿äºvgçå¤§å°æä¹åå¢ï¼å¯ä»¥éè¿æ©ç¡¬ä»¶çæ¹å¼ï¼å åç¡¬çå°vgç¶ååæ©lvã\n\n\n# ç¬¬äºç§æåµï¼æ©å®¹çå¤§å°è¶è¿äºvgçå¤§å°\n\nç°å¨vgçå¤§å°ä¸º200Gï¼ç°å¨/appæ¯80Gï¼è®¡åæ©å°350Gï¼å·²ç»æ²¡æè¶è¿vgç200Gå¤§å°é£ä¹å°±éè¦åå ç¡¬çï¼ç¶åæ©vgï¼åæ©lvã\n\nç¬¬ä¸æ­¥ï¼æ·»å ç¡¬ç\n\n\n\néè¿fdisk -lå½ä»¤æ¥çæ·»å \n\n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# fdisk -l\n\nDisk /dev/sdd: 214.7 GB, 214748364800 bytes, 419430400 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/sdb: 107.4 GB, 107374182400 bytes, 209715200 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/sda: 42.9 GB, 42949672960 bytes, 83886080 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x000cbb0e\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048     2099199     1048576   83  Linux\n/dev/sda2         2099200    83886079    40893440   8e  Linux LVM\n\nDisk /dev/sdc: 107.4 GB, 107374182400 bytes, 209715200 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/mapper/centos-root: 37.7 GB, 37706792960 bytes, 73646080 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/mapper/centos-swap: 4160 MB, 4160749568 bytes, 8126464 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/mapper/vg-app: 85.9 GB, 85899345920 bytes, 167772160 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nç¬¬äºæ­¥ï¼æ©å®¹vg å°æ°çç¡¬çæ©å°vgå·ç»éï¼å¸è½½/app\n\numount /app\n\n\næ§è¡å½ä»¤vgextend vg /dev/sdd å°æ°æ·»å çç¡¬ç/dev/sddæ·»å å°vgå·ç»é\n\n[root@localhost ~]# vgextend vg /dev/sdd\n  Physical volume "/dev/sdd" successfully created.\n  Volume group "vg" successfully extended\n\n\nç¬¬ä¸æ­¥ï¼æ©å®¹lv å°é»è¾å·/dev/vg/app æ©å±å°350Gï¼æ§è¡å½ä»¤ lvextend -L 11G /dev/vg/app å¯ä»¥çå°vg/appä»åæ¥ç8Gæ©å°äº350G\n\n[root@localhost ~]# lvextend -L 350G /dev/vg/app\n  Size of logical volume vg/app changed from 80.00 GiB (20480 extents) to 350.00 GiB (89600 extents).\n  Logical volume vg/app successfully resized.\n\n\nç¬¬åæ­¥ï¼åæ ·æ£æ¥ç¡¬çï¼lvï¼å®æ´æ§ï¼å¹¶éç½®ç¡¬ç(lv)å®¹ée2fsck -f /dev/vg/app æ£æ¥ç¡¬çå®æ´æ§ï¼resize2fs /dev/vg/app éç½®ç¡¬ç(lv)å®¹é\n\n[root@localhost ~]# umount /app\n[root@localhost ~]# df -h\nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 2.0G     0  2.0G   0% /dev\ntmpfs                    2.0G     0  2.0G   0% /dev/shm\ntmpfs                    2.0G  8.6M  2.0G   1% /run\ntmpfs                    2.0G     0  2.0G   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35G  1.3G   32G   4% /\n/dev/sda1                976M  108M  802M  12% /boot\ntmpfs                    396M     0  396M   0% /run/user/0\n[root@localhost ~]# e2fsck -f /dev/vg/app\ne2fsck 1.42.9 (28-Dec-2013)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/vg/app: 11/5242880 files (0.0% non-contiguous), 376182/20971520 blocks\n[root@localhost ~]# resize2fs /dev/vg/app\nresize2fs 1.42.9 (28-Dec-2013)\nResizing the filesystem on /dev/vg/app to 91750400 (4k) blocks.\nThe filesystem on /dev/vg/app is now 91750400 blocks long.\n\n\nç¬¬äºæ­¥ï¼éæ°æè½½ç¡¬çå¹¶æ¥ç mount -aå¹¶æ§è¡df -h å¯ä»¥çå°/appå·²ç»æåæ©å®¹å°350Gäº\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n[root@localhost ~]# mount -a\n[root@localhost ~]# df -h\nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 2.0G     0  2.0G   0% /dev\ntmpfs                    2.0G     0  2.0G   0% /dev/shm\ntmpfs                    2.0G  8.6M  2.0G   1% /run\ntmpfs                    2.0G     0  2.0G   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35G  1.3G   32G   4% /\n/dev/sda1                976M  108M  802M  12% /boot\ntmpfs                    396M     0  396M   0% /run/user/0\n/dev/mapper/vg-app       345G   66M  327G   1% /app\n\n\n\n# ç¼©å°é»è¾å·\n\nç¸å¯¹äºé»è¾å·æ©å®¹ï¼ç¼©å°é»è¾å·ï¼æ°æ®ä¸¢å¤±çé£é©æ´å¤§ãæä»¥å¨çäº§ç¯å¢ä¸­æä½ä¸å®è¦æ³¨ææåå¤ä»½å¥½æ°æ®ãå¨å¯¹LVMé»è¾å·è¿è¡ç¼©å°æä½ä¹åï¼åæè¦ç¼©å°çæä»¶ç³»ç»å¸è½½å¹¶æ£æ¥æä»¶ç³»ç»çå®æ´æ§ã ç°å¨æä»¬å°/appç±ç°å¨ç350Gç¼©å°100G\n\nç¬¬ä¸æ­¥ï¼å¸è½½/appå¹¶æ£æ¥æä»¶ç³»ç»å®æ´æ§\n\n[root@localhost ~]# umount /app\n[root@localhost ~]# e2fsck -f /dev/vg/app\ne2fsck 1.42.9 (28-Dec-2013)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/vg/app: 11/22937600 files (0.0% non-contiguous), 1489518/91750400 blocks\n\n\nç¬¬äºæ­¥ï¼æé»è¾å·ç¼©å®¹å°100Gï¼æ§è¡å½ä»¤ï¼resize2fs /dev/vg/app 100Gålvreduce -L 100G /dev/vg/app\n\n[root@localhost ~]# resize2fs /dev/vg/app 100G\nresize2fs 1.42.9 (28-Dec-2013)\nResizing the filesystem on /dev/vg/app to 26214400 (4k) blocks.\nThe filesystem on /dev/vg/app is now 26214400 blocks long.\n\n[root@localhost ~]# lvreduce -L 100G /dev/vg/app\n  WARNING: Reducing active logical volume to 100.00 GiB.\n  THIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce vg/app? [y/n]: y\n  Size of logical volume vg/app changed from 350.00 GiB (89600 extents) to 100.00 GiB (25600 extents).\n  Logical volume vg/app successfully resized.\n\n\nç¬¬ä¸æ­¥ï¼éæ°æè½½å¹¶æ¥çç¶æ\n\n[root@localhost ~]# mount -a \n[root@localhost ~]# df -h \nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 2.0G     0  2.0G   0% /dev\ntmpfs                    2.0G     0  2.0G   0% /dev/shm\ntmpfs                    2.0G  8.6M  2.0G   1% /run\ntmpfs                    2.0G     0  2.0G   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35G  1.3G   32G   4% /\n/dev/sda1                976M  108M  802M  12% /boot\ntmpfs                    396M     0  396M   0% /run/user/0\n/dev/mapper/vg-app        99G   60M   94G   1% /app\n\n\néè¿LVMçç®¡çï¼åå»ºãæ©å®¹ãç¼©å®¹ï¼å¯ä»¥çå°éè¿LVMææ¯å¯ä»¥å®ç°ç³»ç»å­å¨ç©ºé´çå¨æçè°æ´ã\n\nåºæ¬åçæ¯å°å¤ä¸ªç©çç¡¬çåå»ºæpv(ç©çå·)ï¼è¿äºç©çå·æ¯å¨æè°æ´çç©çåºç¡ï¼éè¿vgå°pvç®¡çèµ·æ¥å½¢æä¸ä¸ªæ´ä½çèµæºæ± ãå¨vgä¸­åålvæ¥å¨æè°æ´é»è¾å·çå¤§å°ã\n\nè³æ­¤ï¼CentOS7 LVMæä½å®æå®æ (ã-ã)ã¤ã­ å¹²æ¯~',normalizedContent:'# centos7 lvmæä½å®æ\n\n\n# lvmç®ä»\n\nlvmæ¯é»è¾çå·ç®¡çï¼logicalvolumemanagerï¼çç®ç§°ï¼å®æ¯linuxç¯å¢ä¸å¯¹ç£çååºè¿è¡ç®¡ççä¸ç§æºå¶ï¼lvmæ¯å»ºç«å¨ç¡¬çåååºä¹ä¸çä¸ä¸ªé»è¾å±ï¼æ¥æé«ç£çååºç®¡çççµæ´»æ§ãéè¿lvmç³»ç»ç®¡çåå¯ä»¥è½»æ¾ç®¡çç£çååºï¼å¦ï¼å°è¥å¹²ä¸ªç£çååºè¿æ¥ä¸ºä¸ä¸ªæ´åçå·ç» ï¼volumegroupï¼ï¼å½¢æä¸ä¸ªå­å¨æ± ãç®¡çåå¯ä»¥å¨å·ç»ä¸éæåå»ºé»è¾å·ç»ï¼logicalvolumesï¼ï¼å¹¶è¿ä¸æ­¥å¨é»è¾å·ç»ä¸åå»ºæä»¶ç³»ç»ã\n\n * lvmæ¯ logical volume manager(é»è¾å·ç®¡ç)çç®å\n\n * pv:æ¯ç©ççç£çååº\n\n * vg:lvmä¸­çç©ççç£çååºï¼ä¹å°±æ¯pvï¼å¿é¡»å å¥vgï¼å¯ä»¥å°vgçè§£ä¸ºä¸ä¸ªä»åºç»ä¸ç®¡çäºå ä¸ªå¤§çç¡¬çï¼å½¢æäºä¸ä¸ªç»ä¸èæçå­å¨èµæºæ± ã\n\n * lvï¼ä¹å°±æ¯ä»vgä¸­ååçé»è¾ååº\n\næ½è±¡æ¨¡åå¦ä¸:\n\n\n\n\n# lvmç¸å³æ¦å¿µåæºå¶\n\nlvm(logical volume manager)å¯ä»¥è®©ååºåå¾å¼¹æ§ï¼å¯ä»¥éæ¶éå°çæ©å¤§åç¼©å°ååºå¤§å°ï¼åææ¯è¯¥ååºæ¯lvmæ ¼å¼çã\n\nlvméè¦ä½¿ç¨çè½¯ä»¶åä¸ºlvm2ï¼ä¸è¬å¨centosåè¡çä¸­é½å·²ç»é¢å®è£äºã\n\n\n# pv(physical volume)å³ç©çå·\n\nç¡¬çååºå(è¿æªæ ¼å¼åä¸ºæä»¶ç³»ç»)ä½¿ç¨pvcreateå½ä»¤å¯ä»¥å°ååºåå»ºä¸ºpvï¼è¦æ±ååºçsystem idä¸º8eï¼å³ä¸ºlvmæ ¼å¼çç³»ç»æ è¯ç¬¦ã\n\n\n# vg(volume group)å³å·ç»\n\nå°å¤ä¸ªpvç»åèµ·æ¥ï¼ä½¿ç¨vgcreateå½ä»¤åå»ºæå·ç»ï¼è¿æ ·å·ç»åå«äºå¤ä¸ªpvå°±æ¯è¾å¤§äºï¼ç¸å½äºéæ°æ´åäºå¤ä¸ªååºåå¾å°çç£çãè½ç¶vgæ¯æ´åå¤ä¸ªpvçï¼ä½æ¯åå»ºvgæ¶ä¼å°vgææçç©ºé´æ ¹æ®æå®çpeå¤§å°ååä¸ºå¤ä¸ªpeï¼å¨lvmæ¨¡å¼ä¸çå­å¨é½ä»¥peä¸ºååï¼ç±»ä¼¼äºæä»¶ç³»ç»çblockã\n\n\n# pe(physical extend)\n\npeæ¯vgä¸­çå­å¨ååãå®éå­å¨çæ°æ®é½æ¯å­å¨å¨è¿éé¢çã\n\n\n# lv(logical volume)\n\nvgç¸å½äºæ´åè¿çç¡¬çï¼é£ä¹lvå°±ç¸å½äºååºï¼åªä¸è¿è¯¥ååºæ¯éè¿vgæ¥ååçãvgä¸­æå¾å¤peååï¼å¯ä»¥æå®å°å¤å°ä¸ªpeååç»ä¸ä¸ªlvï¼ä¹å¯ä»¥ç´æ¥æå®å¤§å°(å¦å¤å°å)æ¥ååãååä¸ºlvä¹åå°±ç¸å½äºååäºååºï¼åªéåå¯¹lvè¿è¡æ ¼å¼åå³å¯åææ®éçæä»¶ç³»ç»ã\n\néä¿å°è®²ï¼élvmç®¡ççååºæ­¥éª¤æ¯å°ç¡¬çååºï¼ç¶åå°ååºæ ¼å¼åä¸ºæä»¶ç³»ç»ãèä½¿ç¨lvmï¼åæ¯å¨ç¡¬çååºä¸ºç¹å®çlvmæ è¯ç¬¦çååºåå°å¶è½¬åä¸ºlvmå¯ç®¡ççpvï¼å¶å®pvä»ç¶ç±»ä¼¼äºååºï¼ç¶åå°å ä¸ªpvæ´åä¸ºç±»ä¼¼äºç£ççvgï¼æåååvgä¸ºlvï¼æ­¤æ¶lvå°±æäºlvmå¯ç®¡ççååºï¼åªéåå¯¹å¶æ ¼å¼åå³å¯æä¸ºæä»¶ç³»ç»ã\n\n\n# le(logical extent)\n\npeæ¯ç©çå­å¨ååï¼èleåæ¯é»è¾å­å¨ååï¼ä¹å³ä¸ºlvä¸­çé»è¾å­å¨ååï¼åpeçå¤§å°æ¯ä¸æ ·çãä»vgä¸­åålvï¼å®éä¸æ¯ä»vgä¸­ååvgä¸­çpeï¼åªä¸è¿åålvåå®ä¸åç§°ä¸ºpeï¼èæ¯æä¸ºleã\n\nlvmä¹æä»¥è½å¤ä¼¸ç¼©å®¹éï¼å¶å®ç°çæ¹æ³å°±æ¯å°lvéç©ºé²çpeç§»åºï¼æålvä¸­æ·»å ç©ºé²çpeã\n\n\n# lvmçåå¥æºå¶\n\nlvæ¯ä»vgä¸­åååºæ¥çï¼lvä¸­çpeå¾å¯è½æ¥èªäºå¤ä¸ªpvãå¨ålvå­å¨æ°æ®æ¶ï¼æå¤ç§å­å¨æºå¶ï¼å¶ä¸­ä¸¤ç§æ¯ï¼\n\nçº¿æ§æ¨¡å¼(linear)ï¼ååå®æ¥èªäºåä¸ä¸ªpvçpeï¼ååæ¥èªäºä¸ä¸ä¸ªpvçpeã\n\næ¡å¸¦æ¨¡å¼(striped)ï¼ä¸ä»½æ°æ®æåæå¤ä»½ï¼åå«åå¥è¯¥lvå¯¹åºçæ¯ä¸ªpvä¸­ï¼æä»¥è¯»åæ§è½è¾å¥½ï¼ç±»ä¼¼äºraid 0ã\n\nå°½ç®¡stripedè¯»åæ§è½è¾å¥½ä¹ä¸å»ºè®®ä½¿ç¨è¯¥æ¨¡å¼ï¼å ä¸ºlvmççéç¹å¨äºå¼¹æ§å®¹éæ©å±èéæ§è½ï¼è¦å®ç°æ§è½åºè¯¥ä½¿ç¨raidæ¥å®ç°ï¼èä¸ä½¿ç¨stripedæ¨¡å¼æ¶è¦è¿è¡å®¹éçæ©å±åæ¶ç¼©å°æ¯è¾éº»ç¦ãé»è®¤çæ¯ä½¿ç¨çº¿æ§æ¨¡å¼ã\n\n\n# lvmè¯¦è§£å¾\n\n\n\n\n# æä½å®æ\n\néè¿å¨èææºçcentos7ä¸åå»ºlvm ï¼ä½¿ç¨lvï¼æ©å®¹lvï¼ç¼©ålvå®ææ¥äºè§£lvmåçæå¯¹lvmçæä½ã\n\nåå¤å·¥ä½åå¤èææºï¼æä½ç³»ç»ä¸ºcentos7ï¼åå§40gçç¡¬ç\n\n\n\nåå§ç¶æå±20gçç³»ç»ç\n\n[root@localhost ~]# df -h\nfilesystem               size  used avail use% mounted on\ndevtmpfs                 2.0g     0  2.0g   0% /dev\ntmpfs                    2.0g     0  2.0g   0% /dev/shm\ntmpfs                    2.0g  8.6m  2.0g   1% /run\ntmpfs                    2.0g     0  2.0g   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35g  1.3g   32g   4% /\n/dev/sda1                976m  108m  802m  12% /boot\ntmpfs                    396m     0  396m   0% /run/user/0\n\n\næ¥ä¸æ¥ï¼å³é­èææºå¹¶æ·»å ä¸¤åç¡¬çï¼å¤§å°è®¾ç½®100gb\n\n\n\nå¯å¨èææºéè¿pvså½ä»¤æ¥çç©çå·çæåµï¼ç®ååªçå°æèææºåå§å®è£æ¶æä¸ªpvä¸º/dv/sda2 vgä¸ºcentsoçç©çå· å¤§å°ä¸º40g\n\n[root@localhost ~]# pvs\n  pv         vg     fmt  attr psize   pfree\n  /dev/sda2  centos lvm2 a--  <39.00g 4.00m\n\n\néè¿fdisk -l å¯ä»¥çå°æ°å çä¸¤ä¸ªçå¤§å°åå«é½æ¯100gãæä»¬å°ç¨è¿ä¸¤ä¸ªçç»æä¸ä¸ªvgï¼è¿è¡lvmçç®¡çã\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# fdisk -l\n\ndisk /dev/sda: 42.9 gb, 42949672960 bytes, 83886080 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\ndisk label type: dos\ndisk identifier: 0x000cbb0e\n\n   device boot      start         end      blocks   id  system\n/dev/sda1   *        2048     2099199     1048576   83  linux\n/dev/sda2         2099200    83886079    40893440   8e  linux lvm\n\ndisk /dev/sdb: 107.4 gb, 107374182400 bytes, 209715200 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/sdc: 107.4 gb, 107374182400 bytes, 209715200 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/mapper/centos-root: 37.7 gb, 37706792960 bytes, 73646080 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/mapper/centos-swap: 4160 mb, 4160749568 bytes, 8126464 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\n\n# åå»ºlvmé»è¾å·\n\n1ãå°ç©çç¡¬çæ ¼å¼åæpvï¼ç©çå·ï¼ ä½¿ç¨çæ¯pvcreateå½ä»¤pvcreate /dev/sdb /dev/sdc (å°/dev/sdb /dev/sdcä¸¤åç¡¬çåå»ºä¸ºç©çå·)\n\n[root@localhost ~]# pvcreate /dev/sdb /dev/sdc\n  physical volume "/dev/sdb" successfully created.\n  physical volume "/dev/sdc" successfully created.\n\n\néè¿pvdisplayæpvsæ¥çå½åçpvä¿¡æ¯ï¼å¯ä»¥çå°ä¸¤å100gçç©çå·å·²ç»æååå»º\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n[root@localhost ~]# pvdisplay\n  --- physical volume ---\n  pv name               /dev/sda2\n  vg name               centos\n  pv size               <39.00 gib / not usable 3.00 mib\n  allocatable           yes \n  pe size               4.00 mib\n  total pe              9983\n  free pe               1\n  allocated pe          9982\n  pv uuid               ut8j7d-rcmm-npfd-cfzc-hdxf-3ogz-cx0si8\n   \n  "/dev/sdb" is a new physical volume of "100.00 gib"\n  --- new physical volume ---\n  pv name               /dev/sdb\n  vg name               \n  pv size               100.00 gib\n  allocatable           no\n  pe size               0   \n  total pe              0\n  free pe               0\n  allocated pe          0\n  pv uuid               xcglbd-zjl5-sgrc-4f5i-huhz-2mac-decnqa\n   \n  "/dev/sdc" is a new physical volume of "100.00 gib"\n  --- new physical volume ---\n  pv name               /dev/sdc\n  vg name               \n  pv size               100.00 gib\n  allocatable           no\n  pe size               0   \n  total pe              0\n  free pe               0\n  allocated pe          0\n  pv uuid               bgqokv-1nch-vqjq-tpt3-kxeb-oiql-upvq9h\n\n\n2ãåå»ºå·ç»ï¼vgï¼ï¼å¹¶å°pvå å¥å°å·ç»ä¸­ éè¿vgcreateå½ä»¤vgcreate vg /dev/sdb /dev/sdc\n\n[root@localhost ~]# vgcreate vg /dev/sdb /dev/sdc\n  volume group "vg" successfully created\n\n\néè¿vgdisplayævgså½ä»¤æ¥çvgçä¿¡æ¯ãçå°vgå·²ç»åå»ºå¥½äºï¼å¤§å°æ¯ä¸¤ä¸ªpvçå¤§å¤§å°ä¹å°±æ¯100g+100gï¼å¤§æ¦æ¯200gçæ ·å­ï¼è¿éæ¾ç¤º199.99g\n\n[root@localhost ~]# vgs\n  vg     #pv #lv #sn attr   vsize   vfree  \n  centos   1   2   0 wz--n- <39.00g   4.00m\n  vg       2   0   0 wz--n- 199.99g 199.99g\n\n\n3ãåºäºå·ç»ï¼vgï¼åå»ºé»è¾å·(lv) éè¿lvcreateå½ä»¤lvcreate -n app -l 50g vg (åºäºvgåå»ºé»è¾å·lv,åå­ä¸ºapp,å¤§å°ä¸º50g)\n\n[root@localhost ~]# lvcreate -n app -l 50g vg\n  logical volume "app" created.\n\n\nç¨lvdisplayælvså½ä»¤æ¥çåå»ºå¥½çé»è¾å·ãå¯ä»¥çå°åå­ä¸ºappçé»è¾å·lvå·²ç»åå»ºå¥½äºï¼å®æ¯åºäºvgåå»ºçï¼å¤§å°ä¸º50g\n\n[root@localhost ~]# lvs\n  lv   vg     attr       lsize   pool origin data%  meta%  move log cpy%sync convert\n  root centos -wi-ao---- <35.12g                                                    \n  swap centos -wi-ao----  <3.88g                                                    \n  app  vg     -wi-a-----  50.00g   \n\n\nå°è¿éï¼lvå°±åå»ºå¥½äºï¼ä½æ¯è¦ç¨èµ·æ¥ï¼è¿å¾æ ¼å¼åå¹¶æè½½å°æä»¬çæä»¶ç³»ç»ã\n\n\n# æ ¼å¼åå¹¶ä½¿ç¨é»è¾å·\n\n1ãæ ¼å¼å mkfs -t ext4 /dev/vg/app ç¨ext4çæ ¼å¼æ ¼å¼å/dev/vg/app\n\n[root@localhost ~]# mkfs -t ext4 /dev/vg/app\nmke2fs 1.42.9 (28-dec-2013)\nfilesystem label=\nos type: linux\nblock size=4096 (log=2)\nfragment size=4096 (log=2)\nstride=0 blocks, stripe width=0 blocks\n3276800 inodes, 13107200 blocks\n655360 blocks (5.00%) reserved for the super user\nfirst data block=0\nmaximum filesystem blocks=2162163712\n400 block groups\n32768 blocks per group, 32768 fragments per group\n8192 inodes per group\nsuperblock backups stored on blocks: \n        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, \n        4096000, 7962624, 11239424\n\nallocating group tables: done                            \nwriting inode tables: done                            \ncreating journal (32768 blocks): done\nwriting superblocks and filesystem accounting information: done  \n\n\n2ãæè½½ åå»ºæè½½ç¹ mkdir /app å°/dev/vg/app æè½½å°/app\n\nmount /dev/vg/app /app\n\n\nç¶ådf -h å¯ä»¥çå°å·²ç»æè½½å°/appä¸äº ï¼å¤§å°ä¸ºlv çå¤§å°50g\n\n[root@localhost app]# df -h\nfilesystem               size  used avail use% mounted on\ndevtmpfs                 2.0g     0  2.0g   0% /dev\ntmpfs                    2.0g     0  2.0g   0% /dev/shm\ntmpfs                    2.0g  8.6m  2.0g   1% /run\ntmpfs                    2.0g     0  2.0g   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35g  1.3g   32g   4% /\n/dev/sda1                976m  108m  802m  12% /boot\ntmpfs                    396m     0  396m   0% /run/user/0\n/dev/mapper/vg-app        50g   53m   47g   1% /app\n\n\nè¿å¥/appç®å½æ§è¡å½ä»¤touch test.txt åå»ºä¸ä¸ªæµè¯æä»¶test.txtï¼å¯ä»¥çå°è¯¥æè½½ç¹æ¯å¯ä»¥ç¨äºã\n\n[root@localhost app]# touch test.txt\n[root@localhost app]# ll\ntotal 0\n-rw-r--r--. 1 root root 0 may 28 17:50 test.txt\n\n\nè®¾ç½®å¼æºå è½½\n\necho "/dev/vg/app /app ext4 defaults 0 0" >>/etc/fstab\n\n\n\n# æ©å®¹é»è¾å·\n\nè¿éæ©å®¹åä¸¤ç§æåµï¼ä¸ç§æåµæ¯vgè¿æè¶³å¤çç©ºé´ï¼é£ä¹å°±å¯ä»¥ç´æ¥æ©lvå°±å¯ä»¥äºãå¦å¤ä¸ç§æåµæ¯è¦æ©çç©ºé´å·²ç»è¶è¿äºvgçå¤§å°ï¼é£ä¹å°±å¯ä»¥éè¿å ç©çç£çæ©åå°vgéï¼ç¶ååæ©lvã\n\n\n# ç¬¬ä¸ç§æåµï¼æ©çç©ºé´å¤§å°å¨vgçå®¹éèå´ä¹å\n\n[root@localhost app]# vgs\n  vg     #pv #lv #sn attr   vsize   vfree  \n  centos   1   2   0 wz--n- <39.00g   4.00m\n  vg       2   1   0 wz--n- 199.99g 149.99g\n\n\nç°å¨vgçå¤§å°ä¸º200gï¼ç°å¨/appæ¯50gï¼è®¡åæ©å°80gï¼æ²¡æè¶è¿vgçå¤§å°é£ä¹å¯ä»¥ç´æ¥æ©lvå°±å¯ä»¥äºã\n\nç¬¬ä¸æ­¥ï¼é¦åå¸è½½è®¾å¤åæè½½ç¹çå³è\n\numount /app\n\n\nç¬¬äºæ­¥ï¼å°é»è¾å·/dev/vg/app æ©å±å°80g lvextend -l 80g /dev/vg/app å¯ä»¥æ¸æ¥ççå°vg/appä»50gæ©å®¹å°äº80g\n\n[root@localhost app]# lvextend -l 80g /dev/vg/app\n  size of logical volume vg/app changed from 50.00 gib (12800 extents) to 80.00 gib (20480 extents).\n  logical volume vg/app successfully resized.\n\n\nç¬¬ä¸æ­¥ï¼æ£æ¥ç¡¬çï¼lvï¼å®æ´æ§ï¼å¹¶éç½®ç¡¬ç(lv)å®¹é e2fsck -f /dev/vg/app æ£æ¥ç¡¬çå®æ´æ§\n\n[root@localhost app]# e2fsck -f /dev/vg/app\ne2fsck 1.42.9 (28-dec-2013)\npass 1: checking inodes, blocks, and sizes\npass 2: checking directory structure\npass 3: checking directory connectivity\npass 4: checking reference counts\npass 5: checking group summary information\n/dev/vg/app: 11/3276800 files (0.0% non-contiguous), 251790/13107200 blocks\n\n\nresize2fs /dev/vg/app éç½®ç¡¬ç(lv)å®¹éï¼è¿ä¸æ­¥å¿éè¦åï¼å¦åå³ä½¿æ©äºå®¹éï¼ä½çå°çè¿æ¯æ©å®¹ä¹åçå®¹éã\n\n[root@localhost app]# resize2fs /dev/vg/app\nresize2fs 1.42.9 (28-dec-2013)\nresizing the filesystem on /dev/vg/app to 20971520 (4k) blocks.\nthe filesystem on /dev/vg/app is now 20971520 blocks long.\n\n\nç¬¬åæ­¥ï¼éæ°æè½½ç¡¬çå¹¶æ¥ç mount -aå¹¶æ§è¡df -h å¯ä»¥çå°/appå·²ç»æåæ©å®¹å°80gäº\n\n[root@localhost app]# mount -a\n[root@localhost app]# df -h\nfilesystem               size  used avail use% mounted on\ndevtmpfs                 2.0g     0  2.0g   0% /dev\ntmpfs                    2.0g     0  2.0g   0% /dev/shm\ntmpfs                    2.0g  8.6m  2.0g   1% /run\ntmpfs                    2.0g     0  2.0g   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35g  1.3g   32g   4% /\n/dev/sda1                976m  108m  802m  12% /boot\ntmpfs                    396m     0  396m   0% /run/user/0\n/dev/mapper/vg-app        79g   56m   75g   1% /app\n\n\nls æ¥ç/appéé¢çæä»¶è¿å¨ï¼è¯´ææ©å®¹å¯¹æä»¶æ°æ®æ²¡æå¥å½±åã\n\n[root@localhost app]# ls\ntest.txt\n\n\nå¦ææ©å®¹çå¤§å°è¶è¿äºvgçå¤§å°æä¹åå¢ï¼å¯ä»¥éè¿æ©ç¡¬ä»¶çæ¹å¼ï¼å åç¡¬çå°vgç¶ååæ©lvã\n\n\n# ç¬¬äºç§æåµï¼æ©å®¹çå¤§å°è¶è¿äºvgçå¤§å°\n\nç°å¨vgçå¤§å°ä¸º200gï¼ç°å¨/appæ¯80gï¼è®¡åæ©å°350gï¼å·²ç»æ²¡æè¶è¿vgç200gå¤§å°é£ä¹å°±éè¦åå ç¡¬çï¼ç¶åæ©vgï¼åæ©lvã\n\nç¬¬ä¸æ­¥ï¼æ·»å ç¡¬ç\n\n\n\néè¿fdisk -lå½ä»¤æ¥çæ·»å \n\n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[root@localhost ~]# fdisk -l\n\ndisk /dev/sdd: 214.7 gb, 214748364800 bytes, 419430400 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/sdb: 107.4 gb, 107374182400 bytes, 209715200 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/sda: 42.9 gb, 42949672960 bytes, 83886080 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\ndisk label type: dos\ndisk identifier: 0x000cbb0e\n\n   device boot      start         end      blocks   id  system\n/dev/sda1   *        2048     2099199     1048576   83  linux\n/dev/sda2         2099200    83886079    40893440   8e  linux lvm\n\ndisk /dev/sdc: 107.4 gb, 107374182400 bytes, 209715200 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/mapper/centos-root: 37.7 gb, 37706792960 bytes, 73646080 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/mapper/centos-swap: 4160 mb, 4160749568 bytes, 8126464 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\ndisk /dev/mapper/vg-app: 85.9 gb, 85899345920 bytes, 167772160 sectors\nunits = sectors of 1 * 512 = 512 bytes\nsector size (logical/physical): 512 bytes / 512 bytes\ni/o size (minimum/optimal): 512 bytes / 512 bytes\n\n\nç¬¬äºæ­¥ï¼æ©å®¹vg å°æ°çç¡¬çæ©å°vgå·ç»éï¼å¸è½½/app\n\numount /app\n\n\næ§è¡å½ä»¤vgextend vg /dev/sdd å°æ°æ·»å çç¡¬ç/dev/sddæ·»å å°vgå·ç»é\n\n[root@localhost ~]# vgextend vg /dev/sdd\n  physical volume "/dev/sdd" successfully created.\n  volume group "vg" successfully extended\n\n\nç¬¬ä¸æ­¥ï¼æ©å®¹lv å°é»è¾å·/dev/vg/app æ©å±å°350gï¼æ§è¡å½ä»¤ lvextend -l 11g /dev/vg/app å¯ä»¥çå°vg/appä»åæ¥ç8gæ©å°äº350g\n\n[root@localhost ~]# lvextend -l 350g /dev/vg/app\n  size of logical volume vg/app changed from 80.00 gib (20480 extents) to 350.00 gib (89600 extents).\n  logical volume vg/app successfully resized.\n\n\nç¬¬åæ­¥ï¼åæ ·æ£æ¥ç¡¬çï¼lvï¼å®æ´æ§ï¼å¹¶éç½®ç¡¬ç(lv)å®¹ée2fsck -f /dev/vg/app æ£æ¥ç¡¬çå®æ´æ§ï¼resize2fs /dev/vg/app éç½®ç¡¬ç(lv)å®¹é\n\n[root@localhost ~]# umount /app\n[root@localhost ~]# df -h\nfilesystem               size  used avail use% mounted on\ndevtmpfs                 2.0g     0  2.0g   0% /dev\ntmpfs                    2.0g     0  2.0g   0% /dev/shm\ntmpfs                    2.0g  8.6m  2.0g   1% /run\ntmpfs                    2.0g     0  2.0g   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35g  1.3g   32g   4% /\n/dev/sda1                976m  108m  802m  12% /boot\ntmpfs                    396m     0  396m   0% /run/user/0\n[root@localhost ~]# e2fsck -f /dev/vg/app\ne2fsck 1.42.9 (28-dec-2013)\npass 1: checking inodes, blocks, and sizes\npass 2: checking directory structure\npass 3: checking directory connectivity\npass 4: checking reference counts\npass 5: checking group summary information\n/dev/vg/app: 11/5242880 files (0.0% non-contiguous), 376182/20971520 blocks\n[root@localhost ~]# resize2fs /dev/vg/app\nresize2fs 1.42.9 (28-dec-2013)\nresizing the filesystem on /dev/vg/app to 91750400 (4k) blocks.\nthe filesystem on /dev/vg/app is now 91750400 blocks long.\n\n\nç¬¬äºæ­¥ï¼éæ°æè½½ç¡¬çå¹¶æ¥ç mount -aå¹¶æ§è¡df -h å¯ä»¥çå°/appå·²ç»æåæ©å®¹å°350gäº\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n[root@localhost ~]# mount -a\n[root@localhost ~]# df -h\nfilesystem               size  used avail use% mounted on\ndevtmpfs                 2.0g     0  2.0g   0% /dev\ntmpfs                    2.0g     0  2.0g   0% /dev/shm\ntmpfs                    2.0g  8.6m  2.0g   1% /run\ntmpfs                    2.0g     0  2.0g   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35g  1.3g   32g   4% /\n/dev/sda1                976m  108m  802m  12% /boot\ntmpfs                    396m     0  396m   0% /run/user/0\n/dev/mapper/vg-app       345g   66m  327g   1% /app\n\n\n\n# ç¼©å°é»è¾å·\n\nç¸å¯¹äºé»è¾å·æ©å®¹ï¼ç¼©å°é»è¾å·ï¼æ°æ®ä¸¢å¤±çé£é©æ´å¤§ãæä»¥å¨çäº§ç¯å¢ä¸­æä½ä¸å®è¦æ³¨ææåå¤ä»½å¥½æ°æ®ãå¨å¯¹lvmé»è¾å·è¿è¡ç¼©å°æä½ä¹åï¼åæè¦ç¼©å°çæä»¶ç³»ç»å¸è½½å¹¶æ£æ¥æä»¶ç³»ç»çå®æ´æ§ã ç°å¨æä»¬å°/appç±ç°å¨ç350gç¼©å°100g\n\nç¬¬ä¸æ­¥ï¼å¸è½½/appå¹¶æ£æ¥æä»¶ç³»ç»å®æ´æ§\n\n[root@localhost ~]# umount /app\n[root@localhost ~]# e2fsck -f /dev/vg/app\ne2fsck 1.42.9 (28-dec-2013)\npass 1: checking inodes, blocks, and sizes\npass 2: checking directory structure\npass 3: checking directory connectivity\npass 4: checking reference counts\npass 5: checking group summary information\n/dev/vg/app: 11/22937600 files (0.0% non-contiguous), 1489518/91750400 blocks\n\n\nç¬¬äºæ­¥ï¼æé»è¾å·ç¼©å®¹å°100gï¼æ§è¡å½ä»¤ï¼resize2fs /dev/vg/app 100gålvreduce -l 100g /dev/vg/app\n\n[root@localhost ~]# resize2fs /dev/vg/app 100g\nresize2fs 1.42.9 (28-dec-2013)\nresizing the filesystem on /dev/vg/app to 26214400 (4k) blocks.\nthe filesystem on /dev/vg/app is now 26214400 blocks long.\n\n[root@localhost ~]# lvreduce -l 100g /dev/vg/app\n  warning: reducing active logical volume to 100.00 gib.\n  this may destroy your data (filesystem etc.)\ndo you really want to reduce vg/app? [y/n]: y\n  size of logical volume vg/app changed from 350.00 gib (89600 extents) to 100.00 gib (25600 extents).\n  logical volume vg/app successfully resized.\n\n\nç¬¬ä¸æ­¥ï¼éæ°æè½½å¹¶æ¥çç¶æ\n\n[root@localhost ~]# mount -a \n[root@localhost ~]# df -h \nfilesystem               size  used avail use% mounted on\ndevtmpfs                 2.0g     0  2.0g   0% /dev\ntmpfs                    2.0g     0  2.0g   0% /dev/shm\ntmpfs                    2.0g  8.6m  2.0g   1% /run\ntmpfs                    2.0g     0  2.0g   0% /sys/fs/cgroup\n/dev/mapper/centos-root   35g  1.3g   32g   4% /\n/dev/sda1                976m  108m  802m  12% /boot\ntmpfs                    396m     0  396m   0% /run/user/0\n/dev/mapper/vg-app        99g   60m   94g   1% /app\n\n\néè¿lvmçç®¡çï¼åå»ºãæ©å®¹ãç¼©å®¹ï¼å¯ä»¥çå°éè¿lvmææ¯å¯ä»¥å®ç°ç³»ç»å­å¨ç©ºé´çå¨æçè°æ´ã\n\nåºæ¬åçæ¯å°å¤ä¸ªç©çç¡¬çåå»ºæpv(ç©çå·)ï¼è¿äºç©çå·æ¯å¨æè°æ´çç©çåºç¡ï¼éè¿vgå°pvç®¡çèµ·æ¥å½¢æä¸ä¸ªæ´ä½çèµæºæ± ãå¨vgä¸­åålvæ¥å¨æè°æ´é»è¾å·çå¤§å°ã\n\nè³æ­¤ï¼centos7 lvmæä½å®æå®æ (ã-ã)ã¤ã­ å¹²æ¯~',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"é¨ç½²åå°portal-webé¡¹ç®",frontmatter:{title:"é¨ç½²åå°portal-webé¡¹ç®",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/1b51c8/"},regularPath:"/03.CentOS/03.%E5%AE%9E%E6%88%98/01.%E9%83%A8%E7%BD%B2%E5%90%8E%E5%8F%B0portal-web%E9%A1%B9%E7%9B%AE.html",relativePath:"03.CentOS/03.å®æ/01.é¨ç½²åå°portal-webé¡¹ç®.md",key:"v-1ce7bb32",path:"/pages/1b51c8/",headers:[{level:2,title:"æ·è´portal-web.zipå°tomcatå¹¶è§£å",slug:"æ·è´portal-web-zipå°tomcatå¹¶è§£å",normalizedTitle:"æ·è´portal-web.zipå°tomcatå¹¶è§£å",charIndex:23},{level:2,title:"ä¿®æ¹éç½®æä»¶ config.properties",slug:"ä¿®æ¹éç½®æä»¶-config-properties",normalizedTitle:"ä¿®æ¹éç½®æä»¶ config.properties",charIndex:159},{level:3,title:"ä¿®æ¹æ°æ®åºè¿æ¥",slug:"ä¿®æ¹æ°æ®åºè¿æ¥",normalizedTitle:"ä¿®æ¹æ°æ®åºè¿æ¥",charIndex:307},{level:3,title:"ä¿®æ¹éæèµæºè¯·æ±å°åï¼é»è®¤æ¬æºï¼",slug:"ä¿®æ¹éæèµæºè¯·æ±å°å-é»è®¤æ¬æº",normalizedTitle:"ä¿®æ¹éæèµæºè¯·æ±å°åï¼é»è®¤æ¬æºï¼",charIndex:496},{level:3,title:"ä¿®æ¹è§é¢æ­æ¾å°ååä¸ä¼ è§é¢èµæºå°åï¼é»è®¤æ¬æºï¼",slug:"ä¿®æ¹è§é¢æ­æ¾å°ååä¸ä¼ è§é¢èµæºå°å-é»è®¤æ¬æº",normalizedTitle:"ä¿®æ¹è§é¢æ­æ¾å°ååä¸ä¼ è§é¢èµæºå°åï¼é»è®¤æ¬æºï¼",charIndex:556},{level:3,title:"ä¿®æ¹Gitlabé¡¹ç®å°ååtokenï¼Tokenè·åæ¹å¼åèGitlabé¨ç½²ç« èï¼",slug:"ä¿®æ¹gitlabé¡¹ç®å°ååtoken-tokenè·åæ¹å¼åègitlabé¨ç½²ç« è",normalizedTitle:"ä¿®æ¹gitlabé¡¹ç®å°ååtokenï¼tokenè·åæ¹å¼åègitlabé¨ç½²ç« èï¼",charIndex:687},{level:3,title:"ä¿®æ¹domain",slug:"ä¿®æ¹domain",normalizedTitle:"ä¿®æ¹domain",charIndex:805},{level:3,title:"ä¿®æ¹Jenkinséç½® å¡«åå®è£æ¶éç½®çç¨æ·ååå¯ç ï¼credentialsIdæ¯æä»¬æå¨åå»ºçï¼è¯·æ ¹æ®ãåå»ºgitlab-rootå­æ®ãç« èéç½®",slug:"ä¿®æ¹jenkinséç½®-å¡«åå®è£æ¶éç½®çç¨æ·ååå¯ç -credentialsidæ¯æä»¬æå¨åå»ºç-è¯·æ ¹æ®ãåå»ºgitlab-rootå­æ®ãç« èéç½®",normalizedTitle:"ä¿®æ¹jenkinséç½® å¡«åå®è£æ¶éç½®çç¨æ·ååå¯ç ï¼credentialsidæ¯æä»¬æå¨åå»ºçï¼è¯·æ ¹æ®ãåå»ºgitlab-rootå­æ®ãç« èéç½®",charIndex:844},{level:3,title:"ä¿®æ¹sonarqubeéç½®",slug:"ä¿®æ¹sonarqubeéç½®",normalizedTitle:"ä¿®æ¹sonarqubeéç½®",charIndex:1077},{level:2,title:"ä¿®æ¹éç½®æä»¶ mongodb.properties",slug:"ä¿®æ¹éç½®æä»¶-mongodb-properties",normalizedTitle:"ä¿®æ¹éç½®æä»¶ mongodb.properties",charIndex:1200},{level:2,title:"ä¿®æ¹éç½®æä»¶ license-config.properties",slug:"ä¿®æ¹éç½®æä»¶-license-config-properties",normalizedTitle:"ä¿®æ¹éç½®æä»¶ license-config.properties",charIndex:1442},{level:2,title:"ä¿®æ¹éç½®æä»¶ upload.properties",slug:"ä¿®æ¹éç½®æä»¶-upload-properties",normalizedTitle:"ä¿®æ¹éç½®æä»¶ upload.properties",charIndex:1804},{level:2,title:"åå»ºæä»¶ç®å½",slug:"åå»ºæä»¶ç®å½",normalizedTitle:"åå»ºæä»¶ç®å½",charIndex:2025}],headersStr:"æ·è´portal-web.zipå°tomcatå¹¶è§£å ä¿®æ¹éç½®æä»¶ config.properties ä¿®æ¹æ°æ®åºè¿æ¥ ä¿®æ¹éæèµæºè¯·æ±å°åï¼é»è®¤æ¬æºï¼ ä¿®æ¹è§é¢æ­æ¾å°ååä¸ä¼ è§é¢èµæºå°åï¼é»è®¤æ¬æºï¼ ä¿®æ¹Gitlabé¡¹ç®å°ååtokenï¼Tokenè·åæ¹å¼åèGitlabé¨ç½²ç« èï¼ ä¿®æ¹domain ä¿®æ¹Jenkinséç½® å¡«åå®è£æ¶éç½®çç¨æ·ååå¯ç ï¼credentialsIdæ¯æä»¬æå¨åå»ºçï¼è¯·æ ¹æ®ãåå»ºgitlab-rootå­æ®ãç« èéç½® ä¿®æ¹sonarqubeéç½® ä¿®æ¹éç½®æä»¶ mongodb.properties ä¿®æ¹éç½®æä»¶ license-config.properties ä¿®æ¹éç½®æä»¶ upload.properties åå»ºæä»¶ç®å½",content:"# é¨ç½²åå°portal-webé¡¹ç®\n\n\n# æ·è´portal-web.zipå°tomcatå¹¶è§£å\n\n# cd /opt/tomcat8/webapps/\n\n\næ·è´é¨ç½²ç®å½ä¸çportal-web.zipå°/opt/tomcat8/webappsä¸ã\n\nè§£å\n\n# unzip portal-web.zip\n\n\n\n# ä¿®æ¹éç½®æä»¶ config.properties\n\nç¼è¾config.propertieséç½®æä»¶ä¿®æ¹å¦ä¸éç½®ï¼ä¿®æ¹çº¢è²é¨åï¼\n\n# vi /opt/tomcat8/webapps/portal-web/WEB-INF/classes/config/config.properties\n\n\n\n# ä¿®æ¹æ°æ®åºè¿æ¥\n\njdbc.url=jdbc:mysql://mysql-ip/portal?useUnicode=true&characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&autoReconnect=true\njdbc.username=root\njdbc.password=heyuqiang\n\n\n\n# ä¿®æ¹éæèµæºè¯·æ±å°åï¼é»è®¤æ¬æºï¼\n\nresource.host=http://10.0.0.81:18087\n\n\n\n# ä¿®æ¹è§é¢æ­æ¾å°ååä¸ä¼ è§é¢èµæºå°åï¼é»è®¤æ¬æºï¼\n\nred5.ip=10.0.0.81\nred5Rtmp=rtmp://10.0.0.81/vod\nred5Host=http://10.0.0.81:18080/fileUpload\nplaySeq=1\n\n\n\n# ä¿®æ¹Gitlabé¡¹ç®å°ååtokenï¼Tokenè·åæ¹å¼åèGitlabé¨ç½²ç« èï¼\n\ngitlab.api.url=http://10.0.0.81\ngitlab.api.token=yB9e1V85CfNNSa8RupEF\n\n\n\n# ä¿®æ¹domain\n\ndomain=http://10.0.0.81\n\n\n\n# ä¿®æ¹Jenkinséç½® å¡«åå®è£æ¶éç½®çç¨æ·ååå¯ç ï¼credentialsIdæ¯æä»¬æå¨åå»ºçï¼è¯·æ ¹æ®ãåå»ºgitlab-rootå­æ®ãç« èéç½®\n\njenkins.server.url=http://10.0.0.86:8080/jenkins\njenkins.server.username=heyuqiang\njenkins.server.passwd=heyuqiang\njenkins.job.credentialsId=gitlab-root\n\n\n\n# ä¿®æ¹sonarqubeéç½®\n\nsonar.server.url=http://10.0.0.85:9000/sonar\nsonar.server.username=admin\nsonar.server.passwd=heyuqiang\n\n\n\n# ä¿®æ¹éç½®æä»¶ mongodb.properties\n\n# vi /opt/tomcat8/webapps/portal-web/WEB-INF/classes/config/mongodb.properties\n\n\nä»¥ä¸æ¯mongodbæ°æ®éç½® åæ¬æ°æ®åºåï¼å°å,ç«¯å£ï¼ç¨æ·ååå¯ç ã\n\nmongo.db=portal\nmongo.host=10.0.0.83\nmongo.port=27017\nmongo.user=portal\nmongo.pwd=heyuqiang\n\n\n\n# ä¿®æ¹éç½®æä»¶ license-config.properties\n\n# vi /opt/tomcat8/webapps/portal-web/WEB-INF/classes/config/license-config.properties\n\n\n#Licenseç¸å³éç½®\nlicense.subject=license_portal\nlicense.publicAlias=publicCert\nlicense.storePass=public_password1234\nlicense.licensePath=/opt/license_portal/license.lic\nlicense.publicKeysStorePath=/opt/licesnse_portal/publicCerts.keystore\n\n\n\n# ä¿®æ¹éç½®æä»¶ upload.properties\n\n# vi /opt/tomcat8/webapps/portal-web/WEB-INF/classes/config/upload.properties\n\n\nred5Path=/home/ITP/share/resource\ntempPath=/home/ITP/share/resource/temp\njudgedata=/home/ITP/share/judgedatas\n\n\n\n# åå»ºæä»¶ç®å½\n\né»è®¤ä¸ç¨ä¿®æ¹ä½¿ç¨å¦ä¸å½ä»¤åå»ºç¸å³ç®å½å³å¯ï¼ç¶åå°èµæºæ¾å¥å¯¹åºç®å½ã\n\nmkdir -p /home/ITP/share/resource\nmkdir -p /home/ITP/share/resource/temp\nmkdir -p /home/ITP/share/upload\nmkdir -p /home/ITP/share/judgedata\n",normalizedContent:"# é¨ç½²åå°portal-webé¡¹ç®\n\n\n# æ·è´portal-web.zipå°tomcatå¹¶è§£å\n\n# cd /opt/tomcat8/webapps/\n\n\næ·è´é¨ç½²ç®å½ä¸çportal-web.zipå°/opt/tomcat8/webappsä¸ã\n\nè§£å\n\n# unzip portal-web.zip\n\n\n\n# ä¿®æ¹éç½®æä»¶ config.properties\n\nç¼è¾config.propertieséç½®æä»¶ä¿®æ¹å¦ä¸éç½®ï¼ä¿®æ¹çº¢è²é¨åï¼\n\n# vi /opt/tomcat8/webapps/portal-web/web-inf/classes/config/config.properties\n\n\n\n# ä¿®æ¹æ°æ®åºè¿æ¥\n\njdbc.url=jdbc:mysql://mysql-ip/portal?useunicode=true&characterencoding=utf-8&zerodatetimebehavior=converttonull&autoreconnect=true\njdbc.username=root\njdbc.password=heyuqiang\n\n\n\n# ä¿®æ¹éæèµæºè¯·æ±å°åï¼é»è®¤æ¬æºï¼\n\nresource.host=http://10.0.0.81:18087\n\n\n\n# ä¿®æ¹è§é¢æ­æ¾å°ååä¸ä¼ è§é¢èµæºå°åï¼é»è®¤æ¬æºï¼\n\nred5.ip=10.0.0.81\nred5rtmp=rtmp://10.0.0.81/vod\nred5host=http://10.0.0.81:18080/fileupload\nplayseq=1\n\n\n\n# ä¿®æ¹gitlabé¡¹ç®å°ååtokenï¼tokenè·åæ¹å¼åègitlabé¨ç½²ç« èï¼\n\ngitlab.api.url=http://10.0.0.81\ngitlab.api.token=yb9e1v85cfnnsa8rupef\n\n\n\n# ä¿®æ¹domain\n\ndomain=http://10.0.0.81\n\n\n\n# ä¿®æ¹jenkinséç½® å¡«åå®è£æ¶éç½®çç¨æ·ååå¯ç ï¼credentialsidæ¯æä»¬æå¨åå»ºçï¼è¯·æ ¹æ®ãåå»ºgitlab-rootå­æ®ãç« èéç½®\n\njenkins.server.url=http://10.0.0.86:8080/jenkins\njenkins.server.username=heyuqiang\njenkins.server.passwd=heyuqiang\njenkins.job.credentialsid=gitlab-root\n\n\n\n# ä¿®æ¹sonarqubeéç½®\n\nsonar.server.url=http://10.0.0.85:9000/sonar\nsonar.server.username=admin\nsonar.server.passwd=heyuqiang\n\n\n\n# ä¿®æ¹éç½®æä»¶ mongodb.properties\n\n# vi /opt/tomcat8/webapps/portal-web/web-inf/classes/config/mongodb.properties\n\n\nä»¥ä¸æ¯mongodbæ°æ®éç½® åæ¬æ°æ®åºåï¼å°å,ç«¯å£ï¼ç¨æ·ååå¯ç ã\n\nmongo.db=portal\nmongo.host=10.0.0.83\nmongo.port=27017\nmongo.user=portal\nmongo.pwd=heyuqiang\n\n\n\n# ä¿®æ¹éç½®æä»¶ license-config.properties\n\n# vi /opt/tomcat8/webapps/portal-web/web-inf/classes/config/license-config.properties\n\n\n#licenseç¸å³éç½®\nlicense.subject=license_portal\nlicense.publicalias=publiccert\nlicense.storepass=public_password1234\nlicense.licensepath=/opt/license_portal/license.lic\nlicense.publickeysstorepath=/opt/licesnse_portal/publiccerts.keystore\n\n\n\n# ä¿®æ¹éç½®æä»¶ upload.properties\n\n# vi /opt/tomcat8/webapps/portal-web/web-inf/classes/config/upload.properties\n\n\nred5path=/home/itp/share/resource\ntemppath=/home/itp/share/resource/temp\njudgedata=/home/itp/share/judgedatas\n\n\n\n# åå»ºæä»¶ç®å½\n\né»è®¤ä¸ç¨ä¿®æ¹ä½¿ç¨å¦ä¸å½ä»¤åå»ºç¸å³ç®å½å³å¯ï¼ç¶åå°èµæºæ¾å¥å¯¹åºç®å½ã\n\nmkdir -p /home/itp/share/resource\nmkdir -p /home/itp/share/resource/temp\nmkdir -p /home/itp/share/upload\nmkdir -p /home/itp/share/judgedata\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"é¨ç½²åç«¯ITPé¡¹ç®",frontmatter:{title:"é¨ç½²åç«¯ITPé¡¹ç®",date:"2022-02-09T10:37:09.000Z",permalink:"/pages/7ba23c/"},regularPath:"/03.CentOS/03.%E5%AE%9E%E6%88%98/02.%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AFITP%E9%A1%B9%E7%9B%AE.html",relativePath:"03.CentOS/03.å®æ/02.é¨ç½²åç«¯ITPé¡¹ç®.md",key:"v-095cc5ff",path:"/pages/7ba23c/",headers:[{level:2,title:"æ·è´itp.zipå°/optå¹¶è§£å",slug:"æ·è´itp-zipå°-optå¹¶è§£å",normalizedTitle:"æ·è´itp.zipå°/optå¹¶è§£å",charIndex:16},{level:2,title:"æ£æ¥ä¿®æ¹nodeæå¡éç½®åé¡¹ç®éç½®",slug:"æ£æ¥ä¿®æ¹nodeæå¡éç½®åé¡¹ç®éç½®",normalizedTitle:"æ£æ¥ä¿®æ¹nodeæå¡éç½®åé¡¹ç®éç½®",charIndex:38},{level:2,title:"æ·å®éåå é",slug:"æ·å®éåå é",normalizedTitle:"æ·å®éåå é",charIndex:141},{level:2,title:"å®è£ææ°æ¬pm2",slug:"å®è£ææ°æ¬pm2",normalizedTitle:"å®è£ææ°æ¬pm2",charIndex:209},{level:2,title:"å®è£ææ°æ¬fis3",slug:"å®è£ææ°æ¬fis3",normalizedTitle:"å®è£ææ°æ¬fis3",charIndex:250},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:209},{level:2,title:"å¯å¨æå¡å½ä»¤",slug:"å¯å¨æå¡å½ä»¤",normalizedTitle:"å¯å¨æå¡å½ä»¤",charIndex:315},{level:2,title:"æ¥çpm2æå¡åè¡¨å½ä»¤",slug:"æ¥çpm2æå¡åè¡¨å½ä»¤",normalizedTitle:"æ¥çpm2æå¡åè¡¨å½ä»¤",charIndex:432},{level:2,title:"éå¯å½ä»¤",slug:"éå¯å½ä»¤",normalizedTitle:"éå¯å½ä»¤",charIndex:459},{level:2,title:"æ¥çæ¥å¿ pm2 log",slug:"æ¥çæ¥å¿-pm2-log",normalizedTitle:"æ¥çæ¥å¿ pm2 log",charIndex:491},{level:2,title:"åå»ºå¼æºå¯å¨èæ¬",slug:"åå»ºå¼æºå¯å¨èæ¬",normalizedTitle:"åå»ºå¼æºå¯å¨èæ¬",charIndex:518},{level:2,title:"æ·»å å¼æºå¯å¨é¡¹ç®",slug:"æ·»å å¼æºå¯å¨é¡¹ç®",normalizedTitle:"æ·»å å¼æºå¯å¨é¡¹ç®",charIndex:665}],headersStr:"æ·è´itp.zipå°/optå¹¶è§£å æ£æ¥ä¿®æ¹nodeæå¡éç½®åé¡¹ç®éç½® æ·å®éåå é å®è£ææ°æ¬pm2 å®è£ææ°æ¬fis3 å®è£ å¯å¨æå¡å½ä»¤ æ¥çpm2æå¡åè¡¨å½ä»¤ éå¯å½ä»¤ æ¥çæ¥å¿ pm2 log åå»ºå¼æºå¯å¨èæ¬ æ·»å å¼æºå¯å¨é¡¹ç®",content:"# é¨ç½²åç«¯ITPé¡¹ç®\n\n\n# æ·è´itp.zipå°/optå¹¶è§£å\n\n\n# æ£æ¥ä¿®æ¹nodeæå¡éç½®åé¡¹ç®éç½®\n\nnodeæå¡éç½®ï¼/config/config.js ä¸»è¦ä¿®æ¹ç«¯å£åapiå°å é¡¹ç®éç½®ï¼webApp/js/common/config_89dc744.js\n\n\n# æ·å®éåå é\n\nnpm install --registry https://registry.npm.taobao.org\n\n\n\n# å®è£ææ°æ¬pm2\n\nnpm install pm2@latest -g\n\n\n\n# å®è£ææ°æ¬fis3\n\nnpm install -g fis3\n\n\n\n# å®è£\n\nnpm  i --production\n\n\n\n# å¯å¨æå¡å½ä»¤\n\ncd /opt\npm2 start ./bin/www -n ITP\n\n\næç¤º\n\næ³¨ï¼-n æå¡åç§°ï¼è¯¦ç»è¯´æï¼http://pm2.keymetrics.io/docs/usage/quick-start/\n\n\n# æ¥çpm2æå¡åè¡¨å½ä»¤\n\npm2 list\n\n\n\n# éå¯å½ä»¤\n\npm2 restart (æå¡åæID)\n\n\n\n# æ¥çæ¥å¿ pm2 log\n\npm2 log\n\n\n\n# åå»ºå¼æºå¯å¨èæ¬\n\n# touch /opt/start-service.sh\n\n\næ·»å å¦ä¸åå®¹ï¼\n\n#!/bin/sh\ncd /opt/ITP\npm2 start ./bin/www -n ITP\n\n\nèµäºèæ¬æä»¶æ§è¡æé\n\n# chmod +x start-service.sh\n\n\n\n# æ·»å å¼æºå¯å¨é¡¹ç®\n\n# vi /etc/rc.local\n\n\næ·»å \n\nsu - root -c '/opt/start-service.sh'\n",normalizedContent:"# é¨ç½²åç«¯itpé¡¹ç®\n\n\n# æ·è´itp.zipå°/optå¹¶è§£å\n\n\n# æ£æ¥ä¿®æ¹nodeæå¡éç½®åé¡¹ç®éç½®\n\nnodeæå¡éç½®ï¼/config/config.js ä¸»è¦ä¿®æ¹ç«¯å£åapiå°å é¡¹ç®éç½®ï¼webapp/js/common/config_89dc744.js\n\n\n# æ·å®éåå é\n\nnpm install --registry https://registry.npm.taobao.org\n\n\n\n# å®è£ææ°æ¬pm2\n\nnpm install pm2@latest -g\n\n\n\n# å®è£ææ°æ¬fis3\n\nnpm install -g fis3\n\n\n\n# å®è£\n\nnpm  i --production\n\n\n\n# å¯å¨æå¡å½ä»¤\n\ncd /opt\npm2 start ./bin/www -n itp\n\n\næç¤º\n\næ³¨ï¼-n æå¡åç§°ï¼è¯¦ç»è¯´æï¼http://pm2.keymetrics.io/docs/usage/quick-start/\n\n\n# æ¥çpm2æå¡åè¡¨å½ä»¤\n\npm2 list\n\n\n\n# éå¯å½ä»¤\n\npm2 restart (æå¡åæid)\n\n\n\n# æ¥çæ¥å¿ pm2 log\n\npm2 log\n\n\n\n# åå»ºå¼æºå¯å¨èæ¬\n\n# touch /opt/start-service.sh\n\n\næ·»å å¦ä¸åå®¹ï¼\n\n#!/bin/sh\ncd /opt/itp\npm2 start ./bin/www -n itp\n\n\nèµäºèæ¬æä»¶æ§è¡æé\n\n# chmod +x start-service.sh\n\n\n\n# æ·»å å¼æºå¯å¨é¡¹ç®\n\n# vi /etc/rc.local\n\n\næ·»å \n\nsu - root -c '/opt/start-service.sh'\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"ä»ä¹æ¯ Ubuntu",frontmatter:{title:"ä»ä¹æ¯ Ubuntu",date:"2022-02-09T10:51:04.000Z",permalink:"/pages/49420c/"},regularPath:"/04.Ubuntu/01.Ubuntu/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Ubuntu.html",relativePath:"04.Ubuntu/01.Ubuntu/01.ä»ä¹æ¯ Ubuntu.md",key:"v-19944e88",path:"/pages/49420c/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:17},{level:2,title:"è¯çä¸å®ä½",slug:"è¯çä¸å®ä½",normalizedTitle:"è¯çä¸å®ä½",charIndex:193},{level:2,title:"ç¹ç¹",slug:"ç¹ç¹",normalizedTitle:"ç¹ç¹",charIndex:1040}],headersStr:"æ¦è¿° è¯çä¸å®ä½ ç¹ç¹",content:"# ä»ä¹æ¯ Ubuntu\n\n\n# æ¦è¿°\n\nä½ä¸ºLinuxåè¡çä¸­çåèµ·ä¹ç§ï¼Ubuntu Linuxå¨ç­ç­å å¹´æ¶é´éä¾¿è¿éæé¿ä¸ºä»Linuxåå­¦èå°èµæ·±ä¸å®¶é½ååéççåè¡çãç±äºUbuntu Linuxæ¯å¼æ¾æºä»£ç çèªç±è½¯ä»¶ï¼ç¨æ·å¯ä»¥ç»å½Ubuntu Linuxçå®æ¹ç½ååè´¹ä¸è½½è¯¥è½¯ä»¶çå®è£åãç¨æ·å¨ä½¿ç¨è¿ç¨ä¸­ï¼æ²¡æäººå¯¹è¯¥è½¯ä»¶è¿è¡ææ¯ç»´æ¤ï¼ç¨æ·åªè½èªå·±è§£å³éå°çææ¯æéã\n\n\n# è¯çä¸å®ä½\n\nUbuntu Linuxæ¯ç±åéäººMark ShuttleworthååçåºäºDebian Linuxçæä½ç³»ç»ï¼å¼äº2004å¹´10æå¬å¸Ubuntuçç¬¬ä¸ä¸ªçæ¬(Ubuntu4.10 Warty Warthog)ãUbuntuéç¨äºç¬è®°æ¬çµèãæ¡é¢çµèåæå¡å¨ï¼ç¹å«æ¯ä¸ºæ¡é¢ç¨æ·æä¾å°½åå°½ç¾çä½¿ç¨ä½éªãUbuntuå ä¹åå«äºææå¸¸ç¨çåºç¨è½¯ä»¶ï¼æå­å¤çãçµå­é®ä»¶ãè½¯ä»¶å¼åå·¥å·åWebæå¡ç­ãç¨æ·ä¸è½½ãä½¿ç¨ãåäº«Ubuntuç³»ç»ï¼ä»¥åè·å¾ææ¯æ¯æä¸æå¡ï¼æ éæ¯ä»ä»»ä½è®¸å¯è´¹ç¨ã\n\nUbuntuæä¾äºä¸ä¸ªå¥å£®ãåè½ä¸°å¯çè®¡ç®ç¯å¢ï¼æ¢éåå®¶åº­ä½¿ç¨åéç¨äºåä¸ç¯å¢ãUbuntuç¤¾åºæ¿è¯ºæ¯6ä¸ªæåå¸ä¸ä¸ªæ°çæ¬ï¼ä»¥æä¾ææ°æå¼ºå¤§çè½¯ä»¶ã [3]\n\nUbuntuè¢«è§ä¸ºä¸ç§ä¼ ç»çéæ´²æ°æçå¿µï¼åæ¶ä¹è¢«è®¤ä¸ºæ¯åéå±åå½çå»ºå½ååä¹ä¸ï¼å¹¶ä¸ä¸éæ´²å¤å´ççæ³å¯åç¸å³ãè¯¥è¯æºäºç¥é²è¯­åç§è¨è¯­ï¼å®çæ ¸å¿çå¿µæ¯âäººéå¾äººâï¼çç¼äºäººä»¬ä¹é´ç¸äºçå¿ è¯ä¸äº¤æµãåéæ»ç»æ¼å¾·æè¿æ ·è§£éï¼Ubuntuæ¯ä¸ä¸ªæ¦å¿µï¼å®åå«äºå°éãäºå©ãåäº«ãäº¤æµãå³æãä¿¡ä»»ãæ ç§çä¼å¤åæ¶µï¼Ubuntuæ¯ä¸ç§çæ´»æ¹å¼ï¼æå¡å®½å®¹ååæä»äººãå¯è§ï¼Ubuntuç²¾ç¥å·²ç»æ¸éå°äºåéçæ¿æ²»åæ¥å¸¸çæ´»å½ä¸­ã [3]\n\nUbuntuç²¾ç¥ä¸è½¯ä»¶å¼æºç²¾ç¥æ°æ°ä¸è°èåãä½ä¸ºä¸ä¸ªåºäºLinuxçæä½ç³»ç»ï¼Ubuntu Linuxè¯å¾å°è¿ç§ç²¾ç¥å»¶ä¼¸å°è®¡ç®æºä¸çâè½¯ä»¶åºå½è¢«åäº«ï¼äºè½å¤ä¸ºä»»ä½éè¦çäººæè·å¾âãUbuntuçç®æ æ¯è®©ä¸çä¸çæ¯ä¸ªäººé½è½å¾å°ä¸ä¸ªæäºä½¿ç¨çLinuxçæ¬ï¼ä¸è®ºä»æå¤çå°çä½ç½®åèº«ä½ç¶åµã [3]\n\nå¨è¿ç§Ubuntuç²¾ç¥çæå¯¼ä¸ï¼Ubuntu Linuxæ¿è¯ºå¦ä¸æç¤ºï¼\n\nUbuntuå°æ°¸è¿åè´¹ï¼åæ¬ä¼ä¸çåå®å¨åçº§ã\n\nUbuntuå°å¨çæ°ç¾ä¸ªå¬å¸æä¾åä¸æ¯æã\n\nUbuntuåå«ç±èªç±è½¯ä»¶å¢ä½æä¾çæä½³ç¿»è¯åæ¬å°åã\n\nUbuntuåçä»ä»åå«èªç±è½¯ä»¶ï¼é¼å±ç¨æ·ä½¿ç¨èªç±åå¼æºè½¯ä»¶ï¼å¹¶æ¹ååä¼ æ­å®ã\n\n\n# ç¹ç¹\n\nUbuntuå¨æ¡é¢åå¬ãæå¡å¨æ¹é¢æçä¸ä¿çè¡¨ç°ï¼æ»è½å¤å°ææ°çåºç¨ç¹æ§åæ¬å¶ä¸­ï¼ä¸»è¦åæ¬ä»¥ä¸å æ¹é¢ï¼ [3]\n\n1ãæ¡é¢ç³»ç»ä½¿ç¨ææ°çGnomeãKDEãXfceç­æ¡é¢ç¯å¢ç»ä»¶ã [3]\n\n2ãéææç´¢å·¥å·Trackerï¼ä¸ºç¨æ·æä¾æ¹ä¾¿ãæºè½çæ¡é¢èµæºæç´¢ã [3]\n\n3ãæå¼ç¹ççXæ¡é¢éç½®æµç¨ï¼å¯ä»¥è½»æ¾ä½¿ç¨å¾å½¢åçé¢å®æå¤æçéç½®ã [3]\n\n4ãéæææ°çCompizç¨³å®çæ¬ï¼è®©ç¨æ·ä½éªé·ç«ç3Dæ¡é¢ã [3]\n\n5ãâè¯­è¨éæ©âç¨åºæä¾äºå¸¸ç¨è¯­è¨æ¯æçå®è£åè½ï¼è®©ç¨æ·å¯ä»¥å¨ç³»ç»å®è£åï¼æ¹ä¾¿å°å®è£å¤è¯­è¨æ¯æè½¯ä»¶åã\n\n6ãæä¾äºå¨å¥çå¤åªä½åºç¨è½¯ä»¶å·¥å·ï¼åæ¬å¤çé³é¢ãè§é¢ãå¾å½¢ãå¾åçå·¥å·ã [3]\n\n7ãéæäºOpenfficeåå¬å¥ä»¶ï¼å¸®å©ç¨æ·å®ææå­å¤çãçµå­è¡¨æ ¼ãå¹»ç¯çæ­æ¾ç­æ¥å¸¸åå¬ä»»å¡ã [3]\n\n8ãå«æè¾å©åè½ï¼ä¸ºæ®éäººå£«æä¾è¾å©æ§æå¡ï¼ä¾å¦ï¼ä¸ºå­å¨å¼±è§åçç¨æ·æä¾å±æ¾é®çï¼è½å¤æ¯æWindows NTFSååºçè¯»/åæä½ï¼ä½¿Windowsèµæºå®å¨å±äº«æä¸ºå¯è½ã [3]\n\n9ãæ¯æèç(Bluetooth)è¾å¥è®¾å¤ï¼å¦èçé¼ æ ãèçé®çã [3]\n\n10ãæ¥ææççç½ç»åºç¨å·¥å·ï¼ä»ç½ç»éç½®å·¥å·å°Firefoxç½é¡µæµè§å¨ãGaimå³æ¶èå¤©å·¥å·ãçµå­é®ä»¶å·¥å·ãBTä¸è½½å·¥å·ç­ã [3]\n\n11ãå å¥æ´å¤çæå°æºé©±å¨ï¼åæ¬å¯¹HPçä¸ä½æº(æå°æºãæ«æä»ªéæ)çæ¯æã [3]\n\n12ãè¿ä¸æ­¥å å¼ºç³»ç»å¯¹ç¬è®°æ¬çµèçæ¯æï¼åæ¬ç³»ç»ç­é®ä»¥åæ´å¤åå·ç¬è®°æ¬çµèçä¼ç ä¸å¤éåè½ã [3]\n\n13ãä¸èåçå¼æºè½¯ä»¶é¡¹ç®LTSPåä½ï¼åç½®äºLinuxç»ç«¯æå¡å¨åè½ï¼æä¾å¯¹ä»¥ç¦å®¢æ·æºä½ä¸ºå¾å½¢ç»ç«¯çæ¯æï¼å¤§å¤§æé«èå¼PCæºçå©ç¨çã",normalizedContent:"# ä»ä¹æ¯ ubuntu\n\n\n# æ¦è¿°\n\nä½ä¸ºlinuxåè¡çä¸­çåèµ·ä¹ç§ï¼ubuntu linuxå¨ç­ç­å å¹´æ¶é´éä¾¿è¿éæé¿ä¸ºä»linuxåå­¦èå°èµæ·±ä¸å®¶é½ååéççåè¡çãç±äºubuntu linuxæ¯å¼æ¾æºä»£ç çèªç±è½¯ä»¶ï¼ç¨æ·å¯ä»¥ç»å½ubuntu linuxçå®æ¹ç½ååè´¹ä¸è½½è¯¥è½¯ä»¶çå®è£åãç¨æ·å¨ä½¿ç¨è¿ç¨ä¸­ï¼æ²¡æäººå¯¹è¯¥è½¯ä»¶è¿è¡ææ¯ç»´æ¤ï¼ç¨æ·åªè½èªå·±è§£å³éå°çææ¯æéã\n\n\n# è¯çä¸å®ä½\n\nubuntu linuxæ¯ç±åéäººmark shuttleworthååçåºäºdebian linuxçæä½ç³»ç»ï¼å¼äº2004å¹´10æå¬å¸ubuntuçç¬¬ä¸ä¸ªçæ¬(ubuntu4.10 warty warthog)ãubuntuéç¨äºç¬è®°æ¬çµèãæ¡é¢çµèåæå¡å¨ï¼ç¹å«æ¯ä¸ºæ¡é¢ç¨æ·æä¾å°½åå°½ç¾çä½¿ç¨ä½éªãubuntuå ä¹åå«äºææå¸¸ç¨çåºç¨è½¯ä»¶ï¼æå­å¤çãçµå­é®ä»¶ãè½¯ä»¶å¼åå·¥å·åwebæå¡ç­ãç¨æ·ä¸è½½ãä½¿ç¨ãåäº«ubuntuç³»ç»ï¼ä»¥åè·å¾ææ¯æ¯æä¸æå¡ï¼æ éæ¯ä»ä»»ä½è®¸å¯è´¹ç¨ã\n\nubuntuæä¾äºä¸ä¸ªå¥å£®ãåè½ä¸°å¯çè®¡ç®ç¯å¢ï¼æ¢éåå®¶åº­ä½¿ç¨åéç¨äºåä¸ç¯å¢ãubuntuç¤¾åºæ¿è¯ºæ¯6ä¸ªæåå¸ä¸ä¸ªæ°çæ¬ï¼ä»¥æä¾ææ°æå¼ºå¤§çè½¯ä»¶ã [3]\n\nubuntuè¢«è§ä¸ºä¸ç§ä¼ ç»çéæ´²æ°æçå¿µï¼åæ¶ä¹è¢«è®¤ä¸ºæ¯åéå±åå½çå»ºå½ååä¹ä¸ï¼å¹¶ä¸ä¸éæ´²å¤å´ççæ³å¯åç¸å³ãè¯¥è¯æºäºç¥é²è¯­åç§è¨è¯­ï¼å®çæ ¸å¿çå¿µæ¯âäººéå¾äººâï¼çç¼äºäººä»¬ä¹é´ç¸äºçå¿ è¯ä¸äº¤æµãåéæ»ç»æ¼å¾·æè¿æ ·è§£éï¼ubuntuæ¯ä¸ä¸ªæ¦å¿µï¼å®åå«äºå°éãäºå©ãåäº«ãäº¤æµãå³æãä¿¡ä»»ãæ ç§çä¼å¤åæ¶µï¼ubuntuæ¯ä¸ç§çæ´»æ¹å¼ï¼æå¡å®½å®¹ååæä»äººãå¯è§ï¼ubuntuç²¾ç¥å·²ç»æ¸éå°äºåéçæ¿æ²»åæ¥å¸¸çæ´»å½ä¸­ã [3]\n\nubuntuç²¾ç¥ä¸è½¯ä»¶å¼æºç²¾ç¥æ°æ°ä¸è°èåãä½ä¸ºä¸ä¸ªåºäºlinuxçæä½ç³»ç»ï¼ubuntu linuxè¯å¾å°è¿ç§ç²¾ç¥å»¶ä¼¸å°è®¡ç®æºä¸çâè½¯ä»¶åºå½è¢«åäº«ï¼äºè½å¤ä¸ºä»»ä½éè¦çäººæè·å¾âãubuntuçç®æ æ¯è®©ä¸çä¸çæ¯ä¸ªäººé½è½å¾å°ä¸ä¸ªæäºä½¿ç¨çlinuxçæ¬ï¼ä¸è®ºä»æå¤çå°çä½ç½®åèº«ä½ç¶åµã [3]\n\nå¨è¿ç§ubuntuç²¾ç¥çæå¯¼ä¸ï¼ubuntu linuxæ¿è¯ºå¦ä¸æç¤ºï¼\n\nubuntuå°æ°¸è¿åè´¹ï¼åæ¬ä¼ä¸çåå®å¨åçº§ã\n\nubuntuå°å¨çæ°ç¾ä¸ªå¬å¸æä¾åä¸æ¯æã\n\nubuntuåå«ç±èªç±è½¯ä»¶å¢ä½æä¾çæä½³ç¿»è¯åæ¬å°åã\n\nubuntuåçä»ä»åå«èªç±è½¯ä»¶ï¼é¼å±ç¨æ·ä½¿ç¨èªç±åå¼æºè½¯ä»¶ï¼å¹¶æ¹ååä¼ æ­å®ã\n\n\n# ç¹ç¹\n\nubuntuå¨æ¡é¢åå¬ãæå¡å¨æ¹é¢æçä¸ä¿çè¡¨ç°ï¼æ»è½å¤å°ææ°çåºç¨ç¹æ§åæ¬å¶ä¸­ï¼ä¸»è¦åæ¬ä»¥ä¸å æ¹é¢ï¼ [3]\n\n1ãæ¡é¢ç³»ç»ä½¿ç¨ææ°çgnomeãkdeãxfceç­æ¡é¢ç¯å¢ç»ä»¶ã [3]\n\n2ãéææç´¢å·¥å·trackerï¼ä¸ºç¨æ·æä¾æ¹ä¾¿ãæºè½çæ¡é¢èµæºæç´¢ã [3]\n\n3ãæå¼ç¹ççxæ¡é¢éç½®æµç¨ï¼å¯ä»¥è½»æ¾ä½¿ç¨å¾å½¢åçé¢å®æå¤æçéç½®ã [3]\n\n4ãéæææ°çcompizç¨³å®çæ¬ï¼è®©ç¨æ·ä½éªé·ç«ç3dæ¡é¢ã [3]\n\n5ãâè¯­è¨éæ©âç¨åºæä¾äºå¸¸ç¨è¯­è¨æ¯æçå®è£åè½ï¼è®©ç¨æ·å¯ä»¥å¨ç³»ç»å®è£åï¼æ¹ä¾¿å°å®è£å¤è¯­è¨æ¯æè½¯ä»¶åã\n\n6ãæä¾äºå¨å¥çå¤åªä½åºç¨è½¯ä»¶å·¥å·ï¼åæ¬å¤çé³é¢ãè§é¢ãå¾å½¢ãå¾åçå·¥å·ã [3]\n\n7ãéæäºopenfficeåå¬å¥ä»¶ï¼å¸®å©ç¨æ·å®ææå­å¤çãçµå­è¡¨æ ¼ãå¹»ç¯çæ­æ¾ç­æ¥å¸¸åå¬ä»»å¡ã [3]\n\n8ãå«æè¾å©åè½ï¼ä¸ºæ®éäººå£«æä¾è¾å©æ§æå¡ï¼ä¾å¦ï¼ä¸ºå­å¨å¼±è§åçç¨æ·æä¾å±æ¾é®çï¼è½å¤æ¯æwindows ntfsååºçè¯»/åæä½ï¼ä½¿windowsèµæºå®å¨å±äº«æä¸ºå¯è½ã [3]\n\n9ãæ¯æèç(bluetooth)è¾å¥è®¾å¤ï¼å¦èçé¼ æ ãèçé®çã [3]\n\n10ãæ¥ææççç½ç»åºç¨å·¥å·ï¼ä»ç½ç»éç½®å·¥å·å°firefoxç½é¡µæµè§å¨ãgaimå³æ¶èå¤©å·¥å·ãçµå­é®ä»¶å·¥å·ãbtä¸è½½å·¥å·ç­ã [3]\n\n11ãå å¥æ´å¤çæå°æºé©±å¨ï¼åæ¬å¯¹hpçä¸ä½æº(æå°æºãæ«æä»ªéæ)çæ¯æã [3]\n\n12ãè¿ä¸æ­¥å å¼ºç³»ç»å¯¹ç¬è®°æ¬çµèçæ¯æï¼åæ¬ç³»ç»ç­é®ä»¥åæ´å¤åå·ç¬è®°æ¬çµèçä¼ç ä¸å¤éåè½ã [3]\n\n13ãä¸èåçå¼æºè½¯ä»¶é¡¹ç®ltspåä½ï¼åç½®äºlinuxç»ç«¯æå¡å¨åè½ï¼æä¾å¯¹ä»¥ç¦å®¢æ·æºä½ä¸ºå¾å½¢ç»ç«¯çæ¯æï¼å¤§å¤§æé«èå¼pcæºçå©ç¨çã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"Ubuntu å®è£æç¨",frontmatter:{title:"Ubuntu å®è£æç¨",date:"2022-02-09T10:51:04.000Z",permalink:"/pages/075d45/"},regularPath:"/04.Ubuntu/02.Ubuntu%20%E4%BD%BF%E7%94%A8/01.Ubuntu%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.html",relativePath:"04.Ubuntu/02.Ubuntu ä½¿ç¨/01.Ubuntu å®è£æç¨.md",key:"v-35935e9c",path:"/pages/075d45/",headersStr:null,content:"# Ubuntu 18.04 å®è£æç¨\n\nè¿å¥ç³»ç»å®è£çç¬¬ä¸ä¸ªçé¢ï¼å¼å§ç³»ç»çå®è£æä½ã\n\n1.éæ©ç³»ç»è¯­è¨-English\n\n2.å¦æç¤ºææ´æ°ï¼è¿ééæ©Continue without updating\n\n3.é®çè®¾ç½®-English\n\n4.ç½ç»éæ©\n\n5.ä»£çéç½®\n\n6.ä¿®æ¹é¿éäºéåå°åï¼http://mirrors.aliyun.com/ubuntu\n\n7.è®¾ç½®æä»¶ç³»ç»ï¼éæ©Use An Entire Disk And Set Up LVM\n\n8.éæ©ç¡¬çï¼é»è®¤éæ©ï¼ç´æ¥åè½¦\n\n9.éæ©ubuntu-lv new, to be ...ï¼åè½¦ï¼éæ©Editï¼åè½¦\n\n10.ä¿®æ¹ubuntu-lvé»è®¤å¯ç¨ç£çç©ºé´å¤§å°ï¼Save\n\n11.éæ©Done\n\n13.éæ©ç»§ç»­Continue\n\n14.è¾å¥ä¸»æºåç¨æ·ä¿¡æ¯\n\n15.æç©ºæ ¼å¾é[x] Install OpenSSH server\n\n15.ç´æ¥éæ©Done\n\n16.Reboot Now\n\n17.è¿éæåè½¦,å¼¹åºåç\n\n18.å®è£å®æè¿å¥çé¢,ç¨æ·ç»å¥\n\n18.å®è£å®æè¿å¥çé¢,ç¨æ·ç»å¥\n\n19.è®¾ç½®æ¶åº\n\ndpkg-reconfigure tzdata\n\n\nåºç°ä¸ä¸ªå¯¹è¯æ¡ï¼éæ©Asiaï¼ç¶åæä¸åè½¦\n\n\n\nåæ¬¡å¼¹åºå¯¹è¯æ¡ï¼éæ©Shanghaiï¼åæ¬¡æä¸åè½¦\n\n\n\nç»ç«¯æ¾ç¤ºä¸å¾åè¡¨ç¤ºOKï¼ç³»ç»éå¯åä»ç¶æ¶é´æ¯æ­£ç¡®ç\n\nroot@k8s-master:/home/heyuqiang# dpkg-reconfigure tzdata\n\nCurrent default time zone: 'Asia/Shanghai'\nLocal time is now:      Tue Jun  1 10:58:10 CST 2021.\nUniversal Time is now:  Tue Jun  1 02:58:10 UTC 2021.\n",normalizedContent:"# ubuntu 18.04 å®è£æç¨\n\nè¿å¥ç³»ç»å®è£çç¬¬ä¸ä¸ªçé¢ï¼å¼å§ç³»ç»çå®è£æä½ã\n\n1.éæ©ç³»ç»è¯­è¨-english\n\n2.å¦æç¤ºææ´æ°ï¼è¿ééæ©continue without updating\n\n3.é®çè®¾ç½®-english\n\n4.ç½ç»éæ©\n\n5.ä»£çéç½®\n\n6.ä¿®æ¹é¿éäºéåå°åï¼http://mirrors.aliyun.com/ubuntu\n\n7.è®¾ç½®æä»¶ç³»ç»ï¼éæ©use an entire disk and set up lvm\n\n8.éæ©ç¡¬çï¼é»è®¤éæ©ï¼ç´æ¥åè½¦\n\n9.éæ©ubuntu-lv new, to be ...ï¼åè½¦ï¼éæ©editï¼åè½¦\n\n10.ä¿®æ¹ubuntu-lvé»è®¤å¯ç¨ç£çç©ºé´å¤§å°ï¼save\n\n11.éæ©done\n\n13.éæ©ç»§ç»­continue\n\n14.è¾å¥ä¸»æºåç¨æ·ä¿¡æ¯\n\n15.æç©ºæ ¼å¾é[x] install openssh server\n\n15.ç´æ¥éæ©done\n\n16.reboot now\n\n17.è¿éæåè½¦,å¼¹åºåç\n\n18.å®è£å®æè¿å¥çé¢,ç¨æ·ç»å¥\n\n18.å®è£å®æè¿å¥çé¢,ç¨æ·ç»å¥\n\n19.è®¾ç½®æ¶åº\n\ndpkg-reconfigure tzdata\n\n\nåºç°ä¸ä¸ªå¯¹è¯æ¡ï¼éæ©asiaï¼ç¶åæä¸åè½¦\n\n\n\nåæ¬¡å¼¹åºå¯¹è¯æ¡ï¼éæ©shanghaiï¼åæ¬¡æä¸åè½¦\n\n\n\nç»ç«¯æ¾ç¤ºä¸å¾åè¡¨ç¤ºokï¼ç³»ç»éå¯åä»ç¶æ¶é´æ¯æ­£ç¡®ç\n\nroot@k8s-master:/home/heyuqiang# dpkg-reconfigure tzdata\n\ncurrent default time zone: 'asia/shanghai'\nlocal time is now:      tue jun  1 10:58:10 cst 2021.\nuniversal time is now:  tue jun  1 02:58:10 utc 2021.\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Ubuntu æ´æ¢å½åæº",frontmatter:{title:"Ubuntu æ´æ¢å½åæº",date:"2022-02-09T10:56:45.000Z",permalink:"/pages/5d8a7e/"},regularPath:"/04.Ubuntu/02.Ubuntu%20%E4%BD%BF%E7%94%A8/02.Ubuntu%20%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90.html",relativePath:"04.Ubuntu/02.Ubuntu ä½¿ç¨/02.Ubuntu æ´æ¢å½åæº.md",key:"v-0a2f2246",path:"/pages/5d8a7e/",headers:[{level:3,title:"å¤ä»½/etc/apt/sources.listæä»¶",slug:"å¤ä»½-etc-apt-sources-listæä»¶",normalizedTitle:"å¤ä»½/etc/apt/sources.listæä»¶",charIndex:106},{level:3,title:"æ°å»º/etc/apt/sources.listæä»¶å¹¶æ·»å ä»¥ä¸åå®¹",slug:"æ°å»º-etc-apt-sources-listæä»¶å¹¶æ·»å ä»¥ä¸åå®¹",normalizedTitle:"æ°å»º/etc/apt/sources.listæä»¶å¹¶æ·»å ä»¥ä¸åå®¹",charIndex:192},{level:3,title:"æ´æ¹å®æä¹åæ§è¡ä»¥ä¸å½ä»¤",slug:"æ´æ¹å®æä¹åæ§è¡ä»¥ä¸å½ä»¤",normalizedTitle:"æ´æ¹å®æä¹åæ§è¡ä»¥ä¸å½ä»¤",charIndex:1139},{level:3,title:"å¶ä»çä¸äºaptå½ä»¤",slug:"å¶ä»çä¸äºaptå½ä»¤",normalizedTitle:"å¶ä»çä¸äºaptå½ä»¤",charIndex:1182},{level:3,title:"å¶ä»å ä¸ªå½åçæºï¼",slug:"å¶ä»å ä¸ªå½åçæº",normalizedTitle:"å¶ä»å ä¸ªå½åçæºï¼",charIndex:1807}],headersStr:"å¤ä»½/etc/apt/sources.listæä»¶ æ°å»º/etc/apt/sources.listæä»¶å¹¶æ·»å ä»¥ä¸åå®¹ æ´æ¹å®æä¹åæ§è¡ä»¥ä¸å½ä»¤ å¶ä»çä¸äºaptå½ä»¤ å¶ä»å ä¸ªå½åçæºï¼",content:"# Ubuntu 18.04 æ´æ¢å½åæº\n\nUbuntuæ¬èº«çæºä½¿ç¨çæ¯å½åçæºï¼ä¸è½½éåº¦æ¯è¾æ¢ï¼ä¸åCentOSä¸æ ·yumå®è£çæ¶åå¯¹éåç«ç¹è¿é¡¹éæ©ï¼ æä»¥éæ©äºæ´æ¢æå½åçæºã ä»¥ä¸åå®¹æ´åèªç½ç»\n\n\n# å¤ä»½/etc/apt/sources.listæä»¶\n\nmv /etc/apt/sources.list /etc/apt/sourses.list.backup\n\n\n\n# æ°å»º/etc/apt/sources.listæä»¶å¹¶æ·»å ä»¥ä¸åå®¹\n\n#é¿éäºæº\ndeb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\n\n\n\n# æ´æ¹å®æä¹åæ§è¡ä»¥ä¸å½ä»¤\n\napt update \napt upgrade\n\n\n\n# å¶ä»çä¸äºaptå½ä»¤\n\nsudo apt-get update  æ´æ°æº\nsudo apt-get install package å®è£å\nsudo apt-get remove package å é¤å\nsudo apt-cache search package æç´¢è½¯ä»¶å\nsudo apt-cache show package  è·ååçç¸å³ä¿¡æ¯ï¼å¦è¯´æãå¤§å°ãçæ¬ç­\nsudo apt-get install package --reinstall  éæ°å®è£å\nsudo apt-get -f install  ä¿®å¤å®è£\nsudo apt-get remove package --purge å é¤åï¼åæ¬éç½®æä»¶ç­\nsudo apt-get build-dep package å®è£ç¸å³çç¼è¯ç¯å¢\nsudo apt-get upgrade æ´æ°å·²å®è£çå\nsudo apt-get dist-upgrade åçº§ç³»ç»\nsudo apt-cache depends package äºè§£ä½¿ç¨è¯¥åä¾èµé£äºå\nsudo apt-cache rdepends package æ¥çè¯¥åè¢«åªäºåä¾èµ\nsudo apt-get source package  ä¸è½½è¯¥åçæºä»£ç \nsudo apt-get clean && sudo apt-get autoclean æ¸çæ ç¨çå\nsudo apt-get check æ£æ¥æ¯å¦ææåçä¾èµ\n\n\n\n# å¶ä»å ä¸ªå½åçæºï¼\n\n#ä¸­ç§å¤§æº\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n\n#163æº\ndeb http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse\n\n#æ¸åæº\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n",normalizedContent:"# ubuntu 18.04 æ´æ¢å½åæº\n\nubuntuæ¬èº«çæºä½¿ç¨çæ¯å½åçæºï¼ä¸è½½éåº¦æ¯è¾æ¢ï¼ä¸åcentosä¸æ ·yumå®è£çæ¶åå¯¹éåç«ç¹è¿é¡¹éæ©ï¼ æä»¥éæ©äºæ´æ¢æå½åçæºã ä»¥ä¸åå®¹æ´åèªç½ç»\n\n\n# å¤ä»½/etc/apt/sources.listæä»¶\n\nmv /etc/apt/sources.list /etc/apt/sourses.list.backup\n\n\n\n# æ°å»º/etc/apt/sources.listæä»¶å¹¶æ·»å ä»¥ä¸åå®¹\n\n#é¿éäºæº\ndeb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\n\n\n\n# æ´æ¹å®æä¹åæ§è¡ä»¥ä¸å½ä»¤\n\napt update \napt upgrade\n\n\n\n# å¶ä»çä¸äºaptå½ä»¤\n\nsudo apt-get update  æ´æ°æº\nsudo apt-get install package å®è£å\nsudo apt-get remove package å é¤å\nsudo apt-cache search package æç´¢è½¯ä»¶å\nsudo apt-cache show package  è·ååçç¸å³ä¿¡æ¯ï¼å¦è¯´æãå¤§å°ãçæ¬ç­\nsudo apt-get install package --reinstall  éæ°å®è£å\nsudo apt-get -f install  ä¿®å¤å®è£\nsudo apt-get remove package --purge å é¤åï¼åæ¬éç½®æä»¶ç­\nsudo apt-get build-dep package å®è£ç¸å³çç¼è¯ç¯å¢\nsudo apt-get upgrade æ´æ°å·²å®è£çå\nsudo apt-get dist-upgrade åçº§ç³»ç»\nsudo apt-cache depends package äºè§£ä½¿ç¨è¯¥åä¾èµé£äºå\nsudo apt-cache rdepends package æ¥çè¯¥åè¢«åªäºåä¾èµ\nsudo apt-get source package  ä¸è½½è¯¥åçæºä»£ç \nsudo apt-get clean && sudo apt-get autoclean æ¸çæ ç¨çå\nsudo apt-get check æ£æ¥æ¯å¦ææåçä¾èµ\n\n\n\n# å¶ä»å ä¸ªå½åçæºï¼\n\n#ä¸­ç§å¤§æº\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n\n#163æº\ndeb http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse\n\n#æ¸åæº\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"macOSå¼åç¯å¢å®è£",frontmatter:{title:"macOSå¼åç¯å¢å®è£",date:"2022-02-09T10:59:04.000Z",permalink:"/pages/d6e0ac/"},regularPath:"/05.MacOS/01.macOS/01.macOS%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85.html",relativePath:"05.MacOS/01.macOS/01.macOSå¼åç¯å¢å®è£.md",key:"v-150d8184",path:"/pages/d6e0ac/",headers:[{level:2,title:"JDK ç¯å¢åééç½®",slug:"jdk-ç¯å¢åééç½®",normalizedTitle:"jdk ç¯å¢åééç½®",charIndex:18},{level:2,title:"Maven ç¯å¢åééç½®",slug:"maven-ç¯å¢åééç½®",normalizedTitle:"maven ç¯å¢åééç½®",charIndex:575}],headersStr:"JDK ç¯å¢åééç½® Maven ç¯å¢åééç½®",content:'# macOSå¼åç¯å¢å®è£\n\n\n# JDK ç¯å¢åééç½®\n\nå¦æä½ æ¯ç¬¬ä¸æ¬¡éç½®ç¯å¢åéï¼å¯ä»¥ä½¿ç¨touch .bash_profile åå»ºä¸ä¸ª.bash_profileçéèéç½®æä»¶(å¦æä½ æ¯ä¸ºç¼è¾å·²å­å¨çéç½®æä»¶ï¼åä½¿ç¨open -e .bash_profileå½ä»¤)ï¼\n\ntouch .bash_profile\nopen -e .bash_profile\n\n\nè¾å¥å¦ä¸éç½®ï¼\n\nJAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home\nPATH=$JAVA_HOME/bin:$PATH:.\nCLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.\nexport JAVA_HOME\nexport PATH\nexport CLASSPATH\n\n\nç¶åä¿å­å³é­è¯¥çªå£ã\n\nä½¿ç¨source .bash_profileä½¿éç½®çæ\n\nsource .bash_profile\n\n\nè¾å¥ echo $JAVA_HOME æ¾ç¤ºåæéç½®çè·¯å¾\n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home\n\n\nJDKå®è£å®æ\n\n\n# Maven ç¯å¢åééç½®\n\nMaven é¤äºä»¥ç¨åºæå»ºè½åä¸ºç¹è²ä¹å¤ï¼è¿æä¾é«çº§é¡¹ç®ç®¡çå·¥å·ãç±äº Maven çç¼ºçæå»ºè§åæè¾é«çå¯éç¨æ§ï¼æä»¥å¸¸å¸¸ç¨ä¸¤ä¸è¡ Maven æå»ºèæ¬å°±å¯ä»¥æå»ºç®åçé¡¹ç®ãç±äº Maven çé¢åé¡¹ç®çæ¹æ³ï¼è®¸å¤ Apache Jakarta é¡¹ç®åææ¶ä½¿ç¨ Mavenï¼èä¸å¬å¸é¡¹ç®éç¨ Maven çæ¯ä¾å¨æç»­å¢é¿ã Mavenè¿ä¸ªåè¯æ¥èªäºæç¬¬ç»ªè¯­ï¼ç¹å¤ªè¯­ï¼ï¼æä¸ºç¥è¯çç§¯ç´¯ï¼æåå¨Jakata Turbineé¡¹ç®ä¸­ç¨æ¥ç®åæå»ºè¿ç¨ãå½æ¶æä¸äºé¡¹ç®ï¼æåèªAnt buildæä»¶ï¼ï¼ä»æç»å¾®çå·®å«ï¼èJARæä»¶é½ç±CVSæ¥ç»´æ¤ãäºæ¯å¸ææä¸ç§æ ååçæ¹å¼æå»ºé¡¹ç®ï¼ä¸ä¸ªæ¸æ°çæ¹å¼å®ä¹é¡¹ç®çç»æï¼ä¸ä¸ªå®¹æçæ¹å¼åå¸é¡¹ç®çä¿¡æ¯ï¼ä»¥åä¸ç§ç®åçæ¹å¼å¨å¤ä¸ªé¡¹ç®ä¸­å±äº«JARsã\n\nMaven ä¸è½½å°å\n\nä¸è½½apache-maven-3.6.3-bin.tar.gzæä»¶è§£åå°/Users/heyuqiang/Tools/apache-maven-3.6.3\n\nç¼è¾.bash_profileæä»¶ï¼æ·»å mavenç¯å¢åééç½®ã\n\nsudo vi .bash_profile \n# ç²è´´å¦ä¸åå®¹ï¼\nJAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home\nCLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.\nMAVEN_HOME=/Users/heyuqiang/Tools/apache-maven-3.6.3\nPATH=$JAVA_HOME/bin:$MAVEN_HOME/bin:$PATH:.\nexport JAVA_HOME\nexport PATH\nexport CLASSPATH\nexport MAVEN_HOME\n\n\nä¿å­å¹¶éåºç¼è¾ãæ§è¡å¦ä¸å½ä»¤ï¼ä½¿éç½®æä»¶çæã\n\nsource .bash_profile \n\n\næåä¸æ­¥ï¼æ§è¡ mvn -v å½ä»¤ï¼éªè¯ç¯å¢åééç½®æ¯å¦æ­£ç¡®ã\n\nheyuqiangdeMBP:~ heyuqiang$ mvn -v \n# åºç°ä¸ä¸åå®¹è¡¨ç¤ºç¯å¢åééç½®æå\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: /Users/heyuqiang/Tools/apache-maven-3.6.3\nJava version: 1.8.0_251, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre\nDefault locale: zh_CN, platform encoding: UTF-8\nOS name: "mac os x", version: "10.14.6", arch: "x86_64", family: "mac"\n\n\nè³æ­¤ï¼macOSä¸éç½®Mavenç¯å¢åéå®æã',normalizedContent:'# macoså¼åç¯å¢å®è£\n\n\n# jdk ç¯å¢åééç½®\n\nå¦æä½ æ¯ç¬¬ä¸æ¬¡éç½®ç¯å¢åéï¼å¯ä»¥ä½¿ç¨touch .bash_profile åå»ºä¸ä¸ª.bash_profileçéèéç½®æä»¶(å¦æä½ æ¯ä¸ºç¼è¾å·²å­å¨çéç½®æä»¶ï¼åä½¿ç¨open -e .bash_profileå½ä»¤)ï¼\n\ntouch .bash_profile\nopen -e .bash_profile\n\n\nè¾å¥å¦ä¸éç½®ï¼\n\njava_home=/library/java/javavirtualmachines/jdk1.8.0_251.jdk/contents/home\npath=$java_home/bin:$path:.\nclasspath=$java_home/lib/tools.jar:$java_home/lib/dt.jar:.\nexport java_home\nexport path\nexport classpath\n\n\nç¶åä¿å­å³é­è¯¥çªå£ã\n\nä½¿ç¨source .bash_profileä½¿éç½®çæ\n\nsource .bash_profile\n\n\nè¾å¥ echo $java_home æ¾ç¤ºåæéç½®çè·¯å¾\n\n/library/java/javavirtualmachines/jdk1.8.0_251.jdk/contents/home\n\n\njdkå®è£å®æ\n\n\n# maven ç¯å¢åééç½®\n\nmaven é¤äºä»¥ç¨åºæå»ºè½åä¸ºç¹è²ä¹å¤ï¼è¿æä¾é«çº§é¡¹ç®ç®¡çå·¥å·ãç±äº maven çç¼ºçæå»ºè§åæè¾é«çå¯éç¨æ§ï¼æä»¥å¸¸å¸¸ç¨ä¸¤ä¸è¡ maven æå»ºèæ¬å°±å¯ä»¥æå»ºç®åçé¡¹ç®ãç±äº maven çé¢åé¡¹ç®çæ¹æ³ï¼è®¸å¤ apache jakarta é¡¹ç®åææ¶ä½¿ç¨ mavenï¼èä¸å¬å¸é¡¹ç®éç¨ maven çæ¯ä¾å¨æç»­å¢é¿ã mavenè¿ä¸ªåè¯æ¥èªäºæç¬¬ç»ªè¯­ï¼ç¹å¤ªè¯­ï¼ï¼æä¸ºç¥è¯çç§¯ç´¯ï¼æåå¨jakata turbineé¡¹ç®ä¸­ç¨æ¥ç®åæå»ºè¿ç¨ãå½æ¶æä¸äºé¡¹ç®ï¼æåèªant buildæä»¶ï¼ï¼ä»æç»å¾®çå·®å«ï¼èjaræä»¶é½ç±cvsæ¥ç»´æ¤ãäºæ¯å¸ææä¸ç§æ ååçæ¹å¼æå»ºé¡¹ç®ï¼ä¸ä¸ªæ¸æ°çæ¹å¼å®ä¹é¡¹ç®çç»æï¼ä¸ä¸ªå®¹æçæ¹å¼åå¸é¡¹ç®çä¿¡æ¯ï¼ä»¥åä¸ç§ç®åçæ¹å¼å¨å¤ä¸ªé¡¹ç®ä¸­å±äº«jarsã\n\nmaven ä¸è½½å°å\n\nä¸è½½apache-maven-3.6.3-bin.tar.gzæä»¶è§£åå°/users/heyuqiang/tools/apache-maven-3.6.3\n\nç¼è¾.bash_profileæä»¶ï¼æ·»å mavenç¯å¢åééç½®ã\n\nsudo vi .bash_profile \n# ç²è´´å¦ä¸åå®¹ï¼\njava_home=/library/java/javavirtualmachines/jdk1.8.0_251.jdk/contents/home\nclasspath=$java_home/lib/tools.jar:$java_home/lib/dt.jar:.\nmaven_home=/users/heyuqiang/tools/apache-maven-3.6.3\npath=$java_home/bin:$maven_home/bin:$path:.\nexport java_home\nexport path\nexport classpath\nexport maven_home\n\n\nä¿å­å¹¶éåºç¼è¾ãæ§è¡å¦ä¸å½ä»¤ï¼ä½¿éç½®æä»¶çæã\n\nsource .bash_profile \n\n\næåä¸æ­¥ï¼æ§è¡ mvn -v å½ä»¤ï¼éªè¯ç¯å¢åééç½®æ¯å¦æ­£ç¡®ã\n\nheyuqiangdembp:~ heyuqiang$ mvn -v \n# åºç°ä¸ä¸åå®¹è¡¨ç¤ºç¯å¢åééç½®æå\napache maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nmaven home: /users/heyuqiang/tools/apache-maven-3.6.3\njava version: 1.8.0_251, vendor: oracle corporation, runtime: /library/java/javavirtualmachines/jdk1.8.0_251.jdk/contents/home/jre\ndefault locale: zh_cn, platform encoding: utf-8\nos name: "mac os x", version: "10.14.6", arch: "x86_64", family: "mac"\n\n\nè³æ­¤ï¼macosä¸éç½®mavenç¯å¢åéå®æã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"macOSç»ç«¯å©å¨iTerm2",frontmatter:{title:"macOSç»ç«¯å©å¨iTerm2",date:"2022-02-09T10:59:04.000Z",permalink:"/pages/3b1a68/"},regularPath:"/05.MacOS/01.macOS/02.macOS%E7%BB%88%E7%AB%AF%E5%88%A9%E5%99%A8iTerm2.html",relativePath:"05.MacOS/01.macOS/02.macOSç»ç«¯å©å¨iTerm2.md",key:"v-e5b55ae4",path:"/pages/3b1a68/",headers:[{level:2,title:"ä¸è½½iTerm2",slug:"ä¸è½½iterm2",normalizedTitle:"ä¸è½½iterm2",charIndex:79},{level:2,title:"ä¸è½½oh my zsh å¹¶åæ¢shellä¸ºzsh",slug:"ä¸è½½oh-my-zsh-å¹¶åæ¢shellä¸ºzsh",normalizedTitle:"ä¸è½½oh my zsh å¹¶åæ¢shellä¸ºzsh",charIndex:155},{level:3,title:"ä¸è½½oh-my-zsh",slug:"ä¸è½½oh-my-zsh",normalizedTitle:"ä¸è½½oh-my-zsh",charIndex:184},{level:3,title:"åå»ºä¸ä¸ªæ°çéç½®æä»¶",slug:"åå»ºä¸ä¸ªæ°çéç½®æä»¶",normalizedTitle:"åå»ºä¸ä¸ªæ°çéç½®æä»¶",charIndex:521},{level:3,title:"åæ¢é»è®¤shellä¸ºzsh",slug:"åæ¢é»è®¤shellä¸ºzsh",normalizedTitle:"åæ¢é»è®¤shellä¸ºzsh",charIndex:594},{level:2,title:"æ´æ¢zshçä¸»é¢ä¸ºDracula",slug:"æ´æ¢zshçä¸»é¢ä¸ºdracula",normalizedTitle:"æ´æ¢zshçä¸»é¢ä¸ºdracula",charIndex:633},{level:3,title:"ä¸è½½ä¸»é¢æä»¶",slug:"ä¸è½½ä¸»é¢æä»¶",normalizedTitle:"ä¸è½½ä¸»é¢æä»¶",charIndex:654},{level:3,title:"åå»ºä¸ä¸ªæåOh my zshä¸»é¢æä»¶å¤¹çç¬¦å·é¾æ¥",slug:"åå»ºä¸ä¸ªæåoh-my-zshä¸»é¢æä»¶å¤¹çç¬¦å·é¾æ¥",normalizedTitle:"åå»ºä¸ä¸ªæåoh my zshä¸»é¢æä»¶å¤¹çç¬¦å·é¾æ¥",charIndex:714},{level:2,title:"æ´æ¢iterm2çä¸»é¢ä¸ºDracula",slug:"æ´æ¢iterm2çä¸»é¢ä¸ºdracula",normalizedTitle:"æ´æ¢iterm2çä¸»é¢ä¸ºdracula",charIndex:1386},{level:2,title:"å½ä»¤é«äº®æä»¶zsh-syntax-highlighting",slug:"å½ä»¤é«äº®æä»¶zsh-syntax-highlighting",normalizedTitle:"å½ä»¤é«äº®æä»¶zsh-syntax-highlighting",charIndex:1660},{level:2,title:"å½ä»¤æç¤ºæä»¶zsh-autosuggestions",slug:"å½ä»¤æç¤ºæä»¶zsh-autosuggestions",normalizedTitle:"å½ä»¤æç¤ºæä»¶zsh-autosuggestions",charIndex:2328},{level:2,title:"æç¤ºæå·§",slug:"æç¤ºæå·§",normalizedTitle:"æç¤ºæå·§",charIndex:3006},{level:2,title:"iTerm2 åçº§ 3.0 åå­ä½åç»çè§£å³æ¹æ³",slug:"iterm2-åçº§-3-0-åå­ä½åç»çè§£å³æ¹æ³",normalizedTitle:"iterm2 åçº§ 3.0 åå­ä½åç»çè§£å³æ¹æ³",charIndex:3765}],headersStr:"ä¸è½½iTerm2 ä¸è½½oh my zsh å¹¶åæ¢shellä¸ºzsh ä¸è½½oh-my-zsh åå»ºä¸ä¸ªæ°çéç½®æä»¶ åæ¢é»è®¤shellä¸ºzsh æ´æ¢zshçä¸»é¢ä¸ºDracula ä¸è½½ä¸»é¢æä»¶ åå»ºä¸ä¸ªæåOh my zshä¸»é¢æä»¶å¤¹çç¬¦å·é¾æ¥ æ´æ¢iterm2çä¸»é¢ä¸ºDracula å½ä»¤é«äº®æä»¶zsh-syntax-highlighting å½ä»¤æç¤ºæä»¶zsh-autosuggestions æç¤ºæå·§ iTerm2 åçº§ 3.0 åå­ä½åç»çè§£å³æ¹æ³",content:"# macOSç»ç«¯å©å¨iTerm2\n\næç¤º\n\nå©ç¨iTerm2+oh-my-zsh+Draculaä¸»é¢æé æçMacç»ç«¯å©å¨\n\né¦åéä¸ææå¾ï¼\n\n\n\n\n# ä¸è½½iTerm2\n\nææ¯å¨å®ç½ä¸è½½å®è£çhttps://www.iterm2.com/index.html ç´æ¥ç¹å»Downloadä¸è½½ã\n\n\n\n\n# ä¸è½½oh my zsh å¹¶åæ¢shellä¸ºzsh\n\n\n# ä¸è½½oh-my-zsh\n\næ¹å¼ä¸: ä½¿ç¨git è¿éä¸è½½å°~/.oh-my-zshä¸\n\n$ git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh\n\n\næ¹å¼äº: ä½¿ç¨curl\n\n$ sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n\n\næ¹å¼ä¸: ä½¿ç¨wget\n\n$ sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n\n\n\n# åå»ºä¸ä¸ªæ°çéç½®æä»¶\n\n$ cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\n\n\n\n# åæ¢é»è®¤shellä¸ºzsh\n\n$ chsh -s /bin/zsh\n\n\n\n# æ´æ¢zshçä¸»é¢ä¸ºDracula\n\n\n# ä¸è½½ä¸»é¢æä»¶\n\n$ git clone https://github.com/dracula/zsh.git\n\n\n\n# åå»ºä¸ä¸ªæåOh my zshä¸»é¢æä»¶å¤¹çç¬¦å·é¾æ¥\n\nDRACULA_THEMEæ¯ä½ åæä¸è½½ä¸»é¢çç®å½\n\n$ ln -s $DRACULA_THEME/dracula.zsh-theme ~/.oh-my-zsh/themes/dracula.zsh-theme\n\n\næèä½ å¯ä»¥ç§»å¨ä¸»é¢æä»¶dracula.zsh-themeå°~/.oh-my-zsh/themes/ä¸\n\næç¤º\n\næ¾ç¤ºéèæä»¶å¤¹çå¿«æ·é®ä¸ºcommand+shift+.\n\nä¿®æ¹zshä¸»é¢ãç¼è¾~(ç¨æ·å)ä¸.zshrcæä»¶ï¼ä¿®æ¹ZSH_THEMEä¸º\"dracula\"\n\n$ vim ~/.zshrc\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n...\n# Set name of the theme to load --- if set to \"random\", it will\n# load a random theme each time oh-my-zsh is loaded, in which case,\n# to know which specific one was loaded, run: echo $RANDOM_THEME\n# See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes\n#ZSH_THEME=\"robbyrussell\"\nZSH_THEME=\"dracula\"\n...\n\n\n!wqä¿å­éåºã\n\nå°è¿éï¼å·²ç»å®æäºzshä¸»é¢çéç½®ï¼ä½æ¯è·ç¦»ææå¾è¿å·®é£ä¹ä¸ç¹ç¹ï¼é£å°±æ¯iterm2çä¸»é¢åå½ä»¤é«äº®æä»¶ã\n\n\n# æ´æ¢iterm2çä¸»é¢ä¸ºDracula\n\nä¸è½½iterm2çDraculaä¸»é¢\n\n$ git clone https://github.com/dracula/iterm.git\n\n\nè®¾ç½®ä¸»é¢ï¼\n\n 1. iTerm2 > Preferences > Profiles > Colors Tab\n 2. Open the Color Presets...\n 3. ä»åè¡¨ä¸­éæ©import\n 4. éæ©åæä¸è½½ä¸»é¢ä¸­Dracula.itermcolors æä»¶ï¼ç¡®å®\n\nåæ¬¡æå¼ Color Presets... ï¼éæ©Dracula\n\n\n\n\n# å½ä»¤é«äº®æä»¶zsh-syntax-highlighting\n\næç¤º\n\nå½ä»¤æ­£ç¡®ç»¿è²ï¼å½ä»¤éè¯¯çº¢è²\n\nææå¾:\n\nä¸è½½å½ä»¤é«äº®æä»¶ è¿éä¸è½½å°ç¨æ·åä¸.zshæä»¶å¤¹ä¸\n\n$ sudo git clone https://github.com/zsh-users/zsh-syntax-highlighting ~/.zsh/zsh-syntax-highlighting\n\n\nç¼è¾éç½®æä»¶ï¼ä½¿ç¨æä»¶\n\n$ vim ~/.zshrc\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n...\n# Which plugins would you like to load?\n# Standard plugins can be found in $ZSH/plugins/\n# Custom plugins may be added to $ZSH_CUSTOM/plugins/\n# Example format: plugins=(rails git textmate ruby lighthouse)\n# Add wisely, as too many plugins slow down shell startup.\nplugins=(git)\n\nsource $ZSH/oh-my-zsh.sh\n\n# å½ä»¤é«äº®\nsource ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\n...\n\n\n!wq ä¿å­éåºã\n\nOKï¼å°è¿éå°±å¨é¨å®æäºï¼éå¯ä½ çiTerm2ï¼äº«åå§ï¼\n\n\n# å½ä»¤æç¤ºæä»¶zsh-autosuggestions\n\næç¤º\n\nææ:è¾å¥gä¼åºç°ç¸åºæç¤ºï¼æâå³å¯è¡¥å¨\n\n\n\nä¸è½½å½ä»¤æç¤ºæä»¶\n\n$ sudo git clone https://github.com/zsh-users/zsh-autosuggestions ~/.zsh/zsh-autosuggestions\n\n\nç¼è¾éç½®æä»¶ï¼ä½¿ç¨æä»¶\n\n$ vim ~/.zshrc\n\n\næ·»å ä»¥ä¸åå®¹:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n...\n# Which plugins would you like to load?\n# Standard plugins can be found in $ZSH/plugins/\n# Custom plugins may be added to $ZSH_CUSTOM/plugins/\n# Example format: plugins=(rails git textmate ruby lighthouse)\n# Add wisely, as too many plugins slow down shell startup.\nplugins=(git)\n\nsource $ZSH/oh-my-zsh.sh\n\n# å½ä»¤é«äº®\nsource ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\n\n# å½ä»¤æç¤º\nsource ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh\n...\n\n\n\n# æç¤ºæå·§\n\næç¤º\n\nå°shellä»bashåæ¢å°zshä¹åï¼å¯è½æçç¯å¢åéä¼å¤±æï¼éè¦å°åæ¥å¨bashéç½®æä»¶ä¸­çéç½®è½¬ç§»å°zshéç½®æä»¶ä¸­ï¼è¿éæä¾ä¸¤ä¸ªæ¹å¼\n\n 1. å°bashéç½®æä»¶~/.bash_profileä¸­çç¯å¢åéç­éç½®å¤å¶å°zshéç½®æä»¶ï½/.zshrcä¸­\n\n 2. å¨zshéç½®æä»¶ï½/.zshrcä¸­æ·»å ä¸é¢è¿è¡\n\nsource ~/.bash_profile\n\n\næç¤º\n\nitem2æå¾å¤æå·§å¾å¥½ç¨ï¼æåä¸¾ä¸äºæå¸¸ç¨çæå·§ï¼è¯»èå¯ä»¥èªè¡æç´¢æèéè¯»å®æ¹ææ¡£æ¥æ¥çå®æ´çæå·§\n\n 1. ä¸äºåè½åå¿«æ·é®:\n\n * é¼ æ éä¸­å³å¤å¶;\n * command + d åç´åå±\n * command + shift + d æ°´å¹³åå±\n * command + shift + h æå¼åªåæ¿(å¤å¶åå²)\n * command + ; å½ä»¤èªå¨å®æ\n * command + shift + ; æ¥çåå²å½ä»¤\n * command + option + b æé®åæ¾(è¾å¥å½ä»¤åæ¾, éè¿æ¶é´çº¿)\n\næç¤º\n\noh-my-zshæ¯å¾å¼ºå¤§çï¼å®ç¨äºç®¡çzshçéç½®ï¼å¦æä½ æ¯ç¬¬ä¸æ¬¡ä½¿ç¨å¯ä»¥åç§oh-my-zshå®æ¹ææ¡£ï¼åæ ·çï¼æä¼åä¸¾ä¸äºæå¸¸ç¨çæå·§\n\n 1. å¯ä»¥ä½¿ç¨aliaså½ä»¤æ¥çä¸äºå½ä»¤çç®åï¼ç¨çæäºä¼å¾æ¹ä¾¿\n\nâ ~ alias\n-='cd -'\n...=../..\n....=../../..\n.....=../../../..\n......=../../../../..\n1='cd -'\n2='cd -2'\n3='cd -3'\n4='cd -4'\n5='cd -5'\n6='cd -6'\n7='cd -7'\n8='cd -8'\n9='cd -9'\n_='sudo '\n...\n\n\n\n# iTerm2 åçº§ 3.0 åå­ä½åç»çè§£å³æ¹æ³\n\næç¤º\n\niTerm2 åçº§äºä¹ååç°æè®¾ç½®ç Courier New å­ä½åç»äº æ¥äºä¸äº issues ï¼è¯´å¹¶ä¸æ¯ bug åªæ¯ä¸ä¸ªç¹æ§ï¼è½ç¶å¹¶ä¸ç¥éè¿ä¸ªç¹æ§æä»ä¹å¥½å¤ï¼ä½æ¯çæ¯äºèçæ¬ç²å­ä½çè¿æ¯æè§ä¸ä¹ æ¯ï¼ Prefs>profiles>text>Use thin strokes for anti-aliasd text è®¾ç½®ä¸º Never å³å¯æ¢å¤",normalizedContent:"# macosç»ç«¯å©å¨iterm2\n\næç¤º\n\nå©ç¨iterm2+oh-my-zsh+draculaä¸»é¢æé æçmacç»ç«¯å©å¨\n\né¦åéä¸ææå¾ï¼\n\n\n\n\n# ä¸è½½iterm2\n\nææ¯å¨å®ç½ä¸è½½å®è£çhttps://www.iterm2.com/index.html ç´æ¥ç¹å»downloadä¸è½½ã\n\n\n\n\n# ä¸è½½oh my zsh å¹¶åæ¢shellä¸ºzsh\n\n\n# ä¸è½½oh-my-zsh\n\næ¹å¼ä¸: ä½¿ç¨git è¿éä¸è½½å°~/.oh-my-zshä¸\n\n$ git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh\n\n\næ¹å¼äº: ä½¿ç¨curl\n\n$ sh -c \"$(curl -fssl https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n\n\næ¹å¼ä¸: ä½¿ç¨wget\n\n$ sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -o -)\"\n\n\n\n# åå»ºä¸ä¸ªæ°çéç½®æä»¶\n\n$ cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\n\n\n\n# åæ¢é»è®¤shellä¸ºzsh\n\n$ chsh -s /bin/zsh\n\n\n\n# æ´æ¢zshçä¸»é¢ä¸ºdracula\n\n\n# ä¸è½½ä¸»é¢æä»¶\n\n$ git clone https://github.com/dracula/zsh.git\n\n\n\n# åå»ºä¸ä¸ªæåoh my zshä¸»é¢æä»¶å¤¹çç¬¦å·é¾æ¥\n\ndracula_themeæ¯ä½ åæä¸è½½ä¸»é¢çç®å½\n\n$ ln -s $dracula_theme/dracula.zsh-theme ~/.oh-my-zsh/themes/dracula.zsh-theme\n\n\næèä½ å¯ä»¥ç§»å¨ä¸»é¢æä»¶dracula.zsh-themeå°~/.oh-my-zsh/themes/ä¸\n\næç¤º\n\næ¾ç¤ºéèæä»¶å¤¹çå¿«æ·é®ä¸ºcommand+shift+.\n\nä¿®æ¹zshä¸»é¢ãç¼è¾~(ç¨æ·å)ä¸.zshrcæä»¶ï¼ä¿®æ¹zsh_themeä¸º\"dracula\"\n\n$ vim ~/.zshrc\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n...\n# set name of the theme to load --- if set to \"random\", it will\n# load a random theme each time oh-my-zsh is loaded, in which case,\n# to know which specific one was loaded, run: echo $random_theme\n# see https://github.com/ohmyzsh/ohmyzsh/wiki/themes\n#zsh_theme=\"robbyrussell\"\nzsh_theme=\"dracula\"\n...\n\n\n!wqä¿å­éåºã\n\nå°è¿éï¼å·²ç»å®æäºzshä¸»é¢çéç½®ï¼ä½æ¯è·ç¦»ææå¾è¿å·®é£ä¹ä¸ç¹ç¹ï¼é£å°±æ¯iterm2çä¸»é¢åå½ä»¤é«äº®æä»¶ã\n\n\n# æ´æ¢iterm2çä¸»é¢ä¸ºdracula\n\nä¸è½½iterm2çdraculaä¸»é¢\n\n$ git clone https://github.com/dracula/iterm.git\n\n\nè®¾ç½®ä¸»é¢ï¼\n\n 1. iterm2 > preferences > profiles > colors tab\n 2. open the color presets...\n 3. ä»åè¡¨ä¸­éæ©import\n 4. éæ©åæä¸è½½ä¸»é¢ä¸­dracula.itermcolors æä»¶ï¼ç¡®å®\n\nåæ¬¡æå¼ color presets... ï¼éæ©dracula\n\n\n\n\n# å½ä»¤é«äº®æä»¶zsh-syntax-highlighting\n\næç¤º\n\nå½ä»¤æ­£ç¡®ç»¿è²ï¼å½ä»¤éè¯¯çº¢è²\n\nææå¾:\n\nä¸è½½å½ä»¤é«äº®æä»¶ è¿éä¸è½½å°ç¨æ·åä¸.zshæä»¶å¤¹ä¸\n\n$ sudo git clone https://github.com/zsh-users/zsh-syntax-highlighting ~/.zsh/zsh-syntax-highlighting\n\n\nç¼è¾éç½®æä»¶ï¼ä½¿ç¨æä»¶\n\n$ vim ~/.zshrc\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n...\n# which plugins would you like to load?\n# standard plugins can be found in $zsh/plugins/\n# custom plugins may be added to $zsh_custom/plugins/\n# example format: plugins=(rails git textmate ruby lighthouse)\n# add wisely, as too many plugins slow down shell startup.\nplugins=(git)\n\nsource $zsh/oh-my-zsh.sh\n\n# å½ä»¤é«äº®\nsource ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\n...\n\n\n!wq ä¿å­éåºã\n\nokï¼å°è¿éå°±å¨é¨å®æäºï¼éå¯ä½ çiterm2ï¼äº«åå§ï¼\n\n\n# å½ä»¤æç¤ºæä»¶zsh-autosuggestions\n\næç¤º\n\nææ:è¾å¥gä¼åºç°ç¸åºæç¤ºï¼æâå³å¯è¡¥å¨\n\n\n\nä¸è½½å½ä»¤æç¤ºæä»¶\n\n$ sudo git clone https://github.com/zsh-users/zsh-autosuggestions ~/.zsh/zsh-autosuggestions\n\n\nç¼è¾éç½®æä»¶ï¼ä½¿ç¨æä»¶\n\n$ vim ~/.zshrc\n\n\næ·»å ä»¥ä¸åå®¹:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n...\n# which plugins would you like to load?\n# standard plugins can be found in $zsh/plugins/\n# custom plugins may be added to $zsh_custom/plugins/\n# example format: plugins=(rails git textmate ruby lighthouse)\n# add wisely, as too many plugins slow down shell startup.\nplugins=(git)\n\nsource $zsh/oh-my-zsh.sh\n\n# å½ä»¤é«äº®\nsource ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\n\n# å½ä»¤æç¤º\nsource ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh\n...\n\n\n\n# æç¤ºæå·§\n\næç¤º\n\nå°shellä»bashåæ¢å°zshä¹åï¼å¯è½æçç¯å¢åéä¼å¤±æï¼éè¦å°åæ¥å¨bashéç½®æä»¶ä¸­çéç½®è½¬ç§»å°zshéç½®æä»¶ä¸­ï¼è¿éæä¾ä¸¤ä¸ªæ¹å¼\n\n 1. å°bashéç½®æä»¶~/.bash_profileä¸­çç¯å¢åéç­éç½®å¤å¶å°zshéç½®æä»¶ï½/.zshrcä¸­\n\n 2. å¨zshéç½®æä»¶ï½/.zshrcä¸­æ·»å ä¸é¢è¿è¡\n\nsource ~/.bash_profile\n\n\næç¤º\n\nitem2æå¾å¤æå·§å¾å¥½ç¨ï¼æåä¸¾ä¸äºæå¸¸ç¨çæå·§ï¼è¯»èå¯ä»¥èªè¡æç´¢æèéè¯»å®æ¹ææ¡£æ¥æ¥çå®æ´çæå·§\n\n 1. ä¸äºåè½åå¿«æ·é®:\n\n * é¼ æ éä¸­å³å¤å¶;\n * command + d åç´åå±\n * command + shift + d æ°´å¹³åå±\n * command + shift + h æå¼åªåæ¿(å¤å¶åå²)\n * command + ; å½ä»¤èªå¨å®æ\n * command + shift + ; æ¥çåå²å½ä»¤\n * command + option + b æé®åæ¾(è¾å¥å½ä»¤åæ¾, éè¿æ¶é´çº¿)\n\næç¤º\n\noh-my-zshæ¯å¾å¼ºå¤§çï¼å®ç¨äºç®¡çzshçéç½®ï¼å¦æä½ æ¯ç¬¬ä¸æ¬¡ä½¿ç¨å¯ä»¥åç§oh-my-zshå®æ¹ææ¡£ï¼åæ ·çï¼æä¼åä¸¾ä¸äºæå¸¸ç¨çæå·§\n\n 1. å¯ä»¥ä½¿ç¨aliaså½ä»¤æ¥çä¸äºå½ä»¤çç®åï¼ç¨çæäºä¼å¾æ¹ä¾¿\n\nâ ~ alias\n-='cd -'\n...=../..\n....=../../..\n.....=../../../..\n......=../../../../..\n1='cd -'\n2='cd -2'\n3='cd -3'\n4='cd -4'\n5='cd -5'\n6='cd -6'\n7='cd -7'\n8='cd -8'\n9='cd -9'\n_='sudo '\n...\n\n\n\n# iterm2 åçº§ 3.0 åå­ä½åç»çè§£å³æ¹æ³\n\næç¤º\n\niterm2 åçº§äºä¹ååç°æè®¾ç½®ç courier new å­ä½åç»äº æ¥äºä¸äº issues ï¼è¯´å¹¶ä¸æ¯ bug åªæ¯ä¸ä¸ªç¹æ§ï¼è½ç¶å¹¶ä¸ç¥éè¿ä¸ªç¹æ§æä»ä¹å¥½å¤ï¼ä½æ¯çæ¯äºèçæ¬ç²å­ä½çè¿æ¯æè§ä¸ä¹ æ¯ï¼ prefs>profiles>text>use thin strokes for anti-aliasd text è®¾ç½®ä¸º never å³å¯æ¢å¤",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"macOSèªå¸¦ç»ç«¯ç¾å",frontmatter:{title:"macOSèªå¸¦ç»ç«¯ç¾å",date:"2022-02-09T10:59:04.000Z",permalink:"/pages/078f4d/"},regularPath:"/05.MacOS/01.macOS/03.macOS%E8%87%AA%E5%B8%A6%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96.html",relativePath:"05.MacOS/01.macOS/03.macOSèªå¸¦ç»ç«¯ç¾å.md",key:"v-4fa0bc5f",path:"/pages/078f4d/",headers:[{level:2,title:"Terminal.app)",slug:"terminal-app",normalizedTitle:"terminal.app)",charIndex:null},{level:3,title:"Install using Git",slug:"install-using-git",normalizedTitle:"install using git",charIndex:42},{level:3,title:"Install manually",slug:"install-manually",normalizedTitle:"install manually",charIndex:213},{level:3,title:"Activating theme",slug:"activating-theme",normalizedTitle:"activating theme",charIndex:298}],headersStr:"Terminal.app) Install using Git Install manually Activating theme",content:'# macOSèªå¸¦ç»ç«¯ç¾åDracula\n\n\n# Terminal.app\n\n\n# Install using Git\n\nIf you are a git user, you can install the theme and keep up to date by cloning the repo:\n\n$ git clone https://github.com/dracula/terminal-app.git\n\n\n\n# Install manually\n\nDownload using the GitHub .zip download option and unzip them.\n\n\n# Activating theme\n\n 1. Terminal > Settings Tab\n 2. Click "Gear" icon\n 3. Click Import...\n 4. Select the Dracula.terminal file\n 5. Click Default',normalizedContent:'# macosèªå¸¦ç»ç«¯ç¾ådracula\n\n\n# terminal.app\n\n\n# install using git\n\nif you are a git user, you can install the theme and keep up to date by cloning the repo:\n\n$ git clone https://github.com/dracula/terminal-app.git\n\n\n\n# install manually\n\ndownload using the github .zip download option and unzip them.\n\n\n# activating theme\n\n 1. terminal > settings tab\n 2. click "gear" icon\n 3. click import...\n 4. select the dracula.terminal file\n 5. click default',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"macOSå¸¸ç¨è½¯ä»¶",frontmatter:{title:"macOSå¸¸ç¨è½¯ä»¶",date:"2022-02-09T10:59:04.000Z",permalink:"/pages/9ee77d/"},regularPath:"/05.MacOS/01.macOS/04.macOS%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6.html",relativePath:"05.MacOS/01.macOS/04.macOSå¸¸ç¨è½¯ä»¶.md",key:"v-536252ab",path:"/pages/9ee77d/",headers:[{level:2,title:"æå¼æ¥èªèº«ä»½ä¸æå¼åèç Mac App",slug:"æå¼æ¥èªèº«ä»½ä¸æå¼åèç-mac-app",normalizedTitle:"æå¼æ¥èªèº«ä»½ä¸æå¼åèç mac app",charIndex:16},{level:2,title:"macOS 10.15 å³é­å¼æºæç¤ºé³",slug:"macos-10-15-å³é­å¼æºæç¤ºé³",normalizedTitle:"macos 10.15 å³é­å¼æºæç¤ºé³",charIndex:71},{level:2,title:"Paragon é©±å¨ç¨åº",slug:"paragon-é©±å¨ç¨åº",normalizedTitle:"paragon é©±å¨ç¨åº",charIndex:171},{level:2,title:"Typora",slug:"typora",normalizedTitle:"typora",charIndex:250},{level:2,title:"Visual Studio Code",slug:"visual-studio-code",normalizedTitle:"visual studio code",charIndex:289},{level:2,title:"IINA",slug:"iina",normalizedTitle:"iina",charIndex:349},{level:2,title:"MacZip",slug:"maczip",normalizedTitle:"maczip",charIndex:381},{level:2,title:"iTerm2",slug:"iterm2",normalizedTitle:"iterm2",charIndex:424},{level:2,title:"SwitchHosts",slug:"switchhosts",normalizedTitle:"switchhosts",charIndex:461},{level:2,title:"Docker",slug:"docker",normalizedTitle:"docker",charIndex:499},{level:2,title:"VirtualBox",slug:"virtualbox",normalizedTitle:"virtualbox",charIndex:540},{level:2,title:"Chrome",slug:"chrome",normalizedTitle:"chrome",charIndex:589},{level:2,title:"KeyManager",slug:"keymanager",normalizedTitle:"keymanager",charIndex:636},{level:2,title:"ide-eval-resetter",slug:"ide-eval-resetter",normalizedTitle:"ide-eval-resetter",charIndex:684},{level:2,title:'ä»ç»ä¸ä¸ª"çé¼éªéª"å¼æºåºï¼ja-netfilter',slug:"ä»ç»ä¸ä¸ª-çé¼éªéª-å¼æºåº-ja-netfilter",normalizedTitle:"ä»ç»ä¸ä¸ª&quot;çé¼éªéª&quot;å¼æºåºï¼ja-netfilter",charIndex:null},{level:2,title:"macOS è½¯ä»¶ä¸è½½",slug:"macos-è½¯ä»¶ä¸è½½",normalizedTitle:"macos è½¯ä»¶ä¸è½½",charIndex:1073},{level:2,title:"lx-music-desktop",slug:"lx-music-desktop",normalizedTitle:"lx-music-desktop",charIndex:1187}],headersStr:'æå¼æ¥èªèº«ä»½ä¸æå¼åèç Mac App macOS 10.15 å³é­å¼æºæç¤ºé³ Paragon é©±å¨ç¨åº Typora Visual Studio Code IINA MacZip iTerm2 SwitchHosts Docker VirtualBox Chrome KeyManager ide-eval-resetter ä»ç»ä¸ä¸ª"çé¼éªéª"å¼æºåºï¼ja-netfilter macOS è½¯ä»¶ä¸è½½ lx-music-desktop',content:'# macOSå¸¸ç¨è½¯ä»¶\n\n\n# æå¼æ¥èªèº«ä»½ä¸æå¼åèç Mac App\n\nsudo spctl --master-disable\n\n\n\n# macOS 10.15 å³é­å¼æºæç¤ºé³\n\n# å³é­æç¤ºé³ï¼\nsudo nvram StartupMute=%01\n# æå¼duangï¼\nsudo nvram StartupMute=%00\n\n\n\n# Paragon é©±å¨ç¨åº\n\nå®ç½å°åï¼https://www.seagate.com/cn/zh/support/software/paragon/\n\n\n# Typora\n\nå®ç½å°åï¼https://www.typora.io\n\n\n# Visual Studio Code\n\nå®ç½å°åï¼https://code.visualstudio.com/\n\n\n# IINA\n\nå®ç½å°åï¼https://iina.io/\n\n\n# MacZip\n\nå®ç½å°åï¼https://ezip.awehunt.com/\n\n\n# iTerm2\n\nå®ç½å°åï¼https://iterm2.com/\n\n\n# SwitchHosts\n\nå®ç½å°åï¼https://swh.app\n\n\n# Docker\n\nå®ç½å°åï¼https://www.docker.com/\n\n\n# VirtualBox\n\nå®ç½å°åï¼https://www.virtualbox.org/\n\n\n# Chrome\n\nå®ç½å°åï¼https://www.google.cn/chrome/\n\n\n# KeyManager\n\nå®ç½å°åï¼https://www.keymanager.org\n\n\n# ide-eval-resetter\n\n> Z å¤§çæ ééç½®æä»¶IDE Eval Resetter å¨ 2021.3 çæ¬ä¸­å½»åºå¤±æäºï¼èè¿ä¸æ¬¡ï¼Zå¤§ç´æ¥æ¾å¤§æäºæäºä¸ª"çé¼éªéª"å¼æºåºï¼ja-netfilter Z å¤§çç½ç« https://zhile.io\n\nä¸è½½å°åï¼https://gitee.com/pengzhile/ide-eval-resetter\n\n\n# ä»ç»ä¸ä¸ª"çé¼éªéª"å¼æºåºï¼ja-netfilter\n\n> æä»¬éå¸¸ä¼ä½¿ç¨é²ç«å¢æ¥é»æ­è¿äºè½¯ä»¶çæ¶æè®¿é®ãä½é²ç«å¢ä¹ä¸æ¯ä¸è½çï¼æ¯å¦ï¼è·¨å¹³å°é®é¢ãhttpsä¸æ æ³ç²¾åé»æ­æä¸ªurlè®¿é®ãé¨åé²ç«å¢ä¸è½é»æ­dnsè®¿é®ã äºæ¯å°±æäºæä»å¤©å¼æºçè¿ä¸ªé¡¹ç®ï¼ja-netfilterï¼\n\nä¸è½½å°åï¼https://github.com/ja-netfilter/ja-netfilter/releases\n\n\n# macOS è½¯ä»¶ä¸è½½\n\n * ç²¾åMACåºç¨åçº¿ https://xclient.info/\n * é©¬å¯è è https://www.macbl.com/\n * MacWk https://www.macwk.com/\n\n\n# lx-music-desktop\n\n> ä¸ä¸ªåºäº Electron + Vue å¼åçé³ä¹è½¯ä»¶ã\n\nGitHubï¼https://github.com/lyswhut/lx-music-desktop',normalizedContent:'# macoså¸¸ç¨è½¯ä»¶\n\n\n# æå¼æ¥èªèº«ä»½ä¸æå¼åèç mac app\n\nsudo spctl --master-disable\n\n\n\n# macos 10.15 å³é­å¼æºæç¤ºé³\n\n# å³é­æç¤ºé³ï¼\nsudo nvram startupmute=%01\n# æå¼duangï¼\nsudo nvram startupmute=%00\n\n\n\n# paragon é©±å¨ç¨åº\n\nå®ç½å°åï¼https://www.seagate.com/cn/zh/support/software/paragon/\n\n\n# typora\n\nå®ç½å°åï¼https://www.typora.io\n\n\n# visual studio code\n\nå®ç½å°åï¼https://code.visualstudio.com/\n\n\n# iina\n\nå®ç½å°åï¼https://iina.io/\n\n\n# maczip\n\nå®ç½å°åï¼https://ezip.awehunt.com/\n\n\n# iterm2\n\nå®ç½å°åï¼https://iterm2.com/\n\n\n# switchhosts\n\nå®ç½å°åï¼https://swh.app\n\n\n# docker\n\nå®ç½å°åï¼https://www.docker.com/\n\n\n# virtualbox\n\nå®ç½å°åï¼https://www.virtualbox.org/\n\n\n# chrome\n\nå®ç½å°åï¼https://www.google.cn/chrome/\n\n\n# keymanager\n\nå®ç½å°åï¼https://www.keymanager.org\n\n\n# ide-eval-resetter\n\n> z å¤§çæ ééç½®æä»¶ide eval resetter å¨ 2021.3 çæ¬ä¸­å½»åºå¤±æäºï¼èè¿ä¸æ¬¡ï¼zå¤§ç´æ¥æ¾å¤§æäºæäºä¸ª"çé¼éªéª"å¼æºåºï¼ja-netfilter z å¤§çç½ç« https://zhile.io\n\nä¸è½½å°åï¼https://gitee.com/pengzhile/ide-eval-resetter\n\n\n# ä»ç»ä¸ä¸ª"çé¼éªéª"å¼æºåºï¼ja-netfilter\n\n> æä»¬éå¸¸ä¼ä½¿ç¨é²ç«å¢æ¥é»æ­è¿äºè½¯ä»¶çæ¶æè®¿é®ãä½é²ç«å¢ä¹ä¸æ¯ä¸è½çï¼æ¯å¦ï¼è·¨å¹³å°é®é¢ãhttpsä¸æ æ³ç²¾åé»æ­æä¸ªurlè®¿é®ãé¨åé²ç«å¢ä¸è½é»æ­dnsè®¿é®ã äºæ¯å°±æäºæä»å¤©å¼æºçè¿ä¸ªé¡¹ç®ï¼ja-netfilterï¼\n\nä¸è½½å°åï¼https://github.com/ja-netfilter/ja-netfilter/releases\n\n\n# macos è½¯ä»¶ä¸è½½\n\n * ç²¾åmacåºç¨åçº¿ https://xclient.info/\n * é©¬å¯è è https://www.macbl.com/\n * macwk https://www.macwk.com/\n\n\n# lx-music-desktop\n\n> ä¸ä¸ªåºäº electron + vue å¼åçé³ä¹è½¯ä»¶ã\n\ngithubï¼https://github.com/lyswhut/lx-music-desktop',charsets:{cjk:!0},lastUpdated:"2022/02/18, 16:05:14",lastUpdatedTimestamp:1645171514e3},{title:"ä»ä¹æ¯ Git",frontmatter:{title:"ä»ä¹æ¯ Git",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/22c758/"},regularPath:"/06.GitLab/01.GitLab/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Git.html",relativePath:"06.GitLab/01.GitLab/01.ä»ä¹æ¯ Git.md",key:"v-6694efc8",path:"/pages/22c758/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:14}],headersStr:"æ¦è¿°",content:"# ä»ä¹æ¯ Git\n\n\n# æ¦è¿°\n\n\n\n * Git æ¯ä¸ä¸ªå¼æºçåå¸å¼çæ¬æ§å¶ç³»ç»ï¼ç¨äºææ·é«æå°å¤çä»»ä½æå°æå¤§çé¡¹ç®ã\n * Git æ¯ Linus Torvalds ä¸ºäºå¸®å©ç®¡ç Linux åæ ¸å¼åèå¼åçä¸ä¸ªå¼æ¾æºç ççæ¬æ§å¶è½¯ä»¶ã\n * Git ä¸å¸¸ç¨ççæ¬æ§å¶å·¥å· CVS, Subversion ç­ä¸åï¼å®éç¨äºåå¸å¼çæ¬åºçæ¹å¼ï¼ä¸å¿æå¡å¨ç«¯è½¯ä»¶æ¯æã",normalizedContent:"# ä»ä¹æ¯ git\n\n\n# æ¦è¿°\n\n\n\n * git æ¯ä¸ä¸ªå¼æºçåå¸å¼çæ¬æ§å¶ç³»ç»ï¼ç¨äºææ·é«æå°å¤çä»»ä½æå°æå¤§çé¡¹ç®ã\n * git æ¯ linus torvalds ä¸ºäºå¸®å©ç®¡ç linux åæ ¸å¼åèå¼åçä¸ä¸ªå¼æ¾æºç ççæ¬æ§å¶è½¯ä»¶ã\n * git ä¸å¸¸ç¨ççæ¬æ§å¶å·¥å· cvs, subversion ç­ä¸åï¼å®éç¨äºåå¸å¼çæ¬åºçæ¹å¼ï¼ä¸å¿æå¡å¨ç«¯è½¯ä»¶æ¯æã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å®è£ Git",frontmatter:{title:"å®è£ Git",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/75dfd9/"},regularPath:"/06.GitLab/01.GitLab/02.%E5%AE%89%E8%A3%85%20Git.html",relativePath:"06.GitLab/01.GitLab/02.å®è£ Git.md",key:"v-2835dba9",path:"/pages/75dfd9/",headers:[{level:2,title:"ä¸è½½",slug:"ä¸è½½",normalizedTitle:"ä¸è½½",charIndex:13},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:2},{level:2,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:101}],headersStr:"ä¸è½½ å®è£ æµè¯",content:"# å®è£ Git\n\n\n# ä¸è½½\n\nGitä¸è½½å°åï¼https://git-scm.com/downloads\n\n\n\n\n# å®è£\n\nåå»å®è£æä»¶ï¼ç¶ååºç°å®è£åå¯¼çé¢,ç¹å»ä¸ä¸æ­¥(Next)å³å¯\n\n\n# æµè¯\n\nheyuqiangdeMBP:~ heyuqiang$ git --version\ngit version 2.23.0\n",normalizedContent:"# å®è£ git\n\n\n# ä¸è½½\n\ngitä¸è½½å°åï¼https://git-scm.com/downloads\n\n\n\n\n# å®è£\n\nåå»å®è£æä»¶ï¼ç¶ååºç°å®è£åå¯¼çé¢,ç¹å»ä¸ä¸æ­¥(next)å³å¯\n\n\n# æµè¯\n\nheyuqiangdembp:~ heyuqiang$ git --version\ngit version 2.23.0\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Git çä¸è¬å·¥ä½æµç¨",frontmatter:{title:"Git çä¸è¬å·¥ä½æµç¨",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/8383bb/"},regularPath:"/06.GitLab/01.GitLab/03.Git%20%E7%9A%84%E4%B8%80%E8%88%AC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.html",relativePath:"06.GitLab/01.GitLab/03.Git çä¸è¬å·¥ä½æµç¨.md",key:"v-37c9db00",path:"/pages/8383bb/",headersStr:null,content:"# Git çä¸è¬å·¥ä½æµç¨\n\n * åé Git èµæºä½ä¸ºå·¥ä½ç®å½ã\n * å¨åéçèµæºä¸æ·»å æä¿®æ¹æä»¶ã\n * å¦æå¶ä»äººä¿®æ¹äºï¼ä½ å¯ä»¥æ´æ°èµæºã\n * å¨æäº¤åæ¥çä¿®æ¹ã\n * æäº¤ä¿®æ¹ã\n * å¨ä¿®æ¹å®æåï¼å¦æåç°éè¯¯ï¼å¯ä»¥æ¤åæäº¤å¹¶åæ¬¡ä¿®æ¹å¹¶æäº¤ã\n\n",normalizedContent:"# git çä¸è¬å·¥ä½æµç¨\n\n * åé git èµæºä½ä¸ºå·¥ä½ç®å½ã\n * å¨åéçèµæºä¸æ·»å æä¿®æ¹æä»¶ã\n * å¦æå¶ä»äººä¿®æ¹äºï¼ä½ å¯ä»¥æ´æ°èµæºã\n * å¨æäº¤åæ¥çä¿®æ¹ã\n * æäº¤ä¿®æ¹ã\n * å¨ä¿®æ¹å®æåï¼å¦æåç°éè¯¯ï¼å¯ä»¥æ¤åæäº¤å¹¶åæ¬¡ä¿®æ¹å¹¶æäº¤ã\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Git çåºæ¬æä½",frontmatter:{title:"Git çåºæ¬æä½",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/20e9b1/"},regularPath:"/06.GitLab/01.GitLab/04.Git%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html",relativePath:"06.GitLab/01.GitLab/04.Git çåºæ¬æä½.md",key:"v-30105e6e",path:"/pages/20e9b1/",headers:[{level:2,title:"è·åä¸åå»ºé¡¹ç®å½ä»¤",slug:"è·åä¸åå»ºé¡¹ç®å½ä»¤",normalizedTitle:"è·åä¸åå»ºé¡¹ç®å½ä»¤",charIndex:16},{level:3,title:"git init",slug:"git-init",normalizedTitle:"git init",charIndex:30},{level:3,title:"git clone",slug:"git-clone",normalizedTitle:"git clone",charIndex:110},{level:2,title:"åºæ¬å¿«ç§",slug:"åºæ¬å¿«ç§",normalizedTitle:"åºæ¬å¿«ç§",charIndex:190},{level:3,title:"git add",slug:"git-add",normalizedTitle:"git add",charIndex:199},{level:3,title:"git status",slug:"git-status",normalizedTitle:"git status",charIndex:254},{level:3,title:"git diff",slug:"git-diff",normalizedTitle:"git diff",charIndex:326},{level:3,title:"git commit",slug:"git-commit",normalizedTitle:"git commit",charIndex:555},{level:3,title:"git reset HEAD",slug:"git-reset-head",normalizedTitle:"git reset head",charIndex:809},{level:2,title:"æåä¸æ¨é",slug:"æåä¸æ¨é",normalizedTitle:"æåä¸æ¨é",charIndex:889},{level:3,title:"git pull",slug:"git-pull",normalizedTitle:"git pull",charIndex:899},{level:3,title:"git push",slug:"git-push",normalizedTitle:"git push",charIndex:1171},{level:2,title:"æ ç­¾",slug:"æ ç­¾",normalizedTitle:"æ ç­¾",charIndex:1268},{level:3,title:"git tag",slug:"git-tag",normalizedTitle:"git tag",charIndex:1275}],headersStr:"è·åä¸åå»ºé¡¹ç®å½ä»¤ git init git clone åºæ¬å¿«ç§ git add git status git diff git commit git reset HEAD æåä¸æ¨é git pull git push æ ç­¾ git tag",content:'# Git çåºæ¬æä½\n\n\n# è·åä¸åå»ºé¡¹ç®å½ä»¤\n\n\n# git init\n\nç¨ git init å¨ç®å½ä¸­åå»ºæ°ç Git ä»åºã ä½ å¯ä»¥å¨ä»»ä½æ¶åãä»»ä½ç®å½ä¸­è¿ä¹åï¼å®å¨æ¯æ¬å°åçã\n\ngit init\n\n\n\n# git clone\n\nä½¿ç¨ git clone æ·è´ä¸ä¸ª Git ä»åºå°æ¬å°ï¼è®©èªå·±è½å¤æ¥çè¯¥é¡¹ç®ï¼æèè¿è¡ä¿®æ¹ã\n\ngit clone [url]\n\n\n\n# åºæ¬å¿«ç§\n\n\n# git add\n\ngit add å½ä»¤å¯å°è¯¥æä»¶æ·»å å°ç¼å­\n\ngit add <filename>\n\n\n\n# git status\n\ngit status ä»¥æ¥çå¨ä½ ä¸æ¬¡æäº¤ä¹åæ¯å¦æä¿®æ¹ã\n\ngit status\ngit status -s\n\n\n\n# git diff\n\næ§è¡ git diff æ¥æ¥çæ§è¡ git status çç»æçè¯¦ç»ä¿¡æ¯ã\n\ngit diff å½ä»¤æ¾ç¤ºå·²åå¥ç¼å­ä¸å·²ä¿®æ¹ä½å°æªåå¥ç¼å­çæ¹å¨çåºå«ãgit diff æä¸¤ä¸ªä¸»è¦çåºç¨åºæ¯ã\n\n * å°æªç¼å­çæ¹å¨ï¼git diff\n * æ¥çå·²ç¼å­çæ¹å¨ï¼ git diff --cached\n * æ¥çå·²ç¼å­çä¸æªç¼å­çæææ¹å¨ï¼git diff HEAD\n * æ¾ç¤ºæè¦èéæ´ä¸ª diffï¼git diff --stat\n\n\n# git commit\n\nä½¿ç¨ git add å½ä»¤å°æ³è¦å¿«ç§çåå®¹åå¥ç¼å­åºï¼ èæ§è¡ git commit å°ç¼å­åºåå®¹æ·»å å°ä»åºä¸­ã\n\nGit ä¸ºä½ çæ¯ä¸ä¸ªæäº¤é½è®°å½ä½ çåå­ä¸çµå­é®ç®±å°åï¼æä»¥ç¬¬ä¸æ­¥éè¦éç½®ç¨æ·ååé®ç®±å°åã\n\ngit config --global user.name \'yourname\'\ngit config --global user.email youremail\n\n\nå°æä»¶åå¥ç¼å­åºå¹¶æä¾æäº¤æ³¨é\n\ngit commit -m \'update message\'\n\n\n\n# git reset HEAD\n\ngit reset HEAD å½ä»¤ç¨äºåæ¶å·²ç¼å­çåå®¹ã\n\ngit reset HEAD -- <filename>\n\n\n\n# æåä¸æ¨é\n\n\n# git pull\n\ngit pullå½ä»¤ç¨äºä»å¦ä¸ä¸ªå­å¨åºææ¬å°åæ¯è·åå¹¶éæ(æ´å)ãgit pullå½ä»¤çä½ç¨æ¯ï¼ååè¿ç¨ä¸»æºæä¸ªåæ¯çæ´æ°ï¼åä¸æ¬å°çæå®åæ¯åå¹¶ï¼å®çå®æ´æ ¼å¼ç¨ç¨æç¹å¤æã\n\ngit pull <è¿ç¨ä¸»æºå> <è¿ç¨åæ¯å>:<æ¬å°åæ¯å>\n\n\nå°è¿ç¨å­å¨åºä¸­çæ´æ¹åå¹¶å°å½ååæ¯ä¸­ãå¨é»è®¤æ¨¡å¼ä¸ï¼git pullæ¯git fetchåè·git merge FETCH_HEADçç¼©åãæ´åç¡®å°è¯´ï¼git pullä½¿ç¨ç»å®çåæ°è¿è¡git fetchï¼å¹¶è°ç¨git mergeå°æ£ç´¢å°çåæ¯å¤´åå¹¶å°å½ååæ¯ä¸­ã\n\n\n# git push\n\ngit pushå½ä»¤ç¨äºå°æ¬å°åæ¯çæ´æ°ï¼æ¨éå°è¿ç¨ä¸»æºãå®çæ ¼å¼ä¸git pullå½ä»¤ç¸ä¼¼ã\n\ngit push <è¿ç¨ä¸»æºå> <æ¬å°åæ¯å>:<è¿ç¨åæ¯å>\n\n\n\n# æ ç­¾\n\n\n# git tag\n\nå¦æä½ è¾¾å°ä¸ä¸ªéè¦çé¶æ®µï¼å¹¶å¸ææ°¸è¿è®°ä½é£ä¸ªç¹å«çæäº¤å¿«ç§ï¼ä½ å¯ä»¥ä½¿ç¨ git tag ç»å®æä¸æ ç­¾ã\n\næ¯å¦è¯´ï¼æä»¬æ³ä¸ºæä»¬ç åå é¡¹ç®åå¸ä¸ä¸ª"1.0.0"çæ¬ã æä»¬å¯ä»¥ç¨ git tag -a v1.0.0 å½ä»¤ç»ææ°ä¸æ¬¡æäº¤æä¸ï¼HEADï¼ "v1.0.0" çæ ç­¾ã\n\n-a éé¡¹æä¸º"åå»ºä¸ä¸ªå¸¦æ³¨è§£çæ ç­¾"ã ä¸ç¨ -a éé¡¹ä¹å¯ä»¥æ§è¡çï¼ä½å®ä¸ä¼è®°å½è¿æ ç­¾æ¯å¥æ¶åæçï¼è°æçï¼ä¹ä¸ä¼è®©ä½ æ·»å ä¸ªæ ç­¾çæ³¨è§£ã ææ¨èä¸ç´åå»ºå¸¦æ³¨è§£çæ ç­¾ã\n\ngit tag -a v1.0.0\n\n\nå¦ææä»¬è¦æ¥çæææ ç­¾å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n\ngit tag\n',normalizedContent:'# git çåºæ¬æä½\n\n\n# è·åä¸åå»ºé¡¹ç®å½ä»¤\n\n\n# git init\n\nç¨ git init å¨ç®å½ä¸­åå»ºæ°ç git ä»åºã ä½ å¯ä»¥å¨ä»»ä½æ¶åãä»»ä½ç®å½ä¸­è¿ä¹åï¼å®å¨æ¯æ¬å°åçã\n\ngit init\n\n\n\n# git clone\n\nä½¿ç¨ git clone æ·è´ä¸ä¸ª git ä»åºå°æ¬å°ï¼è®©èªå·±è½å¤æ¥çè¯¥é¡¹ç®ï¼æèè¿è¡ä¿®æ¹ã\n\ngit clone [url]\n\n\n\n# åºæ¬å¿«ç§\n\n\n# git add\n\ngit add å½ä»¤å¯å°è¯¥æä»¶æ·»å å°ç¼å­\n\ngit add <filename>\n\n\n\n# git status\n\ngit status ä»¥æ¥çå¨ä½ ä¸æ¬¡æäº¤ä¹åæ¯å¦æä¿®æ¹ã\n\ngit status\ngit status -s\n\n\n\n# git diff\n\næ§è¡ git diff æ¥æ¥çæ§è¡ git status çç»æçè¯¦ç»ä¿¡æ¯ã\n\ngit diff å½ä»¤æ¾ç¤ºå·²åå¥ç¼å­ä¸å·²ä¿®æ¹ä½å°æªåå¥ç¼å­çæ¹å¨çåºå«ãgit diff æä¸¤ä¸ªä¸»è¦çåºç¨åºæ¯ã\n\n * å°æªç¼å­çæ¹å¨ï¼git diff\n * æ¥çå·²ç¼å­çæ¹å¨ï¼ git diff --cached\n * æ¥çå·²ç¼å­çä¸æªç¼å­çæææ¹å¨ï¼git diff head\n * æ¾ç¤ºæè¦èéæ´ä¸ª diffï¼git diff --stat\n\n\n# git commit\n\nä½¿ç¨ git add å½ä»¤å°æ³è¦å¿«ç§çåå®¹åå¥ç¼å­åºï¼ èæ§è¡ git commit å°ç¼å­åºåå®¹æ·»å å°ä»åºä¸­ã\n\ngit ä¸ºä½ çæ¯ä¸ä¸ªæäº¤é½è®°å½ä½ çåå­ä¸çµå­é®ç®±å°åï¼æä»¥ç¬¬ä¸æ­¥éè¦éç½®ç¨æ·ååé®ç®±å°åã\n\ngit config --global user.name \'yourname\'\ngit config --global user.email youremail\n\n\nå°æä»¶åå¥ç¼å­åºå¹¶æä¾æäº¤æ³¨é\n\ngit commit -m \'update message\'\n\n\n\n# git reset head\n\ngit reset head å½ä»¤ç¨äºåæ¶å·²ç¼å­çåå®¹ã\n\ngit reset head -- <filename>\n\n\n\n# æåä¸æ¨é\n\n\n# git pull\n\ngit pullå½ä»¤ç¨äºä»å¦ä¸ä¸ªå­å¨åºææ¬å°åæ¯è·åå¹¶éæ(æ´å)ãgit pullå½ä»¤çä½ç¨æ¯ï¼ååè¿ç¨ä¸»æºæä¸ªåæ¯çæ´æ°ï¼åä¸æ¬å°çæå®åæ¯åå¹¶ï¼å®çå®æ´æ ¼å¼ç¨ç¨æç¹å¤æã\n\ngit pull <è¿ç¨ä¸»æºå> <è¿ç¨åæ¯å>:<æ¬å°åæ¯å>\n\n\nå°è¿ç¨å­å¨åºä¸­çæ´æ¹åå¹¶å°å½ååæ¯ä¸­ãå¨é»è®¤æ¨¡å¼ä¸ï¼git pullæ¯git fetchåè·git merge fetch_headçç¼©åãæ´åç¡®å°è¯´ï¼git pullä½¿ç¨ç»å®çåæ°è¿è¡git fetchï¼å¹¶è°ç¨git mergeå°æ£ç´¢å°çåæ¯å¤´åå¹¶å°å½ååæ¯ä¸­ã\n\n\n# git push\n\ngit pushå½ä»¤ç¨äºå°æ¬å°åæ¯çæ´æ°ï¼æ¨éå°è¿ç¨ä¸»æºãå®çæ ¼å¼ä¸git pullå½ä»¤ç¸ä¼¼ã\n\ngit push <è¿ç¨ä¸»æºå> <æ¬å°åæ¯å>:<è¿ç¨åæ¯å>\n\n\n\n# æ ç­¾\n\n\n# git tag\n\nå¦æä½ è¾¾å°ä¸ä¸ªéè¦çé¶æ®µï¼å¹¶å¸ææ°¸è¿è®°ä½é£ä¸ªç¹å«çæäº¤å¿«ç§ï¼ä½ å¯ä»¥ä½¿ç¨ git tag ç»å®æä¸æ ç­¾ã\n\næ¯å¦è¯´ï¼æä»¬æ³ä¸ºæä»¬ç åå é¡¹ç®åå¸ä¸ä¸ª"1.0.0"çæ¬ã æä»¬å¯ä»¥ç¨ git tag -a v1.0.0 å½ä»¤ç»ææ°ä¸æ¬¡æäº¤æä¸ï¼headï¼ "v1.0.0" çæ ç­¾ã\n\n-a éé¡¹æä¸º"åå»ºä¸ä¸ªå¸¦æ³¨è§£çæ ç­¾"ã ä¸ç¨ -a éé¡¹ä¹å¯ä»¥æ§è¡çï¼ä½å®ä¸ä¼è®°å½è¿æ ç­¾æ¯å¥æ¶åæçï¼è°æçï¼ä¹ä¸ä¼è®©ä½ æ·»å ä¸ªæ ç­¾çæ³¨è§£ã ææ¨èä¸ç´åå»ºå¸¦æ³¨è§£çæ ç­¾ã\n\ngit tag -a v1.0.0\n\n\nå¦ææä»¬è¦æ¥çæææ ç­¾å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n\ngit tag\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:08:14",lastUpdatedTimestamp:1644376094e3},{title:"TortoiseGit ç®å Git æä½",frontmatter:{title:"TortoiseGit ç®å Git æä½",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/7eca40/"},regularPath:"/06.GitLab/01.GitLab/05.TortoiseGit%20%E7%AE%80%E5%8C%96%20Git%20%E6%93%8D%E4%BD%9C.html",relativePath:"06.GitLab/01.GitLab/05.TortoiseGit ç®å Git æä½.md",key:"v-a983545e",path:"/pages/7eca40/",headers:[{level:2,title:"ä¸è½½",slug:"ä¸è½½",normalizedTitle:"ä¸è½½",charIndex:165},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:214},{level:2,title:"å®è£è¯­è¨å",slug:"å®è£è¯­è¨å",normalizedTitle:"å®è£è¯­è¨å",charIndex:231},{level:2,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:460}],headersStr:"ä¸è½½ å®è£ å®è£è¯­è¨å éç½®",content:"# TortoiseGit ç®å Git æä½\n\nTortoiseGit, ä¸­æåæµ·é¾ Git. æµ·é¾ Git åªæ¯æ Windows ç³»ç», æä¸ä¸ªåè¾æµ·é¾ SVN, TortoiseSVN å TortoiseGit é½æ¯éå¸¸ä¼ç§çå¼æºççæ¬åºå®¢æ·ç«¯. åä¸º 32 ä½çä¸ 64 ä½ç.å¹¶ä¸æ¯æåç§è¯­è¨,åæ¬ç®ä½ä¸­æ\n\n\n# ä¸è½½\n\nä¸è½½å°åï¼https://tortoisegit.org/download/\n\n\n\n\n# å®è£\n\næä»¬éè¦åå®è£ç¨åºå,ç¶åå®è£è¯­è¨å(LanguagePack). å ä¸ºTortoiseGit åªæ¯ä¸ä¸ªç¨åºå£³,å¿é¡»ä¾èµä¸ä¸ª Git Core,ä¹å°±æ¯ä¸ä¸èæä»¬å®è£ç Git. æä»¥å®è£åè¯·ç¡®å®å·²å®æä¸ä¸èçæä½. ä¸é¢ä»¥64ä½çæ¬ä¸ºæ¼ç¤º(64,32ä½é¤æä»¶åä¸ä¸æ ·,å¶ä»çæä½é½ä¸è´)\n\nåå»å®è£ç¨åºï¼ç´æ¥ç¹å»ä¸ä¸æ­¥(Next)å³å¯\n\nå®è£å®æ,ç¹å» Finish æé®å³å¯\n\n\n# å®è£è¯­è¨å\n\nåå»æå¼è¯­è¨åå®è£ç¨åº\n\nç¹å»ä¸ä¸æ­¥(Alt+N), è¯­è¨åä¼èªå¨å®è£å®æ\n\n\n# éç½®\n\nå¨ç©ºç½å¤ç¹å»é¼ æ å³é®, éæ© --\x3e TortoiseGit --\x3e Settings, ç¶åå°±å¯ä»¥çå°éç½®çé¢\n\néä¸­General,å¨å³è¾¹ç Languageä¸­éæ©ä¸­æ. ä¸å¾éèªå¨åçº§çå¤éæ¡,å¯è½è¿éè¦æå® Git.exe æä»¶çè·¯å¾\n\nåæ¬¡ç¹å»é¼ æ å³é®,å¯ä»¥çå°å¼¹åºèåä¸­å·²ç»åæä¸­æ. åæ¥ç Settings åæ è®¾ç½®; Clone åä¸º åé",normalizedContent:"# tortoisegit ç®å git æä½\n\ntortoisegit, ä¸­æåæµ·é¾ git. æµ·é¾ git åªæ¯æ windows ç³»ç», æä¸ä¸ªåè¾æµ·é¾ svn, tortoisesvn å tortoisegit é½æ¯éå¸¸ä¼ç§çå¼æºççæ¬åºå®¢æ·ç«¯. åä¸º 32 ä½çä¸ 64 ä½ç.å¹¶ä¸æ¯æåç§è¯­è¨,åæ¬ç®ä½ä¸­æ\n\n\n# ä¸è½½\n\nä¸è½½å°åï¼https://tortoisegit.org/download/\n\n\n\n\n# å®è£\n\næä»¬éè¦åå®è£ç¨åºå,ç¶åå®è£è¯­è¨å(languagepack). å ä¸ºtortoisegit åªæ¯ä¸ä¸ªç¨åºå£³,å¿é¡»ä¾èµä¸ä¸ª git core,ä¹å°±æ¯ä¸ä¸èæä»¬å®è£ç git. æä»¥å®è£åè¯·ç¡®å®å·²å®æä¸ä¸èçæä½. ä¸é¢ä»¥64ä½çæ¬ä¸ºæ¼ç¤º(64,32ä½é¤æä»¶åä¸ä¸æ ·,å¶ä»çæä½é½ä¸è´)\n\nåå»å®è£ç¨åºï¼ç´æ¥ç¹å»ä¸ä¸æ­¥(next)å³å¯\n\nå®è£å®æ,ç¹å» finish æé®å³å¯\n\n\n# å®è£è¯­è¨å\n\nåå»æå¼è¯­è¨åå®è£ç¨åº\n\nç¹å»ä¸ä¸æ­¥(alt+n), è¯­è¨åä¼èªå¨å®è£å®æ\n\n\n# éç½®\n\nå¨ç©ºç½å¤ç¹å»é¼ æ å³é®, éæ© --\x3e tortoisegit --\x3e settings, ç¶åå°±å¯ä»¥çå°éç½®çé¢\n\néä¸­general,å¨å³è¾¹ç languageä¸­éæ©ä¸­æ. ä¸å¾éèªå¨åçº§çå¤éæ¡,å¯è½è¿éè¦æå® git.exe æä»¶çè·¯å¾\n\nåæ¬¡ç¹å»é¼ æ å³é®,å¯ä»¥çå°å¼¹åºèåä¸­å·²ç»åæä¸­æ. åæ¥ç settings åæ è®¾ç½®; clone åä¸º åé",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä»ä¹æ¯ GitLab",frontmatter:{title:"ä»ä¹æ¯ GitLab",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/89c106/"},regularPath:"/06.GitLab/01.GitLab/06.%E4%BB%80%E4%B9%88%E6%98%AF%20GitLab.html",relativePath:"06.GitLab/01.GitLab/06.ä»ä¹æ¯ GitLab.md",key:"v-5adc669c",path:"/pages/89c106/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:17}],headersStr:"æ¦è¿°",content:"# ä»ä¹æ¯ GitLab\n\n\n# æ¦è¿°\n\nGitLab æ¯å©ç¨ Ruby on Rails ä¸ä¸ªå¼æºççæ¬ç®¡çç³»ç»ï¼å®ç°ä¸ä¸ªèªæç®¡ç Git é¡¹ç®ä»åºï¼å¯éè¿ Web çé¢è¿è¡è®¿é®å¬å¼çæèç§äººé¡¹ç®ãå®æ¥æä¸ Github ç±»ä¼¼çåè½ï¼è½å¤æµè§æºä»£ç ï¼ç®¡çç¼ºé·åæ³¨éãå¯ä»¥ç®¡çå¢éå¯¹ä»åºçè®¿é®ï¼å®éå¸¸æäºæµè§æäº¤è¿ççæ¬å¹¶æä¾ä¸ä¸ªæä»¶åå²åºãå¢éæåå¯ä»¥å©ç¨åç½®çç®åèå¤©ç¨åº (Wall) è¿è¡äº¤æµãå®è¿æä¾ä¸ä¸ªä»£ç çæ®µæ¶éåè½å¯ä»¥è½»æ¾å®ç°ä»£ç å¤ç¨ï¼ä¾¿äºæ¥åæéè¦çæ¶åè¿è¡æ¥æ¾ã",normalizedContent:"# ä»ä¹æ¯ gitlab\n\n\n# æ¦è¿°\n\ngitlab æ¯å©ç¨ ruby on rails ä¸ä¸ªå¼æºççæ¬ç®¡çç³»ç»ï¼å®ç°ä¸ä¸ªèªæç®¡ç git é¡¹ç®ä»åºï¼å¯éè¿ web çé¢è¿è¡è®¿é®å¬å¼çæèç§äººé¡¹ç®ãå®æ¥æä¸ github ç±»ä¼¼çåè½ï¼è½å¤æµè§æºä»£ç ï¼ç®¡çç¼ºé·åæ³¨éãå¯ä»¥ç®¡çå¢éå¯¹ä»åºçè®¿é®ï¼å®éå¸¸æäºæµè§æäº¤è¿ççæ¬å¹¶æä¾ä¸ä¸ªæä»¶åå²åºãå¢éæåå¯ä»¥å©ç¨åç½®çç®åèå¤©ç¨åº (wall) è¿è¡äº¤æµãå®è¿æä¾ä¸ä¸ªä»£ç çæ®µæ¶éåè½å¯ä»¥è½»æ¾å®ç°ä»£ç å¤ç¨ï¼ä¾¿äºæ¥åæéè¦çæ¶åè¿è¡æ¥æ¾ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:08:14",lastUpdatedTimestamp:1644376094e3},{title:"åºäº Docker å®è£ GitLab",frontmatter:{title:"åºäº Docker å®è£ GitLab",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/ffc177/"},regularPath:"/06.GitLab/01.GitLab/07.%E5%9F%BA%E4%BA%8E%20Docker%20%E5%AE%89%E8%A3%85%20GitLab.html",relativePath:"06.GitLab/01.GitLab/07.åºäº Docker å®è£ GitLab.md",key:"v-0670b552",path:"/pages/ffc177/",headers:[{level:2,title:"ä½¿ç¨ docker-compose å®è£ GitLab",slug:"ä½¿ç¨-docker-compose-å®è£-gitlab",normalizedTitle:"ä½¿ç¨ docker-compose å®è£ gitlab",charIndex:26},{level:2,title:"ä½¿ç¨ docker-compose åçº§ GitLab",slug:"ä½¿ç¨-docker-compose-åçº§-gitlab",normalizedTitle:"ä½¿ç¨ docker-compose åçº§ gitlab",charIndex:1764},{level:2,title:"å®è£å®æé¦æ¬¡ä½¿ç¨",slug:"å®è£å®æé¦æ¬¡ä½¿ç¨",normalizedTitle:"å®è£å®æé¦æ¬¡ä½¿ç¨",charIndex:1891}],headersStr:"ä½¿ç¨ docker-compose å®è£ GitLab ä½¿ç¨ docker-compose åçº§ GitLab å®è£å®æé¦æ¬¡ä½¿ç¨",content:"# åºäº Docker å®è£ GitLab\n\n\n# ä½¿ç¨ docker-compose å®è£ GitLab\n\nä½¿ç¨ Docker Compose æ¨å¯ä»¥è½»æ¾å°éç½®ãå®è£ååçº§åºäº Docker ç GitLab å®è£ã\n\n1.å®è£ Docker Compose\n\n2.åå»ºdocker-compose.ymlæä»¶ãå®æ¹ç¤ºä¾\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nversion: '3'\nservices:\n  web:\n    image: 'gitlab/gitlab-ce:latest'\n    restart: always\n    hostname: '192.168.199.179'\n    environment:\n      TZ: 'Asia/Shanghai'\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://192.168.199.179'\n    ports:\n      - '80:80'\n      - '443:443'\n      - '22:22'\n    volumes:\n      - '/usr/local/docker/gitlab/config:/etc/gitlab'\n      - '/usr/local/docker/gitlab/logs:/var/log/gitlab'\n      - '/usr/local/docker/gitlab/data:/var/opt/gitlab'\n\n\næç¤º\n\néè¦æ¿æ¢192.168.199.179ä¸ºä½ èªå·±çååæèIPå°åã\n\næ³¨æ\n\nLinuxä¸»æºå¼å¯SSHæå¡æ¶ï¼é»è®¤çå¬22ç«¯å£ï¼æ­¤æ¶ç´æ¥æ§è¡docker-compose upä¼æ¥ç«¯å£å²çªï¼è§£å³åæ³ï¼ä¿®æ¹ä¸»æºSSHçå¬ç«¯å£ï¼æåèä¸é¢èªå®HTTPåSSHçå¬ç«¯å£éç½®ã\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\nversion: '3'\nservices:\n  web:\n    image: 'gitlab/gitlab-ce:latest'\n    restart: always\n    hostname: '192.168.199.179'\n    environment:\n      TZ: 'Asia/Shanghai'\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://192.168.199.179:8080'\n        gitlab_rails['gitlab_shell_ssh_port'] = 2224\n        unicorn['port'] = 8888\n        nginx['listen_port'] = 8080\n    ports:\n      - '8080:8080'\n      - '2224:22'\n    volumes:\n      - '/usr/local/docker/gitlab/config:/etc/gitlab'\n      - '/usr/local/docker/gitlab/logs:/var/log/gitlab'\n      - '/usr/local/docker/gitlab/data:/var/opt/gitlab'\n\n\næç¤º\n\nä»¥ä¸éç½®ç¸å½ä¸ä½¿ç¨--publish 8080:8080 --publish 2224:22ã\n\nç±äºunicornï¼Rubyçæå¡å¨ï¼é»è®¤çå¬8080ç«¯å£ï¼æä»¥å¦ææ³ä½¿ç¨8080ç«¯å£ï¼éè¦æ·»å unicorn['port'] = 8888éç½®ï¼å¦æä½¿ç¨é8080ç«¯å£å¯ä»¥å»æè¯¥unicornç«¯å£éç½®ã\n\næ³¨æ\n\nå¨portséç½®ä¸­- '2224:22',åªä¿®æ¹ä¸»æºå¯¹å¤å¼æ¾ç«¯å£2224å³å¯ï¼åä¸ä¸è¦ä¿®æ¹å¯¹åºå®¹å¨ç22ç«¯å£ï¼å¦åSSHè¿æ¥æ¹å¼å°æ æ³è®¤è¯æåã\n\n3.ç¡®ä¿ä¸docker-compose.ymlå¨åä¸ä¸ªç®å½ä¸­ï¼å¹¶è¿è¡docker-compose up -då¯å¨ GitLab\n\næç¤º\n\nå¦ææå¡å¨éç½®è¾ä½ï¼å¯å¨è¿è¡å¯è½éè¦è¾é¿æ¶é´ï¼è¯·èå¿ç­å¾\n\n\n# ä½¿ç¨ docker-compose åçº§ GitLab\n\nå¦ææ¨ä½¿ç¨docker-composeå®è£GitLabï¼é£ä¹æ¨åªéè¿è¡docker-compose pullådocker-compose up -dæ¥ä¸è½½æ°çæ¬å¹¶åçº§GitLabå®ä¾ã\n\n\n# å®è£å®æé¦æ¬¡ä½¿ç¨\n\n * è®¿é®å°åï¼http://192.168.199.179:8080\n * ç«¯å£ 8080 æ¯å ä¸ºæå¨éç½®ä¸­è®¾ç½®çå¤é¨è®¿é®å°åä¸º 8080ï¼é»è®¤æ¯ 80\n * åå§åå®è£å®æåææå¦ä¸ï¼\n\n\n\n * è®¾ç½®ç®¡çååå§å¯ç ï¼è¿éçå¯ç æå¥½æ¯ å­æ¯ + æ°å­ ç»åï¼å¹¶ä¸ å¤§äºç­äº 8 ä½\n * éç½®å®æåç»å½ï¼ç®¡çåè´¦å·æ¯ root\n\n\n\n * ç»å½Gitlabï¼è¿å¥æ¬¢è¿é¡µé¢\n\n\n\n * Gitlabçæ¬\n\n",normalizedContent:"# åºäº docker å®è£ gitlab\n\n\n# ä½¿ç¨ docker-compose å®è£ gitlab\n\nä½¿ç¨ docker compose æ¨å¯ä»¥è½»æ¾å°éç½®ãå®è£ååçº§åºäº docker ç gitlab å®è£ã\n\n1.å®è£ docker compose\n\n2.åå»ºdocker-compose.ymlæä»¶ãå®æ¹ç¤ºä¾\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nversion: '3'\nservices:\n  web:\n    image: 'gitlab/gitlab-ce:latest'\n    restart: always\n    hostname: '192.168.199.179'\n    environment:\n      tz: 'asia/shanghai'\n      gitlab_omnibus_config: |\n        external_url 'http://192.168.199.179'\n    ports:\n      - '80:80'\n      - '443:443'\n      - '22:22'\n    volumes:\n      - '/usr/local/docker/gitlab/config:/etc/gitlab'\n      - '/usr/local/docker/gitlab/logs:/var/log/gitlab'\n      - '/usr/local/docker/gitlab/data:/var/opt/gitlab'\n\n\næç¤º\n\néè¦æ¿æ¢192.168.199.179ä¸ºä½ èªå·±çååæèipå°åã\n\næ³¨æ\n\nlinuxä¸»æºå¼å¯sshæå¡æ¶ï¼é»è®¤çå¬22ç«¯å£ï¼æ­¤æ¶ç´æ¥æ§è¡docker-compose upä¼æ¥ç«¯å£å²çªï¼è§£å³åæ³ï¼ä¿®æ¹ä¸»æºsshçå¬ç«¯å£ï¼æåèä¸é¢èªå®httpåsshçå¬ç«¯å£éç½®ã\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\nversion: '3'\nservices:\n  web:\n    image: 'gitlab/gitlab-ce:latest'\n    restart: always\n    hostname: '192.168.199.179'\n    environment:\n      tz: 'asia/shanghai'\n      gitlab_omnibus_config: |\n        external_url 'http://192.168.199.179:8080'\n        gitlab_rails['gitlab_shell_ssh_port'] = 2224\n        unicorn['port'] = 8888\n        nginx['listen_port'] = 8080\n    ports:\n      - '8080:8080'\n      - '2224:22'\n    volumes:\n      - '/usr/local/docker/gitlab/config:/etc/gitlab'\n      - '/usr/local/docker/gitlab/logs:/var/log/gitlab'\n      - '/usr/local/docker/gitlab/data:/var/opt/gitlab'\n\n\næç¤º\n\nä»¥ä¸éç½®ç¸å½ä¸ä½¿ç¨--publish 8080:8080 --publish 2224:22ã\n\nç±äºunicornï¼rubyçæå¡å¨ï¼é»è®¤çå¬8080ç«¯å£ï¼æä»¥å¦ææ³ä½¿ç¨8080ç«¯å£ï¼éè¦æ·»å unicorn['port'] = 8888éç½®ï¼å¦æä½¿ç¨é8080ç«¯å£å¯ä»¥å»æè¯¥unicornç«¯å£éç½®ã\n\næ³¨æ\n\nå¨portséç½®ä¸­- '2224:22',åªä¿®æ¹ä¸»æºå¯¹å¤å¼æ¾ç«¯å£2224å³å¯ï¼åä¸ä¸è¦ä¿®æ¹å¯¹åºå®¹å¨ç22ç«¯å£ï¼å¦åsshè¿æ¥æ¹å¼å°æ æ³è®¤è¯æåã\n\n3.ç¡®ä¿ä¸docker-compose.ymlå¨åä¸ä¸ªç®å½ä¸­ï¼å¹¶è¿è¡docker-compose up -då¯å¨ gitlab\n\næç¤º\n\nå¦ææå¡å¨éç½®è¾ä½ï¼å¯å¨è¿è¡å¯è½éè¦è¾é¿æ¶é´ï¼è¯·èå¿ç­å¾\n\n\n# ä½¿ç¨ docker-compose åçº§ gitlab\n\nå¦ææ¨ä½¿ç¨docker-composeå®è£gitlabï¼é£ä¹æ¨åªéè¿è¡docker-compose pullådocker-compose up -dæ¥ä¸è½½æ°çæ¬å¹¶åçº§gitlabå®ä¾ã\n\n\n# å®è£å®æé¦æ¬¡ä½¿ç¨\n\n * è®¿é®å°åï¼http://192.168.199.179:8080\n * ç«¯å£ 8080 æ¯å ä¸ºæå¨éç½®ä¸­è®¾ç½®çå¤é¨è®¿é®å°åä¸º 8080ï¼é»è®¤æ¯ 80\n * åå§åå®è£å®æåææå¦ä¸ï¼\n\n\n\n * è®¾ç½®ç®¡çååå§å¯ç ï¼è¿éçå¯ç æå¥½æ¯ å­æ¯ + æ°å­ ç»åï¼å¹¶ä¸ å¤§äºç­äº 8 ä½\n * éç½®å®æåç»å½ï¼ç®¡çåè´¦å·æ¯ root\n\n\n\n * ç»å½gitlabï¼è¿å¥æ¬¢è¿é¡µé¢\n\n\n\n * gitlabçæ¬\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"GitLab çåºæ¬è®¾ç½®",frontmatter:{title:"GitLab çåºæ¬è®¾ç½®",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/655544/"},regularPath:"/06.GitLab/01.GitLab/08.GitLab%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE.html",relativePath:"06.GitLab/01.GitLab/08.GitLab çåºæ¬è®¾ç½®.md",key:"v-685bb760",path:"/pages/655544/",headers:[{level:2,title:"GitLab çåºæ¬è®¾ç½®",slug:"gitlab-çåºæ¬è®¾ç½®-2",normalizedTitle:"gitlab çåºæ¬è®¾ç½®",charIndex:2},{level:3,title:"è´¦æ·ä¸éå¶è®¾ç½®",slug:"è´¦æ·ä¸éå¶è®¾ç½®",normalizedTitle:"è´¦æ·ä¸éå¶è®¾ç½®",charIndex:70},{level:3,title:"æ³¨åéå¶",slug:"æ³¨åéå¶",normalizedTitle:"æ³¨åéå¶",charIndex:129}],headersStr:"GitLab çåºæ¬è®¾ç½® è´¦æ·ä¸éå¶è®¾ç½® æ³¨åéå¶",content:"# GitLab çåºæ¬è®¾ç½®\n\n\n# GitLab çåºæ¬è®¾ç½®\n\nç¬¬ä¸æ¬¡ä½¿ç¨æ¶éè¦åä¸äºåå§åè®¾ç½®ï¼ç¹å»âç®¡çåºåâ--\x3eâè®¾ç½®â\n\n\n# è´¦æ·ä¸éå¶è®¾ç½®\n\nå³é­å¤´ååè½ï¼ç±äº Gravatar å¤´åä¸ºç½ç»å¤´åï¼å¨ç½ç»æåµä¸çæ³æ¶å¯è½å¯¼è´è®¿é®æ¶å¡é¡¿\n\n\n# æ³¨åéå¶\n\nç±äºæ¯åé¨ä»£ç æç®¡æå¡å¨ï¼å¯ä»¥ç´æ¥å³é­æ³¨ååè½ï¼ç±ç®¡çåç»ä¸åå»ºç¨æ·å³å¯\n\næç¤º\n\nå³é­æ³¨ååè½åï¼ä½¿éç½®çæééå¯Gitlabæå¡ã",normalizedContent:"# gitlab çåºæ¬è®¾ç½®\n\n\n# gitlab çåºæ¬è®¾ç½®\n\nç¬¬ä¸æ¬¡ä½¿ç¨æ¶éè¦åä¸äºåå§åè®¾ç½®ï¼ç¹å»âç®¡çåºåâ--\x3eâè®¾ç½®â\n\n\n# è´¦æ·ä¸éå¶è®¾ç½®\n\nå³é­å¤´ååè½ï¼ç±äº gravatar å¤´åä¸ºç½ç»å¤´åï¼å¨ç½ç»æåµä¸çæ³æ¶å¯è½å¯¼è´è®¿é®æ¶å¡é¡¿\n\n\n# æ³¨åéå¶\n\nç±äºæ¯åé¨ä»£ç æç®¡æå¡å¨ï¼å¯ä»¥ç´æ¥å³é­æ³¨ååè½ï¼ç±ç®¡çåç»ä¸åå»ºç¨æ·å³å¯\n\næç¤º\n\nå³é­æ³¨ååè½åï¼ä½¿éç½®çæééå¯gitlabæå¡ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:08:14",lastUpdatedTimestamp:1644376094e3},{title:"GitLab çè´¦æ·ç®¡ç",frontmatter:{title:"GitLab çè´¦æ·ç®¡ç",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/0ba162/"},regularPath:"/06.GitLab/01.GitLab/09.GitLab%20%E7%9A%84%E8%B4%A6%E6%88%B7%E7%AE%A1%E7%90%86.html",relativePath:"06.GitLab/01.GitLab/09.GitLab çè´¦æ·ç®¡ç.md",key:"v-7dad8b02",path:"/pages/0ba162/",headers:[{level:2,title:"åå»ºç¨æ·",slug:"åå»ºç¨æ·",normalizedTitle:"åå»ºç¨æ·",charIndex:40},{level:2,title:"è®¾ç½®è´¦æ·ä¿¡æ¯",slug:"è®¾ç½®è´¦æ·ä¿¡æ¯",normalizedTitle:"è®¾ç½®è´¦æ·ä¿¡æ¯",charIndex:111},{level:2,title:"ä¿®æ¹ç¨æ·å¯ç ",slug:"ä¿®æ¹ç¨æ·å¯ç ",normalizedTitle:"ä¿®æ¹ç¨æ·å¯ç ",charIndex:138},{level:2,title:"éåºå¹¶ä½¿ç¨æ°è´¦æ·ç»å½",slug:"éåºå¹¶ä½¿ç¨æ°è´¦æ·ç»å½",normalizedTitle:"éåºå¹¶ä½¿ç¨æ°è´¦æ·ç»å½",charIndex:186}],headersStr:"åå»ºç¨æ· è®¾ç½®è´¦æ·ä¿¡æ¯ ä¿®æ¹ç¨æ·å¯ç  éåºå¹¶ä½¿ç¨æ°è´¦æ·ç»å½",content:"# GitLab çè´¦æ·ç®¡ç\n\nä½¿ç¨æ¶è¯·ä¸è¦ç´æ¥éè¿ root ç¨æ·æä½ï¼éè¦ååå»ºç¨æ·ï¼ç¶åéè¿åå»ºçç¨æ·æä½ï¼å¦æä½ æ¯ç®¡çåè¿éè¦ä¸ºå¶ä»å¼åäººååéè´¦æ·\n\n\n# åå»ºç¨æ·\n\nç¹å»âç®¡çåºåâ--\x3eâæ°å»ºç¨æ·â\n\n\n# è®¾ç½®è´¦æ·ä¿¡æ¯\n\nåæ¶ä½ å¯ä»¥å°èªå·±è®¾ç½®ä¸ºç®¡çå\n\n\n# ä¿®æ¹ç¨æ·å¯ç \n\nç±äºæä»¬åå»ºæ¶å¹¶æ²¡æéç½®é®ç®±ï¼æä»¥è¿éè¦éæ°ç¼è¾ç¨æ·ä¿¡æ¯å¹¶æå¨è®¾ç½®å¯ç \n\n\n# éåºå¹¶ä½¿ç¨æ°è´¦æ·ç»å½\n\næç¤º\n\nåå»ºå®è´¦æ·ï¼ç¬¬ä¸æ¬¡ç»å½æ¶è¿ä¼æç¤ºä½ ä¿®æ¹ç»å½å¯ç ",normalizedContent:"# gitlab çè´¦æ·ç®¡ç\n\nä½¿ç¨æ¶è¯·ä¸è¦ç´æ¥éè¿ root ç¨æ·æä½ï¼éè¦ååå»ºç¨æ·ï¼ç¶åéè¿åå»ºçç¨æ·æä½ï¼å¦æä½ æ¯ç®¡çåè¿éè¦ä¸ºå¶ä»å¼åäººååéè´¦æ·\n\n\n# åå»ºç¨æ·\n\nç¹å»âç®¡çåºåâ--\x3eâæ°å»ºç¨æ·â\n\n\n# è®¾ç½®è´¦æ·ä¿¡æ¯\n\nåæ¶ä½ å¯ä»¥å°èªå·±è®¾ç½®ä¸ºç®¡çå\n\n\n# ä¿®æ¹ç¨æ·å¯ç \n\nç±äºæä»¬åå»ºæ¶å¹¶æ²¡æéç½®é®ç®±ï¼æä»¥è¿éè¦éæ°ç¼è¾ç¨æ·ä¿¡æ¯å¹¶æå¨è®¾ç½®å¯ç \n\n\n# éåºå¹¶ä½¿ç¨æ°è´¦æ·ç»å½\n\næç¤º\n\nåå»ºå®è´¦æ·ï¼ç¬¬ä¸æ¬¡ç»å½æ¶è¿ä¼æç¤ºä½ ä¿®æ¹ç»å½å¯ç ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:08:14",lastUpdatedTimestamp:1644376094e3},{title:"GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®",frontmatter:{title:"GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/aa27ff/"},regularPath:"/06.GitLab/01.GitLab/10.GitLab%20%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE.html",relativePath:"06.GitLab/01.GitLab/10.GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®.md",key:"v-77b753e2",path:"/pages/aa27ff/",headers:[{level:2,title:"GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®",slug:"gitlab-åå»ºç¬¬ä¸ä¸ªé¡¹ç®-2",normalizedTitle:"gitlab åå»ºç¬¬ä¸ä¸ªé¡¹ç®",charIndex:2},{level:2,title:"åå§åé¡¹ç®",slug:"åå§åé¡¹ç®",normalizedTitle:"åå§åé¡¹ç®",charIndex:93},{level:2,title:"ä½¿ç¨ SSH çæ¹å¼æååæ¨éé¡¹ç®",slug:"ä½¿ç¨-ssh-çæ¹å¼æååæ¨éé¡¹ç®",normalizedTitle:"ä½¿ç¨ ssh çæ¹å¼æååæ¨éé¡¹ç®",charIndex:142},{level:3,title:"çæ SSH KEY",slug:"çæ-ssh-key",normalizedTitle:"çæ ssh key",charIndex:164},{level:3,title:"å¤å¶ SSH-KEY ä¿¡æ¯å° GitLab",slug:"å¤å¶-ssh-key-ä¿¡æ¯å°-gitlab",normalizedTitle:"å¤å¶ ssh-key ä¿¡æ¯å° gitlab",charIndex:1145},{level:3,title:"ä½¿ç¨ TortoiseGit åéé¡¹ç®",slug:"ä½¿ç¨-tortoisegit-åéé¡¹ç®",normalizedTitle:"ä½¿ç¨ tortoisegit åéé¡¹ç®",charIndex:1284},{level:3,title:"ä½¿ç¨ TortoiseGit æ¨éé¡¹ç®ï¼æäº¤ä»£ç ï¼",slug:"ä½¿ç¨-tortoisegit-æ¨éé¡¹ç®-æäº¤ä»£ç ",normalizedTitle:"ä½¿ç¨ tortoisegit æ¨éé¡¹ç®ï¼æäº¤ä»£ç ï¼",charIndex:1415},{level:2,title:"æ¥ç GitLab ç¡®è®¤æäº¤æå",slug:"æ¥ç-gitlab-ç¡®è®¤æäº¤æå",normalizedTitle:"æ¥ç gitlab ç¡®è®¤æäº¤æå",charIndex:2079}],headersStr:"GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç® åå§åé¡¹ç® ä½¿ç¨ SSH çæ¹å¼æååæ¨éé¡¹ç® çæ SSH KEY å¤å¶ SSH-KEY ä¿¡æ¯å° GitLab ä½¿ç¨ TortoiseGit åéé¡¹ç® ä½¿ç¨ TortoiseGit æ¨éé¡¹ç®ï¼æäº¤ä»£ç ï¼ æ¥ç GitLab ç¡®è®¤æäº¤æå",content:'# GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®\n\n\n# GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®\n\nç¹å» + å· --\x3e æ°å»ºé¡¹ç®\n\nè¾å¥é¡¹ç®åç§°åæè¿°ä¿¡æ¯ï¼è®¾ç½®å¯è§ç­çº§ä¸ºç§æï¼è¿æ ·å«äººå°±çä¸è§ä½ çé¡¹ç®\n\n\n# åå§åé¡¹ç®\n\næä»¬éæ©éè¿å¢å ä¸ä¸ª README çæ¹å¼æ¥åå§åé¡¹ç®\n\nç´æ¥æäº¤ä¿®æ¹å³å¯\n\n\n# ä½¿ç¨ SSH çæ¹å¼æååæ¨éé¡¹ç®\n\n\n# çæ SSH KEY\n\nä½¿ç¨ ssh-keygen å·¥å·çæï¼ä½ç½®å¨ Git å®è£ç®å½ä¸ï¼æçæ¯ C:\\Program Files\\Git\\usr\\bin\n\nè¾å¥å½ä»¤ï¼\n\nssh-keygen -t rsa -C "your_email@example.com"\n\n\næ§è¡æååçææï¼\n\nMicrosoft Windows [çæ¬ 10.0.14393]\n(c) 2016 Microsoft Corporationãä¿çæææå©ã\n\nC:\\Program Files\\Git\\usr\\bin>ssh-keygen -t rsa -C "topsale@vip.qq.com"\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/c/Users/ivoov/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /c/Users/ivoov/.ssh/id_rsa.\nYour public key has been saved in /c/Users/ivoov/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:cVesJKa5VnQNihQOTotXUAIyphsqjb7Z9lqOji2704E topsale@vip.qq.com\nThe key\'s randomart image is:\n+---[RSA 2048]----+\n|  + ..=o=.  .+.  |\n| o o + B .+.o.o  |\n|o   . + +=o+..   |\n|.=   .  oo...    |\n|= o     So       |\n|oE .    o        |\n| .. .. .         |\n| o*o+            |\n| *B*oo           |\n+----[SHA256]-----+\n\nC:\\Program Files\\Git\\usr\\bin>\n\n\n\n# å¤å¶ SSH-KEY ä¿¡æ¯å° GitLab\n\nç§é¥ä½ç½®å¨ï¼C:\\Users\\ä½ çç¨æ·å\\.ssh ç®å½ä¸ï¼æ¾å° id_rsa.pub å¹¶ä½¿ç¨ç¼è¾å¨æå¼ï¼å¦ï¼\n\n\n\nç»å½ GitLabï¼ç¹å»âç¨æ·å¤´åâ--\x3eâè®¾ç½®â--\x3eâSSH å¯é¥â\n\n\n\næåå¢å å¯é¥åçææ\n\n\n\n\n# ä½¿ç¨ TortoiseGit åéé¡¹ç®\n\n * æ°å»ºä¸ä¸ªå­æ¾ä»£ç ä»åºçæ¬å°æä»¶å¤¹\n * å¨æä»¶å¤¹ç©ºç½å¤æå³é®\n * éæ©âGit åé...â\n\n\n\n * æå¡é¡¹ç®å°åå° URL\n\n\n\n * å¦æå¼¹åºè¿æ¥ä¿¡æ¯è¯·éæ©æ¯\n\n\n\n * æååéé¡¹ç®å°æ¬å°\n\n\n\n\n# ä½¿ç¨ TortoiseGit æ¨éé¡¹ç®ï¼æäº¤ä»£ç ï¼\n\n * åå»ºæä¿®æ¹æä»¶ï¼è¿éçæä»¶ä¸ºæææä»¶ï¼åæ¬ï¼ä»£ç ãå¾çç­ï¼\n * æä»¬ä»¥åå»º .gitignore è¿æ»¤éç½®æä»¶ä¸ºä¾ï¼è¯¥æä»¶çä¸»è¦ä½ç¨ä¸ºè¿æ»¤ä¸éè¦ä¸ä¼ çæä»¶ï¼æ¯å¦ï¼IDE çæçå·¥ç¨æä»¶ãç¼è¯åç class æä»¶ç­\n * å¨å·¥ç¨ç®å½ä¸ï¼æ°å»º .gitignore æä»¶ï¼å¹¶å¡«å¥å¦ä¸éç½®ï¼\n\n.gradle\n*.sw?\n.#*\n*#\n*~\n/build\n/code\n.classpath\n.project\n.settings\n.metadata\n.factorypath\n.recommenders\nbin\nbuild\ntarget\n.factorypath\n.springBeans\ninterpolated*.xml\ndependency-reduced-pom.xml\nbuild.log\n_site/\n.*.md.html\nmanifest.yml\nMANIFEST.MF\nsettings.xml\nactivemq-data\noverridedb.*\n*.iml\n*.ipr\n*.iws\n.idea\n.DS_Store\n.factorypath\ndump.rdb\ntransaction-logs\n**/overlays/\n**/logs/\n**/temp/\n**/classes/\n\n\n * å³é®å¼åºèåï¼éæ©âæäº¤ Master...â\n\n\n\n * ç¹å»âå¨é¨âå¹¶å¡«å¥âæ¥å¿ä¿¡æ¯â\n\n\n\n * ç¹å»âæäº¤å¹¶æ¨éâ\n\n\n\n * æååçææå¾\n\n\n\n\n# æ¥ç GitLab ç¡®è®¤æäº¤æå\n\n',normalizedContent:'# gitlab åå»ºç¬¬ä¸ä¸ªé¡¹ç®\n\n\n# gitlab åå»ºç¬¬ä¸ä¸ªé¡¹ç®\n\nç¹å» + å· --\x3e æ°å»ºé¡¹ç®\n\nè¾å¥é¡¹ç®åç§°åæè¿°ä¿¡æ¯ï¼è®¾ç½®å¯è§ç­çº§ä¸ºç§æï¼è¿æ ·å«äººå°±çä¸è§ä½ çé¡¹ç®\n\n\n# åå§åé¡¹ç®\n\næä»¬éæ©éè¿å¢å ä¸ä¸ª readme çæ¹å¼æ¥åå§åé¡¹ç®\n\nç´æ¥æäº¤ä¿®æ¹å³å¯\n\n\n# ä½¿ç¨ ssh çæ¹å¼æååæ¨éé¡¹ç®\n\n\n# çæ ssh key\n\nä½¿ç¨ ssh-keygen å·¥å·çæï¼ä½ç½®å¨ git å®è£ç®å½ä¸ï¼æçæ¯ c:\\program files\\git\\usr\\bin\n\nè¾å¥å½ä»¤ï¼\n\nssh-keygen -t rsa -c "your_email@example.com"\n\n\næ§è¡æååçææï¼\n\nmicrosoft windows [çæ¬ 10.0.14393]\n(c) 2016 microsoft corporationãä¿çæææå©ã\n\nc:\\program files\\git\\usr\\bin>ssh-keygen -t rsa -c "topsale@vip.qq.com"\ngenerating public/private rsa key pair.\nenter file in which to save the key (/c/users/ivoov/.ssh/id_rsa):\nenter passphrase (empty for no passphrase):\nenter same passphrase again:\nyour identification has been saved in /c/users/ivoov/.ssh/id_rsa.\nyour public key has been saved in /c/users/ivoov/.ssh/id_rsa.pub.\nthe key fingerprint is:\nsha256:cvesjka5vnqnihqototxuaiyphsqjb7z9lqoji2704e topsale@vip.qq.com\nthe key\'s randomart image is:\n+---[rsa 2048]----+\n|  + ..=o=.  .+.  |\n| o o + b .+.o.o  |\n|o   . + +=o+..   |\n|.=   .  oo...    |\n|= o     so       |\n|oe .    o        |\n| .. .. .         |\n| o*o+            |\n| *b*oo           |\n+----[sha256]-----+\n\nc:\\program files\\git\\usr\\bin>\n\n\n\n# å¤å¶ ssh-key ä¿¡æ¯å° gitlab\n\nç§é¥ä½ç½®å¨ï¼c:\\users\\ä½ çç¨æ·å\\.ssh ç®å½ä¸ï¼æ¾å° id_rsa.pub å¹¶ä½¿ç¨ç¼è¾å¨æå¼ï¼å¦ï¼\n\n\n\nç»å½ gitlabï¼ç¹å»âç¨æ·å¤´åâ--\x3eâè®¾ç½®â--\x3eâssh å¯é¥â\n\n\n\næåå¢å å¯é¥åçææ\n\n\n\n\n# ä½¿ç¨ tortoisegit åéé¡¹ç®\n\n * æ°å»ºä¸ä¸ªå­æ¾ä»£ç ä»åºçæ¬å°æä»¶å¤¹\n * å¨æä»¶å¤¹ç©ºç½å¤æå³é®\n * éæ©âgit åé...â\n\n\n\n * æå¡é¡¹ç®å°åå° url\n\n\n\n * å¦æå¼¹åºè¿æ¥ä¿¡æ¯è¯·éæ©æ¯\n\n\n\n * æååéé¡¹ç®å°æ¬å°\n\n\n\n\n# ä½¿ç¨ tortoisegit æ¨éé¡¹ç®ï¼æäº¤ä»£ç ï¼\n\n * åå»ºæä¿®æ¹æä»¶ï¼è¿éçæä»¶ä¸ºæææä»¶ï¼åæ¬ï¼ä»£ç ãå¾çç­ï¼\n * æä»¬ä»¥åå»º .gitignore è¿æ»¤éç½®æä»¶ä¸ºä¾ï¼è¯¥æä»¶çä¸»è¦ä½ç¨ä¸ºè¿æ»¤ä¸éè¦ä¸ä¼ çæä»¶ï¼æ¯å¦ï¼ide çæçå·¥ç¨æä»¶ãç¼è¯åç class æä»¶ç­\n * å¨å·¥ç¨ç®å½ä¸ï¼æ°å»º .gitignore æä»¶ï¼å¹¶å¡«å¥å¦ä¸éç½®ï¼\n\n.gradle\n*.sw?\n.#*\n*#\n*~\n/build\n/code\n.classpath\n.project\n.settings\n.metadata\n.factorypath\n.recommenders\nbin\nbuild\ntarget\n.factorypath\n.springbeans\ninterpolated*.xml\ndependency-reduced-pom.xml\nbuild.log\n_site/\n.*.md.html\nmanifest.yml\nmanifest.mf\nsettings.xml\nactivemq-data\noverridedb.*\n*.iml\n*.ipr\n*.iws\n.idea\n.ds_store\n.factorypath\ndump.rdb\ntransaction-logs\n**/overlays/\n**/logs/\n**/temp/\n**/classes/\n\n\n * å³é®å¼åºèåï¼éæ©âæäº¤ master...â\n\n\n\n * ç¹å»âå¨é¨âå¹¶å¡«å¥âæ¥å¿ä¿¡æ¯â\n\n\n\n * ç¹å»âæäº¤å¹¶æ¨éâ\n\n\n\n * æååçææå¾\n\n\n\n\n# æ¥ç gitlab ç¡®è®¤æäº¤æå\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:08:14",lastUpdatedTimestamp:1644376094e3},{title:"GitLab ä½¿ç¨ SSH åå¯ç»å½",frontmatter:{title:"GitLab ä½¿ç¨ SSH åå¯ç»å½",date:"2022-02-09T11:03:58.000Z",permalink:"/pages/2b230d/"},regularPath:"/06.GitLab/01.GitLab/11.GitLab%20%E4%BD%BF%E7%94%A8%20SSH%20%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html",relativePath:"06.GitLab/01.GitLab/11.GitLab ä½¿ç¨ SSH åå¯ç»å½.md",key:"v-220226bd",path:"/pages/2b230d/",headers:[{level:2,title:"å¾å®å",slug:"å¾å®å",normalizedTitle:"å¾å®å",charIndex:25}],headersStr:"å¾å®å",content:"# GitLab ä½¿ç¨ SSH åå¯ç»å½\n\n\n# å¾å®å",normalizedContent:"# gitlab ä½¿ç¨ ssh åå¯ç»å½\n\n\n# å¾å®å",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:08:14",lastUpdatedTimestamp:1644376094e3},{title:"ä»ä¹æ¯ Nexus",frontmatter:{title:"ä»ä¹æ¯ Nexus",date:"2022-02-09T11:09:28.000Z",permalink:"/pages/ceff17/"},regularPath:"/07.Nexus/01.Nexus/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Nexus.html",relativePath:"07.Nexus/01.Nexus/01.ä»ä¹æ¯ Nexus.md",key:"v-d809a770",path:"/pages/ceff17/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:16}],headersStr:"æ¦è¿°",content:"# ä»ä¹æ¯ Nexus\n\n\n# æ¦è¿°\n\nNexus æ¯ä¸ä¸ªå¼ºå¤§çä»åºç®¡çå¨ï¼æå¤§å°ç®åäºåé¨ä»åºçç»´æ¤åå¤é¨ä»åºçè®¿é®ã\n\n2016 å¹´ 4 æ 6 æ¥ Nexus 3.0 çæ¬åå¸ï¼ç¸è¾ 2.x çæ¬æäºå¾å¤§çæ¹åï¼\n\n * å¯¹ä½å±ä»£ç è¿è¡äºå¤§è§æ¨¡éæï¼æåæ§è½ï¼å¢å å¯æ©å±æ§ä»¥åæ¹åç¨æ·ä½éªã\n * åçº§çé¢ï¼æå¤§çç®åäºç¨æ·çé¢çæä½åç®¡çã\n * æä¾æ°çå®è£åï¼è®©é¨ç½²æ´å ç®åã\n * å¢å å¯¹ Docker, NeGet, npm, Bower çæ¯æã\n * æä¾æ°çç®¡çæ¥å£ï¼ä»¥åå¢å¼ºå¯¹èªå¨ä»»å¡çç®¡çã",normalizedContent:"# ä»ä¹æ¯ nexus\n\n\n# æ¦è¿°\n\nnexus æ¯ä¸ä¸ªå¼ºå¤§çä»åºç®¡çå¨ï¼æå¤§å°ç®åäºåé¨ä»åºçç»´æ¤åå¤é¨ä»åºçè®¿é®ã\n\n2016 å¹´ 4 æ 6 æ¥ nexus 3.0 çæ¬åå¸ï¼ç¸è¾ 2.x çæ¬æäºå¾å¤§çæ¹åï¼\n\n * å¯¹ä½å±ä»£ç è¿è¡äºå¤§è§æ¨¡éæï¼æåæ§è½ï¼å¢å å¯æ©å±æ§ä»¥åæ¹åç¨æ·ä½éªã\n * åçº§çé¢ï¼æå¤§çç®åäºç¨æ·çé¢çæä½åç®¡çã\n * æä¾æ°çå®è£åï¼è®©é¨ç½²æ´å ç®åã\n * å¢å å¯¹ docker, neget, npm, bower çæ¯æã\n * æä¾æ°çç®¡çæ¥å£ï¼ä»¥åå¢å¼ºå¯¹èªå¨ä»»å¡çç®¡çã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:13:40",lastUpdatedTimestamp:164437642e4},{title:"åºäº Docker å®è£ Nexus",frontmatter:{title:"åºäº Docker å®è£ Nexus",date:"2022-02-09T11:09:28.000Z",permalink:"/pages/dc57a4/"},regularPath:"/07.Nexus/01.Nexus/02.%E5%9F%BA%E4%BA%8E%20Docker%20%E5%AE%89%E8%A3%85%20Nexus.html",relativePath:"07.Nexus/01.Nexus/02.åºäº Docker å®è£ Nexus.md",key:"v-e3e7063c",path:"/pages/dc57a4/",headers:[{level:2,title:"ç³»ç»éæ±",slug:"ç³»ç»éæ±",normalizedTitle:"ç³»ç»éæ±",charIndex:25},{level:3,title:"CPU",slug:"cpu",normalizedTitle:"cpu",charIndex:34},{level:3,title:"åå­",slug:"åå­",normalizedTitle:"åå­",charIndex:144},{level:2,title:"çæ¬è¯´æ",slug:"çæ¬è¯´æ",normalizedTitle:"çæ¬è¯´æ",charIndex:170},{level:2,title:"ä½¿ç¨ Docker å®è£ Nexus",slug:"ä½¿ç¨-docker-å®è£-nexus",normalizedTitle:"ä½¿ç¨ docker å®è£ nexus",charIndex:288},{level:3,title:"æ¹æ³ä¸ ä½¿ç¨docker æ°æ®å·æ¹å¼",slug:"æ¹æ³ä¸-ä½¿ç¨docker-æ°æ®å·æ¹å¼",normalizedTitle:"æ¹æ³ä¸ ä½¿ç¨docker æ°æ®å·æ¹å¼",charIndex:365},{level:3,title:"æ¹æ³äº ä½¿ç¨æè½½ä¸»æºç®å½æ¹å¼",slug:"æ¹æ³äº-ä½¿ç¨æè½½ä¸»æºç®å½æ¹å¼",normalizedTitle:"æ¹æ³äº ä½¿ç¨æè½½ä¸»æºç®å½æ¹å¼",charIndex:843},{level:2,title:"å¯å¨æå¡",slug:"å¯å¨æå¡",normalizedTitle:"å¯å¨æå¡",charIndex:1366},{level:2,title:"æ¥çæ¥å¿",slug:"æ¥çæ¥å¿",normalizedTitle:"æ¥çæ¥å¿",charIndex:1454},{level:2,title:"ç»å½æ§å¶å°éªè¯å®è£",slug:"ç»å½æ§å¶å°éªè¯å®è£",normalizedTitle:"ç»å½æ§å¶å°éªè¯å®è£",charIndex:1494},{level:2,title:"è·åç®¡çåå¯ç ",slug:"è·åç®¡çåå¯ç ",normalizedTitle:"è·åç®¡çåå¯ç ",charIndex:1574},{level:2,title:"ç»å½Nexusæ§å¶å°",slug:"ç»å½nexusæ§å¶å°",normalizedTitle:"ç»å½nexusæ§å¶å°",charIndex:1742},{level:2,title:"å é¤ Nexus",slug:"å é¤-nexus",normalizedTitle:"å é¤ nexus",charIndex:1842},{level:2,title:"Nginx ååä»£ç Nexus",slug:"nginx-ååä»£ç-nexus",normalizedTitle:"nginx ååä»£ç nexus",charIndex:1950}],headersStr:"ç³»ç»éæ± CPU åå­ çæ¬è¯´æ ä½¿ç¨ Docker å®è£ Nexus æ¹æ³ä¸ ä½¿ç¨docker æ°æ®å·æ¹å¼ æ¹æ³äº ä½¿ç¨æè½½ä¸»æºç®å½æ¹å¼ å¯å¨æå¡ æ¥çæ¥å¿ ç»å½æ§å¶å°éªè¯å®è£ è·åç®¡çåå¯ç  ç»å½Nexusæ§å¶å° å é¤ Nexus Nginx ååä»£ç Nexus",content:'# åºäº Docker å®è£ Nexus\n\n\n# ç³»ç»éæ±\n\n\n# CPU\n\næ§è½ä¸»è¦å I/O (ç£çåç½ç»)èä¸æ¯ CPU çéå¶ã å¯ç¨ç cpu ä¼å½±åè¾é¿æ¶é´è¿è¡çæä½ï¼ä¹ä¼å½±å web å®¹å¨ççº¿ç¨åéç®æ³ã\n\n * æå° CPUs: 4\n * æ¨è CPUs: 8+\n\n\n# åå­\n\n * æå° 4GB\n * å®æ¹èµæ\n\n\n# çæ¬è¯´æ\n\nSonatype Nexus Repository Manager 3ç Dockerfileï¼ä»3.18å¼å§ï¼è¿ä¸ªæ ååºäº Red Hat Universal Base Imageï¼èæ©æçæ¬ä½¿ç¨ CentOSã\n\n\n# ä½¿ç¨ Docker å®è£ Nexus\n\næä»¬ä½¿ç¨ Docker æ¥å®è£åè¿è¡ Nexusï¼ä½¿ç¨ Docker å¤çæä¹æ§å­å¨éæ±éå¸¸æä¸¤ç§æ¹æ³ã\n\n\n# æ¹æ³ä¸ ä½¿ç¨docker æ°æ®å·æ¹å¼\n\nä½¿ç¨docker æ°æ®å·æ¹å¼docker-compose.yml éç½®å¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\nÂ \n\n\nversion: "3.7"\nservices:\n\n  nexus:\n    restart: always\n    image: sonatype/nexus3\n    container_name: nexus\n    environment:\n      NEXUS_CONTEXT: nexus\n    ports:\n      - "8081:8081"\n    volumes:\n      - nexus-data:/nexus-data\n\nvolumes:\n  nexus-data:\n\n\n * nexus é»è®¤å¯¹å¤æ´é²ç«¯å£8081.\n * ä½¿ç¨ç¯å¢åéèªå®ä¹ Nexus çä¸ä¸æè·¯å¾NEXUS_CONTEXTï¼å¯é é»è®¤ï¼/ã\n * æä¹ç®å½ /nexus-data ç¨äºéç½®ãæ¥å¿åå­å¨ãNexus è¿ç¨éè¦å¯¹è¿ä¸ªç®å½è¿è¡åæä½ï¼å®ä»¥ UID 200çå½¢å¼è¿è¡ã\n\n\n# æ¹æ³äº ä½¿ç¨æè½½ä¸»æºç®å½æ¹å¼\n\nå°ä¸»æºç®å½æè½½ä¸ºå·ã è¿æ¯ä¸å¯ç§»æ¤çï¼å ä¸ºå®ä¾èµäºå¯¹ä¸»æºå·ææ­£ç¡®æéçç°æç®å½ã ä½æ¯ï¼å¨æäºæåµä¸ï¼å¦æéè¦å°è¯¥å·åéç»æäºç¹å®çåºå±å­å¨ï¼é£ä¹å®ä¼å¾æç¨ã\n\n1.åå»ºæ°æ®å·ç®å½ï¼å¹¶ä¿®æ¹ç®å½æéã\n\nmkdir /usr/local/docker/nexus/nexus-data && chown -R 200 /usr/local/docker/nexus/nexus-data\n\n\n2.ä½¿ç¨docker æè½½ä¸»æºç®å½æ¹å¼docker-compose.yml éç½®å¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\nversion: "3.7"\nservices:\n\n  nexus:\n    restart: always\n    image: sonatype/nexus3\n    container_name: nexus\n    environment:\n      NEXUS_CONTEXT: nexus\n    ports:\n      - "8081:8081"\n    volumes:\n      - /usr/local/docker/nexus/data:/nexus-data\n\n\n\n# å¯å¨æå¡\n\ndocker-compose up -d\n\n\nå¨ä¸ä¸ªæ°çå®¹å¨ä¸­å¯å¨æå¡å¯è½éè¦ä¸äºæ¶é´(2-3åé)ãä½ å¯ä»¥éè¿è·è¸ªæ¥å¿æ¥ç¡®å® Nexus æ¯å¦åå¤å¥½äºã\n\n\n# æ¥çæ¥å¿\n\ndocker-compose logs -f nexus\n\n\n\n# ç»å½æ§å¶å°éªè¯å®è£\n\n * æµè§å¨è®¿é®å°åï¼http://ivoov.com:8081/nexusï¼çå°å¦ä¸é¡µé¢è¯´æ Nexus æå¡å¯å¨æåäºã\n\n\n\n\n# è·åç®¡çåå¯ç \n\né»è®¤ç¨æ·æ¯ adminï¼çæçå¯ç å¯ä»¥å¨å·ä¸­ç admin.password æä»¶ä¸­æ¾å°ã\n\ncat /var/lib/docker/volumes/nexus_nexus-data/_data/admin.password\n\n\nä¾å¦ï¼23896e46-96bf-4b7f-8332-1bd45e32bea5\n\n\n# ç»å½Nexusæ§å¶å°\n\né¦æ¬¡ç»å½nexusæ§å¶å°ï¼ç®¡çç¨æ·æ¯adminï¼å¯ç è¾å¥ä¸ä¸æ­¥admin.passwordä¸­è·åçåå§å¯ç ã\n\n\n\nè¿å¥ç³»ç»åï¼æ ¹æ®ç³»ç»æç¤ºéæ°è®¾ç½®ç®¡çå¯ç å³å¯ã\n\n\n\n\n# å é¤ Nexus\n\nè¿å¥docker-compose.ymlæä»¶æå¨ç®å½ï¼æ§è¡å¦ä¸å½ä»¤ï¼\n\ndocker-compose down --volume\n\n\n * åæ°--volumeå¯éï¼æå®æ¯å¦å é¤æ°æ®å·ã\n\n\n# Nginx ååä»£ç Nexus\n\nNginx ååä»£ç nexus çæå¡, ä¸ç´å¡å¨ Initialize...\n\nè§£å³æ¹å¼æ¯æ·»å ä¸ä¸ª header X-Forwarded-Proto:\n\nproxy_set_header X-Forwarded-Proto "https";\n\n\nnexus.conf\n\nupstream nexus-server{\n    server 127.0.0.1:8081;\n}\n\nserver {\n    listen 80;\n    server_name xx.xx;\n    location / {\n        return 301 https://xx.xx;\n    }\n\n    location ~ /.well-known {\n        root /tmp;\n    }\n}\n\nserver {\n    listen 443 ssl;\n    server_name xx.xx;\n\n    ssl_certificate cert/xx.pem;\n    ssl_certificate_key cert/xx.key;\n\n    location / {\n        proxy_set_header Host $host;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-Proto "https";\n        proxy_pass http://nexus-server;\n    }\n}\n',normalizedContent:'# åºäº docker å®è£ nexus\n\n\n# ç³»ç»éæ±\n\n\n# cpu\n\næ§è½ä¸»è¦å i/o (ç£çåç½ç»)èä¸æ¯ cpu çéå¶ã å¯ç¨ç cpu ä¼å½±åè¾é¿æ¶é´è¿è¡çæä½ï¼ä¹ä¼å½±å web å®¹å¨ççº¿ç¨åéç®æ³ã\n\n * æå° cpus: 4\n * æ¨è cpus: 8+\n\n\n# åå­\n\n * æå° 4gb\n * å®æ¹èµæ\n\n\n# çæ¬è¯´æ\n\nsonatype nexus repository manager 3ç dockerfileï¼ä»3.18å¼å§ï¼è¿ä¸ªæ ååºäº red hat universal base imageï¼èæ©æçæ¬ä½¿ç¨ centosã\n\n\n# ä½¿ç¨ docker å®è£ nexus\n\næä»¬ä½¿ç¨ docker æ¥å®è£åè¿è¡ nexusï¼ä½¿ç¨ docker å¤çæä¹æ§å­å¨éæ±éå¸¸æä¸¤ç§æ¹æ³ã\n\n\n# æ¹æ³ä¸ ä½¿ç¨docker æ°æ®å·æ¹å¼\n\nä½¿ç¨docker æ°æ®å·æ¹å¼docker-compose.yml éç½®å¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\nÂ \n\n\nversion: "3.7"\nservices:\n\n  nexus:\n    restart: always\n    image: sonatype/nexus3\n    container_name: nexus\n    environment:\n      nexus_context: nexus\n    ports:\n      - "8081:8081"\n    volumes:\n      - nexus-data:/nexus-data\n\nvolumes:\n  nexus-data:\n\n\n * nexus é»è®¤å¯¹å¤æ´é²ç«¯å£8081.\n * ä½¿ç¨ç¯å¢åéèªå®ä¹ nexus çä¸ä¸æè·¯å¾nexus_contextï¼å¯é é»è®¤ï¼/ã\n * æä¹ç®å½ /nexus-data ç¨äºéç½®ãæ¥å¿åå­å¨ãnexus è¿ç¨éè¦å¯¹è¿ä¸ªç®å½è¿è¡åæä½ï¼å®ä»¥ uid 200çå½¢å¼è¿è¡ã\n\n\n# æ¹æ³äº ä½¿ç¨æè½½ä¸»æºç®å½æ¹å¼\n\nå°ä¸»æºç®å½æè½½ä¸ºå·ã è¿æ¯ä¸å¯ç§»æ¤çï¼å ä¸ºå®ä¾èµäºå¯¹ä¸»æºå·ææ­£ç¡®æéçç°æç®å½ã ä½æ¯ï¼å¨æäºæåµä¸ï¼å¦æéè¦å°è¯¥å·åéç»æäºç¹å®çåºå±å­å¨ï¼é£ä¹å®ä¼å¾æç¨ã\n\n1.åå»ºæ°æ®å·ç®å½ï¼å¹¶ä¿®æ¹ç®å½æéã\n\nmkdir /usr/local/docker/nexus/nexus-data && chown -r 200 /usr/local/docker/nexus/nexus-data\n\n\n2.ä½¿ç¨docker æè½½ä¸»æºç®å½æ¹å¼docker-compose.yml éç½®å¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\nversion: "3.7"\nservices:\n\n  nexus:\n    restart: always\n    image: sonatype/nexus3\n    container_name: nexus\n    environment:\n      nexus_context: nexus\n    ports:\n      - "8081:8081"\n    volumes:\n      - /usr/local/docker/nexus/data:/nexus-data\n\n\n\n# å¯å¨æå¡\n\ndocker-compose up -d\n\n\nå¨ä¸ä¸ªæ°çå®¹å¨ä¸­å¯å¨æå¡å¯è½éè¦ä¸äºæ¶é´(2-3åé)ãä½ å¯ä»¥éè¿è·è¸ªæ¥å¿æ¥ç¡®å® nexus æ¯å¦åå¤å¥½äºã\n\n\n# æ¥çæ¥å¿\n\ndocker-compose logs -f nexus\n\n\n\n# ç»å½æ§å¶å°éªè¯å®è£\n\n * æµè§å¨è®¿é®å°åï¼http://ivoov.com:8081/nexusï¼çå°å¦ä¸é¡µé¢è¯´æ nexus æå¡å¯å¨æåäºã\n\n\n\n\n# è·åç®¡çåå¯ç \n\né»è®¤ç¨æ·æ¯ adminï¼çæçå¯ç å¯ä»¥å¨å·ä¸­ç admin.password æä»¶ä¸­æ¾å°ã\n\ncat /var/lib/docker/volumes/nexus_nexus-data/_data/admin.password\n\n\nä¾å¦ï¼23896e46-96bf-4b7f-8332-1bd45e32bea5\n\n\n# ç»å½nexusæ§å¶å°\n\né¦æ¬¡ç»å½nexusæ§å¶å°ï¼ç®¡çç¨æ·æ¯adminï¼å¯ç è¾å¥ä¸ä¸æ­¥admin.passwordä¸­è·åçåå§å¯ç ã\n\n\n\nè¿å¥ç³»ç»åï¼æ ¹æ®ç³»ç»æç¤ºéæ°è®¾ç½®ç®¡çå¯ç å³å¯ã\n\n\n\n\n# å é¤ nexus\n\nè¿å¥docker-compose.ymlæä»¶æå¨ç®å½ï¼æ§è¡å¦ä¸å½ä»¤ï¼\n\ndocker-compose down --volume\n\n\n * åæ°--volumeå¯éï¼æå®æ¯å¦å é¤æ°æ®å·ã\n\n\n# nginx ååä»£ç nexus\n\nnginx ååä»£ç nexus çæå¡, ä¸ç´å¡å¨ initialize...\n\nè§£å³æ¹å¼æ¯æ·»å ä¸ä¸ª header x-forwarded-proto:\n\nproxy_set_header x-forwarded-proto "https";\n\n\nnexus.conf\n\nupstream nexus-server{\n    server 127.0.0.1:8081;\n}\n\nserver {\n    listen 80;\n    server_name xx.xx;\n    location / {\n        return 301 https://xx.xx;\n    }\n\n    location ~ /.well-known {\n        root /tmp;\n    }\n}\n\nserver {\n    listen 443 ssl;\n    server_name xx.xx;\n\n    ssl_certificate cert/xx.pem;\n    ssl_certificate_key cert/xx.key;\n\n    location / {\n        proxy_set_header host $host;\n        proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;\n        proxy_set_header x-real-ip $remote_addr;\n        proxy_set_header x-forwarded-proto "https";\n        proxy_pass http://nexus-server;\n    }\n}\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Nexuséç½®é¿éäºä»£çä»åº",frontmatter:{title:"Nexuséç½®é¿éäºä»£çä»åº",date:"2022-02-09T11:09:28.000Z",permalink:"/pages/159c7d/"},regularPath:"/07.Nexus/01.Nexus/03.Nexus%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E4%BB%A3%E7%90%86%E4%BB%93%E5%BA%93.html",relativePath:"07.Nexus/01.Nexus/03.Nexuséç½®é¿éäºä»£çä»åº.md",key:"v-704eb51c",path:"/pages/159c7d/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:21},{level:2,title:"æ·»å é¿éäºä»£çä»åº",slug:"æ·»å é¿éäºä»£çä»åº",normalizedTitle:"æ·»å é¿éäºä»£çä»åº",charIndex:110},{level:2,title:"éç½®public-repository",slug:"éç½®public-repository",normalizedTitle:"éç½®public-repository",charIndex:344}],headersStr:"æ¦è¿° æ·»å é¿éäºä»£çä»åº éç½®public-repository",content:"# Nexuséç½®é¿éäºä»£çä»åº\n\n\n# æ¦è¿°\n\nNexusé»è®¤è¿ç¨ä»åºä¸ºhttps://repo1.maven.org/maven2/ï¼å½åè®¿é®éåº¦æ¢æ­»ï¼è¿å¸¸è¿ä¸ä¸ãè®¾ç½®é¿éäºä»£çä»åºå¯å éè®¿é®éåº¦ã\n\n\n\n\n\n\n# æ·»å é¿éäºä»£çä»åº\n\nåå»ºä»åº\n\n\n\néæ©maven2 (proxy)\n\n\n\nä»åºè®¾ç½®\n\n * Name: maven-aliyun\n * Remote storage: https://maven.aliyun.com/repository/public/\n\n\n\n> é¿éäºå·²ç»æ´æ°äºä»åºå°åï¼å¾çä¸ä¸ºæ§çæ¬\n\nå¶ä»é»è®¤ï¼ç¿»å°æä¸é¢ï¼ç¹create repositoryä¿å­\n\nä»åºç¶ææ¾ç¤ºOnline - Remote Availableè¡¨ç¤ºéç½®æå\n\n\n\n\n# éç½®public-repository\n\n\n\nç¹å»maven-aliyunï¼åç¹å»>æé®\n\nè®¾ç½®Nexusè·åä¾èµçä¼åé¡ºåºãå¦ä¸å¾ï¼ä¼åå»é¿éäºçMaven\n\nè³æ­¤ï¼Nexuséç½®é¿éäºä»£çä»åºå®æã",normalizedContent:"# nexuséç½®é¿éäºä»£çä»åº\n\n\n# æ¦è¿°\n\nnexusé»è®¤è¿ç¨ä»åºä¸ºhttps://repo1.maven.org/maven2/ï¼å½åè®¿é®éåº¦æ¢æ­»ï¼è¿å¸¸è¿ä¸ä¸ãè®¾ç½®é¿éäºä»£çä»åºå¯å éè®¿é®éåº¦ã\n\n\n\n\n\n\n# æ·»å é¿éäºä»£çä»åº\n\nåå»ºä»åº\n\n\n\néæ©maven2 (proxy)\n\n\n\nä»åºè®¾ç½®\n\n * name: maven-aliyun\n * remote storage: https://maven.aliyun.com/repository/public/\n\n\n\n> é¿éäºå·²ç»æ´æ°äºä»åºå°åï¼å¾çä¸ä¸ºæ§çæ¬\n\nå¶ä»é»è®¤ï¼ç¿»å°æä¸é¢ï¼ç¹create repositoryä¿å­\n\nä»åºç¶ææ¾ç¤ºonline - remote availableè¡¨ç¤ºéç½®æå\n\n\n\n\n# éç½®public-repository\n\n\n\nç¹å»maven-aliyunï¼åç¹å»>æé®\n\nè®¾ç½®nexusè·åä¾èµçä¼åé¡ºåºãå¦ä¸å¾ï¼ä¼åå»é¿éäºçmaven\n\nè³æ­¤ï¼nexuséç½®é¿éäºä»£çä»åºå®æã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Maven ä»åºä»ç»",frontmatter:{title:"Maven ä»åºä»ç»",date:"2022-02-09T11:09:28.000Z",permalink:"/pages/ee14ce/"},regularPath:"/07.Nexus/01.Nexus/04.Maven%20%E4%BB%93%E5%BA%93%E4%BB%8B%E7%BB%8D.html",relativePath:"07.Nexus/01.Nexus/04.Maven ä»åºä»ç».md",key:"v-48944d5a",path:"/pages/ee14ce/",headers:[{level:2,title:"ä»£çä»åºï¼Proxy Repositoryï¼",slug:"ä»£çä»åº-proxy-repository",normalizedTitle:"ä»£çä»åºï¼proxy repositoryï¼",charIndex:17},{level:2,title:"å®¿ä¸»ä»åºï¼Hosted Repositoryï¼",slug:"å®¿ä¸»ä»åº-hosted-repository",normalizedTitle:"å®¿ä¸»ä»åºï¼hosted repositoryï¼",charIndex:220},{level:2,title:"ä»åºç»ï¼Repository Groupï¼",slug:"ä»åºç»-repository-group",normalizedTitle:"ä»åºç»ï¼repository groupï¼",charIndex:415}],headersStr:"ä»£çä»åºï¼Proxy Repositoryï¼ å®¿ä¸»ä»åºï¼Hosted Repositoryï¼ ä»åºç»ï¼Repository Groupï¼",content:"# Maven ä»åºä»ç»\n\n\n# ä»£çä»åºï¼Proxy Repositoryï¼\n\næä¸ºç¬¬ä¸æ¹ä»åºï¼å¦ï¼\n\n * maven-central\n * nuget.org-proxy\n\nçæ¬ç­ç¥ï¼Version Policyï¼ï¼\n\n * Release: æ­£å¼çæ¬\n * Snapshot: å¿«ç§çæ¬\n * Mixed: æ··åæ¨¡å¼\n\nå¸å±ç­ç¥ï¼Layout Policyï¼ï¼\n\n * Strictï¼ä¸¥æ ¼\n * Permissiveï¼å®½æ¾\n\n\n# å®¿ä¸»ä»åºï¼Hosted Repositoryï¼\n\nå­å¨æ¬å°ä¸ä¼ çç»ä»¶åèµæºçï¼å¦ï¼\n\n * maven-releases\n * maven-snapshots\n * nuget-hosted\n\né¨ç½²ç­ç¥ï¼Deployment Policyï¼ï¼\n\n * Allow Redeployï¼åè®¸éæ°é¨ç½²\n * Disable Redeployï¼ç¦æ­¢éæ°é¨ç½²\n * Read-Onlyï¼åªè¯»\n\n\n# ä»åºç»ï¼Repository Groupï¼\n\néå¸¸åå«äºå¤ä¸ªä»£çä»åºåå®¿ä¸»ä»åºï¼å¨é¡¹ç®ä¸­åªè¦å¼å¥ä»åºç»å°±å¯ä»¥ä¸è½½å°ä»£çä»åºåå®¿ä¸»ä»åºä¸­çåï¼å¦ï¼\n\n * maven-public\n * nuget-group",normalizedContent:"# maven ä»åºä»ç»\n\n\n# ä»£çä»åºï¼proxy repositoryï¼\n\næä¸ºç¬¬ä¸æ¹ä»åºï¼å¦ï¼\n\n * maven-central\n * nuget.org-proxy\n\nçæ¬ç­ç¥ï¼version policyï¼ï¼\n\n * release: æ­£å¼çæ¬\n * snapshot: å¿«ç§çæ¬\n * mixed: æ··åæ¨¡å¼\n\nå¸å±ç­ç¥ï¼layout policyï¼ï¼\n\n * strictï¼ä¸¥æ ¼\n * permissiveï¼å®½æ¾\n\n\n# å®¿ä¸»ä»åºï¼hosted repositoryï¼\n\nå­å¨æ¬å°ä¸ä¼ çç»ä»¶åèµæºçï¼å¦ï¼\n\n * maven-releases\n * maven-snapshots\n * nuget-hosted\n\né¨ç½²ç­ç¥ï¼deployment policyï¼ï¼\n\n * allow redeployï¼åè®¸éæ°é¨ç½²\n * disable redeployï¼ç¦æ­¢éæ°é¨ç½²\n * read-onlyï¼åªè¯»\n\n\n# ä»åºç»ï¼repository groupï¼\n\néå¸¸åå«äºå¤ä¸ªä»£çä»åºåå®¿ä¸»ä»åºï¼å¨é¡¹ç®ä¸­åªè¦å¼å¥ä»åºç»å°±å¯ä»¥ä¸è½½å°ä»£çä»åºåå®¿ä¸»ä»åºä¸­çåï¼å¦ï¼\n\n * maven-public\n * nuget-group",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:13:40",lastUpdatedTimestamp:164437642e4},{title:"å¨é¡¹ç®ä¸­ä½¿ç¨ Maven ç§æ",frontmatter:{title:"å¨é¡¹ç®ä¸­ä½¿ç¨ Maven ç§æ",date:"2022-02-09T11:09:28.000Z",permalink:"/pages/433dea/"},regularPath:"/07.Nexus/01.Nexus/05.%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8%20Maven%20%E7%A7%81%E6%9C%8D.html",relativePath:"07.Nexus/01.Nexus/05.å¨é¡¹ç®ä¸­ä½¿ç¨ Maven ç§æ.md",key:"v-695dfcb6",path:"/pages/433dea/",headers:[{level:2,title:"éç½®è®¤è¯ä¿¡æ¯",slug:"éç½®è®¤è¯ä¿¡æ¯",normalizedTitle:"éç½®è®¤è¯ä¿¡æ¯",charIndex:22},{level:3,title:"Snapshots ä¸ Releases çåºå«",slug:"snapshots-ä¸-releases-çåºå«",normalizedTitle:"snapshots ä¸ releases çåºå«",charIndex:183},{level:2,title:"éç½®èªå¨åé¨ç½²",slug:"éç½®èªå¨åé¨ç½²",normalizedTitle:"éç½®èªå¨åé¨ç½²",charIndex:551},{level:2,title:"é¨ç½²å°ä»åº",slug:"é¨ç½²å°ä»åº",normalizedTitle:"é¨ç½²å°ä»åº",charIndex:1164},{level:2,title:"ä¸ä¼ ç¬¬ä¸æ¹ JAR å",slug:"ä¸ä¼ ç¬¬ä¸æ¹-jar-å",normalizedTitle:"ä¸ä¼ ç¬¬ä¸æ¹ jar å",charIndex:1187},{level:2,title:"settings.xml",slug:"settings-xml",normalizedTitle:"settings.xml",charIndex:38}],headersStr:"éç½®è®¤è¯ä¿¡æ¯ Snapshots ä¸ Releases çåºå« éç½®èªå¨åé¨ç½² é¨ç½²å°ä»åº ä¸ä¼ ç¬¬ä¸æ¹ JAR å settings.xml",content:'# å¨é¡¹ç®ä¸­ä½¿ç¨ Maven ç§æ\n\n\n# éç½®è®¤è¯ä¿¡æ¯\n\nå¨ Maven settings.xml ä¸­æ·»å  Nexus è®¤è¯ä¿¡æ¯(servers èç¹ä¸)ï¼\n\n<server>\n  <id>nexus</id>\n  <username>admin</username>\n  <password>admin123</password>\n</server>\n\n\n\n# Snapshots ä¸ Releases çåºå«\n\n * nexus-releases: ç¨äºåå¸ Release çæ¬\n * nexus-snapshots: ç¨äºåå¸ Snapshot çæ¬ï¼å¿«ç§çï¼\n\nRelease çæ¬ä¸ Snapshot å®ä¹å¦ä¸ï¼\n\nRelease: 1.0.0/1.0.0-RELEASE\nSnapshot: 1.0.0-SNAPSHOT\n\n\n * å¨é¡¹ç® pom.xml ä¸­è®¾ç½®ççæ¬å·æ·»å  SNAPSHOT æ è¯çé½ä¼åå¸ä¸º SNAPSHOT çæ¬ï¼æ²¡æ SNAPSHOT æ è¯çé½ä¼åå¸ä¸º RELEASE çæ¬ã\n * SNAPSHOT çæ¬ä¼èªå¨å ä¸ä¸ªæ¶é´ä½ä¸ºæ è¯ï¼å¦ï¼1.0.0-SNAPSHOT åå¸åä¸ºåæ 1.0.0-SNAPSHOT-20180522.123456-1.jar\n\n\n# éç½®èªå¨åé¨ç½²\n\nå¨ pom.xml ä¸­æ·»å å¦ä¸ä»£ç ï¼\n\n<distributionManagement>  \n  <repository>  \n    <id>nexus</id>  \n    <name>Nexus Release Repository</name>  \n    <url>http://192.168.199.110:8081/repository/maven-releases/</url>  \n  </repository>  \n  <snapshotRepository>  \n    <id>nexus</id>  \n    <name>Nexus Snapshot Repository</name>  \n    <url>http://192.168.199.110:8081/repository/maven-snapshots/</url>  \n  </snapshotRepository>  \n</distributionManagement> \n\n\næ³¨æäºé¡¹ï¼\n\n * ID åç§°å¿é¡»è¦ä¸ settings.xml ä¸­ Servers éç½®ç ID åç§°ä¿æä¸è´ã\n * é¡¹ç®çæ¬å·ä¸­æ SNAPSHOT æ è¯çï¼ä¼åå¸å° Nexus Snapshots Repository, å¦ååå¸å° Nexus Release Repositoryï¼å¹¶æ ¹æ® ID å»å¹éææè´¦å·ã\n\n\n# é¨ç½²å°ä»åº\n\nmvn deploy\n\n\n\n# ä¸ä¼ ç¬¬ä¸æ¹ JAR å\n\nnexusæ§å¶å°æä¾ä¸ä¼ åè½ï¼ä¹å¯ä»¥ä½¿ç¨ maven å½ä»¤ï¼\n\n# å¦ç¬¬ä¸æ¹JARåï¼aliyun-sdk-oss-2.2.3.jar\nmvn deploy:deploy-file \n  -DgroupId=com.aliyun.oss \n  -DartifactId=aliyun-sdk-oss \n  -Dversion=2.2.3 \n  -Dpackaging=jar \n  -Dfile=D:\\aliyun-sdk-oss-2.2.3.jar \n  -Durl=http://192.168.199.110:8081/repository/maven-3rd/ \n  -DrepositoryId=nexus\n\n\næ³¨æäºé¡¹ï¼\n\n * å»ºè®®å¨ä¸ä¼ ç¬¬ä¸æ¹ JAR åæ¶ï¼åå»ºåç¬çç¬¬ä¸æ¹ JAR åç®¡çä»åºï¼ä¾¿äºç®¡çæç»´æ¤ãï¼maven-3rdï¼\n * -DrepositoryId=nexus å¯¹åºçæ¯ settings.xml ä¸­ Servers éç½®ç ID åç§°ãï¼ææï¼\n\n\n# settings.xml\n\n<?xml version="1.0" encoding="UTF-8"?>\n<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"\n          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">\n    \n    <servers>\n        <server>\n            <id>nexus</id>\n            <username>admin</username>\n            <password>heyuqiang</password>\n        </server>\n    </servers>\n    <mirrors>\n        <mirror>\n            \x3c!--This sends everything else to /public --\x3e\n            <id>nexus</id>\n            <mirrorOf>*</mirrorOf>\n            <url>http://192.168.199.110:8081/repository/maven-public/</url>\n        </mirror>\n    </mirrors>\n\n    <profiles>\n        <profile>\n            <id>nexus</id>\n            \x3c!--Enable snapshots for the built in central repo to direct --\x3e\n            \x3c!--all requests to nexus via the mirror --\x3e\n            <repositories>\n                <repository>\n                    <id>central</id>\n                    <url>http://central</url>\n                    <releases>\n                        <enabled>true</enabled>\n                    </releases>\n                    <snapshots>\n                        <enabled>true</enabled>\n                    </snapshots>\n                </repository>\n            </repositories>\n            <pluginRepositories>\n                <pluginRepository>\n                    <id>central</id>\n                    <url>http://central</url>\n                    <releases>\n                        <enabled>true</enabled>\n                    </releases>\n                    <snapshots>\n                        <enabled>true</enabled>\n                    </snapshots>\n                </pluginRepository>\n            </pluginRepositories>\n        </profile>\n    </profiles>\n    <activeProfiles>\n        \x3c!--make the profile active all the time --\x3e\n        <activeProfile>nexus</activeProfile>\n    </activeProfiles>\n</settings>\n\n',normalizedContent:'# å¨é¡¹ç®ä¸­ä½¿ç¨ maven ç§æ\n\n\n# éç½®è®¤è¯ä¿¡æ¯\n\nå¨ maven settings.xml ä¸­æ·»å  nexus è®¤è¯ä¿¡æ¯(servers èç¹ä¸)ï¼\n\n<server>\n  <id>nexus</id>\n  <username>admin</username>\n  <password>admin123</password>\n</server>\n\n\n\n# snapshots ä¸ releases çåºå«\n\n * nexus-releases: ç¨äºåå¸ release çæ¬\n * nexus-snapshots: ç¨äºåå¸ snapshot çæ¬ï¼å¿«ç§çï¼\n\nrelease çæ¬ä¸ snapshot å®ä¹å¦ä¸ï¼\n\nrelease: 1.0.0/1.0.0-release\nsnapshot: 1.0.0-snapshot\n\n\n * å¨é¡¹ç® pom.xml ä¸­è®¾ç½®ççæ¬å·æ·»å  snapshot æ è¯çé½ä¼åå¸ä¸º snapshot çæ¬ï¼æ²¡æ snapshot æ è¯çé½ä¼åå¸ä¸º release çæ¬ã\n * snapshot çæ¬ä¼èªå¨å ä¸ä¸ªæ¶é´ä½ä¸ºæ è¯ï¼å¦ï¼1.0.0-snapshot åå¸åä¸ºåæ 1.0.0-snapshot-20180522.123456-1.jar\n\n\n# éç½®èªå¨åé¨ç½²\n\nå¨ pom.xml ä¸­æ·»å å¦ä¸ä»£ç ï¼\n\n<distributionmanagement>  \n  <repository>  \n    <id>nexus</id>  \n    <name>nexus release repository</name>  \n    <url>http://192.168.199.110:8081/repository/maven-releases/</url>  \n  </repository>  \n  <snapshotrepository>  \n    <id>nexus</id>  \n    <name>nexus snapshot repository</name>  \n    <url>http://192.168.199.110:8081/repository/maven-snapshots/</url>  \n  </snapshotrepository>  \n</distributionmanagement> \n\n\næ³¨æäºé¡¹ï¼\n\n * id åç§°å¿é¡»è¦ä¸ settings.xml ä¸­ servers éç½®ç id åç§°ä¿æä¸è´ã\n * é¡¹ç®çæ¬å·ä¸­æ snapshot æ è¯çï¼ä¼åå¸å° nexus snapshots repository, å¦ååå¸å° nexus release repositoryï¼å¹¶æ ¹æ® id å»å¹éææè´¦å·ã\n\n\n# é¨ç½²å°ä»åº\n\nmvn deploy\n\n\n\n# ä¸ä¼ ç¬¬ä¸æ¹ jar å\n\nnexusæ§å¶å°æä¾ä¸ä¼ åè½ï¼ä¹å¯ä»¥ä½¿ç¨ maven å½ä»¤ï¼\n\n# å¦ç¬¬ä¸æ¹jaråï¼aliyun-sdk-oss-2.2.3.jar\nmvn deploy:deploy-file \n  -dgroupid=com.aliyun.oss \n  -dartifactid=aliyun-sdk-oss \n  -dversion=2.2.3 \n  -dpackaging=jar \n  -dfile=d:\\aliyun-sdk-oss-2.2.3.jar \n  -durl=http://192.168.199.110:8081/repository/maven-3rd/ \n  -drepositoryid=nexus\n\n\næ³¨æäºé¡¹ï¼\n\n * å»ºè®®å¨ä¸ä¼ ç¬¬ä¸æ¹ jar åæ¶ï¼åå»ºåç¬çç¬¬ä¸æ¹ jar åç®¡çä»åºï¼ä¾¿äºç®¡çæç»´æ¤ãï¼maven-3rdï¼\n * -drepositoryid=nexus å¯¹åºçæ¯ settings.xml ä¸­ servers éç½®ç id åç§°ãï¼ææï¼\n\n\n# settings.xml\n\n<?xml version="1.0" encoding="utf-8"?>\n<settings xmlns="http://maven.apache.org/settings/1.0.0"\n          xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n          xsi:schemalocation="http://maven.apache.org/settings/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">\n    \n    <servers>\n        <server>\n            <id>nexus</id>\n            <username>admin</username>\n            <password>heyuqiang</password>\n        </server>\n    </servers>\n    <mirrors>\n        <mirror>\n            \x3c!--this sends everything else to /public --\x3e\n            <id>nexus</id>\n            <mirrorof>*</mirrorof>\n            <url>http://192.168.199.110:8081/repository/maven-public/</url>\n        </mirror>\n    </mirrors>\n\n    <profiles>\n        <profile>\n            <id>nexus</id>\n            \x3c!--enable snapshots for the built in central repo to direct --\x3e\n            \x3c!--all requests to nexus via the mirror --\x3e\n            <repositories>\n                <repository>\n                    <id>central</id>\n                    <url>http://central</url>\n                    <releases>\n                        <enabled>true</enabled>\n                    </releases>\n                    <snapshots>\n                        <enabled>true</enabled>\n                    </snapshots>\n                </repository>\n            </repositories>\n            <pluginrepositories>\n                <pluginrepository>\n                    <id>central</id>\n                    <url>http://central</url>\n                    <releases>\n                        <enabled>true</enabled>\n                    </releases>\n                    <snapshots>\n                        <enabled>true</enabled>\n                    </snapshots>\n                </pluginrepository>\n            </pluginrepositories>\n        </profile>\n    </profiles>\n    <activeprofiles>\n        \x3c!--make the profile active all the time --\x3e\n        <activeprofile>nexus</activeprofile>\n    </activeprofiles>\n</settings>\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:13:40",lastUpdatedTimestamp:164437642e4},{title:"Maven pomæä»¶æ ç­¾å¤§å¨è¯¦è§£",frontmatter:{title:"Maven pomæä»¶æ ç­¾å¤§å¨è¯¦è§£",date:"2022-02-09T11:09:28.000Z",permalink:"/pages/d1f496/"},regularPath:"/07.Nexus/01.Nexus/06.Maven%20pom%E6%96%87%E4%BB%B6%E6%A0%87%E7%AD%BE%E5%A4%A7%E5%85%A8%E8%AF%A6%E8%A7%A3.html",relativePath:"07.Nexus/01.Nexus/06.Maven pomæä»¶æ ç­¾å¤§å¨è¯¦è§£.md",key:"v-7ddb1434",path:"/pages/d1f496/",headers:[{level:2,title:"Tagçè§£éå¦ä¸",slug:"tagçè§£éå¦ä¸",normalizedTitle:"tagçè§£éå¦ä¸",charIndex:28}],headersStr:"Tagçè§£éå¦ä¸",content:'# Maven pom.xmlåçæ ç­¾å¤§å¨è¯¦è§£\n\n\n# Tagçè§£éå¦ä¸\n\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0http://maven.apache.org/maven-v4_0_0.xsd">\n    \x3c!--ç¶é¡¹ç®çåæ ãå¦æé¡¹ç®ä¸­æ²¡æè§å®æä¸ªåç´ çå¼ï¼é£ä¹ç¶é¡¹ç®ä¸­çå¯¹åºå¼å³ä¸ºé¡¹ç®çé»è®¤å¼ã åæ åæ¬group IDï¼artifact IDå \n        versionã --\x3e\n    <parent>\n        \x3c!--è¢«ç»§æ¿çç¶é¡¹ç®çæä»¶æ è¯ç¬¦ --\x3e\n        <artifactId />\n        \x3c!--è¢«ç»§æ¿çç¶é¡¹ç®çå¨çå¯ä¸æ è¯ç¬¦ --\x3e\n        <groupId />\n        \x3c!--è¢«ç»§æ¿çç¶é¡¹ç®ççæ¬ --\x3e\n        <version />\n        \x3c!-- ç¶é¡¹ç®çpom.xmlæä»¶çç¸å¯¹è·¯å¾ãç¸å¯¹è·¯å¾åè®¸ä½ éæ©ä¸ä¸ªä¸åçè·¯å¾ãé»è®¤å¼æ¯../pom.xmlãMavené¦åå¨æå»ºå½åé¡¹ç®çå°æ¹å¯»æ¾ç¶é¡¹ \n            ç®çpomï¼å¶æ¬¡å¨æä»¶ç³»ç»çè¿ä¸ªä½ç½®ï¼relativePathä½ç½®ï¼ï¼ç¶åå¨æ¬å°ä»åºï¼æåå¨è¿ç¨ä»åºå¯»æ¾ç¶é¡¹ç®çpomã --\x3e\n        <relativePath />\n    </parent>\n    \x3c!--å£°æé¡¹ç®æè¿°ç¬¦éµå¾ªåªä¸ä¸ªPOMæ¨¡åçæ¬ãæ¨¡åæ¬èº«ççæ¬å¾å°æ¹åï¼è½ç¶å¦æ­¤ï¼ä½å®ä»ç¶æ¯å¿ä¸å¯å°çï¼è¿æ¯ä¸ºäºå½Mavenå¼å¥äºæ°çç¹æ§æèå¶ä»æ¨¡ååæ´çæ¶åï¼ç¡®ä¿ç¨³å®æ§ã --\x3e\n    <modelVersion>4.0.0</modelVersion>\n    \x3c!--é¡¹ç®çå¨çå¯ä¸æ è¯ç¬¦ï¼éå¸¸ä½¿ç¨å¨éå®çåååºåè¯¥é¡¹ç®åå¶ä»é¡¹ç®ãå¹¶ä¸æå»ºæ¶çæçè·¯å¾ä¹æ¯ç±æ­¤çæï¼ å¦com.mycompany.appçæçç¸å¯¹è·¯å¾ä¸ºï¼/com/mycompany/app --\x3e\n    <groupId>asia.banseon</groupId>\n    \x3c!-- æä»¶çæ è¯ç¬¦ï¼å®ågroup IDä¸èµ·å¯ä¸æ è¯ä¸ä¸ªæä»¶ãæ¢å¥è¯è¯´ï¼ä½ ä¸è½æä¸¤ä¸ªä¸åçé¡¹ç®æ¥æåæ ·çartifact IDågroupIDï¼å¨æä¸ª \n        ç¹å®çgroup IDä¸ï¼artifact IDä¹å¿é¡»æ¯å¯ä¸çãæä»¶æ¯é¡¹ç®äº§ççæä½¿ç¨çä¸ä¸ªä¸è¥¿ï¼Mavenä¸ºé¡¹ç®äº§ççæä»¶åæ¬ï¼JARsï¼æº ç ï¼äºè¿å¶åå¸åWARsç­ã --\x3e\n    <artifactId>banseon-maven2</artifactId>\n    \x3c!--é¡¹ç®äº§ççæä»¶ç±»åï¼ä¾å¦jarãwarãearãpomãæä»¶å¯ä»¥åå»ºä»ä»¬èªå·±çæä»¶ç±»åï¼æä»¥åé¢åçä¸æ¯å¨é¨æä»¶ç±»å --\x3e\n    <packaging>jar</packaging>\n    \x3c!--é¡¹ç®å½åçæ¬ï¼æ ¼å¼ä¸º:ä¸»çæ¬.æ¬¡çæ¬.å¢éçæ¬-éå®çæ¬å· --\x3e\n    <version>1.0-SNAPSHOT</version>\n    \x3c!--é¡¹ç®çåç§°, Mavenäº§ççææ¡£ç¨ --\x3e\n    <name>banseon-maven</name>\n    \x3c!--é¡¹ç®ä¸»é¡µçURL, Mavenäº§ççææ¡£ç¨ --\x3e\n    <url>http://www.baidu.com/banseon</url>\n    \x3c!-- é¡¹ç®çè¯¦ç»æè¿°, Maven äº§ççææ¡£ç¨ã å½è¿ä¸ªåç´ è½å¤ç¨HTMLæ ¼å¼æè¿°æ¶ï¼ä¾å¦ï¼CDATAä¸­çææ¬ä¼è¢«è§£æå¨å¿½ç¥ï¼å°±å¯ä»¥åå«HTMLæ  \n        ç­¾ï¼ï¼ ä¸é¼å±ä½¿ç¨çº¯ææ¬æè¿°ãå¦æä½ éè¦ä¿®æ¹äº§ççwebç«ç¹çç´¢å¼é¡µé¢ï¼ä½ åºè¯¥ä¿®æ¹ä½ èªå·±çç´¢å¼é¡µæä»¶ï¼èä¸æ¯è°æ´è¿éçææ¡£ã --\x3e\n    <description>A maven project to study maven.</description>\n    \x3c!--æè¿°äºè¿ä¸ªé¡¹ç®æå»ºç¯å¢ä¸­çåææ¡ä»¶ã --\x3e\n    <prerequisites>\n        \x3c!--æå»ºè¯¥é¡¹ç®æä½¿ç¨è¯¥æä»¶æéè¦çMavençæä½çæ¬ --\x3e\n        <maven />\n    </prerequisites>\n    \x3c!--é¡¹ç®çé®é¢ç®¡çç³»ç»(Bugzilla, Jira, Scarab,æä»»ä½ä½ åæ¬¢çé®é¢ç®¡çç³»ç»)çåç§°åURLï¼æ¬ä¾ä¸º jira --\x3e\n    <issueManagement>\n        \x3c!--é®é¢ç®¡çç³»ç»ï¼ä¾å¦jiraï¼çåå­ï¼ --\x3e\n        <system>jira</system>\n        \x3c!--è¯¥é¡¹ç®ä½¿ç¨çé®é¢ç®¡çç³»ç»çURL --\x3e\n        <url>http://jira.baidu.com/banseon</url>\n    </issueManagement>\n    \x3c!--é¡¹ç®æç»­éæä¿¡æ¯ --\x3e\n    <ciManagement>\n        \x3c!--æç»­éæç³»ç»çåå­ï¼ä¾å¦continuum --\x3e\n        <system />\n        \x3c!--è¯¥é¡¹ç®ä½¿ç¨çæç»­éæç³»ç»çURLï¼å¦ææç»­éæç³»ç»æwebæ¥å£çè¯ï¼ã --\x3e\n        <url />\n        \x3c!--æå»ºå®ææ¶ï¼éè¦éç¥çå¼åè/ç¨æ·çéç½®é¡¹ãåæ¬è¢«éç¥èä¿¡æ¯åéç¥æ¡ä»¶ï¼éè¯¯ï¼å¤±è´¥ï¼æåï¼è­¦åï¼ --\x3e\n        <notifiers>\n            \x3c!--éç½®ä¸ç§æ¹å¼ï¼å½æå»ºä¸­æ­æ¶ï¼ä»¥è¯¥æ¹å¼éç¥ç¨æ·/å¼åè --\x3e\n            <notifier>\n                \x3c!--ä¼ ééç¥çéå¾ --\x3e\n                <type />\n                \x3c!--åçéè¯¯æ¶æ¯å¦éç¥ --\x3e\n                <sendOnError />\n                \x3c!--æå»ºå¤±è´¥æ¶æ¯å¦éç¥ --\x3e\n                <sendOnFailure />\n                \x3c!--æå»ºæåæ¶æ¯å¦éç¥ --\x3e\n                <sendOnSuccess />\n                \x3c!--åçè­¦åæ¶æ¯å¦éç¥ --\x3e\n                <sendOnWarning />\n                \x3c!--ä¸èµæä½¿ç¨ãéç¥åéå°åªé --\x3e\n                <address />\n                \x3c!--æ©å±éç½®é¡¹ --\x3e\n                <configuration />\n            </notifier>\n        </notifiers>\n    </ciManagement>\n    \x3c!--é¡¹ç®åå»ºå¹´ä»½ï¼4ä½æ°å­ãå½äº§ççæä¿¡æ¯æ¶éè¦ä½¿ç¨è¿ä¸ªå¼ã --\x3e\n    <inceptionYear />\n    \x3c!--é¡¹ç®ç¸å³é®ä»¶åè¡¨ä¿¡æ¯ --\x3e\n    <mailingLists>\n        \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®ç¸å³çææé®ä»¶åè¡¨ãèªå¨äº§ççç½ç«å¼ç¨è¿äºä¿¡æ¯ã --\x3e\n        <mailingList>\n            \x3c!--é®ä»¶çåç§° --\x3e\n            <name>Demo</name>\n            \x3c!--åéé®ä»¶çå°åæé¾æ¥ï¼å¦ææ¯é®ä»¶å°åï¼åå»ºææ¡£æ¶ï¼mailto: é¾æ¥ä¼è¢«èªå¨åå»º --\x3e\n            <post>banseon@126.com</post>\n            \x3c!--è®¢éé®ä»¶çå°åæé¾æ¥ï¼å¦ææ¯é®ä»¶å°åï¼åå»ºææ¡£æ¶ï¼mailto: é¾æ¥ä¼è¢«èªå¨åå»º --\x3e\n            <subscribe>banseon@126.com</subscribe>\n            \x3c!--åæ¶è®¢éé®ä»¶çå°åæé¾æ¥ï¼å¦ææ¯é®ä»¶å°åï¼åå»ºææ¡£æ¶ï¼mailto: é¾æ¥ä¼è¢«èªå¨åå»º --\x3e\n            <unsubscribe>banseon@126.com</unsubscribe>\n            \x3c!--ä½ å¯ä»¥æµè§é®ä»¶ä¿¡æ¯çURL --\x3e\n            <archive>http:/hi.baidu.com/banseon/demo/dev/</archive>\n        </mailingList>\n    </mailingLists>\n    \x3c!--é¡¹ç®å¼åèåè¡¨ --\x3e\n    <developers>\n        \x3c!--æä¸ªé¡¹ç®å¼åèçä¿¡æ¯ --\x3e\n        <developer>\n            \x3c!--SCMéé¡¹ç®å¼åèçå¯ä¸æ è¯ç¬¦ --\x3e\n            <id>HELLO WORLD</id>\n            \x3c!--é¡¹ç®å¼åèçå¨å --\x3e\n            <name>banseon</name>\n            \x3c!--é¡¹ç®å¼åèçemail --\x3e\n            <email>banseon@126.com</email>\n            \x3c!--é¡¹ç®å¼åèçä¸»é¡µçURL --\x3e\n            <url />\n            \x3c!--é¡¹ç®å¼åèå¨é¡¹ç®ä¸­æ®æ¼çè§è²ï¼è§è²åç´ æè¿°äºåç§è§è² --\x3e\n            <roles>\n                <role>Project Manager</role>\n                <role>Architect</role>\n            </roles>\n            \x3c!--é¡¹ç®å¼åèæå±ç»ç» --\x3e\n            <organization>demo</organization>\n            \x3c!--é¡¹ç®å¼åèæå±ç»ç»çURL --\x3e\n            <organizationUrl>http://hi.baidu.com/banseon</organizationUrl>\n            \x3c!--é¡¹ç®å¼åèå±æ§ï¼å¦å³æ¶æ¶æ¯å¦ä½å¤çç­ --\x3e\n            <properties>\n                <dept>No</dept>\n            </properties>\n            \x3c!--é¡¹ç®å¼åèæå¨æ¶åºï¼ -11å°12èå´åçæ´æ°ã --\x3e\n            <timezone>-5</timezone>\n        </developer>\n    </developers>\n    \x3c!--é¡¹ç®çå¶ä»è´¡ç®èåè¡¨ --\x3e\n    <contributors>\n        \x3c!--é¡¹ç®çå¶ä»è´¡ç®èãåè§developers/developeråç´  --\x3e\n        <contributor>\n            <name />\n            <email />\n            <url />\n            <organization />\n            <organizationUrl />\n            <roles />\n            <timezone />\n            <properties />\n        </contributor>\n    </contributors>\n    \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®ææLicenseåè¡¨ã åºè¯¥åªååºè¯¥é¡¹ç®çlicenseåè¡¨ï¼ä¸è¦ååºä¾èµé¡¹ç®ç licenseåè¡¨ãå¦æååºå¤ä¸ªlicenseï¼ç¨æ·å¯ä»¥éæ©å®ä»¬ä¸­çä¸ä¸ªèä¸æ¯æ¥åæælicenseã --\x3e\n    <licenses>\n        \x3c!--æè¿°äºé¡¹ç®çlicenseï¼ç¨äºçæé¡¹ç®çwebç«ç¹çlicenseé¡µé¢ï¼å¶ä»ä¸äºæ¥è¡¨åvalidationä¹ä¼ç¨å°è¯¥åç´ ã --\x3e\n        <license>\n            \x3c!--licenseç¨äºæ³å¾ä¸çåç§° --\x3e\n            <name>Apache 2</name>\n            \x3c!--å®æ¹çlicenseæ­£æé¡µé¢çURL --\x3e\n            <url>http://www.baidu.com/banseon/LICENSE-2.0.txt</url>\n            \x3c!--é¡¹ç®ååçä¸»è¦æ¹å¼ï¼ repoï¼å¯ä»¥ä»Mavenåºä¸è½½ manualï¼ ç¨æ·å¿é¡»æå¨ä¸è½½åå®è£ä¾èµ --\x3e\n            <distribution>repo</distribution>\n            \x3c!--å³äºlicenseçè¡¥åä¿¡æ¯ --\x3e\n            <comments>A business-friendly OSS license</comments>\n        </license>\n    </licenses>\n    \x3c!--SCM(Source Control Management)æ ç­¾åè®¸ä½ éç½®ä½ çä»£ç åºï¼ä¾Maven webç«ç¹åå¶å®æä»¶ä½¿ç¨ã --\x3e\n    <scm>\n        \x3c!--SCMçURL,è¯¥URLæè¿°äºçæ¬åºåå¦ä½è¿æ¥å°çæ¬åºãæ¬²ç¥è¯¦æï¼è¯·çSCMsæä¾çURLæ ¼å¼ååè¡¨ãè¯¥è¿æ¥åªè¯»ã --\x3e\n        <connection>\n            scm:svn:http://svn.baidu.com/banseon/maven/banseon/banseon-maven2-trunk(dao-trunk)\n        </connection>\n        \x3c!--ç»å¼åèä½¿ç¨çï¼ç±»ä¼¼connectionåç´ ãå³è¯¥è¿æ¥ä¸ä»ä»åªè¯» --\x3e\n        <developerConnection>\n            scm:svn:http://svn.baidu.com/banseon/maven/banseon/dao-trunk\n        </developerConnection>\n        \x3c!--å½åä»£ç çæ ç­¾ï¼å¨å¼åé¶æ®µé»è®¤ä¸ºHEAD --\x3e\n        <tag />\n        \x3c!--æåé¡¹ç®çå¯æµè§SCMåºï¼ä¾å¦ViewVCæèFisheyeï¼çURLã --\x3e\n        <url>http://svn.baidu.com/banseon</url>\n    </scm>\n    \x3c!--æè¿°é¡¹ç®æå±ç»ç»çåç§å±æ§ãMavenäº§ççææ¡£ç¨ --\x3e\n    <organization>\n        \x3c!--ç»ç»çå¨å --\x3e\n        <name>demo</name>\n        \x3c!--ç»ç»ä¸»é¡µçURL --\x3e\n        <url>http://www.baidu.com/banseon</url>\n    </organization>\n    \x3c!--æå»ºé¡¹ç®éè¦çä¿¡æ¯ --\x3e\n    <build>\n        \x3c!--è¯¥åç´ è®¾ç½®äºé¡¹ç®æºç ç®å½ï¼å½æå»ºé¡¹ç®çæ¶åï¼æå»ºç³»ç»ä¼ç¼è¯ç®å½éçæºç ãè¯¥è·¯å¾æ¯ç¸å¯¹äºpom.xmlçç¸å¯¹è·¯å¾ã --\x3e\n        <sourceDirectory />\n        \x3c!--è¯¥åç´ è®¾ç½®äºé¡¹ç®èæ¬æºç ç®å½ï¼è¯¥ç®å½åæºç ç®å½ä¸åï¼ç»å¤§å¤æ°æåµä¸ï¼è¯¥ç®å½ä¸çåå®¹ ä¼è¢«æ·è´å°è¾åºç®å½(å ä¸ºèæ¬æ¯è¢«è§£éçï¼èä¸æ¯è¢«ç¼è¯ç)ã --\x3e\n        <scriptSourceDirectory />\n        \x3c!--è¯¥åç´ è®¾ç½®äºé¡¹ç®ååæµè¯ä½¿ç¨çæºç ç®å½ï¼å½æµè¯é¡¹ç®çæ¶åï¼æå»ºç³»ç»ä¼ç¼è¯ç®å½éçæºç ãè¯¥è·¯å¾æ¯ç¸å¯¹äºpom.xmlçç¸å¯¹è·¯å¾ã --\x3e\n        <testSourceDirectory />\n        \x3c!--è¢«ç¼è¯è¿çåºç¨ç¨åºclassæä»¶å­æ¾çç®å½ã --\x3e\n        <outputDirectory />\n        \x3c!--è¢«ç¼è¯è¿çæµè¯classæä»¶å­æ¾çç®å½ã --\x3e\n        <testOutputDirectory />\n        \x3c!--ä½¿ç¨æ¥èªè¯¥é¡¹ç®çä¸ç³»åæå»ºæ©å± --\x3e\n        <extensions>\n            \x3c!--æè¿°ä½¿ç¨å°çæå»ºæ©å±ã --\x3e\n            <extension>\n                \x3c!--æå»ºæ©å±çgroupId --\x3e\n                <groupId />\n                \x3c!--æå»ºæ©å±çartifactId --\x3e\n                <artifactId />\n                \x3c!--æå»ºæ©å±ççæ¬ --\x3e\n                <version />\n            </extension>\n        </extensions>\n        \x3c!--å½é¡¹ç®æ²¡æè§å®ç®æ ï¼Maven2 å«åé¶æ®µï¼æ¶çé»è®¤å¼ --\x3e\n        <defaultGoal />\n        \x3c!--è¿ä¸ªåç´ æè¿°äºé¡¹ç®ç¸å³çææèµæºè·¯å¾åè¡¨ï¼ä¾å¦åé¡¹ç®ç¸å³çå±æ§æä»¶ï¼è¿äºèµæºè¢«åå«å¨æç»çæåæä»¶éã --\x3e\n        <resources>\n            \x3c!--è¿ä¸ªåç´ æè¿°äºé¡¹ç®ç¸å³ææµè¯ç¸å³çææèµæºè·¯å¾ --\x3e\n            <resource>\n                \x3c!-- æè¿°äºèµæºçç®æ è·¯å¾ãè¯¥è·¯å¾ç¸å¯¹target/classesç®å½ï¼ä¾å¦${project.build.outputDirectory}ï¼ãä¸¾ä¸ªä¾ \n                    å­ï¼å¦æä½ æ³èµæºå¨ç¹å®çåé(org.apache.maven.messages)ï¼ä½ å°±å¿é¡»è¯¥åç´ è®¾ç½®ä¸ºorg/apache/maven /messagesãç¶èï¼å¦æä½ åªæ¯æ³æèµæºæ¾å°æºç ç®å½ç»æéï¼å°±ä¸éè¦è¯¥éç½®ã --\x3e\n                <targetPath />\n                \x3c!--æ¯å¦ä½¿ç¨åæ°å¼ä»£æ¿åæ°åãåæ°å¼åèªpropertiesåç´ æèæä»¶ééç½®çå±æ§ï¼æä»¶å¨filtersåç´ éååºã --\x3e\n                <filtering />\n                \x3c!--æè¿°å­æ¾èµæºçç®å½ï¼è¯¥è·¯å¾ç¸å¯¹POMè·¯å¾ --\x3e\n                <directory />\n                \x3c!--åå«çæ¨¡å¼åè¡¨ï¼ä¾å¦**/*.xml. --\x3e\n                <includes />\n                \x3c!--æé¤çæ¨¡å¼åè¡¨ï¼ä¾å¦**/*.xml --\x3e\n                <excludes />\n            </resource>\n        </resources>\n        \x3c!--è¿ä¸ªåç´ æè¿°äºååæµè¯ç¸å³çææèµæºè·¯å¾ï¼ä¾å¦åååæµè¯ç¸å³çå±æ§æä»¶ã --\x3e\n        <testResources>\n            \x3c!--è¿ä¸ªåç´ æè¿°äºæµè¯ç¸å³çææèµæºè·¯å¾ï¼åè§build/resources/resourceåç´ çè¯´æ --\x3e\n            <testResource>\n                <targetPath />\n                <filtering />\n                <directory />\n                <includes />\n                <excludes />\n            </testResource>\n        </testResources>\n        \x3c!--æå»ºäº§ççæææä»¶å­æ¾çç®å½ --\x3e\n        <directory />\n        \x3c!--äº§ççæä»¶çæä»¶åï¼é»è®¤å¼æ¯${artifactId}-${version}ã --\x3e\n        <finalName />\n        \x3c!--å½filteringå¼å³æå¼æ¶ï¼ä½¿ç¨å°çè¿æ»¤å¨å±æ§æä»¶åè¡¨ --\x3e\n        <filters />\n        \x3c!--å­é¡¹ç®å¯ä»¥å¼ç¨çé»è®¤æä»¶ä¿¡æ¯ãè¯¥æä»¶éç½®é¡¹ç´å°è¢«å¼ç¨æ¶æä¼è¢«è§£ææç»å®å°çå½å¨æãç»å®æä»¶çä»»ä½æ¬å°éç½®é½ä¼è¦çè¿éçéç½® --\x3e\n        <pluginManagement>\n            \x3c!--ä½¿ç¨çæä»¶åè¡¨ ã --\x3e\n            <plugins>\n                \x3c!--pluginåç´ åå«æè¿°æä»¶æéè¦çä¿¡æ¯ã --\x3e\n                <plugin>\n                    \x3c!--æä»¶å¨ä»åºéçgroup ID --\x3e\n                    <groupId />\n                    \x3c!--æä»¶å¨ä»åºéçartifact ID --\x3e\n                    <artifactId />\n                    \x3c!--è¢«ä½¿ç¨çæä»¶ççæ¬ï¼æçæ¬èå´ï¼ --\x3e\n                    <version />\n                    \x3c!--æ¯å¦ä»è¯¥æä»¶ä¸è½½Mavenæ©å±ï¼ä¾å¦æååç±»åå¤çå¨ï¼ï¼ç±äºæ§è½åå ï¼åªæå¨çéè¦ä¸è½½æ¶ï¼è¯¥åç´ æè¢«è®¾ç½®æenabledã --\x3e\n                    <extensions />\n                    \x3c!--å¨æå»ºçå½å¨æä¸­æ§è¡ä¸ç»ç®æ çéç½®ãæ¯ä¸ªç®æ å¯è½æä¸åçéç½®ã --\x3e\n                    <executions>\n                        \x3c!--executionåç´ åå«äºæä»¶æ§è¡éè¦çä¿¡æ¯ --\x3e\n                        <execution>\n                            \x3c!--æ§è¡ç®æ çæ è¯ç¬¦ï¼ç¨äºæ è¯æå»ºè¿ç¨ä¸­çç®æ ï¼æèå¹éç»§æ¿è¿ç¨ä¸­éè¦åå¹¶çæ§è¡ç®æ  --\x3e\n                            <id />\n                            \x3c!--ç»å®äºç®æ çæå»ºçå½å¨æé¶æ®µï¼å¦æçç¥ï¼ç®æ ä¼è¢«ç»å®å°æºæ°æ®ééç½®çé»è®¤é¶æ®µ --\x3e\n                            <phase />\n                            \x3c!--éç½®çæ§è¡ç®æ  --\x3e\n                            <goals />\n                            \x3c!--éç½®æ¯å¦è¢«ä¼ æ­å°å­POM --\x3e\n                            <inherited />\n                            \x3c!--ä½ä¸ºDOMå¯¹è±¡çéç½® --\x3e\n                            <configuration />\n                        </execution>\n                    </executions>\n                    \x3c!--é¡¹ç®å¼å¥æä»¶æéè¦çé¢å¤ä¾èµ --\x3e\n                    <dependencies>\n                        \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                        <dependency>\n                            ......\n                        </dependency>\n                    </dependencies>\n                    \x3c!--ä»»ä½éç½®æ¯å¦è¢«ä¼ æ­å°å­é¡¹ç® --\x3e\n                    <inherited />\n                    \x3c!--ä½ä¸ºDOMå¯¹è±¡çéç½® --\x3e\n                    <configuration />\n                </plugin>\n            </plugins>\n        </pluginManagement>\n        \x3c!--ä½¿ç¨çæä»¶åè¡¨ --\x3e\n        <plugins>\n            \x3c!--åè§build/pluginManagement/plugins/pluginåç´  --\x3e\n            <plugin>\n                <groupId />\n                <artifactId />\n                <version />\n                <extensions />\n                <executions>\n                    <execution>\n                        <id />\n                        <phase />\n                        <goals />\n                        <inherited />\n                        <configuration />\n                    </execution>\n                </executions>\n                <dependencies>\n                    \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                    <dependency>\n                        ......\n                    </dependency>\n                </dependencies>\n                <goals />\n                <inherited />\n                <configuration />\n            </plugin>\n        </plugins>\n    </build>\n    \x3c!--å¨åçé¡¹ç®æå»ºprofileï¼å¦æè¢«æ¿æ´»ï¼ä¼ä¿®æ¹æå»ºå¤ç --\x3e\n    <profiles>\n        \x3c!--æ ¹æ®ç¯å¢åæ°æå½ä»¤è¡åæ°æ¿æ´»æä¸ªæå»ºå¤ç --\x3e\n        <profile>\n            \x3c!--æå»ºéç½®çå¯ä¸æ è¯ç¬¦ãå³ç¨äºå½ä»¤è¡æ¿æ´»ï¼ä¹ç¨äºå¨ç»§æ¿æ¶åå¹¶å·æç¸åæ è¯ç¬¦çprofileã --\x3e\n            <id />\n            \x3c!--èªå¨è§¦åprofileçæ¡ä»¶é»è¾ãActivationæ¯profileçå¼å¯é¥åãprofileçåéæ¥èªäºå® è½å¤å¨æäºç¹å®çç¯å¢ä¸­èªå¨ä½¿ç¨æäºç¹å®çå¼ï¼è¿äºç¯å¢éè¿activationåç´ æå®ãactivationåç´ å¹¶ä¸æ¯æ¿æ´»profileçå¯ä¸æ¹å¼ã --\x3e\n            <activation>\n                \x3c!--profileé»è®¤æ¯å¦æ¿æ´»çæ å¿ --\x3e\n                <activeByDefault />\n                \x3c!--å½å¹éçjdkè¢«æ£æµå°ï¼profileè¢«æ¿æ´»ãä¾å¦ï¼1.4æ¿æ´»JDK1.4ï¼1.4.0_2ï¼è!1.4æ¿æ´»ææçæ¬ä¸æ¯ä»¥1.4å¼å¤´çJDKã --\x3e\n                <jdk />\n                \x3c!--å½å¹éçæä½ç³»ç»å±æ§è¢«æ£æµå°ï¼profileè¢«æ¿æ´»ãosåç´ å¯ä»¥å®ä¹ä¸äºæä½ç³»ç»ç¸å³çå±æ§ã --\x3e\n                <os>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»çåå­ --\x3e\n                    <name>Windows XP</name>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»æå±å®¶æ(å¦ \'windows\') --\x3e\n                    <family>Windows</family>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»ä½ç³»ç»æ --\x3e\n                    <arch>x86</arch>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»çæ¬ --\x3e\n                    <version>5.1.2600</version>\n                </os>\n                \x3c!--å¦æMavenæ£æµå°æä¸ä¸ªå±æ§ï¼å¶å¼å¯ä»¥å¨POMä¸­éè¿${åç§°}å¼ç¨ï¼ï¼å¶æ¥æå¯¹åºçåç§°åå¼ï¼Profileå°±ä¼è¢«æ¿æ´»ãå¦æå¼ å­æ®µæ¯ç©ºçï¼é£ä¹å­å¨å±æ§åç§°å­æ®µå°±ä¼æ¿æ´»profileï¼å¦åæåºåå¤§å°åæ¹å¼å¹éå±æ§å¼å­æ®µ --\x3e\n                <property>\n                    \x3c!--æ¿æ´»profileçå±æ§çåç§° --\x3e\n                    <name>mavenVersion</name>\n                    \x3c!--æ¿æ´»profileçå±æ§çå¼ --\x3e\n                    <value>2.0.3</value>\n                </property>\n                \x3c!--æä¾ä¸ä¸ªæä»¶åï¼éè¿æ£æµè¯¥æä»¶çå­å¨æä¸å­å¨æ¥æ¿æ´»profileãmissingæ£æ¥æä»¶æ¯å¦å­å¨ï¼å¦æä¸å­å¨åæ¿æ´» profileãå¦ä¸æ¹é¢ï¼existsåä¼æ£æ¥æä»¶æ¯å¦å­å¨ï¼å¦æå­å¨åæ¿æ´»profileã --\x3e\n                <file>\n                    \x3c!--å¦ææå®çæä»¶å­å¨ï¼åæ¿æ´»profileã --\x3e\n                    <exists>/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/\n                    </exists>\n                    \x3c!--å¦ææå®çæä»¶ä¸å­å¨ï¼åæ¿æ´»profileã --\x3e\n                    <missing>/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/\n                    </missing>\n                </file>\n            </activation>\n            \x3c!--æå»ºé¡¹ç®æéè¦çä¿¡æ¯ãåè§buildåç´  --\x3e\n            <build>\n                <defaultGoal />\n                <resources>\n                    <resource>\n                        <targetPath />\n                        <filtering />\n                        <directory />\n                        <includes />\n                        <excludes />\n                    </resource>\n                </resources>\n                <testResources>\n                    <testResource>\n                        <targetPath />\n                        <filtering />\n                        <directory />\n                        <includes />\n                        <excludes />\n                    </testResource>\n                </testResources>\n                <directory />\n                <finalName />\n                <filters />\n                <pluginManagement>\n                    <plugins>\n                        \x3c!--åè§build/pluginManagement/plugins/pluginåç´  --\x3e\n                        <plugin>\n                            <groupId />\n                            <artifactId />\n                            <version />\n                            <extensions />\n                            <executions>\n                                <execution>\n                                    <id />\n                                    <phase />\n                                    <goals />\n                                    <inherited />\n                                    <configuration />\n                                </execution>\n                            </executions>\n                            <dependencies>\n                                \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                                <dependency>\n                                    ......\n                                </dependency>\n                            </dependencies>\n                            <goals />\n                            <inherited />\n                            <configuration />\n                        </plugin>\n                    </plugins>\n                </pluginManagement>\n                <plugins>\n                    \x3c!--åè§build/pluginManagement/plugins/pluginåç´  --\x3e\n                    <plugin>\n                        <groupId />\n                        <artifactId />\n                        <version />\n                        <extensions />\n                        <executions>\n                            <execution>\n                                <id />\n                                <phase />\n                                <goals />\n                                <inherited />\n                                <configuration />\n                            </execution>\n                        </executions>\n                        <dependencies>\n                            \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                            <dependency>\n                                ......\n                            </dependency>\n                        </dependencies>\n                        <goals />\n                        <inherited />\n                        <configuration />\n                    </plugin>\n                </plugins>\n            </build>\n            \x3c!--æ¨¡åï¼ææ¶ç§°ä½å­é¡¹ç®ï¼ è¢«æå»ºæé¡¹ç®çä¸é¨åãååºçæ¯ä¸ªæ¨¡ååç´ æ¯æåè¯¥æ¨¡åçç®å½çç¸å¯¹è·¯å¾ --\x3e\n            <modules />\n            \x3c!--åç°ä¾èµåæ©å±çè¿ç¨ä»åºåè¡¨ã --\x3e\n            <repositories>\n                \x3c!--åè§repositories/repositoryåç´  --\x3e\n                <repository>\n                    <releases>\n                        <enabled />\n                        <updatePolicy />\n                        <checksumPolicy />\n                    </releases>\n                    <snapshots>\n                        <enabled />\n                        <updatePolicy />\n                        <checksumPolicy />\n                    </snapshots>\n                    <id />\n                    <name />\n                    <url />\n                    <layout />\n                </repository>\n            </repositories>\n            \x3c!--åç°æä»¶çè¿ç¨ä»åºåè¡¨ï¼è¿äºæä»¶ç¨äºæå»ºåæ¥è¡¨ --\x3e\n            <pluginRepositories>\n                \x3c!--åå«éè¦è¿æ¥å°è¿ç¨æä»¶ä»åºçä¿¡æ¯.åè§repositories/repositoryåç´  --\x3e\n                <pluginRepository>\n                    <releases>\n                        <enabled />\n                        <updatePolicy />\n                        <checksumPolicy />\n                    </releases>\n                    <snapshots>\n                        <enabled />\n                        <updatePolicy />\n                        <checksumPolicy />\n                    </snapshots>\n                    <id />\n                    <name />\n                    <url />\n                    <layout />\n                </pluginRepository>\n            </pluginRepositories>\n            \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®ç¸å³çææä¾èµã è¿äºä¾èµç»æäºé¡¹ç®æå»ºè¿ç¨ä¸­çä¸ä¸ªä¸ªç¯èãå®ä»¬èªå¨ä»é¡¹ç®å®ä¹çä»åºä¸­ä¸è½½ãè¦è·åæ´å¤ä¿¡æ¯ï¼è¯·çé¡¹ç®ä¾èµæºå¶ã --\x3e\n            <dependencies>\n                \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                <dependency>\n                    ......\n                </dependency>\n            </dependencies>\n            \x3c!--ä¸èµæä½¿ç¨. ç°å¨Mavenå¿½ç¥è¯¥åç´ . --\x3e\n            <reports />\n            \x3c!--è¯¥åç´ åæ¬ä½¿ç¨æ¥è¡¨æä»¶äº§çæ¥è¡¨çè§èãå½ç¨æ·æ§è¡âmvn siteâï¼è¿äºæ¥è¡¨å°±ä¼è¿è¡ã å¨é¡µé¢å¯¼èªæ è½çå°æææ¥è¡¨çé¾æ¥ãåè§reportingåç´  --\x3e\n            <reporting>\n                ......\n            </reporting>\n            \x3c!--åè§dependencyManagementåç´  --\x3e\n            <dependencyManagement>\n                <dependencies>\n                    \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                    <dependency>\n                        ......\n                    </dependency>\n                </dependencies>\n            </dependencyManagement>\n            \x3c!--åè§distributionManagementåç´  --\x3e\n            <distributionManagement>\n                ......\n            </distributionManagement>\n            \x3c!--åè§propertiesåç´  --\x3e\n            <properties />\n        </profile>\n    </profiles>\n    \x3c!--æ¨¡åï¼ææ¶ç§°ä½å­é¡¹ç®ï¼ è¢«æå»ºæé¡¹ç®çä¸é¨åãååºçæ¯ä¸ªæ¨¡ååç´ æ¯æåè¯¥æ¨¡åçç®å½çç¸å¯¹è·¯å¾ --\x3e\n    <modules />\n    \x3c!--åç°ä¾èµåæ©å±çè¿ç¨ä»åºåè¡¨ã --\x3e\n    <repositories>\n        \x3c!--åå«éè¦è¿æ¥å°è¿ç¨ä»åºçä¿¡æ¯ --\x3e\n        <repository>\n            \x3c!--å¦ä½å¤çè¿ç¨ä»åºéåå¸çæ¬çä¸è½½ --\x3e\n            <releases>\n                \x3c!--trueæèfalseè¡¨ç¤ºè¯¥ä»åºæ¯å¦ä¸ºä¸è½½æç§ç±»åæä»¶ï¼åå¸çï¼å¿«ç§çï¼å¼å¯ã --\x3e\n                <enabled />\n                \x3c!--è¯¥åç´ æå®æ´æ°åççé¢çãMavenä¼æ¯è¾æ¬å°POMåè¿ç¨POMçæ¶é´æ³ãè¿éçéé¡¹æ¯ï¼alwaysï¼ä¸ç´ï¼ï¼dailyï¼é»è®¤ï¼æ¯æ¥ï¼ï¼intervalï¼Xï¼è¿éXæ¯ä»¥åéä¸ºåä½çæ¶é´é´éï¼ï¼æèneverï¼ä»ä¸ï¼ã --\x3e\n                <updatePolicy />\n                \x3c!--å½Mavenéªè¯æä»¶æ ¡éªæä»¶å¤±è´¥æ¶è¯¥æä¹åï¼ignoreï¼å¿½ç¥ï¼ï¼failï¼å¤±è´¥ï¼ï¼æèwarnï¼è­¦åï¼ã --\x3e\n                <checksumPolicy />\n            </releases>\n            \x3c!-- å¦ä½å¤çè¿ç¨ä»åºéå¿«ç§çæ¬çä¸è½½ãæäºreleasesåsnapshotsè¿ä¸¤ç»éç½®ï¼POMå°±å¯ä»¥å¨æ¯ä¸ªåç¬çä»åºä¸­ï¼ä¸ºæ¯ç§ç±»åçæä»¶éåä¸åç \n                ç­ç¥ãä¾å¦ï¼å¯è½æäººä¼å³å®åªä¸ºå¼åç®çå¼å¯å¯¹å¿«ç§çæ¬ä¸è½½çæ¯æãåè§repositories/repository/releasesåç´  --\x3e\n            <snapshots>\n                <enabled />\n                <updatePolicy />\n                <checksumPolicy />\n            </snapshots>\n            \x3c!--è¿ç¨ä»åºå¯ä¸æ è¯ç¬¦ãå¯ä»¥ç¨æ¥å¹éå¨settings.xmlæä»¶ééç½®çè¿ç¨ä»åº --\x3e\n            <id>banseon-repository-proxy</id>\n            \x3c!--è¿ç¨ä»åºåç§° --\x3e\n            <name>banseon-repository-proxy</name>\n            \x3c!--è¿ç¨ä»åºURLï¼æprotocol://hostname/pathå½¢å¼ --\x3e\n            <url>http://192.168.1.169:9999/repository/</url>\n            \x3c!-- ç¨äºå®ä½åæåºæä»¶çä»åºå¸å±ç±»å-å¯ä»¥æ¯defaultï¼é»è®¤ï¼æèlegacyï¼éçï¼ãMaven 2ä¸ºå¶ä»åºæä¾äºä¸ä¸ªé»è®¤çå¸å±ï¼ç¶ \n                èï¼Maven 1.xæä¸ç§ä¸åçå¸å±ãæä»¬å¯ä»¥ä½¿ç¨è¯¥åç´ æå®å¸å±æ¯defaultï¼é»è®¤ï¼è¿æ¯legacyï¼éçï¼ã --\x3e\n            <layout>default</layout>\n        </repository>\n    </repositories>\n    \x3c!--åç°æä»¶çè¿ç¨ä»åºåè¡¨ï¼è¿äºæä»¶ç¨äºæå»ºåæ¥è¡¨ --\x3e\n    <pluginRepositories>\n        \x3c!--åå«éè¦è¿æ¥å°è¿ç¨æä»¶ä»åºçä¿¡æ¯.åè§repositories/repositoryåç´  --\x3e\n        <pluginRepository>\n            ......\n        </pluginRepository>\n    </pluginRepositories>\n\n    \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®ç¸å³çææä¾èµã è¿äºä¾èµç»æäºé¡¹ç®æå»ºè¿ç¨ä¸­çä¸ä¸ªä¸ªç¯èãå®ä»¬èªå¨ä»é¡¹ç®å®ä¹çä»åºä¸­ä¸è½½ãè¦è·åæ´å¤ä¿¡æ¯ï¼è¯·çé¡¹ç®ä¾èµæºå¶ã --\x3e\n    <dependencies>\n        <dependency>\n            \x3c!--ä¾èµçgroup ID --\x3e\n            <groupId>org.apache.maven</groupId>\n            \x3c!--ä¾èµçartifact ID --\x3e\n            <artifactId>maven-artifact</artifactId>\n            \x3c!--ä¾èµççæ¬å·ã å¨Maven 2é, ä¹å¯ä»¥éç½®æçæ¬å·çèå´ã --\x3e\n            <version>3.8.1</version>\n            \x3c!-- ä¾èµç±»åï¼é»è®¤ç±»åæ¯jarãå®éå¸¸è¡¨ç¤ºä¾èµçæä»¶çæ©å±åï¼ä½ä¹æä¾å¤ãä¸ä¸ªç±»åå¯ä»¥è¢«æ å°æå¦å¤ä¸ä¸ªæ©å±åæåç±»å¨ãç±»åç»å¸¸åä½¿ç¨çæåæ¹å¼å¯¹åºï¼ \n                å°½ç®¡è¿ä¹æä¾å¤ãä¸äºç±»åçä¾å­ï¼jarï¼warï¼ejb-clientåtest-jarãå¦æè®¾ç½®extensionsä¸º trueï¼å°±å¯ä»¥å¨ pluginéå®ä¹æ°çç±»åãæä»¥åé¢çç±»åçä¾å­ä¸å®æ´ã --\x3e\n            <type>jar</type>\n            \x3c!-- ä¾èµçåç±»å¨ãåç±»å¨å¯ä»¥åºåå±äºåä¸ä¸ªPOMï¼ä½ä¸åæå»ºæ¹å¼çæä»¶ãåç±»å¨åè¢«éå å°æä»¶åççæ¬å·åé¢ãä¾å¦ï¼å¦æä½ æ³è¦æå»ºä¸¤ä¸ªåç¬çæä»¶æ \n                JARï¼ä¸ä¸ªä½¿ç¨Java 1.4ç¼è¯å¨ï¼å¦ä¸ä¸ªä½¿ç¨Java 6ç¼è¯å¨ï¼ä½ å°±å¯ä»¥ä½¿ç¨åç±»å¨æ¥çæä¸¤ä¸ªåç¬çJARæä»¶ã --\x3e\n            <classifier></classifier>\n            \x3c!--ä¾èµèå´ãå¨é¡¹ç®åå¸è¿ç¨ä¸­ï¼å¸®å©å³å®åªäºæä»¶è¢«åæ¬è¿æ¥ãæ¬²ç¥è¯¦æè¯·åèä¾èµæºå¶ã - compile ï¼é»è®¤èå´ï¼ç¨äºç¼è¯ - providedï¼ç±»ä¼¼äºç¼è¯ï¼ä½æ¯æä½ æå¾jdkæèå®¹å¨æä¾ï¼ç±»ä¼¼äºclasspath \n                - runtime: å¨æ§è¡æ¶éè¦ä½¿ç¨ - test: ç¨äºtestä»»å¡æ¶ä½¿ç¨ - system: éè¦å¤å¨æä¾ç¸åºçåç´ ãéè¿systemPathæ¥åå¾ \n                - systemPath: ä»ç¨äºèå´ä¸ºsystemãæä¾ç¸åºçè·¯å¾ - optional: å½é¡¹ç®èªèº«è¢«ä¾èµæ¶ï¼æ æ³¨ä¾èµæ¯å¦ä¼ éãç¨äºè¿ç»­ä¾èµæ¶ä½¿ç¨ --\x3e\n            <scope>test</scope>\n            \x3c!--ä»ä¾systemèå´ä½¿ç¨ãæ³¨æï¼ä¸é¼å±ä½¿ç¨è¿ä¸ªåç´ ï¼å¹¶ä¸å¨æ°ççæ¬ä¸­è¯¥åç´ å¯è½è¢«è¦çæãè¯¥åç´ ä¸ºä¾èµè§å®äºæä»¶ç³»ç»ä¸çè·¯å¾ãéè¦ç»å¯¹è·¯å¾èä¸æ¯ç¸å¯¹è·¯å¾ãæ¨èä½¿ç¨å±æ§å¹éç»å¯¹è·¯å¾ï¼ä¾å¦${java.home}ã --\x3e\n            <systemPath></systemPath>\n            \x3c!--å½è®¡ç®ä¼ éä¾èµæ¶ï¼ ä»ä¾èµæä»¶åè¡¨éï¼ååºè¢«æé¤çä¾èµæä»¶éãå³åè¯mavenä½ åªä¾èµæå®çé¡¹ç®ï¼ä¸ä¾èµé¡¹ç®çä¾èµãæ­¤åç´ ä¸»è¦ç¨äºè§£å³çæ¬å²çªé®é¢ --\x3e\n            <exclusions>\n                <exclusion>\n                    <artifactId>spring-core</artifactId>\n                    <groupId>org.springframework</groupId>\n                </exclusion>\n            </exclusions>\n            \x3c!--å¯éä¾èµï¼å¦æä½ å¨é¡¹ç®Bä¸­æCä¾èµå£°æä¸ºå¯éï¼ä½ å°±éè¦å¨ä¾èµäºBçé¡¹ç®ï¼ä¾å¦é¡¹ç®Aï¼ä¸­æ¾å¼çå¼ç¨å¯¹Cçä¾èµãå¯éä¾èµé»æ­ä¾èµçä¼ éæ§ã --\x3e\n            <optional>true</optional>\n        </dependency>\n    </dependencies>\n    \x3c!--ä¸èµæä½¿ç¨. ç°å¨Mavenå¿½ç¥è¯¥åç´ . --\x3e\n    <reports></reports>\n    \x3c!--è¯¥åç´ æè¿°ä½¿ç¨æ¥è¡¨æä»¶äº§çæ¥è¡¨çè§èãå½ç¨æ·æ§è¡âmvn siteâï¼è¿äºæ¥è¡¨å°±ä¼è¿è¡ã å¨é¡µé¢å¯¼èªæ è½çå°æææ¥è¡¨çé¾æ¥ã --\x3e\n    <reporting>\n        \x3c!--trueï¼åï¼ç½ç«ä¸åæ¬é»è®¤çæ¥è¡¨ãè¿åæ¬âé¡¹ç®ä¿¡æ¯âèåä¸­çæ¥è¡¨ã --\x3e\n        <excludeDefaults />\n        \x3c!--ææäº§ççæ¥è¡¨å­æ¾å°åªéãé»è®¤å¼æ¯${project.build.directory}/siteã --\x3e\n        <outputDirectory />\n        \x3c!--ä½¿ç¨çæ¥è¡¨æä»¶åä»ä»¬çéç½®ã --\x3e\n        <plugins>\n            \x3c!--pluginåç´ åå«æè¿°æ¥è¡¨æä»¶éè¦çä¿¡æ¯ --\x3e\n            <plugin>\n                \x3c!--æ¥è¡¨æä»¶å¨ä»åºéçgroup ID --\x3e\n                <groupId />\n                \x3c!--æ¥è¡¨æä»¶å¨ä»åºéçartifact ID --\x3e\n                <artifactId />\n                \x3c!--è¢«ä½¿ç¨çæ¥è¡¨æä»¶ççæ¬ï¼æçæ¬èå´ï¼ --\x3e\n                <version />\n                \x3c!--ä»»ä½éç½®æ¯å¦è¢«ä¼ æ­å°å­é¡¹ç® --\x3e\n                <inherited />\n                \x3c!--æ¥è¡¨æä»¶çéç½® --\x3e\n                <configuration />\n                \x3c!--ä¸ç»æ¥è¡¨çå¤éè§èï¼æ¯ä¸ªè§èå¯è½æä¸åçéç½®ãä¸ä¸ªè§èï¼æ¥è¡¨éï¼å¯¹åºä¸ä¸ªæ§è¡ç®æ  ãä¾å¦ï¼æ1ï¼2ï¼3ï¼4ï¼5ï¼6ï¼7ï¼8ï¼9ä¸ªæ¥è¡¨ã1ï¼2ï¼5ææAæ¥è¡¨éï¼å¯¹åºä¸ä¸ªæ§è¡ç®æ ã2ï¼5ï¼8ææBæ¥è¡¨éï¼å¯¹åºå¦ä¸ä¸ªæ§è¡ç®æ  --\x3e\n                <reportSets>\n                    \x3c!--è¡¨ç¤ºæ¥è¡¨çä¸ä¸ªéåï¼ä»¥åäº§çè¯¥éåçéç½® --\x3e\n                    <reportSet>\n                        \x3c!--æ¥è¡¨éåçå¯ä¸æ è¯ç¬¦ï¼POMç»§æ¿æ¶ç¨å° --\x3e\n                        <id />\n                        \x3c!--äº§çæ¥è¡¨éåæ¶ï¼è¢«ä½¿ç¨çæ¥è¡¨çéç½® --\x3e\n                        <configuration />\n                        \x3c!--éç½®æ¯å¦è¢«ç»§æ¿å°å­POMs --\x3e\n                        <inherited />\n                        \x3c!--è¿ä¸ªéåéä½¿ç¨å°åªäºæ¥è¡¨ --\x3e\n                        <reports />\n                    </reportSet>\n                </reportSets>\n            </plugin>\n        </plugins>\n    </reporting>\n    \x3c!-- ç»§æ¿èªè¯¥é¡¹ç®çææå­é¡¹ç®çé»è®¤ä¾èµä¿¡æ¯ãè¿é¨åçä¾èµä¿¡æ¯ä¸ä¼è¢«ç«å³è§£æ,èæ¯å½å­é¡¹ç®å£°æä¸ä¸ªä¾èµï¼å¿é¡»æè¿°group IDå artifact \n        IDä¿¡æ¯ï¼ï¼å¦ægroup IDåartifact IDä»¥å¤çä¸äºä¿¡æ¯æ²¡ææè¿°ï¼åéè¿group IDåartifact ID å¹éå°è¿éçä¾èµï¼å¹¶ä½¿ç¨è¿éçä¾èµä¿¡æ¯ã --\x3e\n    <dependencyManagement>\n        <dependencies>\n            \x3c!--åè§dependencies/dependencyåç´  --\x3e\n            <dependency>\n                ......\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n    \x3c!--é¡¹ç®ååä¿¡æ¯ï¼å¨æ§è¡mvn deployåè¡¨ç¤ºè¦åå¸çä½ç½®ãæäºè¿äºä¿¡æ¯å°±å¯ä»¥æç½ç«é¨ç½²å°è¿ç¨æå¡å¨æèææä»¶é¨ç½²å°è¿ç¨ä»åºã --\x3e\n    <distributionManagement>\n        \x3c!--é¨ç½²é¡¹ç®äº§ççæä»¶å°è¿ç¨ä»åºéè¦çä¿¡æ¯ --\x3e\n        <repository>\n            \x3c!--æ¯åéç»å¿«ç§ä¸ä¸ªå¯ä¸ççæ¬å·ï¼ç±æ¶é´æ³åæå»ºæµæ°´å·ï¼ï¼è¿æ¯æ¯æ¬¡é½ä½¿ç¨ç¸åççæ¬å·ï¼åè§repositories/repositoryåç´  --\x3e\n            <uniqueVersion />\n            <id>banseon-maven2</id>\n            <name>banseon maven2</name>\n            <url>file://${basedir}/target/deploy</url>\n            <layout />\n        </repository>\n        \x3c!--æä»¶çå¿«ç§é¨ç½²å°åªéï¼å¦ææ²¡æéç½®è¯¥åç´ ï¼é»è®¤é¨ç½²å°repositoryåç´ éç½®çä»åºï¼åè§distributionManagement/repositoryåç´  --\x3e\n        <snapshotRepository>\n            <uniqueVersion />\n            <id>banseon-maven2</id>\n            <name>Banseon-maven2 Snapshot Repository</name>\n            <url>scp://svn.baidu.com/banseon:/usr/local/maven-snapshot</url>\n            <layout />\n        </snapshotRepository>\n        \x3c!--é¨ç½²é¡¹ç®çç½ç«éè¦çä¿¡æ¯ --\x3e\n        <site>\n            \x3c!--é¨ç½²ä½ç½®çå¯ä¸æ è¯ç¬¦ï¼ç¨æ¥å¹éç«ç¹åsettings.xmlæä»¶éçéç½® --\x3e\n            <id>banseon-site</id>\n            \x3c!--é¨ç½²ä½ç½®çåç§° --\x3e\n            <name>business api website</name>\n            \x3c!--é¨ç½²ä½ç½®çURLï¼æprotocol://hostname/pathå½¢å¼ --\x3e\n            <url>\n                scp://svn.baidu.com/banseon:/var/www/localhost/banseon-web\n            </url>\n        </site>\n        \x3c!--é¡¹ç®ä¸è½½é¡µé¢çURLãå¦ææ²¡æè¯¥åç´ ï¼ç¨æ·åºè¯¥åèä¸»é¡µãä½¿ç¨è¯¥åç´ çåå æ¯ï¼å¸®å©å®ä½é£äºä¸å¨ä»åºéçæä»¶ï¼ç±äºlicenseéå¶ï¼ã --\x3e\n        <downloadUrl />\n        \x3c!--å¦ææä»¶æäºæ°çgroup IDåartifact IDï¼æä»¶ç§»å°äºæ°çä½ç½®ï¼ï¼è¿éååºæä»¶çéå®ä½ä¿¡æ¯ã --\x3e\n        <relocation>\n            \x3c!--æä»¶æ°çgroup ID --\x3e\n            <groupId />\n            \x3c!--æä»¶æ°çartifact ID --\x3e\n            <artifactId />\n            \x3c!--æä»¶æ°ççæ¬å· --\x3e\n            <version />\n            \x3c!--æ¾ç¤ºç»ç¨æ·çï¼å³äºç§»å¨çé¢å¤ä¿¡æ¯ï¼ä¾å¦åå ã --\x3e\n            <message />\n        </relocation>\n        \x3c!-- ç»åºè¯¥æä»¶å¨è¿ç¨ä»åºçç¶æãä¸å¾å¨æ¬å°é¡¹ç®ä¸­è®¾ç½®è¯¥åç´ ï¼å ä¸ºè¿æ¯å·¥å·èªå¨æ´æ°çãææçå¼æï¼noneï¼é»è®¤ï¼ï¼convertedï¼ä»åºç®¡çåä» \n            Maven 1 POMè½¬æ¢è¿æ¥ï¼ï¼partnerï¼ç´æ¥ä»ä¼ä¼´Maven 2ä»åºåæ­¥è¿æ¥ï¼ï¼deployedï¼ä»Maven 2å®ä¾é¨ ç½²ï¼ï¼verifiedï¼è¢«æ ¸å®æ¶æ­£ç¡®çåæç»çï¼ã --\x3e\n        <status />\n    </distributionManagement>\n    \x3c!--ä»¥å¼æ¿ä»£åç§°ï¼Propertieså¯ä»¥å¨æ´ä¸ªPOMä¸­ä½¿ç¨ï¼ä¹å¯ä»¥ä½ä¸ºè§¦åæ¡ä»¶ï¼è§settings.xmléç½®æä»¶éactivationåç´ çè¯´æï¼ãæ ¼å¼æ¯<name>value</name>ã --\x3e\n    <properties />\n</project>\n',normalizedContent:'# maven pom.xmlåçæ ç­¾å¤§å¨è¯¦è§£\n\n\n# tagçè§£éå¦ä¸\n\n<project xmlns="http://maven.apache.org/pom/4.0.0" xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://maven.apache.org/pom/4.0.0http://maven.apache.org/maven-v4_0_0.xsd">\n    \x3c!--ç¶é¡¹ç®çåæ ãå¦æé¡¹ç®ä¸­æ²¡æè§å®æä¸ªåç´ çå¼ï¼é£ä¹ç¶é¡¹ç®ä¸­çå¯¹åºå¼å³ä¸ºé¡¹ç®çé»è®¤å¼ã åæ åæ¬group idï¼artifact idå \n        versionã --\x3e\n    <parent>\n        \x3c!--è¢«ç»§æ¿çç¶é¡¹ç®çæä»¶æ è¯ç¬¦ --\x3e\n        <artifactid />\n        \x3c!--è¢«ç»§æ¿çç¶é¡¹ç®çå¨çå¯ä¸æ è¯ç¬¦ --\x3e\n        <groupid />\n        \x3c!--è¢«ç»§æ¿çç¶é¡¹ç®ççæ¬ --\x3e\n        <version />\n        \x3c!-- ç¶é¡¹ç®çpom.xmlæä»¶çç¸å¯¹è·¯å¾ãç¸å¯¹è·¯å¾åè®¸ä½ éæ©ä¸ä¸ªä¸åçè·¯å¾ãé»è®¤å¼æ¯../pom.xmlãmavené¦åå¨æå»ºå½åé¡¹ç®çå°æ¹å¯»æ¾ç¶é¡¹ \n            ç®çpomï¼å¶æ¬¡å¨æä»¶ç³»ç»çè¿ä¸ªä½ç½®ï¼relativepathä½ç½®ï¼ï¼ç¶åå¨æ¬å°ä»åºï¼æåå¨è¿ç¨ä»åºå¯»æ¾ç¶é¡¹ç®çpomã --\x3e\n        <relativepath />\n    </parent>\n    \x3c!--å£°æé¡¹ç®æè¿°ç¬¦éµå¾ªåªä¸ä¸ªpomæ¨¡åçæ¬ãæ¨¡åæ¬èº«ççæ¬å¾å°æ¹åï¼è½ç¶å¦æ­¤ï¼ä½å®ä»ç¶æ¯å¿ä¸å¯å°çï¼è¿æ¯ä¸ºäºå½mavenå¼å¥äºæ°çç¹æ§æèå¶ä»æ¨¡ååæ´çæ¶åï¼ç¡®ä¿ç¨³å®æ§ã --\x3e\n    <modelversion>4.0.0</modelversion>\n    \x3c!--é¡¹ç®çå¨çå¯ä¸æ è¯ç¬¦ï¼éå¸¸ä½¿ç¨å¨éå®çåååºåè¯¥é¡¹ç®åå¶ä»é¡¹ç®ãå¹¶ä¸æå»ºæ¶çæçè·¯å¾ä¹æ¯ç±æ­¤çæï¼ å¦com.mycompany.appçæçç¸å¯¹è·¯å¾ä¸ºï¼/com/mycompany/app --\x3e\n    <groupid>asia.banseon</groupid>\n    \x3c!-- æä»¶çæ è¯ç¬¦ï¼å®ågroup idä¸èµ·å¯ä¸æ è¯ä¸ä¸ªæä»¶ãæ¢å¥è¯è¯´ï¼ä½ ä¸è½æä¸¤ä¸ªä¸åçé¡¹ç®æ¥æåæ ·çartifact idågroupidï¼å¨æä¸ª \n        ç¹å®çgroup idä¸ï¼artifact idä¹å¿é¡»æ¯å¯ä¸çãæä»¶æ¯é¡¹ç®äº§ççæä½¿ç¨çä¸ä¸ªä¸è¥¿ï¼mavenä¸ºé¡¹ç®äº§ççæä»¶åæ¬ï¼jarsï¼æº ç ï¼äºè¿å¶åå¸åwarsç­ã --\x3e\n    <artifactid>banseon-maven2</artifactid>\n    \x3c!--é¡¹ç®äº§ççæä»¶ç±»åï¼ä¾å¦jarãwarãearãpomãæä»¶å¯ä»¥åå»ºä»ä»¬èªå·±çæä»¶ç±»åï¼æä»¥åé¢åçä¸æ¯å¨é¨æä»¶ç±»å --\x3e\n    <packaging>jar</packaging>\n    \x3c!--é¡¹ç®å½åçæ¬ï¼æ ¼å¼ä¸º:ä¸»çæ¬.æ¬¡çæ¬.å¢éçæ¬-éå®çæ¬å· --\x3e\n    <version>1.0-snapshot</version>\n    \x3c!--é¡¹ç®çåç§°, mavenäº§ççææ¡£ç¨ --\x3e\n    <name>banseon-maven</name>\n    \x3c!--é¡¹ç®ä¸»é¡µçurl, mavenäº§ççææ¡£ç¨ --\x3e\n    <url>http://www.baidu.com/banseon</url>\n    \x3c!-- é¡¹ç®çè¯¦ç»æè¿°, maven äº§ççææ¡£ç¨ã å½è¿ä¸ªåç´ è½å¤ç¨htmlæ ¼å¼æè¿°æ¶ï¼ä¾å¦ï¼cdataä¸­çææ¬ä¼è¢«è§£æå¨å¿½ç¥ï¼å°±å¯ä»¥åå«htmlæ  \n        ç­¾ï¼ï¼ ä¸é¼å±ä½¿ç¨çº¯ææ¬æè¿°ãå¦æä½ éè¦ä¿®æ¹äº§ççwebç«ç¹çç´¢å¼é¡µé¢ï¼ä½ åºè¯¥ä¿®æ¹ä½ èªå·±çç´¢å¼é¡µæä»¶ï¼èä¸æ¯è°æ´è¿éçææ¡£ã --\x3e\n    <description>a maven project to study maven.</description>\n    \x3c!--æè¿°äºè¿ä¸ªé¡¹ç®æå»ºç¯å¢ä¸­çåææ¡ä»¶ã --\x3e\n    <prerequisites>\n        \x3c!--æå»ºè¯¥é¡¹ç®æä½¿ç¨è¯¥æä»¶æéè¦çmavençæä½çæ¬ --\x3e\n        <maven />\n    </prerequisites>\n    \x3c!--é¡¹ç®çé®é¢ç®¡çç³»ç»(bugzilla, jira, scarab,æä»»ä½ä½ åæ¬¢çé®é¢ç®¡çç³»ç»)çåç§°åurlï¼æ¬ä¾ä¸º jira --\x3e\n    <issuemanagement>\n        \x3c!--é®é¢ç®¡çç³»ç»ï¼ä¾å¦jiraï¼çåå­ï¼ --\x3e\n        <system>jira</system>\n        \x3c!--è¯¥é¡¹ç®ä½¿ç¨çé®é¢ç®¡çç³»ç»çurl --\x3e\n        <url>http://jira.baidu.com/banseon</url>\n    </issuemanagement>\n    \x3c!--é¡¹ç®æç»­éæä¿¡æ¯ --\x3e\n    <cimanagement>\n        \x3c!--æç»­éæç³»ç»çåå­ï¼ä¾å¦continuum --\x3e\n        <system />\n        \x3c!--è¯¥é¡¹ç®ä½¿ç¨çæç»­éæç³»ç»çurlï¼å¦ææç»­éæç³»ç»æwebæ¥å£çè¯ï¼ã --\x3e\n        <url />\n        \x3c!--æå»ºå®ææ¶ï¼éè¦éç¥çå¼åè/ç¨æ·çéç½®é¡¹ãåæ¬è¢«éç¥èä¿¡æ¯åéç¥æ¡ä»¶ï¼éè¯¯ï¼å¤±è´¥ï¼æåï¼è­¦åï¼ --\x3e\n        <notifiers>\n            \x3c!--éç½®ä¸ç§æ¹å¼ï¼å½æå»ºä¸­æ­æ¶ï¼ä»¥è¯¥æ¹å¼éç¥ç¨æ·/å¼åè --\x3e\n            <notifier>\n                \x3c!--ä¼ ééç¥çéå¾ --\x3e\n                <type />\n                \x3c!--åçéè¯¯æ¶æ¯å¦éç¥ --\x3e\n                <sendonerror />\n                \x3c!--æå»ºå¤±è´¥æ¶æ¯å¦éç¥ --\x3e\n                <sendonfailure />\n                \x3c!--æå»ºæåæ¶æ¯å¦éç¥ --\x3e\n                <sendonsuccess />\n                \x3c!--åçè­¦åæ¶æ¯å¦éç¥ --\x3e\n                <sendonwarning />\n                \x3c!--ä¸èµæä½¿ç¨ãéç¥åéå°åªé --\x3e\n                <address />\n                \x3c!--æ©å±éç½®é¡¹ --\x3e\n                <configuration />\n            </notifier>\n        </notifiers>\n    </cimanagement>\n    \x3c!--é¡¹ç®åå»ºå¹´ä»½ï¼4ä½æ°å­ãå½äº§ççæä¿¡æ¯æ¶éè¦ä½¿ç¨è¿ä¸ªå¼ã --\x3e\n    <inceptionyear />\n    \x3c!--é¡¹ç®ç¸å³é®ä»¶åè¡¨ä¿¡æ¯ --\x3e\n    <mailinglists>\n        \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®ç¸å³çææé®ä»¶åè¡¨ãèªå¨äº§ççç½ç«å¼ç¨è¿äºä¿¡æ¯ã --\x3e\n        <mailinglist>\n            \x3c!--é®ä»¶çåç§° --\x3e\n            <name>demo</name>\n            \x3c!--åéé®ä»¶çå°åæé¾æ¥ï¼å¦ææ¯é®ä»¶å°åï¼åå»ºææ¡£æ¶ï¼mailto: é¾æ¥ä¼è¢«èªå¨åå»º --\x3e\n            <post>banseon@126.com</post>\n            \x3c!--è®¢éé®ä»¶çå°åæé¾æ¥ï¼å¦ææ¯é®ä»¶å°åï¼åå»ºææ¡£æ¶ï¼mailto: é¾æ¥ä¼è¢«èªå¨åå»º --\x3e\n            <subscribe>banseon@126.com</subscribe>\n            \x3c!--åæ¶è®¢éé®ä»¶çå°åæé¾æ¥ï¼å¦ææ¯é®ä»¶å°åï¼åå»ºææ¡£æ¶ï¼mailto: é¾æ¥ä¼è¢«èªå¨åå»º --\x3e\n            <unsubscribe>banseon@126.com</unsubscribe>\n            \x3c!--ä½ å¯ä»¥æµè§é®ä»¶ä¿¡æ¯çurl --\x3e\n            <archive>http:/hi.baidu.com/banseon/demo/dev/</archive>\n        </mailinglist>\n    </mailinglists>\n    \x3c!--é¡¹ç®å¼åèåè¡¨ --\x3e\n    <developers>\n        \x3c!--æä¸ªé¡¹ç®å¼åèçä¿¡æ¯ --\x3e\n        <developer>\n            \x3c!--scméé¡¹ç®å¼åèçå¯ä¸æ è¯ç¬¦ --\x3e\n            <id>hello world</id>\n            \x3c!--é¡¹ç®å¼åèçå¨å --\x3e\n            <name>banseon</name>\n            \x3c!--é¡¹ç®å¼åèçemail --\x3e\n            <email>banseon@126.com</email>\n            \x3c!--é¡¹ç®å¼åèçä¸»é¡µçurl --\x3e\n            <url />\n            \x3c!--é¡¹ç®å¼åèå¨é¡¹ç®ä¸­æ®æ¼çè§è²ï¼è§è²åç´ æè¿°äºåç§è§è² --\x3e\n            <roles>\n                <role>project manager</role>\n                <role>architect</role>\n            </roles>\n            \x3c!--é¡¹ç®å¼åèæå±ç»ç» --\x3e\n            <organization>demo</organization>\n            \x3c!--é¡¹ç®å¼åèæå±ç»ç»çurl --\x3e\n            <organizationurl>http://hi.baidu.com/banseon</organizationurl>\n            \x3c!--é¡¹ç®å¼åèå±æ§ï¼å¦å³æ¶æ¶æ¯å¦ä½å¤çç­ --\x3e\n            <properties>\n                <dept>no</dept>\n            </properties>\n            \x3c!--é¡¹ç®å¼åèæå¨æ¶åºï¼ -11å°12èå´åçæ´æ°ã --\x3e\n            <timezone>-5</timezone>\n        </developer>\n    </developers>\n    \x3c!--é¡¹ç®çå¶ä»è´¡ç®èåè¡¨ --\x3e\n    <contributors>\n        \x3c!--é¡¹ç®çå¶ä»è´¡ç®èãåè§developers/developeråç´  --\x3e\n        <contributor>\n            <name />\n            <email />\n            <url />\n            <organization />\n            <organizationurl />\n            <roles />\n            <timezone />\n            <properties />\n        </contributor>\n    </contributors>\n    \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®æælicenseåè¡¨ã åºè¯¥åªååºè¯¥é¡¹ç®çlicenseåè¡¨ï¼ä¸è¦ååºä¾èµé¡¹ç®ç licenseåè¡¨ãå¦æååºå¤ä¸ªlicenseï¼ç¨æ·å¯ä»¥éæ©å®ä»¬ä¸­çä¸ä¸ªèä¸æ¯æ¥åæælicenseã --\x3e\n    <licenses>\n        \x3c!--æè¿°äºé¡¹ç®çlicenseï¼ç¨äºçæé¡¹ç®çwebç«ç¹çlicenseé¡µé¢ï¼å¶ä»ä¸äºæ¥è¡¨åvalidationä¹ä¼ç¨å°è¯¥åç´ ã --\x3e\n        <license>\n            \x3c!--licenseç¨äºæ³å¾ä¸çåç§° --\x3e\n            <name>apache 2</name>\n            \x3c!--å®æ¹çlicenseæ­£æé¡µé¢çurl --\x3e\n            <url>http://www.baidu.com/banseon/license-2.0.txt</url>\n            \x3c!--é¡¹ç®ååçä¸»è¦æ¹å¼ï¼ repoï¼å¯ä»¥ä»mavenåºä¸è½½ manualï¼ ç¨æ·å¿é¡»æå¨ä¸è½½åå®è£ä¾èµ --\x3e\n            <distribution>repo</distribution>\n            \x3c!--å³äºlicenseçè¡¥åä¿¡æ¯ --\x3e\n            <comments>a business-friendly oss license</comments>\n        </license>\n    </licenses>\n    \x3c!--scm(source control management)æ ç­¾åè®¸ä½ éç½®ä½ çä»£ç åºï¼ä¾maven webç«ç¹åå¶å®æä»¶ä½¿ç¨ã --\x3e\n    <scm>\n        \x3c!--scmçurl,è¯¥urlæè¿°äºçæ¬åºåå¦ä½è¿æ¥å°çæ¬åºãæ¬²ç¥è¯¦æï¼è¯·çscmsæä¾çurlæ ¼å¼ååè¡¨ãè¯¥è¿æ¥åªè¯»ã --\x3e\n        <connection>\n            scm:svn:http://svn.baidu.com/banseon/maven/banseon/banseon-maven2-trunk(dao-trunk)\n        </connection>\n        \x3c!--ç»å¼åèä½¿ç¨çï¼ç±»ä¼¼connectionåç´ ãå³è¯¥è¿æ¥ä¸ä»ä»åªè¯» --\x3e\n        <developerconnection>\n            scm:svn:http://svn.baidu.com/banseon/maven/banseon/dao-trunk\n        </developerconnection>\n        \x3c!--å½åä»£ç çæ ç­¾ï¼å¨å¼åé¶æ®µé»è®¤ä¸ºhead --\x3e\n        <tag />\n        \x3c!--æåé¡¹ç®çå¯æµè§scmåºï¼ä¾å¦viewvcæèfisheyeï¼çurlã --\x3e\n        <url>http://svn.baidu.com/banseon</url>\n    </scm>\n    \x3c!--æè¿°é¡¹ç®æå±ç»ç»çåç§å±æ§ãmavenäº§ççææ¡£ç¨ --\x3e\n    <organization>\n        \x3c!--ç»ç»çå¨å --\x3e\n        <name>demo</name>\n        \x3c!--ç»ç»ä¸»é¡µçurl --\x3e\n        <url>http://www.baidu.com/banseon</url>\n    </organization>\n    \x3c!--æå»ºé¡¹ç®éè¦çä¿¡æ¯ --\x3e\n    <build>\n        \x3c!--è¯¥åç´ è®¾ç½®äºé¡¹ç®æºç ç®å½ï¼å½æå»ºé¡¹ç®çæ¶åï¼æå»ºç³»ç»ä¼ç¼è¯ç®å½éçæºç ãè¯¥è·¯å¾æ¯ç¸å¯¹äºpom.xmlçç¸å¯¹è·¯å¾ã --\x3e\n        <sourcedirectory />\n        \x3c!--è¯¥åç´ è®¾ç½®äºé¡¹ç®èæ¬æºç ç®å½ï¼è¯¥ç®å½åæºç ç®å½ä¸åï¼ç»å¤§å¤æ°æåµä¸ï¼è¯¥ç®å½ä¸çåå®¹ ä¼è¢«æ·è´å°è¾åºç®å½(å ä¸ºèæ¬æ¯è¢«è§£éçï¼èä¸æ¯è¢«ç¼è¯ç)ã --\x3e\n        <scriptsourcedirectory />\n        \x3c!--è¯¥åç´ è®¾ç½®äºé¡¹ç®ååæµè¯ä½¿ç¨çæºç ç®å½ï¼å½æµè¯é¡¹ç®çæ¶åï¼æå»ºç³»ç»ä¼ç¼è¯ç®å½éçæºç ãè¯¥è·¯å¾æ¯ç¸å¯¹äºpom.xmlçç¸å¯¹è·¯å¾ã --\x3e\n        <testsourcedirectory />\n        \x3c!--è¢«ç¼è¯è¿çåºç¨ç¨åºclassæä»¶å­æ¾çç®å½ã --\x3e\n        <outputdirectory />\n        \x3c!--è¢«ç¼è¯è¿çæµè¯classæä»¶å­æ¾çç®å½ã --\x3e\n        <testoutputdirectory />\n        \x3c!--ä½¿ç¨æ¥èªè¯¥é¡¹ç®çä¸ç³»åæå»ºæ©å± --\x3e\n        <extensions>\n            \x3c!--æè¿°ä½¿ç¨å°çæå»ºæ©å±ã --\x3e\n            <extension>\n                \x3c!--æå»ºæ©å±çgroupid --\x3e\n                <groupid />\n                \x3c!--æå»ºæ©å±çartifactid --\x3e\n                <artifactid />\n                \x3c!--æå»ºæ©å±ççæ¬ --\x3e\n                <version />\n            </extension>\n        </extensions>\n        \x3c!--å½é¡¹ç®æ²¡æè§å®ç®æ ï¼maven2 å«åé¶æ®µï¼æ¶çé»è®¤å¼ --\x3e\n        <defaultgoal />\n        \x3c!--è¿ä¸ªåç´ æè¿°äºé¡¹ç®ç¸å³çææèµæºè·¯å¾åè¡¨ï¼ä¾å¦åé¡¹ç®ç¸å³çå±æ§æä»¶ï¼è¿äºèµæºè¢«åå«å¨æç»çæåæä»¶éã --\x3e\n        <resources>\n            \x3c!--è¿ä¸ªåç´ æè¿°äºé¡¹ç®ç¸å³ææµè¯ç¸å³çææèµæºè·¯å¾ --\x3e\n            <resource>\n                \x3c!-- æè¿°äºèµæºçç®æ è·¯å¾ãè¯¥è·¯å¾ç¸å¯¹target/classesç®å½ï¼ä¾å¦${project.build.outputdirectory}ï¼ãä¸¾ä¸ªä¾ \n                    å­ï¼å¦æä½ æ³èµæºå¨ç¹å®çåé(org.apache.maven.messages)ï¼ä½ å°±å¿é¡»è¯¥åç´ è®¾ç½®ä¸ºorg/apache/maven /messagesãç¶èï¼å¦æä½ åªæ¯æ³æèµæºæ¾å°æºç ç®å½ç»æéï¼å°±ä¸éè¦è¯¥éç½®ã --\x3e\n                <targetpath />\n                \x3c!--æ¯å¦ä½¿ç¨åæ°å¼ä»£æ¿åæ°åãåæ°å¼åèªpropertiesåç´ æèæä»¶ééç½®çå±æ§ï¼æä»¶å¨filtersåç´ éååºã --\x3e\n                <filtering />\n                \x3c!--æè¿°å­æ¾èµæºçç®å½ï¼è¯¥è·¯å¾ç¸å¯¹pomè·¯å¾ --\x3e\n                <directory />\n                \x3c!--åå«çæ¨¡å¼åè¡¨ï¼ä¾å¦**/*.xml. --\x3e\n                <includes />\n                \x3c!--æé¤çæ¨¡å¼åè¡¨ï¼ä¾å¦**/*.xml --\x3e\n                <excludes />\n            </resource>\n        </resources>\n        \x3c!--è¿ä¸ªåç´ æè¿°äºååæµè¯ç¸å³çææèµæºè·¯å¾ï¼ä¾å¦åååæµè¯ç¸å³çå±æ§æä»¶ã --\x3e\n        <testresources>\n            \x3c!--è¿ä¸ªåç´ æè¿°äºæµè¯ç¸å³çææèµæºè·¯å¾ï¼åè§build/resources/resourceåç´ çè¯´æ --\x3e\n            <testresource>\n                <targetpath />\n                <filtering />\n                <directory />\n                <includes />\n                <excludes />\n            </testresource>\n        </testresources>\n        \x3c!--æå»ºäº§ççæææä»¶å­æ¾çç®å½ --\x3e\n        <directory />\n        \x3c!--äº§ççæä»¶çæä»¶åï¼é»è®¤å¼æ¯${artifactid}-${version}ã --\x3e\n        <finalname />\n        \x3c!--å½filteringå¼å³æå¼æ¶ï¼ä½¿ç¨å°çè¿æ»¤å¨å±æ§æä»¶åè¡¨ --\x3e\n        <filters />\n        \x3c!--å­é¡¹ç®å¯ä»¥å¼ç¨çé»è®¤æä»¶ä¿¡æ¯ãè¯¥æä»¶éç½®é¡¹ç´å°è¢«å¼ç¨æ¶æä¼è¢«è§£ææç»å®å°çå½å¨æãç»å®æä»¶çä»»ä½æ¬å°éç½®é½ä¼è¦çè¿éçéç½® --\x3e\n        <pluginmanagement>\n            \x3c!--ä½¿ç¨çæä»¶åè¡¨ ã --\x3e\n            <plugins>\n                \x3c!--pluginåç´ åå«æè¿°æä»¶æéè¦çä¿¡æ¯ã --\x3e\n                <plugin>\n                    \x3c!--æä»¶å¨ä»åºéçgroup id --\x3e\n                    <groupid />\n                    \x3c!--æä»¶å¨ä»åºéçartifact id --\x3e\n                    <artifactid />\n                    \x3c!--è¢«ä½¿ç¨çæä»¶ççæ¬ï¼æçæ¬èå´ï¼ --\x3e\n                    <version />\n                    \x3c!--æ¯å¦ä»è¯¥æä»¶ä¸è½½mavenæ©å±ï¼ä¾å¦æååç±»åå¤çå¨ï¼ï¼ç±äºæ§è½åå ï¼åªæå¨çéè¦ä¸è½½æ¶ï¼è¯¥åç´ æè¢«è®¾ç½®æenabledã --\x3e\n                    <extensions />\n                    \x3c!--å¨æå»ºçå½å¨æä¸­æ§è¡ä¸ç»ç®æ çéç½®ãæ¯ä¸ªç®æ å¯è½æä¸åçéç½®ã --\x3e\n                    <executions>\n                        \x3c!--executionåç´ åå«äºæä»¶æ§è¡éè¦çä¿¡æ¯ --\x3e\n                        <execution>\n                            \x3c!--æ§è¡ç®æ çæ è¯ç¬¦ï¼ç¨äºæ è¯æå»ºè¿ç¨ä¸­çç®æ ï¼æèå¹éç»§æ¿è¿ç¨ä¸­éè¦åå¹¶çæ§è¡ç®æ  --\x3e\n                            <id />\n                            \x3c!--ç»å®äºç®æ çæå»ºçå½å¨æé¶æ®µï¼å¦æçç¥ï¼ç®æ ä¼è¢«ç»å®å°æºæ°æ®ééç½®çé»è®¤é¶æ®µ --\x3e\n                            <phase />\n                            \x3c!--éç½®çæ§è¡ç®æ  --\x3e\n                            <goals />\n                            \x3c!--éç½®æ¯å¦è¢«ä¼ æ­å°å­pom --\x3e\n                            <inherited />\n                            \x3c!--ä½ä¸ºdomå¯¹è±¡çéç½® --\x3e\n                            <configuration />\n                        </execution>\n                    </executions>\n                    \x3c!--é¡¹ç®å¼å¥æä»¶æéè¦çé¢å¤ä¾èµ --\x3e\n                    <dependencies>\n                        \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                        <dependency>\n                            ......\n                        </dependency>\n                    </dependencies>\n                    \x3c!--ä»»ä½éç½®æ¯å¦è¢«ä¼ æ­å°å­é¡¹ç® --\x3e\n                    <inherited />\n                    \x3c!--ä½ä¸ºdomå¯¹è±¡çéç½® --\x3e\n                    <configuration />\n                </plugin>\n            </plugins>\n        </pluginmanagement>\n        \x3c!--ä½¿ç¨çæä»¶åè¡¨ --\x3e\n        <plugins>\n            \x3c!--åè§build/pluginmanagement/plugins/pluginåç´  --\x3e\n            <plugin>\n                <groupid />\n                <artifactid />\n                <version />\n                <extensions />\n                <executions>\n                    <execution>\n                        <id />\n                        <phase />\n                        <goals />\n                        <inherited />\n                        <configuration />\n                    </execution>\n                </executions>\n                <dependencies>\n                    \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                    <dependency>\n                        ......\n                    </dependency>\n                </dependencies>\n                <goals />\n                <inherited />\n                <configuration />\n            </plugin>\n        </plugins>\n    </build>\n    \x3c!--å¨åçé¡¹ç®æå»ºprofileï¼å¦æè¢«æ¿æ´»ï¼ä¼ä¿®æ¹æå»ºå¤ç --\x3e\n    <profiles>\n        \x3c!--æ ¹æ®ç¯å¢åæ°æå½ä»¤è¡åæ°æ¿æ´»æä¸ªæå»ºå¤ç --\x3e\n        <profile>\n            \x3c!--æå»ºéç½®çå¯ä¸æ è¯ç¬¦ãå³ç¨äºå½ä»¤è¡æ¿æ´»ï¼ä¹ç¨äºå¨ç»§æ¿æ¶åå¹¶å·æç¸åæ è¯ç¬¦çprofileã --\x3e\n            <id />\n            \x3c!--èªå¨è§¦åprofileçæ¡ä»¶é»è¾ãactivationæ¯profileçå¼å¯é¥åãprofileçåéæ¥èªäºå® è½å¤å¨æäºç¹å®çç¯å¢ä¸­èªå¨ä½¿ç¨æäºç¹å®çå¼ï¼è¿äºç¯å¢éè¿activationåç´ æå®ãactivationåç´ å¹¶ä¸æ¯æ¿æ´»profileçå¯ä¸æ¹å¼ã --\x3e\n            <activation>\n                \x3c!--profileé»è®¤æ¯å¦æ¿æ´»çæ å¿ --\x3e\n                <activebydefault />\n                \x3c!--å½å¹éçjdkè¢«æ£æµå°ï¼profileè¢«æ¿æ´»ãä¾å¦ï¼1.4æ¿æ´»jdk1.4ï¼1.4.0_2ï¼è!1.4æ¿æ´»ææçæ¬ä¸æ¯ä»¥1.4å¼å¤´çjdkã --\x3e\n                <jdk />\n                \x3c!--å½å¹éçæä½ç³»ç»å±æ§è¢«æ£æµå°ï¼profileè¢«æ¿æ´»ãosåç´ å¯ä»¥å®ä¹ä¸äºæä½ç³»ç»ç¸å³çå±æ§ã --\x3e\n                <os>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»çåå­ --\x3e\n                    <name>windows xp</name>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»æå±å®¶æ(å¦ \'windows\') --\x3e\n                    <family>windows</family>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»ä½ç³»ç»æ --\x3e\n                    <arch>x86</arch>\n                    \x3c!--æ¿æ´»profileçæä½ç³»ç»çæ¬ --\x3e\n                    <version>5.1.2600</version>\n                </os>\n                \x3c!--å¦æmavenæ£æµå°æä¸ä¸ªå±æ§ï¼å¶å¼å¯ä»¥å¨pomä¸­éè¿${åç§°}å¼ç¨ï¼ï¼å¶æ¥æå¯¹åºçåç§°åå¼ï¼profileå°±ä¼è¢«æ¿æ´»ãå¦æå¼ å­æ®µæ¯ç©ºçï¼é£ä¹å­å¨å±æ§åç§°å­æ®µå°±ä¼æ¿æ´»profileï¼å¦åæåºåå¤§å°åæ¹å¼å¹éå±æ§å¼å­æ®µ --\x3e\n                <property>\n                    \x3c!--æ¿æ´»profileçå±æ§çåç§° --\x3e\n                    <name>mavenversion</name>\n                    \x3c!--æ¿æ´»profileçå±æ§çå¼ --\x3e\n                    <value>2.0.3</value>\n                </property>\n                \x3c!--æä¾ä¸ä¸ªæä»¶åï¼éè¿æ£æµè¯¥æä»¶çå­å¨æä¸å­å¨æ¥æ¿æ´»profileãmissingæ£æ¥æä»¶æ¯å¦å­å¨ï¼å¦æä¸å­å¨åæ¿æ´» profileãå¦ä¸æ¹é¢ï¼existsåä¼æ£æ¥æä»¶æ¯å¦å­å¨ï¼å¦æå­å¨åæ¿æ´»profileã --\x3e\n                <file>\n                    \x3c!--å¦ææå®çæä»¶å­å¨ï¼åæ¿æ´»profileã --\x3e\n                    <exists>/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/\n                    </exists>\n                    \x3c!--å¦ææå®çæä»¶ä¸å­å¨ï¼åæ¿æ´»profileã --\x3e\n                    <missing>/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/\n                    </missing>\n                </file>\n            </activation>\n            \x3c!--æå»ºé¡¹ç®æéè¦çä¿¡æ¯ãåè§buildåç´  --\x3e\n            <build>\n                <defaultgoal />\n                <resources>\n                    <resource>\n                        <targetpath />\n                        <filtering />\n                        <directory />\n                        <includes />\n                        <excludes />\n                    </resource>\n                </resources>\n                <testresources>\n                    <testresource>\n                        <targetpath />\n                        <filtering />\n                        <directory />\n                        <includes />\n                        <excludes />\n                    </testresource>\n                </testresources>\n                <directory />\n                <finalname />\n                <filters />\n                <pluginmanagement>\n                    <plugins>\n                        \x3c!--åè§build/pluginmanagement/plugins/pluginåç´  --\x3e\n                        <plugin>\n                            <groupid />\n                            <artifactid />\n                            <version />\n                            <extensions />\n                            <executions>\n                                <execution>\n                                    <id />\n                                    <phase />\n                                    <goals />\n                                    <inherited />\n                                    <configuration />\n                                </execution>\n                            </executions>\n                            <dependencies>\n                                \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                                <dependency>\n                                    ......\n                                </dependency>\n                            </dependencies>\n                            <goals />\n                            <inherited />\n                            <configuration />\n                        </plugin>\n                    </plugins>\n                </pluginmanagement>\n                <plugins>\n                    \x3c!--åè§build/pluginmanagement/plugins/pluginåç´  --\x3e\n                    <plugin>\n                        <groupid />\n                        <artifactid />\n                        <version />\n                        <extensions />\n                        <executions>\n                            <execution>\n                                <id />\n                                <phase />\n                                <goals />\n                                <inherited />\n                                <configuration />\n                            </execution>\n                        </executions>\n                        <dependencies>\n                            \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                            <dependency>\n                                ......\n                            </dependency>\n                        </dependencies>\n                        <goals />\n                        <inherited />\n                        <configuration />\n                    </plugin>\n                </plugins>\n            </build>\n            \x3c!--æ¨¡åï¼ææ¶ç§°ä½å­é¡¹ç®ï¼ è¢«æå»ºæé¡¹ç®çä¸é¨åãååºçæ¯ä¸ªæ¨¡ååç´ æ¯æåè¯¥æ¨¡åçç®å½çç¸å¯¹è·¯å¾ --\x3e\n            <modules />\n            \x3c!--åç°ä¾èµåæ©å±çè¿ç¨ä»åºåè¡¨ã --\x3e\n            <repositories>\n                \x3c!--åè§repositories/repositoryåç´  --\x3e\n                <repository>\n                    <releases>\n                        <enabled />\n                        <updatepolicy />\n                        <checksumpolicy />\n                    </releases>\n                    <snapshots>\n                        <enabled />\n                        <updatepolicy />\n                        <checksumpolicy />\n                    </snapshots>\n                    <id />\n                    <name />\n                    <url />\n                    <layout />\n                </repository>\n            </repositories>\n            \x3c!--åç°æä»¶çè¿ç¨ä»åºåè¡¨ï¼è¿äºæä»¶ç¨äºæå»ºåæ¥è¡¨ --\x3e\n            <pluginrepositories>\n                \x3c!--åå«éè¦è¿æ¥å°è¿ç¨æä»¶ä»åºçä¿¡æ¯.åè§repositories/repositoryåç´  --\x3e\n                <pluginrepository>\n                    <releases>\n                        <enabled />\n                        <updatepolicy />\n                        <checksumpolicy />\n                    </releases>\n                    <snapshots>\n                        <enabled />\n                        <updatepolicy />\n                        <checksumpolicy />\n                    </snapshots>\n                    <id />\n                    <name />\n                    <url />\n                    <layout />\n                </pluginrepository>\n            </pluginrepositories>\n            \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®ç¸å³çææä¾èµã è¿äºä¾èµç»æäºé¡¹ç®æå»ºè¿ç¨ä¸­çä¸ä¸ªä¸ªç¯èãå®ä»¬èªå¨ä»é¡¹ç®å®ä¹çä»åºä¸­ä¸è½½ãè¦è·åæ´å¤ä¿¡æ¯ï¼è¯·çé¡¹ç®ä¾èµæºå¶ã --\x3e\n            <dependencies>\n                \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                <dependency>\n                    ......\n                </dependency>\n            </dependencies>\n            \x3c!--ä¸èµæä½¿ç¨. ç°å¨mavenå¿½ç¥è¯¥åç´ . --\x3e\n            <reports />\n            \x3c!--è¯¥åç´ åæ¬ä½¿ç¨æ¥è¡¨æä»¶äº§çæ¥è¡¨çè§èãå½ç¨æ·æ§è¡âmvn siteâï¼è¿äºæ¥è¡¨å°±ä¼è¿è¡ã å¨é¡µé¢å¯¼èªæ è½çå°æææ¥è¡¨çé¾æ¥ãåè§reportingåç´  --\x3e\n            <reporting>\n                ......\n            </reporting>\n            \x3c!--åè§dependencymanagementåç´  --\x3e\n            <dependencymanagement>\n                <dependencies>\n                    \x3c!--åè§dependencies/dependencyåç´  --\x3e\n                    <dependency>\n                        ......\n                    </dependency>\n                </dependencies>\n            </dependencymanagement>\n            \x3c!--åè§distributionmanagementåç´  --\x3e\n            <distributionmanagement>\n                ......\n            </distributionmanagement>\n            \x3c!--åè§propertiesåç´  --\x3e\n            <properties />\n        </profile>\n    </profiles>\n    \x3c!--æ¨¡åï¼ææ¶ç§°ä½å­é¡¹ç®ï¼ è¢«æå»ºæé¡¹ç®çä¸é¨åãååºçæ¯ä¸ªæ¨¡ååç´ æ¯æåè¯¥æ¨¡åçç®å½çç¸å¯¹è·¯å¾ --\x3e\n    <modules />\n    \x3c!--åç°ä¾èµåæ©å±çè¿ç¨ä»åºåè¡¨ã --\x3e\n    <repositories>\n        \x3c!--åå«éè¦è¿æ¥å°è¿ç¨ä»åºçä¿¡æ¯ --\x3e\n        <repository>\n            \x3c!--å¦ä½å¤çè¿ç¨ä»åºéåå¸çæ¬çä¸è½½ --\x3e\n            <releases>\n                \x3c!--trueæèfalseè¡¨ç¤ºè¯¥ä»åºæ¯å¦ä¸ºä¸è½½æç§ç±»åæä»¶ï¼åå¸çï¼å¿«ç§çï¼å¼å¯ã --\x3e\n                <enabled />\n                \x3c!--è¯¥åç´ æå®æ´æ°åççé¢çãmavenä¼æ¯è¾æ¬å°pomåè¿ç¨pomçæ¶é´æ³ãè¿éçéé¡¹æ¯ï¼alwaysï¼ä¸ç´ï¼ï¼dailyï¼é»è®¤ï¼æ¯æ¥ï¼ï¼intervalï¼xï¼è¿éxæ¯ä»¥åéä¸ºåä½çæ¶é´é´éï¼ï¼æèneverï¼ä»ä¸ï¼ã --\x3e\n                <updatepolicy />\n                \x3c!--å½mavenéªè¯æä»¶æ ¡éªæä»¶å¤±è´¥æ¶è¯¥æä¹åï¼ignoreï¼å¿½ç¥ï¼ï¼failï¼å¤±è´¥ï¼ï¼æèwarnï¼è­¦åï¼ã --\x3e\n                <checksumpolicy />\n            </releases>\n            \x3c!-- å¦ä½å¤çè¿ç¨ä»åºéå¿«ç§çæ¬çä¸è½½ãæäºreleasesåsnapshotsè¿ä¸¤ç»éç½®ï¼pomå°±å¯ä»¥å¨æ¯ä¸ªåç¬çä»åºä¸­ï¼ä¸ºæ¯ç§ç±»åçæä»¶éåä¸åç \n                ç­ç¥ãä¾å¦ï¼å¯è½æäººä¼å³å®åªä¸ºå¼åç®çå¼å¯å¯¹å¿«ç§çæ¬ä¸è½½çæ¯æãåè§repositories/repository/releasesåç´  --\x3e\n            <snapshots>\n                <enabled />\n                <updatepolicy />\n                <checksumpolicy />\n            </snapshots>\n            \x3c!--è¿ç¨ä»åºå¯ä¸æ è¯ç¬¦ãå¯ä»¥ç¨æ¥å¹éå¨settings.xmlæä»¶ééç½®çè¿ç¨ä»åº --\x3e\n            <id>banseon-repository-proxy</id>\n            \x3c!--è¿ç¨ä»åºåç§° --\x3e\n            <name>banseon-repository-proxy</name>\n            \x3c!--è¿ç¨ä»åºurlï¼æprotocol://hostname/pathå½¢å¼ --\x3e\n            <url>http://192.168.1.169:9999/repository/</url>\n            \x3c!-- ç¨äºå®ä½åæåºæä»¶çä»åºå¸å±ç±»å-å¯ä»¥æ¯defaultï¼é»è®¤ï¼æèlegacyï¼éçï¼ãmaven 2ä¸ºå¶ä»åºæä¾äºä¸ä¸ªé»è®¤çå¸å±ï¼ç¶ \n                èï¼maven 1.xæä¸ç§ä¸åçå¸å±ãæä»¬å¯ä»¥ä½¿ç¨è¯¥åç´ æå®å¸å±æ¯defaultï¼é»è®¤ï¼è¿æ¯legacyï¼éçï¼ã --\x3e\n            <layout>default</layout>\n        </repository>\n    </repositories>\n    \x3c!--åç°æä»¶çè¿ç¨ä»åºåè¡¨ï¼è¿äºæä»¶ç¨äºæå»ºåæ¥è¡¨ --\x3e\n    <pluginrepositories>\n        \x3c!--åå«éè¦è¿æ¥å°è¿ç¨æä»¶ä»åºçä¿¡æ¯.åè§repositories/repositoryåç´  --\x3e\n        <pluginrepository>\n            ......\n        </pluginrepository>\n    </pluginrepositories>\n\n    \x3c!--è¯¥åç´ æè¿°äºé¡¹ç®ç¸å³çææä¾èµã è¿äºä¾èµç»æäºé¡¹ç®æå»ºè¿ç¨ä¸­çä¸ä¸ªä¸ªç¯èãå®ä»¬èªå¨ä»é¡¹ç®å®ä¹çä»åºä¸­ä¸è½½ãè¦è·åæ´å¤ä¿¡æ¯ï¼è¯·çé¡¹ç®ä¾èµæºå¶ã --\x3e\n    <dependencies>\n        <dependency>\n            \x3c!--ä¾èµçgroup id --\x3e\n            <groupid>org.apache.maven</groupid>\n            \x3c!--ä¾èµçartifact id --\x3e\n            <artifactid>maven-artifact</artifactid>\n            \x3c!--ä¾èµççæ¬å·ã å¨maven 2é, ä¹å¯ä»¥éç½®æçæ¬å·çèå´ã --\x3e\n            <version>3.8.1</version>\n            \x3c!-- ä¾èµç±»åï¼é»è®¤ç±»åæ¯jarãå®éå¸¸è¡¨ç¤ºä¾èµçæä»¶çæ©å±åï¼ä½ä¹æä¾å¤ãä¸ä¸ªç±»åå¯ä»¥è¢«æ å°æå¦å¤ä¸ä¸ªæ©å±åæåç±»å¨ãç±»åç»å¸¸åä½¿ç¨çæåæ¹å¼å¯¹åºï¼ \n                å°½ç®¡è¿ä¹æä¾å¤ãä¸äºç±»åçä¾å­ï¼jarï¼warï¼ejb-clientåtest-jarãå¦æè®¾ç½®extensionsä¸º trueï¼å°±å¯ä»¥å¨ pluginéå®ä¹æ°çç±»åãæä»¥åé¢çç±»åçä¾å­ä¸å®æ´ã --\x3e\n            <type>jar</type>\n            \x3c!-- ä¾èµçåç±»å¨ãåç±»å¨å¯ä»¥åºåå±äºåä¸ä¸ªpomï¼ä½ä¸åæå»ºæ¹å¼çæä»¶ãåç±»å¨åè¢«éå å°æä»¶åççæ¬å·åé¢ãä¾å¦ï¼å¦æä½ æ³è¦æå»ºä¸¤ä¸ªåç¬çæä»¶æ \n                jarï¼ä¸ä¸ªä½¿ç¨java 1.4ç¼è¯å¨ï¼å¦ä¸ä¸ªä½¿ç¨java 6ç¼è¯å¨ï¼ä½ å°±å¯ä»¥ä½¿ç¨åç±»å¨æ¥çæä¸¤ä¸ªåç¬çjaræä»¶ã --\x3e\n            <classifier></classifier>\n            \x3c!--ä¾èµèå´ãå¨é¡¹ç®åå¸è¿ç¨ä¸­ï¼å¸®å©å³å®åªäºæä»¶è¢«åæ¬è¿æ¥ãæ¬²ç¥è¯¦æè¯·åèä¾èµæºå¶ã - compile ï¼é»è®¤èå´ï¼ç¨äºç¼è¯ - providedï¼ç±»ä¼¼äºç¼è¯ï¼ä½æ¯æä½ æå¾jdkæèå®¹å¨æä¾ï¼ç±»ä¼¼äºclasspath \n                - runtime: å¨æ§è¡æ¶éè¦ä½¿ç¨ - test: ç¨äºtestä»»å¡æ¶ä½¿ç¨ - system: éè¦å¤å¨æä¾ç¸åºçåç´ ãéè¿systempathæ¥åå¾ \n                - systempath: ä»ç¨äºèå´ä¸ºsystemãæä¾ç¸åºçè·¯å¾ - optional: å½é¡¹ç®èªèº«è¢«ä¾èµæ¶ï¼æ æ³¨ä¾èµæ¯å¦ä¼ éãç¨äºè¿ç»­ä¾èµæ¶ä½¿ç¨ --\x3e\n            <scope>test</scope>\n            \x3c!--ä»ä¾systemèå´ä½¿ç¨ãæ³¨æï¼ä¸é¼å±ä½¿ç¨è¿ä¸ªåç´ ï¼å¹¶ä¸å¨æ°ççæ¬ä¸­è¯¥åç´ å¯è½è¢«è¦çæãè¯¥åç´ ä¸ºä¾èµè§å®äºæä»¶ç³»ç»ä¸çè·¯å¾ãéè¦ç»å¯¹è·¯å¾èä¸æ¯ç¸å¯¹è·¯å¾ãæ¨èä½¿ç¨å±æ§å¹éç»å¯¹è·¯å¾ï¼ä¾å¦${java.home}ã --\x3e\n            <systempath></systempath>\n            \x3c!--å½è®¡ç®ä¼ éä¾èµæ¶ï¼ ä»ä¾èµæä»¶åè¡¨éï¼ååºè¢«æé¤çä¾èµæä»¶éãå³åè¯mavenä½ åªä¾èµæå®çé¡¹ç®ï¼ä¸ä¾èµé¡¹ç®çä¾èµãæ­¤åç´ ä¸»è¦ç¨äºè§£å³çæ¬å²çªé®é¢ --\x3e\n            <exclusions>\n                <exclusion>\n                    <artifactid>spring-core</artifactid>\n                    <groupid>org.springframework</groupid>\n                </exclusion>\n            </exclusions>\n            \x3c!--å¯éä¾èµï¼å¦æä½ å¨é¡¹ç®bä¸­æcä¾èµå£°æä¸ºå¯éï¼ä½ å°±éè¦å¨ä¾èµäºbçé¡¹ç®ï¼ä¾å¦é¡¹ç®aï¼ä¸­æ¾å¼çå¼ç¨å¯¹cçä¾èµãå¯éä¾èµé»æ­ä¾èµçä¼ éæ§ã --\x3e\n            <optional>true</optional>\n        </dependency>\n    </dependencies>\n    \x3c!--ä¸èµæä½¿ç¨. ç°å¨mavenå¿½ç¥è¯¥åç´ . --\x3e\n    <reports></reports>\n    \x3c!--è¯¥åç´ æè¿°ä½¿ç¨æ¥è¡¨æä»¶äº§çæ¥è¡¨çè§èãå½ç¨æ·æ§è¡âmvn siteâï¼è¿äºæ¥è¡¨å°±ä¼è¿è¡ã å¨é¡µé¢å¯¼èªæ è½çå°æææ¥è¡¨çé¾æ¥ã --\x3e\n    <reporting>\n        \x3c!--trueï¼åï¼ç½ç«ä¸åæ¬é»è®¤çæ¥è¡¨ãè¿åæ¬âé¡¹ç®ä¿¡æ¯âèåä¸­çæ¥è¡¨ã --\x3e\n        <excludedefaults />\n        \x3c!--ææäº§ççæ¥è¡¨å­æ¾å°åªéãé»è®¤å¼æ¯${project.build.directory}/siteã --\x3e\n        <outputdirectory />\n        \x3c!--ä½¿ç¨çæ¥è¡¨æä»¶åä»ä»¬çéç½®ã --\x3e\n        <plugins>\n            \x3c!--pluginåç´ åå«æè¿°æ¥è¡¨æä»¶éè¦çä¿¡æ¯ --\x3e\n            <plugin>\n                \x3c!--æ¥è¡¨æä»¶å¨ä»åºéçgroup id --\x3e\n                <groupid />\n                \x3c!--æ¥è¡¨æä»¶å¨ä»åºéçartifact id --\x3e\n                <artifactid />\n                \x3c!--è¢«ä½¿ç¨çæ¥è¡¨æä»¶ççæ¬ï¼æçæ¬èå´ï¼ --\x3e\n                <version />\n                \x3c!--ä»»ä½éç½®æ¯å¦è¢«ä¼ æ­å°å­é¡¹ç® --\x3e\n                <inherited />\n                \x3c!--æ¥è¡¨æä»¶çéç½® --\x3e\n                <configuration />\n                \x3c!--ä¸ç»æ¥è¡¨çå¤éè§èï¼æ¯ä¸ªè§èå¯è½æä¸åçéç½®ãä¸ä¸ªè§èï¼æ¥è¡¨éï¼å¯¹åºä¸ä¸ªæ§è¡ç®æ  ãä¾å¦ï¼æ1ï¼2ï¼3ï¼4ï¼5ï¼6ï¼7ï¼8ï¼9ä¸ªæ¥è¡¨ã1ï¼2ï¼5ææaæ¥è¡¨éï¼å¯¹åºä¸ä¸ªæ§è¡ç®æ ã2ï¼5ï¼8ææbæ¥è¡¨éï¼å¯¹åºå¦ä¸ä¸ªæ§è¡ç®æ  --\x3e\n                <reportsets>\n                    \x3c!--è¡¨ç¤ºæ¥è¡¨çä¸ä¸ªéåï¼ä»¥åäº§çè¯¥éåçéç½® --\x3e\n                    <reportset>\n                        \x3c!--æ¥è¡¨éåçå¯ä¸æ è¯ç¬¦ï¼pomç»§æ¿æ¶ç¨å° --\x3e\n                        <id />\n                        \x3c!--äº§çæ¥è¡¨éåæ¶ï¼è¢«ä½¿ç¨çæ¥è¡¨çéç½® --\x3e\n                        <configuration />\n                        \x3c!--éç½®æ¯å¦è¢«ç»§æ¿å°å­poms --\x3e\n                        <inherited />\n                        \x3c!--è¿ä¸ªéåéä½¿ç¨å°åªäºæ¥è¡¨ --\x3e\n                        <reports />\n                    </reportset>\n                </reportsets>\n            </plugin>\n        </plugins>\n    </reporting>\n    \x3c!-- ç»§æ¿èªè¯¥é¡¹ç®çææå­é¡¹ç®çé»è®¤ä¾èµä¿¡æ¯ãè¿é¨åçä¾èµä¿¡æ¯ä¸ä¼è¢«ç«å³è§£æ,èæ¯å½å­é¡¹ç®å£°æä¸ä¸ªä¾èµï¼å¿é¡»æè¿°group idå artifact \n        idä¿¡æ¯ï¼ï¼å¦ægroup idåartifact idä»¥å¤çä¸äºä¿¡æ¯æ²¡ææè¿°ï¼åéè¿group idåartifact id å¹éå°è¿éçä¾èµï¼å¹¶ä½¿ç¨è¿éçä¾èµä¿¡æ¯ã --\x3e\n    <dependencymanagement>\n        <dependencies>\n            \x3c!--åè§dependencies/dependencyåç´  --\x3e\n            <dependency>\n                ......\n            </dependency>\n        </dependencies>\n    </dependencymanagement>\n    \x3c!--é¡¹ç®ååä¿¡æ¯ï¼å¨æ§è¡mvn deployåè¡¨ç¤ºè¦åå¸çä½ç½®ãæäºè¿äºä¿¡æ¯å°±å¯ä»¥æç½ç«é¨ç½²å°è¿ç¨æå¡å¨æèææä»¶é¨ç½²å°è¿ç¨ä»åºã --\x3e\n    <distributionmanagement>\n        \x3c!--é¨ç½²é¡¹ç®äº§ççæä»¶å°è¿ç¨ä»åºéè¦çä¿¡æ¯ --\x3e\n        <repository>\n            \x3c!--æ¯åéç»å¿«ç§ä¸ä¸ªå¯ä¸ççæ¬å·ï¼ç±æ¶é´æ³åæå»ºæµæ°´å·ï¼ï¼è¿æ¯æ¯æ¬¡é½ä½¿ç¨ç¸åççæ¬å·ï¼åè§repositories/repositoryåç´  --\x3e\n            <uniqueversion />\n            <id>banseon-maven2</id>\n            <name>banseon maven2</name>\n            <url>file://${basedir}/target/deploy</url>\n            <layout />\n        </repository>\n        \x3c!--æä»¶çå¿«ç§é¨ç½²å°åªéï¼å¦ææ²¡æéç½®è¯¥åç´ ï¼é»è®¤é¨ç½²å°repositoryåç´ éç½®çä»åºï¼åè§distributionmanagement/repositoryåç´  --\x3e\n        <snapshotrepository>\n            <uniqueversion />\n            <id>banseon-maven2</id>\n            <name>banseon-maven2 snapshot repository</name>\n            <url>scp://svn.baidu.com/banseon:/usr/local/maven-snapshot</url>\n            <layout />\n        </snapshotrepository>\n        \x3c!--é¨ç½²é¡¹ç®çç½ç«éè¦çä¿¡æ¯ --\x3e\n        <site>\n            \x3c!--é¨ç½²ä½ç½®çå¯ä¸æ è¯ç¬¦ï¼ç¨æ¥å¹éç«ç¹åsettings.xmlæä»¶éçéç½® --\x3e\n            <id>banseon-site</id>\n            \x3c!--é¨ç½²ä½ç½®çåç§° --\x3e\n            <name>business api website</name>\n            \x3c!--é¨ç½²ä½ç½®çurlï¼æprotocol://hostname/pathå½¢å¼ --\x3e\n            <url>\n                scp://svn.baidu.com/banseon:/var/www/localhost/banseon-web\n            </url>\n        </site>\n        \x3c!--é¡¹ç®ä¸è½½é¡µé¢çurlãå¦ææ²¡æè¯¥åç´ ï¼ç¨æ·åºè¯¥åèä¸»é¡µãä½¿ç¨è¯¥åç´ çåå æ¯ï¼å¸®å©å®ä½é£äºä¸å¨ä»åºéçæä»¶ï¼ç±äºlicenseéå¶ï¼ã --\x3e\n        <downloadurl />\n        \x3c!--å¦ææä»¶æäºæ°çgroup idåartifact idï¼æä»¶ç§»å°äºæ°çä½ç½®ï¼ï¼è¿éååºæä»¶çéå®ä½ä¿¡æ¯ã --\x3e\n        <relocation>\n            \x3c!--æä»¶æ°çgroup id --\x3e\n            <groupid />\n            \x3c!--æä»¶æ°çartifact id --\x3e\n            <artifactid />\n            \x3c!--æä»¶æ°ççæ¬å· --\x3e\n            <version />\n            \x3c!--æ¾ç¤ºç»ç¨æ·çï¼å³äºç§»å¨çé¢å¤ä¿¡æ¯ï¼ä¾å¦åå ã --\x3e\n            <message />\n        </relocation>\n        \x3c!-- ç»åºè¯¥æä»¶å¨è¿ç¨ä»åºçç¶æãä¸å¾å¨æ¬å°é¡¹ç®ä¸­è®¾ç½®è¯¥åç´ ï¼å ä¸ºè¿æ¯å·¥å·èªå¨æ´æ°çãææçå¼æï¼noneï¼é»è®¤ï¼ï¼convertedï¼ä»åºç®¡çåä» \n            maven 1 pomè½¬æ¢è¿æ¥ï¼ï¼partnerï¼ç´æ¥ä»ä¼ä¼´maven 2ä»åºåæ­¥è¿æ¥ï¼ï¼deployedï¼ä»maven 2å®ä¾é¨ ç½²ï¼ï¼verifiedï¼è¢«æ ¸å®æ¶æ­£ç¡®çåæç»çï¼ã --\x3e\n        <status />\n    </distributionmanagement>\n    \x3c!--ä»¥å¼æ¿ä»£åç§°ï¼propertieså¯ä»¥å¨æ´ä¸ªpomä¸­ä½¿ç¨ï¼ä¹å¯ä»¥ä½ä¸ºè§¦åæ¡ä»¶ï¼è§settings.xmléç½®æä»¶éactivationåç´ çè¯´æï¼ãæ ¼å¼æ¯<name>value</name>ã --\x3e\n    <properties />\n</project>\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:13:40",lastUpdatedTimestamp:164437642e4},{title:"å°é¡¹ç®æ¨éå° Maven ä¸­å¤®ä»åºå®è·µ",frontmatter:{title:"å°é¡¹ç®æ¨éå° Maven ä¸­å¤®ä»åºå®è·µ",date:"2022-02-09T11:09:28.000Z",permalink:"/pages/f28aa7/"},regularPath:"/07.Nexus/01.Nexus/07.%E5%B0%86%E9%A1%B9%E7%9B%AE%E6%8E%A8%E9%80%81%E5%88%B0%20Maven%20%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93%E5%AE%9E%E8%B7%B5.html",relativePath:"07.Nexus/01.Nexus/07.å°é¡¹ç®æ¨éå° Maven ä¸­å¤®ä»åºå®è·µ.md",key:"v-f26a2222",path:"/pages/f28aa7/",headers:[{level:2,title:"ä¸ãå°é¡¹ç®æ¨éå° Github",slug:"ä¸ãå°é¡¹ç®æ¨éå°-github",normalizedTitle:"ä¸ãå°é¡¹ç®æ¨éå° github",charIndex:26},{level:2,title:"äºãæ³¨å Sonatype è´¦æ·",slug:"äºãæ³¨å-sonatype-è´¦æ·",normalizedTitle:"äºãæ³¨å sonatype è´¦æ·",charIndex:115},{level:2,title:"ä¸ãç»å½ Sonatype åå»ºå·¥å",slug:"ä¸ãç»å½-sonatype-åå»ºå·¥å",normalizedTitle:"ä¸ãç»å½ sonatype åå»ºå·¥å",charIndex:215},{level:2,title:"åãç¡®è®¤åå",slug:"åãç¡®è®¤åå",normalizedTitle:"åãç¡®è®¤åå",charIndex:683},{level:2,title:"äºãmacOSéç½® GPG",slug:"äºãmacoséç½®-gpg",normalizedTitle:"äºãmacoséç½® gpg",charIndex:2017},{level:3,title:"1ãä¸è½½ GPG",slug:"_1ãä¸è½½-gpg",normalizedTitle:"1ãä¸è½½ gpg",charIndex:2035},{level:3,title:"2ãéç½®å¯é¥å¯¹",slug:"_2ãéç½®å¯é¥å¯¹",normalizedTitle:"2ãéç½®å¯é¥å¯¹",charIndex:2091},{level:2,title:"å­ãWindowséç½® GPG",slug:"å­ãwindowséç½®-gpg",normalizedTitle:"å­ãwindowséç½® gpg",charIndex:2316},{level:3,title:"1ãä¸è½½ GPG",slug:"_1ãä¸è½½-gpg-2",normalizedTitle:"1ãä¸è½½ gpg",charIndex:2035},{level:3,title:"2ãéç½®å¯é¥å¯¹",slug:"_2ãéç½®å¯é¥å¯¹-2",normalizedTitle:"2ãéç½®å¯é¥å¯¹",charIndex:2091},{level:3,title:"3ãä¸ä¼ å¬é¥å° GPS key-servers",slug:"_3ãä¸ä¼ å¬é¥å°-gps-key-servers",normalizedTitle:"3ãä¸ä¼ å¬é¥å° gps key-servers",charIndex:2559},{level:2,title:"ä¸ãéç½®é¡¹ç®",slug:"ä¸ãéç½®é¡¹ç®",normalizedTitle:"ä¸ãéç½®é¡¹ç®",charIndex:2723},{level:3,title:"1ãéç½® Strings.xml",slug:"_1ãéç½®-strings-xml",normalizedTitle:"1ãéç½® strings.xml",charIndex:2775},{level:3,title:"2ãéç½® Pom.xml",slug:"_2ãéç½®-pom-xml",normalizedTitle:"2ãéç½® pom.xml",charIndex:3002},{level:3,title:"3ãè®¾ç½®ç¼ç ",slug:"_3ãè®¾ç½®ç¼ç ",normalizedTitle:"3ãè®¾ç½®ç¼ç ",charIndex:10674},{level:2,title:"å«ãåéé¡¹ç®å° Maven ä¸­å¤®ä»åº",slug:"å«ãåéé¡¹ç®å°-maven-ä¸­å¤®ä»åº",normalizedTitle:"å«ãåéé¡¹ç®å° maven ä¸­å¤®ä»åº",charIndex:10801},{level:3,title:"1ãç»å½ Nexus Repositories Manager",slug:"_1ãç»å½-nexus-repositories-manager",normalizedTitle:"1ãç»å½ nexus repositories manager",charIndex:10824},{level:3,title:"2ãåå¸é¡¹ç®",slug:"_2ãåå¸é¡¹ç®",normalizedTitle:"2ãåå¸é¡¹ç®",charIndex:10982},{level:3,title:"3ãæ¥çåå¸è¿ç¨",slug:"_3ãæ¥çåå¸è¿ç¨",normalizedTitle:"3ãæ¥çåå¸è¿ç¨",charIndex:11081},{level:3,title:"4ãå¨ Issues ä¸­åå¤å·²ç» Release å®æ",slug:"_4ãå¨-issues-ä¸­åå¤å·²ç»-release-å®æ",normalizedTitle:"4ãå¨ issues ä¸­åå¤å·²ç» release å®æ",charIndex:11858},{level:3,title:"5ãæ¥çèªå·±åå¸çé¡¹ç®",slug:"_5ãæ¥çèªå·±åå¸çé¡¹ç®",normalizedTitle:"5ãæ¥çèªå·±åå¸çé¡¹ç®",charIndex:11926}],headersStr:"ä¸ãå°é¡¹ç®æ¨éå° Github äºãæ³¨å Sonatype è´¦æ· ä¸ãç»å½ Sonatype åå»ºå·¥å åãç¡®è®¤åå äºãmacOSéç½® GPG 1ãä¸è½½ GPG 2ãéç½®å¯é¥å¯¹ å­ãWindowséç½® GPG 1ãä¸è½½ GPG 2ãéç½®å¯é¥å¯¹ 3ãä¸ä¼ å¬é¥å° GPS key-servers ä¸ãéç½®é¡¹ç® 1ãéç½® Strings.xml 2ãéç½® Pom.xml 3ãè®¾ç½®ç¼ç  å«ãåéé¡¹ç®å° Maven ä¸­å¤®ä»åº 1ãç»å½ Nexus Repositories Manager 2ãåå¸é¡¹ç® 3ãæ¥çåå¸è¿ç¨ 4ãå¨ Issues ä¸­åå¤å·²ç» Release å®æ 5ãæ¥çèªå·±åå¸çé¡¹ç®",content:'# å°é¡¹ç®æ¨éå° Maven ä¸­å¤®ä»åºå®è·µ\n\n\n# ä¸ãå°é¡¹ç®æ¨éå° Github\n\nå¨ GitHub ä¸æ°å»ºä¸ä¸ªé¡¹ç®ä»åºï¼ç¶åå°è¦åéå° Maven ä¸­å¤®ä»åºçä»£ç æ¨éå° Githubãè¿æ¹é¢èµæè¾å¤ï¼è¿éä¸è¿å¤åè¿°ã\n\n\n# äºãæ³¨å Sonatype è´¦æ·\n\nè¿å¥ https://issues.sonatype.org/secure/Signup!default.jspa æ³¨åJIRAè´¦å·ï¼ææç¤ºå®åä¸ªäººä¿¡æ¯ã\n\n\n# ä¸ãç»å½ Sonatype åå»ºå·¥å\n\nç»å½ https://issues.sonatype.org/secure/Dashboard.jspa ç¹å»åå»ºæé®æ¥åå»ºä¸ä¸ªæ°ç issues å·¥å\n\nåå®¹å¦ä¸ï¼å¡«åå¿å¡«é¨åå³å¯ï¼ç¶åç­å¾å®¡æ ¸ã\n\næç¤º\n\n * é¡¹ç®ï¼ Community Support - Open Source Project Repository Hosting (OSSRH)\n * é®é¢ç±»åï¼ New Project\n * æ¦è¦ï¼ Simplify Cloud Build Dependencies\n * æè¿°ï¼ å¯é\n * Group Idï¼ com.ieooc\n * Project URLï¼ https://github.com/simplify-cloud/simplify-cloud-dependencies-parent\n * SCM urlï¼ https://github.com/simplify-cloud/simplify-cloud-dependencies-parent.git\n\n\n# åãç¡®è®¤åå\n\nç­å¾ä¸æ®µæ¶é´å°±ä¼æ¶å°ä¸å°é®ä»¶ï¼åå®¹å¦ä¸ï¼\n\n[ https://issues.sonatype.org/browse/OSSRH-59440 ]\n\nCentral OSSRH æ´æ°äº OSSRH-59440:\n------------------------------\nç¶æ: Waiting for Response  (åå¼: å¼æ¾)\n\nDo you own the domain ieooc.com? If so, please verify ownership via one of the following methods:\n\n*  Add a TXT record to your DNS referencing this JIRA ticket: [OSSRH-59440](Fastest)\n*  Setup a redirect to your Github page (if it does not already exist)\n\nIf you do not own this domain, please read:\nhttp://central.sonatype.org/pages/choosing-your-coordinates.html\nYou may also choose a groupId that reflects your project hosting, in this case, something like io.github.heyuqiang or com.github.heyuqiang\n\n----------------------------------------------------------------------------------------------------------------------\n\nå³é®å­: OSSRH-59440\nURL: https://issues.sonatype.org/browse/OSSRH-59440\né¡¹ç®: Community Support - Open Source Project Repository Hosting\né®é¢ç±»å: New Project\næ¥åäºº: heyuqiang\nç»åäºº: Joel Orlina\nä¼åçº§: éè¦\n\n\n\nææå°±æ¯è¯¢é®ä½ è¯¥ GroupId è®¾ç½®çååæ¯å¦ä¸ºä½ èªå·±ææ¥æï¼å¦ææ¯å°±éè¦è¯æä¸ä¸ï¼ä¸¤ç§æ¹æ³\n\n * 1ãè®¾ç½®github pageå½åååã\n * 2ãå¨åå DNS è§£æä¸­æ·»å ä¸æ¡ç±»åä¸º Txt çè®°å½ã\n\nç±äºæ¬äººæèªå·±çååï¼æä»¥è®¾ç½®ä½¿ç¨äºç¬¬äºç§æ¹æ³æ·»å  NDS è§£æè®°å½ï¼è¿éæ·»å äºè®°å½ä¸º OSSRH-59440ï¼ç±»åä¸º TxTï¼å¼ä¸º https://issues.sonatype.org/browse/OSSRH-59440 çä¸æ¡è§£æè®°å½ä¿¡æ¯ã\n\n\n\nç¶åæå¼é®ä»¶ä¸­æå°çå°å https://issues.sonatype.org/browse/OSSRH-59440 è¿å¥è¯¥ issuesï¼å¨éé¢åå¤èªå·±æ¥æè¯¥ååï¼ä¸è®¾ç½®äº DNS è§£æã\n\n\n# äºãmacOSéç½® GPG\n\n\n# 1ãä¸è½½ GPG\n\næå¼ https://gpgtools.org ä¸è½½ GPGï¼ç¶åä¸æ­¥æ­¥å®è£ã\n\n\n\n\n# 2ãéç½®å¯é¥å¯¹\n\næç¤º\n\nè¿ç¨ä¸­éè¦èªå·±è¾å¥ä¸ä¸ª8ä½ä»¥ä¸çå¯ç ï¼è¯·è®°ä½è¯¥å¯ç ï¼åé¢è¿éè¦ç¨å°ã\n\næå¼ GPG Keychain åï¼ç¹å»+æé®ï¼è¾å¥å§åãçµå­é®ä»¶ãå¯ç åç¡®è®¤å¯ç ï¼ç¹å»çæå¯é¥æé®ã\n\n\n\næ¥ä¸æ¥ï¼ç¹å»Upload Public Keyæé®å°è¯ä¹¦åéå°è¿ç¨æå¡å¨ã\n\n\n\nä¸å¾è¡¨ç¤ºå¯é¥å·²ç»æåä¸ä¼ è³æå¡å¨ãå¦æä¸ä¼ å¤±è´¥ï¼é¼ æ å³é®ç¹å»Send Public Key to Key Serveræé®éæ°ä¸ä¼ å³å¯ï¼å¤è¯å æ¬¡ã\n\n\n\n\n# å­ãWindowséç½® GPG\n\n\n# 1ãä¸è½½ GPG\n\næå¼ https://www.gpg4win.org/ ä¸è½½ GPGï¼ç¶åä¸æ­¥æ­¥å®è£ã\n\nå®è£å®æåä¼çå°æ¡é¢ä¸å¤äºä¸ª Kleopatra å¾æ ï¼è¿ä¸ªç¨åºæ¯ GnuPG çåç«¯ç¨åºï¼è¿éæä»¬å°å®æå¼ã\n\n\n# 2ãéç½®å¯é¥å¯¹\n\næå¼ Kleopatra åï¼ç¹å»æ°å»ºå¯é¥å¯¹\n\nè¾å¥å§ååé®ç®±\n\næåç¡®è®¤æ°å»ºï¼è¿ç¨ä¸­éè¦èªå·±è¾å¥ä¸ä¸ª8ä½ä»¥ä¸çå¯ç ï¼è¯·è®°ä½è¯¥å¯ç ï¼åé¢è¿éè¦ç¨å°ã è¾å¥å®æä»¥åå°±ä¼æç¤ºä¸é¢ä¿¡æ¯ã\n\n\n\n\n\n\n# 3ãä¸ä¼ å¬é¥å° GPS key-servers\n\næå¼å½ä»¤æç¤ºç¬¦çªå£ï¼è¾å¥ä¸é¢å½ä»¤å°è¯ä¹¦åéå°è¿ç¨æå¡å¨\n\ngpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys  3C8AE63C486358D2090F565928821A74321B8CCD\n\n\n\n\n\n# ä¸ãéç½®é¡¹ç®\n\nè¦æ³å°é¡¹ç®åéå° Maven ä¸­å¤®ä»åºï¼éè¦å¯¹é¡¹ç®è¿è¡ä¸äºè®¾ç½®æ¥ç¬¦ååå¸æ¡ä»¶ã\n\n\n# 1ãéç½® Strings.xml\n\néç½® maven ç®å½ conf æä»¶å¤¹ä¸­ç settings.xml æä»¶ï¼è®¾ç½®ä¸ä¸ª server,éé¢æ·»å  JIRA çè´¦å·åå¯ç ã\n\n<servers>\n   <server>\n      <id>sona</id>\n      <username>JIRAè´¦å·</username>\n      <password>JIRAå¯ç </password>\n   </server>\n</servers>\n\n\n\n# 2ãéç½® Pom.xml\n\nPom.xml éç½®ä¸äºå¿è¦çä¿¡æ¯ï¼ä¾å¦ Maven ææ¡£æä»¶ãæåæä»¶ãGPGéªè¯æä»¶ç­ï¼å¦ä¸ï¼\n\næç¤º\n\nå¯ä»¥æ¥çæçé¡¹ç®ç GitHub å°åï¼ Maven ç¤ºä¾é¡¹ç®ï¼pom åæ°ç§çä¿®æ¹å³å¯ï¼é¡ºä¾¿ç¹ä¸ Start æï¼Thanksã\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n\n    <modelVersion>4.0.0</modelVersion>\n    <inceptionYear>2021</inceptionYear>\n    <groupId>com.ieooc.cloud</groupId>\n    <artifactId>simplify-cloud-dependencies-parent</artifactId>\n    <version>1.0.0.RELEASE</version>\n    <packaging>pom</packaging>\n\n    <name>simplify-cloud-dependencies-parent</name>\n    <description>Simplify Cloud Build Dependencies</description>\n    <url>https://www.ieooc.com/</url>\n\n    <organization>\n        <name>Simplify Software, Inc.</name>\n        <url>https://www.ieooc.com</url>\n    </organization>\n\n    <licenses>\n        <license>\n            <name>Apache License, Version 2.0</name>\n            <url>https://www.apache.org/licenses/LICENSE-2.0</url>\n            <comments>Copyright 2014-2015 the original author or authors.\n\n                Licensed under the Apache License, Version 2.0 (the "License");\n                you may not use this file except in compliance with the License.\n                You may obtain a copy of the License at\n\n                https://www.apache.org/licenses/LICENSE-2.0\n\n                Unless required by applicable law or agreed to in writing, software\n                distributed under the License is distributed on an "AS IS" BASIS,\n                WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n                implied.\n\n                See the License for the specific language governing permissions and\n                limitations under the License.</comments>\n        </license>\n    </licenses>\n\n    <developers>\n        <developer>\n            <id>heyuqiang</id>\n            <name>heyuqiang</name>\n            <email>785056500@qq.com</email>\n            <organization>Pivotal Software, Inc.</organization>\n            <organizationUrl>https://www.ieooc.com</organizationUrl>\n            <roles>\n                <role>Project lead</role>\n            </roles>\n        </developer>\n    </developers>\n\n    <scm>\n        <connection>scm:git:git://github.com/simplify-cloud/simplify-cloud-dependencies-parent.git</connection>\n        <developerConnection>scm:git:ssh://git@github.com/simplify-cloud/simplify-cloud-dependencies-parent.git</developerConnection>\n        <url>https://github.com/simplify-cloud/simplify-cloud-dependencies-parent</url>\n    </scm>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    </properties>\n\n    <build>\n        <pluginManagement>\n            <plugins>\n                <plugin>\n                    <artifactId>maven-enforcer-plugin</artifactId>\n                    <version>1.4.1</version>\n                    <executions>\n                        <execution>\n                            <id>enforce-versions</id>\n                            <goals>\n                                <goal>enforce</goal>\n                            </goals>\n                        </execution>\n                    </executions>\n                    <configuration>\n                        <fail>false</fail>\n                        <rules>\n                            <dependencyConvergence />\n                        </rules>\n                    </configuration>\n                </plugin>\n            </plugins>\n        </pluginManagement>\n    </build>\n    <profiles>\n        <profile>\n            <id>central</id>\n            <build>\n                <plugins>\n                    <plugin>\n                        <groupId>org.codehaus.mojo</groupId>\n                        <artifactId>flatten-maven-plugin</artifactId>\n                        <version>1.2.2</version>\n                        <executions>\n                            <execution>\n                                <id>flatten</id>\n                                <phase>process-resources</phase>\n                                <goals>\n                                    <goal>flatten</goal>\n                                </goals>\n                                <configuration>\n                                    <updatePomFile>true</updatePomFile>\n                                    <flattenMode>bom</flattenMode>\n                                    <pomElements>\n                                        <parent>expand</parent>\n                                        <pluginManagement>keep</pluginManagement>\n                                        <properties>keep</properties>\n                                        <repositories>remove</repositories>\n                                        <profiles>keep</profiles>\n                                    </pomElements>\n                                </configuration>\n                            </execution>\n                            <execution>\n                                <id>flatten-clean</id>\n                                <phase>clean</phase>\n                                <goals>\n                                    <goal>clean</goal>\n                                </goals>\n                            </execution>\n                        </executions>\n                        <inherited>true</inherited>\n                    </plugin>\n                    <plugin>\n                        <artifactId>maven-gpg-plugin</artifactId>\n                        <version>1.6</version>\n                        <executions>\n                            <execution>\n                                <id>sign-artifacts</id>\n                                <phase>verify</phase>\n                                <goals>\n                                    <goal>sign</goal>\n                                </goals>\n                            </execution>\n                        </executions>\n                    </plugin>\n                    \x3c!--staging puglin,ç¨äºèªå¨æ§è¡åå¸é¶æ®µ(åæå¨)--\x3e\n                    <plugin>\n                        <groupId>org.sonatype.plugins</groupId>\n                        <artifactId>nexus-staging-maven-plugin</artifactId>\n                        <version>1.6.7</version>\n                        <extensions>true</extensions>\n                        <configuration>\n                            <serverId>sona</serverId>\n                            <nexusUrl>https://oss.sonatype.org/</nexusUrl>\n                            <autoReleaseAfterClose>true</autoReleaseAfterClose>\n                        </configuration>\n                    </plugin>\n                    \x3c!-- release plugin,ç¨äºåå¸å°releaseä»åºé¨ç½²æä»¶ --\x3e\n                    <plugin>\n                        <groupId>org.apache.maven.plugins</groupId>\n                        <artifactId>maven-release-plugin</artifactId>\n                        <version>2.4.2</version>\n                    </plugin>\n                </plugins>\n            </build>\n            <distributionManagement>\n                <repository>\n                    <id>sonatype-nexus-staging</id>\n                    <name>Nexus Release Repository</name>\n                    <url>https://oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n                </repository>\n                <snapshotRepository>\n                    <id>sonatype-nexus-snapshots</id>\n                    <name>Sonatype Nexus Snapshots</name>\n                    <url>https://oss.sonatype.org/content/repositories/snapshots/</url>\n                </snapshotRepository>\n            </distributionManagement>\n        </profile>\n    </profiles>\n</project>\n\n\n\n# 3ãè®¾ç½®ç¼ç \n\nå¦æMavenç¼è¯docå ç¼ç åå åºéï¼å¯ä»¥å¨ç¯å¢åéè®¾ç½®åé JAVA_TOOL_OPTIONSï¼å¼ä¸º UTF-8 æ¥æ¹åç¼ç æ¹å¼ã\n\n * JAVA_TOOL_OPTIONS\n * -Dfile.encoding=UTF-8\n\n\n# å«ãåéé¡¹ç®å° Maven ä¸­å¤®ä»åº\n\n\n# 1ãç»å½ Nexus Repositories Manager\n\nå¨åå¸ä¹åè¦æ±å¿é¡»æç»å½ Nexus Repositories çä¿¡æ¯ï¼æä»¥åå¸åæåç»å½ Nexus Repositories\n\nç»å½ https://oss.sonatype.org å¶ä¸­ç¨æ·åãå¯ç å°±æ¯ JIRA çç¨æ·åãå¯ç ã\n\n\n\n\n# 2ãåå¸é¡¹ç®\n\næ§è¡ maven å½ä»¤ï¼é¨ç½²é¡¹ç®å° Maven ä»åºï¼è¿ç¨ä¸­éè¦è¾å¥ä¹åè®¾ç½®ç GPG å¯ç ï¼è¾å¥ä¸ä¸å³å¯ã\n\n$ mvn clean deploy -P central\n\n\n\n# 3ãæ¥çåå¸è¿ç¨\n\nåå° Nexus Repositories Managerï¼éæ© Staging Repositories æå­åºï¼æ ¹æ®åå¸æ¶é´æ¥æ¾å°ä½ æäº¤ç Jar ä¿¡æ¯ãç¶åæ¥ç Actives éé¢çæ§è¡ä¿¡æ¯ï¼æ³¨ææ§è¡é¨ç½²è¿ç¨ç°å¨æµè¡é½äº¤ç» Maven èªå¨é¨ç½²æä»¶æ§è¡ï¼ç½ä¸ä¸äºèåæ³æ¯è¿å¥è¿éé¢æå¨æ§è¡ï¼éå¸¸ä¸æ¨èè¿æ ·åï¼å ä¸ºè¿æ ·éå¸¸å®¹æé¨ç½²åçé®é¢ã\n\n\n\næç¤º\n\nå¨ Maven æ§è¡åå¸è¿ç¨ä¸­æè½çå°ï¼å¦æå·²ç» release å®æï¼æå­åºä¸­å¯è½æ¾ä¸å°ã\n\næ­£å¸¸çé¨ç½²æµç¨åºè¯¥ä¸ºï¼opené¶æ®µâ>closeé¶æ®µâ>releaseé¶æ®µ æ§è¡å®æè¿ä¸ä¸ªé¶æ®µå°±ä¼åå¸å°ä¸­å¤®ä»åºï¼ç­ä¼ä¼åå°é®ä»¶éç¥\n\n[ https://issues.sonatype.org/browse/OSSRH-59440?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ] Central OSSRH æ´æ°äº OSSRH-59440: ------------------------------ Central sync is activated for club.mydlq. After you successfully release, your component will be published to Central, typically within 10 minutes, though updates to search.maven.org can take up to two hours.\n\n\nææä¸º Release æåï¼å¤§æ¦ç­ååéæèå ä¸ªå°±è½å¨ä¸­å¤®ä»åºæ¥è¯¢å°è¯¥ Jar ä¿¡æ¯ï¼ä¸è¿å¯¹search.maven.orgçæ´æ°å¯è½éè¦ä¸¤ä¸ªå°æ¶ã\n\n\n# 4ãå¨ Issues ä¸­åå¤å·²ç» Release å®æ\n\næå¼ä¹åæäº¤ Issues å°åï¼åé¢åå¤å·²ç» Release å®æ\n\n\n# 5ãæ¥çèªå·±åå¸çé¡¹ç®\n\nåå¸æååå¯ä»¥è¿å¥ https://search.maven.org ç½åæ¥è¯¢èªå·±åå¸ç Jarï¼å¦ææªæ¥å°ç­å ä¸ªå°æ¶åæ­¤æ¥è¯¢ã',normalizedContent:'# å°é¡¹ç®æ¨éå° maven ä¸­å¤®ä»åºå®è·µ\n\n\n# ä¸ãå°é¡¹ç®æ¨éå° github\n\nå¨ github ä¸æ°å»ºä¸ä¸ªé¡¹ç®ä»åºï¼ç¶åå°è¦åéå° maven ä¸­å¤®ä»åºçä»£ç æ¨éå° githubãè¿æ¹é¢èµæè¾å¤ï¼è¿éä¸è¿å¤åè¿°ã\n\n\n# äºãæ³¨å sonatype è´¦æ·\n\nè¿å¥ https://issues.sonatype.org/secure/signup!default.jspa æ³¨åjiraè´¦å·ï¼ææç¤ºå®åä¸ªäººä¿¡æ¯ã\n\n\n# ä¸ãç»å½ sonatype åå»ºå·¥å\n\nç»å½ https://issues.sonatype.org/secure/dashboard.jspa ç¹å»åå»ºæé®æ¥åå»ºä¸ä¸ªæ°ç issues å·¥å\n\nåå®¹å¦ä¸ï¼å¡«åå¿å¡«é¨åå³å¯ï¼ç¶åç­å¾å®¡æ ¸ã\n\næç¤º\n\n * é¡¹ç®ï¼ community support - open source project repository hosting (ossrh)\n * é®é¢ç±»åï¼ new project\n * æ¦è¦ï¼ simplify cloud build dependencies\n * æè¿°ï¼ å¯é\n * group idï¼ com.ieooc\n * project urlï¼ https://github.com/simplify-cloud/simplify-cloud-dependencies-parent\n * scm urlï¼ https://github.com/simplify-cloud/simplify-cloud-dependencies-parent.git\n\n\n# åãç¡®è®¤åå\n\nç­å¾ä¸æ®µæ¶é´å°±ä¼æ¶å°ä¸å°é®ä»¶ï¼åå®¹å¦ä¸ï¼\n\n[ https://issues.sonatype.org/browse/ossrh-59440 ]\n\ncentral ossrh æ´æ°äº ossrh-59440:\n------------------------------\nç¶æ: waiting for response  (åå¼: å¼æ¾)\n\ndo you own the domain ieooc.com? if so, please verify ownership via one of the following methods:\n\n*  add a txt record to your dns referencing this jira ticket: [ossrh-59440](fastest)\n*  setup a redirect to your github page (if it does not already exist)\n\nif you do not own this domain, please read:\nhttp://central.sonatype.org/pages/choosing-your-coordinates.html\nyou may also choose a groupid that reflects your project hosting, in this case, something like io.github.heyuqiang or com.github.heyuqiang\n\n----------------------------------------------------------------------------------------------------------------------\n\nå³é®å­: ossrh-59440\nurl: https://issues.sonatype.org/browse/ossrh-59440\né¡¹ç®: community support - open source project repository hosting\né®é¢ç±»å: new project\næ¥åäºº: heyuqiang\nç»åäºº: joel orlina\nä¼åçº§: éè¦\n\n\n\nææå°±æ¯è¯¢é®ä½ è¯¥ groupid è®¾ç½®çååæ¯å¦ä¸ºä½ èªå·±ææ¥æï¼å¦ææ¯å°±éè¦è¯æä¸ä¸ï¼ä¸¤ç§æ¹æ³\n\n * 1ãè®¾ç½®github pageå½åååã\n * 2ãå¨åå dns è§£æä¸­æ·»å ä¸æ¡ç±»åä¸º txt çè®°å½ã\n\nç±äºæ¬äººæèªå·±çååï¼æä»¥è®¾ç½®ä½¿ç¨äºç¬¬äºç§æ¹æ³æ·»å  nds è§£æè®°å½ï¼è¿éæ·»å äºè®°å½ä¸º ossrh-59440ï¼ç±»åä¸º txtï¼å¼ä¸º https://issues.sonatype.org/browse/ossrh-59440 çä¸æ¡è§£æè®°å½ä¿¡æ¯ã\n\n\n\nç¶åæå¼é®ä»¶ä¸­æå°çå°å https://issues.sonatype.org/browse/ossrh-59440 è¿å¥è¯¥ issuesï¼å¨éé¢åå¤èªå·±æ¥æè¯¥ååï¼ä¸è®¾ç½®äº dns è§£æã\n\n\n# äºãmacoséç½® gpg\n\n\n# 1ãä¸è½½ gpg\n\næå¼ https://gpgtools.org ä¸è½½ gpgï¼ç¶åä¸æ­¥æ­¥å®è£ã\n\n\n\n\n# 2ãéç½®å¯é¥å¯¹\n\næç¤º\n\nè¿ç¨ä¸­éè¦èªå·±è¾å¥ä¸ä¸ª8ä½ä»¥ä¸çå¯ç ï¼è¯·è®°ä½è¯¥å¯ç ï¼åé¢è¿éè¦ç¨å°ã\n\næå¼ gpg keychain åï¼ç¹å»+æé®ï¼è¾å¥å§åãçµå­é®ä»¶ãå¯ç åç¡®è®¤å¯ç ï¼ç¹å»çæå¯é¥æé®ã\n\n\n\næ¥ä¸æ¥ï¼ç¹å»upload public keyæé®å°è¯ä¹¦åéå°è¿ç¨æå¡å¨ã\n\n\n\nä¸å¾è¡¨ç¤ºå¯é¥å·²ç»æåä¸ä¼ è³æå¡å¨ãå¦æä¸ä¼ å¤±è´¥ï¼é¼ æ å³é®ç¹å»send public key to key serveræé®éæ°ä¸ä¼ å³å¯ï¼å¤è¯å æ¬¡ã\n\n\n\n\n# å­ãwindowséç½® gpg\n\n\n# 1ãä¸è½½ gpg\n\næå¼ https://www.gpg4win.org/ ä¸è½½ gpgï¼ç¶åä¸æ­¥æ­¥å®è£ã\n\nå®è£å®æåä¼çå°æ¡é¢ä¸å¤äºä¸ª kleopatra å¾æ ï¼è¿ä¸ªç¨åºæ¯ gnupg çåç«¯ç¨åºï¼è¿éæä»¬å°å®æå¼ã\n\n\n# 2ãéç½®å¯é¥å¯¹\n\næå¼ kleopatra åï¼ç¹å»æ°å»ºå¯é¥å¯¹\n\nè¾å¥å§ååé®ç®±\n\næåç¡®è®¤æ°å»ºï¼è¿ç¨ä¸­éè¦èªå·±è¾å¥ä¸ä¸ª8ä½ä»¥ä¸çå¯ç ï¼è¯·è®°ä½è¯¥å¯ç ï¼åé¢è¿éè¦ç¨å°ã è¾å¥å®æä»¥åå°±ä¼æç¤ºä¸é¢ä¿¡æ¯ã\n\n\n\n\n\n\n# 3ãä¸ä¼ å¬é¥å° gps key-servers\n\næå¼å½ä»¤æç¤ºç¬¦çªå£ï¼è¾å¥ä¸é¢å½ä»¤å°è¯ä¹¦åéå°è¿ç¨æå¡å¨\n\ngpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys  3c8ae63c486358d2090f565928821a74321b8ccd\n\n\n\n\n\n# ä¸ãéç½®é¡¹ç®\n\nè¦æ³å°é¡¹ç®åéå° maven ä¸­å¤®ä»åºï¼éè¦å¯¹é¡¹ç®è¿è¡ä¸äºè®¾ç½®æ¥ç¬¦ååå¸æ¡ä»¶ã\n\n\n# 1ãéç½® strings.xml\n\néç½® maven ç®å½ conf æä»¶å¤¹ä¸­ç settings.xml æä»¶ï¼è®¾ç½®ä¸ä¸ª server,éé¢æ·»å  jira çè´¦å·åå¯ç ã\n\n<servers>\n   <server>\n      <id>sona</id>\n      <username>jiraè´¦å·</username>\n      <password>jiraå¯ç </password>\n   </server>\n</servers>\n\n\n\n# 2ãéç½® pom.xml\n\npom.xml éç½®ä¸äºå¿è¦çä¿¡æ¯ï¼ä¾å¦ maven ææ¡£æä»¶ãæåæä»¶ãgpgéªè¯æä»¶ç­ï¼å¦ä¸ï¼\n\næç¤º\n\nå¯ä»¥æ¥çæçé¡¹ç®ç github å°åï¼ maven ç¤ºä¾é¡¹ç®ï¼pom åæ°ç§çä¿®æ¹å³å¯ï¼é¡ºä¾¿ç¹ä¸ start æï¼thanksã\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n\n    <modelversion>4.0.0</modelversion>\n    <inceptionyear>2021</inceptionyear>\n    <groupid>com.ieooc.cloud</groupid>\n    <artifactid>simplify-cloud-dependencies-parent</artifactid>\n    <version>1.0.0.release</version>\n    <packaging>pom</packaging>\n\n    <name>simplify-cloud-dependencies-parent</name>\n    <description>simplify cloud build dependencies</description>\n    <url>https://www.ieooc.com/</url>\n\n    <organization>\n        <name>simplify software, inc.</name>\n        <url>https://www.ieooc.com</url>\n    </organization>\n\n    <licenses>\n        <license>\n            <name>apache license, version 2.0</name>\n            <url>https://www.apache.org/licenses/license-2.0</url>\n            <comments>copyright 2014-2015 the original author or authors.\n\n                licensed under the apache license, version 2.0 (the "license");\n                you may not use this file except in compliance with the license.\n                you may obtain a copy of the license at\n\n                https://www.apache.org/licenses/license-2.0\n\n                unless required by applicable law or agreed to in writing, software\n                distributed under the license is distributed on an "as is" basis,\n                without warranties or conditions of any kind, either express or\n                implied.\n\n                see the license for the specific language governing permissions and\n                limitations under the license.</comments>\n        </license>\n    </licenses>\n\n    <developers>\n        <developer>\n            <id>heyuqiang</id>\n            <name>heyuqiang</name>\n            <email>785056500@qq.com</email>\n            <organization>pivotal software, inc.</organization>\n            <organizationurl>https://www.ieooc.com</organizationurl>\n            <roles>\n                <role>project lead</role>\n            </roles>\n        </developer>\n    </developers>\n\n    <scm>\n        <connection>scm:git:git://github.com/simplify-cloud/simplify-cloud-dependencies-parent.git</connection>\n        <developerconnection>scm:git:ssh://git@github.com/simplify-cloud/simplify-cloud-dependencies-parent.git</developerconnection>\n        <url>https://github.com/simplify-cloud/simplify-cloud-dependencies-parent</url>\n    </scm>\n\n    <properties>\n        <project.build.sourceencoding>utf-8</project.build.sourceencoding>\n    </properties>\n\n    <build>\n        <pluginmanagement>\n            <plugins>\n                <plugin>\n                    <artifactid>maven-enforcer-plugin</artifactid>\n                    <version>1.4.1</version>\n                    <executions>\n                        <execution>\n                            <id>enforce-versions</id>\n                            <goals>\n                                <goal>enforce</goal>\n                            </goals>\n                        </execution>\n                    </executions>\n                    <configuration>\n                        <fail>false</fail>\n                        <rules>\n                            <dependencyconvergence />\n                        </rules>\n                    </configuration>\n                </plugin>\n            </plugins>\n        </pluginmanagement>\n    </build>\n    <profiles>\n        <profile>\n            <id>central</id>\n            <build>\n                <plugins>\n                    <plugin>\n                        <groupid>org.codehaus.mojo</groupid>\n                        <artifactid>flatten-maven-plugin</artifactid>\n                        <version>1.2.2</version>\n                        <executions>\n                            <execution>\n                                <id>flatten</id>\n                                <phase>process-resources</phase>\n                                <goals>\n                                    <goal>flatten</goal>\n                                </goals>\n                                <configuration>\n                                    <updatepomfile>true</updatepomfile>\n                                    <flattenmode>bom</flattenmode>\n                                    <pomelements>\n                                        <parent>expand</parent>\n                                        <pluginmanagement>keep</pluginmanagement>\n                                        <properties>keep</properties>\n                                        <repositories>remove</repositories>\n                                        <profiles>keep</profiles>\n                                    </pomelements>\n                                </configuration>\n                            </execution>\n                            <execution>\n                                <id>flatten-clean</id>\n                                <phase>clean</phase>\n                                <goals>\n                                    <goal>clean</goal>\n                                </goals>\n                            </execution>\n                        </executions>\n                        <inherited>true</inherited>\n                    </plugin>\n                    <plugin>\n                        <artifactid>maven-gpg-plugin</artifactid>\n                        <version>1.6</version>\n                        <executions>\n                            <execution>\n                                <id>sign-artifacts</id>\n                                <phase>verify</phase>\n                                <goals>\n                                    <goal>sign</goal>\n                                </goals>\n                            </execution>\n                        </executions>\n                    </plugin>\n                    \x3c!--staging puglin,ç¨äºèªå¨æ§è¡åå¸é¶æ®µ(åæå¨)--\x3e\n                    <plugin>\n                        <groupid>org.sonatype.plugins</groupid>\n                        <artifactid>nexus-staging-maven-plugin</artifactid>\n                        <version>1.6.7</version>\n                        <extensions>true</extensions>\n                        <configuration>\n                            <serverid>sona</serverid>\n                            <nexusurl>https://oss.sonatype.org/</nexusurl>\n                            <autoreleaseafterclose>true</autoreleaseafterclose>\n                        </configuration>\n                    </plugin>\n                    \x3c!-- release plugin,ç¨äºåå¸å°releaseä»åºé¨ç½²æä»¶ --\x3e\n                    <plugin>\n                        <groupid>org.apache.maven.plugins</groupid>\n                        <artifactid>maven-release-plugin</artifactid>\n                        <version>2.4.2</version>\n                    </plugin>\n                </plugins>\n            </build>\n            <distributionmanagement>\n                <repository>\n                    <id>sonatype-nexus-staging</id>\n                    <name>nexus release repository</name>\n                    <url>https://oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n                </repository>\n                <snapshotrepository>\n                    <id>sonatype-nexus-snapshots</id>\n                    <name>sonatype nexus snapshots</name>\n                    <url>https://oss.sonatype.org/content/repositories/snapshots/</url>\n                </snapshotrepository>\n            </distributionmanagement>\n        </profile>\n    </profiles>\n</project>\n\n\n\n# 3ãè®¾ç½®ç¼ç \n\nå¦æmavenç¼è¯docå ç¼ç åå åºéï¼å¯ä»¥å¨ç¯å¢åéè®¾ç½®åé java_tool_optionsï¼å¼ä¸º utf-8 æ¥æ¹åç¼ç æ¹å¼ã\n\n * java_tool_options\n * -dfile.encoding=utf-8\n\n\n# å«ãåéé¡¹ç®å° maven ä¸­å¤®ä»åº\n\n\n# 1ãç»å½ nexus repositories manager\n\nå¨åå¸ä¹åè¦æ±å¿é¡»æç»å½ nexus repositories çä¿¡æ¯ï¼æä»¥åå¸åæåç»å½ nexus repositories\n\nç»å½ https://oss.sonatype.org å¶ä¸­ç¨æ·åãå¯ç å°±æ¯ jira çç¨æ·åãå¯ç ã\n\n\n\n\n# 2ãåå¸é¡¹ç®\n\næ§è¡ maven å½ä»¤ï¼é¨ç½²é¡¹ç®å° maven ä»åºï¼è¿ç¨ä¸­éè¦è¾å¥ä¹åè®¾ç½®ç gpg å¯ç ï¼è¾å¥ä¸ä¸å³å¯ã\n\n$ mvn clean deploy -p central\n\n\n\n# 3ãæ¥çåå¸è¿ç¨\n\nåå° nexus repositories managerï¼éæ© staging repositories æå­åºï¼æ ¹æ®åå¸æ¶é´æ¥æ¾å°ä½ æäº¤ç jar ä¿¡æ¯ãç¶åæ¥ç actives éé¢çæ§è¡ä¿¡æ¯ï¼æ³¨ææ§è¡é¨ç½²è¿ç¨ç°å¨æµè¡é½äº¤ç» maven èªå¨é¨ç½²æä»¶æ§è¡ï¼ç½ä¸ä¸äºèåæ³æ¯è¿å¥è¿éé¢æå¨æ§è¡ï¼éå¸¸ä¸æ¨èè¿æ ·åï¼å ä¸ºè¿æ ·éå¸¸å®¹æé¨ç½²åçé®é¢ã\n\n\n\næç¤º\n\nå¨ maven æ§è¡åå¸è¿ç¨ä¸­æè½çå°ï¼å¦æå·²ç» release å®æï¼æå­åºä¸­å¯è½æ¾ä¸å°ã\n\næ­£å¸¸çé¨ç½²æµç¨åºè¯¥ä¸ºï¼opené¶æ®µâ>closeé¶æ®µâ>releaseé¶æ®µ æ§è¡å®æè¿ä¸ä¸ªé¶æ®µå°±ä¼åå¸å°ä¸­å¤®ä»åºï¼ç­ä¼ä¼åå°é®ä»¶éç¥\n\n[ https://issues.sonatype.org/browse/ossrh-59440?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel ] central ossrh æ´æ°äº ossrh-59440: ------------------------------ central sync is activated for club.mydlq. after you successfully release, your component will be published to central, typically within 10 minutes, though updates to search.maven.org can take up to two hours.\n\n\nææä¸º release æåï¼å¤§æ¦ç­ååéæèå ä¸ªå°±è½å¨ä¸­å¤®ä»åºæ¥è¯¢å°è¯¥ jar ä¿¡æ¯ï¼ä¸è¿å¯¹search.maven.orgçæ´æ°å¯è½éè¦ä¸¤ä¸ªå°æ¶ã\n\n\n# 4ãå¨ issues ä¸­åå¤å·²ç» release å®æ\n\næå¼ä¹åæäº¤ issues å°åï¼åé¢åå¤å·²ç» release å®æ\n\n\n# 5ãæ¥çèªå·±åå¸çé¡¹ç®\n\nåå¸æååå¯ä»¥è¿å¥ https://search.maven.org ç½åæ¥è¯¢èªå·±åå¸ç jarï¼å¦ææªæ¥å°ç­å ä¸ªå°æ¶åæ­¤æ¥è¯¢ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å®è£ Docker Registry ç§æ",frontmatter:{title:"å®è£ Docker Registry ç§æ",date:"2022-02-09T11:14:29.000Z",permalink:"/pages/654ea2/"},regularPath:"/08.Registry/01.Registry/01.%E5%AE%89%E8%A3%85%20Docker%20Registry%20%E7%A7%81%E6%9C%8D.html",relativePath:"08.Registry/01.Registry/01.å®è£ Docker Registry ç§æ.md",key:"v-5f044039",path:"/pages/654ea2/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:28},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:2},{level:2,title:"éªè¯",slug:"éªè¯",normalizedTitle:"éªè¯",charIndex:467}],headersStr:"æ¦è¿° å®è£ éªè¯",content:"# å®è£ Docker Registry ç§æ\n\n\n# æ¦è¿°\n\nå®æ¹ç Docker Hub æ¯ä¸ä¸ªç¨äºç®¡çå¬å±éåçå°æ¹ï¼æä»¬å¯ä»¥å¨ä¸é¢æ¾å°æä»¬æ³è¦çéåï¼ä¹å¯ä»¥ææä»¬èªå·±çéåæ¨éä¸å»ãä½æ¯ï¼ææ¶åæä»¬çæå¡å¨æ æ³è®¿é®äºèç½ï¼æèä½ ä¸å¸æå°èªå·±çéåæ¾å°å¬ç½å½ä¸­ï¼é£ä¹ä½ å°±éè¦ Docker Registryï¼å®å¯ä»¥ç¨æ¥å­å¨åç®¡çèªå·±çéåã\n\n\n# å®è£\n\nå¨ä¹åç Docker ç§æä»åº ç« èä¸­å·²ç»æå°è¿å¦ä½éç½®åä½¿ç¨å®¹å¨è¿è¡ç§æä»åºï¼è¿éæä»¬ä½¿ç¨ docker-compose æ¥å®è£ï¼éç½®å¦ä¸ï¼\n\nversion: '3.7'\nservices:\n  registry:\n    image: registry\n    restart: always\n    container_name: registry\n    ports:\n      - 5000:5000\n    volumes:\n      - /usr/local/docker/registry/data:/var/lib/registry\n\n\n\n# éªè¯\n\nå¯å¨æååéè¦æµè¯æå¡ç«¯æ¯å¦è½å¤æ­£å¸¸æä¾æå¡ï¼æä¸¤ç§æ¹å¼ï¼\n\n * æµè§å¨ç«¯è®¿é®http://ivoov.com:5000/v2/\n * è¿å{}è¡¨ç¤ºDocker Registry ç§ææ­å»ºæåã\n\n\n\n * ç»ç«¯è®¿é®\n\ncurl http://ivoov.com:5000/v2/\n\n\n",normalizedContent:"# å®è£ docker registry ç§æ\n\n\n# æ¦è¿°\n\nå®æ¹ç docker hub æ¯ä¸ä¸ªç¨äºç®¡çå¬å±éåçå°æ¹ï¼æä»¬å¯ä»¥å¨ä¸é¢æ¾å°æä»¬æ³è¦çéåï¼ä¹å¯ä»¥ææä»¬èªå·±çéåæ¨éä¸å»ãä½æ¯ï¼ææ¶åæä»¬çæå¡å¨æ æ³è®¿é®äºèç½ï¼æèä½ ä¸å¸æå°èªå·±çéåæ¾å°å¬ç½å½ä¸­ï¼é£ä¹ä½ å°±éè¦ docker registryï¼å®å¯ä»¥ç¨æ¥å­å¨åç®¡çèªå·±çéåã\n\n\n# å®è£\n\nå¨ä¹åç docker ç§æä»åº ç« èä¸­å·²ç»æå°è¿å¦ä½éç½®åä½¿ç¨å®¹å¨è¿è¡ç§æä»åºï¼è¿éæä»¬ä½¿ç¨ docker-compose æ¥å®è£ï¼éç½®å¦ä¸ï¼\n\nversion: '3.7'\nservices:\n  registry:\n    image: registry\n    restart: always\n    container_name: registry\n    ports:\n      - 5000:5000\n    volumes:\n      - /usr/local/docker/registry/data:/var/lib/registry\n\n\n\n# éªè¯\n\nå¯å¨æååéè¦æµè¯æå¡ç«¯æ¯å¦è½å¤æ­£å¸¸æä¾æå¡ï¼æä¸¤ç§æ¹å¼ï¼\n\n * æµè§å¨ç«¯è®¿é®http://ivoov.com:5000/v2/\n * è¿å{}è¡¨ç¤ºdocker registry ç§ææ­å»ºæåã\n\n\n\n * ç»ç«¯è®¿é®\n\ncurl http://ivoov.com:5000/v2/\n\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"éç½® Docker Registry å®¢æ·ç«¯",frontmatter:{title:"éç½® Docker Registry å®¢æ·ç«¯",date:"2022-02-09T11:14:29.000Z",permalink:"/pages/87fa6f/"},regularPath:"/08.Registry/01.Registry/02.%E9%85%8D%E7%BD%AE%20Docker%20Registry%20%E5%AE%A2%E6%88%B7%E7%AB%AF.html",relativePath:"08.Registry/01.Registry/02.éç½® Docker Registry å®¢æ·ç«¯.md",key:"v-310b44d6",path:"/pages/87fa6f/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:29},{level:2,title:"æ£æ¥å®¢æ·ç«¯éç½®æ¯å¦çæ",slug:"æ£æ¥å®¢æ·ç«¯éç½®æ¯å¦çæ",normalizedTitle:"æ£æ¥å®¢æ·ç«¯éç½®æ¯å¦çæ",charIndex:393},{level:2,title:"æµè¯éåä¸ä¼ ",slug:"æµè¯éåä¸ä¼ ",normalizedTitle:"æµè¯éåä¸ä¼ ",charIndex:511},{level:2,title:"æ¥çå¨é¨éå",slug:"æ¥çå¨é¨éå",normalizedTitle:"æ¥çå¨é¨éå",charIndex:573},{level:2,title:"æ¥çæå®éå",slug:"æ¥çæå®éå",normalizedTitle:"æ¥çæå®éå",charIndex:792},{level:2,title:"æµè¯æåéå",slug:"æµè¯æåéå",normalizedTitle:"æµè¯æåéå",charIndex:878}],headersStr:"æ¦è¿° æ£æ¥å®¢æ·ç«¯éç½®æ¯å¦çæ æµè¯éåä¸ä¼  æ¥çå¨é¨éå æ¥çæå®éå æµè¯æåéå",content:'# éç½® Docker Registry å®¢æ·ç«¯\n\n\n# æ¦è¿°\n\næä»¬çæå­¦æ¡ä¾ä½¿ç¨çæ¯ Ubuntu Server 18.04 LTS çæ¬ï¼å±äº systemd ç³»ç»ï¼éè¦å¨ /etc/docker/daemon.json ä¸­å¢å å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\n\n\n\n\n\nÂ \nÂ \nÂ \n\n\n\n{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com"\n  ],\n  "insecure-registries": [\n    "ivoov.com:5000"\n  ]\n}\n\n\næç¤º\n\nè¯¥æä»¶å¿é¡»ç¬¦å json è§èï¼å¦å Docker å°ä¸è½å¯å¨ã\n\nä¹åéæ°å¯å¨æå¡ã\n\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n\n\n\n# æ£æ¥å®¢æ·ç«¯éç½®æ¯å¦çæ\n\nä½¿ç¨ docker info å½ä»¤æå¨æ£æ¥ï¼å¦æä»éç½®ä¸­çå°å¦ä¸åå®¹ï¼è¯´æéç½®æå\n\n\n\nÂ \n\n\n\nInsecure Registries:\n ivoov.com:5000\n 127.0.0.0/8\n\n\n\n# æµè¯éåä¸ä¼ \n\næä»¬ä»¥ Nginx ä¸ºä¾æµè¯éåä¸ä¼ åè½\n\n## æåä¸ä¸ªéå\ndocker pull nginx\n\n## æ¥çå¨é¨éå\ndocker images\n\n## æ è®°æ¬å°éåå¹¶æåç®æ ä»åºï¼ip:port/image_name:tagï¼è¯¥æ ¼å¼ä¸ºæ è®°çæ¬å·ï¼\ndocker tag nginx ivoov.com:5000/nginx\n\n## æäº¤éåå°ä»åº\ndocker push ivoov.com:5000/nginx\n\n\n\n# æ¥çå¨é¨éå\n\ncurl -XGET http://ivoov.com:5000/v2/_catalog\n\n\n\n# æ¥çæå®éå\n\nä»¥ Nginx ä¸ºä¾ï¼æ¥çå·²æäº¤çåè¡¨\n\ncurl -XGET http://ivoov.com:5000/v2/nginx/tags/list\n\n\n\n# æµè¯æåéå\n\n * åå é¤éå\n\ndocker rmi nginx\ndocker rmi ivoov.com:5000/nginx\n\n\n * åæåéå\n\ndocker pull ivoov.com:5000/nginx\n',normalizedContent:'# éç½® docker registry å®¢æ·ç«¯\n\n\n# æ¦è¿°\n\næä»¬çæå­¦æ¡ä¾ä½¿ç¨çæ¯ ubuntu server 18.04 lts çæ¬ï¼å±äº systemd ç³»ç»ï¼éè¦å¨ /etc/docker/daemon.json ä¸­å¢å å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\n\n\n\n\n\nÂ \nÂ \nÂ \n\n\n\n{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com"\n  ],\n  "insecure-registries": [\n    "ivoov.com:5000"\n  ]\n}\n\n\næç¤º\n\nè¯¥æä»¶å¿é¡»ç¬¦å json è§èï¼å¦å docker å°ä¸è½å¯å¨ã\n\nä¹åéæ°å¯å¨æå¡ã\n\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n\n\n\n# æ£æ¥å®¢æ·ç«¯éç½®æ¯å¦çæ\n\nä½¿ç¨ docker info å½ä»¤æå¨æ£æ¥ï¼å¦æä»éç½®ä¸­çå°å¦ä¸åå®¹ï¼è¯´æéç½®æå\n\n\n\nÂ \n\n\n\ninsecure registries:\n ivoov.com:5000\n 127.0.0.0/8\n\n\n\n# æµè¯éåä¸ä¼ \n\næä»¬ä»¥ nginx ä¸ºä¾æµè¯éåä¸ä¼ åè½\n\n## æåä¸ä¸ªéå\ndocker pull nginx\n\n## æ¥çå¨é¨éå\ndocker images\n\n## æ è®°æ¬å°éåå¹¶æåç®æ ä»åºï¼ip:port/image_name:tagï¼è¯¥æ ¼å¼ä¸ºæ è®°çæ¬å·ï¼\ndocker tag nginx ivoov.com:5000/nginx\n\n## æäº¤éåå°ä»åº\ndocker push ivoov.com:5000/nginx\n\n\n\n# æ¥çå¨é¨éå\n\ncurl -xget http://ivoov.com:5000/v2/_catalog\n\n\n\n# æ¥çæå®éå\n\nä»¥ nginx ä¸ºä¾ï¼æ¥çå·²æäº¤çåè¡¨\n\ncurl -xget http://ivoov.com:5000/v2/nginx/tags/list\n\n\n\n# æµè¯æåéå\n\n * åå é¤éå\n\ndocker rmi nginx\ndocker rmi ivoov.com:5000/nginx\n\n\n * åæåéå\n\ndocker pull ivoov.com:5000/nginx\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:16:31",lastUpdatedTimestamp:1644376591e3},{title:"é¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨",frontmatter:{title:"é¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨",date:"2022-02-09T11:14:29.000Z",permalink:"/pages/22b02b/"},regularPath:"/08.Registry/01.Registry/03.%E9%83%A8%E7%BD%B2%20Harbor%20%E4%BC%81%E4%B8%9A%E7%BA%A7Registry%E6%9C%8D%E5%8A%A1%E5%99%A8.html",relativePath:"08.Registry/01.Registry/03.é¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨.md",key:"v-0163bee7",path:"/pages/22b02b/",headers:[{level:2,title:"Harbor ç®ä»",slug:"harbor-ç®ä»",normalizedTitle:"harbor ç®ä»",charIndex:31},{level:2,title:"Harbor ç¹æ§",slug:"harbor-ç¹æ§",normalizedTitle:"harbor ç¹æ§",charIndex:320},{level:2,title:"Harbor ç»ä»¶",slug:"harbor-ç»ä»¶",normalizedTitle:"harbor ç»ä»¶",charIndex:774},{level:2,title:"Harbor å®ç°",slug:"harbor-å®ç°",normalizedTitle:"harbor å®ç°",charIndex:1552},{level:2,title:"å®è£ Docker å Docker-compose",slug:"å®è£-docker-å-docker-compose",normalizedTitle:"å®è£ docker å docker-compose",charIndex:3423},{level:3,title:"ç¡¬ä»¶è¦æ±",slug:"ç¡¬ä»¶è¦æ±",normalizedTitle:"ç¡¬ä»¶è¦æ±",charIndex:3494},{level:3,title:"è½¯ä»¶è¦æ±",slug:"è½¯ä»¶è¦æ±",normalizedTitle:"è½¯ä»¶è¦æ±",charIndex:3614},{level:3,title:"ç½ç»ç«¯å£",slug:"ç½ç»ç«¯å£",normalizedTitle:"ç½ç»ç«¯å£",charIndex:4071},{level:2,title:"å®è£ Harbor",slug:"å®è£-harbor",normalizedTitle:"å®è£ harbor",charIndex:4103},{level:2,title:"Harborå¯å¨ååæ­¢",slug:"harborå¯å¨ååæ­¢",normalizedTitle:"harborå¯å¨ååæ­¢",charIndex:5830},{level:2,title:"æµè¯ Harbor",slug:"æµè¯-harbor",normalizedTitle:"æµè¯ harbor",charIndex:6124},{level:2,title:"Harbor åºæ¬ä½¿ç¨",slug:"harbor-åºæ¬ä½¿ç¨",normalizedTitle:"harbor åºæ¬ä½¿ç¨",charIndex:6219},{level:3,title:"åå»ºç¨æ·",slug:"åå»ºç¨æ·",normalizedTitle:"åå»ºç¨æ·",charIndex:6235},{level:3,title:"dockerç§æéç½®",slug:"dockerç§æéç½®",normalizedTitle:"dockerç§æéç½®",charIndex:6316}],headersStr:"Harbor ç®ä» Harbor ç¹æ§ Harbor ç»ä»¶ Harbor å®ç° å®è£ Docker å Docker-compose ç¡¬ä»¶è¦æ± è½¯ä»¶è¦æ± ç½ç»ç«¯å£ å®è£ Harbor Harborå¯å¨ååæ­¢ æµè¯ Harbor Harbor åºæ¬ä½¿ç¨ åå»ºç¨æ· dockerç§æéç½®",content:'# é¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨\n\n\n# Harbor ç®ä»\n\n\n\nHarboræ¯ä¸ä¸ªç¨äºå­å¨åååDockeréåçä¼ä¸çº§Registryæå¡å¨ï¼éè¿æ·»å ä¸äºä¼ä¸å¿éçåè½ç¹æ§ï¼ä¾å¦å®å¨ãæ è¯åç®¡çç­ï¼æ©å±äºå¼æºDocker Distributionãä½ä¸ºä¸ä¸ªä¼ä¸çº§ç§æRegistryæå¡å¨ï¼Harboræä¾äºæ´å¥½çæ§è½åå®å¨ãæåç¨æ·ä½¿ç¨Registryæå»ºåè¿è¡ç¯å¢ä¼ è¾éåçæçãHarboræ¯æå®è£å¨å¤ä¸ªRegistryèç¹çéåèµæºå¤å¶ï¼éåå¨é¨ä¿å­å¨ç§æRegistryä¸­ï¼ ç¡®ä¿æ°æ®åç¥è¯äº§æå¨å¬å¸åé¨ç½ç»ä¸­ç®¡æ§ãå¦å¤ï¼Harborä¹æä¾äºé«çº§çå®å¨ç¹æ§ï¼è¯¸å¦ç¨æ·ç®¡çï¼è®¿é®æ§å¶åæ´»å¨å®¡è®¡ç­ã\n\n\n# Harbor ç¹æ§\n\n * åºäºè§è²çè®¿é®æ§å¶ï¼ç¨æ·ä¸Dockeréåä»åºéè¿âé¡¹ç®âè¿è¡ç»ç»ç®¡çï¼ä¸ä¸ªç¨æ·å¯ä»¥å¯¹å¤ä¸ªéåä»åºå¨åä¸å½åç©ºé´ï¼projectï¼éæä¸åçæéã\n\n * éåå¤å¶ï¼éåå¯ä»¥å¨å¤ä¸ªRegistryå®ä¾ä¸­å¤å¶ï¼åæ­¥ï¼ãå°¤å¶éåäºè´è½½åè¡¡ï¼é«å¯ç¨ï¼æ··åäºåå¤äºçåºæ¯ã\n\n * å¾å½¢åç¨æ·çé¢ï¼ç¨æ·å¯ä»¥éè¿æµè§å¨æ¥æµè§ï¼æ£ç´¢å½åDockeréåä»åºï¼ç®¡çé¡¹ç®åå½åç©ºé´ã\n\n * AD/LDAP æ¯æï¼Harborå¯ä»¥éæä¼ä¸åé¨å·²æçAD/LDAPï¼ç¨äºé´æè®¤è¯ç®¡çã\n\n * å®¡è®¡ç®¡çï¼ææéå¯¹éåä»åºçæä½é½å¯ä»¥è¢«è®°å½è¿½æº¯ï¼ç¨äºå®¡è®¡ç®¡çã\n\n * å½éåï¼å·²æ¥æè±æãä¸­æãå¾·æãæ¥æåä¿æçæ¬å°åçæ¬ãæ´å¤çè¯­è¨å°ä¼æ·»å è¿æ¥ã\n\n * RESTful APIï¼RESTful API æä¾ç»ç®¡çåå¯¹äºHarboræ´å¤çææ§, ä½¿å¾ä¸å¶å®ç®¡çè½¯ä»¶éæåå¾æ´å®¹æã\n\n * é¨ç½²ç®åï¼ æä¾å¨çº¿åç¦»çº¿ä¸¤ç§å®è£å·¥å·ï¼ ä¹å¯ä»¥å®è£å°vSphereå¹³å°(OVAæ¹å¼)èæè®¾å¤ã\n\n\n# Harbor ç»ä»¶\n\nHarborå¨æ¶æä¸ä¸»è¦ç±6ä¸ªç»ä»¶ææï¼\n\n * Proxyï¼Harborçregistry, UI, tokenç­æå¡ï¼éè¿ä¸ä¸ªåç½®çååä»£çç»ä¸æ¥æ¶æµè§å¨ãDockerå®¢æ·ç«¯çè¯·æ±ï¼å¹¶å°è¯·æ±è½¬åç»åç«¯ä¸åçæå¡ã\n\n * Registryï¼ è´è´£å¨å­Dockeréåï¼å¹¶å¤çdocker push/pull å½ä»¤ãç±äºæä»¬è¦å¯¹ç¨æ·è¿è¡è®¿é®æ§å¶ï¼å³ä¸åç¨æ·å¯¹Docker imageæä¸åçè¯»åæéï¼Registryä¼æåä¸ä¸ªtokenæå¡ï¼å¼ºå¶ç¨æ·çæ¯æ¬¡docker pull/pushè¯·æ±é½è¦æºå¸¦ä¸ä¸ªåæ³çtoken, Registryä¼éè¿å¬é¥å¯¹token è¿è¡è§£å¯éªè¯ã\n\n * Core servicesï¼ è¿æ¯Harborçæ ¸å¿åè½ï¼ä¸»è¦æä¾ä»¥ä¸æå¡ï¼\n\n * UIï¼æä¾å¾å½¢åçé¢ï¼å¸®å©ç¨æ·ç®¡çregistryä¸çéåï¼imageï¼, å¹¶å¯¹ç¨æ·è¿è¡ææã\n\n * webhookï¼ä¸ºäºåæ¶è·åregistry ä¸imageç¶æååçæåµï¼ å¨Registryä¸éç½®webhookï¼æç¶æååä¼ éç»UIæ¨¡åã\n\n * token æå¡ï¼è´è´£æ ¹æ®ç¨æ·æéç»æ¯ä¸ªdocker push/pullå½ä»¤ç­¾åtoken. Docker å®¢æ·ç«¯åRegiÃ¸stryæå¡åèµ·çè¯·æ±,å¦æä¸åå«tokenï¼ä¼è¢«éå®åå°è¿éï¼è·å¾tokenååéæ°åRegistryè¿è¡è¯·æ±ã\n\n * Databaseï¼ä¸ºcore servicesæä¾æ°æ®åºæå¡ï¼è´è´£å¨å­ç¨æ·æéãå®¡è®¡æ¥å¿ãDocker imageåç»ä¿¡æ¯ç­æ°æ®ã\n\n * Job Servicesï¼æä¾éåè¿ç¨å¤å¶åè½ï¼å¯ä»¥ææ¬å°éååæ­¥å°å¶ä»Harborå®ä¾ä¸­ã\n\n * Log collectorï¼ä¸ºäºå¸®å©çæ§Harborè¿è¡ï¼è´è´£æ¶éå¶ä»ç»ä»¶çlogï¼ä¾æ¥åè¿è¡åæã\n\n\n# Harbor å®ç°\n\nHarborçæ¯ä¸ªç»ä»¶é½æ¯ä»¥Dockerå®¹å¨çå½¢å¼æå»ºçï¼å®æ¹ä¹æ¯ä½¿ç¨Docker Composeæ¥å¯¹å®è¿è¡é¨ç½²ãç¨äºé¨ç½²HarborçDocker Composeæ¨¡æ¿ä½äº harbor/docker-compose.yml,æå¼è¿ä¸ªæ¨¡æ¿æä»¶ï¼åç°Harboræ¯ç±9ä¸ªå®¹å¨ç»æçï¼\n\ndocker-compose ps\n\n\n      Name                     Command                  State                 Ports          \n---------------------------------------------------------------------------------------------\nharbor-core         /harbor/harbor_core              Up (healthy)                            \nharbor-db           /docker-entrypoint.sh            Up (healthy)   5432/tcp                 \nharbor-jobservice   /harbor/harbor_jobservice  ...   Up (healthy)                            \nharbor-log          /bin/sh -c /usr/local/bin/ ...   Up (healthy)   127.0.0.1:1514->10514/tcp\nharbor-portal       nginx -g daemon off;             Up (healthy)   8080/tcp                 \nnginx               nginx -g daemon off;             Up (healthy)   0.0.0.0:80->8080/tcp     \nredis               redis-server /etc/redis.conf     Up (healthy)   6379/tcp                 \nregistry            /home/harbor/entrypoint.sh       Up (healthy)   5000/tcp                 \nregistryctl         /home/harbor/start.sh            Up (healthy)  \n\n\n * nginxï¼nginxè´è´£æµéè½¬ååå®å¨éªè¯ï¼å¯¹å¤æä¾çæµéé½æ¯ä»nginxä¸­è½¬ï¼æä»¥å¼æ¾httpsç443ç«¯å£ï¼å®å°æµéååå°åç«¯çuiåæ­£å¨dockeréåå­å¨çdocker registryã\n * harbor-jobserviceï¼harbor-jobservice æ¯harborçjobç®¡çæ¨¡åï¼jobå¨harboréé¢ä¸»è¦æ¯ä¸ºäºéåä»åºä¹ååæ­¥ä½¿ç¨ç;\n * harbor-portalï¼harbor-portalæ¯webç®¡çé¡µé¢ï¼ä¸»è¦æ¯åç«¯çé¡µé¢ååç«¯CURDçæ¥å£;\n * registryï¼registryå°±æ¯dockeråççä»åºï¼è´è´£ä¿å­éåã\n * Harbor-ctlï¼harbor-ctlræ¯harborç³»ç»ç®¡çæ¥å£ï¼å¯ä»¥ä¿®æ¹ç³»ç»éç½®ä»¥åè·åç³»ç»ä¿¡æ¯ã è¿å ä¸ªå®¹å¨éè¿Docker linkçå½¢å¼è¿æ¥å¨ä¸èµ·ï¼å¨å®¹å¨ä¹é´éè¿å®¹å¨åå­äºç¸è®¿é®ãå¯¹ç»ç«¯ç¨æ·èè¨ï¼åªéè¦æ´é²proxy ï¼å³Nginxï¼çæå¡ç«¯å£ã\n * harbor-dbï¼harbor-dbæ¯harborçæ°æ®åºï¼è¿éä¿å­äºç³»ç»çjobä»¥åé¡¹ç®ãäººåæéç®¡çãç±äºæ¬harborçè®¤è¯ä¹æ¯éè¿æ°æ®ï¼å¨çäº§ç¯èå¤§å¤å¯¹æ¥å°ä¼ä¸çldapä¸­ï¼\n * harbor-logï¼harbor-logæ¯harborçæ¥å¿æå¡ï¼ç»ä¸ç®¡çharborçæ¥å¿ãéè¿inspectå¯ä»¥çåºå®¹å¨ç»ä¸å°æ¥å¿è¾åºçsyslogã\n\nè¿å ä¸ªå®¹å¨éè¿Docker linkçå½¢å¼è¿æ¥å¨ä¸èµ·ï¼è¿æ ·ï¼å¨å®¹å¨ä¹é´å¯ä»¥éè¿å®¹å¨åå­äºç¸è®¿é®ãå¯¹ç»ç«¯ç¨æ·èè¨ï¼åªéè¦æ´é²proxy ï¼å³Nginxï¼çæå¡ç«¯å£ã\n\n\n# å®è£ Docker å Docker-compose\n\nå®è£Harboréè¦åå®è£ docker å docker-composeã\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²Harborçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\nCPU    2 CPU   4 CPU\nMem    4 GB    8 GB\nDisk   40 GB   160 GB\n\n\n# è½¯ä»¶è¦æ±\n\nä¸è¡¨ååºäºå¿é¡»å®è£å¨ç®æ ä¸»æºä¸çè½¯ä»¶çæ¬ã\n\nè½¯ä»¶               çæ¬                    æè¿°\næä½ç³»ç»             Ubuntu 20.04 LTS      ææ´é«çæ¬\nDocker engine    20.10.7               æå³å®è£è¯´æï¼è¯·åé Docker Engine documentation\nDocker Compose   1.29.2                æå³å®è£è¯´æï¼è¯·åé Docker Compose documentation\nOpenssl          Latest is preferred   ç¨äºçæHarborè¯ä¹¦åå¯é¥\nå®è£æ¹å¼             ç¦»çº¿å®è£                  harbor-offline-installer-v2.3.0.tgz\nå®è£ä½ç½®             /workspace/harbor     æ ¹æ®ä¸ªäººä¹ æ¯èªè¡éç½®\n\n\n# ç½ç»ç«¯å£\n\nHarborè¦æ±å¨ç®æ ä¸»æºä¸æå¼ä»¥ä¸ç«¯å£ã\n\n\n# å®è£ Harbor\n\nå®è£æ¹å¼åä¸ºå¨çº¿å®è£åç¦»çº¿å®è£ä¸¤ç§æ¹å¼ï¼æè¿ééæ©çæ¯å¨çº¿å®è£ãè®¿é® Harbor çGithubé¡µé¢ã\n\næ³¨æ\n\nä»¥ä¸å®è£è¿ç¨è¯·åæ¢ä½¿ç¨rootç¨æ·è¿è¡æä½\n\nå¨çº¿å®è£\n\nwget -P /workspace https://github.com/goharbor/harbor/releases/download/v2.3.0/harbor-online-installer-v2.3.0.tgz\n\n\nç¦»çº¿å®è£\n\nwget -P /workspace https://github.com/goharbor/harbor/releases/download/v2.3.0/harbor-offline-installer-v2.3.0.tgz\n\n\ncd /workspace\ntar zxvf harbor-offline-installer-v2.3.0.tgz\ncd harbor\n\n\nå¤å¶éç½®æä»¶æ¨¡ç\n\ncp harbor.yml.tmpl harbor.yml\n\n\nä¿®æ¹éç½®æä»¶ï¼harbor.ymlï¼éç½®hostnameãcertificateãprivate_keyã\n\nvim harbor.yml\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n# Configuration file of Harbor\n\n# The IP address or hostname to access admin UI and registry service.\n# DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.\nhostname: harbor.ieooc.com\n\n# http related config\nhttp:\n  # port for http, default is 80. If https enabled, this port will redirect to https port\n  port: 80\n\n# https related config\nhttps:\n  # https port for harbor, default is 443\n  port: 443\n  # The path of cert and key files for nginx\n  certificate: /workspace/harbor/cert/ieooc.com_chain.crt\n  private_key: /workspace/harbor/cert/ieooc.com_key.key\n...\n\n\næç¤º\n\nhostname = ä½ çååæIPï¼ä¾å¦ï¼harbor.ieooc.com æè 192.168.199.110\n\næ¬å°ç¯å¢ä½¿ç¨httpæ¶ï¼æ³¨éæhttps related configï¼å¦åéè¦ä¸ºhttpséç½®è¯ä¹¦\n\næ§è¡å®è£èæ¬\n\n./install.sh\n\n\nharborå®è£æåæ§å¶å°æ¥å¿è¾åºå¦ä¸ï¼\n\nCreating network "harbor_harbor" with the default driver\nCreating harbor-log ... done\nCreating harbor-db     ... done\nCreating redis         ... done\nCreating registryctl   ... done\nCreating registry      ... done\nCreating harbor-portal ... done\nCreating harbor-core   ... done\nCreating nginx             ... done\nCreating harbor-jobservice ... done\nâ ----Harbor has been installed and started successfully.----\n\n\n\n# Harborå¯å¨ååæ­¢\n\nHarbor çæ¥å¸¸è¿ç»´ç®¡çæ¯éè¿docker-composeæ¥å®æçï¼Harboræ¬èº«æå¤ä¸ªæå¡è¿ç¨ï¼é½æ¾å¨dockerå®¹å¨ä¹ä¸­è¿è¡ï¼æä»¬å¯ä»¥éè¿docker pså½ä»¤æ¥çã\n\ndocker ps\n\n\næèdocker-compose æ¥æ¥ç\n\ncd /workspace/harbor/\ndocker-compose ps\n\n\nHarborçå¯å¨ååæ­¢\n\nå¯å¨Harbor\n# docker-compose start\nåæ­¢Harbor\n# docker-comose stop\néå¯Harbor\n# docker-compose restart\n\n\n\n# æµè¯ Harbor\n\nä½¿ç¨ä½ çååæèIPç´æ¥è®¿é®Harbor\n\n\n\n\n\næç¤º\n\nHarbor é»è®¤ç¨æ·åï¼adminï¼å¯ç ï¼Harbor12345\n\nè³æ­¤ï¼Harborå®è£å®æã\n\n\n# Harbor åºæ¬ä½¿ç¨\n\n\n# åå»ºç¨æ·\n\nåå»ºç¨æ·: ç³»ç»ç®¡ç->ç¨æ·ç®¡ç->åå»ºç¨æ·\n\nå°æ°åå»ºç¨æ·æ·»å å°é¡¹ç®: é¡¹ç®->library>æå-> +ç¨æ· å°åå»ºå¥½çç¨æ·æ·»å è¿å»ã\n\n\n# dockerç§æéç½®\n\næ³¨æ\n\nå¦æharbor.ymlä¸­çportè®¾ç½®ä¸º80ï¼httpï¼ï¼åéè¦ä¿®æ¹daemon.jsonï¼æ·»å registry\n\nvi /etc/docker/daemon.json\n\n\n{\n    "insecure-registries": [\n       "192.168.199.110"\n    ]\n}\n\n\næç¤º\n\nå¦æportä¸º443ï¼httpsï¼ï¼åä¸éè¦ä¿®æ¹daemon.jsonæ·»å registryï¼å¿é¡»éç½®certï¼æ´å¤çä¿¡æ¯å¯ä»¥åèå®ç½ã\n\néå¯docker\n\nsystemctl restart docker\n\n\nç»å½registry\n\ndocker login 192.168.199.110\n\n\nä¸ºéåætag\n\ndocker tag SOURCE_IMAGE[:TAG] 192.168.199.110/library/IMAGE[:TAG]\n\n\nå°éåæ¨éå°harbor\n\ndocker push 192.168.199.110/library/IMAGE[:TAG]\n\n\nç»åºregistry\n\ndocker logout 192.168.199.110\n\n\næåéå\n\ndocker pull 192.168.199.110/library/IMAGE[:TAG]\n',normalizedContent:'# é¨ç½² harbor ä¼ä¸çº§registryæå¡å¨\n\n\n# harbor ç®ä»\n\n\n\nharboræ¯ä¸ä¸ªç¨äºå­å¨ååådockeréåçä¼ä¸çº§registryæå¡å¨ï¼éè¿æ·»å ä¸äºä¼ä¸å¿éçåè½ç¹æ§ï¼ä¾å¦å®å¨ãæ è¯åç®¡çç­ï¼æ©å±äºå¼æºdocker distributionãä½ä¸ºä¸ä¸ªä¼ä¸çº§ç§æregistryæå¡å¨ï¼harboræä¾äºæ´å¥½çæ§è½åå®å¨ãæåç¨æ·ä½¿ç¨registryæå»ºåè¿è¡ç¯å¢ä¼ è¾éåçæçãharboræ¯æå®è£å¨å¤ä¸ªregistryèç¹çéåèµæºå¤å¶ï¼éåå¨é¨ä¿å­å¨ç§æregistryä¸­ï¼ ç¡®ä¿æ°æ®åç¥è¯äº§æå¨å¬å¸åé¨ç½ç»ä¸­ç®¡æ§ãå¦å¤ï¼harborä¹æä¾äºé«çº§çå®å¨ç¹æ§ï¼è¯¸å¦ç¨æ·ç®¡çï¼è®¿é®æ§å¶åæ´»å¨å®¡è®¡ç­ã\n\n\n# harbor ç¹æ§\n\n * åºäºè§è²çè®¿é®æ§å¶ï¼ç¨æ·ä¸dockeréåä»åºéè¿âé¡¹ç®âè¿è¡ç»ç»ç®¡çï¼ä¸ä¸ªç¨æ·å¯ä»¥å¯¹å¤ä¸ªéåä»åºå¨åä¸å½åç©ºé´ï¼projectï¼éæä¸åçæéã\n\n * éåå¤å¶ï¼éåå¯ä»¥å¨å¤ä¸ªregistryå®ä¾ä¸­å¤å¶ï¼åæ­¥ï¼ãå°¤å¶éåäºè´è½½åè¡¡ï¼é«å¯ç¨ï¼æ··åäºåå¤äºçåºæ¯ã\n\n * å¾å½¢åç¨æ·çé¢ï¼ç¨æ·å¯ä»¥éè¿æµè§å¨æ¥æµè§ï¼æ£ç´¢å½ådockeréåä»åºï¼ç®¡çé¡¹ç®åå½åç©ºé´ã\n\n * ad/ldap æ¯æï¼harborå¯ä»¥éæä¼ä¸åé¨å·²æçad/ldapï¼ç¨äºé´æè®¤è¯ç®¡çã\n\n * å®¡è®¡ç®¡çï¼ææéå¯¹éåä»åºçæä½é½å¯ä»¥è¢«è®°å½è¿½æº¯ï¼ç¨äºå®¡è®¡ç®¡çã\n\n * å½éåï¼å·²æ¥æè±æãä¸­æãå¾·æãæ¥æåä¿æçæ¬å°åçæ¬ãæ´å¤çè¯­è¨å°ä¼æ·»å è¿æ¥ã\n\n * restful apiï¼restful api æä¾ç»ç®¡çåå¯¹äºharboræ´å¤çææ§, ä½¿å¾ä¸å¶å®ç®¡çè½¯ä»¶éæåå¾æ´å®¹æã\n\n * é¨ç½²ç®åï¼ æä¾å¨çº¿åç¦»çº¿ä¸¤ç§å®è£å·¥å·ï¼ ä¹å¯ä»¥å®è£å°vsphereå¹³å°(ovaæ¹å¼)èæè®¾å¤ã\n\n\n# harbor ç»ä»¶\n\nharborå¨æ¶æä¸ä¸»è¦ç±6ä¸ªç»ä»¶ææï¼\n\n * proxyï¼harborçregistry, ui, tokenç­æå¡ï¼éè¿ä¸ä¸ªåç½®çååä»£çç»ä¸æ¥æ¶æµè§å¨ãdockerå®¢æ·ç«¯çè¯·æ±ï¼å¹¶å°è¯·æ±è½¬åç»åç«¯ä¸åçæå¡ã\n\n * registryï¼ è´è´£å¨å­dockeréåï¼å¹¶å¤çdocker push/pull å½ä»¤ãç±äºæä»¬è¦å¯¹ç¨æ·è¿è¡è®¿é®æ§å¶ï¼å³ä¸åç¨æ·å¯¹docker imageæä¸åçè¯»åæéï¼registryä¼æåä¸ä¸ªtokenæå¡ï¼å¼ºå¶ç¨æ·çæ¯æ¬¡docker pull/pushè¯·æ±é½è¦æºå¸¦ä¸ä¸ªåæ³çtoken, registryä¼éè¿å¬é¥å¯¹token è¿è¡è§£å¯éªè¯ã\n\n * core servicesï¼ è¿æ¯harborçæ ¸å¿åè½ï¼ä¸»è¦æä¾ä»¥ä¸æå¡ï¼\n\n * uiï¼æä¾å¾å½¢åçé¢ï¼å¸®å©ç¨æ·ç®¡çregistryä¸çéåï¼imageï¼, å¹¶å¯¹ç¨æ·è¿è¡ææã\n\n * webhookï¼ä¸ºäºåæ¶è·åregistry ä¸imageç¶æååçæåµï¼ å¨registryä¸éç½®webhookï¼æç¶æååä¼ éç»uiæ¨¡åã\n\n * token æå¡ï¼è´è´£æ ¹æ®ç¨æ·æéç»æ¯ä¸ªdocker push/pullå½ä»¤ç­¾åtoken. docker å®¢æ·ç«¯åregiÃ¸stryæå¡åèµ·çè¯·æ±,å¦æä¸åå«tokenï¼ä¼è¢«éå®åå°è¿éï¼è·å¾tokenååéæ°åregistryè¿è¡è¯·æ±ã\n\n * databaseï¼ä¸ºcore servicesæä¾æ°æ®åºæå¡ï¼è´è´£å¨å­ç¨æ·æéãå®¡è®¡æ¥å¿ãdocker imageåç»ä¿¡æ¯ç­æ°æ®ã\n\n * job servicesï¼æä¾éåè¿ç¨å¤å¶åè½ï¼å¯ä»¥ææ¬å°éååæ­¥å°å¶ä»harborå®ä¾ä¸­ã\n\n * log collectorï¼ä¸ºäºå¸®å©çæ§harborè¿è¡ï¼è´è´£æ¶éå¶ä»ç»ä»¶çlogï¼ä¾æ¥åè¿è¡åæã\n\n\n# harbor å®ç°\n\nharborçæ¯ä¸ªç»ä»¶é½æ¯ä»¥dockerå®¹å¨çå½¢å¼æå»ºçï¼å®æ¹ä¹æ¯ä½¿ç¨docker composeæ¥å¯¹å®è¿è¡é¨ç½²ãç¨äºé¨ç½²harborçdocker composeæ¨¡æ¿ä½äº harbor/docker-compose.yml,æå¼è¿ä¸ªæ¨¡æ¿æä»¶ï¼åç°harboræ¯ç±9ä¸ªå®¹å¨ç»æçï¼\n\ndocker-compose ps\n\n\n      name                     command                  state                 ports          \n---------------------------------------------------------------------------------------------\nharbor-core         /harbor/harbor_core              up (healthy)                            \nharbor-db           /docker-entrypoint.sh            up (healthy)   5432/tcp                 \nharbor-jobservice   /harbor/harbor_jobservice  ...   up (healthy)                            \nharbor-log          /bin/sh -c /usr/local/bin/ ...   up (healthy)   127.0.0.1:1514->10514/tcp\nharbor-portal       nginx -g daemon off;             up (healthy)   8080/tcp                 \nnginx               nginx -g daemon off;             up (healthy)   0.0.0.0:80->8080/tcp     \nredis               redis-server /etc/redis.conf     up (healthy)   6379/tcp                 \nregistry            /home/harbor/entrypoint.sh       up (healthy)   5000/tcp                 \nregistryctl         /home/harbor/start.sh            up (healthy)  \n\n\n * nginxï¼nginxè´è´£æµéè½¬ååå®å¨éªè¯ï¼å¯¹å¤æä¾çæµéé½æ¯ä»nginxä¸­è½¬ï¼æä»¥å¼æ¾httpsç443ç«¯å£ï¼å®å°æµéååå°åç«¯çuiåæ­£å¨dockeréåå­å¨çdocker registryã\n * harbor-jobserviceï¼harbor-jobservice æ¯harborçjobç®¡çæ¨¡åï¼jobå¨harboréé¢ä¸»è¦æ¯ä¸ºäºéåä»åºä¹ååæ­¥ä½¿ç¨ç;\n * harbor-portalï¼harbor-portalæ¯webç®¡çé¡µé¢ï¼ä¸»è¦æ¯åç«¯çé¡µé¢ååç«¯curdçæ¥å£;\n * registryï¼registryå°±æ¯dockeråççä»åºï¼è´è´£ä¿å­éåã\n * harbor-ctlï¼harbor-ctlræ¯harborç³»ç»ç®¡çæ¥å£ï¼å¯ä»¥ä¿®æ¹ç³»ç»éç½®ä»¥åè·åç³»ç»ä¿¡æ¯ã è¿å ä¸ªå®¹å¨éè¿docker linkçå½¢å¼è¿æ¥å¨ä¸èµ·ï¼å¨å®¹å¨ä¹é´éè¿å®¹å¨åå­äºç¸è®¿é®ãå¯¹ç»ç«¯ç¨æ·èè¨ï¼åªéè¦æ´é²proxy ï¼å³nginxï¼çæå¡ç«¯å£ã\n * harbor-dbï¼harbor-dbæ¯harborçæ°æ®åºï¼è¿éä¿å­äºç³»ç»çjobä»¥åé¡¹ç®ãäººåæéç®¡çãç±äºæ¬harborçè®¤è¯ä¹æ¯éè¿æ°æ®ï¼å¨çäº§ç¯èå¤§å¤å¯¹æ¥å°ä¼ä¸çldapä¸­ï¼\n * harbor-logï¼harbor-logæ¯harborçæ¥å¿æå¡ï¼ç»ä¸ç®¡çharborçæ¥å¿ãéè¿inspectå¯ä»¥çåºå®¹å¨ç»ä¸å°æ¥å¿è¾åºçsyslogã\n\nè¿å ä¸ªå®¹å¨éè¿docker linkçå½¢å¼è¿æ¥å¨ä¸èµ·ï¼è¿æ ·ï¼å¨å®¹å¨ä¹é´å¯ä»¥éè¿å®¹å¨åå­äºç¸è®¿é®ãå¯¹ç»ç«¯ç¨æ·èè¨ï¼åªéè¦æ´é²proxy ï¼å³nginxï¼çæå¡ç«¯å£ã\n\n\n# å®è£ docker å docker-compose\n\nå®è£harboréè¦åå®è£ docker å docker-composeã\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²harborçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\ncpu    2 cpu   4 cpu\nmem    4 gb    8 gb\ndisk   40 gb   160 gb\n\n\n# è½¯ä»¶è¦æ±\n\nä¸è¡¨ååºäºå¿é¡»å®è£å¨ç®æ ä¸»æºä¸çè½¯ä»¶çæ¬ã\n\nè½¯ä»¶               çæ¬                    æè¿°\næä½ç³»ç»             ubuntu 20.04 lts      ææ´é«çæ¬\ndocker engine    20.10.7               æå³å®è£è¯´æï¼è¯·åé docker engine documentation\ndocker compose   1.29.2                æå³å®è£è¯´æï¼è¯·åé docker compose documentation\nopenssl          latest is preferred   ç¨äºçæharborè¯ä¹¦åå¯é¥\nå®è£æ¹å¼             ç¦»çº¿å®è£                  harbor-offline-installer-v2.3.0.tgz\nå®è£ä½ç½®             /workspace/harbor     æ ¹æ®ä¸ªäººä¹ æ¯èªè¡éç½®\n\n\n# ç½ç»ç«¯å£\n\nharborè¦æ±å¨ç®æ ä¸»æºä¸æå¼ä»¥ä¸ç«¯å£ã\n\n\n# å®è£ harbor\n\nå®è£æ¹å¼åä¸ºå¨çº¿å®è£åç¦»çº¿å®è£ä¸¤ç§æ¹å¼ï¼æè¿ééæ©çæ¯å¨çº¿å®è£ãè®¿é® harbor çgithubé¡µé¢ã\n\næ³¨æ\n\nä»¥ä¸å®è£è¿ç¨è¯·åæ¢ä½¿ç¨rootç¨æ·è¿è¡æä½\n\nå¨çº¿å®è£\n\nwget -p /workspace https://github.com/goharbor/harbor/releases/download/v2.3.0/harbor-online-installer-v2.3.0.tgz\n\n\nç¦»çº¿å®è£\n\nwget -p /workspace https://github.com/goharbor/harbor/releases/download/v2.3.0/harbor-offline-installer-v2.3.0.tgz\n\n\ncd /workspace\ntar zxvf harbor-offline-installer-v2.3.0.tgz\ncd harbor\n\n\nå¤å¶éç½®æä»¶æ¨¡ç\n\ncp harbor.yml.tmpl harbor.yml\n\n\nä¿®æ¹éç½®æä»¶ï¼harbor.ymlï¼éç½®hostnameãcertificateãprivate_keyã\n\nvim harbor.yml\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n# configuration file of harbor\n\n# the ip address or hostname to access admin ui and registry service.\n# do not use localhost or 127.0.0.1, because harbor needs to be accessed by external clients.\nhostname: harbor.ieooc.com\n\n# http related config\nhttp:\n  # port for http, default is 80. if https enabled, this port will redirect to https port\n  port: 80\n\n# https related config\nhttps:\n  # https port for harbor, default is 443\n  port: 443\n  # the path of cert and key files for nginx\n  certificate: /workspace/harbor/cert/ieooc.com_chain.crt\n  private_key: /workspace/harbor/cert/ieooc.com_key.key\n...\n\n\næç¤º\n\nhostname = ä½ çååæipï¼ä¾å¦ï¼harbor.ieooc.com æè 192.168.199.110\n\næ¬å°ç¯å¢ä½¿ç¨httpæ¶ï¼æ³¨éæhttps related configï¼å¦åéè¦ä¸ºhttpséç½®è¯ä¹¦\n\næ§è¡å®è£èæ¬\n\n./install.sh\n\n\nharborå®è£æåæ§å¶å°æ¥å¿è¾åºå¦ä¸ï¼\n\ncreating network "harbor_harbor" with the default driver\ncreating harbor-log ... done\ncreating harbor-db     ... done\ncreating redis         ... done\ncreating registryctl   ... done\ncreating registry      ... done\ncreating harbor-portal ... done\ncreating harbor-core   ... done\ncreating nginx             ... done\ncreating harbor-jobservice ... done\nâ ----harbor has been installed and started successfully.----\n\n\n\n# harborå¯å¨ååæ­¢\n\nharbor çæ¥å¸¸è¿ç»´ç®¡çæ¯éè¿docker-composeæ¥å®æçï¼harboræ¬èº«æå¤ä¸ªæå¡è¿ç¨ï¼é½æ¾å¨dockerå®¹å¨ä¹ä¸­è¿è¡ï¼æä»¬å¯ä»¥éè¿docker pså½ä»¤æ¥çã\n\ndocker ps\n\n\næèdocker-compose æ¥æ¥ç\n\ncd /workspace/harbor/\ndocker-compose ps\n\n\nharborçå¯å¨ååæ­¢\n\nå¯å¨harbor\n# docker-compose start\nåæ­¢harbor\n# docker-comose stop\néå¯harbor\n# docker-compose restart\n\n\n\n# æµè¯ harbor\n\nä½¿ç¨ä½ çååæèipç´æ¥è®¿é®harbor\n\n\n\n\n\næç¤º\n\nharbor é»è®¤ç¨æ·åï¼adminï¼å¯ç ï¼harbor12345\n\nè³æ­¤ï¼harborå®è£å®æã\n\n\n# harbor åºæ¬ä½¿ç¨\n\n\n# åå»ºç¨æ·\n\nåå»ºç¨æ·: ç³»ç»ç®¡ç->ç¨æ·ç®¡ç->åå»ºç¨æ·\n\nå°æ°åå»ºç¨æ·æ·»å å°é¡¹ç®: é¡¹ç®->library>æå-> +ç¨æ· å°åå»ºå¥½çç¨æ·æ·»å è¿å»ã\n\n\n# dockerç§æéç½®\n\næ³¨æ\n\nå¦æharbor.ymlä¸­çportè®¾ç½®ä¸º80ï¼httpï¼ï¼åéè¦ä¿®æ¹daemon.jsonï¼æ·»å registry\n\nvi /etc/docker/daemon.json\n\n\n{\n    "insecure-registries": [\n       "192.168.199.110"\n    ]\n}\n\n\næç¤º\n\nå¦æportä¸º443ï¼httpsï¼ï¼åä¸éè¦ä¿®æ¹daemon.jsonæ·»å registryï¼å¿é¡»éç½®certï¼æ´å¤çä¿¡æ¯å¯ä»¥åèå®ç½ã\n\néå¯docker\n\nsystemctl restart docker\n\n\nç»å½registry\n\ndocker login 192.168.199.110\n\n\nä¸ºéåætag\n\ndocker tag source_image[:tag] 192.168.199.110/library/image[:tag]\n\n\nå°éåæ¨éå°harbor\n\ndocker push 192.168.199.110/library/image[:tag]\n\n\nç»åºregistry\n\ndocker logout 192.168.199.110\n\n\næåéå\n\ndocker pull 192.168.199.110/library/image[:tag]\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"é¨ç½² Docker å¯è§åç®¡çå·¥å·Portainer",frontmatter:{title:"é¨ç½² Docker å¯è§åç®¡çå·¥å·Portainer",date:"2022-02-09T11:14:29.000Z",permalink:"/pages/7ad507/"},regularPath:"/08.Registry/01.Registry/04.%E9%83%A8%E7%BD%B2%20Docker%20%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Portainer.html",relativePath:"08.Registry/01.Registry/04.é¨ç½² Docker å¯è§åç®¡çå·¥å·Portainer.md",key:"v-a4144134",path:"/pages/7ad507/",headers:[{level:2,title:"Portainerä»ç»",slug:"portainerä»ç»",normalizedTitle:"portainerä»ç»",charIndex:303},{level:2,title:"åæºçè¿è¡",slug:"åæºçè¿è¡",normalizedTitle:"åæºçè¿è¡",charIndex:472},{level:2,title:"åå»º docker-compose.yml",slug:"åå»º-docker-compose-yml",normalizedTitle:"åå»º docker-compose.yml",charIndex:573},{level:2,title:"å¯å¨ Portainer",slug:"å¯å¨-portainer",normalizedTitle:"å¯å¨ portainer",charIndex:812},{level:2,title:"è®¿é® Portainer",slug:"è®¿é®-portainer",normalizedTitle:"è®¿é® portainer",charIndex:889},{level:2,title:"é¦é¡µ",slug:"é¦é¡µ",normalizedTitle:"é¦é¡µ",charIndex:1101},{level:2,title:"æ§å¶å°",slug:"æ§å¶å°",normalizedTitle:"æ§å¶å°",charIndex:401},{level:2,title:"å®¹å¨åè¡¨",slug:"å®¹å¨åè¡¨",normalizedTitle:"å®¹å¨åè¡¨",charIndex:1120},{level:2,title:"éååè¡¨",slug:"éååè¡¨",normalizedTitle:"éååè¡¨",charIndex:1180},{level:2,title:"ä»åºç®¡ç",slug:"ä»åºç®¡ç",normalizedTitle:"ä»åºç®¡ç",charIndex:1345},{level:2,title:"æ©å±ï¼éç¾¤è¿è¡",slug:"æ©å±-éç¾¤è¿è¡",normalizedTitle:"æ©å±ï¼éç¾¤è¿è¡",charIndex:1471}],headersStr:"Portainerä»ç» åæºçè¿è¡ åå»º docker-compose.yml å¯å¨ Portainer è®¿é® Portainer é¦é¡µ æ§å¶å° å®¹å¨åè¡¨ éååè¡¨ ä»åºç®¡ç æ©å±ï¼éç¾¤è¿è¡",content:"# é¨ç½² Docker å¯è§åç®¡çå·¥å·Portainer\n\nç§æå®è£æååå°±å¯ä»¥ä½¿ç¨ docker å½ä»¤è¡å·¥å·å¯¹ registry ååç§æä½äºãå¯¹äºçæshellãææ¯å¼åäººåèè¨ï¼è¿æ¯å¯ä»¥æ¥åçï¼çç»ä¹åï¼å½ä»¤è¡æ¯ç«æ¯å¾æ¹ä¾¿çï¼ä¾¿äºæä½åèæ¬åãä½å¯¹äºå½ä»¤è¡è¿æãéææ¯äººåï¼è¿è¡dockeré¨ç½²ãç®¡çæ¯æ¯è¾å¤´ç¼çï¼å­¦ä¹ ææ¬æ¯å¾é«çãèå¸é¢ä¸çå¯è§åç®¡çå·¥å·ä¹æ¯å¾å¤çï¼åæä¼ç¼ºç¹ï¼portaineråè½å®åï¼ç®åæç»­ç»´æ¤æ´æ°ï¼æç»æéæ©äºå®ï¼ä½ä¸ºDockerç®¡çå·¥å·ã\n\næç¤º\n\nå¯¹äºdockeråå­¦èï¼ä¸æ¨èä½¿ç¨dockerå¯è§åå·¥å·ï¼è¿æ¯åå¤çæçæå½ä»¤è¡å§ï¼è¿æ ·ä¾¿äºçè§£dockerã\n\n\n# Portainerä»ç»\n\nPortaineræ¯Dockerçå¾å½¢åç®¡çå·¥å·ï¼æä¾ç¶ææ¾ç¤ºé¢æ¿ãåºç¨æ¨¡æ¿å¿«éé¨ç½²ãå®¹å¨éåç½ç»æ°æ®å·çåºæ¬æä½ï¼åæ¬ä¸ä¼ ä¸è½½éåï¼åå»ºå®¹å¨ç­æä½ï¼ãäºä»¶æ¥å¿æ¾ç¤ºãå®¹å¨æ§å¶å°æä½ãSwarméç¾¤åæå¡ç­éä¸­ç®¡çåæä½ãç»å½ç¨æ·ç®¡çåæ§å¶ç­åè½ãåè½ååå¨é¢ï¼åºæ¬è½æ»¡è¶³ä¸­å°ååä½å¯¹å®¹å¨ç®¡ççå¨é¨éæ±ã\n\n\n# åæºçè¿è¡\n\nå¦æä»æä¸ä¸ªdockerå®¿ä¸»æºï¼åå¯ä½¿ç¨åæºçè¿è¡ï¼Portaineråæºçè¿è¡ååç®åï¼ä½¿ç¨docker-composeå¯å¨å®¹å¨ï¼æ¥ç®¡çè¯¥æºå¨ä¸çdockeréåãå®¹å¨ç­æ°æ®ã\n\n\n# åå»º docker-compose.yml\n\nversion: '3.7'\nservices:\n  portainer:\n    image: portainer/portainer\n    restart: always\n    container_name: portainer\n    ports:\n      - 9000:9000\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n\n\n\n# å¯å¨ Portainer\n\ndocker-compose up -d\n\n\næ§è¡å®è¯¥å½ä»¤ä¹åï¼ä½¿ç¨è¯¥æºå¨IP:PORTå³å¯è®¿é®Portainerã\n\n\n# è®¿é® Portainer\n\næµè§å¨è®¿é®å°åï¼http://ivoov.com:9000\n\né¦æ¬¡ç»ééè¦æ³¨åç¨æ·ï¼ç»adminç¨æ·è®¾ç½®å¯ç ï¼\n\n\n\nåæºçè¿ééæ©localå³å¯ï¼éæ©å®æ¯ï¼ç¹å»Connectå³å¯è¿æ¥å°æ¬å°dockerï¼\n\n\n\næ³¨æ\n\nè¯¥é¡µé¢ä¸ææç¤ºéè¦æè½½æ¬å° /var/run/docker.sockerä¸å®¹å¨åç/var/run/docker.sockerè¿æ¥ãå æ­¤ï¼å¨å¯å¨æ¶å¿é¡»æå®è¯¥æè½½æä»¶ã\n\n\n# é¦é¡µ\n\n\n\n\n# æ§å¶å°\n\n\n\n\n# å®¹å¨åè¡¨\n\n\n\nç¹å»å®¹å¨åè¡¨ä¸­çå®¹å¨åNameï¼å³å¯æ¥çå®¹å¨è¯¦æï¼\n\nå¹¶ä¸å¨å®¹å¨è¯¦æé¡µå¯ä»¥ä½¿ç¨è¯¥å®¹å¨åå»ºéåï¼\n\n\n# éååè¡¨\n\nå¨éååè¡¨å¯ä»¥ç´æ¥pullä¸ä¸ªéåï¼å¯ä»¥ä»è¿ç¨pullï¼ä¹å¯ä»¥ä»ç§æåºä¸­pullãä»ç§æåºä¸­pullï¼éè¦å°ç§æåºçå°åæåè¿è¡éç½®ï¼è¿ä¸ªå¨åé¢ä¼è¯´ã\n\nç¹å»éåIDï¼å³å¯æ¥çéåè¯¦æä¿¡æ¯ï¼å¨è¯¦æä¿¡æ¯é¡µé¢ï¼é¤äºéåçä¸äºä¿¡æ¯å¤ï¼è¿å¯ä»¥å¯¹è¯¥éåè¿è¡ææ ç­¾tagæä½ï¼ç¶åå°éåpushå°è¿ç¨ä»åºæèç§æä»åºä¸­ã\n\n\n# ä»åºç®¡ç\n\nè¯¥çé¢å¯ä»¥æ¥çéç½®çéåä»åºåè¡¨ï¼åæ¶å¯ä»¥æ·»å ä»åºï¼æ·»å æåä¹åï¼å³å¯å¨imageéåé¡µé¢è¿è¡pullãpushæä½ã\n\næ·»å éåä»åºï¼\n\nPortainerä¸­è¿æä¸äºå«çæä½ï¼æ¯å¦æéç®¡çãç½ç»ç®¡çç­ç­ï¼å¯ä»¥å®è£ä¸è¿è¡äºè§£å­¦ä¹ ã\n\n\n# æ©å±ï¼éç¾¤è¿è¡\n\næ´å¤çæåµä¸ï¼æä»¬ä¼æä¸ä¸ªdockeréç¾¤ï¼å¯è½æå å°æºå¨ï¼ä¹å¯è½æå åå°æºå¨ï¼å æ­¤ï¼è¿è¡éç¾¤ç®¡çå°±ååéè¦äºï¼Portainerä¹æ¯æéç¾¤ç®¡çï¼Portainerå¯ä»¥åSwarmä¸èµ·æ¥è¿è¡éç¾¤ç®¡çæä½ã",normalizedContent:"# é¨ç½² docker å¯è§åç®¡çå·¥å·portainer\n\nç§æå®è£æååå°±å¯ä»¥ä½¿ç¨ docker å½ä»¤è¡å·¥å·å¯¹ registry ååç§æä½äºãå¯¹äºçæshellãææ¯å¼åäººåèè¨ï¼è¿æ¯å¯ä»¥æ¥åçï¼çç»ä¹åï¼å½ä»¤è¡æ¯ç«æ¯å¾æ¹ä¾¿çï¼ä¾¿äºæä½åèæ¬åãä½å¯¹äºå½ä»¤è¡è¿æãéææ¯äººåï¼è¿è¡dockeré¨ç½²ãç®¡çæ¯æ¯è¾å¤´ç¼çï¼å­¦ä¹ ææ¬æ¯å¾é«çãèå¸é¢ä¸çå¯è§åç®¡çå·¥å·ä¹æ¯å¾å¤çï¼åæä¼ç¼ºç¹ï¼portaineråè½å®åï¼ç®åæç»­ç»´æ¤æ´æ°ï¼æç»æéæ©äºå®ï¼ä½ä¸ºdockerç®¡çå·¥å·ã\n\næç¤º\n\nå¯¹äºdockeråå­¦èï¼ä¸æ¨èä½¿ç¨dockerå¯è§åå·¥å·ï¼è¿æ¯åå¤çæçæå½ä»¤è¡å§ï¼è¿æ ·ä¾¿äºçè§£dockerã\n\n\n# portainerä»ç»\n\nportaineræ¯dockerçå¾å½¢åç®¡çå·¥å·ï¼æä¾ç¶ææ¾ç¤ºé¢æ¿ãåºç¨æ¨¡æ¿å¿«éé¨ç½²ãå®¹å¨éåç½ç»æ°æ®å·çåºæ¬æä½ï¼åæ¬ä¸ä¼ ä¸è½½éåï¼åå»ºå®¹å¨ç­æä½ï¼ãäºä»¶æ¥å¿æ¾ç¤ºãå®¹å¨æ§å¶å°æä½ãswarméç¾¤åæå¡ç­éä¸­ç®¡çåæä½ãç»å½ç¨æ·ç®¡çåæ§å¶ç­åè½ãåè½ååå¨é¢ï¼åºæ¬è½æ»¡è¶³ä¸­å°ååä½å¯¹å®¹å¨ç®¡ççå¨é¨éæ±ã\n\n\n# åæºçè¿è¡\n\nå¦æä»æä¸ä¸ªdockerå®¿ä¸»æºï¼åå¯ä½¿ç¨åæºçè¿è¡ï¼portaineråæºçè¿è¡ååç®åï¼ä½¿ç¨docker-composeå¯å¨å®¹å¨ï¼æ¥ç®¡çè¯¥æºå¨ä¸çdockeréåãå®¹å¨ç­æ°æ®ã\n\n\n# åå»º docker-compose.yml\n\nversion: '3.7'\nservices:\n  portainer:\n    image: portainer/portainer\n    restart: always\n    container_name: portainer\n    ports:\n      - 9000:9000\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n\n\n\n# å¯å¨ portainer\n\ndocker-compose up -d\n\n\næ§è¡å®è¯¥å½ä»¤ä¹åï¼ä½¿ç¨è¯¥æºå¨ip:portå³å¯è®¿é®portainerã\n\n\n# è®¿é® portainer\n\næµè§å¨è®¿é®å°åï¼http://ivoov.com:9000\n\né¦æ¬¡ç»ééè¦æ³¨åç¨æ·ï¼ç»adminç¨æ·è®¾ç½®å¯ç ï¼\n\n\n\nåæºçè¿ééæ©localå³å¯ï¼éæ©å®æ¯ï¼ç¹å»connectå³å¯è¿æ¥å°æ¬å°dockerï¼\n\n\n\næ³¨æ\n\nè¯¥é¡µé¢ä¸ææç¤ºéè¦æè½½æ¬å° /var/run/docker.sockerä¸å®¹å¨åç/var/run/docker.sockerè¿æ¥ãå æ­¤ï¼å¨å¯å¨æ¶å¿é¡»æå®è¯¥æè½½æä»¶ã\n\n\n# é¦é¡µ\n\n\n\n\n# æ§å¶å°\n\n\n\n\n# å®¹å¨åè¡¨\n\n\n\nç¹å»å®¹å¨åè¡¨ä¸­çå®¹å¨ånameï¼å³å¯æ¥çå®¹å¨è¯¦æï¼\n\nå¹¶ä¸å¨å®¹å¨è¯¦æé¡µå¯ä»¥ä½¿ç¨è¯¥å®¹å¨åå»ºéåï¼\n\n\n# éååè¡¨\n\nå¨éååè¡¨å¯ä»¥ç´æ¥pullä¸ä¸ªéåï¼å¯ä»¥ä»è¿ç¨pullï¼ä¹å¯ä»¥ä»ç§æåºä¸­pullãä»ç§æåºä¸­pullï¼éè¦å°ç§æåºçå°åæåè¿è¡éç½®ï¼è¿ä¸ªå¨åé¢ä¼è¯´ã\n\nç¹å»éåidï¼å³å¯æ¥çéåè¯¦æä¿¡æ¯ï¼å¨è¯¦æä¿¡æ¯é¡µé¢ï¼é¤äºéåçä¸äºä¿¡æ¯å¤ï¼è¿å¯ä»¥å¯¹è¯¥éåè¿è¡ææ ç­¾tagæä½ï¼ç¶åå°éåpushå°è¿ç¨ä»åºæèç§æä»åºä¸­ã\n\n\n# ä»åºç®¡ç\n\nè¯¥çé¢å¯ä»¥æ¥çéç½®çéåä»åºåè¡¨ï¼åæ¶å¯ä»¥æ·»å ä»åºï¼æ·»å æåä¹åï¼å³å¯å¨imageéåé¡µé¢è¿è¡pullãpushæä½ã\n\næ·»å éåä»åºï¼\n\nportainerä¸­è¿æä¸äºå«çæä½ï¼æ¯å¦æéç®¡çãç½ç»ç®¡çç­ç­ï¼å¯ä»¥å®è£ä¸è¿è¡äºè§£å­¦ä¹ ã\n\n\n# æ©å±ï¼éç¾¤è¿è¡\n\næ´å¤çæåµä¸ï¼æä»¬ä¼æä¸ä¸ªdockeréç¾¤ï¼å¯è½æå å°æºå¨ï¼ä¹å¯è½æå åå°æºå¨ï¼å æ­¤ï¼è¿è¡éç¾¤ç®¡çå°±ååéè¦äºï¼portainerä¹æ¯æéç¾¤ç®¡çï¼portainerå¯ä»¥åswarmä¸èµ·æ¥è¿è¡éç¾¤ç®¡çæä½ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Redis ç®ä»",frontmatter:{title:"Redis ç®ä»",date:"2022-02-09T11:23:08.000Z",permalink:"/pages/5b81e8/"},regularPath:"/09.Redis/01.Redis/01.Redis%20%E7%AE%80%E4%BB%8B.html",relativePath:"09.Redis/01.Redis/01.Redis ç®ä».md",key:"v-818a32e0",path:"/pages/5b81e8/",headers:[{level:2,title:"ä»ä¹æ¯redis",slug:"ä»ä¹æ¯redis",normalizedTitle:"ä»ä¹æ¯redis",charIndex:15},{level:2,title:"redisçåºç¨åºæ¯",slug:"redisçåºç¨åºæ¯",normalizedTitle:"redisçåºç¨åºæ¯",charIndex:166}],headersStr:"ä»ä¹æ¯redis redisçåºç¨åºæ¯",content:"# Redis ç®ä»\n\n\n# ä»ä¹æ¯redis\n\nredisæ¯ç¨Cè¯­è¨å¼åçä¸ä¸ªå¼æºçé«æ§è½é®å¼å¯¹ï¼key-valueï¼æ°æ®åºãå®éè¿æä¾å¤ç§é®å¼æ°æ®ç±»åæ¥éåºä¸ååºæ¯ä¸çå­å¨éæ±ï¼ç®åä¸ºæ­¢redisæ¯æçé®å¼æ°æ®ç±»åå¦ä¸å­ç¬¦ä¸²ãåè¡¨ï¼listsï¼ãéåï¼setsï¼ãæåºéåï¼sorts setsï¼ãåå¸è¡¨ï¼hashsï¼\n\n\n# redisçåºç¨åºæ¯\n\n * ç¼å­ï¼æ°æ®æ¥è¯¢ãç­è¿æ¥ãæ°é»åå®¹ãåååå®¹ç­ç­ï¼ãï¼æå¤ä½¿ç¨ï¼\n * åå¸å¼éç¾¤æ¶æä¸­çsessionåç¦»ã\n * èå¤©å®¤çå¨çº¿å¥½ååè¡¨ã\n * ä»»å¡éåãï¼ç§æãæ¢è´­ã12306ç­ç­ï¼\n * åºç¨æè¡æ¦ã\n * ç½ç«è®¿é®ç»è®¡ã\n * æ°æ®è¿æå¤çï¼å¯ä»¥ç²¾ç¡®å°æ¯«ç§ï¼",normalizedContent:"# redis ç®ä»\n\n\n# ä»ä¹æ¯redis\n\nredisæ¯ç¨cè¯­è¨å¼åçä¸ä¸ªå¼æºçé«æ§è½é®å¼å¯¹ï¼key-valueï¼æ°æ®åºãå®éè¿æä¾å¤ç§é®å¼æ°æ®ç±»åæ¥éåºä¸ååºæ¯ä¸çå­å¨éæ±ï¼ç®åä¸ºæ­¢redisæ¯æçé®å¼æ°æ®ç±»åå¦ä¸å­ç¬¦ä¸²ãåè¡¨ï¼listsï¼ãéåï¼setsï¼ãæåºéåï¼sorts setsï¼ãåå¸è¡¨ï¼hashsï¼\n\n\n# redisçåºç¨åºæ¯\n\n * ç¼å­ï¼æ°æ®æ¥è¯¢ãç­è¿æ¥ãæ°é»åå®¹ãåååå®¹ç­ç­ï¼ãï¼æå¤ä½¿ç¨ï¼\n * åå¸å¼éç¾¤æ¶æä¸­çsessionåç¦»ã\n * èå¤©å®¤çå¨çº¿å¥½ååè¡¨ã\n * ä»»å¡éåãï¼ç§æãæ¢è´­ã12306ç­ç­ï¼\n * åºç¨æè¡æ¦ã\n * ç½ç«è®¿é®ç»è®¡ã\n * æ°æ®è¿æå¤çï¼å¯ä»¥ç²¾ç¡®å°æ¯«ç§ï¼",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"åºäºæºç ç¼è¯å®è£ Redis",frontmatter:{title:"åºäºæºç ç¼è¯å®è£ Redis",date:"2022-02-09T11:23:08.000Z",permalink:"/pages/3f32a2/"},regularPath:"/09.Redis/01.Redis/02.%E5%9F%BA%E4%BA%8E%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%20Redis.html",relativePath:"09.Redis/01.Redis/02.åºäºæºç ç¼è¯å®è£ Redis.md",key:"v-8ba9dd7a",path:"/pages/3f32a2/",headers:[{level:2,title:"ä¾èµ",slug:"ä¾èµ",normalizedTitle:"ä¾èµ",charIndex:21},{level:2,title:"å®è£Redis",slug:"å®è£redis",normalizedTitle:"å®è£redis",charIndex:70},{level:2,title:"å¯å¨Redis",slug:"å¯å¨redis",normalizedTitle:"å¯å¨redis",charIndex:1285},{level:2,title:"å³é­Redis",slug:"å³é­redis",normalizedTitle:"å³é­redis",charIndex:3606},{level:2,title:"è®¾ç½®å¯ç ",slug:"è®¾ç½®å¯ç ",normalizedTitle:"è®¾ç½®å¯ç ",charIndex:3769},{level:2,title:"å¼æºèªå¯",slug:"å¼æºèªå¯",normalizedTitle:"å¼æºèªå¯",charIndex:5189}],headersStr:"ä¾èµ å®è£Redis å¯å¨Redis å³é­Redis è®¾ç½®å¯ç  å¼æºèªå¯",content:'# åºäºæºç ç¼è¯å®è£ Redis\n\n\n# ä¾èµ\n\nä¾èµ      çæ¬\næä½ç³»ç»    centos7\nredis   5.0.0\n\n\n# å®è£Redis\n\nä¸é¢ä»ç»å¨CentOSç¯å¢ä¸ï¼Redisçå®è£ä¸é¨ç½²ï¼Redisä»3.0çæ¬ä»¥åå¢å äºéç¾¤åè½ã\n\næ­¥éª¤å¦ä¸ï¼\n\nç±äºRedisæ¯ç¨Cè¯­è¨ç¼åï¼æä»¥ç¼è¯æ¶éè¦gccï¼\n\nyum install gcc-c++\n\n\néè¿å®ç½ä¸è½½ å°åï¼http://download.redis.io/releases/redis-5.0.0.tar.gz\n\næ ä½¿ç¨linux wgetå½ä»¤ï¼\n\nwget http://download.redis.io/releases/redis-5.0.0.tar.gz\n\n\nææºç åä¸ä¼ å°linuxæå¡å¨ï¼å¨ä¸ä¼ çç®å½ä¸è¿è¡è§£å\n\ntar -zxvf redis-5.0.0.tar.gz\n\n\nè¿å¥è§£ååçç®å½è¿è¡ç¼è¯makeï¼æå®ç®å½å®è£make install å¦ /usr/local/redis\n\ncd redis-5.0.0/\nmake (è¿éè¿redis-5.0.0/ç®å½ä¸ç´æ¥makeç¼è¯å°±å¥½äº)\nmake install PREFIX=/usr/local/redis  ï¼æå®ç¼è¯è·¯å¾ï¼\n\n\nè¿å¥å®è£ç®å½binä¸\n\ncd /usr/local/redis/bin\n\n\n[root@localhost bin]# ls -al\ntotal 32628\ndrwxr-xr-x 2 root root     134 Nov 24 12:05 .\ndrwxr-xr-x 3 root root      17 Nov 24 12:05 ..\n-rwxr-xr-x 1 root root 4366600 Nov 24 12:05 redis-benchmark\n-rwxr-xr-x 1 root root 8082744 Nov 24 12:05 redis-check-aof\n-rwxr-xr-x 1 root root 8082744 Nov 24 12:05 redis-check-rdb\n-rwxr-xr-x 1 root root 4783504 Nov 24 12:05 redis-cli\nlrwxrwxrwx 1 root root      12 Nov 24 12:05 redis-sentinel -> redis-server\n-rwxr-xr-x 1 root root 8082744 Nov 24 12:05 redis-server\n\n\n * redis-benchmark redisæ§è½æµè¯å·¥å·\n * redis-check-aof AOFæä»¶ä¿®å¤å·¥å·\n * redis-check-rdb RDBæä»¶ä¿®å¤å·¥å·\n * redis-cli rediså½ä»¤è¡å®¢æ·ç«¯\n * redis.conf rediséç½®æä»¶\n * redis-sentinal rediséç¾¤ç®¡çå·¥å·\n * redis-server redisæå¡è¿ç¨\n\n\n# å¯å¨Redis\n\nåç«¯æ¨¡å¼å¯å¨\n\n1ï¼ä»redisçæºç ç®å½ä¸­å¤å¶redis.confå°redisçå®è£ç®å½binä¸ã\n\ncp /root/redis-5.0.0/redis.conf /usr/local/redis/bin\n\n\n[root@localhost redis-5.0.0]# ls -al\ntotal 240\ndrwxrwxr-x   6 root root   309 Oct 17  2018 .\ndr-xr-x---.  6 root root  4096 Nov 24 12:04 ..\n-rw-rw-r--   1 root root 75104 Oct 17  2018 00-RELEASENOTES\n-rw-rw-r--   1 root root    53 Oct 17  2018 BUGS\n-rw-rw-r--   1 root root  1894 Oct 17  2018 CONTRIBUTING\n-rw-rw-r--   1 root root  1487 Oct 17  2018 COPYING\ndrwxrwxr-x   6 root root   192 Nov 24 12:04 deps\n-rw-rw-r--   1 root root   376 Oct 17  2018 .gitignore\n-rw-rw-r--   1 root root    11 Oct 17  2018 INSTALL\n-rw-rw-r--   1 root root   151 Oct 17  2018 Makefile\n-rw-rw-r--   1 root root  4223 Oct 17  2018 MANIFESTO\n-rw-rw-r--   1 root root 20555 Oct 17  2018 01.Redis ç®ä».md\n-rw-rw-r--   1 root root 62155 Oct 17  2018 redis.conf\n-rwxrwxr-x   1 root root   275 Oct 17  2018 runtest\n-rwxrwxr-x   1 root root   280 Oct 17  2018 runtest-cluster\n-rwxrwxr-x   1 root root   281 Oct 17  2018 runtest-sentinel\n-rw-rw-r--   1 root root  9710 Oct 17  2018 sentinel.conf\ndrwxrwxr-x   3 root root  8192 Nov 24 12:05 src\ndrwxrwxr-x  10 root root   167 Oct 17  2018 tests\ndrwxrwxr-x   8 root root  4096 Oct 17  2018 utils\n[root@localhost redis-5.0.0]# cd /usr/local/redis/bin/\n[root@localhost bin]# ls -al\ntotal 32692\ndrwxr-xr-x 2 root root     152 Nov 24 12:07 .\ndrwxr-xr-x 3 root root      17 Nov 24 12:05 ..\n-rwxr-xr-x 1 root root 4366600 Nov 24 12:05 redis-benchmark\n-rwxr-xr-x 1 root root 8082744 Nov 24 12:05 redis-check-aof\n-rwxr-xr-x 1 root root 8082744 Nov 24 12:05 redis-check-rdb\n-rwxr-xr-x 1 root root 4783504 Nov 24 12:05 redis-cli\n-rw-r--r-- 1 root root   62155 Nov 24 12:07 redis.conf\nlrwxrwxrwx 1 root root      12 Nov 24 12:05 redis-sentinel -> redis-server\n-rwxr-xr-x 1 root root 8082744 Nov 24 12:05 redis-server\n\n\n2ï¼ä¿®æ¹éç½®æä»¶ ï¼æ¯å¦åå°å¯å¨ï¼\n\nvim /usr/local/redis/bin/redis.conf\n\n\næ¾å° daemonize æi è¿å¥ç¼è¾æ¨¡å¼ æno æ¹ä¸º yes\n\næESC + :wq ä¿å­éåº\n\næ§è¡å¦ä¸å½ä»¤å¯å¨redisï¼\n\ncd /usr/local/redis/bin\n./redis-server ./redis.conf\n\n\n3.æ¥çæ¯å¦å¯å¨æå\n\nps aux|grep redis\n\n\n[root@localhost bin]# ps aux|grep redis\nroot     13853  0.0  0.1 153980  7636 ?        Ssl  12:10   0:00 ./redis-server 127.0.0.1:6379\nroot     13858  0.0  0.0 112808   968 pts/0    S+   12:10   0:00 grep --color=auto redis\n\n\nredisé»è®¤ç«¯å£ä¸º 6379ï¼å¯æ´æ¹redis.confæä»¶ï¼ä¿®æ¹ç«¯å£å·\n\n\n# å³é­Redis\n\nå¼ºè¡ç»æ­¢redisè¿ç¨å¯è½ä¼å¯¼è´redisæä¹åæ°æ®ä¸¢å¤±ã\n\næ­£ç¡®åæ­¢Redisçæ¹å¼åºè¯¥æ¯åRedisåéSHUTDOWNå½ä»¤ï¼\n\nå½ä»¤ä¸ºï¼\n\ncd /usr/local/redis\n./bin/redis-cli shutdown\n\n\nå¼ºè¡ç»æ­¢redis\npkill redis-server\n\n\n\n# è®¾ç½®å¯ç \n\nvi /usr/local/redis/bin/redis.conf\n\n\næ¾å°# requirepass foobaredå»ææ³¨éå°foobaredæ¿æ¢æéè¦éç½®çå¯ç å³å¯ã\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n################################## SECURITY ###################################\n\n# Require clients to issue AUTH <PASSWORD> before processing any other\n# commands.  This might be useful in environments in which you do not trust\n# others with access to the host running redis-server.\n#\n# This should stay commented out for backward compatibility and because most\n# people do not need auth (e.g. they run their own servers).\n#\n# Warning: since Redis is pretty fast an outside user can try up to\n# 150k passwords per second against a good box. This means that you should\n# use a very strong password otherwise it will be very easy to break.\n#\n# requirepass foobared\n\n# Command renaming.\n#\n# It is possible to change the name of dangerous commands in a shared\n# environment. For instance the CONFIG command may be renamed into something\n# hard to guess so that it will still be available for internal-use tools\n# but not available for general clients.\n#\n# Example:\n#\n# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52\n#\n# It is also possible to completely kill a command by renaming it into\n# an empty string:\n#\n# rename-command CONFIG ""\n#\n# Please note that changing the name of commands that are logged into the\n# AOF file or transmitted to replicas may cause problems.\n\n\n\n# å¼æºèªå¯\n\ncentos 7ä»¥ä¸æ¯ç¨Systemdè¿è¡ç³»ç»åå§åçï¼Systemd æ¯ Linux ç³»ç»ä¸­ææ°çåå§åç³»ç»ï¼initï¼ï¼å®ä¸»è¦çè®¾è®¡ç®æ æ¯åæ sysvinit åºæçç¼ºç¹ï¼æé«ç³»ç»çå¯å¨éåº¦ã Systemdæå¡æä»¶ä»¥.serviceç»å°¾ï¼æ¯å¦ç°å¨è¦å»ºç«redisä¸ºå¼æºå¯å¨ï¼å¦æç¨yum installå½ä»¤å®è£çï¼yumå½ä»¤ä¼èªå¨åå»ºredis.serviceæä»¶ï¼ç´æ¥ç¨å½ä»¤systemcel enable redis.serviceè®¾ç½®å¼æºå¯å¨å³å¯\n\nå¨ç³»ç»æå¡ç®å½éåå»ºredis.serviceæä»¶\n\nvim /etc/systemd/system/redis.service\n\n\nåå¥ä»¥ä¸åå®¹ï¼\n\n[Unit]\nDescription=redis-server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\n\næ³¨æï¼ExecStartéç½®æèªå·±çè·¯å¾\n\néç½®æè¿°ï¼\n\n * Description:æè¿°æå¡\n * After:æè¿°æå¡ç±»å«\n * [Service]æå¡è¿è¡åæ°çè®¾ç½®\n * Type=forkingæ¯åå°è¿è¡çå½¢å¼\n * ExecStartä¸ºæå¡çå·ä½è¿è¡å½ä»¤\n * ExecReloadä¸ºéå¯å½ä»¤\n * ExecStopä¸ºåæ­¢å½ä»¤\n * PrivateTmp=Trueè¡¨ç¤ºç»æå¡åéç¬ç«çä¸´æ¶ç©ºé´\n * æ³¨æï¼[Service]çå¯å¨ãéå¯ãåæ­¢å½ä»¤å¨é¨è¦æ±ä½¿ç¨ç»å¯¹è·¯å¾\n * [Install]è¿è¡çº§å«ä¸æå¡å®è£çç¸å³è®¾ç½®ï¼å¯è®¾ç½®ä¸ºå¤ç¨æ·ï¼å³ç³»ç»è¿è¡çº§å«ä¸º3\n\néè½½ç³»ç»æå¡ï¼\n\nsystemctl daemon-reload\n\n\næµè¯å¹¶å å¥å¼æºèªå¯\n\nåå³é­redis-server\n\nsystemctl stop redis.service\n\n\nå¼å¯redis-server\n\nsystemctl start redis.service\t\n\n\n> å¦ææå¡æ¯å¼å¯ç¶æï¼ä½¿ç¨æ­¤å½ä»¤ä¼å¯å¨å¤±è´¥ã\n\nå¼å¯æåï¼å°æå¡å å¥å¼æºèªå¯\n\nsystemctl enable redis.service\n\n\n> æ³¨æåé¢ä¸è½è·ç©ºæ ¼\n\nreboot #éå¯\n\næ¥çæå¡è¿è¡ç¶æï¼\n\nsystemctl status redis.service\n\n\nå¨é¨å½ä»¤\n\nsystemctl start redis.service #å¯å¨redisæå¡\nsystemctl enable redis.service #è®¾ç½®å¼æºèªå¯å¨ \nsystemctl disable redis.service #åæ­¢å¼æºèªå¯å¨ \nsystemctl status redis.service #æ¥çæå¡å½åç¶æ \nsystemctl restart redis.serviceã #éæ°å¯å¨æå¡ \nsystemctl list-units --type=service #æ¥çææå·²å¯å¨çæå¡\n\n\nè³æ­¤rediså®è£éç½®å®æ¯ã\n\ngood luck !',normalizedContent:'# åºäºæºç ç¼è¯å®è£ redis\n\n\n# ä¾èµ\n\nä¾èµ      çæ¬\næä½ç³»ç»    centos7\nredis   5.0.0\n\n\n# å®è£redis\n\nä¸é¢ä»ç»å¨centosç¯å¢ä¸ï¼redisçå®è£ä¸é¨ç½²ï¼redisä»3.0çæ¬ä»¥åå¢å äºéç¾¤åè½ã\n\næ­¥éª¤å¦ä¸ï¼\n\nç±äºredisæ¯ç¨cè¯­è¨ç¼åï¼æä»¥ç¼è¯æ¶éè¦gccï¼\n\nyum install gcc-c++\n\n\néè¿å®ç½ä¸è½½ å°åï¼http://download.redis.io/releases/redis-5.0.0.tar.gz\n\næ ä½¿ç¨linux wgetå½ä»¤ï¼\n\nwget http://download.redis.io/releases/redis-5.0.0.tar.gz\n\n\nææºç åä¸ä¼ å°linuxæå¡å¨ï¼å¨ä¸ä¼ çç®å½ä¸è¿è¡è§£å\n\ntar -zxvf redis-5.0.0.tar.gz\n\n\nè¿å¥è§£ååçç®å½è¿è¡ç¼è¯makeï¼æå®ç®å½å®è£make install å¦ /usr/local/redis\n\ncd redis-5.0.0/\nmake (è¿éè¿redis-5.0.0/ç®å½ä¸ç´æ¥makeç¼è¯å°±å¥½äº)\nmake install prefix=/usr/local/redis  ï¼æå®ç¼è¯è·¯å¾ï¼\n\n\nè¿å¥å®è£ç®å½binä¸\n\ncd /usr/local/redis/bin\n\n\n[root@localhost bin]# ls -al\ntotal 32628\ndrwxr-xr-x 2 root root     134 nov 24 12:05 .\ndrwxr-xr-x 3 root root      17 nov 24 12:05 ..\n-rwxr-xr-x 1 root root 4366600 nov 24 12:05 redis-benchmark\n-rwxr-xr-x 1 root root 8082744 nov 24 12:05 redis-check-aof\n-rwxr-xr-x 1 root root 8082744 nov 24 12:05 redis-check-rdb\n-rwxr-xr-x 1 root root 4783504 nov 24 12:05 redis-cli\nlrwxrwxrwx 1 root root      12 nov 24 12:05 redis-sentinel -> redis-server\n-rwxr-xr-x 1 root root 8082744 nov 24 12:05 redis-server\n\n\n * redis-benchmark redisæ§è½æµè¯å·¥å·\n * redis-check-aof aofæä»¶ä¿®å¤å·¥å·\n * redis-check-rdb rdbæä»¶ä¿®å¤å·¥å·\n * redis-cli rediså½ä»¤è¡å®¢æ·ç«¯\n * redis.conf rediséç½®æä»¶\n * redis-sentinal rediséç¾¤ç®¡çå·¥å·\n * redis-server redisæå¡è¿ç¨\n\n\n# å¯å¨redis\n\nåç«¯æ¨¡å¼å¯å¨\n\n1ï¼ä»redisçæºç ç®å½ä¸­å¤å¶redis.confå°redisçå®è£ç®å½binä¸ã\n\ncp /root/redis-5.0.0/redis.conf /usr/local/redis/bin\n\n\n[root@localhost redis-5.0.0]# ls -al\ntotal 240\ndrwxrwxr-x   6 root root   309 oct 17  2018 .\ndr-xr-x---.  6 root root  4096 nov 24 12:04 ..\n-rw-rw-r--   1 root root 75104 oct 17  2018 00-releasenotes\n-rw-rw-r--   1 root root    53 oct 17  2018 bugs\n-rw-rw-r--   1 root root  1894 oct 17  2018 contributing\n-rw-rw-r--   1 root root  1487 oct 17  2018 copying\ndrwxrwxr-x   6 root root   192 nov 24 12:04 deps\n-rw-rw-r--   1 root root   376 oct 17  2018 .gitignore\n-rw-rw-r--   1 root root    11 oct 17  2018 install\n-rw-rw-r--   1 root root   151 oct 17  2018 makefile\n-rw-rw-r--   1 root root  4223 oct 17  2018 manifesto\n-rw-rw-r--   1 root root 20555 oct 17  2018 01.redis ç®ä».md\n-rw-rw-r--   1 root root 62155 oct 17  2018 redis.conf\n-rwxrwxr-x   1 root root   275 oct 17  2018 runtest\n-rwxrwxr-x   1 root root   280 oct 17  2018 runtest-cluster\n-rwxrwxr-x   1 root root   281 oct 17  2018 runtest-sentinel\n-rw-rw-r--   1 root root  9710 oct 17  2018 sentinel.conf\ndrwxrwxr-x   3 root root  8192 nov 24 12:05 src\ndrwxrwxr-x  10 root root   167 oct 17  2018 tests\ndrwxrwxr-x   8 root root  4096 oct 17  2018 utils\n[root@localhost redis-5.0.0]# cd /usr/local/redis/bin/\n[root@localhost bin]# ls -al\ntotal 32692\ndrwxr-xr-x 2 root root     152 nov 24 12:07 .\ndrwxr-xr-x 3 root root      17 nov 24 12:05 ..\n-rwxr-xr-x 1 root root 4366600 nov 24 12:05 redis-benchmark\n-rwxr-xr-x 1 root root 8082744 nov 24 12:05 redis-check-aof\n-rwxr-xr-x 1 root root 8082744 nov 24 12:05 redis-check-rdb\n-rwxr-xr-x 1 root root 4783504 nov 24 12:05 redis-cli\n-rw-r--r-- 1 root root   62155 nov 24 12:07 redis.conf\nlrwxrwxrwx 1 root root      12 nov 24 12:05 redis-sentinel -> redis-server\n-rwxr-xr-x 1 root root 8082744 nov 24 12:05 redis-server\n\n\n2ï¼ä¿®æ¹éç½®æä»¶ ï¼æ¯å¦åå°å¯å¨ï¼\n\nvim /usr/local/redis/bin/redis.conf\n\n\næ¾å° daemonize æi è¿å¥ç¼è¾æ¨¡å¼ æno æ¹ä¸º yes\n\næesc + :wq ä¿å­éåº\n\næ§è¡å¦ä¸å½ä»¤å¯å¨redisï¼\n\ncd /usr/local/redis/bin\n./redis-server ./redis.conf\n\n\n3.æ¥çæ¯å¦å¯å¨æå\n\nps aux|grep redis\n\n\n[root@localhost bin]# ps aux|grep redis\nroot     13853  0.0  0.1 153980  7636 ?        ssl  12:10   0:00 ./redis-server 127.0.0.1:6379\nroot     13858  0.0  0.0 112808   968 pts/0    s+   12:10   0:00 grep --color=auto redis\n\n\nredisé»è®¤ç«¯å£ä¸º 6379ï¼å¯æ´æ¹redis.confæä»¶ï¼ä¿®æ¹ç«¯å£å·\n\n\n# å³é­redis\n\nå¼ºè¡ç»æ­¢redisè¿ç¨å¯è½ä¼å¯¼è´redisæä¹åæ°æ®ä¸¢å¤±ã\n\næ­£ç¡®åæ­¢redisçæ¹å¼åºè¯¥æ¯åredisåéshutdownå½ä»¤ï¼\n\nå½ä»¤ä¸ºï¼\n\ncd /usr/local/redis\n./bin/redis-cli shutdown\n\n\nå¼ºè¡ç»æ­¢redis\npkill redis-server\n\n\n\n# è®¾ç½®å¯ç \n\nvi /usr/local/redis/bin/redis.conf\n\n\næ¾å°# requirepass foobaredå»ææ³¨éå°foobaredæ¿æ¢æéè¦éç½®çå¯ç å³å¯ã\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n################################## security ###################################\n\n# require clients to issue auth <password> before processing any other\n# commands.  this might be useful in environments in which you do not trust\n# others with access to the host running redis-server.\n#\n# this should stay commented out for backward compatibility and because most\n# people do not need auth (e.g. they run their own servers).\n#\n# warning: since redis is pretty fast an outside user can try up to\n# 150k passwords per second against a good box. this means that you should\n# use a very strong password otherwise it will be very easy to break.\n#\n# requirepass foobared\n\n# command renaming.\n#\n# it is possible to change the name of dangerous commands in a shared\n# environment. for instance the config command may be renamed into something\n# hard to guess so that it will still be available for internal-use tools\n# but not available for general clients.\n#\n# example:\n#\n# rename-command config b840fc02d524045429941cc15f59e41cb7be6c52\n#\n# it is also possible to completely kill a command by renaming it into\n# an empty string:\n#\n# rename-command config ""\n#\n# please note that changing the name of commands that are logged into the\n# aof file or transmitted to replicas may cause problems.\n\n\n\n# å¼æºèªå¯\n\ncentos 7ä»¥ä¸æ¯ç¨systemdè¿è¡ç³»ç»åå§åçï¼systemd æ¯ linux ç³»ç»ä¸­ææ°çåå§åç³»ç»ï¼initï¼ï¼å®ä¸»è¦çè®¾è®¡ç®æ æ¯åæ sysvinit åºæçç¼ºç¹ï¼æé«ç³»ç»çå¯å¨éåº¦ã systemdæå¡æä»¶ä»¥.serviceç»å°¾ï¼æ¯å¦ç°å¨è¦å»ºç«redisä¸ºå¼æºå¯å¨ï¼å¦æç¨yum installå½ä»¤å®è£çï¼yumå½ä»¤ä¼èªå¨åå»ºredis.serviceæä»¶ï¼ç´æ¥ç¨å½ä»¤systemcel enable redis.serviceè®¾ç½®å¼æºå¯å¨å³å¯\n\nå¨ç³»ç»æå¡ç®å½éåå»ºredis.serviceæä»¶\n\nvim /etc/systemd/system/redis.service\n\n\nåå¥ä»¥ä¸åå®¹ï¼\n\n[unit]\ndescription=redis-server\nafter=network.target\n\n[service]\ntype=forking\nexecstart=/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf\nprivatetmp=true\n\n[install]\nwantedby=multi-user.target\n\n\næ³¨æï¼execstartéç½®æèªå·±çè·¯å¾\n\néç½®æè¿°ï¼\n\n * description:æè¿°æå¡\n * after:æè¿°æå¡ç±»å«\n * [service]æå¡è¿è¡åæ°çè®¾ç½®\n * type=forkingæ¯åå°è¿è¡çå½¢å¼\n * execstartä¸ºæå¡çå·ä½è¿è¡å½ä»¤\n * execreloadä¸ºéå¯å½ä»¤\n * execstopä¸ºåæ­¢å½ä»¤\n * privatetmp=trueè¡¨ç¤ºç»æå¡åéç¬ç«çä¸´æ¶ç©ºé´\n * æ³¨æï¼[service]çå¯å¨ãéå¯ãåæ­¢å½ä»¤å¨é¨è¦æ±ä½¿ç¨ç»å¯¹è·¯å¾\n * [install]è¿è¡çº§å«ä¸æå¡å®è£çç¸å³è®¾ç½®ï¼å¯è®¾ç½®ä¸ºå¤ç¨æ·ï¼å³ç³»ç»è¿è¡çº§å«ä¸º3\n\néè½½ç³»ç»æå¡ï¼\n\nsystemctl daemon-reload\n\n\næµè¯å¹¶å å¥å¼æºèªå¯\n\nåå³é­redis-server\n\nsystemctl stop redis.service\n\n\nå¼å¯redis-server\n\nsystemctl start redis.service\t\n\n\n> å¦ææå¡æ¯å¼å¯ç¶æï¼ä½¿ç¨æ­¤å½ä»¤ä¼å¯å¨å¤±è´¥ã\n\nå¼å¯æåï¼å°æå¡å å¥å¼æºèªå¯\n\nsystemctl enable redis.service\n\n\n> æ³¨æåé¢ä¸è½è·ç©ºæ ¼\n\nreboot #éå¯\n\næ¥çæå¡è¿è¡ç¶æï¼\n\nsystemctl status redis.service\n\n\nå¨é¨å½ä»¤\n\nsystemctl start redis.service #å¯å¨redisæå¡\nsystemctl enable redis.service #è®¾ç½®å¼æºèªå¯å¨ \nsystemctl disable redis.service #åæ­¢å¼æºèªå¯å¨ \nsystemctl status redis.service #æ¥çæå¡å½åç¶æ \nsystemctl restart redis.serviceã #éæ°å¯å¨æå¡ \nsystemctl list-units --type=service #æ¥çææå·²å¯å¨çæå¡\n\n\nè³æ­¤rediså®è£éç½®å®æ¯ã\n\ngood luck !',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"åºäº Docker å®è£ Redis",frontmatter:{title:"åºäº Docker å®è£ Redis",date:"2022-02-09T11:23:08.000Z",permalink:"/pages/7a3c10/"},regularPath:"/09.Redis/01.Redis/03.%E5%9F%BA%E4%BA%8E%20Docker%20%E5%AE%89%E8%A3%85%20Redis.html",relativePath:"09.Redis/01.Redis/03.åºäº Docker å®è£ Redis.md",key:"v-8cb52cfc",path:"/pages/7a3c10/",headers:[{level:2,title:"ä½¿ç¨ docker-compose å®è£ Redis",slug:"ä½¿ç¨-docker-compose-å®è£-redis",normalizedTitle:"ä½¿ç¨ docker-compose å®è£ redis",charIndex:25}],headersStr:"ä½¿ç¨ docker-compose å®è£ Redis",content:"# åºäº Docker å®è£ Redis\n\n\n# ä½¿ç¨ docker-compose å®è£ Redis\n\nä½¿ç¨ Docker Compose æ¨å¯ä»¥è½»æ¾å°éç½®ãå®è£ååçº§åºäº Docker ç Redis å®è£ã\n\n1.å®è£ Docker Compose\n\n2.åå»ºdocker-compose.ymlæä»¶ã\n\nversion: '3'\n\nservices:\n  redis:\n    image: redis\n    container_name: redis\n    hostname: redis\n    restart: always\n    ports:\n      - 6379:6379\n    networks:\n      - net_db\n    volumes:\n      - ./conf/redis.conf:/etc/redis/redis.conf:rw\n      - ./data:/data:rw\n    command:\n      redis-server /etc/redis/redis.conf --appendonly yes\n\nnetworks:\n  net_db:\n    driver: bridge\n\n\n2.åå»ºredis.confæä»¶ã\n\nrequirepass 123456\nbind 0.0.0.0\n#daemonize yes\nappendonly yes\n",normalizedContent:"# åºäº docker å®è£ redis\n\n\n# ä½¿ç¨ docker-compose å®è£ redis\n\nä½¿ç¨ docker compose æ¨å¯ä»¥è½»æ¾å°éç½®ãå®è£ååçº§åºäº docker ç redis å®è£ã\n\n1.å®è£ docker compose\n\n2.åå»ºdocker-compose.ymlæä»¶ã\n\nversion: '3'\n\nservices:\n  redis:\n    image: redis\n    container_name: redis\n    hostname: redis\n    restart: always\n    ports:\n      - 6379:6379\n    networks:\n      - net_db\n    volumes:\n      - ./conf/redis.conf:/etc/redis/redis.conf:rw\n      - ./data:/data:rw\n    command:\n      redis-server /etc/redis/redis.conf --appendonly yes\n\nnetworks:\n  net_db:\n    driver: bridge\n\n\n2.åå»ºredis.confæä»¶ã\n\nrequirepass 123456\nbind 0.0.0.0\n#daemonize yes\nappendonly yes\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"ä»ä¹æ¯ Nginx",frontmatter:{title:"ä»ä¹æ¯ Nginx",date:"2022-02-09T11:24:38.000Z",permalink:"/pages/8c9288/"},regularPath:"/10.Nginx/01.Nginx/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Nginx.html",relativePath:"10.Nginx/01.Nginx/01.ä»ä¹æ¯ Nginx.md",key:"v-48788de2",path:"/pages/8c9288/",headersStr:null,content:'# ä»ä¹æ¯ Nginx\n\nNginx("engine x")æ¯ä¸æ¬¾æ¯ç±ä¿ç½æ¯çç¨åºè®¾è®¡å¸Igor Sysoevæå¼åé«æ§è½ç Webå ååä»£ç æå¡å¨ï¼ä¹æ¯ä¸ä¸ª IMAP/POP3/SMTP ä»£çæå¡å¨ã\n\nå¨é«è¿æ¥å¹¶åçæåµä¸ï¼Nginxæ¯Apacheæå¡å¨ä¸éçæ¿ä»£åã',normalizedContent:'# ä»ä¹æ¯ nginx\n\nnginx("engine x")æ¯ä¸æ¬¾æ¯ç±ä¿ç½æ¯çç¨åºè®¾è®¡å¸igor sysoevæå¼åé«æ§è½ç webå ååä»£ç æå¡å¨ï¼ä¹æ¯ä¸ä¸ª imap/pop3/smtp ä»£çæå¡å¨ã\n\nå¨é«è¿æ¥å¹¶åçæåµä¸ï¼nginxæ¯apacheæå¡å¨ä¸éçæ¿ä»£åã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Nginx å®è£SSLè¯ä¹¦",frontmatter:{title:"Nginx å®è£SSLè¯ä¹¦",date:"2022-02-09T11:24:38.000Z",permalink:"/pages/df904c/"},regularPath:"/10.Nginx/01.Nginx/02.Nginx%20%E5%AE%89%E8%A3%85SSL%E8%AF%81%E4%B9%A6.html",relativePath:"10.Nginx/01.Nginx/02.Nginx å®è£SSLè¯ä¹¦.md",key:"v-4c9ef69c",path:"/pages/df904c/",headers:[{level:2,title:"èæ¯ä¿¡æ¯",slug:"èæ¯ä¿¡æ¯",normalizedTitle:"èæ¯ä¿¡æ¯",charIndex:74},{level:2,title:"æä½æ­¥éª¤",slug:"æä½æ­¥éª¤",normalizedTitle:"æä½æ­¥éª¤",charIndex:426},{level:2,title:"è®¾ç½®HTTPè¯·æ±èªå¨è·³è½¬HTTPS",slug:"è®¾ç½®httpè¯·æ±èªå¨è·³è½¬https",normalizedTitle:"è®¾ç½®httpè¯·æ±èªå¨è·³è½¬https",charIndex:1711},{level:2,title:"å¯ç¨HSTS",slug:"å¯ç¨hsts",normalizedTitle:"å¯ç¨hsts",charIndex:2102},{level:3,title:"HSTSç®ä»",slug:"hstsç®ä»",normalizedTitle:"hstsç®ä»",charIndex:2289},{level:3,title:"HSTSé¨ç½²",slug:"hstsé¨ç½²",normalizedTitle:"hstsé¨ç½²",charIndex:2722},{level:2,title:"å®æ´ç¤ºä¾éç½®æä»¶",slug:"å®æ´ç¤ºä¾éç½®æä»¶",normalizedTitle:"å®æ´ç¤ºä¾éç½®æä»¶",charIndex:3709},{level:2,title:"å®æ´ç¤ºä¾éç½®æä»¶",slug:"å®æ´ç¤ºä¾éç½®æä»¶-2",normalizedTitle:"å®æ´ç¤ºä¾éç½®æä»¶",charIndex:3709},{level:2,title:"ååä»£çéç½®",slug:"ååä»£çéç½®",normalizedTitle:"ååä»£çéç½®",charIndex:7357}],headersStr:"èæ¯ä¿¡æ¯ æä½æ­¥éª¤ è®¾ç½®HTTPè¯·æ±èªå¨è·³è½¬HTTPS å¯ç¨HSTS HSTSç®ä» HSTSé¨ç½² å®æ´ç¤ºä¾éç½®æä»¶ å®æ´ç¤ºä¾éç½®æä»¶ ååä»£çéç½®",content:'# Nginx å®è£SSLè¯ä¹¦\n\né¿éäºSSLè¯ä¹¦æå¡æ¯æä¸è½½è¯ä¹¦å®è£å°Nginx/Tengineæå¡å¨ä¸ï¼æ¬æä»ç»äºè¯ä¹¦å®è£çå·ä½æä½ã\n\n\n# èæ¯ä¿¡æ¯\n\n * æ¬ææ¡£ä»¥CentOS 7ãNginx 1.16.1ä¸ºä¾ã\n * æ¬ææ¡£è¯ä¹¦åç§°ä»¥www.ivoov.comä¸ºç¤ºä¾ï¼å¦è¯ä¹¦æä»¶åç§°ä¸ºwww.ivoov.com.pemï¼è¯ä¹¦å¯é¥æä»¶åç§°ä¸ºwww.ivoov.com.keyã\n * ä¸è½½çNginxè¯ä¹¦åç¼©æä»¶è§£åååå«ï¼\n   * .pemï¼è¯ä¹¦æä»¶ãPEMæä»¶çæ©å±åä¸ºCRTæ ¼å¼ã\n   * .keyï¼è¯ä¹¦çå¯é¥æä»¶ãç³è¯·è¯ä¹¦æ¶å¦ææªéæ©èªå¨åå»ºCRSï¼åä¸è½½çè¯ä¹¦æä»¶åç¼©åä¸­ä¸ä¼åå«.keyæä»¶ï¼éè¦æ¨å°èªå·±æå¨åå»ºçå¯é¥æä»¶æ·è´å°certç®å½ä¸ã\n\næç¤º\n\n.pemæ©å±åçè¯ä¹¦æä»¶éç¨Base64-encodedçPEMæ ¼å¼ææ¬æä»¶ï¼æ¨å¯æ ¹æ®éè¦ä¿®æ¹æå¶ä»æ©å±åã è¯ä¹¦æ ¼å¼è¯¦ç»åå®¹ï¼è¯·åè§ä¸»æµæ°å­è¯ä¹¦é½æåªäºæ ¼å¼ï¼\n\n\n# æä½æ­¥éª¤\n\n 1. ç»å½é¿éäºSSLè¯ä¹¦æ§å¶å°ã\n\n 2. å¨SSLè¯ä¹¦é¡µé¢ï¼åå»å·²ç­¾åæ ç­¾ï¼å®ä½å°éè¦ä¸è½½çè¯ä¹¦å¹¶åå»è¯ä¹¦å¡çå³ä¸è§çä¸è½½ã\n\n 3. å¨è¯ä¹¦ä¸è½½ä¾§é¡µé¢ä¸­å®ä½å°Nginxæå¡å¨ï¼å¹¶åå»å³ä¾§æä½æ çä¸è½½ï¼å°Nginxæå¡å¨è¯ä¹¦åç¼©åä¸è½½å°æ¬å°ã\n\n 4. è§£åå·²ä¸è½½ä¿å­å°æ¬å°çNginxè¯ä¹¦åç¼©åæä»¶ã\n    \n    è§£ååçæä»¶å¤¹ä¸­æ2ä¸ªæä»¶ï¼\n    \n    * è¯ä¹¦æä»¶ï¼ä»¥.pemä¸ºåç¼ææä»¶ç±»åã\n    * å¯é¥æä»¶ï¼ä»¥.keyä¸ºåç¼ææä»¶ç±»åã\n\n 5. ç»å½æ¨çNginxæå¡å¨ï¼å¨Nginxå®è£ç®å½ï¼é»è®¤Nginxå®è£ç®å½ä¸º/usr/local/nginx/confï¼ä¸åå»ºcertç®å½ï¼å¹¶å°ä¸è½½çè¯ä¹¦æä»¶åå¯é¥æä»¶æ·è´å°certç®å½ä¸­ã\n\næç¤º\n\nå¦ææ¨å¨ç³è¯·è¯ä¹¦æ¶éæ©æå¨åå»ºCSRæä»¶ï¼è¯·å°å¯¹åºçå¯é¥æä»¶æ¾å°certç®å½ä¸­ï¼å¹¶å½åä¸ºwww.ivoov.com.keyã\n\n 6. ä¿®æ¹Nginxå®è£ç®å½/conf/nginx.confæä»¶ã\n    \n    æç§ä¸æä¸­æ³¨éåå®¹ä¿®æ¹nginx.confæä»¶ï¼\n\n# HTTPS server\nserver {\n    listen 443 ssl;   #SSLåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é æNginxæ æ³å¯å¨ã\n    server_name ivoov.com www.ivoov.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.ivoov.comã\n\n    root html;\n    index index.html index.htm;\n    \n    ssl_certificate cert/www.ivoov.com.pem;   #å°www.ivoov.com.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ivoov.com.key;   #å°www.ivoov.com.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n    ssl_session_timeout 5m;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;   \n    location / {\n        root /usr/share/nginx/html;   #ç«ç¹ç®å½ã\n        index index.html index.htm;   \n    }\n}\n\n\n 7. ä¿å­nginx.confæä»¶åéåºã\n\n 8. æ§è¡ä»¥ä¸å½ä»¤éå¯Nginxæå¡å¨ã\n\nsystemctl restart nginx.service\n\n\n\n# è®¾ç½®HTTPè¯·æ±èªå¨è·³è½¬HTTPS\n\nå¨éè¦è·³è½¬çHTTPç«ç¹ä¸æ·»å ä»¥ä¸rewriteè¯­å¥ï¼å®ç°HTTPè®¿é®èªå¨è·³è½¬å°HTTPSé¡µé¢ã\n\n# HTTP server\nserver {\n    listen       80;\n    server_name  ivoov.com www.ivoov.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.ivoov.comã\n\n    rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n}\n\n\n\n# å¯ç¨HSTS\n\nå¨ç½ç«å¨ç«HTTPSåï¼å¦æç¨æ·æå¨æ²å¥ç½ç«çHTTPå°åï¼æèä»å¶å®å°æ¹ç¹å»äºç½ç«çHTTPé¾æ¥ï¼éå¸¸ä¾èµäºæå¡ç«¯301/302è·³è½¬æè½ä½¿ç¨HTTPSæå¡ãèç¬¬ä¸æ¬¡çHTTPè¯·æ±å°±æå¯è½è¢«å«æï¼å¯¼è´è¯·æ±æ æ³å°è¾¾æå¡å¨ï¼ä»èææHTTPSéçº§å«æãè¿ä¸ªé®é¢ç®åå¯ä»¥éè¿HSTS(HTTP Strict Transport Security)æ¥è§£å³ã\n\n\n# HSTSç®ä»\n\nHSTS(HTTP Strict Transport Security)æ¯å½éäºèç½å·¥ç¨ç»ç»IETFåå¸çä¸ç§äºèç½å®å¨ç­ç¥æºå¶ãéç¨HSTSç­ç¥çç½ç«å°ä¿è¯æµè§å¨å§ç»è¿æ¥å°è¯¥ç½ç«çHTTPSå å¯çæ¬ï¼ä¸éè¦ç¨æ·æå¨å¨URLå°åæ ä¸­è¾å¥å å¯å°åï¼ä»¥åå°ä¼è¯å«æé£é©ã\n\nHSTSååºå¤´æ ¼å¼\n\nStrict-Transport-Security: max-age=expireTime [; includeSubDomains] [; preload]\n\n\n * max-ageï¼åä½æ¯ç§ï¼ç¨æ¥åè¯æµè§å¨å¨æå®æ¶é´åï¼è¿ä¸ªç½ç«å¿é¡»éè¿HTTPSåè®®æ¥è®¿é®ãä¹å°±æ¯å¯¹äºè¿ä¸ªç½ç«çHTTPå°åï¼æµè§å¨éè¦åå¨æ¬å°æ¿æ¢ä¸ºHTTPSä¹åååéè¯·æ±ã\n * includeSubDomainsï¼å¯éåæ°ï¼å¦ææå®è¿ä¸ªåæ°ï¼è¡¨æè¿ä¸ªç½ç«ææå­ååä¹å¿é¡»éè¿HTTPSåè®®æ¥è®¿é®ã\n * preloadï¼å¯éåæ°ï¼ä¸ä¸ªæµè§å¨åç½®çä½¿ç¨HTTPSçåååè¡¨ã\n\n\n# HSTSé¨ç½²\n\næå¡å¨å¼å¯HSTSçæ¹æ³æ¯ï¼å½å®¢æ·ç«¯éè¿HTTPSååºè¯·æ±æ¶ï¼å¨æå¡å¨è¿åçè¶ææ¬ä¼ è¾åè®®ååºå¤´ä¸­åå«Strict-Transport-Securityå­æ®µãéå å¯ä¼ è¾æ¶è®¾ç½®çHSTSå­æ®µæ æã\n\næä½³çé¨ç½²æ¹æ¡æ¯é¨ç½²å¨ç¦»ç¨æ·æè¿çä½ç½®ï¼ä¾å¦ï¼æ¶ææåç«¯ååä»£çååç«¯Webæå¡å¨ï¼å¨åç«¯ä»£çå¤éç½®HSTSæ¯æå¥½çï¼å¦åå°±éè¦å¨Webæå¡å¨å±éç½®HSTSãå¦æWebæå¡å¨ä¸æç¡®æ¯æHSTSï¼å¯ä»¥éè¿å¢å ååºå¤´çæºå¶ãå¦æå¶ä»æ¹æ³é½å¤±è´¥äºï¼å¯ä»¥å¨åºç¨ç¨åºå±å¢å HSTSã\n\nHSTSå¯ç¨æ¯è¾ç®åï¼åªéå¨ç¸åºå¤´ä¸­å ä¸å¦ä¸ä¿¡æ¯ï¼\n\nStrict-Transport-Security: max-age=63072000; includeSubdomains;preload;\n\n\nStrict-Transport-Securityæ¯Headerå­æ®µåï¼max-ageä»£è¡¨HSTSå¨å®¢æ·ç«¯ççææ¶é´ã includeSubdomainsè¡¨ç¤ºå¯¹ææå­ååçæãpreloadæ¯ä½¿ç¨æµè§å¨åç½®çåååè¡¨ã\n\nHSTSç­ç¥åªè½å¨HTTPSååºä¸­è¿è¡è®¾ç½®ï¼ç½ç«å¿é¡»ä½¿ç¨é»è®¤ç443ç«¯å£ï¼å¿é¡»ä½¿ç¨ååï¼ä¸è½æ¯IPãå æ­¤éè¦æHTTPéå®åå°HTTPSï¼å¦æææååºä¸­åè®¸è®¾ç½®HSTSå¤´ï¼ä¸­é´äººæ»å»èå°±å¯ä»¥éè¿å¨æ®éç«ç¹ä¸­æ³¨å¥HSTSä¿¡æ¯æ¥æ§è¡DoSæ»å»ã\n\nç¼è¾nginxéç½®æä»¶\n\n$ vim /etc/nginx/conf.d/ivoov.conf\n\n\næ·»å Strict-Transport-Securityéç½®\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\nserver {\n   listen 443 ssl;\n   server_name www.ivoov.com;\n   add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";\n...\n}\n \nserver {\n   listen 80;\n   server_name www.ivoov.com;\n   rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;\n...\n}\n\n\néå¯Nginxæå¡\n\nsystemctl nginx restart\n\n\n\n# å®æ´ç¤ºä¾éç½®æä»¶\n\næç»ææï¼æµè§å¨ç´æ¥è®¿é®http://ivoov.com,http://www.ivoov.com,https://ivoov.comç»ä¸301è³https://www.ivoov.comï¼ä»èå®ç°ç½ç«ç»ä¸å¥å£ï¼æå©äºseoä¼åã\n\n# HTTPS server\nserver {\n    listen 443 ssl;   #SSLåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é æNginxæ æ³å¯å¨ã\n    server_name ivoov.com www.ivoov.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n\n    if ($host != \'www.ivoov.com\') {\n        rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n    }\n    \n    root html;\n    index index.html index.htm;\n    \n    ssl_certificate cert/www.ivoov.com.pem;   #å°www.ivoov.com.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ivoov.com.key;   #å°www.ivoov.com.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n    ssl_session_timeout 5m;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;   \n\n    add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";   #å¯ç¨HSTS\n\n    location / {\n        root /usr/share/nginx/html;   #ç«ç¹ç®å½ã\n        index index.html index.htm;   \n    }\n}\n\n# HTTP server\nserver {\n    listen       80;\n    server_name  ivoov.com www.ivoov.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.ivoov.comã\n    rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n}\n\n\n\n# å®æ´ç¤ºä¾éç½®æä»¶\n\n# HTTPS server\nserver {\n    listen 443 ssl;   #SSLåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é æNginxæ æ³å¯å¨ã\n    server_name ivoov.com www.ivoov.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n\n    if ($host != \'www.ivoov.com\') {\n        rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n    }\n    add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";   #å¯ç¨HSTS\n\n    root html;\n    index index.html index.htm;\n\n    ssl_certificate cert/www.ivoov.com.pem;   #å°domain name.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ivoov.com.key;   #å°domain name.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n\n    ssl_session_timeout 5m;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;\n\n    location / {\n        root /usr/share/nginx/html/ivoov;   #ç«ç¹ç®å½ã\n        index index.html index.htm;\n    }\n}\n\n# HTTPS server\nserver {\n    listen 443 ssl;   #SSLåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é æNginxæ æ³å¯å¨ã\n    server_name ieooc.com www.ieooc.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n\n    if ($host != \'www.ieooc.com\') {\n        rewrite ^/(.*)$ https://www.ieooc.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n    }\n    add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";   #å¯ç¨HSTS\n\n    root html;\n    index index.html index.htm;\n\n    ssl_certificate cert/www.ieooc.com.pem;   #å°domain name.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ieooc.com.key;   #å°domain name.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n\n    ssl_session_timeout 5m;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;\n\n    location / {\n        root /usr/share/nginx/html/ieooc;   #ç«ç¹ç®å½ã\n        index index.html index.htm;\n    }\n}\n\n# HTTP server\nserver {\n    listen       80;\n    server_name ivoov.com www.ivoov.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n    rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n}\n\nserver {\n    listen       80;\n    server_name ieooc.com www.ieooc.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n    rewrite ^/(.*)$ https://www.ieooc.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n\n\n\n\n# ååä»£çéç½®\n\nlocation / {\n      proxy_pass http://127.0.0.1:8091;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header Host $http_host;\n      proxy_set_header X-NginX-Proxy true;\n      proxy_redirect default;\n}\n',normalizedContent:'# nginx å®è£sslè¯ä¹¦\n\né¿éäºsslè¯ä¹¦æå¡æ¯æä¸è½½è¯ä¹¦å®è£å°nginx/tengineæå¡å¨ä¸ï¼æ¬æä»ç»äºè¯ä¹¦å®è£çå·ä½æä½ã\n\n\n# èæ¯ä¿¡æ¯\n\n * æ¬ææ¡£ä»¥centos 7ãnginx 1.16.1ä¸ºä¾ã\n * æ¬ææ¡£è¯ä¹¦åç§°ä»¥www.ivoov.comä¸ºç¤ºä¾ï¼å¦è¯ä¹¦æä»¶åç§°ä¸ºwww.ivoov.com.pemï¼è¯ä¹¦å¯é¥æä»¶åç§°ä¸ºwww.ivoov.com.keyã\n * ä¸è½½çnginxè¯ä¹¦åç¼©æä»¶è§£åååå«ï¼\n   * .pemï¼è¯ä¹¦æä»¶ãpemæä»¶çæ©å±åä¸ºcrtæ ¼å¼ã\n   * .keyï¼è¯ä¹¦çå¯é¥æä»¶ãç³è¯·è¯ä¹¦æ¶å¦ææªéæ©èªå¨åå»ºcrsï¼åä¸è½½çè¯ä¹¦æä»¶åç¼©åä¸­ä¸ä¼åå«.keyæä»¶ï¼éè¦æ¨å°èªå·±æå¨åå»ºçå¯é¥æä»¶æ·è´å°certç®å½ä¸ã\n\næç¤º\n\n.pemæ©å±åçè¯ä¹¦æä»¶éç¨base64-encodedçpemæ ¼å¼ææ¬æä»¶ï¼æ¨å¯æ ¹æ®éè¦ä¿®æ¹æå¶ä»æ©å±åã è¯ä¹¦æ ¼å¼è¯¦ç»åå®¹ï¼è¯·åè§ä¸»æµæ°å­è¯ä¹¦é½æåªäºæ ¼å¼ï¼\n\n\n# æä½æ­¥éª¤\n\n 1. ç»å½é¿éäºsslè¯ä¹¦æ§å¶å°ã\n\n 2. å¨sslè¯ä¹¦é¡µé¢ï¼åå»å·²ç­¾åæ ç­¾ï¼å®ä½å°éè¦ä¸è½½çè¯ä¹¦å¹¶åå»è¯ä¹¦å¡çå³ä¸è§çä¸è½½ã\n\n 3. å¨è¯ä¹¦ä¸è½½ä¾§é¡µé¢ä¸­å®ä½å°nginxæå¡å¨ï¼å¹¶åå»å³ä¾§æä½æ çä¸è½½ï¼å°nginxæå¡å¨è¯ä¹¦åç¼©åä¸è½½å°æ¬å°ã\n\n 4. è§£åå·²ä¸è½½ä¿å­å°æ¬å°çnginxè¯ä¹¦åç¼©åæä»¶ã\n    \n    è§£ååçæä»¶å¤¹ä¸­æ2ä¸ªæä»¶ï¼\n    \n    * è¯ä¹¦æä»¶ï¼ä»¥.pemä¸ºåç¼ææä»¶ç±»åã\n    * å¯é¥æä»¶ï¼ä»¥.keyä¸ºåç¼ææä»¶ç±»åã\n\n 5. ç»å½æ¨çnginxæå¡å¨ï¼å¨nginxå®è£ç®å½ï¼é»è®¤nginxå®è£ç®å½ä¸º/usr/local/nginx/confï¼ä¸åå»ºcertç®å½ï¼å¹¶å°ä¸è½½çè¯ä¹¦æä»¶åå¯é¥æä»¶æ·è´å°certç®å½ä¸­ã\n\næç¤º\n\nå¦ææ¨å¨ç³è¯·è¯ä¹¦æ¶éæ©æå¨åå»ºcsræä»¶ï¼è¯·å°å¯¹åºçå¯é¥æä»¶æ¾å°certç®å½ä¸­ï¼å¹¶å½åä¸ºwww.ivoov.com.keyã\n\n 6. ä¿®æ¹nginxå®è£ç®å½/conf/nginx.confæä»¶ã\n    \n    æç§ä¸æä¸­æ³¨éåå®¹ä¿®æ¹nginx.confæä»¶ï¼\n\n# https server\nserver {\n    listen 443 ssl;   #sslåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é ænginxæ æ³å¯å¨ã\n    server_name ivoov.com www.ivoov.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.ivoov.comã\n\n    root html;\n    index index.html index.htm;\n    \n    ssl_certificate cert/www.ivoov.com.pem;   #å°www.ivoov.com.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ivoov.com.key;   #å°www.ivoov.com.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n    ssl_session_timeout 5m;\n    ssl_ciphers ecdhe-rsa-aes128-gcm-sha256:ecdhe:ecdh:aes:high:!null:!anull:!md5:!adh:!rc4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols tlsv1.1 tlsv1.2 tlsv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;   \n    location / {\n        root /usr/share/nginx/html;   #ç«ç¹ç®å½ã\n        index index.html index.htm;   \n    }\n}\n\n\n 7. ä¿å­nginx.confæä»¶åéåºã\n\n 8. æ§è¡ä»¥ä¸å½ä»¤éå¯nginxæå¡å¨ã\n\nsystemctl restart nginx.service\n\n\n\n# è®¾ç½®httpè¯·æ±èªå¨è·³è½¬https\n\nå¨éè¦è·³è½¬çhttpç«ç¹ä¸æ·»å ä»¥ä¸rewriteè¯­å¥ï¼å®ç°httpè®¿é®èªå¨è·³è½¬å°httpsé¡µé¢ã\n\n# http server\nserver {\n    listen       80;\n    server_name  ivoov.com www.ivoov.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.ivoov.comã\n\n    rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n}\n\n\n\n# å¯ç¨hsts\n\nå¨ç½ç«å¨ç«httpsåï¼å¦æç¨æ·æå¨æ²å¥ç½ç«çhttpå°åï¼æèä»å¶å®å°æ¹ç¹å»äºç½ç«çhttpé¾æ¥ï¼éå¸¸ä¾èµäºæå¡ç«¯301/302è·³è½¬æè½ä½¿ç¨httpsæå¡ãèç¬¬ä¸æ¬¡çhttpè¯·æ±å°±æå¯è½è¢«å«æï¼å¯¼è´è¯·æ±æ æ³å°è¾¾æå¡å¨ï¼ä»èææhttpséçº§å«æãè¿ä¸ªé®é¢ç®åå¯ä»¥éè¿hsts(http strict transport security)æ¥è§£å³ã\n\n\n# hstsç®ä»\n\nhsts(http strict transport security)æ¯å½éäºèç½å·¥ç¨ç»ç»ietfåå¸çä¸ç§äºèç½å®å¨ç­ç¥æºå¶ãéç¨hstsç­ç¥çç½ç«å°ä¿è¯æµè§å¨å§ç»è¿æ¥å°è¯¥ç½ç«çhttpså å¯çæ¬ï¼ä¸éè¦ç¨æ·æå¨å¨urlå°åæ ä¸­è¾å¥å å¯å°åï¼ä»¥åå°ä¼è¯å«æé£é©ã\n\nhstsååºå¤´æ ¼å¼\n\nstrict-transport-security: max-age=expiretime [; includesubdomains] [; preload]\n\n\n * max-ageï¼åä½æ¯ç§ï¼ç¨æ¥åè¯æµè§å¨å¨æå®æ¶é´åï¼è¿ä¸ªç½ç«å¿é¡»éè¿httpsåè®®æ¥è®¿é®ãä¹å°±æ¯å¯¹äºè¿ä¸ªç½ç«çhttpå°åï¼æµè§å¨éè¦åå¨æ¬å°æ¿æ¢ä¸ºhttpsä¹åååéè¯·æ±ã\n * includesubdomainsï¼å¯éåæ°ï¼å¦ææå®è¿ä¸ªåæ°ï¼è¡¨æè¿ä¸ªç½ç«ææå­ååä¹å¿é¡»éè¿httpsåè®®æ¥è®¿é®ã\n * preloadï¼å¯éåæ°ï¼ä¸ä¸ªæµè§å¨åç½®çä½¿ç¨httpsçåååè¡¨ã\n\n\n# hstsé¨ç½²\n\næå¡å¨å¼å¯hstsçæ¹æ³æ¯ï¼å½å®¢æ·ç«¯éè¿httpsååºè¯·æ±æ¶ï¼å¨æå¡å¨è¿åçè¶ææ¬ä¼ è¾åè®®ååºå¤´ä¸­åå«strict-transport-securityå­æ®µãéå å¯ä¼ è¾æ¶è®¾ç½®çhstså­æ®µæ æã\n\næä½³çé¨ç½²æ¹æ¡æ¯é¨ç½²å¨ç¦»ç¨æ·æè¿çä½ç½®ï¼ä¾å¦ï¼æ¶ææåç«¯ååä»£çååç«¯webæå¡å¨ï¼å¨åç«¯ä»£çå¤éç½®hstsæ¯æå¥½çï¼å¦åå°±éè¦å¨webæå¡å¨å±éç½®hstsãå¦æwebæå¡å¨ä¸æç¡®æ¯æhstsï¼å¯ä»¥éè¿å¢å ååºå¤´çæºå¶ãå¦æå¶ä»æ¹æ³é½å¤±è´¥äºï¼å¯ä»¥å¨åºç¨ç¨åºå±å¢å hstsã\n\nhstså¯ç¨æ¯è¾ç®åï¼åªéå¨ç¸åºå¤´ä¸­å ä¸å¦ä¸ä¿¡æ¯ï¼\n\nstrict-transport-security: max-age=63072000; includesubdomains;preload;\n\n\nstrict-transport-securityæ¯headerå­æ®µåï¼max-ageä»£è¡¨hstså¨å®¢æ·ç«¯ççææ¶é´ã includesubdomainsè¡¨ç¤ºå¯¹ææå­ååçæãpreloadæ¯ä½¿ç¨æµè§å¨åç½®çåååè¡¨ã\n\nhstsç­ç¥åªè½å¨httpsååºä¸­è¿è¡è®¾ç½®ï¼ç½ç«å¿é¡»ä½¿ç¨é»è®¤ç443ç«¯å£ï¼å¿é¡»ä½¿ç¨ååï¼ä¸è½æ¯ipãå æ­¤éè¦æhttpéå®åå°httpsï¼å¦æææååºä¸­åè®¸è®¾ç½®hstså¤´ï¼ä¸­é´äººæ»å»èå°±å¯ä»¥éè¿å¨æ®éç«ç¹ä¸­æ³¨å¥hstsä¿¡æ¯æ¥æ§è¡dosæ»å»ã\n\nç¼è¾nginxéç½®æä»¶\n\n$ vim /etc/nginx/conf.d/ivoov.conf\n\n\næ·»å strict-transport-securityéç½®\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\nserver {\n   listen 443 ssl;\n   server_name www.ivoov.com;\n   add_header strict-transport-security "max-age=63072000; includesubdomains; preload";\n...\n}\n \nserver {\n   listen 80;\n   server_name www.ivoov.com;\n   rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;\n...\n}\n\n\néå¯nginxæå¡\n\nsystemctl nginx restart\n\n\n\n# å®æ´ç¤ºä¾éç½®æä»¶\n\næç»ææï¼æµè§å¨ç´æ¥è®¿é®http://ivoov.com,http://www.ivoov.com,https://ivoov.comç»ä¸301è³https://www.ivoov.comï¼ä»èå®ç°ç½ç«ç»ä¸å¥å£ï¼æå©äºseoä¼åã\n\n# https server\nserver {\n    listen 443 ssl;   #sslåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é ænginxæ æ³å¯å¨ã\n    server_name ivoov.com www.ivoov.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n\n    if ($host != \'www.ivoov.com\') {\n        rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n    }\n    \n    root html;\n    index index.html index.htm;\n    \n    ssl_certificate cert/www.ivoov.com.pem;   #å°www.ivoov.com.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ivoov.com.key;   #å°www.ivoov.com.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n    ssl_session_timeout 5m;\n    ssl_ciphers ecdhe-rsa-aes128-gcm-sha256:ecdhe:ecdh:aes:high:!null:!anull:!md5:!adh:!rc4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols tlsv1.1 tlsv1.2 tlsv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;   \n\n    add_header strict-transport-security "max-age=63072000; includesubdomains; preload";   #å¯ç¨hsts\n\n    location / {\n        root /usr/share/nginx/html;   #ç«ç¹ç®å½ã\n        index index.html index.htm;   \n    }\n}\n\n# http server\nserver {\n    listen       80;\n    server_name  ivoov.com www.ivoov.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.ivoov.comã\n    rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n}\n\n\n\n# å®æ´ç¤ºä¾éç½®æä»¶\n\n# https server\nserver {\n    listen 443 ssl;   #sslåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é ænginxæ æ³å¯å¨ã\n    server_name ivoov.com www.ivoov.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n\n    if ($host != \'www.ivoov.com\') {\n        rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n    }\n    add_header strict-transport-security "max-age=63072000; includesubdomains; preload";   #å¯ç¨hsts\n\n    root html;\n    index index.html index.htm;\n\n    ssl_certificate cert/www.ivoov.com.pem;   #å°domain name.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ivoov.com.key;   #å°domain name.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n\n    ssl_session_timeout 5m;\n    ssl_ciphers ecdhe-rsa-aes128-gcm-sha256:ecdhe:ecdh:aes:high:!null:!anull:!md5:!adh:!rc4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols tlsv1.1 tlsv1.2 tlsv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;\n\n    location / {\n        root /usr/share/nginx/html/ivoov;   #ç«ç¹ç®å½ã\n        index index.html index.htm;\n    }\n}\n\n# https server\nserver {\n    listen 443 ssl;   #sslåè®®è®¿é®ç«¯å£å·ä¸º443ãæ­¤å¤å¦æªæ·»å sslï¼å¯è½ä¼é ænginxæ æ³å¯å¨ã\n    server_name ieooc.com www.ieooc.com;  #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n\n    if ($host != \'www.ieooc.com\') {\n        rewrite ^/(.*)$ https://www.ieooc.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n    }\n    add_header strict-transport-security "max-age=63072000; includesubdomains; preload";   #å¯ç¨hsts\n\n    root html;\n    index index.html index.htm;\n\n    ssl_certificate cert/www.ieooc.com.pem;   #å°domain name.pemæ¿æ¢ææ¨è¯ä¹¦çæä»¶åã\n    ssl_certificate_key cert/www.ieooc.com.key;   #å°domain name.keyæ¿æ¢ææ¨è¯ä¹¦çå¯é¥æä»¶åã\n\n    ssl_session_timeout 5m;\n    ssl_ciphers ecdhe-rsa-aes128-gcm-sha256:ecdhe:ecdh:aes:high:!null:!anull:!md5:!adh:!rc4;  #ä½¿ç¨æ­¤å å¯å¥ä»¶ã\n    ssl_protocols tlsv1.1 tlsv1.2 tlsv1.3;   #ä½¿ç¨è¯¥åè®®è¿è¡éç½®ã\n    ssl_prefer_server_ciphers on;\n\n    location / {\n        root /usr/share/nginx/html/ieooc;   #ç«ç¹ç®å½ã\n        index index.html index.htm;\n    }\n}\n\n# http server\nserver {\n    listen       80;\n    server_name ivoov.com www.ivoov.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n    rewrite ^/(.*)$ https://www.ivoov.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n}\n\nserver {\n    listen       80;\n    server_name ieooc.com www.ieooc.com; #å°localhostä¿®æ¹ä¸ºæ¨è¯ä¹¦ç»å®çååï¼ä¾å¦ï¼www.example.comã\n    rewrite ^/(.*)$ https://www.ieooc.com/$1 permanent;   #å°ææhttpè¯·æ±éè¿rewriteéå®åå°httpsã\n\n\n\n\n# ååä»£çéç½®\n\nlocation / {\n      proxy_pass http://127.0.0.1:8091;\n      proxy_set_header x-real-ip $remote_addr;\n      proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;\n      proxy_set_header host $http_host;\n      proxy_set_header x-nginx-proxy true;\n      proxy_redirect default;\n}\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Nginx å¼å¯gzipåç¼©",frontmatter:{title:"Nginx å¼å¯gzipåç¼©",date:"2022-02-09T11:24:38.000Z",permalink:"/pages/73e9ae/"},regularPath:"/10.Nginx/01.Nginx/03.Nginx%20%E5%BC%80%E5%90%AFgzip%E5%8E%8B%E7%BC%A9.html",relativePath:"10.Nginx/01.Nginx/03.Nginx å¼å¯gzipåç¼©.md",key:"v-c80a5a9c",path:"/pages/73e9ae/",headers:[{level:2,title:"ä½¿ç¨èä¾",slug:"ä½¿ç¨èä¾",normalizedTitle:"ä½¿ç¨èä¾",charIndex:21},{level:2,title:"æä»¤",slug:"æä»¤",normalizedTitle:"æä»¤",charIndex:785},{level:2,title:"gzip",slug:"gzip",normalizedTitle:"gzip",charIndex:10},{level:2,title:"gzip_buffers",slug:"gzip-buffers",normalizedTitle:"gzip_buffers",charIndex:659},{level:2,title:"gzipcomplevel",slug:"gzip-comp-level",normalizedTitle:"gzipcomplevel",charIndex:null},{level:2,title:"gzipminlength",slug:"gzip-min-length",normalizedTitle:"gzipminlength",charIndex:null},{level:2,title:"gziphttpversion",slug:"gzip-http-version",normalizedTitle:"gziphttpversion",charIndex:null},{level:2,title:"gzip_proxied",slug:"gzip-proxied",normalizedTitle:"gzip_proxied",charIndex:960},{level:2,title:"gzip_types",slug:"gzip-types",normalizedTitle:"gzip_types",charIndex:268},{level:2,title:"References",slug:"references",normalizedTitle:"references",charIndex:3173}],headersStr:"ä½¿ç¨èä¾ æä»¤ gzip gzip_buffers gzipcomplevel gzipminlength gziphttpversion gzip_proxied gzip_types References",content:'# Nginx å¼å¯gzipåç¼©\n\n\n# ä½¿ç¨èä¾\n\nè¿ä¸ªæ¨¡åæ¯æå¨çº¿å®æ¶åç¼©è¾åºæ°æ®æµï¼nginx.confä¸­å³äºgzipåç¼©çä¸»è¦éç½®å¦ä¸ï¼\n\nhttp {\n\t......\n    #å¼å¯åå³é­gzipæ¨¡å¼\n    gzip on;\n    \n    #gizpåç¼©èµ·ç¹ï¼æä»¶å¤§äº1kæè¿è¡åç¼©\n    gzip_min_length 1k;\n    \n    # gzip åç¼©çº§å«ï¼1-9ï¼æ°å­è¶å¤§åç¼©çè¶å¥½ï¼ä¹è¶å ç¨CPUæ¶é´\n    gzip_comp_level 6;\n    \n    # è¿è¡åç¼©çæä»¶ç±»åã\n    gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/xml text/javascript application/json image/png image/gif image/jpeg;\n    \n    #nginxå¯¹äºéææä»¶çå¤çæ¨¡åï¼å¼å¯åä¼å¯»æ¾ä»¥.gzç»å°¾çæä»¶ï¼ç´æ¥è¿åï¼ä¸ä¼å ç¨cpuè¿è¡åç¼©ï¼å¦ææ¾ä¸å°åä¸è¿è¡åç¼©\n    # gzip_static on|off\n    \n    # æ¯å¦å¨http headerä¸­æ·»å Vary: Accept-Encodingï¼å»ºè®®å¼å¯\n    gzip_vary on;\n\n    # è®¾ç½®åç¼©æéè¦çç¼å²åºå¤§å°ï¼ä»¥4kä¸ºåä½ï¼å¦ææä»¶ä¸º7kåç³è¯·2*4kçç¼å²åº \n    gzip_buffers 4 16k;\n\n    # è®¾ç½®gzipåç¼©éå¯¹çHTTPåè®®çæ¬\n    # gzip_http_version 1.1;\n\t......\n}\n\n\n> åç½®åé $gzip_ratio å¯ä»¥è·åå°gzipçåç¼©æ¯ç\n\n\n# æä»¤\n\n * [#gzip gzip]\n * [#gzip_buffers gzip_buffers]\n * [#gzip_comp_level gzip_comp_level]\n * [#gzip_min_length gzip_min_length]\n * [#gzip_http_version gzip_http_version]\n * [#gzip_proxied gzip_proxied]\n * [#gzip_types gzip_types]\n\n\n# gzip\n\nè¯­æ³: gzip on|off\n\né»è®¤å¼: gzip off\n\nä½ç¨å: http, server, location, if (x) location\n\nå¼å¯æèå³é­gzipæ¨¡å\n\n\n# gzip_buffers\n\nè¯­æ³: gzip_buffers number size\n\né»è®¤å¼: gzip_buffers 4 4k/8k\n\nä½ç¨å: http, server, location\n\nè®¾ç½®ç³»ç»è·åå ä¸ªåä½çç¼å­ç¨äºå­å¨gzipçåç¼©ç»ææ°æ®æµã ä¾å¦ 4 4k ä»£è¡¨ä»¥4kä¸ºåä½ï¼æç§åå§æ°æ®å¤§å°ä»¥4kä¸ºåä½ç4åç³è¯·åå­ã 4 8k ä»£è¡¨ä»¥8kä¸ºåä½ï¼æç§åå§æ°æ®å¤§å°ä»¥8kä¸ºåä½ç4åç³è¯·åå­ã\n\nå¦ææ²¡æè®¾ç½®ï¼é»è®¤å¼æ¯ç³è¯·è·åå§æ°æ®ç¸åå¤§å°çåå­ç©ºé´å»å­å¨gzipåç¼©ç»æã\n\n\n# gzip_comp_level\n\nè¯­æ³: gzip_comp_level 1..9\n\né»è®¤å¼: gzip_comp_level 1\n\nä½ç¨å: http, server, location\n\ngzipåç¼©æ¯ï¼1 åç¼©æ¯æå°å¤çéåº¦æå¿«ï¼9 åç¼©æ¯æå¤§ä½å¤çææ¢ï¼ä¼ è¾å¿«ä½æ¯è¾æ¶ècpuï¼ã\n\n\n# gzip_min_length\n\nè¯­æ³: gzip_min_length length\n\né»è®¤å¼: gzip_min_length 0\n\nä½ç¨å: http, server, location\n\nè®¾ç½®åè®¸åç¼©çé¡µé¢æå°å­èæ°ï¼é¡µé¢å­èæ°ä»headerå¤´ä¸­çContent-Lengthä¸­è¿è¡è·åã\n\né»è®¤å¼æ¯0ï¼ä¸ç®¡é¡µé¢å¤å¤§é½åç¼©ã\n\nå»ºè®®è®¾ç½®æå¤§äº1kçå­èæ°ï¼å°äº1kå¯è½ä¼è¶åè¶å¤§ã å³: gzip_min_length 1024\n\n\n# gzip_http_version\n\nè¯­æ³: gzip_http_version 1.0|1.1\n\né»è®¤å¼: gzip_http_version 1.1\n\nä½ç¨å: http, server, location\n\nè¯å«httpçåè®®çæ¬ãç±äºæ©æçä¸äºæµè§å¨æèhttpå®¢æ·ç«¯ï¼å¯è½ä¸æ¯ægzipèªè§£åï¼ç¨æ·å°±ä¼çå°ä¹±ç ï¼æä»¥åä¸äºå¤æ­è¿æ¯æå¿è¦çã æ³¨ï¼21ä¸çºªé½æ¥äºï¼ç°å¨é¤äºç±»ä¼¼äºç¾åº¦çèèä¹ç±»çä¸è¥¿ä¸æ¯æèªè§£åï¼99.99%çæµè§å¨åºæ¬ä¸é½æ¯ægzipè§£åäºï¼æä»¥å¯ä»¥ä¸ç¨è®¾è¿ä¸ªå¼,ä¿æç³»ç»é»è®¤å³å¯ã\n\n\n# gzip_proxied\n\nè¯­æ³: gzip_proxied [off|expired|no-cache|no-store|private|no_last_modified|no_etag|auth|any] ...\n\né»è®¤å¼: gzip_proxied off\n\nä½ç¨å: http, server, location\n\nNginxä½ä¸ºååä»£ççæ¶åå¯ç¨ï¼å¼å¯æèå³é­åç«¯æå¡å¨è¿åçç»æï¼å¹éçåææ¯åç«¯æå¡å¨å¿é¡»è¦è¿ååå«"Via"ç headerå¤´ã\n\n * off - å³é­ææçä»£çç»ææ°æ®çåç¼©\n * expired - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "Expires" å¤´ä¿¡æ¯\n * no-cache - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "Cache-Control:no-cache" å¤´ä¿¡æ¯\n * no-store - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "Cache-Control:no-store" å¤´ä¿¡æ¯\n * private - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "Cache-Control:private" å¤´ä¿¡æ¯\n * no_last_modified - å¯ç¨åç¼©,å¦æheaderå¤´ä¸­ä¸åå« "Last-Modified" å¤´ä¿¡æ¯\n * no_etag - å¯ç¨åç¼© ,å¦æheaderå¤´ä¸­ä¸åå« "ETag" å¤´ä¿¡æ¯\n * auth - å¯ç¨åç¼© , å¦æheaderå¤´ä¸­åå« "Authorization" å¤´ä¿¡æ¯\n * any - æ æ¡ä»¶å¯ç¨åç¼©\n\n\n# gzip_types\n\nè¯­æ³: gzip_types mime-type [mime-type ...]\n\né»è®¤å¼: gzip_types text/html\n\nä½ç¨å: http, server, location\n\nå¹éMIMEç±»åè¿è¡åç¼©ï¼ï¼æ è®ºæ¯å¦æå®ï¼"text/html"ç±»åæ»æ¯ä¼è¢«åç¼©çã\n\næ³¨æï¼å¦æä½ä¸ºhttp serveræ¥ä½¿ç¨ï¼ä¸»éç½®æä»¶ä¸­è¦åå«æä»¶ç±»åéç½®æä»¶\n\nhttp\n{\n\tinclude       conf/mime.types;\n\t......\n}\n\n\nå¦æä½ å¸æåç¼©å¸¸è§çæä»¶ç±»åï¼å¯ä»¥åæè¿ä¸ªæ ·å­\n\nhttp \n{\n: include       conf/mime.types;\n\n: gzip on;\n: gzip_min_length  1000;\n: gzip_buffers     4 8k;   \n: gzip_http_version 1.1; \n: gzip_types       text/plain application/x-javascript text/css text/html application/xml;\n\n: ......\t\n}\n\n\n\n# References\n\nåå§ææ¡£',normalizedContent:'# nginx å¼å¯gzipåç¼©\n\n\n# ä½¿ç¨èä¾\n\nè¿ä¸ªæ¨¡åæ¯æå¨çº¿å®æ¶åç¼©è¾åºæ°æ®æµï¼nginx.confä¸­å³äºgzipåç¼©çä¸»è¦éç½®å¦ä¸ï¼\n\nhttp {\n\t......\n    #å¼å¯åå³é­gzipæ¨¡å¼\n    gzip on;\n    \n    #gizpåç¼©èµ·ç¹ï¼æä»¶å¤§äº1kæè¿è¡åç¼©\n    gzip_min_length 1k;\n    \n    # gzip åç¼©çº§å«ï¼1-9ï¼æ°å­è¶å¤§åç¼©çè¶å¥½ï¼ä¹è¶å ç¨cpuæ¶é´\n    gzip_comp_level 6;\n    \n    # è¿è¡åç¼©çæä»¶ç±»åã\n    gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/xml text/javascript application/json image/png image/gif image/jpeg;\n    \n    #nginxå¯¹äºéææä»¶çå¤çæ¨¡åï¼å¼å¯åä¼å¯»æ¾ä»¥.gzç»å°¾çæä»¶ï¼ç´æ¥è¿åï¼ä¸ä¼å ç¨cpuè¿è¡åç¼©ï¼å¦ææ¾ä¸å°åä¸è¿è¡åç¼©\n    # gzip_static on|off\n    \n    # æ¯å¦å¨http headerä¸­æ·»å vary: accept-encodingï¼å»ºè®®å¼å¯\n    gzip_vary on;\n\n    # è®¾ç½®åç¼©æéè¦çç¼å²åºå¤§å°ï¼ä»¥4kä¸ºåä½ï¼å¦ææä»¶ä¸º7kåç³è¯·2*4kçç¼å²åº \n    gzip_buffers 4 16k;\n\n    # è®¾ç½®gzipåç¼©éå¯¹çhttpåè®®çæ¬\n    # gzip_http_version 1.1;\n\t......\n}\n\n\n> åç½®åé $gzip_ratio å¯ä»¥è·åå°gzipçåç¼©æ¯ç\n\n\n# æä»¤\n\n * [#gzip gzip]\n * [#gzip_buffers gzip_buffers]\n * [#gzip_comp_level gzip_comp_level]\n * [#gzip_min_length gzip_min_length]\n * [#gzip_http_version gzip_http_version]\n * [#gzip_proxied gzip_proxied]\n * [#gzip_types gzip_types]\n\n\n# gzip\n\nè¯­æ³: gzip on|off\n\né»è®¤å¼: gzip off\n\nä½ç¨å: http, server, location, if (x) location\n\nå¼å¯æèå³é­gzipæ¨¡å\n\n\n# gzip_buffers\n\nè¯­æ³: gzip_buffers number size\n\né»è®¤å¼: gzip_buffers 4 4k/8k\n\nä½ç¨å: http, server, location\n\nè®¾ç½®ç³»ç»è·åå ä¸ªåä½çç¼å­ç¨äºå­å¨gzipçåç¼©ç»ææ°æ®æµã ä¾å¦ 4 4k ä»£è¡¨ä»¥4kä¸ºåä½ï¼æç§åå§æ°æ®å¤§å°ä»¥4kä¸ºåä½ç4åç³è¯·åå­ã 4 8k ä»£è¡¨ä»¥8kä¸ºåä½ï¼æç§åå§æ°æ®å¤§å°ä»¥8kä¸ºåä½ç4åç³è¯·åå­ã\n\nå¦ææ²¡æè®¾ç½®ï¼é»è®¤å¼æ¯ç³è¯·è·åå§æ°æ®ç¸åå¤§å°çåå­ç©ºé´å»å­å¨gzipåç¼©ç»æã\n\n\n# gzip_comp_level\n\nè¯­æ³: gzip_comp_level 1..9\n\né»è®¤å¼: gzip_comp_level 1\n\nä½ç¨å: http, server, location\n\ngzipåç¼©æ¯ï¼1 åç¼©æ¯æå°å¤çéåº¦æå¿«ï¼9 åç¼©æ¯æå¤§ä½å¤çææ¢ï¼ä¼ è¾å¿«ä½æ¯è¾æ¶ècpuï¼ã\n\n\n# gzip_min_length\n\nè¯­æ³: gzip_min_length length\n\né»è®¤å¼: gzip_min_length 0\n\nä½ç¨å: http, server, location\n\nè®¾ç½®åè®¸åç¼©çé¡µé¢æå°å­èæ°ï¼é¡µé¢å­èæ°ä»headerå¤´ä¸­çcontent-lengthä¸­è¿è¡è·åã\n\né»è®¤å¼æ¯0ï¼ä¸ç®¡é¡µé¢å¤å¤§é½åç¼©ã\n\nå»ºè®®è®¾ç½®æå¤§äº1kçå­èæ°ï¼å°äº1kå¯è½ä¼è¶åè¶å¤§ã å³: gzip_min_length 1024\n\n\n# gzip_http_version\n\nè¯­æ³: gzip_http_version 1.0|1.1\n\né»è®¤å¼: gzip_http_version 1.1\n\nä½ç¨å: http, server, location\n\nè¯å«httpçåè®®çæ¬ãç±äºæ©æçä¸äºæµè§å¨æèhttpå®¢æ·ç«¯ï¼å¯è½ä¸æ¯ægzipèªè§£åï¼ç¨æ·å°±ä¼çå°ä¹±ç ï¼æä»¥åä¸äºå¤æ­è¿æ¯æå¿è¦çã æ³¨ï¼21ä¸çºªé½æ¥äºï¼ç°å¨é¤äºç±»ä¼¼äºç¾åº¦çèèä¹ç±»çä¸è¥¿ä¸æ¯æèªè§£åï¼99.99%çæµè§å¨åºæ¬ä¸é½æ¯ægzipè§£åäºï¼æä»¥å¯ä»¥ä¸ç¨è®¾è¿ä¸ªå¼,ä¿æç³»ç»é»è®¤å³å¯ã\n\n\n# gzip_proxied\n\nè¯­æ³: gzip_proxied [off|expired|no-cache|no-store|private|no_last_modified|no_etag|auth|any] ...\n\né»è®¤å¼: gzip_proxied off\n\nä½ç¨å: http, server, location\n\nnginxä½ä¸ºååä»£ççæ¶åå¯ç¨ï¼å¼å¯æèå³é­åç«¯æå¡å¨è¿åçç»æï¼å¹éçåææ¯åç«¯æå¡å¨å¿é¡»è¦è¿ååå«"via"ç headerå¤´ã\n\n * off - å³é­ææçä»£çç»ææ°æ®çåç¼©\n * expired - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "expires" å¤´ä¿¡æ¯\n * no-cache - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "cache-control:no-cache" å¤´ä¿¡æ¯\n * no-store - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "cache-control:no-store" å¤´ä¿¡æ¯\n * private - å¯ç¨åç¼©ï¼å¦æheaderå¤´ä¸­åå« "cache-control:private" å¤´ä¿¡æ¯\n * no_last_modified - å¯ç¨åç¼©,å¦æheaderå¤´ä¸­ä¸åå« "last-modified" å¤´ä¿¡æ¯\n * no_etag - å¯ç¨åç¼© ,å¦æheaderå¤´ä¸­ä¸åå« "etag" å¤´ä¿¡æ¯\n * auth - å¯ç¨åç¼© , å¦æheaderå¤´ä¸­åå« "authorization" å¤´ä¿¡æ¯\n * any - æ æ¡ä»¶å¯ç¨åç¼©\n\n\n# gzip_types\n\nè¯­æ³: gzip_types mime-type [mime-type ...]\n\né»è®¤å¼: gzip_types text/html\n\nä½ç¨å: http, server, location\n\nå¹émimeç±»åè¿è¡åç¼©ï¼ï¼æ è®ºæ¯å¦æå®ï¼"text/html"ç±»åæ»æ¯ä¼è¢«åç¼©çã\n\næ³¨æï¼å¦æä½ä¸ºhttp serveræ¥ä½¿ç¨ï¼ä¸»éç½®æä»¶ä¸­è¦åå«æä»¶ç±»åéç½®æä»¶\n\nhttp\n{\n\tinclude       conf/mime.types;\n\t......\n}\n\n\nå¦æä½ å¸æåç¼©å¸¸è§çæä»¶ç±»åï¼å¯ä»¥åæè¿ä¸ªæ ·å­\n\nhttp \n{\n: include       conf/mime.types;\n\n: gzip on;\n: gzip_min_length  1000;\n: gzip_buffers     4 8k;   \n: gzip_http_version 1.1; \n: gzip_types       text/plain application/x-javascript text/css text/html application/xml;\n\n: ......\t\n}\n\n\n\n# references\n\nåå§ææ¡£',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Nginx locationæ­£ååæ³",frontmatter:{title:"Nginx locationæ­£ååæ³",date:"2022-02-09T11:24:38.000Z",permalink:"/pages/9d4443/"},regularPath:"/10.Nginx/01.Nginx/04.Nginx%20location%E6%AD%A3%E5%88%99%E5%86%99%E6%B3%95.html",relativePath:"10.Nginx/01.Nginx/04.Nginx locationæ­£ååæ³.md",key:"v-e4187760",path:"/pages/9d4443/",headers:[{level:2,title:"å¹éç¬¦å·è¯´æ",slug:"å¹éç¬¦å·è¯´æ",normalizedTitle:"å¹éç¬¦å·è¯´æ",charIndex:25},{level:2,title:"æ­£åè¡¨è¾¾å¼",slug:"æ­£åè¡¨è¾¾å¼",normalizedTitle:"æ­£åè¡¨è¾¾å¼",charIndex:75},{level:2,title:"æ­£åè¡¨è¾¾å¼è¡¥å",slug:"æ­£åè¡¨è¾¾å¼è¡¥å",normalizedTitle:"æ­£åè¡¨è¾¾å¼è¡¥å",charIndex:770},{level:3,title:"å®ä¾",slug:"å®ä¾",normalizedTitle:"å®ä¾",charIndex:992},{level:3,title:"å®éä½¿ç¨å»ºè®®",slug:"å®éä½¿ç¨å»ºè®®",normalizedTitle:"å®éä½¿ç¨å»ºè®®",charIndex:2740},{level:2,title:"flagæ å¿ä½",slug:"flagæ å¿ä½",normalizedTitle:"flagæ å¿ä½",charIndex:3940},{level:2,title:"ifæä»¤ä¸å¨å±åé",slug:"ifæä»¤ä¸å¨å±åé",normalizedTitle:"ifæä»¤ä¸å¨å±åé",charIndex:4329},{level:2,title:"rewriteå®ä¾",slug:"rewriteå®ä¾",normalizedTitle:"rewriteå®ä¾",charIndex:5408}],headersStr:"å¹éç¬¦å·è¯´æ æ­£åè¡¨è¾¾å¼ æ­£åè¡¨è¾¾å¼è¡¥å å®ä¾ å®éä½¿ç¨å»ºè®® flagæ å¿ä½ ifæä»¤ä¸å¨å±åé rewriteå®ä¾",content:'# Nginx locationæ­£ååæ³\n\n\n# å¹éç¬¦å·è¯´æ\n\nè¡¨è¾¾å¼   æè¿°\n^~    æ è¯ç¬¦å¹éåé¢è·ä¸ä¸ªå­ç¬¦ä¸²ãå¹éå­ç¬¦ä¸²åå°åæ­¢å¯¹åç»­çæ­£åè¡¨è¾¾å¼è¿è¡å¹éã\n=     ç²¾åå¹éï¼å¦location=/ï¼åªä¼å¹éurlä¸º/çè¯·æ±ã\n~     åºåå¤§å°åçå¹éã\n~*    ä¸åºåå¤§å°åçå¹éã\n!~    å¯¹åºåå¤§å°åçå¹éåéã\n!~*   å¯¹ä¸åºåå¤§å°åçå¹éåéã\n/     éç¨å¹éï¼å¦ææ²¡æå¶å®å¹é,ä»»ä½è¯·æ±é½ä¼è¢«å¹éå°\n\n> å¦ location ^~ /images/ ï¼ å¨å¹éäº/images/ è¿ä¸ªå­ç¬¦ä¸²åå°±åæ­¢å¯¹åç»­çæ­£åå¹é\n\næç¤º\n\nå¹éé¡ºåºä¼åçº§ï¼ ï¼location =ï¼> (location å®æ´è·¯å¾ï¼> (location ^~ è·¯å¾) > (location ~ï¼~*æ­£åé¡ºåº) >(location é¨åèµ·å§ä½ç½®) > ï¼/ï¼\n\n\n# æ­£åè¡¨è¾¾å¼\n\nè¡¨è¾¾å¼      æè¿°\n*        éå¤åé¢çå­ç¬¦0æ¬¡æå¤æ¬¡\nï¼        éå¤åé¢çå­ç¬¦0æ¬¡æ1æ¬¡\n+        éå¤åé¢çå­ç¬¦1æ¬¡æå¤æ¬¡\n.        å¹éé¤æ¢è¡ç¬¦ä»¥å¤çä»»æä¸ä¸ªå­ç¬¦\n(a|b)    å¹éaæb\n^        ä»¥...å¼å¤´\n$        ä»¥...ç»å°¾\n{n}      éå¤åé¢çå­ç¬¦næ¬¡\n{n,}     éå¤åé¢çå­ç¬¦næ¬¡ææ´å¤æ¬¡\n{nï¼m}    éå¤åé¢çå­ç¬¦n-mæ¬¡\n*ï¼       éå¤åé¢çå­ç¬¦0æ¬¡æå¤æ¬¡ï¼ä½å°½å¯è½å°éå¤\n+ï¼       éå¤åé¢çå­ç¬¦1æ¬¡æå¤æ¬¡ï¼ä½å°½å¯è½å°éå¤\nï¼ï¼       éå¤åé¢çå­ç¬¦0æ¬¡æ1æ¬¡ï¼ä½å°½å¯è½å°éå¤\n{nï¼m}ï¼   éå¤åé¢çå­ç¬¦n-mæ¬¡ï¼ä½å°½å¯è½å°éå¤\n{n}ï¼     éå¤åé¢çå­ç¬¦næ¬¡ä»¥ä¸ï¼ä½å°½å¯è½å°éå¤\n\n\n# æ­£åè¡¨è¾¾å¼è¡¥å\n\nè¡¨è¾¾å¼      æè¿°\n\\W       å¹éä»»æä¸æ¯å­æ¯ï¼æ°å­ï¼ä¸åçº¿ï¼æ±å­çå­ç¬¦ï¼ç¹æ®ç¬¦å·ï¼\n\\S       å¹éä»»æä¸æ¯ç©ºç½ç¬¦çå­ç¬¦\n\\D       å¹éä»»æéæ°å­çå­ç¬¦\n\\B       å¹éä»»æä¸æ¯åè¯å¼å¤´æç»å°¾çä½ç½®\n[a]      å¹éåä¸ªå­ç¬¦a\n[a-z]    å¹éa-zå°åå­ç¬¦çä»»æä¸ä¸ª\n[^a]     å¹éé¤äºaä»¥å¤çä»»æå­ç¬¦\n[^abc]   å¹éé¤äºabcè¿å ä¸ªå­æ¯ä»¥å¤çä»»æå­ç¬¦\n\n\n# å®ä¾\n\nlocation  = / {\n  # ç²¾ç¡®å¹é / ï¼ä¸»æºååé¢ä¸è½å¸¦ä»»ä½å­ç¬¦ä¸²\n  [ configuration A ] \n}\nlocation  / {\n  # å ä¸ºææçå°åé½ä»¥ / å¼å¤´ï¼æä»¥è¿æ¡è§åå°å¹éå°ææè¯·æ±\n  # ä½æ¯æ­£ååæé¿å­ç¬¦ä¸²ä¼ä¼åå¹é\n  [ configuration B ] \n}\nlocation /documents/ {\n  # å¹éä»»ä½ä»¥ /documents/ å¼å¤´çå°åï¼å¹éç¬¦åä»¥åï¼è¿è¦ç»§ç»­å¾ä¸æç´¢\n  # åªæåé¢çæ­£åè¡¨è¾¾å¼æ²¡æå¹éå°æ¶ï¼è¿ä¸æ¡æä¼éç¨è¿ä¸æ¡\n  [ configuration C ] \n}\n\nlocation ~ /documents/Abc {\n  # å¹éä»»ä½ä»¥ /documents/ å¼å¤´çå°åï¼å¹éç¬¦åä»¥åï¼è¿è¦ç»§ç»­å¾ä¸æç´¢\n  # åªæåé¢çæ­£åè¡¨è¾¾å¼æ²¡æå¹éå°æ¶ï¼è¿ä¸æ¡æä¼éç¨è¿ä¸æ¡\n  [ configuration CC ] \n}\n\nlocation ^~ /images/ {\n  # å¹éä»»ä½ä»¥ /images/ å¼å¤´çå°åï¼å¹éç¬¦åä»¥åï¼åæ­¢å¾ä¸æç´¢æ­£åï¼éç¨è¿ä¸æ¡ã\n  [ configuration D ] \n}\n\nlocation ~* \\.(gif|jpg|jpeg)$ {\n  # å¹éææä»¥ gif,jpgæjpeg ç»å°¾çè¯·æ±\n  # ç¶èï¼ææè¯·æ± /images/ ä¸çå¾çä¼è¢« config D å¤çï¼å ä¸º ^~ å°è¾¾ä¸äºè¿ä¸æ¡æ­£å\n  [ configuration E ] \n}\n\nlocation /images/ {\n  # å­ç¬¦å¹éå° /images/ï¼ç»§ç»­å¾ä¸ï¼ä¼åç° ^~ å­å¨\n  [ configuration F ] \n}\n\nlocation /images/abc {\n  # æé¿å­ç¬¦å¹éå° /images/abcï¼ç»§ç»­å¾ä¸ï¼ä¼åç° ^~ å­å¨\n  # Fä¸Gçæ¾ç½®é¡ºåºæ¯æ²¡æå³ç³»ç\n  [ configuration G ] \n}\n\nlocation ~ /images/abc/ {\n  # åªæå»æ config D æææï¼åæé¿å¹é config G å¼å¤´çå°åï¼ç»§ç»­å¾ä¸æç´¢ï¼å¹éå°è¿ä¸æ¡æ­£åï¼éç¨\n    [ configuration H ] \n}\n\nlocation ~* /js/.*/\\.js\n\n\n 1. å·²=å¼å¤´è¡¨ç¤ºç²¾ç¡®å¹é\n 2. å¦ A ä¸­åªå¹éæ ¹ç®å½ç»å°¾çè¯·æ±ï¼åé¢ä¸è½å¸¦ä»»ä½å­ç¬¦ä¸²ã\n 3. ^~ å¼å¤´è¡¨ç¤ºuriä»¥æä¸ªå¸¸è§å­ç¬¦ä¸²å¼å¤´ï¼ä¸æ¯æ­£åå¹é\n 4. ~ å¼å¤´è¡¨ç¤ºåºåå¤§å°åçæ­£åå¹é;\n 5. ~* å¼å¤´è¡¨ç¤ºä¸åºåå¤§å°åçæ­£åå¹é\n 6. / éç¨å¹é, å¦ææ²¡æå¶å®å¹é,ä»»ä½è¯·æ±é½ä¼å¹éå°\n\næç¤º\n\né¡ºåº noä¼åçº§ï¼ (location =) > (location å®æ´è·¯å¾) > (location ^~ è·¯å¾) > (location ~,~* æ­£åé¡ºåº) > (location é¨åèµ·å§è·¯å¾) > (/)\n\nä¸é¢çå¹éç»æ æç§ä¸é¢çlocationåæ³ï¼ä»¥ä¸çå¹éç¤ºä¾æç«ï¼\n\n * / -> config A ï¼ç²¾ç¡®å®å¨å¹éï¼å³ä½¿/index.htmlä¹å¹éä¸äº\n * /downloads/download.html -> config B ï¼å¹éBä»¥åï¼å¾ä¸æ²¡æä»»ä½å¹éï¼éç¨B\n * /images/1.gif -> configuration D ï¼å¹éå°Fï¼å¾ä¸å¹éå°Dï¼åæ­¢å¾ä¸\n * /images/abc/def -> config Dï¼æé¿å¹éå°Gï¼å¾ä¸å¹éDï¼åæ­¢å¾ä¸ä½ å¯ä»¥çå° ä»»ä½ä»¥/images/å¼å¤´çé½ä¼å¹éå°Då¹¶åæ­¢ï¼FGåå¨è¿éæ¯æ²¡æä»»ä½æä¹çï¼Hæ¯æ°¸è¿è½®ä¸å°çï¼è¿éåªæ¯ä¸ºäºè¯´æå¹éé¡ºåº\n * /documents/document.html -> config C ï¼å¹éå°Cï¼å¾ä¸æ²¡æä»»ä½å¹éï¼éç¨C\n * /documents/1.jpg -> configuration E ï¼å¹éå°Cï¼å¾ä¸æ­£åå¹éå°E\n * /documents/Abc.jpg -> config CC ï¼æé¿å¹éå°Cï¼å¾ä¸æ­£åé¡ºåºå¹éå°CCï¼ä¸ä¼å¾ä¸å°E\n\n\n# å®éä½¿ç¨å»ºè®®\n\næä»¥å®éä½¿ç¨ä¸­ï¼ä¸ªäººè§å¾è³å°æä¸ä¸ªå¹éè§åå®ä¹ï¼å¦ä¸ï¼\n#ç´æ¥å¹éç½ç«æ ¹ï¼éè¿ååè®¿é®ç½ç«é¦é¡µæ¯è¾é¢ç¹ï¼ä½¿ç¨è¿ä¸ªä¼å éå¤çï¼å®ç½å¦æ¯è¯´ã\n#è¿éæ¯ç´æ¥è½¬åç»åç«¯åºç¨æå¡å¨äºï¼ä¹å¯ä»¥æ¯ä¸ä¸ªéæé¦é¡µ\n# ç¬¬ä¸ä¸ªå¿éè§å\nlocation = / {\n    proxy_pass http://tomcat:8080/index\n}\n# ç¬¬äºä¸ªå¿éè§åæ¯å¤çéææä»¶è¯·æ±ï¼è¿æ¯nginxä½ä¸ºhttpæå¡å¨çå¼ºé¡¹\n# æä¸¤ç§éç½®æ¨¡å¼ï¼ç®å½å¹éæåç¼å¹é,ä»»éå¶ä¸ææ­éä½¿ç¨\nlocation ^~ /static/ {\n    root /webroot/static/;\n}\nlocation ~* \\.(gif|jpg|jpeg|png|css|js|ico)$ {\n    root /webroot/res/;\n}\n#ç¬¬ä¸ä¸ªè§åå°±æ¯éç¨è§åï¼ç¨æ¥è½¬åå¨æè¯·æ±å°åç«¯åºç¨æå¡å¨\n#ééææä»¶è¯·æ±å°±é»è®¤æ¯å¨æè¯·æ±ï¼èªå·±æ ¹æ®å®éææ¡\n#æ¯ç«ç®åçä¸äºæ¡æ¶çæµè¡ï¼å¸¦.php,.jspåç¼çæåµå¾å°äº\nlocation / {\n    proxy_pass http://tomcat:8080/\n}\n\n\nhttp://tengine.taobao.org/book/chapter_02.html http://nginx.org/en/docs/http/ngx_http_rewrite_module.html\n\n\n# Rewriteè§å\n\nrewriteåè½å°±æ¯ï¼ä½¿ç¨nginxæä¾çå¨å±åéæèªå·±è®¾ç½®çåéï¼ç»åæ­£åè¡¨è¾¾å¼åæ å¿ä½å®ç°urléåä»¥åéå®åãrewriteåªè½æ¾å¨server{},location{},if{}ä¸­ï¼å¹¶ä¸åªè½å¯¹åååè¾¹çé¤å»ä¼ éçåæ°å¤çå­ç¬¦ä¸²èµ·ä½ç¨ï¼ä¾å¦ http://seanlook.com/a/we/index.php?id=1&u=str åªå¯¹/a/we/index.phpéåãè¯­æ³rewrite regex replacement [flag];\n\nå¦æç¸å¯¹ååæåæ°å­ç¬¦ä¸²èµ·ä½ç¨ï¼å¯ä»¥ä½¿ç¨å¨å±åéå¹éï¼ä¹å¯ä»¥ä½¿ç¨proxy_passååä»£çã\n\nè¡¨é¢çrewriteålocationåè½æç¹åï¼é½è½å®ç°è·³è½¬ï¼ä¸»è¦åºå«å¨äºrewriteæ¯å¨åä¸åååæ´æ¹è·åèµæºçè·¯å¾ï¼èlocationæ¯å¯¹ä¸ç±»è·¯å¾åæ§å¶è®¿é®æååä»£çï¼å¯ä»¥proxy_passå°å¶ä»æºå¨ãå¾å¤æåµä¸rewriteä¹ä¼åå¨locationéï¼å®ä»¬çæ§è¡é¡ºåºæ¯ï¼\n\n 1. æ§è¡serveråçrewriteæä»¤\n 2. æ§è¡locationå¹é\n 3. æ§è¡éå®çlocationä¸­çrewriteæä»¤\n\nå¦æå¶ä¸­ææ­¥URIè¢«éåï¼åéæ°å¾ªç¯æ§è¡1-3ï¼ç´å°æ¾å°çå®å­å¨çæä»¶ï¼å¾ªç¯è¶è¿10æ¬¡ï¼åè¿å500 Internal Server Erroréè¯¯ã\n\n\n# flagæ å¿ä½\n\n * last : ç¸å½äºApacheç[L]æ è®°ï¼è¡¨ç¤ºå®ærewrite\n * break : åæ­¢æ§è¡å½åèæä¸»æºçåç»­rewriteæä»¤é\n * redirect : è¿å302ä¸´æ¶éå®åï¼å°åæ ä¼æ¾ç¤ºè·³è½¬åçå°å\n * permanent : è¿å301æ°¸ä¹éå®åï¼å°åæ ä¼æ¾ç¤ºè·³è½¬åçå°å\n\nå ä¸º301å302ä¸è½ç®åçåªè¿åç¶æç ï¼è¿å¿é¡»æéå®åçURLï¼è¿å°±æ¯returnæä»¤æ æ³è¿å301,302çåå äºãè¿é last å break åºå«æç¹é¾ä»¥çè§£ï¼\n\n 1. lastä¸è¬åå¨serveråifä¸­ï¼èbreakä¸è¬ä½¿ç¨å¨locationä¸­\n 2. lastä¸ç»æ­¢éååçurlå¹éï¼å³æ°çurlä¼åä»serverèµ°ä¸éå¹éæµç¨ï¼èbreakç»æ­¢éååçå¹é\n 3. breakålasté½è½ç»ç»ç»§ç»­æ§è¡åé¢çrewriteæä»¤\n\n\n# ifæä»¤ä¸å¨å±åé\n\nifå¤æ­æä»¤ è¯­æ³ä¸ºif(condition){...}ï¼å¯¹ç»å®çæ¡ä»¶conditionè¿è¡å¤æ­ãå¦æä¸ºçï¼å¤§æ¬å·åçrewriteæä»¤å°è¢«æ§è¡ï¼ifæ¡ä»¶(conditon)å¯ä»¥æ¯å¦ä¸ä»»ä½åå®¹ï¼\n\n * å½è¡¨è¾¾å¼åªæ¯ä¸ä¸ªåéæ¶ï¼å¦æå¼ä¸ºç©ºæä»»ä½ä»¥0å¼å¤´çå­ç¬¦ä¸²é½ä¼å½åfalse\n * ç´æ¥æ¯è¾åéååå®¹æ¶ï¼ä½¿ç¨=æ!=\n * ~æ­£åè¡¨è¾¾å¼å¹éï¼~*ä¸åºåå¤§å°åçå¹éï¼!~åºåå¤§å°åçä¸å¹é\n\n-få!-fç¨æ¥å¤æ­æ¯å¦å­å¨æä»¶ -då!-dç¨æ¥å¤æ­æ¯å¦å­å¨ç®å½ -eå!-eç¨æ¥å¤æ­æ¯å¦å­å¨æä»¶æç®å½ -xå!-xç¨æ¥å¤æ­æä»¶æ¯å¦å¯æ§è¡\n\nä¾å¦ï¼\n\nif ($http_user_agent ~ MSIE) {\n    rewrite ^(.*)$ /msie/$1 break;\n} //å¦æUAåå«"MSIE"ï¼rewriteè¯·æ±å°/msid/ç®å½ä¸\n\nif ($http_cookie ~* "id=([^;]+)(?:;|$)") {\n    set $id $1;\n } //å¦æcookieå¹éæ­£åï¼è®¾ç½®åé$idç­äºæ­£åå¼ç¨é¨å\n\nif ($request_method = POST) {\n    return 405;\n} //å¦ææäº¤æ¹æ³ä¸ºPOSTï¼åè¿åç¶æ405ï¼Method not allowedï¼ãreturnä¸è½è¿å301,302\n\nif ($slow) {\n    limit_rate 10k;\n} //ééï¼$slowå¯ä»¥éè¿ set æä»¤è®¾ç½®\n\nif (!-f $request_filename){\n    break;\n    proxy_pass  http://127.0.0.1; \n} //å¦æè¯·æ±çæä»¶åä¸å­å¨ï¼åååä»£çå°localhost ãè¿éçbreakä¹æ¯åæ­¢rewriteæ£æ¥\n\nif ($args ~ post=140){\n    rewrite ^ http://example.com/ permanent;\n} //å¦æquery stringä¸­åå«"post=140"ï¼æ°¸ä¹éå®åå°example.com\n\nlocation ~* \\.(gif|jpg|png|swf|flv)$ {\n    valid_referers none blocked www.jefflei.com www.leizhenfang.com;\n    if ($invalid_referer) {\n        return 404;\n    } //é²çé¾\n}\n\n\n\n# rewriteå®ä¾\n\nä¾1ï¼\n\nhttp {\n    # å®ä¹imageæ¥å¿æ ¼å¼\n    log_format imagelog \'[$time_local] \' $image_file \' \' $image_type \' \' $body_bytes_sent \' \' $status;\n    # å¼å¯éåæ¥å¿\n    rewrite_log on;\n\n    server {\n        root /home/www;\n\n        location / {\n                # éåè§åä¿¡æ¯\n                error_log logs/rewrite.log notice; \n                # æ³¨æè¿éè¦ç¨ââåå¼å·å¼èµ·æ¥ï¼é¿å{}\n                rewrite \'^/images/([a-z]{2})/([a-z0-9]{5})/(.*)\\.(png|jpg|gif)$\' /data?file=$3.$4;\n                # æ³¨æä¸è½å¨ä¸é¢è¿æ¡è§ååé¢å ä¸âlastâåæ°ï¼å¦åä¸é¢çsetæä»¤ä¸ä¼æ§è¡\n                set $image_file $3;\n                set $image_type $4;\n        }\n\n        location /data {\n                # æå®éå¯¹å¾ççæ¥å¿æ ¼å¼ï¼æ¥åæå¾çç±»ååå¤§å°\n                access_log logs/images.log mian;\n                root /data/images;\n                # åºç¨åé¢å®ä¹çåéãå¤æ­é¦åæä»¶å¨ä¸å¨ï¼ä¸å¨åå¤æ­ç®å½å¨ä¸å¨ï¼å¦æè¿ä¸å¨å°±è·³è½¬å°æåä¸ä¸ªurlé\n                try_files /$arg_file /image404.html;\n        }\n        location = /image404.html {\n                # å¾çä¸å­å¨è¿åç¹å®çä¿¡æ¯\n                return 404 "image not found\\n";\n        }\n}\n\n\nå¯¹å½¢å¦/images/ef/uh7b3/test.pngçè¯·æ±ï¼éåå°/data?file=test.pngï¼äºæ¯å¹éå°location /dataï¼åç/data/images/test.pngæä»¶å­ä¸å­å¨ï¼å¦æå­å¨åæ­£å¸¸ååºï¼å¦æä¸å­å¨åéåtryfileså°æ°çimage404 locationï¼ç´æ¥è¿å404ç¶æç ã\n\nä¾2ï¼\n\nrewrite ^/images/(.*)_(\\d+)x(\\d+)\\.(png|jpg|gif)$ /resizer/$1.$4?width=$2&height=$3? last;\n\n\nå¯¹å½¢å¦/images/bla_500x400.jpgçæä»¶è¯·æ±ï¼éåå°/resizer/bla.jpg?width=500&height=400å°åï¼å¹¶ä¼ç»§ç»­å°è¯å¹élocationã\n\nè¿ä¸ªlocation\n\nlocation ~ ^/(.+)\\.3gp\\.zip$ {\n  # access_by_lua_file  "/opt/pro/nginx/lua/zip_access.lua";\n  rewrite_by_lua_file "/opt/pro/nginx/lua/zip_access.lua";\n}\n\n\nå¹é https://www.ivoov.com/vod/ts01/TVM/video/3gp/TVM/HuNanHD/2016/04/27/80a4b71a-c000-46fa-916b-70d9e2445635/Q350/Q350.3gp.zip?&end=5',normalizedContent:'# nginx locationæ­£ååæ³\n\n\n# å¹éç¬¦å·è¯´æ\n\nè¡¨è¾¾å¼   æè¿°\n^~    æ è¯ç¬¦å¹éåé¢è·ä¸ä¸ªå­ç¬¦ä¸²ãå¹éå­ç¬¦ä¸²åå°åæ­¢å¯¹åç»­çæ­£åè¡¨è¾¾å¼è¿è¡å¹éã\n=     ç²¾åå¹éï¼å¦location=/ï¼åªä¼å¹éurlä¸º/çè¯·æ±ã\n~     åºåå¤§å°åçå¹éã\n~*    ä¸åºåå¤§å°åçå¹éã\n!~    å¯¹åºåå¤§å°åçå¹éåéã\n!~*   å¯¹ä¸åºåå¤§å°åçå¹éåéã\n/     éç¨å¹éï¼å¦ææ²¡æå¶å®å¹é,ä»»ä½è¯·æ±é½ä¼è¢«å¹éå°\n\n> å¦ location ^~ /images/ ï¼ å¨å¹éäº/images/ è¿ä¸ªå­ç¬¦ä¸²åå°±åæ­¢å¯¹åç»­çæ­£åå¹é\n\næç¤º\n\nå¹éé¡ºåºä¼åçº§ï¼ ï¼location =ï¼> (location å®æ´è·¯å¾ï¼> (location ^~ è·¯å¾) > (location ~ï¼~*æ­£åé¡ºåº) >(location é¨åèµ·å§ä½ç½®) > ï¼/ï¼\n\n\n# æ­£åè¡¨è¾¾å¼\n\nè¡¨è¾¾å¼      æè¿°\n*        éå¤åé¢çå­ç¬¦0æ¬¡æå¤æ¬¡\nï¼        éå¤åé¢çå­ç¬¦0æ¬¡æ1æ¬¡\n+        éå¤åé¢çå­ç¬¦1æ¬¡æå¤æ¬¡\n.        å¹éé¤æ¢è¡ç¬¦ä»¥å¤çä»»æä¸ä¸ªå­ç¬¦\n(a|b)    å¹éaæb\n^        ä»¥...å¼å¤´\n$        ä»¥...ç»å°¾\n{n}      éå¤åé¢çå­ç¬¦næ¬¡\n{n,}     éå¤åé¢çå­ç¬¦næ¬¡ææ´å¤æ¬¡\n{nï¼m}    éå¤åé¢çå­ç¬¦n-mæ¬¡\n*ï¼       éå¤åé¢çå­ç¬¦0æ¬¡æå¤æ¬¡ï¼ä½å°½å¯è½å°éå¤\n+ï¼       éå¤åé¢çå­ç¬¦1æ¬¡æå¤æ¬¡ï¼ä½å°½å¯è½å°éå¤\nï¼ï¼       éå¤åé¢çå­ç¬¦0æ¬¡æ1æ¬¡ï¼ä½å°½å¯è½å°éå¤\n{nï¼m}ï¼   éå¤åé¢çå­ç¬¦n-mæ¬¡ï¼ä½å°½å¯è½å°éå¤\n{n}ï¼     éå¤åé¢çå­ç¬¦næ¬¡ä»¥ä¸ï¼ä½å°½å¯è½å°éå¤\n\n\n# æ­£åè¡¨è¾¾å¼è¡¥å\n\nè¡¨è¾¾å¼      æè¿°\n\\w       å¹éä»»æä¸æ¯å­æ¯ï¼æ°å­ï¼ä¸åçº¿ï¼æ±å­çå­ç¬¦ï¼ç¹æ®ç¬¦å·ï¼\n\\s       å¹éä»»æä¸æ¯ç©ºç½ç¬¦çå­ç¬¦\n\\d       å¹éä»»æéæ°å­çå­ç¬¦\n\\b       å¹éä»»æä¸æ¯åè¯å¼å¤´æç»å°¾çä½ç½®\n[a]      å¹éåä¸ªå­ç¬¦a\n[a-z]    å¹éa-zå°åå­ç¬¦çä»»æä¸ä¸ª\n[^a]     å¹éé¤äºaä»¥å¤çä»»æå­ç¬¦\n[^abc]   å¹éé¤äºabcè¿å ä¸ªå­æ¯ä»¥å¤çä»»æå­ç¬¦\n\n\n# å®ä¾\n\nlocation  = / {\n  # ç²¾ç¡®å¹é / ï¼ä¸»æºååé¢ä¸è½å¸¦ä»»ä½å­ç¬¦ä¸²\n  [ configuration a ] \n}\nlocation  / {\n  # å ä¸ºææçå°åé½ä»¥ / å¼å¤´ï¼æä»¥è¿æ¡è§åå°å¹éå°ææè¯·æ±\n  # ä½æ¯æ­£ååæé¿å­ç¬¦ä¸²ä¼ä¼åå¹é\n  [ configuration b ] \n}\nlocation /documents/ {\n  # å¹éä»»ä½ä»¥ /documents/ å¼å¤´çå°åï¼å¹éç¬¦åä»¥åï¼è¿è¦ç»§ç»­å¾ä¸æç´¢\n  # åªæåé¢çæ­£åè¡¨è¾¾å¼æ²¡æå¹éå°æ¶ï¼è¿ä¸æ¡æä¼éç¨è¿ä¸æ¡\n  [ configuration c ] \n}\n\nlocation ~ /documents/abc {\n  # å¹éä»»ä½ä»¥ /documents/ å¼å¤´çå°åï¼å¹éç¬¦åä»¥åï¼è¿è¦ç»§ç»­å¾ä¸æç´¢\n  # åªæåé¢çæ­£åè¡¨è¾¾å¼æ²¡æå¹éå°æ¶ï¼è¿ä¸æ¡æä¼éç¨è¿ä¸æ¡\n  [ configuration cc ] \n}\n\nlocation ^~ /images/ {\n  # å¹éä»»ä½ä»¥ /images/ å¼å¤´çå°åï¼å¹éç¬¦åä»¥åï¼åæ­¢å¾ä¸æç´¢æ­£åï¼éç¨è¿ä¸æ¡ã\n  [ configuration d ] \n}\n\nlocation ~* \\.(gif|jpg|jpeg)$ {\n  # å¹éææä»¥ gif,jpgæjpeg ç»å°¾çè¯·æ±\n  # ç¶èï¼ææè¯·æ± /images/ ä¸çå¾çä¼è¢« config d å¤çï¼å ä¸º ^~ å°è¾¾ä¸äºè¿ä¸æ¡æ­£å\n  [ configuration e ] \n}\n\nlocation /images/ {\n  # å­ç¬¦å¹éå° /images/ï¼ç»§ç»­å¾ä¸ï¼ä¼åç° ^~ å­å¨\n  [ configuration f ] \n}\n\nlocation /images/abc {\n  # æé¿å­ç¬¦å¹éå° /images/abcï¼ç»§ç»­å¾ä¸ï¼ä¼åç° ^~ å­å¨\n  # fä¸gçæ¾ç½®é¡ºåºæ¯æ²¡æå³ç³»ç\n  [ configuration g ] \n}\n\nlocation ~ /images/abc/ {\n  # åªæå»æ config d æææï¼åæé¿å¹é config g å¼å¤´çå°åï¼ç»§ç»­å¾ä¸æç´¢ï¼å¹éå°è¿ä¸æ¡æ­£åï¼éç¨\n    [ configuration h ] \n}\n\nlocation ~* /js/.*/\\.js\n\n\n 1. å·²=å¼å¤´è¡¨ç¤ºç²¾ç¡®å¹é\n 2. å¦ a ä¸­åªå¹éæ ¹ç®å½ç»å°¾çè¯·æ±ï¼åé¢ä¸è½å¸¦ä»»ä½å­ç¬¦ä¸²ã\n 3. ^~ å¼å¤´è¡¨ç¤ºuriä»¥æä¸ªå¸¸è§å­ç¬¦ä¸²å¼å¤´ï¼ä¸æ¯æ­£åå¹é\n 4. ~ å¼å¤´è¡¨ç¤ºåºåå¤§å°åçæ­£åå¹é;\n 5. ~* å¼å¤´è¡¨ç¤ºä¸åºåå¤§å°åçæ­£åå¹é\n 6. / éç¨å¹é, å¦ææ²¡æå¶å®å¹é,ä»»ä½è¯·æ±é½ä¼å¹éå°\n\næç¤º\n\né¡ºåº noä¼åçº§ï¼ (location =) > (location å®æ´è·¯å¾) > (location ^~ è·¯å¾) > (location ~,~* æ­£åé¡ºåº) > (location é¨åèµ·å§è·¯å¾) > (/)\n\nä¸é¢çå¹éç»æ æç§ä¸é¢çlocationåæ³ï¼ä»¥ä¸çå¹éç¤ºä¾æç«ï¼\n\n * / -> config a ï¼ç²¾ç¡®å®å¨å¹éï¼å³ä½¿/index.htmlä¹å¹éä¸äº\n * /downloads/download.html -> config b ï¼å¹ébä»¥åï¼å¾ä¸æ²¡æä»»ä½å¹éï¼éç¨b\n * /images/1.gif -> configuration d ï¼å¹éå°fï¼å¾ä¸å¹éå°dï¼åæ­¢å¾ä¸\n * /images/abc/def -> config dï¼æé¿å¹éå°gï¼å¾ä¸å¹édï¼åæ­¢å¾ä¸ä½ å¯ä»¥çå° ä»»ä½ä»¥/images/å¼å¤´çé½ä¼å¹éå°då¹¶åæ­¢ï¼fgåå¨è¿éæ¯æ²¡æä»»ä½æä¹çï¼hæ¯æ°¸è¿è½®ä¸å°çï¼è¿éåªæ¯ä¸ºäºè¯´æå¹éé¡ºåº\n * /documents/document.html -> config c ï¼å¹éå°cï¼å¾ä¸æ²¡æä»»ä½å¹éï¼éç¨c\n * /documents/1.jpg -> configuration e ï¼å¹éå°cï¼å¾ä¸æ­£åå¹éå°e\n * /documents/abc.jpg -> config cc ï¼æé¿å¹éå°cï¼å¾ä¸æ­£åé¡ºåºå¹éå°ccï¼ä¸ä¼å¾ä¸å°e\n\n\n# å®éä½¿ç¨å»ºè®®\n\næä»¥å®éä½¿ç¨ä¸­ï¼ä¸ªäººè§å¾è³å°æä¸ä¸ªå¹éè§åå®ä¹ï¼å¦ä¸ï¼\n#ç´æ¥å¹éç½ç«æ ¹ï¼éè¿ååè®¿é®ç½ç«é¦é¡µæ¯è¾é¢ç¹ï¼ä½¿ç¨è¿ä¸ªä¼å éå¤çï¼å®ç½å¦æ¯è¯´ã\n#è¿éæ¯ç´æ¥è½¬åç»åç«¯åºç¨æå¡å¨äºï¼ä¹å¯ä»¥æ¯ä¸ä¸ªéæé¦é¡µ\n# ç¬¬ä¸ä¸ªå¿éè§å\nlocation = / {\n    proxy_pass http://tomcat:8080/index\n}\n# ç¬¬äºä¸ªå¿éè§åæ¯å¤çéææä»¶è¯·æ±ï¼è¿æ¯nginxä½ä¸ºhttpæå¡å¨çå¼ºé¡¹\n# æä¸¤ç§éç½®æ¨¡å¼ï¼ç®å½å¹éæåç¼å¹é,ä»»éå¶ä¸ææ­éä½¿ç¨\nlocation ^~ /static/ {\n    root /webroot/static/;\n}\nlocation ~* \\.(gif|jpg|jpeg|png|css|js|ico)$ {\n    root /webroot/res/;\n}\n#ç¬¬ä¸ä¸ªè§åå°±æ¯éç¨è§åï¼ç¨æ¥è½¬åå¨æè¯·æ±å°åç«¯åºç¨æå¡å¨\n#ééææä»¶è¯·æ±å°±é»è®¤æ¯å¨æè¯·æ±ï¼èªå·±æ ¹æ®å®éææ¡\n#æ¯ç«ç®åçä¸äºæ¡æ¶çæµè¡ï¼å¸¦.php,.jspåç¼çæåµå¾å°äº\nlocation / {\n    proxy_pass http://tomcat:8080/\n}\n\n\nhttp://tengine.taobao.org/book/chapter_02.html http://nginx.org/en/docs/http/ngx_http_rewrite_module.html\n\n\n# rewriteè§å\n\nrewriteåè½å°±æ¯ï¼ä½¿ç¨nginxæä¾çå¨å±åéæèªå·±è®¾ç½®çåéï¼ç»åæ­£åè¡¨è¾¾å¼åæ å¿ä½å®ç°urléåä»¥åéå®åãrewriteåªè½æ¾å¨server{},location{},if{}ä¸­ï¼å¹¶ä¸åªè½å¯¹åååè¾¹çé¤å»ä¼ éçåæ°å¤çå­ç¬¦ä¸²èµ·ä½ç¨ï¼ä¾å¦ http://seanlook.com/a/we/index.php?id=1&u=str åªå¯¹/a/we/index.phpéåãè¯­æ³rewrite regex replacement [flag];\n\nå¦æç¸å¯¹ååæåæ°å­ç¬¦ä¸²èµ·ä½ç¨ï¼å¯ä»¥ä½¿ç¨å¨å±åéå¹éï¼ä¹å¯ä»¥ä½¿ç¨proxy_passååä»£çã\n\nè¡¨é¢çrewriteålocationåè½æç¹åï¼é½è½å®ç°è·³è½¬ï¼ä¸»è¦åºå«å¨äºrewriteæ¯å¨åä¸åååæ´æ¹è·åèµæºçè·¯å¾ï¼èlocationæ¯å¯¹ä¸ç±»è·¯å¾åæ§å¶è®¿é®æååä»£çï¼å¯ä»¥proxy_passå°å¶ä»æºå¨ãå¾å¤æåµä¸rewriteä¹ä¼åå¨locationéï¼å®ä»¬çæ§è¡é¡ºåºæ¯ï¼\n\n 1. æ§è¡serveråçrewriteæä»¤\n 2. æ§è¡locationå¹é\n 3. æ§è¡éå®çlocationä¸­çrewriteæä»¤\n\nå¦æå¶ä¸­ææ­¥uriè¢«éåï¼åéæ°å¾ªç¯æ§è¡1-3ï¼ç´å°æ¾å°çå®å­å¨çæä»¶ï¼å¾ªç¯è¶è¿10æ¬¡ï¼åè¿å500 internal server erroréè¯¯ã\n\n\n# flagæ å¿ä½\n\n * last : ç¸å½äºapacheç[l]æ è®°ï¼è¡¨ç¤ºå®ærewrite\n * break : åæ­¢æ§è¡å½åèæä¸»æºçåç»­rewriteæä»¤é\n * redirect : è¿å302ä¸´æ¶éå®åï¼å°åæ ä¼æ¾ç¤ºè·³è½¬åçå°å\n * permanent : è¿å301æ°¸ä¹éå®åï¼å°åæ ä¼æ¾ç¤ºè·³è½¬åçå°å\n\nå ä¸º301å302ä¸è½ç®åçåªè¿åç¶æç ï¼è¿å¿é¡»æéå®åçurlï¼è¿å°±æ¯returnæä»¤æ æ³è¿å301,302çåå äºãè¿é last å break åºå«æç¹é¾ä»¥çè§£ï¼\n\n 1. lastä¸è¬åå¨serveråifä¸­ï¼èbreakä¸è¬ä½¿ç¨å¨locationä¸­\n 2. lastä¸ç»æ­¢éååçurlå¹éï¼å³æ°çurlä¼åä»serverèµ°ä¸éå¹éæµç¨ï¼èbreakç»æ­¢éååçå¹é\n 3. breakålasté½è½ç»ç»ç»§ç»­æ§è¡åé¢çrewriteæä»¤\n\n\n# ifæä»¤ä¸å¨å±åé\n\nifå¤æ­æä»¤ è¯­æ³ä¸ºif(condition){...}ï¼å¯¹ç»å®çæ¡ä»¶conditionè¿è¡å¤æ­ãå¦æä¸ºçï¼å¤§æ¬å·åçrewriteæä»¤å°è¢«æ§è¡ï¼ifæ¡ä»¶(conditon)å¯ä»¥æ¯å¦ä¸ä»»ä½åå®¹ï¼\n\n * å½è¡¨è¾¾å¼åªæ¯ä¸ä¸ªåéæ¶ï¼å¦æå¼ä¸ºç©ºæä»»ä½ä»¥0å¼å¤´çå­ç¬¦ä¸²é½ä¼å½åfalse\n * ç´æ¥æ¯è¾åéååå®¹æ¶ï¼ä½¿ç¨=æ!=\n * ~æ­£åè¡¨è¾¾å¼å¹éï¼~*ä¸åºåå¤§å°åçå¹éï¼!~åºåå¤§å°åçä¸å¹é\n\n-få!-fç¨æ¥å¤æ­æ¯å¦å­å¨æä»¶ -då!-dç¨æ¥å¤æ­æ¯å¦å­å¨ç®å½ -eå!-eç¨æ¥å¤æ­æ¯å¦å­å¨æä»¶æç®å½ -xå!-xç¨æ¥å¤æ­æä»¶æ¯å¦å¯æ§è¡\n\nä¾å¦ï¼\n\nif ($http_user_agent ~ msie) {\n    rewrite ^(.*)$ /msie/$1 break;\n} //å¦æuaåå«"msie"ï¼rewriteè¯·æ±å°/msid/ç®å½ä¸\n\nif ($http_cookie ~* "id=([^;]+)(?:;|$)") {\n    set $id $1;\n } //å¦æcookieå¹éæ­£åï¼è®¾ç½®åé$idç­äºæ­£åå¼ç¨é¨å\n\nif ($request_method = post) {\n    return 405;\n} //å¦ææäº¤æ¹æ³ä¸ºpostï¼åè¿åç¶æ405ï¼method not allowedï¼ãreturnä¸è½è¿å301,302\n\nif ($slow) {\n    limit_rate 10k;\n} //ééï¼$slowå¯ä»¥éè¿ set æä»¤è®¾ç½®\n\nif (!-f $request_filename){\n    break;\n    proxy_pass  http://127.0.0.1; \n} //å¦æè¯·æ±çæä»¶åä¸å­å¨ï¼åååä»£çå°localhost ãè¿éçbreakä¹æ¯åæ­¢rewriteæ£æ¥\n\nif ($args ~ post=140){\n    rewrite ^ http://example.com/ permanent;\n} //å¦æquery stringä¸­åå«"post=140"ï¼æ°¸ä¹éå®åå°example.com\n\nlocation ~* \\.(gif|jpg|png|swf|flv)$ {\n    valid_referers none blocked www.jefflei.com www.leizhenfang.com;\n    if ($invalid_referer) {\n        return 404;\n    } //é²çé¾\n}\n\n\n\n# rewriteå®ä¾\n\nä¾1ï¼\n\nhttp {\n    # å®ä¹imageæ¥å¿æ ¼å¼\n    log_format imagelog \'[$time_local] \' $image_file \' \' $image_type \' \' $body_bytes_sent \' \' $status;\n    # å¼å¯éåæ¥å¿\n    rewrite_log on;\n\n    server {\n        root /home/www;\n\n        location / {\n                # éåè§åä¿¡æ¯\n                error_log logs/rewrite.log notice; \n                # æ³¨æè¿éè¦ç¨ââåå¼å·å¼èµ·æ¥ï¼é¿å{}\n                rewrite \'^/images/([a-z]{2})/([a-z0-9]{5})/(.*)\\.(png|jpg|gif)$\' /data?file=$3.$4;\n                # æ³¨æä¸è½å¨ä¸é¢è¿æ¡è§ååé¢å ä¸âlastâåæ°ï¼å¦åä¸é¢çsetæä»¤ä¸ä¼æ§è¡\n                set $image_file $3;\n                set $image_type $4;\n        }\n\n        location /data {\n                # æå®éå¯¹å¾ççæ¥å¿æ ¼å¼ï¼æ¥åæå¾çç±»ååå¤§å°\n                access_log logs/images.log mian;\n                root /data/images;\n                # åºç¨åé¢å®ä¹çåéãå¤æ­é¦åæä»¶å¨ä¸å¨ï¼ä¸å¨åå¤æ­ç®å½å¨ä¸å¨ï¼å¦æè¿ä¸å¨å°±è·³è½¬å°æåä¸ä¸ªurlé\n                try_files /$arg_file /image404.html;\n        }\n        location = /image404.html {\n                # å¾çä¸å­å¨è¿åç¹å®çä¿¡æ¯\n                return 404 "image not found\\n";\n        }\n}\n\n\nå¯¹å½¢å¦/images/ef/uh7b3/test.pngçè¯·æ±ï¼éåå°/data?file=test.pngï¼äºæ¯å¹éå°location /dataï¼åç/data/images/test.pngæä»¶å­ä¸å­å¨ï¼å¦æå­å¨åæ­£å¸¸ååºï¼å¦æä¸å­å¨åéåtryfileså°æ°çimage404 locationï¼ç´æ¥è¿å404ç¶æç ã\n\nä¾2ï¼\n\nrewrite ^/images/(.*)_(\\d+)x(\\d+)\\.(png|jpg|gif)$ /resizer/$1.$4?width=$2&height=$3? last;\n\n\nå¯¹å½¢å¦/images/bla_500x400.jpgçæä»¶è¯·æ±ï¼éåå°/resizer/bla.jpg?width=500&height=400å°åï¼å¹¶ä¼ç»§ç»­å°è¯å¹élocationã\n\nè¿ä¸ªlocation\n\nlocation ~ ^/(.+)\\.3gp\\.zip$ {\n  # access_by_lua_file  "/opt/pro/nginx/lua/zip_access.lua";\n  rewrite_by_lua_file "/opt/pro/nginx/lua/zip_access.lua";\n}\n\n\nå¹é https://www.ivoov.com/vod/ts01/tvm/video/3gp/tvm/hunanhd/2016/04/27/80a4b71a-c000-46fa-916b-70d9e2445635/q350/q350.3gp.zip?&end=5',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"ä»ä¹æ¯MongoDB",frontmatter:{title:"ä»ä¹æ¯MongoDB",date:"2022-02-09T11:25:35.000Z",permalink:"/pages/035a1b/"},regularPath:"/11.MongoDB/01.MongoDB/01.%E4%BB%80%E4%B9%88%E6%98%AFMongoDB.html",relativePath:"11.MongoDB/01.MongoDB/01.ä»ä¹æ¯MongoDB.md",key:"v-29934bff",path:"/pages/035a1b/",headers:[{level:2,title:"ä¸»è¦ç¹ç¹",slug:"ä¸»è¦ç¹ç¹",normalizedTitle:"ä¸»è¦ç¹ç¹",charIndex:212},{level:2,title:"åå²",slug:"åå²",normalizedTitle:"åå²",charIndex:927},{level:2,title:"MongoDB ä¸è½½",slug:"mongodb-ä¸è½½",normalizedTitle:"mongodb ä¸è½½",charIndex:1204},{level:2,title:"è¯­è¨æ¯æ",slug:"è¯­è¨æ¯æ",normalizedTitle:"è¯­è¨æ¯æ",charIndex:1440},{level:2,title:"MongoDB å·¥å·",slug:"mongodb-å·¥å·",normalizedTitle:"mongodb å·¥å·",charIndex:1597},{level:3,title:"çæ§",slug:"çæ§",normalizedTitle:"çæ§",charIndex:1633},{level:3,title:"GUI",slug:"gui",normalizedTitle:"gui",charIndex:1799},{level:2,title:"MongoDB åºç¨æ¡ä¾",slug:"mongodb-åºç¨æ¡ä¾",normalizedTitle:"mongodb åºç¨æ¡ä¾",charIndex:2079}],headersStr:"ä¸»è¦ç¹ç¹ åå² MongoDB ä¸è½½ è¯­è¨æ¯æ MongoDB å·¥å· çæ§ GUI MongoDB åºç¨æ¡ä¾",content:'# ä»ä¹æ¯MongoDB\n\nMongoDB æ¯ç±C++è¯­è¨ç¼åçï¼æ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çå¼æºæ°æ®åºç³»ç»ã\n\nå¨é«è´è½½çæåµä¸ï¼æ·»å æ´å¤çèç¹ï¼å¯ä»¥ä¿è¯æå¡å¨æ§è½ã\n\nMongoDB æ¨å¨ä¸ºWEBåºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\nMongoDB å°æ°æ®å­å¨ä¸ºä¸ä¸ªææ¡£ï¼æ°æ®ç»æç±é®å¼(key=>value)å¯¹ç»æãMongoDB ææ¡£ç±»ä¼¼äº JSON å¯¹è±¡ãå­æ®µå¼å¯ä»¥åå«å¶ä»ææ¡£ï¼æ°ç»åææ¡£æ°ç»ã\n\n\n\n\n# ä¸»è¦ç¹ç¹\n\n * MongoDB æ¯ä¸ä¸ªé¢åææ¡£å­å¨çæ°æ®åºï¼æä½èµ·æ¥æ¯è¾ç®ååå®¹æã\n * ä½ å¯ä»¥å¨MongoDBè®°å½ä¸­è®¾ç½®ä»»ä½å±æ§çç´¢å¼ (å¦ï¼FirstName="Sameer",Address="8 Gandhi Road")æ¥å®ç°æ´å¿«çæåºã\n * ä½ å¯ä»¥éè¿æ¬å°æèç½ç»åå»ºæ°æ®éåï¼è¿ä½¿å¾MongoDBææ´å¼ºçæ©å±æ§ã\n * å¦æè´è½½çå¢å ï¼éè¦æ´å¤çå­å¨ç©ºé´åæ´å¼ºçå¤çè½åï¼ ï¼å®å¯ä»¥åå¸å¨è®¡ç®æºç½ç»ä¸­çå¶ä»èç¹ä¸è¿å°±æ¯æè°çåçã\n * Mongoæ¯æä¸°å¯çæ¥è¯¢è¡¨è¾¾å¼ãæ¥è¯¢æä»¤ä½¿ç¨JSONå½¢å¼çæ è®°ï¼å¯è½»ææ¥è¯¢ææ¡£ä¸­ååµçå¯¹è±¡åæ°ç»ã\n * MongoDb ä½¿ç¨update()å½ä»¤å¯ä»¥å®ç°æ¿æ¢å®æçææ¡£ï¼æ°æ®ï¼æèä¸äºæå®çæ°æ®å­æ®µ ã\n * Mongodbä¸­çMap/reduceä¸»è¦æ¯ç¨æ¥å¯¹æ°æ®è¿è¡æ¹éå¤çåèåæä½ã\n * MapåReduceãMapå½æ°è°ç¨emit(key,value)éåéåä¸­ææçè®°å½ï¼å°keyä¸valueä¼ ç»Reduceå½æ°è¿è¡å¤çã\n * Mapå½æ°åReduceå½æ°æ¯ä½¿ç¨Javascriptç¼åçï¼å¹¶å¯ä»¥éè¿db.runCommandæmapreduceå½ä»¤æ¥æ§è¡MapReduceæä½ã\n * GridFSæ¯MongoDBä¸­çä¸ä¸ªåç½®åè½ï¼å¯ä»¥ç¨äºå­æ¾å¤§éå°æä»¶ã\n * MongoDBåè®¸å¨æå¡ç«¯æ§è¡èæ¬ï¼å¯ä»¥ç¨Javascriptç¼åæä¸ªå½æ°ï¼ç´æ¥å¨æå¡ç«¯æ§è¡ï¼ä¹å¯ä»¥æå½æ°çå®ä¹å­å¨å¨æå¡ç«¯ï¼ä¸æ¬¡ç´æ¥è°ç¨å³å¯ã\n * MongoDBæ¯æåç§ç¼ç¨è¯­è¨:RUBYï¼PYTHONï¼JAVAï¼C++ï¼PHPï¼C#ç­å¤ç§è¯­è¨ã\n * MongoDBå®è£ç®åã\n\n\n# åå²\n\n * 2007å¹´10æï¼MongoDBç±10genå¢éæåå±ã2009å¹´2æé¦åº¦æ¨åºã\n * 2012å¹´05æ23æ¥ï¼MongoDB2.1 å¼ååæ¯åå¸äº! è¯¥çæ¬éç¨å¨æ°æ¶æï¼åå«è¯¸å¤å¢å¼ºã\n * 2012å¹´06æ06æ¥ï¼MongoDB 2.0.6 åå¸ï¼åå¸å¼ææ¡£æ°æ®åºã\n * 2013å¹´04æ23æ¥ï¼MongoDB 2.4.3 åå¸ï¼æ­¤çæ¬åæ¬äºä¸äºæ§è½ä¼åï¼åè½å¢å¼ºä»¥åbugä¿®å¤ã\n * 2013å¹´08æ20æ¥ï¼MongoDB 2.4.6 åå¸ã\n * 2013å¹´11æ01æ¥ï¼MongoDB 2.4.8 åå¸ã\n * â¦â¦\n\n\n# MongoDB ä¸è½½\n\nä½ å¯ä»¥å¨mongodbå®ç½ä¸è½½è¯¥å®è£åï¼å°åä¸ºï¼https://www.mongodb.com/download-center#communityãMonggoDBæ¯æä»¥ä¸å¹³å°:\n\n * OS X 32-bit\n * OS X 64-bit\n * Linux 32-bit\n * Linux 64-bit\n * Windows 32-bit\n * Windows 64-bit\n * Solaris i86pc\n * Solaris 64\n\n\n# è¯­è¨æ¯æ\n\nMongoDBæå®æ¹çé©±å¨å¦ä¸ï¼\n\n * C\n * C++\n * C# / .NET\n * Erlang\n * Haskell\n * Java\n * JavaScript\n * Lisp\n * node.JS\n * Perl\n * PHP\n * Python\n * Ruby\n * Scala\n\n\n# MongoDB å·¥å·\n\næå ç§å¯ç¨äºMongoDBçç®¡çå·¥å·ã\n\n\n# çæ§\n\nMongoDBæä¾äºç½ç»åç³»ç»çæ§å·¥å·Muninï¼å®ä½ä¸ºä¸ä¸ªæä»¶åºç¨äºMongoDBä¸­ã\n\nGangilaæ¯MongoDBé«æ§è½çç³»ç»çè§çå·¥å·ï¼å®ä½ä¸ºä¸ä¸ªæä»¶åºç¨äºMongoDBä¸­ã\n\nåºäºå¾å½¢çé¢çå¼æºå·¥å· Cacti, ç¨äºæ¥çCPUè´è½½, ç½ç»å¸¦å®½å©ç¨ç,å®ä¹æä¾äºä¸ä¸ªåºç¨äºçæ§ MongoDB çæä»¶ã\n\n\n# GUI\n\n * Fang of Mongo â ç½é¡µå¼,ç±DjangoåjQueryæææã\n * Futon4Mongo â ä¸ä¸ªCouchDB Futon webçmongodbå±±å¯¨çã\n * Mongo3 â Rubyåæã\n * MongoHub â éç¨äºOSXçåºç¨ç¨åºã\n * Opricot â ä¸ä¸ªåºäºæµè§å¨çMongoDBæ§å¶å°, ç±PHPæ°åèæã\n * Database Master â Windowsçmongodbç®¡çå·¥å·\n * RockMongo â æå¥½çPHPè¯­è¨çMongoDBç®¡çå·¥å·ï¼è½»éçº§, æ¯æå¤å½è¯­è¨.\n\n\n# MongoDB åºç¨æ¡ä¾\n\nä¸é¢åä¸¾ä¸äºå¬å¸MongoDBçå®éåºç¨ï¼\n\n * Craiglistä¸ä½¿ç¨MongoDBçå­æ¡£æ°åäº¿æ¡è®°å½ã\n * FourSquareï¼åºäºä½ç½®çç¤¾äº¤ç½ç«ï¼å¨Amazon EC2çæå¡å¨ä¸ä½¿ç¨MongoDBåäº«æ°æ®ã\n * Shutterflyï¼ä»¥äºèç½ä¸ºåºç¡çç¤¾ä¼åä¸ªäººåºçæå¡ï¼ä½¿ç¨MongoDBçåç§æä¹æ§æ°æ®å­å¨çè¦æ±ã\n * bit.ly, ä¸ä¸ªåºäºWebçç½åç¼©ç­æå¡ï¼ä½¿ç¨MongoDBçå­å¨èªå·±çæ°æ®ã\n * spike.comï¼ä¸ä¸ªMTVç½ç»çèè¥å¬å¸ï¼ spike.comä½¿ç¨MongoDBçã\n * Intuitå¬å¸ï¼ä¸ä¸ªä¸ºå°ä¼ä¸åä¸ªäººçè½¯ä»¶åæå¡æä¾åï¼ä¸ºå°åä¼ä¸ä½¿ç¨MongoDBçè·è¸ªç¨æ·çæ°æ®ã\n * sourceforge.netï¼èµæºç½ç«æ¥æ¾ï¼åå»ºååå¸å¼æºè½¯ä»¶åè´¹ï¼ä½¿ç¨MongoDBçåç«¯å­å¨ã\n * etsy.com ï¼ä¸ä¸ªè´­ä¹°ååºå®æå·¥å¶ä½ç©åç½ç«ï¼ä½¿ç¨MongoDBã\n * çº½çº¦æ¶æ¥ï¼é¢åçå¨çº¿æ°é»é¨æ·ç½ç«ä¹ä¸ï¼ä½¿ç¨MongoDBã\n * CERNï¼èåçç²å­ç©çç ç©¶æï¼æ¬§æ´²æ ¸å­ç ç©¶ä¸­å¿å¤§åå¼ºå­å¯¹ææºçæ°æ®ä½¿ç¨MongoDBã',normalizedContent:'# ä»ä¹æ¯mongodb\n\nmongodb æ¯ç±c++è¯­è¨ç¼åçï¼æ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çå¼æºæ°æ®åºç³»ç»ã\n\nå¨é«è´è½½çæåµä¸ï¼æ·»å æ´å¤çèç¹ï¼å¯ä»¥ä¿è¯æå¡å¨æ§è½ã\n\nmongodb æ¨å¨ä¸ºwebåºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\nmongodb å°æ°æ®å­å¨ä¸ºä¸ä¸ªææ¡£ï¼æ°æ®ç»æç±é®å¼(key=>value)å¯¹ç»æãmongodb ææ¡£ç±»ä¼¼äº json å¯¹è±¡ãå­æ®µå¼å¯ä»¥åå«å¶ä»ææ¡£ï¼æ°ç»åææ¡£æ°ç»ã\n\n\n\n\n# ä¸»è¦ç¹ç¹\n\n * mongodb æ¯ä¸ä¸ªé¢åææ¡£å­å¨çæ°æ®åºï¼æä½èµ·æ¥æ¯è¾ç®ååå®¹æã\n * ä½ å¯ä»¥å¨mongodbè®°å½ä¸­è®¾ç½®ä»»ä½å±æ§çç´¢å¼ (å¦ï¼firstname="sameer",address="8 gandhi road")æ¥å®ç°æ´å¿«çæåºã\n * ä½ å¯ä»¥éè¿æ¬å°æèç½ç»åå»ºæ°æ®éåï¼è¿ä½¿å¾mongodbææ´å¼ºçæ©å±æ§ã\n * å¦æè´è½½çå¢å ï¼éè¦æ´å¤çå­å¨ç©ºé´åæ´å¼ºçå¤çè½åï¼ ï¼å®å¯ä»¥åå¸å¨è®¡ç®æºç½ç»ä¸­çå¶ä»èç¹ä¸è¿å°±æ¯æè°çåçã\n * mongoæ¯æä¸°å¯çæ¥è¯¢è¡¨è¾¾å¼ãæ¥è¯¢æä»¤ä½¿ç¨jsonå½¢å¼çæ è®°ï¼å¯è½»ææ¥è¯¢ææ¡£ä¸­ååµçå¯¹è±¡åæ°ç»ã\n * mongodb ä½¿ç¨update()å½ä»¤å¯ä»¥å®ç°æ¿æ¢å®æçææ¡£ï¼æ°æ®ï¼æèä¸äºæå®çæ°æ®å­æ®µ ã\n * mongodbä¸­çmap/reduceä¸»è¦æ¯ç¨æ¥å¯¹æ°æ®è¿è¡æ¹éå¤çåèåæä½ã\n * mapåreduceãmapå½æ°è°ç¨emit(key,value)éåéåä¸­ææçè®°å½ï¼å°keyä¸valueä¼ ç»reduceå½æ°è¿è¡å¤çã\n * mapå½æ°åreduceå½æ°æ¯ä½¿ç¨javascriptç¼åçï¼å¹¶å¯ä»¥éè¿db.runcommandæmapreduceå½ä»¤æ¥æ§è¡mapreduceæä½ã\n * gridfsæ¯mongodbä¸­çä¸ä¸ªåç½®åè½ï¼å¯ä»¥ç¨äºå­æ¾å¤§éå°æä»¶ã\n * mongodbåè®¸å¨æå¡ç«¯æ§è¡èæ¬ï¼å¯ä»¥ç¨javascriptç¼åæä¸ªå½æ°ï¼ç´æ¥å¨æå¡ç«¯æ§è¡ï¼ä¹å¯ä»¥æå½æ°çå®ä¹å­å¨å¨æå¡ç«¯ï¼ä¸æ¬¡ç´æ¥è°ç¨å³å¯ã\n * mongodbæ¯æåç§ç¼ç¨è¯­è¨:rubyï¼pythonï¼javaï¼c++ï¼phpï¼c#ç­å¤ç§è¯­è¨ã\n * mongodbå®è£ç®åã\n\n\n# åå²\n\n * 2007å¹´10æï¼mongodbç±10genå¢éæåå±ã2009å¹´2æé¦åº¦æ¨åºã\n * 2012å¹´05æ23æ¥ï¼mongodb2.1 å¼ååæ¯åå¸äº! è¯¥çæ¬éç¨å¨æ°æ¶æï¼åå«è¯¸å¤å¢å¼ºã\n * 2012å¹´06æ06æ¥ï¼mongodb 2.0.6 åå¸ï¼åå¸å¼ææ¡£æ°æ®åºã\n * 2013å¹´04æ23æ¥ï¼mongodb 2.4.3 åå¸ï¼æ­¤çæ¬åæ¬äºä¸äºæ§è½ä¼åï¼åè½å¢å¼ºä»¥åbugä¿®å¤ã\n * 2013å¹´08æ20æ¥ï¼mongodb 2.4.6 åå¸ã\n * 2013å¹´11æ01æ¥ï¼mongodb 2.4.8 åå¸ã\n * â¦â¦\n\n\n# mongodb ä¸è½½\n\nä½ å¯ä»¥å¨mongodbå®ç½ä¸è½½è¯¥å®è£åï¼å°åä¸ºï¼https://www.mongodb.com/download-center#communityãmonggodbæ¯æä»¥ä¸å¹³å°:\n\n * os x 32-bit\n * os x 64-bit\n * linux 32-bit\n * linux 64-bit\n * windows 32-bit\n * windows 64-bit\n * solaris i86pc\n * solaris 64\n\n\n# è¯­è¨æ¯æ\n\nmongodbæå®æ¹çé©±å¨å¦ä¸ï¼\n\n * c\n * c++\n * c# / .net\n * erlang\n * haskell\n * java\n * javascript\n * lisp\n * node.js\n * perl\n * php\n * python\n * ruby\n * scala\n\n\n# mongodb å·¥å·\n\næå ç§å¯ç¨äºmongodbçç®¡çå·¥å·ã\n\n\n# çæ§\n\nmongodbæä¾äºç½ç»åç³»ç»çæ§å·¥å·muninï¼å®ä½ä¸ºä¸ä¸ªæä»¶åºç¨äºmongodbä¸­ã\n\ngangilaæ¯mongodbé«æ§è½çç³»ç»çè§çå·¥å·ï¼å®ä½ä¸ºä¸ä¸ªæä»¶åºç¨äºmongodbä¸­ã\n\nåºäºå¾å½¢çé¢çå¼æºå·¥å· cacti, ç¨äºæ¥çcpuè´è½½, ç½ç»å¸¦å®½å©ç¨ç,å®ä¹æä¾äºä¸ä¸ªåºç¨äºçæ§ mongodb çæä»¶ã\n\n\n# gui\n\n * fang of mongo â ç½é¡µå¼,ç±djangoåjqueryæææã\n * futon4mongo â ä¸ä¸ªcouchdb futon webçmongodbå±±å¯¨çã\n * mongo3 â rubyåæã\n * mongohub â éç¨äºosxçåºç¨ç¨åºã\n * opricot â ä¸ä¸ªåºäºæµè§å¨çmongodbæ§å¶å°, ç±phpæ°åèæã\n * database master â windowsçmongodbç®¡çå·¥å·\n * rockmongo â æå¥½çphpè¯­è¨çmongodbç®¡çå·¥å·ï¼è½»éçº§, æ¯æå¤å½è¯­è¨.\n\n\n# mongodb åºç¨æ¡ä¾\n\nä¸é¢åä¸¾ä¸äºå¬å¸mongodbçå®éåºç¨ï¼\n\n * craiglistä¸ä½¿ç¨mongodbçå­æ¡£æ°åäº¿æ¡è®°å½ã\n * foursquareï¼åºäºä½ç½®çç¤¾äº¤ç½ç«ï¼å¨amazon ec2çæå¡å¨ä¸ä½¿ç¨mongodbåäº«æ°æ®ã\n * shutterflyï¼ä»¥äºèç½ä¸ºåºç¡çç¤¾ä¼åä¸ªäººåºçæå¡ï¼ä½¿ç¨mongodbçåç§æä¹æ§æ°æ®å­å¨çè¦æ±ã\n * bit.ly, ä¸ä¸ªåºäºwebçç½åç¼©ç­æå¡ï¼ä½¿ç¨mongodbçå­å¨èªå·±çæ°æ®ã\n * spike.comï¼ä¸ä¸ªmtvç½ç»çèè¥å¬å¸ï¼ spike.comä½¿ç¨mongodbçã\n * intuitå¬å¸ï¼ä¸ä¸ªä¸ºå°ä¼ä¸åä¸ªäººçè½¯ä»¶åæå¡æä¾åï¼ä¸ºå°åä¼ä¸ä½¿ç¨mongodbçè·è¸ªç¨æ·çæ°æ®ã\n * sourceforge.netï¼èµæºç½ç«æ¥æ¾ï¼åå»ºååå¸å¼æºè½¯ä»¶åè´¹ï¼ä½¿ç¨mongodbçåç«¯å­å¨ã\n * etsy.com ï¼ä¸ä¸ªè´­ä¹°ååºå®æå·¥å¶ä½ç©åç½ç«ï¼ä½¿ç¨mongodbã\n * çº½çº¦æ¶æ¥ï¼é¢åçå¨çº¿æ°é»é¨æ·ç½ç«ä¹ä¸ï¼ä½¿ç¨mongodbã\n * cernï¼èåçç²å­ç©çç ç©¶æï¼æ¬§æ´²æ ¸å­ç ç©¶ä¸­å¿å¤§åå¼ºå­å¯¹ææºçæ°æ®ä½¿ç¨mongodbã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"CentOS7 ç¦»çº¿å®è£MongoDB",frontmatter:{title:"CentOS7 ç¦»çº¿å®è£MongoDB",date:"2022-02-09T11:25:34.000Z",permalink:"/pages/25c76e/"},regularPath:"/11.MongoDB/01.MongoDB/02.CentOS7%20%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85MongoDB.html",relativePath:"11.MongoDB/01.MongoDB/02.CentOS7 ç¦»çº¿å®è£MongoDB.md",key:"v-6b185955",path:"/pages/25c76e/",headers:[{level:2,title:"è½¯ä»¶çæ¬",slug:"è½¯ä»¶çæ¬",normalizedTitle:"è½¯ä»¶çæ¬",charIndex:74},{level:2,title:"å®è£ä¾èµ",slug:"å®è£ä¾èµ",normalizedTitle:"å®è£ä¾èµ",charIndex:160},{level:2,title:"æºç ä¸è½½",slug:"æºç ä¸è½½",normalizedTitle:"æºç ä¸è½½",charIndex:204},{level:2,title:"åå¤å®è£",slug:"åå¤å®è£",normalizedTitle:"åå¤å®è£",charIndex:377},{level:2,title:"åå»ºæ°æ®ç®å½",slug:"åå»ºæ°æ®ç®å½",normalizedTitle:"åå»ºæ°æ®ç®å½",charIndex:651},{level:2,title:"éç½®mongodb.confæä»¶",slug:"éç½®mongodb-confæä»¶",normalizedTitle:"éç½®mongodb.confæä»¶",charIndex:824},{level:2,title:"éç½®å¼æºèªå¯å¨",slug:"éç½®å¼æºèªå¯å¨",normalizedTitle:"éç½®å¼æºèªå¯å¨",charIndex:1275},{level:2,title:"æä½å½ä»¤",slug:"æä½å½ä»¤",normalizedTitle:"æä½å½ä»¤",charIndex:1876},{level:2,title:"æ·»å é²ç«å¢ä¾å¤",slug:"æ·»å é²ç«å¢ä¾å¤",normalizedTitle:"æ·»å é²ç«å¢ä¾å¤",charIndex:2049},{level:2,title:"åå»ºç®¡çè´¦æ·",slug:"åå»ºç®¡çè´¦æ·",normalizedTitle:"åå»ºç®¡çè´¦æ·",charIndex:2178},{level:2,title:"åå»ºæ®éè´¦æ·",slug:"åå»ºæ®éè´¦æ·",normalizedTitle:"åå»ºæ®éè´¦æ·",charIndex:2448}],headersStr:"è½¯ä»¶çæ¬ å®è£ä¾èµ æºç ä¸è½½ åå¤å®è£ åå»ºæ°æ®ç®å½ éç½®mongodb.confæä»¶ éç½®å¼æºèªå¯å¨ æä½å½ä»¤ æ·»å é²ç«å¢ä¾å¤ åå»ºç®¡çè´¦æ· åå»ºæ®éè´¦æ·",content:'# CentOS7 ç¦»çº¿å®è£MongoDB\n\nMongoDB æä¾äº linux åä¸ªåè¡çæ¬ 64 ä½çå®è£åï¼ä½ å¯ä»¥å¨å®ç½ä¸è½½å®è£åã\n\n\n# è½¯ä»¶çæ¬\n\nä¾èµ        çæ¬\næä½ç³»ç»      CentOS Linux release 7.6.1810 (Core)\nMongoDB   4.4.2\n\n\n# å®è£ä¾èµ\n\nsudo yum install libcurl openssl\n\n\n\n# æºç ä¸è½½\n\nåå¾MongoDBå®ç½ä¸è½½æéçMongoDBçæ¬ï¼æ¬æ¬¡ä»¥å½åææ°çæ¬MongoDB 4.4.2ä¸ºä¾è¿è¡å®è£ã\n\n\n\nç¹å»Downloadæé®ç´æ¥ä¸è½½æä½¿ç¨wgetä¸è½½\n\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-4.4.2.tgz\n\n\n\n# åå¤å®è£\n\nè§£å\n\ntar -zxvf mongodb-linux-x86_64-rhel70-4.4.2.tgz\n\n\nå°è§£ååæ·è´å°æå®ç®å½\n\nmv mongodb-linux-x86_64-rhel70-4.4.2 /usr/local/mongodb\n\n\nMongoDB çå¯æ§è¡æä»¶ä½äº bin ç®å½ä¸ï¼æä»¥å¯ä»¥å°å¶æ·»å å° PATH è·¯å¾ä¸­ï¼\n\necho \'export PATH=/usr/local/mongodb/bin:$PATH\' >> /etc/profile  \n\n\næ´æ°\n\nsource /etc/profile\n\n\n\n# åå»ºæ°æ®ç®å½\n\nå»ºç«dataæä»¶å¤¹ï¼ç¨äºå­æ¾æ°æ®æä»¶\n\nmkdir -p /usr/local/mongodb/data/db\n\n\nå»ºç«logsæä»¶å¤¹ï¼ç¨äºå­æ¾æ¥å¿æä»¶\n\nmkdir /usr/local/mongodb/logs\n\n\nå»ºç«confæä»¶å¤¹ï¼ç¨äºå­æ¾éç½®æä»¶\n\nmkdir /usr/local/mongodb/conf\n\n\n\n# éç½®mongodb.confæä»¶\n\nè¿å¥confç®å½ï¼æ§è¡å¦ä¸å½ä»¤å»ºç«éç½®æä»¶\n\nvi /usr/local/mongodb/conf/mongodb.conf\n\n\næ·»å å¦ä¸åå®¹ï¼\n\nport=27017\ndbpath=/usr/local/mongodb/data/db\nlogpath=/usr/local/mongodb/logs/mongodb.log\nfork=true\nauth=true\nbind_ip = 0.0.0.0\n\n\nmongodb.confæä»¶æè¿°å¦ä¸ï¼\n\nåç§°        æè¿°\nport      çå¬çç«¯å£\ndbpath    æ°æ®å­æ¾è·¯å¾\nlogpath   æ¥å¿å­æ¾è·¯å¾\nfork      æ¯å¦å¯ç¨åå°è¿è¡ 1. trueå¯ç¨åå°è¿è¡ 2. falseç¦æ­¢åå°è¿è¡\nauth      æ¯å¦éè¦éªè¯ç»å½æéç»å½ï¼æ¯å¦éè¦ç¨æ·åå¯ç ï¼\nbind_ip   ç»å®IPå°åï¼å¯ä»¥åææ¬æºçIPä¹å¯ä»¥åæ0.0.0.0ï¼åæ0.0.0.0çè¯å°±ä¼çå¬ææçå°å\n\n\n# éç½®å¼æºèªå¯å¨\n\nåå»ºmongodb.serviceæä»¶\n\nvi /lib/systemd/system/mongodb.service\n\n\næ·»å å¦ä¸åå®¹ï¼\n\n\n\n\n\n\n\n\n\nÂ \n\nÂ \n\n\n\n\n\n\n[Unit]\n \nDescription=mongodb\nAfter=network.target remote-fs.target nss-lookup.target\n \n[Service]\nType=forking\nExecStart=/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/conf/mongodb.conf\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/usr/local/mongodb/bin/mongod --shutdown -f /usr/local/mongodb/conf/mongodb.conf\nPrivateTmp=true\n \n[Install]\nWantedBy=multi-user.target\n\n\næç¤º\n\nå¶ä¸­ExecStartåæ°ä¸ExecStopåæ°ä¸­çè·¯å¾è¦åå®è£çè·¯å¾ä¸è´\n\néæ°å è½½æå¡éç½®æä»¶\n\nsystemctl daemon-reload\n\n\næ·»å è³å¼æºå¯å¨\n\nsystemctl enable mongodb.service\n\n\n\n# æä½å½ä»¤\n\nå¯å¨æå¡\n\nsystemctl start mongodb.service\n\n\nåæ­¢æå¡\n\nsystemctl stop mongodb.service\n\n\néå¯æå¡\n\nsystemctl restart mongodb.service\n\n\næ¥çæå¡ç¶æ\n\nsystemctl status mongodb.service\n\n\n\n# æ·»å é²ç«å¢ä¾å¤\n\nä½¿ç¨rootç¨æ·æ§è¡å½ä»¤ å¼å¯27017 ç«¯å£\n\nfirewall-cmd --zone=public --add-port=27017/tcp --permanent\n\n\néæ°å è½½\n\nfirewall-cmd --reload\n\n\n\n# åå»ºç®¡çè´¦æ·\n\nç´æ¥ä½¿ç¨mongoå½ä»¤è¿è¡è¿æ¥ï¼é»è®¤ç«¯å£æ¯27017\n\nmongo\n\n\nåå»ºéªè¯ç¨æ·, æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\n> use admin\n> db.createUser({user:"root",pwd:"rootpassword",roles:[{role:"root",db:"admin"}]})\n\n\nç»å½éªè¯ï¼æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\nmongo -u root -p rootpassword --authenticationDatabase admin\n\n\n\n# åå»ºæ®éè´¦æ·\n\nä½¿ç¨ç¨æ·ç®¡çè´¦æ·ç»å½è®¤è¯ï¼æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\nmongo\n> use admin\n> db.auth(\'root\', \'rootpassword\')\n1\n\n\nåæ¢æ°æ®åºï¼ä¿æç®¡çè´¦æ·ç»å½ç¶æï¼\n\n> use ivoov\n\n\næç¤º\n\nä½¿ç¨å½ä»¤ï¼use ivoovåæ¢æ°æ®åºï¼å¦ææ°æ®åºä¸å­å¨åèªå¨åå»ºã\n\nå»ºç«æ®éè´¦æ·ï¼ä¿æç®¡çè´¦æ·ç»å½ç¶æï¼\n\n> db.createUser(\n{\n    "user": "ivoov",\n    "pwd": "ivoov.com",\n    "roles": [\n        {\n            "role": "readWrite",\n            "db": "ivoov"\n        }\n    ]\n})\n\n\næç¤º\n\nè¯¥æä½åå»ºäºä¸ä¸ªç¨æ·åä¸ºivoov,å¯ç ä¸ºivoov.com,æå±æ°æ®åºä¸ºivoovdb å¹¶èµäºè¯»åæéã\n\næ®éç¨æ·ç»å½\n\n> db.auth(\'ivoov\', \'ivoov.com\')\n1\n\n\nå®æ',normalizedContent:'# centos7 ç¦»çº¿å®è£mongodb\n\nmongodb æä¾äº linux åä¸ªåè¡çæ¬ 64 ä½çå®è£åï¼ä½ å¯ä»¥å¨å®ç½ä¸è½½å®è£åã\n\n\n# è½¯ä»¶çæ¬\n\nä¾èµ        çæ¬\næä½ç³»ç»      centos linux release 7.6.1810 (core)\nmongodb   4.4.2\n\n\n# å®è£ä¾èµ\n\nsudo yum install libcurl openssl\n\n\n\n# æºç ä¸è½½\n\nåå¾mongodbå®ç½ä¸è½½æéçmongodbçæ¬ï¼æ¬æ¬¡ä»¥å½åææ°çæ¬mongodb 4.4.2ä¸ºä¾è¿è¡å®è£ã\n\n\n\nç¹å»downloadæé®ç´æ¥ä¸è½½æä½¿ç¨wgetä¸è½½\n\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-4.4.2.tgz\n\n\n\n# åå¤å®è£\n\nè§£å\n\ntar -zxvf mongodb-linux-x86_64-rhel70-4.4.2.tgz\n\n\nå°è§£ååæ·è´å°æå®ç®å½\n\nmv mongodb-linux-x86_64-rhel70-4.4.2 /usr/local/mongodb\n\n\nmongodb çå¯æ§è¡æä»¶ä½äº bin ç®å½ä¸ï¼æä»¥å¯ä»¥å°å¶æ·»å å° path è·¯å¾ä¸­ï¼\n\necho \'export path=/usr/local/mongodb/bin:$path\' >> /etc/profile  \n\n\næ´æ°\n\nsource /etc/profile\n\n\n\n# åå»ºæ°æ®ç®å½\n\nå»ºç«dataæä»¶å¤¹ï¼ç¨äºå­æ¾æ°æ®æä»¶\n\nmkdir -p /usr/local/mongodb/data/db\n\n\nå»ºç«logsæä»¶å¤¹ï¼ç¨äºå­æ¾æ¥å¿æä»¶\n\nmkdir /usr/local/mongodb/logs\n\n\nå»ºç«confæä»¶å¤¹ï¼ç¨äºå­æ¾éç½®æä»¶\n\nmkdir /usr/local/mongodb/conf\n\n\n\n# éç½®mongodb.confæä»¶\n\nè¿å¥confç®å½ï¼æ§è¡å¦ä¸å½ä»¤å»ºç«éç½®æä»¶\n\nvi /usr/local/mongodb/conf/mongodb.conf\n\n\næ·»å å¦ä¸åå®¹ï¼\n\nport=27017\ndbpath=/usr/local/mongodb/data/db\nlogpath=/usr/local/mongodb/logs/mongodb.log\nfork=true\nauth=true\nbind_ip = 0.0.0.0\n\n\nmongodb.confæä»¶æè¿°å¦ä¸ï¼\n\nåç§°        æè¿°\nport      çå¬çç«¯å£\ndbpath    æ°æ®å­æ¾è·¯å¾\nlogpath   æ¥å¿å­æ¾è·¯å¾\nfork      æ¯å¦å¯ç¨åå°è¿è¡ 1. trueå¯ç¨åå°è¿è¡ 2. falseç¦æ­¢åå°è¿è¡\nauth      æ¯å¦éè¦éªè¯ç»å½æéç»å½ï¼æ¯å¦éè¦ç¨æ·åå¯ç ï¼\nbind_ip   ç»å®ipå°åï¼å¯ä»¥åææ¬æºçipä¹å¯ä»¥åæ0.0.0.0ï¼åæ0.0.0.0çè¯å°±ä¼çå¬ææçå°å\n\n\n# éç½®å¼æºèªå¯å¨\n\nåå»ºmongodb.serviceæä»¶\n\nvi /lib/systemd/system/mongodb.service\n\n\næ·»å å¦ä¸åå®¹ï¼\n\n\n\n\n\n\n\n\n\nÂ \n\nÂ \n\n\n\n\n\n\n[unit]\n \ndescription=mongodb\nafter=network.target remote-fs.target nss-lookup.target\n \n[service]\ntype=forking\nexecstart=/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/conf/mongodb.conf\nexecreload=/bin/kill -s hup $mainpid\nexecstop=/usr/local/mongodb/bin/mongod --shutdown -f /usr/local/mongodb/conf/mongodb.conf\nprivatetmp=true\n \n[install]\nwantedby=multi-user.target\n\n\næç¤º\n\nå¶ä¸­execstartåæ°ä¸execstopåæ°ä¸­çè·¯å¾è¦åå®è£çè·¯å¾ä¸è´\n\néæ°å è½½æå¡éç½®æä»¶\n\nsystemctl daemon-reload\n\n\næ·»å è³å¼æºå¯å¨\n\nsystemctl enable mongodb.service\n\n\n\n# æä½å½ä»¤\n\nå¯å¨æå¡\n\nsystemctl start mongodb.service\n\n\nåæ­¢æå¡\n\nsystemctl stop mongodb.service\n\n\néå¯æå¡\n\nsystemctl restart mongodb.service\n\n\næ¥çæå¡ç¶æ\n\nsystemctl status mongodb.service\n\n\n\n# æ·»å é²ç«å¢ä¾å¤\n\nä½¿ç¨rootç¨æ·æ§è¡å½ä»¤ å¼å¯27017 ç«¯å£\n\nfirewall-cmd --zone=public --add-port=27017/tcp --permanent\n\n\néæ°å è½½\n\nfirewall-cmd --reload\n\n\n\n# åå»ºç®¡çè´¦æ·\n\nç´æ¥ä½¿ç¨mongoå½ä»¤è¿è¡è¿æ¥ï¼é»è®¤ç«¯å£æ¯27017\n\nmongo\n\n\nåå»ºéªè¯ç¨æ·, æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\n> use admin\n> db.createuser({user:"root",pwd:"rootpassword",roles:[{role:"root",db:"admin"}]})\n\n\nç»å½éªè¯ï¼æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\nmongo -u root -p rootpassword --authenticationdatabase admin\n\n\n\n# åå»ºæ®éè´¦æ·\n\nä½¿ç¨ç¨æ·ç®¡çè´¦æ·ç»å½è®¤è¯ï¼æç¤ºrootpasswordæ¿æ¢æä½ èªå·±çå¯ç \n\nmongo\n> use admin\n> db.auth(\'root\', \'rootpassword\')\n1\n\n\nåæ¢æ°æ®åºï¼ä¿æç®¡çè´¦æ·ç»å½ç¶æï¼\n\n> use ivoov\n\n\næç¤º\n\nä½¿ç¨å½ä»¤ï¼use ivoovåæ¢æ°æ®åºï¼å¦ææ°æ®åºä¸å­å¨åèªå¨åå»ºã\n\nå»ºç«æ®éè´¦æ·ï¼ä¿æç®¡çè´¦æ·ç»å½ç¶æï¼\n\n> db.createuser(\n{\n    "user": "ivoov",\n    "pwd": "ivoov.com",\n    "roles": [\n        {\n            "role": "readwrite",\n            "db": "ivoov"\n        }\n    ]\n})\n\n\næç¤º\n\nè¯¥æä½åå»ºäºä¸ä¸ªç¨æ·åä¸ºivoov,å¯ç ä¸ºivoov.com,æå±æ°æ®åºä¸ºivoovdb å¹¶èµäºè¯»åæéã\n\næ®éç¨æ·ç»å½\n\n> db.auth(\'ivoov\', \'ivoov.com\')\n1\n\n\nå®æ',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Minioå¿«éå¥é¨æå",frontmatter:{title:"Minioå¿«éå¥é¨æå",date:"2022-02-09T11:27:28.000Z",permalink:"/pages/76dc6a/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/01.Minio%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97.html",relativePath:"12.MinIO/01.Minioæå¡å¨/01.Minioå¿«éå¥é¨æå.md",key:"v-9431b692",path:"/pages/76dc6a/",headers:[{level:2,title:"Docker å®¹å¨",slug:"docker-å®¹å¨",normalizedTitle:"docker å®¹å¨",charIndex:210},{level:3,title:"ç¨³å®ç",slug:"ç¨³å®ç",normalizedTitle:"ç¨³å®ç",charIndex:406},{level:2,title:"macOS",slug:"macos",normalizedTitle:"macos",charIndex:752},{level:3,title:"Homebrew",slug:"homebrew",normalizedTitle:"homebrew",charIndex:762},{level:3,title:"ä¸è½½äºè¿å¶æä»¶",slug:"ä¸è½½äºè¿å¶æä»¶",normalizedTitle:"ä¸è½½äºè¿å¶æä»¶",charIndex:1114},{level:2,title:"GNU/Linux",slug:"gnu-linux",normalizedTitle:"gnu/linux",charIndex:1379},{level:2,title:"å¾®è½¯Windowsç³»ç»",slug:"å¾®è½¯windowsç³»ç»",normalizedTitle:"å¾®è½¯windowsç³»ç»",charIndex:2269},{level:2,title:"é¨ç½²å»ºè®®",slug:"é¨ç½²å»ºè®®",normalizedTitle:"é¨ç½²å»ºè®®",charIndex:2827},{level:3,title:"åè®¸é²ç«å¢çç«¯å£è®¿é®",slug:"åè®¸é²ç«å¢çç«¯å£è®¿é®",normalizedTitle:"åè®¸é²ç«å¢çç«¯å£è®¿é®",charIndex:2836},{level:3,title:"ufw",slug:"ufw",normalizedTitle:"ufw",charIndex:2912},{level:3,title:"firewall-cmd",slug:"firewall-cmd",normalizedTitle:"firewall-cmd",charIndex:3068},{level:3,title:"iptables",slug:"iptables",normalizedTitle:"iptables",charIndex:3393},{level:2,title:"å·²ç»å­å¨çæ°æ®",slug:"å·²ç»å­å¨çæ°æ®",normalizedTitle:"å·²ç»å­å¨çæ°æ®",charIndex:3680},{level:2,title:"ä½¿ç¨Minioæµè§å¨è¿è¡éªè¯",slug:"ä½¿ç¨minioæµè§å¨è¿è¡éªè¯",normalizedTitle:"ä½¿ç¨minioæµè§å¨è¿è¡éªè¯",charIndex:3836},{level:2,title:"ä½¿ç¨Minioå®¢æ·ç«¯ mcè¿è¡éªè¯",slug:"ä½¿ç¨minioå®¢æ·ç«¯-mcè¿è¡éªè¯",normalizedTitle:"ä½¿ç¨minioå®¢æ·ç«¯ mcè¿è¡éªè¯",charIndex:3913}],headersStr:"Docker å®¹å¨ ç¨³å®ç macOS Homebrew ä¸è½½äºè¿å¶æä»¶ GNU/Linux å¾®è½¯Windowsç³»ç» é¨ç½²å»ºè®® åè®¸é²ç«å¢çç«¯å£è®¿é® ufw firewall-cmd iptables å·²ç»å­å¨çæ°æ® ä½¿ç¨Minioæµè§å¨è¿è¡éªè¯ ä½¿ç¨Minioå®¢æ·ç«¯ mcè¿è¡éªè¯",content:'# Minioå¿«éå¥é¨æå\n\nMinio æ¯ä¸ä¸ªåºäºApache License v2.0å¼æºåè®®çå¯¹è±¡å­å¨æå¡ãå®å¼å®¹äºé©¬éS3äºå­å¨æå¡æ¥å£ï¼éå¸¸éåäºå­å¨å¤§å®¹ééç»æåçæ°æ®ï¼ä¾å¦å¾çãè§é¢ãæ¥å¿æä»¶ãå¤ä»½æ°æ®åå®¹å¨/èææºéåç­ï¼èä¸ä¸ªå¯¹è±¡æä»¶å¯ä»¥æ¯ä»»æå¤§å°ï¼ä»å kbå°æå¤§5Tä¸ç­ã\n\nMinioæ¯ä¸ä¸ªéå¸¸è½»éçæå¡,å¯ä»¥å¾ç®åçåå¶ä»åºç¨çç»åï¼ç±»ä¼¼ NodeJS, Redis æè MySQLã\n\n\n# Docker å®¹å¨\n\nä½¿ç¨ä»¥ä¸å½ä»¤å°ç¬ç«ç MinIO æå¡å¨ä½ä¸ºå®¹å¨è¿è¡ã\n\nç¬ç«ç MinIO æå¡å¨æéåæ©æå¼ååè¯ä¼°ãæäºåè½ï¼ä¾å¦çæ¬æ§å¶ãå¯¹è±¡éå®åå­å¨æ¡¶å¤å¶ï¼éè¦ä½¿ç¨æ¦é¤ç¼ç åå¸å¼é¨ç½² MinIOãå¯¹äºæ©å±çå¼ååçäº§ï¼éè¿ç¼åä»£ç å¯ç¨æ¦é¤é¨ç½²MinIO -å·ä½èè¨ï¼ç¨æå°çæ¯MinIOæå¡å¨4ä¸ªé©±å¨å¨ãæå³æ´å®æ´çææ¡£ï¼è¯·åéMinIO æ¦é¤ä»£ç å¿«éå¥é¨æå ã\n\n\n# ç¨³å®ç\n\nè¿è¡ä»¥ä¸å½ä»¤ä»¥ä½¿ç¨ä¸´æ¶æ°æ®å·å° MinIO çææ°ç¨³å®æ åä½ä¸ºå®¹å¨è¿è¡ï¼\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  minio/minio server /data --console-address ":9001"\n\n\nMinIO é¨ç½²å¼å§ä½¿ç¨é»è®¤çæ ¹å­æ®minioadmin:minioadminãæ¨å¯ä»¥ä½¿ç¨ MinIO æ§å¶å°æµè¯é¨ç½²ï¼è¿æ¯ä¸ä¸ªåç½®äº MinIO æå¡å¨çåµå¥å¼å¯¹è±¡æµè§å¨ãå°ä¸»æºä¸è¿è¡ç Web æµè§å¨æå http://127.0.0.1:9001 å¹¶ä½¿ç¨ root å­æ®ç»å½ãæ¨å¯ä»¥ä½¿ç¨æµè§å¨æ¥åå»ºæ¡¶ãä¸ä¼ å¯¹è±¡ä»¥åæµè§ MinIO æå¡å¨çåå®¹ã\n\næ´å¤Dockeré¨ç½²ä¿¡æ¯è¯·è®¿é® è¿é\n\n\n# macOS\n\n\n# Homebrew\n\nè¿è¡ä»¥ä¸å½ä»¤ä»¥ä½¿ç¨Homebrewå®è£ææ°çç¨³å® MinIO åãæ¿æ¢ /data ä¸ºæ¨å¸æ MinIO å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ã\n\nbrew install minio/stable/minio\nMINIO_ROOT_USER=admin MINIO_ROOT_PASSWORD=password minio server /mnt/data --console-address ":9001"\n\n\næç¤º\n\nå¦æä½ ä¹åä½¿ç¨ brew install minioå®è£è¿minio, å¯ä»¥ç¨ minio/stable/minio å®æ¹ä»åºéæ°å®è£ minioã\n\nbrew uninstall minio\nbrew install minio/stable/minio\n\n\n\n# ä¸è½½äºè¿å¶æä»¶\n\nä½¿ç¨ä»¥ä¸å½ä»¤å¨ macOS ä¸ä¸è½½å¹¶è¿è¡ç¬ç«ç MinIO æå¡å¨ãæ¿æ¢ /data ä¸ºæ¨å¸æ MinIO å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ã\n\nwget https://dl.min.io/server/minio/release/darwin-amd64/minio\nchmod +x minio\nMINIO_ROOT_USER=admin MINIO_ROOT_PASSWORD=password ./minio server /mnt/data --console-address ":9001"\n\n\n\n# GNU/Linux\n\nä½¿ç¨ä»¥ä¸å½ä»¤å¨è¿è¡ 64 ä½ Intel/AMD æ¶æç Linux ä¸»æºä¸è¿è¡ç¬ç«ç MinIO æå¡å¨ã\n\nwget https://dl.min.io/server/minio/release/linux-amd64/minio\nchmod +x minio\nMINIO_ROOT_USER=admin MINIO_ROOT_PASSWORD=password ./minio server /mnt/data --console-address ":9001"\n\n\næ¿æ¢ /data ä¸ºæ¨å¸æ MinIO å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ã\n\nä¸è¡¨ååºäºæ¯æçæ¶æãå°wgetURLæ¿æ¢ä¸º Linux ä¸»æºçæ¶æã\n\nè®¾ç½®åå°å¯å¨\n\nnohup /usr/local/bin/minio/minio server  /home/minio/data > /home/minio/data/minio.log 2>&1 &\n\n\nå¶ä¸­ï¼/home/minio/data/minio.log æ¯å¯å¨æ¶æ¥å¿æä»¶çå­æ¾ä½ç½®ï¼å¯ä»¥æ¯ä»»æç®å½ï¼ï¼minio.log éè¦æä»¬èªå·±æå¨åå»ºã\n\nCPUæ¶æ                         URL\n64-bit Intel/AMD              https://dl.min.io/server/minio/release/linux-amd64/minio\n64-bit ARM                    https://dl.min.io/server/minio/release/linux-arm64/minio\n64-bit PowerPC LE (ppc64le)   https://dl.min.io/server/minio/release/linux-ppc64le/minio\nIBM Z-Series (S390X)          https://dl.min.io/server/minio/release/linux-s390x/minio\n\n\n# å¾®è½¯Windowsç³»ç»\n\nè¦å¨ 64 ä½ Windows ä¸»æºä¸è¿è¡ MinIOï¼è¯·ä»ä»¥ä¸ URL ä¸è½½ MinIO å¯æ§è¡æä»¶ï¼\n\nCPUæ¶æ              URL\n64-bit Intel/AMD   https://dl.minio.io/server/minio/release/windows-amd64/minio.exe\n\nä½¿ç¨ä»¥ä¸å½ä»¤å¨ Windows ä¸»æºä¸è¿è¡ç¬ç«ç MinIO æå¡å¨ãæ¿æ¢ F:\\Data ä¸ºæ¨å¸æ MinIO å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ãæ¨å¿é¡»å°ç»ç«¯æ powershell ç®å½æ´æ¹ä¸ºminio.exeå¯æ§è¡æä»¶çä½ç½®ï¼æå°è¯¥ç®å½çè·¯å¾æ·»å å°ç³»ç»$PATHï¼\n\nPS> Invoke-WebRequest -Uri "https://dl.min.io/server/minio/release/windows-amd64/minio.exe" -OutFile "C:\\minio.exe"\nPS> setx MINIO_ROOT_USER admin\nPS> setx MINIO_ROOT_PASSWORD password\nPS> C:\\minio.exe server F:\\Data --console-address ":9001"\n\n\n\n# é¨ç½²å»ºè®®\n\n\n# åè®¸é²ç«å¢çç«¯å£è®¿é®\n\né»è®¤æåµä¸ï¼MinIO ä½¿ç¨ç«¯å£ 9000 æ¥ä¾¦å¬ä¼ å¥è¿æ¥ãå¦ææ¨çå¹³å°é»è®¤é»æ­¢è¯¥ç«¯å£ï¼æ¨å¯è½éè¦å¯ç¨å¯¹è¯¥ç«¯å£çè®¿é®ã\n\n\n# ufw\n\nå¯¹äºå¯ç¨äº ufw çä¸»æºï¼åºäº Debian çåè¡çï¼ï¼æ¨å¯ä»¥ä½¿ç¨ufwå½ä»¤æ¥åè®¸ç¹å®ç«¯å£çæµéãä½¿ç¨ä»¥ä¸å½ä»¤åè®¸è®¿é®ç«¯å£ 9000\n\nufw allow 9000\n\n\nä¸é¢çå½ä»¤å¯ç¨ææä¼ å¥ç«¯å£çæµéï¼èå´ä» 9000 å° 9010ã\n\nufw allow 9000:9010/tcp\n\n\n\n# firewall-cmd\n\nå¯¹äºå¯ç¨äº firewall-cmd (CentOS) çä¸»æºï¼æ¨å¯ä»¥ä½¿ç¨firewall-cmdå½ä»¤æ¥åè®¸ç¹å®ç«¯å£çæµéãä½¿ç¨ä»¥ä¸å½ä»¤åè®¸è®¿é®ç«¯å£ 9000\n\nfirewall-cmd --get-active-zones\n\n\næ­¤å½ä»¤è·åæ´»å¨åºåãç°å¨ï¼å°ç«¯å£è§ååºç¨äºä¸é¢è¿åçç¸å³åºåãä¾å¦ï¼å¦æåºåæ¯publicï¼è¯·ä½¿ç¨\n\nfirewall-cmd --zone=public --add-port=9000/tcp --permanent\n\n\nè¯·æ³¨æï¼permanentç¡®ä¿è§åå¨é²ç«å¢å¯å¨ãéæ°å¯å¨æéæ°å è½½æ¶æ¯æä¹çãæåéæ°å è½½é²ç«å¢ä»¥ä½¿æ´æ¹çæã\n\nfirewall-cmd --reload\n\n\n\n# iptables\n\nå¯¹äºå¯ç¨äº iptables çä¸»æºï¼RHELãCentOS ç­ï¼ï¼æ¨å¯ä»¥ä½¿ç¨iptableså½ä»¤æ¥å¯ç¨è¿å¥ç¹å®ç«¯å£çæææµéãä½¿ç¨ä»¥ä¸å½ä»¤åè®¸ è®¿é®ç«¯å£ 9000\n\niptables -A INPUT -p tcp --dport 9000 -j ACCEPT\nservice iptables restart\n\n\nä¸é¢çå½ä»¤å¯ç¨ææä¼ å¥ç«¯å£çæµéï¼èå´ä» 9000 å° 9010ã\n\niptables -A INPUT -p tcp --dport 9000:9010 -j ACCEPT\nservice iptables restart\n\n\n\n# å·²ç»å­å¨çæ°æ®\n\nå½å¨ååç£çä¸é¨ç½²Minio server,Minio serveråè®¸å®¢æ·ç«¯è®¿é®æ°æ®ç®å½ä¸å·²ç»å­å¨çæ°æ®ãæ¯å¦ï¼å¦æMinioä½¿ç¨minio server /mnt/dataå¯å¨ï¼é£ä¹ææå·²ç»å¨/mnt/dataç®å½ä¸çæ°æ®é½å¯ä»¥è¢«å®¢æ·ç«¯è®¿é®å°ã\n\nä¸è¿°æè¿°å¯¹ææç½å³åç«¯åæ ·ææã\n\n\n# ä½¿ç¨Minioæµè§å¨è¿è¡éªè¯\n\nå®è£åä½¿ç¨æµè§å¨è®¿é®http://127.0.0.1:9001ï¼å¦æå¯ä»¥è®¿é®ï¼åè¡¨ç¤ºminioå·²ç»å®è£æåã\n\n\n\n\n# ä½¿ç¨Minioå®¢æ·ç«¯ mcè¿è¡éªè¯\n\nmc æä¾äºä¸äºUNIXå¸¸ç¨å½ä»¤çæ¿ä»£åï¼åls, cat, cp, mirror, diffè¿äºã å®æ¯ææä»¶ç³»ç»åäºé©¬éS3äºå­å¨æå¡ã æ´å¤ä¿¡æ¯è¯·åè mcå¿«éå¥é¨ ã',normalizedContent:'# minioå¿«éå¥é¨æå\n\nminio æ¯ä¸ä¸ªåºäºapache license v2.0å¼æºåè®®çå¯¹è±¡å­å¨æå¡ãå®å¼å®¹äºé©¬és3äºå­å¨æå¡æ¥å£ï¼éå¸¸éåäºå­å¨å¤§å®¹ééç»æåçæ°æ®ï¼ä¾å¦å¾çãè§é¢ãæ¥å¿æä»¶ãå¤ä»½æ°æ®åå®¹å¨/èææºéåç­ï¼èä¸ä¸ªå¯¹è±¡æä»¶å¯ä»¥æ¯ä»»æå¤§å°ï¼ä»å kbå°æå¤§5tä¸ç­ã\n\nminioæ¯ä¸ä¸ªéå¸¸è½»éçæå¡,å¯ä»¥å¾ç®åçåå¶ä»åºç¨çç»åï¼ç±»ä¼¼ nodejs, redis æè mysqlã\n\n\n# docker å®¹å¨\n\nä½¿ç¨ä»¥ä¸å½ä»¤å°ç¬ç«ç minio æå¡å¨ä½ä¸ºå®¹å¨è¿è¡ã\n\nç¬ç«ç minio æå¡å¨æéåæ©æå¼ååè¯ä¼°ãæäºåè½ï¼ä¾å¦çæ¬æ§å¶ãå¯¹è±¡éå®åå­å¨æ¡¶å¤å¶ï¼éè¦ä½¿ç¨æ¦é¤ç¼ç åå¸å¼é¨ç½² minioãå¯¹äºæ©å±çå¼ååçäº§ï¼éè¿ç¼åä»£ç å¯ç¨æ¦é¤é¨ç½²minio -å·ä½èè¨ï¼ç¨æå°çæ¯minioæå¡å¨4ä¸ªé©±å¨å¨ãæå³æ´å®æ´çææ¡£ï¼è¯·åéminio æ¦é¤ä»£ç å¿«éå¥é¨æå ã\n\n\n# ç¨³å®ç\n\nè¿è¡ä»¥ä¸å½ä»¤ä»¥ä½¿ç¨ä¸´æ¶æ°æ®å·å° minio çææ°ç¨³å®æ åä½ä¸ºå®¹å¨è¿è¡ï¼\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  minio/minio server /data --console-address ":9001"\n\n\nminio é¨ç½²å¼å§ä½¿ç¨é»è®¤çæ ¹å­æ®minioadmin:minioadminãæ¨å¯ä»¥ä½¿ç¨ minio æ§å¶å°æµè¯é¨ç½²ï¼è¿æ¯ä¸ä¸ªåç½®äº minio æå¡å¨çåµå¥å¼å¯¹è±¡æµè§å¨ãå°ä¸»æºä¸è¿è¡ç web æµè§å¨æå http://127.0.0.1:9001 å¹¶ä½¿ç¨ root å­æ®ç»å½ãæ¨å¯ä»¥ä½¿ç¨æµè§å¨æ¥åå»ºæ¡¶ãä¸ä¼ å¯¹è±¡ä»¥åæµè§ minio æå¡å¨çåå®¹ã\n\næ´å¤dockeré¨ç½²ä¿¡æ¯è¯·è®¿é® è¿é\n\n\n# macos\n\n\n# homebrew\n\nè¿è¡ä»¥ä¸å½ä»¤ä»¥ä½¿ç¨homebrewå®è£ææ°çç¨³å® minio åãæ¿æ¢ /data ä¸ºæ¨å¸æ minio å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ã\n\nbrew install minio/stable/minio\nminio_root_user=admin minio_root_password=password minio server /mnt/data --console-address ":9001"\n\n\næç¤º\n\nå¦æä½ ä¹åä½¿ç¨ brew install minioå®è£è¿minio, å¯ä»¥ç¨ minio/stable/minio å®æ¹ä»åºéæ°å®è£ minioã\n\nbrew uninstall minio\nbrew install minio/stable/minio\n\n\n\n# ä¸è½½äºè¿å¶æä»¶\n\nä½¿ç¨ä»¥ä¸å½ä»¤å¨ macos ä¸ä¸è½½å¹¶è¿è¡ç¬ç«ç minio æå¡å¨ãæ¿æ¢ /data ä¸ºæ¨å¸æ minio å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ã\n\nwget https://dl.min.io/server/minio/release/darwin-amd64/minio\nchmod +x minio\nminio_root_user=admin minio_root_password=password ./minio server /mnt/data --console-address ":9001"\n\n\n\n# gnu/linux\n\nä½¿ç¨ä»¥ä¸å½ä»¤å¨è¿è¡ 64 ä½ intel/amd æ¶æç linux ä¸»æºä¸è¿è¡ç¬ç«ç minio æå¡å¨ã\n\nwget https://dl.min.io/server/minio/release/linux-amd64/minio\nchmod +x minio\nminio_root_user=admin minio_root_password=password ./minio server /mnt/data --console-address ":9001"\n\n\næ¿æ¢ /data ä¸ºæ¨å¸æ minio å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ã\n\nä¸è¡¨ååºäºæ¯æçæ¶æãå°wgeturlæ¿æ¢ä¸º linux ä¸»æºçæ¶æã\n\nè®¾ç½®åå°å¯å¨\n\nnohup /usr/local/bin/minio/minio server  /home/minio/data > /home/minio/data/minio.log 2>&1 &\n\n\nå¶ä¸­ï¼/home/minio/data/minio.log æ¯å¯å¨æ¶æ¥å¿æä»¶çå­æ¾ä½ç½®ï¼å¯ä»¥æ¯ä»»æç®å½ï¼ï¼minio.log éè¦æä»¬èªå·±æå¨åå»ºã\n\ncpuæ¶æ                         url\n64-bit intel/amd              https://dl.min.io/server/minio/release/linux-amd64/minio\n64-bit arm                    https://dl.min.io/server/minio/release/linux-arm64/minio\n64-bit powerpc le (ppc64le)   https://dl.min.io/server/minio/release/linux-ppc64le/minio\nibm z-series (s390x)          https://dl.min.io/server/minio/release/linux-s390x/minio\n\n\n# å¾®è½¯windowsç³»ç»\n\nè¦å¨ 64 ä½ windows ä¸»æºä¸è¿è¡ minioï¼è¯·ä»ä»¥ä¸ url ä¸è½½ minio å¯æ§è¡æä»¶ï¼\n\ncpuæ¶æ              url\n64-bit intel/amd   https://dl.minio.io/server/minio/release/windows-amd64/minio.exe\n\nä½¿ç¨ä»¥ä¸å½ä»¤å¨ windows ä¸»æºä¸è¿è¡ç¬ç«ç minio æå¡å¨ãæ¿æ¢ f:\\data ä¸ºæ¨å¸æ minio å­å¨æ°æ®çé©±å¨å¨æç®å½çè·¯å¾ãæ¨å¿é¡»å°ç»ç«¯æ powershell ç®å½æ´æ¹ä¸ºminio.exeå¯æ§è¡æä»¶çä½ç½®ï¼æå°è¯¥ç®å½çè·¯å¾æ·»å å°ç³»ç»$pathï¼\n\nps> invoke-webrequest -uri "https://dl.min.io/server/minio/release/windows-amd64/minio.exe" -outfile "c:\\minio.exe"\nps> setx minio_root_user admin\nps> setx minio_root_password password\nps> c:\\minio.exe server f:\\data --console-address ":9001"\n\n\n\n# é¨ç½²å»ºè®®\n\n\n# åè®¸é²ç«å¢çç«¯å£è®¿é®\n\né»è®¤æåµä¸ï¼minio ä½¿ç¨ç«¯å£ 9000 æ¥ä¾¦å¬ä¼ å¥è¿æ¥ãå¦ææ¨çå¹³å°é»è®¤é»æ­¢è¯¥ç«¯å£ï¼æ¨å¯è½éè¦å¯ç¨å¯¹è¯¥ç«¯å£çè®¿é®ã\n\n\n# ufw\n\nå¯¹äºå¯ç¨äº ufw çä¸»æºï¼åºäº debian çåè¡çï¼ï¼æ¨å¯ä»¥ä½¿ç¨ufwå½ä»¤æ¥åè®¸ç¹å®ç«¯å£çæµéãä½¿ç¨ä»¥ä¸å½ä»¤åè®¸è®¿é®ç«¯å£ 9000\n\nufw allow 9000\n\n\nä¸é¢çå½ä»¤å¯ç¨ææä¼ å¥ç«¯å£çæµéï¼èå´ä» 9000 å° 9010ã\n\nufw allow 9000:9010/tcp\n\n\n\n# firewall-cmd\n\nå¯¹äºå¯ç¨äº firewall-cmd (centos) çä¸»æºï¼æ¨å¯ä»¥ä½¿ç¨firewall-cmdå½ä»¤æ¥åè®¸ç¹å®ç«¯å£çæµéãä½¿ç¨ä»¥ä¸å½ä»¤åè®¸è®¿é®ç«¯å£ 9000\n\nfirewall-cmd --get-active-zones\n\n\næ­¤å½ä»¤è·åæ´»å¨åºåãç°å¨ï¼å°ç«¯å£è§ååºç¨äºä¸é¢è¿åçç¸å³åºåãä¾å¦ï¼å¦æåºåæ¯publicï¼è¯·ä½¿ç¨\n\nfirewall-cmd --zone=public --add-port=9000/tcp --permanent\n\n\nè¯·æ³¨æï¼permanentç¡®ä¿è§åå¨é²ç«å¢å¯å¨ãéæ°å¯å¨æéæ°å è½½æ¶æ¯æä¹çãæåéæ°å è½½é²ç«å¢ä»¥ä½¿æ´æ¹çæã\n\nfirewall-cmd --reload\n\n\n\n# iptables\n\nå¯¹äºå¯ç¨äº iptables çä¸»æºï¼rhelãcentos ç­ï¼ï¼æ¨å¯ä»¥ä½¿ç¨iptableså½ä»¤æ¥å¯ç¨è¿å¥ç¹å®ç«¯å£çæææµéãä½¿ç¨ä»¥ä¸å½ä»¤åè®¸ è®¿é®ç«¯å£ 9000\n\niptables -a input -p tcp --dport 9000 -j accept\nservice iptables restart\n\n\nä¸é¢çå½ä»¤å¯ç¨ææä¼ å¥ç«¯å£çæµéï¼èå´ä» 9000 å° 9010ã\n\niptables -a input -p tcp --dport 9000:9010 -j accept\nservice iptables restart\n\n\n\n# å·²ç»å­å¨çæ°æ®\n\nå½å¨ååç£çä¸é¨ç½²minio server,minio serveråè®¸å®¢æ·ç«¯è®¿é®æ°æ®ç®å½ä¸å·²ç»å­å¨çæ°æ®ãæ¯å¦ï¼å¦æminioä½¿ç¨minio server /mnt/dataå¯å¨ï¼é£ä¹ææå·²ç»å¨/mnt/dataç®å½ä¸çæ°æ®é½å¯ä»¥è¢«å®¢æ·ç«¯è®¿é®å°ã\n\nä¸è¿°æè¿°å¯¹ææç½å³åç«¯åæ ·ææã\n\n\n# ä½¿ç¨minioæµè§å¨è¿è¡éªè¯\n\nå®è£åä½¿ç¨æµè§å¨è®¿é®http://127.0.0.1:9001ï¼å¦æå¯ä»¥è®¿é®ï¼åè¡¨ç¤ºminioå·²ç»å®è£æåã\n\n\n\n\n# ä½¿ç¨minioå®¢æ·ç«¯ mcè¿è¡éªè¯\n\nmc æä¾äºä¸äºunixå¸¸ç¨å½ä»¤çæ¿ä»£åï¼åls, cat, cp, mirror, diffè¿äºã å®æ¯ææä»¶ç³»ç»åäºé©¬és3äºå­å¨æå¡ã æ´å¤ä¿¡æ¯è¯·åè mcå¿«éå¥é¨ ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Minio Dockerå¿«éå¥é¨",frontmatter:{title:"Minio Dockerå¿«éå¥é¨",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/0cd85f/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/02.Minio%20Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"12.MinIO/01.Minioæå¡å¨/02.Minio Dockerå¿«éå¥é¨.md",key:"v-79bebf43",path:"/pages/0cd85f/",headers:[{level:2,title:"åææ¡ä»¶",slug:"åææ¡ä»¶",normalizedTitle:"åææ¡ä»¶",charIndex:23},{level:2,title:"å¨Dockerä¸­è¿è¡Minioåç¹æ¨¡å¼ã",slug:"å¨dockerä¸­è¿è¡minioåç¹æ¨¡å¼ã",normalizedTitle:"å¨dockerä¸­è¿è¡minioåç¹æ¨¡å¼ã",charIndex:61},{level:2,title:"å¨Dockerä¸­è¿è¡Minioåå¸å¼æ¨¡å¼",slug:"å¨dockerä¸­è¿è¡minioåå¸å¼æ¨¡å¼",normalizedTitle:"å¨dockerä¸­è¿è¡minioåå¸å¼æ¨¡å¼",charIndex:1074},{level:2,title:"Minio Docker Tips",slug:"minio-docker-tips",normalizedTitle:"minio docker tips",charIndex:1290},{level:3,title:"Minioèªå®ä¹AccessåSecretå¯é¥",slug:"minioèªå®ä¹accessåsecretå¯é¥",normalizedTitle:"minioèªå®ä¹accessåsecretå¯é¥",charIndex:1312},{level:3,title:"ä»¥æ®éç¨æ·èº«ä»½è¿è¡ MinIO Docker",slug:"ä»¥æ®éç¨æ·èº«ä»½è¿è¡-minio-docker",normalizedTitle:"ä»¥æ®éç¨æ·èº«ä»½è¿è¡ minio docker",charIndex:1964},{level:3,title:"ä½¿ç¨Docker secretsè¿è¡Minio AccessåSecretå¯é¥èªå®ä¹",slug:"ä½¿ç¨docker-secretsè¿è¡minio-accessåsecretå¯é¥èªå®ä¹",normalizedTitle:"ä½¿ç¨docker secretsè¿è¡minio accessåsecretå¯é¥èªå®ä¹",charIndex:2427},{level:3,title:"è·åå®¹å¨ID",slug:"è·åå®¹å¨id",normalizedTitle:"è·åå®¹å¨id",charIndex:3523},{level:3,title:"å¯å¨ååæ­¢å®¹å¨",slug:"å¯å¨ååæ­¢å®¹å¨",normalizedTitle:"å¯å¨ååæ­¢å®¹å¨",charIndex:3663},{level:3,title:"Minioå®¹å¨æ¥å¿",slug:"minioå®¹å¨æ¥å¿",normalizedTitle:"minioå®¹å¨æ¥å¿",charIndex:3796},{level:3,title:"çæ§MinioDockerå®¹å¨",slug:"çæ§miniodockerå®¹å¨",normalizedTitle:"çæ§miniodockerå®¹å¨",charIndex:3869}],headersStr:"åææ¡ä»¶ å¨Dockerä¸­è¿è¡Minioåç¹æ¨¡å¼ã å¨Dockerä¸­è¿è¡Minioåå¸å¼æ¨¡å¼ Minio Docker Tips Minioèªå®ä¹AccessåSecretå¯é¥ ä»¥æ®éç¨æ·èº«ä»½è¿è¡ MinIO Docker ä½¿ç¨Docker secretsè¿è¡Minio AccessåSecretå¯é¥èªå®ä¹ è·åå®¹å¨ID å¯å¨ååæ­¢å®¹å¨ Minioå®¹å¨æ¥å¿ çæ§MinioDockerå®¹å¨",content:'# Minio Dockerå¿«éå¥é¨\n\n\n# åææ¡ä»¶\n\næ¨çæºå¨å·²ç»å®è£docker. ä» è¿éä¸è½½ç¸å³è½¯ä»¶ã\n\n\n# å¨Dockerä¸­è¿è¡Minioåç¹æ¨¡å¼ã\n\nMinio éè¦ä¸ä¸ªæä¹å·æ¥å­å¨éç½®ååºç¨æ°æ®ãä¸è¿, å¦æåªæ¯ä¸ºäºæµè¯ä¸ä¸, æ¨å¯ä»¥éè¿ç®åå°ä¼ éä¸ä¸ªç®å½ï¼å¨ä¸é¢çç¤ºä¾ä¸­ä¸º/ dataï¼å¯å¨Minioãè¿ä¸ªç®å½ä¼å¨å®¹å¨å¯å¨æ¶å¨å®¹å¨çæä»¶ç³»ç»ä¸­åå»ºï¼ä¸è¿ææçæ°æ®é½ä¼å¨å®¹å¨éåºæ¶ä¸¢å¤±ã\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  -e "MINIO_ROOT_USER=AKIAIOSFODNN7EXAMPLE" \\\n  -e "MINIO_ROOT_PASSWORD=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \\\n  minio/minio server /data --console-address ":9001"\n\n\nè¦åå»ºå·ææ°¸ä¹å­å¨çMinioå®¹å¨ï¼æ¨éè¦å°æ¬å°æä¹ç®å½ä»ä¸»æºæä½ç³»ç»æ å°å°èæéç½®~/.minio å¹¶å¯¼åº/dataç®å½ã ä¸ºæ­¤ï¼è¯·è¿è¡ä»¥ä¸å½ä»¤\n\n# GNU/Linux å macOS\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -v /mnt/data:/data \\\n  -e "MINIO_ROOT_USER=AKIAIOSFODNN7EXAMPLE" \\\n  -e "MINIO_ROOT_PASSWORD=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \\\n  minio/minio server /data --console-address ":9001"\n\n\n\n# Windows\n\n\n\n\n\n\nÂ \n\n\n\n\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -v D:\\data:/data \\\n  -e "MINIO_ROOT_USER=AKIAIOSFODNN7EXAMPLE" \\\n  -e "MINIO_ROOT_PASSWORD=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \\\n  minio/minio server /data --console-address ":9001"\n\n\n\n# å¨Dockerä¸­è¿è¡Minioåå¸å¼æ¨¡å¼\n\nåå¸å¼Minioå¯ä»¥éè¿ Docker Compose æè Swarm modeè¿è¡é¨ç½²ãè¿ä¸¤èä¹é´çä¸»è¦åºå«æ¯Docker Composeåå»ºäºåä¸ªä¸»æºï¼å¤å®¹å¨é¨ç½²ï¼èSwarmæ¨¡å¼åå»ºäºä¸ä¸ªå¤ä¸»æºï¼å¤å®¹å¨é¨ç½²ã\n\nè¿æå³çDocker Composeå¯ä»¥è®©ä½ å¿«éçå¨ä½ çæºå¨ä¸å¿«éä½¿ç¨åå¸å¼Minio-éå¸¸éåå¼åï¼æµè¯ç¯å¢ï¼èSwarmæ¨¡å¼æä¾äºæ´å¥å£®ï¼çäº§çº§å«çé¨ç½²ã\n\n\n# Minio Docker Tips\n\n\n# Minioèªå®ä¹AccessåSecretå¯é¥\n\nè¦è¦çMinioçèªå¨çæçå¯é¥ï¼æ¨å¯ä»¥å°AccessåSecretå¯é¥è®¾ä¸ºç¯å¢åéã Minioåè®¸å¸¸è§å­ç¬¦ä¸²ä½ä¸ºAccessåSecretå¯é¥ã\n\n# GNU/Linux å macOS\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -e "MINIO_ROOT_USER=AKIAIOSFODNN7EXAMPLE" \\\n  -e "MINIO_ROOT_PASSWORD=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \\\n  -v /mnt/data:/data \\\n  minio/minio server /data --console-address ":9001"\n\n\n# Windows\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -e "MINIO_ROOT_USER=AKIAIOSFODNN7EXAMPLE" \\\n  -e "MINIO_ROOT_PASSWORD=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \\\n  -v D:\\data:/data \\\n  minio/minio server /data --console-address ":9001"\n\n\n\n# ä»¥æ®éç¨æ·èº«ä»½è¿è¡ MinIO Docker\n\nDocker æä¾æ ååæºå¶æ¥ä»¥é root ç¨æ·èº«ä»½è¿è¡ Docker å®¹å¨ã\n\n# GNU/Linux å macOS\n\nå¨ Linux å macOS ä¸ï¼æ¨å¯ä»¥ä½¿ç¨--useræ®éç¨æ·æ¥è¿è¡å®¹å¨ã\n\næ³¨æ\n\nç¡®ä¿--userå¨ä½¿ç¨ä¹åå¯¹ ${HOME}/data æåæé --user ã\n\nmkdir -p ${HOME}/data\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --user $(id -u):$(id -g) \\\n  --name minio1 \\\n  -e "MINIO_ROOT_USER=AKIAIOSFODNN7EXAMPLE" \\\n  -e "MINIO_ROOT_PASSWORD=wJalrXUtnFEMIK7MDENGbPxRfiCYEXAMPLEKEY" \\\n  -v ${HOME}/data:/data \\\n  minio/minio server /data\n\n\n\n# ä½¿ç¨Docker secretsè¿è¡Minio AccessåSecretå¯é¥èªå®ä¹\n\nè¦è¦çMinioçèªå¨çæçå¯é¥,ä½ å¯ä»¥æsecretåaccessç§é¥åå»ºæDocker secrets. Minioåè®¸å¸¸è§å­ç¬¦ä¸²ä½ä¸ºAccessåSecretå¯é¥ã\n\necho "AKIAIOSFODNN7EXAMPLE" | docker secret create access_key -\necho "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" | docker secret create secret_key -\n\n\nä½¿ç¨docker serviceåå»ºMinioæå¡ï¼å¹¶è¯»åDocker secretsã\n\ndocker service create --name="minio-service" --secret="access_key" --secret="secret_key" minio/minio server /data\n\n\næ´å¤ docker serviceä¿¡æ¯ï¼è¯·è®¿é® è¿é\n\n# MinIO èªå®ä¹è®¿é®åå¯é¥æä»¶\n\nè¦ä½¿ç¨å¶ä»ç secret åå­è¿è¡æ¨çæå¡ï¼æç§ä¸é¢çè¯´ææ¿æ¢access_keyåsecret_keyä¸ºæ¨çèªå®ä¹åç§°ï¼ä¾å¦my_secret_keyï¼my_custom_keyï¼ã\n\ndocker service create --name="minio-service" \\\n  --secret="my_access_key" \\\n  --secret="my_secret_key" \\\n  --env="MINIO_ROOT_USER_FILE=my_access_key" \\\n  --env="MINIO_ROOT_PASSWORD_FILE=my_secret_key" \\\n  minio/minio server /data\n\n\nMINIO_ROOT_USER_FILE å MINIO_ROOT_PASSWORD_FILEè¿æ¯æèªå®ä¹ç»å¯¹è·¯å¾ï¼ä»¥é² Docker secrets å®è£å°èªå®ä¹ä½ç½®æä½¿ç¨å¶ä»å·¥å·å° secrets å®è£å°å®¹å¨ä¸­ãä¾å¦ï¼HashiCorp Vault å°æºå¯æ³¨å¥/vault/secrets. ä½¿ç¨ä¸é¢çèªå®ä¹åç§°ï¼å°ç¯å¢åéè®¾ç½®ä¸º\n\nMINIO_ROOT_USER_FILE=/vault/secrets/my_access_key\nMINIO_ROOT_PASSWORD_FILE=/vault/secrets/my_secret_key\n\n\n\n# è·åå®¹å¨ID\n\nå¨å®¹å¨ä¸­ä½¿ç¨Dockerå½ä»¤, ä½ éè¦ç¥éè¿ä¸ªå®¹å¨ç å®¹å¨ID ã ä¸ºäºè·å Container ID, è¿è¡\n\ndocker ps -a\n\n\n-a flag ç¡®ä¿ä½ è·åææçå®¹å¨(åå»ºçï¼æ­£å¨è¿è¡çï¼éåºç)ï¼ç¶åä»è¾åºä¸­è¯å«Container IDã\n\n\n# å¯å¨ååæ­¢å®¹å¨\n\nå¯å¨å®¹å¨,ä½ å¯ä»¥ä½¿ç¨ docker start å½ä»¤ã\n\ndocker start <container_id>\n\n\nåæ­¢ä¸ä¸æ­£å¨è¿è¡çå®¹å¨, ä½¿ç¨ docker stop å½ä»¤ã\n\ndocker stop <container_id>\n\n\n\n# Minioå®¹å¨æ¥å¿\n\nè·åMinioæ¥å¿ï¼ä½¿ç¨ docker logs å½ä»¤ã\n\ndocker logs <container_id>\n\n\n\n# çæ§MinioDockerå®¹å¨\n\nçæ§Minioå®¹å¨ä½¿ç¨çèµæº,ä½¿ç¨ docker stats å½ä»¤.\n\ndocker stats <container_id>\n',normalizedContent:'# minio dockerå¿«éå¥é¨\n\n\n# åææ¡ä»¶\n\næ¨çæºå¨å·²ç»å®è£docker. ä» è¿éä¸è½½ç¸å³è½¯ä»¶ã\n\n\n# å¨dockerä¸­è¿è¡minioåç¹æ¨¡å¼ã\n\nminio éè¦ä¸ä¸ªæä¹å·æ¥å­å¨éç½®ååºç¨æ°æ®ãä¸è¿, å¦æåªæ¯ä¸ºäºæµè¯ä¸ä¸, æ¨å¯ä»¥éè¿ç®åå°ä¼ éä¸ä¸ªç®å½ï¼å¨ä¸é¢çç¤ºä¾ä¸­ä¸º/ dataï¼å¯å¨minioãè¿ä¸ªç®å½ä¼å¨å®¹å¨å¯å¨æ¶å¨å®¹å¨çæä»¶ç³»ç»ä¸­åå»ºï¼ä¸è¿ææçæ°æ®é½ä¼å¨å®¹å¨éåºæ¶ä¸¢å¤±ã\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  -e "minio_root_user=akiaiosfodnn7example" \\\n  -e "minio_root_password=wjalrxutnfemi/k7mdeng/bpxrficyexamplekey" \\\n  minio/minio server /data --console-address ":9001"\n\n\nè¦åå»ºå·ææ°¸ä¹å­å¨çminioå®¹å¨ï¼æ¨éè¦å°æ¬å°æä¹ç®å½ä»ä¸»æºæä½ç³»ç»æ å°å°èæéç½®~/.minio å¹¶å¯¼åº/dataç®å½ã ä¸ºæ­¤ï¼è¯·è¿è¡ä»¥ä¸å½ä»¤\n\n# gnu/linux å macos\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -v /mnt/data:/data \\\n  -e "minio_root_user=akiaiosfodnn7example" \\\n  -e "minio_root_password=wjalrxutnfemi/k7mdeng/bpxrficyexamplekey" \\\n  minio/minio server /data --console-address ":9001"\n\n\n\n# windows\n\n\n\n\n\n\nÂ \n\n\n\n\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -v d:\\data:/data \\\n  -e "minio_root_user=akiaiosfodnn7example" \\\n  -e "minio_root_password=wjalrxutnfemi/k7mdeng/bpxrficyexamplekey" \\\n  minio/minio server /data --console-address ":9001"\n\n\n\n# å¨dockerä¸­è¿è¡minioåå¸å¼æ¨¡å¼\n\nåå¸å¼minioå¯ä»¥éè¿ docker compose æè swarm modeè¿è¡é¨ç½²ãè¿ä¸¤èä¹é´çä¸»è¦åºå«æ¯docker composeåå»ºäºåä¸ªä¸»æºï¼å¤å®¹å¨é¨ç½²ï¼èswarmæ¨¡å¼åå»ºäºä¸ä¸ªå¤ä¸»æºï¼å¤å®¹å¨é¨ç½²ã\n\nè¿æå³çdocker composeå¯ä»¥è®©ä½ å¿«éçå¨ä½ çæºå¨ä¸å¿«éä½¿ç¨åå¸å¼minio-éå¸¸éåå¼åï¼æµè¯ç¯å¢ï¼èswarmæ¨¡å¼æä¾äºæ´å¥å£®ï¼çäº§çº§å«çé¨ç½²ã\n\n\n# minio docker tips\n\n\n# minioèªå®ä¹accessåsecretå¯é¥\n\nè¦è¦çminioçèªå¨çæçå¯é¥ï¼æ¨å¯ä»¥å°accessåsecretå¯é¥è®¾ä¸ºç¯å¢åéã minioåè®¸å¸¸è§å­ç¬¦ä¸²ä½ä¸ºaccessåsecretå¯é¥ã\n\n# gnu/linux å macos\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -e "minio_root_user=akiaiosfodnn7example" \\\n  -e "minio_root_password=wjalrxutnfemi/k7mdeng/bpxrficyexamplekey" \\\n  -v /mnt/data:/data \\\n  minio/minio server /data --console-address ":9001"\n\n\n# windows\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio1 \\\n  -e "minio_root_user=akiaiosfodnn7example" \\\n  -e "minio_root_password=wjalrxutnfemi/k7mdeng/bpxrficyexamplekey" \\\n  -v d:\\data:/data \\\n  minio/minio server /data --console-address ":9001"\n\n\n\n# ä»¥æ®éç¨æ·èº«ä»½è¿è¡ minio docker\n\ndocker æä¾æ ååæºå¶æ¥ä»¥é root ç¨æ·èº«ä»½è¿è¡ docker å®¹å¨ã\n\n# gnu/linux å macos\n\nå¨ linux å macos ä¸ï¼æ¨å¯ä»¥ä½¿ç¨--useræ®éç¨æ·æ¥è¿è¡å®¹å¨ã\n\næ³¨æ\n\nç¡®ä¿--userå¨ä½¿ç¨ä¹åå¯¹ ${home}/data æåæé --user ã\n\nmkdir -p ${home}/data\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --user $(id -u):$(id -g) \\\n  --name minio1 \\\n  -e "minio_root_user=akiaiosfodnn7example" \\\n  -e "minio_root_password=wjalrxutnfemik7mdengbpxrficyexamplekey" \\\n  -v ${home}/data:/data \\\n  minio/minio server /data\n\n\n\n# ä½¿ç¨docker secretsè¿è¡minio accessåsecretå¯é¥èªå®ä¹\n\nè¦è¦çminioçèªå¨çæçå¯é¥,ä½ å¯ä»¥æsecretåaccessç§é¥åå»ºædocker secrets. minioåè®¸å¸¸è§å­ç¬¦ä¸²ä½ä¸ºaccessåsecretå¯é¥ã\n\necho "akiaiosfodnn7example" | docker secret create access_key -\necho "wjalrxutnfemi/k7mdeng/bpxrficyexamplekey" | docker secret create secret_key -\n\n\nä½¿ç¨docker serviceåå»ºminioæå¡ï¼å¹¶è¯»ådocker secretsã\n\ndocker service create --name="minio-service" --secret="access_key" --secret="secret_key" minio/minio server /data\n\n\næ´å¤ docker serviceä¿¡æ¯ï¼è¯·è®¿é® è¿é\n\n# minio èªå®ä¹è®¿é®åå¯é¥æä»¶\n\nè¦ä½¿ç¨å¶ä»ç secret åå­è¿è¡æ¨çæå¡ï¼æç§ä¸é¢çè¯´ææ¿æ¢access_keyåsecret_keyä¸ºæ¨çèªå®ä¹åç§°ï¼ä¾å¦my_secret_keyï¼my_custom_keyï¼ã\n\ndocker service create --name="minio-service" \\\n  --secret="my_access_key" \\\n  --secret="my_secret_key" \\\n  --env="minio_root_user_file=my_access_key" \\\n  --env="minio_root_password_file=my_secret_key" \\\n  minio/minio server /data\n\n\nminio_root_user_file å minio_root_password_fileè¿æ¯æèªå®ä¹ç»å¯¹è·¯å¾ï¼ä»¥é² docker secrets å®è£å°èªå®ä¹ä½ç½®æä½¿ç¨å¶ä»å·¥å·å° secrets å®è£å°å®¹å¨ä¸­ãä¾å¦ï¼hashicorp vault å°æºå¯æ³¨å¥/vault/secrets. ä½¿ç¨ä¸é¢çèªå®ä¹åç§°ï¼å°ç¯å¢åéè®¾ç½®ä¸º\n\nminio_root_user_file=/vault/secrets/my_access_key\nminio_root_password_file=/vault/secrets/my_secret_key\n\n\n\n# è·åå®¹å¨id\n\nå¨å®¹å¨ä¸­ä½¿ç¨dockerå½ä»¤, ä½ éè¦ç¥éè¿ä¸ªå®¹å¨ç å®¹å¨id ã ä¸ºäºè·å container id, è¿è¡\n\ndocker ps -a\n\n\n-a flag ç¡®ä¿ä½ è·åææçå®¹å¨(åå»ºçï¼æ­£å¨è¿è¡çï¼éåºç)ï¼ç¶åä»è¾åºä¸­è¯å«container idã\n\n\n# å¯å¨ååæ­¢å®¹å¨\n\nå¯å¨å®¹å¨,ä½ å¯ä»¥ä½¿ç¨ docker start å½ä»¤ã\n\ndocker start <container_id>\n\n\nåæ­¢ä¸ä¸æ­£å¨è¿è¡çå®¹å¨, ä½¿ç¨ docker stop å½ä»¤ã\n\ndocker stop <container_id>\n\n\n\n# minioå®¹å¨æ¥å¿\n\nè·åminioæ¥å¿ï¼ä½¿ç¨ docker logs å½ä»¤ã\n\ndocker logs <container_id>\n\n\n\n# çæ§miniodockerå®¹å¨\n\nçæ§minioå®¹å¨ä½¿ç¨çèµæº,ä½¿ç¨ docker stats å½ä»¤.\n\ndocker stats <container_id>\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Minioçº å ç å¿«éå¥é¨",frontmatter:{title:"Minioçº å ç å¿«éå¥é¨",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/6bd2f8/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/03.Minio%E7%BA%A0%E5%88%A0%E7%A0%81%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"12.MinIO/01.Minioæå¡å¨/03.Minioçº å ç å¿«éå¥é¨.md",key:"v-bf7747fa",path:"/pages/6bd2f8/",headers:[{level:2,title:"ä»ä¹æ¯çº å ç erasure code?",slug:"ä»ä¹æ¯çº å ç erasure-code",normalizedTitle:"ä»ä¹æ¯çº å ç erasure code?",charIndex:103},{level:2,title:"ä¸ºä»ä¹çº å ç æç¨?",slug:"ä¸ºä»ä¹çº å ç æç¨",normalizedTitle:"ä¸ºä»ä¹çº å ç æç¨?",charIndex:304},{level:2,title:"ä»ä¹æ¯ä½è¡°åbit rotä¿æ¤?",slug:"ä»ä¹æ¯ä½è¡°åbit-rotä¿æ¤",normalizedTitle:"ä»ä¹æ¯ä½è¡°åbit rotä¿æ¤?",charIndex:524},{level:2,title:"é©±å¨å¨å¦ä½ç¨äºæ¦é¤ä»£ç ï¼",slug:"é©±å¨å¨å¦ä½ç¨äºæ¦é¤ä»£ç ",normalizedTitle:"é©±å¨å¨å¦ä½ç¨äºæ¦é¤ä»£ç ï¼",charIndex:721},{level:2,title:"Minioçº å ç å¿«éå¥é¨",slug:"minioçº å ç å¿«éå¥é¨-2",normalizedTitle:"minioçº å ç å¿«éå¥é¨",charIndex:2},{level:3,title:"1.  åå³æ¡ä»¶",slug:"_1-åå³æ¡ä»¶",normalizedTitle:"1.  åå³æ¡ä»¶",charIndex:null},{level:3,title:"2. ä»¥çº å ç æ¨¡å¼è¿è¡Minio",slug:"_2-ä»¥çº å ç æ¨¡å¼è¿è¡minio",normalizedTitle:"2. ä»¥çº å ç æ¨¡å¼è¿è¡minio",charIndex:1003},{level:3,title:"3. éªè¯æ¯å¦è®¾ç½®æå",slug:"_3-éªè¯æ¯å¦è®¾ç½®æå",normalizedTitle:"3. éªè¯æ¯å¦è®¾ç½®æå",charIndex:1530}],headersStr:"ä»ä¹æ¯çº å ç erasure code? ä¸ºä»ä¹çº å ç æç¨? ä»ä¹æ¯ä½è¡°åbit rotä¿æ¤? é©±å¨å¨å¦ä½ç¨äºæ¦é¤ä»£ç ï¼ Minioçº å ç å¿«éå¥é¨ 1.  åå³æ¡ä»¶ 2. ä»¥çº å ç æ¨¡å¼è¿è¡Minio 3. éªè¯æ¯å¦è®¾ç½®æå",content:'# Minioçº å ç å¿«éå¥é¨\n\nMinioä½¿ç¨çº å ç erasure codeåæ ¡éªåchecksumæ¥ä¿æ¤æ°æ®ååç¡¬ä»¶æéåæ å£°æ°æ®æåã å³ä¾¿æ¨ä¸¢å¤±ä¸åæ°éï¼N/2ï¼çç¡¬çï¼æ¨ä»ç¶å¯ä»¥æ¢å¤æ°æ®ã\n\n\n# ä»ä¹æ¯çº å ç erasure code?\n\nçº å ç æ¯ä¸ç§æ¢å¤ä¸¢å¤±åæåæ°æ®çæ°å­¦ç®æ³ï¼ Minioéç¨Reed-Solomon codeå°å¯¹è±¡æåæN/2æ°æ®åN/2 å¥å¶æ ¡éªåã è¿å°±æå³çå¦ææ¯12åçï¼ä¸ä¸ªå¯¹è±¡ä¼è¢«åæ6ä¸ªæ°æ®åã6ä¸ªå¥å¶æ ¡éªåï¼ä½ å¯ä»¥ä¸¢å¤±ä»»æ6åçï¼ä¸ç®¡å¶æ¯å­æ¾çæ°æ®åè¿æ¯å¥å¶æ ¡éªåï¼ï¼ä½ ä»å¯ä»¥ä»å©ä¸ççä¸­çæ°æ®è¿è¡æ¢å¤ï¼æ¯ä¸æ¯å¾NBï¼æå´è¶£çåå­¦è¯·ç¿»å¢googleã\n\n\n# ä¸ºä»ä¹çº å ç æç¨?\n\nçº å ç çå·¥ä½åçåRAIDæèå¤å¶ä¸åï¼åRAID6å¯ä»¥å¨æå¤±ä¸¤åççæåµä¸ä¸ä¸¢æ°æ®ï¼èMinioçº å ç å¯ä»¥å¨ä¸¢å¤±ä¸åçççæåµä¸ï¼ä»å¯ä»¥ä¿è¯æ°æ®å®å¨ã èä¸Minioçº å ç æ¯ä½ç¨å¨å¯¹è±¡çº§å«ï¼å¯ä»¥ä¸æ¬¡æ¢å¤ä¸ä¸ªå¯¹è±¡ï¼èRAIDæ¯ä½ç¨å¨å·çº§å«ï¼æ°æ®æ¢å¤æ¶é´å¾é¿ã Minioå¯¹æ¯ä¸ªå¯¹è±¡åç¬ç¼ç ï¼å­å¨æå¡ä¸ç»é¨ç½²ï¼éå¸¸æåµä¸æ¯ä¸éè¦æ´æ¢ç¡¬çæèä¿®å¤ãMinioçº å ç çè®¾è®¡ç®æ æ¯ä¸ºäºæ§è½åå°½å¯è½çä½¿ç¨ç¡¬ä»¶å éã\n\n\n\n\n# ä»ä¹æ¯ä½è¡°åbit rotä¿æ¤?\n\nä½è¡°ååè¢«ç§°ä¸ºæ°æ®èåData Rotãæ å£°æ°æ®æåSilent Data Corruption,æ¯ç®åç¡¬çæ°æ®çä¸ç§ä¸¥éæ°æ®ä¸¢å¤±é®é¢ãç¡¬çä¸çæ°æ®å¯è½ä¼ç¥ä¸ç¥é¬¼ä¸è§å°±æåäºï¼ä¹æ²¡æä»ä¹éè¯¯æ¥å¿ãæ­£æè°ææªæèº²ï¼æç®­é¾é²ï¼è¿ç§èå°éç¯çéæ¯ç¡¬çç´æ¥ååå®äºè¿å±é©ã ä¸è¿ä¸ç¨æï¼Minioçº å ç éç¨äºé«éBLAKE2 åºäºåå¸çæ ¡éªåæ¥é²èä½è¡°åã\n\n\n# é©±å¨å¨å¦ä½ç¨äºæ¦é¤ä»£ç ï¼\n\nMinIO å°æ¨æä¾çé©±å¨å¨åæ4 å° 16 ä¸ªé©±å¨å¨çæ¦é¤ç¼ç éãå æ­¤ï¼æ¨æä¾çé©±å¨å¨æ°éå¿é¡»æ¯è¿äºæ°å­ä¹ä¸çåæ°ãæ¯ä¸ªå¯¹è±¡é½è¢«åå¥ä¸ä¸ªåä¸ççº å ç éã\n\nMinio ä½¿ç¨æå¤§å¯è½ç EC éå¤§å°ï¼è¯¥å¤§å°åä¸ºç»å®çé©±å¨å¨æ°éãä¾å¦ï¼18ä¸ªé©±å¨å¨éç½®ä¸º2ç»9ä¸ªé©±å¨å¨ï¼24ä¸ªé©±å¨å¨éç½®ä¸º2ç»12ä¸ªé©±å¨å¨ãè¿éç¨äºå° MinIO ä½ä¸ºç¬ç«çº å ç é¨ç½²è¿è¡çåºæ¯ãç¶èï¼å¨åå¸å¼è®¾ç½®ä¸­ï¼éæ©åºäºèç¹ï¼äº²åæ§ï¼çæ¦é¤æ¡å¸¦å¤§å°ã\n\n\n# Minioçº å ç å¿«éå¥é¨\n\n\n# 1. åå³æ¡ä»¶\n\nå®è£ MinIO - MinIO å¿«éå¥é¨æå\n\n\n# 2. ä»¥çº å ç æ¨¡å¼è¿è¡Minio\n\nç¤ºä¾: ä½¿ç¨Minioï¼å¨12ä¸ªçä¸­å¯å¨Minioæå¡ã\n\nMINIO_ROOT_USER=admin MINIO_ROOT_PASSWORD=password ./minio server /mnt/data{1...12} --console-address ":9001"\n\n\nç¤ºä¾: ä½¿ç¨Minio Dockeréåï¼å¨8åçä¸­å¯å¨Minioæå¡ã\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio \\\n  -v /mnt/data1:/data1 \\\n  -v /mnt/data2:/data2 \\\n  -v /mnt/data3:/data3 \\\n  -v /mnt/data4:/data4 \\\n  -v /mnt/data5:/data5 \\\n  -v /mnt/data6:/data6 \\\n  -v /mnt/data7:/data7 \\\n  -v /mnt/data8:/data8 \\\n  minio/minio server /data{1...8} --console-address ":9001"\n\n\n\n# 3. éªè¯æ¯å¦è®¾ç½®æå\n\nä½ å¯ä»¥éæææç¡¬çï¼çMinioæ¯å¦å¯ä»¥æ­£å¸¸è¯»åã\n\n> åæ: https://docs.min.io/docs/minio-erasure-code-quickstart-guide.html',normalizedContent:'# minioçº å ç å¿«éå¥é¨\n\nminioä½¿ç¨çº å ç erasure codeåæ ¡éªåchecksumæ¥ä¿æ¤æ°æ®ååç¡¬ä»¶æéåæ å£°æ°æ®æåã å³ä¾¿æ¨ä¸¢å¤±ä¸åæ°éï¼n/2ï¼çç¡¬çï¼æ¨ä»ç¶å¯ä»¥æ¢å¤æ°æ®ã\n\n\n# ä»ä¹æ¯çº å ç erasure code?\n\nçº å ç æ¯ä¸ç§æ¢å¤ä¸¢å¤±åæåæ°æ®çæ°å­¦ç®æ³ï¼ minioéç¨reed-solomon codeå°å¯¹è±¡æåæn/2æ°æ®ån/2 å¥å¶æ ¡éªåã è¿å°±æå³çå¦ææ¯12åçï¼ä¸ä¸ªå¯¹è±¡ä¼è¢«åæ6ä¸ªæ°æ®åã6ä¸ªå¥å¶æ ¡éªåï¼ä½ å¯ä»¥ä¸¢å¤±ä»»æ6åçï¼ä¸ç®¡å¶æ¯å­æ¾çæ°æ®åè¿æ¯å¥å¶æ ¡éªåï¼ï¼ä½ ä»å¯ä»¥ä»å©ä¸ççä¸­çæ°æ®è¿è¡æ¢å¤ï¼æ¯ä¸æ¯å¾nbï¼æå´è¶£çåå­¦è¯·ç¿»å¢googleã\n\n\n# ä¸ºä»ä¹çº å ç æç¨?\n\nçº å ç çå·¥ä½åçåraidæèå¤å¶ä¸åï¼åraid6å¯ä»¥å¨æå¤±ä¸¤åççæåµä¸ä¸ä¸¢æ°æ®ï¼èminioçº å ç å¯ä»¥å¨ä¸¢å¤±ä¸åçççæåµä¸ï¼ä»å¯ä»¥ä¿è¯æ°æ®å®å¨ã èä¸minioçº å ç æ¯ä½ç¨å¨å¯¹è±¡çº§å«ï¼å¯ä»¥ä¸æ¬¡æ¢å¤ä¸ä¸ªå¯¹è±¡ï¼èraidæ¯ä½ç¨å¨å·çº§å«ï¼æ°æ®æ¢å¤æ¶é´å¾é¿ã minioå¯¹æ¯ä¸ªå¯¹è±¡åç¬ç¼ç ï¼å­å¨æå¡ä¸ç»é¨ç½²ï¼éå¸¸æåµä¸æ¯ä¸éè¦æ´æ¢ç¡¬çæèä¿®å¤ãminioçº å ç çè®¾è®¡ç®æ æ¯ä¸ºäºæ§è½åå°½å¯è½çä½¿ç¨ç¡¬ä»¶å éã\n\n\n\n\n# ä»ä¹æ¯ä½è¡°åbit rotä¿æ¤?\n\nä½è¡°ååè¢«ç§°ä¸ºæ°æ®èådata rotãæ å£°æ°æ®æåsilent data corruption,æ¯ç®åç¡¬çæ°æ®çä¸ç§ä¸¥éæ°æ®ä¸¢å¤±é®é¢ãç¡¬çä¸çæ°æ®å¯è½ä¼ç¥ä¸ç¥é¬¼ä¸è§å°±æåäºï¼ä¹æ²¡æä»ä¹éè¯¯æ¥å¿ãæ­£æè°ææªæèº²ï¼æç®­é¾é²ï¼è¿ç§èå°éç¯çéæ¯ç¡¬çç´æ¥ååå®äºè¿å±é©ã ä¸è¿ä¸ç¨æï¼minioçº å ç éç¨äºé«éblake2 åºäºåå¸çæ ¡éªåæ¥é²èä½è¡°åã\n\n\n# é©±å¨å¨å¦ä½ç¨äºæ¦é¤ä»£ç ï¼\n\nminio å°æ¨æä¾çé©±å¨å¨åæ4 å° 16 ä¸ªé©±å¨å¨çæ¦é¤ç¼ç éãå æ­¤ï¼æ¨æä¾çé©±å¨å¨æ°éå¿é¡»æ¯è¿äºæ°å­ä¹ä¸çåæ°ãæ¯ä¸ªå¯¹è±¡é½è¢«åå¥ä¸ä¸ªåä¸ççº å ç éã\n\nminio ä½¿ç¨æå¤§å¯è½ç ec éå¤§å°ï¼è¯¥å¤§å°åä¸ºç»å®çé©±å¨å¨æ°éãä¾å¦ï¼18ä¸ªé©±å¨å¨éç½®ä¸º2ç»9ä¸ªé©±å¨å¨ï¼24ä¸ªé©±å¨å¨éç½®ä¸º2ç»12ä¸ªé©±å¨å¨ãè¿éç¨äºå° minio ä½ä¸ºç¬ç«çº å ç é¨ç½²è¿è¡çåºæ¯ãç¶èï¼å¨åå¸å¼è®¾ç½®ä¸­ï¼éæ©åºäºèç¹ï¼äº²åæ§ï¼çæ¦é¤æ¡å¸¦å¤§å°ã\n\n\n# minioçº å ç å¿«éå¥é¨\n\n\n# 1. åå³æ¡ä»¶\n\nå®è£ minio - minio å¿«éå¥é¨æå\n\n\n# 2. ä»¥çº å ç æ¨¡å¼è¿è¡minio\n\nç¤ºä¾: ä½¿ç¨minioï¼å¨12ä¸ªçä¸­å¯å¨minioæå¡ã\n\nminio_root_user=admin minio_root_password=password ./minio server /mnt/data{1...12} --console-address ":9001"\n\n\nç¤ºä¾: ä½¿ç¨minio dockeréåï¼å¨8åçä¸­å¯å¨minioæå¡ã\n\ndocker run \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  --name minio \\\n  -v /mnt/data1:/data1 \\\n  -v /mnt/data2:/data2 \\\n  -v /mnt/data3:/data3 \\\n  -v /mnt/data4:/data4 \\\n  -v /mnt/data5:/data5 \\\n  -v /mnt/data6:/data6 \\\n  -v /mnt/data7:/data7 \\\n  -v /mnt/data8:/data8 \\\n  minio/minio server /data{1...8} --console-address ":9001"\n\n\n\n# 3. éªè¯æ¯å¦è®¾ç½®æå\n\nä½ å¯ä»¥éæææç¡¬çï¼çminioæ¯å¦å¯ä»¥æ­£å¸¸è¯»åã\n\n> åæ: https://docs.min.io/docs/minio-erasure-code-quickstart-guide.html',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"åå¸å¼Minioå¿«éå¥é¨",frontmatter:{title:"åå¸å¼Minioå¿«éå¥é¨",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/8153b1/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/04.%E5%88%86%E5%B8%83%E5%BC%8FMinio%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"12.MinIO/01.Minioæå¡å¨/04.åå¸å¼Minioå¿«éå¥é¨.md",key:"v-2a4a0bb7",path:"/pages/8153b1/",headers:[{level:2,title:"åå¸å¼Minioæä»ä¹å¥½å¤?",slug:"åå¸å¼minioæä»ä¹å¥½å¤",normalizedTitle:"åå¸å¼minioæä»ä¹å¥½å¤?",charIndex:90},{level:3,title:"æ°æ®ä¿æ¤",slug:"æ°æ®ä¿æ¤",normalizedTitle:"æ°æ®ä¿æ¤",charIndex:190},{level:3,title:"é«å¯ç¨æ§",slug:"é«å¯ç¨æ§",normalizedTitle:"é«å¯ç¨æ§",charIndex:404},{level:3,title:"ä¸è´æ§ä¿è¯",slug:"ä¸è´æ§ä¿è¯",normalizedTitle:"ä¸è´æ§ä¿è¯",charIndex:667},{level:2,title:"1. åææ¡ä»¶",slug:"_1-åææ¡ä»¶",normalizedTitle:"1. åææ¡ä»¶",charIndex:966},{level:2,title:"2. è¿è¡åå¸å¼Minio",slug:"_2-è¿è¡åå¸å¼minio",normalizedTitle:"2. è¿è¡åå¸å¼minio",charIndex:1032},{level:2,title:"3. éªè¯",slug:"_3-éªè¯",normalizedTitle:"3. éªè¯",charIndex:3070}],headersStr:"åå¸å¼Minioæä»ä¹å¥½å¤? æ°æ®ä¿æ¤ é«å¯ç¨æ§ ä¸è´æ§ä¿è¯ 1. åææ¡ä»¶ 2. è¿è¡åå¸å¼Minio 3. éªè¯",content:'# åå¸å¼Minioå¿«éå¥é¨\n\nåå¸å¼Minioå¯ä»¥è®©ä½ å°å¤åç¡¬çï¼çè³å¨ä¸åçæºå¨ä¸ï¼ç»æä¸ä¸ªå¯¹è±¡å­å¨æå¡ãç±äºç¡¬çåå¸å¨ä¸åçèç¹ä¸ï¼åå¸å¼Minioé¿åäºåç¹æéã\n\n\n# åå¸å¼Minioæä»ä¹å¥½å¤?\n\nå¨å¤§æ°æ®é¢åï¼éå¸¸çè®¾è®¡çå¿µé½æ¯æ ä¸­å¿ååå¸å¼ãMinioåå¸å¼æ¨¡å¼å¯ä»¥å¸®å©ä½ æ­å»ºä¸ä¸ªé«å¯ç¨çå¯¹è±¡å­å¨æå¡ï¼ä½ å¯ä»¥ä½¿ç¨è¿äºå­å¨è®¾å¤ï¼èä¸ç¨èèå¶çå®ç©çä½ç½®ã\n\n\n# æ°æ®ä¿æ¤\n\nåå¸å¼ MinIOä½¿ç¨erasure codeæä¾éå¯¹å¤ä¸ªèç¹/é©±å¨å¨æéåbit rotä¿æ¤ãç±äºåå¸å¼ MinIO æéçæå°ç£çä¸º 4ï¼ä¸æ¦é¤ç¼ç æéçæå°ç£çç¸åï¼ï¼å æ­¤å¨æ¨å¯å¨åå¸å¼ MinIO æ¶ï¼æ¦é¤ä»£ç ä¼èªå¨å¯å¨ã\n\nå¦æä¸ä¸ªæå¤ä¸ªç£çå¨ PutObject æ NewMultipartUpload æä½å¼å§æ¶å¤äºè±æºç¶æï¼è¯¥å¯¹è±¡å°èªå¨æ·»å é¢å¤çæ°æ®ä¿æ¤ä½ï¼ä»¥ä¸ºè¿äºå¯¹è±¡æä¾é¢å¤çå®å¨æ§ã\n\n\n# é«å¯ç¨æ§\n\nå¦ææç®¡ç£ççæå¡å¨è±æºï¼ç¬ç«ç MinIO æå¡å¨å°±ä¼åæºãç¸æ¯ä¹ä¸ï¼åªè¦æm/2 ä¸ªæå¡å¨æm*n/2 ä¸ªææ´å¤ç£çå¨çº¿ï¼å·æm ä¸ªæå¡å¨ån ä¸ªç£ççåå¸å¼ MinIO è®¾ç½®å°ä½¿æ¨çæ°æ®å®å¨ã\n\nä¾å¦ï¼æ¯ä¸ªèç¹æ 200 ä¸ªç£çç 16 å°æå¡å¨åå¸å¼è®¾ç½®å°ç»§ç»­æä¾æä»¶ï¼é»è®¤éç½®ä¸æå¤ 4 ä¸ªæå¡å¨å¯ä»¥ç¦»çº¿ï¼å³å¤§çº¦ 800 ä¸ªç£çå³é­ MinIO å°ç»§ç»­è¯»åååå¥å¯¹è±¡ã\n\nè¯·åèé»è®¤å¼çæ´å¤çè§£å°ºå¯¸æåéæ©åå³äºä½ å é¤çæ¡å¸¦å¤§å°å¨è¿éãå¯ä»¥ä½¿ç¨storage classes.æ´æ¹å¥å¶æ ¡éªè®¾ç½®ã\n\n\n# ä¸è´æ§ä¿è¯\n\nå¯¹äºåå¸å¼åç¬ç«æ¨¡å¼ä¸çææ I/O æä½ï¼MinIO éµå¾ªä¸¥æ ¼çåè¯»ååååååè¡¨ä¸è´æ§æ¨¡åãä»å½æ¨ä½¿ç¨ç£çæä»¶ç³»ç»ï¼ä¾å¦ xfsãext4 æ zfs ç­ï¼è¿è¡åå¸å¼è®¾ç½®æ¶ï¼æè½ä¿è¯æ­¤ä¸è´æ§æ¨¡åã\n\nå¦æ MinIO åå¸å¼è®¾ç½®å¨ä¸é¢ä½¿ç¨ NFS å·ï¼åä¸è½ä¿è¯ MinIO å°æä¾è¿äºä¸è´æ§ä¿è¯ï¼å ä¸º NFS ä¸æ¯è®¾è®¡ä¸ä¸è´çæä»¶ç³»ç»ï¼å¦ææ¨å¿é¡»ä½¿ç¨ NFSï¼æä»¬å»ºè®®æ¨è³å°ä½¿ç¨ NFSv4 èä¸æ¯ NFSv3ï¼ã\n\n\n# å¼å§å§\n\nå¦æä½ äºè§£Minioåæºæ¨¡å¼çæ­å»ºçè¯ï¼åå¸å¼æ­å»ºçæµç¨åºæ¬ä¸æ ·ï¼Minioæå¡åºäºå½ä»¤è¡ä¼ å¥çåæ°èªå¨åæ¢æåæºæ¨¡å¼è¿æ¯åå¸å¼æ¨¡å¼ã\n\n\n# 1. åææ¡ä»¶\n\nå®è£ MinIO - [MinIO å¿«éå¥é¨æå](./02.Minio Dockerå¿«éå¥é¨.md)ã\n\n\n# 2. è¿è¡åå¸å¼Minio\n\nè¦å¯å¨åå¸å¼ MinIO å®ä¾ï¼æ¨åªéå°é©±å¨å¨ä½ç½®ä½ä¸ºåæ°ä¼ éç» minio æå¡å¨å½ä»¤ãç¶åï¼æ¨éè¦å¨ææåä¸èç¹ä¸è¿è¡ç¸åçå½ä»¤ã\n\næ³¨æï¼\n\n * ææè¿è¡åå¸å¼ MinIO çèç¹é½åºè¯¥å±äº«ä¸ä¸ªå¬å±æ ¹å­è¯ï¼ä»¥ä¾¿èç¹ç¸äºè¿æ¥åä¿¡ä»»ãä¸ºäºå®ç°è¿ä¸ç®æ ï¼å®å»ºè®®ä»¥rootç¨æ·årootå¯ç å¯¼åºä¸ºç¯å¢åéï¼MINIO_ROOT_USERåMINIO_ROOT_PASSWORDæ§è¡MinIOæå¡å¨å½ä»¤ä¹åï¼ææèç¹ä¸ãå¦ææªå¯¼åºï¼minioadmin/minioadminååºä½¿ç¨é»è®¤å­æ®ã\n * MinIO åå»ºæ¯ç»4å°16ä¸ªé©±å¨å¨ççº å ç ç»ãæ¨æä¾çé©±å¨å¨æ»æ°å¿é¡»æ¯è¿äºæ°å­ä¹ä¸çåæ°ã\n * MinIO éæ©æå¤§ç EC éå¤§å°ï¼å®åä¸ºç»å®çé©±å¨å¨æ»æ°æèç¹æ»æ° - ç¡®ä¿ä¿æåååå¸ï¼å³æ¯ä¸ªèç¹åä¸æ¯ç»ç¸åæ°éçé©±å¨å¨ã\n * æ¯ä¸ªå¯¹è±¡é½åå¥åä¸ª EC éï¼å æ­¤åå¸å¨ä¸è¶è¿ 16 ä¸ªé©±å¨å¨ä¸ã\n * å»ºè®®ææè¿è¡åå¸å¼ MinIO è®¾ç½®çèç¹æ¯åæçï¼å³ç¸åçæä½ç³»ç»ãç¸åçç£çæ°éåç¸åçç½ç»äºè¿ã\n * MinIO åå¸å¼æ¨¡å¼éè¦æ°ç®å½ãå¦æéè¦ï¼é©±å¨å¨å¯ä»¥ä¸å¶ä»åºç¨ç¨åºå±äº«ãæ¨å¯ä»¥éè¿ä½¿ç¨ MinIO ä¸æçå­ç®å½æ¥å®ææ­¤æä½ãä¾å¦ï¼å¦ææ¨å¨/exportä¸å®è£äºæ¨çå·ï¼åå¯ä»¥å°/export/dataä½ä¸ºåæ°ä¼ éç» MinIO æå¡å¨ã\n * ä¸é¢ç IP å°ååé©±å¨å¨è·¯å¾ä»ç¨äºæ¼ç¤ºç®çï¼æ¨éè¦å°å®ä»¬æ¿æ¢ä¸ºå®éç IP å°ååé©±å¨å¨è·¯å¾ææä»¶å¤¹ã\n * è¿è¡åå¸å¼ MinIO å®ä¾çæå¡å¨ä¹é´çé´éåºå°äº 15 åéãæ¨å¯ä»¥å¯ç¨NTPæå¡ä½ä¸ºæä½³å®è·µï¼ä»¥ç¡®ä¿è·¨æå¡å¨çæ¶é´ç¸åã\n * MINIO_DOMAIN åºå®ä¹åå¯¼åºç¯å¢åéä»¥æ¯æå­å¨æ¡¶ DNS æ ·å¼ã\n * å¨Windowsæä½ç³»ç»ä¸è¿è¡åå¸å¼ MinIOè¢«è®¤ä¸ºæ¯å®éªæ§çãè¯·è°¨æè¡äºã\n\nç¤ºä¾1ï¼å¯å¨åå¸å¼MinIOä¾å¦å¨nä¸ªèç¹ï¼å¶ä¸­mä¸ªé©±å¨æ¯ä¸ªå®è£å¨/export1å°/exportmï¼å¦å¾ä¸æï¼ï¼éè¿æænä¸ªèç¹ä¸è¿è¡æ­¤å½ä»¤ï¼\n\n\n\n# GNU/Linux å macOS\n\nexport MINIO_ROOT_USER=<ACCESS_KEY>\nexport MINIO_ROOT_PASSWORD=<SECRET_KEY>\nminio server http://192.168.1.1{1...n}/export{1...m} --console-address ":9001"\n\n\næ³¨æ\n\nå¨ä¸é¢çä¾å­ä¸­nï¼mä»£è¡¨æ­£æ´æ°ï¼ä¸è¦å¤å¶ç²è´´ï¼æ ¹æ®æ¬å°é¨ç½²åè®¾ç½®è¿è¡æ´æ¹ã\n\nç¹å«æ³¨æ{1...n}æ¾ç¤ºæ 3 ä¸ªç¹ï¼ä»ä½¿ç¨ 2 ä¸ª{1..n}ç¹å°è¢«æ¨ç shell è§£éå¹¶ä¸ä¸ä¼ä¼ éå° MinIO æå¡å¨ï¼ä»èå½±åæ¦é¤ç¼ç é¡ºåºï¼ä»èå½±åæ§è½åé«å¯ç¨æ§ãå§ç»ä½¿ç¨çç¥å·è¯­æ³{1...n}ï¼3 ä¸ªç¹ï¼ï¼ä»¥è·å¾æä½³çº å ç åå¸\n\n\n\nç¤ºä¾2: å¯å¨åå¸å¼Minioå®ä¾ï¼4èç¹ï¼æ¯èç¹4åçï¼éè¦å¨4ä¸ªèç¹ä¸é½è¿è¡ä¸é¢çå½ä»¤ã\n\n# GNU/Linux å macOS\n\nexport MINIO_ACCESS_KEY=<ACCESS_KEY>\nexport MINIO_SECRET_KEY=<SECRET_KEY>\nminio server http://192.168.1.1{1...4}/export{1...4}\n\n\n\n\n# æ©å±ç°æçåå¸å¼è®¾ç½®\n\nMinIO æ¯æéè¿å¨å½ä»¤è¡ä¸æå®æ°çéç¾¤éæ¥æ©å±åå¸å¼çº å ç éç¾¤ï¼å¦ä¸æç¤ºï¼\n\nexport MINIO_ROOT_USER=<ACCESS_KEY>\nexport MINIO_ROOT_PASSWORD=<SECRET_KEY>\nminio server http://host{1...n}/export{1...m} http://host{o...z}/export{1...m}\n\n\nä¾å¦ï¼\n\nminio server http://host{1...4}/export{1...16} http://host{5...12}/export{1...16}\n\n\nç°å¨æå¡å¨å·²å°æ»å­å¨æ©å±äº(newly_ added_servers*m)ä¸ªç£çï¼ä½¿æ»æ°è¾¾å°(existing_servers*m)+(newly_added_servers*m) ä¸ªç£çãæ°çå¯¹è±¡ä¸ä¼ è¯·æ±ä¼èªå¨ä½¿ç¨æå°ä½¿ç¨çéç¾¤å¼å§ãè¿ç§æ©å±ç­ç¥æ ä¼æ­¢å°å·¥ä½ï¼å æ­¤æ¨å¯ä»¥æ ¹æ®éè¦æ°¸ä¹æ©å±éç¾¤ãå½æ¨éæ°å¯å¨æ¶ï¼å®ä¼ç«å³ä¸ä¸ä¼ä¸­æ­åºç¨ç¨åºãå½ä»¤è¡ä¸­çæ¯ç»æå¡å¨ç§°ä¸ºä¸ä¸ªæ± ãæ¬ç¤ºä¾ä¸­æ 2 ä¸ªæå¡å¨æ± ãæ°å¯¹è±¡æç§æ¯ä¸ªæ± ä¸­çå¯ç¨ç©ºé´éææ¯ä¾æ¾ç½®å¨æå¡å¨æ± ä¸­ãå¨æ¯ä¸ªæ± ä¸­ï¼é©±å¨å¨æ¦é¤éçä½ç½®æ¯æ ¹æ®ç¡®å®æ§æ£åç®æ³ç¡®å®çã\n\næ³¨æ\n\næ¨æ·»å çæ¯ä¸ªæ± é½å¿é¡»ä¸åå§æ± å·æç¸åççº å ç å¥å¶æ ¡éªéç½®ï¼ä»¥ä¾¿ä¿æç¸åçæ°æ®åä½ SLAã\n\n\n# 3. éªè¯\n\néªè¯æ¯å¦é¨ç½²æåï¼ä½¿ç¨æµè§å¨è®¿é®Minioæå¡æèä½¿ç¨ mcãå¤ä¸ªèç¹çå­å¨å®¹éåå°±æ¯åå¸å¼Minioçå­å¨å®¹éã',normalizedContent:'# åå¸å¼minioå¿«éå¥é¨\n\nåå¸å¼minioå¯ä»¥è®©ä½ å°å¤åç¡¬çï¼çè³å¨ä¸åçæºå¨ä¸ï¼ç»æä¸ä¸ªå¯¹è±¡å­å¨æå¡ãç±äºç¡¬çåå¸å¨ä¸åçèç¹ä¸ï¼åå¸å¼minioé¿åäºåç¹æéã\n\n\n# åå¸å¼minioæä»ä¹å¥½å¤?\n\nå¨å¤§æ°æ®é¢åï¼éå¸¸çè®¾è®¡çå¿µé½æ¯æ ä¸­å¿ååå¸å¼ãminioåå¸å¼æ¨¡å¼å¯ä»¥å¸®å©ä½ æ­å»ºä¸ä¸ªé«å¯ç¨çå¯¹è±¡å­å¨æå¡ï¼ä½ å¯ä»¥ä½¿ç¨è¿äºå­å¨è®¾å¤ï¼èä¸ç¨èèå¶çå®ç©çä½ç½®ã\n\n\n# æ°æ®ä¿æ¤\n\nåå¸å¼ minioä½¿ç¨erasure codeæä¾éå¯¹å¤ä¸ªèç¹/é©±å¨å¨æéåbit rotä¿æ¤ãç±äºåå¸å¼ minio æéçæå°ç£çä¸º 4ï¼ä¸æ¦é¤ç¼ç æéçæå°ç£çç¸åï¼ï¼å æ­¤å¨æ¨å¯å¨åå¸å¼ minio æ¶ï¼æ¦é¤ä»£ç ä¼èªå¨å¯å¨ã\n\nå¦æä¸ä¸ªæå¤ä¸ªç£çå¨ putobject æ newmultipartupload æä½å¼å§æ¶å¤äºè±æºç¶æï¼è¯¥å¯¹è±¡å°èªå¨æ·»å é¢å¤çæ°æ®ä¿æ¤ä½ï¼ä»¥ä¸ºè¿äºå¯¹è±¡æä¾é¢å¤çå®å¨æ§ã\n\n\n# é«å¯ç¨æ§\n\nå¦ææç®¡ç£ççæå¡å¨è±æºï¼ç¬ç«ç minio æå¡å¨å°±ä¼åæºãç¸æ¯ä¹ä¸ï¼åªè¦æm/2 ä¸ªæå¡å¨æm*n/2 ä¸ªææ´å¤ç£çå¨çº¿ï¼å·æm ä¸ªæå¡å¨ån ä¸ªç£ççåå¸å¼ minio è®¾ç½®å°ä½¿æ¨çæ°æ®å®å¨ã\n\nä¾å¦ï¼æ¯ä¸ªèç¹æ 200 ä¸ªç£çç 16 å°æå¡å¨åå¸å¼è®¾ç½®å°ç»§ç»­æä¾æä»¶ï¼é»è®¤éç½®ä¸æå¤ 4 ä¸ªæå¡å¨å¯ä»¥ç¦»çº¿ï¼å³å¤§çº¦ 800 ä¸ªç£çå³é­ minio å°ç»§ç»­è¯»åååå¥å¯¹è±¡ã\n\nè¯·åèé»è®¤å¼çæ´å¤çè§£å°ºå¯¸æåéæ©åå³äºä½ å é¤çæ¡å¸¦å¤§å°å¨è¿éãå¯ä»¥ä½¿ç¨storage classes.æ´æ¹å¥å¶æ ¡éªè®¾ç½®ã\n\n\n# ä¸è´æ§ä¿è¯\n\nå¯¹äºåå¸å¼åç¬ç«æ¨¡å¼ä¸çææ i/o æä½ï¼minio éµå¾ªä¸¥æ ¼çåè¯»ååååååè¡¨ä¸è´æ§æ¨¡åãä»å½æ¨ä½¿ç¨ç£çæä»¶ç³»ç»ï¼ä¾å¦ xfsãext4 æ zfs ç­ï¼è¿è¡åå¸å¼è®¾ç½®æ¶ï¼æè½ä¿è¯æ­¤ä¸è´æ§æ¨¡åã\n\nå¦æ minio åå¸å¼è®¾ç½®å¨ä¸é¢ä½¿ç¨ nfs å·ï¼åä¸è½ä¿è¯ minio å°æä¾è¿äºä¸è´æ§ä¿è¯ï¼å ä¸º nfs ä¸æ¯è®¾è®¡ä¸ä¸è´çæä»¶ç³»ç»ï¼å¦ææ¨å¿é¡»ä½¿ç¨ nfsï¼æä»¬å»ºè®®æ¨è³å°ä½¿ç¨ nfsv4 èä¸æ¯ nfsv3ï¼ã\n\n\n# å¼å§å§\n\nå¦æä½ äºè§£minioåæºæ¨¡å¼çæ­å»ºçè¯ï¼åå¸å¼æ­å»ºçæµç¨åºæ¬ä¸æ ·ï¼minioæå¡åºäºå½ä»¤è¡ä¼ å¥çåæ°èªå¨åæ¢æåæºæ¨¡å¼è¿æ¯åå¸å¼æ¨¡å¼ã\n\n\n# 1. åææ¡ä»¶\n\nå®è£ minio - [minio å¿«éå¥é¨æå](./02.minio dockerå¿«éå¥é¨.md)ã\n\n\n# 2. è¿è¡åå¸å¼minio\n\nè¦å¯å¨åå¸å¼ minio å®ä¾ï¼æ¨åªéå°é©±å¨å¨ä½ç½®ä½ä¸ºåæ°ä¼ éç» minio æå¡å¨å½ä»¤ãç¶åï¼æ¨éè¦å¨ææåä¸èç¹ä¸è¿è¡ç¸åçå½ä»¤ã\n\næ³¨æï¼\n\n * ææè¿è¡åå¸å¼ minio çèç¹é½åºè¯¥å±äº«ä¸ä¸ªå¬å±æ ¹å­è¯ï¼ä»¥ä¾¿èç¹ç¸äºè¿æ¥åä¿¡ä»»ãä¸ºäºå®ç°è¿ä¸ç®æ ï¼å®å»ºè®®ä»¥rootç¨æ·årootå¯ç å¯¼åºä¸ºç¯å¢åéï¼minio_root_useråminio_root_passwordæ§è¡minioæå¡å¨å½ä»¤ä¹åï¼ææèç¹ä¸ãå¦ææªå¯¼åºï¼minioadmin/minioadminååºä½¿ç¨é»è®¤å­æ®ã\n * minio åå»ºæ¯ç»4å°16ä¸ªé©±å¨å¨ççº å ç ç»ãæ¨æä¾çé©±å¨å¨æ»æ°å¿é¡»æ¯è¿äºæ°å­ä¹ä¸çåæ°ã\n * minio éæ©æå¤§ç ec éå¤§å°ï¼å®åä¸ºç»å®çé©±å¨å¨æ»æ°æèç¹æ»æ° - ç¡®ä¿ä¿æåååå¸ï¼å³æ¯ä¸ªèç¹åä¸æ¯ç»ç¸åæ°éçé©±å¨å¨ã\n * æ¯ä¸ªå¯¹è±¡é½åå¥åä¸ª ec éï¼å æ­¤åå¸å¨ä¸è¶è¿ 16 ä¸ªé©±å¨å¨ä¸ã\n * å»ºè®®ææè¿è¡åå¸å¼ minio è®¾ç½®çèç¹æ¯åæçï¼å³ç¸åçæä½ç³»ç»ãç¸åçç£çæ°éåç¸åçç½ç»äºè¿ã\n * minio åå¸å¼æ¨¡å¼éè¦æ°ç®å½ãå¦æéè¦ï¼é©±å¨å¨å¯ä»¥ä¸å¶ä»åºç¨ç¨åºå±äº«ãæ¨å¯ä»¥éè¿ä½¿ç¨ minio ä¸æçå­ç®å½æ¥å®ææ­¤æä½ãä¾å¦ï¼å¦ææ¨å¨/exportä¸å®è£äºæ¨çå·ï¼åå¯ä»¥å°/export/dataä½ä¸ºåæ°ä¼ éç» minio æå¡å¨ã\n * ä¸é¢ç ip å°ååé©±å¨å¨è·¯å¾ä»ç¨äºæ¼ç¤ºç®çï¼æ¨éè¦å°å®ä»¬æ¿æ¢ä¸ºå®éç ip å°ååé©±å¨å¨è·¯å¾ææä»¶å¤¹ã\n * è¿è¡åå¸å¼ minio å®ä¾çæå¡å¨ä¹é´çé´éåºå°äº 15 åéãæ¨å¯ä»¥å¯ç¨ntpæå¡ä½ä¸ºæä½³å®è·µï¼ä»¥ç¡®ä¿è·¨æå¡å¨çæ¶é´ç¸åã\n * minio_domain åºå®ä¹åå¯¼åºç¯å¢åéä»¥æ¯æå­å¨æ¡¶ dns æ ·å¼ã\n * å¨windowsæä½ç³»ç»ä¸è¿è¡åå¸å¼ minioè¢«è®¤ä¸ºæ¯å®éªæ§çãè¯·è°¨æè¡äºã\n\nç¤ºä¾1ï¼å¯å¨åå¸å¼minioä¾å¦å¨nä¸ªèç¹ï¼å¶ä¸­mä¸ªé©±å¨æ¯ä¸ªå®è£å¨/export1å°/exportmï¼å¦å¾ä¸æï¼ï¼éè¿æænä¸ªèç¹ä¸è¿è¡æ­¤å½ä»¤ï¼\n\n\n\n# gnu/linux å macos\n\nexport minio_root_user=<access_key>\nexport minio_root_password=<secret_key>\nminio server http://192.168.1.1{1...n}/export{1...m} --console-address ":9001"\n\n\næ³¨æ\n\nå¨ä¸é¢çä¾å­ä¸­nï¼mä»£è¡¨æ­£æ´æ°ï¼ä¸è¦å¤å¶ç²è´´ï¼æ ¹æ®æ¬å°é¨ç½²åè®¾ç½®è¿è¡æ´æ¹ã\n\nç¹å«æ³¨æ{1...n}æ¾ç¤ºæ 3 ä¸ªç¹ï¼ä»ä½¿ç¨ 2 ä¸ª{1..n}ç¹å°è¢«æ¨ç shell è§£éå¹¶ä¸ä¸ä¼ä¼ éå° minio æå¡å¨ï¼ä»èå½±åæ¦é¤ç¼ç é¡ºåºï¼ä»èå½±åæ§è½åé«å¯ç¨æ§ãå§ç»ä½¿ç¨çç¥å·è¯­æ³{1...n}ï¼3 ä¸ªç¹ï¼ï¼ä»¥è·å¾æä½³çº å ç åå¸\n\n\n\nç¤ºä¾2: å¯å¨åå¸å¼minioå®ä¾ï¼4èç¹ï¼æ¯èç¹4åçï¼éè¦å¨4ä¸ªèç¹ä¸é½è¿è¡ä¸é¢çå½ä»¤ã\n\n# gnu/linux å macos\n\nexport minio_access_key=<access_key>\nexport minio_secret_key=<secret_key>\nminio server http://192.168.1.1{1...4}/export{1...4}\n\n\n\n\n# æ©å±ç°æçåå¸å¼è®¾ç½®\n\nminio æ¯æéè¿å¨å½ä»¤è¡ä¸æå®æ°çéç¾¤éæ¥æ©å±åå¸å¼çº å ç éç¾¤ï¼å¦ä¸æç¤ºï¼\n\nexport minio_root_user=<access_key>\nexport minio_root_password=<secret_key>\nminio server http://host{1...n}/export{1...m} http://host{o...z}/export{1...m}\n\n\nä¾å¦ï¼\n\nminio server http://host{1...4}/export{1...16} http://host{5...12}/export{1...16}\n\n\nç°å¨æå¡å¨å·²å°æ»å­å¨æ©å±äº(newly_ added_servers*m)ä¸ªç£çï¼ä½¿æ»æ°è¾¾å°(existing_servers*m)+(newly_added_servers*m) ä¸ªç£çãæ°çå¯¹è±¡ä¸ä¼ è¯·æ±ä¼èªå¨ä½¿ç¨æå°ä½¿ç¨çéç¾¤å¼å§ãè¿ç§æ©å±ç­ç¥æ ä¼æ­¢å°å·¥ä½ï¼å æ­¤æ¨å¯ä»¥æ ¹æ®éè¦æ°¸ä¹æ©å±éç¾¤ãå½æ¨éæ°å¯å¨æ¶ï¼å®ä¼ç«å³ä¸ä¸ä¼ä¸­æ­åºç¨ç¨åºãå½ä»¤è¡ä¸­çæ¯ç»æå¡å¨ç§°ä¸ºä¸ä¸ªæ± ãæ¬ç¤ºä¾ä¸­æ 2 ä¸ªæå¡å¨æ± ãæ°å¯¹è±¡æç§æ¯ä¸ªæ± ä¸­çå¯ç¨ç©ºé´éææ¯ä¾æ¾ç½®å¨æå¡å¨æ± ä¸­ãå¨æ¯ä¸ªæ± ä¸­ï¼é©±å¨å¨æ¦é¤éçä½ç½®æ¯æ ¹æ®ç¡®å®æ§æ£åç®æ³ç¡®å®çã\n\næ³¨æ\n\næ¨æ·»å çæ¯ä¸ªæ± é½å¿é¡»ä¸åå§æ± å·æç¸åççº å ç å¥å¶æ ¡éªéç½®ï¼ä»¥ä¾¿ä¿æç¸åçæ°æ®åä½ slaã\n\n\n# 3. éªè¯\n\néªè¯æ¯å¦é¨ç½²æåï¼ä½¿ç¨æµè§å¨è®¿é®minioæå¡æèä½¿ç¨ mcãå¤ä¸ªèç¹çå­å¨å®¹éåå°±æ¯åå¸å¼minioçå­å¨å®¹éã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å¦ä½ä½¿ç¨ TLS ä¿æ¤å¯¹ MinIO æå¡å¨çè®¿é®",frontmatter:{title:"å¦ä½ä½¿ç¨ TLS ä¿æ¤å¯¹ MinIO æå¡å¨çè®¿é®",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/98cf59/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/05.%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20TLS%20%E4%BF%9D%E6%8A%A4%E5%AF%B9%20MinIO%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E8%AE%BF%E9%97%AE.html",relativePath:"12.MinIO/01.Minioæå¡å¨/05.å¦ä½ä½¿ç¨ TLS ä¿æ¤å¯¹ MinIO æå¡å¨çè®¿é®.md",key:"v-7f6889c6",path:"/pages/98cf59/",headers:[{level:2,title:"1.å®è£MinIOæå¡å¨",slug:"_1-å®è£minioæå¡å¨",normalizedTitle:"1.å®è£minioæå¡å¨",charIndex:88},{level:2,title:"2. å¨ MinIO ä¸­ä½¿ç¨ç°æçå¯é¥åè¯ä¹¦",slug:"_2-å¨-minio-ä¸­ä½¿ç¨ç°æçå¯é¥åè¯ä¹¦",normalizedTitle:"2. å¨ minio ä¸­ä½¿ç¨ç°æçå¯é¥åè¯ä¹¦",charIndex:142},{level:2,title:"3. ä½¿ç¨ MinIO çæåä½¿ç¨èªç­¾åå¯é¥åè¯ä¹¦",slug:"_3-ä½¿ç¨-minio-çæåä½¿ç¨èªç­¾åå¯é¥åè¯ä¹¦",normalizedTitle:"3. ä½¿ç¨ minio çæåä½¿ç¨èªç­¾åå¯é¥åè¯ä¹¦",charIndex:550},{level:3,title:"3.1certgenç¨äºçæè¯ä¹¦",slug:"_3-1certgenç¨äºçæè¯ä¹¦",normalizedTitle:"3.1certgenç¨äºçæè¯ä¹¦",charIndex:786},{level:3,title:"3.2 ä½¿ç¨ OpenSSL çæè¯ä¹¦",slug:"_3-2-ä½¿ç¨-openssl-çæè¯ä¹¦",normalizedTitle:"3.2 ä½¿ç¨ openssl çæè¯ä¹¦",charIndex:623},{level:3,title:"3.3 ä½¿ç¨ GnuTLS (for Windows) çæè¯ä¹¦",slug:"_3-3-ä½¿ç¨-gnutls-for-windows-çæè¯ä¹¦",normalizedTitle:"3.3 ä½¿ç¨ gnutls (for windows) çæè¯ä¹¦",charIndex:2535},{level:2,title:"4. å®è£æ¥èªç¬¬ä¸æ¹ CA çè¯ä¹¦",slug:"_4-å®è£æ¥èªç¬¬ä¸æ¹-ca-çè¯ä¹¦",normalizedTitle:"4. å®è£æ¥èªç¬¬ä¸æ¹ ca çè¯ä¹¦",charIndex:3831}],headersStr:"1.å®è£MinIOæå¡å¨ 2. å¨ MinIO ä¸­ä½¿ç¨ç°æçå¯é¥åè¯ä¹¦ 3. ä½¿ç¨ MinIO çæåä½¿ç¨èªç­¾åå¯é¥åè¯ä¹¦ 3.1certgenç¨äºçæè¯ä¹¦ 3.2 ä½¿ç¨ OpenSSL çæè¯ä¹¦ 3.3 ä½¿ç¨ GnuTLS (for Windows) çæè¯ä¹¦ 4. å®è£æ¥èªç¬¬ä¸æ¹ CA çè¯ä¹¦",content:'# å¦ä½ä½¿ç¨ TLS ä¿æ¤å¯¹ MinIO æå¡å¨çè®¿é®\n\næ¬æåè§£éäºå¦ä½å¨ Linux å Windows å¹³å°ä¸ä½¿ç¨ TLS è¯ä¹¦éç½® MinIO Serverã\n\n\n# 1.å®è£MinIOæå¡å¨\n\nä½¿ç¨MinIO å¿«éå¥é¨æåä¸­çè¯´æå®è£ MinIO Server ã\n\n\n# 2. å¨ MinIO ä¸­ä½¿ç¨ç°æçå¯é¥åè¯ä¹¦\n\næ¬èä»ç»å¦ä½ä½¿ç¨ä»è¯ä¹¦é¢åæºæ (CA) è·å¾çç§é¥åå¬å±è¯ä¹¦ãå¦æå°æªè·åè¿äºæä»¶ï¼è¯·è·³è³3. çæèªç­¾åè¯ä¹¦æä½¿ç¨ä»¥ä¸è¯´æä½¿ç¨Let\'s Encryptçæå®ä»¬ï¼ä½¿ç¨ Certbot for MinIO çæ Let\'s Encrypt è¯ä¹¦ã\n\nå°ç°æçç§é¥åå¬å±è¯ä¹¦å¤å¶å°certsç®å½ä¸­ãé»è®¤ç certs ç®å½æ¯ï¼\n\n * Linuxï¼ ${HOME}/.minio/certs\n * è§çªï¼ %%USERPROFILE%%\\.minio\\certs\n\nç¬è®°ï¼\n\n * å¯ä»¥ä½¿ç¨--certs-dirå½ä»¤è¡éé¡¹æå®èªå®ä¹è¯ä¹¦ç®å½çä½ç½®ã\n * å¨certsç®å½ä¸­ï¼ç§é¥å¿é¡»å½åprivate.keyï¼å¬é¥å¿é¡»å½åpublic.crtã\n * ç± CA ç­¾ç½²çè¯ä¹¦åå«æå³é¢åçèº«ä»½ï¼ä¾å¦åç§°ãå°ææ¶é´ãå¬é¥ï¼åä»»ä½ä¸­é´è¯ä¹¦çä¿¡æ¯ãä¸åæ¬æ ¹ CAã\n\n\n# 3. ä½¿ç¨ MinIO çæåä½¿ç¨èªç­¾åå¯é¥åè¯ä¹¦\n\næ¬èä»ç»å¦ä½ä½¿ç¨åç§å·¥å·çæèªç­¾åè¯ä¹¦ï¼\n\n * 3.1 ä½¿ç¨certgençæè¯ä¹¦\n * 3.2 ä½¿ç¨ OpenSSL çæè¯ä¹¦\n * 3.3 ä½¿ç¨OpenSSLï¼å¸¦IPå°åï¼çæè¯ä¹¦\n * 3.4 ä½¿ç¨ GnuTLS (for Windows) çæè¯ä¹¦\n\nè¯´æï¼\n\n * MinIO å¨ Linux å Windows ä¸ä»æ¯æ PEM æ ¼å¼çå¯é¥åè¯ä¹¦ã\n * MinIO ç®åä¸æ¯æ PFX è¯ä¹¦ã\n\n\n# 3.1certgenç¨äºçæè¯ä¹¦\n\nä¸è½½certgenéç¨äºæ¨çç¹å®æä½ç³»ç»åå¹³å°ã\n\ncertgenæ¯ä¸ä¸ªç®åçGoå·¥å·æ¥çæèªç­¾åè¯ä¹¦ï¼å¹¶æä¾å¸¦æ DNS å IP æ¡ç®ç SAN è¯ä¹¦ï¼\n\n./certgen -ca -host "10.10.0.3,10.10.0.4,10.10.0.5"\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\n2018/11/21 10:16:18 wrote public.crt\n2018/11/21 10:16:18 wrote private.key\n\n\n\n# 3.2 ä½¿ç¨ OpenSSL çæè¯ä¹¦\n\nä½¿ç¨ä»¥ä¸æ¹æ³ä¹ä¸çæè¯ä¹¦opensslï¼\n\n * 3.2.1ç¨ECDSAçæç§é¥\n * 3.2.2ç¨RSAçæç§é¥\n * 3.2.3çæèªç­¾åè¯ä¹¦\n\n# 3.2.1 ä½¿ç¨ ECDSA çæç§é¥ã\n\nä½¿ç¨ä»¥ä¸å½ä»¤çæå¸¦æ ECDSA çç§é¥ï¼\n\nopenssl ecparam -genkey -name prime256v1 | openssl ec -out private.key\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\nread EC key\nwriting EC key\n\n\næèï¼ä½¿ç¨ä»¥ä¸å½ä»¤çæåå¯ç ä¿æ¤çç§æ ECDSA å¯é¥ï¼\n\nopenssl ecparam -genkey -name prime256v1 | openssl ec -aes256 -out private.key -passout pass:PASSWORD\n\n\næ³¨æ\n\nç®åä¸æ¯æ NIST æ²çº¿ P-384 å P-521ã\n\n# 3.2.2 ä½¿ç¨ RSA çæç§é¥ã\n\nä½¿ç¨ä»¥ä¸å½ä»¤çæå¸¦æ RSA çç§é¥ï¼\n\nopenssl genrsa -out private.key 2048\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\nGenerating RSA private key, 2048 bit long modulus\n............................................+++\n...........+++\ne is 65537 (0x10001)\n\n\næèï¼ä½¿ç¨ä»¥ä¸å½ä»¤çæåå¯ç ä¿æ¤çç§æ RSA å¯é¥ï¼\n\nopenssl genrsa -aes256 -passout pass:PASSWORD -out private.key 2048\n\n\næ³¨æ\n\nä½¿ç¨åå¯ç ä¿æ¤çç§é¥æ¶ï¼å¿é¡»MINIO_CERT_PASSWDä½¿ç¨ä»¥ä¸å½ä»¤éè¿ç¯å¢åéæä¾å¯ç ï¼\n\nexport MINIO_CERT_PASSWD=<PASSWORD>\n\n\nç§æå å¯å¯é¥çé»è®¤ OpenSSL æ ¼å¼æ¯ PKCS-8ï¼ä½ MinIO ä»æ¯æ PKCS-1ãå¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤å°å·²ä½¿ç¨ PKCS-8 æ ¼å¼åç RSA å¯é¥è½¬æ¢ä¸º PKCS-1ï¼\n\nopenssl rsa -in private-pkcs8-key.key -aes256 -passout pass:PASSWORD -out private.key\n\n\n# 3.2.3 çæèªç­¾åè¯ä¹¦ã\n\nåå»ºä¸ä¸ªä»¥openssl.confä»¥ä¸åå®¹å½åçæä»¶ãè®¾ç½®IP.1å/æDNS.1æåæ­£ç¡®ç IP/DNS å°åï¼\n\n[req]\ndistinguished_name = req_distinguished_name\nx509_extensions = v3_req\nprompt = no\n\n[req_distinguished_name]\nC = US\nST = VA\nL = Somewhere\nO = MyOrg\nOU = MyOU\nCN = MyServerName\n\n[v3_req]\nsubjectAltName = @alt_names\n\n[alt_names]\nIP.1 = 127.0.0.1\nDNS.1 = localhost\n\n\nopenssléè¿æå®éç½®æä»¶è¿è¡å¹¶å¨åºç°æç¤ºæ¶è¾å¥å¯ç ï¼\n\nopenssl req -new -x509 -nodes -days 730 -key private.key -out public.crt -config openssl.conf\n\n\n\n# 3.3 ä½¿ç¨ GnuTLS (for Windows) çæè¯ä¹¦\n\næ¬èä»ç»å¦ä½å¨ Windows ä¸ä½¿ç¨ GnuTLS çæè¯ä¹¦ã\n\n# 3.3.1 å®è£åéç½® GnuTLSã\n\nä»è¿éä¸è½½å¹¶è§£å Windows çæ¬ç GnuTLS ã\n\nä½¿ç¨ PowerShell å°æåç GnuTLS äºè¿å¶æä»¶çè·¯å¾æ·»å å°ç³»ç»è·¯å¾ï¼\n\nsetx path "%path%;C:\\Users\\MyUser\\Downloads\\gnutls-3.4.9-w64\\bin"\n\n\næ³¨æ\n\nå¯è½éè¦éæ°å¯å¨ PowerShell æè½ä½¿æ­¤æ´æ¹çæã\n\n# 3.3.2 çæç§é¥ï¼\n\nè¿è¡ä»¥ä¸å½ä»¤çæç§æ.keyæä»¶ï¼\n\ncerttool.exe --generate-privkey --outfile private.key\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\nGenerating a 3072 bit RSA private key...\n\n\n# 3.3.3 çæå¬å±è¯ä¹¦ï¼\n\nåå»ºä¸ä¸ªcert.cnfä½¿ç¨ä»¥ä¸åå®¹è°ç¨çæä»¶ãæ­¤æä»¶åå«ä½¿ç¨certtool.exeä»¥ä¸å½ä»¤çæè¯ä¹¦æéçææä¿¡æ¯ï¼\n\n# X.509 Certificate options\n#\n# DN options\n\n# The organization of the subject.\norganization = "Example Inc."\n\n# The organizational unit of the subject.\n#unit = "sleeping dept."\n\n# The state of the certificate owner.\nstate = "Example"\n\n# The country of the subject. Two letter code.\ncountry = "EX"\n\n# The common name of the certificate owner.\ncn = "Sally Certowner"\n\n# In how many days, counting from today, this certificate will expire.\nexpiration_days = 365\n\n# X.509 v3 extensions\n\n# DNS name(s) of the server\ndns_name = "localhost"\n\n# (Optional) Server IP address\nip_address = "127.0.0.1"\n\n# Whether this certificate will be used for a TLS server\ntls_www_server\n\n\nè¿è¡certtool.exeå¹¶æå®éç½®æä»¶çæè¯ä¹¦ï¼\n\ncerttool.exe --generate-self-signed --load-privkey private.key --template cert.cnf --outfile public.crt\n\n\n\n# 4. å®è£æ¥èªç¬¬ä¸æ¹ CA çè¯ä¹¦\n\nMinIO å¯ä»¥è¿æ¥å°å¶ä»æå¡å¨ï¼åæ¬ MinIO èç¹æå¶ä»æå¡å¨ç±»åï¼ä¾å¦ NAT å Redisãå¦æè¿äºæå¡å¨ä½¿ç¨æªå¨å·²ç¥ CA æ³¨åçè¯ä¹¦ï¼è¯·å°è¿äºè¯ä¹¦ç½®äºä»¥ä¸ MinIO éç½®è·¯å¾ä¹ä¸ä¸ï¼ä»¥å°è¿äºè¯ä¹¦çä¿¡ä»»æ·»å å° MinIO æå¡å¨ï¼\n\n * Linuxï¼ ~/.minio/certs/CAs/\n * Windodsï¼C:\\Users\\<Username>\\.minio\\certs\\CAs',normalizedContent:'# å¦ä½ä½¿ç¨ tls ä¿æ¤å¯¹ minio æå¡å¨çè®¿é®\n\næ¬æåè§£éäºå¦ä½å¨ linux å windows å¹³å°ä¸ä½¿ç¨ tls è¯ä¹¦éç½® minio serverã\n\n\n# 1.å®è£minioæå¡å¨\n\nä½¿ç¨minio å¿«éå¥é¨æåä¸­çè¯´æå®è£ minio server ã\n\n\n# 2. å¨ minio ä¸­ä½¿ç¨ç°æçå¯é¥åè¯ä¹¦\n\næ¬èä»ç»å¦ä½ä½¿ç¨ä»è¯ä¹¦é¢åæºæ (ca) è·å¾çç§é¥åå¬å±è¯ä¹¦ãå¦æå°æªè·åè¿äºæä»¶ï¼è¯·è·³è³3. çæèªç­¾åè¯ä¹¦æä½¿ç¨ä»¥ä¸è¯´æä½¿ç¨let\'s encryptçæå®ä»¬ï¼ä½¿ç¨ certbot for minio çæ let\'s encrypt è¯ä¹¦ã\n\nå°ç°æçç§é¥åå¬å±è¯ä¹¦å¤å¶å°certsç®å½ä¸­ãé»è®¤ç certs ç®å½æ¯ï¼\n\n * linuxï¼ ${home}/.minio/certs\n * è§çªï¼ %%userprofile%%\\.minio\\certs\n\nç¬è®°ï¼\n\n * å¯ä»¥ä½¿ç¨--certs-dirå½ä»¤è¡éé¡¹æå®èªå®ä¹è¯ä¹¦ç®å½çä½ç½®ã\n * å¨certsç®å½ä¸­ï¼ç§é¥å¿é¡»å½åprivate.keyï¼å¬é¥å¿é¡»å½åpublic.crtã\n * ç± ca ç­¾ç½²çè¯ä¹¦åå«æå³é¢åçèº«ä»½ï¼ä¾å¦åç§°ãå°ææ¶é´ãå¬é¥ï¼åä»»ä½ä¸­é´è¯ä¹¦çä¿¡æ¯ãä¸åæ¬æ ¹ caã\n\n\n# 3. ä½¿ç¨ minio çæåä½¿ç¨èªç­¾åå¯é¥åè¯ä¹¦\n\næ¬èä»ç»å¦ä½ä½¿ç¨åç§å·¥å·çæèªç­¾åè¯ä¹¦ï¼\n\n * 3.1 ä½¿ç¨certgençæè¯ä¹¦\n * 3.2 ä½¿ç¨ openssl çæè¯ä¹¦\n * 3.3 ä½¿ç¨opensslï¼å¸¦ipå°åï¼çæè¯ä¹¦\n * 3.4 ä½¿ç¨ gnutls (for windows) çæè¯ä¹¦\n\nè¯´æï¼\n\n * minio å¨ linux å windows ä¸ä»æ¯æ pem æ ¼å¼çå¯é¥åè¯ä¹¦ã\n * minio ç®åä¸æ¯æ pfx è¯ä¹¦ã\n\n\n# 3.1certgenç¨äºçæè¯ä¹¦\n\nä¸è½½certgenéç¨äºæ¨çç¹å®æä½ç³»ç»åå¹³å°ã\n\ncertgenæ¯ä¸ä¸ªç®åçgoå·¥å·æ¥çæèªç­¾åè¯ä¹¦ï¼å¹¶æä¾å¸¦æ dns å ip æ¡ç®ç san è¯ä¹¦ï¼\n\n./certgen -ca -host "10.10.0.3,10.10.0.4,10.10.0.5"\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\n2018/11/21 10:16:18 wrote public.crt\n2018/11/21 10:16:18 wrote private.key\n\n\n\n# 3.2 ä½¿ç¨ openssl çæè¯ä¹¦\n\nä½¿ç¨ä»¥ä¸æ¹æ³ä¹ä¸çæè¯ä¹¦opensslï¼\n\n * 3.2.1ç¨ecdsaçæç§é¥\n * 3.2.2ç¨rsaçæç§é¥\n * 3.2.3çæèªç­¾åè¯ä¹¦\n\n# 3.2.1 ä½¿ç¨ ecdsa çæç§é¥ã\n\nä½¿ç¨ä»¥ä¸å½ä»¤çæå¸¦æ ecdsa çç§é¥ï¼\n\nopenssl ecparam -genkey -name prime256v1 | openssl ec -out private.key\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\nread ec key\nwriting ec key\n\n\næèï¼ä½¿ç¨ä»¥ä¸å½ä»¤çæåå¯ç ä¿æ¤çç§æ ecdsa å¯é¥ï¼\n\nopenssl ecparam -genkey -name prime256v1 | openssl ec -aes256 -out private.key -passout pass:password\n\n\næ³¨æ\n\nç®åä¸æ¯æ nist æ²çº¿ p-384 å p-521ã\n\n# 3.2.2 ä½¿ç¨ rsa çæç§é¥ã\n\nä½¿ç¨ä»¥ä¸å½ä»¤çæå¸¦æ rsa çç§é¥ï¼\n\nopenssl genrsa -out private.key 2048\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\ngenerating rsa private key, 2048 bit long modulus\n............................................+++\n...........+++\ne is 65537 (0x10001)\n\n\næèï¼ä½¿ç¨ä»¥ä¸å½ä»¤çæåå¯ç ä¿æ¤çç§æ rsa å¯é¥ï¼\n\nopenssl genrsa -aes256 -passout pass:password -out private.key 2048\n\n\næ³¨æ\n\nä½¿ç¨åå¯ç ä¿æ¤çç§é¥æ¶ï¼å¿é¡»minio_cert_passwdä½¿ç¨ä»¥ä¸å½ä»¤éè¿ç¯å¢åéæä¾å¯ç ï¼\n\nexport minio_cert_passwd=<password>\n\n\nç§æå å¯å¯é¥çé»è®¤ openssl æ ¼å¼æ¯ pkcs-8ï¼ä½ minio ä»æ¯æ pkcs-1ãå¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤å°å·²ä½¿ç¨ pkcs-8 æ ¼å¼åç rsa å¯é¥è½¬æ¢ä¸º pkcs-1ï¼\n\nopenssl rsa -in private-pkcs8-key.key -aes256 -passout pass:password -out private.key\n\n\n# 3.2.3 çæèªç­¾åè¯ä¹¦ã\n\nåå»ºä¸ä¸ªä»¥openssl.confä»¥ä¸åå®¹å½åçæä»¶ãè®¾ç½®ip.1å/ædns.1æåæ­£ç¡®ç ip/dns å°åï¼\n\n[req]\ndistinguished_name = req_distinguished_name\nx509_extensions = v3_req\nprompt = no\n\n[req_distinguished_name]\nc = us\nst = va\nl = somewhere\no = myorg\nou = myou\ncn = myservername\n\n[v3_req]\nsubjectaltname = @alt_names\n\n[alt_names]\nip.1 = 127.0.0.1\ndns.1 = localhost\n\n\nopenssléè¿æå®éç½®æä»¶è¿è¡å¹¶å¨åºç°æç¤ºæ¶è¾å¥å¯ç ï¼\n\nopenssl req -new -x509 -nodes -days 730 -key private.key -out public.crt -config openssl.conf\n\n\n\n# 3.3 ä½¿ç¨ gnutls (for windows) çæè¯ä¹¦\n\næ¬èä»ç»å¦ä½å¨ windows ä¸ä½¿ç¨ gnutls çæè¯ä¹¦ã\n\n# 3.3.1 å®è£åéç½® gnutlsã\n\nä»è¿éä¸è½½å¹¶è§£å windows çæ¬ç gnutls ã\n\nä½¿ç¨ powershell å°æåç gnutls äºè¿å¶æä»¶çè·¯å¾æ·»å å°ç³»ç»è·¯å¾ï¼\n\nsetx path "%path%;c:\\users\\myuser\\downloads\\gnutls-3.4.9-w64\\bin"\n\n\næ³¨æ\n\nå¯è½éè¦éæ°å¯å¨ powershell æè½ä½¿æ­¤æ´æ¹çæã\n\n# 3.3.2 çæç§é¥ï¼\n\nè¿è¡ä»¥ä¸å½ä»¤çæç§æ.keyæä»¶ï¼\n\ncerttool.exe --generate-privkey --outfile private.key\n\n\nåºæ¾ç¤ºä¸æ­¤ç±»ä¼¼çååºï¼\n\ngenerating a 3072 bit rsa private key...\n\n\n# 3.3.3 çæå¬å±è¯ä¹¦ï¼\n\nåå»ºä¸ä¸ªcert.cnfä½¿ç¨ä»¥ä¸åå®¹è°ç¨çæä»¶ãæ­¤æä»¶åå«ä½¿ç¨certtool.exeä»¥ä¸å½ä»¤çæè¯ä¹¦æéçææä¿¡æ¯ï¼\n\n# x.509 certificate options\n#\n# dn options\n\n# the organization of the subject.\norganization = "example inc."\n\n# the organizational unit of the subject.\n#unit = "sleeping dept."\n\n# the state of the certificate owner.\nstate = "example"\n\n# the country of the subject. two letter code.\ncountry = "ex"\n\n# the common name of the certificate owner.\ncn = "sally certowner"\n\n# in how many days, counting from today, this certificate will expire.\nexpiration_days = 365\n\n# x.509 v3 extensions\n\n# dns name(s) of the server\ndns_name = "localhost"\n\n# (optional) server ip address\nip_address = "127.0.0.1"\n\n# whether this certificate will be used for a tls server\ntls_www_server\n\n\nè¿è¡certtool.exeå¹¶æå®éç½®æä»¶çæè¯ä¹¦ï¼\n\ncerttool.exe --generate-self-signed --load-privkey private.key --template cert.cnf --outfile public.crt\n\n\n\n# 4. å®è£æ¥èªç¬¬ä¸æ¹ ca çè¯ä¹¦\n\nminio å¯ä»¥è¿æ¥å°å¶ä»æå¡å¨ï¼åæ¬ minio èç¹æå¶ä»æå¡å¨ç±»åï¼ä¾å¦ nat å redisãå¦æè¿äºæå¡å¨ä½¿ç¨æªå¨å·²ç¥ ca æ³¨åçè¯ä¹¦ï¼è¯·å°è¿äºè¯ä¹¦ç½®äºä»¥ä¸ minio éç½®è·¯å¾ä¹ä¸ä¸ï¼ä»¥å°è¿äºè¯ä¹¦çä¿¡ä»»æ·»å å° minio æå¡å¨ï¼\n\n * linuxï¼ ~/.minio/certs/cas/\n * windodsï¼c:\\users\\<username>\\.minio\\certs\\cas',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Minioå­å¨æ¡¶éç¥æå",frontmatter:{title:"Minioå­å¨æ¡¶éç¥æå",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/50e89b/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/06.Minio%E5%AD%98%E5%82%A8%E6%A1%B6%E9%80%9A%E7%9F%A5%E6%8C%87%E5%8D%97.html",relativePath:"12.MinIO/01.Minioæå¡å¨/06.Minioå­å¨æ¡¶éç¥æå.md",key:"v-459c694a",path:"/pages/50e89b/",headers:[{level:2,title:"åææ¡ä»¶",slug:"åææ¡ä»¶",normalizedTitle:"åææ¡ä»¶",charIndex:177},{level:2,title:"ä½¿ç¨AMQPåå¸Minioäºä»¶",slug:"ä½¿ç¨amqpåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨amqpåå¸minioäºä»¶",charIndex:237},{level:3,title:"ç¬¬ä¸æ­¥: å°AMQP endpointæ·»å å°Minio",slug:"ç¬¬ä¸æ­¥-å°amqp-endpointæ·»å å°minio",normalizedTitle:"ç¬¬ä¸æ­¥: å°amqp endpointæ·»å å°minio",charIndex:275},{level:3,title:"ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬äºæ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",normalizedTitle:"ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:1912},{level:3,title:"ç¬¬ä¸æ­¥:å¨RabbitMQä¸è¿è¡éªè¯",slug:"ç¬¬ä¸æ­¥-å¨rabbitmqä¸è¿è¡éªè¯",normalizedTitle:"ç¬¬ä¸æ­¥:å¨rabbitmqä¸è¿è¡éªè¯",charIndex:2432},{level:2,title:"ä½¿ç¨MQTTåå¸Minioäºä»¶",slug:"ä½¿ç¨mqttåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨mqttåå¸minioäºä»¶",charIndex:3941},{level:3,title:"ç¬¬ä¸æ­¥: æ·»å MQTT endpointå°Minio",slug:"ç¬¬ä¸æ­¥-æ·»å mqtt-endpointå°minio",normalizedTitle:"ç¬¬ä¸æ­¥: æ·»å mqtt endpointå°minio",charIndex:3981},{level:3,title:"ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬äºæ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥-2",normalizedTitle:"ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:1912},{level:3,title:"ç¬¬ä¸æ­¥ï¼éªè¯MQTT",slug:"ç¬¬ä¸æ­¥-éªè¯mqtt",normalizedTitle:"ç¬¬ä¸æ­¥ï¼éªè¯mqtt",charIndex:5656},{level:2,title:"ä½¿ç¨Elasticsearchåå¸Minioäºä»¶",slug:"ä½¿ç¨elasticsearchåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨elasticsearchåå¸minioäºä»¶",charIndex:7344},{level:3,title:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",slug:"ç¬¬ä¸æ­¥-ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",charIndex:7923},{level:3,title:"ç¬¬äºæ­¥ï¼æESéæå°Minioä¸­",slug:"ç¬¬äºæ­¥-æeséæå°minioä¸­",normalizedTitle:"ç¬¬äºæ­¥ï¼æeséæå°minioä¸­",charIndex:8002},{level:3,title:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬ä¸æ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:8844},{level:3,title:"ç¬¬åæ­¥ï¼éªè¯ES",slug:"ç¬¬åæ­¥-éªè¯es",normalizedTitle:"ç¬¬åæ­¥ï¼éªè¯es",charIndex:9372},{level:2,title:"ä½¿ç¨Redisåå¸Minioäºä»¶",slug:"ä½¿ç¨redisåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨redisåå¸minioäºä»¶",charIndex:11428},{level:3,title:"ç¬¬ä¸æ­¥ï¼éæRediså°Minio",slug:"ç¬¬ä¸æ­¥-éærediså°minio",normalizedTitle:"ç¬¬ä¸æ­¥ï¼éærediså°minio",charIndex:11872},{level:3,title:"ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬äºæ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥-3",normalizedTitle:"ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:1912},{level:3,title:"ç¬¬ä¸æ­¥ï¼éªè¯Redis",slug:"ç¬¬ä¸æ­¥-éªè¯redis",normalizedTitle:"ç¬¬ä¸æ­¥ï¼éªè¯redis",charIndex:13352},{level:2,title:"ä½¿ç¨NATSåå¸Minioäºä»¶",slug:"ä½¿ç¨natsåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨natsåå¸minioäºä»¶",charIndex:14755},{level:3,title:"ç¬¬ä¸æ­¥ï¼éæNATSå°Minio",slug:"ç¬¬ä¸æ­¥-éænatså°minio",normalizedTitle:"ç¬¬ä¸æ­¥ï¼éænatså°minio",charIndex:14785},{level:3,title:"ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬äºæ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥-4",normalizedTitle:"ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:1912},{level:3,title:"ç¬¬ä¸æ­¥ï¼éªè¯NATS",slug:"ç¬¬ä¸æ­¥-éªè¯nats",normalizedTitle:"ç¬¬ä¸æ­¥ï¼éªè¯nats",charIndex:16596},{level:2,title:"ä½¿ç¨PostgreSQLåå¸Minioäºä»¶",slug:"ä½¿ç¨postgresqlåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨postgresqlåå¸minioäºä»¶",charIndex:19987},{level:3,title:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",slug:"ç¬¬ä¸æ­¥-ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",charIndex:20498},{level:3,title:"ç¬¬äºæ­¥ï¼éæPostgreSQLå°Minio",slug:"ç¬¬äºæ­¥-éæpostgresqlå°minio",normalizedTitle:"ç¬¬äºæ­¥ï¼éæpostgresqlå°minio",charIndex:20627},{level:3,title:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬ä¸æ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥-2",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:8844},{level:3,title:"ç¬¬åæ­¥ï¼éªè¯PostgreSQL",slug:"ç¬¬åæ­¥-éªè¯postgresql",normalizedTitle:"ç¬¬åæ­¥ï¼éªè¯postgresql",charIndex:22760},{level:2,title:"ä½¿ç¨MySQLåå¸Minioäºä»¶",slug:"ä½¿ç¨mysqlåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨mysqlåå¸minioäºä»¶",charIndex:24247},{level:3,title:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",slug:"ç¬¬ä¸æ­¥-ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±-2",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",charIndex:20498},{level:3,title:"ç¬¬äºæ­¥ï¼éæMySQLå°Minio",slug:"ç¬¬äºæ­¥-éæmysqlå°minio",normalizedTitle:"ç¬¬äºæ­¥ï¼éæmysqlå°minio",charIndex:24831},{level:3,title:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬ä¸æ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥-3",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:8844},{level:3,title:"ç¬¬åæ­¥ï¼éªè¯MySQL",slug:"ç¬¬åæ­¥-éªè¯mysql",normalizedTitle:"ç¬¬åæ­¥ï¼éªè¯mysql",charIndex:26917},{level:2,title:"ä½¿ç¨Kafkaåå¸Minioäºä»¶",slug:"ä½¿ç¨kafkaåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨kafkaåå¸minioäºä»¶",charIndex:30649},{level:3,title:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",slug:"ç¬¬ä¸æ­¥-ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±-3",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±",charIndex:20498},{level:3,title:"ç¬¬äºæ­¥ï¼éæKafkaå°Minio",slug:"ç¬¬äºæ­¥-éækafkaå°minio",normalizedTitle:"ç¬¬äºæ­¥ï¼éækafkaå°minio",charIndex:30780},{level:3,title:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬ä¸æ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥-4",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:8844},{level:3,title:"ç¬¬åæ­¥ï¼éªè¯Kafka",slug:"ç¬¬åæ­¥-éªè¯kafka",normalizedTitle:"ç¬¬åæ­¥ï¼éªè¯kafka",charIndex:31531},{level:2,title:"ä½¿ç¨Webhookåå¸Minioäºä»¶",slug:"ä½¿ç¨webhookåå¸minioäºä»¶",normalizedTitle:"ä½¿ç¨webhookåå¸minioäºä»¶",charIndex:32552},{level:3,title:"ç¬¬ä¸æ­¥ï¼éæMySQLå°Minio",slug:"ç¬¬ä¸æ­¥-éæmysqlå°minio",normalizedTitle:"ç¬¬ä¸æ­¥ï¼éæmysqlå°minio",charIndex:32606},{level:3,title:"ç¬¬äºæ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥",slug:"ç¬¬äºæ­¥-ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥-5",normalizedTitle:"ç¬¬äºæ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥",charIndex:32862},{level:3,title:"ç¬¬ä¸æ­¥ï¼éç¨Thumbnailerè¿è¡éªè¯",slug:"ç¬¬ä¸æ­¥-éç¨thumbnailerè¿è¡éªè¯",normalizedTitle:"ç¬¬ä¸æ­¥ï¼éç¨thumbnailerè¿è¡éªè¯",charIndex:33420}],headersStr:"åææ¡ä»¶ ä½¿ç¨AMQPåå¸Minioäºä»¶ ç¬¬ä¸æ­¥: å°AMQP endpointæ·»å å°Minio ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬ä¸æ­¥:å¨RabbitMQä¸è¿è¡éªè¯ ä½¿ç¨MQTTåå¸Minioäºä»¶ ç¬¬ä¸æ­¥: æ·»å MQTT endpointå°Minio ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬ä¸æ­¥ï¼éªè¯MQTT ä½¿ç¨Elasticsearchåå¸Minioäºä»¶ ç¬¬ä¸æ­¥ï¼ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ± ç¬¬äºæ­¥ï¼æESéæå°Minioä¸­ ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬åæ­¥ï¼éªè¯ES ä½¿ç¨Redisåå¸Minioäºä»¶ ç¬¬ä¸æ­¥ï¼éæRediså°Minio ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬ä¸æ­¥ï¼éªè¯Redis ä½¿ç¨NATSåå¸Minioäºä»¶ ç¬¬ä¸æ­¥ï¼éæNATSå°Minio ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬ä¸æ­¥ï¼éªè¯NATS ä½¿ç¨PostgreSQLåå¸Minioäºä»¶ ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ± ç¬¬äºæ­¥ï¼éæPostgreSQLå°Minio ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬åæ­¥ï¼éªè¯PostgreSQL ä½¿ç¨MySQLåå¸Minioäºä»¶ ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ± ç¬¬äºæ­¥ï¼éæMySQLå°Minio ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬åæ­¥ï¼éªè¯MySQL ä½¿ç¨Kafkaåå¸Minioäºä»¶ ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ± ç¬¬äºæ­¥ï¼éæKafkaå°Minio ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬åæ­¥ï¼éªè¯Kafka ä½¿ç¨Webhookåå¸Minioäºä»¶ ç¬¬ä¸æ­¥ï¼éæMySQLå°Minio ç¬¬äºæ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥ ç¬¬ä¸æ­¥ï¼éç¨Thumbnailerè¿è¡éªè¯",content:'# Minioå­å¨æ¡¶éç¥æå\n\nå­å¨æ¡¶ï¼Bucketï¼å¦æåçæ¹å,æ¯å¦ä¸ä¼ å¯¹è±¡åå é¤å¯¹è±¡ï¼å¯ä»¥ä½¿ç¨å­å¨æ¡¶äºä»¶éç¥æºå¶è¿è¡çæ§ï¼å¹¶éè¿ä»¥ä¸æ¹å¼åå¸åºå»:\n\nNOTIFICATION TARGETS\nAMQP\nMQTT\nElasticsearch\nRedis\nNATS\nPostgreSQL\nMySQL\nApache Kafka\nWebhooks\n\n\n# åææ¡ä»¶\n\n * ä»è¿éä¸è½½å¹¶å®è£Minio Serverã\n * ä»è¿éä¸è½½å¹¶å®è£Minio Clientã\n\n\n# ä½¿ç¨AMQPåå¸Minioäºä»¶\n\nä»è¿éä¸è½½å®è£RabbitMQã\n\n\n# ç¬¬ä¸æ­¥: å°AMQP endpointæ·»å å°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãAMQPéç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çamqpèç¹ä¸ï¼å¨è¿éä¸ºä½ çAMQPå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çAMQP endpointçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°             ç±»å       æè¿°\nenable         bool     (å¿é¡») æ­¤AMQP server endpointæ¯å¦å¯ç¨\nurl            string   (å¿é¡») AMQP server endpoint, ä¾å¦.\n                        amqp://myuser:mypassword@localhost:5672\nexchange       string   exchangeåç§°\nroutingKey     string   åå¸ç¨çRouting key\nexchangeType   string   exchangeç±»å\ndeliveryMode   uint8    åå¸æ¹å¼ã 0æ1 - ç¬æ; 2 - æä¹ã\nmandatory      bool     Publishing related bool.\nimmediate      bool     Publishing related bool.\ndurable        bool     Exchange declaration related bool.\ninternal       bool     Exchange declaration related bool.\nnoWait         bool     Exchange declaration related bool.\nautoDeleted    bool     Exchange declaration related bool.\n\nä¸é¢å±ç¤ºçæ¯RabbitMQçéç½®ç¤ºä¾:\n\n"amqp": {    "1": {        "enable": true,        "url": "amqp://myuser:mypassword@localhost:5672",        "exchange": "bucketevents",        "routingKey": "bucketlogs",        "exchangeType": "fanout",        "deliveryMode": 0,        "mandatory": false,        "immediate": false,        "durable": false,        "internal": false,        "noWait": false,        "autoDeleted": false    }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯Minio Serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼Minio Serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:amqpã\n\nMinioæ¯æRabbitMQä¸­ææçäº¤æ¢æ¹å¼ï¼è¿æ¬¡æä»¬éç¨ fanout äº¤æ¢ã\n\næ³¨æä¸ä¸ï¼ä½ å¯ä»¥å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªAMQPæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªAMQPæå¡å®ä¾æä¸åçID (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\nå¦æä¸ä¸ªJPEGå¾çä¸ä¼ å°myminio serveréçimages å­å¨æ¡¶æèä»æ¡¶ä¸­å é¤ï¼ä¸ä¸ªå­å¨æ¡¶äºä»¶éç¥å°±ä¼è¢«è§¦åã è¿éARNå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:amqpï¼æ³äºè§£æ´å¤å³äºARNçä¿¡æ¯ï¼è¯·åèAWS ARN documentation.\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:amqp --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:amqp s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥:å¨RabbitMQä¸è¿è¡éªè¯\n\nä¸é¢å°è¦åºåºçpythonç¨åºä¼ç­å¾éåäº¤æ¢Tbucketeventså¹¶å¨æ§å¶å°ä¸­è¾åºäºä»¶éç¥ãæä»¬ä½¿ç¨çæ¯Pika Python Client æ¥å®ç°æ­¤åè½ã\n\n#!/usr/bin/env pythonimport pikaconnection = pika.BlockingConnection(pika.ConnectionParameters(        host=\'localhost\'))channel = connection.channel()channel.exchange_declare(exchange=\'bucketevents\',                         exchange_type=\'fanout\')result = channel.queue_declare(exclusive=False)queue_name = result.method.queuechannel.queue_bind(exchange=\'bucketevents\',                   queue=queue_name)print(\' [*] Waiting for logs. To exit press CTRL+C\')def callback(ch, method, properties, body):    print(" [x] %r" % body)channel.basic_consume(callback,                      queue=queue_name,                      no_ack=False)channel.start_consuming()\n\n\næ§è¡ç¤ºä¾ä¸­çpythonç¨åºæ¥è§å¯RabbitMQäºä»¶ã\n\npython rabbit.py\n\n\nå¦å¼ä¸ä¸ªterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°imageså­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nä¸æ¦ä¸ä¼ å®æ¯ï¼ä½ åºè¯¥ä¼éè¿RabbitMQæ¶å°ä¸é¢çäºä»¶éç¥ã\n\npython rabbit.pyâ{âRecordsâ:[{âeventVersionâ:â2.0",âeventSourceâ:âaws:s3",âawsRegionâ:âus-east-1",âeventTimeâ:â2016â09â08T22:34:38.226Zâ,âeventNameâ:âs3:ObjectCreated:Putâ,âuserIdentityâ:{âprincipalIdâ:âminioâ},ârequestParametersâ:{âsourceIPAddressâ:â10.1.10.150:44576"},âresponseElementsâ:{},âs3":{âs3SchemaVersionâ:â1.0",âconfigurationIdâ:âConfigâ,âbucketâ:{ânameâ:âimagesâ,âownerIdentityâ:{âprincipalIdâ:âminioâ},âarnâ:âarn:aws:s3:::imagesâ},âobjectâ:{âkeyâ:âmyphoto.jpgâ,âsizeâ:200436,âsequencerâ:â147279EAF9F40933"}}}],âlevelâ:âinfoâ,âmsgâ:ââ,âtimeâ:â2016â09â08T15:34:38â07:00"}\\n\n\n\n\n# ä½¿ç¨MQTTåå¸Minioäºä»¶\n\nä» è¿éå®è£MQTT Brokerã\n\n\n# ç¬¬ä¸æ­¥: æ·»å MQTT endpointå°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãMQTTéç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çmqttèç¹ä¸ï¼å¨è¿éä¸ºä½ çMQTTå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çMQTT endpointçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°         ç±»å       æè¿°\nenable     bool     (å¿é¡») è¿ä¸ª server endpointæ¯å¦å¯ç¨?\nbroker     string   (å¿é¡») MQTT server endpoint, ä¾å¦. tcp://localhost:1883\ntopic      string   (å¿é¡») è¦åå¸çMQTTä¸»é¢çåç§°, ä¾å¦. minio\nqos        int      è®¾ç½®æå¡è´¨éçº§å«\nclientId   string   MQTTä»£çè¯å«Minioçå¯ä¸ID\nusername   string   è¿æ¥MQTT serverçç¨æ·å (å¦æéè¦çè¯)\npassword   string   é¾æ¥MQTT serverçå¯ç  (å¦æéè¦çè¯)\n\nä»¥ä¸æ¯ä¸ä¸ªMQTTçéç½®ç¤ºä¾:\n\n"mqtt": {    "1": {        "enable": true,        "broker": "tcp://localhost:1883",        "topic": "minio",        "qos": 1,        "clientId": "minio",        "username": "",        "password": ""    }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯Minio Serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼Minio Serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mqttã\n\nMinioæ¯æä»»ä½æ¯æMQTT 3.1æ3.1.1çMQTTæå¡å¨ï¼å¹¶ä¸å¯ä»¥éè¿TCPï¼TLSæWebsocketè¿æ¥ä½¿ç¨tcp://, tls://, or ws://åå«ä½ä¸ºä»£çURLçæ¹æ¡ã æ´å¤ä¿¡æ¯ï¼è¯·åè Go Clientã\n\næ³¨æä¸ä¸ï¼ä½ è¿æ¯åä¹åAMQPä¸æ ·å¯ä»¥å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªMQTTæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªMQTTæå¡å®ä¾æä¸åçID (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\nå¦æä¸ä¸ªJPEGå¾çä¸ä¼ å°myminio serveréçimages å­å¨æ¡¶æèä»æ¡¶ä¸­å é¤ï¼ä¸ä¸ªå­å¨æ¡¶äºä»¶éç¥å°±ä¼è¢«è§¦åã è¿éARNå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mqttã\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:mqtt --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:amqp s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥ï¼éªè¯MQTT\n\nä¸é¢çpythonç¨åºç­å¾mqttä¸»é¢/ minioï¼å¹¶å¨æ§å¶å°ä¸æå°äºä»¶éç¥ã æä»¬ä½¿ç¨paho-mqttåºæ¥æ§è¡æ­¤æä½ã\n\n#!/usr/bin/env pythonfrom __future__ import print_functionimport paho.mqtt.client as mqtt# The callback for when the client receives a CONNACK response from the server.def on_connect(client, userdata, flags, rc):    print("Connected with result code", rc)    # Subscribing in on_connect() means that if we lose the connection and    # reconnect then subscriptions will be renewed.    client.subscribe("/minio")# The callback for when a PUBLISH message is received from the server.def on_message(client, userdata, msg):    print(msg.payload)client = mqtt.Client()client.on_connect = on_connectclient.on_message = on_messageclient.connect("localhost:1883", 1883, 60)# Blocking call that processes network traffic, dispatches callbacks and# handles reconnecting.# Other loop*() functions are available that give a threaded interface and a# manual interface.client.loop_forever()\n\n\næ§è¡è¿ä¸ªpythonç¤ºä¾ç¨åºæ¥è§å¯MQTTäºä»¶ã\n\npython mqtt.py\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nä¸æ¦ä¸ä¼ å®æ¯ï¼ä½ åºè¯¥ä¼éè¿MQTTæ¶å°ä¸é¢çäºä»¶éç¥ã\n\npython mqtt.py{âRecordsâ:[{âeventVersionâ:â2.0",âeventSourceâ:âaws:s3",âawsRegionâ:âus-east-1",âeventTimeâ:â2016â09â08T22:34:38.226Zâ,âeventNameâ:âs3:ObjectCreated:Putâ,âuserIdentityâ:{âprincipalIdâ:âminioâ},ârequestParametersâ:{âsourceIPAddressâ:â10.1.10.150:44576"},âresponseElementsâ:{},âs3":{âs3SchemaVersionâ:â1.0",âconfigurationIdâ:âConfigâ,âbucketâ:{ânameâ:âimagesâ,âownerIdentityâ:{âprincipalIdâ:âminioâ},âarnâ:âarn:aws:s3:::imagesâ},âobjectâ:{âkeyâ:âmyphoto.jpgâ,âsizeâ:200436,âsequencerâ:â147279EAF9F40933"}}}],âlevelâ:âinfoâ,âmsgâ:ââ,âtimeâ:â2016â09â08T15:34:38â07:00"}\n\n\n\n# ä½¿ç¨Elasticsearchåå¸Minioäºä»¶\n\nå®è£ Elasticsearch ã\n\nè¿ä¸ªéç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace and accessã\n\nå¦æä½¿ç¨çæ¯ namespace æ ¼å¼, Minioå°æ¡¶ä¸­çå¯¹è±¡ä¸ç´¢å¼ä¸­çææ¡£è¿è¡åæ­¥ãå¯¹äºMinioçæ¯ä¸ä¸ªäºä»¶ï¼ESé½ä¼åå»ºä¸ä¸ªdocument,è¿ä¸ªdocumentçIDå°±æ¯å­å¨æ¡¶ä»¥åå­å¨å¯¹è±¡çåç§°ãäºä»¶çå¶ä»ç»èå­å¨å¨documentçæ­£æä¸­ãå æ­¤ï¼å¦æä¸ä¸ªå·²ç»å­å¨çå¯¹è±¡å¨Minioä¸­è¢«è¦çï¼å¨ESä¸­çç¸å¯¹åºçdocumentä¹ä¼è¢«æ´æ°ãå¦æä¸ä¸ªå¯¹è±¡è¢«å é¤ï¼ç¸å¯¹åºçdocumentä¹ä¼ä»indexä¸­å é¤ã\n\nå¦æä½¿ç¨çæ¯accessæ ¼å¼ï¼Minioå°äºä»¶ä½ä¸ºdocumentå å°ESçindexä¸­ãå¯¹äºæ¯ä¸ä¸ªäºä»¶ï¼ESåæ ·ä¼åå»ºä¸ä¸ªdocument,è¿ä¸ªdocumentåå«äºä»¶çææç»èï¼documentçæ¶é´æ³è®¾ç½®ä¸ºäºä»¶çæ¶é´æ³ï¼å¹¶å°è¯¥documentå å°ESçindexä¸­ãè¿ä¸ªdocumentçIDæ¯ç±ESéæºçæçãå¨accessæ ¼å¼ä¸ï¼æ²¡æææ¡£ä¼è¢«å é¤æèä¿®æ¹ï¼å¯¹äºä¸ä¸ªå¯¹è±¡çæä½ï¼é½ä¼çææ°çdocumentéå å°indexä¸­ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºçæ¯å¨namespaceæ ¼å¼ä¸ï¼å¦ä½ä½¿ç¨éç¥ç®æ ãå¦ä¸ç§æ ¼å¼åè¿ä¸ªå¾ç±»ä¼¼ï¼ä¸ºäºä¸è®©ä½ ä»¬è¯´æå¢¨è¿¹ï¼å°±ä¸åèµè¿°äºã\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nMinioè¦æ±ä½¿ç¨çæ¯ES 5.Xç³»ç»çæ¬ãå¦æä½¿ç¨çæ¯ä½çæ¬çESï¼ä¹æ²¡å³ç³»ï¼ESå®æ¹æ¯æåçº§è¿ç§»ï¼è¯¦æè¯·çè¿éã\n\n\n# ç¬¬äºæ­¥ï¼æESéæå°Minioä¸­\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãESéç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çelasticsearchèç¹ä¸ï¼å¨è¿éä¸ºä½ çESå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çESçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°       ç±»å       æè¿°\nenable   bool     (å¿é¡») æ¯å¦å¯ç¨è¿ä¸ªéç½®?\nformat   string   (å¿é¡») æ¯namespace è¿æ¯ access\nurl      string   (å¿é¡») ESå°åï¼æ¯å¦: http://localhost:9200\nindex    string   (å¿é¡») ç»Minioç¨çindex\n\nä»¥ä¸æ¯ESçä¸ä¸ªéç½®ç¤ºä¾:\n\n"elasticsearch": {    "1": {        "enable": true,        "format": "namespace",        "url": "http://127.0.0.1:9200",        "index": "minio_events"    }},\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯Minio Serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼Minio Serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:elasticsearchã\n\næ³¨æä¸ä¸ï¼ä½ åå¯ä»¥åä¸æ¬¡å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªESæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªESæå¡å®ä¾æä¸åçID (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ãä¸æ¦ææä»¶è¢«åå»ºæèè¦çï¼ä¸ä¸ªæ°çESçdocumentä¼è¢«åå»ºæèæ´æ°å°ä¹åå±éçindexéãå¦æä¸ä¸ªå·²ç»å­å¨çå¯¹è±¡è¢«å é¤ï¼è¿ä¸ªå¯¹åºçdocumentä¹ä¼ä»indexä¸­å é¤ãå æ­¤ï¼è¿ä¸ªES indexéçè¡ï¼å°±æ å°çimageså­å¨æ¡¶éçå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤Minioè¾åºçARNä¿¡æ¯ãæ´å¤æå³ARNçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾å±ä»¬çMinioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:elasticsearch --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:elasticsearch s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯ES\n\nä¸ä¼ ä¸å¼ å¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nä½¿ç¨curlæ¥å°minio_events indexä¸­çåå®¹ã\n\n$ curl  "http://localhost:9200/minio_events/_search?pretty=true"{  "took" : 40,  "timed_out" : false,  "_shards" : {    "total" : 5,    "successful" : 5,    "failed" : 0  },  "hits" : {    "total" : 1,    "max_score" : 1.0,    "hits" : [      {        "_index" : "minio_events",        "_type" : "event",        "_id" : "images/myphoto.jpg",        "_score" : 1.0,        "_source" : {          "Records" : [            {              "eventVersion" : "2.0",              "eventSource" : "minio:s3",              "awsRegion" : "us-east-1",              "eventTime" : "2017-03-30T08:00:41Z",              "eventName" : "s3:ObjectCreated:Put",              "userIdentity" : {                "principalId" : "minio"              },              "requestParameters" : {                "sourceIPAddress" : "127.0.0.1:38062"              },              "responseElements" : {                "x-amz-request-id" : "14B09A09703FC47B",                "x-minio-origin-endpoint" : "http://192.168.86.115:9000"              },              "s3" : {                "s3SchemaVersion" : "1.0",                "configurationId" : "Config",                "bucket" : {                  "name" : "images",                  "ownerIdentity" : {                    "principalId" : "minio"                  },                  "arn" : "arn:aws:s3:::images"                },                "object" : {                  "key" : "myphoto.jpg",                  "size" : 6474,                  "eTag" : "a3410f4f8788b510d6f19c5067e60a90",                  "sequencer" : "14B09A09703FC47B"                }              },              "source" : {                "host" : "127.0.0.1",                "port" : "38062",                "userAgent" : "Minio (linux; amd64) minio-go/2.0.3 mc/2017-02-15T17:57:25Z"              }            }          ]        }      }    ]  }}\n\n\nè¿ä¸ªè¾åºæ¾ç¤ºå¨ESä¸­ä¸ºè¿ä¸ªäºä»¶åå»ºäºä¸ä¸ªdocumentã\n\nè¿éæä»¬å¯ä»¥çå°è¿ä¸ªdocument IDå°±æ¯å­å¨æ¡¶åå¯¹è±¡çåç§°ãå¦æç¨çæ¯accessæ ¼å¼ï¼è¿ä¸ªdocument IDå°±æ¯ç±ESéæºçæçã\n\n\n# ä½¿ç¨Redisåå¸Minioäºä»¶\n\nå®è£ Redisãä¸ºäºæ¼ç¤ºï¼æä»¬å°æ°æ®åºå¯ç è®¾ä¸º"yoursecret"ã\n\nè¿ç§éç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace å accessã\n\nå¦æç¨çæ¯namespaceeæ ¼å¼ï¼Minioå°å­å¨æ¡¶éçå¯¹è±¡åæ­¥æRedis hashä¸­çæ¡ç®ãå¯¹äºæ¯ä¸ä¸ªæ¡ç®ï¼å¯¹åºä¸ä¸ªå­å¨æ¡¶éçå¯¹è±¡ï¼å¶keyé½è¢«è®¾ä¸º"å­å¨æ¡¶åç§°/å¯¹è±¡åç§°"ï¼valueé½æ¯ä¸ä¸ªæå³è¿ä¸ªMinioå¯¹è±¡çJSONæ ¼å¼çäºä»¶æ°æ®ãå¦æå¯¹è±¡æ´æ°æèå é¤ï¼hashä¸­å¯¹è±¡çæ¡ç®ä¹ä¼ç¸åºçæ´æ°æèå é¤ã\n\nå¦æä½¿ç¨çæ¯access,Minioä½¿ç¨RPUSHå°äºä»¶æ·»å å°listä¸­ãè¿ä¸ªlistä¸­æ¯ä¸ä¸ªåç´ é½æ¯ä¸ä¸ªJSONæ ¼å¼çlist,è¿ä¸ªlistä¸­åæä¸¤ä¸ªåç´ ï¼ç¬¬ä¸ä¸ªåç´ æ¯æ¶é´æ³çå­ç¬¦ä¸²ï¼ç¬¬äºä¸ªåç´ æ¯ä¸ä¸ªå«æå¨è¿ä¸ªå­å¨æ¡¶ä¸è¿è¡æä½çäºä»¶æ°æ®çJSONå¯¹è±¡ãå¨è¿ç§æ ¼å¼ä¸ï¼listä¸­çåç´ ä¸ä¼æ´æ°æèå é¤ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºå¦ä½å¨namespaceåaccessæ ¼å¼ä¸ä½¿ç¨éç¥ç®æ ã\n\n\n# ç¬¬ä¸æ­¥ï¼éæRediså°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãRediséç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çredisèç¹ä¸ï¼å¨è¿éä¸ºä½ çRediså®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çRedisç«¯çåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­çé®å¼å¯¹éé¢å¼çéåã\n\nåæ°         ç±»å       æè¿°\nenable     bool     (å¿é¡») è¿ä¸ªéç½®æ¯å¦å¯ç¨?\nformat     string   (å¿é¡») æ¯ namespace è¿æ¯ access\naddress    string   (å¿é¡») Redisæå¡å°åï¼æ¯å¦: localhost:6379\npassword   string   (å¯é) Redisæå¡å¯ç \nkey        string   (å¿é¡») äºä»¶è¦å­å¨å°redis\n                    keyçåç§°ãå¦æç¨çæ¯namespaceæ ¼å¼çè¯ï¼åæ¯ä¸ä¸ªhash,å¦ææ¯accessæ ¼å¼çè¯ï¼åæ¯ä¸ä¸ªlist\n\nä¸é¢æ¯ä¸ä¸ªRediséç½®ç¤ºä¾:\n\n"redis": {    "1": {        "enable": true,        "address": "127.0.0.1:6379",        "password": "yoursecret",        "key": "bucketevents"    }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯Minio Serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼Minio Serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:redisã\n\næ³¨æä¸ä¸ï¼ä½ æ°¸è¿é½å¯ä»¥å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªRedisæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªRedisæå¡å®ä¾æä¸åçID (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ãä¸æ¦ææä»¶è¢«åå»ºæèè¦çï¼ä¸ä¸ªæ°çkeyä¼è¢«åå»º,æèä¸ä¸ªå·²ç»å­å¨çkeyå°±ä¼è¢«æ´æ°å°ä¹åéç½®å¥½çredis hashéãå¦æä¸ä¸ªå·²ç»å­å¨çå¯¹è±¡è¢«å é¤ï¼è¿ä¸ªå¯¹åºçkeyä¹ä¼ä»hashä¸­å é¤ãå æ­¤ï¼è¿ä¸ªRedis hashéçè¡ï¼å°±æ å°çimageså­å¨æ¡¶éç.jpgå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤Minioè¾åºçARNä¿¡æ¯ãæ´å¤æå³ARNçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾å±ä»¬çMinioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:redis --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:redis s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥ï¼éªè¯Redis\n\nå¯å¨redis-cliè¿ä¸ªRediså®¢æ·ç«¯ç¨åºæ¥æ£æ¥Redisä¸­çåå®¹. è¿è¡monitorRediså½ä»¤å°ä¼è¾åºå¨Redisä¸æ§è¡çæ¯ä¸ªå½ä»¤çã\n\nredis-cli -a yoursecret127.0.0.1:6379> monitorOK\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nå¨ä¸ä¸ä¸ªç»ç«¯ä¸­ï¼ä½ å°çå°Minioå¨Redisä¸æ§è¡çæä½ï¼\n\n127.0.0.1:6379> monitorOK1490686879.650649 [0 172.17.0.1:44710] "PING"1490686879.651061 [0 172.17.0.1:44710] "HSET" "minio_events" "images/myphoto.jpg" "{\\"Records\\":[{\\"eventVersion\\":\\"2.0\\",\\"eventSource\\":\\"minio:s3\\",\\"awsRegion\\":\\"us-east-1\\",\\"eventTime\\":\\"2017-03-28T07:41:19Z\\",\\"eventName\\":\\"s3:ObjectCreated:Put\\",\\"userIdentity\\":{\\"principalId\\":\\"minio\\"},\\"requestParameters\\":{\\"sourceIPAddress\\":\\"127.0.0.1:52234\\"},\\"responseElements\\":{\\"x-amz-request-id\\":\\"14AFFBD1ACE5F632\\",\\"x-minio-origin-endpoint\\":\\"http://192.168.86.115:9000\\"},\\"s3\\":{\\"s3SchemaVersion\\":\\"1.0\\",\\"configurationId\\":\\"Config\\",\\"bucket\\":{\\"name\\":\\"images\\",\\"ownerIdentity\\":{\\"principalId\\":\\"minio\\"},\\"arn\\":\\"arn:aws:s3:::images\\"},\\"object\\":{\\"key\\":\\"myphoto.jpg\\",\\"size\\":2586,\\"eTag\\":\\"5d284463f9da279f060f0ea4d11af098\\",\\"sequencer\\":\\"14AFFBD1ACE5F632\\"}},\\"source\\":{\\"host\\":\\"127.0.0.1\\",\\"port\\":\\"52234\\",\\"userAgent\\":\\"Minio (linux; amd64) minio-go/2.0.3 mc/2017-02-15T17:57:25Z\\"}}]}"\n\n\nå¨è¿æä»¬å¯ä»¥çå°Minioå¨minio_eventsè¿ä¸ªkeyä¸æ§è¡äºHSETå½ä»¤ã\n\nå¦æç¨çæ¯accessæ ¼å¼ï¼é£ä¹minio_eventså°±æ¯ä¸ä¸ªlist,Minioå°±ä¼è°ç¨RPUSHæ·»å å°listä¸­ãè¿ä¸ªlistçæ¶è´¹èä¼ä½¿ç¨BLPOPä»listçæå·¦ç«¯å é¤liståç´ ã\n\n\n# ä½¿ç¨NATSåå¸Minioäºä»¶\n\nå®è£ NATS.\n\n\n# ç¬¬ä¸æ­¥ï¼éæNATSå°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãåèä¸é¢çç¤ºä¾ä¿®æ¹NATSçéç½®:\n\n"nats": {    "1": {        "enable": true,        "address": "0.0.0.0:4222",        "subject": "bucketevents",        "username": "yourusername",        "password": "yoursecret",        "token": "",        "secure": false,        "pingInterval": 0        "streaming": {            "enable": false,            "clusterID": "",            "clientID": "",            "async": false,            "maxPubAcksInflight": 0        }    }},\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯Minio Serverè®©éç½®çæãbucketeventsæ¯NATSå¨è¿ä¸ªä¾å­ä¸­ä½¿ç¨çä¸»é¢ã\n\nMinioæå¡ä¹æ¯æ NATS Streaming mode ï¼è¿ç§æ¨¡å¼é¢å¤æä¾äºå Message/event persistence, At-least-once-delivery, ä»¥å Publisher rate limitingè¿æ ·çåè½ãå¦ææ³è®©Minioæå¡åééç¥å°NATS Streaming server,åèä¸é¢ç¤ºé¢è¿è¡éç½®ï¼\n\n"nats": {    "1": {        "enable": true,        "address": "0.0.0.0:4222",        "subject": "bucketevents",        "username": "yourusername",        "password": "yoursecret",        "token": "",        "secure": false,        "pingInterval": 0        "streaming": {            "enable": true,            "clusterID": "test-cluster",            "clientID": "minio-client",            "async": true,            "maxPubAcksInflight": 10        }    }},\n\n\næ´å¤å³äº clusterID, clientID çä¿¡æ¯ï¼è¯·ç NATS documentation. å³äº maxPubAcksInflight ï¼è¯·ç è¿é.\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦myminio serverä¸ææä»¶ ä»imageså­å¨æ¡¶éå é¤æèä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼äºä»¶å³è¢«è§¦åãå¨è¿éï¼ARNçå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:natsã æ´å¤æå³ARNçèµæï¼è¯·åèè¿éã\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:nats --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:nats s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥ï¼éªè¯NATS\n\nå¦æä½ ç¨çæ¯NATS serverï¼è¯·æ¥çä¸é¢çç¤ºä¾ç¨åºæ¥è®°å½æ·»å å°NATSçå­å¨æ¡¶éç¥ã\n\npackage main// Import Go and NATS packagesimport (    "log"    "runtime"    "github.com/nats-io/nats")func main() {    // Create server connection    natsConnection, _ := nats.Connect("nats://yourusername:yoursecret@localhost:4222")    log.Println("Connected")    // Subscribe to subject    log.Printf("Subscribing to subject \'bucketevents\'\\n")    natsConnection.Subscribe("bucketevents", func(msg *nats.Msg) {        // Handle the message        log.Printf("Received message \'%s\\n", string(msg.Data)+"\'")    })    // Keep the connection alive    runtime.Goexit()}\ngo run nats.go2016/10/12 06:39:18 Connected2016/10/12 06:39:18 Subscribing to subject \'bucketevents\'\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nnats.goç¤ºä¾ç¨åºå°äºä»¶éç¥æå°å°æ§å¶å°ã\n\ngo run nats.go2016/10/12 06:51:26 Connected2016/10/12 06:51:26 Subscribing to subject \'bucketevents\'2016/10/12 06:51:33 Received message \'{"EventType":"s3:ObjectCreated:Put","Key":"images/myphoto.jpg","Records":[{"eventVersion":"2.0","eventSource":"aws:s3","awsRegion":"us-east-1","eventTime":"2016-10-12T13:51:33Z","eventName":"s3:ObjectCreated:Put","userIdentity":{"principalId":"minio"},"requestParameters":{"sourceIPAddress":"[::1]:57106"},"responseElements":{},"s3":{"s3SchemaVersion":"1.0","configurationId":"Config","bucket":{"name":"images","ownerIdentity":{"principalId":"minio"},"arn":"arn:aws:s3:::images"},"object":{"key":"myphoto.jpg","size":56060,"eTag":"1d97bf45ecb37f7a7b699418070df08f","sequencer":"147CCD1AE054BFD0"}}}],"level":"info","msg":"","time":"2016-10-12T06:51:33-07:00"}\n\n\nå¦æä½ ç¨çæ¯NATS Streaming server,è¯·æ¥çä¸é¢çç¤ºä¾ç¨åºæ¥è®°å½æ·»å å°NATSçå­å¨æ¡¶éç¥ã\n\npackage main// Import Go and NATS packagesimport (    "fmt"    "runtime"    "github.com/nats-io/go-nats-streaming")func main() {    natsConnection, _ := stan.Connect("test-cluster", "test-client")    log.Println("Connected")    // Subscribe to subject    log.Printf("Subscribing to subject \'bucketevents\'\\n")    natsConnection.Subscribe("bucketevents", func(m *stan.Msg) {        // Handle the message        fmt.Printf("Received a message: %s\\n", string(m.Data))    })    // Keep the connection alive    runtime.Goexit()}\ngo run nats.go2017/07/07 11:47:40 Connected2017/07/07 11:47:40 Subscribing to subject \'bucketevents\'\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nnats.goç¤ºä¾ç¨åºå°äºä»¶éç¥æå°å°æ§å¶å°ã\n\nReceived a message: {"EventType":"s3:ObjectCreated:Put","Key":"images/myphoto.jpg","Records":[{"eventVersion":"2.0","eventSource":"minio:s3","awsRegion":"","eventTime":"2017-07-07T18:46:37Z","eventName":"s3:ObjectCreated:Put","userIdentity":{"principalId":"minio"},"requestParameters":{"sourceIPAddress":"192.168.1.80:55328"},"responseElements":{"x-amz-request-id":"14CF20BD1EFD5B93","x-minio-origin-endpoint":"http://127.0.0.1:9000"},"s3":{"s3SchemaVersion":"1.0","configurationId":"Config","bucket":{"name":"images","ownerIdentity":{"principalId":"minio"},"arn":"arn:aws:s3:::images"},"object":{"key":"myphoto.jpg","size":248682,"eTag":"f1671feacb8bbf7b0397c6e9364e8c92","contentType":"image/jpeg","userDefined":{"content-type":"image/jpeg"},"versionId":"1","sequencer":"14CF20BD1EFD5B93"}},"source":{"host":"192.168.1.80","port":"55328","userAgent":"Minio (linux; amd64) minio-go/2.0.4 mc/DEVELOPMENT.GOGET"}}],"level":"info","msg":"","time":"2017-07-07T11:46:37-07:00"}\n\n\n\n# ä½¿ç¨PostgreSQLåå¸Minioäºä»¶\n\nå®è£ PostgreSQL æ°æ®åºãä¸ºäºæ¼ç¤ºï¼æä»¬å°"postgres"ç¨æ·çå¯ç è®¾ä¸ºpasswordï¼å¹¶ä¸åå»ºäºä¸ä¸ªminio_eventsæ°æ®åºæ¥å­å¨äºä»¶ä¿¡æ¯ã\n\nè¿ä¸ªéç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace and accessã\n\nå¦æä½¿ç¨çæ¯namespaceæ ¼å¼ï¼Minioå°å­å¨æ¡¶éçå¯¹è±¡åæ­¥ææ°æ®åºè¡¨ä¸­çè¡ãæ¯ä¸è¡æä¸¤åï¼keyåvalueãkeyæ¯è¿ä¸ªå¯¹è±¡çå­å¨æ¡¶åå­å ä¸å¯¹è±¡åï¼valueé½æ¯ä¸ä¸ªæå³è¿ä¸ªMinioå¯¹è±¡çJSONæ ¼å¼çäºä»¶æ°æ®ãå¦æå¯¹è±¡æ´æ°æèå é¤ï¼è¡¨ä¸­ç¸åºçè¡ä¹ä¼ç¸åºçæ´æ°æèå é¤ã\n\nå¦æä½¿ç¨çæ¯access,Minioå°å°äºä»¶æ·»å å°è¡¨éï¼è¡æä¸¤åï¼event_time å event_dataãevent_timeæ¯äºä»¶å¨Minio serveréåççæ¶é´ï¼event_dataæ¯æå³è¿ä¸ªMinioå¯¹è±¡çJSONæ ¼å¼çäºä»¶æ°æ®ãå¨è¿ç§æ ¼å¼ä¸ï¼ä¸ä¼æè¡ä¼è¢«å é¤æèä¿®æ¹ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºçæ¯å¦ä½å¨namespaceæ ¼å¼ä¸ä½¿ç¨éç¥ç®æ ï¼*access*å·®ä¸å¤ï¼ä¸åèµè¿°ï¼æç¸ä¿¡ä½ å¯ä»¥è§¦ç±»æéï¼ä¸¾ä¸åä¸ï¼ä¸è¦è®©æå¤±æå¦ã\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nMinioè¦æ±PostgresSQL9.5çæ¬åä»¥ä¸ã Minioç¨äºPostgreSQL9.5å¼å¥çINSERT ON CONFLICT (aka UPSERT) ç¹æ§,ä»¥å9.4å¼å¥ç JSONB æ°æ®ç±»åã\n\n\n# ç¬¬äºæ­¥ï¼éæPostgreSQLå°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãPostgreSQLéç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çpostgresqlèç¹ä¸ï¼å¨è¿éä¸ºä½ çPostgreSQLå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çPostgreSQLçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°                 ç±»å       æè¿°\nenable             bool     (å¿é¡»)æ­¤éç½®æ¯å¦å¯ç¨\nformat             string   (å¿é¡») æ¯ namespace è¿æ¯ access\nconnectionString   string   (å¯é) PostgreSQLçè¿æ¥åæ° ãæ¯å¦å¯ä»¥ç¨æ¥è®¾ç½® sslmode\ntable              string   (å¿é¡») äºä»¶å¯¹åºçè¡¨åï¼å¦æè¯¥è¡¨ä¸å­å¨ï¼Mniio serverä¼å¨å¯å¨æ¶åå»ºã\nhost               string   (å¯é) PostgresSQLçä¸»æºåï¼é»è®¤æ¯localhost\nport               string   (å¯é) PostgreSQLçç«¯å£å·ï¼é»è®¤æ¯5432\nuser               string   (å¯é)æ°æ®åºç¨æ·åï¼é»è®¤æ¯è¿è¡Minio serverè¿ç¨çç¨æ·\npassword           string   (å¯é) æ°æ®åºå¯ç \ndatabase           string   (å¯é)åºå\n\nä¸é¢æ¯ä¸ä¸ªPostgreSQLéç½®ç¤ºä¾:\n\n"postgresql": {    "1": {        "enable": true,        "format": "namespace",        "connectionString": "sslmode=disable",        "table": "bucketevents",        "host": "127.0.0.1",        "port": "5432",        "user": "postgres",        "password": "password",        "database": "minio_events"    }}\n\n\næ³¨æä¸ä¸ï¼ä¸ºäºæ¼ç¤ºï¼å±ä»¬è¿æSSLç¦æäºï¼ä½æ¯ä¸ºäºå®å¨èµ·è§ï¼ä¸å»ºè®®å¨çäº§ç¯å¢è¿ä¹å¼ã\n\næ´æ°å®éç½®æä»¶åï¼éå¯Minio Serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼Minio Serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:postgresqlã\n\nåä¹åæè¿°çä¸æ ·ï¼ä½ ä¹å¯ä»¥æ·»å å¤ä¸ªPostreSQLå®ä¾ï¼åªè¦IDä¸éå¤å°±è¡ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼PostgreSQLä¸­ä¼insertä¸æ¡æ°çè®°å½æèä¸æ¡å·²ç»å­å¨çè®°å½ä¼è¢«updateï¼å¦æä¸ä¸ªå­å¨å¯¹è±¡è¢«å é¤ï¼ä¸æ¡å¯¹åºçè®°å½ä¹ä¼ä»PostgreSQLè¡¨ä¸­å é¤ãå æ­¤ï¼PostgreSQLè¡¨ä¸­çè¡ï¼å¯¹åºçå°±æ¯å­å¨æ¡¶éçä¸ä¸ªå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤ä¸­Minioè¾åºçARNä¿¡æ¯ãæ´å¤æå³ARNçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾Minioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\n# Create bucket named `images` in myminiomc mb myminio/images# Add notification configuration on the `images` bucket using the MySQL ARN. The --suffix argument filters events.mc events add myminio/images arn:minio:sqs:us-east-1:1:postgresql --suffix .jpg# Print out the notification configuration on the `images` bucket.mc events list myminio/imagesmc events list myminio/imagesarn:minio:sqs:us-east-1:1:postgresql s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯PostgreSQL\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\næå¼ä¸ä¸ªPostgreSQLç»ç«¯ååºè¡¨ bucketevents ä¸­ææçè®°å½ã\n\n$ psql -h 127.0.0.1 -U postgres -d minio_eventsminio_events=# select * from bucketevents;key                 |                      value--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- images/myphoto.jpg | {"Records": [{"s3": {"bucket": {"arn": "arn:aws:s3:::images", "name": "images", "ownerIdentity": {"principalId": "minio"}}, "object": {"key": "myphoto.jpg", "eTag": "1d97bf45ecb37f7a7b699418070df08f", "size": 56060, "sequencer": "147CE57C70B31931"}, "configurationId": "Config", "s3SchemaVersion": "1.0"}, "awsRegion": "us-east-1", "eventName": "s3:ObjectCreated:Put", "eventTime": "2016-10-12T21:18:20Z", "eventSource": "aws:s3", "eventVersion": "2.0", "userIdentity": {"principalId": "minio"}, "responseElements": {}, "requestParameters": {"sourceIPAddress": "[::1]:39706"}}]}(1 row)\n\n\n\n# ä½¿ç¨MySQLåå¸Minioäºä»¶\n\nå®è£ MySQL. ä¸ºäºæ¼ç¤ºï¼æä»¬å°"postgres"ç¨æ·çå¯ç è®¾ä¸ºpasswordï¼å¹¶ä¸åå»ºäºä¸ä¸ªminiodbæ°æ®åºæ¥å­å¨äºä»¶ä¿¡æ¯ã\n\nè¿ä¸ªéç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace and accessã\n\nå¦æä½¿ç¨çæ¯namespaceæ ¼å¼ï¼Minioå°å­å¨æ¡¶éçå¯¹è±¡åæ­¥ææ°æ®åºè¡¨ä¸­çè¡ãæ¯ä¸è¡æä¸¤åï¼key_nameåvalueãkey_nameæ¯è¿ä¸ªå¯¹è±¡çå­å¨æ¡¶åå­å ä¸å¯¹è±¡åï¼valueé½æ¯ä¸ä¸ªæå³è¿ä¸ªMinioå¯¹è±¡çJSONæ ¼å¼çäºä»¶æ°æ®ãå¦æå¯¹è±¡æ´æ°æèå é¤ï¼è¡¨ä¸­ç¸åºçè¡ä¹ä¼ç¸åºçæ´æ°æèå é¤ã\n\nå¦æä½¿ç¨çæ¯access,Minioå°å°äºä»¶æ·»å å°è¡¨éï¼è¡æä¸¤åï¼event_time å event_dataãevent_timeæ¯äºä»¶å¨Minio serveréåççæ¶é´ï¼event_dataæ¯æå³è¿ä¸ªMinioå¯¹è±¡çJSONæ ¼å¼çäºä»¶æ°æ®ãå¨è¿ç§æ ¼å¼ä¸ï¼ä¸ä¼æè¡ä¼è¢«å é¤æèä¿®æ¹ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºçæ¯å¦ä½å¨namespaceæ ¼å¼ä¸ä½¿ç¨éç¥ç®æ ï¼*access*å·®ä¸å¤ï¼ä¸åèµè¿°ã\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nMinioè¦æ±MySQL çæ¬ 5.7.8åä»¥ä¸ï¼Minioä½¿ç¨äºMySQL5.7.8çæ¬å¼å¥ç JSON æ°æ®ç±»åãæä»¬ä½¿ç¨çæ¯MySQL5.7.17è¿è¡çæµè¯ã\n\n\n# ç¬¬äºæ­¥ï¼éæMySQLå°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãMySQLéç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çmysqlèç¹ä¸ï¼å¨è¿éä¸ºä½ çMySQLå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çPostgreSQLçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°          ç±»å       æè¿°\nenable      bool     (å¿é¡»)æ­¤éç½®æ¯å¦å¯ç¨ï¼\nformat      string   (å¿é¡»)æ¯ namespace è¿æ¯ access\ndsnString   string   (å¯é)MySQLç Data-Source-Nameè¿æ¥ä¸² ãå¦ææ²¡è®¾å¼ï¼è¿æ¥ä¿¡æ¯å°ä½¿ç¨ä¸ååæ°ï¼ host,\n                     port, user, password ä»¥å database\ntable       string   (å¿é¡») äºä»¶å¯¹åºçè¡¨åï¼å¦æè¯¥è¡¨ä¸å­å¨ï¼Mniio serverä¼å¨å¯å¨æ¶åå»ºã\nhost        string   MySQL serverä¸»æºå (å¦æ dsnString æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\nport        string   MySQL serverç«¯å£å· (å¦æ dsnString æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\nuser        string   æ°æ®åºç¨æ·å (å¦æ dsnString æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\npassword    string   æ°æ®åºå¯ç (å¦æ dsnString æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\ndatabase    string   æ°æ®åºå(å¦æ dsnString æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\n\nä¸é¢æ¯ä¸ä¸ªMySQLéç½®ç¤ºä¾:\n\n"mysql": {        "1": {                "enable": true,                "dsnString": "",                "table": "minio_images",                "host": "172.17.0.1",                "port": "3306",                "user": "root",                "password": "password",                "database": "miniodb"        }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯Minio Serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼Minio Serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mysqlã\n\nåä¹åæè¿°çä¸æ ·ï¼ä½ ä¹å¯ä»¥æ·»å å¤ä¸ªMySQLå®ä¾ï¼åªè¦IDä¸éå¤å°±è¡ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼MySQLä¸­ä¼insertä¸æ¡æ°çè®°å½æèä¸æ¡å·²ç»å­å¨çè®°å½ä¼è¢«updateï¼å¦æä¸ä¸ªå­å¨å¯¹è±¡è¢«å é¤ï¼ä¸æ¡å¯¹åºçè®°å½ä¹ä¼ä»MySQLè¡¨ä¸­å é¤ãå æ­¤ï¼MySQLè¡¨ä¸­çè¡ï¼å¯¹åºçå°±æ¯å­å¨æ¡¶éçä¸ä¸ªå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤Minioè¾åºçARNä¿¡æ¯ãæ´å¤æå³ARNçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾å±ä»¬çMinioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\n# Create bucket named `images` in myminiomc mb myminio/images# Add notification configuration on the `images` bucket using the MySQL ARN. The --suffix argument filters events.mc events add myminio/images arn:minio:sqs:us-east-1:1:postgresql --suffix .jpg# Print out the notification configuration on the `images` bucket.mc events list myminio/imagesarn:minio:sqs:us-east-1:1:postgresql s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯MySQL\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\næå¼ä¸ä¸ªMySQLç»ç«¯ååºè¡¨ minio_images ä¸­ææçè®°å½ã\n\n$ mysql -h 172.17.0.1 -P 3306 -u root -p miniodbmysql> select * from minio_images;+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| key_name           | value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| images/myphoto.jpg | {"Records": [{"s3": {"bucket": {"arn": "arn:aws:s3:::images", "name": "images", "ownerIdentity": {"principalId": "minio"}}, "object": {"key": "myphoto.jpg", "eTag": "467886be95c8ecfd71a2900e3f461b4f", "size": 26, "sequencer": "14AC59476F809FD3"}, "configurationId": "Config", "s3SchemaVersion": "1.0"}, "awsRegion": "us-east-1", "eventName": "s3:ObjectCreated:Put", "eventTime": "2017-03-16T11:29:00Z", "eventSource": "aws:s3", "eventVersion": "2.0", "userIdentity": {"principalId": "minio"}, "responseElements": {"x-amz-request-id": "14AC59476F809FD3", "x-minio-origin-endpoint": "http://192.168.86.110:9000"}, "requestParameters": {"sourceIPAddress": "127.0.0.1:38260"}}]} |+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.01 sec)\n\n\n\n# ä½¿ç¨Kafkaåå¸Minioäºä»¶\n\nå®è£ Apache Kafka.\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nMinioè¦æ±Kafkaçæ¬0.10æè0.9.Minioåé¨ä½¿ç¨äº Shopify/sarama åºï¼å æ­¤éè¦åè¯¥åºæåæ ·ççæ¬å¼å®¹æ§ã\n\n\n# ç¬¬äºæ­¥ï¼éæKafkaå°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãåèä¸é¢çç¤ºä¾æ´æ°Kafkaéç½®ï¼\n\n"kafka": {    "1": {        "enable": true,        "brokers": ["localhost:9092"],        "topic": "bucketevents"    }}\n\n\néå¯Minio serverè®©éç½®çæãbucketeventsæ¯æ¬ç¤ºä¾ç¨å°çKafkaä¸»é¢ï¼topicï¼ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼äºä»¶å°è¢«è§¦åãå¨è¿éï¼ARNçå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:kafkaãæ´å¤æå³ARNçèµæï¼è¯·åèè¿éã\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:kafka --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:kafka s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯Kafka\n\næä»¬ä½¿ç¨ kafkacat å°ææçéç¥è¾åºå°æ§å¶å°ã\n\nkafkacat -C -b localhost:9092 -t bucketevents\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ JPEGå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nkafkacat è¾åºäºä»¶éç¥å°æ§å¶å°ã\n\nkafkacat -b localhost:9092 -t bucketevents{"EventType":"s3:ObjectCreated:Put","Key":"images/myphoto.jpg","Records":[{"eventVersion":"2.0","eventSource":"aws:s3","awsRegion":"us-east-1","eventTime":"2017-01-31T10:01:51Z","eventName":"s3:ObjectCreated:Put","userIdentity":{"principalId":"88QR09S7IOT4X1IBAQ9B"},"requestParameters":{"sourceIPAddress":"192.173.5.2:57904"},"responseElements":{"x-amz-request-id":"149ED2FD25589220","x-minio-origin-endpoint":"http://192.173.5.2:9000"},"s3":{"s3SchemaVersion":"1.0","configurationId":"Config","bucket":{"name":"images","ownerIdentity":{"principalId":"88QR09S7IOT4X1IBAQ9B"},"arn":"arn:aws:s3:::images"},"object":{"key":"myphoto.jpg","size":541596,"eTag":"04451d05b4faf4d62f3d538156115e2a","sequencer":"149ED2FD25589220"}}}],"level":"info","msg":"","time":"2017-01-31T15:31:51+05:30"}\n\n\n\n# ä½¿ç¨Webhookåå¸Minioäºä»¶\n\nWebhooks éç¨æ¨çæ¹å¼è·åæ°æ®ï¼èä¸æ¯ä¸ç´å»æåã\n\n\n# ç¬¬ä¸æ­¥ï¼éæMySQLå°Minio\n\nMinio Serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãåèä¸é¢çç¤ºä¾æ´æ°Webhookéç½®ï¼\n\n"webhook": {  "1": {    "enable": true,    "endpoint": "http://localhost:3000/"}\n\n\nendpointæ¯çå¬webhookéç¥çæå¡ãä¿å­éç½®æä»¶å¹¶éå¯Minioæå¡è®©ééç½®çæãæ³¨æä¸ä¸ï¼å¨éå¯Minioæ¶ï¼è¿ä¸ªendpointå¿é¡»æ¯å¯å¨å¹¶ä¸å¯è®¿é®å°ã\n\n\n# ç¬¬äºæ­¥ï¼ä½¿ç¨Minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼äºä»¶å°è¢«è§¦åãå¨è¿éï¼ARNçå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:webhookãæ´å¤æå³ARNçèµæï¼è¯·åèè¿éã\n\nmc mb myminio/imagesmc mb myminio/images-thumbnailmc events add myminio/images arn:minio:sqs:us-east-1:1:webhook --events put --suffix .jpg\n\n\néªè¯äºä»¶éç¥æ¯å¦éç½®æ­£ç¡®ï¼\n\nmc events list myminio/images\n\n\nä½ åºè¯¥å¯ä»¥æ¶å°å¦ä¸çååºï¼\n\narn:minio:sqs:us-east-1:1:webhook   s3:ObjectCreated:*   Filter: suffix=".jpg"\n\n\n\n# ç¬¬ä¸æ­¥ï¼éç¨Thumbnailerè¿è¡éªè¯\n\næä»¬ä½¿ç¨ Thumbnailer æ¥çå¬Minioéç¥ãå¦æææä»¶ä¸ä¼ äºæ¯Minioæå¡ï¼Thumnailerçå¬å°è¯¥éç¥ï¼çæä¸ä¸ªç¼©ç¥å¾å¹¶ä¸ä¼ å°Minioæå¡ãå®è£Thumbnailer:\n\ngit clone https://github.com/minio/thumbnailer/npm install\n\n\nç¶åæå¼Thumbnailerçconfig/webhook.jsonéç½®æä»¶ï¼æ·»å æå³Minio serverçéç½®ï¼ä½¿ç¨ä¸é¢çæ¹å¼å¯å¨Thumbnailer:\n\nNODE_ENV=webhook node thumbnail-webhook.js\n\n\nThumbnailerè¿è¡å¨http://localhost:3000/ãä¸ä¸æ­¥ï¼éç½®Minio server,è®©å¶åéæ¶æ¯å°è¿ä¸ªURLï¼ç¬¬ä¸æ­¥æå°çï¼ï¼å¹¶ä½¿ç¨ mc æ¥è®¾ç½®å­å¨æ¡¶éç¥ï¼ç¬¬äºæ­¥æå°çï¼ãç¶åä¸ä¼ ä¸å¼ å¾çå°Minio server:\n\nmc cp ~/images.jpg myminio/images.../images.jpg:  8.31 KB / 8.31 KB âââââââââââââââââââââââââââââââââââââ 100.00% 59.42 KB/s 0s\n\n\nç¨ç­çå»ï¼ç¶åä½¿ç¨mc lsæ£æ¥å­å¨æ¡¶çåå®¹ -ï¼ä½ å°çå°æä¸ªç¼©ç¥å¾åºç°äºã\n\nmc ls myminio/images-thumbnail[2017-02-08 11:39:40 IST]   992B images-thumbnail.jpg\n\n\næ³¨æ å¦æä½ ç¨çæ¯ distributed Minio,è¯·ä¿®æ¹ææèç¹ç ~/.minio/config.jsonã\n\n> åæ: https://docs.min.io/docs/minio-bucket-notification-guide.html',normalizedContent:'# minioå­å¨æ¡¶éç¥æå\n\nå­å¨æ¡¶ï¼bucketï¼å¦æåçæ¹å,æ¯å¦ä¸ä¼ å¯¹è±¡åå é¤å¯¹è±¡ï¼å¯ä»¥ä½¿ç¨å­å¨æ¡¶äºä»¶éç¥æºå¶è¿è¡çæ§ï¼å¹¶éè¿ä»¥ä¸æ¹å¼åå¸åºå»:\n\nnotification targets\namqp\nmqtt\nelasticsearch\nredis\nnats\npostgresql\nmysql\napache kafka\nwebhooks\n\n\n# åææ¡ä»¶\n\n * ä»è¿éä¸è½½å¹¶å®è£minio serverã\n * ä»è¿éä¸è½½å¹¶å®è£minio clientã\n\n\n# ä½¿ç¨amqpåå¸minioäºä»¶\n\nä»è¿éä¸è½½å®è£rabbitmqã\n\n\n# ç¬¬ä¸æ­¥: å°amqp endpointæ·»å å°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãamqpéç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çamqpèç¹ä¸ï¼å¨è¿éä¸ºä½ çamqpå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çamqp endpointçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°             ç±»å       æè¿°\nenable         bool     (å¿é¡») æ­¤amqp server endpointæ¯å¦å¯ç¨\nurl            string   (å¿é¡») amqp server endpoint, ä¾å¦.\n                        amqp://myuser:mypassword@localhost:5672\nexchange       string   exchangeåç§°\nroutingkey     string   åå¸ç¨çrouting key\nexchangetype   string   exchangeç±»å\ndeliverymode   uint8    åå¸æ¹å¼ã 0æ1 - ç¬æ; 2 - æä¹ã\nmandatory      bool     publishing related bool.\nimmediate      bool     publishing related bool.\ndurable        bool     exchange declaration related bool.\ninternal       bool     exchange declaration related bool.\nnowait         bool     exchange declaration related bool.\nautodeleted    bool     exchange declaration related bool.\n\nä¸é¢å±ç¤ºçæ¯rabbitmqçéç½®ç¤ºä¾:\n\n"amqp": {    "1": {        "enable": true,        "url": "amqp://myuser:mypassword@localhost:5672",        "exchange": "bucketevents",        "routingkey": "bucketlogs",        "exchangetype": "fanout",        "deliverymode": 0,        "mandatory": false,        "immediate": false,        "durable": false,        "internal": false,        "nowait": false,        "autodeleted": false    }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯minio serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼minio serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ sqs arns: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:amqpã\n\nminioæ¯ærabbitmqä¸­ææçäº¤æ¢æ¹å¼ï¼è¿æ¬¡æä»¬éç¨ fanout äº¤æ¢ã\n\næ³¨æä¸ä¸ï¼ä½ å¯ä»¥å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªamqpæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªamqpæå¡å®ä¾æä¸åçid (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\nå¦æä¸ä¸ªjpegå¾çä¸ä¼ å°myminio serveréçimages å­å¨æ¡¶æèä»æ¡¶ä¸­å é¤ï¼ä¸ä¸ªå­å¨æ¡¶äºä»¶éç¥å°±ä¼è¢«è§¦åã è¿éarnå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:amqpï¼æ³äºè§£æ´å¤å³äºarnçä¿¡æ¯ï¼è¯·åèaws arn documentation.\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:amqp --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:amqp s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥:å¨rabbitmqä¸è¿è¡éªè¯\n\nä¸é¢å°è¦åºåºçpythonç¨åºä¼ç­å¾éåäº¤æ¢tbucketeventså¹¶å¨æ§å¶å°ä¸­è¾åºäºä»¶éç¥ãæä»¬ä½¿ç¨çæ¯pika python client æ¥å®ç°æ­¤åè½ã\n\n#!/usr/bin/env pythonimport pikaconnection = pika.blockingconnection(pika.connectionparameters(        host=\'localhost\'))channel = connection.channel()channel.exchange_declare(exchange=\'bucketevents\',                         exchange_type=\'fanout\')result = channel.queue_declare(exclusive=false)queue_name = result.method.queuechannel.queue_bind(exchange=\'bucketevents\',                   queue=queue_name)print(\' [*] waiting for logs. to exit press ctrl+c\')def callback(ch, method, properties, body):    print(" [x] %r" % body)channel.basic_consume(callback,                      queue=queue_name,                      no_ack=false)channel.start_consuming()\n\n\næ§è¡ç¤ºä¾ä¸­çpythonç¨åºæ¥è§å¯rabbitmqäºä»¶ã\n\npython rabbit.py\n\n\nå¦å¼ä¸ä¸ªterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°imageså­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nä¸æ¦ä¸ä¼ å®æ¯ï¼ä½ åºè¯¥ä¼éè¿rabbitmqæ¶å°ä¸é¢çäºä»¶éç¥ã\n\npython rabbit.pyâ{ârecordsâ:[{âeventversionâ:â2.0",âeventsourceâ:âaws:s3",âawsregionâ:âus-east-1",âeventtimeâ:â2016â09â08t22:34:38.226zâ,âeventnameâ:âs3:objectcreated:putâ,âuseridentityâ:{âprincipalidâ:âminioâ},ârequestparametersâ:{âsourceipaddressâ:â10.1.10.150:44576"},âresponseelementsâ:{},âs3":{âs3schemaversionâ:â1.0",âconfigurationidâ:âconfigâ,âbucketâ:{ânameâ:âimagesâ,âowneridentityâ:{âprincipalidâ:âminioâ},âarnâ:âarn:aws:s3:::imagesâ},âobjectâ:{âkeyâ:âmyphoto.jpgâ,âsizeâ:200436,âsequencerâ:â147279eaf9f40933"}}}],âlevelâ:âinfoâ,âmsgâ:ââ,âtimeâ:â2016â09â08t15:34:38â07:00"}\\n\n\n\n\n# ä½¿ç¨mqttåå¸minioäºä»¶\n\nä» è¿éå®è£mqtt brokerã\n\n\n# ç¬¬ä¸æ­¥: æ·»å mqtt endpointå°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãmqttéç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çmqttèç¹ä¸ï¼å¨è¿éä¸ºä½ çmqttå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çmqtt endpointçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°         ç±»å       æè¿°\nenable     bool     (å¿é¡») è¿ä¸ª server endpointæ¯å¦å¯ç¨?\nbroker     string   (å¿é¡») mqtt server endpoint, ä¾å¦. tcp://localhost:1883\ntopic      string   (å¿é¡») è¦åå¸çmqttä¸»é¢çåç§°, ä¾å¦. minio\nqos        int      è®¾ç½®æå¡è´¨éçº§å«\nclientid   string   mqttä»£çè¯å«minioçå¯ä¸id\nusername   string   è¿æ¥mqtt serverçç¨æ·å (å¦æéè¦çè¯)\npassword   string   é¾æ¥mqtt serverçå¯ç  (å¦æéè¦çè¯)\n\nä»¥ä¸æ¯ä¸ä¸ªmqttçéç½®ç¤ºä¾:\n\n"mqtt": {    "1": {        "enable": true,        "broker": "tcp://localhost:1883",        "topic": "minio",        "qos": 1,        "clientid": "minio",        "username": "",        "password": ""    }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯minio serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼minio serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ sqs arns: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mqttã\n\nminioæ¯æä»»ä½æ¯æmqtt 3.1æ3.1.1çmqttæå¡å¨ï¼å¹¶ä¸å¯ä»¥éè¿tcpï¼tlsæwebsocketè¿æ¥ä½¿ç¨tcp://, tls://, or ws://åå«ä½ä¸ºä»£çurlçæ¹æ¡ã æ´å¤ä¿¡æ¯ï¼è¯·åè go clientã\n\næ³¨æä¸ä¸ï¼ä½ è¿æ¯åä¹åamqpä¸æ ·å¯ä»¥å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªmqttæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªmqttæå¡å®ä¾æä¸åçid (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\nå¦æä¸ä¸ªjpegå¾çä¸ä¼ å°myminio serveréçimages å­å¨æ¡¶æèä»æ¡¶ä¸­å é¤ï¼ä¸ä¸ªå­å¨æ¡¶äºä»¶éç¥å°±ä¼è¢«è§¦åã è¿éarnå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mqttã\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:mqtt --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:amqp s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥ï¼éªè¯mqtt\n\nä¸é¢çpythonç¨åºç­å¾mqttä¸»é¢/ minioï¼å¹¶å¨æ§å¶å°ä¸æå°äºä»¶éç¥ã æä»¬ä½¿ç¨paho-mqttåºæ¥æ§è¡æ­¤æä½ã\n\n#!/usr/bin/env pythonfrom __future__ import print_functionimport paho.mqtt.client as mqtt# the callback for when the client receives a connack response from the server.def on_connect(client, userdata, flags, rc):    print("connected with result code", rc)    # subscribing in on_connect() means that if we lose the connection and    # reconnect then subscriptions will be renewed.    client.subscribe("/minio")# the callback for when a publish message is received from the server.def on_message(client, userdata, msg):    print(msg.payload)client = mqtt.client()client.on_connect = on_connectclient.on_message = on_messageclient.connect("localhost:1883", 1883, 60)# blocking call that processes network traffic, dispatches callbacks and# handles reconnecting.# other loop*() functions are available that give a threaded interface and a# manual interface.client.loop_forever()\n\n\næ§è¡è¿ä¸ªpythonç¤ºä¾ç¨åºæ¥è§å¯mqttäºä»¶ã\n\npython mqtt.py\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nä¸æ¦ä¸ä¼ å®æ¯ï¼ä½ åºè¯¥ä¼éè¿mqttæ¶å°ä¸é¢çäºä»¶éç¥ã\n\npython mqtt.py{ârecordsâ:[{âeventversionâ:â2.0",âeventsourceâ:âaws:s3",âawsregionâ:âus-east-1",âeventtimeâ:â2016â09â08t22:34:38.226zâ,âeventnameâ:âs3:objectcreated:putâ,âuseridentityâ:{âprincipalidâ:âminioâ},ârequestparametersâ:{âsourceipaddressâ:â10.1.10.150:44576"},âresponseelementsâ:{},âs3":{âs3schemaversionâ:â1.0",âconfigurationidâ:âconfigâ,âbucketâ:{ânameâ:âimagesâ,âowneridentityâ:{âprincipalidâ:âminioâ},âarnâ:âarn:aws:s3:::imagesâ},âobjectâ:{âkeyâ:âmyphoto.jpgâ,âsizeâ:200436,âsequencerâ:â147279eaf9f40933"}}}],âlevelâ:âinfoâ,âmsgâ:ââ,âtimeâ:â2016â09â08t15:34:38â07:00"}\n\n\n\n# ä½¿ç¨elasticsearchåå¸minioäºä»¶\n\nå®è£ elasticsearch ã\n\nè¿ä¸ªéç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace and accessã\n\nå¦æä½¿ç¨çæ¯ namespace æ ¼å¼, minioå°æ¡¶ä¸­çå¯¹è±¡ä¸ç´¢å¼ä¸­çææ¡£è¿è¡åæ­¥ãå¯¹äºminioçæ¯ä¸ä¸ªäºä»¶ï¼esé½ä¼åå»ºä¸ä¸ªdocument,è¿ä¸ªdocumentçidå°±æ¯å­å¨æ¡¶ä»¥åå­å¨å¯¹è±¡çåç§°ãäºä»¶çå¶ä»ç»èå­å¨å¨documentçæ­£æä¸­ãå æ­¤ï¼å¦æä¸ä¸ªå·²ç»å­å¨çå¯¹è±¡å¨minioä¸­è¢«è¦çï¼å¨esä¸­çç¸å¯¹åºçdocumentä¹ä¼è¢«æ´æ°ãå¦æä¸ä¸ªå¯¹è±¡è¢«å é¤ï¼ç¸å¯¹åºçdocumentä¹ä¼ä»indexä¸­å é¤ã\n\nå¦æä½¿ç¨çæ¯accessæ ¼å¼ï¼minioå°äºä»¶ä½ä¸ºdocumentå å°esçindexä¸­ãå¯¹äºæ¯ä¸ä¸ªäºä»¶ï¼esåæ ·ä¼åå»ºä¸ä¸ªdocument,è¿ä¸ªdocumentåå«äºä»¶çææç»èï¼documentçæ¶é´æ³è®¾ç½®ä¸ºäºä»¶çæ¶é´æ³ï¼å¹¶å°è¯¥documentå å°esçindexä¸­ãè¿ä¸ªdocumentçidæ¯ç±eséæºçæçãå¨accessæ ¼å¼ä¸ï¼æ²¡æææ¡£ä¼è¢«å é¤æèä¿®æ¹ï¼å¯¹äºä¸ä¸ªå¯¹è±¡çæä½ï¼é½ä¼çææ°çdocumentéå å°indexä¸­ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºçæ¯å¨namespaceæ ¼å¼ä¸ï¼å¦ä½ä½¿ç¨éç¥ç®æ ãå¦ä¸ç§æ ¼å¼åè¿ä¸ªå¾ç±»ä¼¼ï¼ä¸ºäºä¸è®©ä½ ä»¬è¯´æå¢¨è¿¹ï¼å°±ä¸åèµè¿°äºã\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nminioè¦æ±ä½¿ç¨çæ¯es 5.xç³»ç»çæ¬ãå¦æä½¿ç¨çæ¯ä½çæ¬çesï¼ä¹æ²¡å³ç³»ï¼eså®æ¹æ¯æåçº§è¿ç§»ï¼è¯¦æè¯·çè¿éã\n\n\n# ç¬¬äºæ­¥ï¼æeséæå°minioä¸­\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãeséç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çelasticsearchèç¹ä¸ï¼å¨è¿éä¸ºä½ çeså®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çesçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°       ç±»å       æè¿°\nenable   bool     (å¿é¡») æ¯å¦å¯ç¨è¿ä¸ªéç½®?\nformat   string   (å¿é¡») æ¯namespace è¿æ¯ access\nurl      string   (å¿é¡») eså°åï¼æ¯å¦: http://localhost:9200\nindex    string   (å¿é¡») ç»minioç¨çindex\n\nä»¥ä¸æ¯esçä¸ä¸ªéç½®ç¤ºä¾:\n\n"elasticsearch": {    "1": {        "enable": true,        "format": "namespace",        "url": "http://127.0.0.1:9200",        "index": "minio_events"    }},\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯minio serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼minio serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ sqs arns: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:elasticsearchã\n\næ³¨æä¸ä¸ï¼ä½ åå¯ä»¥åä¸æ¬¡å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªesæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªesæå¡å®ä¾æä¸åçid (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ãä¸æ¦ææä»¶è¢«åå»ºæèè¦çï¼ä¸ä¸ªæ°çesçdocumentä¼è¢«åå»ºæèæ´æ°å°ä¹åå±éçindexéãå¦æä¸ä¸ªå·²ç»å­å¨çå¯¹è±¡è¢«å é¤ï¼è¿ä¸ªå¯¹åºçdocumentä¹ä¼ä»indexä¸­å é¤ãå æ­¤ï¼è¿ä¸ªes indexéçè¡ï¼å°±æ å°çimageså­å¨æ¡¶éçå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤minioè¾åºçarnä¿¡æ¯ãæ´å¤æå³arnçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾å±ä»¬çminioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:elasticsearch --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:elasticsearch s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯es\n\nä¸ä¼ ä¸å¼ å¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nä½¿ç¨curlæ¥å°minio_events indexä¸­çåå®¹ã\n\n$ curl  "http://localhost:9200/minio_events/_search?pretty=true"{  "took" : 40,  "timed_out" : false,  "_shards" : {    "total" : 5,    "successful" : 5,    "failed" : 0  },  "hits" : {    "total" : 1,    "max_score" : 1.0,    "hits" : [      {        "_index" : "minio_events",        "_type" : "event",        "_id" : "images/myphoto.jpg",        "_score" : 1.0,        "_source" : {          "records" : [            {              "eventversion" : "2.0",              "eventsource" : "minio:s3",              "awsregion" : "us-east-1",              "eventtime" : "2017-03-30t08:00:41z",              "eventname" : "s3:objectcreated:put",              "useridentity" : {                "principalid" : "minio"              },              "requestparameters" : {                "sourceipaddress" : "127.0.0.1:38062"              },              "responseelements" : {                "x-amz-request-id" : "14b09a09703fc47b",                "x-minio-origin-endpoint" : "http://192.168.86.115:9000"              },              "s3" : {                "s3schemaversion" : "1.0",                "configurationid" : "config",                "bucket" : {                  "name" : "images",                  "owneridentity" : {                    "principalid" : "minio"                  },                  "arn" : "arn:aws:s3:::images"                },                "object" : {                  "key" : "myphoto.jpg",                  "size" : 6474,                  "etag" : "a3410f4f8788b510d6f19c5067e60a90",                  "sequencer" : "14b09a09703fc47b"                }              },              "source" : {                "host" : "127.0.0.1",                "port" : "38062",                "useragent" : "minio (linux; amd64) minio-go/2.0.3 mc/2017-02-15t17:57:25z"              }            }          ]        }      }    ]  }}\n\n\nè¿ä¸ªè¾åºæ¾ç¤ºå¨esä¸­ä¸ºè¿ä¸ªäºä»¶åå»ºäºä¸ä¸ªdocumentã\n\nè¿éæä»¬å¯ä»¥çå°è¿ä¸ªdocument idå°±æ¯å­å¨æ¡¶åå¯¹è±¡çåç§°ãå¦æç¨çæ¯accessæ ¼å¼ï¼è¿ä¸ªdocument idå°±æ¯ç±eséæºçæçã\n\n\n# ä½¿ç¨redisåå¸minioäºä»¶\n\nå®è£ redisãä¸ºäºæ¼ç¤ºï¼æä»¬å°æ°æ®åºå¯ç è®¾ä¸º"yoursecret"ã\n\nè¿ç§éç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace å accessã\n\nå¦æç¨çæ¯namespaceeæ ¼å¼ï¼minioå°å­å¨æ¡¶éçå¯¹è±¡åæ­¥æredis hashä¸­çæ¡ç®ãå¯¹äºæ¯ä¸ä¸ªæ¡ç®ï¼å¯¹åºä¸ä¸ªå­å¨æ¡¶éçå¯¹è±¡ï¼å¶keyé½è¢«è®¾ä¸º"å­å¨æ¡¶åç§°/å¯¹è±¡åç§°"ï¼valueé½æ¯ä¸ä¸ªæå³è¿ä¸ªminioå¯¹è±¡çjsonæ ¼å¼çäºä»¶æ°æ®ãå¦æå¯¹è±¡æ´æ°æèå é¤ï¼hashä¸­å¯¹è±¡çæ¡ç®ä¹ä¼ç¸åºçæ´æ°æèå é¤ã\n\nå¦æä½¿ç¨çæ¯access,minioä½¿ç¨rpushå°äºä»¶æ·»å å°listä¸­ãè¿ä¸ªlistä¸­æ¯ä¸ä¸ªåç´ é½æ¯ä¸ä¸ªjsonæ ¼å¼çlist,è¿ä¸ªlistä¸­åæä¸¤ä¸ªåç´ ï¼ç¬¬ä¸ä¸ªåç´ æ¯æ¶é´æ³çå­ç¬¦ä¸²ï¼ç¬¬äºä¸ªåç´ æ¯ä¸ä¸ªå«æå¨è¿ä¸ªå­å¨æ¡¶ä¸è¿è¡æä½çäºä»¶æ°æ®çjsonå¯¹è±¡ãå¨è¿ç§æ ¼å¼ä¸ï¼listä¸­çåç´ ä¸ä¼æ´æ°æèå é¤ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºå¦ä½å¨namespaceåaccessæ ¼å¼ä¸ä½¿ç¨éç¥ç®æ ã\n\n\n# ç¬¬ä¸æ­¥ï¼éærediså°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãrediséç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çredisèç¹ä¸ï¼å¨è¿éä¸ºä½ çrediså®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çredisç«¯çåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­çé®å¼å¯¹éé¢å¼çéåã\n\nåæ°         ç±»å       æè¿°\nenable     bool     (å¿é¡») è¿ä¸ªéç½®æ¯å¦å¯ç¨?\nformat     string   (å¿é¡») æ¯ namespace è¿æ¯ access\naddress    string   (å¿é¡») redisæå¡å°åï¼æ¯å¦: localhost:6379\npassword   string   (å¯é) redisæå¡å¯ç \nkey        string   (å¿é¡») äºä»¶è¦å­å¨å°redis\n                    keyçåç§°ãå¦æç¨çæ¯namespaceæ ¼å¼çè¯ï¼åæ¯ä¸ä¸ªhash,å¦ææ¯accessæ ¼å¼çè¯ï¼åæ¯ä¸ä¸ªlist\n\nä¸é¢æ¯ä¸ä¸ªrediséç½®ç¤ºä¾:\n\n"redis": {    "1": {        "enable": true,        "address": "127.0.0.1:6379",        "password": "yoursecret",        "key": "bucketevents"    }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯minio serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼minio serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ sqs arns: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:redisã\n\næ³¨æä¸ä¸ï¼ä½ æ°¸è¿é½å¯ä»¥å¬ä»ä½ åå¿çæ³æ³ï¼æ³éå ä¸ªredisæå¡å°±éå ä¸ªï¼åªè¦æ¯ä¸ªredisæå¡å®ä¾æä¸åçid (æ¯å¦åé¢ç¤ºä¾ä¸­ç"1") åéç½®ä¿¡æ¯ã\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ãä¸æ¦ææä»¶è¢«åå»ºæèè¦çï¼ä¸ä¸ªæ°çkeyä¼è¢«åå»º,æèä¸ä¸ªå·²ç»å­å¨çkeyå°±ä¼è¢«æ´æ°å°ä¹åéç½®å¥½çredis hashéãå¦æä¸ä¸ªå·²ç»å­å¨çå¯¹è±¡è¢«å é¤ï¼è¿ä¸ªå¯¹åºçkeyä¹ä¼ä»hashä¸­å é¤ãå æ­¤ï¼è¿ä¸ªredis hashéçè¡ï¼å°±æ å°çimageså­å¨æ¡¶éç.jpgå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤minioè¾åºçarnä¿¡æ¯ãæ´å¤æå³arnçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾å±ä»¬çminioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:redis --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:redis s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥ï¼éªè¯redis\n\nå¯å¨redis-cliè¿ä¸ªrediså®¢æ·ç«¯ç¨åºæ¥æ£æ¥redisä¸­çåå®¹. è¿è¡monitorrediså½ä»¤å°ä¼è¾åºå¨redisä¸æ§è¡çæ¯ä¸ªå½ä»¤çã\n\nredis-cli -a yoursecret127.0.0.1:6379> monitorok\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nå¨ä¸ä¸ä¸ªç»ç«¯ä¸­ï¼ä½ å°çå°minioå¨redisä¸æ§è¡çæä½ï¼\n\n127.0.0.1:6379> monitorok1490686879.650649 [0 172.17.0.1:44710] "ping"1490686879.651061 [0 172.17.0.1:44710] "hset" "minio_events" "images/myphoto.jpg" "{\\"records\\":[{\\"eventversion\\":\\"2.0\\",\\"eventsource\\":\\"minio:s3\\",\\"awsregion\\":\\"us-east-1\\",\\"eventtime\\":\\"2017-03-28t07:41:19z\\",\\"eventname\\":\\"s3:objectcreated:put\\",\\"useridentity\\":{\\"principalid\\":\\"minio\\"},\\"requestparameters\\":{\\"sourceipaddress\\":\\"127.0.0.1:52234\\"},\\"responseelements\\":{\\"x-amz-request-id\\":\\"14affbd1ace5f632\\",\\"x-minio-origin-endpoint\\":\\"http://192.168.86.115:9000\\"},\\"s3\\":{\\"s3schemaversion\\":\\"1.0\\",\\"configurationid\\":\\"config\\",\\"bucket\\":{\\"name\\":\\"images\\",\\"owneridentity\\":{\\"principalid\\":\\"minio\\"},\\"arn\\":\\"arn:aws:s3:::images\\"},\\"object\\":{\\"key\\":\\"myphoto.jpg\\",\\"size\\":2586,\\"etag\\":\\"5d284463f9da279f060f0ea4d11af098\\",\\"sequencer\\":\\"14affbd1ace5f632\\"}},\\"source\\":{\\"host\\":\\"127.0.0.1\\",\\"port\\":\\"52234\\",\\"useragent\\":\\"minio (linux; amd64) minio-go/2.0.3 mc/2017-02-15t17:57:25z\\"}}]}"\n\n\nå¨è¿æä»¬å¯ä»¥çå°minioå¨minio_eventsè¿ä¸ªkeyä¸æ§è¡äºhsetå½ä»¤ã\n\nå¦æç¨çæ¯accessæ ¼å¼ï¼é£ä¹minio_eventså°±æ¯ä¸ä¸ªlist,minioå°±ä¼è°ç¨rpushæ·»å å°listä¸­ãè¿ä¸ªlistçæ¶è´¹èä¼ä½¿ç¨blpopä»listçæå·¦ç«¯å é¤liståç´ ã\n\n\n# ä½¿ç¨natsåå¸minioäºä»¶\n\nå®è£ nats.\n\n\n# ç¬¬ä¸æ­¥ï¼éænatså°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãåèä¸é¢çç¤ºä¾ä¿®æ¹natsçéç½®:\n\n"nats": {    "1": {        "enable": true,        "address": "0.0.0.0:4222",        "subject": "bucketevents",        "username": "yourusername",        "password": "yoursecret",        "token": "",        "secure": false,        "pinginterval": 0        "streaming": {            "enable": false,            "clusterid": "",            "clientid": "",            "async": false,            "maxpubacksinflight": 0        }    }},\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯minio serverè®©éç½®çæãbucketeventsæ¯natså¨è¿ä¸ªä¾å­ä¸­ä½¿ç¨çä¸»é¢ã\n\nminioæå¡ä¹æ¯æ nats streaming mode ï¼è¿ç§æ¨¡å¼é¢å¤æä¾äºå message/event persistence, at-least-once-delivery, ä»¥å publisher rate limitingè¿æ ·çåè½ãå¦ææ³è®©minioæå¡åééç¥å°nats streaming server,åèä¸é¢ç¤ºé¢è¿è¡éç½®ï¼\n\n"nats": {    "1": {        "enable": true,        "address": "0.0.0.0:4222",        "subject": "bucketevents",        "username": "yourusername",        "password": "yoursecret",        "token": "",        "secure": false,        "pinginterval": 0        "streaming": {            "enable": true,            "clusterid": "test-cluster",            "clientid": "minio-client",            "async": true,            "maxpubacksinflight": 10        }    }},\n\n\næ´å¤å³äº clusterid, clientid çä¿¡æ¯ï¼è¯·ç nats documentation. å³äº maxpubacksinflight ï¼è¯·ç è¿é.\n\n\n# ç¬¬äºæ­¥: ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦myminio serverä¸ææä»¶ ä»imageså­å¨æ¡¶éå é¤æèä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼äºä»¶å³è¢«è§¦åãå¨è¿éï¼arnçå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:natsã æ´å¤æå³arnçèµæï¼è¯·åèè¿éã\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:nats --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:nats s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬ä¸æ­¥ï¼éªè¯nats\n\nå¦æä½ ç¨çæ¯nats serverï¼è¯·æ¥çä¸é¢çç¤ºä¾ç¨åºæ¥è®°å½æ·»å å°natsçå­å¨æ¡¶éç¥ã\n\npackage main// import go and nats packagesimport (    "log"    "runtime"    "github.com/nats-io/nats")func main() {    // create server connection    natsconnection, _ := nats.connect("nats://yourusername:yoursecret@localhost:4222")    log.println("connected")    // subscribe to subject    log.printf("subscribing to subject \'bucketevents\'\\n")    natsconnection.subscribe("bucketevents", func(msg *nats.msg) {        // handle the message        log.printf("received message \'%s\\n", string(msg.data)+"\'")    })    // keep the connection alive    runtime.goexit()}\ngo run nats.go2016/10/12 06:39:18 connected2016/10/12 06:39:18 subscribing to subject \'bucketevents\'\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nnats.goç¤ºä¾ç¨åºå°äºä»¶éç¥æå°å°æ§å¶å°ã\n\ngo run nats.go2016/10/12 06:51:26 connected2016/10/12 06:51:26 subscribing to subject \'bucketevents\'2016/10/12 06:51:33 received message \'{"eventtype":"s3:objectcreated:put","key":"images/myphoto.jpg","records":[{"eventversion":"2.0","eventsource":"aws:s3","awsregion":"us-east-1","eventtime":"2016-10-12t13:51:33z","eventname":"s3:objectcreated:put","useridentity":{"principalid":"minio"},"requestparameters":{"sourceipaddress":"[::1]:57106"},"responseelements":{},"s3":{"s3schemaversion":"1.0","configurationid":"config","bucket":{"name":"images","owneridentity":{"principalid":"minio"},"arn":"arn:aws:s3:::images"},"object":{"key":"myphoto.jpg","size":56060,"etag":"1d97bf45ecb37f7a7b699418070df08f","sequencer":"147ccd1ae054bfd0"}}}],"level":"info","msg":"","time":"2016-10-12t06:51:33-07:00"}\n\n\nå¦æä½ ç¨çæ¯nats streaming server,è¯·æ¥çä¸é¢çç¤ºä¾ç¨åºæ¥è®°å½æ·»å å°natsçå­å¨æ¡¶éç¥ã\n\npackage main// import go and nats packagesimport (    "fmt"    "runtime"    "github.com/nats-io/go-nats-streaming")func main() {    natsconnection, _ := stan.connect("test-cluster", "test-client")    log.println("connected")    // subscribe to subject    log.printf("subscribing to subject \'bucketevents\'\\n")    natsconnection.subscribe("bucketevents", func(m *stan.msg) {        // handle the message        fmt.printf("received a message: %s\\n", string(m.data))    })    // keep the connection alive    runtime.goexit()}\ngo run nats.go2017/07/07 11:47:40 connected2017/07/07 11:47:40 subscribing to subject \'bucketevents\'\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nnats.goç¤ºä¾ç¨åºå°äºä»¶éç¥æå°å°æ§å¶å°ã\n\nreceived a message: {"eventtype":"s3:objectcreated:put","key":"images/myphoto.jpg","records":[{"eventversion":"2.0","eventsource":"minio:s3","awsregion":"","eventtime":"2017-07-07t18:46:37z","eventname":"s3:objectcreated:put","useridentity":{"principalid":"minio"},"requestparameters":{"sourceipaddress":"192.168.1.80:55328"},"responseelements":{"x-amz-request-id":"14cf20bd1efd5b93","x-minio-origin-endpoint":"http://127.0.0.1:9000"},"s3":{"s3schemaversion":"1.0","configurationid":"config","bucket":{"name":"images","owneridentity":{"principalid":"minio"},"arn":"arn:aws:s3:::images"},"object":{"key":"myphoto.jpg","size":248682,"etag":"f1671feacb8bbf7b0397c6e9364e8c92","contenttype":"image/jpeg","userdefined":{"content-type":"image/jpeg"},"versionid":"1","sequencer":"14cf20bd1efd5b93"}},"source":{"host":"192.168.1.80","port":"55328","useragent":"minio (linux; amd64) minio-go/2.0.4 mc/development.goget"}}],"level":"info","msg":"","time":"2017-07-07t11:46:37-07:00"}\n\n\n\n# ä½¿ç¨postgresqlåå¸minioäºä»¶\n\nå®è£ postgresql æ°æ®åºãä¸ºäºæ¼ç¤ºï¼æä»¬å°"postgres"ç¨æ·çå¯ç è®¾ä¸ºpasswordï¼å¹¶ä¸åå»ºäºä¸ä¸ªminio_eventsæ°æ®åºæ¥å­å¨äºä»¶ä¿¡æ¯ã\n\nè¿ä¸ªéç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace and accessã\n\nå¦æä½¿ç¨çæ¯namespaceæ ¼å¼ï¼minioå°å­å¨æ¡¶éçå¯¹è±¡åæ­¥ææ°æ®åºè¡¨ä¸­çè¡ãæ¯ä¸è¡æä¸¤åï¼keyåvalueãkeyæ¯è¿ä¸ªå¯¹è±¡çå­å¨æ¡¶åå­å ä¸å¯¹è±¡åï¼valueé½æ¯ä¸ä¸ªæå³è¿ä¸ªminioå¯¹è±¡çjsonæ ¼å¼çäºä»¶æ°æ®ãå¦æå¯¹è±¡æ´æ°æèå é¤ï¼è¡¨ä¸­ç¸åºçè¡ä¹ä¼ç¸åºçæ´æ°æèå é¤ã\n\nå¦æä½¿ç¨çæ¯access,minioå°å°äºä»¶æ·»å å°è¡¨éï¼è¡æä¸¤åï¼event_time å event_dataãevent_timeæ¯äºä»¶å¨minio serveréåççæ¶é´ï¼event_dataæ¯æå³è¿ä¸ªminioå¯¹è±¡çjsonæ ¼å¼çäºä»¶æ°æ®ãå¨è¿ç§æ ¼å¼ä¸ï¼ä¸ä¼æè¡ä¼è¢«å é¤æèä¿®æ¹ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºçæ¯å¦ä½å¨namespaceæ ¼å¼ä¸ä½¿ç¨éç¥ç®æ ï¼*access*å·®ä¸å¤ï¼ä¸åèµè¿°ï¼æç¸ä¿¡ä½ å¯ä»¥è§¦ç±»æéï¼ä¸¾ä¸åä¸ï¼ä¸è¦è®©æå¤±æå¦ã\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nminioè¦æ±postgressql9.5çæ¬åä»¥ä¸ã minioç¨äºpostgresql9.5å¼å¥çinsert on conflict (aka upsert) ç¹æ§,ä»¥å9.4å¼å¥ç jsonb æ°æ®ç±»åã\n\n\n# ç¬¬äºæ­¥ï¼éæpostgresqlå°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãpostgresqléç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çpostgresqlèç¹ä¸ï¼å¨è¿éä¸ºä½ çpostgresqlå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çpostgresqlçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°                 ç±»å       æè¿°\nenable             bool     (å¿é¡»)æ­¤éç½®æ¯å¦å¯ç¨\nformat             string   (å¿é¡») æ¯ namespace è¿æ¯ access\nconnectionstring   string   (å¯é) postgresqlçè¿æ¥åæ° ãæ¯å¦å¯ä»¥ç¨æ¥è®¾ç½® sslmode\ntable              string   (å¿é¡») äºä»¶å¯¹åºçè¡¨åï¼å¦æè¯¥è¡¨ä¸å­å¨ï¼mniio serverä¼å¨å¯å¨æ¶åå»ºã\nhost               string   (å¯é) postgressqlçä¸»æºåï¼é»è®¤æ¯localhost\nport               string   (å¯é) postgresqlçç«¯å£å·ï¼é»è®¤æ¯5432\nuser               string   (å¯é)æ°æ®åºç¨æ·åï¼é»è®¤æ¯è¿è¡minio serverè¿ç¨çç¨æ·\npassword           string   (å¯é) æ°æ®åºå¯ç \ndatabase           string   (å¯é)åºå\n\nä¸é¢æ¯ä¸ä¸ªpostgresqléç½®ç¤ºä¾:\n\n"postgresql": {    "1": {        "enable": true,        "format": "namespace",        "connectionstring": "sslmode=disable",        "table": "bucketevents",        "host": "127.0.0.1",        "port": "5432",        "user": "postgres",        "password": "password",        "database": "minio_events"    }}\n\n\næ³¨æä¸ä¸ï¼ä¸ºäºæ¼ç¤ºï¼å±ä»¬è¿æsslç¦æäºï¼ä½æ¯ä¸ºäºå®å¨èµ·è§ï¼ä¸å»ºè®®å¨çäº§ç¯å¢è¿ä¹å¼ã\n\næ´æ°å®éç½®æä»¶åï¼éå¯minio serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼minio serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ sqs arns: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:postgresqlã\n\nåä¹åæè¿°çä¸æ ·ï¼ä½ ä¹å¯ä»¥æ·»å å¤ä¸ªpostresqlå®ä¾ï¼åªè¦idä¸éå¤å°±è¡ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼postgresqlä¸­ä¼insertä¸æ¡æ°çè®°å½æèä¸æ¡å·²ç»å­å¨çè®°å½ä¼è¢«updateï¼å¦æä¸ä¸ªå­å¨å¯¹è±¡è¢«å é¤ï¼ä¸æ¡å¯¹åºçè®°å½ä¹ä¼ä»postgresqlè¡¨ä¸­å é¤ãå æ­¤ï¼postgresqlè¡¨ä¸­çè¡ï¼å¯¹åºçå°±æ¯å­å¨æ¡¶éçä¸ä¸ªå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤ä¸­minioè¾åºçarnä¿¡æ¯ãæ´å¤æå³arnçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾minioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\n# create bucket named `images` in myminiomc mb myminio/images# add notification configuration on the `images` bucket using the mysql arn. the --suffix argument filters events.mc events add myminio/images arn:minio:sqs:us-east-1:1:postgresql --suffix .jpg# print out the notification configuration on the `images` bucket.mc events list myminio/imagesmc events list myminio/imagesarn:minio:sqs:us-east-1:1:postgresql s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯postgresql\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\næå¼ä¸ä¸ªpostgresqlç»ç«¯ååºè¡¨ bucketevents ä¸­ææçè®°å½ã\n\n$ psql -h 127.0.0.1 -u postgres -d minio_eventsminio_events=# select * from bucketevents;key                 |                      value--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- images/myphoto.jpg | {"records": [{"s3": {"bucket": {"arn": "arn:aws:s3:::images", "name": "images", "owneridentity": {"principalid": "minio"}}, "object": {"key": "myphoto.jpg", "etag": "1d97bf45ecb37f7a7b699418070df08f", "size": 56060, "sequencer": "147ce57c70b31931"}, "configurationid": "config", "s3schemaversion": "1.0"}, "awsregion": "us-east-1", "eventname": "s3:objectcreated:put", "eventtime": "2016-10-12t21:18:20z", "eventsource": "aws:s3", "eventversion": "2.0", "useridentity": {"principalid": "minio"}, "responseelements": {}, "requestparameters": {"sourceipaddress": "[::1]:39706"}}]}(1 row)\n\n\n\n# ä½¿ç¨mysqlåå¸minioäºä»¶\n\nå®è£ mysql. ä¸ºäºæ¼ç¤ºï¼æä»¬å°"postgres"ç¨æ·çå¯ç è®¾ä¸ºpasswordï¼å¹¶ä¸åå»ºäºä¸ä¸ªminiodbæ°æ®åºæ¥å­å¨äºä»¶ä¿¡æ¯ã\n\nè¿ä¸ªéç¥ç®æ æ¯æä¸¤ç§æ ¼å¼: namespace and accessã\n\nå¦æä½¿ç¨çæ¯namespaceæ ¼å¼ï¼minioå°å­å¨æ¡¶éçå¯¹è±¡åæ­¥ææ°æ®åºè¡¨ä¸­çè¡ãæ¯ä¸è¡æä¸¤åï¼key_nameåvalueãkey_nameæ¯è¿ä¸ªå¯¹è±¡çå­å¨æ¡¶åå­å ä¸å¯¹è±¡åï¼valueé½æ¯ä¸ä¸ªæå³è¿ä¸ªminioå¯¹è±¡çjsonæ ¼å¼çäºä»¶æ°æ®ãå¦æå¯¹è±¡æ´æ°æèå é¤ï¼è¡¨ä¸­ç¸åºçè¡ä¹ä¼ç¸åºçæ´æ°æèå é¤ã\n\nå¦æä½¿ç¨çæ¯access,minioå°å°äºä»¶æ·»å å°è¡¨éï¼è¡æä¸¤åï¼event_time å event_dataãevent_timeæ¯äºä»¶å¨minio serveréåççæ¶é´ï¼event_dataæ¯æå³è¿ä¸ªminioå¯¹è±¡çjsonæ ¼å¼çäºä»¶æ°æ®ãå¨è¿ç§æ ¼å¼ä¸ï¼ä¸ä¼æè¡ä¼è¢«å é¤æèä¿®æ¹ã\n\nä¸é¢çæ­¥éª¤å±ç¤ºçæ¯å¦ä½å¨namespaceæ ¼å¼ä¸ä½¿ç¨éç¥ç®æ ï¼*access*å·®ä¸å¤ï¼ä¸åèµè¿°ã\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nminioè¦æ±mysql çæ¬ 5.7.8åä»¥ä¸ï¼minioä½¿ç¨äºmysql5.7.8çæ¬å¼å¥ç json æ°æ®ç±»åãæä»¬ä½¿ç¨çæ¯mysql5.7.17è¿è¡çæµè¯ã\n\n\n# ç¬¬äºæ­¥ï¼éæmysqlå°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãmysqléç½®ä¿¡æ¯æ¯å¨notifyè¿ä¸ªèç¹ä¸çmysqlèç¹ä¸ï¼å¨è¿éä¸ºä½ çmysqlå®ä¾åå»ºéç½®ä¿¡æ¯é®å¼å¯¹ï¼keyæ¯ä½ çpostgresqlçåç§°ï¼valueæ¯ä¸é¢è¡¨æ ¼ä¸­ååçé®å¼å¯¹éåã\n\nåæ°          ç±»å       æè¿°\nenable      bool     (å¿é¡»)æ­¤éç½®æ¯å¦å¯ç¨ï¼\nformat      string   (å¿é¡»)æ¯ namespace è¿æ¯ access\ndsnstring   string   (å¯é)mysqlç data-source-nameè¿æ¥ä¸² ãå¦ææ²¡è®¾å¼ï¼è¿æ¥ä¿¡æ¯å°ä½¿ç¨ä¸ååæ°ï¼ host,\n                     port, user, password ä»¥å database\ntable       string   (å¿é¡») äºä»¶å¯¹åºçè¡¨åï¼å¦æè¯¥è¡¨ä¸å­å¨ï¼mniio serverä¼å¨å¯å¨æ¶åå»ºã\nhost        string   mysql serverä¸»æºå (å¦æ dsnstring æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\nport        string   mysql serverç«¯å£å· (å¦æ dsnstring æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\nuser        string   æ°æ®åºç¨æ·å (å¦æ dsnstring æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\npassword    string   æ°æ®åºå¯ç (å¦æ dsnstring æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\ndatabase    string   æ°æ®åºå(å¦æ dsnstring æ¯ç©ºæä¼ä½¿ç¨æ­¤éç½®)ã\n\nä¸é¢æ¯ä¸ä¸ªmysqléç½®ç¤ºä¾:\n\n"mysql": {        "1": {                "enable": true,                "dsnstring": "",                "table": "minio_images",                "host": "172.17.0.1",                "port": "3306",                "user": "root",                "password": "password",                "database": "miniodb"        }}\n\n\næ´æ°å®éç½®æä»¶åï¼éå¯minio serverè®©éç½®çæãå¦æä¸åé¡ºå©ï¼minio serverä¼å¨å¯å¨æ¶è¾åºä¸è¡ä¿¡æ¯ï¼ç±»ä¼¼ sqs arns: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mysqlã\n\nåä¹åæè¿°çä¸æ ·ï¼ä½ ä¹å¯ä»¥æ·»å å¤ä¸ªmysqlå®ä¾ï¼åªè¦idä¸éå¤å°±è¡ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼mysqlä¸­ä¼insertä¸æ¡æ°çè®°å½æèä¸æ¡å·²ç»å­å¨çè®°å½ä¼è¢«updateï¼å¦æä¸ä¸ªå­å¨å¯¹è±¡è¢«å é¤ï¼ä¸æ¡å¯¹åºçè®°å½ä¹ä¼ä»mysqlè¡¨ä¸­å é¤ãå æ­¤ï¼mysqlè¡¨ä¸­çè¡ï¼å¯¹åºçå°±æ¯å­å¨æ¡¶éçä¸ä¸ªå¯¹è±¡ã\n\nè¦éç½®è¿ç§å­å¨æ¡¶éç¥ï¼æä»¬éè¦ç¨å°åé¢æ­¥éª¤minioè¾åºçarnä¿¡æ¯ãæ´å¤æå³arnçèµæï¼è¯·åèè¿éã\n\næäºmcè¿ä¸ªå·¥å·ï¼è¿äºéç½®ä¿¡æ¯å¾å®¹æå°±è½æ·»å ä¸ãåè®¾å±ä»¬çminioæå¡å«åå«myminio,å¯æ§è¡ä¸åèæ¬ï¼\n\n# create bucket named `images` in myminiomc mb myminio/images# add notification configuration on the `images` bucket using the mysql arn. the --suffix argument filters events.mc events add myminio/images arn:minio:sqs:us-east-1:1:postgresql --suffix .jpg# print out the notification configuration on the `images` bucket.mc events list myminio/imagesarn:minio:sqs:us-east-1:1:postgresql s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯mysql\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\næå¼ä¸ä¸ªmysqlç»ç«¯ååºè¡¨ minio_images ä¸­ææçè®°å½ã\n\n$ mysql -h 172.17.0.1 -p 3306 -u root -p miniodbmysql> select * from minio_images;+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| key_name           | value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| images/myphoto.jpg | {"records": [{"s3": {"bucket": {"arn": "arn:aws:s3:::images", "name": "images", "owneridentity": {"principalid": "minio"}}, "object": {"key": "myphoto.jpg", "etag": "467886be95c8ecfd71a2900e3f461b4f", "size": 26, "sequencer": "14ac59476f809fd3"}, "configurationid": "config", "s3schemaversion": "1.0"}, "awsregion": "us-east-1", "eventname": "s3:objectcreated:put", "eventtime": "2017-03-16t11:29:00z", "eventsource": "aws:s3", "eventversion": "2.0", "useridentity": {"principalid": "minio"}, "responseelements": {"x-amz-request-id": "14ac59476f809fd3", "x-minio-origin-endpoint": "http://192.168.86.110:9000"}, "requestparameters": {"sourceipaddress": "127.0.0.1:38260"}}]} |+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.01 sec)\n\n\n\n# ä½¿ç¨kafkaåå¸minioäºä»¶\n\nå®è£ apache kafka.\n\n\n# ç¬¬ä¸æ­¥ï¼ç¡®ä¿ç¡®ä¿è³å°æ»¡è¶³ç¬¬ä½è¦æ±\n\nminioè¦æ±kafkaçæ¬0.10æè0.9.minioåé¨ä½¿ç¨äº shopify/sarama åºï¼å æ­¤éè¦åè¯¥åºæåæ ·ççæ¬å¼å®¹æ§ã\n\n\n# ç¬¬äºæ­¥ï¼éækafkaå°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãåèä¸é¢çç¤ºä¾æ´æ°kafkaéç½®ï¼\n\n"kafka": {    "1": {        "enable": true,        "brokers": ["localhost:9092"],        "topic": "bucketevents"    }}\n\n\néå¯minio serverè®©éç½®çæãbucketeventsæ¯æ¬ç¤ºä¾ç¨å°çkafkaä¸»é¢ï¼topicï¼ã\n\n\n# ç¬¬ä¸æ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼äºä»¶å°è¢«è§¦åãå¨è¿éï¼arnçå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:kafkaãæ´å¤æå³arnçèµæï¼è¯·åèè¿éã\n\nmc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:kafka --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:kafka s3:objectcreated:*,s3:objectremoved:* filter: suffix=â.jpgâ\n\n\n\n# ç¬¬åæ­¥ï¼éªè¯kafka\n\næä»¬ä½¿ç¨ kafkacat å°ææçéç¥è¾åºå°æ§å¶å°ã\n\nkafkacat -c -b localhost:9092 -t bucketevents\n\n\næå¼ä¸ä¸ªæ°çterminalç»ç«¯å¹¶ä¸ä¼ ä¸å¼ jpegå¾çå°images å­å¨æ¡¶ã\n\nmc cp myphoto.jpg myminio/images\n\n\nkafkacat è¾åºäºä»¶éç¥å°æ§å¶å°ã\n\nkafkacat -b localhost:9092 -t bucketevents{"eventtype":"s3:objectcreated:put","key":"images/myphoto.jpg","records":[{"eventversion":"2.0","eventsource":"aws:s3","awsregion":"us-east-1","eventtime":"2017-01-31t10:01:51z","eventname":"s3:objectcreated:put","useridentity":{"principalid":"88qr09s7iot4x1ibaq9b"},"requestparameters":{"sourceipaddress":"192.173.5.2:57904"},"responseelements":{"x-amz-request-id":"149ed2fd25589220","x-minio-origin-endpoint":"http://192.173.5.2:9000"},"s3":{"s3schemaversion":"1.0","configurationid":"config","bucket":{"name":"images","owneridentity":{"principalid":"88qr09s7iot4x1ibaq9b"},"arn":"arn:aws:s3:::images"},"object":{"key":"myphoto.jpg","size":541596,"etag":"04451d05b4faf4d62f3d538156115e2a","sequencer":"149ed2fd25589220"}}}],"level":"info","msg":"","time":"2017-01-31t15:31:51+05:30"}\n\n\n\n# ä½¿ç¨webhookåå¸minioäºä»¶\n\nwebhooks éç¨æ¨çæ¹å¼è·åæ°æ®ï¼èä¸æ¯ä¸ç´å»æåã\n\n\n# ç¬¬ä¸æ­¥ï¼éæmysqlå°minio\n\nminio serverçéç½®æä»¶é»è®¤è·¯å¾æ¯ ~/.minio/config.jsonãåèä¸é¢çç¤ºä¾æ´æ°webhookéç½®ï¼\n\n"webhook": {  "1": {    "enable": true,    "endpoint": "http://localhost:3000/"}\n\n\nendpointæ¯çå¬webhookéç¥çæå¡ãä¿å­éç½®æä»¶å¹¶éå¯minioæå¡è®©ééç½®çæãæ³¨æä¸ä¸ï¼å¨éå¯minioæ¶ï¼è¿ä¸ªendpointå¿é¡»æ¯å¯å¨å¹¶ä¸å¯è®¿é®å°ã\n\n\n# ç¬¬äºæ­¥ï¼ä½¿ç¨minioå®¢æ·ç«¯å¯ç¨bucketéç¥\n\næä»¬ç°å¨å¯ä»¥å¨ä¸ä¸ªå«imagesçå­å¨æ¡¶ä¸å¼å¯äºä»¶éç¥ï¼ä¸æ¦ä¸ææä»¶ä¸ä¼ å°å­å¨æ¡¶ä¸­ï¼äºä»¶å°è¢«è§¦åãå¨è¿éï¼arnçå¼æ¯arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:webhookãæ´å¤æå³arnçèµæï¼è¯·åèè¿éã\n\nmc mb myminio/imagesmc mb myminio/images-thumbnailmc events add myminio/images arn:minio:sqs:us-east-1:1:webhook --events put --suffix .jpg\n\n\néªè¯äºä»¶éç¥æ¯å¦éç½®æ­£ç¡®ï¼\n\nmc events list myminio/images\n\n\nä½ åºè¯¥å¯ä»¥æ¶å°å¦ä¸çååºï¼\n\narn:minio:sqs:us-east-1:1:webhook   s3:objectcreated:*   filter: suffix=".jpg"\n\n\n\n# ç¬¬ä¸æ­¥ï¼éç¨thumbnailerè¿è¡éªè¯\n\næä»¬ä½¿ç¨ thumbnailer æ¥çå¬minioéç¥ãå¦æææä»¶ä¸ä¼ äºæ¯minioæå¡ï¼thumnailerçå¬å°è¯¥éç¥ï¼çæä¸ä¸ªç¼©ç¥å¾å¹¶ä¸ä¼ å°minioæå¡ãå®è£thumbnailer:\n\ngit clone https://github.com/minio/thumbnailer/npm install\n\n\nç¶åæå¼thumbnailerçconfig/webhook.jsonéç½®æä»¶ï¼æ·»å æå³minio serverçéç½®ï¼ä½¿ç¨ä¸é¢çæ¹å¼å¯å¨thumbnailer:\n\nnode_env=webhook node thumbnail-webhook.js\n\n\nthumbnailerè¿è¡å¨http://localhost:3000/ãä¸ä¸æ­¥ï¼éç½®minio server,è®©å¶åéæ¶æ¯å°è¿ä¸ªurlï¼ç¬¬ä¸æ­¥æå°çï¼ï¼å¹¶ä½¿ç¨ mc æ¥è®¾ç½®å­å¨æ¡¶éç¥ï¼ç¬¬äºæ­¥æå°çï¼ãç¶åä¸ä¼ ä¸å¼ å¾çå°minio server:\n\nmc cp ~/images.jpg myminio/images.../images.jpg:  8.31 kb / 8.31 kb âââââââââââââââââââââââââââââââââââââ 100.00% 59.42 kb/s 0s\n\n\nç¨ç­çå»ï¼ç¶åä½¿ç¨mc lsæ£æ¥å­å¨æ¡¶çåå®¹ -ï¼ä½ å°çå°æä¸ªç¼©ç¥å¾åºç°äºã\n\nmc ls myminio/images-thumbnail[2017-02-08 11:39:40 ist]   992b images-thumbnail.jpg\n\n\næ³¨æ å¦æä½ ç¨çæ¯ distributed minio,è¯·ä¿®æ¹ææèç¹ç ~/.minio/config.jsonã\n\n> åæ: https://docs.min.io/docs/minio-bucket-notification-guide.html',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Minioæå¡éå¶ç§æ·",frontmatter:{title:"Minioæå¡éå¶ç§æ·",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/f9e3a2/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/07.Minio%E6%9C%8D%E5%8A%A1%E9%99%90%E5%88%B6%E7%A7%9F%E6%88%B7.html",relativePath:"12.MinIO/01.Minioæå¡å¨/07.Minioæå¡éå¶ç§æ·.md",key:"v-7a72d387",path:"/pages/f9e3a2/",headers:[{level:2,title:"Minioæå¡éå¶/ç§æ·",slug:"minioæå¡éå¶-ç§æ·",normalizedTitle:"minioæå¡éå¶/ç§æ·",charIndex:2},{level:3,title:"çº å ç  (å¤åç¡¬ç / æå¡)",slug:"çº å ç -å¤åç¡¬ç-æå¡",normalizedTitle:"çº å ç  (å¤åç¡¬ç / æå¡)",charIndex:19},{level:3,title:"æµè§å¨è®¿é®",slug:"æµè§å¨è®¿é®",normalizedTitle:"æµè§å¨è®¿é®",charIndex:112},{level:3,title:"Limits of S3 API",slug:"limits-of-s3-api",normalizedTitle:"limits of s3 api",charIndex:160},{level:3,title:"Minioä¸æ¯æçAmazon S3 Bucket API",slug:"minioä¸æ¯æçamazon-s3-bucket-api",normalizedTitle:"minioä¸æ¯æçamazon s3 bucket api",charIndex:926},{level:3,title:"Minioä¸æ¯æçAmazon S3 Object API.",slug:"minioä¸æ¯æçamazon-s3-object-api",normalizedTitle:"minioä¸æ¯æçamazon s3 object api.",charIndex:1330}],headersStr:"Minioæå¡éå¶/ç§æ· çº å ç  (å¤åç¡¬ç / æå¡) æµè§å¨è®¿é® Limits of S3 API Minioä¸æ¯æçAmazon S3 Bucket API Minioä¸æ¯æçAmazon S3 Object API.",content:"# Minioæå¡éå¶/ç§æ·\n\n\n# çº å ç  (å¤åç¡¬ç / æå¡)\n\né¡¹ç®        åæ°\næå¤§é©±å¨å¨æ°é   16\næå°é©±å¨å¨æ°é   4\nè¯»ä»²è£       N / 2\nåä»²è£       N / 2+1\n\n\n# æµè§å¨è®¿é®\n\né¡¹ç®             åæ°\nWebæµè§å¨ä¸ä¼ å¤§å°éå¶   5GB\n\n\n# Limits of S3 API\n\né¡¹ç®                                                    åæ°\næå¤§æ¡¶æ°                                                  æ éé¢\næ¯æ¡¶æå¤§å¯¹è±¡æ°                                               æ éé¢\næå¤§å¯¹è±¡å¤§å°                                                5 TB\næå°å¯¹è±¡å¤§å°                                                0 B\næ¯æ¬¡PUTæä½çæå¤§å¯¹è±¡å¤§å°                                        5 GB\næ¯æ¬¡ä¸ä¼ çæå¤§Partæ°é                                         10,000\nPartå¤§å°                                                5MBå°5GB. æåä¸ä¸ªpartå¯ä»¥ä»0Bå°5GB\næ¯æ¬¡list partsè¯·æ±å¯è¿åçpartæå¤§æ°é                            1000\næ¯æ¬¡list objectsè¯·æ±å¯è¿åçobjectæå¤§æ°é                        1000\næ¯æ¬¡list multipart uploadsè¯·æ±å¯è¿åçmultipart uploadsæå¤§æ°é   1000\n\næä»¬è®¤ä¸ºä¸åAWS S3çAPIæäºåä½æèè¯´ç¨å¤ä¸å¤§ï¼å æ­¤æä»¬å¨minioä¸­æ²¡æå®ç°è¿äºæ¥å£ãå¦ææ¨æä¸åæè§ï¼æ¬¢è¿å¨githubä¸æissueã\n\n\n# Minioä¸æ¯æçAmazon S3 Bucket API\n\n * BucketACL (å¯ä»¥ç¨ bucket policies)\n\n * BucketCORS (ææHTTPæ¹æ³çææå­å¨æ¡¶é½é»è®¤å¯ç¨CORS)\n\n * BucketLifecycle (Minioçº å ç ä¸éè¦)\n\n * BucketReplication (å¯ä»¥ç¨ mc mirror)\n\n * BucketVersions, BucketVersioning (å¯ä»¥ç¨ s3git)\n\n * BucketWebsite (å¯ä»¥ç¨ caddy or nginx)\n\n * BucketAnalytics, BucketMetrics, BucketLogging (å¯ä»¥ç¨ bucket notification APIs)\n\n * BucketRequestPayment\n\n * BucketTagging\n   \n   \n   # Minioä¸æ¯æçAmazon S3 Object API.\n\n * ObjectACL (å¯ä»¥ç¨ bucket policies)\n\n * ObjectTorrent\n\n> åæ: https://docs.min.io/docs/minio-server-limits-per-tenant.html",normalizedContent:"# minioæå¡éå¶/ç§æ·\n\n\n# çº å ç  (å¤åç¡¬ç / æå¡)\n\né¡¹ç®        åæ°\næå¤§é©±å¨å¨æ°é   16\næå°é©±å¨å¨æ°é   4\nè¯»ä»²è£       n / 2\nåä»²è£       n / 2+1\n\n\n# æµè§å¨è®¿é®\n\né¡¹ç®             åæ°\nwebæµè§å¨ä¸ä¼ å¤§å°éå¶   5gb\n\n\n# limits of s3 api\n\né¡¹ç®                                                    åæ°\næå¤§æ¡¶æ°                                                  æ éé¢\næ¯æ¡¶æå¤§å¯¹è±¡æ°                                               æ éé¢\næå¤§å¯¹è±¡å¤§å°                                                5 tb\næå°å¯¹è±¡å¤§å°                                                0 b\næ¯æ¬¡putæä½çæå¤§å¯¹è±¡å¤§å°                                        5 gb\næ¯æ¬¡ä¸ä¼ çæå¤§partæ°é                                         10,000\npartå¤§å°                                                5mbå°5gb. æåä¸ä¸ªpartå¯ä»¥ä»0bå°5gb\næ¯æ¬¡list partsè¯·æ±å¯è¿åçpartæå¤§æ°é                            1000\næ¯æ¬¡list objectsè¯·æ±å¯è¿åçobjectæå¤§æ°é                        1000\næ¯æ¬¡list multipart uploadsè¯·æ±å¯è¿åçmultipart uploadsæå¤§æ°é   1000\n\næä»¬è®¤ä¸ºä¸åaws s3çapiæäºåä½æèè¯´ç¨å¤ä¸å¤§ï¼å æ­¤æä»¬å¨minioä¸­æ²¡æå®ç°è¿äºæ¥å£ãå¦ææ¨æä¸åæè§ï¼æ¬¢è¿å¨githubä¸æissueã\n\n\n# minioä¸æ¯æçamazon s3 bucket api\n\n * bucketacl (å¯ä»¥ç¨ bucket policies)\n\n * bucketcors (ææhttpæ¹æ³çææå­å¨æ¡¶é½é»è®¤å¯ç¨cors)\n\n * bucketlifecycle (minioçº å ç ä¸éè¦)\n\n * bucketreplication (å¯ä»¥ç¨ mc mirror)\n\n * bucketversions, bucketversioning (å¯ä»¥ç¨ s3git)\n\n * bucketwebsite (å¯ä»¥ç¨ caddy or nginx)\n\n * bucketanalytics, bucketmetrics, bucketlogging (å¯ä»¥ç¨ bucket notification apis)\n\n * bucketrequestpayment\n\n * buckettagging\n   \n   \n   # minioä¸æ¯æçamazon s3 object api.\n\n * objectacl (å¯ä»¥ç¨ bucket policies)\n\n * objecttorrent\n\n> åæ: https://docs.min.io/docs/minio-server-limits-per-tenant.html",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Minio Serveréç½®æå",frontmatter:{title:"Minio Serveréç½®æå",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/625c17/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/08.Minio%20Server%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97.html",relativePath:"12.MinIO/01.Minioæå¡å¨/08.Minio Serveréç½®æå.md",key:"v-e6c9547a",path:"/pages/625c17/",headers:[{level:2,title:"éç½®ç®å½",slug:"éç½®ç®å½",normalizedTitle:"éç½®ç®å½",charIndex:133},{level:3,title:"è¯ä¹¦ç®å½",slug:"è¯ä¹¦ç®å½",normalizedTitle:"è¯ä¹¦ç®å½",charIndex:382},{level:3,title:"éç½®åæ°",slug:"éç½®åæ°",normalizedTitle:"éç½®åæ°",charIndex:642},{level:2,title:"äºè§£æ´å¤",slug:"äºè§£æ´å¤",normalizedTitle:"äºè§£æ´å¤",charIndex:1933}],headersStr:"éç½®ç®å½ è¯ä¹¦ç®å½ éç½®åæ° äºè§£æ´å¤",content:'# Minio Serveréç½®æå\n\nMinio serverå¨é»è®¤æåµä¸ä¼å°ææéç½®ä¿¡æ¯å­å° ${HOME}/.minio/config.json æä»¶ä¸­ã ä»¥ä¸é¨åæä¾æ¯ä¸ªå­æ®µçè¯¦ç»è¯´æä»¥åå¦ä½èªå®ä¹å®ä»¬ãä¸ä¸ªå®æ´ç config.json å¨ è¿é\n\n\n# éç½®ç®å½\n\né»è®¤çéç½®ç®å½æ¯ ${HOME}/.minioï¼ä½ å¯ä»¥ä½¿ç¨âconfig-dirå½ä»¤è¡éé¡¹éåä¹ã You can override the default configuration directory using âconfig-dir command-line option. Minio serverå¨é¦æ¬¡å¯å¨æ¶ä¼çæä¸ä¸ªæ°çconfig.jsonï¼éé¢å¸¦æèªå¨çæçè®¿é®å­æ®ã\n\nminio server --config-dir /etc/minio /data\n\n\n\n# è¯ä¹¦ç®å½\n\nTLSè¯ä¹¦å­å¨${HOME}/.minio/certsç®å½ä¸ï¼ä½ éè¦å°è¯ä¹¦æ¾å¨è¯¥ç®å½ä¸æ¥å¯ç¨HTTPS ãå¦æä½ æ¯ä¸ä¸ªä¹å­¦ä¸è¿çå¥½éå¹´ï¼è¿éæä¸æ¬åè´¹çç§ç±ä¼ æä¸ä½ : å¦ä½ä½¿ç¨TLSå®å¨çè®¿é®minio.\n\nä»¥ä¸æ¯ä¸ä¸ªå¸¦æ¥TLSè¯ä¹¦çMinio serverçç®å½ç»æã\n\n$ tree ~/.minio\n/home/user1/.minio\nâââ certs\nâ   âââ CAs\nâ   âââ private.key\nâ   âââ public.crt\nâââ config.json\n\n\n\n# éç½®åæ°\n\n# çæ¬\n\nåæ°        ç±»å       æè¿°\nversion   string   versionå³å®äºéç½®æä»¶çæ ¼å¼ï¼ä»»ä½èçæ¬é½ä¼å¨å¯å¨æ¶èªå¨è¿ç§»å°æ°çæ¬ä¸­ã [è¯·å¿æå¨ä¿®æ¹]\n\n# å­æ®\n\nåæ°                     ç±»å       æè¿°\ncredential                      å¯¹è±¡å­å¨åWebè®¿é®çéªè¯å­æ®ã\ncredential.accessKey   string   Access keyé¿åº¦æå°æ¯5ä¸ªå­ç¬¦ï¼ä½ å¯ä»¥éè¿ MINIO_ACCESS_KEYç¯å¢åéè¿è¡ä¿®æ¹\ncredential.secretKey   string   Secret keyé¿åº¦æå°æ¯8ä¸ªå­ç¬¦ï¼ä½ å¯ä»¥éè¿MINIO_SECRET_KEYç¯å¢åéè¿è¡ä¿®æ¹\n\nç¤ºä¾:\n\nexport MINIO_ACCESS_KEY=adminexport MINIO_SECRET_KEY=passwordminio server /data\n\n\n# åºåï¼Regionï¼\n\nåæ°       ç±»å       æè¿°\nregion   string   regionæè¿°çæ¯æå¡å¨çç©çä½ç½®ï¼é»è®¤æ¯us-east-1ï¼ç¾å½ä¸åº1ï¼,è¿ä¹æ¯äºé©¬éS3çé»è®¤åºåãä½ å¯ä»¥éè¿MINIO_REGION\n                  ç¯å¢åéè¿è¡ä¿®æ¹ãå¦æä¸äºè§£è¿åï¼å»ºè®®ä¸è¦éæä¿®æ¹\n\nç¤ºä¾:\n\nexport MINIO_REGION="ä¸­å½ååä¸åº"minio server /data\n\n\n# æµè§å¨\n\nåæ°        ç±»å       æè¿°\nbrowser   string   å¼å¯æå³é­æµè§å¨è®¿é®ï¼é»è®¤æ¯å¼å¯çï¼ä½ å¯ä»¥éè¿MINIO_BROWSERç¯å¢åéè¿è¡ä¿®æ¹\n\nç¤ºä¾:\n\nexport MINIO_BROWSER=offminio server /data\n\n\n# éç¥\n\nåæ°                     ç±»å   æè¿°\nnotify                      éç¥éè¿ä»¥ä¸æ¹å¼å¼å¯å­å¨æ¡¶äºä»¶éç¥ï¼ç¨äºlambdaè®¡ç®\nnotify.amqp                 éè¿AMQPåå¸Minioäºä»¶\nnotify.mqtt                 éè¿MQTTåå¸Minioäºä»¶\nnotify.elasticsearch        éè¿Elasticsearchåå¸Minioäºä»¶\nnotify.redis                éè¿Redisåå¸Minioäºä»¶\nnotify.nats                 éè¿NATSåå¸Minioäºä»¶\nnotify.postgresql           éè¿PostgreSQLåå¸Minioäºä»¶\nnotify.kafka                éè¿Apache Kafkaåå¸Minioäºä»¶\nnotify.webhook              éè¿Webhooksåå¸Minioäºä»¶\n\n\n# äºè§£æ´å¤\n\n * Minio Quickstart Guide\n\n> åæ: https://docs.min.io/docs/minio-server-configuration-guide.html',normalizedContent:'# minio serveréç½®æå\n\nminio serverå¨é»è®¤æåµä¸ä¼å°ææéç½®ä¿¡æ¯å­å° ${home}/.minio/config.json æä»¶ä¸­ã ä»¥ä¸é¨åæä¾æ¯ä¸ªå­æ®µçè¯¦ç»è¯´æä»¥åå¦ä½èªå®ä¹å®ä»¬ãä¸ä¸ªå®æ´ç config.json å¨ è¿é\n\n\n# éç½®ç®å½\n\né»è®¤çéç½®ç®å½æ¯ ${home}/.minioï¼ä½ å¯ä»¥ä½¿ç¨âconfig-dirå½ä»¤è¡éé¡¹éåä¹ã you can override the default configuration directory using âconfig-dir command-line option. minio serverå¨é¦æ¬¡å¯å¨æ¶ä¼çæä¸ä¸ªæ°çconfig.jsonï¼éé¢å¸¦æèªå¨çæçè®¿é®å­æ®ã\n\nminio server --config-dir /etc/minio /data\n\n\n\n# è¯ä¹¦ç®å½\n\ntlsè¯ä¹¦å­å¨${home}/.minio/certsç®å½ä¸ï¼ä½ éè¦å°è¯ä¹¦æ¾å¨è¯¥ç®å½ä¸æ¥å¯ç¨https ãå¦æä½ æ¯ä¸ä¸ªä¹å­¦ä¸è¿çå¥½éå¹´ï¼è¿éæä¸æ¬åè´¹çç§ç±ä¼ æä¸ä½ : å¦ä½ä½¿ç¨tlså®å¨çè®¿é®minio.\n\nä»¥ä¸æ¯ä¸ä¸ªå¸¦æ¥tlsè¯ä¹¦çminio serverçç®å½ç»æã\n\n$ tree ~/.minio\n/home/user1/.minio\nâââ certs\nâ   âââ cas\nâ   âââ private.key\nâ   âââ public.crt\nâââ config.json\n\n\n\n# éç½®åæ°\n\n# çæ¬\n\nåæ°        ç±»å       æè¿°\nversion   string   versionå³å®äºéç½®æä»¶çæ ¼å¼ï¼ä»»ä½èçæ¬é½ä¼å¨å¯å¨æ¶èªå¨è¿ç§»å°æ°çæ¬ä¸­ã [è¯·å¿æå¨ä¿®æ¹]\n\n# å­æ®\n\nåæ°                     ç±»å       æè¿°\ncredential                      å¯¹è±¡å­å¨åwebè®¿é®çéªè¯å­æ®ã\ncredential.accesskey   string   access keyé¿åº¦æå°æ¯5ä¸ªå­ç¬¦ï¼ä½ å¯ä»¥éè¿ minio_access_keyç¯å¢åéè¿è¡ä¿®æ¹\ncredential.secretkey   string   secret keyé¿åº¦æå°æ¯8ä¸ªå­ç¬¦ï¼ä½ å¯ä»¥éè¿minio_secret_keyç¯å¢åéè¿è¡ä¿®æ¹\n\nç¤ºä¾:\n\nexport minio_access_key=adminexport minio_secret_key=passwordminio server /data\n\n\n# åºåï¼regionï¼\n\nåæ°       ç±»å       æè¿°\nregion   string   regionæè¿°çæ¯æå¡å¨çç©çä½ç½®ï¼é»è®¤æ¯us-east-1ï¼ç¾å½ä¸åº1ï¼,è¿ä¹æ¯äºé©¬és3çé»è®¤åºåãä½ å¯ä»¥éè¿minio_region\n                  ç¯å¢åéè¿è¡ä¿®æ¹ãå¦æä¸äºè§£è¿åï¼å»ºè®®ä¸è¦éæä¿®æ¹\n\nç¤ºä¾:\n\nexport minio_region="ä¸­å½ååä¸åº"minio server /data\n\n\n# æµè§å¨\n\nåæ°        ç±»å       æè¿°\nbrowser   string   å¼å¯æå³é­æµè§å¨è®¿é®ï¼é»è®¤æ¯å¼å¯çï¼ä½ å¯ä»¥éè¿minio_browserç¯å¢åéè¿è¡ä¿®æ¹\n\nç¤ºä¾:\n\nexport minio_browser=offminio server /data\n\n\n# éç¥\n\nåæ°                     ç±»å   æè¿°\nnotify                      éç¥éè¿ä»¥ä¸æ¹å¼å¼å¯å­å¨æ¡¶äºä»¶éç¥ï¼ç¨äºlambdaè®¡ç®\nnotify.amqp                 éè¿amqpåå¸minioäºä»¶\nnotify.mqtt                 éè¿mqttåå¸minioäºä»¶\nnotify.elasticsearch        éè¿elasticsearchåå¸minioäºä»¶\nnotify.redis                éè¿redisåå¸minioäºä»¶\nnotify.nats                 éè¿natsåå¸minioäºä»¶\nnotify.postgresql           éè¿postgresqlåå¸minioäºä»¶\nnotify.kafka                éè¿apache kafkaåå¸minioäºä»¶\nnotify.webhook              éè¿webhooksåå¸minioäºä»¶\n\n\n# äºè§£æ´å¤\n\n * minio quickstart guide\n\n> åæ: https://docs.min.io/docs/minio-server-configuration-guide.html',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Minioå¤ç§æ·ï¼Multi-tenantï¼é¨ç½²æå",frontmatter:{title:"Minioå¤ç§æ·ï¼Multi-tenantï¼é¨ç½²æå",date:"2022-02-09T11:27:22.000Z",permalink:"/pages/9b5f74/"},regularPath:"/12.MinIO/01.Minio%E6%9C%8D%E5%8A%A1%E5%99%A8/09.Minio%E5%A4%9A%E7%A7%9F%E6%88%B7%EF%BC%88Multi-tenant%EF%BC%89%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97.html",relativePath:"12.MinIO/01.Minioæå¡å¨/09.Minioå¤ç§æ·ï¼Multi-tenantï¼é¨ç½²æå.md",key:"v-1128e807",path:"/pages/9b5f74/",headers:[{level:2,title:"åæºé¨ç½²",slug:"åæºé¨ç½²",normalizedTitle:"åæºé¨ç½²",charIndex:33},{level:2,title:"åå¸å¼é¨ç½²",slug:"åå¸å¼é¨ç½²",normalizedTitle:"åå¸å¼é¨ç½²",charIndex:783},{level:2,title:"äºç«¯å¯ä¼¸ç¼©é¨ç½²",slug:"äºç«¯å¯ä¼¸ç¼©é¨ç½²",normalizedTitle:"äºç«¯å¯ä¼¸ç¼©é¨ç½²",charIndex:1834}],headersStr:"åæºé¨ç½² åå¸å¼é¨ç½² äºç«¯å¯ä¼¸ç¼©é¨ç½²",content:"# Minioå¤ç§æ·ï¼Multi-tenantï¼é¨ç½²æå\n\n\n# åæºé¨ç½²\n\nè¦å¨åå°æºå¨ä¸æç®¡å¤ä¸ªç§æ·ï¼ä¸ºæ¯ä¸ªç§æ·è¿è¡ä¸ä¸ªMinio server,ä½¿ç¨ä¸åçHTTPSç«¯å£ãéç½®åæ°æ®ç®å½ã\n\n# ç¤ºä¾1ï¼åä¸»æºï¼åç£ç\n\nä»¥ä¸ç¤ºä¾å¨ä¸åç£çä¸æç®¡ä¸ä¸ªç§æ·ã\n\nminio --config-dir ~/tenant1 server --address :9001 /data/tenant1minio --config-dir ~/tenant2 server --address :9002 /data/tenant2minio --config-dir ~/tenant3 server --address :9003 /data/tenant3\n\n\n\n\n# ç¤ºä¾2ï¼åä¸»æºï¼å¤åç£ç (erasure code)\n\nä»¥ä¸ç¤ºä¾å¨å¤åç£çä¸æç®¡ä¸ä¸ªç§æ·ã\n\nminio --config-dir ~/tenant1 server --address :9001 /disk1/data/tenant1 /disk2/data/tenant1 /disk3/data/tenant1 /disk4/data/tenant1minio --config-dir ~/tenant2 server --address :9002 /disk1/data/tenant2 /disk2/data/tenant2 /disk3/data/tenant2 /disk4/data/tenant2minio --config-dir ~/tenant3 server --address :9003 /disk1/data/tenant3 /disk2/data/tenant3 /disk3/data/tenant3 /disk4/data/tenant3\n\n\n\n\n\n# åå¸å¼é¨ç½²\n\nè¦å¨åå¸å¼ç¯å¢ä¸­æç®¡å¤ä¸ªç§æ·ï¼åæ¶è¿è¡å¤ä¸ªåå¸å¼Minioå®ä¾ãTo host multiple tenants in a distributed environment, run several distributed Minio instances concurrently.\n\n# ç¤ºä¾3 : å¤ä¸»æºï¼å¤åç£ç (erasure code)\n\nä»¥ä¸ç¤ºä¾å¨ä¸ä¸ª4èç¹éç¾¤ä¸­æç®¡ä¸ä¸ªç§æ·ãå¨4ä¸ªèç¹éé½æ§è¡ä¸åå½ä»¤ï¼\n\nexport MINIO_ACCESS_KEY=<TENANT1_ACCESS_KEY>export MINIO_SECRET_KEY=<TENANT1_SECRET_KEY>minio --config-dir ~/tenant1 server --address :9001 http://192.168.10.11/data/tenant1 http://192.168.10.12/data/tenant1 http://192.168.10.13/data/tenant1 http://192.168.10.14/data/tenant1export MINIO_ACCESS_KEY=<TENANT2_ACCESS_KEY>export MINIO_SECRET_KEY=<TENANT2_SECRET_KEY>minio --config-dir ~/tenant2 server --address :9002 http://192.168.10.11/data/tenant2 http://192.168.10.12/data/tenant2 http://192.168.10.13/data/tenant2 http://192.168.10.14/data/tenant2export MINIO_ACCESS_KEY=<TENANT3_ACCESS_KEY>export MINIO_SECRET_KEY=<TENANT3_SECRET_KEY>minio --config-dir ~/tenant3 server --address :9003 http://192.168.10.11/data/tenant3 http://192.168.10.12/data/tenant3 http://192.168.10.13/data/tenant3 http://192.168.10.14/data/tenant3\n\n\n\n\n\n# äºç«¯å¯ä¼¸ç¼©é¨ç½²\n\nå¯¹äºå¤§åå¤ç§æ·Minioé¨ç½²ï¼æä»¬å»ºè®®ä½¿ç¨ä¸ä¸ªæµè¡çå®¹å¨ç¼æå¹³å°ï¼æ¯å¦KubernetesãDC/OSï¼æèæ¯Docker Swarm.åè è¿ä¸ªææ¡£ ,å­¦ä¹ å¦ä½å¨ç¼æå¹³å°ä¸­ä½¿ç¨Minioã\n\n> åæ: https://docs.min.io/docs/multi-tenant-minio-deployment-guide.html",normalizedContent:"# minioå¤ç§æ·ï¼multi-tenantï¼é¨ç½²æå\n\n\n# åæºé¨ç½²\n\nè¦å¨åå°æºå¨ä¸æç®¡å¤ä¸ªç§æ·ï¼ä¸ºæ¯ä¸ªç§æ·è¿è¡ä¸ä¸ªminio server,ä½¿ç¨ä¸åçhttpsç«¯å£ãéç½®åæ°æ®ç®å½ã\n\n# ç¤ºä¾1ï¼åä¸»æºï¼åç£ç\n\nä»¥ä¸ç¤ºä¾å¨ä¸åç£çä¸æç®¡ä¸ä¸ªç§æ·ã\n\nminio --config-dir ~/tenant1 server --address :9001 /data/tenant1minio --config-dir ~/tenant2 server --address :9002 /data/tenant2minio --config-dir ~/tenant3 server --address :9003 /data/tenant3\n\n\n\n\n# ç¤ºä¾2ï¼åä¸»æºï¼å¤åç£ç (erasure code)\n\nä»¥ä¸ç¤ºä¾å¨å¤åç£çä¸æç®¡ä¸ä¸ªç§æ·ã\n\nminio --config-dir ~/tenant1 server --address :9001 /disk1/data/tenant1 /disk2/data/tenant1 /disk3/data/tenant1 /disk4/data/tenant1minio --config-dir ~/tenant2 server --address :9002 /disk1/data/tenant2 /disk2/data/tenant2 /disk3/data/tenant2 /disk4/data/tenant2minio --config-dir ~/tenant3 server --address :9003 /disk1/data/tenant3 /disk2/data/tenant3 /disk3/data/tenant3 /disk4/data/tenant3\n\n\n\n\n\n# åå¸å¼é¨ç½²\n\nè¦å¨åå¸å¼ç¯å¢ä¸­æç®¡å¤ä¸ªç§æ·ï¼åæ¶è¿è¡å¤ä¸ªåå¸å¼minioå®ä¾ãto host multiple tenants in a distributed environment, run several distributed minio instances concurrently.\n\n# ç¤ºä¾3 : å¤ä¸»æºï¼å¤åç£ç (erasure code)\n\nä»¥ä¸ç¤ºä¾å¨ä¸ä¸ª4èç¹éç¾¤ä¸­æç®¡ä¸ä¸ªç§æ·ãå¨4ä¸ªèç¹éé½æ§è¡ä¸åå½ä»¤ï¼\n\nexport minio_access_key=<tenant1_access_key>export minio_secret_key=<tenant1_secret_key>minio --config-dir ~/tenant1 server --address :9001 http://192.168.10.11/data/tenant1 http://192.168.10.12/data/tenant1 http://192.168.10.13/data/tenant1 http://192.168.10.14/data/tenant1export minio_access_key=<tenant2_access_key>export minio_secret_key=<tenant2_secret_key>minio --config-dir ~/tenant2 server --address :9002 http://192.168.10.11/data/tenant2 http://192.168.10.12/data/tenant2 http://192.168.10.13/data/tenant2 http://192.168.10.14/data/tenant2export minio_access_key=<tenant3_access_key>export minio_secret_key=<tenant3_secret_key>minio --config-dir ~/tenant3 server --address :9003 http://192.168.10.11/data/tenant3 http://192.168.10.12/data/tenant3 http://192.168.10.13/data/tenant3 http://192.168.10.14/data/tenant3\n\n\n\n\n\n# äºç«¯å¯ä¼¸ç¼©é¨ç½²\n\nå¯¹äºå¤§åå¤ç§æ·minioé¨ç½²ï¼æä»¬å»ºè®®ä½¿ç¨ä¸ä¸ªæµè¡çå®¹å¨ç¼æå¹³å°ï¼æ¯å¦kubernetesãdc/osï¼æèæ¯docker swarm.åè è¿ä¸ªææ¡£ ,å­¦ä¹ å¦ä½å¨ç¼æå¹³å°ä¸­ä½¿ç¨minioã\n\n> åæ: https://docs.min.io/docs/multi-tenant-minio-deployment-guide.html",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Minioå®¢æ·ç«¯å¿«éå¥é¨æå",frontmatter:{title:"Minioå®¢æ·ç«¯å¿«éå¥é¨æå",date:"2022-02-09T11:29:26.000Z",permalink:"/pages/17c975/"},regularPath:"/12.MinIO/02.Minio%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/01.Minio%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97.html",relativePath:"12.MinIO/02.Minioå®¢æ·ç«¯å¿«éå¥é¨æå/01.Minioå®¢æ·ç«¯å¿«éå¥é¨æå.md",key:"v-a77e2b92",path:"/pages/17c975/",headers:[{level:2,title:"Dockerå®¹å¨",slug:"dockerå®¹å¨",normalizedTitle:"dockerå®¹å¨",charIndex:490},{level:3,title:"ç¨³å®ç",slug:"ç¨³å®ç",normalizedTitle:"ç¨³å®ç",charIndex:503},{level:3,title:"å°é²ç",slug:"å°é²ç",normalizedTitle:"å°é²ç",charIndex:561},{level:2,title:"macOS",slug:"macos",normalizedTitle:"macos",charIndex:752},{level:3,title:"Homebrew",slug:"homebrew",normalizedTitle:"homebrew",charIndex:762},{level:2,title:"GNU/Linux",slug:"gnu-linux",normalizedTitle:"gnu/linux",charIndex:832},{level:3,title:"ä¸è½½äºè¿å¶æä»¶",slug:"ä¸è½½äºè¿å¶æä»¶",normalizedTitle:"ä¸è½½äºè¿å¶æä»¶",charIndex:846},{level:2,title:"Microsoft Windows",slug:"microsoft-windows",normalizedTitle:"microsoft windows",charIndex:995},{level:3,title:"ä¸è½½äºè¿å¶æä»¶",slug:"ä¸è½½äºè¿å¶æä»¶-2",normalizedTitle:"ä¸è½½äºè¿å¶æä»¶",charIndex:846},{level:2,title:"éè¿æºç å®è£",slug:"éè¿æºç å®è£",normalizedTitle:"éè¿æºç å®è£",charIndex:1179},{level:2,title:"æ·»å ä¸ä¸ªäºå­å¨æå¡",slug:"æ·»å ä¸ä¸ªäºå­å¨æå¡",normalizedTitle:"æ·»å ä¸ä¸ªäºå­å¨æå¡",charIndex:1389},{level:3,title:"ç¤ºä¾-Minioäºå­å¨",slug:"ç¤ºä¾-minioäºå­å¨",normalizedTitle:"ç¤ºä¾-minioäºå­å¨",charIndex:1705},{level:3,title:"ç¤ºä¾-Amazon S3äºå­å¨",slug:"ç¤ºä¾-amazon-s3äºå­å¨",normalizedTitle:"ç¤ºä¾-amazon s3äºå­å¨",charIndex:1873},{level:3,title:"ç¤ºä¾-Googleäºå­å¨",slug:"ç¤ºä¾-googleäºå­å¨",normalizedTitle:"ç¤ºä¾-googleäºå­å¨",charIndex:2062},{level:2,title:"éªè¯",slug:"éªè¯",normalizedTitle:"éªè¯",charIndex:2301},{level:2,title:"æ¥å¸¸ä½¿ç¨",slug:"æ¥å¸¸ä½¿ç¨",normalizedTitle:"æ¥å¸¸ä½¿ç¨",charIndex:1437},{level:3,title:"Shellå«å",slug:"shellå«å",normalizedTitle:"shellå«å",charIndex:2711},{level:3,title:"Shellèªå¨è¡¥å¨",slug:"shellèªå¨è¡¥å¨",normalizedTitle:"shellèªå¨è¡¥å¨",charIndex:2869}],headersStr:"Dockerå®¹å¨ ç¨³å®ç å°é²ç macOS Homebrew GNU/Linux ä¸è½½äºè¿å¶æä»¶ Microsoft Windows ä¸è½½äºè¿å¶æä»¶ éè¿æºç å®è£ æ·»å ä¸ä¸ªäºå­å¨æå¡ ç¤ºä¾-Minioäºå­å¨ ç¤ºä¾-Amazon S3äºå­å¨ ç¤ºä¾-Googleäºå­å¨ éªè¯ æ¥å¸¸ä½¿ç¨ Shellå«å Shellèªå¨è¡¥å¨",content:"# Minioå®¢æ·ç«¯å¿«éå¥é¨æå\n\nMinio Client (mc)ä¸ºlsï¼catï¼cpï¼mirrorï¼diffï¼findç­UNIXå½ä»¤æä¾äºä¸ç§æ¿ä»£æ¹æ¡ãå®æ¯ææä»¶ç³»ç»åå¼å®¹Amazon S3çäºå­å¨æå¡ï¼AWS Signature v2åv4ï¼ã\n\nls       ååºæä»¶åæä»¶å¤¹ã\nmb       åå»ºä¸ä¸ªå­å¨æ¡¶æä¸ä¸ªæä»¶å¤¹ã\ncat      æ¾ç¤ºæä»¶åå¯¹è±¡åå®¹ã\npipe     å°ä¸ä¸ªSTDINéå®åå°ä¸ä¸ªå¯¹è±¡æèæä»¶æèSTDOUTã\nshare    çæç¨äºå±äº«çURLã\ncp       æ·è´æä»¶åå¯¹è±¡ã\nmirror   ç»å­å¨æ¡¶åæä»¶å¤¹åéåã\nfind     åºäºåæ°æ¥æ¾æä»¶ã\ndiff     å¯¹ä¸¤ä¸ªæä»¶å¤¹æèå­å¨æ¡¶æ¯è¾å·®å¼ã\nrm       å é¤æä»¶åå¯¹è±¡ã\nevents   ç®¡çå¯¹è±¡éç¥ã\nwatch    çå¬æä»¶åå¯¹è±¡çäºä»¶ã\npolicy   ç®¡çè®¿é®ç­ç¥ã\nsession  ä¸ºcpå½ä»¤ç®¡çä¿å­çä¼è¯ã\nconfig   ç®¡çmcéç½®æä»¶ã\nupdate   æ£æ¥è½¯ä»¶æ´æ°ã\nversion  è¾åºçæ¬ä¿¡æ¯ã\n\n\n\n# Dockerå®¹å¨\n\n\n# ç¨³å®ç\n\ndocker pull minio/mcdocker run minio/mc ls play\n\n\n\n# å°é²ç\n\ndocker pull minio/mc:edgedocker run minio/mc:edge ls play\n\n\næ³¨æ: ä¸è¿°ç¤ºä¾é»è®¤ä½¿ç¨Minioæ¼ç¤ºç¯å¢åæ¼ç¤ºï¼å¦ææ³ç¨mcæä½å¶å®S3å¼å®¹çæå¡ï¼éç¨ä¸é¢çæ¹å¼æ¥å¯å¨å®¹å¨ï¼\n\ndocker run -it --entrypoint=/bin/sh minio/mc\n\n\nç¶åä½¿ç¨mc configå½ä»¤ã\n\n\n# macOS\n\n\n# Homebrew\n\nä½¿ç¨Homebrewå®è£mcã\n\nbrew install minio/stable/mcmc --help\n\n\n\n# GNU/Linux\n\n\n# ä¸è½½äºè¿å¶æä»¶\n\nå¹³å°          CPUæ¶æ          URL\nGNU/Linux   64-bit Intel   https://dl.minio.io/client/mc/release/linux-amd64/mc\n\nchmod +x mc./mc --help\n\n\n\n# Microsoft Windows\n\n\n# ä¸è½½äºè¿å¶æä»¶\n\nå¹³å°                  CPUæ¶æ          URL\nMicrosoft Windows   64-bit Intel   https://dl.minio.io/client/mc/release/windows-amd64/mc.exe\n\nmc.exe --help\n\n\n\n# éè¿æºç å®è£\n\néè¿æºç å®è£ä»éç¨äºå¼åäººååé«çº§ç¨æ·ãmc updateå½ä»¤ä¸æ¯æåºäºæºç å®è£çæ´æ°éç¥ãè¯·ä»https://minio.io/downloads/#minio-clientä¸è½½å®æ¹çæ¬ã\n\nå¦ææ¨æ²¡æGolangç¯å¢ï¼è¯·åç§å¦ä½å®è£Golangã\n\ngo get -d github.com/minio/mccd ${GOPATH}/src/github.com/minio/mcmake\n\n\n\n# æ·»å ä¸ä¸ªäºå­å¨æå¡\n\nå¦æä½ æç®ä»å¨POSIXå¼å®¹æä»¶ç³»ç»ä¸­ä½¿ç¨mc,é£ä½ å¯ä»¥ç´æ¥ç¥è¿æ¬èï¼è·³å°æ¥å¸¸ä½¿ç¨ã\n\næ·»å ä¸ä¸ªæå¤ä¸ªS3å¼å®¹çæå¡ï¼è¯·åèä¸é¢è¯´æãmcå°ææçéç½®ä¿¡æ¯é½å­å¨å¨~/.mc/config.jsonæä»¶ä¸­ã\n\nmc config host add <ALIAS> <YOUR-S3-ENDPOINT> <YOUR-ACCESS-KEY> <YOUR-SECRET-KEY> <API-SIGNATURE>\n\n\nå«åå°±æ¯ç»ä½ çäºå­å¨æå¡èµ·äºä¸ä¸ªç­ç¹çå¤å·ãS3 endpoint,access keyåsecret keyæ¯ä½ çäºå­å¨æå¡æä¾çãAPIç­¾åæ¯å¯éåæ°ï¼é»è®¤æåµä¸ï¼å®è¢«è®¾ç½®ä¸º\"S3v4\"ã\n\n\n# ç¤ºä¾-Minioäºå­å¨\n\nä»Minioæå¡è·å¾URLãaccess keyåsecret keyã\n\nmc config host add minio http://192.168.1.51 BKIKJAA5BMMU2RHO6IBB V7f1CwQqAcwo80UEIJEjc5gVQUSSx5ohQ9GSrr12 S3v4\n\n\n\n# ç¤ºä¾-Amazon S3äºå­å¨\n\nåèAWS Credentialsæåè·åä½ çAccessKeyIDåSecretAccessKeyã\n\nmc config host add s3 https://s3.amazonaws.com BKIKJAA5BMMU2RHO6IBB V7f1CwQqAcwo80UEIJEjc5gVQUSSx5ohQ9GSrr12 S3v4\n\n\n\n# ç¤ºä¾-Googleäºå­å¨\n\nåèGoogle Credentials Guideè·åä½ çAccessKeyIDåSecretAccessKeyã\n\nmc config host add gcs  https://storage.googleapis.com BKIKJAA5BMMU2RHO6IBB V8f1CwQqAcwo80UEIJEjc5gVQUSSx5ohQ9GSrr12 S3v2\n\n\næ³¨æï¼Googleäºå­å¨åªæ¯ææ§çç­¾åçæ¬V2ï¼æä»¥ä½ éè¦éæ©S3v2ã\n\n\n# éªè¯\n\nmcé¢åéç½®äºäºå­å¨æå¡URLï¼https://play.minio.io:9000ï¼å«åâplayâãå®æ¯ä¸ä¸ªç¨äºç ååæµè¯çMinioæå¡ãå¦ææ³æµè¯Amazon S3,ä½ å¯ä»¥å°âplayâæ¿æ¢ä¸ºâs3âã\n\nç¤ºä¾:\n\nååºhttps://play.minio.io:9000ä¸çææå­å¨æ¡¶ã\n\nmc ls play\n[2016-03-22 19:47:48 PDT]     0B my-bucketname/\n[2016-03-22 22:01:07 PDT]     0B mytestbucket/\n[2016-03-22 20:04:39 PDT]     0B mybucketname/\n[2016-01-28 17:23:11 PST]     0B newbucket/\n[2016-03-20 09:08:36 PDT]     0B s3git-test/\n\n\n\n# æ¥å¸¸ä½¿ç¨\n\n\n# Shellå«å\n\nä½ å¯ä»¥æ·»å shellå«åæ¥è¦çé»è®¤çUnixå·¥å·å½ä»¤ã\n\nalias ls='mc ls'\nalias cp='mc cp'\nalias cat='mc cat'\nalias mkdir='mc mb'\nalias pipe='mc pipe'\nalias find='mc find'\n\n\n\n# Shellèªå¨è¡¥å¨\n\nä½ ä¹å¯ä»¥ä¸è½½autocomplete/bash_autocompleteå°/etc/bash_completion.d/ï¼ç¶åå°å¶éå½åä¸ºmcãå«å¿äºå¨è¿ä¸ªæä»¶è¿è¡sourceå½ä»¤è®©å¶å¨ä½ çå½åshellä¸å¯ç¨ã\n\nsudo wget https://raw.githubusercontent.com/minio/mc/master/autocomplete/bash_autocomplete -O /etc/bash_completion.d/mc\nsource /etc/bash_completion.d/mc\n\n\nmc <TAB>\nadmin    config   diff     ls       mirror   policy   session  update   watch\ncat      cp       events   mb       pipe     rm       share    version\n",normalizedContent:"# minioå®¢æ·ç«¯å¿«éå¥é¨æå\n\nminio client (mc)ä¸ºlsï¼catï¼cpï¼mirrorï¼diffï¼findç­unixå½ä»¤æä¾äºä¸ç§æ¿ä»£æ¹æ¡ãå®æ¯ææä»¶ç³»ç»åå¼å®¹amazon s3çäºå­å¨æå¡ï¼aws signature v2åv4ï¼ã\n\nls       ååºæä»¶åæä»¶å¤¹ã\nmb       åå»ºä¸ä¸ªå­å¨æ¡¶æä¸ä¸ªæä»¶å¤¹ã\ncat      æ¾ç¤ºæä»¶åå¯¹è±¡åå®¹ã\npipe     å°ä¸ä¸ªstdinéå®åå°ä¸ä¸ªå¯¹è±¡æèæä»¶æèstdoutã\nshare    çæç¨äºå±äº«çurlã\ncp       æ·è´æä»¶åå¯¹è±¡ã\nmirror   ç»å­å¨æ¡¶åæä»¶å¤¹åéåã\nfind     åºäºåæ°æ¥æ¾æä»¶ã\ndiff     å¯¹ä¸¤ä¸ªæä»¶å¤¹æèå­å¨æ¡¶æ¯è¾å·®å¼ã\nrm       å é¤æä»¶åå¯¹è±¡ã\nevents   ç®¡çå¯¹è±¡éç¥ã\nwatch    çå¬æä»¶åå¯¹è±¡çäºä»¶ã\npolicy   ç®¡çè®¿é®ç­ç¥ã\nsession  ä¸ºcpå½ä»¤ç®¡çä¿å­çä¼è¯ã\nconfig   ç®¡çmcéç½®æä»¶ã\nupdate   æ£æ¥è½¯ä»¶æ´æ°ã\nversion  è¾åºçæ¬ä¿¡æ¯ã\n\n\n\n# dockerå®¹å¨\n\n\n# ç¨³å®ç\n\ndocker pull minio/mcdocker run minio/mc ls play\n\n\n\n# å°é²ç\n\ndocker pull minio/mc:edgedocker run minio/mc:edge ls play\n\n\næ³¨æ: ä¸è¿°ç¤ºä¾é»è®¤ä½¿ç¨minioæ¼ç¤ºç¯å¢åæ¼ç¤ºï¼å¦ææ³ç¨mcæä½å¶å®s3å¼å®¹çæå¡ï¼éç¨ä¸é¢çæ¹å¼æ¥å¯å¨å®¹å¨ï¼\n\ndocker run -it --entrypoint=/bin/sh minio/mc\n\n\nç¶åä½¿ç¨mc configå½ä»¤ã\n\n\n# macos\n\n\n# homebrew\n\nä½¿ç¨homebrewå®è£mcã\n\nbrew install minio/stable/mcmc --help\n\n\n\n# gnu/linux\n\n\n# ä¸è½½äºè¿å¶æä»¶\n\nå¹³å°          cpuæ¶æ          url\ngnu/linux   64-bit intel   https://dl.minio.io/client/mc/release/linux-amd64/mc\n\nchmod +x mc./mc --help\n\n\n\n# microsoft windows\n\n\n# ä¸è½½äºè¿å¶æä»¶\n\nå¹³å°                  cpuæ¶æ          url\nmicrosoft windows   64-bit intel   https://dl.minio.io/client/mc/release/windows-amd64/mc.exe\n\nmc.exe --help\n\n\n\n# éè¿æºç å®è£\n\néè¿æºç å®è£ä»éç¨äºå¼åäººååé«çº§ç¨æ·ãmc updateå½ä»¤ä¸æ¯æåºäºæºç å®è£çæ´æ°éç¥ãè¯·ä»https://minio.io/downloads/#minio-clientä¸è½½å®æ¹çæ¬ã\n\nå¦ææ¨æ²¡ægolangç¯å¢ï¼è¯·åç§å¦ä½å®è£golangã\n\ngo get -d github.com/minio/mccd ${gopath}/src/github.com/minio/mcmake\n\n\n\n# æ·»å ä¸ä¸ªäºå­å¨æå¡\n\nå¦æä½ æç®ä»å¨posixå¼å®¹æä»¶ç³»ç»ä¸­ä½¿ç¨mc,é£ä½ å¯ä»¥ç´æ¥ç¥è¿æ¬èï¼è·³å°æ¥å¸¸ä½¿ç¨ã\n\næ·»å ä¸ä¸ªæå¤ä¸ªs3å¼å®¹çæå¡ï¼è¯·åèä¸é¢è¯´æãmcå°ææçéç½®ä¿¡æ¯é½å­å¨å¨~/.mc/config.jsonæä»¶ä¸­ã\n\nmc config host add <alias> <your-s3-endpoint> <your-access-key> <your-secret-key> <api-signature>\n\n\nå«åå°±æ¯ç»ä½ çäºå­å¨æå¡èµ·äºä¸ä¸ªç­ç¹çå¤å·ãs3 endpoint,access keyåsecret keyæ¯ä½ çäºå­å¨æå¡æä¾çãapiç­¾åæ¯å¯éåæ°ï¼é»è®¤æåµä¸ï¼å®è¢«è®¾ç½®ä¸º\"s3v4\"ã\n\n\n# ç¤ºä¾-minioäºå­å¨\n\nä»minioæå¡è·å¾urlãaccess keyåsecret keyã\n\nmc config host add minio http://192.168.1.51 bkikjaa5bmmu2rho6ibb v7f1cwqqacwo80ueijejc5gvqussx5ohq9gsrr12 s3v4\n\n\n\n# ç¤ºä¾-amazon s3äºå­å¨\n\nåèaws credentialsæåè·åä½ çaccesskeyidåsecretaccesskeyã\n\nmc config host add s3 https://s3.amazonaws.com bkikjaa5bmmu2rho6ibb v7f1cwqqacwo80ueijejc5gvqussx5ohq9gsrr12 s3v4\n\n\n\n# ç¤ºä¾-googleäºå­å¨\n\nåègoogle credentials guideè·åä½ çaccesskeyidåsecretaccesskeyã\n\nmc config host add gcs  https://storage.googleapis.com bkikjaa5bmmu2rho6ibb v8f1cwqqacwo80ueijejc5gvqussx5ohq9gsrr12 s3v2\n\n\næ³¨æï¼googleäºå­å¨åªæ¯ææ§çç­¾åçæ¬v2ï¼æä»¥ä½ éè¦éæ©s3v2ã\n\n\n# éªè¯\n\nmcé¢åéç½®äºäºå­å¨æå¡urlï¼https://play.minio.io:9000ï¼å«åâplayâãå®æ¯ä¸ä¸ªç¨äºç ååæµè¯çminioæå¡ãå¦ææ³æµè¯amazon s3,ä½ å¯ä»¥å°âplayâæ¿æ¢ä¸ºâs3âã\n\nç¤ºä¾:\n\nååºhttps://play.minio.io:9000ä¸çææå­å¨æ¡¶ã\n\nmc ls play\n[2016-03-22 19:47:48 pdt]     0b my-bucketname/\n[2016-03-22 22:01:07 pdt]     0b mytestbucket/\n[2016-03-22 20:04:39 pdt]     0b mybucketname/\n[2016-01-28 17:23:11 pst]     0b newbucket/\n[2016-03-20 09:08:36 pdt]     0b s3git-test/\n\n\n\n# æ¥å¸¸ä½¿ç¨\n\n\n# shellå«å\n\nä½ å¯ä»¥æ·»å shellå«åæ¥è¦çé»è®¤çunixå·¥å·å½ä»¤ã\n\nalias ls='mc ls'\nalias cp='mc cp'\nalias cat='mc cat'\nalias mkdir='mc mb'\nalias pipe='mc pipe'\nalias find='mc find'\n\n\n\n# shellèªå¨è¡¥å¨\n\nä½ ä¹å¯ä»¥ä¸è½½autocomplete/bash_autocompleteå°/etc/bash_completion.d/ï¼ç¶åå°å¶éå½åä¸ºmcãå«å¿äºå¨è¿ä¸ªæä»¶è¿è¡sourceå½ä»¤è®©å¶å¨ä½ çå½åshellä¸å¯ç¨ã\n\nsudo wget https://raw.githubusercontent.com/minio/mc/master/autocomplete/bash_autocomplete -o /etc/bash_completion.d/mc\nsource /etc/bash_completion.d/mc\n\n\nmc <tab>\nadmin    config   diff     ls       mirror   policy   session  update   watch\ncat      cp       events   mb       pipe     rm       share    version\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Ubuntu å¼åç¯å¢åééç½®",frontmatter:{title:"Ubuntu å¼åç¯å¢åééç½®",date:"2022-02-09T10:56:45.000Z",permalink:"/pages/65555a/"},regularPath:"/04.Ubuntu/02.Ubuntu%20%E4%BD%BF%E7%94%A8/03.Ubuntu%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE.html",relativePath:"04.Ubuntu/02.Ubuntu ä½¿ç¨/03.Ubuntu å¼åç¯å¢åééç½®.md",key:"v-40000776",path:"/pages/65555a/",headers:[{level:2,title:"JDK",slug:"jdk",normalizedTitle:"jdk",charIndex:28},{level:3,title:"ä¸è½½å®è£å",slug:"ä¸è½½å®è£å",normalizedTitle:"ä¸è½½å®è£å",charIndex:36},{level:3,title:"ä¸ä¼ å¹¶è§£å",slug:"ä¸ä¼ å¹¶è§£å",normalizedTitle:"ä¸ä¼ å¹¶è§£å",charIndex:191},{level:3,title:"éç½®ç¯å¢åé",slug:"éç½®ç¯å¢åé",normalizedTitle:"éç½®ç¯å¢åé",charIndex:295},{level:3,title:"æ§è¡source /etc/profile",slug:"æ§è¡source-etc-profile",normalizedTitle:"æ§è¡source /etc/profile",charIndex:518},{level:3,title:"æ£æ¥jdkæ¯å¦çæjava -version",slug:"æ£æ¥jdkæ¯å¦çæjava-version",normalizedTitle:"æ£æ¥jdkæ¯å¦çæjava -version",charIndex:568},{level:2,title:"Maven",slug:"maven",normalizedTitle:"maven",charIndex:806},{level:3,title:"ä¸è½½å®è£å",slug:"ä¸è½½å®è£å-2",normalizedTitle:"ä¸è½½å®è£å",charIndex:36},{level:3,title:"ä¸ä¼ å¹¶è§£å",slug:"ä¸ä¼ å¹¶è§£å-2",normalizedTitle:"ä¸ä¼ å¹¶è§£å",charIndex:191},{level:3,title:"éç½®ç¯å¢åé",slug:"éç½®ç¯å¢åé-2",normalizedTitle:"éç½®ç¯å¢åé",charIndex:295},{level:3,title:"æ§è¡source /etc/profile",slug:"æ§è¡source-etc-profile-2",normalizedTitle:"æ§è¡source /etc/profile",charIndex:518},{level:3,title:"æ£æ¥mavenæ¯å¦çæmvn -v",slug:"æ£æ¥mavenæ¯å¦çæmvn-v",normalizedTitle:"æ£æ¥mavenæ¯å¦çæmvn -v",charIndex:1220},{level:2,title:"NodeJs",slug:"nodejs",normalizedTitle:"nodejs",charIndex:1640},{level:3,title:"ç¦»çº¿å®è£",slug:"ç¦»çº¿å®è£",normalizedTitle:"ç¦»çº¿å®è£",charIndex:1651},{level:3,title:"ä¸è½½å®è£å",slug:"ä¸è½½å®è£å-3",normalizedTitle:"ä¸è½½å®è£å",charIndex:36},{level:3,title:"ä¸ä¼ å¹¶è§£å",slug:"ä¸ä¼ å¹¶è§£å-3",normalizedTitle:"ä¸ä¼ å¹¶è§£å",charIndex:191},{level:3,title:"éç½®ç¯å¢åé",slug:"éç½®ç¯å¢åé-3",normalizedTitle:"éç½®ç¯å¢åé",charIndex:295},{level:3,title:"æ§è¡source /etc/profile",slug:"æ§è¡source-etc-profile-3",normalizedTitle:"æ§è¡source /etc/profile",charIndex:518},{level:3,title:"æ§è¡node -vånpm -vå½ä»¤æ£æ¥è½¯ä»¶çæ¬",slug:"æ§è¡node-vånpm-vå½ä»¤æ£æ¥è½¯ä»¶çæ¬",normalizedTitle:"æ§è¡node -vånpm -vå½ä»¤æ£æ¥è½¯ä»¶çæ¬",charIndex:2211},{level:3,title:"å¨çº¿å®è£",slug:"å¨çº¿å®è£",normalizedTitle:"å¨çº¿å®è£",charIndex:2278},{level:3,title:"ä½¿ç¨ apt å®è£ node",slug:"ä½¿ç¨-apt-å®è£-node",normalizedTitle:"ä½¿ç¨ apt å®è£ node",charIndex:2336},{level:3,title:"ä½¿ç¨ apt å®è£ npm",slug:"ä½¿ç¨-apt-å®è£-npm",normalizedTitle:"ä½¿ç¨ apt å®è£ npm",charIndex:2381},{level:3,title:"npm æ´æ°",slug:"npm-æ´æ°",normalizedTitle:"npm æ´æ°",charIndex:2459},{level:3,title:"node æ´æ°",slug:"node-æ´æ°",normalizedTitle:"node æ´æ°",charIndex:2535},{level:2,title:"æ·å® NPM éå",slug:"æ·å®-npm-éå",normalizedTitle:"æ·å® npm éå",charIndex:2978},{level:2,title:"npm å®è£yarn",slug:"npm-å®è£yarn",normalizedTitle:"npm å®è£yarn",charIndex:2998},{level:3,title:"ä¸å¥å½ä»¤æå®",slug:"ä¸å¥å½ä»¤æå®",normalizedTitle:"ä¸å¥å½ä»¤æå®",charIndex:3013},{level:3,title:"åéç½®ä¸æº",slug:"åéç½®ä¸æº",normalizedTitle:"åéç½®ä¸æº",charIndex:3089}],headersStr:"JDK ä¸è½½å®è£å ä¸ä¼ å¹¶è§£å éç½®ç¯å¢åé æ§è¡source /etc/profile æ£æ¥jdkæ¯å¦çæjava -version Maven ä¸è½½å®è£å ä¸ä¼ å¹¶è§£å éç½®ç¯å¢åé æ§è¡source /etc/profile æ£æ¥mavenæ¯å¦çæmvn -v NodeJs ç¦»çº¿å®è£ ä¸è½½å®è£å ä¸ä¼ å¹¶è§£å éç½®ç¯å¢åé æ§è¡source /etc/profile æ§è¡node -vånpm -vå½ä»¤æ£æ¥è½¯ä»¶çæ¬ å¨çº¿å®è£ ä½¿ç¨ apt å®è£ node ä½¿ç¨ apt å®è£ npm npm æ´æ° node æ´æ° æ·å® NPM éå npm å®è£yarn ä¸å¥å½ä»¤æå® åéç½®ä¸æº",content:'# Ubuntu 18.04 å¼åç¯å¢åééç½®\n\n\n# JDK\n\n\n# ä¸è½½å®è£å\n\nè®¿é®JDKå®æ¹ä¸è½½é¡µé¢ ï¼ä¸è½½Linux x64 Compressed Archiveçæ¬å®è£åï¼æ¬æç¨ä½¿ç¨ççæ¬ä¸ºï¼jdk-8u261-linux-x64.tar.gzã\n\nå¾éåæåè®®ï¼ç¹å»ä¸è½½\n\né¦æ¬¡ä½¿ç¨ç»å½Oracleè´¦å·ï¼æ ææ²¡æè´¦å·åè´¹æ³¨åä¸ä¸ªå³å¯ãç»å½æåä¼èªå¨å¼å§ä¸è½½ã\n\n\n# ä¸ä¼ å¹¶è§£å\n\n$ sudo mkdir /usr/local/java\n$ sudo tar -zxvf jdk-8u261-linux-x64.tar.gz -C /usr/local/java\n\n\n\n# éç½®ç¯å¢åé\n\n$ sudo vi /etc/profile\n\n\nå¨æä»¶æ«å°¾æå¥å¦ä¸åå®¹\n\n# jdk\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_261\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n\n\n\n# æ§è¡source /etc/profile\n\n$ source /etc/profile\n\n\n\n# æ£æ¥jdkæ¯å¦çæjava -version\n\nheyuqiang@heyuqiang:/usr/local/java/jdk1.8.0_261$ java -version \njava version "1.8.0_261"\nJava(TM) SE Runtime Environment (build 1.8.0_261-b12)\nJava HotSpot(TM) 64-Bit Server VM (build 25.261-b12, mixed mode)\n\n\n\n# Maven\n\n\n# ä¸è½½å®è£å\n\nè®¿é®Mavenå®æ¹ä¸è½½é¡µé¢ ï¼ä¸è½½Binary tar.gz archiveçæ¬å®è£åï¼æ¬æç¨ä½¿ç¨ççæ¬ä¸ºï¼apache-maven-3.6.3-bin.tar.gzã\n\n\n# ä¸ä¼ å¹¶è§£å\n\n$ sudo mkdir /usr/local/maven\n$ sudo tar -zxvf apache-maven-3.6.3-bin.tar.gz -C /usr/local/maven\n\n\n\n# éç½®ç¯å¢åé\n\n$ sudo vi /etc/profile\n\n\nå¨æä»¶æ«å°¾æå¥å¦ä¸åå®¹\n\n# maven\nexport NODEJS_HOME=/usr/local/maven/apache-maven-3.6.3\nexport PATH=$NODEJS_HOME/bin:$PATH\n\n\n\n# æ§è¡source /etc/profile\n\n$ source /etc/profile\n\n\n\n# æ£æ¥mavenæ¯å¦çæmvn -v\n\nheyuqiang@heyuqiang:/usr/local/maven/apache-maven-3.6.3$ mvn -v \nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: /usr/local/maven/apache-maven-3.6.3\nJava version: 1.8.0_261, vendor: Oracle Corporation, runtime: /usr/local/java/jdk1.8.0_261/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: "linux", version: "4.15.0-76-generic", arch: "amd64", family: "unix"\n\n\n\n# NodeJs\n\n\n# ç¦»çº¿å®è£\n\næ¨èå¤§å®¶ä½¿ç¨ç¦»çº¿å®è£æ¹å¼ï¼é¦åæ ¹æ®èªå·±çéè¦åä»å®ç½ä¸è½½éè¦çreleasesçæ¬å®è£åï¼æè¿éä¸è½½å®è£çnodeçæ¬ä¸ºv10.22.0ï¼è§£åéç½®å¥½ç¯å¢åéå³å¯ã\n\n\n\n\n# ä¸è½½å®è£å\n\nä½¿ç¨wgetå½ä»¤ä¸è½½äºè¿å¶å®è£ånode-v10.22.0-linux-x64.tar.gz\n\n$ wget https://nodejs.org/dist/latest-v10.x/node-v10.22.0-linux-x64.tar.gz\n\n\n\n# ä¸ä¼ å¹¶è§£å\n\n$ sudo mkdir /usr/local/lib/nodejs\n$ sudo tar -zxvf node-v10.22.0-linux-x64.tar.gz -C /usr/local/lib/nodejs/\n\n\n\n# éç½®ç¯å¢åé\n\n$ sudo vi /etc/profile\n\n\nå¨ææ¡£æ«å°¾è¿½å å¦ä¸åå®¹\n\n# nodejs\nexport NODEJS_HOME=/usr/local/lib/nodejs/node-v10.22.0-linux-x64\nexport PATH=$NODEJS_HOME/bin:$PATH\n\n\n\n# æ§è¡source /etc/profile\n\n$ source /etc/profile\n\n\n\n# æ§è¡node -vånpm -vå½ä»¤æ£æ¥è½¯ä»¶çæ¬\n\n$ node -v\nv10.22.0\n$ npm -v \n6.14.6\n\n\n\n# å¨çº¿å®è£\n\næç¤º\n\né»è®¤ä½¿ç¨ apt å®è£ç node å npm çæ¬å¯è½æ¯è¾èï¼éè¦æ´æ°ä¸ä¸å¯¹åºççæ¬\n\n\n# ä½¿ç¨ apt å®è£ node\n\nsudo apt install nodejs\n\n\n\n# ä½¿ç¨ apt å®è£ npm\n\nsudo apt install npm\n\n\n$ nodejs -v\nv8.10.0\n$ npm -v\n3.5.2\n\n\n\n# npm æ´æ°\n\nsudo npm i -g npm\n\n\néæ°æå¼ç»ç«¯ï¼æ¥ç npm çæ¬ï¼å¦ä¸çæ¬å·²ç»æ¯ææ°\n\n$ npm -v\n6.7.0\n\n\n\n# node æ´æ°\n\nåå®è£ n æ¨¡å\n\nsudo npm install -g n\n\n\n$ sudo npm install -g n\n/usr/local/bin/n -> /usr/local/lib/node_modules/n/bin/n\n+ n@2.1.12\nadded 1 package from 4 contributors in 0.649s\n\n\næ§è¡ sudo n latest å½ä»¤æ´æ° node\n\n$ sudo n latest\n\n     install : node-v11.8.0\n       mkdir : /usr/local/n/versions/node/11.8.0\n       fetch : https://nodejs.org/dist/v11.8.0/node-v11.8.0-linux-x64.tar.gz\n   installed : v11.8.0\n\n\néæ°æå¼ä¸ä¸ªç»ç«¯æ¥ççæ¬\n\n$ node -v\nv11.8.0\n\n\n\n# æ·å® NPM éå\n\nä½¿ç¨è¯´æ\n\n\n# npm å®è£yarn\n\n\n# ä¸å¥å½ä»¤æå®\n\nnpm install -g yarn --registry=https://registry.npm.taobao.org\n\n\n\n# åéç½®ä¸æº\n\nyarn config set registry https://registry.npm.taobao.org -g\nyarn config set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g\n',normalizedContent:'# ubuntu 18.04 å¼åç¯å¢åééç½®\n\n\n# jdk\n\n\n# ä¸è½½å®è£å\n\nè®¿é®jdkå®æ¹ä¸è½½é¡µé¢ ï¼ä¸è½½linux x64 compressed archiveçæ¬å®è£åï¼æ¬æç¨ä½¿ç¨ççæ¬ä¸ºï¼jdk-8u261-linux-x64.tar.gzã\n\nå¾éåæåè®®ï¼ç¹å»ä¸è½½\n\né¦æ¬¡ä½¿ç¨ç»å½oracleè´¦å·ï¼æ ææ²¡æè´¦å·åè´¹æ³¨åä¸ä¸ªå³å¯ãç»å½æåä¼èªå¨å¼å§ä¸è½½ã\n\n\n# ä¸ä¼ å¹¶è§£å\n\n$ sudo mkdir /usr/local/java\n$ sudo tar -zxvf jdk-8u261-linux-x64.tar.gz -c /usr/local/java\n\n\n\n# éç½®ç¯å¢åé\n\n$ sudo vi /etc/profile\n\n\nå¨æä»¶æ«å°¾æå¥å¦ä¸åå®¹\n\n# jdk\nexport java_home=/usr/local/java/jdk1.8.0_261\nexport jre_home=${java_home}/jre\nexport classpath=.:${java_home}/lib:${jre_home}/lib\nexport path=${java_home}/bin:$path\n\n\n\n# æ§è¡source /etc/profile\n\n$ source /etc/profile\n\n\n\n# æ£æ¥jdkæ¯å¦çæjava -version\n\nheyuqiang@heyuqiang:/usr/local/java/jdk1.8.0_261$ java -version \njava version "1.8.0_261"\njava(tm) se runtime environment (build 1.8.0_261-b12)\njava hotspot(tm) 64-bit server vm (build 25.261-b12, mixed mode)\n\n\n\n# maven\n\n\n# ä¸è½½å®è£å\n\nè®¿é®mavenå®æ¹ä¸è½½é¡µé¢ ï¼ä¸è½½binary tar.gz archiveçæ¬å®è£åï¼æ¬æç¨ä½¿ç¨ççæ¬ä¸ºï¼apache-maven-3.6.3-bin.tar.gzã\n\n\n# ä¸ä¼ å¹¶è§£å\n\n$ sudo mkdir /usr/local/maven\n$ sudo tar -zxvf apache-maven-3.6.3-bin.tar.gz -c /usr/local/maven\n\n\n\n# éç½®ç¯å¢åé\n\n$ sudo vi /etc/profile\n\n\nå¨æä»¶æ«å°¾æå¥å¦ä¸åå®¹\n\n# maven\nexport nodejs_home=/usr/local/maven/apache-maven-3.6.3\nexport path=$nodejs_home/bin:$path\n\n\n\n# æ§è¡source /etc/profile\n\n$ source /etc/profile\n\n\n\n# æ£æ¥mavenæ¯å¦çæmvn -v\n\nheyuqiang@heyuqiang:/usr/local/maven/apache-maven-3.6.3$ mvn -v \napache maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nmaven home: /usr/local/maven/apache-maven-3.6.3\njava version: 1.8.0_261, vendor: oracle corporation, runtime: /usr/local/java/jdk1.8.0_261/jre\ndefault locale: en_us, platform encoding: utf-8\nos name: "linux", version: "4.15.0-76-generic", arch: "amd64", family: "unix"\n\n\n\n# nodejs\n\n\n# ç¦»çº¿å®è£\n\næ¨èå¤§å®¶ä½¿ç¨ç¦»çº¿å®è£æ¹å¼ï¼é¦åæ ¹æ®èªå·±çéè¦åä»å®ç½ä¸è½½éè¦çreleasesçæ¬å®è£åï¼æè¿éä¸è½½å®è£çnodeçæ¬ä¸ºv10.22.0ï¼è§£åéç½®å¥½ç¯å¢åéå³å¯ã\n\n\n\n\n# ä¸è½½å®è£å\n\nä½¿ç¨wgetå½ä»¤ä¸è½½äºè¿å¶å®è£ånode-v10.22.0-linux-x64.tar.gz\n\n$ wget https://nodejs.org/dist/latest-v10.x/node-v10.22.0-linux-x64.tar.gz\n\n\n\n# ä¸ä¼ å¹¶è§£å\n\n$ sudo mkdir /usr/local/lib/nodejs\n$ sudo tar -zxvf node-v10.22.0-linux-x64.tar.gz -c /usr/local/lib/nodejs/\n\n\n\n# éç½®ç¯å¢åé\n\n$ sudo vi /etc/profile\n\n\nå¨ææ¡£æ«å°¾è¿½å å¦ä¸åå®¹\n\n# nodejs\nexport nodejs_home=/usr/local/lib/nodejs/node-v10.22.0-linux-x64\nexport path=$nodejs_home/bin:$path\n\n\n\n# æ§è¡source /etc/profile\n\n$ source /etc/profile\n\n\n\n# æ§è¡node -vånpm -vå½ä»¤æ£æ¥è½¯ä»¶çæ¬\n\n$ node -v\nv10.22.0\n$ npm -v \n6.14.6\n\n\n\n# å¨çº¿å®è£\n\næç¤º\n\né»è®¤ä½¿ç¨ apt å®è£ç node å npm çæ¬å¯è½æ¯è¾èï¼éè¦æ´æ°ä¸ä¸å¯¹åºççæ¬\n\n\n# ä½¿ç¨ apt å®è£ node\n\nsudo apt install nodejs\n\n\n\n# ä½¿ç¨ apt å®è£ npm\n\nsudo apt install npm\n\n\n$ nodejs -v\nv8.10.0\n$ npm -v\n3.5.2\n\n\n\n# npm æ´æ°\n\nsudo npm i -g npm\n\n\néæ°æå¼ç»ç«¯ï¼æ¥ç npm çæ¬ï¼å¦ä¸çæ¬å·²ç»æ¯ææ°\n\n$ npm -v\n6.7.0\n\n\n\n# node æ´æ°\n\nåå®è£ n æ¨¡å\n\nsudo npm install -g n\n\n\n$ sudo npm install -g n\n/usr/local/bin/n -> /usr/local/lib/node_modules/n/bin/n\n+ n@2.1.12\nadded 1 package from 4 contributors in 0.649s\n\n\næ§è¡ sudo n latest å½ä»¤æ´æ° node\n\n$ sudo n latest\n\n     install : node-v11.8.0\n       mkdir : /usr/local/n/versions/node/11.8.0\n       fetch : https://nodejs.org/dist/v11.8.0/node-v11.8.0-linux-x64.tar.gz\n   installed : v11.8.0\n\n\néæ°æå¼ä¸ä¸ªç»ç«¯æ¥ççæ¬\n\n$ node -v\nv11.8.0\n\n\n\n# æ·å® npm éå\n\nä½¿ç¨è¯´æ\n\n\n# npm å®è£yarn\n\n\n# ä¸å¥å½ä»¤æå®\n\nnpm install -g yarn --registry=https://registry.npm.taobao.org\n\n\n\n# åéç½®ä¸æº\n\nyarn config set registry https://registry.npm.taobao.org -g\nyarn config set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Minio Clientå®å¨æå",frontmatter:{title:"Minio Clientå®å¨æå",date:"2022-02-09T11:29:26.000Z",permalink:"/pages/538f88/"},regularPath:"/12.MinIO/02.Minio%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/02.Minio%20Client%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97.html",relativePath:"12.MinIO/02.Minioå®¢æ·ç«¯å¿«éå¥é¨æå/02.Minio Clientå®å¨æå.md",key:"v-2ac12114",path:"/pages/538f88/",headers:[{level:2,title:"1. ä¸è½½Minio Client",slug:"_1-ä¸è½½minio-client",normalizedTitle:"1. ä¸è½½minio client",charIndex:492},{level:3,title:"Dockerç¨³å®ç",slug:"dockerç¨³å®ç",normalizedTitle:"dockerç¨³å®ç",charIndex:514},{level:3,title:"Dockerå°é²ç",slug:"dockerå°é²ç",normalizedTitle:"dockerå°é²ç",charIndex:578},{level:3,title:"Homebrew (macOS)",slug:"homebrew-macos",normalizedTitle:"homebrew (macos)",charIndex:775},{level:3,title:"ä¸è½½äºè¿å¶æä»¶(GNU/Linux)",slug:"ä¸è½½äºè¿å¶æä»¶-gnu-linux",normalizedTitle:"ä¸è½½äºè¿å¶æä»¶(gnu/linux)",charIndex:853},{level:3,title:"ä¸è½½äºè¿å¶æä»¶(Microsoft Windows)",slug:"ä¸è½½äºè¿å¶æä»¶-microsoft-windows",normalizedTitle:"ä¸è½½äºè¿å¶æä»¶(microsoft windows)",charIndex:1013},{level:3,title:"éè¿æºç å®è£",slug:"éè¿æºç å®è£",normalizedTitle:"éè¿æºç å®è£",charIndex:1194},{level:2,title:"2. è¿è¡Minio Client",slug:"_2-è¿è¡minio-client",normalizedTitle:"2. è¿è¡minio client",charIndex:1377},{level:3,title:"GNU/Linux",slug:"gnu-linux",normalizedTitle:"gnu/linux",charIndex:861},{level:3,title:"macOS",slug:"macos",normalizedTitle:"macos",charIndex:785},{level:3,title:"Microsoft Windows",slug:"microsoft-windows",normalizedTitle:"microsoft windows",charIndex:1021},{level:2,title:"3. æ·»å ä¸ä¸ªäºå­å¨æå¡",slug:"_3-æ·»å ä¸ä¸ªäºå­å¨æå¡",normalizedTitle:"3. æ·»å ä¸ä¸ªäºå­å¨æå¡",charIndex:1512},{level:3,title:"ç¤ºä¾-Minioäºå­å¨",slug:"ç¤ºä¾-minioäºå­å¨",normalizedTitle:"ç¤ºä¾-minioäºå­å¨",charIndex:1839},{level:3,title:"ç¤ºä¾-Amazon S3äºå­å¨",slug:"ç¤ºä¾-amazon-s3äºå­å¨",normalizedTitle:"ç¤ºä¾-amazon s3äºå­å¨",charIndex:2007},{level:3,title:"ç¤ºä¾-Googleäºå­å¨",slug:"ç¤ºä¾-googleäºå­å¨",normalizedTitle:"ç¤ºä¾-googleäºå­å¨",charIndex:2196},{level:2,title:"4. éªè¯",slug:"_4-éªè¯",normalizedTitle:"4. éªè¯",charIndex:2435},{level:2,title:"5. æ¥å¸¸ä½¿ç¨",slug:"_5-æ¥å¸¸ä½¿ç¨",normalizedTitle:"5. æ¥å¸¸ä½¿ç¨",charIndex:2839},{level:2,title:"6. å¨å±åæ°",slug:"_6-å¨å±åæ°",normalizedTitle:"6. å¨å±åæ°",charIndex:2997},{level:3,title:"åæ° [âdebug]",slug:"åæ°-debug",normalizedTitle:"åæ° [âdebug]",charIndex:3009},{level:3,title:"åæ° [âjson]",slug:"åæ°-json",normalizedTitle:"åæ° [âjson]",charIndex:4029},{level:3,title:"åæ° [âno-color]",slug:"åæ°-no-color",normalizedTitle:"åæ° [âno-color]",charIndex:4554},{level:3,title:"åæ° [âquiet]",slug:"åæ°-quiet",normalizedTitle:"åæ° [âquiet]",charIndex:4599},{level:3,title:"åæ° [âconfig-folder]",slug:"åæ°-config-folder",normalizedTitle:"åæ° [âconfig-folder]",charIndex:4631},{level:3,title:"åæ° [ âinsecure]",slug:"åæ°-insecure",normalizedTitle:"åæ° [ âinsecure]",charIndex:4674},{level:2,title:"7. å½ä»¤",slug:"_7-å½ä»¤",normalizedTitle:"7. å½ä»¤",charIndex:4706},{level:3,title:"lså½ä»¤ - ååºå¯¹è±¡",slug:"lså½ä»¤-ååºå¯¹è±¡",normalizedTitle:"lså½ä»¤ - ååºå¯¹è±¡",charIndex:5098},{level:3,title:"mbå½ä»¤ - åå»ºå­å¨æ¡¶",slug:"mbå½ä»¤-åå»ºå­å¨æ¡¶",normalizedTitle:"mbå½ä»¤ - åå»ºå­å¨æ¡¶",charIndex:5593},{level:3,title:"catå½ä»¤ - åå¹¶å¯¹è±¡",slug:"catå½ä»¤-åå¹¶å¯¹è±¡",normalizedTitle:"catå½ä»¤ - åå¹¶å¯¹è±¡",charIndex:6029},{level:3,title:"pipeå½ä»¤ - Pipeå°å¯¹è±¡",slug:"pipeå½ä»¤-pipeå°å¯¹è±¡",normalizedTitle:"pipeå½ä»¤ - pipeå°å¯¹è±¡",charIndex:6261},{level:3,title:"cpå½ä»¤ - æ·è´å¯¹è±¡",slug:"cpå½ä»¤-æ·è´å¯¹è±¡",normalizedTitle:"cpå½ä»¤ - æ·è´å¯¹è±¡",charIndex:6542},{level:3,title:"rmå½ä»¤ - å é¤å­å¨æ¡¶åå¯¹è±¡ã",slug:"rmå½ä»¤-å é¤å­å¨æ¡¶åå¯¹è±¡ã",normalizedTitle:"rmå½ä»¤ - å é¤å­å¨æ¡¶åå¯¹è±¡ã",charIndex:6913},{level:3,title:"shareå½ä»¤ - å±äº«",slug:"shareå½ä»¤-å±äº«",normalizedTitle:"shareå½ä»¤ - å±äº«",charIndex:7797},{level:3,title:"å­å½ä»¤share download - å±äº«ä¸è½½",slug:"å­å½ä»¤share-download-å±äº«ä¸è½½",normalizedTitle:"å­å½ä»¤share download - å±äº«ä¸è½½",charIndex:8144},{level:3,title:"mirrorå½ä»¤ - å­å¨æ¡¶éå",slug:"mirrorå½ä»¤-å­å¨æ¡¶éå",normalizedTitle:"mirrorå½ä»¤ - å­å¨æ¡¶éå",charIndex:10374},{level:3,title:"findå½ä»¤ - æ¥æ¾æä»¶åå¯¹è±¡",slug:"findå½ä»¤-æ¥æ¾æä»¶åå¯¹è±¡",normalizedTitle:"findå½ä»¤ - æ¥æ¾æä»¶åå¯¹è±¡",charIndex:11075},{level:3,title:"diffå½ä»¤ - æ¾ç¤ºå·®å¼",slug:"diffå½ä»¤-æ¾ç¤ºå·®å¼",normalizedTitle:"diffå½ä»¤ - æ¾ç¤ºå·®å¼",charIndex:11452},{level:3,title:"watchå½ä»¤ - çå¬æä»¶åå¯¹è±¡å­å¨äºä»¶ã",slug:"watchå½ä»¤-çå¬æä»¶åå¯¹è±¡å­å¨äºä»¶ã",normalizedTitle:"watchå½ä»¤ - çå¬æä»¶åå¯¹è±¡å­å¨äºä»¶ã",charIndex:11808},{level:3,title:"eventså½ä»¤ - ç®¡çå­å¨æ¡¶äºä»¶éç¥ã",slug:"eventså½ä»¤-ç®¡çå­å¨æ¡¶äºä»¶éç¥ã",normalizedTitle:"eventså½ä»¤ - ç®¡çå­å¨æ¡¶äºä»¶éç¥ã",charIndex:12856},{level:3,title:"policyå½ä»¤ - ç®¡çå­å¨æ¡¶ç­ç¥",slug:"policyå½ä»¤-ç®¡çå­å¨æ¡¶ç­ç¥",normalizedTitle:"policyå½ä»¤ - ç®¡çå­å¨æ¡¶ç­ç¥",charIndex:13719},{level:3,title:"sessionå½ä»¤ - ç®¡çsession",slug:"sessionå½ä»¤-ç®¡çsession",normalizedTitle:"sessionå½ä»¤ - ç®¡çsession",charIndex:14642},{level:3,title:"configå½ä»¤ - ç®¡çéç½®æä»¶",slug:"configå½ä»¤-ç®¡çéç½®æä»¶",normalizedTitle:"configå½ä»¤ - ç®¡çéç½®æä»¶",charIndex:15277},{level:3,title:"updateå½ä»¤ - è½¯ä»¶æ´æ°",slug:"updateå½ä»¤-è½¯ä»¶æ´æ°",normalizedTitle:"updateå½ä»¤ - è½¯ä»¶æ´æ°",charIndex:15854},{level:3,title:"versionå½ä»¤ - æ¾ç¤ºçæ¬ä¿¡æ¯",slug:"versionå½ä»¤-æ¾ç¤ºçæ¬ä¿¡æ¯",normalizedTitle:"versionå½ä»¤ - æ¾ç¤ºçæ¬ä¿¡æ¯",charIndex:16128}],headersStr:"1. ä¸è½½Minio Client Dockerç¨³å®ç Dockerå°é²ç Homebrew (macOS) ä¸è½½äºè¿å¶æä»¶(GNU/Linux) ä¸è½½äºè¿å¶æä»¶(Microsoft Windows) éè¿æºç å®è£ 2. è¿è¡Minio Client GNU/Linux macOS Microsoft Windows 3. æ·»å ä¸ä¸ªäºå­å¨æå¡ ç¤ºä¾-Minioäºå­å¨ ç¤ºä¾-Amazon S3äºå­å¨ ç¤ºä¾-Googleäºå­å¨ 4. éªè¯ 5. æ¥å¸¸ä½¿ç¨ 6. å¨å±åæ° åæ° [âdebug] åæ° [âjson] åæ° [âno-color] åæ° [âquiet] åæ° [âconfig-folder] åæ° [ âinsecure] 7. å½ä»¤ lså½ä»¤ - ååºå¯¹è±¡ mbå½ä»¤ - åå»ºå­å¨æ¡¶ catå½ä»¤ - åå¹¶å¯¹è±¡ pipeå½ä»¤ - Pipeå°å¯¹è±¡ cpå½ä»¤ - æ·è´å¯¹è±¡ rmå½ä»¤ - å é¤å­å¨æ¡¶åå¯¹è±¡ã shareå½ä»¤ - å±äº« å­å½ä»¤share download - å±äº«ä¸è½½ mirrorå½ä»¤ - å­å¨æ¡¶éå findå½ä»¤ - æ¥æ¾æä»¶åå¯¹è±¡ diffå½ä»¤ - æ¾ç¤ºå·®å¼ watchå½ä»¤ - çå¬æä»¶åå¯¹è±¡å­å¨äºä»¶ã eventså½ä»¤ - ç®¡çå­å¨æ¡¶äºä»¶éç¥ã policyå½ä»¤ - ç®¡çå­å¨æ¡¶ç­ç¥ sessionå½ä»¤ - ç®¡çsession configå½ä»¤ - ç®¡çéç½®æä»¶ updateå½ä»¤ - è½¯ä»¶æ´æ° versionå½ä»¤ - æ¾ç¤ºçæ¬ä¿¡æ¯",content:'# Minio Clientå®å¨æå\n\nMinio Client (mc)ä¸ºlsï¼catï¼cpï¼mirrorï¼diffï¼findç­UNIXå½ä»¤æä¾äºä¸ç§æ¿ä»£æ¹æ¡ãå®æ¯ææä»¶ç³»ç»åå¼å®¹Amazon S3çäºå­å¨æå¡ï¼AWS Signature v2åv4ï¼ã\n\nls       ååºæä»¶åæä»¶å¤¹ã\nmb       åå»ºä¸ä¸ªå­å¨æ¡¶æä¸ä¸ªæä»¶å¤¹ã\ncat      æ¾ç¤ºæä»¶åå¯¹è±¡åå®¹ã\npipe     å°ä¸ä¸ªSTDINéå®åå°ä¸ä¸ªå¯¹è±¡æèæä»¶æèSTDOUTã\nshare    çæç¨äºå±äº«çURLã\ncp       æ·è´æä»¶åå¯¹è±¡ã\nmirror   ç»å­å¨æ¡¶åæä»¶å¤¹åéåã\nfind     åºäºåæ°æ¥æ¾æä»¶ã\ndiff     å¯¹ä¸¤ä¸ªæä»¶å¤¹æèå­å¨æ¡¶æ¯è¾å·®å¼ã\nrm       å é¤æä»¶åå¯¹è±¡ã\nevents   ç®¡çå¯¹è±¡éç¥ã\nwatch    çè§æä»¶åå¯¹è±¡çäºä»¶ã\npolicy   ç®¡çè®¿é®ç­ç¥ã\nsession  ä¸ºcpå½ä»¤ç®¡çä¿å­çä¼è¯ã\nconfig   ç®¡çmcéç½®æä»¶ã\nupdate   æ£æ¥è½¯ä»¶æ´æ°ã\nversion  è¾åºçæ¬ä¿¡æ¯ã\n\n\n\n# 1. ä¸è½½Minio Client\n\n\n# Dockerç¨³å®ç\n\ndocker pull minio/mcdocker run minio/mc ls play\n\n\n\n# Dockerå°é²ç\n\ndocker pull minio/mc:edgedocker run minio/mc:edge ls play\n\n\næ³¨æ: ä¸è¿°ç¤ºä¾é»è®¤ä½¿ç¨Minioæ¼ç¤ºç¯å¢åæ¼ç¤ºï¼å¦ææ³ç¨mcæä½å¶å®S3å¼å®¹çæå¡ï¼éç¨ä¸é¢çæ¹å¼æ¥å¯å¨å®¹å¨ï¼\n\ndocker run -it --entrypoint=/bin/sh minio/mc\n\n\nç¶åä½¿ç¨mc configå½ä»¤ã\n\n\n# Homebrew (macOS)\n\nä½¿ç¨Homebrewå®è£mcã\n\nbrew install minio/stable/mcmc --help\n\n\n\n# ä¸è½½äºè¿å¶æä»¶(GNU/Linux)\n\nå¹³å°          CPUæ¶æ          URL\nGNU/Linux   64-bit Intel   https://dl.minio.io/client/mc/release/linux-amd64/mc\n\nchmod +x mc./mc --help\n\n\n\n# ä¸è½½äºè¿å¶æä»¶(Microsoft Windows)\n\nå¹³å°                  CPUæ¶æ          URL\nMicrosoft Windows   64-bit Intel   https://dl.minio.io/client/mc/release/windows-amd64/mc.exe\n\nmc.exe --help\n\n\n\n# éè¿æºç å®è£\n\néè¿æºç å®è£ä»éç¨äºå¼åäººååé«çº§ç¨æ·ãmc updateå½ä»¤ä¸æ¯æåºäºæºç å®è£çæ´æ°éç¥ãè¯·ä»minio-clientä¸è½½å®æ¹çæ¬ã\n\nå¦ææ¨æ²¡æGolangç¯å¢ï¼è¯·æç§ å¦ä½å®è£Golangã\n\ngo get -d github.com/minio/mccd ${GOPATH}/src/github.com/minio/mcmake\n\n\n\n# 2. è¿è¡Minio Client\n\n\n# GNU/Linux\n\nchmod +x mc./mc --help\n\n\n\n# macOS\n\nchmod 755 mc./mc --help\n\n\n\n# Microsoft Windows\n\nmc.exe --help\n\n\n\n# 3. æ·»å ä¸ä¸ªäºå­å¨æå¡\n\nå¦æä½ æç®ä»å¨POSIXå¼å®¹æä»¶ç³»ç»ä¸­ä½¿ç¨mc,é£ä½ å¯ä»¥ç´æ¥ç¥è¿æ¬èï¼è·³å°Step 4ã\n\næ·»å ä¸ä¸ªæå¤ä¸ªS3å¼å®¹çæå¡ï¼è¯·åèä¸é¢è¯´æãmcå°ææçéç½®ä¿¡æ¯é½å­å¨å¨~/.mc/config.jsonæä»¶ä¸­ã\n\n# ä½¿ç¨\n\nmc config host add <ALIAS> <YOUR-S3-ENDPOINT> <YOUR-ACCESS-KEY> <YOUR-SECRET-KEY> <API-SIGNATURE>\n\n\nå«åå°±æ¯ç»ä½ çäºå­å¨æå¡èµ·äºä¸ä¸ªç­ç¹çå¤å·ãS3 endpoint,access keyåsecret keyæ¯ä½ çäºå­å¨æå¡æä¾çãAPIç­¾åæ¯å¯éåæ°ï¼é»è®¤æåµä¸ï¼å®è¢«è®¾ç½®ä¸º"S3v4"ã\n\n\n# ç¤ºä¾-Minioäºå­å¨\n\nä»Minioæå¡è·å¾URLãaccess keyåsecret keyã\n\nmc config host add minio http://192.168.1.51 BKIKJAA5BMMU2RHO6IBB V7f1CwQqAcwo80UEIJEjc5gVQUSSx5ohQ9GSrr12 S3v4\n\n\n\n# ç¤ºä¾-Amazon S3äºå­å¨\n\nåèAWS Credentialsæåè·åä½ çAccessKeyIDåSecretAccessKeyã\n\nmc config host add s3 https://s3.amazonaws.com BKIKJAA5BMMU2RHO6IBB V7f1CwQqAcwo80UEIJEjc5gVQUSSx5ohQ9GSrr12 S3v4\n\n\n\n# ç¤ºä¾-Googleäºå­å¨\n\nåèGoogle Credentials Guideè·åä½ çAccessKeyIDåSecretAccessKeyã\n\nmc config host add gcs  https://storage.googleapis.com BKIKJAA5BMMU2RHO6IBB V8f1CwQqAcwo80UEIJEjc5gVQUSSx5ohQ9GSrr12 S3v2\n\n\næ³¨æï¼Googleäºå­å¨åªæ¯ææ§çç­¾åçæ¬V2ï¼æä»¥ä½ éè¦éæ©S3v2ã\n\n\n# 4. éªè¯\n\nmcé¢åéç½®äºäºå­å¨æå¡URLï¼https://play.minio.io:9000ï¼å«åâplayâãå®æ¯ä¸ä¸ªç¨äºç ååæµè¯çMinioæå¡ãå¦ææ³æµè¯Amazon S3,ä½ å¯ä»¥å°âplayâæ¿æ¢ä¸ºâs3âã\n\nç¤ºä¾:\n\nååºhttps://play.minio.io:9000ä¸çææå­å¨æ¡¶ã\n\nmc ls play\n[2016-03-22 19:47:48 PDT]     0B my-bucketname/\n[2016-03-22 22:01:07 PDT]     0B mytestbucket/\n[2016-03-22 20:04:39 PDT]     0B mybucketname/\n[2016-01-28 17:23:11 PST]     0B newbucket/\n[2016-03-20 09:08:36 PDT]     0B s3git-test/\n\n\n\n# 5. æ¥å¸¸ä½¿ç¨\n\nä½ å¯ä»¥æ·»å shellå«åæ¥è¦çé»è®¤çUnixå·¥å·å½ä»¤ã\n\nalias ls=\'mc ls\'\nalias cp=\'mc cp\'\nalias cat=\'mc cat\'\nalias mkdir=\'mc mb\'\nalias pipe=\'mc pipe\'\nalias find=\'mc find\'\n\n\n\n# 6. å¨å±åæ°\n\n\n# åæ° [âdebug]\n\nDebugåæ°å¼å¯æ§å¶å°è¾åºdebugä¿¡æ¯ã\n\nç¤ºä¾ï¼è¾åºlså½ä»¤çè¯¦ç»debugä¿¡æ¯ã\n\nmc --debug ls play\nmc: <DEBUG> GET / HTTP/1.1\nHost: play.minio.io:9000\nUser-Agent: Minio (darwin; amd64) minio-go/1.0.1 mc/2016-04-01T00:22:11Z\nAuthorization: AWS4-HMAC-SHA256 Credential=**REDACTED**/20160408/us-east-1/s3/aws4_request, SignedHeaders=expect;host;x-amz-content-sha256;x-amz-date, Signature=**REDACTED**\nExpect: 100-continue\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\nX-Amz-Date: 20160408T145236Z\nAccept-Encoding: gzip\nmc: <DEBUG> HTTP/1.1 200 OK\nTransfer-Encoding: chunked\nAccept-Ranges: bytes\nContent-Type: text/xml; charset=utf-8\nDate: Fri, 08 Apr 2016 14:54:55 GMT\nServer: Minio/DEVELOPMENT.2016-04-07T18-53-27Z (linux; amd64)\nVary: Origin\nX-Amz-Request-Id: HP30I0W2U49BDBIO\nmc: <DEBUG> Response Time:  1.220112837s\n[...]\n[2016-04-08 03:56:14 IST]     0B albums/\n[2016-04-04 16:11:45 IST]     0B backup/\n[2016-04-01 20:10:53 IST]     0B deebucket/\n[2016-03-28 21:53:49 IST]     0B guestbucket/\n\n\n\n# åæ° [âjson]\n\nJSONåæ°å¯ç¨JSONæ ¼å¼çè¾åºã\n\nç¤ºä¾ï¼ååºMinio playæå¡çææå­å¨æ¡¶ã\n\nmc --json ls play\n{"status":"success","type":"folder","lastModified":"2016-04-08T03:56:14.577+05:30","size":0,"key":"albums/"}\n{"status":"success","type":"folder","lastModified":"2016-04-04T16:11:45.349+05:30","size":0,"key":"backup/"}\n{"status":"success","type":"folder","lastModified":"2016-04-01T20:10:53.941+05:30","size":0,"key":"deebucket/"}\n{"status":"success","type":"folder","lastModified":"2016-03-28T21:53:49.217+05:30","size":0,"key":"guestbucket/"}\n\n\n\n# åæ° [âno-color]\n\nè¿ä¸ªåæ°ç¦ç¨é¢è²ä¸»é¢ãå¯¹äºä¸äºæ¯è¾èçç»ç«¯æç¨ã\n\n\n# åæ° [âquiet]\n\nè¿ä¸ªåæ°å³é­æ§å¶å°æ¥å¿è¾åºã\n\n\n# åæ° [âconfig-folder]\n\nè¿ä¸ªåæ°åæ°èªå®ä¹çéç½®æä»¶è·¯å¾ã\n\n\n# åæ° [ âinsecure]\n\nè·³è¿SSLè¯ä¹¦éªè¯ã\n\n\n# 7. å½ä»¤\n\n                                           \nls - ååºå­å¨æ¡¶åå¯¹è±¡     mb - åå»ºå­å¨æ¡¶               cat - åå¹¶å¯¹è±¡\ncp - æ·è´å¯¹è±¡         rm - å é¤å¯¹è±¡                pipe - Pipeå°ä¸ä¸ªå¯¹è±¡\nshare - å±äº«        mirror - å­å¨æ¡¶éå           find - æ¥æ¾æä»¶åå¯¹è±¡\ndiff - æ¯è¾å­å¨æ¡¶å·®å¼    policy - ç»å­å¨æ¡¶æåç¼è®¾ç½®è®¿é®ç­ç¥   session - ç®¡çä¿å­çä¼è¯\nconfig - ç®¡çéç½®æä»¶   watch - äºä»¶çå¬             events - ç®¡çå­å¨æ¡¶äºä»¶\nupdate - ç®¡çè½¯ä»¶æ´æ°   version - æ¾ç¤ºçæ¬ä¿¡æ¯         \n\n\n# lså½ä»¤ - ååºå¯¹è±¡\n\nlså½ä»¤ååºæä»¶ãå¯¹è±¡åå­å¨æ¡¶ãä½¿ç¨âincomplete flagå¯ååºæªå®æ´æ·è´çåå®¹ã\n\nç¨æ³ï¼\n   mc ls [FLAGS] TARGET [TARGET ...]\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r          éå½ã\n  --incomplete, -I         ååºæªå®æ´ä¸ä¼ çå¯¹è±¡ã\n\n\nç¤ºä¾ï¼ ååºææhttps://play.minio.io:9000ä¸çå­å¨æ¡¶ã\n\nmc ls play\n[2016-04-08 03:56:14 IST]     0B albums/\n[2016-04-04 16:11:45 IST]     0B backup/\n[2016-04-01 20:10:53 IST]     0B deebucket/\n[2016-03-28 21:53:49 IST]     0B guestbucket/\n[2016-04-08 20:58:18 IST]     0B mybucket/\n\n\n\n# mbå½ä»¤ - åå»ºå­å¨æ¡¶\n\nmbå½ä»¤å¨å¯¹è±¡å­å¨ä¸åå»ºä¸ä¸ªæ°çå­å¨æ¡¶ãå¨æä»¶ç³»ç»ï¼å®å°±åmkdir -på½ä»¤æ¯ä¸æ ·çãå­å¨æ¡¶ç¸å½äºæä»¶ç³»ç»ä¸­çç£çææè½½ç¹ï¼ä¸åºè§ä¸ºæä»¶å¤¹ãMinioå¯¹æ¯ä¸ªç¨æ·åå»ºçå­å¨æ¡¶æ°éæ²¡æéå¶ãå¨Amazon S3ä¸ï¼æ¯ä¸ªå¸æ·è¢«éå¶ä¸º100ä¸ªå­å¨æ¡¶ãæå³æ´å¤ä¿¡æ¯ï¼è¯·åéS3ä¸çå­å¨æ¡¶éå¶åéå¶ ã\n\nç¨æ³ï¼\n   mc mb [FLAGS] TARGET [TARGET...]\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --region "us-east-1"         æå®å­å¨æ¡¶çregionï¼é»è®¤æ¯âus-east-1â.\n\n\nç¤ºä¾ï¼å¨https://play.minio.io:9000ä¸åå»ºä¸ä¸ªåå«"mybucket"çå­å¨æ¡¶ã\n\nmc mb play/mybucket\nBucket created successfully âplay/mybucketâ.\n\n\n\n# catå½ä»¤ - åå¹¶å¯¹è±¡\n\ncatå½ä»¤å°ä¸ä¸ªæä»¶æèå¯¹è±¡çåå®¹åå¹¶å°å¦ä¸ä¸ªä¸ãä½ ä¹å¯ä»¥ç¨å®å°å¯¹è±¡çåå®¹è¾åºå°stdoutã\n\nç¨æ³ï¼\n   mc cat [FLAGS] SOURCE [SOURCE...]\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ¾ç¤ºmyobject.txtæä»¶çåå®¹\n\nmc cat play/mybucket/myobject.txt\nHello Minio!!\n\n\n\n# pipeå½ä»¤ - Pipeå°å¯¹è±¡\n\npipeå½ä»¤æ·è´stdinéçåå®¹å°ç®æ è¾åºï¼å¦ææ²¡ææå®ç®æ è¾åºï¼åè¾åºå°stdoutã\n\nç¨æ³ï¼\n   mc pipe [FLAGS] [TARGET]\nFLAGS:\n  --help, -h                    æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ å°MySQLæ°æ®åºdumpæä»¶è¾åºå°Amazon S3ã\n\nmysqldump -u root -p ******* accountsdb | mc pipe s3/ferenginar/backups/accountsdb-oct-9-2015.sql\n\n\n\n# cpå½ä»¤ - æ·è´å¯¹è±¡\n\ncpå½ä»¤æ·è´ä¸ä¸ªæå¤ä¸ªæºæä»¶ç®æ è¾åºãææå°å¯¹è±¡å­å¨çæ·è´æä½é½è¿è¡äºMD4SUM checkSUMæ ¡éªãå¯ä»¥ä»æéç¹æ¢å¤ä¸­æ­æå¤±è´¥çå¤å¶æä½ã\n\nç¨æ³ï¼\n   mc cp [FLAGS] SOURCE [SOURCE...] TARGET\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r          éå½æ·è´ã\n\n\nç¤ºä¾ï¼ æ·è´ä¸ä¸ªææ¬æä»¶å°å¯¹è±¡å­å¨ã\n\nmc cp myobject.txt play/mybucket\nmyobject.txt:    14 B / 14 B  ââââââââââââââââââââââââââââââââââââââââââââââ  100.00 % 41 B/s 0\n\n\n\n# rmå½ä»¤ - å é¤å­å¨æ¡¶åå¯¹è±¡ã\n\nä½¿ç¨rmå½ä»¤å é¤æä»¶å¯¹è±¡æèå­å¨æ¡¶ã\n\nç¨æ³ï¼\n   mc rm [FLAGS] TARGET [TARGET ...]\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r              éå½å é¤ã\n  --force              å¼ºå¶æ§è¡å é¤æä½ã\n  --prefix             å é¤æ¹éè¿ä¸ªåç¼çå¯¹è±¡ã\n  --incomplete, -I      å é¤æªå®æ´ä¸ä¼ çå¯¹è±¡ã\n  --fake               æ¨¡æä¸ä¸ªåçå é¤æä½ã\n  --stdin              ä»STDINä¸­è¯»å¯¹è±¡åè¡¨ã\n  --older-than value               å é¤Nå¤©åçå¯¹è±¡ï¼é»è®¤æ¯0å¤©ï¼ã\n\n\nç¤ºä¾ï¼ å é¤ä¸ä¸ªå¯¹è±¡ã\n\nmc rm play/mybucket/myobject.txt\nRemoved âplay/mybucket/myobject.txtâ.\n\n\nç¤ºä¾ï¼å é¤ä¸ä¸ªå­å¨æ¡¶å¹¶éå½å é¤éé¢ææçåå®¹ãç±äºè¿ä¸ªæä½å¤ªå±é©äºï¼ä½ å¿é¡»ä¼ âforceåæ°æå®å¼ºå¶å é¤ã\n\nmc rm --recursive --force play/myobject\nRemoved âplay/myobject/newfile.txtâ.\nRemoved \'play/myobject/otherobject.txtâ.\n\n\nç¤ºä¾ï¼ ä»mybucketéå é¤æææªå®æ´ä¸ä¼ çå¯¹è±¡ã\n\nmc rm  --incomplete --recursive --force play/mybucket\nRemoved âplay/mybucket/mydvd.isoâ.\nRemoved \'play/mybucket/backup.tgzâ.\n\n\nç¤ºä¾ï¼ å é¤ä¸å¤©åçå¯¹è±¡ã\n\nmc rm --force --older-than=1 play/mybucket/oldsongs\n\n\n\n# shareå½ä»¤ - å±äº«\n\nshareå½ä»¤å®å¨å°æäºä¸ä¼ æä¸è½½çæéãæ­¤è®¿é®åªæ¯ä¸´æ¶çï¼ä¸è¿ç¨ç¨æ·ååºç¨ç¨åºå±äº«ä¹æ¯å®å¨çãå¦æä½ æ³æäºæ°¸ä¹è®¿é®æéï¼ä½ å¯ä»¥ççmc policyå½ä»¤ã\n\nçæçç½åä¸­å«æç¼ç åçè®¿é®è®¤è¯ä¿¡æ¯ï¼ä»»ä½ä¼å¾ç¯¡æ¹URLçè¡ä¸ºé½ä¼ä½¿è®¿é®æ æãæ³äºè§£è¿ç§æºå¶æ¯å¦ä½å·¥ä½çï¼è¯·åèPre-Signed URLææ¯ã\n\nç¨æ³ï¼\n   mc share [FLAGS] COMMAND\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\nCOMMANDS:\n   download   çææä¸è½½æéçURLã\n   upload     çææä¸ä¼ æéçURLã\n   list       ååºååå±äº«çå¯¹è±¡åæä»¶å¤¹ã\n\n\n\n# å­å½ä»¤share download - å±äº«ä¸è½½\n\nshare downloadå½ä»¤çæä¸éè¦access keyåsecret keyå³å¯ä¸è½½çURLï¼è¿æåæ°è®¾ç½®ææå¤§æææï¼ä¸å¤§äº7å¤©ï¼ï¼è¿æä¹åæéèªå¨åæ¶ã\n\nç¨æ³ï¼\n   mc share download [FLAGS] TARGET [TARGET...]\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r          éå½å±äº«ææå¯¹è±¡ã\n  --expire, -E "168h"          è®¾ç½®è¿ææ¶éï¼NN[h|m|s]ã\n\n\nç¤ºä¾ï¼ çæä¸ä¸ªå¯¹ä¸ä¸ªå¯¹è±¡æ4å°æ¶è®¿é®æéçURLã\n\nmc share download --expire 4h play/mybucket/myobject.txt\nURL: https://play.minio.io:9000/mybucket/myobject.txt\nExpire: 0 days 4 hours 0 minutes 0 seconds\nShare: https://play.minio.io:9000/mybucket/myobject.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=Q3AM3UQ867SPQQA43P2F%2F20160408%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20160408T182008Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Signature=1527fc8f21a3a7e39ce3c456907a10b389125047adc552bcd86630b9d459b634\n\n\n# å­å½ä»¤share upload - å±äº«ä¸ä¼ \n\nshare uploadå½ä»¤çæä¸éè¦access keyåsecret keyå³å¯ä¸ä¼ çURLãè¿æåæ°è®¾ç½®ææå¤§æææï¼ä¸å¤§äº7å¤©ï¼ï¼è¿æä¹åæéèªå¨åæ¶ãContent-typeåæ°éå¶åªåè®¸ä¸ä¼ æå®ç±»åçæä»¶ã\n\nç¨æ³ï¼\n   mc share upload [FLAGS] TARGET [TARGET...]\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r              éå½å±äº«ææå¯¹è±¡ã\n  --expire, -E "168h"          è®¾ç½®è¿ææ¶éï¼NN[h|m|s].\n\n\nç¤ºä¾ï¼ çæä¸ä¸ªcurlå½ä»¤ï¼èµäºä¸ä¼ å°play/mybucket/myotherobject.txtçæéã\n\nmc share upload play/mybucket/myotherobject.txt\nURL: https://play.minio.io:9000/mybucket/myotherobject.txt\nExpire: 7 days 0 hours 0 minutes 0 seconds\nShare: curl https://play.minio.io:9000/mybucket -F x-amz-date=20160408T182356Z -F x-amz-signature=de343934bd0ba38bda0903813b5738f23dde67b4065ea2ec2e4e52f6389e51e1 -F bucket=mybucket -F policy=eyJleHBpcmF0aW9uIjoiMjAxNi0wNC0xNVQxODoyMzo1NS4wMDdaIiwiY29uZGl0aW9ucyI6W1siZXEiLCIkYnVja2V0IiwibXlidWNrZXQiXSxbImVxIiwiJGtleSIsIm15b3RoZXJvYmplY3QudHh0Il0sWyJlcSIsIiR4LWFtei1kYXRlIiwiMjAxNjA0MDhUMTgyMzU2WiJdLFsiZXEiLCIkeC1hbXotYWxnb3JpdGhtIiwiQVdTNC1ITUFDLVNIQTI1NiJdLFsiZXEiLCIkeC1hbXotY3JlZGVudGlhbCIsIlEzQU0zVVE4NjdTUFFRQTQzUDJGLzIwMTYwNDA4L3VzLWVhc3QtMS9zMy9hd3M0X3JlcXVlc3QiXV19 -F x-amz-algorithm=AWS4-HMAC-SHA256 -F x-amz-credential=Q3AM3UQ867SPQQA43P2F/20160408/us-east-1/s3/aws4_request -F key=myotherobject.txt -F file=@<FILE>\n\n\n# å­å½ä»¤share list - ååºä¹åçå±äº«\n\nshare listååºæ²¡æªè¿æçå±äº«URLã\n\nç¨æ³ï¼\n   mc share list COMMAND\nCOMMAND:\n   upload:   ååºååå±äº«çæä¸ä¼ æéçURLã\n   download: ååºååå±äº«çæä¸è½½æéçURLã\n\n\n\n# mirrorå½ä»¤ - å­å¨æ¡¶éå\n\nmirrorå½ä»¤årsyncç±»ä¼¼ï¼åªä¸è¿å®æ¯å¨æä»¶ç³»ç»åå¯¹è±¡å­å¨ä¹é´ååæ­¥ã\n\nç¨æ³ï¼\n   mc mirror [FLAGS] SOURCE TARGET\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --force              å¼ºå¶è¦çå·²ç»å­å¨çç®æ ã\n  --fake               æ¨¡æä¸ä¸ªåçæä½ã\n  --watch, -w                      çå¬æ¹åå¹¶æ§è¡éåæä½ã\n  --remove             å é¤ç®æ ä¸çå¤é¨çæä»¶ã\n\n\nç¤ºä¾ï¼ å°ä¸ä¸ªæ¬å°æä»¶å¤¹éåå°https://play.minio.io:9000ä¸ç\'mybucket\'å­å¨æ¡¶ã\n\nmc mirror localdir/ play/mybucket\nlocaldir/b.txt:  40 B / 40 B  ââââââââââââââââââââââââââââââââââââââââââââââââ  100.00 % 73 B/s 0\n\n\nç¤ºä¾ï¼ æç»­çå¬æ¬å°æä»¶å¤¹ä¿®æ¹å¹¶éåå°https://play.minio.io:9000ä¸ç\'mybucket\'å­å¨æ¡¶ã\n\nmc mirror -w localdir play/mybucket\nlocaldir/new.txt:  10 MB / 10 MB  ââââââââââââââââââââââââââââââââââââââââââââââââ  100.00 % 1 MB/s 15s\n\n\n\n# findå½ä»¤ - æ¥æ¾æä»¶åå¯¹è±¡\n\nfindå½ä»¤éè¿æå®åæ°æ¥æ¾æä»¶ï¼å®åªååºæ»¡è¶³æ¡ä»¶çæ°æ®ã\n\nç¨æ³ï¼\n  mc find PATH [FLAGS]\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --exec value                     ä¸ºæ¯ä¸ªå¹éå¯¹è±¡çæä¸ä¸ªå¤é¨è¿ç¨ï¼è¯·åéFORMATï¼\n  --name value                     æ¥æ¾å¹éééç¬¦æ¨¡å¼çå¯¹è±¡ã\n  ...\n  ...\n\n\nç¤ºä¾ï¼ æç»­ä»s3å­å¨æ¡¶ä¸­æ¥æ¾ææjpegå¾åï¼å¹¶å¤å¶å°minio "play/bucket"å­å¨æ¡¶\n\nmc find s3/bucket --name "*.jpg" --watch --exec "mc cp {} play/bucket"\n\n\n\n# diffå½ä»¤ - æ¾ç¤ºå·®å¼\n\ndiffå½ä»¤è®¡ç®ä¸¤ä¸ªç®å½ä¹é´çå·®å¼ãå®åªååºç¼ºå°çæèå¤§å°ä¸åçåå®¹ã\n\nå®ä¸æ¯è¾åå®¹ï¼æä»¥å¯è½çæ¯ï¼åç§°ç¸åï¼å¤§å°ç¸åä½åå®¹ä¸åçå¯¹è±¡æ²¡æè¢«æ£æµå°ãè¿æ ·ï¼å®å¯ä»¥å¨ä¸åç«ç¹æèå¤§éæ°æ®çæåµä¸å¿«éæ¯è¾ã\n\nç¨æ³ï¼\n  mc diff [FLAGS] FIRST SECOND\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ¯è¾ä¸ä¸ªæ¬å°æä»¶å¤¹åä¸ä¸ªè¿ç¨å¯¹è±¡å­å¨æå¡\n\n mc diff localdir play/mybucket\nâlocaldir/notes.txtâ and âhttps://play.minio.io:9000/mybucket/notes.txtâ - only in first.\n\n\n\n# watchå½ä»¤ - çå¬æä»¶åå¯¹è±¡å­å¨äºä»¶ã\n\nwatchå½ä»¤æä¾äºä¸ç§æ¹ä¾¿çå¬å¯¹è±¡å­å¨åæä»¶ç³»ç»ä¸ä¸åç±»åäºä»¶çæ¹å¼ã\n\nç¨æ³ï¼\n  mc watch [FLAGS] PATH\nFLAGS:\n  --events value                   è¿æ»¤ä¸åç±»åçäºä»¶ï¼é»è®¤æ¯ææç±»åçäºä»¶ (é»è®¤ï¼ "put,delete,get")\n  --prefix value                   åºäºåç¼è¿æ»¤äºä»¶ã\n  --suffix value                   åºäºåç¼è¿æ»¤äºä»¶ã\n  --recursive                      éå½æ¹å¼çå¬äºä»¶ã\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ çå¬å¯¹è±¡å­å¨çææäºä»¶\n\nmc watch play/testbucket\n[2016-08-18T00:51:29.735Z] 2.7KiB ObjectCreated https://play.minio.io:9000/testbucket/CONTRIBUTING.md\n[2016-08-18T00:51:29.780Z]  1009B ObjectCreated https://play.minio.io:9000/testbucket/MAINTAINERS.md\n[2016-08-18T00:51:29.839Z] 6.9KiB ObjectCreated https://play.minio.io:9000/testbucket/README.md\n\n\nç¤ºä¾ï¼ çå¬æ¬å°æä»¶å¤¹çææäºä»¶\n\nmc watch ~/Photos\n[2016-08-17T17:54:19.565Z] 3.7MiB ObjectCreated /home/minio/Downloads/tmp/5467026530_a8611b53f9_o.jpg\n[2016-08-17T17:54:19.565Z] 3.7MiB ObjectCreated /home/minio/Downloads/tmp/5467026530_a8611b53f9_o.jpg\n...\n[2016-08-17T17:54:19.565Z] 7.5MiB ObjectCreated /home/minio/Downloads/tmp/8771468997_89b762d104_o.jpg\n\n\n\n# eventså½ä»¤ - ç®¡çå­å¨æ¡¶äºä»¶éç¥ã\n\neventsæä¾äºä¸ç§æ¹ä¾¿çéç½®å­å¨æ¡¶çåç§ç±»åäºä»¶éç¥çæ¹å¼ãMinioäºä»¶éç¥å¯ä»¥éç½®æä½¿ç¨ AMQPï¼Redisï¼ElasticSearchï¼NATSåPostgreSQLæå¡ãMinio configurationæä¾äºå¦ä½éç½®çæ´å¤ç»èã\n\nç¨æ³ï¼\n  mc events COMMAND [COMMAND FLAGS | -h] [ARGUMENTS...]\nCOMMANDS:\n  add     æ·»å ä¸ä¸ªæ°çå­å¨æ¡¶éç¥ã\n  remove  å é¤ä¸ä¸ªå­å¨æ¡¶éç¥ãä½¿ç¨\'--force\'å¯ä»¥å é¤ææå­å¨æ¡¶éç¥ã\n  list    ååºå­å¨æ¡¶éç¥ã\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ ååºææå­å¨æ¡¶éç¥ã\n\nmc events list play/andoria\nMyTopic        arn:minio:sns:us-east-1:1:TestTopic    s3:ObjectCreated:*,s3:ObjectRemoved:*   suffix:.jpg\n\n\nç¤ºä¾ï¼ æ·»å ä¸ä¸ªæ°ç\'sqs\'éç¥ï¼ä»æ¥æ¶ObjectCreatedäºä»¶ã\n\nmc events add play/andoria arn:minio:sqs:us-east-1:1:your-queue --events put\n\n\nç¤ºä¾ï¼ æ·»å ä¸ä¸ªå¸¦æè¿æ»¤å¨ç\'sqs\'éç¥ã\n\nç»sqséç¥æ·»å prefixåsuffixè¿æ»¤è§åã\n\nmc events add play/andoria arn:minio:sqs:us-east-1:1:your-queue --prefix photos/ --suffix .jpg\n\n\nç¤ºä¾ï¼ å é¤ä¸ä¸ª\'sqs\'éç¥\n\nmc events remove play/andoria arn:minio:sqs:us-east-1:1:your-queue\n\n\n\n# policyå½ä»¤ - ç®¡çå­å¨æ¡¶ç­ç¥\n\nç®¡çå¿åè®¿é®å­å¨æ¡¶åå¶åé¨åå®¹çç­ç¥ã\n\nç¨æ³ï¼\n  mc policy [FLAGS] PERMISSION TARGET\n  mc policy [FLAGS] TARGET\n  mc policy list [FLAGS] TARGET\nPERMISSION:\n  Allowed policies are: [none, download, upload, public].\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ¾ç¤ºå½åå¿åå­å¨æ¡¶ç­ç¥\n\næ¾ç¤ºå½åmybucket/myphotos/2020/å­æä»¶å¤¹çå¿åç­ç¥ã\n\nmc policy play/mybucket/myphotos/2020/\nAccess permission for âplay/mybucket/myphotos/2020/â is ânoneâ\n\n\nç¤ºä¾ï¼è®¾ç½®å¯ä¸è½½çå¿åå­å¨æ¡¶ç­ç¥ã\n\nè®¾ç½®mybucket/myphotos/2020/å­æä»¶å¤¹å¯å¿åä¸è½½çç­ç¥ãç°å¨ï¼è¿ä¸ªæä»¶å¤¹ä¸çå¯¹è±¡å¯è¢«å¬å¼è®¿é®ãæ¯å¦ï¼mybucket/myphotos/2020/yourobjectnameå¯éè¿è¿ä¸ªURL https://play.minio.io:9000/mybucket/myphotos/2020/yourobjectnameè®¿é®ã\n\nmc policy download play/mybucket/myphotos/2020/\nAccess permission for âplay/mybucket/myphotos/2020/â is set to \'download\'\n\n\nç¤ºä¾ï¼å é¤å½åçå¿åå­å¨æ¡¶ç­ç¥\n\nå é¤ææ*mybucket/myphotos/2020/*è¿ä¸ªå­æä»¶å¤¹ä¸çå¿åå­å¨æ¡¶ç­ç¥ã\n\nmc policy none play/mybucket/myphotos/2020/\nAccess permission for âplay/mybucket/myphotos/2020/â is set to \'none\'\n\n\n\n# sessionå½ä»¤ - ç®¡çsession\n\nsessionå½ä»¤ç®¡çä¹åä¿å­çcpåmirroræä½çä¼è¯ã\n\nç¨æ³ï¼\n  mc session COMMAND [COMMAND FLAGS | -h] [ARGUMENTS...]\nCOMMANDS:\n  list    ååºææä¹åä¿å­çä¼è¯ã\n  clear   æ¸é¤æä¸ªä¹åä¿å­çä¼è¯ã\n  resume  æ¢å¤æä¸ªä¹åä¿å­çä¼è¯ã\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ ååºææä¹åä¿å­çä¼è¯\n\nmc session list\nIXWKjpQM -> [2016-04-08 19:11:14 IST] cp assets.go play/mybucket\nApwAxSwa -> [2016-04-08 01:49:19 IST] mirror miniodoc/ play/mybucket\n\n\nç¤ºä¾ï¼ æ¢å¤ä¸ä¸ªä¹åä¿å­çä¼è¯\n\nmc session resume IXWKjpQM\n...assets.go: 1.68 KB / 1.68 KB  âââââââââââââââââââââââââââââ  100.00 % 784 B/s 2s\n\n\nç¤ºä¾ï¼ æ¸é¤ä¸ä¸ªä¹åä¿å­çä¼è¯ã\n\nmc session clear ApwAxSwa\nSession âApwAxSwaâ cleared successfully.\n\n\n\n# configå½ä»¤ - ç®¡çéç½®æä»¶\n\nconfig hostå½ä»¤æä¾äºä¸ä¸ªæ¹ä¾¿å°ç®¡ç~/.mc/config.jsonéç½®æä»¶ä¸­çä¸»æºä¿¡æ¯çæ¹å¼ï¼ä½ ä¹å¯ä»¥ç¨ææ¬ç¼è¾å¨æå¨ä¿®æ¹è¿ä¸ªéç½®æä»¶ã\n\nç¨æ³ï¼\n  mc config host COMMAND [COMMAND FLAGS | -h] [ARGUMENTS...]\nCOMMANDS:\n  add, a      æ·»å ä¸ä¸ªæ°çä¸»æºå°éç½®æä»¶ã\n  remove, rm  ä»éç½®æä»¶ä¸­å é¤ä¸ä¸ªä¸»æºã\n  list, ls    ååºéç½®æä»¶ä¸­çä¸»æºã\nFLAGS:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ ç®¡çéç½®æä»¶\n\næ·»å Minioæå¡çaccessåsecret keyå°éç½®æä»¶ï¼æ³¨æï¼shellçhistoryç¹æ§å¯è½ä¼è®°å½è¿äºä¿¡æ¯ï¼ä»èå¸¦æ¥å®å¨éæ£ãå¨bash shell,ä½¿ç¨set -oåset +oæ¥å³é­åå¼å¯historyç¹æ§ã\n\nset +o history\nmc config host add myminio http://localhost:9000 OMQAGGOL63D7UNVQFY8X GcY5RHNmnEWvD/1QxD3spEIGj+Vt9L7eHaAaBTkJ\nset -o history\n\n\n\n# updateå½ä»¤ - è½¯ä»¶æ´æ°\n\nä»https://dl.minio.ioæ£æ¥è½¯ä»¶æ´æ°ãExperimentalæ å¿ä¼æ£æ¥unstableå®éªæ§ççæ¬ï¼éå¸¸ç¨ä½æµè¯ç¨éã\n\nç¨æ³ï¼\n  mc update [FLAGS]\nFLAGS:\n  --quiet, -q  å³é­æ§å¶å°è¾åºã\n  --json       ä½¿ç¨JSONæ ¼å¼è¾åºã\n  --help, -h   æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ£æ¥æ´æ°\n\nmc update\nYou are already running the most recent version of âmcâ.\n\n\n\n# versionå½ä»¤ - æ¾ç¤ºçæ¬ä¿¡æ¯\n\næ¾ç¤ºå½åå®è£çmcçæ¬ã\n\nç¨æ³ï¼\n  mc version [FLAGS]\nFLAGS:\n  --quiet, -q  å³é­æ§å¶å°è¾åºã\n  --json       ä½¿ç¨JSONæ ¼å¼è¾åºã\n  --help, -h   æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ è¾åºmcçæ¬ã\n\nmc version\nVersion: 2016-04-01T00:22:11Z\nRelease-tag: RELEASE.2016-04-01T00-22-11Z\nCommit-id: 12adf3be326f5b6610cdd1438f72dfd861597fce\n\n\n> åæ: https://docs.min.io/docs/minio-client-complete-guide.html',normalizedContent:'# minio clientå®å¨æå\n\nminio client (mc)ä¸ºlsï¼catï¼cpï¼mirrorï¼diffï¼findç­unixå½ä»¤æä¾äºä¸ç§æ¿ä»£æ¹æ¡ãå®æ¯ææä»¶ç³»ç»åå¼å®¹amazon s3çäºå­å¨æå¡ï¼aws signature v2åv4ï¼ã\n\nls       ååºæä»¶åæä»¶å¤¹ã\nmb       åå»ºä¸ä¸ªå­å¨æ¡¶æä¸ä¸ªæä»¶å¤¹ã\ncat      æ¾ç¤ºæä»¶åå¯¹è±¡åå®¹ã\npipe     å°ä¸ä¸ªstdinéå®åå°ä¸ä¸ªå¯¹è±¡æèæä»¶æèstdoutã\nshare    çæç¨äºå±äº«çurlã\ncp       æ·è´æä»¶åå¯¹è±¡ã\nmirror   ç»å­å¨æ¡¶åæä»¶å¤¹åéåã\nfind     åºäºåæ°æ¥æ¾æä»¶ã\ndiff     å¯¹ä¸¤ä¸ªæä»¶å¤¹æèå­å¨æ¡¶æ¯è¾å·®å¼ã\nrm       å é¤æä»¶åå¯¹è±¡ã\nevents   ç®¡çå¯¹è±¡éç¥ã\nwatch    çè§æä»¶åå¯¹è±¡çäºä»¶ã\npolicy   ç®¡çè®¿é®ç­ç¥ã\nsession  ä¸ºcpå½ä»¤ç®¡çä¿å­çä¼è¯ã\nconfig   ç®¡çmcéç½®æä»¶ã\nupdate   æ£æ¥è½¯ä»¶æ´æ°ã\nversion  è¾åºçæ¬ä¿¡æ¯ã\n\n\n\n# 1. ä¸è½½minio client\n\n\n# dockerç¨³å®ç\n\ndocker pull minio/mcdocker run minio/mc ls play\n\n\n\n# dockerå°é²ç\n\ndocker pull minio/mc:edgedocker run minio/mc:edge ls play\n\n\næ³¨æ: ä¸è¿°ç¤ºä¾é»è®¤ä½¿ç¨minioæ¼ç¤ºç¯å¢åæ¼ç¤ºï¼å¦ææ³ç¨mcæä½å¶å®s3å¼å®¹çæå¡ï¼éç¨ä¸é¢çæ¹å¼æ¥å¯å¨å®¹å¨ï¼\n\ndocker run -it --entrypoint=/bin/sh minio/mc\n\n\nç¶åä½¿ç¨mc configå½ä»¤ã\n\n\n# homebrew (macos)\n\nä½¿ç¨homebrewå®è£mcã\n\nbrew install minio/stable/mcmc --help\n\n\n\n# ä¸è½½äºè¿å¶æä»¶(gnu/linux)\n\nå¹³å°          cpuæ¶æ          url\ngnu/linux   64-bit intel   https://dl.minio.io/client/mc/release/linux-amd64/mc\n\nchmod +x mc./mc --help\n\n\n\n# ä¸è½½äºè¿å¶æä»¶(microsoft windows)\n\nå¹³å°                  cpuæ¶æ          url\nmicrosoft windows   64-bit intel   https://dl.minio.io/client/mc/release/windows-amd64/mc.exe\n\nmc.exe --help\n\n\n\n# éè¿æºç å®è£\n\néè¿æºç å®è£ä»éç¨äºå¼åäººååé«çº§ç¨æ·ãmc updateå½ä»¤ä¸æ¯æåºäºæºç å®è£çæ´æ°éç¥ãè¯·ä»minio-clientä¸è½½å®æ¹çæ¬ã\n\nå¦ææ¨æ²¡ægolangç¯å¢ï¼è¯·æç§ å¦ä½å®è£golangã\n\ngo get -d github.com/minio/mccd ${gopath}/src/github.com/minio/mcmake\n\n\n\n# 2. è¿è¡minio client\n\n\n# gnu/linux\n\nchmod +x mc./mc --help\n\n\n\n# macos\n\nchmod 755 mc./mc --help\n\n\n\n# microsoft windows\n\nmc.exe --help\n\n\n\n# 3. æ·»å ä¸ä¸ªäºå­å¨æå¡\n\nå¦æä½ æç®ä»å¨posixå¼å®¹æä»¶ç³»ç»ä¸­ä½¿ç¨mc,é£ä½ å¯ä»¥ç´æ¥ç¥è¿æ¬èï¼è·³å°step 4ã\n\næ·»å ä¸ä¸ªæå¤ä¸ªs3å¼å®¹çæå¡ï¼è¯·åèä¸é¢è¯´æãmcå°ææçéç½®ä¿¡æ¯é½å­å¨å¨~/.mc/config.jsonæä»¶ä¸­ã\n\n# ä½¿ç¨\n\nmc config host add <alias> <your-s3-endpoint> <your-access-key> <your-secret-key> <api-signature>\n\n\nå«åå°±æ¯ç»ä½ çäºå­å¨æå¡èµ·äºä¸ä¸ªç­ç¹çå¤å·ãs3 endpoint,access keyåsecret keyæ¯ä½ çäºå­å¨æå¡æä¾çãapiç­¾åæ¯å¯éåæ°ï¼é»è®¤æåµä¸ï¼å®è¢«è®¾ç½®ä¸º"s3v4"ã\n\n\n# ç¤ºä¾-minioäºå­å¨\n\nä»minioæå¡è·å¾urlãaccess keyåsecret keyã\n\nmc config host add minio http://192.168.1.51 bkikjaa5bmmu2rho6ibb v7f1cwqqacwo80ueijejc5gvqussx5ohq9gsrr12 s3v4\n\n\n\n# ç¤ºä¾-amazon s3äºå­å¨\n\nåèaws credentialsæåè·åä½ çaccesskeyidåsecretaccesskeyã\n\nmc config host add s3 https://s3.amazonaws.com bkikjaa5bmmu2rho6ibb v7f1cwqqacwo80ueijejc5gvqussx5ohq9gsrr12 s3v4\n\n\n\n# ç¤ºä¾-googleäºå­å¨\n\nåègoogle credentials guideè·åä½ çaccesskeyidåsecretaccesskeyã\n\nmc config host add gcs  https://storage.googleapis.com bkikjaa5bmmu2rho6ibb v8f1cwqqacwo80ueijejc5gvqussx5ohq9gsrr12 s3v2\n\n\næ³¨æï¼googleäºå­å¨åªæ¯ææ§çç­¾åçæ¬v2ï¼æä»¥ä½ éè¦éæ©s3v2ã\n\n\n# 4. éªè¯\n\nmcé¢åéç½®äºäºå­å¨æå¡urlï¼https://play.minio.io:9000ï¼å«åâplayâãå®æ¯ä¸ä¸ªç¨äºç ååæµè¯çminioæå¡ãå¦ææ³æµè¯amazon s3,ä½ å¯ä»¥å°âplayâæ¿æ¢ä¸ºâs3âã\n\nç¤ºä¾:\n\nååºhttps://play.minio.io:9000ä¸çææå­å¨æ¡¶ã\n\nmc ls play\n[2016-03-22 19:47:48 pdt]     0b my-bucketname/\n[2016-03-22 22:01:07 pdt]     0b mytestbucket/\n[2016-03-22 20:04:39 pdt]     0b mybucketname/\n[2016-01-28 17:23:11 pst]     0b newbucket/\n[2016-03-20 09:08:36 pdt]     0b s3git-test/\n\n\n\n# 5. æ¥å¸¸ä½¿ç¨\n\nä½ å¯ä»¥æ·»å shellå«åæ¥è¦çé»è®¤çunixå·¥å·å½ä»¤ã\n\nalias ls=\'mc ls\'\nalias cp=\'mc cp\'\nalias cat=\'mc cat\'\nalias mkdir=\'mc mb\'\nalias pipe=\'mc pipe\'\nalias find=\'mc find\'\n\n\n\n# 6. å¨å±åæ°\n\n\n# åæ° [âdebug]\n\ndebugåæ°å¼å¯æ§å¶å°è¾åºdebugä¿¡æ¯ã\n\nç¤ºä¾ï¼è¾åºlså½ä»¤çè¯¦ç»debugä¿¡æ¯ã\n\nmc --debug ls play\nmc: <debug> get / http/1.1\nhost: play.minio.io:9000\nuser-agent: minio (darwin; amd64) minio-go/1.0.1 mc/2016-04-01t00:22:11z\nauthorization: aws4-hmac-sha256 credential=**redacted**/20160408/us-east-1/s3/aws4_request, signedheaders=expect;host;x-amz-content-sha256;x-amz-date, signature=**redacted**\nexpect: 100-continue\nx-amz-content-sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\nx-amz-date: 20160408t145236z\naccept-encoding: gzip\nmc: <debug> http/1.1 200 ok\ntransfer-encoding: chunked\naccept-ranges: bytes\ncontent-type: text/xml; charset=utf-8\ndate: fri, 08 apr 2016 14:54:55 gmt\nserver: minio/development.2016-04-07t18-53-27z (linux; amd64)\nvary: origin\nx-amz-request-id: hp30i0w2u49bdbio\nmc: <debug> response time:  1.220112837s\n[...]\n[2016-04-08 03:56:14 ist]     0b albums/\n[2016-04-04 16:11:45 ist]     0b backup/\n[2016-04-01 20:10:53 ist]     0b deebucket/\n[2016-03-28 21:53:49 ist]     0b guestbucket/\n\n\n\n# åæ° [âjson]\n\njsonåæ°å¯ç¨jsonæ ¼å¼çè¾åºã\n\nç¤ºä¾ï¼ååºminio playæå¡çææå­å¨æ¡¶ã\n\nmc --json ls play\n{"status":"success","type":"folder","lastmodified":"2016-04-08t03:56:14.577+05:30","size":0,"key":"albums/"}\n{"status":"success","type":"folder","lastmodified":"2016-04-04t16:11:45.349+05:30","size":0,"key":"backup/"}\n{"status":"success","type":"folder","lastmodified":"2016-04-01t20:10:53.941+05:30","size":0,"key":"deebucket/"}\n{"status":"success","type":"folder","lastmodified":"2016-03-28t21:53:49.217+05:30","size":0,"key":"guestbucket/"}\n\n\n\n# åæ° [âno-color]\n\nè¿ä¸ªåæ°ç¦ç¨é¢è²ä¸»é¢ãå¯¹äºä¸äºæ¯è¾èçç»ç«¯æç¨ã\n\n\n# åæ° [âquiet]\n\nè¿ä¸ªåæ°å³é­æ§å¶å°æ¥å¿è¾åºã\n\n\n# åæ° [âconfig-folder]\n\nè¿ä¸ªåæ°åæ°èªå®ä¹çéç½®æä»¶è·¯å¾ã\n\n\n# åæ° [ âinsecure]\n\nè·³è¿sslè¯ä¹¦éªè¯ã\n\n\n# 7. å½ä»¤\n\n                                           \nls - ååºå­å¨æ¡¶åå¯¹è±¡     mb - åå»ºå­å¨æ¡¶               cat - åå¹¶å¯¹è±¡\ncp - æ·è´å¯¹è±¡         rm - å é¤å¯¹è±¡                pipe - pipeå°ä¸ä¸ªå¯¹è±¡\nshare - å±äº«        mirror - å­å¨æ¡¶éå           find - æ¥æ¾æä»¶åå¯¹è±¡\ndiff - æ¯è¾å­å¨æ¡¶å·®å¼    policy - ç»å­å¨æ¡¶æåç¼è®¾ç½®è®¿é®ç­ç¥   session - ç®¡çä¿å­çä¼è¯\nconfig - ç®¡çéç½®æä»¶   watch - äºä»¶çå¬             events - ç®¡çå­å¨æ¡¶äºä»¶\nupdate - ç®¡çè½¯ä»¶æ´æ°   version - æ¾ç¤ºçæ¬ä¿¡æ¯         \n\n\n# lså½ä»¤ - ååºå¯¹è±¡\n\nlså½ä»¤ååºæä»¶ãå¯¹è±¡åå­å¨æ¡¶ãä½¿ç¨âincomplete flagå¯ååºæªå®æ´æ·è´çåå®¹ã\n\nç¨æ³ï¼\n   mc ls [flags] target [target ...]\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r          éå½ã\n  --incomplete, -i         ååºæªå®æ´ä¸ä¼ çå¯¹è±¡ã\n\n\nç¤ºä¾ï¼ ååºææhttps://play.minio.io:9000ä¸çå­å¨æ¡¶ã\n\nmc ls play\n[2016-04-08 03:56:14 ist]     0b albums/\n[2016-04-04 16:11:45 ist]     0b backup/\n[2016-04-01 20:10:53 ist]     0b deebucket/\n[2016-03-28 21:53:49 ist]     0b guestbucket/\n[2016-04-08 20:58:18 ist]     0b mybucket/\n\n\n\n# mbå½ä»¤ - åå»ºå­å¨æ¡¶\n\nmbå½ä»¤å¨å¯¹è±¡å­å¨ä¸åå»ºä¸ä¸ªæ°çå­å¨æ¡¶ãå¨æä»¶ç³»ç»ï¼å®å°±åmkdir -på½ä»¤æ¯ä¸æ ·çãå­å¨æ¡¶ç¸å½äºæä»¶ç³»ç»ä¸­çç£çææè½½ç¹ï¼ä¸åºè§ä¸ºæä»¶å¤¹ãminioå¯¹æ¯ä¸ªç¨æ·åå»ºçå­å¨æ¡¶æ°éæ²¡æéå¶ãå¨amazon s3ä¸ï¼æ¯ä¸ªå¸æ·è¢«éå¶ä¸º100ä¸ªå­å¨æ¡¶ãæå³æ´å¤ä¿¡æ¯ï¼è¯·åés3ä¸çå­å¨æ¡¶éå¶åéå¶ ã\n\nç¨æ³ï¼\n   mc mb [flags] target [target...]\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --region "us-east-1"         æå®å­å¨æ¡¶çregionï¼é»è®¤æ¯âus-east-1â.\n\n\nç¤ºä¾ï¼å¨https://play.minio.io:9000ä¸åå»ºä¸ä¸ªåå«"mybucket"çå­å¨æ¡¶ã\n\nmc mb play/mybucket\nbucket created successfully âplay/mybucketâ.\n\n\n\n# catå½ä»¤ - åå¹¶å¯¹è±¡\n\ncatå½ä»¤å°ä¸ä¸ªæä»¶æèå¯¹è±¡çåå®¹åå¹¶å°å¦ä¸ä¸ªä¸ãä½ ä¹å¯ä»¥ç¨å®å°å¯¹è±¡çåå®¹è¾åºå°stdoutã\n\nç¨æ³ï¼\n   mc cat [flags] source [source...]\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ¾ç¤ºmyobject.txtæä»¶çåå®¹\n\nmc cat play/mybucket/myobject.txt\nhello minio!!\n\n\n\n# pipeå½ä»¤ - pipeå°å¯¹è±¡\n\npipeå½ä»¤æ·è´stdinéçåå®¹å°ç®æ è¾åºï¼å¦ææ²¡ææå®ç®æ è¾åºï¼åè¾åºå°stdoutã\n\nç¨æ³ï¼\n   mc pipe [flags] [target]\nflags:\n  --help, -h                    æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ å°mysqlæ°æ®åºdumpæä»¶è¾åºå°amazon s3ã\n\nmysqldump -u root -p ******* accountsdb | mc pipe s3/ferenginar/backups/accountsdb-oct-9-2015.sql\n\n\n\n# cpå½ä»¤ - æ·è´å¯¹è±¡\n\ncpå½ä»¤æ·è´ä¸ä¸ªæå¤ä¸ªæºæä»¶ç®æ è¾åºãææå°å¯¹è±¡å­å¨çæ·è´æä½é½è¿è¡äºmd4sum checksumæ ¡éªãå¯ä»¥ä»æéç¹æ¢å¤ä¸­æ­æå¤±è´¥çå¤å¶æä½ã\n\nç¨æ³ï¼\n   mc cp [flags] source [source...] target\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r          éå½æ·è´ã\n\n\nç¤ºä¾ï¼ æ·è´ä¸ä¸ªææ¬æä»¶å°å¯¹è±¡å­å¨ã\n\nmc cp myobject.txt play/mybucket\nmyobject.txt:    14 b / 14 b  ââââââââââââââââââââââââââââââââââââââââââââââ  100.00 % 41 b/s 0\n\n\n\n# rmå½ä»¤ - å é¤å­å¨æ¡¶åå¯¹è±¡ã\n\nä½¿ç¨rmå½ä»¤å é¤æä»¶å¯¹è±¡æèå­å¨æ¡¶ã\n\nç¨æ³ï¼\n   mc rm [flags] target [target ...]\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r              éå½å é¤ã\n  --force              å¼ºå¶æ§è¡å é¤æä½ã\n  --prefix             å é¤æ¹éè¿ä¸ªåç¼çå¯¹è±¡ã\n  --incomplete, -i      å é¤æªå®æ´ä¸ä¼ çå¯¹è±¡ã\n  --fake               æ¨¡æä¸ä¸ªåçå é¤æä½ã\n  --stdin              ä»stdinä¸­è¯»å¯¹è±¡åè¡¨ã\n  --older-than value               å é¤nå¤©åçå¯¹è±¡ï¼é»è®¤æ¯0å¤©ï¼ã\n\n\nç¤ºä¾ï¼ å é¤ä¸ä¸ªå¯¹è±¡ã\n\nmc rm play/mybucket/myobject.txt\nremoved âplay/mybucket/myobject.txtâ.\n\n\nç¤ºä¾ï¼å é¤ä¸ä¸ªå­å¨æ¡¶å¹¶éå½å é¤éé¢ææçåå®¹ãç±äºè¿ä¸ªæä½å¤ªå±é©äºï¼ä½ å¿é¡»ä¼ âforceåæ°æå®å¼ºå¶å é¤ã\n\nmc rm --recursive --force play/myobject\nremoved âplay/myobject/newfile.txtâ.\nremoved \'play/myobject/otherobject.txtâ.\n\n\nç¤ºä¾ï¼ ä»mybucketéå é¤æææªå®æ´ä¸ä¼ çå¯¹è±¡ã\n\nmc rm  --incomplete --recursive --force play/mybucket\nremoved âplay/mybucket/mydvd.isoâ.\nremoved \'play/mybucket/backup.tgzâ.\n\n\nç¤ºä¾ï¼ å é¤ä¸å¤©åçå¯¹è±¡ã\n\nmc rm --force --older-than=1 play/mybucket/oldsongs\n\n\n\n# shareå½ä»¤ - å±äº«\n\nshareå½ä»¤å®å¨å°æäºä¸ä¼ æä¸è½½çæéãæ­¤è®¿é®åªæ¯ä¸´æ¶çï¼ä¸è¿ç¨ç¨æ·ååºç¨ç¨åºå±äº«ä¹æ¯å®å¨çãå¦æä½ æ³æäºæ°¸ä¹è®¿é®æéï¼ä½ å¯ä»¥ççmc policyå½ä»¤ã\n\nçæçç½åä¸­å«æç¼ç åçè®¿é®è®¤è¯ä¿¡æ¯ï¼ä»»ä½ä¼å¾ç¯¡æ¹urlçè¡ä¸ºé½ä¼ä½¿è®¿é®æ æãæ³äºè§£è¿ç§æºå¶æ¯å¦ä½å·¥ä½çï¼è¯·åèpre-signed urlææ¯ã\n\nç¨æ³ï¼\n   mc share [flags] command\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\ncommands:\n   download   çææä¸è½½æéçurlã\n   upload     çææä¸ä¼ æéçurlã\n   list       ååºååå±äº«çå¯¹è±¡åæä»¶å¤¹ã\n\n\n\n# å­å½ä»¤share download - å±äº«ä¸è½½\n\nshare downloadå½ä»¤çæä¸éè¦access keyåsecret keyå³å¯ä¸è½½çurlï¼è¿æåæ°è®¾ç½®ææå¤§æææï¼ä¸å¤§äº7å¤©ï¼ï¼è¿æä¹åæéèªå¨åæ¶ã\n\nç¨æ³ï¼\n   mc share download [flags] target [target...]\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r          éå½å±äº«ææå¯¹è±¡ã\n  --expire, -e "168h"          è®¾ç½®è¿ææ¶éï¼nn[h|m|s]ã\n\n\nç¤ºä¾ï¼ çæä¸ä¸ªå¯¹ä¸ä¸ªå¯¹è±¡æ4å°æ¶è®¿é®æéçurlã\n\nmc share download --expire 4h play/mybucket/myobject.txt\nurl: https://play.minio.io:9000/mybucket/myobject.txt\nexpire: 0 days 4 hours 0 minutes 0 seconds\nshare: https://play.minio.io:9000/mybucket/myobject.txt?x-amz-algorithm=aws4-hmac-sha256&x-amz-credential=q3am3uq867spqqa43p2f%2f20160408%2fus-east-1%2fs3%2faws4_request&x-amz-date=20160408t182008z&x-amz-expires=604800&x-amz-signedheaders=host&x-amz-signature=1527fc8f21a3a7e39ce3c456907a10b389125047adc552bcd86630b9d459b634\n\n\n# å­å½ä»¤share upload - å±äº«ä¸ä¼ \n\nshare uploadå½ä»¤çæä¸éè¦access keyåsecret keyå³å¯ä¸ä¼ çurlãè¿æåæ°è®¾ç½®ææå¤§æææï¼ä¸å¤§äº7å¤©ï¼ï¼è¿æä¹åæéèªå¨åæ¶ãcontent-typeåæ°éå¶åªåè®¸ä¸ä¼ æå®ç±»åçæä»¶ã\n\nç¨æ³ï¼\n   mc share upload [flags] target [target...]\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --recursive, -r              éå½å±äº«ææå¯¹è±¡ã\n  --expire, -e "168h"          è®¾ç½®è¿ææ¶éï¼nn[h|m|s].\n\n\nç¤ºä¾ï¼ çæä¸ä¸ªcurlå½ä»¤ï¼èµäºä¸ä¼ å°play/mybucket/myotherobject.txtçæéã\n\nmc share upload play/mybucket/myotherobject.txt\nurl: https://play.minio.io:9000/mybucket/myotherobject.txt\nexpire: 7 days 0 hours 0 minutes 0 seconds\nshare: curl https://play.minio.io:9000/mybucket -f x-amz-date=20160408t182356z -f x-amz-signature=de343934bd0ba38bda0903813b5738f23dde67b4065ea2ec2e4e52f6389e51e1 -f bucket=mybucket -f policy=eyjlehbpcmf0aw9uijoimjaxni0wnc0xnvqxodoymzo1ns4wmddaiiwiy29uzgl0aw9ucyi6w1sizxeilcikynvja2v0iiwibxlidwnrzxqixsxbimvxiiwijgtlesisim15b3rozxjvymply3qudhh0il0swyjlcsisiir4lwftei1kyxrliiwimjaxnja0mdhumtgymzu2wijdlfsizxeilcikec1hbxotywxnb3jpdghtiiwiqvdtnc1itufdlvniqti1nijdlfsizxeilcikec1hbxoty3jlzgvudglhbcisilezqu0zvve4njdtuffrqtqzudjglziwmtywnda4l3vzlwvhc3qtms9zmy9hd3m0x3jlcxvlc3qixv19 -f x-amz-algorithm=aws4-hmac-sha256 -f x-amz-credential=q3am3uq867spqqa43p2f/20160408/us-east-1/s3/aws4_request -f key=myotherobject.txt -f file=@<file>\n\n\n# å­å½ä»¤share list - ååºä¹åçå±äº«\n\nshare listååºæ²¡æªè¿æçå±äº«urlã\n\nç¨æ³ï¼\n   mc share list command\ncommand:\n   upload:   ååºååå±äº«çæä¸ä¼ æéçurlã\n   download: ååºååå±äº«çæä¸è½½æéçurlã\n\n\n\n# mirrorå½ä»¤ - å­å¨æ¡¶éå\n\nmirrorå½ä»¤årsyncç±»ä¼¼ï¼åªä¸è¿å®æ¯å¨æä»¶ç³»ç»åå¯¹è±¡å­å¨ä¹é´ååæ­¥ã\n\nç¨æ³ï¼\n   mc mirror [flags] source target\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --force              å¼ºå¶è¦çå·²ç»å­å¨çç®æ ã\n  --fake               æ¨¡æä¸ä¸ªåçæä½ã\n  --watch, -w                      çå¬æ¹åå¹¶æ§è¡éåæä½ã\n  --remove             å é¤ç®æ ä¸çå¤é¨çæä»¶ã\n\n\nç¤ºä¾ï¼ å°ä¸ä¸ªæ¬å°æä»¶å¤¹éåå°https://play.minio.io:9000ä¸ç\'mybucket\'å­å¨æ¡¶ã\n\nmc mirror localdir/ play/mybucket\nlocaldir/b.txt:  40 b / 40 b  ââââââââââââââââââââââââââââââââââââââââââââââââ  100.00 % 73 b/s 0\n\n\nç¤ºä¾ï¼ æç»­çå¬æ¬å°æä»¶å¤¹ä¿®æ¹å¹¶éåå°https://play.minio.io:9000ä¸ç\'mybucket\'å­å¨æ¡¶ã\n\nmc mirror -w localdir play/mybucket\nlocaldir/new.txt:  10 mb / 10 mb  ââââââââââââââââââââââââââââââââââââââââââââââââ  100.00 % 1 mb/s 15s\n\n\n\n# findå½ä»¤ - æ¥æ¾æä»¶åå¯¹è±¡\n\nfindå½ä»¤éè¿æå®åæ°æ¥æ¾æä»¶ï¼å®åªååºæ»¡è¶³æ¡ä»¶çæ°æ®ã\n\nç¨æ³ï¼\n  mc find path [flags]\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n  --exec value                     ä¸ºæ¯ä¸ªå¹éå¯¹è±¡çæä¸ä¸ªå¤é¨è¿ç¨ï¼è¯·åéformatï¼\n  --name value                     æ¥æ¾å¹éééç¬¦æ¨¡å¼çå¯¹è±¡ã\n  ...\n  ...\n\n\nç¤ºä¾ï¼ æç»­ä»s3å­å¨æ¡¶ä¸­æ¥æ¾ææjpegå¾åï¼å¹¶å¤å¶å°minio "play/bucket"å­å¨æ¡¶\n\nmc find s3/bucket --name "*.jpg" --watch --exec "mc cp {} play/bucket"\n\n\n\n# diffå½ä»¤ - æ¾ç¤ºå·®å¼\n\ndiffå½ä»¤è®¡ç®ä¸¤ä¸ªç®å½ä¹é´çå·®å¼ãå®åªååºç¼ºå°çæèå¤§å°ä¸åçåå®¹ã\n\nå®ä¸æ¯è¾åå®¹ï¼æä»¥å¯è½çæ¯ï¼åç§°ç¸åï¼å¤§å°ç¸åä½åå®¹ä¸åçå¯¹è±¡æ²¡æè¢«æ£æµå°ãè¿æ ·ï¼å®å¯ä»¥å¨ä¸åç«ç¹æèå¤§éæ°æ®çæåµä¸å¿«éæ¯è¾ã\n\nç¨æ³ï¼\n  mc diff [flags] first second\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ¯è¾ä¸ä¸ªæ¬å°æä»¶å¤¹åä¸ä¸ªè¿ç¨å¯¹è±¡å­å¨æå¡\n\n mc diff localdir play/mybucket\nâlocaldir/notes.txtâ and âhttps://play.minio.io:9000/mybucket/notes.txtâ - only in first.\n\n\n\n# watchå½ä»¤ - çå¬æä»¶åå¯¹è±¡å­å¨äºä»¶ã\n\nwatchå½ä»¤æä¾äºä¸ç§æ¹ä¾¿çå¬å¯¹è±¡å­å¨åæä»¶ç³»ç»ä¸ä¸åç±»åäºä»¶çæ¹å¼ã\n\nç¨æ³ï¼\n  mc watch [flags] path\nflags:\n  --events value                   è¿æ»¤ä¸åç±»åçäºä»¶ï¼é»è®¤æ¯ææç±»åçäºä»¶ (é»è®¤ï¼ "put,delete,get")\n  --prefix value                   åºäºåç¼è¿æ»¤äºä»¶ã\n  --suffix value                   åºäºåç¼è¿æ»¤äºä»¶ã\n  --recursive                      éå½æ¹å¼çå¬äºä»¶ã\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ çå¬å¯¹è±¡å­å¨çææäºä»¶\n\nmc watch play/testbucket\n[2016-08-18t00:51:29.735z] 2.7kib objectcreated https://play.minio.io:9000/testbucket/contributing.md\n[2016-08-18t00:51:29.780z]  1009b objectcreated https://play.minio.io:9000/testbucket/maintainers.md\n[2016-08-18t00:51:29.839z] 6.9kib objectcreated https://play.minio.io:9000/testbucket/readme.md\n\n\nç¤ºä¾ï¼ çå¬æ¬å°æä»¶å¤¹çææäºä»¶\n\nmc watch ~/photos\n[2016-08-17t17:54:19.565z] 3.7mib objectcreated /home/minio/downloads/tmp/5467026530_a8611b53f9_o.jpg\n[2016-08-17t17:54:19.565z] 3.7mib objectcreated /home/minio/downloads/tmp/5467026530_a8611b53f9_o.jpg\n...\n[2016-08-17t17:54:19.565z] 7.5mib objectcreated /home/minio/downloads/tmp/8771468997_89b762d104_o.jpg\n\n\n\n# eventså½ä»¤ - ç®¡çå­å¨æ¡¶äºä»¶éç¥ã\n\neventsæä¾äºä¸ç§æ¹ä¾¿çéç½®å­å¨æ¡¶çåç§ç±»åäºä»¶éç¥çæ¹å¼ãminioäºä»¶éç¥å¯ä»¥éç½®æä½¿ç¨ amqpï¼redisï¼elasticsearchï¼natsåpostgresqlæå¡ãminio configurationæä¾äºå¦ä½éç½®çæ´å¤ç»èã\n\nç¨æ³ï¼\n  mc events command [command flags | -h] [arguments...]\ncommands:\n  add     æ·»å ä¸ä¸ªæ°çå­å¨æ¡¶éç¥ã\n  remove  å é¤ä¸ä¸ªå­å¨æ¡¶éç¥ãä½¿ç¨\'--force\'å¯ä»¥å é¤ææå­å¨æ¡¶éç¥ã\n  list    ååºå­å¨æ¡¶éç¥ã\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ ååºææå­å¨æ¡¶éç¥ã\n\nmc events list play/andoria\nmytopic        arn:minio:sns:us-east-1:1:testtopic    s3:objectcreated:*,s3:objectremoved:*   suffix:.jpg\n\n\nç¤ºä¾ï¼ æ·»å ä¸ä¸ªæ°ç\'sqs\'éç¥ï¼ä»æ¥æ¶objectcreatedäºä»¶ã\n\nmc events add play/andoria arn:minio:sqs:us-east-1:1:your-queue --events put\n\n\nç¤ºä¾ï¼ æ·»å ä¸ä¸ªå¸¦æè¿æ»¤å¨ç\'sqs\'éç¥ã\n\nç»sqséç¥æ·»å prefixåsuffixè¿æ»¤è§åã\n\nmc events add play/andoria arn:minio:sqs:us-east-1:1:your-queue --prefix photos/ --suffix .jpg\n\n\nç¤ºä¾ï¼ å é¤ä¸ä¸ª\'sqs\'éç¥\n\nmc events remove play/andoria arn:minio:sqs:us-east-1:1:your-queue\n\n\n\n# policyå½ä»¤ - ç®¡çå­å¨æ¡¶ç­ç¥\n\nç®¡çå¿åè®¿é®å­å¨æ¡¶åå¶åé¨åå®¹çç­ç¥ã\n\nç¨æ³ï¼\n  mc policy [flags] permission target\n  mc policy [flags] target\n  mc policy list [flags] target\npermission:\n  allowed policies are: [none, download, upload, public].\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ¾ç¤ºå½åå¿åå­å¨æ¡¶ç­ç¥\n\næ¾ç¤ºå½åmybucket/myphotos/2020/å­æä»¶å¤¹çå¿åç­ç¥ã\n\nmc policy play/mybucket/myphotos/2020/\naccess permission for âplay/mybucket/myphotos/2020/â is ânoneâ\n\n\nç¤ºä¾ï¼è®¾ç½®å¯ä¸è½½çå¿åå­å¨æ¡¶ç­ç¥ã\n\nè®¾ç½®mybucket/myphotos/2020/å­æä»¶å¤¹å¯å¿åä¸è½½çç­ç¥ãç°å¨ï¼è¿ä¸ªæä»¶å¤¹ä¸çå¯¹è±¡å¯è¢«å¬å¼è®¿é®ãæ¯å¦ï¼mybucket/myphotos/2020/yourobjectnameå¯éè¿è¿ä¸ªurl https://play.minio.io:9000/mybucket/myphotos/2020/yourobjectnameè®¿é®ã\n\nmc policy download play/mybucket/myphotos/2020/\naccess permission for âplay/mybucket/myphotos/2020/â is set to \'download\'\n\n\nç¤ºä¾ï¼å é¤å½åçå¿åå­å¨æ¡¶ç­ç¥\n\nå é¤ææ*mybucket/myphotos/2020/*è¿ä¸ªå­æä»¶å¤¹ä¸çå¿åå­å¨æ¡¶ç­ç¥ã\n\nmc policy none play/mybucket/myphotos/2020/\naccess permission for âplay/mybucket/myphotos/2020/â is set to \'none\'\n\n\n\n# sessionå½ä»¤ - ç®¡çsession\n\nsessionå½ä»¤ç®¡çä¹åä¿å­çcpåmirroræä½çä¼è¯ã\n\nç¨æ³ï¼\n  mc session command [command flags | -h] [arguments...]\ncommands:\n  list    ååºææä¹åä¿å­çä¼è¯ã\n  clear   æ¸é¤æä¸ªä¹åä¿å­çä¼è¯ã\n  resume  æ¢å¤æä¸ªä¹åä¿å­çä¼è¯ã\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ ååºææä¹åä¿å­çä¼è¯\n\nmc session list\nixwkjpqm -> [2016-04-08 19:11:14 ist] cp assets.go play/mybucket\napwaxswa -> [2016-04-08 01:49:19 ist] mirror miniodoc/ play/mybucket\n\n\nç¤ºä¾ï¼ æ¢å¤ä¸ä¸ªä¹åä¿å­çä¼è¯\n\nmc session resume ixwkjpqm\n...assets.go: 1.68 kb / 1.68 kb  âââââââââââââââââââââââââââââ  100.00 % 784 b/s 2s\n\n\nç¤ºä¾ï¼ æ¸é¤ä¸ä¸ªä¹åä¿å­çä¼è¯ã\n\nmc session clear apwaxswa\nsession âapwaxswaâ cleared successfully.\n\n\n\n# configå½ä»¤ - ç®¡çéç½®æä»¶\n\nconfig hostå½ä»¤æä¾äºä¸ä¸ªæ¹ä¾¿å°ç®¡ç~/.mc/config.jsonéç½®æä»¶ä¸­çä¸»æºä¿¡æ¯çæ¹å¼ï¼ä½ ä¹å¯ä»¥ç¨ææ¬ç¼è¾å¨æå¨ä¿®æ¹è¿ä¸ªéç½®æä»¶ã\n\nç¨æ³ï¼\n  mc config host command [command flags | -h] [arguments...]\ncommands:\n  add, a      æ·»å ä¸ä¸ªæ°çä¸»æºå°éç½®æä»¶ã\n  remove, rm  ä»éç½®æä»¶ä¸­å é¤ä¸ä¸ªä¸»æºã\n  list, ls    ååºéç½®æä»¶ä¸­çä¸»æºã\nflags:\n  --help, -h                       æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ ç®¡çéç½®æä»¶\n\næ·»å minioæå¡çaccessåsecret keyå°éç½®æä»¶ï¼æ³¨æï¼shellçhistoryç¹æ§å¯è½ä¼è®°å½è¿äºä¿¡æ¯ï¼ä»èå¸¦æ¥å®å¨éæ£ãå¨bash shell,ä½¿ç¨set -oåset +oæ¥å³é­åå¼å¯historyç¹æ§ã\n\nset +o history\nmc config host add myminio http://localhost:9000 omqaggol63d7unvqfy8x gcy5rhnmnewvd/1qxd3speigj+vt9l7ehaaabtkj\nset -o history\n\n\n\n# updateå½ä»¤ - è½¯ä»¶æ´æ°\n\nä»https://dl.minio.ioæ£æ¥è½¯ä»¶æ´æ°ãexperimentalæ å¿ä¼æ£æ¥unstableå®éªæ§ççæ¬ï¼éå¸¸ç¨ä½æµè¯ç¨éã\n\nç¨æ³ï¼\n  mc update [flags]\nflags:\n  --quiet, -q  å³é­æ§å¶å°è¾åºã\n  --json       ä½¿ç¨jsonæ ¼å¼è¾åºã\n  --help, -h   æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ æ£æ¥æ´æ°\n\nmc update\nyou are already running the most recent version of âmcâ.\n\n\n\n# versionå½ä»¤ - æ¾ç¤ºçæ¬ä¿¡æ¯\n\næ¾ç¤ºå½åå®è£çmcçæ¬ã\n\nç¨æ³ï¼\n  mc version [flags]\nflags:\n  --quiet, -q  å³é­æ§å¶å°è¾åºã\n  --json       ä½¿ç¨jsonæ ¼å¼è¾åºã\n  --help, -h   æ¾ç¤ºå¸®å©ã\n\n\nç¤ºä¾ï¼ è¾åºmcçæ¬ã\n\nmc version\nversion: 2016-04-01t00:22:11z\nrelease-tag: release.2016-04-01t00-22-11z\ncommit-id: 12adf3be326f5b6610cdd1438f72dfd861597fce\n\n\n> åæ: https://docs.min.io/docs/minio-client-complete-guide.html',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Java Clientå¿«éå¥é¨æå",frontmatter:{title:"Java Clientå¿«éå¥é¨æå",date:"2022-02-09T11:29:53.000Z",permalink:"/pages/53a165/"},regularPath:"/12.MinIO/03.Minio%20SDKs/01.Java%20Client%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97.html",relativePath:"12.MinIO/03.Minio SDKs/01.Java Clientå¿«éå¥é¨æå.md",key:"v-d416917a",path:"/pages/53a165/",headers:[{level:2,title:"æä½éæ±",slug:"æä½éæ±",normalizedTitle:"æä½éæ±",charIndex:200},{level:2,title:"ä½¿ç¨maven",slug:"ä½¿ç¨maven",normalizedTitle:"ä½¿ç¨maven",charIndex:267},{level:2,title:"ä½¿ç¨gradle",slug:"ä½¿ç¨gradle",normalizedTitle:"ä½¿ç¨gradle",charIndex:401},{level:2,title:"ç´æ¥ä¸è½½JAR",slug:"ç´æ¥ä¸è½½jar",normalizedTitle:"ç´æ¥ä¸è½½jar",charIndex:467},{level:2,title:"å¿«éå¥é¨ç¤ºä¾ï¼æä»¶ä¸ä¼ ",slug:"å¿«éå¥é¨ç¤ºä¾-æä»¶ä¸ä¼ ",normalizedTitle:"å¿«éå¥é¨ç¤ºä¾ï¼æä»¶ä¸ä¼ ",charIndex:504},{level:2,title:"APIææ¡£",slug:"apiææ¡£",normalizedTitle:"apiææ¡£",charIndex:2320},{level:3,title:"APIææ¡£: æä½å­å¨æ¡¶",slug:"apiææ¡£-æä½å­å¨æ¡¶",normalizedTitle:"apiææ¡£: æä½å­å¨æ¡¶",charIndex:2366},{level:3,title:"APIææ¡£: æä½æä»¶å¯¹è±¡",slug:"apiææ¡£-æä½æä»¶å¯¹è±¡",normalizedTitle:"apiææ¡£: æä½æä»¶å¯¹è±¡",charIndex:2499},{level:3,title:"APIææ¡£: Presignedæä½",slug:"apiææ¡£-presignedæä½",normalizedTitle:"apiææ¡£: presignedæä½",charIndex:2628},{level:3,title:"APIææ¡£: æä½å­å¨æ¡¶ç­ç¥",slug:"apiææ¡£-æä½å­å¨æ¡¶ç­ç¥",normalizedTitle:"apiææ¡£: æä½å­å¨æ¡¶ç­ç¥",charIndex:2730},{level:2,title:"å®æ´ç¤ºä¾",slug:"å®æ´ç¤ºä¾",normalizedTitle:"å®æ´ç¤ºä¾",charIndex:2798},{level:2,title:"äºè§£æ´å¤",slug:"äºè§£æ´å¤",normalizedTitle:"äºè§£æ´å¤",charIndex:3409}],headersStr:"æä½éæ± ä½¿ç¨maven ä½¿ç¨gradle ç´æ¥ä¸è½½JAR å¿«éå¥é¨ç¤ºä¾ï¼æä»¶ä¸ä¼  APIææ¡£ APIææ¡£: æä½å­å¨æ¡¶ APIææ¡£: æä½æä»¶å¯¹è±¡ APIææ¡£: Presignedæä½ APIææ¡£: æä½å­å¨æ¡¶ç­ç¥ å®æ´ç¤ºä¾ äºè§£æ´å¤",content:'# Java Clientå¿«éå¥é¨æå\n\n\n# éç¨äºä¸Amazon S3å¼å®¹çäºå­å¨çMinio Java SDK\n\nMinio Java Client SDKæä¾ç®åçAPIæ¥è®¿é®ä»»ä½ä¸Amazon S3å¼å®¹çå¯¹è±¡å­å¨æå¡ã\n\næ¬å¿«éå¥é¨æåå°åä½ å±ç¤ºå¦ä½å®è£å®¢æ·ç«¯SDKå¹¶æ§è¡ç¤ºä¾javaç¨åºãæå³APIåç¤ºä¾çå®æ´åè¡¨ï¼è¯·æ¥çJava Client API Referenceææ¡£ã\n\n\n# æä½éæ±\n\nJava 1.8ææ´é«çæ¬:\n\n * OracleJDK 8.0\n\n * OpenJDK8.0\n   \n   \n   # ä½¿ç¨maven\n\n<dependency>    <groupId>io.minio</groupId>    <artifactId>minio</artifactId>    <version>3.0.10</version></dependency>\n\n\n\n# ä½¿ç¨gradle\n\ndependencies {    compile \'io.minio:minio:3.0.10\'}\n\n\n\n# ç´æ¥ä¸è½½JAR\n\nä½ å¯ä»¥å°mavenä»åºç´æ¥ä¸è½½ææ°ççJARã\n\n\n# å¿«éå¥é¨ç¤ºä¾ï¼æä»¶ä¸ä¼ \n\næ¬ç¤ºä¾ç¨åºè¿æ¥å°ä¸ä¸ªå¯¹è±¡å­å¨æå¡ï¼åå»ºä¸ä¸ªå­å¨æ¡¶å¹¶ä¸ä¼ ä¸ä¸ªæä»¶å°è¯¥æ¡¶ä¸­ã\n\nä½ éè¦æå­å¨æå¡çä¸ä¸ªåæ°æè½è¿æ¥å°è¯¥æå¡ã\n\nåæ°           è¯´æ\nEndpoint     å¯¹è±¡å­å¨æå¡çURL\nAccess Key   Access keyå°±åç¨æ·IDï¼å¯ä»¥å¯ä¸æ è¯ä½ çè´¦æ·ã\nSecret Key   Secret keyæ¯ä½ è´¦æ·çå¯ç ã\n\nå¨ä¸é¢çä¾å­çä¸­ï¼æä»¬å°ä½¿ç¨ä¸ä¸ªè¿è¡å¨https://play.minio.io:9000çåè´¹æç®¡çMinioæå¡ãä½ å¯ä»¥éæä½¿ç¨æ­¤æå¡è¿è¡æµè¯åå¼åãæ­¤ç¤ºä¾ä¸­æ¾ç¤ºçè®¿é®å­æ®æ¯å¬å¼çã\n\n# FileUploader.java\n\nimport java.io.IOException;import java.security.NoSuchAlgorithmException;import java.security.InvalidKeyException;import org.xmlpull.v1.XmlPullParserException;import io.minio.MinioClient;import io.minio.errors.MinioException;public class FileUploader {  public static void main(String[] args) throws NoSuchAlgorithmException, IOException, InvalidKeyException, XmlPullParserException {    try {      // ä½¿ç¨Minioæå¡çURLï¼ç«¯å£ï¼Access keyåSecret keyåå»ºä¸ä¸ªMinioClientå¯¹è±¡      MinioClient minioClient = new MinioClient("https://play.minio.io:9000", "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG");      // æ£æ¥å­å¨æ¡¶æ¯å¦å·²ç»å­å¨      boolean isExist = minioClient.bucketExists("asiatrip");      if(isExist) {        System.out.println("Bucket already exists.");      } else {        // åå»ºä¸ä¸ªåä¸ºasiatripçå­å¨æ¡¶ï¼ç¨äºå­å¨ç§ççzipæä»¶ã        minioClient.makeBucket("asiatrip");      }      // ä½¿ç¨putObjectä¸ä¼ ä¸ä¸ªæä»¶å°å­å¨æ¡¶ä¸­ã      minioClient.putObject("asiatrip","asiaphotos.zip", "/home/user/Photos/asiaphotos.zip");      System.out.println("/home/user/Photos/asiaphotos.zip is successfully uploaded as asiaphotos.zip to `asiatrip` bucket.");    } catch(MinioException e) {      System.out.println("Error occurred: " + e);    }  }}\n\n\n# ç¼è¯FileUploader\n\njavac -cp "minio-3.0.9-all.jar"  FileUploader.java\n\n\n# è¿è¡FileUploader\n\njava -cp "minio-3.0.9-all.jar:." FileUploader/home/user/Photos/asiaphotos.zip is successfully uploaded as asiaphotos.zip to `asiatrip` bucket.mc ls play/asiatrip/[2016-06-02 18:10:29 PDT]  82KiB asiaphotos.zip\n\n\n\n# APIææ¡£\n\nä¸é¢é¾æ¥æ¯å®æ´çAPIææ¡£\n\n * APIå®æ´ææ¡£\n   \n   \n   # APIææ¡£: æä½å­å¨æ¡¶\n\n * makeBucket\n\n * listBuckets\n\n * bucketExists\n\n * removeBucket\n\n * listObjects\n\n * listIncompleteUploads\n   \n   \n   # APIææ¡£: æä½æä»¶å¯¹è±¡\n\n * getObject\n\n * putObject\n\n * copyObject\n\n * statObject\n\n * removeObject\n\n * removeIncompleteUpload\n   \n   \n   # APIææ¡£: Presignedæä½\n\n * presignedGetObject\n\n * presignedPutObject\n\n * presignedPostPolicy\n   \n   \n   # APIææ¡£: æä½å­å¨æ¡¶ç­ç¥\n\n * getBucketPolicy\n\n * setBucketPolicy\n   \n   \n   # å®æ´ç¤ºä¾\n\n# å®æ´ç¤ºä¾: Bucket Operations\n\n * ListBuckets.java\n\n * ListObjects.java\n\n * BucketExists.java\n\n * MakeBucket.java\n\n * RemoveBucket.java\n\n * ListIncompleteUploads.java\n   \n   # å®æ´ç¤ºä¾: Object Operations\n\n * PutObject.java\n\n * PutObjectEncrypted.java\n\n * GetObject.Java\n\n * GetObjectEncrypted.Java\n\n * GetPartialObject.java\n\n * RemoveObject.java\n\n * RemoveObjects.java\n\n * StatObject.java\n   \n   # å®æ´ç¤ºä¾: Presigned Operations\n\n * PresignedGetObject.java\n\n * PresignedPutObject.java\n\n * PresignedPostPolicy.java\n   \n   # å®æ´ç¤ºä¾: Bucket Policy Operations\n\n * SetBucketPolicy.java\n\n * GetBucketPolicy.Java\n   \n   \n   # äºè§£æ´å¤\n\n * Minioå®æ¹ææ¡£\n\n * Minio Java Client SDK APIææ¡£\n\n * [åå»ºå±äºä½ çç§çAPIæå¡-å®æ´ç¤ºä¾](',normalizedContent:'# java clientå¿«éå¥é¨æå\n\n\n# éç¨äºä¸amazon s3å¼å®¹çäºå­å¨çminio java sdk\n\nminio java client sdkæä¾ç®åçapiæ¥è®¿é®ä»»ä½ä¸amazon s3å¼å®¹çå¯¹è±¡å­å¨æå¡ã\n\næ¬å¿«éå¥é¨æåå°åä½ å±ç¤ºå¦ä½å®è£å®¢æ·ç«¯sdkå¹¶æ§è¡ç¤ºä¾javaç¨åºãæå³apiåç¤ºä¾çå®æ´åè¡¨ï¼è¯·æ¥çjava client api referenceææ¡£ã\n\n\n# æä½éæ±\n\njava 1.8ææ´é«çæ¬:\n\n * oraclejdk 8.0\n\n * openjdk8.0\n   \n   \n   # ä½¿ç¨maven\n\n<dependency>    <groupid>io.minio</groupid>    <artifactid>minio</artifactid>    <version>3.0.10</version></dependency>\n\n\n\n# ä½¿ç¨gradle\n\ndependencies {    compile \'io.minio:minio:3.0.10\'}\n\n\n\n# ç´æ¥ä¸è½½jar\n\nä½ å¯ä»¥å°mavenä»åºç´æ¥ä¸è½½ææ°ççjarã\n\n\n# å¿«éå¥é¨ç¤ºä¾ï¼æä»¶ä¸ä¼ \n\næ¬ç¤ºä¾ç¨åºè¿æ¥å°ä¸ä¸ªå¯¹è±¡å­å¨æå¡ï¼åå»ºä¸ä¸ªå­å¨æ¡¶å¹¶ä¸ä¼ ä¸ä¸ªæä»¶å°è¯¥æ¡¶ä¸­ã\n\nä½ éè¦æå­å¨æå¡çä¸ä¸ªåæ°æè½è¿æ¥å°è¯¥æå¡ã\n\nåæ°           è¯´æ\nendpoint     å¯¹è±¡å­å¨æå¡çurl\naccess key   access keyå°±åç¨æ·idï¼å¯ä»¥å¯ä¸æ è¯ä½ çè´¦æ·ã\nsecret key   secret keyæ¯ä½ è´¦æ·çå¯ç ã\n\nå¨ä¸é¢çä¾å­çä¸­ï¼æä»¬å°ä½¿ç¨ä¸ä¸ªè¿è¡å¨https://play.minio.io:9000çåè´¹æç®¡çminioæå¡ãä½ å¯ä»¥éæä½¿ç¨æ­¤æå¡è¿è¡æµè¯åå¼åãæ­¤ç¤ºä¾ä¸­æ¾ç¤ºçè®¿é®å­æ®æ¯å¬å¼çã\n\n# fileuploader.java\n\nimport java.io.ioexception;import java.security.nosuchalgorithmexception;import java.security.invalidkeyexception;import org.xmlpull.v1.xmlpullparserexception;import io.minio.minioclient;import io.minio.errors.minioexception;public class fileuploader {  public static void main(string[] args) throws nosuchalgorithmexception, ioexception, invalidkeyexception, xmlpullparserexception {    try {      // ä½¿ç¨minioæå¡çurlï¼ç«¯å£ï¼access keyåsecret keyåå»ºä¸ä¸ªminioclientå¯¹è±¡      minioclient minioclient = new minioclient("https://play.minio.io:9000", "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg");      // æ£æ¥å­å¨æ¡¶æ¯å¦å·²ç»å­å¨      boolean isexist = minioclient.bucketexists("asiatrip");      if(isexist) {        system.out.println("bucket already exists.");      } else {        // åå»ºä¸ä¸ªåä¸ºasiatripçå­å¨æ¡¶ï¼ç¨äºå­å¨ç§ççzipæä»¶ã        minioclient.makebucket("asiatrip");      }      // ä½¿ç¨putobjectä¸ä¼ ä¸ä¸ªæä»¶å°å­å¨æ¡¶ä¸­ã      minioclient.putobject("asiatrip","asiaphotos.zip", "/home/user/photos/asiaphotos.zip");      system.out.println("/home/user/photos/asiaphotos.zip is successfully uploaded as asiaphotos.zip to `asiatrip` bucket.");    } catch(minioexception e) {      system.out.println("error occurred: " + e);    }  }}\n\n\n# ç¼è¯fileuploader\n\njavac -cp "minio-3.0.9-all.jar"  fileuploader.java\n\n\n# è¿è¡fileuploader\n\njava -cp "minio-3.0.9-all.jar:." fileuploader/home/user/photos/asiaphotos.zip is successfully uploaded as asiaphotos.zip to `asiatrip` bucket.mc ls play/asiatrip/[2016-06-02 18:10:29 pdt]  82kib asiaphotos.zip\n\n\n\n# apiææ¡£\n\nä¸é¢é¾æ¥æ¯å®æ´çapiææ¡£\n\n * apiå®æ´ææ¡£\n   \n   \n   # apiææ¡£: æä½å­å¨æ¡¶\n\n * makebucket\n\n * listbuckets\n\n * bucketexists\n\n * removebucket\n\n * listobjects\n\n * listincompleteuploads\n   \n   \n   # apiææ¡£: æä½æä»¶å¯¹è±¡\n\n * getobject\n\n * putobject\n\n * copyobject\n\n * statobject\n\n * removeobject\n\n * removeincompleteupload\n   \n   \n   # apiææ¡£: presignedæä½\n\n * presignedgetobject\n\n * presignedputobject\n\n * presignedpostpolicy\n   \n   \n   # apiææ¡£: æä½å­å¨æ¡¶ç­ç¥\n\n * getbucketpolicy\n\n * setbucketpolicy\n   \n   \n   # å®æ´ç¤ºä¾\n\n# å®æ´ç¤ºä¾: bucket operations\n\n * listbuckets.java\n\n * listobjects.java\n\n * bucketexists.java\n\n * makebucket.java\n\n * removebucket.java\n\n * listincompleteuploads.java\n   \n   # å®æ´ç¤ºä¾: object operations\n\n * putobject.java\n\n * putobjectencrypted.java\n\n * getobject.java\n\n * getobjectencrypted.java\n\n * getpartialobject.java\n\n * removeobject.java\n\n * removeobjects.java\n\n * statobject.java\n   \n   # å®æ´ç¤ºä¾: presigned operations\n\n * presignedgetobject.java\n\n * presignedputobject.java\n\n * presignedpostpolicy.java\n   \n   # å®æ´ç¤ºä¾: bucket policy operations\n\n * setbucketpolicy.java\n\n * getbucketpolicy.java\n   \n   \n   # äºè§£æ´å¤\n\n * minioå®æ¹ææ¡£\n\n * minio java client sdk apiææ¡£\n\n * [åå»ºå±äºä½ çç§çapiæå¡-å®æ´ç¤ºä¾](',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Java Client APIåèææ¡£",frontmatter:{title:"Java Client APIåèææ¡£",date:"2022-02-09T11:29:54.000Z",permalink:"/pages/b8b311/"},regularPath:"/12.MinIO/03.Minio%20SDKs/02.Java%20Client%20API%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3.html",relativePath:"12.MinIO/03.Minio SDKs/02.Java Client APIåèææ¡£.md",key:"v-3785d681",path:"/pages/b8b311/",headers:[{level:2,title:"åå§åMinio Client objectã",slug:"åå§åminio-client-objectã",normalizedTitle:"åå§åminio client objectã",charIndex:26},{level:2,title:"Minio",slug:"minio",normalizedTitle:"minio",charIndex:29},{level:2,title:"AWS S3",slug:"aws-s3",normalizedTitle:"aws s3",charIndex:207},{level:2,title:"1. æé å½æ°",slug:"_1-æé å½æ°",normalizedTitle:"1. æé å½æ°",charIndex:872},{level:3,title:"Minio",slug:"minio-2",normalizedTitle:"minio",charIndex:29},{level:3,title:"AWS S3",slug:"aws-s3-2",normalizedTitle:"aws s3",charIndex:207},{level:2,title:"2. å­å¨æ¡¶æä½",slug:"_2-å­å¨æ¡¶æä½",normalizedTitle:"2. å­å¨æ¡¶æä½",charIndex:6758},{level:3,title:"makeBucket(String bucketName)",slug:"makebucket-string-bucketname",normalizedTitle:"makebucket(string bucketname)",charIndex:6771},{level:3,title:"listBuckets()",slug:"listbuckets",normalizedTitle:"listbuckets()",charIndex:7573},{level:3,title:"bucketExists(String bucketName)",slug:"bucketexists-string-bucketname",normalizedTitle:"bucketexists(string bucketname)",charIndex:8340},{level:3,title:"removeBucket(String bucketName)",slug:"removebucket-string-bucketname",normalizedTitle:"removebucket(string bucketname)",charIndex:9311},{level:3,title:"listObjects(String bucketName, String prefix, boolean recursive, boolean useVersion1)",slug:"listobjects-string-bucketname-string-prefix-boolean-recursive-boolean-useversion1",normalizedTitle:"listobjects(string bucketname, string prefix, boolean recursive, boolean useversion1)",charIndex:10211},{level:3,title:"listIncompleteUploads(String bucketName, String prefix, boolean recursive)",slug:"listincompleteuploads-string-bucketname-string-prefix-boolean-recursive",normalizedTitle:"listincompleteuploads(string bucketname, string prefix, boolean recursive)",charIndex:11289},{level:3,title:"getBucketPolicy(String bucketName, String objectPrefix)",slug:"getbucketpolicy-string-bucketname-string-objectprefix",normalizedTitle:"getbucketpolicy(string bucketname, string objectprefix)",charIndex:12313},{level:3,title:"setBucketPolicy(String bucketName, String objectPrefix, PolicyType policy)",slug:"setbucketpolicy-string-bucketname-string-objectprefix-policytype-policy",normalizedTitle:"setbucketpolicy(string bucketname, string objectprefix, policytype policy)",charIndex:13861},{level:2,title:"3. Object operations",slug:"_3-object-operations",normalizedTitle:"3. object operations",charIndex:14969},{level:3,title:"getObject(String bucketName, String objectName)",slug:"getobject-string-bucketname-string-objectname",normalizedTitle:"getobject(string bucketname, string objectname)",charIndex:14994},{level:3,title:"getObject(String bucketName, String objectName, long offset, Long length)",slug:"getobject-string-bucketname-string-objectname-long-offset-long-length",normalizedTitle:"getobject(string bucketname, string objectname, long offset, long length)",charIndex:16450},{level:3,title:"getObject(String bucketName, String objectName, String fileName)",slug:"getobject-string-bucketname-string-objectname-string-filename",normalizedTitle:"getobject(string bucketname, string objectname, string filename)",charIndex:18082},{level:3,title:"getObject(String bucketName, String objectName, SecretKey key)",slug:"getobject-string-bucketname-string-objectname-secretkey-key",normalizedTitle:"getobject(string bucketname, string objectname, secretkey key)",charIndex:18968},{level:3,title:"getObject(String bucketName, String objectName, KeyPair key)",slug:"getobject-string-bucketname-string-objectname-keypair-key",normalizedTitle:"getobject(string bucketname, string objectname, keypair key)",charIndex:20781},{level:3,title:"putObject(String bucketName, String objectName, InputStream stream, long size, String contentType)",slug:"putobject-string-bucketname-string-objectname-inputstream-stream-long-size-string-contenttype",normalizedTitle:"putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype)",charIndex:22593},{level:3,title:"putObject(String bucketName, String objectName, String fileName)",slug:"putobject-string-bucketname-string-objectname-string-filename",normalizedTitle:"putobject(string bucketname, string objectname, string filename)",charIndex:25141},{level:3,title:"putObject(String bucketName, String objectName, InputStream stream, long size, String contentType, SecretKey key)",slug:"putobject-string-bucketname-string-objectname-inputstream-stream-long-size-string-contenttype-secretkey-key",normalizedTitle:"putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype, secretkey key)",charIndex:25938},{level:3,title:"putObject(String bucketName, String objectName, InputStream stream, long size, String contentType, KeyPair key)",slug:"putobject-string-bucketname-string-objectname-inputstream-stream-long-size-string-contenttype-keypair-key",normalizedTitle:"putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype, keypair key)",charIndex:29072},{level:3,title:"statObject(String bucketName, String objectName)",slug:"statobject-string-bucketname-string-objectname",normalizedTitle:"statobject(string bucketname, string objectname)",charIndex:32219},{level:3,title:"copyObject(String bucketName, String objectName, String destBucketName, String destObjectName, CopyConditions cpConds, Map metadata)",slug:"copyobject-string-bucketname-string-objectname-string-destbucketname-string-destobjectname-copyconditions-cpconds-map-metadata",normalizedTitle:"copyobject(string bucketname, string objectname, string destbucketname, string destobjectname, copyconditions cpconds, map metadata)",charIndex:33213},{level:3,title:"removeObject(String bucketName, String objectName)",slug:"removeobject-string-bucketname-string-objectname",normalizedTitle:"removeobject(string bucketname, string objectname)",charIndex:34548},{level:3,title:"removeObject(String bucketName, Iterable objectNames)",slug:"removeobject-string-bucketname-iterable-objectnames",normalizedTitle:"removeobject(string bucketname, iterable objectnames)",charIndex:35295},{level:3,title:"removeIncompleteUpload(String bucketName, String objectName)",slug:"removeincompleteupload-string-bucketname-string-objectname",normalizedTitle:"removeincompleteupload(string bucketname, string objectname)",charIndex:36252},{level:2,title:"4. Presignedæä½",slug:"_4-presignedæä½",normalizedTitle:"4. presignedæä½",charIndex:36990},{level:3,title:"presignedGetObject(String bucketName, String objectName, Integer expires)",slug:"presignedgetobject-string-bucketname-string-objectname-integer-expires",normalizedTitle:"presignedgetobject(string bucketname, string objectname, integer expires)",charIndex:37009},{level:3,title:"presignedPutObject(String bucketName, String objectName, Integer expires)",slug:"presignedputobject-string-bucketname-string-objectname-integer-expires",normalizedTitle:"presignedputobject(string bucketname, string objectname, integer expires)",charIndex:38236},{level:3,title:"presignedPostPolicy(PostPolicy policy)",slug:"presignedpostpolicy-postpolicy-policy",normalizedTitle:"presignedpostpolicy(postpolicy policy)",charIndex:39463},{level:2,title:"5. äºè§£æ´å¤",slug:"_5-äºè§£æ´å¤",normalizedTitle:"5. äºè§£æ´å¤",charIndex:40711}],headersStr:"åå§åMinio Client objectã Minio AWS S3 1. æé å½æ° Minio AWS S3 2. å­å¨æ¡¶æä½ makeBucket(String bucketName) listBuckets() bucketExists(String bucketName) removeBucket(String bucketName) listObjects(String bucketName, String prefix, boolean recursive, boolean useVersion1) listIncompleteUploads(String bucketName, String prefix, boolean recursive) getBucketPolicy(String bucketName, String objectPrefix) setBucketPolicy(String bucketName, String objectPrefix, PolicyType policy) 3. Object operations getObject(String bucketName, String objectName) getObject(String bucketName, String objectName, long offset, Long length) getObject(String bucketName, String objectName, String fileName) getObject(String bucketName, String objectName, SecretKey key) getObject(String bucketName, String objectName, KeyPair key) putObject(String bucketName, String objectName, InputStream stream, long size, String contentType) putObject(String bucketName, String objectName, String fileName) putObject(String bucketName, String objectName, InputStream stream, long size, String contentType, SecretKey key) putObject(String bucketName, String objectName, InputStream stream, long size, String contentType, KeyPair key) statObject(String bucketName, String objectName) copyObject(String bucketName, String objectName, String destBucketName, String destObjectName, CopyConditions cpConds, Map metadata) removeObject(String bucketName, String objectName) removeObject(String bucketName, Iterable objectNames) removeIncompleteUpload(String bucketName, String objectName) 4. Presignedæä½ presignedGetObject(String bucketName, String objectName, Integer expires) presignedPutObject(String bucketName, String objectName, Integer expires) presignedPostPolicy(PostPolicy policy) 5. äºè§£æ´å¤",content:'# Java Client APIåèææ¡£\n\n\n# åå§åMinio Client objectã\n\n\n# Minio\n\nMinioClient minioClient = new MinioClient("https://play.minio.io:9000", "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG");\n\n\n\n# AWS S3\n\nMinioClient s3Client = new MinioClient("https://s3.amazonaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY");\n\n\nå­å¨æ¡¶æä½                   æä»¶å¯¹è±¡æä½                   PRESIGNEDæä½           å­å¨æ¡¶ç­ç¥\nmakeBucket              getObject                presignedGetObject    getBucketPolicy\nlistBuckets             putObject                presignedPutObject    setBucketPolicy\nbucketExists            copyObject               presignedPostPolicy   \nremoveBucket            statObject                                     \nlistObjects             removeObject                                   \nlistIncompleteUploads   removeIncompleteUpload                         \n\n\n# 1. æé å½æ°\n\n\npublic MinioClient(String endpoint) throws\nNullPointerException, InvalidEndpointException,\nInvalidPortException\nä½¿ç¨ç»å®çendpointä»¥åå¿åæ¹å¼åå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(URL url) throws NullPointerException,\nInvalidEndpointException, InvalidPortException\nä½¿ç¨ç»å®çurlä»¥åå¿åæ¹å¼åå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(com.squareup.okhttp.HttpUrl url) throws\nNullPointerException, InvalidEndpointException,\nInvalidPortException\nä½¿ç¨ç»å®çHttpUrlä»¥åå¿åæ¹å¼åå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(String endpoint, String accessKey, String\nsecretKey) throws NullPointerException,\nInvalidEndpointException, InvalidPortException\nä½¿ç¨ç»å®çendpointãaccess keyåsecret keyåå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(String endpoint, int port, String\naccessKey, String secretKey) throws NullPointerException,\nInvalidEndpointException, InvalidPortException\nä½¿ç¨ç»å®çendpointãportãaccess keyåsecret keyåå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(String endpoint, String accessKey, String\nsecretKey, boolean secure) throws NullPointerException,\nInvalidEndpointException, InvalidPortException\nä½¿ç¨ç»å®çendpointãaccess keyãsecret\nkeyåä¸ä¸ªsecureéé¡¹ï¼æ¯å¦ä½¿ç¨httpsï¼åå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(String endpoint, int port, String\naccessKey, String secretKey, boolean secure) throws\nNullPointerException, InvalidEndpointException,\nInvalidPortException\nä½¿ç¨ç»å®çendpointãportãaccess keyãsecret\nkeyåä¸ä¸ªsecureéé¡¹ï¼æ¯å¦ä½¿ç¨httpsï¼åå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(com.squareup.okhttp.HttpUrl url, String\naccessKey, String secretKey) throws NullPointerException,\nInvalidEndpointException, InvalidPortException\nä½¿ç¨ç»å®çHttpUrlå¯¹è±¡ãaccess keyãsecret keyåå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\n\npublic MinioClient(URL url, String accessKey, String\nsecretKey) throws NullPointerException,\nInvalidEndpointException, InvalidPortException\nä½¿ç¨ç»å®çURLå¯¹è±¡ãaccess keyãsecret keyåå»ºä¸ä¸ªMinio clientå¯¹è±¡ã\næ¥ç Javadoc\n\nåæ°\n\nåæ°          ç±»å        æè¿°\nendpoint    string    endPointæ¯ä¸ä¸ªURLï¼ååï¼IPv4æèIPv6å°åãä»¥ä¸æ¯åæ³çendpoints:\n                      https://s3.amazonaws.com\n                      https://play.minio.io:9000\n                      localhost\n                      play.minio.io\nport        int       TCP/IPç«¯å£å·ãå¯éï¼é»è®¤å¼æ¯ï¼å¦ææ¯http,åé»è®¤80ç«¯å£ï¼å¦ææ¯https,åé»è®¤æ¯443ç«¯å£ã\naccessKey   string    accessKeyç±»ä¼¼äºç¨æ·IDï¼ç¨äºå¯ä¸æ è¯ä½ çè´¦æ·ã\nsecretKey   string    secretKeyæ¯ä½ è´¦æ·çå¯ç ã\nsecure      boolean   å¦ææ¯trueï¼åç¨çæ¯httpsèä¸æ¯http,é»è®¤å¼æ¯trueã\nurl         URL       Endpoint URLå¯¹è±¡ã\nurl         HttpURL   Endpoint HttpUrlå¯¹è±¡ã\n\nç¤ºä¾\n\n\n# Minio\n\n// 1. public MinioClient(String endpoint)\nMinioClient minioClient = new MinioClient("https://play.minio.io:9000");\n// 2. public MinioClient(URL url)\nMinioClient minioClient = new MinioClient(new URL("https://play.minio.io:9000"));\n// 3. public MinioClient(com.squareup.okhttp.HttpUrl url)\n MinioClient minioClient = new MinioClient(new HttpUrl.parse("https://play.minio.io:9000"));\n// 4. public MinioClient(String endpoint, String accessKey, String secretKey)\nMinioClient minioClient = new MinioClient("https://play.minio.io:9000", "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG");\n// 5. public MinioClient(String endpoint, int port,  String accessKey, String secretKey)\nMinioClient minioClient = new MinioClient("https://play.minio.io", 9000, "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG");\n// 6. public MinioClient(String endpoint, String accessKey, String secretKey, boolean insecure)\nMinioClient minioClient = new MinioClient("https://play.minio.io:9000", "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG", true);\n// 7. public MinioClient(String endpoint, int port,  String accessKey, String secretKey, boolean insecure)\nMinioClient minioClient = new MinioClient("https://play.minio.io", 9000, "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG", true);\n// 8. public MinioClient(com.squareup.okhttp.HttpUrl url, String accessKey, String secretKey)\n MinioClient minioClient = new MinioClient(new URL("https://play.minio.io:9000"), "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG");\n// 9. public MinioClient(URL url, String accessKey, String secretKey)\nMinioClient minioClient = new MinioClient(HttpUrl.parse("https://play.minio.io:9000"), "Q3AM3UQ867SPQQA43P2F", "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG");\n\n\n\n# AWS S3\n\n// 1. public MinioClient(String endpoint)\nMinioClient s3Client = new MinioClient("https://s3.amazonaws.com");\n// 2. public MinioClient(URL url)\nMinioClient minioClient = new MinioClient(new URL("https://s3.amazonaws.com"));\n// 3. public MinioClient(com.squareup.okhttp.HttpUrl url)\n MinioClient s3Client = new MinioClient(new HttpUrl.parse("https://s3.amazonaws.com"));\n// 4. public MinioClient(String endpoint, String accessKey, String secretKey)\nMinioClient s3Client = new MinioClient("s3.amazonaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY");\n// 5. public MinioClient(String endpoint, int port,  String accessKey, String secretKey)\nMinioClient s3Client = new MinioClient("s3.amazonaws.com", 80, "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY");\n// 6. public MinioClient(String endpoint, String accessKey, String secretKey, boolean insecure)\nMinioClient s3Client = new MinioClient("s3.amazonaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", false);\n// 7. public MinioClient(String endpoint, int port,  String accessKey, String secretKey, boolean insecure)\nMinioClient s3Client = new MinioClient("s3.amazonaws.com", 80, "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY",false);\n// 8. public MinioClient(com.squareup.okhttp.HttpUrl url, String accessKey, String secretKey)\n MinioClient s3Client = new MinioClient(new URL("s3.amazonaws.com"), "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY");\n// 9. public MinioClient(URL url, String accessKey, String secretKey)\nMinioClient s3Client = new MinioClient(HttpUrl.parse("s3.amazonaws.com"), "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY");\n\n\n\n# 2. å­å¨æ¡¶æä½\n\n\n# makeBucket(String bucketName)\n\npublic void makeBucket(String bucketName)\n\n\nåå»ºä¸ä¸ªæ°çå­å¨æ¡¶\n\næ¥çJavadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨:\n        InvalidBucketNameException : éæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸\n        ErrorResponseException : æ§è¡å¤±è´¥\n        InternalException : åé¨å¼å¸¸\n\nç¤ºä¾\n\ntry {\n  // å¦å­å¨æ¡¶ä¸å­å¨ï¼åå»ºä¹ã\n  boolean found = minioClient.bucketExists("mybucket");\n  if (found) {\n    System.out.println("mybucket already exists");\n  } else {\n    // åå»ºåä¸º\'my-bucketname\'çå­å¨æ¡¶ã\n    minioClient.makeBucket("mybucket");\n    System.out.println("mybucket is created successfully");\n  }\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# listBuckets()\n\npublic List<Bucket> listBuckets()\n\n\nååºææå­å¨æ¡¶ã\n\næ¥çJavadoc\n\nè¿åå¼ç±»å                                å¼å¸¸\nList Bucket : List of bucket type.   å¼å¸¸åè¡¨ï¼\n                                     NoResponseException : æå¡ç«¯æ ååº\n                                     IOException : è¿æ¥å¼å¸¸\n                                     org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸\n                                     ErrorResponseException :æ§è¡å¤±è´¥å¼æº\n                                     InternalException : åé¨éè¯¯\n\nç¤ºä¾\n\ntry {\n  // ååºææå­å¨æ¡¶\n  List<Bucket> bucketList = minioClient.listBuckets();\n  for (Bucket bucket : bucketList) {\n    System.out.println(bucket.creationDate() + ", " + bucket.name());\n  }\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# bucketExists(String bucketName)\n\npublic boolean bucketExists(String bucketName)\n\n\næ£æ¥å­å¨æ¡¶æ¯å¦å­å¨ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°\n\nè¿åå¼å¼ç±»å                               å¼å¸¸\nboolean: true if the bucket exists   å¼å¸¸åè¡¨ï¼\n                                     InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                     NoResponseException : æå¡å¨æ ååºã\n                                     IOException : è¿æ¥å¼å¸¸ã\n                                     org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n                                     ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n                                     InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // æ£æ¥\'my-bucketname\'æ¯å¦å­å¨ã\n  boolean found = minioClient.bucketExists("mybucket");\n  if (found) {\n    System.out.println("mybucket exists");\n  } else {\n    System.out.println("mybucket does not exist");\n  }\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# removeBucket(String bucketName)\n\npublic void removeBucket(String bucketName)\n\n\nå é¤ä¸ä¸ªå­å¨æ¡¶ã\n\næ¥ç Javadoc\n\næ³¨æ: - removeBucketä¸ä¼å é¤å­å¨æ¡¶éçå¯¹è±¡ï¼ä½ éè¦éè¿removeObject APIæ¥å é¤å®ä»¬ã\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // å é¤ä¹ååæ£æ¥`my-bucket`æ¯å¦å­å¨ã\n  boolean found = minioClient.bucketExists("mybucket");\n  if (found) {\n    // å é¤`my-bucketname`å­å¨æ¡¶ï¼æ³¨æï¼åªæå­å¨æ¡¶ä¸ºç©ºæ¶æè½å é¤æåã\n    minioClient.removeBucket("mybucket");\n    System.out.println("mybucket is removed successfully");\n  } else {\n    System.out.println("mybucket does not exist");\n  }\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# listObjects(String bucketName, String prefix, boolean recursive, boolean useVersion1)\n\npublic Iterable<Result<Item>> listObjects(String bucketName, String prefix, boolean recursive, boolean useVersion1)\n\n\nååºæä¸ªå­å¨æ¡¶ä¸­çææå¯¹è±¡ã\n\næ¥çJavadoc\n\nåæ°\n\nåæ°            ç±»å        æè¿°\nbucketName    String    å­å¨æ¡¶åç§°ã\nprefix        String    å¯¹è±¡åç§°çåç¼\nrecursive     boolean   æ¯å¦éå½æ¥æ¾ï¼å¦ææ¯false,å°±æ¨¡ææä»¶å¤¹ç»ææ¥æ¾ã\nuseVersion1   boolean   å¦ææ¯true, ä½¿ç¨çæ¬1 REST API\n\nè¿åå¼ç±»å                                                 å¼å¸¸\nIterable<Result<Item>>:an iterator of Result Items.   None\n\nç¤ºä¾\n\ntry {\n  // æ£æ¥\'mybucket\'æ¯å¦å­å¨ã\n  boolean found = minioClient.bucketExists("mybucket");\n  if (found) {\n    // ååº\'my-bucketname\'éçå¯¹è±¡\n    Iterable<Result<Item>> myObjects = minioClient.listObjects("mybucket");\n    for (Result<Item> result : myObjects) {\n      Item item = result.get();\n      System.out.println(item.lastModified() + ", " + item.size() + ", " + item.objectName());\n    }\n  } else {\n    System.out.println("mybucket does not exist");\n  }\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# listIncompleteUploads(String bucketName, String prefix, boolean recursive)\n\npublic Iterable<Result<Upload>> listIncompleteUploads(String bucketName, String prefix, boolean recursive)\n\n\nååºå­å¨æ¡¶ä¸­è¢«é¨åä¸ä¼ çå¯¹è±¡ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketName   String    å­å¨æ¡¶åç§°ã\nprefix       String    å¯¹è±¡åç§°çåç¼ï¼ååºæè¯¥åç¼çå¯¹è±¡\nrecursive    boolean   æ¯å¦éå½æ¥æ¾ï¼å¦ææ¯false,å°±æ¨¡ææä»¶å¤¹ç»ææ¥æ¾ã\n\nè¿åå¼ç±»å                                              å¼å¸¸\nIterable<Result<Upload>>: an iterator of Upload.   None\n\nç¤ºä¾\n\ntry {\n  // æ£æ¥\'mybucket\'æ¯å¦å­å¨ã\n  boolean found = minioClient.bucketExists("mybucket");\n  if (found) {\n    // ååº\'mybucket\'ä¸­æææªå®æçmultipartä¸ä¼ ççå¯¹è±¡ã \n    Iterable<Result<Upload>> myObjects = minioClient.listIncompleteUploads("mybucket");\n    for (Result<Upload> result : myObjects) {\n      Upload upload = result.get();\n      System.out.println(upload.uploadId() + ", " + upload.objectName());\n    }\n  } else {\n    System.out.println("mybucket does not exist");\n  }\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# getBucketPolicy(String bucketName, String objectPrefix)\n\npublic PolicyType getBucketPolicy(String bucketName, String objectPrefix)\n\n\nè·å¾æå®å¯¹è±¡åç¼çå­å¨æ¡¶ç­ç¥ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°             ç±»å       æè¿°\nbucketName     String   å­å¨æ¡¶åç§°ã\nobjectPrefix   String   ç­ç¥éç¨çå¯¹è±¡çåç¼\n\nè¿åå¼ç±»å                                                    å¼å¸¸\nPolicyType: The current bucket policy type for a given   å¼å¸¸åè¡¨ï¼\nbucket and objectPrefix.\n                                                         InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                         NoResponseException : æå¡å¨æ ååºã\n                                                         IOException : è¿æ¥å¼å¸¸ã\n                                                         org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n                                                         ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n                                                         InternalException : åé¨éè¯¯ã\n                                                         InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                         InvalidObjectPrefixException : ä¸åæ³çå¯¹è±¡åç¼\n                                                         NoSuchAlgorithmException : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n                                                         InsufficientDataException : å¨è¯»å°ç¸åºlengthä¹åå°±å¾å°ä¸ä¸ªEOFExceptionã\n\nç¤ºä¾\n\ntry {\n  System.out.println("Current policy: " + minioClient.getBucketPolicy("myBucket", "downloads"));\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# setBucketPolicy(String bucketName, String objectPrefix, PolicyType policy)\n\npublic void setBucketPolicy(String bucketName, String objectPrefix, PolicyType policy)\n\n\nç»ä¸ä¸ªå­å¨æ¡¶+å¯¹è±¡åç¼è®¾ç½®ç­ç¥ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°             ç±»å           æè¿°\nbucketName     String       å­å¨æ¡¶åç§°ã\nobjectPrefix   String       å¯¹è±¡åç¼ã\npolicy         PolicyType   è¦èµäºçç­ç¥ï¼å¯éå¼æ[PolicyType.NONE, PolicyType.READ_ONLY,\n                            PolicyType.READ_WRITE, PolicyType.WRITE_ONLY].\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        InvalidObjectPrefixException : ä¸åæ³çå¯¹è±¡åç¼\n        NoSuchAlgorithmException : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n        InsufficientDataException : å¨è¯»å°ç¸åºlengthä¹åå°±å¾å°ä¸ä¸ªEOFExceptionã\n\nç¤ºä¾\n\ntry {\n  minioClient.setBucketPolicy("myBucket", "uploads", PolicyType.READ_ONLY);\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# 3. Object operations\n\n\n# getObject(String bucketName, String objectName)\n\npublic InputStream getObject(String bucketName, String objectName, long offset)\n\n\nä»¥æµçå½¢å¼ä¸è½½ä¸ä¸ªå¯¹è±¡ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\nobjectName   String   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å                                                  å¼å¸¸\nInputStream: InputStream containing the object data.   å¼å¸¸åè¡¨ï¼\n                                                       InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                       NoResponseException : æå¡å¨æ ååºã\n                                                       IOException : è¿æ¥å¼å¸¸ã\n                                                       org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n                                                       ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n                                                       InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statObject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statObject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioClient.statObject("mybucket", "myobject");\n  // è·å"myobject"çè¾å¥æµã\n  InputStream stream = minioClient.getObject("mybucket", "myobject");\n  // è¯»åè¾å¥æµç´å°EOFå¹¶æå°å°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesRead;\n  while ((bytesRead = stream.read(buf, 0, buf.length)) >= 0) {\n    System.out.println(new String(buf, 0, bytesRead));\n  }\n  // å³é­æµï¼æ­¤å¤ä¸ºç¤ºä¾ï¼æµå³é­æå¥½æ¾å¨finallyåã\n  stream.close();\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# getObject(String bucketName, String objectName, long offset, Long length)\n\npublic InputStream getObject(String bucketName, String objectName, long offset, Long length)\n\n\nä¸è½½å¯¹è±¡æå®åºåçå­èæ°ç»åä¸ºæµãï¼æ­ç¹ä¸è½½ï¼\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\nobjectName   String   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\noffset       Long     offset æ¯èµ·å§å­èçä½ç½®\nlength       Long     lengthæ¯è¦è¯»åçé¿åº¦ (å¯éï¼å¦ææ å¼åä»£è¡¨è¯»å°æä»¶ç»å°¾)ã\n\nè¿åå¼ç±»å                                                     å¼å¸¸\nInputStream : InputStream containing the object\'s data.   å¼å¸¸åè¡¨ï¼\n                                                          InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                          NoResponseException : æå¡å¨æ ååºã\n                                                          IOException : è¿æ¥å¼å¸¸ã\n                                                          org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n                                                          ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n                                                          InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statObject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statObject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioClient.statObject("mybucket", "myobject");\n  // è·åæå®offsetålengthç"myobject"çè¾å¥æµã\n  InputStream stream = minioClient.getObject("mybucket", "myobject", 1024L, 4096L);\n  // è¯»åè¾å¥æµç´å°EOFå¹¶æå°å°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesRead;\n  while ((bytesRead = stream.read(buf, 0, buf.length)) >= 0) {\n    System.out.println(new String(buf, 0, bytesRead));\n  }\n  // å³é­æµã\n  stream.close();\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# getObject(String bucketName, String objectName, String fileName)\n\npublic void getObject(String bucketName, String objectName, String fileName)\n\n\nä¸è½½å¹¶å°æä»¶ä¿å­å°æ¬å°ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\nobjectName   String   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nfileName     String   File name.\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statObject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statObject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioClient.statObject("mybucket", "myobject");\n  // è·åmyobjectçæµå¹¶ä¿å­å°photo.jpgæä»¶ä¸­ã\n  minioClient.getObject("mybucket", "myobject", "photo.jpg");\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# getObject(String bucketName, String objectName, SecretKey key)\n\npublic CipherInputStream getObject(String bucketName, String objectName, SecretKey key)\n\n\nå¨ç»å®çå­å¨æ¡¶ä¸­è·åæ´ä¸ªå å¯å¯¹è±¡çæ°æ®ä½ä¸ºInputStreamï¼ç¶åç¨ä¼ å¥çmaster keyè§£å¯åå å¯å¯¹è±¡å³èçcontent keyãç¶ååå»ºä¸ä¸ªå«æInputStreamåCipherçCipherInputStreamãè¿ä¸ªCipherè¢«åå§ä¸ºç¨äºä½¿ç¨content keyè¿è¡è§£å¯ï¼æä»¥CipherInputStreamä¼å¨è¿åæ°æ®åï¼å°è¯è¯»åæ°æ®å¹¶è¿è¡è§£å¯ãæä»¥read()æ¹æ³è¿åçæ¯å¤çè¿çåå§å¯¹è±¡æ°æ®ã\n\nCipherInputStreamå¿é¡»ç¨å®å³é­ï¼å¦åè¿æ¥ä¸ä¼è¢«éæ¾ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å          æè¿°\nbucketName   String      å­å¨æ¡¶åç§°ã\nobjectName   String      å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nkey          SecretKey   SecretKeyç±»åçæ°æ®ã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n        InvalidEncryptionMetadataException : å å¯ç§é¥éè¯¯ã\n        BadPaddingException : éè¯¯çpadding\n        IllegalBlockSizeException : ä¸æ­£ç¡®çblock size\n        NoSuchPaddingException : éè¯¯çpadingç±»å\n        InvalidAlgorithmParameterException : è¯¥ç®æ³ä¸å­å¨\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statObject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statObject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioClient.statObject("mybucket", "myobject");\n  //çæ256ä½AES keyã\n  KeyGenerator symKeyGenerator = KeyGenerator.getInstance("AES");\n  symKeyGenerator.init(256);\n  SecretKey symKey = symKeyGenerator.generateKey();\n  // è·åå¯¹è±¡æ°æ®å¹¶ä¿å­å°photo.jpg\n  InputStream stream = minioClient.getObject("testbucket", "my-objectname", symKey);\n  // è¯»æµå°EOFï¼å¹¶è¾åºå°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesRead;\n  while ((bytesRead = stream.read(buf, 0, buf.length)) >= 0) {\n    System.out.println(new String(buf, 0, bytesRead, StandardCharsets.UTF_8));\n  }\n  // å³é­æµã\n  stream.close();\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# getObject(String bucketName, String objectName, KeyPair key)\n\npublic InputStream getObject(String bucketName, String objectName, KeyPair key)\n\n\nå¨ç»å®çå­å¨æ¡¶ä¸­è·åæ´ä¸ªå å¯å¯¹è±¡çæ°æ®ä½ä¸ºInputStreamï¼ç¶åç¨ä¼ å¥çmaster keyPairè§£å¯åå å¯å¯¹è±¡å³èçcontent keyãç¶ååå»ºä¸ä¸ªå«æInputStreamåCipherçCipherInputStreamãè¿ä¸ªCipherè¢«åå§ä¸ºç¨äºä½¿ç¨content keyè¿è¡è§£å¯ï¼æä»¥CipherInputStreamä¼å¨è¿åæ°æ®åï¼å°è¯è¯»åæ°æ®å¹¶è¿è¡è§£å¯ãæä»¥read()æ¹æ³è¿åçæ¯å¤çè¿çåå§å¯¹è±¡æ°æ®ã\n\nCipherInputStreamå¿é¡»ç¨å®å³é­ï¼å¦åè¿æ¥ä¸ä¼è¢«éæ¾ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketName   String    å­å¨æ¡¶åç§°ã\nobjectName   String    å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nkey          KeyPair   RSA KeyPairç±»åçå¯¹è±¡ã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n        InvalidEncryptionMetadataException : å å¯ç§é¥éè¯¯ã\n        BadPaddingException : éè¯¯çpadding\n        IllegalBlockSizeException : ä¸æ­£ç¡®çblock size\n        NoSuchPaddingException : éè¯¯çpadingç±»å\n        InvalidAlgorithmParameterException : è¯¥ç®æ³ä¸å­å¨\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statObject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statObject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioClient.statObject("mybucket", "myobject");\n  KeyPairGenerator keyGenerator = KeyPairGenerator.getInstance("RSA");\n  keyGenerator.initialize(1024, new SecureRandom());\n  KeyPair keypair = keyGenerator.generateKeyPair();\n  // è·åå¯¹è±¡æ°æ®å¹¶ä¿å­å°photo.jpg\n  InputStream stream = minioClient.getObject("testbucket", "my-objectname", keypair);\n  // è¯»æµå°EOFï¼å¹¶è¾åºå°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesRead;\n  while ((bytesRead = stream.read(buf, 0, buf.length)) >= 0) {\n    System.out.println(new String(buf, 0, bytesRead, StandardCharsets.UTF_8));\n  }\n  // å³é­æµã\n  stream.close();\n} catch (MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# putObject(String bucketName, String objectName, InputStream stream, long size, String contentType)\n\npublic void putObject(String bucketName, String objectName, InputStream stream, long size, String contentType)\n\n\néè¿InputStreamä¸ä¼ å¯¹è±¡ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°            ç±»å            æè¿°\nbucketName    String        å­å¨æ¡¶åç§°ã\nobjectName    String        å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nstream        InputStream   è¦ä¸ä¼ çæµã\nsize          long          è¦ä¸ä¼ çstreamçsize\ncontentType   String        Content typeã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\nåä¸ªå¯¹è±¡çæå¤§å¤§å°éå¶å¨5TBãputObjectå¨å¯¹è±¡å¤§äº5MiBæ¶ï¼èªå¨ä½¿ç¨multiple partsæ¹å¼ä¸ä¼ ãè¿æ ·ï¼å½ä¸ä¼ å¤±è´¥æ¶ï¼å®¢æ·ç«¯åªéè¦ä¸ä¼ æªæåçé¨åå³å¯ï¼ç±»ä¼¼æ­ç¹ä¸ä¼ ï¼ãä¸ä¼ çå¯¹è±¡ä½¿ç¨MD5SUMç­¾åè¿è¡å®æ´æ§éªè¯ã\n\ntry {\n  StringBuilder builder = new StringBuilder();\n  for (int i = 0; i < 1000; i++) {\n    builder.append("Sphinx of black quartz, judge my vow: Used by Adobe InDesign to display font samples. ");\n    builder.append("(29 letters)\\n");\n    builder.append("Jackdaws love my big sphinx of quartz: Similarly, used by Windows XP for some fonts. ");\n    builder.append("(31 letters)\\n");\n    builder.append("Pack my box with five dozen liquor jugs: According to Wikipedia, this one is used on ");\n    builder.append("NASAs Space Shuttle. (32 letters)\\n");\n    builder.append("The quick onyx goblin jumps over the lazy dwarf: Flavor text from an Unhinged Magic Card. ");\n    builder.append("(39 letters)\\n");\n    builder.append("How razorback-jumping frogs can level six piqued gymnasts!: Not going to win any brevity ");\n    builder.append("awards at 49 letters long, but old-time Mac users may recognize it.\\n");\n    builder.append("Cozy lummox gives smart squid who asks for job pen: A 41-letter tester sentence for Mac ");\n    builder.append("computers after System 7.\\n");\n    builder.append("A few others we like: Amazingly few discotheques provide jukeboxes; Now fax quiz Jack! my ");\n    builder.append("brave ghost pled; Watch Jeopardy!, Alex Trebeks fun TV quiz game.\\n");\n    builder.append("- --\\n");\n  }\n  ByteArrayInputStream bais = new\n  ByteArrayInputStream(builder.toString().getBytes("UTF-8"));\n  // åå»ºå¯¹è±¡\n  minioClient.putObject("mybucket", "myobject", bais, bais.available(), "application/octet-stream");\n  bais.close();\n  System.out.println("myobject is uploaded successfully");\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# putObject(String bucketName, String objectName, String fileName)\n\npublic void putObject(String bucketName, String objectName, String fileName)\n\n\néè¿æä»¶ä¸ä¼ å°å¯¹è±¡ä¸­ãæ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\nobjectName   String   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nfileName     String   File name.\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  minioClient.putObject("mybucket",  "island.jpg", "/mnt/photos/island.jpg")\n  System.out.println("island.jpg is uploaded successfully");\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# putObject(String bucketName, String objectName, InputStream stream, long size, String contentType, SecretKey key)\n\npublic void putObject(String bucketName, String objectName, InputStream stream, long size, String contentType,SecretKey key)\n\n\næ¿å°æµçæ°æ®ï¼ä½¿ç¨éæºçæçcontent keyè¿è¡å å¯ï¼å¹¶ä¸ä¼ å°æå®å­å¨æ¡¶ä¸­ãåæ¶å°å å¯åçcontent keyåivåä¸ºå å¯å¯¹è±¡æheaderä¹ä¸ä¼ å°å­å¨æ¡¶ä¸­ãcontent keyä½¿ç¨ä¼ å¥å°è¯¥æ¹æ³çmaster keyè¿è¡å å¯ã\n\nå¦æå¯¹è±¡å¤§äº5MB,å®¢æ·ç«¯ä¼èªå¨è¿è¡multi partä¸ä¼ ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°            ç±»å            æè¿°\nbucketName    String        å­å¨æ¡¶åç§°ã\nobjectName    String        å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nstream        InputStream   è¦ä¸ä¼ çæµã\nsize          long          è¦ä¸ä¼ çæµçå¤§å°ã\ncontentType   String        Content typeã\nkey           SecretKey     ç¨AESåä½¿åçå¯¹è±¡SecretKeyã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n        InvalidAlgorithmParameterException : éè¯¯çå å¯ç®æ³ã\n        BadPaddingException : ä¸æ­£ç¡®çpadding.\n        IllegalBlockSizeException : ä¸æ­£ç¡®çblockã\n        NoSuchPaddingException : éè¯¯çpaddingç±»åã\n\nç¤ºä¾\n\nå¯¹è±¡ä½¿ç¨éæºçæçkeyè¿è¡å å¯ï¼ç¶åè¿ä¸ªç¨äºå å¯æ°æ®çkeyåè¢«ç±ä»è¢«clientç¥éçmaster key(å°è£å¨encryptionMaterialså¯¹è±¡é)è¿è¡å å¯ãè¿ä¸ªè¢«å å¯åçkeyåIVåä¸ºå¯¹è±¡çheaderåå å¯åçå¯¹è±¡ä¸èµ·è¢«ä¸ä¼ å°å­å¨æå¡ä¸ã\n\ntry {\n  StringBuilder builder = new StringBuilder();\n  for (int i = 0; i < 1000; i++) {\n    builder.append("Sphinx of black quartz, judge my vow: Used by Adobe InDesign to display font samples. ");\n    builder.append("(29 letters)\\n");\n    builder.append("Jackdaws love my big sphinx of quartz: Similarly, used by Windows XP for some fonts. ");\n    builder.append("(31 letters)\\n");\n    builder.append("Pack my box with five dozen liquor jugs: According to Wikipedia, this one is used on ");\n    builder.append("NASAs Space Shuttle. (32 letters)\\n");\n    builder.append("The quick onyx goblin jumps over the lazy dwarf: Flavor text from an Unhinged Magic Card. ");\n    builder.append("(39 letters)\\n");\n    builder.append("How razorback-jumping frogs can level six piqued gymnasts!: Not going to win any brevity ");\n    builder.append("awards at 49 letters long, but old-time Mac users may recognize it.\\n");\n    builder.append("Cozy lummox gives smart squid who asks for job pen: A 41-letter tester sentence for Mac ");\n    builder.append("computers after System 7.\\n");\n    builder.append("A few others we like: Amazingly few discotheques provide jukeboxes; Now fax quiz Jack! my ");\n    builder.append("brave ghost pled; Watch Jeopardy!, Alex Trebeks fun TV quiz game.\\n");\n    builder.append("- --\\n");\n  }\n  ByteArrayInputStream bais = new\n  ByteArrayInputStream(builder.toString().getBytes("UTF-8"));\n  //çæ256ä½AES key.\n  KeyGenerator symKeyGenerator = KeyGenerator.getInstance("AES");\n  symKeyGenerator.init(256);\n  SecretKey symKey = symKeyGenerator.generateKey();\n  // åå»ºä¸ä¸ªå¯¹è±¡\n  minioClient.putObject("mybucket", "myobject", bais, bais.available(), "application/octet-stream", symKey);\n  bais.close();\n  System.out.println("myobject is uploaded successfully");\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# putObject(String bucketName, String objectName, InputStream stream, long size, String contentType, KeyPair key)\n\npublic void putObject(String bucketName, String objectName, InputStream stream, long size, String contentType,KeyPair key)\n\n\næ¿å°æµçæ°æ®ï¼ä½¿ç¨éæºçæçcontent keyè¿è¡å å¯ï¼å¹¶ä¸ä¼ å°æå®å­å¨æ¡¶ä¸­ãåæ¶å°å å¯åçcontent keyåivåä¸ºå å¯å¯¹è±¡æheaderä¹ä¸ä¼ å°å­å¨æ¡¶ä¸­ãcontent keyä½¿ç¨ä¼ å¥å°è¯¥æ¹æ³çmaster keyè¿è¡å å¯ã\n\nå¦æå¯¹è±¡å¤§äº5MB,å®¢æ·ç«¯ä¼èªå¨è¿è¡multi partä¸ä¼ ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°            ç±»å            æè¿°\nbucketName    String        å­å¨æ¡¶åç§°ã\nobjectName    String        å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nstream        InputStream   è¦ä¸ä¼ çæµã\nsize          long          è¦ä¸ä¼ çæµçå¤§å°ã\ncontentType   String        Content typeã\nkey           KeyPair       ä¸ä¸ªRSA KeyPairçå¯¹è±¡ã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n        InvalidAlgorithmParameterException : éè¯¯çå å¯ç®æ³ã\n        BadPaddingException : ä¸æ­£ç¡®çpaddingã\n        IllegalBlockSizeException : ä¸æ­£ç¡®çblockã\n        NoSuchPaddingException : éè¯¯çpadingç±»åã\n\nç¤ºä¾\n\nå¯¹è±¡ä½¿ç¨éæºçæçkeyè¿è¡å å¯ï¼ç¶åè¿ä¸ªç¨äºå å¯æ°æ®çkeyåè¢«ç±ä»è¢«clientç¥éçmaster key(å°è£å¨encryptionMaterialså¯¹è±¡é)è¿è¡å å¯ãè¿ä¸ªè¢«å å¯åçkeyåIVåä¸ºå¯¹è±¡çheaderåå å¯åçå¯¹è±¡ä¸èµ·è¢«ä¸ä¼ å°å­å¨æå¡ä¸ã\n\ntry {\n  StringBuilder builder = new StringBuilder();\n  for (int i = 0; i < 1000; i++) {\n    builder.append("Sphinx of black quartz, judge my vow: Used by Adobe InDesign to display font samples. ");\n    builder.append("(29 letters)\\n");\n    builder.append("Jackdaws love my big sphinx of quartz: Similarly, used by Windows XP for some fonts. ");\n    builder.append("(31 letters)\\n");\n    builder.append("Pack my box with five dozen liquor jugs: According to Wikipedia, this one is used on ");\n    builder.append("NASAs Space Shuttle. (32 letters)\\n");\n    builder.append("The quick onyx goblin jumps over the lazy dwarf: Flavor text from an Unhinged Magic Card. ");\n    builder.append("(39 letters)\\n");\n    builder.append("How razorback-jumping frogs can level six piqued gymnasts!: Not going to win any brevity ");\n    builder.append("awards at 49 letters long, but old-time Mac users may recognize it.\\n");\n    builder.append("Cozy lummox gives smart squid who asks for job pen: A 41-letter tester sentence for Mac ");\n    builder.append("computers after System 7.\\n");\n    builder.append("A few others we like: Amazingly few discotheques provide jukeboxes; Now fax quiz Jack! my ");\n    builder.append("brave ghost pled; Watch Jeopardy!, Alex Trebeks fun TV quiz game.\\n");\n    builder.append("- --\\n");\n  }\n  ByteArrayInputStream bais = new\n  ByteArrayInputStream(builder.toString().getBytes("UTF-8"));\n  KeyPairGenerator keyGenerator = KeyPairGenerator.getInstance("RSA");\n  keyGenerator.initialize(1024, new SecureRandom());\n  KeyPair keypair = keyGenerator.generateKeyPair();\n  // Create an object\n  minioClient.putObject("mybucket", "myobject", bais, bais.available(), "application/octet-stream", keypair);\n  bais.close();\n  System.out.println("myobject is uploaded successfully");\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# statObject(String bucketName, String objectName)\n\npublic ObjectStat statObject(String bucketName, String objectName)\n\nè·åå¯¹è±¡çåæ°æ®ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\nobjectName   String   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å                                     å¼å¸¸\nObjectStat: Populated object meta data.   å¼å¸¸åè¡¨ï¼\n                                          InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                          NoResponseException : æå¡å¨æ ååºã\n                                          IOException : è¿æ¥å¼å¸¸ã\n                                          org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n                                          ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n                                          InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è·å¾å¯¹è±¡çåæ°æ®ã\n  ObjectStat objectStat = minioClient.statObject("mybucket", "myobject");\n  System.out.println(objectStat);\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# copyObject(String bucketName, String objectName, String destBucketName, String destObjectName, CopyConditions cpConds, Map metadata)\n\npublic void copyObject(String bucketName, String objectName, String destBucketName, String destObjectName, CopyConditions cpConds, Map<String, String> metadata)\n\nä»objectNameæå®çå¯¹è±¡ä¸­å°æ°æ®æ·è´å°destObjectNameæå®çå¯¹è±¡ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°               ç±»å               æè¿°\nbucketName       String           æºå­å¨æ¡¶åç§°ã\nobjectName       String           æºå­å¨æ¡¶ä¸­çæºå¯¹è±¡åç§°ã\ndestBucketName   String           ç®æ å­å¨æ¡¶åç§°ã\ndestObjectName   String           è¦åå»ºçç®æ å¯¹è±¡åç§°,å¦æä¸ºç©ºï¼é»è®¤ä¸ºæºå¯¹è±¡åç§°ã\ncopyConditions   CopyConditions   æ·è´æä½çä¸äºæ¡ä»¶Mapã\nmetadata         Map              ç»ç®æ å¯¹è±¡çåæ°æ®Mapã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\næ¬APIæ§è¡äºä¸ä¸ªæå¡ç«¯çæ·è´æä½ã\n\ntry {\n  CopyConditions copyConditions = new CopyConditions();\n  copyConditions.setMatchETagNone("TestETag");\n  minioClient.copyObject("mybucket",  "island.jpg", "mydestbucket", "processed.png", copyConditions);\n  System.out.println("island.jpg is uploaded successfully");\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# removeObject(String bucketName, String objectName)\n\npublic void removeObject(String bucketName, String objectName)\n\n\nå é¤ä¸ä¸ªå¯¹è±¡ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\nobjectName   String   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n      // ä»mybucketä¸­å é¤myobjectã\n      minioClient.removeObject("mybucket", "myobject");\n      System.out.println("successfully removed mybucket/myobject");\n} catch (MinioException e) {\n      System.out.println("Error: " + e);\n}\n\n\n\n# removeObject(String bucketName, Iterable objectNames)\n\npublic Iterable<Result<DeleteError>> removeObject(String bucketName, Iterable<String> objectNames)\n\n\nå é¤å¤ä¸ªå¯¹è±¡ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°            ç±»å         æè¿°\nbucketName    String     å­å¨æ¡¶åç§°ã\nobjectNames   Iterable   å«æè¦å é¤çå¤ä¸ªobjectåç§°çè¿­ä»£å¨å¯¹è±¡ã\n\nè¿åå¼ç±»å                                                 å¼å¸¸\nIterable<Result<DeleteError>>:an iterator of Result   None\nDeleteError.\n\nç¤ºä¾\n\nList<String> objectNames = new LinkedList<String>();\nobjectNames.add("my-objectname1");\nobjectNames.add("my-objectname2");\nobjectNames.add("my-objectname3");\ntry {\n      // å é¤my-bucketnameéçå¤ä¸ªå¯¹è±¡\n      for (Result<DeleteError> errorResult: minioClient.removeObject("my-bucketname", objectNames)) {\n        DeleteError error = errorResult.get();\n        System.out.println("Failed to remove \'" + error.objectName() + "\'. Error:" + error.message());\n      }\n} catch (MinioException e) {\n      System.out.println("Error: " + e);\n}\n\n\n\n# removeIncompleteUpload(String bucketName, String objectName)\n\npublic void removeIncompleteUpload(String bucketName, String objectName)\n\n\nå é¤ä¸ä¸ªæªå®æ´ä¸ä¼ çå¯¹è±¡ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketName   String   å­å¨æ¡¶åç§°ã\nobjectName   String   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å   å¼å¸¸\nNone    å¼å¸¸åè¡¨ï¼\n        InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        NoResponseException : æå¡å¨æ ååºã\n        IOException : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.XmlPullParserException : è§£æè¿åçXMLå¼å¸¸ã\n        ErrorResponseException : æ§è¡å¤±è´¥å¼å¸¸ã\n        InternalException : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n    String url = minioClient.presignedGetObject("mybucket", "myobject", 60 * 60 * 24);\n    System.out.println(url);\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# 4. Presignedæä½\n\n\n# presignedGetObject(String bucketName, String objectName, Integer expires)\n\npublic String presignedGetObject(String bucketName, String objectName, Integer expires)\n\n\nçæä¸ä¸ªç»HTTP GETè¯·æ±ç¨çpresigned URLãæµè§å¨/ç§»å¨ç«¯çå®¢æ·ç«¯å¯ä»¥ç¨è¿ä¸ªURLè¿è¡ä¸è½½ï¼å³ä½¿å¶æå¨çå­å¨æ¡¶æ¯ç§æçãè¿ä¸ªpresigned URLå¯ä»¥è®¾ç½®ä¸ä¸ªå¤±ææ¶é´ï¼é»è®¤å¼æ¯7å¤©ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketName   String    å­å¨æ¡¶åç§°ã\nobjectName   String    å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nexpiry       Integer   å¤±ææ¶é´ï¼ä»¥ç§ä¸ºåä½ï¼ï¼é»è®¤æ¯7å¤©ï¼ä¸å¾å¤§äºä¸å¤©ã\n\nè¿åå¼ç±»å                                                  å¼å¸¸\nString : string contains URL to download the object.   å¼å¸¸åè¡¨ï¼\n                                                       InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                       InvalidKeyException : ä¸åæ³çaccess keyæèsecret keyã\n                                                       IOException : è¿æ¥å¼å¸¸ã\n                                                       NoSuchAlgorithmException : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n                                                       InvalidExpiresRangeException : presigned URLå·²ç»è¿æäºã\n\nç¤ºä¾\n\ntry {\n    String url = minioClient.presignedPutObject("mybucket", "myobject", 60 * 60 * 24);\n    System.out.println(url);\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# presignedPutObject(String bucketName, String objectName, Integer expires)\n\npublic String presignedPutObject(String bucketName, String objectName, Integer expires)\n\n\nçæä¸ä¸ªç»HTTP PUTè¯·æ±ç¨çpresigned URLãæµè§å¨/ç§»å¨ç«¯çå®¢æ·ç«¯å¯ä»¥ç¨è¿ä¸ªURLè¿è¡ä¸ä¼ ï¼å³ä½¿å¶æå¨çå­å¨æ¡¶æ¯ç§æçãè¿ä¸ªpresigned URLå¯ä»¥è®¾ç½®ä¸ä¸ªå¤±ææ¶é´ï¼é»è®¤å¼æ¯7å¤©ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketName   String    å­å¨æ¡¶åç§°ã\nobjectName   String    å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nexpiry       Integer   å¤±ææ¶é´ï¼ä»¥ç§ä¸ºåä½ï¼ï¼é»è®¤æ¯7å¤©ï¼ä¸å¾å¤§äºä¸å¤©ã\n\nè¿åå¼ç±»å                                                  å¼å¸¸\nString : string contains URL to download the object.   å¼å¸¸åè¡¨ï¼\n                                                       InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                       InvalidKeyException : ä¸åæ³çaccess keyæèsecret keyã\n                                                       IOException : è¿æ¥å¼å¸¸ã\n                                                       NoSuchAlgorithmException : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n                                                       InvalidExpiresRangeException : presigned URLå·²ç»è¿æäºã\n\nç¤ºä¾\n\ntry {\n    String url = minioClient.presignedPutObject("mybucket", "myobject", 60 * 60 * 24);\n    System.out.println(url);\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n}\n\n\n\n# presignedPostPolicy(PostPolicy policy)\n\npublic Map<String,String> presignedPostPolicy(PostPolicy policy)\n\n\nåè®¸ç»POSTè¯·æ±çpresigned URLè®¾ç½®ç­ç¥ï¼æ¯å¦æ¥æ¶å¯¹è±¡ä¸ä¼ çå­å¨æ¡¶åç§°çç­ç¥ï¼keyåç§°åç¼ï¼è¿æç­ç¥ã\n\næ¥ç Javadoc\n\nåæ°\n\nåæ°       ç±»å           æè¿°\npolicy   PostPolicy   å¯¹è±¡çpostç­ç¥\n\nè¿åå¼ç±»å                                         å¼å¸¸\nMap: Map of strings to construct form-data.   å¼å¸¸åè¡¨ï¼\n                                              InvalidBucketNameException : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                              InvalidKeyException : ä¸åæ³çaccess keyæèsecret keyã\n                                              IOException : è¿æ¥å¼å¸¸ã\n                                              NoSuchAlgorithmException : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n\nç¤ºä¾\n\ntry {\n    PostPolicy policy = new PostPolicy("mybucket", "myobject",\n  DateTime.now().plusDays(7));\n    policy.setContentType("image/png");\n    Map<String,String> formData = minioClient.presignedPostPolicy(policy);\n    System.out.print("curl -X POST ");\n    for (Map.Entry<String,String> entry : formData.entrySet()) {\n    System.out.print(" -F " + entry.getKey() + "=" + entry.getValue());\n    }\n    System.out.println(" -F file=@/tmp/userpic.png  https://play.minio.io:9000/mybucket");\n} catch(MinioException e) {\n  System.out.println("Error occurred: " + e);\n\n\n\n# 5. äºè§£æ´å¤\n\n * åå»ºå±äºä½ çç§çAPIæå¡ç¤ºä¾\n * [å®æ´çJavaDoc](',normalizedContent:'# java client apiåèææ¡£\n\n\n# åå§åminio client objectã\n\n\n# minio\n\nminioclient minioclient = new minioclient("https://play.minio.io:9000", "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg");\n\n\n\n# aws s3\n\nminioclient s3client = new minioclient("https://s3.amazonaws.com", "your-accesskeyid", "your-secretaccesskey");\n\n\nå­å¨æ¡¶æä½                   æä»¶å¯¹è±¡æä½                   presignedæä½           å­å¨æ¡¶ç­ç¥\nmakebucket              getobject                presignedgetobject    getbucketpolicy\nlistbuckets             putobject                presignedputobject    setbucketpolicy\nbucketexists            copyobject               presignedpostpolicy   \nremovebucket            statobject                                     \nlistobjects             removeobject                                   \nlistincompleteuploads   removeincompleteupload                         \n\n\n# 1. æé å½æ°\n\n\npublic minioclient(string endpoint) throws\nnullpointerexception, invalidendpointexception,\ninvalidportexception\nä½¿ç¨ç»å®çendpointä»¥åå¿åæ¹å¼åå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(url url) throws nullpointerexception,\ninvalidendpointexception, invalidportexception\nä½¿ç¨ç»å®çurlä»¥åå¿åæ¹å¼åå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(com.squareup.okhttp.httpurl url) throws\nnullpointerexception, invalidendpointexception,\ninvalidportexception\nä½¿ç¨ç»å®çhttpurlä»¥åå¿åæ¹å¼åå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(string endpoint, string accesskey, string\nsecretkey) throws nullpointerexception,\ninvalidendpointexception, invalidportexception\nä½¿ç¨ç»å®çendpointãaccess keyåsecret keyåå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(string endpoint, int port, string\naccesskey, string secretkey) throws nullpointerexception,\ninvalidendpointexception, invalidportexception\nä½¿ç¨ç»å®çendpointãportãaccess keyåsecret keyåå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(string endpoint, string accesskey, string\nsecretkey, boolean secure) throws nullpointerexception,\ninvalidendpointexception, invalidportexception\nä½¿ç¨ç»å®çendpointãaccess keyãsecret\nkeyåä¸ä¸ªsecureéé¡¹ï¼æ¯å¦ä½¿ç¨httpsï¼åå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(string endpoint, int port, string\naccesskey, string secretkey, boolean secure) throws\nnullpointerexception, invalidendpointexception,\ninvalidportexception\nä½¿ç¨ç»å®çendpointãportãaccess keyãsecret\nkeyåä¸ä¸ªsecureéé¡¹ï¼æ¯å¦ä½¿ç¨httpsï¼åå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(com.squareup.okhttp.httpurl url, string\naccesskey, string secretkey) throws nullpointerexception,\ninvalidendpointexception, invalidportexception\nä½¿ç¨ç»å®çhttpurlå¯¹è±¡ãaccess keyãsecret keyåå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\n\npublic minioclient(url url, string accesskey, string\nsecretkey) throws nullpointerexception,\ninvalidendpointexception, invalidportexception\nä½¿ç¨ç»å®çurlå¯¹è±¡ãaccess keyãsecret keyåå»ºä¸ä¸ªminio clientå¯¹è±¡ã\næ¥ç javadoc\n\nåæ°\n\nåæ°          ç±»å        æè¿°\nendpoint    string    endpointæ¯ä¸ä¸ªurlï¼ååï¼ipv4æèipv6å°åãä»¥ä¸æ¯åæ³çendpoints:\n                      https://s3.amazonaws.com\n                      https://play.minio.io:9000\n                      localhost\n                      play.minio.io\nport        int       tcp/ipç«¯å£å·ãå¯éï¼é»è®¤å¼æ¯ï¼å¦ææ¯http,åé»è®¤80ç«¯å£ï¼å¦ææ¯https,åé»è®¤æ¯443ç«¯å£ã\naccesskey   string    accesskeyç±»ä¼¼äºç¨æ·idï¼ç¨äºå¯ä¸æ è¯ä½ çè´¦æ·ã\nsecretkey   string    secretkeyæ¯ä½ è´¦æ·çå¯ç ã\nsecure      boolean   å¦ææ¯trueï¼åç¨çæ¯httpsèä¸æ¯http,é»è®¤å¼æ¯trueã\nurl         url       endpoint urlå¯¹è±¡ã\nurl         httpurl   endpoint httpurlå¯¹è±¡ã\n\nç¤ºä¾\n\n\n# minio\n\n// 1. public minioclient(string endpoint)\nminioclient minioclient = new minioclient("https://play.minio.io:9000");\n// 2. public minioclient(url url)\nminioclient minioclient = new minioclient(new url("https://play.minio.io:9000"));\n// 3. public minioclient(com.squareup.okhttp.httpurl url)\n minioclient minioclient = new minioclient(new httpurl.parse("https://play.minio.io:9000"));\n// 4. public minioclient(string endpoint, string accesskey, string secretkey)\nminioclient minioclient = new minioclient("https://play.minio.io:9000", "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg");\n// 5. public minioclient(string endpoint, int port,  string accesskey, string secretkey)\nminioclient minioclient = new minioclient("https://play.minio.io", 9000, "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg");\n// 6. public minioclient(string endpoint, string accesskey, string secretkey, boolean insecure)\nminioclient minioclient = new minioclient("https://play.minio.io:9000", "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg", true);\n// 7. public minioclient(string endpoint, int port,  string accesskey, string secretkey, boolean insecure)\nminioclient minioclient = new minioclient("https://play.minio.io", 9000, "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg", true);\n// 8. public minioclient(com.squareup.okhttp.httpurl url, string accesskey, string secretkey)\n minioclient minioclient = new minioclient(new url("https://play.minio.io:9000"), "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg");\n// 9. public minioclient(url url, string accesskey, string secretkey)\nminioclient minioclient = new minioclient(httpurl.parse("https://play.minio.io:9000"), "q3am3uq867spqqa43p2f", "zuf+tfteslswru7bj86wekitnifilbzam1kyy3tg");\n\n\n\n# aws s3\n\n// 1. public minioclient(string endpoint)\nminioclient s3client = new minioclient("https://s3.amazonaws.com");\n// 2. public minioclient(url url)\nminioclient minioclient = new minioclient(new url("https://s3.amazonaws.com"));\n// 3. public minioclient(com.squareup.okhttp.httpurl url)\n minioclient s3client = new minioclient(new httpurl.parse("https://s3.amazonaws.com"));\n// 4. public minioclient(string endpoint, string accesskey, string secretkey)\nminioclient s3client = new minioclient("s3.amazonaws.com", "your-accesskeyid", "your-secretaccesskey");\n// 5. public minioclient(string endpoint, int port,  string accesskey, string secretkey)\nminioclient s3client = new minioclient("s3.amazonaws.com", 80, "your-accesskeyid", "your-secretaccesskey");\n// 6. public minioclient(string endpoint, string accesskey, string secretkey, boolean insecure)\nminioclient s3client = new minioclient("s3.amazonaws.com", "your-accesskeyid", "your-secretaccesskey", false);\n// 7. public minioclient(string endpoint, int port,  string accesskey, string secretkey, boolean insecure)\nminioclient s3client = new minioclient("s3.amazonaws.com", 80, "your-accesskeyid", "your-secretaccesskey",false);\n// 8. public minioclient(com.squareup.okhttp.httpurl url, string accesskey, string secretkey)\n minioclient s3client = new minioclient(new url("s3.amazonaws.com"), "your-accesskeyid", "your-secretaccesskey");\n// 9. public minioclient(url url, string accesskey, string secretkey)\nminioclient s3client = new minioclient(httpurl.parse("s3.amazonaws.com"), "your-accesskeyid", "your-secretaccesskey");\n\n\n\n# 2. å­å¨æ¡¶æä½\n\n\n# makebucket(string bucketname)\n\npublic void makebucket(string bucketname)\n\n\nåå»ºä¸ä¸ªæ°çå­å¨æ¡¶\n\næ¥çjavadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨:\n        invalidbucketnameexception : éæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸\n        errorresponseexception : æ§è¡å¤±è´¥\n        internalexception : åé¨å¼å¸¸\n\nç¤ºä¾\n\ntry {\n  // å¦å­å¨æ¡¶ä¸å­å¨ï¼åå»ºä¹ã\n  boolean found = minioclient.bucketexists("mybucket");\n  if (found) {\n    system.out.println("mybucket already exists");\n  } else {\n    // åå»ºåä¸º\'my-bucketname\'çå­å¨æ¡¶ã\n    minioclient.makebucket("mybucket");\n    system.out.println("mybucket is created successfully");\n  }\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# listbuckets()\n\npublic list<bucket> listbuckets()\n\n\nååºææå­å¨æ¡¶ã\n\næ¥çjavadoc\n\nè¿åå¼ç±»å                                å¼å¸¸\nlist bucket : list of bucket type.   å¼å¸¸åè¡¨ï¼\n                                     noresponseexception : æå¡ç«¯æ ååº\n                                     ioexception : è¿æ¥å¼å¸¸\n                                     org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸\n                                     errorresponseexception :æ§è¡å¤±è´¥å¼æº\n                                     internalexception : åé¨éè¯¯\n\nç¤ºä¾\n\ntry {\n  // ååºææå­å¨æ¡¶\n  list<bucket> bucketlist = minioclient.listbuckets();\n  for (bucket bucket : bucketlist) {\n    system.out.println(bucket.creationdate() + ", " + bucket.name());\n  }\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# bucketexists(string bucketname)\n\npublic boolean bucketexists(string bucketname)\n\n\næ£æ¥å­å¨æ¡¶æ¯å¦å­å¨ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°\n\nè¿åå¼å¼ç±»å                               å¼å¸¸\nboolean: true if the bucket exists   å¼å¸¸åè¡¨ï¼\n                                     invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                     noresponseexception : æå¡å¨æ ååºã\n                                     ioexception : è¿æ¥å¼å¸¸ã\n                                     org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n                                     errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n                                     internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // æ£æ¥\'my-bucketname\'æ¯å¦å­å¨ã\n  boolean found = minioclient.bucketexists("mybucket");\n  if (found) {\n    system.out.println("mybucket exists");\n  } else {\n    system.out.println("mybucket does not exist");\n  }\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# removebucket(string bucketname)\n\npublic void removebucket(string bucketname)\n\n\nå é¤ä¸ä¸ªå­å¨æ¡¶ã\n\næ¥ç javadoc\n\næ³¨æ: - removebucketä¸ä¼å é¤å­å¨æ¡¶éçå¯¹è±¡ï¼ä½ éè¦éè¿removeobject apiæ¥å é¤å®ä»¬ã\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // å é¤ä¹ååæ£æ¥`my-bucket`æ¯å¦å­å¨ã\n  boolean found = minioclient.bucketexists("mybucket");\n  if (found) {\n    // å é¤`my-bucketname`å­å¨æ¡¶ï¼æ³¨æï¼åªæå­å¨æ¡¶ä¸ºç©ºæ¶æè½å é¤æåã\n    minioclient.removebucket("mybucket");\n    system.out.println("mybucket is removed successfully");\n  } else {\n    system.out.println("mybucket does not exist");\n  }\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# listobjects(string bucketname, string prefix, boolean recursive, boolean useversion1)\n\npublic iterable<result<item>> listobjects(string bucketname, string prefix, boolean recursive, boolean useversion1)\n\n\nååºæä¸ªå­å¨æ¡¶ä¸­çææå¯¹è±¡ã\n\næ¥çjavadoc\n\nåæ°\n\nåæ°            ç±»å        æè¿°\nbucketname    string    å­å¨æ¡¶åç§°ã\nprefix        string    å¯¹è±¡åç§°çåç¼\nrecursive     boolean   æ¯å¦éå½æ¥æ¾ï¼å¦ææ¯false,å°±æ¨¡ææä»¶å¤¹ç»ææ¥æ¾ã\nuseversion1   boolean   å¦ææ¯true, ä½¿ç¨çæ¬1 rest api\n\nè¿åå¼ç±»å                                                 å¼å¸¸\niterable<result<item>>:an iterator of result items.   none\n\nç¤ºä¾\n\ntry {\n  // æ£æ¥\'mybucket\'æ¯å¦å­å¨ã\n  boolean found = minioclient.bucketexists("mybucket");\n  if (found) {\n    // ååº\'my-bucketname\'éçå¯¹è±¡\n    iterable<result<item>> myobjects = minioclient.listobjects("mybucket");\n    for (result<item> result : myobjects) {\n      item item = result.get();\n      system.out.println(item.lastmodified() + ", " + item.size() + ", " + item.objectname());\n    }\n  } else {\n    system.out.println("mybucket does not exist");\n  }\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# listincompleteuploads(string bucketname, string prefix, boolean recursive)\n\npublic iterable<result<upload>> listincompleteuploads(string bucketname, string prefix, boolean recursive)\n\n\nååºå­å¨æ¡¶ä¸­è¢«é¨åä¸ä¼ çå¯¹è±¡ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketname   string    å­å¨æ¡¶åç§°ã\nprefix       string    å¯¹è±¡åç§°çåç¼ï¼ååºæè¯¥åç¼çå¯¹è±¡\nrecursive    boolean   æ¯å¦éå½æ¥æ¾ï¼å¦ææ¯false,å°±æ¨¡ææä»¶å¤¹ç»ææ¥æ¾ã\n\nè¿åå¼ç±»å                                              å¼å¸¸\niterable<result<upload>>: an iterator of upload.   none\n\nç¤ºä¾\n\ntry {\n  // æ£æ¥\'mybucket\'æ¯å¦å­å¨ã\n  boolean found = minioclient.bucketexists("mybucket");\n  if (found) {\n    // ååº\'mybucket\'ä¸­æææªå®æçmultipartä¸ä¼ ççå¯¹è±¡ã \n    iterable<result<upload>> myobjects = minioclient.listincompleteuploads("mybucket");\n    for (result<upload> result : myobjects) {\n      upload upload = result.get();\n      system.out.println(upload.uploadid() + ", " + upload.objectname());\n    }\n  } else {\n    system.out.println("mybucket does not exist");\n  }\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# getbucketpolicy(string bucketname, string objectprefix)\n\npublic policytype getbucketpolicy(string bucketname, string objectprefix)\n\n\nè·å¾æå®å¯¹è±¡åç¼çå­å¨æ¡¶ç­ç¥ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°             ç±»å       æè¿°\nbucketname     string   å­å¨æ¡¶åç§°ã\nobjectprefix   string   ç­ç¥éç¨çå¯¹è±¡çåç¼\n\nè¿åå¼ç±»å                                                    å¼å¸¸\npolicytype: the current bucket policy type for a given   å¼å¸¸åè¡¨ï¼\nbucket and objectprefix.\n                                                         invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                         noresponseexception : æå¡å¨æ ååºã\n                                                         ioexception : è¿æ¥å¼å¸¸ã\n                                                         org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n                                                         errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n                                                         internalexception : åé¨éè¯¯ã\n                                                         invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                         invalidobjectprefixexception : ä¸åæ³çå¯¹è±¡åç¼\n                                                         nosuchalgorithmexception : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n                                                         insufficientdataexception : å¨è¯»å°ç¸åºlengthä¹åå°±å¾å°ä¸ä¸ªeofexceptionã\n\nç¤ºä¾\n\ntry {\n  system.out.println("current policy: " + minioclient.getbucketpolicy("mybucket", "downloads"));\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# setbucketpolicy(string bucketname, string objectprefix, policytype policy)\n\npublic void setbucketpolicy(string bucketname, string objectprefix, policytype policy)\n\n\nç»ä¸ä¸ªå­å¨æ¡¶+å¯¹è±¡åç¼è®¾ç½®ç­ç¥ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°             ç±»å           æè¿°\nbucketname     string       å­å¨æ¡¶åç§°ã\nobjectprefix   string       å¯¹è±¡åç¼ã\npolicy         policytype   è¦èµäºçç­ç¥ï¼å¯éå¼æ[policytype.none, policytype.read_only,\n                            policytype.read_write, policytype.write_only].\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        invalidobjectprefixexception : ä¸åæ³çå¯¹è±¡åç¼\n        nosuchalgorithmexception : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n        insufficientdataexception : å¨è¯»å°ç¸åºlengthä¹åå°±å¾å°ä¸ä¸ªeofexceptionã\n\nç¤ºä¾\n\ntry {\n  minioclient.setbucketpolicy("mybucket", "uploads", policytype.read_only);\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# 3. object operations\n\n\n# getobject(string bucketname, string objectname)\n\npublic inputstream getobject(string bucketname, string objectname, long offset)\n\n\nä»¥æµçå½¢å¼ä¸è½½ä¸ä¸ªå¯¹è±¡ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\nobjectname   string   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å                                                  å¼å¸¸\ninputstream: inputstream containing the object data.   å¼å¸¸åè¡¨ï¼\n                                                       invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                       noresponseexception : æå¡å¨æ ååºã\n                                                       ioexception : è¿æ¥å¼å¸¸ã\n                                                       org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n                                                       errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n                                                       internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statobject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statobject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioclient.statobject("mybucket", "myobject");\n  // è·å"myobject"çè¾å¥æµã\n  inputstream stream = minioclient.getobject("mybucket", "myobject");\n  // è¯»åè¾å¥æµç´å°eofå¹¶æå°å°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesread;\n  while ((bytesread = stream.read(buf, 0, buf.length)) >= 0) {\n    system.out.println(new string(buf, 0, bytesread));\n  }\n  // å³é­æµï¼æ­¤å¤ä¸ºç¤ºä¾ï¼æµå³é­æå¥½æ¾å¨finallyåã\n  stream.close();\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# getobject(string bucketname, string objectname, long offset, long length)\n\npublic inputstream getobject(string bucketname, string objectname, long offset, long length)\n\n\nä¸è½½å¯¹è±¡æå®åºåçå­èæ°ç»åä¸ºæµãï¼æ­ç¹ä¸è½½ï¼\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\nobjectname   string   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\noffset       long     offset æ¯èµ·å§å­èçä½ç½®\nlength       long     lengthæ¯è¦è¯»åçé¿åº¦ (å¯éï¼å¦ææ å¼åä»£è¡¨è¯»å°æä»¶ç»å°¾)ã\n\nè¿åå¼ç±»å                                                     å¼å¸¸\ninputstream : inputstream containing the object\'s data.   å¼å¸¸åè¡¨ï¼\n                                                          invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                          noresponseexception : æå¡å¨æ ååºã\n                                                          ioexception : è¿æ¥å¼å¸¸ã\n                                                          org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n                                                          errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n                                                          internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statobject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statobject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioclient.statobject("mybucket", "myobject");\n  // è·åæå®offsetålengthç"myobject"çè¾å¥æµã\n  inputstream stream = minioclient.getobject("mybucket", "myobject", 1024l, 4096l);\n  // è¯»åè¾å¥æµç´å°eofå¹¶æå°å°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesread;\n  while ((bytesread = stream.read(buf, 0, buf.length)) >= 0) {\n    system.out.println(new string(buf, 0, bytesread));\n  }\n  // å³é­æµã\n  stream.close();\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# getobject(string bucketname, string objectname, string filename)\n\npublic void getobject(string bucketname, string objectname, string filename)\n\n\nä¸è½½å¹¶å°æä»¶ä¿å­å°æ¬å°ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\nobjectname   string   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nfilename     string   file name.\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statobject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statobject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioclient.statobject("mybucket", "myobject");\n  // è·åmyobjectçæµå¹¶ä¿å­å°photo.jpgæä»¶ä¸­ã\n  minioclient.getobject("mybucket", "myobject", "photo.jpg");\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# getobject(string bucketname, string objectname, secretkey key)\n\npublic cipherinputstream getobject(string bucketname, string objectname, secretkey key)\n\n\nå¨ç»å®çå­å¨æ¡¶ä¸­è·åæ´ä¸ªå å¯å¯¹è±¡çæ°æ®ä½ä¸ºinputstreamï¼ç¶åç¨ä¼ å¥çmaster keyè§£å¯åå å¯å¯¹è±¡å³èçcontent keyãç¶ååå»ºä¸ä¸ªå«æinputstreamåcipherçcipherinputstreamãè¿ä¸ªcipherè¢«åå§ä¸ºç¨äºä½¿ç¨content keyè¿è¡è§£å¯ï¼æä»¥cipherinputstreamä¼å¨è¿åæ°æ®åï¼å°è¯è¯»åæ°æ®å¹¶è¿è¡è§£å¯ãæä»¥read()æ¹æ³è¿åçæ¯å¤çè¿çåå§å¯¹è±¡æ°æ®ã\n\ncipherinputstreamå¿é¡»ç¨å®å³é­ï¼å¦åè¿æ¥ä¸ä¼è¢«éæ¾ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å          æè¿°\nbucketname   string      å­å¨æ¡¶åç§°ã\nobjectname   string      å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nkey          secretkey   secretkeyç±»åçæ°æ®ã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n        invalidencryptionmetadataexception : å å¯ç§é¥éè¯¯ã\n        badpaddingexception : éè¯¯çpadding\n        illegalblocksizeexception : ä¸æ­£ç¡®çblock size\n        nosuchpaddingexception : éè¯¯çpadingç±»å\n        invalidalgorithmparameterexception : è¯¥ç®æ³ä¸å­å¨\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statobject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statobject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioclient.statobject("mybucket", "myobject");\n  //çæ256ä½aes keyã\n  keygenerator symkeygenerator = keygenerator.getinstance("aes");\n  symkeygenerator.init(256);\n  secretkey symkey = symkeygenerator.generatekey();\n  // è·åå¯¹è±¡æ°æ®å¹¶ä¿å­å°photo.jpg\n  inputstream stream = minioclient.getobject("testbucket", "my-objectname", symkey);\n  // è¯»æµå°eofï¼å¹¶è¾åºå°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesread;\n  while ((bytesread = stream.read(buf, 0, buf.length)) >= 0) {\n    system.out.println(new string(buf, 0, bytesread, standardcharsets.utf_8));\n  }\n  // å³é­æµã\n  stream.close();\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# getobject(string bucketname, string objectname, keypair key)\n\npublic inputstream getobject(string bucketname, string objectname, keypair key)\n\n\nå¨ç»å®çå­å¨æ¡¶ä¸­è·åæ´ä¸ªå å¯å¯¹è±¡çæ°æ®ä½ä¸ºinputstreamï¼ç¶åç¨ä¼ å¥çmaster keypairè§£å¯åå å¯å¯¹è±¡å³èçcontent keyãç¶ååå»ºä¸ä¸ªå«æinputstreamåcipherçcipherinputstreamãè¿ä¸ªcipherè¢«åå§ä¸ºç¨äºä½¿ç¨content keyè¿è¡è§£å¯ï¼æä»¥cipherinputstreamä¼å¨è¿åæ°æ®åï¼å°è¯è¯»åæ°æ®å¹¶è¿è¡è§£å¯ãæä»¥read()æ¹æ³è¿åçæ¯å¤çè¿çåå§å¯¹è±¡æ°æ®ã\n\ncipherinputstreamå¿é¡»ç¨å®å³é­ï¼å¦åè¿æ¥ä¸ä¼è¢«éæ¾ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketname   string    å­å¨æ¡¶åç§°ã\nobjectname   string    å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nkey          keypair   rsa keypairç±»åçå¯¹è±¡ã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n        invalidencryptionmetadataexception : å å¯ç§é¥éè¯¯ã\n        badpaddingexception : éè¯¯çpadding\n        illegalblocksizeexception : ä¸æ­£ç¡®çblock size\n        nosuchpaddingexception : éè¯¯çpadingç±»å\n        invalidalgorithmparameterexception : è¯¥ç®æ³ä¸å­å¨\n\nç¤ºä¾\n\ntry {\n  // è°ç¨statobject()æ¥å¤æ­å¯¹è±¡æ¯å¦å­å¨ã\n  // å¦æä¸å­å¨, statobject()æåºå¼å¸¸,\n  // å¦ååä»£è¡¨å¯¹è±¡å­å¨ã\n  minioclient.statobject("mybucket", "myobject");\n  keypairgenerator keygenerator = keypairgenerator.getinstance("rsa");\n  keygenerator.initialize(1024, new securerandom());\n  keypair keypair = keygenerator.generatekeypair();\n  // è·åå¯¹è±¡æ°æ®å¹¶ä¿å­å°photo.jpg\n  inputstream stream = minioclient.getobject("testbucket", "my-objectname", keypair);\n  // è¯»æµå°eofï¼å¹¶è¾åºå°æ§å¶å°ã\n  byte[] buf = new byte[16384];\n  int bytesread;\n  while ((bytesread = stream.read(buf, 0, buf.length)) >= 0) {\n    system.out.println(new string(buf, 0, bytesread, standardcharsets.utf_8));\n  }\n  // å³é­æµã\n  stream.close();\n} catch (minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype)\n\npublic void putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype)\n\n\néè¿inputstreamä¸ä¼ å¯¹è±¡ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°            ç±»å            æè¿°\nbucketname    string        å­å¨æ¡¶åç§°ã\nobjectname    string        å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nstream        inputstream   è¦ä¸ä¼ çæµã\nsize          long          è¦ä¸ä¼ çstreamçsize\ncontenttype   string        content typeã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\nåä¸ªå¯¹è±¡çæå¤§å¤§å°éå¶å¨5tbãputobjectå¨å¯¹è±¡å¤§äº5mibæ¶ï¼èªå¨ä½¿ç¨multiple partsæ¹å¼ä¸ä¼ ãè¿æ ·ï¼å½ä¸ä¼ å¤±è´¥æ¶ï¼å®¢æ·ç«¯åªéè¦ä¸ä¼ æªæåçé¨åå³å¯ï¼ç±»ä¼¼æ­ç¹ä¸ä¼ ï¼ãä¸ä¼ çå¯¹è±¡ä½¿ç¨md5sumç­¾åè¿è¡å®æ´æ§éªè¯ã\n\ntry {\n  stringbuilder builder = new stringbuilder();\n  for (int i = 0; i < 1000; i++) {\n    builder.append("sphinx of black quartz, judge my vow: used by adobe indesign to display font samples. ");\n    builder.append("(29 letters)\\n");\n    builder.append("jackdaws love my big sphinx of quartz: similarly, used by windows xp for some fonts. ");\n    builder.append("(31 letters)\\n");\n    builder.append("pack my box with five dozen liquor jugs: according to wikipedia, this one is used on ");\n    builder.append("nasas space shuttle. (32 letters)\\n");\n    builder.append("the quick onyx goblin jumps over the lazy dwarf: flavor text from an unhinged magic card. ");\n    builder.append("(39 letters)\\n");\n    builder.append("how razorback-jumping frogs can level six piqued gymnasts!: not going to win any brevity ");\n    builder.append("awards at 49 letters long, but old-time mac users may recognize it.\\n");\n    builder.append("cozy lummox gives smart squid who asks for job pen: a 41-letter tester sentence for mac ");\n    builder.append("computers after system 7.\\n");\n    builder.append("a few others we like: amazingly few discotheques provide jukeboxes; now fax quiz jack! my ");\n    builder.append("brave ghost pled; watch jeopardy!, alex trebeks fun tv quiz game.\\n");\n    builder.append("- --\\n");\n  }\n  bytearrayinputstream bais = new\n  bytearrayinputstream(builder.tostring().getbytes("utf-8"));\n  // åå»ºå¯¹è±¡\n  minioclient.putobject("mybucket", "myobject", bais, bais.available(), "application/octet-stream");\n  bais.close();\n  system.out.println("myobject is uploaded successfully");\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# putobject(string bucketname, string objectname, string filename)\n\npublic void putobject(string bucketname, string objectname, string filename)\n\n\néè¿æä»¶ä¸ä¼ å°å¯¹è±¡ä¸­ãæ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\nobjectname   string   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nfilename     string   file name.\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  minioclient.putobject("mybucket",  "island.jpg", "/mnt/photos/island.jpg")\n  system.out.println("island.jpg is uploaded successfully");\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype, secretkey key)\n\npublic void putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype,secretkey key)\n\n\næ¿å°æµçæ°æ®ï¼ä½¿ç¨éæºçæçcontent keyè¿è¡å å¯ï¼å¹¶ä¸ä¼ å°æå®å­å¨æ¡¶ä¸­ãåæ¶å°å å¯åçcontent keyåivåä¸ºå å¯å¯¹è±¡æheaderä¹ä¸ä¼ å°å­å¨æ¡¶ä¸­ãcontent keyä½¿ç¨ä¼ å¥å°è¯¥æ¹æ³çmaster keyè¿è¡å å¯ã\n\nå¦æå¯¹è±¡å¤§äº5mb,å®¢æ·ç«¯ä¼èªå¨è¿è¡multi partä¸ä¼ ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°            ç±»å            æè¿°\nbucketname    string        å­å¨æ¡¶åç§°ã\nobjectname    string        å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nstream        inputstream   è¦ä¸ä¼ çæµã\nsize          long          è¦ä¸ä¼ çæµçå¤§å°ã\ncontenttype   string        content typeã\nkey           secretkey     ç¨aesåä½¿åçå¯¹è±¡secretkeyã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n        invalidalgorithmparameterexception : éè¯¯çå å¯ç®æ³ã\n        badpaddingexception : ä¸æ­£ç¡®çpadding.\n        illegalblocksizeexception : ä¸æ­£ç¡®çblockã\n        nosuchpaddingexception : éè¯¯çpaddingç±»åã\n\nç¤ºä¾\n\nå¯¹è±¡ä½¿ç¨éæºçæçkeyè¿è¡å å¯ï¼ç¶åè¿ä¸ªç¨äºå å¯æ°æ®çkeyåè¢«ç±ä»è¢«clientç¥éçmaster key(å°è£å¨encryptionmaterialså¯¹è±¡é)è¿è¡å å¯ãè¿ä¸ªè¢«å å¯åçkeyåivåä¸ºå¯¹è±¡çheaderåå å¯åçå¯¹è±¡ä¸èµ·è¢«ä¸ä¼ å°å­å¨æå¡ä¸ã\n\ntry {\n  stringbuilder builder = new stringbuilder();\n  for (int i = 0; i < 1000; i++) {\n    builder.append("sphinx of black quartz, judge my vow: used by adobe indesign to display font samples. ");\n    builder.append("(29 letters)\\n");\n    builder.append("jackdaws love my big sphinx of quartz: similarly, used by windows xp for some fonts. ");\n    builder.append("(31 letters)\\n");\n    builder.append("pack my box with five dozen liquor jugs: according to wikipedia, this one is used on ");\n    builder.append("nasas space shuttle. (32 letters)\\n");\n    builder.append("the quick onyx goblin jumps over the lazy dwarf: flavor text from an unhinged magic card. ");\n    builder.append("(39 letters)\\n");\n    builder.append("how razorback-jumping frogs can level six piqued gymnasts!: not going to win any brevity ");\n    builder.append("awards at 49 letters long, but old-time mac users may recognize it.\\n");\n    builder.append("cozy lummox gives smart squid who asks for job pen: a 41-letter tester sentence for mac ");\n    builder.append("computers after system 7.\\n");\n    builder.append("a few others we like: amazingly few discotheques provide jukeboxes; now fax quiz jack! my ");\n    builder.append("brave ghost pled; watch jeopardy!, alex trebeks fun tv quiz game.\\n");\n    builder.append("- --\\n");\n  }\n  bytearrayinputstream bais = new\n  bytearrayinputstream(builder.tostring().getbytes("utf-8"));\n  //çæ256ä½aes key.\n  keygenerator symkeygenerator = keygenerator.getinstance("aes");\n  symkeygenerator.init(256);\n  secretkey symkey = symkeygenerator.generatekey();\n  // åå»ºä¸ä¸ªå¯¹è±¡\n  minioclient.putobject("mybucket", "myobject", bais, bais.available(), "application/octet-stream", symkey);\n  bais.close();\n  system.out.println("myobject is uploaded successfully");\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype, keypair key)\n\npublic void putobject(string bucketname, string objectname, inputstream stream, long size, string contenttype,keypair key)\n\n\næ¿å°æµçæ°æ®ï¼ä½¿ç¨éæºçæçcontent keyè¿è¡å å¯ï¼å¹¶ä¸ä¼ å°æå®å­å¨æ¡¶ä¸­ãåæ¶å°å å¯åçcontent keyåivåä¸ºå å¯å¯¹è±¡æheaderä¹ä¸ä¼ å°å­å¨æ¡¶ä¸­ãcontent keyä½¿ç¨ä¼ å¥å°è¯¥æ¹æ³çmaster keyè¿è¡å å¯ã\n\nå¦æå¯¹è±¡å¤§äº5mb,å®¢æ·ç«¯ä¼èªå¨è¿è¡multi partä¸ä¼ ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°            ç±»å            æè¿°\nbucketname    string        å­å¨æ¡¶åç§°ã\nobjectname    string        å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nstream        inputstream   è¦ä¸ä¼ çæµã\nsize          long          è¦ä¸ä¼ çæµçå¤§å°ã\ncontenttype   string        content typeã\nkey           keypair       ä¸ä¸ªrsa keypairçå¯¹è±¡ã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n        invalidalgorithmparameterexception : éè¯¯çå å¯ç®æ³ã\n        badpaddingexception : ä¸æ­£ç¡®çpaddingã\n        illegalblocksizeexception : ä¸æ­£ç¡®çblockã\n        nosuchpaddingexception : éè¯¯çpadingç±»åã\n\nç¤ºä¾\n\nå¯¹è±¡ä½¿ç¨éæºçæçkeyè¿è¡å å¯ï¼ç¶åè¿ä¸ªç¨äºå å¯æ°æ®çkeyåè¢«ç±ä»è¢«clientç¥éçmaster key(å°è£å¨encryptionmaterialså¯¹è±¡é)è¿è¡å å¯ãè¿ä¸ªè¢«å å¯åçkeyåivåä¸ºå¯¹è±¡çheaderåå å¯åçå¯¹è±¡ä¸èµ·è¢«ä¸ä¼ å°å­å¨æå¡ä¸ã\n\ntry {\n  stringbuilder builder = new stringbuilder();\n  for (int i = 0; i < 1000; i++) {\n    builder.append("sphinx of black quartz, judge my vow: used by adobe indesign to display font samples. ");\n    builder.append("(29 letters)\\n");\n    builder.append("jackdaws love my big sphinx of quartz: similarly, used by windows xp for some fonts. ");\n    builder.append("(31 letters)\\n");\n    builder.append("pack my box with five dozen liquor jugs: according to wikipedia, this one is used on ");\n    builder.append("nasas space shuttle. (32 letters)\\n");\n    builder.append("the quick onyx goblin jumps over the lazy dwarf: flavor text from an unhinged magic card. ");\n    builder.append("(39 letters)\\n");\n    builder.append("how razorback-jumping frogs can level six piqued gymnasts!: not going to win any brevity ");\n    builder.append("awards at 49 letters long, but old-time mac users may recognize it.\\n");\n    builder.append("cozy lummox gives smart squid who asks for job pen: a 41-letter tester sentence for mac ");\n    builder.append("computers after system 7.\\n");\n    builder.append("a few others we like: amazingly few discotheques provide jukeboxes; now fax quiz jack! my ");\n    builder.append("brave ghost pled; watch jeopardy!, alex trebeks fun tv quiz game.\\n");\n    builder.append("- --\\n");\n  }\n  bytearrayinputstream bais = new\n  bytearrayinputstream(builder.tostring().getbytes("utf-8"));\n  keypairgenerator keygenerator = keypairgenerator.getinstance("rsa");\n  keygenerator.initialize(1024, new securerandom());\n  keypair keypair = keygenerator.generatekeypair();\n  // create an object\n  minioclient.putobject("mybucket", "myobject", bais, bais.available(), "application/octet-stream", keypair);\n  bais.close();\n  system.out.println("myobject is uploaded successfully");\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# statobject(string bucketname, string objectname)\n\npublic objectstat statobject(string bucketname, string objectname)\n\nè·åå¯¹è±¡çåæ°æ®ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\nobjectname   string   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å                                     å¼å¸¸\nobjectstat: populated object meta data.   å¼å¸¸åè¡¨ï¼\n                                          invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                          noresponseexception : æå¡å¨æ ååºã\n                                          ioexception : è¿æ¥å¼å¸¸ã\n                                          org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n                                          errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n                                          internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n  // è·å¾å¯¹è±¡çåæ°æ®ã\n  objectstat objectstat = minioclient.statobject("mybucket", "myobject");\n  system.out.println(objectstat);\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# copyobject(string bucketname, string objectname, string destbucketname, string destobjectname, copyconditions cpconds, map metadata)\n\npublic void copyobject(string bucketname, string objectname, string destbucketname, string destobjectname, copyconditions cpconds, map<string, string> metadata)\n\nä»objectnameæå®çå¯¹è±¡ä¸­å°æ°æ®æ·è´å°destobjectnameæå®çå¯¹è±¡ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°               ç±»å               æè¿°\nbucketname       string           æºå­å¨æ¡¶åç§°ã\nobjectname       string           æºå­å¨æ¡¶ä¸­çæºå¯¹è±¡åç§°ã\ndestbucketname   string           ç®æ å­å¨æ¡¶åç§°ã\ndestobjectname   string           è¦åå»ºçç®æ å¯¹è±¡åç§°,å¦æä¸ºç©ºï¼é»è®¤ä¸ºæºå¯¹è±¡åç§°ã\ncopyconditions   copyconditions   æ·è´æä½çä¸äºæ¡ä»¶mapã\nmetadata         map              ç»ç®æ å¯¹è±¡çåæ°æ®mapã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\næ¬apiæ§è¡äºä¸ä¸ªæå¡ç«¯çæ·è´æä½ã\n\ntry {\n  copyconditions copyconditions = new copyconditions();\n  copyconditions.setmatchetagnone("testetag");\n  minioclient.copyobject("mybucket",  "island.jpg", "mydestbucket", "processed.png", copyconditions);\n  system.out.println("island.jpg is uploaded successfully");\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# removeobject(string bucketname, string objectname)\n\npublic void removeobject(string bucketname, string objectname)\n\n\nå é¤ä¸ä¸ªå¯¹è±¡ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\nobjectname   string   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n      // ä»mybucketä¸­å é¤myobjectã\n      minioclient.removeobject("mybucket", "myobject");\n      system.out.println("successfully removed mybucket/myobject");\n} catch (minioexception e) {\n      system.out.println("error: " + e);\n}\n\n\n\n# removeobject(string bucketname, iterable objectnames)\n\npublic iterable<result<deleteerror>> removeobject(string bucketname, iterable<string> objectnames)\n\n\nå é¤å¤ä¸ªå¯¹è±¡ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°            ç±»å         æè¿°\nbucketname    string     å­å¨æ¡¶åç§°ã\nobjectnames   iterable   å«æè¦å é¤çå¤ä¸ªobjectåç§°çè¿­ä»£å¨å¯¹è±¡ã\n\nè¿åå¼ç±»å                                                 å¼å¸¸\niterable<result<deleteerror>>:an iterator of result   none\ndeleteerror.\n\nç¤ºä¾\n\nlist<string> objectnames = new linkedlist<string>();\nobjectnames.add("my-objectname1");\nobjectnames.add("my-objectname2");\nobjectnames.add("my-objectname3");\ntry {\n      // å é¤my-bucketnameéçå¤ä¸ªå¯¹è±¡\n      for (result<deleteerror> errorresult: minioclient.removeobject("my-bucketname", objectnames)) {\n        deleteerror error = errorresult.get();\n        system.out.println("failed to remove \'" + error.objectname() + "\'. error:" + error.message());\n      }\n} catch (minioexception e) {\n      system.out.println("error: " + e);\n}\n\n\n\n# removeincompleteupload(string bucketname, string objectname)\n\npublic void removeincompleteupload(string bucketname, string objectname)\n\n\nå é¤ä¸ä¸ªæªå®æ´ä¸ä¼ çå¯¹è±¡ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å       æè¿°\nbucketname   string   å­å¨æ¡¶åç§°ã\nobjectname   string   å­å¨æ¡¶éçå¯¹è±¡åç§°ã\n\nè¿åå¼ç±»å   å¼å¸¸\nnone    å¼å¸¸åè¡¨ï¼\n        invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n        noresponseexception : æå¡å¨æ ååºã\n        ioexception : è¿æ¥å¼å¸¸ã\n        org.xmlpull.v1.xmlpullparserexception : è§£æè¿åçxmlå¼å¸¸ã\n        errorresponseexception : æ§è¡å¤±è´¥å¼å¸¸ã\n        internalexception : åé¨éè¯¯ã\n\nç¤ºä¾\n\ntry {\n    string url = minioclient.presignedgetobject("mybucket", "myobject", 60 * 60 * 24);\n    system.out.println(url);\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# 4. presignedæä½\n\n\n# presignedgetobject(string bucketname, string objectname, integer expires)\n\npublic string presignedgetobject(string bucketname, string objectname, integer expires)\n\n\nçæä¸ä¸ªç»http getè¯·æ±ç¨çpresigned urlãæµè§å¨/ç§»å¨ç«¯çå®¢æ·ç«¯å¯ä»¥ç¨è¿ä¸ªurlè¿è¡ä¸è½½ï¼å³ä½¿å¶æå¨çå­å¨æ¡¶æ¯ç§æçãè¿ä¸ªpresigned urlå¯ä»¥è®¾ç½®ä¸ä¸ªå¤±ææ¶é´ï¼é»è®¤å¼æ¯7å¤©ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketname   string    å­å¨æ¡¶åç§°ã\nobjectname   string    å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nexpiry       integer   å¤±ææ¶é´ï¼ä»¥ç§ä¸ºåä½ï¼ï¼é»è®¤æ¯7å¤©ï¼ä¸å¾å¤§äºä¸å¤©ã\n\nè¿åå¼ç±»å                                                  å¼å¸¸\nstring : string contains url to download the object.   å¼å¸¸åè¡¨ï¼\n                                                       invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                       invalidkeyexception : ä¸åæ³çaccess keyæèsecret keyã\n                                                       ioexception : è¿æ¥å¼å¸¸ã\n                                                       nosuchalgorithmexception : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n                                                       invalidexpiresrangeexception : presigned urlå·²ç»è¿æäºã\n\nç¤ºä¾\n\ntry {\n    string url = minioclient.presignedputobject("mybucket", "myobject", 60 * 60 * 24);\n    system.out.println(url);\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# presignedputobject(string bucketname, string objectname, integer expires)\n\npublic string presignedputobject(string bucketname, string objectname, integer expires)\n\n\nçæä¸ä¸ªç»http putè¯·æ±ç¨çpresigned urlãæµè§å¨/ç§»å¨ç«¯çå®¢æ·ç«¯å¯ä»¥ç¨è¿ä¸ªurlè¿è¡ä¸ä¼ ï¼å³ä½¿å¶æå¨çå­å¨æ¡¶æ¯ç§æçãè¿ä¸ªpresigned urlå¯ä»¥è®¾ç½®ä¸ä¸ªå¤±ææ¶é´ï¼é»è®¤å¼æ¯7å¤©ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°           ç±»å        æè¿°\nbucketname   string    å­å¨æ¡¶åç§°ã\nobjectname   string    å­å¨æ¡¶éçå¯¹è±¡åç§°ã\nexpiry       integer   å¤±ææ¶é´ï¼ä»¥ç§ä¸ºåä½ï¼ï¼é»è®¤æ¯7å¤©ï¼ä¸å¾å¤§äºä¸å¤©ã\n\nè¿åå¼ç±»å                                                  å¼å¸¸\nstring : string contains url to download the object.   å¼å¸¸åè¡¨ï¼\n                                                       invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                                       invalidkeyexception : ä¸åæ³çaccess keyæèsecret keyã\n                                                       ioexception : è¿æ¥å¼å¸¸ã\n                                                       nosuchalgorithmexception : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n                                                       invalidexpiresrangeexception : presigned urlå·²ç»è¿æäºã\n\nç¤ºä¾\n\ntry {\n    string url = minioclient.presignedputobject("mybucket", "myobject", 60 * 60 * 24);\n    system.out.println(url);\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n}\n\n\n\n# presignedpostpolicy(postpolicy policy)\n\npublic map<string,string> presignedpostpolicy(postpolicy policy)\n\n\nåè®¸ç»postè¯·æ±çpresigned urlè®¾ç½®ç­ç¥ï¼æ¯å¦æ¥æ¶å¯¹è±¡ä¸ä¼ çå­å¨æ¡¶åç§°çç­ç¥ï¼keyåç§°åç¼ï¼è¿æç­ç¥ã\n\næ¥ç javadoc\n\nåæ°\n\nåæ°       ç±»å           æè¿°\npolicy   postpolicy   å¯¹è±¡çpostç­ç¥\n\nè¿åå¼ç±»å                                         å¼å¸¸\nmap: map of strings to construct form-data.   å¼å¸¸åè¡¨ï¼\n                                              invalidbucketnameexception : ä¸åæ³çå­å¨æ¡¶åç§°ã\n                                              invalidkeyexception : ä¸åæ³çaccess keyæèsecret keyã\n                                              ioexception : è¿æ¥å¼å¸¸ã\n                                              nosuchalgorithmexception : æ¾ä¸å°ç¸åºçç­¾åç®æ³ã\n\nç¤ºä¾\n\ntry {\n    postpolicy policy = new postpolicy("mybucket", "myobject",\n  datetime.now().plusdays(7));\n    policy.setcontenttype("image/png");\n    map<string,string> formdata = minioclient.presignedpostpolicy(policy);\n    system.out.print("curl -x post ");\n    for (map.entry<string,string> entry : formdata.entryset()) {\n    system.out.print(" -f " + entry.getkey() + "=" + entry.getvalue());\n    }\n    system.out.println(" -f file=@/tmp/userpic.png  https://play.minio.io:9000/mybucket");\n} catch(minioexception e) {\n  system.out.println("error occurred: " + e);\n\n\n\n# 5. äºè§£æ´å¤\n\n * åå»ºå±äºä½ çç§çapiæå¡ç¤ºä¾\n * [å®æ´çjavadoc](',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦",frontmatter:{title:"ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦",date:"2022-02-09T11:30:18.000Z",permalink:"/pages/4a395a/"},regularPath:"/12.MinIO/04.%E5%AE%9E%E6%88%98%E7%A7%98%E7%B1%8D/01.%E4%BD%BF%E7%94%A8Certbot%E7%94%9F%E6%88%90Let's%20Encrypt%E8%AF%81%E4%B9%A6.html",relativePath:"12.MinIO/04.å®æç§ç±/01.ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦.md",key:"v-117cc90e",path:"/pages/4a395a/",headers:[{level:2,title:"1. åææ¡ä»¶",slug:"_1-åææ¡ä»¶",normalizedTitle:"1. åææ¡ä»¶",charIndex:161},{level:2,title:"2. ä¾èµ",slug:"_2-ä¾èµ",normalizedTitle:"2. ä¾èµ",charIndex:229},{level:2,title:"3. æ­¥éª¤",slug:"_3-æ­¥éª¤",normalizedTitle:"3. æ­¥éª¤",charIndex:368},{level:3,title:"æ­¥éª¤1: å®è£Certbot",slug:"æ­¥éª¤1-å®è£certbot",normalizedTitle:"æ­¥éª¤1: å®è£certbot",charIndex:378},{level:3,title:"æ­¥éª¤2: çæLet's Encryptè¯ä¹¦",slug:"æ­¥éª¤2-çælet-s-encryptè¯ä¹¦",normalizedTitle:"æ­¥éª¤2: çælet's encryptè¯ä¹¦",charIndex:413},{level:3,title:"æ­¥éª¤3: éªè¯è¯ä¹¦",slug:"æ­¥éª¤3-éªè¯è¯ä¹¦",normalizedTitle:"æ­¥éª¤3: éªè¯è¯ä¹¦",charIndex:537},{level:3,title:"æ­¥éª¤4: ä½¿ç¨è¯ä¹¦ç»Minio Serverè®¾ç½®SSLã",slug:"æ­¥éª¤4-ä½¿ç¨è¯ä¹¦ç»minio-serverè®¾ç½®sslã",normalizedTitle:"æ­¥éª¤4: ä½¿ç¨è¯ä¹¦ç»minio serverè®¾ç½®sslã",charIndex:1056},{level:3,title:"æ­¥éª¤5: ä¿®æ¹è¯ä¹¦çownershipã",slug:"æ­¥éª¤5-ä¿®æ¹è¯ä¹¦çownershipã",normalizedTitle:"æ­¥éª¤5: ä¿®æ¹è¯ä¹¦çownershipã",charIndex:1299},{level:3,title:"æ­¥éª¤6: ä½¿ç¨HTTPSå¯å¨Minio Serverã",slug:"æ­¥éª¤6-ä½¿ç¨httpså¯å¨minio-serverã",normalizedTitle:"æ­¥éª¤6: ä½¿ç¨httpså¯å¨minio serverã",charIndex:1442},{level:3,title:"æ­¥éª¤7: éè¿æµè§å¨è®¿é®https://myminio.comã",slug:"æ­¥éª¤7-éè¿æµè§å¨è®¿é®https-myminio-comã",normalizedTitle:"æ­¥éª¤7: éè¿æµè§å¨è®¿é®https://myminio.comã",charIndex:1709}],headersStr:"1. åææ¡ä»¶ 2. ä¾èµ 3. æ­¥éª¤ æ­¥éª¤1: å®è£Certbot æ­¥éª¤2: çæLet's Encryptè¯ä¹¦ æ­¥éª¤3: éªè¯è¯ä¹¦ æ­¥éª¤4: ä½¿ç¨è¯ä¹¦ç»Minio Serverè®¾ç½®SSLã æ­¥éª¤5: ä¿®æ¹è¯ä¹¦çownershipã æ­¥éª¤6: ä½¿ç¨HTTPSå¯å¨Minio Serverã æ­¥éª¤7: éè¿æµè§å¨è®¿é®https://myminio.comã",content:"# ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦\n\nLet's Encrypt æ¯ä¸ä¸ªæ°çåè´¹çï¼èªå¨çï¼å¼æºçè®¤è¯ä¸­å¿ã\n\nCertbotæ¯Let's Encryptçåºäºæ§å¶å°çè¯ä¹¦çæå·¥å·ã\n\næ¬ææä»¬å°ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦ãè¯¥è¯ä¹¦å°è¢«é¨ç½²å¨Minioæå¡å¨ä¸­ä½¿ç¨ã\n\n\n# 1. åææ¡ä»¶\n\n * ä»è¿éä¸è½½å¹¶å®è£Minio Serverã\n\n * ä»è¿éä¸è½½å¹¶å®è£Certbotã\n   \n   \n   # 2. ä¾èµ\n\n * æ§è¡certbotæ¶ï¼éè¦æå¼443ç«¯å£å¹¶ç¡®ä¿å¯ä»¥è®¿é®ã\n\n * Certbotéè¦ærootæéï¼å ä¸ºåªærootæåè®¸ç»å®1024ä»¥ä¸çç«¯å£ã\n\n * æ¬ææä»¬å°ä½¿ç¨myminio.comè¿ä¸ªååï¼è¯·å¨è®¾ç½®æ¶æ¹æä½ èªå·±çååã\n   \n   \n   # 3. æ­¥éª¤\n\n\n# æ­¥éª¤1: å®è£Certbot\n\nåèè¿éå®è£Certbotã\n\n\n# æ­¥éª¤2: çæLet's Encryptè¯ä¹¦\n\n# certbot certonly --standalone -d myminio.com --staple-ocsp -m test@yourdomain.io --agree-tos\n\n\n\n# æ­¥éª¤3: éªè¯è¯ä¹¦\n\nååº/etc/letsencrypt/live/myminio.coméçè¯ä¹¦ã\n\n$ ls -l /etc/letsencrypt/live/myminio.comtotal 4lrwxrwxrwx 1 root root  37 Aug  2 09:58 cert.pem -> ../../archive/myminio.com/cert4.pemlrwxrwxrwx 1 root root  38 Aug  2 09:58 chain.pem -> ../../archive/myminio.com/chain4.pemlrwxrwxrwx 1 root root  42 Aug  2 09:58 fullchain.pem -> ../../archive/myminio.com/fullchain4.pemlrwxrwxrwx 1 root root  40 Aug  2 09:58 privkey.pem -> ../../archive/myminio.com/privkey4.pem-rw-r--r-- 1 root root 543 May 10 22:07 README\n\n\n\n# æ­¥éª¤4: ä½¿ç¨è¯ä¹¦ç»Minio Serverè®¾ç½®SSLã\n\nCertbotçæçè¯ä¹¦åkeyéè¦æ¾å°ç¨æ·çhomeæä»¶å¤¹éã\n\n$ cp /etc/letsencrypt/live/myminio.com/fullchain.pem /home/user/.minio/certs/public.crt$ cp /etc/letsencrypt/live/myminio.com/privkey.pem /home/user/.minio/certs/private.key\n\n\n\n# æ­¥éª¤5: ä¿®æ¹è¯ä¹¦çownershipã\n\n$ sudo chown user:user /home/user/.minio/certs/private.key$ sudo chown user:user /home/user/.minio/certs/public.crt\n\n\n\n# æ­¥éª¤6: ä½¿ç¨HTTPSå¯å¨Minio Serverã\n\nå¯å¨Minio Server,ä½¿ç¨443ç«¯å£ã\n\n$ sudo ./minio server --address \":443\" /mnt/data\n\n\nå¦æä½ ç¨çæ¯Minio Dockerçï¼åä½ éè¦\n\n$ sudo docker run -p 443:443 -v /home/user/.minio:/root/.minio/ -v /home/user/data:/data minio/minio server --address \":443\" /data\n\n\n\n# æ­¥éª¤7: éè¿æµè§å¨è®¿é®https://myminio.comã\n\n\n\n> åæ: https://docs.min.io/docs/generate-let-s-encypt-certificate-using-concert-for-minio.html",normalizedContent:"# ä½¿ç¨certbotçælet's encryptè¯ä¹¦\n\nlet's encrypt æ¯ä¸ä¸ªæ°çåè´¹çï¼èªå¨çï¼å¼æºçè®¤è¯ä¸­å¿ã\n\ncertbotæ¯let's encryptçåºäºæ§å¶å°çè¯ä¹¦çæå·¥å·ã\n\næ¬ææä»¬å°ä½¿ç¨certbotçælet's encryptè¯ä¹¦ãè¯¥è¯ä¹¦å°è¢«é¨ç½²å¨minioæå¡å¨ä¸­ä½¿ç¨ã\n\n\n# 1. åææ¡ä»¶\n\n * ä»è¿éä¸è½½å¹¶å®è£minio serverã\n\n * ä»è¿éä¸è½½å¹¶å®è£certbotã\n   \n   \n   # 2. ä¾èµ\n\n * æ§è¡certbotæ¶ï¼éè¦æå¼443ç«¯å£å¹¶ç¡®ä¿å¯ä»¥è®¿é®ã\n\n * certbotéè¦ærootæéï¼å ä¸ºåªærootæåè®¸ç»å®1024ä»¥ä¸çç«¯å£ã\n\n * æ¬ææä»¬å°ä½¿ç¨myminio.comè¿ä¸ªååï¼è¯·å¨è®¾ç½®æ¶æ¹æä½ èªå·±çååã\n   \n   \n   # 3. æ­¥éª¤\n\n\n# æ­¥éª¤1: å®è£certbot\n\nåèè¿éå®è£certbotã\n\n\n# æ­¥éª¤2: çælet's encryptè¯ä¹¦\n\n# certbot certonly --standalone -d myminio.com --staple-ocsp -m test@yourdomain.io --agree-tos\n\n\n\n# æ­¥éª¤3: éªè¯è¯ä¹¦\n\nååº/etc/letsencrypt/live/myminio.coméçè¯ä¹¦ã\n\n$ ls -l /etc/letsencrypt/live/myminio.comtotal 4lrwxrwxrwx 1 root root  37 aug  2 09:58 cert.pem -> ../../archive/myminio.com/cert4.pemlrwxrwxrwx 1 root root  38 aug  2 09:58 chain.pem -> ../../archive/myminio.com/chain4.pemlrwxrwxrwx 1 root root  42 aug  2 09:58 fullchain.pem -> ../../archive/myminio.com/fullchain4.pemlrwxrwxrwx 1 root root  40 aug  2 09:58 privkey.pem -> ../../archive/myminio.com/privkey4.pem-rw-r--r-- 1 root root 543 may 10 22:07 readme\n\n\n\n# æ­¥éª¤4: ä½¿ç¨è¯ä¹¦ç»minio serverè®¾ç½®sslã\n\ncertbotçæçè¯ä¹¦åkeyéè¦æ¾å°ç¨æ·çhomeæä»¶å¤¹éã\n\n$ cp /etc/letsencrypt/live/myminio.com/fullchain.pem /home/user/.minio/certs/public.crt$ cp /etc/letsencrypt/live/myminio.com/privkey.pem /home/user/.minio/certs/private.key\n\n\n\n# æ­¥éª¤5: ä¿®æ¹è¯ä¹¦çownershipã\n\n$ sudo chown user:user /home/user/.minio/certs/private.key$ sudo chown user:user /home/user/.minio/certs/public.crt\n\n\n\n# æ­¥éª¤6: ä½¿ç¨httpså¯å¨minio serverã\n\nå¯å¨minio server,ä½¿ç¨443ç«¯å£ã\n\n$ sudo ./minio server --address \":443\" /mnt/data\n\n\nå¦æä½ ç¨çæ¯minio dockerçï¼åä½ éè¦\n\n$ sudo docker run -p 443:443 -v /home/user/.minio:/root/.minio/ -v /home/user/data:/data minio/minio server --address \":443\" /data\n\n\n\n# æ­¥éª¤7: éè¿æµè§å¨è®¿é®https://myminio.comã\n\n\n\n> åæ: https://docs.min.io/docs/generate-let-s-encypt-certificate-using-concert-for-minio.html",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä½¿ç¨ MinIO æå¡å¨è®¾ç½® Nginx ä»£ç",frontmatter:{title:"ä½¿ç¨ MinIO æå¡å¨è®¾ç½® Nginx ä»£ç",date:"2022-02-09T11:30:40.000Z",permalink:"/pages/7acf5a/"},regularPath:"/12.MinIO/04.%E5%AE%9E%E6%88%98%E7%A7%98%E7%B1%8D/02.%E4%BD%BF%E7%94%A8%20MinIO%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE%20Nginx%20%E4%BB%A3%E7%90%86.html",relativePath:"12.MinIO/04.å®æç§ç±/02.ä½¿ç¨ MinIO æå¡å¨è®¾ç½® Nginx ä»£ç.md",key:"v-84e3ebde",path:"/pages/7acf5a/",headers:[{level:2,title:"1. åå³æ¡ä»¶",slug:"_1-åå³æ¡ä»¶",normalizedTitle:"1. åå³æ¡ä»¶",charIndex:107},{level:2,title:"2. å®è£",slug:"_2-å®è£",normalizedTitle:"2. å®è£",charIndex:137},{level:2,title:"3. éç½®",slug:"_3-éç½®",normalizedTitle:"3. éç½®",charIndex:162},{level:3,title:"ä»£çææè¯·æ±",slug:"ä»£çææè¯·æ±",normalizedTitle:"ä»£çææè¯·æ±",charIndex:172},{level:3,title:"åºäºæ¡¶çä»£çè¯·æ±",slug:"åºäºæ¡¶çä»£çè¯·æ±",normalizedTitle:"åºäºæ¡¶çä»£çè¯·æ±",charIndex:1568},{level:2,title:"4. æ­¥éª¤",slug:"_4-æ­¥éª¤",normalizedTitle:"4. æ­¥éª¤",charIndex:2735},{level:3,title:"ç¬¬ä¸æ­¥ï¼å¯å¨MinIOæå¡å¨ã",slug:"ç¬¬ä¸æ­¥-å¯å¨minioæå¡å¨ã",normalizedTitle:"ç¬¬ä¸æ­¥ï¼å¯å¨minioæå¡å¨ã",charIndex:2745},{level:3,title:"ç¬¬ 2 æ­¥ï¼éå¯ Nginx æå¡å¨ã",slug:"ç¬¬-2-æ­¥-éå¯-nginx-æå¡å¨ã",normalizedTitle:"ç¬¬ 2 æ­¥ï¼éå¯ nginx æå¡å¨ã",charIndex:2791},{level:2,title:"è¿ä¸æ­¥æ¢ç´¢",slug:"è¿ä¸æ­¥æ¢ç´¢",normalizedTitle:"è¿ä¸æ­¥æ¢ç´¢",charIndex:2844}],headersStr:"1. åå³æ¡ä»¶ 2. å®è£ 3. éç½® ä»£çææè¯·æ± åºäºæ¡¶çä»£çè¯·æ± 4. æ­¥éª¤ ç¬¬ä¸æ­¥ï¼å¯å¨MinIOæå¡å¨ã ç¬¬ 2 æ­¥ï¼éå¯ Nginx æå¡å¨ã è¿ä¸æ­¥æ¢ç´¢",content:'# ä½¿ç¨ MinIO æå¡å¨è®¾ç½® Nginx ä»£ç\n\nNginx æ¯ä¸ä¸ªå¼æºç Web æå¡å¨åä¸ä¸ªååä»£çæå¡å¨ã\n\nå¨è¿ä¸ªç§ç±ä¸­ï¼æä»¬å°å­¦ä¹ å¦ä½ä½¿ç¨ MinIO Server è®¾ç½® Nginx ä»£çã\n\n\n# 1. åå³æ¡ä»¶\n\nä»è¿éå®è£ MinIO æå¡å¨ã\n\n\n# 2. å®è£\n\nä»è¿éå®è£ Nginx ã\n\n\n# 3. éç½®\n\n\n# ä»£çææè¯·æ±\n\nå°ä»¥ä¸åå®¹æ·»å ä¸ºæä»¶/etc/nginx/sites-enabledï¼ä¾å¦/etc/nginx/sites-enables/minio ï¼å¹¶å é¤defaultåä¸ç®å½ä¸­çç°ææä»¶ã\n\nserver {\n listen 80;\n server_name example.com;\n\n # To allow special characters in headers\n ignore_invalid_headers off;\n # Allow any size file to be uploaded.\n # Set to a value such as 1000m; to restrict file size to a specific value\n client_max_body_size 0;\n # To disable buffering\n proxy_buffering off;\n\n location / {\n   proxy_set_header X-Real-IP $remote_addr;\n   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n   proxy_set_header X-Forwarded-Proto $scheme;\n   proxy_set_header Host $http_host;\n\n   proxy_connect_timeout 300;\n   # Default is HTTP/1, keepalive is only enabled in HTTP/1.1\n   proxy_http_version 1.1;\n   proxy_set_header Connection "";\n   chunked_transfer_encoding off;\n\n   proxy_pass http://localhost:9000; # If you are using docker-compose this would be the hostname i.e. minio\n   # Health Check endpoint might go here. See https://www.nginx.com/resources/wiki/modules/healthcheck/\n   # /minio/health/live;\n }\n}\n\n\nç¬è®°ï¼\n\n * å° example.com æ¿æ¢ä¸ºæ¨èªå·±çä¸»æºåã\n * æ¿æ¢http://localhost:9000 ä¸ºæ¨èªå·±çæå¡å¨åç§°ã\n * æ·»å client_max_body_size 1000m;çhttpæåµä¸ï¼ä¸ºäºè½å¤ä¸ä¼ å¤§æä»¶-åªéç¸åºå°è°æ´å¼ãé»è®¤å¼1må¯¹äºå¤§å¤æ°åºæ¯æ¥è¯´å¤ªä½äºãè¦ç¦ç¨å¯¹å®¢æ·ç«¯è¯·æ±æ­£æå¤§å°çæ£æ¥ï¼è¯·è®¾ç½®client_max_body_sizeä¸º0ã\n * Nginx é»è®¤ç¼å²ååºãè¦ç¦æ­¢ Nginx å° MinIO ååºç¼å²å°ä¸´æ¶æä»¶ï¼è¯·è®¾ç½®proxy_buffering off;. è¿å°æ¹åå®¢æ·ç«¯è¯·æ±çç¬¬ä¸ä¸ªå­èçæ¶é´ã\n * Nginx é»è®¤ä¸åè®¸ç¹æ®å­ç¬¦ãè®¾ç½®ignore_invalid_headers off;ä¸ºåè®¸å¸¦æç¹æ®å­ç¬¦çæ é¢ã\n\n\n# åºäºæ¡¶çä»£çè¯·æ±\n\nå¦ææ¨æ³ä»åä¸ä¸ª nginx ç«¯å£ä¸º Web åºç¨ç¨åºå MinIO æä¾æå¡ï¼é£ä¹æ¨å¯ä»¥ä½¿ç¨åºäºè·¯å¾çè·¯ç±åºäºå­å¨æ¡¶åç§°ä»£ç MinIO è¯·æ±ãå¯¹äº nginxï¼å®ä½¿ç¨è¯¥locationæä»¤ï¼è¯¥æä»¤è¿æ¯æåºäºå¯¹è±¡é®æ¨¡å¼å¹éçä»£çæåã\n\n # Proxy requests to the bucket "photos" to MinIO server running on port 9000\n location /photos/ {\n   proxy_set_header X-Real-IP $remote_addr;\n   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n   proxy_set_header X-Forwarded-Proto $scheme;\n   proxy_set_header Host $http_host;\n\n   proxy_connect_timeout 300;\n   # Default is HTTP/1, keepalive is only enabled in HTTP/1.1\n   proxy_http_version 1.1;\n   proxy_set_header Connection "";\n   chunked_transfer_encoding off;\n\n   proxy_pass http://localhost:9000;\n }\n\n # Proxy any other request to the application server running on port 9001\n location / {\n   proxy_set_header X-Real-IP $remote_addr;\n   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n   proxy_set_header X-Forwarded-Proto $scheme;\n   proxy_set_header Host $http_host;\n\n   proxy_connect_timeout 300;\n   # Default is HTTP/1, keepalive is only enabled in HTTP/1.1\n   proxy_http_version 1.1;\n   proxy_set_header Connection "";\n   chunked_transfer_encoding off;\n\n   proxy_pass http://localhost:9001;\n }\n\n\n\n# 4. æ­¥éª¤\n\n\n# ç¬¬ä¸æ­¥ï¼å¯å¨MinIOæå¡å¨ã\n\nminio server /mydatadir\n\n\n\n# ç¬¬ 2 æ­¥ï¼éå¯ Nginx æå¡å¨ã\n\nsudo service nginx restart\n\n\n\n# è¿ä¸æ­¥æ¢ç´¢\n\næå³åç§ MinIO å Nginx éç½®éé¡¹ï¼è¯·åéæ­¤åå®¢æç« ã',normalizedContent:'# ä½¿ç¨ minio æå¡å¨è®¾ç½® nginx ä»£ç\n\nnginx æ¯ä¸ä¸ªå¼æºç web æå¡å¨åä¸ä¸ªååä»£çæå¡å¨ã\n\nå¨è¿ä¸ªç§ç±ä¸­ï¼æä»¬å°å­¦ä¹ å¦ä½ä½¿ç¨ minio server è®¾ç½® nginx ä»£çã\n\n\n# 1. åå³æ¡ä»¶\n\nä»è¿éå®è£ minio æå¡å¨ã\n\n\n# 2. å®è£\n\nä»è¿éå®è£ nginx ã\n\n\n# 3. éç½®\n\n\n# ä»£çææè¯·æ±\n\nå°ä»¥ä¸åå®¹æ·»å ä¸ºæä»¶/etc/nginx/sites-enabledï¼ä¾å¦/etc/nginx/sites-enables/minio ï¼å¹¶å é¤defaultåä¸ç®å½ä¸­çç°ææä»¶ã\n\nserver {\n listen 80;\n server_name example.com;\n\n # to allow special characters in headers\n ignore_invalid_headers off;\n # allow any size file to be uploaded.\n # set to a value such as 1000m; to restrict file size to a specific value\n client_max_body_size 0;\n # to disable buffering\n proxy_buffering off;\n\n location / {\n   proxy_set_header x-real-ip $remote_addr;\n   proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;\n   proxy_set_header x-forwarded-proto $scheme;\n   proxy_set_header host $http_host;\n\n   proxy_connect_timeout 300;\n   # default is http/1, keepalive is only enabled in http/1.1\n   proxy_http_version 1.1;\n   proxy_set_header connection "";\n   chunked_transfer_encoding off;\n\n   proxy_pass http://localhost:9000; # if you are using docker-compose this would be the hostname i.e. minio\n   # health check endpoint might go here. see https://www.nginx.com/resources/wiki/modules/healthcheck/\n   # /minio/health/live;\n }\n}\n\n\nç¬è®°ï¼\n\n * å° example.com æ¿æ¢ä¸ºæ¨èªå·±çä¸»æºåã\n * æ¿æ¢http://localhost:9000 ä¸ºæ¨èªå·±çæå¡å¨åç§°ã\n * æ·»å client_max_body_size 1000m;çhttpæåµä¸ï¼ä¸ºäºè½å¤ä¸ä¼ å¤§æä»¶-åªéç¸åºå°è°æ´å¼ãé»è®¤å¼1må¯¹äºå¤§å¤æ°åºæ¯æ¥è¯´å¤ªä½äºãè¦ç¦ç¨å¯¹å®¢æ·ç«¯è¯·æ±æ­£æå¤§å°çæ£æ¥ï¼è¯·è®¾ç½®client_max_body_sizeä¸º0ã\n * nginx é»è®¤ç¼å²ååºãè¦ç¦æ­¢ nginx å° minio ååºç¼å²å°ä¸´æ¶æä»¶ï¼è¯·è®¾ç½®proxy_buffering off;. è¿å°æ¹åå®¢æ·ç«¯è¯·æ±çç¬¬ä¸ä¸ªå­èçæ¶é´ã\n * nginx é»è®¤ä¸åè®¸ç¹æ®å­ç¬¦ãè®¾ç½®ignore_invalid_headers off;ä¸ºåè®¸å¸¦æç¹æ®å­ç¬¦çæ é¢ã\n\n\n# åºäºæ¡¶çä»£çè¯·æ±\n\nå¦ææ¨æ³ä»åä¸ä¸ª nginx ç«¯å£ä¸º web åºç¨ç¨åºå minio æä¾æå¡ï¼é£ä¹æ¨å¯ä»¥ä½¿ç¨åºäºè·¯å¾çè·¯ç±åºäºå­å¨æ¡¶åç§°ä»£ç minio è¯·æ±ãå¯¹äº nginxï¼å®ä½¿ç¨è¯¥locationæä»¤ï¼è¯¥æä»¤è¿æ¯æåºäºå¯¹è±¡é®æ¨¡å¼å¹éçä»£çæåã\n\n # proxy requests to the bucket "photos" to minio server running on port 9000\n location /photos/ {\n   proxy_set_header x-real-ip $remote_addr;\n   proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;\n   proxy_set_header x-forwarded-proto $scheme;\n   proxy_set_header host $http_host;\n\n   proxy_connect_timeout 300;\n   # default is http/1, keepalive is only enabled in http/1.1\n   proxy_http_version 1.1;\n   proxy_set_header connection "";\n   chunked_transfer_encoding off;\n\n   proxy_pass http://localhost:9000;\n }\n\n # proxy any other request to the application server running on port 9001\n location / {\n   proxy_set_header x-real-ip $remote_addr;\n   proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;\n   proxy_set_header x-forwarded-proto $scheme;\n   proxy_set_header host $http_host;\n\n   proxy_connect_timeout 300;\n   # default is http/1, keepalive is only enabled in http/1.1\n   proxy_http_version 1.1;\n   proxy_set_header connection "";\n   chunked_transfer_encoding off;\n\n   proxy_pass http://localhost:9001;\n }\n\n\n\n# 4. æ­¥éª¤\n\n\n# ç¬¬ä¸æ­¥ï¼å¯å¨minioæå¡å¨ã\n\nminio server /mydatadir\n\n\n\n# ç¬¬ 2 æ­¥ï¼éå¯ nginx æå¡å¨ã\n\nsudo service nginx restart\n\n\n\n# è¿ä¸æ­¥æ¢ç´¢\n\næå³åç§ minio å nginx éç½®éé¡¹ï¼è¯·åéæ­¤åå®¢æç« ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Minioé¨ç½²å¿«éå¥é¨",frontmatter:{title:"Minioé¨ç½²å¿«éå¥é¨",date:"2022-02-09T11:30:18.000Z",permalink:"/pages/542516/"},regularPath:"/12.MinIO/05.Minio%E9%83%A8%E7%BD%B2/01.Minio%E9%83%A8%E7%BD%B2%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"12.MinIO/05.Minioé¨ç½²/01.Minioé¨ç½²å¿«éå¥é¨.md",key:"v-427cb080",path:"/pages/542516/",headers:[{level:2,title:"ä¸ºä»ä¹è¯´Minioæ¯äºåççï¼cloud-nativeï¼?",slug:"ä¸ºä»ä¹è¯´minioæ¯äºåçç-cloud-native",normalizedTitle:"ä¸ºä»ä¹è¯´minioæ¯äºåççï¼cloud-nativeï¼?",charIndex:511}],headersStr:"ä¸ºä»ä¹è¯´Minioæ¯äºåççï¼cloud-nativeï¼?",content:"# Minioé¨ç½²å¿«éå¥é¨\n\nMinioæ¯ä¸ä¸ª[äºåç](https://baike.baidu.com/item/Cloud Native/19865304?fr=aladdin)çåºç¨ç¨åºï¼æ¨å¨å¨å¤ç§æ·ç¯å¢ä¸­ä»¥å¯æç»­çæ¹å¼è¿è¡æ©å±ãOrchestrationå¹³å°ä¸ºMinioçæ©å±æä¾äºéå¸¸å¥½çæ¯æãä»¥ä¸æ¯åç§orchestrationå¹³å°çMinioé¨ç½²ææ¡£Minio is a cloud-native application designed to scale in a sustainable manner in multi-tenant environments. Orchestration platforms provide perfect launchpad for Minio to scale. Below is the list of Minio deployment documents for various orchestration platforms:\n\nORCHESTRATIONå¹³å°\nDocker Swarm\nDocker Compose\nKubernetes\nDC/OS\n\n\n# ä¸ºä»ä¹è¯´Minioæ¯äºåççï¼cloud-nativeï¼?\n\näºåçè¿ä¸ªè¯ä»£è¡¨çæ¯ä¸äºææ³çéåï¼æ¯å¦å¾®æå¡é¨ç½²ï¼å¯ä¼¸ç¼©ï¼èä¸æ¯è¯´æä¸ä¸ªåä½åºç¨æ¹é æå®¹å¨é¨ç½²ãä¸ä¸ªäºåççåºç¨å¨è®¾è®¡æ¶å°±èèäºç§»æ¤æ§åå¯ä¼¸ç¼©æ§ï¼èä¸å¯ä»¥éè¿ç®åçå¤å¶å³å¯å®ç°æ°´å¹³æ©å±ãç°å¨å´èµ·çç¼æå¹³å°ï¼æ³Swarm,Kubernetes,ä»¥åDC/OSï¼è®©å¤§è§æ¨¡éç¾¤çå¤å¶åç®¡çåå¾åææªæçç®åï¼åªéä¸ä¼ç¹åªéã\n\nå®¹å¨æä¾äºéç¦»çåºç¨æ§è¡ç¯å¢ï¼ç¼æï¼orchestrationï¼å¹³å°éè¿å®¹å¨ç®¡çä»¥åå¤å¶åè½æä¾äºæ ç¼çæ©å±ãMinioç»§æ¿äºè¿äºï¼éå¯¹æ¯ä¸ªç§æ·æä¾äºå­å¨ç¯å¢çéç¦»ã\n\nMinioæ¯å»ºç«å¨äºåççåºç¡ä¸ï¼æçº å ç ãåå¸å¼åå±äº«å­å¨è¿äºç¹æ§ãMinioä¸æ³¨äºå¹¶ä¸åªä¸æ³¨äºå­å¨ï¼èä¸åçè¿ä¸éãå®å¯ä»¥éè¿ç¼æå¹³å°å¤å¶ä¸ä¸ªMinioå®ä¾å°±å®ç°äºæ°´å¹³æ©å±ã\n\n> å¨ä¸ä¸ªäºåçç¯å¢ä¸­ï¼ä¼¸ç¼©æ§ä¸æ¯åºç¨çä¸ä¸ªåè½èæ¯ç¼æå¹³å°çåè½ã\n\nç°å¨çåºç¨ãæ°æ®åºï¼key-storeè¿äºï¼å¾å¤é½å·²ç»é¨ç½²å¨å®¹å¨ä¸­ï¼å¹¶ä¸éè¿ç¼æå¹³å°è¿è¡ç®¡çãMinioæä¾äºä¸ä¸ªå¥å£®çãå¯ä¼¸ç¼©ãAWS S3å¼å®¹çå¯¹è±¡å­å¨ï¼è¿æ¯Minioçç«èº«ä¹æ¬ï¼å­æ­¤å¨äºåçåºç¨ä¸­å æ®ä¸å¸­ä¹å°ã\n\n\n\n> åæ: https://docs.min.io/docs/minio-deployment-quickstart-guide.html",normalizedContent:"# minioé¨ç½²å¿«éå¥é¨\n\nminioæ¯ä¸ä¸ª[äºåç](https://baike.baidu.com/item/cloud native/19865304?fr=aladdin)çåºç¨ç¨åºï¼æ¨å¨å¨å¤ç§æ·ç¯å¢ä¸­ä»¥å¯æç»­çæ¹å¼è¿è¡æ©å±ãorchestrationå¹³å°ä¸ºminioçæ©å±æä¾äºéå¸¸å¥½çæ¯æãä»¥ä¸æ¯åç§orchestrationå¹³å°çminioé¨ç½²ææ¡£minio is a cloud-native application designed to scale in a sustainable manner in multi-tenant environments. orchestration platforms provide perfect launchpad for minio to scale. below is the list of minio deployment documents for various orchestration platforms:\n\norchestrationå¹³å°\ndocker swarm\ndocker compose\nkubernetes\ndc/os\n\n\n# ä¸ºä»ä¹è¯´minioæ¯äºåççï¼cloud-nativeï¼?\n\näºåçè¿ä¸ªè¯ä»£è¡¨çæ¯ä¸äºææ³çéåï¼æ¯å¦å¾®æå¡é¨ç½²ï¼å¯ä¼¸ç¼©ï¼èä¸æ¯è¯´æä¸ä¸ªåä½åºç¨æ¹é æå®¹å¨é¨ç½²ãä¸ä¸ªäºåççåºç¨å¨è®¾è®¡æ¶å°±èèäºç§»æ¤æ§åå¯ä¼¸ç¼©æ§ï¼èä¸å¯ä»¥éè¿ç®åçå¤å¶å³å¯å®ç°æ°´å¹³æ©å±ãç°å¨å´èµ·çç¼æå¹³å°ï¼æ³swarm,kubernetes,ä»¥ådc/osï¼è®©å¤§è§æ¨¡éç¾¤çå¤å¶åç®¡çåå¾åææªæçç®åï¼åªéä¸ä¼ç¹åªéã\n\nå®¹å¨æä¾äºéç¦»çåºç¨æ§è¡ç¯å¢ï¼ç¼æï¼orchestrationï¼å¹³å°éè¿å®¹å¨ç®¡çä»¥åå¤å¶åè½æä¾äºæ ç¼çæ©å±ãminioç»§æ¿äºè¿äºï¼éå¯¹æ¯ä¸ªç§æ·æä¾äºå­å¨ç¯å¢çéç¦»ã\n\nminioæ¯å»ºç«å¨äºåççåºç¡ä¸ï¼æçº å ç ãåå¸å¼åå±äº«å­å¨è¿äºç¹æ§ãminioä¸æ³¨äºå¹¶ä¸åªä¸æ³¨äºå­å¨ï¼èä¸åçè¿ä¸éãå®å¯ä»¥éè¿ç¼æå¹³å°å¤å¶ä¸ä¸ªminioå®ä¾å°±å®ç°äºæ°´å¹³æ©å±ã\n\n> å¨ä¸ä¸ªäºåçç¯å¢ä¸­ï¼ä¼¸ç¼©æ§ä¸æ¯åºç¨çä¸ä¸ªåè½èæ¯ç¼æå¹³å°çåè½ã\n\nç°å¨çåºç¨ãæ°æ®åºï¼key-storeè¿äºï¼å¾å¤é½å·²ç»é¨ç½²å¨å®¹å¨ä¸­ï¼å¹¶ä¸éè¿ç¼æå¹³å°è¿è¡ç®¡çãminioæä¾äºä¸ä¸ªå¥å£®çãå¯ä¼¸ç¼©ãaws s3å¼å®¹çå¯¹è±¡å­å¨ï¼è¿æ¯minioçç«èº«ä¹æ¬ï¼å­æ­¤å¨äºåçåºç¨ä¸­å æ®ä¸å¸­ä¹å°ã\n\n\n\n> åæ: https://docs.min.io/docs/minio-deployment-quickstart-guide.html",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"ä½¿ç¨Docker Swarmé¨ç½²Minio",frontmatter:{title:"ä½¿ç¨Docker Swarmé¨ç½²Minio",date:"2022-02-09T11:30:40.000Z",permalink:"/pages/b1ea49/"},regularPath:"/12.MinIO/05.Minio%E9%83%A8%E7%BD%B2/02.%E4%BD%BF%E7%94%A8Docker%20Swarm%E9%83%A8%E7%BD%B2Minio.html",relativePath:"12.MinIO/05.Minioé¨ç½²/02.ä½¿ç¨Docker Swarmé¨ç½²Minio.md",key:"v-03ae78c4",path:"/pages/b1ea49/",headers:[{level:2,title:"1. åææ¡ä»¶",slug:"_1-åææ¡ä»¶",normalizedTitle:"1. åææ¡ä»¶",charIndex:275},{level:2,title:"2. åå»ºSwarm",slug:"_2-åå»ºswarm",normalizedTitle:"2. åå»ºswarm",charIndex:486},{level:2,title:"3. ä¸ºMinioåå»ºDocker secret",slug:"_3-ä¸ºminioåå»ºdocker-secret",normalizedTitle:"3. ä¸ºminioåå»ºdocker secret",charIndex:820},{level:2,title:"4. é¨ç½²åå¸å¼minioæå¡",slug:"_4-é¨ç½²åå¸å¼minioæå¡",normalizedTitle:"4. é¨ç½²åå¸å¼minioæå¡",charIndex:998},{level:2,title:"4. å é¤åå¸å¼Minio services",slug:"_4-å é¤åå¸å¼minio-services",normalizedTitle:"4. å é¤åå¸å¼minio services",charIndex:1331},{level:3,title:"æ³¨æäºé¡¹",slug:"æ³¨æäºé¡¹",normalizedTitle:"æ³¨æäºé¡¹",charIndex:1627},{level:3,title:"äºè§£æ´å¤",slug:"äºè§£æ´å¤",normalizedTitle:"äºè§£æ´å¤",charIndex:2163}],headersStr:"1. åææ¡ä»¶ 2. åå»ºSwarm 3. ä¸ºMinioåå»ºDocker secret 4. é¨ç½²åå¸å¼minioæå¡ 4. å é¤åå¸å¼Minio services æ³¨æäºé¡¹ äºè§£æ´å¤",content:'# ä½¿ç¨Docker Swarmé¨ç½²Minio\n\nDocker Engineå¨Swarmæ¨¡å¼ä¸æä¾éç¾¤ç®¡çåç¼æåè½ã Minioæå¡å¨å¯ä»¥å¨Swarmçåå¸å¼æ¨¡å¼ä¸è½»æ¾é¨ç½²ï¼åå»ºä¸ä¸ªå¤ç§æ·ï¼é«å¯ç¨æ§åå¯æ©å±çå¯¹è±¡å­å¨ã\n\nä»Docker Engine v1.13.0 (Docker Compose v3.0)å¼å§, Docker SwarmåCompose äºècross-compatibleãè¿åè®¸å°Compose fileç¨ä½å¨Swarmä¸é¨ç½²æå¡çæ¨¡æ¿ã æä»¬ä½¿ç¨Docker Compose fileåå»ºåå¸å¼Minioè®¾ç½®ã\n\n\n# 1. åææ¡ä»¶\n\n * çæSwarm mode key concepts.\n\n * Docker engine v1.13.0è¿è¡å¨[networked host machines]éç¾¤ä¸(\n   \n   https://docs.docker.com/engine/swarm/swarm-tutorial/#/three-networked-host-machines\n   \n   ).\n   \n   \n   # 2. åå»ºSwarm\n\nå¨ç®¡çèç¹ä¸åå»ºä¸ä¸ªswarm,è¯·è¿è¡ä¸é¢çå½ä»¤\n\ndocker swarm init --advertise-addr <MANAGER-IP>\n\n\nä¸æ¦swarmåä½¿åäºï¼ä½ å¯ä»¥çå°ä¸é¢çååºä¿¡æ¯\n\ndocker swarm join \\  --token  SWMTKN-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c \\  192.168.99.100:2377\n\n\nä½ ç°å¨å¯ä»¥è¿è¡ä¸è¿°å½ä»¤æ·»å workerèç¹å°swarmãæ´å¤å³äºåå»ºswarmçç»èæ­¥éª¤ï¼è¯·è®¿é®Docker documentation site.\n\n\n# 3. ä¸ºMinioåå»ºDocker secret\n\necho "AKIAIOSFODNN7EXAMPLE" | docker secret create access_key -echo "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" | docker secret create secret_key -\n\n\n\n# 4. é¨ç½²åå¸å¼minioæå¡\n\nå¨ä½ çSwarm masterä¸ä¸è½½Docker Compose file ï¼ç¶åè¿è¡ä¸é¢çå½ä»¤\n\ndocker stack deploy --compose-file=docker-compose-secrets.yaml minio_stack\n\n\nè¿å°æCompose fileéæè¿°çæå¡é¨ç½²ä¸ºDocker stackminio_stackã æ´å¤ docker stack å½ä»¤åèã\n\nå¨stackæåé¨ç½²ä¹åï¼ä½ å¯ä»¥éè¿Minio Client mc æèæµè§å¨è®¿é®http://[Node_Public_IP_Address]:[Expose_Port_on_Host]æ¥è®¿é®ä½ çMinio serverã\n\n\n# 4. å é¤åå¸å¼Minio services\n\nå é¤åå¸å¼Minio servicesä»¥åç¸å³çç½ç»ï¼è¯·è¿è¡ä¸é¢çå½ä»¤\n\ndocker stack rm minio_stack\n\n\nSwarmä¸ä¼èªå¨å é¤ä¸ºMinioæå¡åå»ºçhost volumes,å¦æä¸æ¬¡æ°çMinioæå¡ä¸çå°swarmä¸ï¼å¯è½ä¼å¯¼è´æåãå æ­¤ï¼æä»¬å»ºè®®æå¨å é¤ææMinioä½¿ç¨çvolumesãä¸ºæ­¤ï¼å°æ¯ä¸ä¸ªswarmçèç¹ä¸ï¼ååºææçvolumes\n\ndocker volume ls\n\n\nç¶åå é¤minio_stack volumes\n\ndocker volume rm volume_name \n\n\n\n# æ³¨æäºé¡¹\n\n * é»è®¤æåµä¸Docker Compose fileä½¿ç¨çæ¯ææ°ççMinio serverçDockeréåï¼ä½ å¯ä»¥ä¿®æ¹image tagæ¥æåæå®çæ¬çMinio Docker image.\n * é»è®¤æåµä¸ä¼åå»º4ä¸ªminioå®ä¾ï¼ä½ å¯ä»¥æ·»å æ´å¤çMinioæå¡ï¼æå¤æ»å±16ä¸ªï¼å°ä½ çMinio Comose deploymentãæ·»å ä¸ä¸ªæå¡\n   * å¤å¶æå¡å®ä¹å¹¶éå½å°æ´æ¹æ°æå¡çåç§°ã\n   * æ´æ°æ¯ä¸ªæå¡ä¸­çå½ä»¤é¨åã\n   * æ´æ°è¦ä¸ºæ°æå¡å¬å¼çç«¯å£å·ã å¦å¤ï¼è¯·ç¡®ä¿åéç»æ°æå¡çç«¯å£å°æªä½¿ç¨ã å³äºåå¸å¼Minioçæ´å¤èµæï¼è¯·è®¿é®è¿é.\n * é»è®¤æåµä¸ï¼Minioæå¡ä½¿ç¨çæ¯local volume driver. æ´å¤éç½®éé¡¹ï¼è¯·è®¿é®Docker documentation ã\n * Docker compose fileä¸­çMinioæå¡ä½¿ç¨çç«¯å£æ¯9001å°9004ï¼è¿åè®¸å¤ä¸ªæå¡å¨ä¸»æºä¸è¿è¡ãæ´å¤éç½®éé¡¹ï¼è¯·è®¿é®Docker documentation.\n * Docker Swarmé»è®¤ä½¿ç¨çæ¯ingressåè´è½½åè¡¡ï¼ä½ å¯ä»¥è·æ®éè¦éç½®external load balancer basedã\n\n\n# äºè§£æ´å¤\n\n * Docker Swarm modeæ¦è¿°\n * Minio Dockerå¿«éå¥é¨\n * ä½¿ç¨Docker Composeé¨ç½²Minio\n * Minioçº å ç å¿«éå¥é¨\n\n> åæ: https://docs.min.io/docs/deploy-minio-on-docker-swarm.html',normalizedContent:'# ä½¿ç¨docker swarmé¨ç½²minio\n\ndocker engineå¨swarmæ¨¡å¼ä¸æä¾éç¾¤ç®¡çåç¼æåè½ã minioæå¡å¨å¯ä»¥å¨swarmçåå¸å¼æ¨¡å¼ä¸è½»æ¾é¨ç½²ï¼åå»ºä¸ä¸ªå¤ç§æ·ï¼é«å¯ç¨æ§åå¯æ©å±çå¯¹è±¡å­å¨ã\n\nä»docker engine v1.13.0 (docker compose v3.0)å¼å§, docker swarmåcompose äºècross-compatibleãè¿åè®¸å°compose fileç¨ä½å¨swarmä¸é¨ç½²æå¡çæ¨¡æ¿ã æä»¬ä½¿ç¨docker compose fileåå»ºåå¸å¼minioè®¾ç½®ã\n\n\n# 1. åææ¡ä»¶\n\n * çæswarm mode key concepts.\n\n * docker engine v1.13.0è¿è¡å¨[networked host machines]éç¾¤ä¸(\n   \n   https://docs.docker.com/engine/swarm/swarm-tutorial/#/three-networked-host-machines\n   \n   ).\n   \n   \n   # 2. åå»ºswarm\n\nå¨ç®¡çèç¹ä¸åå»ºä¸ä¸ªswarm,è¯·è¿è¡ä¸é¢çå½ä»¤\n\ndocker swarm init --advertise-addr <manager-ip>\n\n\nä¸æ¦swarmåä½¿åäºï¼ä½ å¯ä»¥çå°ä¸é¢çååºä¿¡æ¯\n\ndocker swarm join \\  --token  swmtkn-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c \\  192.168.99.100:2377\n\n\nä½ ç°å¨å¯ä»¥è¿è¡ä¸è¿°å½ä»¤æ·»å workerèç¹å°swarmãæ´å¤å³äºåå»ºswarmçç»èæ­¥éª¤ï¼è¯·è®¿é®docker documentation site.\n\n\n# 3. ä¸ºminioåå»ºdocker secret\n\necho "akiaiosfodnn7example" | docker secret create access_key -echo "wjalrxutnfemi/k7mdeng/bpxrficyexamplekey" | docker secret create secret_key -\n\n\n\n# 4. é¨ç½²åå¸å¼minioæå¡\n\nå¨ä½ çswarm masterä¸ä¸è½½docker compose file ï¼ç¶åè¿è¡ä¸é¢çå½ä»¤\n\ndocker stack deploy --compose-file=docker-compose-secrets.yaml minio_stack\n\n\nè¿å°æcompose fileéæè¿°çæå¡é¨ç½²ä¸ºdocker stackminio_stackã æ´å¤ docker stack å½ä»¤åèã\n\nå¨stackæåé¨ç½²ä¹åï¼ä½ å¯ä»¥éè¿minio client mc æèæµè§å¨è®¿é®http://[node_public_ip_address]:[expose_port_on_host]æ¥è®¿é®ä½ çminio serverã\n\n\n# 4. å é¤åå¸å¼minio services\n\nå é¤åå¸å¼minio servicesä»¥åç¸å³çç½ç»ï¼è¯·è¿è¡ä¸é¢çå½ä»¤\n\ndocker stack rm minio_stack\n\n\nswarmä¸ä¼èªå¨å é¤ä¸ºminioæå¡åå»ºçhost volumes,å¦æä¸æ¬¡æ°çminioæå¡ä¸çå°swarmä¸ï¼å¯è½ä¼å¯¼è´æåãå æ­¤ï¼æä»¬å»ºè®®æå¨å é¤ææminioä½¿ç¨çvolumesãä¸ºæ­¤ï¼å°æ¯ä¸ä¸ªswarmçèç¹ä¸ï¼ååºææçvolumes\n\ndocker volume ls\n\n\nç¶åå é¤minio_stack volumes\n\ndocker volume rm volume_name \n\n\n\n# æ³¨æäºé¡¹\n\n * é»è®¤æåµä¸docker compose fileä½¿ç¨çæ¯ææ°ççminio serverçdockeréåï¼ä½ å¯ä»¥ä¿®æ¹image tagæ¥æåæå®çæ¬çminio docker image.\n * é»è®¤æåµä¸ä¼åå»º4ä¸ªminioå®ä¾ï¼ä½ å¯ä»¥æ·»å æ´å¤çminioæå¡ï¼æå¤æ»å±16ä¸ªï¼å°ä½ çminio comose deploymentãæ·»å ä¸ä¸ªæå¡\n   * å¤å¶æå¡å®ä¹å¹¶éå½å°æ´æ¹æ°æå¡çåç§°ã\n   * æ´æ°æ¯ä¸ªæå¡ä¸­çå½ä»¤é¨åã\n   * æ´æ°è¦ä¸ºæ°æå¡å¬å¼çç«¯å£å·ã å¦å¤ï¼è¯·ç¡®ä¿åéç»æ°æå¡çç«¯å£å°æªä½¿ç¨ã å³äºåå¸å¼minioçæ´å¤èµæï¼è¯·è®¿é®è¿é.\n * é»è®¤æåµä¸ï¼minioæå¡ä½¿ç¨çæ¯local volume driver. æ´å¤éç½®éé¡¹ï¼è¯·è®¿é®docker documentation ã\n * docker compose fileä¸­çminioæå¡ä½¿ç¨çç«¯å£æ¯9001å°9004ï¼è¿åè®¸å¤ä¸ªæå¡å¨ä¸»æºä¸è¿è¡ãæ´å¤éç½®éé¡¹ï¼è¯·è®¿é®docker documentation.\n * docker swarmé»è®¤ä½¿ç¨çæ¯ingressåè´è½½åè¡¡ï¼ä½ å¯ä»¥è·æ®éè¦éç½®external load balancer basedã\n\n\n# äºè§£æ´å¤\n\n * docker swarm modeæ¦è¿°\n * minio dockerå¿«éå¥é¨\n * ä½¿ç¨docker composeé¨ç½²minio\n * minioçº å ç å¿«éå¥é¨\n\n> åæ: https://docs.min.io/docs/deploy-minio-on-docker-swarm.html',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"ä½¿ç¨Kubernetesé¨ç½²Minio",frontmatter:{title:"ä½¿ç¨Kubernetesé¨ç½²Minio",date:"2022-02-09T11:30:40.000Z",permalink:"/pages/01eafc/"},regularPath:"/12.MinIO/05.Minio%E9%83%A8%E7%BD%B2/03.%E4%BD%BF%E7%94%A8Kubernetes%E9%83%A8%E7%BD%B2Minio.html",relativePath:"12.MinIO/05.Minioé¨ç½²/03.ä½¿ç¨Kubernetesé¨ç½²Minio.md",key:"v-931f934a",path:"/pages/01eafc/",headers:[{level:2,title:"1. åææ¡ä»¶",slug:"_1-åææ¡ä»¶",normalizedTitle:"1. åææ¡ä»¶",charIndex:317},{level:2,title:"2. ä½¿ç¨Helm Charté¨ç½²Minio",slug:"_2-ä½¿ç¨helm-charté¨ç½²minio",normalizedTitle:"2. ä½¿ç¨helm charté¨ç½²minio",charIndex:502},{level:3,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:579},{level:3,title:"åå¸å¼Minio",slug:"åå¸å¼minio",normalizedTitle:"åå¸å¼minio",charIndex:2475},{level:3,title:"Shared Minio",slug:"shared-minio",normalizedTitle:"shared minio",charIndex:2965},{level:3,title:"æä¹å",slug:"æä¹å",normalizedTitle:"æä¹å",charIndex:2852},{level:2,title:"3. ä½¿ç¨Helmæ´æ°Minioçæ¬",slug:"_3-ä½¿ç¨helmæ´æ°minioçæ¬",normalizedTitle:"3. ä½¿ç¨helmæ´æ°minioçæ¬",charIndex:3525},{level:2,title:"4. å¸è½½Chart",slug:"_4-å¸è½½chart",normalizedTitle:"4. å¸è½½chart",charIndex:3807},{level:3,title:"æç¤º",slug:"æç¤º",normalizedTitle:"æç¤º",charIndex:3926}],headersStr:"1. åææ¡ä»¶ 2. ä½¿ç¨Helm Charté¨ç½²Minio éç½® åå¸å¼Minio Shared Minio æä¹å 3. ä½¿ç¨Helmæ´æ°Minioçæ¬ 4. å¸è½½Chart æç¤º",content:'# ä½¿ç¨Kubernetesé¨ç½²Minio\n\nKubernetesçé¨ç½²åç¶æéæä¾äºå¨ç¬ç«ï¼åå¸å¼æå±äº«æ¨¡å¼ä¸é¨ç½²Minioæå¡å¨çå®ç¾å¹³å°ã å¨Kubernetesä¸é¨ç½²Minioæå¤ç§éæ©ï¼æ¨å¯ä»¥éæ©æéåæ¨çã\n\n * Minio Helm Chartéè¿ä¸ä¸ªç®åçå½ä»¤å³å¯æä¾èªå®ä¹èä¸ç®åçMinioé¨ç½²ãæ´å¤å³äºMinio Helmé¨ç½²çèµæï¼è¯·è®¿é®è¿é.\n * ä½ ä¹å¯ä»¥æµè§Kubernetes Minioç¤ºä¾ ï¼éè¿.yamlæä»¶æ¥é¨ç½²Minioã\n * å¦ææ¨æ³å¨Kubernetesä¸å¼å§ä½¿ç¨Minioï¼èæ éåå»ºçæ­£çå®¹å¨éç¾¤ï¼æ¨ä¹å¯ä»¥ä½¿ç¨Minikube deploy Minio locallyã\n\n\n# 1. åææ¡ä»¶\n\n * é»è®¤standalineæ¨¡å¼ä¸ï¼éè¦å¼å¯Beta APIçKubernetes 1.4+ã\n\n * distributed æ¨¡å¼ï¼éè¦å¼å¯Beta APIçKubernetes 1.5+ã\n\n * åºå±æ¯æPV provisionerã\n\n * ä½ çK8séç¾¤ééè¦æHelm package manager\n\ninstalled\n\nã\n\n\n# 2. ä½¿ç¨Helm Charté¨ç½²Minio\n\nå®è£ Minio chart\n\n$ helm install stable/minio\n\n\nä»¥ä¸å½ä»¤ä»¥é»è®¤éç½®å¨Kubernetesç¾¤éä¸é¨ç½²Minioã ä»¥ä¸é¨åååºäºMinioå¾è¡¨çææå¯éç½®åæ°åå¶é»è®¤å¼ã\n\n\n# éç½®\n\nåæ°                         æè¿°                                                  é»è®¤å¼\nimage                      Minioéååç§°                                           minio/minio\nimageTag                   Minioéåtag. å¯éå¼å¨ è¿é.                                RELEASE.2017-08-05T00-00-53Z\nimagePullPolicy            Image pull policy                                   Always\nmode                       Minio serveræ¨¡å¼ (standalone, sharedæè distributed)   standalone\nnumberOfNodes              èç¹æ° (ä»å¯¹åå¸å¼æ¨¡å¼çæ). å¯éå¼ 4 <= x <= 16                   4\naccessKey                  é»è®¤access key                                        AKIAIOSFODNN7EXAMPLE\nsecretKey                  é»è®¤secret key                                        wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\nconfigPath                 é»è®¤éç½®æä»¶è·¯å¾                                            ~/.minio\nmountPath                  é»è®¤æè½½è·¯å¾                                              /export\nserviceType                Kubernetes service type                             LoadBalancer\nservicePort                Kubernetesç«¯å£                                        9000\npersistence.enabled        æ¯å¦ä½¿ç¨æä¹å·å­å¨æ°æ®                                         true\npersistence.size           æä¹å·å¤§å°                                               10Gi\npersistence.storageClass   æä¹å·ç±»å                                               generic\npersistence.accessMode     ReadWriteOnce æè ReadOnly                           ReadWriteOnce\nresources                  CPU/Memory èµæºéæ±/éå¶                                  Memory: 256Mi, CPU: 100m\n\nä½ å¯ä»¥éè¿âset key=value[,key=value]ç»helm installã æ¯å¦,\n\n$ helm install --name my-release \\  --set persistence.size=100Gi \\    stable/minio\n\n\nä¸è¿°å½ä»¤é¨ç½²äºä¸ä¸ªå¸¦ä¸100Gæä¹å·çMinioæå¡ã\n\næèï¼æ¨å¯ä»¥æä¾ä¸ä¸ªYAMLæä»¶ï¼ç¨äºå¨å®è£chartæ¶æå®åæ°å¼ã ä¾å¦ï¼\n\n$ helm install --name my-release -f values.yaml stable/minio\n\n\n\n# åå¸å¼Minio\n\né»è®¤æåµä¸ï¼æ­¤å¾è¡¨ä»¥ç¬ç«æ¨¡å¼æä¾Minioæå¡å¨ã è¦å¨åå¸å¼æ¨¡å¼ä¸­éç½®Minioæå¡å¨ï¼è¯·å°modeå­æ®µè®¾ç½®ä¸ºdistributed,\n\n$ helm install --set mode=distributed stable/minio\n\n\nä¸è¿°å½ä»¤é¨ç½²äºä¸ªå¸¦æ4ä¸ªèç¹çåå¸å¼Minioæå¡å¨ã è¦æ´æ¹åå¸å¼Minioæå¡å¨ä¸­çèç¹æ°ï¼è¯·è®¾ç½®numberOfNodeså±æ§ã\n\n$ helm install --set mode=distributed,numberOfNodes=8 stable/minio\n\n\nä¸è¿°å½ä»¤é¨ç½²äºä¸ªå¸¦æ8ä¸ªèç¹çåå¸å¼Minioæå¡å¨ãæ³¨æä¸ä¸ï¼numberOfNodesåå¼èå´æ¯[4,16]ã\n\n# StatefulSet éå¶ï¼éç¨äºåå¸å¼Minio\n\n * StatefulSetséè¦æä¹åå­å¨ï¼æä»¥å¦æ modeè®¾æ distributedçè¯ï¼persistence.enabledåæ°ä¸çæã\n\n * å¸è½½åå¸å¼Minioçæ¬æ¶ï¼éè¦æå¨å é¤ä¸StatefulSetå³èçå·ã\n   \n   \n   # Shared Minio\n\nå¦ééç¨shared modeé¨ç½²Minio, å°mode è®¾ä¸ºshared,\n\n$ helm install --set mode=shared stable/minio\n\n\nä¸è¿°å½ä»¤è§å®äº4ä¸ªMinioæå¡å¨èç¹ï¼ä¸ä¸ªå­å¨ã è¦æ´æ¹å±äº«çMinioé¨ç½²ä¸­çèç¹æ°ï¼è¯·è®¾ç½®numberOfNodeså­æ®µï¼\n\n$ helm install --set mode=shared,numberOfNodes=8 stable/minio\n\n\nä¸è¿°å½ä»¤è§å®äºMinioæå¡æ8ä¸ªèç¹ï¼éç¨sharedæ¨¡å¼ã\n\n\n# æä¹å\n\nè¿éè§å®äºPersistentVolumeClaimå¹¶å°ç¸åºçæä¹å·æè½½å°é»è®¤ä½ç½®/exportã æ¨éè¦Kuberneteséç¾¤ä¸­çç©çå­å¨æè½ä½¿å¶å·¥ä½ã å¦ææ¨å®æ¿ä½¿ç¨emptyDirï¼è¯·éè¿ä»¥ä¸æ¹å¼ç¦ç¨PersistentVolumeClaimï¼\n\n$ helm install --set persistence.enabled=false stable/minio\n\n\n> "å½Podåéç»èç¹æ¶ï¼é¦ååå»ºä¸ä¸ªemptyDirå·ï¼åªè¦è¯¥èç¹ä¸çPodæ­£å¨è¿è¡ï¼å®å°±ä¼å­å¨ã å½æä¸ªPodç±äºä»»ä½åå ä»èç¹ä¸­å é¤æ¶ï¼emptyDirä¸­çæ°æ®å°æ°¸ä¹å é¤ã"\n\n\n# 3. ä½¿ç¨Helmæ´æ°Minioçæ¬\n\næ¨å¯ä»¥æ´æ°ç°æçMinio Helm Releaseä»¥ä½¿ç¨è¾æ°çMinio Dockeréåã ä¸ºæ­¤ï¼è¯·ä½¿ç¨helm upgradeå½ä»¤ï¼\n\n$ helm upgrade --set imageTag=<replace-with-minio-docker-image-tag> <helm-release-name> stable/minio\n\n\nå¦ææ´æ°æåï¼ä½ å¯ä»¥çå°ä¸é¢çè¾åºä¿¡æ¯\n\nRelease "your-helm-release" has been upgraded. Happy Helming!\n\n\n\n# 4. å¸è½½Chart\n\nåè®¾ä½ ççæ¬è¢«å½åä¸ºmy-releaseï¼ä½¿ç¨ä¸é¢çå½ä»¤å é¤å®ï¼\n\n$ helm delete my-release\n\n\nè¯¥å½ä»¤å é¤ä¸chartå³èçææKubernetesç»ä»¶ï¼å¹¶å é¤è¯¥releaseã\n\n\n# æç¤º\n\n * å¨Kubernetesç¾¤éä¸­è¿è¡çchartçå®ä¾ç§°ä¸ºreleaseã å®è£chartåï¼Helmä¼èªå¨åéå¯ä¸çreleaseåç§°ã ä½ ä¹å¯ä»¥éè¿ä¸é¢çå½ä»¤è®¾ç½®ä½ å¿ä»ªçåç§°ï¼\n   \n   $ helm install --name my-release stable/minio\n   \n\n * ä¸ºäºè¦çé»è®¤çç§é¥ï¼å¯å¨è¿è¡helm installæ¶å°access keyåsecret keyåä¸ºåæ°ä¼ è¿å»ã\n   \n   $ helm install --set accessKey=myaccesskey,secretKey=mysecretkey \\  stable/minio\n   ',normalizedContent:'# ä½¿ç¨kubernetesé¨ç½²minio\n\nkubernetesçé¨ç½²åç¶æéæä¾äºå¨ç¬ç«ï¼åå¸å¼æå±äº«æ¨¡å¼ä¸é¨ç½²minioæå¡å¨çå®ç¾å¹³å°ã å¨kubernetesä¸é¨ç½²minioæå¤ç§éæ©ï¼æ¨å¯ä»¥éæ©æéåæ¨çã\n\n * minio helm chartéè¿ä¸ä¸ªç®åçå½ä»¤å³å¯æä¾èªå®ä¹èä¸ç®åçminioé¨ç½²ãæ´å¤å³äºminio helmé¨ç½²çèµæï¼è¯·è®¿é®è¿é.\n * ä½ ä¹å¯ä»¥æµè§kubernetes minioç¤ºä¾ ï¼éè¿.yamlæä»¶æ¥é¨ç½²minioã\n * å¦ææ¨æ³å¨kubernetesä¸å¼å§ä½¿ç¨minioï¼èæ éåå»ºçæ­£çå®¹å¨éç¾¤ï¼æ¨ä¹å¯ä»¥ä½¿ç¨minikube deploy minio locallyã\n\n\n# 1. åææ¡ä»¶\n\n * é»è®¤standalineæ¨¡å¼ä¸ï¼éè¦å¼å¯beta apiçkubernetes 1.4+ã\n\n * distributed æ¨¡å¼ï¼éè¦å¼å¯beta apiçkubernetes 1.5+ã\n\n * åºå±æ¯æpv provisionerã\n\n * ä½ çk8séç¾¤ééè¦æhelm package manager\n\ninstalled\n\nã\n\n\n# 2. ä½¿ç¨helm charté¨ç½²minio\n\nå®è£ minio chart\n\n$ helm install stable/minio\n\n\nä»¥ä¸å½ä»¤ä»¥é»è®¤éç½®å¨kubernetesç¾¤éä¸é¨ç½²minioã ä»¥ä¸é¨åååºäºminioå¾è¡¨çææå¯éç½®åæ°åå¶é»è®¤å¼ã\n\n\n# éç½®\n\nåæ°                         æè¿°                                                  é»è®¤å¼\nimage                      minioéååç§°                                           minio/minio\nimagetag                   minioéåtag. å¯éå¼å¨ è¿é.                                release.2017-08-05t00-00-53z\nimagepullpolicy            image pull policy                                   always\nmode                       minio serveræ¨¡å¼ (standalone, sharedæè distributed)   standalone\nnumberofnodes              èç¹æ° (ä»å¯¹åå¸å¼æ¨¡å¼çæ). å¯éå¼ 4 <= x <= 16                   4\naccesskey                  é»è®¤access key                                        akiaiosfodnn7example\nsecretkey                  é»è®¤secret key                                        wjalrxutnfemi/k7mdeng/bpxrficyexamplekey\nconfigpath                 é»è®¤éç½®æä»¶è·¯å¾                                            ~/.minio\nmountpath                  é»è®¤æè½½è·¯å¾                                              /export\nservicetype                kubernetes service type                             loadbalancer\nserviceport                kubernetesç«¯å£                                        9000\npersistence.enabled        æ¯å¦ä½¿ç¨æä¹å·å­å¨æ°æ®                                         true\npersistence.size           æä¹å·å¤§å°                                               10gi\npersistence.storageclass   æä¹å·ç±»å                                               generic\npersistence.accessmode     readwriteonce æè readonly                           readwriteonce\nresources                  cpu/memory èµæºéæ±/éå¶                                  memory: 256mi, cpu: 100m\n\nä½ å¯ä»¥éè¿âset key=value[,key=value]ç»helm installã æ¯å¦,\n\n$ helm install --name my-release \\  --set persistence.size=100gi \\    stable/minio\n\n\nä¸è¿°å½ä»¤é¨ç½²äºä¸ä¸ªå¸¦ä¸100gæä¹å·çminioæå¡ã\n\næèï¼æ¨å¯ä»¥æä¾ä¸ä¸ªyamlæä»¶ï¼ç¨äºå¨å®è£chartæ¶æå®åæ°å¼ã ä¾å¦ï¼\n\n$ helm install --name my-release -f values.yaml stable/minio\n\n\n\n# åå¸å¼minio\n\né»è®¤æåµä¸ï¼æ­¤å¾è¡¨ä»¥ç¬ç«æ¨¡å¼æä¾minioæå¡å¨ã è¦å¨åå¸å¼æ¨¡å¼ä¸­éç½®minioæå¡å¨ï¼è¯·å°modeå­æ®µè®¾ç½®ä¸ºdistributed,\n\n$ helm install --set mode=distributed stable/minio\n\n\nä¸è¿°å½ä»¤é¨ç½²äºä¸ªå¸¦æ4ä¸ªèç¹çåå¸å¼minioæå¡å¨ã è¦æ´æ¹åå¸å¼minioæå¡å¨ä¸­çèç¹æ°ï¼è¯·è®¾ç½®numberofnodeså±æ§ã\n\n$ helm install --set mode=distributed,numberofnodes=8 stable/minio\n\n\nä¸è¿°å½ä»¤é¨ç½²äºä¸ªå¸¦æ8ä¸ªèç¹çåå¸å¼minioæå¡å¨ãæ³¨æä¸ä¸ï¼numberofnodesåå¼èå´æ¯[4,16]ã\n\n# statefulset éå¶ï¼éç¨äºåå¸å¼minio\n\n * statefulsetséè¦æä¹åå­å¨ï¼æä»¥å¦æ modeè®¾æ distributedçè¯ï¼persistence.enabledåæ°ä¸çæã\n\n * å¸è½½åå¸å¼minioçæ¬æ¶ï¼éè¦æå¨å é¤ä¸statefulsetå³èçå·ã\n   \n   \n   # shared minio\n\nå¦ééç¨shared modeé¨ç½²minio, å°mode è®¾ä¸ºshared,\n\n$ helm install --set mode=shared stable/minio\n\n\nä¸è¿°å½ä»¤è§å®äº4ä¸ªminioæå¡å¨èç¹ï¼ä¸ä¸ªå­å¨ã è¦æ´æ¹å±äº«çminioé¨ç½²ä¸­çèç¹æ°ï¼è¯·è®¾ç½®numberofnodeså­æ®µï¼\n\n$ helm install --set mode=shared,numberofnodes=8 stable/minio\n\n\nä¸è¿°å½ä»¤è§å®äºminioæå¡æ8ä¸ªèç¹ï¼éç¨sharedæ¨¡å¼ã\n\n\n# æä¹å\n\nè¿éè§å®äºpersistentvolumeclaimå¹¶å°ç¸åºçæä¹å·æè½½å°é»è®¤ä½ç½®/exportã æ¨éè¦kuberneteséç¾¤ä¸­çç©çå­å¨æè½ä½¿å¶å·¥ä½ã å¦ææ¨å®æ¿ä½¿ç¨emptydirï¼è¯·éè¿ä»¥ä¸æ¹å¼ç¦ç¨persistentvolumeclaimï¼\n\n$ helm install --set persistence.enabled=false stable/minio\n\n\n> "å½podåéç»èç¹æ¶ï¼é¦ååå»ºä¸ä¸ªemptydirå·ï¼åªè¦è¯¥èç¹ä¸çpodæ­£å¨è¿è¡ï¼å®å°±ä¼å­å¨ã å½æä¸ªpodç±äºä»»ä½åå ä»èç¹ä¸­å é¤æ¶ï¼emptydirä¸­çæ°æ®å°æ°¸ä¹å é¤ã"\n\n\n# 3. ä½¿ç¨helmæ´æ°minioçæ¬\n\næ¨å¯ä»¥æ´æ°ç°æçminio helm releaseä»¥ä½¿ç¨è¾æ°çminio dockeréåã ä¸ºæ­¤ï¼è¯·ä½¿ç¨helm upgradeå½ä»¤ï¼\n\n$ helm upgrade --set imagetag=<replace-with-minio-docker-image-tag> <helm-release-name> stable/minio\n\n\nå¦ææ´æ°æåï¼ä½ å¯ä»¥çå°ä¸é¢çè¾åºä¿¡æ¯\n\nrelease "your-helm-release" has been upgraded. happy helming!\n\n\n\n# 4. å¸è½½chart\n\nåè®¾ä½ ççæ¬è¢«å½åä¸ºmy-releaseï¼ä½¿ç¨ä¸é¢çå½ä»¤å é¤å®ï¼\n\n$ helm delete my-release\n\n\nè¯¥å½ä»¤å é¤ä¸chartå³èçæækubernetesç»ä»¶ï¼å¹¶å é¤è¯¥releaseã\n\n\n# æç¤º\n\n * å¨kubernetesç¾¤éä¸­è¿è¡çchartçå®ä¾ç§°ä¸ºreleaseã å®è£chartåï¼helmä¼èªå¨åéå¯ä¸çreleaseåç§°ã ä½ ä¹å¯ä»¥éè¿ä¸é¢çå½ä»¤è®¾ç½®ä½ å¿ä»ªçåç§°ï¼\n   \n   $ helm install --name my-release stable/minio\n   \n\n * ä¸ºäºè¦çé»è®¤çç§é¥ï¼å¯å¨è¿è¡helm installæ¶å°access keyåsecret keyåä¸ºåæ°ä¼ è¿å»ã\n   \n   $ helm install --set accesskey=myaccesskey,secretkey=mysecretkey \\  stable/minio\n   ',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"å¨ Docker Compose ä¸é¨ç½² MinIO",frontmatter:{title:"å¨ Docker Compose ä¸é¨ç½² MinIO",date:"2022-02-09T11:30:40.000Z",permalink:"/pages/46c251/"},regularPath:"/12.MinIO/05.Minio%E9%83%A8%E7%BD%B2/04.%E5%9C%A8%20Docker%20Compose%20%E4%B8%8A%E9%83%A8%E7%BD%B2%20MinIO.html",relativePath:"12.MinIO/05.Minioé¨ç½²/04.å¨ Docker Compose ä¸é¨ç½² MinIO.md",key:"v-4b4c35dc",path:"/pages/46c251/",headers:[{level:2,title:"1. åå³æ¡ä»¶",slug:"_1-åå³æ¡ä»¶",normalizedTitle:"1. åå³æ¡ä»¶",charIndex:217},{level:2,title:"2. å¨ Docker Compose ä¸è¿è¡åå¸å¼ MinIO",slug:"_2-å¨-docker-compose-ä¸è¿è¡åå¸å¼-minio",normalizedTitle:"2. å¨ docker compose ä¸è¿è¡åå¸å¼ minio",charIndex:284},{level:3,title:"GNU/Linux å macOS",slug:"gnu-linux-å-macos",normalizedTitle:"gnu/linux å macos",charIndex:468},{level:3,title:"Windows",slug:"windows",normalizedTitle:"windows",charIndex:597},{level:3,title:"Notes",slug:"notes",normalizedTitle:"notes",charIndex:824},{level:3,title:"è¿ä¸æ­¥æ¢ç´¢",slug:"è¿ä¸æ­¥æ¢ç´¢",normalizedTitle:"è¿ä¸æ­¥æ¢ç´¢",charIndex:1126}],headersStr:"1. åå³æ¡ä»¶ 2. å¨ Docker Compose ä¸è¿è¡åå¸å¼ MinIO GNU/Linux å macOS Windows Notes è¿ä¸æ­¥æ¢ç´¢",content:"# å¨ Docker Compose ä¸é¨ç½² MinIO\n\nDocker Compose åè®¸å®ä¹åè¿è¡åä¸»æºãå¤å®¹å¨ Docker åºç¨ç¨åºã\n\nä½¿ç¨ Composeï¼æ¨å¯ä»¥ä½¿ç¨ Compose æä»¶æ¥éç½® MinIO æå¡ãç¶åï¼ä½¿ç¨åä¸ªå½ä»¤ï¼æ¨å¯ä»¥ä»æ¨çéç½®ä¸­åå»ºåå¯å¨ææåå¸å¼ MinIO å®ä¾ãåå¸å¼ MinIO å®ä¾å°é¨ç½²å¨åä¸ä¸»æºä¸çå¤ä¸ªå®¹å¨ä¸­ãè¿æ¯åºäºåå¸å¼ MinIO è®¾ç½®å¼åãæµè¯åç»å°ç¯å¢çå¥½æ¹æ³ã\n\n\n# 1. åå³æ¡ä»¶\n\n * çæDocker Composeã\n * Docker å®è£å¨æ¨çæºå¨ä¸ãä»è¿éä¸è½½ç¸å³çå®è£ç¨åºã\n\n\n# 2. å¨ Docker Compose ä¸è¿è¡åå¸å¼ MinIO\n\nè¦å¨ Docker Compose ä¸é¨ç½²åå¸å¼ MinIOï¼è¯·å°docker-compose.yamlånginx.confä¸è½½å°æ¨å½åçå·¥ä½ç®å½ãè¯·æ³¨æï¼Docker Compose ä¼æå MinIO Docker æ åï¼å æ­¤æ éæ¾å¼ä¸è½½ MinIO äºè¿å¶æä»¶ãç¶åè¿è¡ä»¥ä¸å½ä»¤ä¹ä¸\n\n\n# GNU/Linux å macOS\n\ndocker-compose pull\ndocker-compose up\n\n\næè\n\ndocker stack deploy --compose-file docker-compose.yaml minio\n\n\n\n# Windows\n\ndocker-compose.exe pull\ndocker-compose.exe up\n\n\næè\n\ndocker stack deploy --compose-file docker-compose.yaml minio\n\n\nç°å¨å¯ä»¥å¨ä¸»æºä¸ç 9000 ç«¯å£è®¿é®åå¸å¼å®ä¾ï¼ç»§ç»­è®¿é® Web æµè§å¨http://127.0.0.1:9000/ãè¿é 4 ä¸ª MinIO æå¡å¨å®ä¾éè¿ Nginx è´è½½åè¡¡è¿è¡ååä»£çã\n\n\n# Notes\n\n * é»è®¤æåµä¸ï¼Docker Compose æä»¶ä½¿ç¨ææ° MinIO æå¡å¨çæ¬ç Docker éåãæ¨å¯ä»¥æ´æ¹éåæ ç­¾ä»¥æåç¹å®çMinIO Docker éåã\n\n * é»è®¤åå»ºäº 4 ä¸ª minio åå¸å¼å®ä¾ãæ¨å¯ä»¥å MinIO Compose é¨ç½²æ·»å æ´å¤ MinIO æå¡ï¼æå¤ 16 ä¸ªï¼ãæ·»å æå¡\n   \n   * å¤å¶æå¡å®ä¹å¹¶éå½æ´æ¹æ°æå¡çåç§°ã\n   * æ´æ°æ¯ä¸ªæå¡ä¸­çå½ä»¤é¨åã\n   * å¨ Nginx éç½®æä»¶ä¸­ç upstream æä»¤ä¸­æ·»å ä¸ä¸ªæ°ç MinIO æå¡å¨å®ä¾ã\n   \n   å¨æ­¤å¤éè¯»æå³åå¸å¼ MinIO çæ´å¤ä¿¡æ¯ã\n\n\n# è¿ä¸æ­¥æ¢ç´¢\n\n * Docker Compose æ¦è¿°\n * MinIO Docker å¿«éå¥é¨æå\n * MinIO çº å ç å¿«éå¥é¨æå",normalizedContent:"# å¨ docker compose ä¸é¨ç½² minio\n\ndocker compose åè®¸å®ä¹åè¿è¡åä¸»æºãå¤å®¹å¨ docker åºç¨ç¨åºã\n\nä½¿ç¨ composeï¼æ¨å¯ä»¥ä½¿ç¨ compose æä»¶æ¥éç½® minio æå¡ãç¶åï¼ä½¿ç¨åä¸ªå½ä»¤ï¼æ¨å¯ä»¥ä»æ¨çéç½®ä¸­åå»ºåå¯å¨ææåå¸å¼ minio å®ä¾ãåå¸å¼ minio å®ä¾å°é¨ç½²å¨åä¸ä¸»æºä¸çå¤ä¸ªå®¹å¨ä¸­ãè¿æ¯åºäºåå¸å¼ minio è®¾ç½®å¼åãæµè¯åç»å°ç¯å¢çå¥½æ¹æ³ã\n\n\n# 1. åå³æ¡ä»¶\n\n * çædocker composeã\n * docker å®è£å¨æ¨çæºå¨ä¸ãä»è¿éä¸è½½ç¸å³çå®è£ç¨åºã\n\n\n# 2. å¨ docker compose ä¸è¿è¡åå¸å¼ minio\n\nè¦å¨ docker compose ä¸é¨ç½²åå¸å¼ minioï¼è¯·å°docker-compose.yamlånginx.confä¸è½½å°æ¨å½åçå·¥ä½ç®å½ãè¯·æ³¨æï¼docker compose ä¼æå minio docker æ åï¼å æ­¤æ éæ¾å¼ä¸è½½ minio äºè¿å¶æä»¶ãç¶åè¿è¡ä»¥ä¸å½ä»¤ä¹ä¸\n\n\n# gnu/linux å macos\n\ndocker-compose pull\ndocker-compose up\n\n\næè\n\ndocker stack deploy --compose-file docker-compose.yaml minio\n\n\n\n# windows\n\ndocker-compose.exe pull\ndocker-compose.exe up\n\n\næè\n\ndocker stack deploy --compose-file docker-compose.yaml minio\n\n\nç°å¨å¯ä»¥å¨ä¸»æºä¸ç 9000 ç«¯å£è®¿é®åå¸å¼å®ä¾ï¼ç»§ç»­è®¿é® web æµè§å¨http://127.0.0.1:9000/ãè¿é 4 ä¸ª minio æå¡å¨å®ä¾éè¿ nginx è´è½½åè¡¡è¿è¡ååä»£çã\n\n\n# notes\n\n * é»è®¤æåµä¸ï¼docker compose æä»¶ä½¿ç¨ææ° minio æå¡å¨çæ¬ç docker éåãæ¨å¯ä»¥æ´æ¹éåæ ç­¾ä»¥æåç¹å®çminio docker éåã\n\n * é»è®¤åå»ºäº 4 ä¸ª minio åå¸å¼å®ä¾ãæ¨å¯ä»¥å minio compose é¨ç½²æ·»å æ´å¤ minio æå¡ï¼æå¤ 16 ä¸ªï¼ãæ·»å æå¡\n   \n   * å¤å¶æå¡å®ä¹å¹¶éå½æ´æ¹æ°æå¡çåç§°ã\n   * æ´æ°æ¯ä¸ªæå¡ä¸­çå½ä»¤é¨åã\n   * å¨ nginx éç½®æä»¶ä¸­ç upstream æä»¤ä¸­æ·»å ä¸ä¸ªæ°ç minio æå¡å¨å®ä¾ã\n   \n   å¨æ­¤å¤éè¯»æå³åå¸å¼ minio çæ´å¤ä¿¡æ¯ã\n\n\n# è¿ä¸æ­¥æ¢ç´¢\n\n * docker compose æ¦è¿°\n * minio docker å¿«éå¥é¨æå\n * minio çº å ç å¿«éå¥é¨æå",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"RabbitMQ å¿«éå¥é¨",frontmatter:{title:"RabbitMQ å¿«éå¥é¨",date:"2022-02-09T11:31:48.000Z",permalink:"/pages/1a684e/"},regularPath:"/13.RabbitMQ/01.%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/02.RabbitMQ%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"13.RabbitMQ/01.å¿«éå¥é¨/02.RabbitMQ å¿«éå¥é¨.md",key:"v-0a92eeec",path:"/pages/1a684e/",headers:[{level:2,title:"æç»´å¯¼å¾",slug:"æç»´å¯¼å¾",normalizedTitle:"æç»´å¯¼å¾",charIndex:20},{level:2,title:"ä»ä¹æ¯æ¶æ¯éå",slug:"ä»ä¹æ¯æ¶æ¯éå",normalizedTitle:"ä»ä¹æ¯æ¶æ¯éå",charIndex:31},{level:2,title:"ä¸ºä»ä¹ä½¿ç¨æ¶æ¯éå",slug:"ä¸ºä»ä¹ä½¿ç¨æ¶æ¯éå",normalizedTitle:"ä¸ºä»ä¹ä½¿ç¨æ¶æ¯éå",charIndex:224},{level:2,title:"RabbitMQ çç¹ç¹",slug:"rabbitmq-çç¹ç¹",normalizedTitle:"rabbitmq çç¹ç¹",charIndex:824},{level:2,title:"RabbitMQ çå·¥ä½åç",slug:"rabbitmq-çå·¥ä½åç",normalizedTitle:"rabbitmq çå·¥ä½åç",charIndex:1303}],headersStr:"æç»´å¯¼å¾ ä»ä¹æ¯æ¶æ¯éå ä¸ºä»ä¹ä½¿ç¨æ¶æ¯éå RabbitMQ çç¹ç¹ RabbitMQ çå·¥ä½åç",content:"# RabbitMQ å¿«éå¥é¨\n\n\n# æç»´å¯¼å¾\n\n\n\n\n# ä»ä¹æ¯æ¶æ¯éå\n\næ¶æ¯æçæ¯ä¸¤ä¸ªåºç¨é´ä¼ éçæ°æ®ãæ°æ®çç±»åæå¾å¤ç§å½¢å¼ï¼å¯è½åªåå«ææ¬å­ç¬¦ä¸²ï¼ä¹å¯è½åå«åµå¥å¯¹è±¡ã\n\nâæ¶æ¯éå(Message Queue)âæ¯å¨æ¶æ¯çä¼ è¾è¿ç¨ä¸­ä¿å­æ¶æ¯çå®¹å¨ãå¨æ¶æ¯éåä¸­ï¼éå¸¸æçäº§èåæ¶è´¹èä¸¤ä¸ªè§è²ãçäº§èåªè´è´£åéæ°æ®å°æ¶æ¯éåï¼è°ä»æ¶æ¯éåä¸­ååºæ°æ®å¤çï¼ä»ä¸ç®¡ãæ¶è´¹èåªè´è´£ä»æ¶æ¯éåä¸­ååºæ°æ®å¤çï¼ä»ä¸ç®¡è¿æ¯è°åéçæ°æ®ã\n\n\n\n\n# ä¸ºä»ä¹ä½¿ç¨æ¶æ¯éå\n\nä¸»è¦æä¸ä¸ªä½ç¨ï¼\n\n * è§£è¦ãå¦å¾æç¤ºãåè®¾æç³»ç»BãCãDé½éè¦ç³»ç»Açæ°æ®ï¼äºæ¯ç³»ç»Aè°ç¨ä¸ä¸ªæ¹æ³åéæ°æ®å°BãCãDãè¿æ¶ï¼ç³»ç»Dä¸éè¦äºï¼é£å°±éè¦å¨ç³»ç»Aæç¸å³çä»£ç å æãåè®¾è¿æ¶æä¸ªæ°çç³»ç»Eéè¦æ°æ®ï¼è¿æ¶ç³»ç»Aåè¦å¢å è°ç¨ç³»ç»Eçä»£ç ãä¸ºäºéä½è¿ç§å¼ºè¦åï¼å°±å¯ä»¥ä½¿ç¨MQï¼ç³»ç»Aåªéè¦ææ°æ®åéå°MQï¼å¶ä»ç³»ç»å¦æéè¦æ°æ®ï¼åä»MQä¸­è·åå³å¯ã\n\n\n\n * å¼æ­¥ãå¦å¾æç¤ºãä¸ä¸ªå®¢æ·ç«¯è¯·æ±åéè¿æ¥ï¼ç³»ç»Aä¼è°ç¨ç³»ç»BãCãDä¸ä¸ªç³»ç»ï¼åæ­¥è¯·æ±çè¯ï¼ååºæ¶é´å°±æ¯ç³»ç»AãBãCãDçæ»åï¼ä¹å°±æ¯800msãå¦æä½¿ç¨MQï¼ç³»ç»Aåéæ°æ®å°MQï¼ç¶åå°±å¯ä»¥è¿åååºç»å®¢æ·ç«¯ï¼ä¸éè¦åç­å¾ç³»ç»BãCãDçååºï¼å¯ä»¥å¤§å¤§å°æé«æ§è½ãå¯¹äºä¸äºéå¿è¦çä¸å¡ï¼æ¯å¦åéç­ä¿¡ï¼åéé®ä»¶ç­ç­ï¼å°±å¯ä»¥éç¨MQã\n\n\n\n * åå³°ãå¦å¾æç¤ºãè¿å¶å®æ¯MQä¸ä¸ªå¾éè¦çåºç¨ãåè®¾ç³»ç»Aå¨æä¸æ®µæ¶é´è¯·æ±æ°æ´å¢ï¼æ5000ä¸ªè¯·æ±åéè¿æ¥ï¼ç³»ç»Aè¿æ¶å°±ä¼åé5000æ¡SQLè¿å¥MySQLè¿è¡æ§è¡ï¼MySQLå¯¹äºå¦æ­¤åºå¤§çè¯·æ±å½ç¶å¤çä¸è¿æ¥ï¼MySQLå°±ä¼å´©æºï¼å¯¼è´ç³»ç»ç«çªãå¦æä½¿ç¨MQï¼ç³»ç»Aä¸åæ¯ç´æ¥åéSQLå°æ°æ®åºï¼èæ¯ææ°æ®åéå°MQï¼MQç­æ¶é´ç§¯åæ°æ®æ¯å¯ä»¥æ¥åçï¼ç¶åç±æ¶è´¹èæ¯æ¬¡æå2000æ¡è¿è¡å¤çï¼é²æ­¢å¨è¯·æ±å³°å¼æ¶æå¤§éçè¯·æ±ç´æ¥åéå°MySQLå¯¼è´ç³»ç»å´©æºã\n\n\n\n\n# RabbitMQ çç¹ç¹\n\nRabbitMQæ¯ä¸æ¬¾ä½¿ç¨Erlangè¯­è¨å¼åçï¼å®ç°AMQP(é«çº§æ¶æ¯éååè®®)çå¼æºæ¶æ¯ä¸­é´ä»¶ãé¦åè¦ç¥éä¸äºRabbitMQçç¹ç¹ï¼å®ç½å¯æ¥ï¼\n\n * å¯é æ§ãæ¯ææä¹åï¼ä¼ è¾ç¡®è®¤ï¼åå¸ç¡®è®¤ç­ä¿è¯äºMQçå¯é æ§ã\n\n * çµæ´»çååæ¶æ¯ç­ç¥ãè¿åºè¯¥æ¯RabbitMQçä¸å¤§ç¹ç¹ãå¨æ¶æ¯è¿å¥MQåç±Exchange(äº¤æ¢æº)è¿è¡è·¯ç±æ¶æ¯ãååæ¶æ¯ç­ç¥æï¼ç®åæ¨¡å¼ãå·¥ä½éåæ¨¡å¼ãåå¸è®¢éæ¨¡å¼ãè·¯ç±æ¨¡å¼ãééç¬¦æ¨¡å¼ã\n\n * æ¯æéç¾¤ãå¤å°RabbitMQæå¡å¨å¯ä»¥ç»æä¸ä¸ªéç¾¤ï¼å½¢æä¸ä¸ªé»è¾Brokerã\n\n * å¤ç§åè®®ãRabbitMQæ¯æå¤ç§æ¶æ¯éååè®®ï¼æ¯å¦ STOMPãMQTT ç­ç­ã\n\n * æ¯æå¤ç§è¯­è¨å®¢æ·ç«¯ãRabbitMQå ä¹æ¯æææå¸¸ç¨ç¼ç¨è¯­è¨ï¼åæ¬ Javaã.NETãRuby ç­ç­ã\n\n * å¯è§åç®¡ççé¢ãRabbitMQæä¾äºä¸ä¸ªæç¨çç¨æ·çé¢ï¼ä½¿å¾ç¨æ·å¯ä»¥çæ§åç®¡çæ¶æ¯ Brokerã\n\n * æä»¶æºå¶ãRabbitMQæä¾äºè®¸å¤æä»¶ï¼å¯ä»¥éè¿æä»¶è¿è¡æ©å±ï¼ä¹å¯ä»¥ç¼åèªå·±çæä»¶ã\n\n\n# RabbitMQ çå·¥ä½åç\n\nä¸å¾æ¯RabbitMQçåºæ¬ç»æï¼\n\n\n\nç»æé¨åè¯´æï¼\n\n * Brokerï¼æ¶æ¯éåæå¡è¿ç¨ï¼æ­¤è¿ç¨åæ¬ä¸¤ä¸ªé¨åï¼ExchangeåQueue\n\n * Exchangeï¼æ¶æ¯éåäº¤æ¢æºï¼æä¸å®çè§åå°æ¶æ¯è·¯ç±è½¬åå°æä¸ªéåï¼å¯¹æ¶æ¯è¿è¡è¿èã\n\n * Queueï¼æ¶æ¯éåï¼å­å¨æ¶æ¯çéåï¼æ¶æ¯å°è¾¾éåå¹¶è½¬åç»æå®ç\n\n * Producerï¼æ¶æ¯çäº§èï¼å³çäº§æ¹å®¢æ·ç«¯ï¼çäº§æ¹å®¢æ·ç«¯å°æ¶æ¯åé\n\n * Consumerï¼æ¶æ¯æ¶è´¹èï¼å³æ¶è´¹æ¹å®¢æ·ç«¯ï¼æ¥æ¶MQè½¬åçæ¶æ¯ã\n\nçäº§èåéæ¶æ¯æµç¨ï¼\n\n1ãçäº§èåBrokerå»ºç«TCPè¿æ¥ã\n\n2ãçäº§èåBrokerå»ºç«ééã\n\n3ãçäº§èéè¿ééæ¶æ¯åéç»Brokerï¼ç±Exchangeå°æ¶æ¯è¿è¡è½¬åã\n\n4ãExchangeå°æ¶æ¯è½¬åå°æå®çQueueï¼éåï¼\n\næ¶è´¹èæ¥æ¶æ¶æ¯æµç¨ï¼\n\n1ãæ¶è´¹èåBrokerå»ºç«TCPè¿æ¥\n\n2ãæ¶è´¹èåBrokerå»ºç«éé\n\n3ãæ¶è´¹èçå¬æå®çQueueï¼éåï¼\n\n4ãå½ææ¶æ¯å°è¾¾Queueæ¶Brokeré»è®¤å°æ¶æ¯æ¨éç»æ¶è´¹èã\n\n5ãæ¶è´¹èæ¥æ¶å°æ¶æ¯ã\n\n6ãackåå¤",normalizedContent:"# rabbitmq å¿«éå¥é¨\n\n\n# æç»´å¯¼å¾\n\n\n\n\n# ä»ä¹æ¯æ¶æ¯éå\n\næ¶æ¯æçæ¯ä¸¤ä¸ªåºç¨é´ä¼ éçæ°æ®ãæ°æ®çç±»åæå¾å¤ç§å½¢å¼ï¼å¯è½åªåå«ææ¬å­ç¬¦ä¸²ï¼ä¹å¯è½åå«åµå¥å¯¹è±¡ã\n\nâæ¶æ¯éå(message queue)âæ¯å¨æ¶æ¯çä¼ è¾è¿ç¨ä¸­ä¿å­æ¶æ¯çå®¹å¨ãå¨æ¶æ¯éåä¸­ï¼éå¸¸æçäº§èåæ¶è´¹èä¸¤ä¸ªè§è²ãçäº§èåªè´è´£åéæ°æ®å°æ¶æ¯éåï¼è°ä»æ¶æ¯éåä¸­ååºæ°æ®å¤çï¼ä»ä¸ç®¡ãæ¶è´¹èåªè´è´£ä»æ¶æ¯éåä¸­ååºæ°æ®å¤çï¼ä»ä¸ç®¡è¿æ¯è°åéçæ°æ®ã\n\n\n\n\n# ä¸ºä»ä¹ä½¿ç¨æ¶æ¯éå\n\nä¸»è¦æä¸ä¸ªä½ç¨ï¼\n\n * è§£è¦ãå¦å¾æç¤ºãåè®¾æç³»ç»bãcãdé½éè¦ç³»ç»açæ°æ®ï¼äºæ¯ç³»ç»aè°ç¨ä¸ä¸ªæ¹æ³åéæ°æ®å°bãcãdãè¿æ¶ï¼ç³»ç»dä¸éè¦äºï¼é£å°±éè¦å¨ç³»ç»aæç¸å³çä»£ç å æãåè®¾è¿æ¶æä¸ªæ°çç³»ç»eéè¦æ°æ®ï¼è¿æ¶ç³»ç»aåè¦å¢å è°ç¨ç³»ç»eçä»£ç ãä¸ºäºéä½è¿ç§å¼ºè¦åï¼å°±å¯ä»¥ä½¿ç¨mqï¼ç³»ç»aåªéè¦ææ°æ®åéå°mqï¼å¶ä»ç³»ç»å¦æéè¦æ°æ®ï¼åä»mqä¸­è·åå³å¯ã\n\n\n\n * å¼æ­¥ãå¦å¾æç¤ºãä¸ä¸ªå®¢æ·ç«¯è¯·æ±åéè¿æ¥ï¼ç³»ç»aä¼è°ç¨ç³»ç»bãcãdä¸ä¸ªç³»ç»ï¼åæ­¥è¯·æ±çè¯ï¼ååºæ¶é´å°±æ¯ç³»ç»aãbãcãdçæ»åï¼ä¹å°±æ¯800msãå¦æä½¿ç¨mqï¼ç³»ç»aåéæ°æ®å°mqï¼ç¶åå°±å¯ä»¥è¿åååºç»å®¢æ·ç«¯ï¼ä¸éè¦åç­å¾ç³»ç»bãcãdçååºï¼å¯ä»¥å¤§å¤§å°æé«æ§è½ãå¯¹äºä¸äºéå¿è¦çä¸å¡ï¼æ¯å¦åéç­ä¿¡ï¼åéé®ä»¶ç­ç­ï¼å°±å¯ä»¥éç¨mqã\n\n\n\n * åå³°ãå¦å¾æç¤ºãè¿å¶å®æ¯mqä¸ä¸ªå¾éè¦çåºç¨ãåè®¾ç³»ç»aå¨æä¸æ®µæ¶é´è¯·æ±æ°æ´å¢ï¼æ5000ä¸ªè¯·æ±åéè¿æ¥ï¼ç³»ç»aè¿æ¶å°±ä¼åé5000æ¡sqlè¿å¥mysqlè¿è¡æ§è¡ï¼mysqlå¯¹äºå¦æ­¤åºå¤§çè¯·æ±å½ç¶å¤çä¸è¿æ¥ï¼mysqlå°±ä¼å´©æºï¼å¯¼è´ç³»ç»ç«çªãå¦æä½¿ç¨mqï¼ç³»ç»aä¸åæ¯ç´æ¥åésqlå°æ°æ®åºï¼èæ¯ææ°æ®åéå°mqï¼mqç­æ¶é´ç§¯åæ°æ®æ¯å¯ä»¥æ¥åçï¼ç¶åç±æ¶è´¹èæ¯æ¬¡æå2000æ¡è¿è¡å¤çï¼é²æ­¢å¨è¯·æ±å³°å¼æ¶æå¤§éçè¯·æ±ç´æ¥åéå°mysqlå¯¼è´ç³»ç»å´©æºã\n\n\n\n\n# rabbitmq çç¹ç¹\n\nrabbitmqæ¯ä¸æ¬¾ä½¿ç¨erlangè¯­è¨å¼åçï¼å®ç°amqp(é«çº§æ¶æ¯éååè®®)çå¼æºæ¶æ¯ä¸­é´ä»¶ãé¦åè¦ç¥éä¸äºrabbitmqçç¹ç¹ï¼å®ç½å¯æ¥ï¼\n\n * å¯é æ§ãæ¯ææä¹åï¼ä¼ è¾ç¡®è®¤ï¼åå¸ç¡®è®¤ç­ä¿è¯äºmqçå¯é æ§ã\n\n * çµæ´»çååæ¶æ¯ç­ç¥ãè¿åºè¯¥æ¯rabbitmqçä¸å¤§ç¹ç¹ãå¨æ¶æ¯è¿å¥mqåç±exchange(äº¤æ¢æº)è¿è¡è·¯ç±æ¶æ¯ãååæ¶æ¯ç­ç¥æï¼ç®åæ¨¡å¼ãå·¥ä½éåæ¨¡å¼ãåå¸è®¢éæ¨¡å¼ãè·¯ç±æ¨¡å¼ãééç¬¦æ¨¡å¼ã\n\n * æ¯æéç¾¤ãå¤å°rabbitmqæå¡å¨å¯ä»¥ç»æä¸ä¸ªéç¾¤ï¼å½¢æä¸ä¸ªé»è¾brokerã\n\n * å¤ç§åè®®ãrabbitmqæ¯æå¤ç§æ¶æ¯éååè®®ï¼æ¯å¦ stompãmqtt ç­ç­ã\n\n * æ¯æå¤ç§è¯­è¨å®¢æ·ç«¯ãrabbitmqå ä¹æ¯æææå¸¸ç¨ç¼ç¨è¯­è¨ï¼åæ¬ javaã.netãruby ç­ç­ã\n\n * å¯è§åç®¡ççé¢ãrabbitmqæä¾äºä¸ä¸ªæç¨çç¨æ·çé¢ï¼ä½¿å¾ç¨æ·å¯ä»¥çæ§åç®¡çæ¶æ¯ brokerã\n\n * æä»¶æºå¶ãrabbitmqæä¾äºè®¸å¤æä»¶ï¼å¯ä»¥éè¿æä»¶è¿è¡æ©å±ï¼ä¹å¯ä»¥ç¼åèªå·±çæä»¶ã\n\n\n# rabbitmq çå·¥ä½åç\n\nä¸å¾æ¯rabbitmqçåºæ¬ç»æï¼\n\n\n\nç»æé¨åè¯´æï¼\n\n * brokerï¼æ¶æ¯éåæå¡è¿ç¨ï¼æ­¤è¿ç¨åæ¬ä¸¤ä¸ªé¨åï¼exchangeåqueue\n\n * exchangeï¼æ¶æ¯éåäº¤æ¢æºï¼æä¸å®çè§åå°æ¶æ¯è·¯ç±è½¬åå°æä¸ªéåï¼å¯¹æ¶æ¯è¿è¡è¿èã\n\n * queueï¼æ¶æ¯éåï¼å­å¨æ¶æ¯çéåï¼æ¶æ¯å°è¾¾éåå¹¶è½¬åç»æå®ç\n\n * producerï¼æ¶æ¯çäº§èï¼å³çäº§æ¹å®¢æ·ç«¯ï¼çäº§æ¹å®¢æ·ç«¯å°æ¶æ¯åé\n\n * consumerï¼æ¶æ¯æ¶è´¹èï¼å³æ¶è´¹æ¹å®¢æ·ç«¯ï¼æ¥æ¶mqè½¬åçæ¶æ¯ã\n\nçäº§èåéæ¶æ¯æµç¨ï¼\n\n1ãçäº§èåbrokerå»ºç«tcpè¿æ¥ã\n\n2ãçäº§èåbrokerå»ºç«ééã\n\n3ãçäº§èéè¿ééæ¶æ¯åéç»brokerï¼ç±exchangeå°æ¶æ¯è¿è¡è½¬åã\n\n4ãexchangeå°æ¶æ¯è½¬åå°æå®çqueueï¼éåï¼\n\næ¶è´¹èæ¥æ¶æ¶æ¯æµç¨ï¼\n\n1ãæ¶è´¹èåbrokerå»ºç«tcpè¿æ¥\n\n2ãæ¶è´¹èåbrokerå»ºç«éé\n\n3ãæ¶è´¹èçå¬æå®çqueueï¼éåï¼\n\n4ãå½ææ¶æ¯å°è¾¾queueæ¶brokeré»è®¤å°æ¶æ¯æ¨éç»æ¶è´¹èã\n\n5ãæ¶è´¹èæ¥æ¶å°æ¶æ¯ã\n\n6ãackåå¤",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"RabbitMQ ç®ä»",frontmatter:{title:"RabbitMQ ç®ä»",date:"2022-02-09T11:31:48.000Z",permalink:"/pages/d710e9/"},regularPath:"/13.RabbitMQ/01.%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/01.RabbitMQ%20%E7%AE%80%E4%BB%8B.html",relativePath:"13.RabbitMQ/01.å¿«éå¥é¨/01.RabbitMQ ç®ä».md",key:"v-c205d0b2",path:"/pages/d710e9/",headers:[{level:2,title:"ä»ä¹æ¯æ¶æ¯éå",slug:"ä»ä¹æ¯æ¶æ¯éå",normalizedTitle:"ä»ä¹æ¯æ¶æ¯éå",charIndex:537},{level:2,title:"æ¶æ¯éååºç¨åºæ¯",slug:"æ¶æ¯éååºç¨åºæ¯",normalizedTitle:"æ¶æ¯éååºç¨åºæ¯",charIndex:705},{level:2,title:"AMQPåJMS",slug:"amqpåjms",normalizedTitle:"amqpåjms",charIndex:973},{level:2,title:"å¸¸è§MQäº§å",slug:"å¸¸è§mqäº§å",normalizedTitle:"å¸¸è§mqäº§å",charIndex:1169}],headersStr:"ä»ä¹æ¯æ¶æ¯éå æ¶æ¯éååºç¨åºæ¯ AMQPåJMS å¸¸è§MQäº§å",content:"# RabbitMQ ç®ä»\n\nå¨ä»ç»RabbitMQä¹åï¼æä»¬åæ¥çä¸é¢ä¸ä¸ªçµåé¡¹ç®çåºæ¯ï¼\n\n * ååçåå§æ°æ®ä¿å­å¨æ°æ®åºä¸­ï¼å¢å æ¹æ¥é½å¨æ°æ®åºä¸­å®æã\n * æç´¢æå¡æ°æ®æ¥æºæ¯ç´¢å¼åº Elasticsearchï¼å¦ææ°æ®åºåååçååï¼ç´¢å¼åºæ°æ®ä¸è½åæ¶æ´æ°ã\n * ååè¯¦æåäºé¡µé¢éæåå¤çï¼éæé¡µé¢æ°æ®ä¹ä¸ä¼éçæ°æ®åºååæ´æ°èååã\n\nå¦ææä»¬å¨åå°ä¿®æ¹äºååçä»·æ ¼ï¼æç´¢é¡µé¢åååè¯¦æé¡µæ¾ç¤ºçä¾ç¶æ¯æ§çä»·æ ¼ï¼è¿æ ·æ¾ç¶ä¸å¯¹ãè¯¥å¦ä½è§£å³ï¼\n\næä»¬å¯è½ä¼æ³å°è¿ä¹åï¼\n\n * æ¹æ¡1ï¼æ¯å½åå°å¯¹åååå¢å æ¹æä½ï¼åæ¶ä¿®æ¹ç´¢å¼åºæ°æ®åæ´æ°éæé¡µé¢ã\n * æ¹æ¡2ï¼æç´¢æå¡åååé¡µé¢éæåæå¡å¯¹å¤æä¾æä½æ¥å£ï¼åå°å¨ååå¢å æ¹åï¼è°ç¨æ¥å£ã\n\nè¿ä¸¤ç§æ¹æ¡é½æä¸ªä¸¥éçé®é¢ï¼å°±æ¯ä»£ç è¦åï¼åå°æå¡ä¸­éè¦åµå¥æç´¢åååé¡µé¢æå¡ï¼è¿èäºå¾®æå¡çç¬ç«ååã\n\nè¿æ¶ï¼æä»¬å°±ä¼éç¨å¦å¤ä¸ç§è§£å³åæ³ï¼é£å°±æ¯æ¶æ¯éåï¼\n\nååæå¡å¯¹ååå¢å æ¹ä»¥åï¼æ éå»æä½ç´¢å¼åºåéæé¡µé¢ï¼åªéåMQåéä¸æ¡æ¶æ¯ï¼æ¯å¦åå«ååidçæ¶æ¯ï¼ï¼ä¹ä¸å³å¿æ¶æ¯è¢«è°æ¥æ¶ãæç´¢æå¡åéæé¡µé¢æå¡çå¬MQï¼æ¥æ¶æ¶æ¯ï¼ç¶ååå«å»å¤çç´¢å¼åºåéæé¡µé¢ï¼æ ¹æ®ååidå»æ´æ°ç´¢å¼åºåååè¯¦æéæé¡µé¢ï¼ã\n\n\n# ä»ä¹æ¯æ¶æ¯éå\n\nMQå¨ç§°ä¸ºMessage Queueï¼å³æ¶æ¯éå ãâæ¶æ¯éåâæ¯å¨æ¶æ¯çä¼ è¾è¿ç¨ä¸­ä¿å­æ¶æ¯çå®¹å¨ãå®æ¯å¸åçï¼çäº§èãæ¶è´¹èæ¨¡åãçäº§èä¸æ­åæ¶æ¯éåä¸­çäº§æ¶æ¯ï¼æ¶è´¹èä¸æ­çä»éåä¸­è·åæ¶æ¯ãå ä¸ºæ¶æ¯ççäº§åæ¶è´¹é½æ¯å¼æ­¥çï¼èä¸åªå³å¿æ¶æ¯çåéåæ¥æ¶ï¼æ²¡æä¸å¡é»è¾çä¾µå¥ï¼è¿æ ·å°±å®ç°äºçäº§èåæ¶è´¹èçè§£è¦ã\n\n\n# æ¶æ¯éååºç¨åºæ¯\n\n1ãä»»å¡å¼æ­¥å¤çï¼\n\né«å¹¶åç¯å¢ä¸ï¼ç±äºæ¥ä¸ååæ­¥å¤çï¼è¯·æ±å¾å¾ä¼åçå µå¡ï¼æ¯å¦è¯´ï¼å¤§éçinsertï¼updateä¹ç±»çè¯·æ±åæ¶å°è¾¾MySQLï¼ç´æ¥å¯¼è´æ æ°çè¡éè¡¨éï¼çè³æåè¯·æ±ä¼å ç§¯è¿å¤ï¼ä»èè§¦åtoo many connectionséè¯¯ãéè¿ä½¿ç¨æ¶æ¯éåï¼æä»¬å¯ä»¥å¼æ­¥å¤çè¯·æ±ï¼ä»èç¼è§£ç³»ç»çååãå°ä¸éè¦åæ­¥å¤ççå¹¶ä¸èæ¶é¿çæä½ç±æ¶æ¯éåéç¥æ¶æ¯æ¥æ¶æ¹è¿è¡å¼æ­¥å¤çãåå°äºåºç¨ç¨åºçååºæ¶é´ã\n\n2ãåºç¨ç¨åºè§£è¦åï¼\n\nMQç¸å½äºä¸ä¸ªä¸­ä»ï¼çäº§æ¹éè¿MQä¸æ¶è´¹æ¹äº¤äºï¼å®å°åºç¨ç¨åºè¿è¡è§£è¦åã\n\n\n# AMQPåJMS\n\nMQæ¯æ¶æ¯éä¿¡çæ¨¡åï¼å¹¶åå·ä½å®ç°ãç°å¨å®ç°MQçæä¸¤ç§ä¸»æµæ¹å¼ï¼AMQPãJMSã\n\nä¸¤èé´çåºå«åèç³»ï¼\n\n * JMSæ¯å®ä¹äºç»ä¸çæ¥å£ï¼æ¥å¯¹æ¶æ¯æä½è¿è¡ç»ä¸ï¼AMQPæ¯éè¿è§å®åè®®æ¥ç»ä¸æ°æ®äº¤äºçæ ¼å¼\n * JMSéå®äºå¿é¡»ä½¿ç¨Javaè¯­è¨ï¼AMQPåªæ¯åè®®ï¼ä¸è§å®å®ç°æ¹å¼ï¼å æ­¤æ¯è·¨è¯­è¨çã\n * JMSè§å®äºä¸¤ç§æ¶æ¯æ¨¡åï¼èAMQPçæ¶æ¯æ¨¡åæ´å ä¸°å¯\n\n\n# å¸¸è§MQäº§å\n\n * ActiveMQï¼åºäºJMS\n * RabbitMQï¼åºäºAMQPåè®®ï¼erlangè¯­è¨å¼åï¼ç¨³å®æ§å¥½\n * RocketMQï¼åºäºJMSï¼é¿éå·´å·´äº§åï¼ç®åäº¤ç±Apacheåºéä¼\n * Kafkaï¼åå¸å¼æ¶æ¯ç³»ç»ï¼é«ååé",normalizedContent:"# rabbitmq ç®ä»\n\nå¨ä»ç»rabbitmqä¹åï¼æä»¬åæ¥çä¸é¢ä¸ä¸ªçµåé¡¹ç®çåºæ¯ï¼\n\n * ååçåå§æ°æ®ä¿å­å¨æ°æ®åºä¸­ï¼å¢å æ¹æ¥é½å¨æ°æ®åºä¸­å®æã\n * æç´¢æå¡æ°æ®æ¥æºæ¯ç´¢å¼åº elasticsearchï¼å¦ææ°æ®åºåååçååï¼ç´¢å¼åºæ°æ®ä¸è½åæ¶æ´æ°ã\n * ååè¯¦æåäºé¡µé¢éæåå¤çï¼éæé¡µé¢æ°æ®ä¹ä¸ä¼éçæ°æ®åºååæ´æ°èååã\n\nå¦ææä»¬å¨åå°ä¿®æ¹äºååçä»·æ ¼ï¼æç´¢é¡µé¢åååè¯¦æé¡µæ¾ç¤ºçä¾ç¶æ¯æ§çä»·æ ¼ï¼è¿æ ·æ¾ç¶ä¸å¯¹ãè¯¥å¦ä½è§£å³ï¼\n\næä»¬å¯è½ä¼æ³å°è¿ä¹åï¼\n\n * æ¹æ¡1ï¼æ¯å½åå°å¯¹åååå¢å æ¹æä½ï¼åæ¶ä¿®æ¹ç´¢å¼åºæ°æ®åæ´æ°éæé¡µé¢ã\n * æ¹æ¡2ï¼æç´¢æå¡åååé¡µé¢éæåæå¡å¯¹å¤æä¾æä½æ¥å£ï¼åå°å¨ååå¢å æ¹åï¼è°ç¨æ¥å£ã\n\nè¿ä¸¤ç§æ¹æ¡é½æä¸ªä¸¥éçé®é¢ï¼å°±æ¯ä»£ç è¦åï¼åå°æå¡ä¸­éè¦åµå¥æç´¢åååé¡µé¢æå¡ï¼è¿èäºå¾®æå¡çç¬ç«ååã\n\nè¿æ¶ï¼æä»¬å°±ä¼éç¨å¦å¤ä¸ç§è§£å³åæ³ï¼é£å°±æ¯æ¶æ¯éåï¼\n\nååæå¡å¯¹ååå¢å æ¹ä»¥åï¼æ éå»æä½ç´¢å¼åºåéæé¡µé¢ï¼åªéåmqåéä¸æ¡æ¶æ¯ï¼æ¯å¦åå«ååidçæ¶æ¯ï¼ï¼ä¹ä¸å³å¿æ¶æ¯è¢«è°æ¥æ¶ãæç´¢æå¡åéæé¡µé¢æå¡çå¬mqï¼æ¥æ¶æ¶æ¯ï¼ç¶ååå«å»å¤çç´¢å¼åºåéæé¡µé¢ï¼æ ¹æ®ååidå»æ´æ°ç´¢å¼åºåååè¯¦æéæé¡µé¢ï¼ã\n\n\n# ä»ä¹æ¯æ¶æ¯éå\n\nmqå¨ç§°ä¸ºmessage queueï¼å³æ¶æ¯éå ãâæ¶æ¯éåâæ¯å¨æ¶æ¯çä¼ è¾è¿ç¨ä¸­ä¿å­æ¶æ¯çå®¹å¨ãå®æ¯å¸åçï¼çäº§èãæ¶è´¹èæ¨¡åãçäº§èä¸æ­åæ¶æ¯éåä¸­çäº§æ¶æ¯ï¼æ¶è´¹èä¸æ­çä»éåä¸­è·åæ¶æ¯ãå ä¸ºæ¶æ¯ççäº§åæ¶è´¹é½æ¯å¼æ­¥çï¼èä¸åªå³å¿æ¶æ¯çåéåæ¥æ¶ï¼æ²¡æä¸å¡é»è¾çä¾µå¥ï¼è¿æ ·å°±å®ç°äºçäº§èåæ¶è´¹èçè§£è¦ã\n\n\n# æ¶æ¯éååºç¨åºæ¯\n\n1ãä»»å¡å¼æ­¥å¤çï¼\n\né«å¹¶åç¯å¢ä¸ï¼ç±äºæ¥ä¸ååæ­¥å¤çï¼è¯·æ±å¾å¾ä¼åçå µå¡ï¼æ¯å¦è¯´ï¼å¤§éçinsertï¼updateä¹ç±»çè¯·æ±åæ¶å°è¾¾mysqlï¼ç´æ¥å¯¼è´æ æ°çè¡éè¡¨éï¼çè³æåè¯·æ±ä¼å ç§¯è¿å¤ï¼ä»èè§¦åtoo many connectionséè¯¯ãéè¿ä½¿ç¨æ¶æ¯éåï¼æä»¬å¯ä»¥å¼æ­¥å¤çè¯·æ±ï¼ä»èç¼è§£ç³»ç»çååãå°ä¸éè¦åæ­¥å¤ççå¹¶ä¸èæ¶é¿çæä½ç±æ¶æ¯éåéç¥æ¶æ¯æ¥æ¶æ¹è¿è¡å¼æ­¥å¤çãåå°äºåºç¨ç¨åºçååºæ¶é´ã\n\n2ãåºç¨ç¨åºè§£è¦åï¼\n\nmqç¸å½äºä¸ä¸ªä¸­ä»ï¼çäº§æ¹éè¿mqä¸æ¶è´¹æ¹äº¤äºï¼å®å°åºç¨ç¨åºè¿è¡è§£è¦åã\n\n\n# amqpåjms\n\nmqæ¯æ¶æ¯éä¿¡çæ¨¡åï¼å¹¶åå·ä½å®ç°ãç°å¨å®ç°mqçæä¸¤ç§ä¸»æµæ¹å¼ï¼amqpãjmsã\n\nä¸¤èé´çåºå«åèç³»ï¼\n\n * jmsæ¯å®ä¹äºç»ä¸çæ¥å£ï¼æ¥å¯¹æ¶æ¯æä½è¿è¡ç»ä¸ï¼amqpæ¯éè¿è§å®åè®®æ¥ç»ä¸æ°æ®äº¤äºçæ ¼å¼\n * jmséå®äºå¿é¡»ä½¿ç¨javaè¯­è¨ï¼amqpåªæ¯åè®®ï¼ä¸è§å®å®ç°æ¹å¼ï¼å æ­¤æ¯è·¨è¯­è¨çã\n * jmsè§å®äºä¸¤ç§æ¶æ¯æ¨¡åï¼èamqpçæ¶æ¯æ¨¡åæ´å ä¸°å¯\n\n\n# å¸¸è§mqäº§å\n\n * activemqï¼åºäºjms\n * rabbitmqï¼åºäºamqpåè®®ï¼erlangè¯­è¨å¼åï¼ç¨³å®æ§å¥½\n * rocketmqï¼åºäºjmsï¼é¿éå·´å·´äº§åï¼ç®åäº¤ç±apacheåºéä¼\n * kafkaï¼åå¸å¼æ¶æ¯ç³»ç»ï¼é«ååé",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"RabbitMQ æ¶æ¯æ¨¡å",frontmatter:{title:"RabbitMQ æ¶æ¯æ¨¡å",date:"2022-02-09T11:31:48.000Z",permalink:"/pages/05a61a/"},regularPath:"/13.RabbitMQ/01.%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/03.RabbitMQ%20%E6%B6%88%E6%81%AF%E6%A8%A1%E5%9E%8B.html",relativePath:"13.RabbitMQ/01.å¿«éå¥é¨/03.RabbitMQ æ¶æ¯æ¨¡å.md",key:"v-50673fcc",path:"/pages/05a61a/",headers:[{level:2,title:"åºæ¬æ¶æ¯æ¨¡å",slug:"åºæ¬æ¶æ¯æ¨¡å",normalizedTitle:"åºæ¬æ¶æ¯æ¨¡å",charIndex:22},{level:2,title:"æ¶æ¯ç¡®è®¤æºå¶ï¼ACKï¼",slug:"æ¶æ¯ç¡®è®¤æºå¶-ack",normalizedTitle:"æ¶æ¯ç¡®è®¤æºå¶ï¼ackï¼",charIndex:32},{level:3,title:"æ¼ç¤ºæå¨ACK",slug:"æ¼ç¤ºæå¨ack",normalizedTitle:"æ¼ç¤ºæå¨ack",charIndex:49},{level:2,title:"workæ¶æ¯æ¨¡å",slug:"workæ¶æ¯æ¨¡å",normalizedTitle:"workæ¶æ¯æ¨¡å",charIndex:60},{level:2,title:"Publish/subscribeï¼äº¤æ¢æºç±»åï¼Fanoutï¼ä¹ç§°ä¸ºå¹¿æ­ï¼",slug:"publish-subscribe-äº¤æ¢æºç±»å-fanout-ä¹ç§°ä¸ºå¹¿æ­",normalizedTitle:"publish/subscribeï¼äº¤æ¢æºç±»åï¼fanoutï¼ä¹ç§°ä¸ºå¹¿æ­ï¼",charIndex:72},{level:3,title:"çäº§è",slug:"çäº§è",normalizedTitle:"çäº§è",charIndex:115},{level:3,title:"æ¶è´¹è1 ï¼æ³¨åæååç»ç­ä¿¡æå¡ï¼",slug:"æ¶è´¹è1-æ³¨åæååç»ç­ä¿¡æå¡",normalizedTitle:"æ¶è´¹è1 ï¼æ³¨åæååç»ç­ä¿¡æå¡ï¼",charIndex:124},{level:3,title:"æ¶è´¹è2ï¼æ³¨åæååç»é®ä»¶æå¡ï¼",slug:"æ¶è´¹è2-æ³¨åæååç»é®ä»¶æå¡",normalizedTitle:"æ¶è´¹è2ï¼æ³¨åæååç»é®ä»¶æå¡ï¼",charIndex:147},{level:3,title:"æèï¼",slug:"æè",normalizedTitle:"æèï¼",charIndex:169},{level:2,title:"Routing è·¯ç±æ¨¡åï¼äº¤æ¢æºç±»åï¼directï¼",slug:"routing-è·¯ç±æ¨¡å-äº¤æ¢æºç±»å-direct",normalizedTitle:"routing è·¯ç±æ¨¡åï¼äº¤æ¢æºç±»åï¼directï¼",charIndex:176},{level:3,title:"æ¶è´¹è1",slug:"æ¶è´¹è1",normalizedTitle:"æ¶è´¹è1",charIndex:124},{level:3,title:"æ¶è´¹è2",slug:"æ¶è´¹è2",normalizedTitle:"æ¶è´¹è2",charIndex:147},{level:2,title:"Topics ééç¬¦æ¨¡å¼ï¼äº¤æ¢æºç±»åï¼topicsï¼",slug:"topics-ééç¬¦æ¨¡å¼-äº¤æ¢æºç±»å-topics",normalizedTitle:"topics ééç¬¦æ¨¡å¼ï¼äº¤æ¢æºç±»åï¼topicsï¼",charIndex:226},{level:3,title:"çäº§è",slug:"çäº§è-2",normalizedTitle:"çäº§è",charIndex:115},{level:3,title:"æ¶è´¹è1",slug:"æ¶è´¹è1-2",normalizedTitle:"æ¶è´¹è1",charIndex:124},{level:3,title:"æ¶è´¹è2",slug:"æ¶è´¹è2-2",normalizedTitle:"æ¶è´¹è2",charIndex:147},{level:2,title:"RPC",slug:"rpc",normalizedTitle:"rpc",charIndex:285},{level:3,title:"åäº«ä¸¤éé¢è¯é¢ï¼",slug:"åäº«ä¸¤éé¢è¯é¢",normalizedTitle:"åäº«ä¸¤éé¢è¯é¢ï¼",charIndex:294},{level:3,title:"äº¤æ¢æºæä¹å",slug:"äº¤æ¢æºæä¹å",normalizedTitle:"äº¤æ¢æºæä¹å",charIndex:308},{level:3,title:"éåæä¹å",slug:"éåæä¹å",normalizedTitle:"éåæä¹å",charIndex:320},{level:3,title:"æ¶æ¯æä¹å",slug:"æ¶æ¯æä¹å",normalizedTitle:"æ¶æ¯æä¹å",charIndex:331}],headersStr:"åºæ¬æ¶æ¯æ¨¡å æ¶æ¯ç¡®è®¤æºå¶ï¼ACKï¼ æ¼ç¤ºæå¨ACK workæ¶æ¯æ¨¡å Publish/subscribeï¼äº¤æ¢æºç±»åï¼Fanoutï¼ä¹ç§°ä¸ºå¹¿æ­ï¼ çäº§è æ¶è´¹è1 ï¼æ³¨åæååç»ç­ä¿¡æå¡ï¼ æ¶è´¹è2ï¼æ³¨åæååç»é®ä»¶æå¡ï¼ æèï¼ Routing è·¯ç±æ¨¡åï¼äº¤æ¢æºç±»åï¼directï¼ æ¶è´¹è1 æ¶è´¹è2 Topics ééç¬¦æ¨¡å¼ï¼äº¤æ¢æºç±»åï¼topicsï¼ çäº§è æ¶è´¹è1 æ¶è´¹è2 RPC åäº«ä¸¤éé¢è¯é¢ï¼ äº¤æ¢æºæä¹å éåæä¹å æ¶æ¯æä¹å",content:'# RabbitMQ æ¶æ¯æ¨¡å\n\n\n\n * åºæ¬æ¶æ¯æ¨¡å\n * æ¶æ¯ç¡®è®¤æºå¶ï¼ACKï¼\n   * æ¼ç¤ºæå¨ACK\n * workæ¶æ¯æ¨¡å\n * Publish/subscribeï¼äº¤æ¢æºç±»åï¼Fanoutï¼ä¹ç§°ä¸ºå¹¿æ­ï¼\n   * çäº§è\n   * æ¶è´¹è1 ï¼æ³¨åæååç»ç­ä¿¡æå¡ï¼\n   * æ¶è´¹è2ï¼æ³¨åæååç»é®ä»¶æå¡ï¼\n   * æèï¼\n * Routing è·¯ç±æ¨¡åï¼äº¤æ¢æºç±»åï¼directï¼\n   * æ¶è´¹è1\n   * æ¶è´¹è2\n * Topics ééç¬¦æ¨¡å¼ï¼äº¤æ¢æºç±»åï¼topicsï¼\n   * çäº§è\n   * æ¶è´¹è1\n   * æ¶è´¹è2\n * RPC\n   * åäº«ä¸¤éé¢è¯é¢ï¼\n   * äº¤æ¢æºæä¹å\n   * éåæä¹å\n   * æ¶æ¯æä¹å\n\n\n\n\n# åºæ¬æ¶æ¯æ¨¡å\n\nå¨ä¸å¾çæ¨¡åä¸­ï¼æä»¥ä¸æ¦å¿µï¼\n\n\n\n * Pï¼çäº§èï¼ä¹å°±æ¯è¦åéæ¶æ¯çç¨åº\n\n * Cï¼æ¶è´¹èï¼æ¶æ¯çæ¥åèï¼ä¼ä¸ç´ç­å¾æ¶æ¯å°æ¥ã\n\n * queueï¼æ¶æ¯éåï¼å¾ä¸­çº¢è²é¨åãå¯ä»¥ç¼å­æ¶æ¯ï¼çäº§èåå¶ä¸­æéæ¶æ¯ï¼æ¶è´¹èä»å¶ä¸­ååºæ¶æ¯ã\n\nçäº§è\n\næ°å»ºä¸ä¸ªmavenå·¥ç¨ï¼æ·»å amqp-clientä¾èµã\n\n<dependency>\n    <groupId>com.rabbitmq</groupId>\n    <artifactId>amqp-client</artifactId>\n    <version>5.14.0</version>\n</dependency>\n\n\nè¿æ¥å·¥å·ç±»ï¼\n\npackage com.pigxcloud.rabbitmq.demo;\n\nimport com.rabbitmq.client.Connection;\nimport com.rabbitmq.client.ConnectionFactory;\n\n/**\n * RabbitMQ è¿æ¥å·¥å·\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class ConnectionUtil {\n\n    /**\n     * è·å¾RabbitMQè¿æ¥\n     *\n     * @return com.rabbitmq.client.Connection\n     * @throws Exception\n     */\n    public static Connection getConnection() throws Exception {\n\n        // åå»ºè¿æ¥å·¥å\n        ConnectionFactory factory = new ConnectionFactory();\n        // è®¾ç½®æå¡å°å\n        factory.setHost("192.168.100.100");\n        // è®¾ç½®ç«¯å£\n        factory.setPort(5672);\n        // è®¾ç½®èææºï¼ä¸ä¸ªmqæå¡å¯ä»¥è®¾ç½®å¤ä¸ªèææºï¼æ¯ä¸ªèææºå°±ç¸å½äºä¸ä¸ªç¬ç«çmq\n        factory.setVirtualHost("/");\n        // è®¾ç½®è´¦å·ä¿¡æ¯ï¼ç¨æ·åãå¯ç \n        factory.setUsername("rabbit");\n        factory.setPassword("rabbit123");\n\n        // éè¿å·¥åè·åè¿æ¥\n        return factory.newConnection();\n    }\n}\n\n\n\nçäº§èåéæ¶æ¯ï¼\n\npackage com.pigxcloud.rabbitmq.demo;\n\n\nimport com.rabbitmq.client.Channel;\nimport com.rabbitmq.client.Connection;\n\n/**\n * çäº§èåéæ¶æ¯\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class Send {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "simple_queue";\n\n    public static void main(String[] args) throws Exception {\n        // 1ãè·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        Channel channel = connection.createChannel();\n        /**\n         * 3ãå£°æï¼åå»ºï¼éå\n         * åæ°ï¼String queue, boolean durable, boolean exclusive, boolean autoDelete, Map<String, Object> arguments\n         * 1ãqueue éååç§°\n         * 2ãdurable æ¯å¦æä¹åï¼å¦ææä¹åï¼mqéå¯åéåè¿å¨\n         * 3ãexclusive æ¯å¦ç¬å è¿æ¥ï¼éååªåè®¸å¨è¯¥è¿æ¥ä¸­è®¿é®ï¼å¦æconnectionè¿æ¥å³é­éååèªå¨å é¤,å¦æå°æ­¤åæ°è®¾ç½®trueå¯ç¨äºä¸´æ¶éåçåå»º\n         * 4ãautoDelete èªå¨å é¤ï¼éåä¸åä½¿ç¨æ¶æ¯å¦èªå¨å é¤æ­¤éåï¼å¦æå°æ­¤åæ°åexclusiveåæ°è®¾ç½®ä¸ºtrueå°±å¯ä»¥å®ç°ä¸´æ¶éåï¼éåä¸ç¨äºå°±èªå¨å é¤ï¼\n         * 5ãarguments åæ°ï¼å¯ä»¥è®¾ç½®ä¸ä¸ªéåçæ©å±åæ°ï¼æ¯å¦ï¼å¯è®¾ç½®å­æ´»æ¶é´\n         */\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // 4ãæ¶æ¯åå®¹\n        String message = "Hello World!";\n        /**\n         * åæå®çéåä¸­åéæ¶æ¯\n         * åæ°ï¼String exchange, String routingKey, BasicProperties props, byte[] body\n         * 1ãexchangeï¼äº¤æ¢æºï¼å¦æä¸æå®å°ä½¿ç¨mqçé»è®¤äº¤æ¢æºï¼è®¾ç½®ä¸º""ï¼\n         * 2ãroutingKeyï¼è·¯ç±keyï¼äº¤æ¢æºæ ¹æ®è·¯ç±keyæ¥å°æ¶æ¯è½¬åå°æå®çéåï¼å¦æä½¿ç¨é»è®¤äº¤æ¢æºï¼routingKeyè®¾ç½®ä¸ºéåçåç§°\n         * 3ãpropsï¼æ¶æ¯çå±æ§\n         * 4ãbodyï¼æ¶æ¯åå®¹\n         */\n        channel.basicPublish("", QUEUE_NAME, null, message.getBytes());\n        System.out.println(" [x] Sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥(èµæºå³é­æå¥½ç¨try-catch-finallyè¯­å¥å¤ç)\n        channel.close();\n        connection.close();\n    }\n}\n\n\næ§å¶å°ï¼\n\n"D:\\Program Files\\Java\\jdk-11.0.13\\bin\\java.exe" ...\n [x] Sent \'Hello World!\'\n\n\nwebç®¡çé¡µé¢ï¼æå¡å¨å°å/ç«¯å£å· ï¼æ¬å°ï¼127.0.0.1:15672ï¼é»è®¤ç¨æ·åå¯ç ï¼rabbit/rabbit123ï¼\n\n\n\nç¹å»éååç§°ï¼è¿å¥è¯¦æé¡µï¼å¯ä»¥æ¥çæ¶æ¯ï¼\n\n\n\næ¶è´¹èæ¥æ¶æ¶æ¯\n\npackage com.pigxcloud.rabbitmq.demo;\n\nimport com.rabbitmq.client.*;\n\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\n\n/**\n * æ¶è´¹èæ¥æ¶æ¶æ¯\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class Recv {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "simple_queue";\n\n    public static void main(String[] args) throws Exception {\n        // 1ãè·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        Channel channel = connection.createChannel();\n        /**\n         * 3ãå£°æï¼åå»ºï¼éå\n         * åæ°ï¼String queue, boolean durable, boolean exclusive, boolean autoDelete, Map<String, Object> arguments\n         * 1ãqueue éååç§°\n         * 2ãdurable æ¯å¦æä¹åï¼å¦ææä¹åï¼mqéå¯åéåè¿å¨\n         * 3ãexclusive æ¯å¦ç¬å è¿æ¥ï¼éååªåè®¸å¨è¯¥è¿æ¥ä¸­è®¿é®ï¼å¦æconnectionè¿æ¥å³é­éååèªå¨å é¤,å¦æå°æ­¤åæ°è®¾ç½®trueå¯ç¨äºä¸´æ¶éåçåå»º\n         * 4ãautoDelete èªå¨å é¤ï¼éåä¸åä½¿ç¨æ¶æ¯å¦èªå¨å é¤æ­¤éåï¼å¦æå°æ­¤åæ°åexclusiveåæ°è®¾ç½®ä¸ºtrueå°±å¯ä»¥å®ç°ä¸´æ¶éåï¼éåä¸ç¨äºå°±èªå¨å é¤ï¼\n         * 5ãarguments åæ°ï¼å¯ä»¥è®¾ç½®ä¸ä¸ªéåçæ©å±åæ°ï¼æ¯å¦ï¼å¯è®¾ç½®å­æ´»æ¶é´\n         */\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n\n            /**\n             * å½æ¥æ¶å°æ¶æ¯åæ­¤æ¹æ³å°è¢«è°ç¨\n             * @param consumerTag  æ¶è´¹èæ ç­¾ï¼ç¨æ¥æ è¯æ¶è´¹èçï¼å¨çå¬éåæ¶è®¾ç½®channel.basicConsume\n             * @param envelope ä¿¡å°ï¼éè¿envelope\n             * @param properties æ¶æ¯å±æ§\n             * @param body æ¶æ¯åå®¹\n             * @throws IOException\n             */\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException {\n                //äº¤æ¢æº\n                String exchange = envelope.getExchange();\n                //æ¶æ¯idï¼mqå¨channelä¸­ç¨æ¥æ è¯æ¶æ¯çidï¼å¯ç¨äºç¡®è®¤æ¶æ¯å·²æ¥æ¶\n                long deliveryTag = envelope.getDeliveryTag();\n                // body å³æ¶æ¯ä½\n                String msg = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [x] received : " + msg + "!");\n            }\n        };\n\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°ï¼æ¯å¦èªå¨è¿è¡æ¶æ¯ç¡®è®¤ã\n        //åæ°ï¼String queue, boolean autoAck, Consumer callback\n        /**\n         * åæ°æç»ï¼\n         * 1ãqueue éååç§°\n         * 2ãautoAck èªå¨åå¤ï¼å½æ¶è´¹èæ¥æ¶å°æ¶æ¯åè¦åè¯mqæ¶æ¯å·²æ¥æ¶ï¼å¦æå°æ­¤åæ°è®¾ç½®ä¸ºtruè¡¨ç¤ºä¼èªå¨åå¤mqï¼å¦æè®¾ç½®ä¸ºfalseè¦éè¿ç¼ç¨å®ç°åå¤\n         * 3ãcallbackï¼æ¶è´¹æ¹æ³ï¼å½æ¶è´¹èæ¥æ¶å°æ¶æ¯è¦æ§è¡çæ¹æ³\n         */\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\n\næ§å¶å°æå°ï¼\n\n"D:\\Program Files\\Java\\jdk-11.0.13\\bin\\java.exe" ...\n [x] Received \'Hello World!\'\n\n\nåççéåçæ¶æ¯,å·²ç»è¢«æ¶è´¹äº\n\n\n\næä»¬åç°ï¼æ¶è´¹èå·²ç»è·åäºæ¶æ¯ï¼ä½æ¯ç¨åºæ²¡æåæ­¢ï¼ä¸ç´å¨çå¬éåä¸­æ¯å¦ææ°çæ¶æ¯ãä¸æ¦ææ°çæ¶æ¯è¿å¥éåï¼å°±ä¼ç«å³æå°ã\n\n\n# æ¶æ¯ç¡®è®¤æºå¶ï¼ACKï¼\n\néè¿åæçæ¡ä¾å¯ä»¥çåºï¼æ¶æ¯ä¸æ¦è¢«æ¶è´¹èæ¥æ¶ï¼éåä¸­çæ¶æ¯å°±ä¼è¢«å é¤ã\n\né£ä¹é®é¢æ¥äºï¼RabbitMQæä¹ç¥éæ¶æ¯è¢«æ¥æ¶äºå¢ï¼\n\nå¦ææ¶è´¹èé¢åæ¶æ¯åï¼è¿æ²¡æ§è¡æä½å°±ææäºå¢ï¼æèæåºäºå¼å¸¸ï¼æ¶æ¯æ¶è´¹å¤±è´¥ï¼ä½æ¯RabbitMQæ ä»å¾ç¥ï¼è¿æ ·æ¶æ¯å°±ä¸¢å¤±äºï¼\n\nå æ­¤ï¼RabbitMQæä¸ä¸ªACKæºå¶ãå½æ¶è´¹èè·åæ¶æ¯åï¼ä¼åRabbitMQåéåæ§ACKï¼åç¥æ¶æ¯å·²ç»è¢«æ¥æ¶ãä¸è¿è¿ç§åæ§ACKåä¸¤ç§æåµï¼\n\n * èªå¨ACKï¼æ¶æ¯ä¸æ¦è¢«æ¥æ¶ï¼æ¶è´¹èèªå¨åéACK\n\n * æå¨ACKï¼æ¶æ¯æ¥æ¶åï¼ä¸ä¼åéACKï¼éè¦æå¨è°ç¨\n\nå¤§å®¶è§å¾åªç§æ´å¥½å¢ï¼\n\nè¿éè¦çæ¶æ¯çéè¦æ§ï¼\n\n * å¦ææ¶æ¯ä¸å¤ªéè¦ï¼ä¸¢å¤±ä¹æ²¡æå½±åï¼é£ä¹èªå¨ACKä¼æ¯è¾æ¹ä¾¿\n\n * å¦ææ¶æ¯éå¸¸éè¦ï¼ä¸å®¹ä¸¢å¤±ãé£ä¹æå¥½å¨æ¶è´¹å®æåæå¨ACKï¼å¦åæ¥æ¶æ¶æ¯åå°±èªå¨ACKï¼RabbitMQå°±ä¼ææ¶æ¯ä»éåä¸­å é¤ãå¦ææ­¤æ¶æ¶è´¹èå®æºï¼é£ä¹æ¶æ¯å°±ä¸¢å¤±äºã\n\næä»¬ä¹åçæµè¯é½æ¯èªå¨ACKçï¼å¦æè¦æå¨ACKï¼éè¦æ¹å¨æä»¬çä»£ç ï¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\npackage com.pigxcloud.rabbitmq.demo;\n\nimport com.rabbitmq.client.*;\n\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\n\n/**\n * æ¶æ¯ç¡®è®¤æºå¶ï¼ACKï¼\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class Recv2 {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "simple_queue";\n\n    public static void main(String[] args) throws Exception {\n\n        // 1ãè·åå°è¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // 2ãåå»ºéé\n        Channel channel = connection.createChannel();\n        // 3ãå£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // 4ãå®ä¹éåçæ¶è´¹è\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties,\n                                       byte[] body) throws IOException {\n                // body å³æ¶æ¯ä½\n                String message = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ACK\n                /*\n                 *  void basicAck(long deliveryTag, boolean multiple) throws IOException;\n                 *  deliveryTag:ç¨æ¥æ è¯æ¶æ¯çid\n                 *  multipleï¼æ¯å¦æ¹é.true:å°ä¸æ¬¡æ§ackææå°äºdeliveryTagçæ¶æ¯ã\n                 */\n                channel.basicAck(envelope.getDeliveryTag(), false);\n            }\n        };\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°falseï¼æå¨è¿è¡ACK\n        channel.basicConsume(QUEUE_NAME, false, consumer);\n    }\n}\n\n\næåä¸è¡ä»£ç è®¾ç½®ç¬¬äºä¸ªåæ°ä¸º false\n\nchannel.basicConsume(QUEUE_NAME, false, consumer);\n\n\nèªå¨ACKå­å¨çé®é¢\n\nä¿®æ¹æ¶è´¹èï¼æ·»å å¼å¸¸ï¼å¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\npublic class Recv {\n    private final static String QUEUE_NAME = "simple_queue";\n    public static void main(String[] args) throws Exception {\n        Connection connection = ConnectionUtil.getConnection();\n        Channel channel = connection.createChannel();\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                int i = 1 / 0;\n                String exchange = envelope.getExchange();\n                long deliveryTag = envelope.getDeliveryTag();\n                String msg = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [x] received : " + msg + "!");\n            }\n        };\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\nçäº§èä¸åä»»ä½ä¿®æ¹ï¼ç´æ¥è¿è¡ï¼æ¶æ¯åéæåï¼\n\n\n\nè¿è¡æ¶è´¹èï¼ç¨åºæåºå¼å¸¸ï¼\n\n\n\nç®¡ççé¢ï¼\n\n\n\næ¶è´¹èæåºå¼å¸¸ï¼ä½æ¯æ¶æ¯ä¾ç¶è¢«æ¶è´¹ï¼å®éä¸æä»¬è¿æ²¡è·åå°æ¶æ¯ã\n\n\n# æ¼ç¤ºæå¨ACK\n\néæ°è¿è¡çäº§èåéæ¶æ¯ï¼\n\n\n\nåæ ·ï¼å¨æå¨è¿è¡ackåæåºå¼å¸¸ï¼è¿è¡Recv2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\npublic class Recv2 {\n\n    private final static String QUEUE_NAME = "simple_queue";\n    \n    public static void main(String[] args) throws Exception {\n        Connection connection = ConnectionUtil.getConnection();\n        Channel channel = connection.createChannel();\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        \n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties,\n                                       byte[] body) throws IOException {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                int i = 1 / 0;\n                String message = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ACK\n                channel.basicAck(envelope.getDeliveryTag(), false);\n            }\n        };\n        channel.basicConsume(QUEUE_NAME, false, consumer);\n    }\n}\n\n\nåççç®¡ççé¢ï¼\n\n\n\næ¶æ¯æ²¡æè¢«æ¶è´¹æï¼\n\n\n\nè¿æå¦å¤ä¸ç§æåµï¼ä¿®æ¹æ¶è´¹èRecv2ï¼æçå¬éåç¬¬äºä¸ªåæ°èªå¨æ¹ææå¨,ï¼å»æä¹åå¶é çå¼å¸¸ï¼ ï¼å¹¶ä¸æ¶è´¹æ¹æ³ä¸­æ²¡æå¨è¿è¡ACK\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\nÂ \nÂ \n\n\n\n\n\n\n\npublic class Recv2 {\n\n    private final static String QUEUE_NAME = "simple_queue";\n    \n    public static void main(String[] args) throws Exception {\n        Connection connection = ConnectionUtil.getConnection();\n        Channel channel = connection.createChannel();\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        \n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties,\n                                       byte[] body) throws IOException {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                // int i = 1 / 0;\n                String message = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ACK\n                // channel.basicAck(envelope.getDeliveryTag(), false);\n            }\n        };\n        channel.basicConsume(QUEUE_NAME, false, consumer);\n    }\n}\n\n\nçäº§èä»£ç ä¸åï¼åæ¬¡è¿è¡ï¼\n\n\n\nè¿è¡æ¶è´¹è ï¼\n\n\n\nä½æ¯ï¼æ¥çç®¡ççé¢ï¼åç°ï¼\n\n\n\nåææ¶è´¹èçç¨åºï¼åç°ï¼\n\n\n\nè¿æ¯å ä¸ºè½ç¶æä»¬è®¾ç½®äºæå¨ACKï¼ä½æ¯ä»£ç ä¸­å¹¶æ²¡æè¿è¡æ¶æ¯ç¡®è®¤ï¼æä»¥æ¶æ¯å¹¶æªè¢«çæ­£æ¶è´¹æãå½æä»¬å³æè¿ä¸ªæ¶è´¹èï¼æ¶æ¯çç¶æåæ¬¡åä¸ºReadyã\n\næ­£ç¡®çåæ³æ¯ï¼\n\næä»¬è¦å¨çå¬éåæ¶è®¾ç½®ç¬¬äºä¸ªåæ°ä¸ºfalse,ä»£ç ä¸­æå¨è¿è¡ACK\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\npublic class Recv2 {\n\n    private final static String QUEUE_NAME = "simple_queue";\n    \n    public static void main(String[] args) throws Exception {\n        Connection connection = ConnectionUtil.getConnection();\n        Channel channel = connection.createChannel();\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        \n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties,\n                                       byte[] body) throws IOException {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                // int i = 1 / 0;\n                String message = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ACK\n                channel.basicAck(envelope.getDeliveryTag(), false);\n            }\n        };\n        channel.basicConsume(QUEUE_NAME, false, consumer);\n    }\n}\n\n\nåæ¬¡è¿è¡æ¶è´¹èï¼æ¥çwebç®¡çé¡µé¢ï¼\n\n\n\næ¶è´¹èæ¶è´¹æåï¼\n\nçäº§èé¿åæ°æ®ä¸¢å¤±ï¼https://www.cnblogs.com/vipstone/p/9350075.html\n\n\n# workæ¶æ¯æ¨¡å\n\nå·¥ä½éåæèç«äºæ¶è´¹èæ¨¡å¼\n\n\n\nwork queuesä¸å¥é¨ç¨åºç¸æ¯ï¼å¤äºä¸ä¸ªæ¶è´¹ç«¯ï¼ä¸¤ä¸ªæ¶è´¹ç«¯å±åæ¶è´¹åä¸ä¸ªéåä¸­çæ¶æ¯ï¼ä½æ¯ä¸ä¸ªæ¶æ¯åªè½è¢«ä¸ä¸ªæ¶è´¹èè·åã\n\nè¿ä¸ªæ¶æ¯æ¨¡åå¨Webåºç¨ç¨åºä¸­ç¹å«æç¨ï¼å¯ä»¥å¤çç­çHTTPè¯·æ±çªå£ä¸­æ æ³å¤çå¤æçä»»å¡ã\n\næ¥ä¸æ¥æä»¬æ¥æ¨¡æè¿ä¸ªæµç¨ï¼\n\nPï¼çäº§èï¼ä»»å¡çåå¸è\n\nC1ï¼æ¶è´¹è1ï¼é¢åä»»å¡å¹¶ä¸å®æä»»å¡ï¼åè®¾å®æéåº¦è¾æ¢ï¼æ¨¡æèæ¶ï¼\n\nC2ï¼æ¶è´¹è2ï¼é¢åä»»å¡å¹¶ä¸å®æä»»å¡ï¼åè®¾å®æéåº¦è¾å¿«\n\nçäº§è\n\nçäº§èå¾ªç¯åé50æ¡æ¶æ¯\n\npublic class Send {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "simple_queue";\n\n    public static void main(String[] args) throws Exception {\n        // 1ãè·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        Channel channel = connection.createChannel();\n        // 3ãå£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // 4ãå¾ªç¯åå¸ä»»å¡\n        for (int i = 0; i < 50; i++) {\n            // æ¶æ¯åå®¹\n            String message = "task ... " + i;\n            channel.basicPublish("", QUEUE_NAME, null, message.getBytes());\n            System.out.println(" [x] Sent \'" + message + "\'");\n\n            Thread.sleep(i * 2);\n        }\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\næ¶è´¹è1\n\npublic class Recv {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "simple_queue";\n\n    public static void main(String[] args) throws Exception {\n        // 1ãè·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        Channel channel = connection.createChannel();\n        // 3ãå£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // 4ãå®ç°æ¶è´¹æ¹æ³\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException {\n                // body å³æ¶æ¯ä½\n                String msg = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [æ¶è´¹è2] received : " + msg + "!");\n                try {\n                    //æ¨¡æä»»å¡èæ¶1s\n                    TimeUnit.SECONDS.sleep(1);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        };\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°ï¼æ¯å¦èªå¨è¿è¡æ¶æ¯ç¡®è®¤ã\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\næ¶è´¹è2\n\nä»£ç ä¸è´´äºï¼ä¸æ¶è´¹è1åºæ¬ç±»ä¼¼ï¼åªæ¯æ¶è´¹è2æ²¡æè®¾ç½®æ¶è´¹èæ¶æ¶é´ã\n\næ¥ä¸æ¥ï¼ä¸¤ä¸ªæ¶è´¹èä¸åå¯å¨ï¼ç¶ååé50æ¡æ¶æ¯ï¼\n\n\n\n\n\nå¯ä»¥åç°ï¼ä¸¤ä¸ªæ¶è´¹èåèªæ¶è´¹äºä¸å25æ¡æ¶æ¯ï¼è¿å°±å®ç°äºä»»å¡çååã\n\nè½èå¤å³\n\nåæçå®ç°æé®é¢åï¼\n\n * æ¶è´¹è1æ¯æ¶è´¹è2çæçè¦ä½ï¼ä¸æ¬¡ä»»å¡çèæ¶è¾é¿\n * ç¶èä¸¤äººæç»æ¶è´¹çæ¶æ¯æ°éæ¯ä¸æ ·ç\n * æ¶è´¹è2å¤§éæ¶é´å¤äºç©ºé²ç¶æï¼æ¶è´¹è1ä¸ç´å¿ç¢\n\nç°å¨çç¶æå±äºæ¯æä»»å¡å¹³ååéï¼æ­£ç¡®çåæ³åºè¯¥æ¯æ¶è´¹è¶å¿«çäººï¼æ¶è´¹çè¶å¤ã\n\næä¹å®ç°å¢ï¼\n\néè¿ BasicQos æ¹æ³è®¾ç½®prefetchCount = 1ãè¿æ ·RabbitMQå°±ä¼ä½¿å¾æ¯ä¸ªConsumerå¨åä¸ä¸ªæ¶é´ç¹æå¤å¤ç1ä¸ªMessageãæ¢å¥è¯è¯´ï¼å¨æ¥æ¶å°è¯¥Consumerçackåï¼ä»å®ä¸ä¼å°æ°çMessageååç»å®ãç¸åï¼å®ä¼å°å¶åæ´¾ç»ä¸æ¯ä»ç¶å¿ç¢çä¸ä¸ä¸ªConsumerã\n\nå¼å¾æ³¨æçæ¯ï¼prefetchCountå¨æå¨ackçæåµä¸æçæï¼èªå¨ackä¸çæã\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npublic class Recv {\n\n    private final static String QUEUE_NAME = "simple_queue";\n\n    public static void main(String[] args) throws Exception {\n        // 1ãè·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        Channel channel = connection.createChannel();\n        // 3ãå£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // è®¾ç½®æ¶è´¹èåæ¶åªè½å¤çä¸æ¡æ¶æ¯ï¼å¨æå¨ackä¸æçæ\n        channel.basicQos(1);\n        // 4ãå®ç°æ¶è´¹æ¹æ³\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException {\n                // body å³æ¶æ¯ä½\n                String msg = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [æ¶è´¹è2] received : " + msg + "!");\n                try {\n                    //æ¨¡æä»»å¡èæ¶1s\n                    TimeUnit.SECONDS.sleep(5);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                channel.basicAck(envelope.getDeliveryTag(), false);\n            }\n        };\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°ï¼æ¯å¦èªå¨è¿è¡æ¶æ¯ç¡®è®¤ã\n        channel.basicConsume(QUEUE_NAME, false, consumer);\n    }\n}\n\n\nåæ¬¡æµè¯ï¼\n\n\n\n\n\nè®¢éæ¨¡ååç±»\n\nè¯´æä¸ï¼\n\n1ãä¸ä¸ªçäº§èå¤ä¸ªæ¶è´¹è\n\n2ãæ¯ä¸ªæ¶è´¹èé½æä¸ä¸ªèªå·±çéå\n\n3ãçäº§èæ²¡æå°æ¶æ¯ç´æ¥åéç»éåï¼èæ¯åéç»exchange(äº¤æ¢æºãè½¬åå¨)\n\n4ãæ¯ä¸ªéåé½éè¦ç»å®å°äº¤æ¢æºä¸\n\n5ãçäº§èåéçæ¶æ¯ï¼ç»è¿äº¤æ¢æºå°è¾¾éåï¼å®ç°ä¸ä¸ªæ¶æ¯è¢«å¤ä¸ªæ¶è´¹èæ¶è´¹ ä¾å­ï¼æ³¨å->åé®ä»¶ãåç­ä¿¡\n\nXï¼Exchangesï¼ï¼äº¤æ¢æºä¸æ¹é¢ï¼æ¥æ¶çäº§èåéçæ¶æ¯ãå¦ä¸æ¹é¢ï¼ç¥éå¦ä½å¤çæ¶æ¯ï¼ä¾å¦éäº¤ç»æä¸ªç¹å«éåãéäº¤ç»ææéåãææ¯å°æ¶æ¯ä¸¢å¼ãå°åºå¦ä½æä½ï¼åå³äºExchangeçç±»åã\n\nExchangeç±»åæä»¥ä¸å ç§ï¼\n\n * Fanoutï¼å¹¿æ­ï¼å°æ¶æ¯äº¤ç»ææç»å®å°äº¤æ¢æºçéå\n\n * Directï¼å®åï¼ææ¶æ¯äº¤ç»ç¬¦åæå®routing key çéå\n\n * Topicï¼ééç¬¦ï¼ææ¶æ¯äº¤ç»ç¬¦årouting patternï¼è·¯ç±æ¨¡å¼ï¼ çéå\n\n * Headerï¼headeræ¨¡å¼ä¸routingä¸åçå°æ¹å¨äºï¼headeræ¨¡å¼åæ¶routingkeyï¼ä½¿ç¨headerä¸­ç key/valueï¼é®å¼å¯¹ï¼å¹ééåã\n\n * Headeræ¨¡å¼ä¸å±å¼äºï¼æå´è¶£å¯ä»¥åèè¿ç¯æç« https://blog.csdn.net/zhu_tianwei/article/details/40923131\n\næ³¨æ\n\nExchangeï¼äº¤æ¢æºï¼åªè´è´£è½¬åæ¶æ¯ï¼ä¸å·å¤å­å¨æ¶æ¯çè½åï¼å æ­¤å¦ææ²¡æä»»ä½éåä¸Exchangeç»å®ï¼æèæ²¡æç¬¦åè·¯ç±è§åçéåï¼é£ä¹æ¶æ¯ä¼ä¸¢å¤±ï¼\n\n\n# Publish/subscribeï¼äº¤æ¢æºç±»åï¼Fanoutï¼ä¹ç§°ä¸ºå¹¿æ­ï¼\n\nPublish/subscribeæ¨¡åç¤ºæå¾ ï¼\n\n\n\n\n# çäº§è\n\nååé¢ä¸¤ç§æ¨¡å¼ä¸åï¼\n\n * 1ï¼ å£°æExchangeï¼ä¸åå£°æQueue\n * 2ï¼ åéæ¶æ¯å°Exchangeï¼ä¸ååéå°Queue\n\npublic class Send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_fanout_exchange";\n\n    public static void main(String[] args) throws Exception {\n        // è·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.FANOUT);\n        \n        String message = "æ³¨åæåï¼";\n        channel.basicPublish(EXCHANGE_NAME, "", null, message.getBytes());\n        System.out.println(" [çäº§è] Sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è1 ï¼æ³¨åæååç»ç­ä¿¡æå¡ï¼\n\npublic class Recv {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_fanout_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "test_fanout_queue_sms";\n\n    public static void main(String[] args) throws Exception {\n        // è·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.FANOUT);\n\n        // å£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æº\n        channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, "");\n        // å®ç°æ¶è´¹æ¹æ³\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                String msg = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [ç­ä¿¡æå¡] received : " + msg + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\n\n# æ¶è´¹è2ï¼æ³¨åæååç»é®ä»¶æå¡ï¼\n\npublic class Recv2 {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_fanout_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "test_fanout_queue_email";\n\n    public static void main(String[] args) throws Exception {\n\n        // è·åå°è¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.FANOUT);\n        // å£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æº\n        channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, "");\n        // å®ä¹éåçæ¶è´¹è\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                String message = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [é®ä»¶æå¡] received : " + message + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\næä»¬è¿è¡ä¸¤ä¸ªæ¶è´¹èï¼ç¶ååé1æ¡æ¶æ¯ï¼\n\n\n\n\n\n\n# æèï¼\n\n1ãpublish/subscribeä¸work queuesæä»ä¹åºå«ã\n\nåºå«ï¼\n\n1ï¼work queuesä¸ç¨å®ä¹äº¤æ¢æºï¼èpublish/subscribeéè¦å®ä¹äº¤æ¢æºã\n\n2ï¼publish/subscribeççäº§æ¹æ¯é¢åäº¤æ¢æºåéæ¶æ¯ï¼work queuesççäº§æ¹æ¯é¢åéååéæ¶æ¯(åºå±ä½¿ç¨é»è®¤äº¤æ¢æº)ã\n\n3ï¼publish/subscribeéè¦è®¾ç½®éååäº¤æ¢æºçç»å®ï¼work queuesä¸éè¦è®¾ç½®ï¼å®éä¸work queuesä¼å°éåç»å®å°é»è®¤çäº¤æ¢æº ã\n\nç¸åç¹ï¼\n\næä»¥ä¸¤èå®ç°çåå¸/è®¢éçæææ¯ä¸æ ·çï¼å¤ä¸ªæ¶è´¹ç«¯çå¬åä¸ä¸ªéåä¸ä¼éå¤æ¶è´¹æ¶æ¯ã\n\n2ãå®éå·¥ä½ç¨ publish/subscribeè¿æ¯work queuesã\n\nå»ºè®®ä½¿ç¨ publish/subscribeï¼åå¸è®¢éæ¨¡å¼æ¯å·¥ä½éåæ¨¡å¼æ´å¼ºå¤§ï¼ä¹å¯ä»¥åå°åä¸éåç«äºï¼ï¼å¹¶ä¸åå¸è®¢éæ¨¡å¼å¯ä»¥æå®èªå·±ä¸ç¨çäº¤æ¢æºã\n\n\n# Routing è·¯ç±æ¨¡åï¼äº¤æ¢æºç±»åï¼directï¼\n\nRoutingæ¨¡åç¤ºæå¾ï¼\n\n\n\nPï¼çäº§èï¼åExchangeåéæ¶æ¯ï¼åéæ¶æ¯æ¶ï¼ä¼æå®ä¸ä¸ªrouting keyã\n\nXï¼Exchangeï¼äº¤æ¢æºï¼ï¼æ¥æ¶çäº§èçæ¶æ¯ï¼ç¶åææ¶æ¯éäº¤ç» ä¸routing keyå®å¨å¹éçéå\n\nC1ï¼æ¶è´¹èï¼å¶æå¨éåæå®äºéè¦routing key ä¸º error çæ¶æ¯\n\nC2ï¼æ¶è´¹èï¼å¶æå¨éåæå®äºéè¦routing key ä¸º infoãerrorãwarning çæ¶æ¯\n\næ¥ä¸æ¥çä»£ç ï¼\n\npublic class Send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_direct_exchange";\n\n    public static void main(String[] args) throws Exception {\n        // è·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º direct\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT);\n        String message = "ãXXXå¼åå¹³å°ãæ­åæ³¨åæåï¼";\n        // åéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼smsï¼åªæç­ä¿¡æå¡æè½æ¥æ¶å°æ¶æ¯\n        channel.basicPublish(EXCHANGE_NAME, "sms", null, message.getBytes());\n        System.out.println(" [x] Sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è1\n\npublic class Send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_direct_exchange";\n\n    public static void main(String[] args) throws Exception {\n        // è·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º direct\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT);\n        String message = "ãXXXå¼åå¹³å°ãæ­åæ³¨åæåï¼";\n        // åéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼smsï¼åªæç­ä¿¡æå¡æè½æ¥æ¶å°æ¶æ¯\n        channel.basicPublish(EXCHANGE_NAME, "sms", null, message.getBytes());\n        // channel.basicPublish(EXCHANGE_NAME, "email", null, message.getBytes());\n        System.out.println(" [x] Sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è2\n\npublic class Recv {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_direct_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "test_direct_queue_sms";\n\n    public static void main(String[] args) throws Exception {\n        // è·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT);\n        // å£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æºï¼åæ¶æå®éè¦è®¢éçrouting keyï¼æå®æ¥æ¶åéæ¹æå®routing keyä¸ºsmsçæ¶æ¯ï¼å¯ä»¥æå®å¤ä¸ªã\n        channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, "sms");\n        // channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, "email");\n\n        // å®ç°æ¶è´¹æ¹æ³\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                String msg = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [ç­ä¿¡æå¡] received : " + msg + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\næä»¬åésmsçRoutingKeyï¼åç°ç»æï¼åªææå®ç­ä¿¡çæ¶è´¹è1æ¶å°æ¶æ¯äº\n\n\n\n\n# Topics ééç¬¦æ¨¡å¼ï¼äº¤æ¢æºç±»åï¼topicsï¼\n\nTopicsæ¨¡åç¤ºæå¾ï¼\n\n\n\næ¯ä¸ªæ¶è´¹èçå¬èªå·±çéåï¼å¹¶ä¸è®¾ç½®å¸¦ç»éç¬¦çroutingkey,çäº§èå°æ¶æ¯åç»brokerï¼ç±äº¤æ¢æºæ ¹æ®routingkeyæ¥è½¬åæ¶æ¯å°æå®çéåã\n\nRoutingkeyä¸è¬é½æ¯æä¸ä¸ªæèå¤ä¸ªåè¯ç»æï¼å¤ä¸ªåè¯ä¹é´ä»¥â.âåå²ï¼ä¾å¦ï¼inform.sms\n\nééç¬¦è§åï¼\n\n#ï¼å¹éä¸ä¸ªæå¤ä¸ªè¯\n\n*ï¼å¹éä¸å¤ä¸å°æ°å¥½1ä¸ªè¯\n\nä¸¾ä¾ï¼\n\n> audit.#ï¼è½å¤å¹é audit.irs.corporate æè audit.irs\n\n> audit.*ï¼åªè½å¹é audit.irs\n\nä»ç¤ºæå¾å¯ç¥ï¼æä»¬å°åéæææè¿°å¨ç©çæ¶æ¯ãæ¶æ¯å°ä½¿ç¨ç±ä¸ä¸ªå­ï¼ä¸¤ä¸ªç¹ï¼ç»æçRouting keyåéãè·¯ç±å³é®å­ä¸­çç¬¬ä¸ä¸ªåè¯å°æè¿°éåº¦ï¼ç¬¬äºä¸ªé¢è²åç¬¬ä¸ä¸ªç§ç±»ï¼<speed>.<color>.<species>ã\n\næä»¬åå»ºäºä¸ä¸ªç»å®ï¼Q1ç»å®äº *.orange.* ï¼Q2ç»å®äº *.*.rabbit å lazy.ï¼ã\n\nQ1å¹éææçæ©è²å¨ç©ã\n\nQ2å¹éå³äºåå­ä»¥åææ°å¨ç©çæ¶æ¯ã\n\nä¸é¢åä¸ªå°ç»ä¹ ï¼åå¦çäº§èåéå¦ä¸æ¶æ¯ï¼ä¼è¿å¥åªä¸ªéåï¼\n\nquick.orange.rabbit Q1 Q2 routingKey="quick.orange.rabbit" çæ¶æ¯ä¼åæ¶è·¯ç±å°Q1ä¸Q2\n\nlazy.orange.elephant Q1 Q2\n\nquick.orange.fox Q1\n\nlazy.pink.rabbit Q2 (å¼å¾æ³¨æçæ¯ï¼è½ç¶è¿ä¸ªroutingKeyä¸Q2çä¸¤ä¸ªbindingKeyé½å¹éï¼ä½æ¯åªä¼æéQ2ä¸æ¬¡)\n\nquick.brown.fox ä¸å¹éä»»æéåï¼è¢«ä¸¢å¼\n\nquick.orange.male.rabbit ä¸å¹éä»»æéåï¼è¢«ä¸¢å¼\n\norange ä¸å¹éä»»æéåï¼è¢«ä¸¢å¼\n\nä¸é¢æä»¬ä»¥æå®Routing key="quick.orange.rabbit"ä¸ºä¾ï¼éªè¯ä¸é¢çç­æ¡\n\n\n# çäº§è\n\npackage com.pigxcloud.rabbitmq.demo;\n\n\nimport com.rabbitmq.client.BuiltinExchangeType;\nimport com.rabbitmq.client.Channel;\nimport com.rabbitmq.client.Connection;\n\n/**\n * çäº§èåéæ¶æ¯\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class Send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_topic_exchange";\n\n    public static void main(String[] args) throws Exception {\n        // è·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º topic\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.TOPIC);\n        String message = "è¿æ¯ä¸åªè¡å¨è¿éçæ©è²çåå­";\n        // åéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼quick.orange.rabbit\n        channel.basicPublish(EXCHANGE_NAME, "quick.orange.rabbit", null, message.getBytes());\n        System.out.println(" [å¨ç©æè¿°] Sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è1\n\npublic class Recv {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_topic_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "test_topic_queue_Q1";\n\n    public static void main(String[] args) throws Exception {\n        // è·åè¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º topic\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.TOPIC);\n        // å£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æºï¼åæ¶æå®éè¦è®¢éçrouting keyï¼è®¢éææçæ©è²å¨ç©\n        channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, "*.orange.*");\n\n        // å®ç°æ¶è´¹æ¹æ³\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                String msg = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [æ¶è´¹è1] received : " + msg + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\n\n# æ¶è´¹è2\n\npublic class Recv2 {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static String EXCHANGE_NAME = "test_topic_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static String QUEUE_NAME = "test_topic_queue_Q2";\n\n    public static void main(String[] args) throws Exception {\n\n        // è·åå°è¿æ¥\n        Connection connection = ConnectionUtil.getConnection();\n        // åå»ºéé\n        Channel channel = connection.createChannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º topic\n        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.TOPIC);\n        // å£°æéå\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æºï¼åæ¶æå®éè¦è®¢éçrouting keyãè®¢éå³äºåå­ä»¥åææ°å¨ç©çæ¶æ¯\n        channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, "*.*.rabbit");\n        channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, "lazy.#");\n        // å®ä¹éåçæ¶è´¹è\n        DefaultConsumer consumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                String message = new String(body, StandardCharsets.UTF_8);\n                System.out.println(" [æ¶è´¹è2] received : " + message + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicConsume(QUEUE_NAME, true, consumer);\n    }\n}\n\n\nç»æC1ãC2æ¯é½æ¥æ¶å°æ¶æ¯äºï¼\n\nRecv æ§å¶å°\n\n[æ¶è´¹è1] received : è¿æ¯ä¸åªè¡å¨è¿éçæ©è²çåå­!\n\n\nRecv2 æ§å¶å°\n\n[æ¶è´¹è2] received : è¿æ¯ä¸åªè¡å¨è¿éçæ©è²çåå­!\n\n\n\n# RPC\n\nRPCæ¨¡åç¤ºæå¾ï¼\n\n\n\nåºæ¬æ¦å¿µï¼\n\nCallback queue åè°éåï¼å®¢æ·ç«¯åæå¡å¨åéè¯·æ±ï¼æå¡å¨ç«¯å¤çè¯·æ±åï¼å°å¶å¤çç»æä¿å­å¨ä¸ä¸ªå­å¨ä½ä¸­ãèå®¢æ·ç«¯ä¸ºäºè·å¾å¤çç»æï¼é£ä¹å®¢æ·å¨åæå¡å¨åéè¯·æ±æ¶ï¼åæ¶åéä¸ä¸ªåè°éåå°åreply_toã\n\nCorrelation id å³èæ è¯ï¼å®¢æ·ç«¯å¯è½ä¼åéå¤ä¸ªè¯·æ±ç»æå¡å¨ï¼å½æå¡å¨å¤çå®åï¼å®¢æ·ç«¯æ æ³è¾¨å«å¨åè°éåä¸­çååºå·ä½åé£ä¸ªè¯·æ±æ¶å¯¹åºçãä¸ºäºå¤çè¿ç§æåµï¼å®¢æ·ç«¯å¨åéæ¯ä¸ªè¯·æ±æ¶ï¼åæ¶ä¼éå¸¦ä¸ä¸ªç¬æcorrelation_idå±æ§ï¼è¿æ ·å®¢æ·ç«¯å¨åè°éåä¸­æ ¹æ®correlation_idå­æ®µçå¼å°±å¯ä»¥åè¾¨æ­¤ååºå±äºåªä¸ªè¯·æ±ã\n\næµç¨è¯´æï¼\n\n * å½å®¢æ·ç«¯å¯å¨çæ¶åï¼å®åå»ºä¸ä¸ªå¿åç¬äº«çåè°éåã\n\n * å¨ RPC è¯·æ±ä¸­ï¼å®¢æ·ç«¯åéå¸¦æä¸¤ä¸ªå±æ§çæ¶æ¯ï¼ä¸ä¸ªæ¯è®¾ç½®åè°éåç reply_to å±æ§ï¼å¦ä¸ä¸ªæ¯è®¾ç½®å¯ä¸å¼ç correlation_id å±æ§ã\n\n * å°è¯·æ±åéå°ä¸ä¸ª rpc_queue éåä¸­ã\n\n * æå¡å¨ç­å¾è¯·æ±åéå°è¿ä¸ªéåä¸­æ¥ãå½è¯·æ±åºç°çæ¶åï¼å®æ§è¡ä»çå·¥ä½å¹¶ä¸å°å¸¦ææ§è¡ç»æçæ¶æ¯åéç» reply_to å­æ®µæå®çéåã\n\n * å®¢æ·ç«¯ç­å¾åè°éåéçæ°æ®ãå½ææ¶æ¯åºç°çæ¶åï¼å®ä¼æ£æ¥ correlation_id å±æ§ãå¦ææ­¤å±æ§çå¼ä¸è¯·æ±å¹éï¼å°å®è¿åç»åºç¨\n\n\n# åäº«ä¸¤éé¢è¯é¢ï¼\n\né¢è¯é¢ï¼\n\né¿åæ¶æ¯å ç§¯ï¼\n\n> 1ï¼éç¨workqueueï¼å¤ä¸ªæ¶è´¹èçå¬åä¸éåã\n\n> 2ï¼æ¥æ¶å°æ¶æ¯ä»¥åï¼èæ¯éè¿çº¿ç¨æ± ï¼å¼æ­¥æ¶è´¹ã\n\nå¦ä½é¿åæ¶æ¯ä¸¢å¤±ï¼\n\n> 1ï¼ æ¶è´¹èçACKæºå¶ãå¯ä»¥é²æ­¢æ¶è´¹èä¸¢å¤±æ¶æ¯ã\n\nä½æ¯ï¼å¦æå¨æ¶è´¹èæ¶è´¹ä¹åï¼MQå°±å®æºäºï¼æ¶æ¯å°±æ²¡äºï¼\n\n> 2ï¼å¯ä»¥å°æ¶æ¯è¿è¡æä¹åãè¦å°æ¶æ¯æä¹åï¼åææ¯ï¼éåãExchangeé½æä¹å\n\n\n# äº¤æ¢æºæä¹å\n\nå£°æ exchangeï¼ç¬¬ä¸ä¸ªåæ°è®¾ç½®ä¸ºtrue è¡¨ç¤ºå°äº¤æ¢æºæä¹åï¼MQéå¯åä»ç¶çæã\n\nchannel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.TOPIC, true);\n\n\n\n# éåæä¹å\n\nå£°æéå, ç¬¬äºä¸ªåæ°è®¾ç½®ä¸ºtrue, è¡¨ç¤ºå°å£°æçéåæä¹åï¼MQéå¯åä»ç¶çæã\n\nchannel.queueDeclare(QUEUE_NAME, true, false, false, null);\n\n\n\n# æ¶æ¯æä¹å\n\nåéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼quick.orange.rabbit, ç¬¬ä¸ä¸ªåæ°è®¾ç½®æ¶æ¯æä¹å\n\nchannel.basicPublish(EXCHANGE_NAME, "quick.orange.rabbit", MessageProperties.PERSISTENT_TEXT_PLAIN, message.getBytes());\n',normalizedContent:'# rabbitmq æ¶æ¯æ¨¡å\n\n\n\n * åºæ¬æ¶æ¯æ¨¡å\n * æ¶æ¯ç¡®è®¤æºå¶ï¼ackï¼\n   * æ¼ç¤ºæå¨ack\n * workæ¶æ¯æ¨¡å\n * publish/subscribeï¼äº¤æ¢æºç±»åï¼fanoutï¼ä¹ç§°ä¸ºå¹¿æ­ï¼\n   * çäº§è\n   * æ¶è´¹è1 ï¼æ³¨åæååç»ç­ä¿¡æå¡ï¼\n   * æ¶è´¹è2ï¼æ³¨åæååç»é®ä»¶æå¡ï¼\n   * æèï¼\n * routing è·¯ç±æ¨¡åï¼äº¤æ¢æºç±»åï¼directï¼\n   * æ¶è´¹è1\n   * æ¶è´¹è2\n * topics ééç¬¦æ¨¡å¼ï¼äº¤æ¢æºç±»åï¼topicsï¼\n   * çäº§è\n   * æ¶è´¹è1\n   * æ¶è´¹è2\n * rpc\n   * åäº«ä¸¤éé¢è¯é¢ï¼\n   * äº¤æ¢æºæä¹å\n   * éåæä¹å\n   * æ¶æ¯æä¹å\n\n\n\n\n# åºæ¬æ¶æ¯æ¨¡å\n\nå¨ä¸å¾çæ¨¡åä¸­ï¼æä»¥ä¸æ¦å¿µï¼\n\n\n\n * pï¼çäº§èï¼ä¹å°±æ¯è¦åéæ¶æ¯çç¨åº\n\n * cï¼æ¶è´¹èï¼æ¶æ¯çæ¥åèï¼ä¼ä¸ç´ç­å¾æ¶æ¯å°æ¥ã\n\n * queueï¼æ¶æ¯éåï¼å¾ä¸­çº¢è²é¨åãå¯ä»¥ç¼å­æ¶æ¯ï¼çäº§èåå¶ä¸­æéæ¶æ¯ï¼æ¶è´¹èä»å¶ä¸­ååºæ¶æ¯ã\n\nçäº§è\n\næ°å»ºä¸ä¸ªmavenå·¥ç¨ï¼æ·»å amqp-clientä¾èµã\n\n<dependency>\n    <groupid>com.rabbitmq</groupid>\n    <artifactid>amqp-client</artifactid>\n    <version>5.14.0</version>\n</dependency>\n\n\nè¿æ¥å·¥å·ç±»ï¼\n\npackage com.pigxcloud.rabbitmq.demo;\n\nimport com.rabbitmq.client.connection;\nimport com.rabbitmq.client.connectionfactory;\n\n/**\n * rabbitmq è¿æ¥å·¥å·\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class connectionutil {\n\n    /**\n     * è·å¾rabbitmqè¿æ¥\n     *\n     * @return com.rabbitmq.client.connection\n     * @throws exception\n     */\n    public static connection getconnection() throws exception {\n\n        // åå»ºè¿æ¥å·¥å\n        connectionfactory factory = new connectionfactory();\n        // è®¾ç½®æå¡å°å\n        factory.sethost("192.168.100.100");\n        // è®¾ç½®ç«¯å£\n        factory.setport(5672);\n        // è®¾ç½®èææºï¼ä¸ä¸ªmqæå¡å¯ä»¥è®¾ç½®å¤ä¸ªèææºï¼æ¯ä¸ªèææºå°±ç¸å½äºä¸ä¸ªç¬ç«çmq\n        factory.setvirtualhost("/");\n        // è®¾ç½®è´¦å·ä¿¡æ¯ï¼ç¨æ·åãå¯ç \n        factory.setusername("rabbit");\n        factory.setpassword("rabbit123");\n\n        // éè¿å·¥åè·åè¿æ¥\n        return factory.newconnection();\n    }\n}\n\n\n\nçäº§èåéæ¶æ¯ï¼\n\npackage com.pigxcloud.rabbitmq.demo;\n\n\nimport com.rabbitmq.client.channel;\nimport com.rabbitmq.client.connection;\n\n/**\n * çäº§èåéæ¶æ¯\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class send {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "simple_queue";\n\n    public static void main(string[] args) throws exception {\n        // 1ãè·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        channel channel = connection.createchannel();\n        /**\n         * 3ãå£°æï¼åå»ºï¼éå\n         * åæ°ï¼string queue, boolean durable, boolean exclusive, boolean autodelete, map<string, object> arguments\n         * 1ãqueue éååç§°\n         * 2ãdurable æ¯å¦æä¹åï¼å¦ææä¹åï¼mqéå¯åéåè¿å¨\n         * 3ãexclusive æ¯å¦ç¬å è¿æ¥ï¼éååªåè®¸å¨è¯¥è¿æ¥ä¸­è®¿é®ï¼å¦æconnectionè¿æ¥å³é­éååèªå¨å é¤,å¦æå°æ­¤åæ°è®¾ç½®trueå¯ç¨äºä¸´æ¶éåçåå»º\n         * 4ãautodelete èªå¨å é¤ï¼éåä¸åä½¿ç¨æ¶æ¯å¦èªå¨å é¤æ­¤éåï¼å¦æå°æ­¤åæ°åexclusiveåæ°è®¾ç½®ä¸ºtrueå°±å¯ä»¥å®ç°ä¸´æ¶éåï¼éåä¸ç¨äºå°±èªå¨å é¤ï¼\n         * 5ãarguments åæ°ï¼å¯ä»¥è®¾ç½®ä¸ä¸ªéåçæ©å±åæ°ï¼æ¯å¦ï¼å¯è®¾ç½®å­æ´»æ¶é´\n         */\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // 4ãæ¶æ¯åå®¹\n        string message = "hello world!";\n        /**\n         * åæå®çéåä¸­åéæ¶æ¯\n         * åæ°ï¼string exchange, string routingkey, basicproperties props, byte[] body\n         * 1ãexchangeï¼äº¤æ¢æºï¼å¦æä¸æå®å°ä½¿ç¨mqçé»è®¤äº¤æ¢æºï¼è®¾ç½®ä¸º""ï¼\n         * 2ãroutingkeyï¼è·¯ç±keyï¼äº¤æ¢æºæ ¹æ®è·¯ç±keyæ¥å°æ¶æ¯è½¬åå°æå®çéåï¼å¦æä½¿ç¨é»è®¤äº¤æ¢æºï¼routingkeyè®¾ç½®ä¸ºéåçåç§°\n         * 3ãpropsï¼æ¶æ¯çå±æ§\n         * 4ãbodyï¼æ¶æ¯åå®¹\n         */\n        channel.basicpublish("", queue_name, null, message.getbytes());\n        system.out.println(" [x] sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥(èµæºå³é­æå¥½ç¨try-catch-finallyè¯­å¥å¤ç)\n        channel.close();\n        connection.close();\n    }\n}\n\n\næ§å¶å°ï¼\n\n"d:\\program files\\java\\jdk-11.0.13\\bin\\java.exe" ...\n [x] sent \'hello world!\'\n\n\nwebç®¡çé¡µé¢ï¼æå¡å¨å°å/ç«¯å£å· ï¼æ¬å°ï¼127.0.0.1:15672ï¼é»è®¤ç¨æ·åå¯ç ï¼rabbit/rabbit123ï¼\n\n\n\nç¹å»éååç§°ï¼è¿å¥è¯¦æé¡µï¼å¯ä»¥æ¥çæ¶æ¯ï¼\n\n\n\næ¶è´¹èæ¥æ¶æ¶æ¯\n\npackage com.pigxcloud.rabbitmq.demo;\n\nimport com.rabbitmq.client.*;\n\nimport java.io.ioexception;\nimport java.nio.charset.standardcharsets;\n\n/**\n * æ¶è´¹èæ¥æ¶æ¶æ¯\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class recv {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "simple_queue";\n\n    public static void main(string[] args) throws exception {\n        // 1ãè·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        channel channel = connection.createchannel();\n        /**\n         * 3ãå£°æï¼åå»ºï¼éå\n         * åæ°ï¼string queue, boolean durable, boolean exclusive, boolean autodelete, map<string, object> arguments\n         * 1ãqueue éååç§°\n         * 2ãdurable æ¯å¦æä¹åï¼å¦ææä¹åï¼mqéå¯åéåè¿å¨\n         * 3ãexclusive æ¯å¦ç¬å è¿æ¥ï¼éååªåè®¸å¨è¯¥è¿æ¥ä¸­è®¿é®ï¼å¦æconnectionè¿æ¥å³é­éååèªå¨å é¤,å¦æå°æ­¤åæ°è®¾ç½®trueå¯ç¨äºä¸´æ¶éåçåå»º\n         * 4ãautodelete èªå¨å é¤ï¼éåä¸åä½¿ç¨æ¶æ¯å¦èªå¨å é¤æ­¤éåï¼å¦æå°æ­¤åæ°åexclusiveåæ°è®¾ç½®ä¸ºtrueå°±å¯ä»¥å®ç°ä¸´æ¶éåï¼éåä¸ç¨äºå°±èªå¨å é¤ï¼\n         * 5ãarguments åæ°ï¼å¯ä»¥è®¾ç½®ä¸ä¸ªéåçæ©å±åæ°ï¼æ¯å¦ï¼å¯è®¾ç½®å­æ´»æ¶é´\n         */\n        channel.queuedeclare(queue_name, false, false, false, null);\n\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n\n            /**\n             * å½æ¥æ¶å°æ¶æ¯åæ­¤æ¹æ³å°è¢«è°ç¨\n             * @param consumertag  æ¶è´¹èæ ç­¾ï¼ç¨æ¥æ è¯æ¶è´¹èçï¼å¨çå¬éåæ¶è®¾ç½®channel.basicconsume\n             * @param envelope ä¿¡å°ï¼éè¿envelope\n             * @param properties æ¶æ¯å±æ§\n             * @param body æ¶æ¯åå®¹\n             * @throws ioexception\n             */\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) throws ioexception {\n                //äº¤æ¢æº\n                string exchange = envelope.getexchange();\n                //æ¶æ¯idï¼mqå¨channelä¸­ç¨æ¥æ è¯æ¶æ¯çidï¼å¯ç¨äºç¡®è®¤æ¶æ¯å·²æ¥æ¶\n                long deliverytag = envelope.getdeliverytag();\n                // body å³æ¶æ¯ä½\n                string msg = new string(body, standardcharsets.utf_8);\n                system.out.println(" [x] received : " + msg + "!");\n            }\n        };\n\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°ï¼æ¯å¦èªå¨è¿è¡æ¶æ¯ç¡®è®¤ã\n        //åæ°ï¼string queue, boolean autoack, consumer callback\n        /**\n         * åæ°æç»ï¼\n         * 1ãqueue éååç§°\n         * 2ãautoack èªå¨åå¤ï¼å½æ¶è´¹èæ¥æ¶å°æ¶æ¯åè¦åè¯mqæ¶æ¯å·²æ¥æ¶ï¼å¦æå°æ­¤åæ°è®¾ç½®ä¸ºtruè¡¨ç¤ºä¼èªå¨åå¤mqï¼å¦æè®¾ç½®ä¸ºfalseè¦éè¿ç¼ç¨å®ç°åå¤\n         * 3ãcallbackï¼æ¶è´¹æ¹æ³ï¼å½æ¶è´¹èæ¥æ¶å°æ¶æ¯è¦æ§è¡çæ¹æ³\n         */\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\n\næ§å¶å°æå°ï¼\n\n"d:\\program files\\java\\jdk-11.0.13\\bin\\java.exe" ...\n [x] received \'hello world!\'\n\n\nåççéåçæ¶æ¯,å·²ç»è¢«æ¶è´¹äº\n\n\n\næä»¬åç°ï¼æ¶è´¹èå·²ç»è·åäºæ¶æ¯ï¼ä½æ¯ç¨åºæ²¡æåæ­¢ï¼ä¸ç´å¨çå¬éåä¸­æ¯å¦ææ°çæ¶æ¯ãä¸æ¦ææ°çæ¶æ¯è¿å¥éåï¼å°±ä¼ç«å³æå°ã\n\n\n# æ¶æ¯ç¡®è®¤æºå¶ï¼ackï¼\n\néè¿åæçæ¡ä¾å¯ä»¥çåºï¼æ¶æ¯ä¸æ¦è¢«æ¶è´¹èæ¥æ¶ï¼éåä¸­çæ¶æ¯å°±ä¼è¢«å é¤ã\n\né£ä¹é®é¢æ¥äºï¼rabbitmqæä¹ç¥éæ¶æ¯è¢«æ¥æ¶äºå¢ï¼\n\nå¦ææ¶è´¹èé¢åæ¶æ¯åï¼è¿æ²¡æ§è¡æä½å°±ææäºå¢ï¼æèæåºäºå¼å¸¸ï¼æ¶æ¯æ¶è´¹å¤±è´¥ï¼ä½æ¯rabbitmqæ ä»å¾ç¥ï¼è¿æ ·æ¶æ¯å°±ä¸¢å¤±äºï¼\n\nå æ­¤ï¼rabbitmqæä¸ä¸ªackæºå¶ãå½æ¶è´¹èè·åæ¶æ¯åï¼ä¼årabbitmqåéåæ§ackï¼åç¥æ¶æ¯å·²ç»è¢«æ¥æ¶ãä¸è¿è¿ç§åæ§ackåä¸¤ç§æåµï¼\n\n * èªå¨ackï¼æ¶æ¯ä¸æ¦è¢«æ¥æ¶ï¼æ¶è´¹èèªå¨åéack\n\n * æå¨ackï¼æ¶æ¯æ¥æ¶åï¼ä¸ä¼åéackï¼éè¦æå¨è°ç¨\n\nå¤§å®¶è§å¾åªç§æ´å¥½å¢ï¼\n\nè¿éè¦çæ¶æ¯çéè¦æ§ï¼\n\n * å¦ææ¶æ¯ä¸å¤ªéè¦ï¼ä¸¢å¤±ä¹æ²¡æå½±åï¼é£ä¹èªå¨ackä¼æ¯è¾æ¹ä¾¿\n\n * å¦ææ¶æ¯éå¸¸éè¦ï¼ä¸å®¹ä¸¢å¤±ãé£ä¹æå¥½å¨æ¶è´¹å®æåæå¨ackï¼å¦åæ¥æ¶æ¶æ¯åå°±èªå¨ackï¼rabbitmqå°±ä¼ææ¶æ¯ä»éåä¸­å é¤ãå¦ææ­¤æ¶æ¶è´¹èå®æºï¼é£ä¹æ¶æ¯å°±ä¸¢å¤±äºã\n\næä»¬ä¹åçæµè¯é½æ¯èªå¨ackçï¼å¦æè¦æå¨ackï¼éè¦æ¹å¨æä»¬çä»£ç ï¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\nÂ \n\n\n\n\npackage com.pigxcloud.rabbitmq.demo;\n\nimport com.rabbitmq.client.*;\n\nimport java.io.ioexception;\nimport java.nio.charset.standardcharsets;\n\n/**\n * æ¶æ¯ç¡®è®¤æºå¶ï¼ackï¼\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class recv2 {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "simple_queue";\n\n    public static void main(string[] args) throws exception {\n\n        // 1ãè·åå°è¿æ¥\n        connection connection = connectionutil.getconnection();\n        // 2ãåå»ºéé\n        channel channel = connection.createchannel();\n        // 3ãå£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // 4ãå®ä¹éåçæ¶è´¹è\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties,\n                                       byte[] body) throws ioexception {\n                // body å³æ¶æ¯ä½\n                string message = new string(body, standardcharsets.utf_8);\n                system.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ack\n                /*\n                 *  void basicack(long deliverytag, boolean multiple) throws ioexception;\n                 *  deliverytag:ç¨æ¥æ è¯æ¶æ¯çid\n                 *  multipleï¼æ¯å¦æ¹é.true:å°ä¸æ¬¡æ§ackææå°äºdeliverytagçæ¶æ¯ã\n                 */\n                channel.basicack(envelope.getdeliverytag(), false);\n            }\n        };\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°falseï¼æå¨è¿è¡ack\n        channel.basicconsume(queue_name, false, consumer);\n    }\n}\n\n\næåä¸è¡ä»£ç è®¾ç½®ç¬¬äºä¸ªåæ°ä¸º false\n\nchannel.basicconsume(queue_name, false, consumer);\n\n\nèªå¨ackå­å¨çé®é¢\n\nä¿®æ¹æ¶è´¹èï¼æ·»å å¼å¸¸ï¼å¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\npublic class recv {\n    private final static string queue_name = "simple_queue";\n    public static void main(string[] args) throws exception {\n        connection connection = connectionutil.getconnection();\n        channel channel = connection.createchannel();\n        channel.queuedeclare(queue_name, false, false, false, null);\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) throws ioexception {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                int i = 1 / 0;\n                string exchange = envelope.getexchange();\n                long deliverytag = envelope.getdeliverytag();\n                string msg = new string(body, standardcharsets.utf_8);\n                system.out.println(" [x] received : " + msg + "!");\n            }\n        };\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\nçäº§èä¸åä»»ä½ä¿®æ¹ï¼ç´æ¥è¿è¡ï¼æ¶æ¯åéæåï¼\n\n\n\nè¿è¡æ¶è´¹èï¼ç¨åºæåºå¼å¸¸ï¼\n\n\n\nç®¡ççé¢ï¼\n\n\n\næ¶è´¹èæåºå¼å¸¸ï¼ä½æ¯æ¶æ¯ä¾ç¶è¢«æ¶è´¹ï¼å®éä¸æä»¬è¿æ²¡è·åå°æ¶æ¯ã\n\n\n# æ¼ç¤ºæå¨ack\n\néæ°è¿è¡çäº§èåéæ¶æ¯ï¼\n\n\n\nåæ ·ï¼å¨æå¨è¿è¡ackåæåºå¼å¸¸ï¼è¿è¡recv2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\npublic class recv2 {\n\n    private final static string queue_name = "simple_queue";\n    \n    public static void main(string[] args) throws exception {\n        connection connection = connectionutil.getconnection();\n        channel channel = connection.createchannel();\n        channel.queuedeclare(queue_name, false, false, false, null);\n        \n        defaultconsumer consumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties,\n                                       byte[] body) throws ioexception {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                int i = 1 / 0;\n                string message = new string(body, standardcharsets.utf_8);\n                system.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ack\n                channel.basicack(envelope.getdeliverytag(), false);\n            }\n        };\n        channel.basicconsume(queue_name, false, consumer);\n    }\n}\n\n\nåççç®¡ççé¢ï¼\n\n\n\næ¶æ¯æ²¡æè¢«æ¶è´¹æï¼\n\n\n\nè¿æå¦å¤ä¸ç§æåµï¼ä¿®æ¹æ¶è´¹èrecv2ï¼æçå¬éåç¬¬äºä¸ªåæ°èªå¨æ¹ææå¨,ï¼å»æä¹åå¶é çå¼å¸¸ï¼ ï¼å¹¶ä¸æ¶è´¹æ¹æ³ä¸­æ²¡æå¨è¿è¡ack\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\nÂ \nÂ \n\n\n\n\n\n\n\npublic class recv2 {\n\n    private final static string queue_name = "simple_queue";\n    \n    public static void main(string[] args) throws exception {\n        connection connection = connectionutil.getconnection();\n        channel channel = connection.createchannel();\n        channel.queuedeclare(queue_name, false, false, false, null);\n        \n        defaultconsumer consumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties,\n                                       byte[] body) throws ioexception {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                // int i = 1 / 0;\n                string message = new string(body, standardcharsets.utf_8);\n                system.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ack\n                // channel.basicack(envelope.getdeliverytag(), false);\n            }\n        };\n        channel.basicconsume(queue_name, false, consumer);\n    }\n}\n\n\nçäº§èä»£ç ä¸åï¼åæ¬¡è¿è¡ï¼\n\n\n\nè¿è¡æ¶è´¹è ï¼\n\n\n\nä½æ¯ï¼æ¥çç®¡ççé¢ï¼åç°ï¼\n\n\n\nåææ¶è´¹èçç¨åºï¼åç°ï¼\n\n\n\nè¿æ¯å ä¸ºè½ç¶æä»¬è®¾ç½®äºæå¨ackï¼ä½æ¯ä»£ç ä¸­å¹¶æ²¡æè¿è¡æ¶æ¯ç¡®è®¤ï¼æä»¥æ¶æ¯å¹¶æªè¢«çæ­£æ¶è´¹æãå½æä»¬å³æè¿ä¸ªæ¶è´¹èï¼æ¶æ¯çç¶æåæ¬¡åä¸ºreadyã\n\næ­£ç¡®çåæ³æ¯ï¼\n\næä»¬è¦å¨çå¬éåæ¶è®¾ç½®ç¬¬äºä¸ªåæ°ä¸ºfalse,ä»£ç ä¸­æå¨è¿è¡ack\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\npublic class recv2 {\n\n    private final static string queue_name = "simple_queue";\n    \n    public static void main(string[] args) throws exception {\n        connection connection = connectionutil.getconnection();\n        channel channel = connection.createchannel();\n        channel.queuedeclare(queue_name, false, false, false, null);\n        \n        defaultconsumer consumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties,\n                                       byte[] body) throws ioexception {\n                // æµè¯èªå¨ack,æ¨¡æå¼å¸¸\n                // int i = 1 / 0;\n                string message = new string(body, standardcharsets.utf_8);\n                system.out.println(" [x] received : " + message + "!");\n                // æå¨è¿è¡ack\n                channel.basicack(envelope.getdeliverytag(), false);\n            }\n        };\n        channel.basicconsume(queue_name, false, consumer);\n    }\n}\n\n\nåæ¬¡è¿è¡æ¶è´¹èï¼æ¥çwebç®¡çé¡µé¢ï¼\n\n\n\næ¶è´¹èæ¶è´¹æåï¼\n\nçäº§èé¿åæ°æ®ä¸¢å¤±ï¼https://www.cnblogs.com/vipstone/p/9350075.html\n\n\n# workæ¶æ¯æ¨¡å\n\nå·¥ä½éåæèç«äºæ¶è´¹èæ¨¡å¼\n\n\n\nwork queuesä¸å¥é¨ç¨åºç¸æ¯ï¼å¤äºä¸ä¸ªæ¶è´¹ç«¯ï¼ä¸¤ä¸ªæ¶è´¹ç«¯å±åæ¶è´¹åä¸ä¸ªéåä¸­çæ¶æ¯ï¼ä½æ¯ä¸ä¸ªæ¶æ¯åªè½è¢«ä¸ä¸ªæ¶è´¹èè·åã\n\nè¿ä¸ªæ¶æ¯æ¨¡åå¨webåºç¨ç¨åºä¸­ç¹å«æç¨ï¼å¯ä»¥å¤çç­çhttpè¯·æ±çªå£ä¸­æ æ³å¤çå¤æçä»»å¡ã\n\næ¥ä¸æ¥æä»¬æ¥æ¨¡æè¿ä¸ªæµç¨ï¼\n\npï¼çäº§èï¼ä»»å¡çåå¸è\n\nc1ï¼æ¶è´¹è1ï¼é¢åä»»å¡å¹¶ä¸å®æä»»å¡ï¼åè®¾å®æéåº¦è¾æ¢ï¼æ¨¡æèæ¶ï¼\n\nc2ï¼æ¶è´¹è2ï¼é¢åä»»å¡å¹¶ä¸å®æä»»å¡ï¼åè®¾å®æéåº¦è¾å¿«\n\nçäº§è\n\nçäº§èå¾ªç¯åé50æ¡æ¶æ¯\n\npublic class send {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "simple_queue";\n\n    public static void main(string[] args) throws exception {\n        // 1ãè·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        channel channel = connection.createchannel();\n        // 3ãå£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // 4ãå¾ªç¯åå¸ä»»å¡\n        for (int i = 0; i < 50; i++) {\n            // æ¶æ¯åå®¹\n            string message = "task ... " + i;\n            channel.basicpublish("", queue_name, null, message.getbytes());\n            system.out.println(" [x] sent \'" + message + "\'");\n\n            thread.sleep(i * 2);\n        }\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\næ¶è´¹è1\n\npublic class recv {\n\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "simple_queue";\n\n    public static void main(string[] args) throws exception {\n        // 1ãè·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        channel channel = connection.createchannel();\n        // 3ãå£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // 4ãå®ç°æ¶è´¹æ¹æ³\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) throws ioexception {\n                // body å³æ¶æ¯ä½\n                string msg = new string(body, standardcharsets.utf_8);\n                system.out.println(" [æ¶è´¹è2] received : " + msg + "!");\n                try {\n                    //æ¨¡æä»»å¡èæ¶1s\n                    timeunit.seconds.sleep(1);\n                } catch (interruptedexception e) {\n                    e.printstacktrace();\n                }\n            }\n        };\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°ï¼æ¯å¦èªå¨è¿è¡æ¶æ¯ç¡®è®¤ã\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\næ¶è´¹è2\n\nä»£ç ä¸è´´äºï¼ä¸æ¶è´¹è1åºæ¬ç±»ä¼¼ï¼åªæ¯æ¶è´¹è2æ²¡æè®¾ç½®æ¶è´¹èæ¶æ¶é´ã\n\næ¥ä¸æ¥ï¼ä¸¤ä¸ªæ¶è´¹èä¸åå¯å¨ï¼ç¶ååé50æ¡æ¶æ¯ï¼\n\n\n\n\n\nå¯ä»¥åç°ï¼ä¸¤ä¸ªæ¶è´¹èåèªæ¶è´¹äºä¸å25æ¡æ¶æ¯ï¼è¿å°±å®ç°äºä»»å¡çååã\n\nè½èå¤å³\n\nåæçå®ç°æé®é¢åï¼\n\n * æ¶è´¹è1æ¯æ¶è´¹è2çæçè¦ä½ï¼ä¸æ¬¡ä»»å¡çèæ¶è¾é¿\n * ç¶èä¸¤äººæç»æ¶è´¹çæ¶æ¯æ°éæ¯ä¸æ ·ç\n * æ¶è´¹è2å¤§éæ¶é´å¤äºç©ºé²ç¶æï¼æ¶è´¹è1ä¸ç´å¿ç¢\n\nç°å¨çç¶æå±äºæ¯æä»»å¡å¹³ååéï¼æ­£ç¡®çåæ³åºè¯¥æ¯æ¶è´¹è¶å¿«çäººï¼æ¶è´¹çè¶å¤ã\n\næä¹å®ç°å¢ï¼\n\néè¿ basicqos æ¹æ³è®¾ç½®prefetchcount = 1ãè¿æ ·rabbitmqå°±ä¼ä½¿å¾æ¯ä¸ªconsumerå¨åä¸ä¸ªæ¶é´ç¹æå¤å¤ç1ä¸ªmessageãæ¢å¥è¯è¯´ï¼å¨æ¥æ¶å°è¯¥consumerçackåï¼ä»å®ä¸ä¼å°æ°çmessageååç»å®ãç¸åï¼å®ä¼å°å¶åæ´¾ç»ä¸æ¯ä»ç¶å¿ç¢çä¸ä¸ä¸ªconsumerã\n\nå¼å¾æ³¨æçæ¯ï¼prefetchcountå¨æå¨ackçæåµä¸æçæï¼èªå¨ackä¸çæã\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npublic class recv {\n\n    private final static string queue_name = "simple_queue";\n\n    public static void main(string[] args) throws exception {\n        // 1ãè·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // 2ãä»è¿æ¥ä¸­åå»ºééï¼ä½¿ç¨ééæè½å®ææ¶æ¯ç¸å³çæä½\n        channel channel = connection.createchannel();\n        // 3ãå£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // è®¾ç½®æ¶è´¹èåæ¶åªè½å¤çä¸æ¡æ¶æ¯ï¼å¨æå¨ackä¸æçæ\n        channel.basicqos(1);\n        // 4ãå®ç°æ¶è´¹æ¹æ³\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) throws ioexception {\n                // body å³æ¶æ¯ä½\n                string msg = new string(body, standardcharsets.utf_8);\n                system.out.println(" [æ¶è´¹è2] received : " + msg + "!");\n                try {\n                    //æ¨¡æä»»å¡èæ¶1s\n                    timeunit.seconds.sleep(5);\n                } catch (interruptedexception e) {\n                    e.printstacktrace();\n                }\n                channel.basicack(envelope.getdeliverytag(), false);\n            }\n        };\n        // çå¬éåï¼ç¬¬äºä¸ªåæ°ï¼æ¯å¦èªå¨è¿è¡æ¶æ¯ç¡®è®¤ã\n        channel.basicconsume(queue_name, false, consumer);\n    }\n}\n\n\nåæ¬¡æµè¯ï¼\n\n\n\n\n\nè®¢éæ¨¡ååç±»\n\nè¯´æä¸ï¼\n\n1ãä¸ä¸ªçäº§èå¤ä¸ªæ¶è´¹è\n\n2ãæ¯ä¸ªæ¶è´¹èé½æä¸ä¸ªèªå·±çéå\n\n3ãçäº§èæ²¡æå°æ¶æ¯ç´æ¥åéç»éåï¼èæ¯åéç»exchange(äº¤æ¢æºãè½¬åå¨)\n\n4ãæ¯ä¸ªéåé½éè¦ç»å®å°äº¤æ¢æºä¸\n\n5ãçäº§èåéçæ¶æ¯ï¼ç»è¿äº¤æ¢æºå°è¾¾éåï¼å®ç°ä¸ä¸ªæ¶æ¯è¢«å¤ä¸ªæ¶è´¹èæ¶è´¹ ä¾å­ï¼æ³¨å->åé®ä»¶ãåç­ä¿¡\n\nxï¼exchangesï¼ï¼äº¤æ¢æºä¸æ¹é¢ï¼æ¥æ¶çäº§èåéçæ¶æ¯ãå¦ä¸æ¹é¢ï¼ç¥éå¦ä½å¤çæ¶æ¯ï¼ä¾å¦éäº¤ç»æä¸ªç¹å«éåãéäº¤ç»ææéåãææ¯å°æ¶æ¯ä¸¢å¼ãå°åºå¦ä½æä½ï¼åå³äºexchangeçç±»åã\n\nexchangeç±»åæä»¥ä¸å ç§ï¼\n\n * fanoutï¼å¹¿æ­ï¼å°æ¶æ¯äº¤ç»ææç»å®å°äº¤æ¢æºçéå\n\n * directï¼å®åï¼ææ¶æ¯äº¤ç»ç¬¦åæå®routing key çéå\n\n * topicï¼ééç¬¦ï¼ææ¶æ¯äº¤ç»ç¬¦årouting patternï¼è·¯ç±æ¨¡å¼ï¼ çéå\n\n * headerï¼headeræ¨¡å¼ä¸routingä¸åçå°æ¹å¨äºï¼headeræ¨¡å¼åæ¶routingkeyï¼ä½¿ç¨headerä¸­ç key/valueï¼é®å¼å¯¹ï¼å¹ééåã\n\n * headeræ¨¡å¼ä¸å±å¼äºï¼æå´è¶£å¯ä»¥åèè¿ç¯æç« https://blog.csdn.net/zhu_tianwei/article/details/40923131\n\næ³¨æ\n\nexchangeï¼äº¤æ¢æºï¼åªè´è´£è½¬åæ¶æ¯ï¼ä¸å·å¤å­å¨æ¶æ¯çè½åï¼å æ­¤å¦ææ²¡æä»»ä½éåä¸exchangeç»å®ï¼æèæ²¡æç¬¦åè·¯ç±è§åçéåï¼é£ä¹æ¶æ¯ä¼ä¸¢å¤±ï¼\n\n\n# publish/subscribeï¼äº¤æ¢æºç±»åï¼fanoutï¼ä¹ç§°ä¸ºå¹¿æ­ï¼\n\npublish/subscribeæ¨¡åç¤ºæå¾ ï¼\n\n\n\n\n# çäº§è\n\nååé¢ä¸¤ç§æ¨¡å¼ä¸åï¼\n\n * 1ï¼ å£°æexchangeï¼ä¸åå£°æqueue\n * 2ï¼ åéæ¶æ¯å°exchangeï¼ä¸ååéå°queue\n\npublic class send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_fanout_exchange";\n\n    public static void main(string[] args) throws exception {\n        // è·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangedeclare(exchange_name, builtinexchangetype.fanout);\n        \n        string message = "æ³¨åæåï¼";\n        channel.basicpublish(exchange_name, "", null, message.getbytes());\n        system.out.println(" [çäº§è] sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è1 ï¼æ³¨åæååç»ç­ä¿¡æå¡ï¼\n\npublic class recv {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_fanout_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "test_fanout_queue_sms";\n\n    public static void main(string[] args) throws exception {\n        // è·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangedeclare(exchange_name, builtinexchangetype.fanout);\n\n        // å£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æº\n        channel.queuebind(queue_name, exchange_name, "");\n        // å®ç°æ¶è´¹æ¹æ³\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                string msg = new string(body, standardcharsets.utf_8);\n                system.out.println(" [ç­ä¿¡æå¡] received : " + msg + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\n\n# æ¶è´¹è2ï¼æ³¨åæååç»é®ä»¶æå¡ï¼\n\npublic class recv2 {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_fanout_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "test_fanout_queue_email";\n\n    public static void main(string[] args) throws exception {\n\n        // è·åå°è¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangedeclare(exchange_name, builtinexchangetype.fanout);\n        // å£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æº\n        channel.queuebind(queue_name, exchange_name, "");\n        // å®ä¹éåçæ¶è´¹è\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                string message = new string(body, standardcharsets.utf_8);\n                system.out.println(" [é®ä»¶æå¡] received : " + message + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\næä»¬è¿è¡ä¸¤ä¸ªæ¶è´¹èï¼ç¶ååé1æ¡æ¶æ¯ï¼\n\n\n\n\n\n\n# æèï¼\n\n1ãpublish/subscribeä¸work queuesæä»ä¹åºå«ã\n\nåºå«ï¼\n\n1ï¼work queuesä¸ç¨å®ä¹äº¤æ¢æºï¼èpublish/subscribeéè¦å®ä¹äº¤æ¢æºã\n\n2ï¼publish/subscribeççäº§æ¹æ¯é¢åäº¤æ¢æºåéæ¶æ¯ï¼work queuesççäº§æ¹æ¯é¢åéååéæ¶æ¯(åºå±ä½¿ç¨é»è®¤äº¤æ¢æº)ã\n\n3ï¼publish/subscribeéè¦è®¾ç½®éååäº¤æ¢æºçç»å®ï¼work queuesä¸éè¦è®¾ç½®ï¼å®éä¸work queuesä¼å°éåç»å®å°é»è®¤çäº¤æ¢æº ã\n\nç¸åç¹ï¼\n\næä»¥ä¸¤èå®ç°çåå¸/è®¢éçæææ¯ä¸æ ·çï¼å¤ä¸ªæ¶è´¹ç«¯çå¬åä¸ä¸ªéåä¸ä¼éå¤æ¶è´¹æ¶æ¯ã\n\n2ãå®éå·¥ä½ç¨ publish/subscribeè¿æ¯work queuesã\n\nå»ºè®®ä½¿ç¨ publish/subscribeï¼åå¸è®¢éæ¨¡å¼æ¯å·¥ä½éåæ¨¡å¼æ´å¼ºå¤§ï¼ä¹å¯ä»¥åå°åä¸éåç«äºï¼ï¼å¹¶ä¸åå¸è®¢éæ¨¡å¼å¯ä»¥æå®èªå·±ä¸ç¨çäº¤æ¢æºã\n\n\n# routing è·¯ç±æ¨¡åï¼äº¤æ¢æºç±»åï¼directï¼\n\nroutingæ¨¡åç¤ºæå¾ï¼\n\n\n\npï¼çäº§èï¼åexchangeåéæ¶æ¯ï¼åéæ¶æ¯æ¶ï¼ä¼æå®ä¸ä¸ªrouting keyã\n\nxï¼exchangeï¼äº¤æ¢æºï¼ï¼æ¥æ¶çäº§èçæ¶æ¯ï¼ç¶åææ¶æ¯éäº¤ç» ä¸routing keyå®å¨å¹éçéå\n\nc1ï¼æ¶è´¹èï¼å¶æå¨éåæå®äºéè¦routing key ä¸º error çæ¶æ¯\n\nc2ï¼æ¶è´¹èï¼å¶æå¨éåæå®äºéè¦routing key ä¸º infoãerrorãwarning çæ¶æ¯\n\næ¥ä¸æ¥çä»£ç ï¼\n\npublic class send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_direct_exchange";\n\n    public static void main(string[] args) throws exception {\n        // è·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º direct\n        channel.exchangedeclare(exchange_name, builtinexchangetype.direct);\n        string message = "ãxxxå¼åå¹³å°ãæ­åæ³¨åæåï¼";\n        // åéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼smsï¼åªæç­ä¿¡æå¡æè½æ¥æ¶å°æ¶æ¯\n        channel.basicpublish(exchange_name, "sms", null, message.getbytes());\n        system.out.println(" [x] sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è1\n\npublic class send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_direct_exchange";\n\n    public static void main(string[] args) throws exception {\n        // è·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º direct\n        channel.exchangedeclare(exchange_name, builtinexchangetype.direct);\n        string message = "ãxxxå¼åå¹³å°ãæ­åæ³¨åæåï¼";\n        // åéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼smsï¼åªæç­ä¿¡æå¡æè½æ¥æ¶å°æ¶æ¯\n        channel.basicpublish(exchange_name, "sms", null, message.getbytes());\n        // channel.basicpublish(exchange_name, "email", null, message.getbytes());\n        system.out.println(" [x] sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è2\n\npublic class recv {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_direct_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "test_direct_queue_sms";\n\n    public static void main(string[] args) throws exception {\n        // è·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º fanout\n        channel.exchangedeclare(exchange_name, builtinexchangetype.direct);\n        // å£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æºï¼åæ¶æå®éè¦è®¢éçrouting keyï¼æå®æ¥æ¶åéæ¹æå®routing keyä¸ºsmsçæ¶æ¯ï¼å¯ä»¥æå®å¤ä¸ªã\n        channel.queuebind(queue_name, exchange_name, "sms");\n        // channel.queuebind(queue_name, exchange_name, "email");\n\n        // å®ç°æ¶è´¹æ¹æ³\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                string msg = new string(body, standardcharsets.utf_8);\n                system.out.println(" [ç­ä¿¡æå¡] received : " + msg + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\næä»¬åésmsçroutingkeyï¼åç°ç»æï¼åªææå®ç­ä¿¡çæ¶è´¹è1æ¶å°æ¶æ¯äº\n\n\n\n\n# topics ééç¬¦æ¨¡å¼ï¼äº¤æ¢æºç±»åï¼topicsï¼\n\ntopicsæ¨¡åç¤ºæå¾ï¼\n\n\n\næ¯ä¸ªæ¶è´¹èçå¬èªå·±çéåï¼å¹¶ä¸è®¾ç½®å¸¦ç»éç¬¦çroutingkey,çäº§èå°æ¶æ¯åç»brokerï¼ç±äº¤æ¢æºæ ¹æ®routingkeyæ¥è½¬åæ¶æ¯å°æå®çéåã\n\nroutingkeyä¸è¬é½æ¯æä¸ä¸ªæèå¤ä¸ªåè¯ç»æï¼å¤ä¸ªåè¯ä¹é´ä»¥â.âåå²ï¼ä¾å¦ï¼inform.sms\n\nééç¬¦è§åï¼\n\n#ï¼å¹éä¸ä¸ªæå¤ä¸ªè¯\n\n*ï¼å¹éä¸å¤ä¸å°æ°å¥½1ä¸ªè¯\n\nä¸¾ä¾ï¼\n\n> audit.#ï¼è½å¤å¹é audit.irs.corporate æè audit.irs\n\n> audit.*ï¼åªè½å¹é audit.irs\n\nä»ç¤ºæå¾å¯ç¥ï¼æä»¬å°åéæææè¿°å¨ç©çæ¶æ¯ãæ¶æ¯å°ä½¿ç¨ç±ä¸ä¸ªå­ï¼ä¸¤ä¸ªç¹ï¼ç»æçrouting keyåéãè·¯ç±å³é®å­ä¸­çç¬¬ä¸ä¸ªåè¯å°æè¿°éåº¦ï¼ç¬¬äºä¸ªé¢è²åç¬¬ä¸ä¸ªç§ç±»ï¼<speed>.<color>.<species>ã\n\næä»¬åå»ºäºä¸ä¸ªç»å®ï¼q1ç»å®äº *.orange.* ï¼q2ç»å®äº *.*.rabbit å lazy.ï¼ã\n\nq1å¹éææçæ©è²å¨ç©ã\n\nq2å¹éå³äºåå­ä»¥åææ°å¨ç©çæ¶æ¯ã\n\nä¸é¢åä¸ªå°ç»ä¹ ï¼åå¦çäº§èåéå¦ä¸æ¶æ¯ï¼ä¼è¿å¥åªä¸ªéåï¼\n\nquick.orange.rabbit q1 q2 routingkey="quick.orange.rabbit" çæ¶æ¯ä¼åæ¶è·¯ç±å°q1ä¸q2\n\nlazy.orange.elephant q1 q2\n\nquick.orange.fox q1\n\nlazy.pink.rabbit q2 (å¼å¾æ³¨æçæ¯ï¼è½ç¶è¿ä¸ªroutingkeyä¸q2çä¸¤ä¸ªbindingkeyé½å¹éï¼ä½æ¯åªä¼æéq2ä¸æ¬¡)\n\nquick.brown.fox ä¸å¹éä»»æéåï¼è¢«ä¸¢å¼\n\nquick.orange.male.rabbit ä¸å¹éä»»æéåï¼è¢«ä¸¢å¼\n\norange ä¸å¹éä»»æéåï¼è¢«ä¸¢å¼\n\nä¸é¢æä»¬ä»¥æå®routing key="quick.orange.rabbit"ä¸ºä¾ï¼éªè¯ä¸é¢çç­æ¡\n\n\n# çäº§è\n\npackage com.pigxcloud.rabbitmq.demo;\n\n\nimport com.rabbitmq.client.builtinexchangetype;\nimport com.rabbitmq.client.channel;\nimport com.rabbitmq.client.connection;\n\n/**\n * çäº§èåéæ¶æ¯\n *\n * @author heyuq\n * @date 2021/12/06\n */\npublic class send {\n\n    /**\n     * å®ä¹äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_topic_exchange";\n\n    public static void main(string[] args) throws exception {\n        // è·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º topic\n        channel.exchangedeclare(exchange_name, builtinexchangetype.topic);\n        string message = "è¿æ¯ä¸åªè¡å¨è¿éçæ©è²çåå­";\n        // åéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼quick.orange.rabbit\n        channel.basicpublish(exchange_name, "quick.orange.rabbit", null, message.getbytes());\n        system.out.println(" [å¨ç©æè¿°] sent \'" + message + "\'");\n\n        //å³é­ééåè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n\n\n\n# æ¶è´¹è1\n\npublic class recv {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_topic_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "test_topic_queue_q1";\n\n    public static void main(string[] args) throws exception {\n        // è·åè¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º topic\n        channel.exchangedeclare(exchange_name, builtinexchangetype.topic);\n        // å£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æºï¼åæ¶æå®éè¦è®¢éçrouting keyï¼è®¢éææçæ©è²å¨ç©\n        channel.queuebind(queue_name, exchange_name, "*.orange.*");\n\n        // å®ç°æ¶è´¹æ¹æ³\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            // è·åæ¶æ¯ï¼å¹¶ä¸å¤çï¼è¿ä¸ªæ¹æ³ç±»ä¼¼äºä»¶çå¬ï¼å¦æææ¶æ¯çæ¶åï¼ä¼è¢«èªå¨è°ç¨\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                string msg = new string(body, standardcharsets.utf_8);\n                system.out.println(" [æ¶è´¹è1] received : " + msg + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\n\n# æ¶è´¹è2\n\npublic class recv2 {\n\n    /**\n     * äº¤æ¢æºåç§°\n     */\n    private final static string exchange_name = "test_topic_exchange";\n    /**\n     * å®ä¹æ¶æ¯éååç§°\n     */\n    private final static string queue_name = "test_topic_queue_q2";\n\n    public static void main(string[] args) throws exception {\n\n        // è·åå°è¿æ¥\n        connection connection = connectionutil.getconnection();\n        // åå»ºéé\n        channel channel = connection.createchannel();\n        // å£°æ exchangeï¼æå®ç±»åä¸º topic\n        channel.exchangedeclare(exchange_name, builtinexchangetype.topic);\n        // å£°æéå\n        channel.queuedeclare(queue_name, false, false, false, null);\n        // ç»å®éåå°äº¤æ¢æºï¼åæ¶æå®éè¦è®¢éçrouting keyãè®¢éå³äºåå­ä»¥åææ°å¨ç©çæ¶æ¯\n        channel.queuebind(queue_name, exchange_name, "*.*.rabbit");\n        channel.queuebind(queue_name, exchange_name, "lazy.#");\n        // å®ä¹éåçæ¶è´¹è\n        defaultconsumer consumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) {\n                // body å³æ¶æ¯ä½\n                string message = new string(body, standardcharsets.utf_8);\n                system.out.println(" [æ¶è´¹è2] received : " + message + "!");\n            }\n        };\n        // çå¬éåï¼èªå¨è¿åå®æ\n        channel.basicconsume(queue_name, true, consumer);\n    }\n}\n\n\nç»æc1ãc2æ¯é½æ¥æ¶å°æ¶æ¯äºï¼\n\nrecv æ§å¶å°\n\n[æ¶è´¹è1] received : è¿æ¯ä¸åªè¡å¨è¿éçæ©è²çåå­!\n\n\nrecv2 æ§å¶å°\n\n[æ¶è´¹è2] received : è¿æ¯ä¸åªè¡å¨è¿éçæ©è²çåå­!\n\n\n\n# rpc\n\nrpcæ¨¡åç¤ºæå¾ï¼\n\n\n\nåºæ¬æ¦å¿µï¼\n\ncallback queue åè°éåï¼å®¢æ·ç«¯åæå¡å¨åéè¯·æ±ï¼æå¡å¨ç«¯å¤çè¯·æ±åï¼å°å¶å¤çç»æä¿å­å¨ä¸ä¸ªå­å¨ä½ä¸­ãèå®¢æ·ç«¯ä¸ºäºè·å¾å¤çç»æï¼é£ä¹å®¢æ·å¨åæå¡å¨åéè¯·æ±æ¶ï¼åæ¶åéä¸ä¸ªåè°éåå°åreply_toã\n\ncorrelation id å³èæ è¯ï¼å®¢æ·ç«¯å¯è½ä¼åéå¤ä¸ªè¯·æ±ç»æå¡å¨ï¼å½æå¡å¨å¤çå®åï¼å®¢æ·ç«¯æ æ³è¾¨å«å¨åè°éåä¸­çååºå·ä½åé£ä¸ªè¯·æ±æ¶å¯¹åºçãä¸ºäºå¤çè¿ç§æåµï¼å®¢æ·ç«¯å¨åéæ¯ä¸ªè¯·æ±æ¶ï¼åæ¶ä¼éå¸¦ä¸ä¸ªç¬æcorrelation_idå±æ§ï¼è¿æ ·å®¢æ·ç«¯å¨åè°éåä¸­æ ¹æ®correlation_idå­æ®µçå¼å°±å¯ä»¥åè¾¨æ­¤ååºå±äºåªä¸ªè¯·æ±ã\n\næµç¨è¯´æï¼\n\n * å½å®¢æ·ç«¯å¯å¨çæ¶åï¼å®åå»ºä¸ä¸ªå¿åç¬äº«çåè°éåã\n\n * å¨ rpc è¯·æ±ä¸­ï¼å®¢æ·ç«¯åéå¸¦æä¸¤ä¸ªå±æ§çæ¶æ¯ï¼ä¸ä¸ªæ¯è®¾ç½®åè°éåç reply_to å±æ§ï¼å¦ä¸ä¸ªæ¯è®¾ç½®å¯ä¸å¼ç correlation_id å±æ§ã\n\n * å°è¯·æ±åéå°ä¸ä¸ª rpc_queue éåä¸­ã\n\n * æå¡å¨ç­å¾è¯·æ±åéå°è¿ä¸ªéåä¸­æ¥ãå½è¯·æ±åºç°çæ¶åï¼å®æ§è¡ä»çå·¥ä½å¹¶ä¸å°å¸¦ææ§è¡ç»æçæ¶æ¯åéç» reply_to å­æ®µæå®çéåã\n\n * å®¢æ·ç«¯ç­å¾åè°éåéçæ°æ®ãå½ææ¶æ¯åºç°çæ¶åï¼å®ä¼æ£æ¥ correlation_id å±æ§ãå¦ææ­¤å±æ§çå¼ä¸è¯·æ±å¹éï¼å°å®è¿åç»åºç¨\n\n\n# åäº«ä¸¤éé¢è¯é¢ï¼\n\né¢è¯é¢ï¼\n\né¿åæ¶æ¯å ç§¯ï¼\n\n> 1ï¼éç¨workqueueï¼å¤ä¸ªæ¶è´¹èçå¬åä¸éåã\n\n> 2ï¼æ¥æ¶å°æ¶æ¯ä»¥åï¼èæ¯éè¿çº¿ç¨æ± ï¼å¼æ­¥æ¶è´¹ã\n\nå¦ä½é¿åæ¶æ¯ä¸¢å¤±ï¼\n\n> 1ï¼ æ¶è´¹èçackæºå¶ãå¯ä»¥é²æ­¢æ¶è´¹èä¸¢å¤±æ¶æ¯ã\n\nä½æ¯ï¼å¦æå¨æ¶è´¹èæ¶è´¹ä¹åï¼mqå°±å®æºäºï¼æ¶æ¯å°±æ²¡äºï¼\n\n> 2ï¼å¯ä»¥å°æ¶æ¯è¿è¡æä¹åãè¦å°æ¶æ¯æä¹åï¼åææ¯ï¼éåãexchangeé½æä¹å\n\n\n# äº¤æ¢æºæä¹å\n\nå£°æ exchangeï¼ç¬¬ä¸ä¸ªåæ°è®¾ç½®ä¸ºtrue è¡¨ç¤ºå°äº¤æ¢æºæä¹åï¼mqéå¯åä»ç¶çæã\n\nchannel.exchangedeclare(exchange_name, builtinexchangetype.topic, true);\n\n\n\n# éåæä¹å\n\nå£°æéå, ç¬¬äºä¸ªåæ°è®¾ç½®ä¸ºtrue, è¡¨ç¤ºå°å£°æçéåæä¹åï¼mqéå¯åä»ç¶çæã\n\nchannel.queuedeclare(queue_name, true, false, false, null);\n\n\n\n# æ¶æ¯æä¹å\n\nåéæ¶æ¯ï¼å¹¶ä¸æå®routing key ä¸ºï¼quick.orange.rabbit, ç¬¬ä¸ä¸ªåæ°è®¾ç½®æ¶æ¯æä¹å\n\nchannel.basicpublish(exchange_name, "quick.orange.rabbit", messageproperties.persistent_text_plain, message.getbytes());\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Springæ´åRabbitMQ",frontmatter:{title:"Springæ´åRabbitMQ",date:"2022-02-09T11:31:48.000Z",permalink:"/pages/36085c/"},regularPath:"/13.RabbitMQ/01.%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/04.Spring%E6%95%B4%E5%90%88RabbitMQ.html",relativePath:"13.RabbitMQ/01.å¿«éå¥é¨/04.Springæ´åRabbitMQ.md",key:"v-6680c492",path:"/pages/36085c/",headers:[{level:2,title:"æ­å»ºSpringBootç¯å¢",slug:"æ­å»ºspringbootç¯å¢",normalizedTitle:"æ­å»ºspringbootç¯å¢",charIndex:59},{level:3,title:"1ãæ·»å AMQPçå¯å¨å¨ï¼",slug:"_1ãæ·»å amqpçå¯å¨å¨",normalizedTitle:"1ãæ·»å amqpçå¯å¨å¨ï¼",charIndex:159},{level:3,title:"2ãå¨application.ymlä¸­æ·»å RabbitMQçéç½®ï¼",slug:"_2ãå¨application-ymlä¸­æ·»å rabbitmqçéç½®",normalizedTitle:"2ãå¨application.ymlä¸­æ·»å rabbitmqçéç½®ï¼",charIndex:437},{level:3,title:"3ãå®ä¹RabbitConfigéç½®ç±»ï¼éç½®ExchangeãQueueãåç»å®äº¤æ¢æºã",slug:"_3ãå®ä¹rabbitconfigéç½®ç±»-éç½®exchangeãqueueãåç»å®äº¤æ¢æºã",normalizedTitle:"3ãå®ä¹rabbitconfigéç½®ç±»ï¼éç½®exchangeãqueueãåç»å®äº¤æ¢æºã",charIndex:1244},{level:3,title:"çäº§è(mq-rabbitmq-producer)",slug:"çäº§è-mq-rabbitmq-producer",normalizedTitle:"çäº§è(mq-rabbitmq-producer)",charIndex:2906},{level:3,title:"æ¶è´¹è(mq-rabbitmq-consumer)",slug:"æ¶è´¹è-mq-rabbitmq-consumer",normalizedTitle:"æ¶è´¹è(mq-rabbitmq-consumer)",charIndex:3716}],headersStr:"æ­å»ºSpringBootç¯å¢ 1ãæ·»å AMQPçå¯å¨å¨ï¼ 2ãå¨application.ymlä¸­æ·»å RabbitMQçéç½®ï¼ 3ãå®ä¹RabbitConfigéç½®ç±»ï¼éç½®ExchangeãQueueãåç»å®äº¤æ¢æºã çäº§è(mq-rabbitmq-producer) æ¶è´¹è(mq-rabbitmq-consumer)",content:'# Springæ´åRabbitMQ\n\nä¸é¢è¿æ¯æ¨¡ææ³¨åæå¡å½ç¨æ·æ³¨åæååï¼åç­ä¿¡åé®ä»¶æå¡æ¨éæ¶æ¯çåºæ¯\n\n\n# æ­å»ºSpringBootç¯å¢\n\nåå»ºä¸¤ä¸ªå·¥ç¨ mq-rabbitmq-produceråmq-rabbitmq-consumerï¼åå«éç½®1ã2ã3ï¼ç¬¬ä¸æ­¥æ¬ä¾æ¶è´¹èç¨æ³¨è§£å½¢å¼ï¼å¯ä»¥ä¸ç¨éï¼\n\n\n# 1ãæ·»å AMQPçå¯å¨å¨ï¼\n\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-amqp</artifactId>\n</dependency>\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>springâbootâstarterâtest</artifactId>\n</dependency>\n\n\n\n# 2ãå¨application.ymlä¸­æ·»å RabbitMQçéç½®ï¼\n\nserver:\n  port: 10086  \nspring:\n  application:\n    name: mq-rabbitmq-producer\n  rabbitmq:\n    host: 192.168.100.100\n    port: 5672\n    username: rabbit\n    password: rabbit123\n    virtualHost: /\n    template:\n      retry:\n        enabled: true\n        initial-interval: 10000ms\n        max-interval: 300000ms\n        multiplier: 2\n      exchange: topic.exchange\n    publisher-confirms: true\n\n\nå±æ§è¯´æï¼\n\n * templateï¼æå³AmqpTemplateçéç½®\n   \n   * retryï¼å¤±è´¥éè¯\n   \n   * enabledï¼å¼å¯å¤±è´¥éè¯\n     \n     * initial-intervalï¼ç¬¬ä¸æ¬¡éè¯çé´éæ¶é¿\n     \n     * max-intervalï¼æé¿éè¯é´éï¼è¶è¿è¿ä¸ªé´éå°ä¸åéè¯\n     \n     * multiplierï¼ä¸æ¬¡éè¯é´éçåæ°ï¼æ­¤å¤æ¯2å³ä¸æ¬¡éè¯é´éæ¯ä¸æ¬¡ç2å\n   \n   * exchangeï¼ç¼ºççäº¤æ¢æºåç§°ï¼æ­¤å¤éç½®åï¼åéæ¶æ¯å¦æä¸æå®äº¤æ¢æºå°±ä¼ä½¿ç¨è¿ä¸ª\n\n * publisher-confirmsï¼çäº§èç¡®è®¤æºå¶ï¼ç¡®ä¿æ¶æ¯ä¼æ­£ç¡®åéï¼å¦æåéå¤±è´¥ä¼æéè¯¯åæ§ï¼ä»èè§¦åéè¯\n\nå½ç¶å¦æconsumeråªæ¯æ¥æ¶æ¶æ¯èä¸åéï¼å°±ä¸ç¨éç½®templateç¸å³åå®¹ã\n\n\n# 3ãå®ä¹RabbitConfigéç½®ç±»ï¼éç½®ExchangeãQueueãåç»å®äº¤æ¢æºã\n\n\n@Configuration\npublic class RabbitmqConfig {\n    public static final String QUEUE_EMAIL = "queue_email";//emailéå\n    public static final String QUEUE_SMS = "queue_sms";//smséå\n    public static final String EXCHANGE_NAME="topic.exchange";//topicsç±»åäº¤æ¢æº\n    public static final String ROUTINGKEY_EMAIL="topic.#.email.#";\n    public static final String ROUTINGKEY_SMS="topic.#.sms.#";\n \n    //å£°æäº¤æ¢æº\n    @Bean(EXCHANGE_NAME)\n    public Exchange exchange(){\n        //durable(true) æä¹åï¼mqéå¯ä¹åäº¤æ¢æºè¿å¨\n        return ExchangeBuilder.topicExchange(EXCHANGE_NAME).durable(true).build();\n    }\n \n    //å£°æemailéå\n    /*\n     *   new Queue(QUEUE_EMAIL,true,false,false)\n     *   durable="true" æä¹å rabbitmqéå¯çæ¶åä¸éè¦åå»ºæ°çéå\n     *   auto-delete è¡¨ç¤ºæ¶æ¯éåæ²¡æå¨ä½¿ç¨æ¶å°è¢«èªå¨å é¤ é»è®¤æ¯false\n     *   exclusive  è¡¨ç¤ºè¯¥æ¶æ¯éåæ¯å¦åªå¨å½åconnectionçæ,é»è®¤æ¯false\n     */\n    @Bean(QUEUE_EMAIL)\n    public Queue emailQueue(){\n        return new Queue(QUEUE_EMAIL);\n    }\n    //å£°æsmséå\n    @Bean(QUEUE_SMS)\n    public Queue smsQueue(){\n        return new Queue(QUEUE_SMS);\n    }\n \n    //ROUTINGKEY_EMAILéåç»å®äº¤æ¢æºï¼æå®routingKey\n    @Bean\n    public Binding bindingEmail(@Qualifier(QUEUE_EMAIL) Queue queue,\n                                @Qualifier(EXCHANGE_NAME) Exchange exchange){\n        return BindingBuilder.bind(queue).to(exchange).with(ROUTINGKEY_EMAIL).noargs();\n    }\n    //ROUTINGKEY_SMSéåç»å®äº¤æ¢æºï¼æå®routingKey\n    @Bean\n    public Binding bindingSMS(@Qualifier(QUEUE_SMS) Queue queue,\n                              @Qualifier(EXCHANGE_NAME) Exchange exchange){\n        return BindingBuilder.bind(queue).to(exchange).with(ROUTINGKEY_SMS).noargs();\n    }\n \n}\n\n\n\n# çäº§è(mq-rabbitmq-producer)\n\nä¸ºäºæ¹ä¾¿æµè¯ï¼æç´æ¥æçäº§èä»£ç æ¾å·¥ç¨æµè¯ç±»ï¼åérouting keyæ¯"topic.sms.email"çæ¶æ¯ï¼é£ä¹mq-rabbitmq-consumerä¸é£äºçå¬çï¼ä¸äº¤æ¢æº(topic.exchange)ç»å®ï¼å¹¶ä¸è®¢éçroutingkeyä¸­å¹éäº"topic.sms.email"è§åçï¼ éåå°±ä¼æ¶å°æ¶æ¯ã\n\n@SpringBootTest\n@RunWith(SpringRunner.class)\npublic class Send {\n \n    @Autowired\n    RabbitTemplate rabbitTemplate;\n    \n    @Test\n    public void sendMsgByTopics(){\n \n        /**\n         * åæ°ï¼\n         * 1ãäº¤æ¢æºåç§°\n         * 2ãroutingKey\n         * 3ãæ¶æ¯åå®¹\n         */\n        for (int i=0;i<5;i++){\n            String message = "æ­åæ¨ï¼æ³¨åæåï¼userid="+i;\n            rabbitTemplate.convertAndSend(RabbitmqConfig.EXCHANGE_NAME,"topic.sms.email",message);\n            System.out.println(" [x] Sent \'" + message + "\'");\n        }\n \n    }\n}\n\n\nè¿è¡æµè¯ç±»åé5æ¡æ¶æ¯ï¼\n\nwebç®¡ççé¢ï¼ å¯ä»¥çå°å·²ç»åå»ºäºäº¤æ¢æºä»¥åqueue_emailãqueue_sms 2ä¸ªéåï¼å¹¶ä¸åè¿ä¸¤ä¸ªéååå«åéäº5æ¡æ¶æ¯\n\n\n# æ¶è´¹è(mq-rabbitmq-consumer)\n\nç¼åä¸ä¸ªçå¬å¨ç»ä»¶ï¼éè¿æ³¨è§£éç½®æ¶è´¹èéåï¼ä»¥åéåä¸äº¤æ¢æºä¹é´ç»å®å³ç³»ãï¼ä¹å¯ä»¥åçäº§èé£æ ·éè¿éç½®ç±»éç½®ï¼\n\nå¨SpringAmqpä¸­ï¼å¯¹æ¶æ¯çæ¶è´¹èè¿è¡äºå°è£åæ½è±¡ãä¸ä¸ªJavaBeançæ¹æ³ï¼åªè¦æ·»å @RabbitListeneræ³¨è§£ï¼å°±å¯ä»¥æä¸ºäºä¸ä¸ªæ¶è´¹èã\n\n@Component\npublic class ReceiveHandler {\n \n    //çå¬é®ä»¶éå\n    @RabbitListener(bindings = @QueueBinding(\n            value = @Queue(value = "queue_email", durable = "true"),\n            exchange = @Exchange(\n                    value = "topic.exchange",\n                    ignoreDeclarationExceptions = "true",\n                    type = ExchangeTypes.TOPIC\n            ),\n            key = {"topic.#.email.#","email.*"}))\n    public void rece_email(String msg){\n        System.out.println(" [é®ä»¶æå¡] received : " + msg + "!");\n    }\n \n    //çå¬ç­ä¿¡éå\n    @RabbitListener(bindings = @QueueBinding(\n            value = @Queue(value = "queue_sms", durable = "true"),\n            exchange = @Exchange(\n                    value = "topic.exchange",\n                    ignoreDeclarationExceptions = "true",\n                    type = ExchangeTypes.TOPIC\n            ),\n            key = {"topic.#.sms.#"}))\n    public void rece_sms(String msg){\n        System.out.println(" [ç­ä¿¡æå¡] received : " + msg + "!");\n    }\n}\n\n\nå±æ§è¯´æï¼\n\n * @Componetï¼ç±»ä¸çæ³¨è§£ï¼æ³¨åå°Springå®¹å¨\n\n * @RabbitListenerï¼æ¹æ³ä¸çæ³¨è§£ï¼å£°æè¿ä¸ªæ¹æ³æ¯ä¸ä¸ªæ¶è´¹èæ¹æ³ï¼éè¦æå®ä¸é¢çå±æ§ï¼\n   \n   * bindingsï¼æå®ç»å®å³ç³»ï¼å¯ä»¥æå¤ä¸ªãå¼æ¯@QueueBindingçæ°ç»ã@QueueBindingåå«ä¸é¢å±æ§ï¼\n     \n     * valueï¼è¿ä¸ªæ¶è´¹èå³èçéåãå¼æ¯@Queueï¼ä»£è¡¨ä¸ä¸ªéå\n     \n     * exchangeï¼éåæç»å®çäº¤æ¢æºï¼å¼æ¯@Exchangeç±»å\n     \n     * keyï¼éååäº¤æ¢æºç»å®çRoutingKeyï¼å¯æå®å¤ä¸ª\n\nå¯å¨mq-rabbitmq-comsumeré¡¹ç®\n\nok,é®ä»¶æå¡åç­æ¯æå¡æ¥æ¶å°æ¶æ¯åï¼å°±å¯ä»¥åèªå¼å±èªå·±çä¸å¡äºã',normalizedContent:'# springæ´årabbitmq\n\nä¸é¢è¿æ¯æ¨¡ææ³¨åæå¡å½ç¨æ·æ³¨åæååï¼åç­ä¿¡åé®ä»¶æå¡æ¨éæ¶æ¯çåºæ¯\n\n\n# æ­å»ºspringbootç¯å¢\n\nåå»ºä¸¤ä¸ªå·¥ç¨ mq-rabbitmq-produceråmq-rabbitmq-consumerï¼åå«éç½®1ã2ã3ï¼ç¬¬ä¸æ­¥æ¬ä¾æ¶è´¹èç¨æ³¨è§£å½¢å¼ï¼å¯ä»¥ä¸ç¨éï¼\n\n\n# 1ãæ·»å amqpçå¯å¨å¨ï¼\n\n<dependency>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-amqp</artifactid>\n</dependency>\n<dependency>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>springâbootâstarterâtest</artifactid>\n</dependency>\n\n\n\n# 2ãå¨application.ymlä¸­æ·»å rabbitmqçéç½®ï¼\n\nserver:\n  port: 10086  \nspring:\n  application:\n    name: mq-rabbitmq-producer\n  rabbitmq:\n    host: 192.168.100.100\n    port: 5672\n    username: rabbit\n    password: rabbit123\n    virtualhost: /\n    template:\n      retry:\n        enabled: true\n        initial-interval: 10000ms\n        max-interval: 300000ms\n        multiplier: 2\n      exchange: topic.exchange\n    publisher-confirms: true\n\n\nå±æ§è¯´æï¼\n\n * templateï¼æå³amqptemplateçéç½®\n   \n   * retryï¼å¤±è´¥éè¯\n   \n   * enabledï¼å¼å¯å¤±è´¥éè¯\n     \n     * initial-intervalï¼ç¬¬ä¸æ¬¡éè¯çé´éæ¶é¿\n     \n     * max-intervalï¼æé¿éè¯é´éï¼è¶è¿è¿ä¸ªé´éå°ä¸åéè¯\n     \n     * multiplierï¼ä¸æ¬¡éè¯é´éçåæ°ï¼æ­¤å¤æ¯2å³ä¸æ¬¡éè¯é´éæ¯ä¸æ¬¡ç2å\n   \n   * exchangeï¼ç¼ºççäº¤æ¢æºåç§°ï¼æ­¤å¤éç½®åï¼åéæ¶æ¯å¦æä¸æå®äº¤æ¢æºå°±ä¼ä½¿ç¨è¿ä¸ª\n\n * publisher-confirmsï¼çäº§èç¡®è®¤æºå¶ï¼ç¡®ä¿æ¶æ¯ä¼æ­£ç¡®åéï¼å¦æåéå¤±è´¥ä¼æéè¯¯åæ§ï¼ä»èè§¦åéè¯\n\nå½ç¶å¦æconsumeråªæ¯æ¥æ¶æ¶æ¯èä¸åéï¼å°±ä¸ç¨éç½®templateç¸å³åå®¹ã\n\n\n# 3ãå®ä¹rabbitconfigéç½®ç±»ï¼éç½®exchangeãqueueãåç»å®äº¤æ¢æºã\n\n\n@configuration\npublic class rabbitmqconfig {\n    public static final string queue_email = "queue_email";//emailéå\n    public static final string queue_sms = "queue_sms";//smséå\n    public static final string exchange_name="topic.exchange";//topicsç±»åäº¤æ¢æº\n    public static final string routingkey_email="topic.#.email.#";\n    public static final string routingkey_sms="topic.#.sms.#";\n \n    //å£°æäº¤æ¢æº\n    @bean(exchange_name)\n    public exchange exchange(){\n        //durable(true) æä¹åï¼mqéå¯ä¹åäº¤æ¢æºè¿å¨\n        return exchangebuilder.topicexchange(exchange_name).durable(true).build();\n    }\n \n    //å£°æemailéå\n    /*\n     *   new queue(queue_email,true,false,false)\n     *   durable="true" æä¹å rabbitmqéå¯çæ¶åä¸éè¦åå»ºæ°çéå\n     *   auto-delete è¡¨ç¤ºæ¶æ¯éåæ²¡æå¨ä½¿ç¨æ¶å°è¢«èªå¨å é¤ é»è®¤æ¯false\n     *   exclusive  è¡¨ç¤ºè¯¥æ¶æ¯éåæ¯å¦åªå¨å½åconnectionçæ,é»è®¤æ¯false\n     */\n    @bean(queue_email)\n    public queue emailqueue(){\n        return new queue(queue_email);\n    }\n    //å£°æsmséå\n    @bean(queue_sms)\n    public queue smsqueue(){\n        return new queue(queue_sms);\n    }\n \n    //routingkey_emailéåç»å®äº¤æ¢æºï¼æå®routingkey\n    @bean\n    public binding bindingemail(@qualifier(queue_email) queue queue,\n                                @qualifier(exchange_name) exchange exchange){\n        return bindingbuilder.bind(queue).to(exchange).with(routingkey_email).noargs();\n    }\n    //routingkey_smséåç»å®äº¤æ¢æºï¼æå®routingkey\n    @bean\n    public binding bindingsms(@qualifier(queue_sms) queue queue,\n                              @qualifier(exchange_name) exchange exchange){\n        return bindingbuilder.bind(queue).to(exchange).with(routingkey_sms).noargs();\n    }\n \n}\n\n\n\n# çäº§è(mq-rabbitmq-producer)\n\nä¸ºäºæ¹ä¾¿æµè¯ï¼æç´æ¥æçäº§èä»£ç æ¾å·¥ç¨æµè¯ç±»ï¼åérouting keyæ¯"topic.sms.email"çæ¶æ¯ï¼é£ä¹mq-rabbitmq-consumerä¸é£äºçå¬çï¼ä¸äº¤æ¢æº(topic.exchange)ç»å®ï¼å¹¶ä¸è®¢éçroutingkeyä¸­å¹éäº"topic.sms.email"è§åçï¼ éåå°±ä¼æ¶å°æ¶æ¯ã\n\n@springboottest\n@runwith(springrunner.class)\npublic class send {\n \n    @autowired\n    rabbittemplate rabbittemplate;\n    \n    @test\n    public void sendmsgbytopics(){\n \n        /**\n         * åæ°ï¼\n         * 1ãäº¤æ¢æºåç§°\n         * 2ãroutingkey\n         * 3ãæ¶æ¯åå®¹\n         */\n        for (int i=0;i<5;i++){\n            string message = "æ­åæ¨ï¼æ³¨åæåï¼userid="+i;\n            rabbittemplate.convertandsend(rabbitmqconfig.exchange_name,"topic.sms.email",message);\n            system.out.println(" [x] sent \'" + message + "\'");\n        }\n \n    }\n}\n\n\nè¿è¡æµè¯ç±»åé5æ¡æ¶æ¯ï¼\n\nwebç®¡ççé¢ï¼ å¯ä»¥çå°å·²ç»åå»ºäºäº¤æ¢æºä»¥åqueue_emailãqueue_sms 2ä¸ªéåï¼å¹¶ä¸åè¿ä¸¤ä¸ªéååå«åéäº5æ¡æ¶æ¯\n\n\n# æ¶è´¹è(mq-rabbitmq-consumer)\n\nç¼åä¸ä¸ªçå¬å¨ç»ä»¶ï¼éè¿æ³¨è§£éç½®æ¶è´¹èéåï¼ä»¥åéåä¸äº¤æ¢æºä¹é´ç»å®å³ç³»ãï¼ä¹å¯ä»¥åçäº§èé£æ ·éè¿éç½®ç±»éç½®ï¼\n\nå¨springamqpä¸­ï¼å¯¹æ¶æ¯çæ¶è´¹èè¿è¡äºå°è£åæ½è±¡ãä¸ä¸ªjavabeançæ¹æ³ï¼åªè¦æ·»å @rabbitlisteneræ³¨è§£ï¼å°±å¯ä»¥æä¸ºäºä¸ä¸ªæ¶è´¹èã\n\n@component\npublic class receivehandler {\n \n    //çå¬é®ä»¶éå\n    @rabbitlistener(bindings = @queuebinding(\n            value = @queue(value = "queue_email", durable = "true"),\n            exchange = @exchange(\n                    value = "topic.exchange",\n                    ignoredeclarationexceptions = "true",\n                    type = exchangetypes.topic\n            ),\n            key = {"topic.#.email.#","email.*"}))\n    public void rece_email(string msg){\n        system.out.println(" [é®ä»¶æå¡] received : " + msg + "!");\n    }\n \n    //çå¬ç­ä¿¡éå\n    @rabbitlistener(bindings = @queuebinding(\n            value = @queue(value = "queue_sms", durable = "true"),\n            exchange = @exchange(\n                    value = "topic.exchange",\n                    ignoredeclarationexceptions = "true",\n                    type = exchangetypes.topic\n            ),\n            key = {"topic.#.sms.#"}))\n    public void rece_sms(string msg){\n        system.out.println(" [ç­ä¿¡æå¡] received : " + msg + "!");\n    }\n}\n\n\nå±æ§è¯´æï¼\n\n * @componetï¼ç±»ä¸çæ³¨è§£ï¼æ³¨åå°springå®¹å¨\n\n * @rabbitlistenerï¼æ¹æ³ä¸çæ³¨è§£ï¼å£°æè¿ä¸ªæ¹æ³æ¯ä¸ä¸ªæ¶è´¹èæ¹æ³ï¼éè¦æå®ä¸é¢çå±æ§ï¼\n   \n   * bindingsï¼æå®ç»å®å³ç³»ï¼å¯ä»¥æå¤ä¸ªãå¼æ¯@queuebindingçæ°ç»ã@queuebindingåå«ä¸é¢å±æ§ï¼\n     \n     * valueï¼è¿ä¸ªæ¶è´¹èå³èçéåãå¼æ¯@queueï¼ä»£è¡¨ä¸ä¸ªéå\n     \n     * exchangeï¼éåæç»å®çäº¤æ¢æºï¼å¼æ¯@exchangeç±»å\n     \n     * keyï¼éååäº¤æ¢æºç»å®çroutingkeyï¼å¯æå®å¤ä¸ª\n\nå¯å¨mq-rabbitmq-comsumeré¡¹ç®\n\nok,é®ä»¶æå¡åç­æ¯æå¡æ¥æ¶å°æ¶æ¯åï¼å°±å¯ä»¥åèªå¼å±èªå·±çä¸å¡äºã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"æå»ºåä½åºç¨æ¨¡å",frontmatter:{title:"æå»ºåä½åºç¨æ¨¡å",date:"2022-02-09T11:40:48.000Z",permalink:"/pages/593778/"},regularPath:"/14.%E5%BE%AE%E6%9C%8D%E5%8A%A1/01.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B/01.%E6%9E%84%E5%BB%BA%E5%8D%95%E4%BD%93%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9E%8B.html",relativePath:"14.å¾®æå¡/01.å¾®æå¡ç®ä»/01.æå»ºåä½åºç¨æ¨¡å.md",key:"v-12cc11ea",path:"/pages/593778/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:15}],headersStr:"æ¦è¿°",content:"# æå»ºåä½åºç¨æ¨¡å\n\n\n# æ¦è¿°\n\næä»¬åè®¾ï¼æ¨å¼å§å¼åä¸ä¸ªæè½¦åºç¨ï¼æç®ä¸ Uber å Hailo ç«äºãç»è¿åæ­¥äº¤æµåéæ±æ¶éï¼æ¨å¼å§æå¨æèä½¿ç¨ç±»ä¼¼ RailsãSpring BootãPlay æè Maven ç­å¹³å°æ¥çæä¸ä¸ªæ°é¡¹ç®ã\n\nè¯¥æ°åºç¨æ¯ä¸ä¸ªæ¨¡ååçå­è¾¹å½¢æ¶æï¼å¦ä¸å¾ï¼ä¸ä¸ªç®åçæè½¦åºç¨ï¼æç¤ºï¼\n\n\n\nè¯¥åºç¨çæ ¸å¿æ¯ç±æ¨¡åå®ç°çä¸å¡é»è¾ï¼å®å®ä¹äºæå¡ãé¢åå¯¹è±¡åäºä»¶ãå´ç»æ ¸å¿çæ¯ä¸å¤é¨ä¸çæ¥å£å¯¹æ¥çééå¨ãééå¨ç¤ºä¾åæ¬æ°æ®åºè®¿é®ç»ä»¶ãçäº§åæ¶è´¹æ¶æ¯çæ¶æ¯ç»ä»¶åæ´é²äº API æå®ç°äºä¸ä¸ª UI ç web ç»ä»¶ã\n\nå°½ç®¡æä¸ä¸ªé»è¾æ¨¡ååæ¶æï¼ä½åºç¨ç¨åºè¢«ä½ä¸ºä¸ä¸ªåä½è¿è¡æååé¨ç½²ãå®éæ ¼å¼åå³äºåºç¨ç¨åºçè¯­è¨åæ¡æ¶ãä¾å¦ï¼è®¸å¤ Java åºç¨ç¨åºè¢«æåæ WAR æä»¶é¨ç½²å¨å¦ Tomcat æè Jetty ä¹ç±»çåºç¨æå¡å¨ä¸ãå¶ä» Java åºç¨ç¨åºè¢«æåæèªåå« (self-contained) çå¯æ§è¡ JARãç±»ä¼¼å°ï¼ Rails å Node.js åºç¨ç¨åºè¢«æåä¸ºæç®å½å±æ¬¡çç»æ\n\nä»¥è¿ç§é£æ ¼ç¼åçåºç¨æ¯å¾å¸¸è§çãä»ä»¬å¾å®¹æå¼åï¼å ä¸ºæä»¬ç IDE åå¶ä»å·¥å·å°±æ¯ä¸æ³¨äºæå»ºåä½åºç¨ãè¿äºåºç¨ç¨åºä¹å¾å®¹ææµè¯ï¼ æ¨å¯ä»¥éè¿ç®åå°å¯å¨å¹¶ä½¿ç¨å¦ Selenium æµè¯åæ¥æµè¯ UI ä»¥è½»æ¾å°å®ç°ç«¯å°ç«¯ (end-to-end) æµè¯ãåä½åºç¨åæ ·æäºé¨ç½²ãæ¨åªéæ·è´æåå¥½çåºç¨ç¨åºå°æå¡å¨ä¸ãæ¨è¿å¯ä»¥éè¿è¿è¡å¤ä¸ªå¯æ¬åç»åè´è½½åè¡¡å¨æ¥æ©å±åºç¨ãå¨é¡¹ç®çæ©æé¶æ®µï¼å®å¯ä»¥è¯å¥½è¿ä½ã",normalizedContent:"# æå»ºåä½åºç¨æ¨¡å\n\n\n# æ¦è¿°\n\næä»¬åè®¾ï¼æ¨å¼å§å¼åä¸ä¸ªæè½¦åºç¨ï¼æç®ä¸ uber å hailo ç«äºãç»è¿åæ­¥äº¤æµåéæ±æ¶éï¼æ¨å¼å§æå¨æèä½¿ç¨ç±»ä¼¼ railsãspring bootãplay æè maven ç­å¹³å°æ¥çæä¸ä¸ªæ°é¡¹ç®ã\n\nè¯¥æ°åºç¨æ¯ä¸ä¸ªæ¨¡ååçå­è¾¹å½¢æ¶æï¼å¦ä¸å¾ï¼ä¸ä¸ªç®åçæè½¦åºç¨ï¼æç¤ºï¼\n\n\n\nè¯¥åºç¨çæ ¸å¿æ¯ç±æ¨¡åå®ç°çä¸å¡é»è¾ï¼å®å®ä¹äºæå¡ãé¢åå¯¹è±¡åäºä»¶ãå´ç»æ ¸å¿çæ¯ä¸å¤é¨ä¸çæ¥å£å¯¹æ¥çééå¨ãééå¨ç¤ºä¾åæ¬æ°æ®åºè®¿é®ç»ä»¶ãçäº§åæ¶è´¹æ¶æ¯çæ¶æ¯ç»ä»¶åæ´é²äº api æå®ç°äºä¸ä¸ª ui ç web ç»ä»¶ã\n\nå°½ç®¡æä¸ä¸ªé»è¾æ¨¡ååæ¶æï¼ä½åºç¨ç¨åºè¢«ä½ä¸ºä¸ä¸ªåä½è¿è¡æååé¨ç½²ãå®éæ ¼å¼åå³äºåºç¨ç¨åºçè¯­è¨åæ¡æ¶ãä¾å¦ï¼è®¸å¤ java åºç¨ç¨åºè¢«æåæ war æä»¶é¨ç½²å¨å¦ tomcat æè jetty ä¹ç±»çåºç¨æå¡å¨ä¸ãå¶ä» java åºç¨ç¨åºè¢«æåæèªåå« (self-contained) çå¯æ§è¡ jarãç±»ä¼¼å°ï¼ rails å node.js åºç¨ç¨åºè¢«æåä¸ºæç®å½å±æ¬¡çç»æ\n\nä»¥è¿ç§é£æ ¼ç¼åçåºç¨æ¯å¾å¸¸è§çãä»ä»¬å¾å®¹æå¼åï¼å ä¸ºæä»¬ç ide åå¶ä»å·¥å·å°±æ¯ä¸æ³¨äºæå»ºåä½åºç¨ãè¿äºåºç¨ç¨åºä¹å¾å®¹ææµè¯ï¼ æ¨å¯ä»¥éè¿ç®åå°å¯å¨å¹¶ä½¿ç¨å¦ selenium æµè¯åæ¥æµè¯ ui ä»¥è½»æ¾å°å®ç°ç«¯å°ç«¯ (end-to-end) æµè¯ãåä½åºç¨åæ ·æäºé¨ç½²ãæ¨åªéæ·è´æåå¥½çåºç¨ç¨åºå°æå¡å¨ä¸ãæ¨è¿å¯ä»¥éè¿è¿è¡å¤ä¸ªå¯æ¬åç»åè´è½½åè¡¡å¨æ¥æ©å±åºç¨ãå¨é¡¹ç®çæ©æé¶æ®µï¼å®å¯ä»¥è¯å¥½è¿ä½ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"TTLéå_æ­»ä¿¡éå",frontmatter:{title:"TTLéå_æ­»ä¿¡éå",date:"2022-02-09T11:31:48.000Z",permalink:"/pages/c5c502/"},regularPath:"/13.RabbitMQ/02.%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/01.TTL%E9%98%9F%E5%88%97_%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97.html",relativePath:"13.RabbitMQ/02.é«çº§ç¨æ³/01.TTLéå_æ­»ä¿¡éå.md",key:"v-8f47802a",path:"/pages/c5c502/",headers:[{level:2,title:"TTLéå(Time To Live)",slug:"ttléå-time-to-live",normalizedTitle:"ttléå(time to live)",charIndex:19},{level:3,title:"ä¸å¡åºæ¯",slug:"ä¸å¡åºæ¯",normalizedTitle:"ä¸å¡åºæ¯",charIndex:44},{level:3,title:"ä»£ç å®ç°",slug:"ä»£ç å®ç°",normalizedTitle:"ä»£ç å®ç°",charIndex:54},{level:3,title:"å°ç»",slug:"å°ç»",normalizedTitle:"å°ç»",charIndex:64},{level:2,title:"æ­»ä¿¡éå",slug:"æ­»ä¿¡éå",normalizedTitle:"æ­»ä¿¡éå",charIndex:8},{level:3,title:"ä»ä¹æ¯æ­»ä¿¡éå",slug:"ä»ä¹æ¯æ­»ä¿¡éå",normalizedTitle:"ä»ä¹æ¯æ­»ä¿¡éå",charIndex:80},{level:3,title:"ä»£ç å®ç°",slug:"ä»£ç å®ç°-2",normalizedTitle:"ä»£ç å®ç°",charIndex:54},{level:3,title:"å°ç»",slug:"å°ç»-2",normalizedTitle:"å°ç»",charIndex:64}],headersStr:"TTLéå(Time To Live) ä¸å¡åºæ¯ ä»£ç å®ç° å°ç» æ­»ä¿¡éå ä»ä¹æ¯æ­»ä¿¡éå ä»£ç å®ç° å°ç»",content:'# TTLéå_æ­»ä¿¡éå\n\n\n\n * TTLéå(Time To Live)\n   * ä¸å¡åºæ¯\n   * ä»£ç å®ç°\n   * å°ç»\n * æ­»ä¿¡éå\n   * ä»ä¹æ¯æ­»ä¿¡éå\n   * ä»£ç å®ç°\n   * å°ç»\n\n\n\n\n# TTLéå(Time To Live)\n\nTTLéå\n\nç®åçè¯´å°±æ¯éåä¸­çæ¶æ¯æ¯ææ¶é´éå¶çï¼å¦æè¶æ¶ï¼é£ä¹è¿ä¸ªæ¶æ¯å°ä¼è¢«éåå é¤\n\n\n# ä¸å¡åºæ¯\n\næ·å®è´­ç©ï¼æäº¤è®¢åä¹åï¼å¨ä¸å®çæ¶é´åï¼30åéï¼ãè®¢åå¦ææ²¡ææ¯ä»ï¼é£ä¹è®¢åå°±ä¼èªå¨å³é­ï¼å¦ææ³è¦è´­ä¹°ååï¼å°±éè¦éæ°ä¸åãå®ç°è¿ä¸ªåè½ï¼å°±ä½¿ç¨å°äºè¿ä¸ª TTLéå\n\n\n# ä»£ç å®ç°\n\n# ç¼åçäº§è\n\n// çäº§è\npublic class Producer {\n    private static final String QUEUE_NAME = "queue_ttl_1";\n\n    public static void main(String[] args) throws IOException, TimeoutException {\n        Connection connection = ConnectionUtils.getConnection();\n        Channel channel = connection.createChannel();\n        // è®¾ç½®éåçå±æ§\n        Map<String, Object> map = new HashMap<>(1);\n        // å¦ææ¯ ttl éåï¼éè¦è®¾ç½®é®ä¸ºï¼x-message-ttlï¼å¼ä¸ºï¼è¿ææ¶é´ï¼æ¯«ç§ï¼\n        map.put("x-message-ttl", 10000);\n        channel.queueDeclare(QUEUE_NAME, false, false, false, map);\n        channel.basicPublish("", QUEUE_NAME, null, "ttléå...".getBytes());\n        channel.close();\n        connection.close();\n    }\n}\n\n\n# ç¼åæ¶è´¹è\n\n// æ¶è´¹è\npublic class Consumer {\n    private static final String QUEUE_NAME = "queue_ttl_1";\n\n    public static void main(String[] args) throws IOException, TimeoutException {\n        Connection connection = ConnectionUtils.getConnection();\n        Channel channel = connection.createChannel();\n        Map<String, Object> map = new HashMap<>(1);\n        // å¦ææ¯ ttl éåï¼éè¦è®¾ç½®é®ä¸ºï¼x-message-ttlï¼å¼ä¸ºï¼è¿ææ¶é´ï¼æ¯«ç§ï¼\n        map.put("x-message-ttl", 10000);\n        channel.queueDeclare(QUEUE_NAME, false, false, false, map);\n        DefaultConsumer defaultConsumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException {\n                System.out.println("æ¶è´¹èæ¥æ¶å°æ¶æ¯ï¼" + new String(body));\n                System.out.println(new SimpleDateFormat("hh: mm: ss").format(new Date()));\n                channel.basicAck(envelope.getDeliveryTag(), false);\n            }\n        };\n        System.out.println(new SimpleDateFormat("hh: mm: ss").format(new Date()));\n        channel.basicConsume(QUEUE_NAME, false, defaultConsumer);\n    }\n}\n\n\n# æµè¯TTL\n\nå¯å¨æ¶è´¹èï¼åå¯å¨çäº§èï¼ç¶åéæ°å¯å¨æ¶è´¹è\n\nå¯ä»¥çåºï¼çäº§èåéæ¶æ¯æ¶ï¼æ¶è´¹èå¯ä»¥æ¥æ¶å°ï¼å½éæ°å¯å¨æ¶è´¹èæ¶ï¼ç±äºé´éæ¶é´å¤§äº TTL è®¾ç½®çè¿ææ¶é´10ç§ï¼æä»¥ç¬¬äºæ¬¡å¹¶æ²¡æå¾å°å¼ï¼ä¹å°±è¯æäºï¼éåä¸­çæ¶æ¯å·²ç»è¢«å é¤ã\n\n\n# å°ç»\n\n 1. è®¾ç½®TTLéåï¼éè¦å¨åå»ºéåçæ¶åï¼è®¾ç½®ä¸ä¸ä¸ªå±æ§ x-message-ttl\n 2. è®¾ç½®æ¹å¼ï¼map.put("x-message-ttl", 10000);\n\n\n# æ­»ä¿¡éå\n\n\n# ä»ä¹æ¯æ­»ä¿¡éå\n\nå½æ¶æ¯å¨éåä¸­ç¼ç¨æ­»ä¿¡ä¹åãå¯ä»¥å®ä¹å®éæ°push å°å¦å¤ä¸ä¸ªäº¤æ¢æºä¸ãè¿ä¸ªäº¤æ¢æº ä¹æèªå·±å¯¹åºçéå è¿ä¸ªéåå°±ç§°ä¸ºæ­»ä¿¡éå\n\næ¶æ¯åææ­»ä¿¡çåå ï¼\n\n 1. åéå°éåä¸­çæ¶æ¯è¢«æç»äº\n 2. æ¶æ¯ç ttl æ¶é´è¿æäº\n 3. éåè¾¾å°äºæå¤§é¿åº¦ï¼åå¾éé¢æ¾ä¿¡æ¯ï¼æ¾ä¸è¿å»çæ¶æ¯\n\nå¨æ»¡è¶³æ­»ä¿¡çåæä¸ï¼å®ä¹ä¸ä¸ªéåï¼è¿ä¸ªéåä¸é¨ç¨æ¥å­æ¾æ­»ä¿¡ï¼å°±æ¯æ­»ä¿¡éå\n\næ­»ä¿¡éåä¹æ¯ä¸ä¸ªæ­£å¸¸çéåï¼åä¸è¬çéåæ²¡æä»ä¹åºå«\n\nå½è¿ä¸ªéåä¸­å¦ææè¿ä¸ªæ­»ä¿¡çæ¶åï¼rabbitmq å°±ä¼å°è¿ä¸ªæ¶æ¯èªå¨åéå°æä»¬æåå®ä¹å¥½çæ­»ä¿¡éåä¸­å»ï¼ç®åçè¯´å°±æ¯è·¯ç±å°å¦å¤ä¸ä¸ªéåï¼\n\næ­»ä¿¡çæµç¨ï¼\n\n> çäº§è --\x3e åéæ¶æ¯ --\x3e TTLäº¤æ¢æº --\x3e TTLéå --\x3e åææ­»ä¿¡éå --\x3e DLXäº¤æ¢æº --\x3e DLXéå --\x3e æ¶è´¹è\n\n\n\n\n# ä»£ç å®ç°\n\nè¿éä½¿ç¨ TTL æµè¯æ­»ä¿¡éå\n\n# ç¼åçäº§è\n\n// çäº§è\npublic class Producer {\n    // ttléåçäº¤æ¢æº\n    private static final String EXCHANGE_NAME_TTL = "exchange_ttl";\n    // è·¯ç±çkey\n    private static final String ROUTING_KEY = "dlx.km";\n\n    public static void main(String[] args) throws IOException, TimeoutException {\n        Connection connection = ConnectionUtils.getConnection();\n        Channel channel = connection.createChannel();\n        for (int i = 0; i < 5; i++) {\n            channel.basicPublish(EXCHANGE_NAME_TTL, ROUTING_KEY, null, ("TTLéåæµè¯æ­»ä¿¡éå" + i).getBytes());\n        }\n        channel.close();\n        connection.close();\n    }\n}\n\n\n# ç¼åæ¶è´¹è\n\n// æ¶è´¹è\npublic class Consumer {\n    // ttléåçäº¤æ¢æº\n    private static final String EXCHANGE_NAME_TTL = "exchange_ttl";\n    // ttléå\n    private static final String QUEUE_NAME_TTL = "queue_ttl";\n    // dlxäº¤æ¢æº\n    private static final String EXCHANGE_NAME_DLX = "exchange_dlx";\n    // dlxéå\n    private static final String QUEUE_NAME_DLX = "queue_dlx";\n\n    public static void main(String[] args) throws IOException, TimeoutException {\n        Connection connection = ConnectionUtils.getConnection();\n        final Channel channel = connection.createChannel();\n        // åå»ºtopicæ¨¡å¼äº¤æ¢æºï¼å¼å¯æä¹å\n        channel.exchangeDeclare(EXCHANGE_NAME_TTL, "topic", true);\n        Map<String, Object> map = new HashMap<>();\n        map.put("x-message-ttl", 10000);\n        map.put("x-dead-letter-exchange", EXCHANGE_NAME_DLX);\n        channel.queueDeclare(QUEUE_NAME_TTL, true, false, false, map);\n        // å°éååäº¤æ¢æºè¿è¡ç»å®\n        channel.queueBind(QUEUE_NAME_TTL, EXCHANGE_NAME_TTL, "dlx.#");\n\n        // å¼å§å£°ææ­»ä¿¡äº¤æ¢æºåæ­»ä¿¡éå\n        // æ·»å ä¸ä¸ªæ­»ä¿¡çå±æ§  åé¢è¿ä¸ªå¼å°±æ¯æ­»ä¿¡éåäº¤æ¢æºçåå­\n        channel.exchangeDeclare(EXCHANGE_NAME_DLX, "topic", true);\n        channel.queueDeclare(QUEUE_NAME_DLX, true, false, false, null);\n        channel.queueBind(QUEUE_NAME_DLX, EXCHANGE_NAME_DLX, "#");\n\n        DefaultConsumer defaultConsumer = new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException {\n                System.out.println("æåè·åå°æ°æ®ï¼" + new String(body));\n            }\n        };\n        channel.basicConsume(QUEUE_NAME_TTL, true, defaultConsumer);\n//        channel.basicConsume(QUEUE_NAME_DLX, true, defaultConsumer);\n    }\n}\n\n\n# æµè¯ç»æ\n\nåå¯å¨æ¶è´¹èï¼åå¯å¨çäº§è\n\nå½è®¾ç½® channel.basicConsume(QUEUE_NAME_TTL, true, defaultConsumer); æ¶ï¼ä¹å°±æ¯çå¬ TTL éåæ¶æ¯çæ¶åï¼æ§å¶å°é©¬ä¸æå°åºä¸å¾æç¤ºä¿¡æ¯ã\n\nå½è®¾ç½® channel.basicConsume(QUEUE_NAME_DLX, true, defaultConsumer); æ¶ï¼çå¬æ­»ä¿¡éåçæ¶æ¯çæ¶åï¼æ§å¶å°å¨æ¶æ¯åéäº 10ç§éä¹åææå°åºä»¥ä¸ä¿¡æ¯ã\n\nè¯æ TTLè¿æçä¿¡æ¯ï¼æåè¿å¥å°æ­»ä¿¡éåä¸­ãå¨æææä¹å¯ä»¥å¨ RabbitMQæ§å¶å°ä¸­çåºæ¥ã\n\n\n\n\n# å°ç»\n\n 1. æ ¸å¿ä»£ç ï¼map.put("x-dead-letter-exchange", EXCHANGE_NAME_DLX); ä¸å®è¦è®¾ç½® ttl éåçæ­»ä¿¡å±æ§\n 2. æ­»ä¿¡éåå°±æ¯ä¸ä¸ªæ®éçéå\n 3. åºç¨åºæ¯ï¼æ¶æ¯çå»¶è¿åéï¼å®æ¶å³é­è®¢åç­ã',normalizedContent:'# ttléå_æ­»ä¿¡éå\n\n\n\n * ttléå(time to live)\n   * ä¸å¡åºæ¯\n   * ä»£ç å®ç°\n   * å°ç»\n * æ­»ä¿¡éå\n   * ä»ä¹æ¯æ­»ä¿¡éå\n   * ä»£ç å®ç°\n   * å°ç»\n\n\n\n\n# ttléå(time to live)\n\nttléå\n\nç®åçè¯´å°±æ¯éåä¸­çæ¶æ¯æ¯ææ¶é´éå¶çï¼å¦æè¶æ¶ï¼é£ä¹è¿ä¸ªæ¶æ¯å°ä¼è¢«éåå é¤\n\n\n# ä¸å¡åºæ¯\n\næ·å®è´­ç©ï¼æäº¤è®¢åä¹åï¼å¨ä¸å®çæ¶é´åï¼30åéï¼ãè®¢åå¦ææ²¡ææ¯ä»ï¼é£ä¹è®¢åå°±ä¼èªå¨å³é­ï¼å¦ææ³è¦è´­ä¹°ååï¼å°±éè¦éæ°ä¸åãå®ç°è¿ä¸ªåè½ï¼å°±ä½¿ç¨å°äºè¿ä¸ª ttléå\n\n\n# ä»£ç å®ç°\n\n# ç¼åçäº§è\n\n// çäº§è\npublic class producer {\n    private static final string queue_name = "queue_ttl_1";\n\n    public static void main(string[] args) throws ioexception, timeoutexception {\n        connection connection = connectionutils.getconnection();\n        channel channel = connection.createchannel();\n        // è®¾ç½®éåçå±æ§\n        map<string, object> map = new hashmap<>(1);\n        // å¦ææ¯ ttl éåï¼éè¦è®¾ç½®é®ä¸ºï¼x-message-ttlï¼å¼ä¸ºï¼è¿ææ¶é´ï¼æ¯«ç§ï¼\n        map.put("x-message-ttl", 10000);\n        channel.queuedeclare(queue_name, false, false, false, map);\n        channel.basicpublish("", queue_name, null, "ttléå...".getbytes());\n        channel.close();\n        connection.close();\n    }\n}\n\n\n# ç¼åæ¶è´¹è\n\n// æ¶è´¹è\npublic class consumer {\n    private static final string queue_name = "queue_ttl_1";\n\n    public static void main(string[] args) throws ioexception, timeoutexception {\n        connection connection = connectionutils.getconnection();\n        channel channel = connection.createchannel();\n        map<string, object> map = new hashmap<>(1);\n        // å¦ææ¯ ttl éåï¼éè¦è®¾ç½®é®ä¸ºï¼x-message-ttlï¼å¼ä¸ºï¼è¿ææ¶é´ï¼æ¯«ç§ï¼\n        map.put("x-message-ttl", 10000);\n        channel.queuedeclare(queue_name, false, false, false, map);\n        defaultconsumer defaultconsumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) throws ioexception {\n                system.out.println("æ¶è´¹èæ¥æ¶å°æ¶æ¯ï¼" + new string(body));\n                system.out.println(new simpledateformat("hh: mm: ss").format(new date()));\n                channel.basicack(envelope.getdeliverytag(), false);\n            }\n        };\n        system.out.println(new simpledateformat("hh: mm: ss").format(new date()));\n        channel.basicconsume(queue_name, false, defaultconsumer);\n    }\n}\n\n\n# æµè¯ttl\n\nå¯å¨æ¶è´¹èï¼åå¯å¨çäº§èï¼ç¶åéæ°å¯å¨æ¶è´¹è\n\nå¯ä»¥çåºï¼çäº§èåéæ¶æ¯æ¶ï¼æ¶è´¹èå¯ä»¥æ¥æ¶å°ï¼å½éæ°å¯å¨æ¶è´¹èæ¶ï¼ç±äºé´éæ¶é´å¤§äº ttl è®¾ç½®çè¿ææ¶é´10ç§ï¼æä»¥ç¬¬äºæ¬¡å¹¶æ²¡æå¾å°å¼ï¼ä¹å°±è¯æäºï¼éåä¸­çæ¶æ¯å·²ç»è¢«å é¤ã\n\n\n# å°ç»\n\n 1. è®¾ç½®ttléåï¼éè¦å¨åå»ºéåçæ¶åï¼è®¾ç½®ä¸ä¸ä¸ªå±æ§ x-message-ttl\n 2. è®¾ç½®æ¹å¼ï¼map.put("x-message-ttl", 10000);\n\n\n# æ­»ä¿¡éå\n\n\n# ä»ä¹æ¯æ­»ä¿¡éå\n\nå½æ¶æ¯å¨éåä¸­ç¼ç¨æ­»ä¿¡ä¹åãå¯ä»¥å®ä¹å®éæ°push å°å¦å¤ä¸ä¸ªäº¤æ¢æºä¸ãè¿ä¸ªäº¤æ¢æº ä¹æèªå·±å¯¹åºçéå è¿ä¸ªéåå°±ç§°ä¸ºæ­»ä¿¡éå\n\næ¶æ¯åææ­»ä¿¡çåå ï¼\n\n 1. åéå°éåä¸­çæ¶æ¯è¢«æç»äº\n 2. æ¶æ¯ç ttl æ¶é´è¿æäº\n 3. éåè¾¾å°äºæå¤§é¿åº¦ï¼åå¾éé¢æ¾ä¿¡æ¯ï¼æ¾ä¸è¿å»çæ¶æ¯\n\nå¨æ»¡è¶³æ­»ä¿¡çåæä¸ï¼å®ä¹ä¸ä¸ªéåï¼è¿ä¸ªéåä¸é¨ç¨æ¥å­æ¾æ­»ä¿¡ï¼å°±æ¯æ­»ä¿¡éå\n\næ­»ä¿¡éåä¹æ¯ä¸ä¸ªæ­£å¸¸çéåï¼åä¸è¬çéåæ²¡æä»ä¹åºå«\n\nå½è¿ä¸ªéåä¸­å¦ææè¿ä¸ªæ­»ä¿¡çæ¶åï¼rabbitmq å°±ä¼å°è¿ä¸ªæ¶æ¯èªå¨åéå°æä»¬æåå®ä¹å¥½çæ­»ä¿¡éåä¸­å»ï¼ç®åçè¯´å°±æ¯è·¯ç±å°å¦å¤ä¸ä¸ªéåï¼\n\næ­»ä¿¡çæµç¨ï¼\n\n> çäº§è --\x3e åéæ¶æ¯ --\x3e ttläº¤æ¢æº --\x3e ttléå --\x3e åææ­»ä¿¡éå --\x3e dlxäº¤æ¢æº --\x3e dlxéå --\x3e æ¶è´¹è\n\n\n\n\n# ä»£ç å®ç°\n\nè¿éä½¿ç¨ ttl æµè¯æ­»ä¿¡éå\n\n# ç¼åçäº§è\n\n// çäº§è\npublic class producer {\n    // ttléåçäº¤æ¢æº\n    private static final string exchange_name_ttl = "exchange_ttl";\n    // è·¯ç±çkey\n    private static final string routing_key = "dlx.km";\n\n    public static void main(string[] args) throws ioexception, timeoutexception {\n        connection connection = connectionutils.getconnection();\n        channel channel = connection.createchannel();\n        for (int i = 0; i < 5; i++) {\n            channel.basicpublish(exchange_name_ttl, routing_key, null, ("ttléåæµè¯æ­»ä¿¡éå" + i).getbytes());\n        }\n        channel.close();\n        connection.close();\n    }\n}\n\n\n# ç¼åæ¶è´¹è\n\n// æ¶è´¹è\npublic class consumer {\n    // ttléåçäº¤æ¢æº\n    private static final string exchange_name_ttl = "exchange_ttl";\n    // ttléå\n    private static final string queue_name_ttl = "queue_ttl";\n    // dlxäº¤æ¢æº\n    private static final string exchange_name_dlx = "exchange_dlx";\n    // dlxéå\n    private static final string queue_name_dlx = "queue_dlx";\n\n    public static void main(string[] args) throws ioexception, timeoutexception {\n        connection connection = connectionutils.getconnection();\n        final channel channel = connection.createchannel();\n        // åå»ºtopicæ¨¡å¼äº¤æ¢æºï¼å¼å¯æä¹å\n        channel.exchangedeclare(exchange_name_ttl, "topic", true);\n        map<string, object> map = new hashmap<>();\n        map.put("x-message-ttl", 10000);\n        map.put("x-dead-letter-exchange", exchange_name_dlx);\n        channel.queuedeclare(queue_name_ttl, true, false, false, map);\n        // å°éååäº¤æ¢æºè¿è¡ç»å®\n        channel.queuebind(queue_name_ttl, exchange_name_ttl, "dlx.#");\n\n        // å¼å§å£°ææ­»ä¿¡äº¤æ¢æºåæ­»ä¿¡éå\n        // æ·»å ä¸ä¸ªæ­»ä¿¡çå±æ§  åé¢è¿ä¸ªå¼å°±æ¯æ­»ä¿¡éåäº¤æ¢æºçåå­\n        channel.exchangedeclare(exchange_name_dlx, "topic", true);\n        channel.queuedeclare(queue_name_dlx, true, false, false, null);\n        channel.queuebind(queue_name_dlx, exchange_name_dlx, "#");\n\n        defaultconsumer defaultconsumer = new defaultconsumer(channel) {\n            @override\n            public void handledelivery(string consumertag, envelope envelope, amqp.basicproperties properties, byte[] body) throws ioexception {\n                system.out.println("æåè·åå°æ°æ®ï¼" + new string(body));\n            }\n        };\n        channel.basicconsume(queue_name_ttl, true, defaultconsumer);\n//        channel.basicconsume(queue_name_dlx, true, defaultconsumer);\n    }\n}\n\n\n# æµè¯ç»æ\n\nåå¯å¨æ¶è´¹èï¼åå¯å¨çäº§è\n\nå½è®¾ç½® channel.basicconsume(queue_name_ttl, true, defaultconsumer); æ¶ï¼ä¹å°±æ¯çå¬ ttl éåæ¶æ¯çæ¶åï¼æ§å¶å°é©¬ä¸æå°åºä¸å¾æç¤ºä¿¡æ¯ã\n\nå½è®¾ç½® channel.basicconsume(queue_name_dlx, true, defaultconsumer); æ¶ï¼çå¬æ­»ä¿¡éåçæ¶æ¯çæ¶åï¼æ§å¶å°å¨æ¶æ¯åéäº 10ç§éä¹åææå°åºä»¥ä¸ä¿¡æ¯ã\n\nè¯æ ttlè¿æçä¿¡æ¯ï¼æåè¿å¥å°æ­»ä¿¡éåä¸­ãå¨æææä¹å¯ä»¥å¨ rabbitmqæ§å¶å°ä¸­çåºæ¥ã\n\n\n\n\n# å°ç»\n\n 1. æ ¸å¿ä»£ç ï¼map.put("x-dead-letter-exchange", exchange_name_dlx); ä¸å®è¦è®¾ç½® ttl éåçæ­»ä¿¡å±æ§\n 2. æ­»ä¿¡éåå°±æ¯ä¸ä¸ªæ®éçéå\n 3. åºç¨åºæ¯ï¼æ¶æ¯çå»¶è¿åéï¼å®æ¶å³é­è®¢åç­ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"èµ°ååä½å°ç±",frontmatter:{title:"èµ°ååä½å°ç±",date:"2022-02-09T11:40:48.000Z",permalink:"/pages/72d00f/"},regularPath:"/14.%E5%BE%AE%E6%9C%8D%E5%8A%A1/01.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B/02.%E8%B5%B0%E5%90%91%E5%8D%95%E4%BD%93%E5%9C%B0%E7%8B%B1.html",relativePath:"14.å¾®æå¡/01.å¾®æå¡ç®ä»/02.èµ°ååä½å°ç±.md",key:"v-dc3c5474",path:"/pages/72d00f/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:13}],headersStr:"æ¦è¿°",content:"# èµ°ååä½å°ç±\n\n\n# æ¦è¿°\n\nä¸å¹¸çæ¯ï¼è¿ç§ç®åçæ¹æ³æå¾å¤§çå±éæ§ãæåçåºç¨æä¸ä¸ªè¶å¿ï¼éçæ¶é´æ¨ç§»èåå¾è¶æ¥è¶èè¿ãæ¨çå¼åå¢éå¨æ¯ä¸ªå²åºé¶æ®µé½è¦å®ç°æ´å¤çç¨æ·éæ±ï¼è¿æå³çéè¦æ·»å äºè®¸å¤è¡ä»£ç ãå å¹´ä¹åï¼å°èç®åçåºç¨å°ä¼éæ¸æé¿æä¸ä¸ªåºå¤§çåä½ãä¸ºäºç»åºä¸ä¸ªæç«¯ç¤ºä¾ï¼ææè¿åä¸ä½å¼åèåäºäº¤è°ï¼ä»æ­£å¨ç¼åä¸ä¸ªå·¥å·ï¼è¯¥å·¥å·ç¨äºä»ä»ä»¬çæ°ç¾ä¸è¡ä»£ç  (lines of codeï¼ LOC) åºç¨ä¸­åæåºæ°åä¸ª JAR ä¹é´çä¾èµãæç¸ä¿¡è¿æ¯å¤§éå¼åèå¨å¤å¹´é½å¿ååä¸åé åºäºè¿æ ·çéå½ã\n\nä¸æ¦æ¨çåºç¨ç¨åºæä¸ºäºä¸ä¸ªåºå¤§ãå¤æçåä½ï¼æ¨çå¼åç»ç»å¯è½ä¼é·å¥äºä¸ä¸ªçè¦çå¢å°ï¼ææ·å¼ååäº¤ä»çä»»ä½ä¸æ¬¡å°è¯é½å°åå°å¾å¾ãä¸ä¸ªä¸»è¦é®é¢æ¯åºç¨ç¨åºå®å¨éå¸¸å¤æãå¯¹äºä»»ä½ä¸ä¸ªå¼åäººåæ¥è¯´æ¾å¾è¿äºåºå¤§ï¼è¿æ¯å¯ä»¥çè§£çãæç»ï¼æ­£ç¡®ä¿®å¤ bug åå®ç°æ°åè½åå¾éå¸¸å°é¾èèæ¶ãæ­¤å¤ï¼ è¿ç§è¶å¿å°±åæ¯å¾ä¸çèºæãå¦æåºæ¬ä»£ç é½ä»¤äººé¾ä»¥çè§£ï¼é£ä¹æ¹åä¹ä¸ä¼åå¾æ­£ç¡®ï¼æ¨æç»å¾å°çå°æ¯ä¸ä¸ªå·¨å¤§ä¸ä¸å¯æè®®çå¤§æ³¥çã\n\nåºç¨ç¨åºçè§æ¨¡ä¹å°åç¼åå±ãåºç¨ç¨åºè¶å¤§ï¼å¯å¨æ¶é´è¶é¿ãæè°æ¥è¿å¼åèä»¬çåä½åºç¨çå¤§å°åæ§è½ï¼ä¸äºæ¥åçå¯å¨æ¶é´ä¸º 12 åéãæä¹å¬è¯´è¿åºç¨ç¨åºå¯å¨éè¦ 40 åéä»¥ä¸çæªäºãå¦æå¼åäººåç»å¸¸è¦éå¯åºç¨æå¡å¨ï¼é£ä¹å¾å¤§ä¸é¨åæ¶é´é½æ¯å¨ç­å¾ä¸­åº¦è¿ï¼ä»ä»¬ççäº§åå°åå°éå¶ã\n\nå¦ä¸ä¸ªå¤§é®é¢æ¯ï¼å¤æçåä½åºç¨æ¬èº«å°±æ¯æç»­é¨ç½²çéç¢ãå¦ä»ï¼ SaaS åºç¨åå±å°äºå¯ä»¥æ¯å¤©å¤æ¬¡å°åæ´æ¨éå°çäº§ç¯å¢ä¸­ãè¿å¯¹äºå¤æçåä½æ¥è¯´éå¸¸å°é¾ï¼å ä¸ºæ¨éè¦éæ°é¨ç½²æ´ä¸ªåºç¨ç¨åºæè½æ´æ°å¶ä¸­ä»»ä½ä¸é¨åã èæ³å°æä¹åæå°çæ¼«é¿å¯å¨æ¶é´ï¼è¿ä¹ä¸ä¼æ¯ä»ä¹å¥½äºãæ­¤å¤ï¼å åæ´æäº§ççå½±åéå¸¸ä¸æ¯å¾æç¡®ï¼æ¨å¾å¯è½éè¦åå¤§éçæå·¥æµè¯ãå æ­¤ï¼æç»­é¨ç½²æ¯ä¸å¯è½åå°çã\n\nå½ä¸åæ¨¡åå­å¨èµæºéæ±å²çªæ¶ï¼åä½åºç¨å¯è½é¾ä»¥æ©å±ãä¾å¦ï¼ä¸ä¸ªæ¨¡åå¯è½ä¼æ§è¡ CPU å¯éåå¾åå¤çé»è¾ï¼çæ³æåµä¸æ¯é¨ç½²å¨ Amazon EC2 Compute Optimized å®ä¾ä¸­ãå¦ä¸ä¸ªæ¨¡åå¯è½æ¯ä¸ä¸ªåå­æ°æ®åºï¼æéåé¨ç½²å° EC2 Memory-optimized å®ä¾ãç¶èï¼ ç±äºè¿äºæ¨¡åè¢«é¨ç½²å¨ä¸èµ·ï¼æ¨å¿é¡»å¨ç¡¬ä»¶éæ©ä¸ååºå¦¥åã\n\nåä½åºç¨çå¦ä¸ä¸ªé®é¢æ¯å¯é æ§ãå ä¸ºæææ¨¡åé½è¿è¡å¨åä¸è¿ç¨ä¸­ãä»»ä½æ¨¡åçä¸ä¸ª bugï¼æ¯å¦åå­æ³æ¼ï¼å¯è½ä¼æå®æ´ä¸ªè¿ç¨ãæ­¤å¤ï¼ç±äºåºç¨ç¨åºçææå®ä¾é½æ¯ç¸åçï¼è¯¥éè¯¯å°å½±åå°æ´ä¸ªåºç¨çå¯ç¨æ§ã\n\næåä½åæ ·éè¦ï¼åä½åºç¨ä½¿å¾éç¨æ°æ¡æ¶åè¯­è¨åå¾éå¸¸å°é¾ãä¾å¦ï¼æä»¬åè®¾æ¨æ 200 ä¸è¡ä»£ç ä½¿ç¨äº XYZ æ¡æ¶ç¼åãå¦æä½¿ç¨è¾æ°ç ABC æ¡æ¶æ¥éåæ´ä¸ªåºç¨ï¼è¿å°éå¸¸æè´µï¼å¨æ¶é´åææ¬æ¹é¢ï¼ï¼å³ä½¿æ¡æ¶éå¸¸å¥½ãå æ­¤ï¼è¿å¯¹äºéç¨æ°ææ¯æ¯ä¸ä¸ªéå¸¸å¤§çéç¢ãå¨é¡¹ç®å¼å§æ¶ï¼ æ¨æ è®ºéæ©ä½ç§æ°ææ¯é½ä¼æå°å°æ°ã\n\næ»ç»ä¸ä¸ï¼æ¨æä¸ä¸ªæåçå³é®ä¸å¡åºç¨ç¨åºï¼å®å·²ç»åå±æä¸ºä¸ä¸ªåªæå°æ°å¼åäººåï¼å¦ææçè¯ï¼è½å¤çè§£çå·¨å¤§åä½ãå®ä½¿ç¨äºè¿æ¶ãéçäº§æ§ææ¯ç¼åï¼è¿ä½¿å¾æèä¼ç§å¼åäººååå¾éå¸¸å°é¾ãåºç¨ç¨åºåå¾é¾ä»¥æ©å±ï¼ä¸å¯é ãå æ­¤ææ·å¼åååºç¨äº¤ä»æ¯ä¸å¯è½çã",normalizedContent:"# èµ°ååä½å°ç±\n\n\n# æ¦è¿°\n\nä¸å¹¸çæ¯ï¼è¿ç§ç®åçæ¹æ³æå¾å¤§çå±éæ§ãæåçåºç¨æä¸ä¸ªè¶å¿ï¼éçæ¶é´æ¨ç§»èåå¾è¶æ¥è¶èè¿ãæ¨çå¼åå¢éå¨æ¯ä¸ªå²åºé¶æ®µé½è¦å®ç°æ´å¤çç¨æ·éæ±ï¼è¿æå³çéè¦æ·»å äºè®¸å¤è¡ä»£ç ãå å¹´ä¹åï¼å°èç®åçåºç¨å°ä¼éæ¸æé¿æä¸ä¸ªåºå¤§çåä½ãä¸ºäºç»åºä¸ä¸ªæç«¯ç¤ºä¾ï¼ææè¿åä¸ä½å¼åèåäºäº¤è°ï¼ä»æ­£å¨ç¼åä¸ä¸ªå·¥å·ï¼è¯¥å·¥å·ç¨äºä»ä»ä»¬çæ°ç¾ä¸è¡ä»£ç  (lines of codeï¼ loc) åºç¨ä¸­åæåºæ°åä¸ª jar ä¹é´çä¾èµãæç¸ä¿¡è¿æ¯å¤§éå¼åèå¨å¤å¹´é½å¿ååä¸åé åºäºè¿æ ·çéå½ã\n\nä¸æ¦æ¨çåºç¨ç¨åºæä¸ºäºä¸ä¸ªåºå¤§ãå¤æçåä½ï¼æ¨çå¼åç»ç»å¯è½ä¼é·å¥äºä¸ä¸ªçè¦çå¢å°ï¼ææ·å¼ååäº¤ä»çä»»ä½ä¸æ¬¡å°è¯é½å°åå°å¾å¾ãä¸ä¸ªä¸»è¦é®é¢æ¯åºç¨ç¨åºå®å¨éå¸¸å¤æãå¯¹äºä»»ä½ä¸ä¸ªå¼åäººåæ¥è¯´æ¾å¾è¿äºåºå¤§ï¼è¿æ¯å¯ä»¥çè§£çãæç»ï¼æ­£ç¡®ä¿®å¤ bug åå®ç°æ°åè½åå¾éå¸¸å°é¾èèæ¶ãæ­¤å¤ï¼ è¿ç§è¶å¿å°±åæ¯å¾ä¸çèºæãå¦æåºæ¬ä»£ç é½ä»¤äººé¾ä»¥çè§£ï¼é£ä¹æ¹åä¹ä¸ä¼åå¾æ­£ç¡®ï¼æ¨æç»å¾å°çå°æ¯ä¸ä¸ªå·¨å¤§ä¸ä¸å¯æè®®çå¤§æ³¥çã\n\nåºç¨ç¨åºçè§æ¨¡ä¹å°åç¼åå±ãåºç¨ç¨åºè¶å¤§ï¼å¯å¨æ¶é´è¶é¿ãæè°æ¥è¿å¼åèä»¬çåä½åºç¨çå¤§å°åæ§è½ï¼ä¸äºæ¥åçå¯å¨æ¶é´ä¸º 12 åéãæä¹å¬è¯´è¿åºç¨ç¨åºå¯å¨éè¦ 40 åéä»¥ä¸çæªäºãå¦æå¼åäººåç»å¸¸è¦éå¯åºç¨æå¡å¨ï¼é£ä¹å¾å¤§ä¸é¨åæ¶é´é½æ¯å¨ç­å¾ä¸­åº¦è¿ï¼ä»ä»¬ççäº§åå°åå°éå¶ã\n\nå¦ä¸ä¸ªå¤§é®é¢æ¯ï¼å¤æçåä½åºç¨æ¬èº«å°±æ¯æç»­é¨ç½²çéç¢ãå¦ä»ï¼ saas åºç¨åå±å°äºå¯ä»¥æ¯å¤©å¤æ¬¡å°åæ´æ¨éå°çäº§ç¯å¢ä¸­ãè¿å¯¹äºå¤æçåä½æ¥è¯´éå¸¸å°é¾ï¼å ä¸ºæ¨éè¦éæ°é¨ç½²æ´ä¸ªåºç¨ç¨åºæè½æ´æ°å¶ä¸­ä»»ä½ä¸é¨åã èæ³å°æä¹åæå°çæ¼«é¿å¯å¨æ¶é´ï¼è¿ä¹ä¸ä¼æ¯ä»ä¹å¥½äºãæ­¤å¤ï¼å åæ´æäº§ççå½±åéå¸¸ä¸æ¯å¾æç¡®ï¼æ¨å¾å¯è½éè¦åå¤§éçæå·¥æµè¯ãå æ­¤ï¼æç»­é¨ç½²æ¯ä¸å¯è½åå°çã\n\nå½ä¸åæ¨¡åå­å¨èµæºéæ±å²çªæ¶ï¼åä½åºç¨å¯è½é¾ä»¥æ©å±ãä¾å¦ï¼ä¸ä¸ªæ¨¡åå¯è½ä¼æ§è¡ cpu å¯éåå¾åå¤çé»è¾ï¼çæ³æåµä¸æ¯é¨ç½²å¨ amazon ec2 compute optimized å®ä¾ä¸­ãå¦ä¸ä¸ªæ¨¡åå¯è½æ¯ä¸ä¸ªåå­æ°æ®åºï¼æéåé¨ç½²å° ec2 memory-optimized å®ä¾ãç¶èï¼ ç±äºè¿äºæ¨¡åè¢«é¨ç½²å¨ä¸èµ·ï¼æ¨å¿é¡»å¨ç¡¬ä»¶éæ©ä¸ååºå¦¥åã\n\nåä½åºç¨çå¦ä¸ä¸ªé®é¢æ¯å¯é æ§ãå ä¸ºæææ¨¡åé½è¿è¡å¨åä¸è¿ç¨ä¸­ãä»»ä½æ¨¡åçä¸ä¸ª bugï¼æ¯å¦åå­æ³æ¼ï¼å¯è½ä¼æå®æ´ä¸ªè¿ç¨ãæ­¤å¤ï¼ç±äºåºç¨ç¨åºçææå®ä¾é½æ¯ç¸åçï¼è¯¥éè¯¯å°å½±åå°æ´ä¸ªåºç¨çå¯ç¨æ§ã\n\næåä½åæ ·éè¦ï¼åä½åºç¨ä½¿å¾éç¨æ°æ¡æ¶åè¯­è¨åå¾éå¸¸å°é¾ãä¾å¦ï¼æä»¬åè®¾æ¨æ 200 ä¸è¡ä»£ç ä½¿ç¨äº xyz æ¡æ¶ç¼åãå¦æä½¿ç¨è¾æ°ç abc æ¡æ¶æ¥éåæ´ä¸ªåºç¨ï¼è¿å°éå¸¸æè´µï¼å¨æ¶é´åææ¬æ¹é¢ï¼ï¼å³ä½¿æ¡æ¶éå¸¸å¥½ãå æ­¤ï¼è¿å¯¹äºéç¨æ°ææ¯æ¯ä¸ä¸ªéå¸¸å¤§çéç¢ãå¨é¡¹ç®å¼å§æ¶ï¼ æ¨æ è®ºéæ©ä½ç§æ°ææ¯é½ä¼æå°å°æ°ã\n\næ»ç»ä¸ä¸ï¼æ¨æä¸ä¸ªæåçå³é®ä¸å¡åºç¨ç¨åºï¼å®å·²ç»åå±æä¸ºä¸ä¸ªåªæå°æ°å¼åäººåï¼å¦ææçè¯ï¼è½å¤çè§£çå·¨å¤§åä½ãå®ä½¿ç¨äºè¿æ¶ãéçäº§æ§ææ¯ç¼åï¼è¿ä½¿å¾æèä¼ç§å¼åäººååå¾éå¸¸å°é¾ãåºç¨ç¨åºåå¾é¾ä»¥æ©å±ï¼ä¸å¯é ãå æ­¤ææ·å¼åååºç¨äº¤ä»æ¯ä¸å¯è½çã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"å¾®æå¡-è§£å³å¤æé®é¢",frontmatter:{title:"å¾®æå¡-è§£å³å¤æé®é¢",date:"2022-02-09T11:40:48.000Z",permalink:"/pages/0b2d6e/"},regularPath:"/14.%E5%BE%AE%E6%9C%8D%E5%8A%A1/01.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B/03.%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E8%A7%A3%E5%86%B3%E5%A4%8D%E6%9D%82%E9%97%AE%E9%A2%98.html",relativePath:"14.å¾®æå¡/01.å¾®æå¡ç®ä»/03.å¾®æå¡-è§£å³å¤æé®é¢.md",key:"v-08740c32",path:"/pages/0b2d6e/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:17}],headersStr:"æ¦è¿°",content:"# å¾®æå¡-è§£å³å¤æé®é¢\n\n\n# æ¦è¿°\n\nè®¸å¤å¦ Amazonã eBay å Netflix è¿æ ·çç»ç»ï¼å·²ç»éç¨ç°å¨æè°çå¾®æå¡æ¶ææ¨¡å¼è§£å³äºè¿ä¸ªé®é¢ï¼èä¸æ¯æå»ºä¸ä¸ªèè¿çåä½åºç¨ãå®çæè·¯æ¯å°åºç¨ç¨åºåè§£æä¸å¥è¾å°çäºè¿æå¡ãä¸ä¸ªæå¡éå¸¸å®ç°äºä¸ç»ä¸åçç¹æ§æåè½ï¼ä¾å¦è®¢åç®¡çãå®¢æ·ç®¡çç­ãæ¯ä¸ä¸ªå¾®æå¡é½æ¯ä¸ä¸ªè¿·ä½ åºç¨ï¼å®èªå·±çå­è¾¹å½¢æ¶æåæ¬äºä¸å¡é»è¾ä»¥åå¤ä¸ªééå¨ã\n\nä¸äºå¾®æå¡ä¼æ´é²ä¸ä¸ªä¾å¶ä»å¾®æå¡æåºç¨å®¢æ·ç«¯æ¶è´¹ç APIãå¶ä»å¾®æå¡å¯è½å®ç°äºä¸ä¸ª web UIãå¨è¿è¡æ¶ï¼æ¯ä¸ªå®ä¾éå¸¸æ¯ä¸ä¸ªäºèææº (virtual machineï¼ VM) æèä¸ä¸ª Docker å®¹å¨ã\n\nä¾å¦ï¼åé¢æè¿°çç³»ç»å¯è½åè§£æå¦ä¸å¾ï¼ä¸ä¸ªåä½åºç¨åè§£æå¾®æå¡) æç¤ºï¼\n\n\n\nåºç¨ç¨åºçæ¯ä¸ªåè½åºåç°å¨é½ç±èªå·±çå¾®æå¡å®ç°ãæ­¤å¤ï¼Web åºç¨ç¨åºè¢«ååä¸ºä¸ç»æ´ç®åç Web åºç¨ç¨åºãä¾å¦ï¼ä»¥æä»¬çåºç§è½¦ä¸ºä¾ï¼ä¸ä¸ªæ¯ä¹å®¢çåºç¨ï¼ä¸ä¸ªæ¯å¸æºçåºç¨ãè¿ä½¿å¾å®æ´å®¹æå°ä¸ºç¹å®çç¨æ·ãå¸æºãè®¾å¤æèä¸é¨çç¨ä¾é¨ç½²ä¸åçåºæ¯ãæ¯ä¸ªåç«¯æå¡æ´é²ä¸ä¸ª REST APIï¼å¤§é¨åæå¡æ¶è´¹ç API ç±å¶ä»æå¡æä¾ãä¾å¦ï¼ Driver Management ä½¿ç¨äº Notification æå¡å¨æ¥éç¥ä¸ä¸ªå¯ç¨å¸æºä¸ä¸ªå¯éè·¯ç¨ãUI æå¡è°ç¨äºå¶ä»æå¡æ¥æ¸²æé¡µé¢ãæå¡ä¹å¯ä»¥ä½¿ç¨å¼æ­¥ãåºäºæ¶æ¯çéä¿¡ã\n\nä¸äº REST API ä¹æ´é²ç»ç§»å¨ç«¯åºç¨ä»¥ä¾å¸æºåä¹å®¢ä½¿ç¨ãç¶èï¼åºç¨ä¸è½ç´æ¥è®¿é®åç«¯æå¡ãç¸åï¼ä»ä»¬ä¹é´çéä¿¡æ¯ç±ä¸ä¸ªç§°ä¸º API ç½å³ (API Gateway) çä¸­ä»è´è´£ã API ç½å³è´è´£è´è½½åè¡¡ãç¼å­ãè®¿é®æ§å¶ã API è®¡éåçæ§ï¼ å¯ä»¥éè¿ä½¿ç¨ NGINX æ¥å®ç°ã\n\nå¼ååäº¤ä»ä¸­çä¼¸ç¼©ç«æ¹ï¼\n\n\n\nå¾®æå¡æ¶ææ¨¡å¼ç¸å½äºæ­¤ä¼¸ç¼©ç«æ¹ç Y è½´åæ ï¼æ­¤ç«æ¹æ¯ä¸ä¸ªæ¥èªãæ¶æå³æªæ¥ã çä¸ç»´ä¼¸ç¼©æ¨¡åãå¦å¤ä¸¤ä¸ªåæ è½´æ¯ç±è¿è¡å¤ä¸ªç¸ååºç¨ç¨åºå¯æ¬çè´è½½åè¡¡å¨ç»æçX è½´åæ å Z è½´åæ ï¼ææ°æ®ååº) ï¼å¶ä¸­è¯·æ±çå±æ§ï¼ä¾å¦ï¼ä¸è¡è®°å½çä¸»é®æèå®¢æ·æ è¯) ç¨äºå°è¯·æ±è·¯ç±å°ç¹å®çæå¡å¨ã\n\nå¨è¿è¡æ¶ï¼X åæ è½´ä¸è¿è¡çæå¡çå¤ä¸ªå®ä¾ï¼æ¯ä¸ªæå¡éåè´è½½åè¡¡å¨ä»¥æ»¡è¶³ååéåå¯ç¨æ§ãæäºåºç¨ç¨åºä¹æå¯è½ä½¿ç¨ Z åæ è½´æ¥è¿è¡ååºæå¡ãä¸å¾å±ç¤ºäºå¦ä½ç¨ Docker å° Trip Management æå¡é¨ç½²å° Amazon EC2 ä¸è¿è¡ã\n\nä½¿ç¨ Docker é¨ç½² Trip Management æå¡ï¼\n\n\n\nå¨è¿è¡æ¶ï¼Trip Management æå¡ç±å¤ä¸ªæå¡å®ä¾ç»æï¼æ¯ä¸ªæå¡å®ä¾æ¯ä¸ä¸ª Dockerå®¹å¨ãä¸ºäºå®ç°é«å¯ç¨ï¼å®¹å¨æ¯å¨å¤ä¸ªäºèææºä¸è¿è¡çãæå¡å®ä¾çä¹åæ¯ä¸ä¸ªç±»ä¼¼ NGINX çè´è½½åè¡¡å¨ï¼ç¨äºè·¨å®ä¾ååè¯·æ±ãè´è½½åè¡¡å¨ä¹å¯ä»¥å¤çå¶ä»é®é¢ï¼å¦ç¼å­ãè®¿é®æ§å¶ãAPI åº¦éåçæ§ã\n\nå¾®æå¡æ¶ææ¨¡å¼ææ¾å½±åå°äºåºç¨ç¨åºä¸æ°æ®åºä¹é´çå³ç³»ãä¸å¶ä»å±äº«åä¸ªæ°æ®åºæ¨¡å¼ (schema) æå¡ææä¸åï¼ å¶æ¯ä¸ä¸ªæå¡é½æèªå·±çæ°æ®åºæ¨¡å¼ãä¸æ¹é¢ï¼è¿ç§åæ³ä¸ä¼ä¸çº§æ°æ®åºæ°æ®æ¨¡åçæ³æ³ç¸èï¼æ­¤å¤ï¼å®ç»å¸¸å¯¼è´é¨åæ°æ®åä½ãç¶èï¼å¦ææ¨æ³ä»å¾®æå¡ä¸­åçï¼æ¯ä¸ä¸ªæå¡é½åºè¯¥æèªå·±çæ°æ®åºæ¨¡å¼ãå ä¸ºå®è½å®ç°æ¾è¦åãä¸å¾å±ç¤ºäºæ°æ®åºæ¶æç¤ºä¾åºç¨ç¨åºã\n\næ¯ä¸ªæå¡é½æ¥æåèªçæ°æ®åºãèä¸ï¼æå¡å¯ä»¥ä½¿ç¨ä¸ç§æéåå¶éæ±ãå·ç§°å¤è¯­è¨æä¹æ¶æ ï¼polyglot persistence architecture ) çæ°æ®åºãä¾å¦ï¼DriverManagementï¼è¦æ¾å°ä¸æ½å¨ä¹å®¢æ¥è¿çå¸æºï¼å°±å¿é¡»ä½¿ç¨æ¯æé«æå°çæ¥è¯¢çæ°æ®åºã\n\næè½¦åºç¨çæ°æ®åºæ¶æï¼\n\n\n\nä»è¡¨é¢ä¸çï¼å¾®æå¡æ¶ææ¨¡å¼ç±»ä¼¼äº SOAãå¾®æå¡æ¯ç±ä¸ç»æå¡ç»æãç¶èï¼æ¢å¦ä¸ç§æ¹å¼å»æèå¾®æå¡æ¶ææ¨¡å¼ï¼å®æ¯æ²¡æåä¸åç SOAï¼æ²¡æéæ Web æå¡è§è (WS-) åä¼ä¸æå¡æ»çº¿ (Enterprise Service Busï¼ ESB) ãåºäºå¾®æå¡çåºç¨æ¯ææ´ç®åãè½»éçº§çåè®®ï¼ä¾å¦ï¼RESTï¼èä¸æ¯ WS-ãä»ä»¬ä¹å°½éé¿åä½¿ç¨ ESBï¼èæ¯å®ç°å¾®æå¡æ¬èº«å·æç±»ä¼¼ ESB çåè½ãå¾®æå¡æ¶æä¹æç»äº SOA çå¶ä»é¨åï¼ä¾å¦ï¼æ°æ®è®¿é®è§èæ¨¡å¼æ¦å¿µã",normalizedContent:"# å¾®æå¡-è§£å³å¤æé®é¢\n\n\n# æ¦è¿°\n\nè®¸å¤å¦ amazonã ebay å netflix è¿æ ·çç»ç»ï¼å·²ç»éç¨ç°å¨æè°çå¾®æå¡æ¶ææ¨¡å¼è§£å³äºè¿ä¸ªé®é¢ï¼èä¸æ¯æå»ºä¸ä¸ªèè¿çåä½åºç¨ãå®çæè·¯æ¯å°åºç¨ç¨åºåè§£æä¸å¥è¾å°çäºè¿æå¡ãä¸ä¸ªæå¡éå¸¸å®ç°äºä¸ç»ä¸åçç¹æ§æåè½ï¼ä¾å¦è®¢åç®¡çãå®¢æ·ç®¡çç­ãæ¯ä¸ä¸ªå¾®æå¡é½æ¯ä¸ä¸ªè¿·ä½ åºç¨ï¼å®èªå·±çå­è¾¹å½¢æ¶æåæ¬äºä¸å¡é»è¾ä»¥åå¤ä¸ªééå¨ã\n\nä¸äºå¾®æå¡ä¼æ´é²ä¸ä¸ªä¾å¶ä»å¾®æå¡æåºç¨å®¢æ·ç«¯æ¶è´¹ç apiãå¶ä»å¾®æå¡å¯è½å®ç°äºä¸ä¸ª web uiãå¨è¿è¡æ¶ï¼æ¯ä¸ªå®ä¾éå¸¸æ¯ä¸ä¸ªäºèææº (virtual machineï¼ vm) æèä¸ä¸ª docker å®¹å¨ã\n\nä¾å¦ï¼åé¢æè¿°çç³»ç»å¯è½åè§£æå¦ä¸å¾ï¼ä¸ä¸ªåä½åºç¨åè§£æå¾®æå¡) æç¤ºï¼\n\n\n\nåºç¨ç¨åºçæ¯ä¸ªåè½åºåç°å¨é½ç±èªå·±çå¾®æå¡å®ç°ãæ­¤å¤ï¼web åºç¨ç¨åºè¢«ååä¸ºä¸ç»æ´ç®åç web åºç¨ç¨åºãä¾å¦ï¼ä»¥æä»¬çåºç§è½¦ä¸ºä¾ï¼ä¸ä¸ªæ¯ä¹å®¢çåºç¨ï¼ä¸ä¸ªæ¯å¸æºçåºç¨ãè¿ä½¿å¾å®æ´å®¹æå°ä¸ºç¹å®çç¨æ·ãå¸æºãè®¾å¤æèä¸é¨çç¨ä¾é¨ç½²ä¸åçåºæ¯ãæ¯ä¸ªåç«¯æå¡æ´é²ä¸ä¸ª rest apiï¼å¤§é¨åæå¡æ¶è´¹ç api ç±å¶ä»æå¡æä¾ãä¾å¦ï¼ driver management ä½¿ç¨äº notification æå¡å¨æ¥éç¥ä¸ä¸ªå¯ç¨å¸æºä¸ä¸ªå¯éè·¯ç¨ãui æå¡è°ç¨äºå¶ä»æå¡æ¥æ¸²æé¡µé¢ãæå¡ä¹å¯ä»¥ä½¿ç¨å¼æ­¥ãåºäºæ¶æ¯çéä¿¡ã\n\nä¸äº rest api ä¹æ´é²ç»ç§»å¨ç«¯åºç¨ä»¥ä¾å¸æºåä¹å®¢ä½¿ç¨ãç¶èï¼åºç¨ä¸è½ç´æ¥è®¿é®åç«¯æå¡ãç¸åï¼ä»ä»¬ä¹é´çéä¿¡æ¯ç±ä¸ä¸ªç§°ä¸º api ç½å³ (api gateway) çä¸­ä»è´è´£ã api ç½å³è´è´£è´è½½åè¡¡ãç¼å­ãè®¿é®æ§å¶ã api è®¡éåçæ§ï¼ å¯ä»¥éè¿ä½¿ç¨ nginx æ¥å®ç°ã\n\nå¼ååäº¤ä»ä¸­çä¼¸ç¼©ç«æ¹ï¼\n\n\n\nå¾®æå¡æ¶ææ¨¡å¼ç¸å½äºæ­¤ä¼¸ç¼©ç«æ¹ç y è½´åæ ï¼æ­¤ç«æ¹æ¯ä¸ä¸ªæ¥èªãæ¶æå³æªæ¥ã çä¸ç»´ä¼¸ç¼©æ¨¡åãå¦å¤ä¸¤ä¸ªåæ è½´æ¯ç±è¿è¡å¤ä¸ªç¸ååºç¨ç¨åºå¯æ¬çè´è½½åè¡¡å¨ç»æçx è½´åæ å z è½´åæ ï¼ææ°æ®ååº) ï¼å¶ä¸­è¯·æ±çå±æ§ï¼ä¾å¦ï¼ä¸è¡è®°å½çä¸»é®æèå®¢æ·æ è¯) ç¨äºå°è¯·æ±è·¯ç±å°ç¹å®çæå¡å¨ã\n\nå¨è¿è¡æ¶ï¼x åæ è½´ä¸è¿è¡çæå¡çå¤ä¸ªå®ä¾ï¼æ¯ä¸ªæå¡éåè´è½½åè¡¡å¨ä»¥æ»¡è¶³ååéåå¯ç¨æ§ãæäºåºç¨ç¨åºä¹æå¯è½ä½¿ç¨ z åæ è½´æ¥è¿è¡ååºæå¡ãä¸å¾å±ç¤ºäºå¦ä½ç¨ docker å° trip management æå¡é¨ç½²å° amazon ec2 ä¸è¿è¡ã\n\nä½¿ç¨ docker é¨ç½² trip management æå¡ï¼\n\n\n\nå¨è¿è¡æ¶ï¼trip management æå¡ç±å¤ä¸ªæå¡å®ä¾ç»æï¼æ¯ä¸ªæå¡å®ä¾æ¯ä¸ä¸ª dockerå®¹å¨ãä¸ºäºå®ç°é«å¯ç¨ï¼å®¹å¨æ¯å¨å¤ä¸ªäºèææºä¸è¿è¡çãæå¡å®ä¾çä¹åæ¯ä¸ä¸ªç±»ä¼¼ nginx çè´è½½åè¡¡å¨ï¼ç¨äºè·¨å®ä¾ååè¯·æ±ãè´è½½åè¡¡å¨ä¹å¯ä»¥å¤çå¶ä»é®é¢ï¼å¦ç¼å­ãè®¿é®æ§å¶ãapi åº¦éåçæ§ã\n\nå¾®æå¡æ¶ææ¨¡å¼ææ¾å½±åå°äºåºç¨ç¨åºä¸æ°æ®åºä¹é´çå³ç³»ãä¸å¶ä»å±äº«åä¸ªæ°æ®åºæ¨¡å¼ (schema) æå¡ææä¸åï¼ å¶æ¯ä¸ä¸ªæå¡é½æèªå·±çæ°æ®åºæ¨¡å¼ãä¸æ¹é¢ï¼è¿ç§åæ³ä¸ä¼ä¸çº§æ°æ®åºæ°æ®æ¨¡åçæ³æ³ç¸èï¼æ­¤å¤ï¼å®ç»å¸¸å¯¼è´é¨åæ°æ®åä½ãç¶èï¼å¦ææ¨æ³ä»å¾®æå¡ä¸­åçï¼æ¯ä¸ä¸ªæå¡é½åºè¯¥æèªå·±çæ°æ®åºæ¨¡å¼ãå ä¸ºå®è½å®ç°æ¾è¦åãä¸å¾å±ç¤ºäºæ°æ®åºæ¶æç¤ºä¾åºç¨ç¨åºã\n\næ¯ä¸ªæå¡é½æ¥æåèªçæ°æ®åºãèä¸ï¼æå¡å¯ä»¥ä½¿ç¨ä¸ç§æéåå¶éæ±ãå·ç§°å¤è¯­è¨æä¹æ¶æ ï¼polyglot persistence architecture ) çæ°æ®åºãä¾å¦ï¼drivermanagementï¼è¦æ¾å°ä¸æ½å¨ä¹å®¢æ¥è¿çå¸æºï¼å°±å¿é¡»ä½¿ç¨æ¯æé«æå°çæ¥è¯¢çæ°æ®åºã\n\næè½¦åºç¨çæ°æ®åºæ¶æï¼\n\n\n\nä»è¡¨é¢ä¸çï¼å¾®æå¡æ¶ææ¨¡å¼ç±»ä¼¼äº soaãå¾®æå¡æ¯ç±ä¸ç»æå¡ç»æãç¶èï¼æ¢å¦ä¸ç§æ¹å¼å»æèå¾®æå¡æ¶ææ¨¡å¼ï¼å®æ¯æ²¡æåä¸åç soaï¼æ²¡æéæ web æå¡è§è (ws-) åä¼ä¸æå¡æ»çº¿ (enterprise service busï¼ esb) ãåºäºå¾®æå¡çåºç¨æ¯ææ´ç®åãè½»éçº§çåè®®ï¼ä¾å¦ï¼restï¼èä¸æ¯ ws-ãä»ä»¬ä¹å°½éé¿åä½¿ç¨ esbï¼èæ¯å®ç°å¾®æå¡æ¬èº«å·æç±»ä¼¼ esb çåè½ãå¾®æå¡æ¶æä¹æç»äº soa çå¶ä»é¨åï¼ä¾å¦ï¼æ°æ®è®¿é®è§èæ¨¡å¼æ¦å¿µã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å¾®æå¡çä¼ç¹",frontmatter:{title:"å¾®æå¡çä¼ç¹",date:"2022-02-09T11:40:48.000Z",permalink:"/pages/47dac2/"},regularPath:"/14.%E5%BE%AE%E6%9C%8D%E5%8A%A1/01.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B/04.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%82%B9.html",relativePath:"14.å¾®æå¡/01.å¾®æå¡ç®ä»/04.å¾®æå¡çä¼ç¹.md",key:"v-3704fefa",path:"/pages/47dac2/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:13}],headersStr:"æ¦è¿°",content:"# å¾®æå¡çä¼ç¹\n\n\n# æ¦è¿°\n\nå¾®æå¡æ¶ææ¨¡å¼æè®¸å¤éå¸¸å¥½çå°æ¹ã\n\nç¬¬ä¸ï¼å®è§£å³äºå¤æé®é¢ãå®æå¯è½ä¼åå¾åºå¤§çåä½åºç¨ç¨åºåè§£æä¸å¥æå¡ãè½ç¶åè½æ°éä¸åï¼ä½æ¯åºç¨ç¨åºå·²ç»è¢«åè§£æå¯ç®¡ççåæèæå¡ãæ¯ä¸ªæå¡é½æä¸ä¸ªæç¡®å®ä¹è¾¹ççæ¹å¼ï¼å¦è¿ç¨è¿ç¨è°ç¨ï¼RPCï¼é©±å¨ææ¶æ¯é©±å¨ APIãå¾®æå¡æ¶ææ¨¡å¼å¼ºå¶ä¸å®ç¨åº¦çæ¨¡ååï¼å®éä¸ï¼ä½¿ç¨åä½ä»£ç æ¥å®ç°æ¯æå¶å°é¾çãå æ­¤ï¼ä½¿ç¨å¾®æå¡æ¶ææ¨¡å¼ï¼ä¸ªä½æå¡è½è¢«æ´å¿«å°å¼åï¼å¹¶æ´å®¹æçè§£ä¸ç»´æ¤ã\n\nç¬¬äºï¼è¿ç§æ¶æä½¿å¾æ¯ä¸ªæå¡é½å¯ä»¥ç±ä¸ä¸ªå¢éç¬ç«ä¸æ³¨å¼åãå¼åèå¯ä»¥èªç±éæ©ä»»ä½ç¬¦åæå¡ API å¥çº¦çææ¯ãå½ç¶ï¼æ´å¤çç»ç»æ¯å¸æéè¿ææ¯éåéå¶æ¥é¿åå®å¨æ··ä¹±çç¶æãç¶èï¼è¿ç§èªç±æå³çå¼åäººåä¸åæå¯è½å¨è¿ç§èªç±çæ°é¡¹ç®å¼å§æ¶ä½¿ç¨è¿æ¶çææ¯ãå½ç¼åä¸ä¸ªæ°æå¡æ¶ï¼ä»ä»¬å¯ä»¥éæ©å½åçææ¯ãæ­¤å¤ï¼ç±äºæå¡è¾å°ï¼ä½¿ç¨å½åææ¯éåæ§æå¡å°åå¾æ´å å¯è¡ã\n\nç¬¬ä¸ï¼å¾®æå¡æ¶ææ¨¡å¼å¯ä»¥å®ç°æ¯ä¸ªå¾®æå¡ç¬ç«é¨ç½²ãå¼åäººåæ ¹æ¬ä¸éè¦å»åè°é¨ç½²æ¬å°åæ´å°æå¡ãè¿äºåæ´ä¸ç»æµè¯å³å¯ç«å³é¨ç½²ãæ¯å¦ï¼UI å¢éå¯ä»¥æ§è¡ A|B æµè¯ï¼å¹¶å¿«éè¿­ä»£ UI åæ´ãå¾®æå¡æ¶ææ¨¡å¼ä½¿å¾æç»­é¨ç½²æä¸ºå¯è½ã\n\næåï¼å¾®æå¡æ¶ææ¨¡å¼ä½¿å¾æ¯ä¸ªæå¡è½å¤ç¬ç«æ©å±ãæ¨å¯ä»¥ä»é¨ç½²æ»¡è¶³æ¯ä¸ªæå¡çå®¹éåå¯ç¨æ§çº¦æçå®ä¾æ°ç®ãæ­¤å¤ï¼æ¨å¯ä»¥ä½¿ç¨ä¸æå¡èµæºè¦æ±æå¹éçç¡¬ä»¶ãä¾å¦ï¼æ¨å¯ä»¥å¨ EC2 Compute Optimized å®ä¾ä¸é¨ç½²ä¸ä¸ª CPU å¯éåå¾åå¤çæå¡ï¼å¹¶ä¸å¨ EC2 Memory-optimized å®ä¾ä¸é¨ç½²ä¸ä¸ªåå­æ°æ®åºæå¡ã",normalizedContent:"# å¾®æå¡çä¼ç¹\n\n\n# æ¦è¿°\n\nå¾®æå¡æ¶ææ¨¡å¼æè®¸å¤éå¸¸å¥½çå°æ¹ã\n\nç¬¬ä¸ï¼å®è§£å³äºå¤æé®é¢ãå®æå¯è½ä¼åå¾åºå¤§çåä½åºç¨ç¨åºåè§£æä¸å¥æå¡ãè½ç¶åè½æ°éä¸åï¼ä½æ¯åºç¨ç¨åºå·²ç»è¢«åè§£æå¯ç®¡ççåæèæå¡ãæ¯ä¸ªæå¡é½æä¸ä¸ªæç¡®å®ä¹è¾¹ççæ¹å¼ï¼å¦è¿ç¨è¿ç¨è°ç¨ï¼rpcï¼é©±å¨ææ¶æ¯é©±å¨ apiãå¾®æå¡æ¶ææ¨¡å¼å¼ºå¶ä¸å®ç¨åº¦çæ¨¡ååï¼å®éä¸ï¼ä½¿ç¨åä½ä»£ç æ¥å®ç°æ¯æå¶å°é¾çãå æ­¤ï¼ä½¿ç¨å¾®æå¡æ¶ææ¨¡å¼ï¼ä¸ªä½æå¡è½è¢«æ´å¿«å°å¼åï¼å¹¶æ´å®¹æçè§£ä¸ç»´æ¤ã\n\nç¬¬äºï¼è¿ç§æ¶æä½¿å¾æ¯ä¸ªæå¡é½å¯ä»¥ç±ä¸ä¸ªå¢éç¬ç«ä¸æ³¨å¼åãå¼åèå¯ä»¥èªç±éæ©ä»»ä½ç¬¦åæå¡ api å¥çº¦çææ¯ãå½ç¶ï¼æ´å¤çç»ç»æ¯å¸æéè¿ææ¯éåéå¶æ¥é¿åå®å¨æ··ä¹±çç¶æãç¶èï¼è¿ç§èªç±æå³çå¼åäººåä¸åæå¯è½å¨è¿ç§èªç±çæ°é¡¹ç®å¼å§æ¶ä½¿ç¨è¿æ¶çææ¯ãå½ç¼åä¸ä¸ªæ°æå¡æ¶ï¼ä»ä»¬å¯ä»¥éæ©å½åçææ¯ãæ­¤å¤ï¼ç±äºæå¡è¾å°ï¼ä½¿ç¨å½åææ¯éåæ§æå¡å°åå¾æ´å å¯è¡ã\n\nç¬¬ä¸ï¼å¾®æå¡æ¶ææ¨¡å¼å¯ä»¥å®ç°æ¯ä¸ªå¾®æå¡ç¬ç«é¨ç½²ãå¼åäººåæ ¹æ¬ä¸éè¦å»åè°é¨ç½²æ¬å°åæ´å°æå¡ãè¿äºåæ´ä¸ç»æµè¯å³å¯ç«å³é¨ç½²ãæ¯å¦ï¼ui å¢éå¯ä»¥æ§è¡ a|b æµè¯ï¼å¹¶å¿«éè¿­ä»£ ui åæ´ãå¾®æå¡æ¶ææ¨¡å¼ä½¿å¾æç»­é¨ç½²æä¸ºå¯è½ã\n\næåï¼å¾®æå¡æ¶ææ¨¡å¼ä½¿å¾æ¯ä¸ªæå¡è½å¤ç¬ç«æ©å±ãæ¨å¯ä»¥ä»é¨ç½²æ»¡è¶³æ¯ä¸ªæå¡çå®¹éåå¯ç¨æ§çº¦æçå®ä¾æ°ç®ãæ­¤å¤ï¼æ¨å¯ä»¥ä½¿ç¨ä¸æå¡èµæºè¦æ±æå¹éçç¡¬ä»¶ãä¾å¦ï¼æ¨å¯ä»¥å¨ ec2 compute optimized å®ä¾ä¸é¨ç½²ä¸ä¸ª cpu å¯éåå¾åå¤çæå¡ï¼å¹¶ä¸å¨ ec2 memory-optimized å®ä¾ä¸é¨ç½²ä¸ä¸ªåå­æ°æ®åºæå¡ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Spring Cloud ä¹ Gateway",frontmatter:{title:"Spring Cloud ä¹ Gateway",date:"2022-02-09T11:44:07.000Z",permalink:"/pages/aa8849/"},regularPath:"/15.Spring%20Cloud%20Gateway/01.Spring%20Cloud%20Gateway/01.Spring%20Cloud%20%E4%B9%8B%20Gateway.html",relativePath:"15.Spring Cloud Gateway/01.Spring Cloud Gateway/01.Spring Cloud ä¹ Gateway.md",key:"v-fc4d58d8",path:"/pages/aa8849/",headers:[{level:2,title:"Gateway å Zuul çåºå«",slug:"gateway-å-zuul-çåºå«",normalizedTitle:"gateway å zuul çåºå«",charIndex:29},{level:2,title:"å¿«éå¥é¨",slug:"å¿«éå¥é¨",normalizedTitle:"å¿«éå¥é¨",charIndex:529},{level:3,title:"1. pom.xml",slug:"_1-pom-xml",normalizedTitle:"1. pom.xml",charIndex:682},{level:3,title:"2. application.yml",slug:"_2-application-yml",normalizedTitle:"2. application.yml",charIndex:1830},{level:3,title:"3. GatewayApplication.java",slug:"_3-gatewayapplication-java",normalizedTitle:"3. gatewayapplication.java",charIndex:4253},{level:2,title:"è¿æ»¤å¨",slug:"è¿æ»¤å¨",normalizedTitle:"è¿æ»¤å¨",charIndex:3842},{level:3,title:"å¨å±è¿æ»¤å¨",slug:"å¨å±è¿æ»¤å¨",normalizedTitle:"å¨å±è¿æ»¤å¨",charIndex:5056},{level:3,title:"å±é¨è¿æ»¤å¨",slug:"å±é¨è¿æ»¤å¨",normalizedTitle:"å±é¨è¿æ»¤å¨",charIndex:6125},{level:2,title:"å¨æè·¯ç±",slug:"å¨æè·¯ç±",normalizedTitle:"å¨æè·¯ç±",charIndex:7480}],headersStr:"Gateway å Zuul çåºå« å¿«éå¥é¨ 1. pom.xml 2. application.yml 3. GatewayApplication.java è¿æ»¤å¨ å¨å±è¿æ»¤å¨ å±é¨è¿æ»¤å¨ å¨æè·¯ç±",content:'# Spring Cloud ä¹ Gateway\n\n\n# Gateway å Zuul çåºå«\n\nZuul åºäºservlet 2.5 (works with 3.x)ï¼ä½¿ç¨é»å¡APIãå®ä¸æ¯æä»»ä½é¿æçè¿æ¥ï¼å¦websocketã\n\nGatewayå»ºç«å¨Spring Framework 5ï¼Project Reactor åSpring Boot 2 ä¸ï¼ä½¿ç¨éé»å¡APIãæ¯æWebsocketï¼å ä¸ºå®ä¸Springç´§å¯éæï¼æä»¥å®æ¯ä¸ä¸ªæ´å¥½çå¼åèä½éªã\n\nä¸ºä»ä¹ Spring Cloud æåéæ©äºä½¿ç¨ Netflix å å¹´åå¼æºç Zuul ä½ä¸ºç½å³ï¼ä¹ååéæ©äºèªå»º Gateway å¢ï¼æä¸ç§è¯´æ³æ¯ï¼é«æ§è½çç Zuul2 å¨ç»è¿äºå¤æ¬¡è·³ç¥¨ä¹åï¼å¯¹äº Spring è¿æ ·çæ´åä¸å®¶å¯è½ä¹ä¸æ¿æåç»§ç»­ç­å¾ï¼æä»¥ Spring Cloud Gateway åºè¿èçã\n\næ¬æä¸å¯¹ Spring Cloud Gateway å Zuul çæ§è½ä½å¤ªå¤èµè¿°ï¼åºæ¬å¯ä»¥è¯å®çæ¯ Gateway ä½ä¸ºç°å¨ Spring Cloud ä¸»æ¨çç½å³æ¹æ¡ï¼ Finchley çæ¬åç Gateway æ¯ zuul 1.x ç³»åçæ§è½ååè½æ´ä½è¦å¥½ã\n\n\n# å¿«éå¥é¨\n\næä»¬æ¥æ­å»ºä¸ä¸ªåºäº Eureka æ³¨åä¸­å¿çç®åç½å³ï¼ä¸å¯¹ Gateway çå¨é¨åè½åè¿å¤è§£è¯»ï¼æ¯ç«å®æ¹ææ¡£å·²ç»åçå¾è¯¦ç»äºï¼æèå¯ä»¥éè¯»ä¸­æç¿»è¯ææ¡£ã\n\nSpringBoot çæ¬å·ï¼2.1.6.RELEASE\n\nSpringCloud çæ¬å·ï¼Greenwich.RELEASE\n\n\n# 1. pom.xml\n\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-gateway</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-netflix-hystrix</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-data-redis-reactive</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-actuator</artifactId>\n    </dependency>\n</dependencies>\n\n\n * spring-cloud-starter-gatewayï¼Spring Cloud Gateway çå¯å¨ç±»\n * spring-cloud-starter-netflix-hystrixï¼Hystrix ä½ä¸ºç½å³ççæ­æ¹æ¡\n * spring-cloud-starter-netflix-eureka-clientï¼å°ç½å³çº³å¥ Eureka æ³¨åä¸­å¿ç®¡ç\n * spring-boot-starter-data-redis-reactiveï¼éæµæ¹æ¡ï¼Spring Cloud Gateway é»è®¤ä»¥ redis å®ç°éæµ\n * spring-boot-starter-actuatorï¼ç¨æ¥çæ§ Gateway çè·¯ç±ä¿¡æ¯ã\n\n\n# 2. application.yml\n\nspring:\n  application:\n    name: cloud-gateway\n  redis:\n    host: 127.0.0.1\n    timeout: 3000\n    password: xxxx\n    jedis:\n      pool:\n        max-active: 8\n        max-idle: 4\n  cloud:\n    gateway:\n      enabled: true\n      metrics:\n        enabled: true\n      discovery:\n        locator:\n          enabled: true\n      routes:\n        # æ®éæå¡çè·¯ç±éç½®\n        - id: cloud-eureka-client\n          uri: lb://cloud-eureka-client\n          order: 0\n          predicates:\n            - Path=/client/**\n          filters:\n            #  parts åæ°æç¤ºå¨å°è¯·æ±åéå°ä¸æ¸¸ä¹åï¼è¦ä»è¯·æ±ä¸­å»é¤çè·¯å¾ä¸­çèæ°ãæ¯å¦æä»¬è®¿é® /client/helloï¼è°ç¨çæ¶ååæ http://localhost:2222/hello\n            - StripPrefix=1\n            # çæ­å¨\n            - name: Hystrix\n              args:\n                name: fallbackcmd\n                # éçº§å¤ç\n                fallbackUri: forward:/fallback\n            # éæµå¨\n            # è¿å®ä¹äºæ¯ä¸ªç¨æ· 10 ä¸ªè¯·æ±çéå¶ãåè®¸ 20 ä¸ªçªåï¼ä½ä¸ä¸ç§åªæ 10 ä¸ªè¯·æ±å¯ç¨ã\n            - name: RequestRateLimiter\n              args:\n                # SPEL è¡¨è¾¾å¼è·å Spring ä¸­ç Beanï¼è¿ä¸ªåæ°è¡¨ç¤ºæ ¹æ®ä»ä¹æ¥éæµ\n                key-resolver: \'#{@ipKeyResolver}\'\n                # åè®¸ç¨æ·æ¯ç§æ§è¡å¤å°è¯·æ±ï¼ä»¤çæ¡¶çå¡«åéçï¼\n                redis-rate-limiter.replenishRate: 10\n                # åè®¸ç¨æ·å¨ä¸ç§åæ§è¡çæå¤§è¯·æ±æ°ãï¼ä»¤çæ¡¶å¯ä»¥ä¿å­çä»¤çæ°ï¼ãå°æ­¤å¼è®¾ç½®ä¸ºé¶å°é»æ­¢ææè¯·æ±ã\n                redis-rate-limiter.burstCapacity: 20\n        # websocket çè·¯ç±éç½®\n        - id: websocket service\n          uri: lb:ws://serviceid\n          predicates:\n            - Path=/websocket/**\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        # å¼å¯æå®ç«¯ç¹\n        include: gateway,metrics\neureka:\n  client:\n    service-url:\n      defaultZone: http://user:password@localhost:1111/eureka/\n\n\n * spring.redis.*ï¼ redis ç¸å³éç½®æ¯ä¸ºäºå®ç° Gateway çéæµæ¹æ¡ã\n * eureka.client.*ï¼eureka æ³¨åä¸­å¿ä¿¡æ¯ã\n * spring.cloud.gateway.discovery.locator.enabledï¼å°ç½å³éç½®ä¸ºåºäºä½¿ç¨å¼å®¹ DiscoveryClient æ³¨åä¸­å¿æ³¨åçæå¡æ¥åå»ºè·¯ç±ã\n * spring.cloud.gateway.routes.*ï¼éç½®è·¯ç±ä¿¡æ¯\n   * idï¼è·¯ç±å¯ä¸æ è¯\n   * uriï¼è·¯ç±è½¬åå°åï¼ä»¥ lb å¼å¤´çè·¯ç±ï¼ä¼ç± ribbon å¤çï¼è½¬åå° cloud-eureka-client çæå¡å¤çãä¹å¯éç½®æ http çåæºè·¯ç± â http://localhost:2222ã\n   * orderï¼è·¯ç±æ§è¡é¡ºåºï¼ä¹å¯çè§£æè¿æ»¤å¨çæ§è¡é¡ºåºï¼ï¼æ§è¡é¡ºåºæ¯ä»å°å°å¤§æ§è¡ï¼è¾é«çå¼è¢«è§£éä¸ºè¾ä½çä¼åçº§ã\n   * predicatesï¼è·¯ç±æ­è¨ï¼å¹éè®¿é®è·¯å¾ä¸º "/client/**" çè¯·æ±ã\n   * filtersï¼ç½å³çè¿æ»¤å¨éç½®\n * management.endpoints.web.exposure.includeï¼æ´é² actuator å¯ä»¥è®¿é®çç«¯ç¹\n   * /actuator/gateway/routes æ¥çè·¯ç±åè¡¨\n   * /actuator/gateway/globalfilters æ£ç´¢å¨å±è·¯ç± â å¯¹ææè·¯ç±çæ\n   * /actuator/gateway/routefilters æ£ç´¢å±é¨è·¯ç± â å¯éç½®åªå¯¹åä¸ªè·¯ç±çæ\n   * /actuator/gateway/refresh æ¸çè·¯ç±ç¼å­\n   * /actuator/metrics/gateway.requests è·å¾è·¯ç±è¯·æ±æ°æ®\n\n\n# 3. GatewayApplication.java\n\n@SpringBootApplication\n@EnableDiscoveryClient\npublic class GatewayApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(GatewayApplication.class, args);\n    }\n\n    /**\n     * éæµçé®å®ä¹ï¼æ ¹æ®ä»ä¹æ¥éæµ\n     */\n    @Bean\n    public KeyResolver ipKeyResolver() {\n        return exchange -> Mono.just(exchange.getRequest().getRemoteAddress().getHostName());\n    }\n\n}\n\n\n\n# è¿æ»¤å¨\n\nSpring Cloud Gateway å Zuul ç±»ä¼¼ï¼æ âpreâ å âpostâ ä¸¤ç§æ¹å¼ç filterãå®¢æ·ç«¯çè¯·æ±åç»è¿ âpreâ ç±»åç filterï¼ç¶åå°è¯·æ±è½¬åå°å·ä½çä¸å¡æå¡ï¼æ¶å°ä¸å¡æå¡çååºä¹åï¼åç»è¿âpostâç±»åçfilterå¤çï¼æåè¿åååºå°å®¢æ·ç«¯ã\n\nä¸ Zuul ä¸åçæ¯ï¼filter é¤äºåä¸º âpreâ å âpostâ ä¸¤ç§æ¹å¼ç filter å¤ï¼å¨ Spring Cloud Gateway ä¸­ï¼filter ä»ä½ç¨èå´å¯åä¸ºå¦å¤ä¸¤ç§ï¼ä¸ç§æ¯éå¯¹äºåä¸ªè·¯ç±ç gateway filterï¼å®éè¦åä¸é¢ application.yml ä¸­ç filters é£æ ·å¨åä¸ªè·¯ç±ä¸­éç½®ï¼å¦å¤ä¸ç§æ¯éå¯¹äºå¨é¨è·¯ç±çglobal gateway filterï¼ä¸éè¦åç¬éç½®ï¼å¯¹ææè·¯ç±çæã\n\n\n# å¨å±è¿æ»¤å¨\n\næä»¬éå¸¸ç¨å¨å±è¿æ»¤å¨å®ç°é´æãéªç­¾ãéæµãæ¥å¿è¾åºç­ã\n\néè¿å®ç° GlobalFilter æ¥å£æ¥èªå®ä¹ Gateway çå¨å±è¿æ»¤å¨ï¼éè¿å®ç° Ordered æ¥å£æèä½¿ç¨ @Order æ³¨è§£æ¥å®ä¹è¿æ»¤å¨çæ§è¡é¡ºåºï¼æ§è¡é¡ºåºæ¯ä»å°å°å¤§æ§è¡ï¼è¾é«çå¼è¢«è§£éä¸ºè¾ä½çä¼åçº§ã\n\n    @Bean\n    @Order(-1)\n    public GlobalFilter a() {\n        return (exchange, chain) -> {\n            log.info("first pre filter");\n            return chain.filter(exchange).then(Mono.fromRunnable(() -> {\n                log.info("third post filter");\n            }));\n        };\n    }\n\n    @Bean\n    @Order(0)\n    public GlobalFilter b() {\n        return (exchange, chain) -> {\n            log.info("second pre filter");\n            return chain.filter(exchange).then(Mono.fromRunnable(() -> {\n                log.info("second post filter");\n            }));\n        };\n    }\n\n    @Bean\n    @Order(1)\n    public GlobalFilter c() {\n        return (exchange, chain) -> {\n            log.info("third pre filter");\n            return chain.filter(exchange).then(Mono.fromRunnable(() -> {\n                log.info("first post filter");\n            }));\n        };\n    }\n\n\nä¼åçº§æé«ç filter ï¼å®ç âpreâ è¿æ»¤å¨æåæ§è¡ï¼âpostâ è¿æ»¤å¨æææ§è¡ã\n\n\n# å±é¨è¿æ»¤å¨\n\næä»¬æ¥å®ä¹ä¸ä¸ª âpreâ ç±»åçå±é¨è¿æ»¤å¨ï¼\n\n@Component\npublic class PreGatewayFilterFactory extends AbstractGatewayFilterFactory<PreGatewayFilterFactory.Config> {\n    \n    public PreGatewayFilterFactory() {\n        super(Config.class);\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        // grab configuration from Config object\n        return (exchange, chain) -> {\n            //If you want to build a "pre" filter you need to manipulate the\n            //request before calling chain.filter\n            ServerHttpRequest.Builder builder = exchange.getRequest().mutate();\n            //use builder to manipulate the request\n            ServerHttpRequest request = builder.build();\n            return chain.filter(exchange.mutate().request(request).build());\n        };\n    }\n\n    public static class Config {\n        //Put the configuration properties for your filter here\n    }\n}\n\n\nå¶ä¸­ï¼éè¦çè¿æ»¤å¨åæ°éç½®å¨ PreGatewayFilterFactory.Config ä¸­ãç¶åï¼æ¥ä¸æ¥æä»¬è¦åçï¼å°±æ¯æå±é¨è¿æ»¤å¨éç½®å¨éè¦çè·¯ç±ä¸ï¼æ ¹æ® SpringBoot çº¦å®å¤§äºéç½®çææ³ï¼æä»¬åªéè¦éç½® PreGatewayFilterFactory.java ä¸­ï¼åé¢çåæ°å°±è¡äºï¼å³\n\nspring:\n  cloud:\n    gateway:\n      routes:\n        - id: cloud-eureka-client\n          uri: lb://cloud-eureka-client\n          order: 0\n          predicates:\n            - Path=/client/**\n          filters:\n            - pre\n\n\n> å¯ä»¥å»éè¯»ä¸ Gateway ä¸­é»è®¤æä¾çå ç§è¿æ»¤å¨ï¼æ¯å¦ StripPrefixGatewayFilterFactory.java ç­ã\n\n\n# å¨æè·¯ç±\n\nSpring Cloud Gateway å®ç°å¨æè·¯ç±ä¸»è¦å©ç¨ RouteDefinitionWriter è¿ä¸ª Beanï¼\n\npublic interface RouteDefinitionWriter {\n\n\tMono<Void> save(Mono<RouteDefinition> route);\n\n\tMono<Void> delete(Mono<String> routeId);\n}\n\n\nä¹åç¿»éäºç½ä¸çä¸äºæç« ï¼åºæ¬é½æ¯éè¿èªå®ä¹ controller ååºå¥åï¼ç¶åå©ç¨ RouteDefinitionWriter å®ç°å¨æç½å³ãä½æ¯ï¼æå¨ç¿»é Spring Cloud Gateway ææ¡£çæ¶åï¼åç° Gateway å·²ç»æä¾äºç±»ä¼¼çåè½ï¼\n\n@RestControllerEndpoint(id = "gateway")\npublic class GatewayControllerEndpoint implements ApplicationEventPublisherAware {\n\n    /*---çç¥åé¢ä»£ç ---*/\n\n\t@PostMapping("/routes/{id}")\n\t@SuppressWarnings("unchecked")\n\tpublic Mono<ResponseEntity<Void>> save(@PathVariable String id, @RequestBody Mono<RouteDefinition> route) {\n\t\treturn this.routeDefinitionWriter.save(route.map(r ->  {\n\t\t\tr.setId(id);\n\t\t\tlog.debug("Saving route: " + route);\n\t\t\treturn r;\n\t\t})).then(Mono.defer(() ->\n\t\t\tMono.just(ResponseEntity.created(URI.create("/routes/"+id)).build())\n\t\t));\n\t}\n\n\t@DeleteMapping("/routes/{id}")\n\tpublic Mono<ResponseEntity<Object>> delete(@PathVariable String id) {\n\t\treturn this.routeDefinitionWriter.delete(Mono.just(id))\n\t\t\t\t.then(Mono.defer(() -> Mono.just(ResponseEntity.ok().build())))\n\t\t\t\t.onErrorResume(t -> t instanceof NotFoundException, t -> Mono.just(ResponseEntity.notFound().build()));\n\t}\n\n     /*---çç¥åé¢ä»£ç ---*/\n}\n\n\nè¦åå»ºä¸ä¸ªè·¯ç±ï¼åéPOSTè¯·æ± /actuator/gateway/routes/{id_route_to_create}ï¼åæ°ä¸ºJSONç»æï¼å·ä½åæ°æ°æ®ç»æï¼\n\n{\n  "id": "first_route",\n  "predicates": [{\n    "name": "Path",\n    "args": {"_genkey_0":"/first"}\n  }],\n  "filters": [],\n  "uri": "http://www.uri-destination.org",\n  "order": 0\n}]\n\n\nè¦å é¤ä¸ä¸ªè·¯ç±ï¼åé DELETEè¯·æ± /actuator/gateway/routes/{id_route_to_delete}',normalizedContent:'# spring cloud ä¹ gateway\n\n\n# gateway å zuul çåºå«\n\nzuul åºäºservlet 2.5 (works with 3.x)ï¼ä½¿ç¨é»å¡apiãå®ä¸æ¯æä»»ä½é¿æçè¿æ¥ï¼å¦websocketã\n\ngatewayå»ºç«å¨spring framework 5ï¼project reactor åspring boot 2 ä¸ï¼ä½¿ç¨éé»å¡apiãæ¯æwebsocketï¼å ä¸ºå®ä¸springç´§å¯éæï¼æä»¥å®æ¯ä¸ä¸ªæ´å¥½çå¼åèä½éªã\n\nä¸ºä»ä¹ spring cloud æåéæ©äºä½¿ç¨ netflix å å¹´åå¼æºç zuul ä½ä¸ºç½å³ï¼ä¹ååéæ©äºèªå»º gateway å¢ï¼æä¸ç§è¯´æ³æ¯ï¼é«æ§è½çç zuul2 å¨ç»è¿äºå¤æ¬¡è·³ç¥¨ä¹åï¼å¯¹äº spring è¿æ ·çæ´åä¸å®¶å¯è½ä¹ä¸æ¿æåç»§ç»­ç­å¾ï¼æä»¥ spring cloud gateway åºè¿èçã\n\næ¬æä¸å¯¹ spring cloud gateway å zuul çæ§è½ä½å¤ªå¤èµè¿°ï¼åºæ¬å¯ä»¥è¯å®çæ¯ gateway ä½ä¸ºç°å¨ spring cloud ä¸»æ¨çç½å³æ¹æ¡ï¼ finchley çæ¬åç gateway æ¯ zuul 1.x ç³»åçæ§è½ååè½æ´ä½è¦å¥½ã\n\n\n# å¿«éå¥é¨\n\næä»¬æ¥æ­å»ºä¸ä¸ªåºäº eureka æ³¨åä¸­å¿çç®åç½å³ï¼ä¸å¯¹ gateway çå¨é¨åè½åè¿å¤è§£è¯»ï¼æ¯ç«å®æ¹ææ¡£å·²ç»åçå¾è¯¦ç»äºï¼æèå¯ä»¥éè¯»ä¸­æç¿»è¯ææ¡£ã\n\nspringboot çæ¬å·ï¼2.1.6.release\n\nspringcloud çæ¬å·ï¼greenwich.release\n\n\n# 1. pom.xml\n\n<dependencies>\n    <dependency>\n        <groupid>org.springframework.cloud</groupid>\n        <artifactid>spring-cloud-starter-gateway</artifactid>\n    </dependency>\n    <dependency>\n        <groupid>org.springframework.cloud</groupid>\n        <artifactid>spring-cloud-starter-netflix-hystrix</artifactid>\n    </dependency>\n    <dependency>\n        <groupid>org.springframework.cloud</groupid>\n        <artifactid>spring-cloud-starter-netflix-eureka-client</artifactid>\n    </dependency>\n    <dependency>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-data-redis-reactive</artifactid>\n    </dependency>\n    <dependency>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-actuator</artifactid>\n    </dependency>\n</dependencies>\n\n\n * spring-cloud-starter-gatewayï¼spring cloud gateway çå¯å¨ç±»\n * spring-cloud-starter-netflix-hystrixï¼hystrix ä½ä¸ºç½å³ççæ­æ¹æ¡\n * spring-cloud-starter-netflix-eureka-clientï¼å°ç½å³çº³å¥ eureka æ³¨åä¸­å¿ç®¡ç\n * spring-boot-starter-data-redis-reactiveï¼éæµæ¹æ¡ï¼spring cloud gateway é»è®¤ä»¥ redis å®ç°éæµ\n * spring-boot-starter-actuatorï¼ç¨æ¥çæ§ gateway çè·¯ç±ä¿¡æ¯ã\n\n\n# 2. application.yml\n\nspring:\n  application:\n    name: cloud-gateway\n  redis:\n    host: 127.0.0.1\n    timeout: 3000\n    password: xxxx\n    jedis:\n      pool:\n        max-active: 8\n        max-idle: 4\n  cloud:\n    gateway:\n      enabled: true\n      metrics:\n        enabled: true\n      discovery:\n        locator:\n          enabled: true\n      routes:\n        # æ®éæå¡çè·¯ç±éç½®\n        - id: cloud-eureka-client\n          uri: lb://cloud-eureka-client\n          order: 0\n          predicates:\n            - path=/client/**\n          filters:\n            #  parts åæ°æç¤ºå¨å°è¯·æ±åéå°ä¸æ¸¸ä¹åï¼è¦ä»è¯·æ±ä¸­å»é¤çè·¯å¾ä¸­çèæ°ãæ¯å¦æä»¬è®¿é® /client/helloï¼è°ç¨çæ¶ååæ http://localhost:2222/hello\n            - stripprefix=1\n            # çæ­å¨\n            - name: hystrix\n              args:\n                name: fallbackcmd\n                # éçº§å¤ç\n                fallbackuri: forward:/fallback\n            # éæµå¨\n            # è¿å®ä¹äºæ¯ä¸ªç¨æ· 10 ä¸ªè¯·æ±çéå¶ãåè®¸ 20 ä¸ªçªåï¼ä½ä¸ä¸ç§åªæ 10 ä¸ªè¯·æ±å¯ç¨ã\n            - name: requestratelimiter\n              args:\n                # spel è¡¨è¾¾å¼è·å spring ä¸­ç beanï¼è¿ä¸ªåæ°è¡¨ç¤ºæ ¹æ®ä»ä¹æ¥éæµ\n                key-resolver: \'#{@ipkeyresolver}\'\n                # åè®¸ç¨æ·æ¯ç§æ§è¡å¤å°è¯·æ±ï¼ä»¤çæ¡¶çå¡«åéçï¼\n                redis-rate-limiter.replenishrate: 10\n                # åè®¸ç¨æ·å¨ä¸ç§åæ§è¡çæå¤§è¯·æ±æ°ãï¼ä»¤çæ¡¶å¯ä»¥ä¿å­çä»¤çæ°ï¼ãå°æ­¤å¼è®¾ç½®ä¸ºé¶å°é»æ­¢ææè¯·æ±ã\n                redis-rate-limiter.burstcapacity: 20\n        # websocket çè·¯ç±éç½®\n        - id: websocket service\n          uri: lb:ws://serviceid\n          predicates:\n            - path=/websocket/**\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        # å¼å¯æå®ç«¯ç¹\n        include: gateway,metrics\neureka:\n  client:\n    service-url:\n      defaultzone: http://user:password@localhost:1111/eureka/\n\n\n * spring.redis.*ï¼ redis ç¸å³éç½®æ¯ä¸ºäºå®ç° gateway çéæµæ¹æ¡ã\n * eureka.client.*ï¼eureka æ³¨åä¸­å¿ä¿¡æ¯ã\n * spring.cloud.gateway.discovery.locator.enabledï¼å°ç½å³éç½®ä¸ºåºäºä½¿ç¨å¼å®¹ discoveryclient æ³¨åä¸­å¿æ³¨åçæå¡æ¥åå»ºè·¯ç±ã\n * spring.cloud.gateway.routes.*ï¼éç½®è·¯ç±ä¿¡æ¯\n   * idï¼è·¯ç±å¯ä¸æ è¯\n   * uriï¼è·¯ç±è½¬åå°åï¼ä»¥ lb å¼å¤´çè·¯ç±ï¼ä¼ç± ribbon å¤çï¼è½¬åå° cloud-eureka-client çæå¡å¤çãä¹å¯éç½®æ http çåæºè·¯ç± â http://localhost:2222ã\n   * orderï¼è·¯ç±æ§è¡é¡ºåºï¼ä¹å¯çè§£æè¿æ»¤å¨çæ§è¡é¡ºåºï¼ï¼æ§è¡é¡ºåºæ¯ä»å°å°å¤§æ§è¡ï¼è¾é«çå¼è¢«è§£éä¸ºè¾ä½çä¼åçº§ã\n   * predicatesï¼è·¯ç±æ­è¨ï¼å¹éè®¿é®è·¯å¾ä¸º "/client/**" çè¯·æ±ã\n   * filtersï¼ç½å³çè¿æ»¤å¨éç½®\n * management.endpoints.web.exposure.includeï¼æ´é² actuator å¯ä»¥è®¿é®çç«¯ç¹\n   * /actuator/gateway/routes æ¥çè·¯ç±åè¡¨\n   * /actuator/gateway/globalfilters æ£ç´¢å¨å±è·¯ç± â å¯¹ææè·¯ç±çæ\n   * /actuator/gateway/routefilters æ£ç´¢å±é¨è·¯ç± â å¯éç½®åªå¯¹åä¸ªè·¯ç±çæ\n   * /actuator/gateway/refresh æ¸çè·¯ç±ç¼å­\n   * /actuator/metrics/gateway.requests è·å¾è·¯ç±è¯·æ±æ°æ®\n\n\n# 3. gatewayapplication.java\n\n@springbootapplication\n@enablediscoveryclient\npublic class gatewayapplication {\n\n    public static void main(string[] args) {\n        springapplication.run(gatewayapplication.class, args);\n    }\n\n    /**\n     * éæµçé®å®ä¹ï¼æ ¹æ®ä»ä¹æ¥éæµ\n     */\n    @bean\n    public keyresolver ipkeyresolver() {\n        return exchange -> mono.just(exchange.getrequest().getremoteaddress().gethostname());\n    }\n\n}\n\n\n\n# è¿æ»¤å¨\n\nspring cloud gateway å zuul ç±»ä¼¼ï¼æ âpreâ å âpostâ ä¸¤ç§æ¹å¼ç filterãå®¢æ·ç«¯çè¯·æ±åç»è¿ âpreâ ç±»åç filterï¼ç¶åå°è¯·æ±è½¬åå°å·ä½çä¸å¡æå¡ï¼æ¶å°ä¸å¡æå¡çååºä¹åï¼åç»è¿âpostâç±»åçfilterå¤çï¼æåè¿åååºå°å®¢æ·ç«¯ã\n\nä¸ zuul ä¸åçæ¯ï¼filter é¤äºåä¸º âpreâ å âpostâ ä¸¤ç§æ¹å¼ç filter å¤ï¼å¨ spring cloud gateway ä¸­ï¼filter ä»ä½ç¨èå´å¯åä¸ºå¦å¤ä¸¤ç§ï¼ä¸ç§æ¯éå¯¹äºåä¸ªè·¯ç±ç gateway filterï¼å®éè¦åä¸é¢ application.yml ä¸­ç filters é£æ ·å¨åä¸ªè·¯ç±ä¸­éç½®ï¼å¦å¤ä¸ç§æ¯éå¯¹äºå¨é¨è·¯ç±çglobal gateway filterï¼ä¸éè¦åç¬éç½®ï¼å¯¹ææè·¯ç±çæã\n\n\n# å¨å±è¿æ»¤å¨\n\næä»¬éå¸¸ç¨å¨å±è¿æ»¤å¨å®ç°é´æãéªç­¾ãéæµãæ¥å¿è¾åºç­ã\n\néè¿å®ç° globalfilter æ¥å£æ¥èªå®ä¹ gateway çå¨å±è¿æ»¤å¨ï¼éè¿å®ç° ordered æ¥å£æèä½¿ç¨ @order æ³¨è§£æ¥å®ä¹è¿æ»¤å¨çæ§è¡é¡ºåºï¼æ§è¡é¡ºåºæ¯ä»å°å°å¤§æ§è¡ï¼è¾é«çå¼è¢«è§£éä¸ºè¾ä½çä¼åçº§ã\n\n    @bean\n    @order(-1)\n    public globalfilter a() {\n        return (exchange, chain) -> {\n            log.info("first pre filter");\n            return chain.filter(exchange).then(mono.fromrunnable(() -> {\n                log.info("third post filter");\n            }));\n        };\n    }\n\n    @bean\n    @order(0)\n    public globalfilter b() {\n        return (exchange, chain) -> {\n            log.info("second pre filter");\n            return chain.filter(exchange).then(mono.fromrunnable(() -> {\n                log.info("second post filter");\n            }));\n        };\n    }\n\n    @bean\n    @order(1)\n    public globalfilter c() {\n        return (exchange, chain) -> {\n            log.info("third pre filter");\n            return chain.filter(exchange).then(mono.fromrunnable(() -> {\n                log.info("first post filter");\n            }));\n        };\n    }\n\n\nä¼åçº§æé«ç filter ï¼å®ç âpreâ è¿æ»¤å¨æåæ§è¡ï¼âpostâ è¿æ»¤å¨æææ§è¡ã\n\n\n# å±é¨è¿æ»¤å¨\n\næä»¬æ¥å®ä¹ä¸ä¸ª âpreâ ç±»åçå±é¨è¿æ»¤å¨ï¼\n\n@component\npublic class pregatewayfilterfactory extends abstractgatewayfilterfactory<pregatewayfilterfactory.config> {\n    \n    public pregatewayfilterfactory() {\n        super(config.class);\n    }\n\n    @override\n    public gatewayfilter apply(config config) {\n        // grab configuration from config object\n        return (exchange, chain) -> {\n            //if you want to build a "pre" filter you need to manipulate the\n            //request before calling chain.filter\n            serverhttprequest.builder builder = exchange.getrequest().mutate();\n            //use builder to manipulate the request\n            serverhttprequest request = builder.build();\n            return chain.filter(exchange.mutate().request(request).build());\n        };\n    }\n\n    public static class config {\n        //put the configuration properties for your filter here\n    }\n}\n\n\nå¶ä¸­ï¼éè¦çè¿æ»¤å¨åæ°éç½®å¨ pregatewayfilterfactory.config ä¸­ãç¶åï¼æ¥ä¸æ¥æä»¬è¦åçï¼å°±æ¯æå±é¨è¿æ»¤å¨éç½®å¨éè¦çè·¯ç±ä¸ï¼æ ¹æ® springboot çº¦å®å¤§äºéç½®çææ³ï¼æä»¬åªéè¦éç½® pregatewayfilterfactory.java ä¸­ï¼åé¢çåæ°å°±è¡äºï¼å³\n\nspring:\n  cloud:\n    gateway:\n      routes:\n        - id: cloud-eureka-client\n          uri: lb://cloud-eureka-client\n          order: 0\n          predicates:\n            - path=/client/**\n          filters:\n            - pre\n\n\n> å¯ä»¥å»éè¯»ä¸ gateway ä¸­é»è®¤æä¾çå ç§è¿æ»¤å¨ï¼æ¯å¦ stripprefixgatewayfilterfactory.java ç­ã\n\n\n# å¨æè·¯ç±\n\nspring cloud gateway å®ç°å¨æè·¯ç±ä¸»è¦å©ç¨ routedefinitionwriter è¿ä¸ª beanï¼\n\npublic interface routedefinitionwriter {\n\n\tmono<void> save(mono<routedefinition> route);\n\n\tmono<void> delete(mono<string> routeid);\n}\n\n\nä¹åç¿»éäºç½ä¸çä¸äºæç« ï¼åºæ¬é½æ¯éè¿èªå®ä¹ controller ååºå¥åï¼ç¶åå©ç¨ routedefinitionwriter å®ç°å¨æç½å³ãä½æ¯ï¼æå¨ç¿»é spring cloud gateway ææ¡£çæ¶åï¼åç° gateway å·²ç»æä¾äºç±»ä¼¼çåè½ï¼\n\n@restcontrollerendpoint(id = "gateway")\npublic class gatewaycontrollerendpoint implements applicationeventpublisheraware {\n\n    /*---çç¥åé¢ä»£ç ---*/\n\n\t@postmapping("/routes/{id}")\n\t@suppresswarnings("unchecked")\n\tpublic mono<responseentity<void>> save(@pathvariable string id, @requestbody mono<routedefinition> route) {\n\t\treturn this.routedefinitionwriter.save(route.map(r ->  {\n\t\t\tr.setid(id);\n\t\t\tlog.debug("saving route: " + route);\n\t\t\treturn r;\n\t\t})).then(mono.defer(() ->\n\t\t\tmono.just(responseentity.created(uri.create("/routes/"+id)).build())\n\t\t));\n\t}\n\n\t@deletemapping("/routes/{id}")\n\tpublic mono<responseentity<object>> delete(@pathvariable string id) {\n\t\treturn this.routedefinitionwriter.delete(mono.just(id))\n\t\t\t\t.then(mono.defer(() -> mono.just(responseentity.ok().build())))\n\t\t\t\t.onerrorresume(t -> t instanceof notfoundexception, t -> mono.just(responseentity.notfound().build()));\n\t}\n\n     /*---çç¥åé¢ä»£ç ---*/\n}\n\n\nè¦åå»ºä¸ä¸ªè·¯ç±ï¼åépostè¯·æ± /actuator/gateway/routes/{id_route_to_create}ï¼åæ°ä¸ºjsonç»æï¼å·ä½åæ°æ°æ®ç»æï¼\n\n{\n  "id": "first_route",\n  "predicates": [{\n    "name": "path",\n    "args": {"_genkey_0":"/first"}\n  }],\n  "filters": [],\n  "uri": "http://www.uri-destination.org",\n  "order": 0\n}]\n\n\nè¦å é¤ä¸ä¸ªè·¯ç±ï¼åé deleteè¯·æ± /actuator/gateway/routes/{id_route_to_delete}',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:47:02",lastUpdatedTimestamp:1644378422e3},{title:"Spring Cloud Gateway éç½®å¤§å¨",frontmatter:{title:"Spring Cloud Gateway éç½®å¤§å¨",date:"2022-02-09T11:44:07.000Z",permalink:"/pages/f0610e/"},regularPath:"/15.Spring%20Cloud%20Gateway/01.Spring%20Cloud%20Gateway/02.Spring%20Cloud%20Gateway%20%E9%85%8D%E7%BD%AE%E5%A4%A7%E5%85%A8.html",relativePath:"15.Spring Cloud Gateway/01.Spring Cloud Gateway/02.Spring Cloud Gateway éç½®å¤§å¨.md",key:"v-1dd07656",path:"/pages/f0610e/",headers:[{level:2,title:"Predicates",slug:"predicates",normalizedTitle:"predicates",charIndex:84},{level:2,title:"Path",slug:"path",normalizedTitle:"path",charIndex:140},{level:2,title:"Cookie",slug:"cookie",normalizedTitle:"cookie",charIndex:282},{level:2,title:"Header",slug:"header",normalizedTitle:"header",charIndex:474},{level:2,title:"Host",slug:"host",normalizedTitle:"host",charIndex:673},{level:2,title:"Method",slug:"method",normalizedTitle:"method",charIndex:825},{level:2,title:"Query",slug:"query",normalizedTitle:"query",charIndex:928},{level:2,title:"RemoteAddr",slug:"remoteaddr",normalizedTitle:"remoteaddr",charIndex:1090},{level:2,title:"After",slug:"after",normalizedTitle:"after",charIndex:1240},{level:2,title:"Before",slug:"before",normalizedTitle:"before",charIndex:1425},{level:2,title:"Before",slug:"before-2",normalizedTitle:"before",charIndex:1425},{level:2,title:"Filters",slug:"filters",normalizedTitle:"filters",charIndex:2061}],headersStr:"Predicates Path Cookie Header Host Method Query RemoteAddr After Before Before Filters",content:'# Spring Cloud Gateway éç½®å¤§å¨\n\n> äºè§£Gatewayçéç½®æå¯ä»¥çè§£ä½¿ç¨Gatewayå¯ä»¥åä»ä¹äºæï¼æè½æ´å¥½å°åºç¨å¨äº§åå¼åä¸­ã\n\n\n# Predicates\n\n> Predicatesä¸»è¦èµ·çä½ç¨æ¯ï¼éç½®è·¯ç±å¹éè¯·æ±çè§å\n\nHttpç¸å³\n\n\n# Path\n\n> éç½®å¯¹äºè¯·æ±è·¯å¾çå¹éè§å\n\nymléç½®ï¼å¤ä¸ªåæ°ç¨éå·éå¼\n\n- Path = /aa/**,/bb/**\n\n\njsonéç½®\n\n{"name":"Path","args":{"pattern":"/aa/**","pattern1":"/bb/**"}}\n\n\n\n# Cookie\n\n> éç½®å¯¹Cookieä¸­å¼çå¹éï¼ç¬¬ä¸ä¸ªä¸ºkeyï¼ç¬¬äºä¸ªä¸ºvalueãä¸ä¾å¹écookieè®¾ç½®chocolate:ch.pçè¯·æ±\n\nymléç½®\n\n- Cookie = chocolate,ch.p\n\n\njsonéç½®\n\n{"name":"Cookie","args":{"_genkey_0":"chocolate","_genkey_1":"ch.p"}}\n\n\n\n# Header\n\n> å¹éHttpè¯·æ±ä¸­è®¾ç½®çåå®¹ï¼http-headerè®¾ç½®X-Request-Id:\\d+å¯ä»¥å¹éï¼ç¬¬äºä¸ªåæ°ç¬¬äºä¸ªåæ°æ¯æ­£åè¡¨è¾¾å¼\n\nymléç½®\n\n- Header = X-Request-Id,\\d+\n\n\njsonéç½®\n\n{"name":"Header","args":{"_genkey_0":"X-Request-Id","_genkey_1":"\\d+"}}\n\n\n\n# Host\n\n> å¹éHttpè¯·æ±Hostï¼å¹éææhostä¸º**.somehost.comçè¯·æ±\n\nymléç½®\n\n- Host = **.somehost.com\n\n\njsonéç½®\n\n{"name":"Host","args":{"_genkey_0":"**.somehost.com"}}\n\n\n\n# Method\n\n> å¹éHttpè¯·æ±å¤´\n\nymléç½®\n\n- Method = GET\n\n\njsonéç½®\n\n{"name":"Method","args":{"_genkey_0":"GET"}}\n\n\n\n# Query\n\n> å¹éHttpè¯·æ±ä¸­çæ¥è¯¢åæ°ï¼è¯·æ±ä¸­æºå¸¦param1=valueçè¯·æ±å¯ä»¥å¹é\n\nymléç½®\n\n- Query = param1,value\n\n\njsonéç½®\n\n{"name":"Query","args":{"_genkey_0":"param1","_genkey_1":"value"}}\n\n\n\n# RemoteAddr\n\n> å¹éè¯·æ±ä¸­çRemoteAddr\n\nymléç½®\n\n- RemoteAddr = 192.168.1.1/24\n\n\njsonéç½®\n\n{"name":"RemoteAddr","args":{"_genkey_0":"192.168.1.1/24"}}\n\n\næ¶é´ç¸å³\n\n\n# After\n\n> è®¾ç½®æ¶é´ä¹åå¯ä»¥è®¿é®\n\nymléç½®\n\n- After = 2017-01-20T17:42:47.789-07:00[America/Denver]\n\n\njsonéç½®\n\n{"name":"After","args":{"_genkey_0":"2017-01-20T17:42:47.789-07:00[America/Denver]"}}\n\n\n\n# Before\n\n> è®¾ç½®æ¶é´ä¹åå¯ä»¥è®¿é®\n\nymléç½®\n\n- Before = 2017-01-20T17:42:47.789-07:00[America/Denver]\n\n\njsonéç½®\n\n{"name":"Before","args":{"_genkey_0":"2017-01-20T17:42:47.789-07:00[America/Denver]"}}\n\n\n\n# Before\n\n> è®¾ç½®æ¶é´æ®µåå¯ä»¥è®¿é®\n\nymléç½®\n\n- Between = 2017-01-20T17:42:47.789-07:00[America/Denver],2017-01-21T17:42:47.789-07:00[America/Denver]\n\n\njsonéç½®\n\n{"name":"Between","args":{"_genkey_0":"2017-01-20T17:42:47.789-07:00[America/Denver]"ï¼"_genkey_1":"2017-01-21T17:42:47.789-07:00[America/Denver]"}}\n\n\næéè·¯ç±\n\n> è³å°ä¸¤ç»ä»¥ä¸è·¯ç±å¯ä»¥éç½®æéè·¯ç±ï¼éç½®åä¼æ ¹æ®æééæºè®¿é®å ä¸ªè·¯ç±\n\nymléç½®\n\n- Weight = service1,80\n\n\njsonéç½®\n\n{"name":"Weight","args":{"_genkey_0":"service1","_genkey_1":"80"}}\n\n\n\n# Filters\n\nè·¯å¾éå\n\nymléç½®\n\n- RewritePath = /path/(?<segment>.*), /$\\{segment}\n\n\njsonéç½®\n\n{"name":"RewritePath","args":{"_genkey_0":"/foo/(?<segment>.*)","_genkey_1":"/$\\\\{segment}"}}\n\n\nä¿®æ¹è¯·æ±å¤´\n\nymléç½®\n\n- AddRequestHeader = X-Request-Foo,Bar\n\n\njsonéç½®\n\n{"name":"AddRequestHeader","args":{"_genkey_0":"X-Request-Foo","_genkey_1":"Bar"}}\n\n\nä¿®æ¹è¯·æ±åæ°\n\nymléç½®\n\n- AddRequestParameter = foo,bar\n\n\njsonéç½®\n\n{"name":"AddRequestParameter","args":{"_genkey_0":"foo","_genkey_1":"bar"}}\n\n\nä¿®æ¹ååºåæ°\n\nymléç½®\n\n- AddResponseHeader = X-Request-Foo,Bar\n\n\njsonéç½®\n\n{"name":"AddResponseHeader","args":{"_genkey_0":"X-Request-Foo","_genkey_1":"Bar"}}\n\n\nè·¯å¾åç¼å¢å¼º\n\n> è¯·æ±è·¯å¾/hello, å°ä¼è¢«æ¿æ¢ä¸º /mypath/hello\n\nymléç½®\n\n- PrefixPath = /mypath\n\n\njsonéç½®\n\n{"name":"PrefixPath","args":{"_genkey_0":"/mypath"}}\n\n\nè·¯å¾åç¼å é¤\n\n> è¯·æ±/name/bar/fooï¼å»é¤æåé¢ä¸¤ä¸ªåç¼ä¹åï¼æåè½¬åå°ç®æ æå¡çè·¯å¾ä¸º/foo\n\nymléç½®\n\n- StripPrefix = 2\n\n\njsonéç½®\n\n{"name":"StripPrefix","args":{"_genkey_0":"2"}}\n\n\nè¯·æ±æºå¸¦ä¿çåå§Host\n\nymléç½®\n\n- PreserveHostHeader\n\n\njsonéç½®\n\n{"name":"PreserveHostHeader","args":{}}\n\n\néå®å\n\nymléç½®\n\n- RedirectTo = 302,http://acme.org\n\n\njsonéç½®\n\n{"name":"RedirectTo","args":{"_genkey_0":"302","_genkey_1":"http://acme.org"}}\n\n\næ­è·¯å¨\n\nymléç½®\n\n- name: Hystrix\n  args:\n\t  ## æ­è·¯åè·³è½¬å°å\n\t  name: fallbackcmd\n      fallbackUri: forward:/incaseoffailureusethis\n\n\njsonéç½®\n\n{"name":"Hystrix","args":{"name":"fallbackcmd","fallbackUri":"forward:/incaseoffailureusethis"}}\n\n\néæRedisåçæ¯æè¯·æ±éæµ\n\nymléç½®\n\n - name: RequestRateLimiter\n   args:\n     redis-rate-limiter.replenishRate: 10  \n     redis-rate-limiter.burstCapacity: 20\n\n\njsonéç½®\n\n{"name":"RequestRateLimiter","args":{"redis-rate-limiter.replenishRate":"10","redis-rate-limiter.burstCapacity":"20"}}\n\n\nå é¤è¯·æ±å¤´å±æ§\n\nymléç½®\n\n- RemoveRequestHeader = X-Request-Foo\n\n\njsonéç½®\n\n{"name":"RemoveRequestHeader","args":{"_genkey_0":"X-Request-Foo"}}\n\n\nå é¤ååºå¤´å±æ§\n\nymléç½®\n\n- RemoveResponseHeader = X-Request-Foo\n\n\njsonéç½®\n\n{"name":"RemoveResponseHeader","args":{"_genkey_0":"X-Request-Foo"}}\n\n\néåååºå¤´\n\n> å°è¯·æ± /42?user=ford&password=omg!what&flag=true, æ¹ä¸º /42?user=ford&password=***&flag=true\n\nymléç½®\n\n- RewriteResponseHeader = X-Response-Foo,password=[^&]+,password=***\n\n\njsonéç½®\n\n{"name":"RewriteResponseHeader","args":{"_genkey_0":"X-Response-Foo","_genkey_1":"password=[^&]+","_genkey_2":"password=***"}}\n\n\néè®¾è¯·æ±è·¯å¾\n\n> è¯·æ±/foo/barï¼å¨æ¥ä¸æ¥çå¤çä¸­è¢«æ¹ä¸º/bar\n\nymléç½®\n\n- SetPath =/{segment}\n\n\njsonéç½®\n\n{"name":"SetPath","args":{"_genkey_0":"/{segment}"}}\n\n\nè®¾ç½®ååºå¤´\n\n> å¨æ¥ä¸æ¥çå¤çä¸­ä¿®æ¹ååºå¤´X-Response-Fooä¸ºBar\n\nymléç½®\n\n- SetResponseHeader =X-Request-Foo,Bar\n\n\njsonéç½®\n\n{"name":"SetResponseHeader","args":{"_genkey_0":"X-Response-Foo","_genkey_1":"Bar"}}\n\n\nè®¾ç½®Httpç¶æ\n\nymléç½®\n\n- name: SetStatus\n  args:\n\t  status: 401\n\n\njsonéç½®\n\n{"name":"SetStatus","args":{"_genkey_0":"302"}}\n\n\nè®¾ç½®æä»¶ä¼ è¾å¤§å°\n\nymléç½®\n\n - name: RequestSize\n   args:\n\t   maxSize: 5000000\n\n\njsonéç½®\n\n{"name":"RequestSize","args":{"_genkey_0":"5000000"}}\n\n\nå¤±è´¥éè¯\n\nymléç½®\n\n- name: Retry\n  args:\n\t  retries: 3\n      statuses: BAD_GATEWAY\n',normalizedContent:'# spring cloud gateway éç½®å¤§å¨\n\n> äºè§£gatewayçéç½®æå¯ä»¥çè§£ä½¿ç¨gatewayå¯ä»¥åä»ä¹äºæï¼æè½æ´å¥½å°åºç¨å¨äº§åå¼åä¸­ã\n\n\n# predicates\n\n> predicatesä¸»è¦èµ·çä½ç¨æ¯ï¼éç½®è·¯ç±å¹éè¯·æ±çè§å\n\nhttpç¸å³\n\n\n# path\n\n> éç½®å¯¹äºè¯·æ±è·¯å¾çå¹éè§å\n\nymléç½®ï¼å¤ä¸ªåæ°ç¨éå·éå¼\n\n- path = /aa/**,/bb/**\n\n\njsonéç½®\n\n{"name":"path","args":{"pattern":"/aa/**","pattern1":"/bb/**"}}\n\n\n\n# cookie\n\n> éç½®å¯¹cookieä¸­å¼çå¹éï¼ç¬¬ä¸ä¸ªä¸ºkeyï¼ç¬¬äºä¸ªä¸ºvalueãä¸ä¾å¹écookieè®¾ç½®chocolate:ch.pçè¯·æ±\n\nymléç½®\n\n- cookie = chocolate,ch.p\n\n\njsonéç½®\n\n{"name":"cookie","args":{"_genkey_0":"chocolate","_genkey_1":"ch.p"}}\n\n\n\n# header\n\n> å¹éhttpè¯·æ±ä¸­è®¾ç½®çåå®¹ï¼http-headerè®¾ç½®x-request-id:\\d+å¯ä»¥å¹éï¼ç¬¬äºä¸ªåæ°ç¬¬äºä¸ªåæ°æ¯æ­£åè¡¨è¾¾å¼\n\nymléç½®\n\n- header = x-request-id,\\d+\n\n\njsonéç½®\n\n{"name":"header","args":{"_genkey_0":"x-request-id","_genkey_1":"\\d+"}}\n\n\n\n# host\n\n> å¹éhttpè¯·æ±hostï¼å¹éææhostä¸º**.somehost.comçè¯·æ±\n\nymléç½®\n\n- host = **.somehost.com\n\n\njsonéç½®\n\n{"name":"host","args":{"_genkey_0":"**.somehost.com"}}\n\n\n\n# method\n\n> å¹éhttpè¯·æ±å¤´\n\nymléç½®\n\n- method = get\n\n\njsonéç½®\n\n{"name":"method","args":{"_genkey_0":"get"}}\n\n\n\n# query\n\n> å¹éhttpè¯·æ±ä¸­çæ¥è¯¢åæ°ï¼è¯·æ±ä¸­æºå¸¦param1=valueçè¯·æ±å¯ä»¥å¹é\n\nymléç½®\n\n- query = param1,value\n\n\njsonéç½®\n\n{"name":"query","args":{"_genkey_0":"param1","_genkey_1":"value"}}\n\n\n\n# remoteaddr\n\n> å¹éè¯·æ±ä¸­çremoteaddr\n\nymléç½®\n\n- remoteaddr = 192.168.1.1/24\n\n\njsonéç½®\n\n{"name":"remoteaddr","args":{"_genkey_0":"192.168.1.1/24"}}\n\n\næ¶é´ç¸å³\n\n\n# after\n\n> è®¾ç½®æ¶é´ä¹åå¯ä»¥è®¿é®\n\nymléç½®\n\n- after = 2017-01-20t17:42:47.789-07:00[america/denver]\n\n\njsonéç½®\n\n{"name":"after","args":{"_genkey_0":"2017-01-20t17:42:47.789-07:00[america/denver]"}}\n\n\n\n# before\n\n> è®¾ç½®æ¶é´ä¹åå¯ä»¥è®¿é®\n\nymléç½®\n\n- before = 2017-01-20t17:42:47.789-07:00[america/denver]\n\n\njsonéç½®\n\n{"name":"before","args":{"_genkey_0":"2017-01-20t17:42:47.789-07:00[america/denver]"}}\n\n\n\n# before\n\n> è®¾ç½®æ¶é´æ®µåå¯ä»¥è®¿é®\n\nymléç½®\n\n- between = 2017-01-20t17:42:47.789-07:00[america/denver],2017-01-21t17:42:47.789-07:00[america/denver]\n\n\njsonéç½®\n\n{"name":"between","args":{"_genkey_0":"2017-01-20t17:42:47.789-07:00[america/denver]"ï¼"_genkey_1":"2017-01-21t17:42:47.789-07:00[america/denver]"}}\n\n\næéè·¯ç±\n\n> è³å°ä¸¤ç»ä»¥ä¸è·¯ç±å¯ä»¥éç½®æéè·¯ç±ï¼éç½®åä¼æ ¹æ®æééæºè®¿é®å ä¸ªè·¯ç±\n\nymléç½®\n\n- weight = service1,80\n\n\njsonéç½®\n\n{"name":"weight","args":{"_genkey_0":"service1","_genkey_1":"80"}}\n\n\n\n# filters\n\nè·¯å¾éå\n\nymléç½®\n\n- rewritepath = /path/(?<segment>.*), /$\\{segment}\n\n\njsonéç½®\n\n{"name":"rewritepath","args":{"_genkey_0":"/foo/(?<segment>.*)","_genkey_1":"/$\\\\{segment}"}}\n\n\nä¿®æ¹è¯·æ±å¤´\n\nymléç½®\n\n- addrequestheader = x-request-foo,bar\n\n\njsonéç½®\n\n{"name":"addrequestheader","args":{"_genkey_0":"x-request-foo","_genkey_1":"bar"}}\n\n\nä¿®æ¹è¯·æ±åæ°\n\nymléç½®\n\n- addrequestparameter = foo,bar\n\n\njsonéç½®\n\n{"name":"addrequestparameter","args":{"_genkey_0":"foo","_genkey_1":"bar"}}\n\n\nä¿®æ¹ååºåæ°\n\nymléç½®\n\n- addresponseheader = x-request-foo,bar\n\n\njsonéç½®\n\n{"name":"addresponseheader","args":{"_genkey_0":"x-request-foo","_genkey_1":"bar"}}\n\n\nè·¯å¾åç¼å¢å¼º\n\n> è¯·æ±è·¯å¾/hello, å°ä¼è¢«æ¿æ¢ä¸º /mypath/hello\n\nymléç½®\n\n- prefixpath = /mypath\n\n\njsonéç½®\n\n{"name":"prefixpath","args":{"_genkey_0":"/mypath"}}\n\n\nè·¯å¾åç¼å é¤\n\n> è¯·æ±/name/bar/fooï¼å»é¤æåé¢ä¸¤ä¸ªåç¼ä¹åï¼æåè½¬åå°ç®æ æå¡çè·¯å¾ä¸º/foo\n\nymléç½®\n\n- stripprefix = 2\n\n\njsonéç½®\n\n{"name":"stripprefix","args":{"_genkey_0":"2"}}\n\n\nè¯·æ±æºå¸¦ä¿çåå§host\n\nymléç½®\n\n- preservehostheader\n\n\njsonéç½®\n\n{"name":"preservehostheader","args":{}}\n\n\néå®å\n\nymléç½®\n\n- redirectto = 302,http://acme.org\n\n\njsonéç½®\n\n{"name":"redirectto","args":{"_genkey_0":"302","_genkey_1":"http://acme.org"}}\n\n\næ­è·¯å¨\n\nymléç½®\n\n- name: hystrix\n  args:\n\t  ## æ­è·¯åè·³è½¬å°å\n\t  name: fallbackcmd\n      fallbackuri: forward:/incaseoffailureusethis\n\n\njsonéç½®\n\n{"name":"hystrix","args":{"name":"fallbackcmd","fallbackuri":"forward:/incaseoffailureusethis"}}\n\n\néæredisåçæ¯æè¯·æ±éæµ\n\nymléç½®\n\n - name: requestratelimiter\n   args:\n     redis-rate-limiter.replenishrate: 10  \n     redis-rate-limiter.burstcapacity: 20\n\n\njsonéç½®\n\n{"name":"requestratelimiter","args":{"redis-rate-limiter.replenishrate":"10","redis-rate-limiter.burstcapacity":"20"}}\n\n\nå é¤è¯·æ±å¤´å±æ§\n\nymléç½®\n\n- removerequestheader = x-request-foo\n\n\njsonéç½®\n\n{"name":"removerequestheader","args":{"_genkey_0":"x-request-foo"}}\n\n\nå é¤ååºå¤´å±æ§\n\nymléç½®\n\n- removeresponseheader = x-request-foo\n\n\njsonéç½®\n\n{"name":"removeresponseheader","args":{"_genkey_0":"x-request-foo"}}\n\n\néåååºå¤´\n\n> å°è¯·æ± /42?user=ford&password=omg!what&flag=true, æ¹ä¸º /42?user=ford&password=***&flag=true\n\nymléç½®\n\n- rewriteresponseheader = x-response-foo,password=[^&]+,password=***\n\n\njsonéç½®\n\n{"name":"rewriteresponseheader","args":{"_genkey_0":"x-response-foo","_genkey_1":"password=[^&]+","_genkey_2":"password=***"}}\n\n\néè®¾è¯·æ±è·¯å¾\n\n> è¯·æ±/foo/barï¼å¨æ¥ä¸æ¥çå¤çä¸­è¢«æ¹ä¸º/bar\n\nymléç½®\n\n- setpath =/{segment}\n\n\njsonéç½®\n\n{"name":"setpath","args":{"_genkey_0":"/{segment}"}}\n\n\nè®¾ç½®ååºå¤´\n\n> å¨æ¥ä¸æ¥çå¤çä¸­ä¿®æ¹ååºå¤´x-response-fooä¸ºbar\n\nymléç½®\n\n- setresponseheader =x-request-foo,bar\n\n\njsonéç½®\n\n{"name":"setresponseheader","args":{"_genkey_0":"x-response-foo","_genkey_1":"bar"}}\n\n\nè®¾ç½®httpç¶æ\n\nymléç½®\n\n- name: setstatus\n  args:\n\t  status: 401\n\n\njsonéç½®\n\n{"name":"setstatus","args":{"_genkey_0":"302"}}\n\n\nè®¾ç½®æä»¶ä¼ è¾å¤§å°\n\nymléç½®\n\n - name: requestsize\n   args:\n\t   maxsize: 5000000\n\n\njsonéç½®\n\n{"name":"requestsize","args":{"_genkey_0":"5000000"}}\n\n\nå¤±è´¥éè¯\n\nymléç½®\n\n- name: retry\n  args:\n\t  retries: 3\n      statuses: bad_gateway\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:47:02",lastUpdatedTimestamp:1644378422e3},{title:"Spring Cloud Gateway ä¸­æå®ç½ææ¡£",frontmatter:{title:"Spring Cloud Gateway ä¸­æå®ç½ææ¡£",date:"2022-02-09T11:44:07.000Z",permalink:"/pages/f7b8bf/"},regularPath:"/15.Spring%20Cloud%20Gateway/01.Spring%20Cloud%20Gateway/03.Spring%20Cloud%20Gateway%20%E4%B8%AD%E6%96%87%E5%AE%98%E7%BD%91%E6%96%87%E6%A1%A3.html",relativePath:"15.Spring Cloud Gateway/01.Spring Cloud Gateway/03.Spring Cloud Gateway ä¸­æå®ç½ææ¡£.md",key:"v-13de5e4a",path:"/pages/f7b8bf/",headers:[{level:2,title:"ææ¡£çæ¬ 2.1.0",slug:"ææ¡£çæ¬-2-1-0",normalizedTitle:"ææ¡£çæ¬ 2.1.0",charIndex:34},{level:2,title:"1. å¦ä½å¨å·¥ç¨ä¸­å¼ç¨Spring Cloud Gateway",slug:"_1-å¦ä½å¨å·¥ç¨ä¸­å¼ç¨spring-cloud-gateway",normalizedTitle:"1. å¦ä½å¨å·¥ç¨ä¸­å¼ç¨spring cloud gateway",charIndex:466},{level:2,title:"2. è¯æ±è¡¨",slug:"_2-è¯æ±è¡¨",normalizedTitle:"2. è¯æ±è¡¨",charIndex:847},{level:2,title:"3. å¦ä½å·¥ä½ç",slug:"_3-å¦ä½å·¥ä½ç",normalizedTitle:"3. å¦ä½å·¥ä½ç",charIndex:1140},{level:2,title:"4. è·¯ç±æ­è¨Factories",slug:"_4-è·¯ç±æ­è¨factories",normalizedTitle:"4. è·¯ç±æ­è¨factories",charIndex:1439},{level:2,title:"4.1 After è·¯ç±æ­è¨ Factory",slug:"_4-1-after-è·¯ç±æ­è¨-factory",normalizedTitle:"4.1 after è·¯ç±æ­è¨ factory",charIndex:1618},{level:2,title:"4.2 Before è·¯ç±æ­è¨ Factory",slug:"_4-2-before-è·¯ç±æ­è¨-factory",normalizedTitle:"4.2 before è·¯ç±æ­è¨ factory",charIndex:1909},{level:2,title:"4.3 Between è·¯ç±æ­è¨ Factory",slug:"_4-3-between-è·¯ç±æ­è¨-factory",normalizedTitle:"4.3 between è·¯ç±æ­è¨ factory",charIndex:2205},{level:2,title:"4.4 Cookie è·¯ç±æ­è¨ Factory",slug:"_4-4-cookie-è·¯ç±æ­è¨-factory",normalizedTitle:"4.4 cookie è·¯ç±æ­è¨ factory",charIndex:2596},{level:2,title:"4.5 Header  è·¯ç±æ­è¨ Factory",slug:"_4-5-header-è·¯ç±æ­è¨-factory",normalizedTitle:"4.5 header  è·¯ç±æ­è¨ factory",charIndex:null},{level:2,title:"4.6 Host è·¯ç±æ­è¨ Factory",slug:"_4-6-host-è·¯ç±æ­è¨-factory",normalizedTitle:"4.6 host è·¯ç±æ­è¨ factory",charIndex:3134},{level:2,title:"4.7 Method è·¯ç±æ­è¨ Factory",slug:"_4-7-method-è·¯ç±æ­è¨-factory",normalizedTitle:"4.7 method è·¯ç±æ­è¨ factory",charIndex:3405},{level:2,title:"4.8 Path è·¯ç±æ­è¨ Factory",slug:"_4-8-path-è·¯ç±æ­è¨-factory",normalizedTitle:"4.8 path è·¯ç±æ­è¨ factory",charIndex:3652},{level:2,title:"4.9 Query è·¯ç±æ­è¨ Factory",slug:"_4-9-query-è·¯ç±æ­è¨-factory",normalizedTitle:"4.9 query è·¯ç±æ­è¨ factory",charIndex:4325},{level:2,title:"4.10 RemoteAddr è·¯ç±æ­è¨ Factory",slug:"_4-10-remoteaddr-è·¯ç±æ­è¨-factory",normalizedTitle:"4.10 remoteaddr è·¯ç±æ­è¨ factory",charIndex:4799},{level:3,title:"4.10.1 ä¿®æ¹è¿ç¨å°åçè§£ææ¹å¼",slug:"_4-10-1-ä¿®æ¹è¿ç¨å°åçè§£ææ¹å¼",normalizedTitle:"4.10.1 ä¿®æ¹è¿ç¨å°åçè§£ææ¹å¼",charIndex:5162},{level:2,title:"5.1 AddRequestHeader GatewayFilter Factory",slug:"_5-1-addrequestheader-gatewayfilter-factory",normalizedTitle:"5.1 addrequestheader gatewayfilter factory",charIndex:6693},{level:2,title:"5.2 AddRequestParameter GatewayFilter Factory",slug:"_5-2-addrequestparameter-gatewayfilter-factory",normalizedTitle:"5.2 addrequestparameter gatewayfilter factory",charIndex:6998},{level:2,title:"5.3 AddResponseHeader GatewayFilter Factory",slug:"_5-3-addresponseheader-gatewayfilter-factory",normalizedTitle:"5.3 addresponseheader gatewayfilter factory",charIndex:7286},{level:2,title:"5.4 Hystrix GatewayFilter Factory",slug:"_5-4-hystrix-gatewayfilter-factory",normalizedTitle:"5.4 hystrix gatewayfilter factory",charIndex:7595},{level:2,title:"5.5 FallbackHeaders GatewayFilter Factory",slug:"_5-5-fallbackheaders-gatewayfilter-factory",normalizedTitle:"5.5 fallbackheaders gatewayfilter factory",charIndex:9753},{level:2,title:"5.6 PrefixPath GatewayFilter Factory",slug:"_5-6-prefixpath-gatewayfilter-factory",normalizedTitle:"5.6 prefixpath gatewayfilter factory",charIndex:10933},{level:2,title:"5.7 PreserveHostHeader GatewayFilter Factory",slug:"_5-7-preservehostheader-gatewayfilter-factory",normalizedTitle:"5.7 preservehostheader gatewayfilter factory",charIndex:11245},{level:2,title:"5.8 RequestRateLimiter GatewayFilter Factory",slug:"_5-8-requestratelimiter-gatewayfilter-factory",normalizedTitle:"5.8 requestratelimiter gatewayfilter factory",charIndex:11554},{level:3,title:"5.8.1 Redis RateLimiter",slug:"_5-8-1-redis-ratelimiter",normalizedTitle:"5.8.1 redis ratelimiter",charIndex:12531},{level:2,title:"5.9 RedirectTo GatewayFilter Factory",slug:"_5-9-redirectto-gatewayfilter-factory",normalizedTitle:"5.9 redirectto gatewayfilter factory",charIndex:13947},{level:2,title:"5.10 RemoveNonProxyHeaders GatewayFilter Factory",slug:"_5-10-removenonproxyheaders-gatewayfilter-factory",normalizedTitle:"5.10 removenonproxyheaders gatewayfilter factory",charIndex:14315},{level:2,title:"5.11 RemoveRequestHeader GatewayFilter Factory",slug:"_5-11-removerequestheader-gatewayfilter-factory",normalizedTitle:"5.11 removerequestheader gatewayfilter factory",charIndex:14692},{level:2,title:"5.12 RemoveResponseHeader GatewayFilter Factory",slug:"_5-12-removeresponseheader-gatewayfilter-factory",normalizedTitle:"5.12 removeresponseheader gatewayfilter factory",charIndex:15004},{level:2,title:"5.13 RewritePath GatewayFilter Factory",slug:"_5-13-rewritepath-gatewayfilter-factory",normalizedTitle:"5.13 rewritepath gatewayfilter factory",charIndex:15323},{level:2,title:"5.14 RewriteResponseHeader GatewayFilter Factory",slug:"_5-14-rewriteresponseheader-gatewayfilter-factory",normalizedTitle:"5.14 rewriteresponseheader gatewayfilter factory",charIndex:15732},{level:2,title:"5.15 SaveSession GatewayFilter Factory",slug:"_5-15-savesession-gatewayfilter-factory",normalizedTitle:"5.15 savesession gatewayfilter factory",charIndex:16201},{level:2,title:"5.16 SecureHeaders GatewayFilter Factory",slug:"_5-16-secureheaders-gatewayfilter-factory",normalizedTitle:"5.16 secureheaders gatewayfilter factory",charIndex:16681},{level:2,title:"5.17 SetPath GatewayFilter Factory",slug:"_5-17-setpath-gatewayfilter-factory",normalizedTitle:"5.17 setpath gatewayfilter factory",charIndex:17548},{level:2,title:"5.18 SetResponseHeader GatewayFilter Factory",slug:"_5-18-setresponseheader-gatewayfilter-factory",normalizedTitle:"5.18 setresponseheader gatewayfilter factory",charIndex:17968},{level:2,title:"5.19 SetStatus GatewayFilter Factory",slug:"_5-19-setstatus-gatewayfilter-factory",normalizedTitle:"5.19 setstatus gatewayfilter factory",charIndex:18388},{level:2,title:"5.20 StripPrefix GatewayFilter Factory",slug:"_5-20-stripprefix-gatewayfilter-factory",normalizedTitle:"5.20 stripprefix gatewayfilter factory",charIndex:18837},{level:2,title:"5.21 Retry GatewayFilter Factory",slug:"_5-21-retry-gatewayfilter-factory",normalizedTitle:"5.21 retry gatewayfilter factory",charIndex:19235},{level:2,title:"5.22 RequestSize GatewayFilter Factory",slug:"_5-22-requestsize-gatewayfilter-factory",normalizedTitle:"5.22 requestsize gatewayfilter factory",charIndex:20037},{level:2,title:"5.23 Modify Request Body GatewayFilter Factory",slug:"_5-23-modify-request-body-gatewayfilter-factory",normalizedTitle:"5.23 modify request body gatewayfilter factory",charIndex:20737},{level:2,title:"5.24 Modify Response Body GatewayFilter Factory",slug:"_5-24-modify-response-body-gatewayfilter-factory",normalizedTitle:"5.24 modify response body gatewayfilter factory",charIndex:21595},{level:2,title:"6.1 å¨å±FilteråGatewayFilterç»åæåº",slug:"_6-1-å¨å±filterågatewayfilterç»åæåº",normalizedTitle:"6.1 å¨å±filterågatewayfilterç»åæåº",charIndex:22221},{level:2,title:"6.2 Forward Routing Filter",slug:"_6-2-forward-routing-filter",normalizedTitle:"6.2 forward routing filter",charIndex:23292},{level:2,title:"6.3 LoadBalancerClient Filter",slug:"_6-3-loadbalancerclient-filter",normalizedTitle:"6.3 loadbalancerclient filter",charIndex:23598},{level:2,title:"6.4 Netty Routing Filter",slug:"_6-4-netty-routing-filter",normalizedTitle:"6.4 netty routing filter",charIndex:24489},{level:2,title:"6.5 Netty Write Response Filter",slug:"_6-5-netty-write-response-filter",normalizedTitle:"6.5 netty write response filter",charIndex:24781},{level:2,title:"6.6 RouteToRequestUrl Filter",slug:"_6-6-routetorequesturl-filter",normalizedTitle:"6.6 routetorequesturl filter",charIndex:25018},{level:2,title:"6.7 Websocket Routing Filter",slug:"_6-7-websocket-routing-filter",normalizedTitle:"6.7 websocket routing filter",charIndex:25384},{level:2,title:"6.8 Gateway Metrics Filter",slug:"_6-8-gateway-metrics-filter",normalizedTitle:"6.8 gateway metrics filter",charIndex:26029},{level:2,title:"6.9 Making An Exchange As Routed",slug:"_6-9-making-an-exchange-as-routed",normalizedTitle:"6.9 making an exchange as routed",charIndex:26494},{level:2,title:"7.1 TLS æ¡æ",slug:"_7-1-tls-æ¡æ",normalizedTitle:"7.1 tls æ¡æ",charIndex:27604},{level:2,title:"8.1 Fluent Java Routes API",slug:"_8-1-fluent-java-routes-api",normalizedTitle:"8.1 fluent java routes api",charIndex:28668},{level:2,title:"8.2 DiscoveryClient Route Definition Locator",slug:"_8-2-discoveryclient-route-definition-locator",normalizedTitle:"8.2 discoveryclient route definition locator",charIndex:29896},{level:3,title:"8.2.1 Configuring Predicates and Filters For DiscoveryClient Routes",slug:"_8-2-1-configuring-predicates-and-filters-for-discoveryclient-routes",normalizedTitle:"8.2.1 configuring predicates and filters for discoveryclient routes",charIndex:30126},{level:2,title:"11.1 Retrieving route filters",slug:"_11-1-retrieving-route-filters",normalizedTitle:"11.1 retrieving route filters",charIndex:32633},{level:3,title:"11.1.1 Global Filters",slug:"_11-1-1-global-filters",normalizedTitle:"11.1.1 global filters",charIndex:32667},{level:3,title:"11.1.2 Route Filters",slug:"_11-1-2-route-filters",normalizedTitle:"11.1.2 route filters",charIndex:33621},{level:2,title:"11.2 Refreshing the route cache",slug:"_11-2-refreshing-the-route-cache",normalizedTitle:"11.2 refreshing the route cache",charIndex:34230},{level:2,title:"11.3 Retrieving the routes defined in the gateway",slug:"_11-3-retrieving-the-routes-defined-in-the-gateway",normalizedTitle:"11.3 retrieving the routes defined in the gateway",charIndex:34334},{level:2,title:"11.4 Retrieving information about a particular route",slug:"_11-4-retrieving-information-about-a-particular-route",normalizedTitle:"11.4 retrieving information about a particular route",charIndex:35380},{level:2,title:"11.5 Creating and deleting a particular route",slug:"_11-5-creating-and-deleting-a-particular-route",normalizedTitle:"11.5 creating and deleting a particular route",charIndex:36122},{level:2,title:"11.6 Recap: list of all endpoints",slug:"_11-6-recap-list-of-all-endpoints",normalizedTitle:"11.6 recap: list of all endpoints",charIndex:36312},{level:2,title:"12.1 Writing Custom Route Predicate Factories",slug:"_12-1-writing-custom-route-predicate-factories",normalizedTitle:"12.1 writing custom route predicate factories",charIndex:37126},{level:2,title:"12.2 Writing Custom GatewayFilter Factories",slug:"_12-2-writing-custom-gatewayfilter-factories",normalizedTitle:"12.2 writing custom gatewayfilter factories",charIndex:37233},{level:2,title:"12.3 Writing Custom Global Filters",slug:"_12-3-writing-custom-global-filters",normalizedTitle:"12.3 writing custom global filters",charIndex:38908},{level:2,title:"12.4 Writing Custom Route Locators and Writers",slug:"_12-4-writing-custom-route-locators-and-writers",normalizedTitle:"12.4 writing custom route locators and writers",charIndex:38993}],headersStr:"ææ¡£çæ¬ 2.1.0 1. å¦ä½å¨å·¥ç¨ä¸­å¼ç¨Spring Cloud Gateway 2. è¯æ±è¡¨ 3. å¦ä½å·¥ä½ç 4. è·¯ç±æ­è¨Factories 4.1 After è·¯ç±æ­è¨ Factory 4.2 Before è·¯ç±æ­è¨ Factory 4.3 Between è·¯ç±æ­è¨ Factory 4.4 Cookie è·¯ç±æ­è¨ Factory 4.5 Header  è·¯ç±æ­è¨ Factory 4.6 Host è·¯ç±æ­è¨ Factory 4.7 Method è·¯ç±æ­è¨ Factory 4.8 Path è·¯ç±æ­è¨ Factory 4.9 Query è·¯ç±æ­è¨ Factory 4.10 RemoteAddr è·¯ç±æ­è¨ Factory 4.10.1 ä¿®æ¹è¿ç¨å°åçè§£ææ¹å¼ 5.1 AddRequestHeader GatewayFilter Factory 5.2 AddRequestParameter GatewayFilter Factory 5.3 AddResponseHeader GatewayFilter Factory 5.4 Hystrix GatewayFilter Factory 5.5 FallbackHeaders GatewayFilter Factory 5.6 PrefixPath GatewayFilter Factory 5.7 PreserveHostHeader GatewayFilter Factory 5.8 RequestRateLimiter GatewayFilter Factory 5.8.1 Redis RateLimiter 5.9 RedirectTo GatewayFilter Factory 5.10 RemoveNonProxyHeaders GatewayFilter Factory 5.11 RemoveRequestHeader GatewayFilter Factory 5.12 RemoveResponseHeader GatewayFilter Factory 5.13 RewritePath GatewayFilter Factory 5.14 RewriteResponseHeader GatewayFilter Factory 5.15 SaveSession GatewayFilter Factory 5.16 SecureHeaders GatewayFilter Factory 5.17 SetPath GatewayFilter Factory 5.18 SetResponseHeader GatewayFilter Factory 5.19 SetStatus GatewayFilter Factory 5.20 StripPrefix GatewayFilter Factory 5.21 Retry GatewayFilter Factory 5.22 RequestSize GatewayFilter Factory 5.23 Modify Request Body GatewayFilter Factory 5.24 Modify Response Body GatewayFilter Factory 6.1 å¨å±FilteråGatewayFilterç»åæåº 6.2 Forward Routing Filter 6.3 LoadBalancerClient Filter 6.4 Netty Routing Filter 6.5 Netty Write Response Filter 6.6 RouteToRequestUrl Filter 6.7 Websocket Routing Filter 6.8 Gateway Metrics Filter 6.9 Making An Exchange As Routed 7.1 TLS æ¡æ 8.1 Fluent Java Routes API 8.2 DiscoveryClient Route Definition Locator 8.2.1 Configuring Predicates and Filters For DiscoveryClient Routes 11.1 Retrieving route filters 11.1.1 Global Filters 11.1.2 Route Filters 11.2 Refreshing the route cache 11.3 Retrieving the routes defined in the gateway 11.4 Retrieving information about a particular route 11.5 Creating and deleting a particular route 11.6 Recap: list of all endpoints 12.1 Writing Custom Route Predicate Factories 12.2 Writing Custom GatewayFilter Factories 12.3 Writing Custom Global Filters 12.4 Writing Custom Route Locators and Writers",content:'# Spring Cloud Gateway ä¸­æå®ç½ææ¡£\n\n\n# ææ¡£çæ¬ 2.1.0\n\nç®å½\n\n1. How to Include Spring Cloud Gateway\n2. Glossary\n3. How It Works\n4. Route Predicate Factories\n5. GatewayFilter Factories\n6. Global Filters\n7. TLS / SSL\n8. Configuration\n9. Reactor Netty Access Logs\n10. CORS Configuration\n11. Actuator API\n12. Developer Guide\n\n\nè¯¥é¡¹ç®æä¾äºä¸ä¸ªå»ºç«å¨Spring Ecosystemä¹ä¸çAPIç½å³ï¼åæ¬ï¼Spring 5ï¼Spring Boot 2åProject ReactorãSpring Cloud Gatewayæ¨å¨æä¾ä¸ç§ç®åèææçæ¹å¼æ¥å¯¹APIè¿è¡è·¯ç±ï¼å¹¶ä¸ºä»ä»¬æä¾åé¢ï¼ä¾å¦ï¼å®å¨æ§ï¼çæ§/ææ  åå¼¹æ§ç­ã\n\n\n# 1. å¦ä½å¨å·¥ç¨ä¸­å¼ç¨Spring Cloud Gateway\n\nè¦å¨é¡¹ç®ä¸­å¼å¥Spring Cloud Gatewayï¼éè¦å¼ç¨ group org.springframework.cloud å artifact idä¸ºspring-cloud-starter-gateway starterãææ°çSpring Cloud Release æå»ºä¿¡æ¯ï¼è¯·åéSpring Cloud Project pageã\n\nå¦æåºç¨äºè¯¥starterï¼ä½ç±äºæç§åå ä¸å¸æå¯ç¨ç½å³ï¼è¯·è¿è¡è®¾ç½®spring.cloud.gateway.enabled=falseã\n\n> éè¦ Spring Cloud Gatewayä¾èµSpring BootåSpring Webfluxæä¾çNetty runtimeãå®ä¸è½å¨ä¼ ç»çServletå®¹å¨ä¸­å·¥ä½ææå»ºä¸ºWAR\n\n\n# 2. è¯æ±è¡¨\n\n * Route è·¯ç±ï¼gatewayçåºæ¬æå»ºæ¨¡åãå®ç±IDãç®æ URIãæ­è¨éååè¿æ»¤å¨éåç»æãå¦æèåæ­è¨ç»æä¸ºçï¼åå¹éå°è¯¥è·¯ç±ã\n * Predicate æ­è¨ï¼è¿æ¯ä¸ä¸ªJava 8 Function Predicateãè¾å¥ç±»åæ¯ Spring Framework ServerWebExchangeãè¿åè®¸å¼åäººåå¯ä»¥å¹éæ¥èªHTTPè¯·æ±çä»»ä½åå®¹ï¼ä¾å¦Headeræåæ°ã\n * Filter è¿æ»¤å¨ï¼è¿äºæ¯ä½¿ç¨ç¹å®å·¥åæå»ºç Spring FrameworkGatewayFilterå®ä¾ãæä»¥å¯ä»¥å¨è¿åè¯·æ±ä¹åæä¹åä¿®æ¹è¯·æ±åååºçåå®¹ã\n\n\n# 3. å¦ä½å·¥ä½ç\n\n\n\nSpring Cloud Gateway Diagram\n\nå®¢æ·ç«¯åSpring Cloud Gatewayååºè¯·æ±ãå¦æGateway Handler Mappingç¡®å®è¯·æ±ä¸è·¯ç±å¹éï¼åå°å¶åéå°Gateway Web Handlerãæ­¤handleréè¿ç¹å®äºè¯¥è¯·æ±çè¿æ»¤å¨é¾å¤çè¯·æ±ãå¾ä¸­filtersè¢«èçº¿ååçåå æ¯filterså¯ä»¥å¨åéä»£çè¯·æ±ä¹åæä¹åæ§è¡é»è¾ãåæ§è¡ææâpre filterâé»è¾ï¼ç¶åè¿è¡è¯·æ±ä»£çãå¨è¯·æ±ä»£çæ§è¡å®åï¼æ§è¡âpost filterâé»è¾ã\n\n> æ³¨æ HTTPåHTTPS URIé»è®¤ç«¯å£è®¾ç½®æ¯80å443ã\n\n\n# 4. è·¯ç±æ­è¨Factories\n\nSpring Cloud Gatewayå°è·¯ç±ä½ä¸ºSpring WebFlux HandlerMappingåºç¡ç»æçä¸é¨åè¿è¡å¹éãSpring Cloud Gatewayåå«è®¸å¤åç½®çè·¯ç±æ­è¨Factoriesãè¿äºæ­è¨é½å¹éHTTPè¯·æ±çä¸åå±æ§ãå¤ä¸ªè·¯ç±æ­è¨Factorieså¯ä»¥éè¿ and ç»åä½¿ç¨ã\n\n\n# 4.1 After è·¯ç±æ­è¨ Factory\n\nAfter Route Predicate Factoryéç¨ä¸ä¸ªåæ°ââæ¥ææ¶é´ãå¨è¯¥æ¥ææ¶é´ä¹ååççè¯·æ±é½å°è¢«å¹éã\n\napplication.yml\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: after_route\n        uri: http://example.org\n        predicates:\n        - After=2017-01-20T17:42:47.789-07:00[America/Denver]\n\n\n\n# 4.2 Before è·¯ç±æ­è¨ Factory\n\nBefore Route Predicate Factoryéç¨ä¸ä¸ªåæ°ââæ¥ææ¶é´ãå¨è¯¥æ¥ææ¶é´ä¹ååççè¯·æ±é½å°è¢«å¹éã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: before_route\n        uri: http://example.org\n        predicates:\n        - Before=2017-01-20T17:42:47.789-07:00[America/Denver]\n\n\n\n# 4.3 Between è·¯ç±æ­è¨ Factory\n\nBetween è·¯ç±æ­è¨ Factoryæä¸¤ä¸ªåæ°ï¼datetime1ådatetime2ãå¨datetime1ådatetime2ä¹é´çè¯·æ±å°è¢«å¹éãdatetime2åæ°çå®éæ¶é´å¿é¡»å¨datetime1ä¹åã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: between_route\n        uri: http://example.org\n        predicates:\n        - Between=2017-01-20T17:42:47.789-07:00[America/Denver], 2017-01-21T17:42:47.789-07:00[America/Denver]\n\n\n\n# 4.4 Cookie è·¯ç±æ­è¨ Factory\n\nCookie è·¯ç±æ­è¨ Factoryæä¸¤ä¸ªåæ°ï¼cookieåç§°åæ­£åè¡¨è¾¾å¼ãè¯·æ±åå«æ¬¡cookieåç§°ä¸æ­£åè¡¨è¾¾å¼ä¸ºççå°ä¼è¢«å¹éã\n\napplication.yml\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: cookie_route\n        uri: http://example.org\n        predicates:\n        - Cookie=chocolate, ch.p\n\n\n\n# 4.5 Header è·¯ç±æ­è¨ Factory\n\nHeader è·¯ç±æ­è¨ Factoryæä¸¤ä¸ªåæ°ï¼headeråç§°åæ­£åè¡¨è¾¾å¼ãè¯·æ±åå«æ¬¡headeråç§°ä¸æ­£åè¡¨è¾¾å¼ä¸ºççå°ä¼è¢«å¹éã\n\napplication.yml.\n\nspring:\n cloud:\n   gateway:\n     routes:\n     - id: header_route\n       uri: http://example.org\n       predicates:\n       - Header=X-Request-Id, \\d+\n\n\n\n# 4.6 Host è·¯ç±æ­è¨ Factory\n\nHost è·¯ç±æ­è¨ Factoryåæ¬ä¸ä¸ªåæ°ï¼host nameåè¡¨ãä½¿ç¨Antè·¯å¾å¹éè§åï¼.ä½ä¸ºåéç¬¦ã application.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: host_route\n        uri: http://example.org\n        predicates:\n        - Host=**.somehost.org,**.anotherhost.org\n\n\n\n# 4.7 Method è·¯ç±æ­è¨ Factory\n\nMethod è·¯ç±æ­è¨ Factoryåªåå«ä¸ä¸ªåæ°: éè¦å¹éçHTTPè¯·æ±æ¹å¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: method_route\n        uri: http://example.org\n        predicates:\n        - Method=GET\n\n\nææGETè¯·æ±é½å°è¢«è·¯ç±\n\n\n# 4.8 Path è·¯ç±æ­è¨ Factory\n\nPath è·¯ç±æ­è¨ Factory æ2ä¸ªåæ°: ä¸ä¸ªSpring PathMatcherè¡¨è¾¾å¼åè¡¨åå¯ématchOptionalTrailingSeparatoræ è¯ .\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: host_route\n        uri: http://example.org\n        predicates:\n        - Path=/foo/{segment},/bar/{segment}\n\n\nä¾å¦: /foo/1 or /foo/bar or /bar/bazçè¯·æ±é½å°è¢«å¹é\n\nURI æ¨¡æ¿åé (å¦ä¸ä¾ä¸­ç segment ) å°ä»¥Mapçæ¹å¼ä¿å­äºServerWebExchange.getAttributes() keyä¸ºServerWebExchangeUtils.URI_TEMPLATE_VARIABLES_ATTRIBUTE. è¿äºå¼å°å¨GatewayFilter Factoriesä½¿ç¨\n\nå¯ä»¥ä½¿ç¨ä»¥ä¸æ¹æ³æ¥æ´æ¹ä¾¿å°è®¿é®è¿äºåéã\n\nMap<String, String> uriVariables = ServerWebExchangeUtils.getPathPredicateVariables(exchange);\n\nString segment = uriVariables.get("segment");\n\n\n\n# 4.9 Query è·¯ç±æ­è¨ Factory\n\nQuery è·¯ç±æ­è¨ Factory æ2ä¸ªåæ°: å¿éé¡¹ param åå¯éé¡¹ regexp.\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: query_route\n        uri: http://example.org\n        predicates:\n        - Query=baz\n\n\nååå«äºè¯·æ±åæ° bazçé½å°è¢«å¹éã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: query_route\n        uri: http://example.org\n        predicates:\n        - Query=foo, ba.\n\n\nå¦æè¯·æ±åæ°éåå«fooåæ°ï¼å¹¶ä¸å¼å¹éä¸ºba. è¡¨è¾¾å¼ï¼åå°ä¼è¢«è·¯ç±ï¼å¦ï¼bar and baz\n\n\n# 4.10 RemoteAddr è·¯ç±æ­è¨ Factory\n\nRemoteAddr è·¯ç±æ­è¨ Factoryçåæ°ä¸º ä¸ä¸ªCIDRç¬¦å·ï¼IPv4æIPv6ï¼å­ç¬¦ä¸²çåè¡¨ï¼æå°å¼ä¸º1ï¼ä¾å¦192.168.0.1/16ï¼å¶ä¸­192.168.0.1æ¯IPå°åå¹¶ä¸16æ¯å­ç½æ©ç ï¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: remoteaddr_route\n        uri: http://example.org\n        predicates:\n        - RemoteAddr=192.168.1.1/24\n\n\nå¦æè¯·æ±çremote address ä¸º 192.168.1.10åå°è¢«è·¯ç±\n\n\n# 4.10.1 ä¿®æ¹è¿ç¨å°åçè§£ææ¹å¼\n\né»è®¤æåµä¸ï¼RemoteAddr è·¯ç±æ­è¨ Factoryä½¿ç¨ä¼ å¥è¯·æ±ä¸­çremote addressãå¦æSpring Cloud Gatewayä½äºä»£çå±åé¢ï¼åå¯è½ä¸å®éå®¢æ·ç«¯IPå°åä¸å¹éã\n\nå¯ä»¥éè¿è®¾ç½®èªå®ä¹RemoteAddressResolveræ¥èªå®ä¹è§£æè¿ç¨å°åçæ¹å¼ãSpring Cloud Gatewayç½å³éå¸¦ä¸ä¸ªéé»è®¤è¿ç¨å°åè§£æç¨åºï¼å®åºäºX-Forwarded-For header, XForwardedRemoteAddressResolver.\n\nXForwardedRemoteAddressResolver æä¸¤ä¸ªéææé å½æ°æ¹æ³ï¼éç¨ä¸åçå®å¨æ¹æ³ï¼\n\n 1. XForwardedRemoteAddressResolver:ï¼TrustAllè¿åä¸ä¸ªRemoteAddressResolverï¼å®å§ç»éç¨X-Forwarded-forå¤´ä¸­æ¾å°çç¬¬ä¸ä¸ªIPå°åãè¿ç§æ¹æ³å®¹æåå°æ¬ºéªï¼å ä¸ºæ¶æå®¢æ·ç«¯å¯è½ä¼ä¸ºè§£æç¨åºæ¥åçâx-forwarded-forâè®¾ç½®åå§å¼ã\n 2. XForwardedRemoteAddressResolver:ï¼MaxTrustedIndexè·åä¸ä¸ªç´¢å¼ï¼è¯¥ç´¢å¼ä¸å¨Spring Cloudç½å³åè¿è¡çåä¿¡ä»»åºç¡è®¾æ½æ°éç¸å³ãä¾å¦ï¼å¦æSpringCloudGatewayåªè½éè¿haproxyè®¿é®ï¼ååºä½¿ç¨å¼1ãå¦æå¨è®¿é®Spring Cloud Gatewayä¹åéè¦ä¸¤ä¸ªåä¿¡ä»»çåºç¡æ¶æè·ç¹ï¼é£ä¹åºè¯¥ä½¿ç¨2ã\n\nç»å®ä»¥ä¸çheaderå¼ï¼\n\nX-Forwarded-For: 0.0.0.1, 0.0.0.2, 0.0.0.3\n\n\nä¸é¢ç` maxTrustedIndexå¼å°çæä»¥ä¸è¿ç¨å°å:\n\nMAXTRUSTEDINDEX          RESULT\n[Integer.MIN_VALUE,0]    (invalid, IllegalArgumentException during initialization)\n1                        0.0.0.3\n2                        0.0.0.2\n3                        0.0.0.1\n[4, Integer.MAX_VALUE]   0.0.0.1\n\nJava éç½®æ¹å¼:\n\nGatewayConfig.java\n\nRemoteAddressResolver resolver = XForwardedRemoteAddressResolver\n    .maxTrustedIndex(1);\n\n...\n\n.route("direct-route",\n    r -> r.remoteAddr("10.1.1.1", "10.10.1.1/24")\n        .uri("https://downstream1")\n.route("proxied-route",\n    r -> r.remoteAddr(resolver,  "10.10.1.1", "10.10.1.1/24")\n        .uri("https://downstream2")\n)\n\n\n\n# 5. GatewayFilter Factories\n\nè¿æ»¤å¨åè®¸ä»¥æç§æ¹å¼ä¿®æ¹ä¼ å¥çHTTPè¯·æ±æè¿åçHTTPååºãè¿æ»¤å¨çä½ç¨åæ¯æäºç¹å®è·¯ç±ãSpring Cloud Gatewayåæ¬è®¸å¤åç½®ç Filterå·¥åã\n\næ³¨æï¼æå³å¦ä½ä½¿ç¨ä»¥ä¸ä»»ä½è¿æ»¤å¨çæ´è¯¦ç»ç¤ºä¾ï¼è¯·æ¥çunit tests.ã\n\n\n# 5.1 AddRequestHeader GatewayFilter Factory\n\néç¨ä¸å¯¹åç§°åå¼ä½ä¸ºåæ° application.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: add_request_header_route\n        uri: http://example.org\n        filters:\n        - AddRequestHeader=X-Request-Foo, Bar\n\n\nå¯¹äºææå¹éçè¯·æ±ï¼è¿å°åä¸æ¸¸è¯·æ±çå¤´ä¸­æ·»å  x-request-foo:bar header\n\n\n# 5.2 AddRequestParameter GatewayFilter Factory\n\néç¨ä¸å¯¹åç§°åå¼ä½ä¸ºåæ° application.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: add_request_parameter_route\n        uri: http://example.org\n        filters:\n        - AddRequestParameter=foo, bar\n\n\nå¯¹äºææå¹éçè¯·æ±ï¼è¿å°åä¸æ¸¸è¯·æ±æ·»å foo=baræ¥è¯¢å­ç¬¦ä¸²\n\n\n# 5.3 AddResponseHeader GatewayFilter Factory\n\néç¨ä¸å¯¹åç§°åå¼ä½ä¸ºåæ°\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: add_request_header_route\n        uri: http://example.org\n        filters:\n        - AddResponseHeader=X-Response-Foo, Bar\n\n\nå¯¹äºææå¹éçè¯·æ±ï¼è¿ä¼å°x-response-foo:barå¤´æ·»å å°ä¸æ¸¸ååºçheaderä¸­\n\n\n# 5.4 Hystrix GatewayFilter Factory\n\nHystrix æ¯Netflixå¼æºçæ­è·¯å¨ç»ä»¶ãHystrix GatewayFilteråè®¸ä½ åç½å³è·¯ç±å¼å¥æ­è·¯å¨ï¼ä¿æ¤ä½ çæå¡ä¸åçº§èæéçå½±åï¼å¹¶åè®¸ä½ å¨ä¸æ¸¸æéæ¶æä¾fallbackååºã\n\nè¦å¨é¡¹ç®ä¸­å¯ç¨Hystrixç½å³è¿æ»¤å¨ï¼éè¦æ·»å å¯¹ spring-cloud-starter-netflix-hystrixçä¾èµ Spring Cloud Netflix.\n\nHystrix GatewayFilter Factory éè¦ä¸ä¸ªnameåæ°ï¼å³HystrixCommandçåç§°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: hystrix_route\n        uri: http://example.org\n        filters:\n        - Hystrix=myCommandName\n\n\nè¿å°å©ä½çè¿æ»¤å¨åè£å¨å½ä»¤åä¸ºâmyCommandNameâçHystrixCommandä¸­ã\n\nhystrixè¿æ»¤å¨è¿å¯ä»¥æ¥åå¯éçfallbackUri åæ°ãç®åï¼ä»æ¯æforward: é¢è®¾çURIï¼å¦æè°ç¨fallbackï¼åè¯·æ±å°è½¬åå°ä¸URIå¹éçæ§å¶å¨ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: hystrix_route\n        uri: lb://backing-service:8088\n        predicates:\n        - Path=/consumingserviceendpoint\n        filters:\n        - name: Hystrix\n          args:\n            name: fallbackcmd\n            fallbackUri: forward:/incaseoffailureusethis\n        - RewritePath=/consumingserviceendpoint, /backingserviceendpoint\n\n\nå½è°ç¨hystrix fallbackæ¶ï¼è¿å°è½¬åå°/incaseoffailureusethis uriãæ³¨æï¼è¿ä¸ªç¤ºä¾è¿æ¼ç¤ºäºï¼å¯éï¼éè¿ç®æ URIä¸ç\'lb`åç¼,ä½¿ç¨Spring Cloud Netflix Ribbon å®¢æ·ç«¯è´è½½åè¡¡ã\n\nä¸»è¦åºæ¯æ¯ä½¿ç¨fallbackUri å°ç½å³åºç¨ç¨åºä¸­çåé¨æ§å¶å¨æå¤çç¨åºãä½æ¯ï¼ä¹å¯ä»¥å°è¯·æ±éæ°è·¯ç±å°å¤é¨åºç¨ç¨åºä¸­çæ§å¶å¨æå¤çç¨åºï¼å¦ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: ingredients\n        uri: lb://ingredients\n        predicates:\n        - Path=//ingredients/**\n        filters:\n        - name: Hystrix\n          args:\n            name: fetchIngredients\n            fallbackUri: forward:/fallback\n      - id: ingredients-fallback\n        uri: http://localhost:9994\n        predicates:\n        - Path=/fallback\n\n\nå¨æ¬ä¾ä¸­ï¼gatewayåºç¨ç¨åºä¸­æ²¡æ fallback å®ç°ï¼ä½æ¯å¦ä¸ä¸ªåºç¨ç¨åºä¸­æä¸ä¸ªæ¥å£å®ç°ï¼æ³¨åä¸ºâhttp://localhost:9994âã\n\nå¨å°è¯·æ±è½¬åå°fallbackçæåµä¸ï¼Hystrix Gatewayè¿æ»¤è¿æ¯æç´æ¥æåºThrowable ãå®è¢«ä½ä¸ºServerWebExchangeUtils.HYSTRIX_EXECUTION_EXCEPTION_ATTRå±æ§æ·»å å°ServerWebExchangeä¸­ï¼å¯ä»¥å¨å¤çç½å³åºç¨ç¨åºä¸­çfallbackæ¶ä½¿ç¨ã\n\nå¯¹äºå¤é¨æ§å¶å¨/å¤çç¨åºæ¹æ¡ï¼å¯ä»¥æ·»å å¸¦æå¼å¸¸è¯¦ç»ä¿¡æ¯çheaderãå¯ä»¥å¨ FallbackHeaders GatewayFilter Factory section.ä¸­æ¾å°æå³å®çæ´å¤ä¿¡æ¯ã\n\nhystrixéç½®åæ°ï¼å¦ timeoutsï¼å¯ä»¥ä½¿ç¨å¨å±é»è®¤å¼éç½®ï¼ä¹å¯ä»¥ä½¿ç¨Hystrix wikiä¸­æè¿°å±æ§è¿è¡éç½®ã\n\nè¦ä¸ºä¸é¢çç¤ºä¾è·¯ç±è®¾ç½®5ç§è¶æ¶ï¼å°ä½¿ç¨ä»¥ä¸éç½®ï¼\n\napplication.yml.\n\nhystrix.command.fallbackcmd.execution.isolation.thread.timeoutInMilliseconds: 5000\n\n\n\n# 5.5 FallbackHeaders GatewayFilter Factory\n\nFallbackHeadersåè®¸å¨è½¬åå°å¤é¨åºç¨ç¨åºä¸­çFallbackUriçè¯·æ±çheaderä¸­æ·»å Hystrixå¼å¸¸è¯¦ç»ä¿¡æ¯ï¼å¦ä¸æç¤ºï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: ingredients\n        uri: lb://ingredients\n        predicates:\n        - Path=//ingredients/**\n        filters:\n        - name: Hystrix\n          args:\n            name: fetchIngredients\n            fallbackUri: forward:/fallback\n      - id: ingredients-fallback\n        uri: http://localhost:9994\n        predicates:\n        - Path=/fallback\n        filters:\n        - name: FallbackHeaders\n          args:\n            executionExceptionTypeHeaderName: Test-Header\n\n\nå¨æ¬ä¾ä¸­ï¼å¨è¿è¡HystrixCommandåçæ§è¡å¼å¸¸åï¼è¯·æ±å°è¢«è½¬åå° localhost:9994åºç¨ç¨åºä¸­ç fallbackç»ç«¯æç¨åºãå¼å¸¸ç±»åãæ¶æ¯ï¼å¦æå¯ç¨ï¼cause exceptionç±»ååæ¶æ¯çå¤´ï¼å°ç±FallbackHeaders filteræ·»å å°è¯¥è¯·æ±ä¸­ã\n\néè¿è®¾ç½®ä¸é¢ååºçåæ°å¼åå¶é»è®¤å¼ï¼å¯ä»¥å¨éç½®ä¸­è¦çheadersçåç§°ï¼\n\n * executionExceptionTypeHeaderName ("Execution-Exception-Type")\n * executionExceptionMessageHeaderName ("Execution-Exception-Message")\n * rootCauseExceptionTypeHeaderName ("Root-Cause-Exception-Type")\n * rootCauseExceptionMessageHeaderName ("Root-Cause-Exception-Message")\n\nHystrix å¦ä½å®ç°çæ´å¤ç»èå¯ä»¥åè Hystrix GatewayFilter Factory section.\n\n\n# 5.6 PrefixPath GatewayFilter Factory\n\nPrefixPath GatewayFilter åªæä¸ä¸ª prefix åæ°.\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: prefixpath_route\n        uri: http://example.org\n        filters:\n        - PrefixPath=/mypath\n\n\nè¿å°ç»ææå¹éè¯·æ±çè·¯å¾å åç¼/mypathãå æ­¤ï¼å/helloåéçè¯·æ±å°åéå°/mypath/helloã\n\n\n# 5.7 PreserveHostHeader GatewayFilter Factory\n\nè¯¥filteræ²¡æåæ°ãè®¾ç½®äºè¯¥Filteråï¼GatewayFilterå°ä¸ä½¿ç¨ç±HTTPå®¢æ·ç«¯ç¡®å®çhost header ï¼èæ¯åéåå§host header ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: preserve_host_route\n        uri: http://example.org\n        filters:\n        - PreserveHostHeader\n\n\n\n# 5.8 RequestRateLimiter GatewayFilter Factory\n\nRequestRateLimiterä½¿ç¨RateLimiterå®ç°æ¯å¦åè®¸ç»§ç»­æ§è¡å½åè¯·æ±ãå¦æä¸åè®¸ç»§ç»­æ§è¡ï¼åè¿åHTTP 429 - Too Many Requests ï¼é»è®¤æåµä¸ï¼ã\n\nè¿ä¸ªè¿æ»¤å¨å¯ä»¥éç½®ä¸ä¸ªå¯éçkeyResolver åæ°årate limiteråæ°ï¼è§ä¸æï¼ã\n\nkeyResolver æ¯ KeyResolver æ¥å£çå®ç°ç±».å¨éç½®ä¸­ï¼æåç§°ä½¿ç¨SpELå¼ç¨beanã#{@myKeyResolver} æ¯å¼ç¨åä¸º\'myKeyResolver\'çbeançSpELè¡¨è¾¾å¼ã\n\nKeyResolver.java.\n\npublic interface KeyResolver {\n    Mono<String> resolve(ServerWebExchange exchange);\n}\n\n\nKeyResolveræ¥å£åè®¸ä½¿ç¨å¯ææç­ç¥æ¥æ´¾çéå¶è¯·æ±çkeyãå¨æªæ¥çéç¨ç¢çæ¬ä¸­ï¼å°æä¸äºKeyResolverå®ç°ã\n\nKeyResolverçé»è®¤å®ç°æ¯PrincipalNameKeyResolverï¼å®ä»ServerWebExchangeæ£ç´¢Principalå¹¶è°ç¨Principal.getName()ã\n\né»è®¤æåµä¸ï¼å¦æKeyResolver æ²¡æè·åå°keyï¼è¯·æ±å°è¢«æç»ãæ­¤è¡ä¸ºå¯ä»¥ä½¿ç¨ spring.cloud.gateway.filter.request-rate-limiter.deny-empty-key (true or false) å spring.cloud.gateway.filter.request-rate-limiter.empty-key-status-codeå±æ§è¿è¡è°æ´ã\n\n> è¯´æ æ æ³éè¿"shortcut" éç½®RequestRateLimiterãä»¥ä¸ç¤ºä¾æ æ\n\napplication.properties.\n\n# INVALID SHORTCUT CONFIGURATION\nspring.cloud.gateway.routes[0].filters[0]=RequestRateLimiter=2, 2, #{@userkeyresolver}\n\n\n\n# 5.8.1 Redis RateLimiter\n\nRedisçå®ç°åºäº Stripeå®ç°ãå®éè¦ä½¿ç¨ spring-boot-starter-data-redis-reactive Spring Boot starterã\n\nä½¿ç¨çç®æ³æ¯Token Bucket Algorithm.ã\n\nredis-rate-limiter.replenishRateæ¯ä½ åè®¸ç¨æ·æ¯ç§æ§è¡å¤å°è¯·æ±ï¼èä¸¢å¼ä»»ä½è¯·æ±ãè¿æ¯ä»¤çæ¡¶çå¡«åéçã\n\n``redis-rate-limiter.burstCapacity`æ¯åè®¸ç¨æ·å¨ä¸ç§éåæ§è¡çæå¤§è¯·æ±æ°ãè¿æ¯ä»¤çæ¡¶å¯ä»¥ä¿å­çä»¤çæ°ãå°æ­¤å¼è®¾ç½®ä¸ºé¶å°é»æ­¢ææè¯·æ±ã\n\nç¨³å®éçæ¯éè¿å¨replenishRate å burstCapacityä¸­è®¾ç½®ç¸åçå¼æ¥å®ç°çãå¯éè¿è®¾ç½®burstCapacityé«äºreplenishRateæ¥åè®¸ä¸´æ¶çªåæµæµªãå¨è¿ç§æåµä¸ï¼éæµå¨éè¦å¨ä¸¤æ¬¡çªåä¹é´çåºä¸æ®µæ¶é´ï¼æ ¹æ®replenishRateï¼ï¼å ä¸ºè¿ç»­ä¸¤æ¬¡çªåå°å¯¼è´è¯·æ±ä¸¢å¤± (HTTP 429 - Too Many Requests).ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: requestratelimiter_route\n        uri: http://example.org\n        filters:\n        - name: RequestRateLimiter\n          args:\n            redis-rate-limiter.replenishRate: 10\n            redis-rate-limiter.burstCapacity: 20\n\n\nConfig.java.\n\n@Bean\nKeyResolver userKeyResolver() {\n    return exchange -> Mono.just(exchange.getRequest().getQueryParams().getFirst("user"));\n}\n\n\nè¿å®ä¹äºæ¯ä¸ªç¨æ·10ä¸ªè¯·æ±çéå¶ãåè®¸20ä¸ªçªåï¼ä½ä¸ä¸ç§åªæ10ä¸ªè¯·æ±å¯ç¨ãKeyResolveræ¯ä¸ä¸ªç®åçè·åuserè¯·æ±åæ°çå·¥å·ï¼æ³¨æï¼ä¸å»ºè®®ç¨äºçäº§ï¼ã\n\néæµå¨ä¹å¯ä»¥å®ä¹ä¸ºRateLimiteræ¥å£çå®ç° beanãå¨éç½®ä¸­ï¼æåç§°ä½¿ç¨SpELå¼ç¨beanã#{@myRateLimiter}æ¯å¼ç¨åä¸º\'myRateLimiter\'çbeançSpELè¡¨è¾¾å¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: requestratelimiter_route\n        uri: http://example.org\n        filters:\n        - name: RequestRateLimiter\n          args:\n            rate-limiter: "#{@myRateLimiter}"\n            key-resolver: "#{@userKeyResolver}"\n\n\n\n# 5.9 RedirectTo GatewayFilter Factory\n\nè¯¥è¿æ»¤å¨æä¸ä¸ª status åä¸ä¸ª urlåæ°ãstatusæ¯300ç±»éå®åHTTPä»£ç ï¼å¦301ãè¯¥URLåºä¸ºææçURLï¼è¿å°æ¯ Location headerçå¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: prefixpath_route\n        uri: http://example.org\n        filters:\n        - RedirectTo=302, http://acme.org\n\n\nè¿å°åéä¸ä¸ª302ç¶æç åä¸ä¸ªLocation:http://acme.org headeræ¥æ§è¡éå®åã\n\n\n# 5.10 RemoveNonProxyHeaders GatewayFilter Factory\n\nRemoveNonProxyHeaders GatewayFilter Factory ä»è½¬åè¯·æ±ä¸­å é¤headersãå é¤çé»è®¤å¤´åè¡¨æ¥èª IETF.\n\nThe default removed headers are:\n\n * Connection\n * Keep-Alive\n * Proxy-Authenticate\n * Proxy-Authorization\n * TE\n * Trailer\n * Transfer-Encoding\n * Upgrade è¦æ´æ¹æ­¤è®¾ç½®ï¼è¯·å° spring.cloud.gateway.filter.remove-non-proxy-headers.headerså±æ§è®¾ç½®ä¸ºè¦å é¤çheaderåç§°ã\n\n\n# 5.11 RemoveRequestHeader GatewayFilter Factory\n\næä¸ä¸ªnameåæ°. è¿æ¯è¦å é¤çheaderçåç§°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: removerequestheader_route\n        uri: http://example.org\n        filters:\n        - RemoveRequestHeader=X-Request-Foo\n\n\nè¿å°å¨X-Request-Foo headerè¢«åéå°ä¸æ¸¸ä¹åå é¤å®ã\n\n\n# 5.12 RemoveResponseHeader GatewayFilter Factory\n\næä¸ä¸ªnameåæ°. è¿æ¯è¦å é¤çheaderçåç§°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: removeresponseheader_route\n        uri: http://example.org\n        filters:\n        - RemoveResponseHeader=X-Response-Foo\n\n\nè¿å°å¨è¿åå°ç½å³clientä¹åä»ååºä¸­å é¤x-response-fooå¤´ã\n\n\n# 5.13 RewritePath GatewayFilter Factory\n\nåå«ä¸ä¸ª regexpæ­£åè¡¨è¾¾å¼åæ°åä¸ä¸ª replacement åæ°. éè¿ä½¿ç¨Javaæ­£åè¡¨è¾¾å¼çµæ´»å°éåè¯·æ±è·¯å¾ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: rewritepath_route\n        uri: http://example.org\n        predicates:\n        - Path=/foo/**\n        filters:\n        - RewritePath=/foo/(?<segment>.*), /$\\{segment}\n\n\nå¯¹äºè¯·æ±è·¯å¾/foo/barï¼å°å¨ååºä¸æ¸¸è¯·æ±ä¹åå°è·¯å¾è®¾ç½®ä¸º/barãæ³¨æ,ç±äºYAMLè§èï¼è¯·ä½¿ç¨ $\\æ¿æ¢ $ã\n\n\n# 5.14 RewriteResponseHeader GatewayFilter Factory\n\nåå« name, regexpå replacement åæ°.ãéè¿ä½¿ç¨Javaæ­£åè¡¨è¾¾å¼çµæ´»å°éåååºå¤´çå¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: rewriteresponseheader_route\n        uri: http://example.org\n        filters:\n        - RewriteResponseHeader=X-Response-Foo, , password=[^&]+, password=***\n\n\nå¯¹äºä¸ä¸ª/42?user=ford&password=omg!what&flag=trueçheaderå¼ï¼å¨åä¸æ¸¸è¯·æ±æ¶å°è¢«è®¾ç½®ä¸º/42?user=ford&password=***&flag=trueï¼ç±äºYAMLè§èï¼è¯·ä½¿ç¨ $\\æ¿æ¢ $ã\n\n\n# 5.15 SaveSession GatewayFilter Factory\n\nSaveSession GatewayFilter Factoryå°è°ç¨è½¬åå°ä¸æ¸¸ä¹åå¼ºå¶æ§è¡WebSession::save æä½ãè¿å¨ä½¿ç¨ Spring Session ä¹ç±»æ¶ç¹å«æç¨ï¼éè¦ç¡®ä¿ä¼è¯ç¶æå¨è¿è¡è½¬åè°ç¨ä¹åå·²ä¿å­ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: save_session\n        uri: http://example.org\n        predicates:\n        - Path=/foo/**\n        filters:\n        - SaveSession\n\n\nå¦æä½ å¸æè¦å°[Spring Security]ï¼https://projects.spring.io/Spring Security/ï¼ä¸Spring Sessionéæ,å¹¶ç¡®ä¿å®å¨è¯¦ç»ä¿¡æ¯å·²è½¬åå°è¿ç¨çè¿ç¨ï¼è¿ä¸ç¹è³å³éè¦ã\n\n\n# 5.16 SecureHeaders GatewayFilter Factory\n\nSecureHeaders GatewayFilter Factory å°è®¸å¤headersæ·»å å°reccomedationå¤çååºä¸­ï¼ä»this blog post.\n\næ·»å ä»¥ä¸æ é¢ï¼ä½¿ç¨é»è®¤å¼åéï¼:\n\n * X-Xss-Protection:1; mode=block\n * Strict-Transport-Security:max-age=631138519\n * X-Frame-Options:DENY\n * X-Content-Type-Options:nosniff\n * Referrer-Policy:no-referrer\n * Content-Security-Policy:default-src \'self\' https:; font-src \'self\' https: data:; img-src \'self\' https: data:; object-src \'none\'; script-src https:; style-src \'self\' https: \'unsafe-inline\'\n * X-Download-Options:noopen\n * X-Permitted-Cross-Domain-Policies:none\n\nè¦æ´æ¹é»è®¤å¼ï¼è¯·å¨spring.cloud.gateway.filter.secure-headers å½åç©ºé´ä¸­è®¾ç½®ç¸åºçå±æ§ï¼\n\nProperty to change:\n\n * xss-protection-header\n * strict-transport-security\n * frame-options\n * content-type-options\n * referrer-policy\n * content-security-policy\n * download-options\n * permitted-cross-domain-policies\n\n\n# 5.17 SetPath GatewayFilter Factory\n\nSetPath GatewayFilter Factory éç¨ templateè·¯å¾åæ°ãå®æä¾äºä¸ç§éè¿åè®¸è·¯å¾çæ¨¡æ¿åsegmentsæ¥æä½è¯·æ±è·¯å¾çç®åæ¹æ³ãä½¿ç¨Spring Frameworkä¸­çURIæ¨¡æ¿ï¼åè®¸å¤ä¸ªå¹ésegmentsã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setpath_route\n        uri: http://example.org\n        predicates:\n        - Path=/foo/{segment}\n        filters:\n        - SetPath=/{segment}\n\n\nå¯¹äºä¸ä¸ª /foo/barè¯·æ±ï¼å¨åä¸æ¸¸è¯·æ±åï¼è·¯å¾å°è¢«è®¾ç½®ä¸º/bar\n\n\n# 5.18 SetResponseHeader GatewayFilter Factory\n\nSetResponseHeader GatewayFilter Factory åæ¬ name å value åæ°.\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setresponseheader_route\n        uri: http://example.org\n        filters:\n        - SetResponseHeader=X-Response-Foo, Bar\n\n\næ­¤GatewayFilterä½¿ç¨ç»å®çåç§°æ¿æ¢ææheaderï¼èä¸æ¯æ·»å ãå æ­¤ï¼å¦æä¸æ¸¸æå¡å¨ååºä¸ºX-Response-Foo:1234ï¼åä¼å°å¶æ¿æ¢ä¸ºX-Response-Foo:Bar,è¿æ¯ç½å³å®¢æ·ç«¯å°æ¥æ¶çåå®¹ã\n\n\n# 5.19 SetStatus GatewayFilter Factory\n\nSetStatus GatewayFilter Factory åæ¬å¯ä¸ç statusåæ°.å¿é¡»æ¯ä¸ä¸ªå¯ç¨çSpring HttpStatusãå®å¯ä»¥æ¯æ´æ°å¼404æå­ç¬¦ä¸²æä¸¾NOT_FOUNDã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setstatusstring_route\n        uri: http://example.org\n        filters:\n        - SetStatus=BAD_REQUEST\n      - id: setstatusint_route\n        uri: http://example.org\n        filters:\n        - SetStatus=401\n\n\nå¨è¿ä¸ªä¾å­ä¸­ï¼HTTPè¿åç å°è®¾ç½®ä¸º401.\n\n\n# 5.20 StripPrefix GatewayFilter Factory\n\nStripPrefix GatewayFilter Factory åæ¬ä¸ä¸ªpartsåæ°ã partsåæ°æç¤ºå¨å°è¯·æ±åéå°ä¸æ¸¸ä¹åï¼è¦ä»è¯·æ±ä¸­å»é¤çè·¯å¾ä¸­çèæ°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: nameRoot\n        uri: http://nameservice\n        predicates:\n        - Path=/name/**\n        filters:\n        - StripPrefix=2\n\n\nå½éè¿ç½å³ååº/name/bar/fooè¯·æ±æ¶ï¼ånameserviceååºçè¯·æ±å°æ¯http://nameservice/fooã\n\n\n# 5.21 Retry GatewayFilter Factory\n\nRetry GatewayFilter Factoryåæ¬ retries, statuses, methodså series åæ°.\n\n * retries: åºå°è¯çéè¯æ¬¡æ°\n * statuses: åºè¯¥éè¯çHTTPç¶æä»£ç ï¼ç¨org.springframework.http.HttpStatusæ è¯\n * methods: åºè¯¥éè¯çHTTPæ¹æ³ï¼ç¨ org.springframework.http.HttpMethodæ è¯\n * series: è¦éè¯çä¸ç³»åç¶æç ï¼ç¨ org.springframework.http.HttpStatus.Seriesæ è¯\n\napplication.yml.\n\nspring: cloud: gateway: routes: - id: retry_test uri: http://localhost:8080/flakey predicates: - Host=*.retry.com filters: - name: Retry args: retries: 3 statuses: BAD_GATEWAY\n\n> æ³¨æ retry filter ä¸æ¯æbodyè¯·æ±çéè¯ï¼å¦éè¿bodyçPOST æ PUTè¯·æ±\n> \n> æ³¨æ å¨ä½¿ç¨å¸¦æåç¼ä¸º forward: çretry filteræ¶ï¼åºä»ç»ç¼åç®æ ç«¯ç¹ï¼ä»¥ä¾¿å¨åºç°éè¯¯æ¶ä¸ä¼æ§è¡ä»»ä½å¯è½å¯¼è´å°ååºåéå°å®¢æ·ç«¯å¹¶æäº¤çæä½ãä¾å¦ï¼å¦æç®æ ç«¯ç¹æ¯å¸¦æ³¨è§£çcontrollerï¼åç®æ controlleræ¹æ³ä¸åºè¿åå¸¦æéè¯¯ç¶æä»£ç çResponseEntityãç¸åï¼å®åºè¯¥æåºä¸ä¸ªExceptionï¼æèååºä¸ä¸ªéè¯¯ä¿¡å·ï¼ä¾å¦éè¿Mono.error(ex) è¿åå¼ï¼éè¯è¿æ»¤å¨å¯ä»¥éç½®ä¸ºéè¿éè¯æ¥å¤çã\n\n\n# 5.22 RequestSize GatewayFilter Factory\n\nå½è¯·æ±å¤§å°å¤§äºåè®¸çéå¶æ¶ï¼RequestSize GatewayFilter Factoryå¯ä»¥éå¶è¯·æ±ä¸å°è¾¾ä¸æ¸¸æå¡ãè¿æ»¤å¨ä»¥RequestSizeä½ä¸ºåæ°ï¼è¿æ¯å®ä¹è¯·æ±çåè®¸å¤§å°éå¶(ä»¥å­èä¸ºåä½)ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: request_size_route\n      uri: http://localhost:8080/upload\n      predicates:\n      - Path=/upload\n      filters:\n      - name: RequestSize\n        args:\n          maxSize: 5000000\n\n\nå½è¯·æ±å å¤§å°èè¢«æç»æ¶ï¼ RequestSize GatewayFilter Factory å°ååºç¶æè®¾ç½®ä¸º413 Payload Too Largeï¼å¹¶å¸¦æé¢å¤çheader errorMessage ãä¸é¢æ¯ä¸ä¸ª errorMessageçä¾å­ã\n\nerrorMessage` : `Request size is larger than permissible limit. Request size is 6.0 MB where permissible limit is 5.0 MB\n\n\n> æ³¨æ å¦ææªå¨è·¯ç±å®ä¹ä¸­ä½ä¸ºfilteråæ°æä¾ï¼åé»è®¤è¯·æ±å¤§å°å°è®¾ç½®ä¸º5 MBã\n\n\n# 5.23 Modify Request Body GatewayFilter Factory\n\nè¿ä¸ªè¿æ»¤å¨è¢«å®ä¹ä¸ºbetaçæ¬ï¼å°æ¥APIå¯è½ä¼æ¹åã\n\næ­¤è¿æ»¤å¨å¯ç¨äºå¨è¯·æ±ä¸»ä½è¢«ç½å³åéå°ä¸æ¸¸ä¹åå¯¹å¶è¿è¡ä¿®æ¹ã\n\n> æ³¨æ åªè½ä½¿ç¨Java DSLéç½®æ­¤è¿æ»¤å¨\n\n@Bean\npublic RouteLocator routes(RouteLocatorBuilder builder) {\n    return builder.routes()\n        .route("rewrite_request_obj", r -> r.host("*.rewriterequestobj.org")\n            .filters(f -> f.prefixPath("/httpbin")\n                .modifyRequestBody(String.class, Hello.class, MediaType.APPLICATION_JSON_VALUE,\n                    (exchange, s) -> return Mono.just(new Hello(s.toUpperCase())))).uri(uri))\n        .build();\n}\n\nstatic class Hello {\n    String message;\n\n    public Hello() { }\n\n    public Hello(String message) {\n        this.message = message;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n}\n\n\n\n# 5.24 Modify Response Body GatewayFilter Factory\n\nè¿ä¸ªè¿æ»¤å¨è¢«å®ä¹ä¸ºbetaçæ¬ï¼å°æ¥APIå¯è½ä¼æ¹åã æ­¤è¿æ»¤å¨å¯ç¨äºå¨å°ååºæ­£æåéåå®¢æ·ç«¯ä¹åå¯¹å¶è¿è¡ä¿®æ¹ã\n\n> æ³¨æ åªè½ä½¿ç¨Java DSLéç½®æ­¤è¿æ»¤å¨\n\n@Bean\npublic RouteLocator routes(RouteLocatorBuilder builder) {\n    return builder.routes()\n        .route("rewrite_response_upper", r -> r.host("*.rewriteresponseupper.org")\n            .filters(f -> f.prefixPath("/httpbin")\n                .modifyResponseBody(String.class, String.class,\n                    (exchange, s) -> Mono.just(s.toUpperCase()))).uri(uri)\n        .build();\n}\n\n\n\n# 6. Global Filters\n\nGlobalFilteræ¥å£ä¸GatewayFilterå·æç¸åçç­¾åãæ¯ææ¡ä»¶å°åºç¨äºææè·¯ç±çç¹æ®è¿æ»¤å¨ãï¼æ­¤æ¥å£åç¨æ³å¯è½å¨å°æ¥çéç¨ç¢çæ¬ä¸­åçæ´æ¹ï¼ã\n\n\n# 6.1 å¨å±FilteråGatewayFilterç»åæåº\n\nå½è¯·æ±è¿å¥ï¼å¹¶ä¸è·¯ç±å¹éï¼æ¶ï¼ç­éWeb Handler ä¼å°GlobalFilterçææå®ä¾åææçGatewayFilterè·¯ç±ç¹å®å®ä¾æ·»å å° filter chainãfilterç»åçæåºç±org.springframework.core.Orderedæ¥å£å³å®ï¼å¯ä»¥éè¿å®ç°getOrde()æ¹æ³æä½¿ç¨@Orderæ³¨éæ¥è®¾ç½®ã\n\nç±äºSpring Cloud Gatewayå°ç¨äºæ§è¡è¿æ»¤å¨é»è¾åºåä¸ºâåç½®âåâåç½®âé¶æ®µï¼å·ææé«ä¼åçº§çè¿æ»¤å¨å°æ¯âåç½®âé¶æ®µçç¬¬ä¸ä¸ªï¼èâåç½®âé¶æ®µçæåä¸ä¸ªã\n\nExampleConfiguration.java.\n\n@Bean\n@Order(-1)\npublic GlobalFilter a() {\n    return (exchange, chain) -> {\n        log.info("first pre filter");\n        return chain.filter(exchange).then(Mono.fromRunnable(() -> {\n            log.info("third post filter");\n        }));\n    };\n}\n\n@Bean\n@Order(0)\npublic GlobalFilter b() {\n    return (exchange, chain) -> {\n        log.info("second pre filter");\n        return chain.filter(exchange).then(Mono.fromRunnable(() -> {\n            log.info("second post filter");\n        }));\n    };\n}\n\n@Bean\n@Order(1)\npublic GlobalFilter c() {\n    return (exchange, chain) -> {\n        log.info("third pre filter");\n        return chain.filter(exchange).then(Mono.fromRunnable(() -> {\n            log.info("first post filter");\n        }));\n    };\n}\n\n\n\n# 6.2 Forward Routing Filter\n\nForwardRoutingFilterå¨exchangeå±æ§ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTRä¸­æ¥æ¾URIãå¦æURLæä¸ä¸ªforwardscheme (å¦ forward:///localendpoint)ï¼å®å°ä½¿ç¨Spring DispatcherHandler æ¥å¤çè¯·æ±ãè¯·æ±URLçè·¯å¾é¨åå°è¢«è½¬åURLä¸­çè·¯å¾è¦çãæªä¿®æ¹çåå§URLå°éå å° ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTRå±æ§ä¸­çåè¡¨ä¸­ã\n\n\n# 6.3 LoadBalancerClient Filter\n\nLoadBalancerClientFilterå¨exchangeå±æ§ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTRä¸­æ¥æ¾URIãå¦æURLæä¸ä¸ªlbscheme (å¦ lb://myserviceï¼ï¼å®å°ä½¿ç¨Spring Cloud LoadBalancerClient å°åç§°ï¼å¨åä¸ä¸ªç¤ºä¾ä¸­ä¸º\'myserviceï¼è§£æä¸ºå®éä¸»æºåç«¯å£ï¼å¹¶æ¿æ¢URIãæªä¿®æ¹çåå§URLå°éå å°ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTRå±æ§ä¸­çåè¡¨ä¸­ãè¿æ»¤å¨è¿å°æ¥çServerWebExchangeUtils.GATEWAY_SCHEME_PREFIX_ATTRå±æ§ï¼æ¥çå®æ¯å¦ç­äºlb`ï¼ç¶ååºç¨ç¸åçè§åã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: myRoute\n        uri: lb://service\n        predicates:\n        - Path=/service/**\n\n\n> æ³¨æ é»è®¤æåµä¸ï¼å¦æä¸ä¸ªæå¡å®ä¾å¨LoadBalancer ä¸­æ²¡æåç°ï¼åè¿å503ãå¯ä»¥éè¿è®¾ç½®spring.cloud.gateway.loadbalancer.use404=trueæ¥è®©ç½ç®¡è¿å404.\n> \n> æ³¨æ\n\nä»LoadBalancerè¿åçServiceInstanceçisSecure å¼å°è¦çå¨å¯¹ç½å³ååºçè¯·æ±ä¸­æå®çschemeãä¾å¦ï¼å¦æè¯·æ±éè¿HTTPSè¿å¥ç½å³ï¼ä½ServiceInstanceè¡¨ç¤ºå®ä¸å®å¨ï¼åä¸æ¸¸è¯·æ±å°éè¿HTTPåè®®ãç¸åçæåµä¹éç¨ãä½æ¯ï¼å¦æå¨ç½å³éç½®ä¸­ä¸ºè·¯ç±æå®äºGATEWAY_SCHEME_PREFIX_ATTRï¼ååç¼å°è¢«å é¤ï¼å¹¶ä¸è·¯ç±URLçæçschemeå°è¦çServiceInstanceéç½®ã\n\n\n# 6.4 Netty Routing Filter\n\nå¦æä½äº ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTRå±æ§ä¸­çURLå·æhttp æhttps æ¨¡å¼ï¼åä¼è¿è¡Netty Routing Filterãå®ä½¿ç¨Netty HttpClient ååºä¸æ¸¸ä»£çè¯·æ±ãååºæ¾å¨ ServerWebExchangeUtils.CLIENT_RESPONSE_ATTR exchangeå±æ§ä¸­ï¼ä»¥ä¾¿å¨ä»¥åçè¿æ»¤å¨ä¸­ä½¿ç¨ãï¼æä¸ä¸ªå®éªé¶æ®µä¸éè¦Nettyçç¸åçåè½çFilterï¼WebClientHttpRoutingFilterï¼\n\n\n# 6.5 Netty Write Response Filter\n\nå¦æServerWebExchangeUtils.CLIENT_RESPONSE_ATTR exchangeå±æ§ä¸­å­å¨ Netty HttpClientResponseï¼åè¿è¡ NettyWriteResponseFilter ãå®å¨å¶ä»ææè¿æ»¤å¨å®æåå°ä»£çååºååç½å³å®¢æ·ç«¯ååºä¹åè¿è¡ãï¼æä¸ä¸ªä¸éè¦nettyçå®éªæ§çWebClientWriteResponseFilteræ§è¡ç¸åçåè½ï¼\n\n\n# 6.6 RouteToRequestUrl Filter\n\nå¦æServerWebExchangeUtils.GATEWAY_ROUTE_ATTR exchangeå±æ§ä¸­å­å¨Routeå¯¹è±¡ï¼RouteToRequestUrlFilterå°è¿è¡ãå®åºäºè¯·æ±URIåå»ºä¸ä¸ªæ°çURIï¼ä½¿ç¨Routeå¯¹è±¡çuriå±æ§è¿è¡æ´æ°ãæ°çURIè¢«æ¾ç½®å¨ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR exchangeå±æ§ä¸­ã\n\nå¦æè¯¥URIæä¸ä¸ªåç¼schemeï¼ä¾å¦lb:ws://serviceidï¼åä¼ä»è¯¥URIä¸­å¥ç¦»è¯¥ lb schemeï¼å¹¶å°å¶æ¾ç½®å¨ServerWebExchangeUtils.GATEWAY_SCHEME_PREFIX_ATTRä¸­ï¼ä»¥ä¾¿ç¨åå¨è¿æ»¤å¨é¾ä¸­ä½¿ç¨ã\n\n\n# 6.7 Websocket Routing Filter\n\nå¦æServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTRexchangeå±æ§ä¸­æ ws ã wssschemeï¼åWebsocket Routing Filterå°è¢«è¿è¡ãå®ä½¿ç¨Spring Web Socketåºç¡æ¨¡åå°Websocketè½¬åå°ä¸æ¸¸ã\n\nURIåç¼ä¸ºlbçWebsocketså¯ä»¥è¢«è´è½½åè¡¡ï¼å¦ lb:ws://serviceid.\n\n> æ³¨æ å¦æä½¿ç¨ SockJS ä½ä¸ºæ®éHTTPçfallbackï¼ååºéç½®æ®éHTTPè·¯ç±ä»¥åWebSocketè·¯ç±ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      # SockJS route\n      - id: websocket_sockjs_route\n        uri: http://localhost:3001\n        predicates:\n        - Path=/websocket/info/**\n      # Normwal Websocket route\n      - id: websocket_route\n        uri: ws://localhost:3001\n        predicates:\n        - Path=/websocket/**\n\n\n\n# 6.8 Gateway Metrics Filter\n\nè¦å¯ç¨ç½å³ææ ï¼è¯·å°spring-boot-starter-actuatoræ·»å ä¸ºé¡¹ç®ä¾èµé¡¹ãç¶åï¼é»è®¤æåµä¸ï¼åªè¦å±æ§spring.cloud.gateway.metrics.enabledæªè®¾ç½®ä¸ºfalseï¼ç½å³ææ è¿æ»¤å¨å°±ä¼è¿è¡ãæ­¤è¿æ»¤å¨æ·»å åä¸ºâgateway.requestsâçè®¡æ¶å¨ææ ï¼å¹¶å¸¦æä»¥ä¸æ è®°ï¼\n\n * routeId: The route id\n * routeUri: API å°è¢«è½¬åçURI\n * outcome: ç»æåç±»ä¾æ® HttpStatus.Series\n * status: è¿åclientçè¯·æ±çHttp Status\n\nè¿äºææ å¯ä»¥ä»/actuator/metrics/gateway.requestsä¸­è·åï¼å¯ä»¥å¾å®¹æå°ä¸Prometheuséæä»¥åå»ºGrafana dashboard.\n\n> æ³¨æ è¦å°pometheuså¯ç¨ï¼éè¦æ·»å  micrometer-registry-prometheusä¸ºé¡¹ç®ä¾èµã\n\n\n# 6.9 Making An Exchange As Routed\n\nç½å³è·¯ç±ServerWebExchangeä¹åï¼å®å°éè¿åExchangeå±æ§æ·»å gatewayAlreadyRoutedï¼å°è¯¥exchangeæ è®°ä¸ºâroutedâãä¸æ¦ä¸ä¸ªè¯·æ±è¢«æ è®°ä¸ºroutedï¼å¶ä»è·¯ç±è¿æ»¤å¨å°ä¸ä¼åæ¬¡è·¯ç±è¯¥è¯·æ±ï¼å°è·³è¿è¯¥è¿æ»¤å¨ãæä¸äºæ¹ä¾¿çæ¹æ³å¯ä»¥ç¨æ¥å°exchangeæ è®°ä¸ºroutedï¼æèæ£æ¥exchangeæ¯å¦å·²ç»routedã\n\n * ServerWebExchangeUtils.isAlreadyRouted æä¸ä¸ª ServerWebExchangeå¯¹è±¡å¹¶æ£æ¥å®æ¯å¦å·²"routed"\n * ServerWebExchangeUtils.setAlreadyRouted æä¸ä¸ª ServerWebExchange å¯¹è±¡å¹¶å°å¶æ è®°ä¸º"routed"\n\n\n# 7. TLS / SSL\n\nç½å³å¯ä»¥éè¿å¸¸è§ç Spring server configuration æ¥ä¾¦å¬HTTPSä¸çè¯·æ±ãä¾å­ï¼\n\napplication.yml.\n\nserver:\n  ssl:\n    enabled: true\n    key-alias: scg\n    key-store-password: scg1234\n    key-store: classpath:scg-keystore.p12\n    key-store-type: PKCS12\n\n\nç½å³è·¯ç±å¯ä»¥è·¯ç±å°HTTPåHTTPSåç«¯ãå¦æè·¯ç±å°HTTPSåç«¯ï¼åå¯ä»¥å°ç½å³éç½®ä¸ºä¿¡ä»»ææå·æè¯ä¹¦çä¸æ¸¸æå¡ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      httpclient:\n        ssl:\n          useInsecureTrustManager: true\n\n\nä¸å»ºè®®å¨çäº§ç¯å¢ä½¿ç¨ä¸å®å¨çä¿¡ä»»ç®¡çå¨ãå¯¹äºçäº§é¨ç½²ï¼å¯ä»¥ä½¿ç¨ä¸ç»å·²ç¥è¯ä¹¦éç½®ç½å³ï¼è¿äºè¯ä¹¦å¯ä»¥éè¿ä»¥ä¸æ¹å¼è¿è¡éç½®ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      httpclient:\n        ssl:\n          trustedX509Certificates:\n          - cert1.pem\n          - cert2.pem\n\n\nå¦æSpring Cloud Gatewayæªéç½®åä¿¡ä»»è¯ä¹¦ï¼åä½¿ç¨é»è®¤ä¿¡ä»»åºï¼å¯ä»¥ä½¿ç¨ç³»ç»å±æ§javax.net.ssl.trustStoreè¦çï¼ã\n\n\n# 7.1 TLS æ¡æ\n\nç½å³ç»´æ¤ä¸ä¸ªç¨äºè·¯ç±å°åç«¯çclientæ± ãå½éè¿HTTPSéä¿¡æ¶ï¼å®¢æ·ç«¯å¯å¨ä¸ä¸ªTLSæ¡æï¼å¶ä¸­å¯è½ä¼æå¾å¤è¶æ¶ãè¿äºè¶æ¶å¯ä»¥è¿æ ·éç½®ï¼æ¾ç¤ºé»è®¤å¼ï¼ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      httpclient:\n        ssl:\n          handshake-timeout-millis: 10000\n          close-notify-flush-timeout-millis: 3000\n          close-notify-read-timeout-millis: 0\n\n\n\n# 8. Configuration\n\nSpring Cloud Gatewayçéç½®ç±RouteDefinitionLocatorçéåé©±å¨ã\n\nRouteDefinitionLocator.java.\n\npublic interface RouteDefinitionLocator {\n    Flux<RouteDefinition> getRouteDefinitions();\n}\n\n\né»è®¤æåµä¸ï¼PropertiesRouteDefinitionLocatorä½¿ç¨Spring Bootç@ConfigurationPropertiesæºå¶å è½½å±æ§ã\n\nä»¥ä¸ä¸¤ä¸ªç¤ºä¾æ¯ç­æçï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setstatus_route\n        uri: http://example.org\n        filters:\n        - name: SetStatus\n          args:\n            status: 401\n      - id: setstatusshortcut_route\n        uri: http://example.org\n        filters:\n        - SetStatus=401\n\n\nå¯¹äºç½å³çå¤§é¨åç¨æ³ï¼éç½®æä»¶æ¹å¼æ¯å¤ç¨çï¼ä½ä¸äºçäº§ç¨ä¾æ´å»ºè®®ä»å¤é¨æºï¼å¦æ°æ®åºï¼å è½½éç½®ãæªæ¥çéç¨ç¢çæ¬å°æåºäºSpring Data Repositories ï¼å¦RedisãMongoDBåCassandraï¼çRouteDefinitionLocatorå®ç°ã\n\n\n# 8.1 Fluent Java Routes API\n\nä¸ºäºå¯ä»¥æ´ç®åå¨Javaä¸­éç½®ï¼å¨RouteLocatorBuilder beanä¸­å®ä¹äºä¸ä¸ªfluent APIã\n\nGatewaySampleApplication.java.\n\n// static imports from GatewayFilters and RoutePredicates\n@Bean\npublic RouteLocator customRouteLocator(RouteLocatorBuilder builder, ThrottleGatewayFilterFactory throttle) {\n    return builder.routes()\n            .route(r -> r.host("**.abc.org").and().path("/image/png")\n                .filters(f ->\n                        f.addResponseHeader("X-TestHeader", "foobar"))\n                .uri("http://httpbin.org:80")\n            )\n            .route(r -> r.path("/image/webp")\n                .filters(f ->\n                        f.addResponseHeader("X-AnotherHeader", "baz"))\n                .uri("http://httpbin.org:80")\n            )\n            .route(r -> r.order(-1)\n                .host("**.throttle.org").and().path("/get")\n                .filters(f -> f.filter(throttle.apply(1,\n                        1,\n                        10,\n                        TimeUnit.SECONDS)))\n                .uri("http://httpbin.org:80")\n            )\n            .build();\n}\n\n\nè¿ç§æ ·å¼è¿åè®¸ä½¿ç¨æ´å¤çèªå®ä¹æ­è¨ãç±RouteDefinitionLocator beanså®ä¹çæ­è¨ä½¿ç¨é»è¾ andç»åãéè¿ä½¿ç¨fluent Java APIï¼å¯ä»¥å¨ Predicateç±»ä¸ä½¿ç¨ and()ãor() ã negate()è¿ç®ç¬¦ã\n\n\n# 8.2 DiscoveryClient Route Definition Locator\n\nå¯ä»¥å°ç½å³éç½®ä¸ºåºäºä½¿ç¨å¼å®¹DiscoveryClientæ³¨åä¸­å¿æ³¨åçæå¡æ¥åå»ºè·¯ç±ã\n\nè¦å¯ç¨æ­¤åè½ï¼è¯·è®¾ç½®spring.cloud.gateway.discovery.locator.enabled=trueï¼å¹¶ç¡®ä¿DiscoveryClientå®ç°ä½äºclasspathä¸å¹¶å·²å¯ç¨ï¼å¦netflix eurekaãconsulæzookeeperï¼ã\n\n\n# 8.2.1 Configuring Predicates and Filters For DiscoveryClient Routes\n\né»è®¤æåµä¸ï¼ç½å³ä¸ºéè¿DiscoveryClientåå»ºçè·¯ç±å®ä¹åä¸ªæ­è¨åè¿æ»¤å¨ã\n\né»è®¤æ­è¨æ¯ä½¿ç¨/serviceId/**å®ä¹çpathæ­è¨ï¼å¶ä¸­serviceIdæ¯DiscoveryClientä¸­æå¡çIDã\n\né»è®¤è¿æ»¤å¨æ¯ä½¿ç¨æ­£åè¡¨è¾¾å¼ /serviceId/(?<remaining>.*)åæ¿æ¢ç/${remaining}è¿è¡éåãè¿åªæ¯å¨è¯·æ±è¢«åéå°ä¸æ¸¸ä¹åä»è·¯å¾ä¸­æªåæ service id ã\n\nå¯ä»¥éè¿è®¾ç½®spring.cloud.gateway.discovery.locator.predicates[x] and spring.cloud.gateway.discovery.locator.filters[y]æ¥å®ç°èªå®ä¹DiscoveryClientè·¯ç±ä½¿ç¨çæ­è¨and/orè¿æ»¤å¨ãå½ä½ è¿æ ·åæ¶ï¼å¦æä½ æ³è¦ä¿çè¿ä¸ªåè½ï¼ä½ éè¦ç¡®ä¿åæ¬ä¸é¢çé»è®¤æ­è¨åè¿æ»¤å¨ãä¸é¢æ¯è¿æ ·ä¸ä¸ªä¾å­ã\n\napplication.properties.\n\nspring.cloud.gateway.discovery.locator.predicates[0].name: Path\nspring.cloud.gateway.discovery.locator.predicates[0].args[pattern]: "\'/\'+serviceId+\'/**\'"\nspring.cloud.gateway.discovery.locator.predicates[1].name: Host\nspring.cloud.gateway.discovery.locator.predicates[1].args[pattern]: "\'**.foo.com\'"\nspring.cloud.gateway.discovery.locator.filters[0].name: Hystrix\nspring.cloud.gateway.discovery.locator.filters[0].args[name]: serviceId\nspring.cloud.gateway.discovery.locator.filters[1].name: RewritePath\nspring.cloud.gateway.discovery.locator.filters[1].args[regexp]: "\'/\' + serviceId + \'/(?<remaining>.*)\'"\nspring.cloud.gateway.discovery.locator.filters[1].args[replacement]: "\'/${remaining}\'"\n\n\n\n# 9. Reactor Netty Access Logs\n\nè®¾ç½® -Dreactor.netty.http.server.accessLogEnabled=true æ¥å¼å¯Reactor Netty access logsï¼æ³¨æå¿é¡»æ¯Java System Propertyèä¸æ¯Spring Boot propertyã\n\nlogging æ¨¡åä¹å¯ä»¥éè¿éç½®åç¬è¾åºä¸ä¸ªaccess logæä»¶ï¼ä¸é¢æ¯logbackçéç½®ä¾å­ï¼\n\nlogback.xml.\n\n <appender name="accessLog" class="ch.qos.logback.core.FileAppender">\n        <file>access_log.log</file>\n        <encoder>\n            <pattern>%msg%n</pattern>\n        </encoder>\n    </appender>\n    <appender name="async" class="ch.qos.logback.classic.AsyncAppender">\n        <appender-ref ref="accessLog" />\n    </appender>\n\n    <logger name="reactor.netty.http.server.AccessLog" level="INFO" additivity="false">\n        <appender-ref ref="async"/>\n    </logger>\n\n\n\n# 10. CORS Configuration\n\næä»¬å¯ä»¥éè¿éç½®ç½å³æ¥æ§å¶CORSè¡ä¸ºï¼å¨å±CORSéç½®æ¯ Spring Framework CorsConfigurationæ¨¡å¼çURL MAPã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      globalcors:\n        corsConfigurations:\n          \'[/**]\':\n            allowedOrigins: "http://docs.spring.io"\n            allowedMethods:\n            - GET\n\n\nä¾å­ä¸­å°åè®¸ä»docs.spring.ioååºçææGETè¯·æ±è¿è¡CORSè¯·æ±ã\n\n\n# 11. Actuator API\n\n/gatewayçactuatorç«¯ç¹åè®¸çè§Spring Cloud Gatewayåºç¨ç¨åºå¹¶ä¸ä¹äº¤äºãè¦è¿è¡è¿ç¨è®¿é®ï¼å¿é¡»å¨åºç¨ç¨åºå±æ§ä¸­æ´é²HTTPæJMX ç«¯å£ã\n\napplication.properties.\n\nmanagement.endpoint.gateway.enabled=true # default value\nmanagement.endpoints.web.exposure.include=gateway\n\n\n\n# 11.1 Retrieving route filters\n\n\n# 11.1.1 Global Filters\n\nè¦æ£ç´¢åºç¨äºææè·¯ç±ç [global filters]ï¼è¯·getè¯·æ± /actuator/gateway/globalfiltersãè¿åçç»æç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\n{\n  "org.springframework.cloud.gateway.filter.LoadBalancerClientFilter@77856cc5": 10100,\n  "org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4f6fd101": 10000,\n  "org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@32d22650": -1,\n  "org.springframework.cloud.gateway.filter.ForwardRoutingFilter@106459d9": 2147483647,\n  "org.springframework.cloud.gateway.filter.NettyRoutingFilter@1fbd5e0": 2147483647,\n  "org.springframework.cloud.gateway.filter.ForwardPathFilter@33a71d23": 0,\n  "org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@135064ea": 2147483637,\n  "org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@23c05889": 2147483646\n}\n\n\nè¿åç»æåå«å·²å°±ç»ªçglobal filtersçè¯¦ç»ä¿¡æ¯(å¦ org.springframework.cloud.gateway.filter.LoadBalancerClientFilter@77856cc5)ãå¯¹äºæ¯ä¸ªglobal filtersï¼è¿åç»æå­ç¬¦ä¸²å¯¹åºè¿æ»¤å¨é¾ä¸­çç¸åºé¡ºåºã\n\n\n# 11.1.2 Route Filters\n\nè¦æ£ç´¢åºç¨äºè·¯ç±ç [GatewayFilter factories] ï¼è¯·getè¯·æ±/actuator/gateway/routefiltersãè¿åç»æç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\n{\n  "[AddRequestHeaderGatewayFilterFactory@570ed9c configClass = AbstractNameValueGatewayFilterFactory.NameValueConfig]": null,\n  "[SecureHeadersGatewayFilterFactory@fceab5d configClass = Object]": null,\n  "[SaveSessionGatewayFilterFactory@4449b273 configClass = Object]": null\n}\n\n\nè¿åç»æåå«åºç¨äºææè·¯ç±çGatewayFilterçè¯¦ç»ä¿¡æ¯ãæ¾ç¤ºæ¯ä¸ªå·¥åæä¾å­ç¬¦ä¸²æ ¼å¼çç¸åºå¯¹è±¡ï¼ä¾å¦ï¼ [SecureHeadersGatewayFilterFactory@fceab5d configClass = Object]ï¼ãè¯·æ³¨æï¼nullå¼æ¯ç±äºendpoint controllerå®ç°ä¸å®æ´é æçï¼å ä¸ºå®å°è¯å¨filter chainä¸­è®¾ç½®å¯¹è±¡çé¡ºåºï¼è¿ä¸éç¨äºGatewayFilterå·¥åå¯¹è±¡ã\n\n\n# 11.2 Refreshing the route cache\n\nå¦æè¦æ¸çè·¯ç±çç¼å­ï¼è¯·POSTè¯·æ±/actuator/gateway/refreshãè¯¥è¯·æ±å°è¿åä¸ä¸ªæ²¡æbodyç200è¿åç ã\n\n\n# 11.3 Retrieving the routes defined in the gateway\n\nè¦æ£ç´¢ç½å³ä¸­å®ä¹çè·¯ç±ï¼åéGETè¯·æ±/actuator/gateway/routesï¼è¿åç»æå¦ä¸æç¤ºï¼\n\n[{\n  "route_id": "first_route",\n  "route_object": {\n    "predicate": "org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory$$Lambda$432/1736826640@1e9d7e7d",\n    "filters": [\n      "OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.PreserveHostHeaderGatewayFilterFactory$$Lambda$436/674480275@6631ef72, order=0}"\n    ]\n  },\n  "order": 0\n},\n{\n  "route_id": "second_route",\n  "route_object": {\n    "predicate": "org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory$$Lambda$432/1736826640@cd8d298",\n    "filters": []\n  },\n  "order": 0\n}]\n\n\nè¿åç»æä¸­åå«ç½å³ä¸­ææå®ä¹çè·¯ç±ä¿¡æ¯ï¼ä¸é¢è¡¨æ ¼ä¸­æè¿°äºè¿åç»æä¿¡æ¯ï¼\n\nPATH                     TYPE     DESCRIPTION\nroute_id                 String   The route ID.\nroute_object.predicate   Object   The route predicate.\nroute_object.filters     Array    The GatewayFilter factories applied to the route.\norder                    Number   The route order.\n\n\n# 11.4 Retrieving information about a particular route\n\nè¦è·ååä¸ªè·¯ç±çä¿¡æ¯ï¼åéGETè¯·æ± /actuator/gateway/routes/{id} (å¦ï¼ /actuator/gateway/routes/first_route)ï¼è¿åç»æå¦ä¸æç¤ºï¼\n\n{\n  "id": "first_route",\n  "predicates": [{\n    "name": "Path",\n    "args": {"_genkey_0":"/first"}\n  }],\n  "filters": [],\n  "uri": "http://www.uri-destination.org",\n  "order": 0\n}]\n\n\nä¸é¢è¡¨æ ¼ä¸­æè¿°äºè¿åç»æä¿¡æ¯ï¼\n\nPATH         TYPE     DESCRIPTION\nid           String   The route ID.\npredicates   Array    The collection of route predicates. Each item defines the\n                      name and the arguments of a given predicate.\nfilters      Array    The collection of filters applied to the route.\nuri          String   The destination URI of the route.\norder        Number   The route order.\n\n\n# 11.5 Creating and deleting a particular route\n\nè¦åå»ºä¸ä¸ªè·¯ç±ï¼åéPOSTè¯·æ± /gateway/routes/{id_route_to_create}ï¼åæ°ä¸ºJSONç»æï¼å·ä½åæ°æ°æ®ç»æåèä¸é¢ç« èã\n\nè¦å é¤ä¸ä¸ªè·¯ç±ï¼åé DELETEè¯·æ± /gateway/routes/{id_route_to_delete}ã\n\n\n# 11.6 Recap: list of all endpoints\n\nä¸è¡¨æ»ç»äºSpring Cloud Gateway actuator endpointsãæ³¨æï¼æ¯ä¸ªendpointé½æ¯/actuator/gatewayä½ä¸ºåºæ¬è·¯å¾ã\n\nID              HTTP METHOD   DESCRIPTION\nglobalfilters   GET           Displays the list of global filters applied to the routes.\nroutefilters    GET           Displays the list of GatewayFilter factories applied to a\n                              particular route.\nrefresh         POST          Clears the routes cache.\nroutes          GET           Displays the list of routes defined in the gateway.\nroutes/{id}     GET           Displays information about a particular route.\nroutes/{id}     POST          Adds a new route to the gateway.\nroutes/{id}     DELETE        Removes an existing route from the gateway.\n\n\n# 12. Developer Guide\n\nTODO: overview of writing custom integrations\n\n\n# 12.1 Writing Custom Route Predicate Factories\n\nTODO: document writing Custom Route Predicate Factories\n\n\n# 12.2 Writing Custom GatewayFilter Factories\n\nå¦æè¦èªå®ä¹ä¸ä¸ªGatewayFilterï¼éè¦å®ç°GatewayFilterFactoryãä¸é¢æ¯ä¸ä¸ªä½ éè¦éæçæ½è±¡ç±» AbstractGatewayFilterFactoryã\n\nPreGatewayFilterFactory.java.\n\npublic class PreGatewayFilterFactory extends AbstractGatewayFilterFactory<PreGatewayFilterFactory.Config> {\n\n    public PreGatewayFilterFactory() {\n        super(Config.class);\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        // grab configuration from Config object\n        return (exchange, chain) -> {\n            //If you want to build a "pre" filter you need to manipulate the\n            //request before calling chain.filter\n            ServerHttpRequest.Builder builder = exchange.getRequest().mutate();\n            //use builder to manipulate the request\n            return chain.filter(exchange.mutate().request(request).build());\n        };\n    }\n\n    public static class Config {\n        //Put the configuration properties for your filter here\n    }\n\n}\n\n\nPostGatewayFilterFactory.java.\n\npublic class PostGatewayFilterFactory extends AbstractGatewayFilterFactory<PostGatewayFilterFactory.Config> {\n\n    public PostGatewayFilterFactory() {\n        super(Config.class);\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        // grab configuration from Config object\n        return (exchange, chain) -> {\n            return chain.filter(exchange).then(Mono.fromRunnable(() -> {\n                ServerHttpResponse response = exchange.getResponse();\n                //Manipulate the response in some way\n            }));\n        };\n    }\n\n    public static class Config {\n        //Put the configuration properties for your filter here\n    }\n\n}\n\n\n\n# 12.3 Writing Custom Global Filters\n\nTODO: document writing Custom Global Filters\n\n\n# 12.4 Writing Custom Route Locators and Writers\n\nTODO: document writing Custom Route Locators and Writers',normalizedContent:'# spring cloud gateway ä¸­æå®ç½ææ¡£\n\n\n# ææ¡£çæ¬ 2.1.0\n\nç®å½\n\n1. how to include spring cloud gateway\n2. glossary\n3. how it works\n4. route predicate factories\n5. gatewayfilter factories\n6. global filters\n7. tls / ssl\n8. configuration\n9. reactor netty access logs\n10. cors configuration\n11. actuator api\n12. developer guide\n\n\nè¯¥é¡¹ç®æä¾äºä¸ä¸ªå»ºç«å¨spring ecosystemä¹ä¸çapiç½å³ï¼åæ¬ï¼spring 5ï¼spring boot 2åproject reactorãspring cloud gatewayæ¨å¨æä¾ä¸ç§ç®åèææçæ¹å¼æ¥å¯¹apiè¿è¡è·¯ç±ï¼å¹¶ä¸ºä»ä»¬æä¾åé¢ï¼ä¾å¦ï¼å®å¨æ§ï¼çæ§/ææ  åå¼¹æ§ç­ã\n\n\n# 1. å¦ä½å¨å·¥ç¨ä¸­å¼ç¨spring cloud gateway\n\nè¦å¨é¡¹ç®ä¸­å¼å¥spring cloud gatewayï¼éè¦å¼ç¨ group org.springframework.cloud å artifact idä¸ºspring-cloud-starter-gateway starterãææ°çspring cloud release æå»ºä¿¡æ¯ï¼è¯·åéspring cloud project pageã\n\nå¦æåºç¨äºè¯¥starterï¼ä½ç±äºæç§åå ä¸å¸æå¯ç¨ç½å³ï¼è¯·è¿è¡è®¾ç½®spring.cloud.gateway.enabled=falseã\n\n> éè¦ spring cloud gatewayä¾èµspring bootåspring webfluxæä¾çnetty runtimeãå®ä¸è½å¨ä¼ ç»çservletå®¹å¨ä¸­å·¥ä½ææå»ºä¸ºwar\n\n\n# 2. è¯æ±è¡¨\n\n * route è·¯ç±ï¼gatewayçåºæ¬æå»ºæ¨¡åãå®ç±idãç®æ uriãæ­è¨éååè¿æ»¤å¨éåç»æãå¦æèåæ­è¨ç»æä¸ºçï¼åå¹éå°è¯¥è·¯ç±ã\n * predicate æ­è¨ï¼è¿æ¯ä¸ä¸ªjava 8 function predicateãè¾å¥ç±»åæ¯ spring framework serverwebexchangeãè¿åè®¸å¼åäººåå¯ä»¥å¹éæ¥èªhttpè¯·æ±çä»»ä½åå®¹ï¼ä¾å¦headeræåæ°ã\n * filter è¿æ»¤å¨ï¼è¿äºæ¯ä½¿ç¨ç¹å®å·¥åæå»ºç spring frameworkgatewayfilterå®ä¾ãæä»¥å¯ä»¥å¨è¿åè¯·æ±ä¹åæä¹åä¿®æ¹è¯·æ±åååºçåå®¹ã\n\n\n# 3. å¦ä½å·¥ä½ç\n\n\n\nspring cloud gateway diagram\n\nå®¢æ·ç«¯åspring cloud gatewayååºè¯·æ±ãå¦ægateway handler mappingç¡®å®è¯·æ±ä¸è·¯ç±å¹éï¼åå°å¶åéå°gateway web handlerãæ­¤handleréè¿ç¹å®äºè¯¥è¯·æ±çè¿æ»¤å¨é¾å¤çè¯·æ±ãå¾ä¸­filtersè¢«èçº¿ååçåå æ¯filterså¯ä»¥å¨åéä»£çè¯·æ±ä¹åæä¹åæ§è¡é»è¾ãåæ§è¡ææâpre filterâé»è¾ï¼ç¶åè¿è¡è¯·æ±ä»£çãå¨è¯·æ±ä»£çæ§è¡å®åï¼æ§è¡âpost filterâé»è¾ã\n\n> æ³¨æ httpåhttps urié»è®¤ç«¯å£è®¾ç½®æ¯80å443ã\n\n\n# 4. è·¯ç±æ­è¨factories\n\nspring cloud gatewayå°è·¯ç±ä½ä¸ºspring webflux handlermappingåºç¡ç»æçä¸é¨åè¿è¡å¹éãspring cloud gatewayåå«è®¸å¤åç½®çè·¯ç±æ­è¨factoriesãè¿äºæ­è¨é½å¹éhttpè¯·æ±çä¸åå±æ§ãå¤ä¸ªè·¯ç±æ­è¨factorieså¯ä»¥éè¿ and ç»åä½¿ç¨ã\n\n\n# 4.1 after è·¯ç±æ­è¨ factory\n\nafter route predicate factoryéç¨ä¸ä¸ªåæ°ââæ¥ææ¶é´ãå¨è¯¥æ¥ææ¶é´ä¹ååççè¯·æ±é½å°è¢«å¹éã\n\napplication.yml\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: after_route\n        uri: http://example.org\n        predicates:\n        - after=2017-01-20t17:42:47.789-07:00[america/denver]\n\n\n\n# 4.2 before è·¯ç±æ­è¨ factory\n\nbefore route predicate factoryéç¨ä¸ä¸ªåæ°ââæ¥ææ¶é´ãå¨è¯¥æ¥ææ¶é´ä¹ååççè¯·æ±é½å°è¢«å¹éã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: before_route\n        uri: http://example.org\n        predicates:\n        - before=2017-01-20t17:42:47.789-07:00[america/denver]\n\n\n\n# 4.3 between è·¯ç±æ­è¨ factory\n\nbetween è·¯ç±æ­è¨ factoryæä¸¤ä¸ªåæ°ï¼datetime1ådatetime2ãå¨datetime1ådatetime2ä¹é´çè¯·æ±å°è¢«å¹éãdatetime2åæ°çå®éæ¶é´å¿é¡»å¨datetime1ä¹åã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: between_route\n        uri: http://example.org\n        predicates:\n        - between=2017-01-20t17:42:47.789-07:00[america/denver], 2017-01-21t17:42:47.789-07:00[america/denver]\n\n\n\n# 4.4 cookie è·¯ç±æ­è¨ factory\n\ncookie è·¯ç±æ­è¨ factoryæä¸¤ä¸ªåæ°ï¼cookieåç§°åæ­£åè¡¨è¾¾å¼ãè¯·æ±åå«æ¬¡cookieåç§°ä¸æ­£åè¡¨è¾¾å¼ä¸ºççå°ä¼è¢«å¹éã\n\napplication.yml\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: cookie_route\n        uri: http://example.org\n        predicates:\n        - cookie=chocolate, ch.p\n\n\n\n# 4.5 header è·¯ç±æ­è¨ factory\n\nheader è·¯ç±æ­è¨ factoryæä¸¤ä¸ªåæ°ï¼headeråç§°åæ­£åè¡¨è¾¾å¼ãè¯·æ±åå«æ¬¡headeråç§°ä¸æ­£åè¡¨è¾¾å¼ä¸ºççå°ä¼è¢«å¹éã\n\napplication.yml.\n\nspring:\n cloud:\n   gateway:\n     routes:\n     - id: header_route\n       uri: http://example.org\n       predicates:\n       - header=x-request-id, \\d+\n\n\n\n# 4.6 host è·¯ç±æ­è¨ factory\n\nhost è·¯ç±æ­è¨ factoryåæ¬ä¸ä¸ªåæ°ï¼host nameåè¡¨ãä½¿ç¨antè·¯å¾å¹éè§åï¼.ä½ä¸ºåéç¬¦ã application.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: host_route\n        uri: http://example.org\n        predicates:\n        - host=**.somehost.org,**.anotherhost.org\n\n\n\n# 4.7 method è·¯ç±æ­è¨ factory\n\nmethod è·¯ç±æ­è¨ factoryåªåå«ä¸ä¸ªåæ°: éè¦å¹éçhttpè¯·æ±æ¹å¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: method_route\n        uri: http://example.org\n        predicates:\n        - method=get\n\n\næægetè¯·æ±é½å°è¢«è·¯ç±\n\n\n# 4.8 path è·¯ç±æ­è¨ factory\n\npath è·¯ç±æ­è¨ factory æ2ä¸ªåæ°: ä¸ä¸ªspring pathmatcherè¡¨è¾¾å¼åè¡¨åå¯ématchoptionaltrailingseparatoræ è¯ .\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: host_route\n        uri: http://example.org\n        predicates:\n        - path=/foo/{segment},/bar/{segment}\n\n\nä¾å¦: /foo/1 or /foo/bar or /bar/bazçè¯·æ±é½å°è¢«å¹é\n\nuri æ¨¡æ¿åé (å¦ä¸ä¾ä¸­ç segment ) å°ä»¥mapçæ¹å¼ä¿å­äºserverwebexchange.getattributes() keyä¸ºserverwebexchangeutils.uri_template_variables_attribute. è¿äºå¼å°å¨gatewayfilter factoriesä½¿ç¨\n\nå¯ä»¥ä½¿ç¨ä»¥ä¸æ¹æ³æ¥æ´æ¹ä¾¿å°è®¿é®è¿äºåéã\n\nmap<string, string> urivariables = serverwebexchangeutils.getpathpredicatevariables(exchange);\n\nstring segment = urivariables.get("segment");\n\n\n\n# 4.9 query è·¯ç±æ­è¨ factory\n\nquery è·¯ç±æ­è¨ factory æ2ä¸ªåæ°: å¿éé¡¹ param åå¯éé¡¹ regexp.\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: query_route\n        uri: http://example.org\n        predicates:\n        - query=baz\n\n\nååå«äºè¯·æ±åæ° bazçé½å°è¢«å¹éã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: query_route\n        uri: http://example.org\n        predicates:\n        - query=foo, ba.\n\n\nå¦æè¯·æ±åæ°éåå«fooåæ°ï¼å¹¶ä¸å¼å¹éä¸ºba. è¡¨è¾¾å¼ï¼åå°ä¼è¢«è·¯ç±ï¼å¦ï¼bar and baz\n\n\n# 4.10 remoteaddr è·¯ç±æ­è¨ factory\n\nremoteaddr è·¯ç±æ­è¨ factoryçåæ°ä¸º ä¸ä¸ªcidrç¬¦å·ï¼ipv4æipv6ï¼å­ç¬¦ä¸²çåè¡¨ï¼æå°å¼ä¸º1ï¼ä¾å¦192.168.0.1/16ï¼å¶ä¸­192.168.0.1æ¯ipå°åå¹¶ä¸16æ¯å­ç½æ©ç ï¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: remoteaddr_route\n        uri: http://example.org\n        predicates:\n        - remoteaddr=192.168.1.1/24\n\n\nå¦æè¯·æ±çremote address ä¸º 192.168.1.10åå°è¢«è·¯ç±\n\n\n# 4.10.1 ä¿®æ¹è¿ç¨å°åçè§£ææ¹å¼\n\né»è®¤æåµä¸ï¼remoteaddr è·¯ç±æ­è¨ factoryä½¿ç¨ä¼ å¥è¯·æ±ä¸­çremote addressãå¦æspring cloud gatewayä½äºä»£çå±åé¢ï¼åå¯è½ä¸å®éå®¢æ·ç«¯ipå°åä¸å¹éã\n\nå¯ä»¥éè¿è®¾ç½®èªå®ä¹remoteaddressresolveræ¥èªå®ä¹è§£æè¿ç¨å°åçæ¹å¼ãspring cloud gatewayç½å³éå¸¦ä¸ä¸ªéé»è®¤è¿ç¨å°åè§£æç¨åºï¼å®åºäºx-forwarded-for header, xforwardedremoteaddressresolver.\n\nxforwardedremoteaddressresolver æä¸¤ä¸ªéææé å½æ°æ¹æ³ï¼éç¨ä¸åçå®å¨æ¹æ³ï¼\n\n 1. xforwardedremoteaddressresolver:ï¼trustallè¿åä¸ä¸ªremoteaddressresolverï¼å®å§ç»éç¨x-forwarded-forå¤´ä¸­æ¾å°çç¬¬ä¸ä¸ªipå°åãè¿ç§æ¹æ³å®¹æåå°æ¬ºéªï¼å ä¸ºæ¶æå®¢æ·ç«¯å¯è½ä¼ä¸ºè§£æç¨åºæ¥åçâx-forwarded-forâè®¾ç½®åå§å¼ã\n 2. xforwardedremoteaddressresolver:ï¼maxtrustedindexè·åä¸ä¸ªç´¢å¼ï¼è¯¥ç´¢å¼ä¸å¨spring cloudç½å³åè¿è¡çåä¿¡ä»»åºç¡è®¾æ½æ°éç¸å³ãä¾å¦ï¼å¦æspringcloudgatewayåªè½éè¿haproxyè®¿é®ï¼ååºä½¿ç¨å¼1ãå¦æå¨è®¿é®spring cloud gatewayä¹åéè¦ä¸¤ä¸ªåä¿¡ä»»çåºç¡æ¶æè·ç¹ï¼é£ä¹åºè¯¥ä½¿ç¨2ã\n\nç»å®ä»¥ä¸çheaderå¼ï¼\n\nx-forwarded-for: 0.0.0.1, 0.0.0.2, 0.0.0.3\n\n\nä¸é¢ç` maxtrustedindexå¼å°çæä»¥ä¸è¿ç¨å°å:\n\nmaxtrustedindex          result\n[integer.min_value,0]    (invalid, illegalargumentexception during initialization)\n1                        0.0.0.3\n2                        0.0.0.2\n3                        0.0.0.1\n[4, integer.max_value]   0.0.0.1\n\njava éç½®æ¹å¼:\n\ngatewayconfig.java\n\nremoteaddressresolver resolver = xforwardedremoteaddressresolver\n    .maxtrustedindex(1);\n\n...\n\n.route("direct-route",\n    r -> r.remoteaddr("10.1.1.1", "10.10.1.1/24")\n        .uri("https://downstream1")\n.route("proxied-route",\n    r -> r.remoteaddr(resolver,  "10.10.1.1", "10.10.1.1/24")\n        .uri("https://downstream2")\n)\n\n\n\n# 5. gatewayfilter factories\n\nè¿æ»¤å¨åè®¸ä»¥æç§æ¹å¼ä¿®æ¹ä¼ å¥çhttpè¯·æ±æè¿åçhttpååºãè¿æ»¤å¨çä½ç¨åæ¯æäºç¹å®è·¯ç±ãspring cloud gatewayåæ¬è®¸å¤åç½®ç filterå·¥åã\n\næ³¨æï¼æå³å¦ä½ä½¿ç¨ä»¥ä¸ä»»ä½è¿æ»¤å¨çæ´è¯¦ç»ç¤ºä¾ï¼è¯·æ¥çunit tests.ã\n\n\n# 5.1 addrequestheader gatewayfilter factory\n\néç¨ä¸å¯¹åç§°åå¼ä½ä¸ºåæ° application.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: add_request_header_route\n        uri: http://example.org\n        filters:\n        - addrequestheader=x-request-foo, bar\n\n\nå¯¹äºææå¹éçè¯·æ±ï¼è¿å°åä¸æ¸¸è¯·æ±çå¤´ä¸­æ·»å  x-request-foo:bar header\n\n\n# 5.2 addrequestparameter gatewayfilter factory\n\néç¨ä¸å¯¹åç§°åå¼ä½ä¸ºåæ° application.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: add_request_parameter_route\n        uri: http://example.org\n        filters:\n        - addrequestparameter=foo, bar\n\n\nå¯¹äºææå¹éçè¯·æ±ï¼è¿å°åä¸æ¸¸è¯·æ±æ·»å foo=baræ¥è¯¢å­ç¬¦ä¸²\n\n\n# 5.3 addresponseheader gatewayfilter factory\n\néç¨ä¸å¯¹åç§°åå¼ä½ä¸ºåæ°\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: add_request_header_route\n        uri: http://example.org\n        filters:\n        - addresponseheader=x-response-foo, bar\n\n\nå¯¹äºææå¹éçè¯·æ±ï¼è¿ä¼å°x-response-foo:barå¤´æ·»å å°ä¸æ¸¸ååºçheaderä¸­\n\n\n# 5.4 hystrix gatewayfilter factory\n\nhystrix æ¯netflixå¼æºçæ­è·¯å¨ç»ä»¶ãhystrix gatewayfilteråè®¸ä½ åç½å³è·¯ç±å¼å¥æ­è·¯å¨ï¼ä¿æ¤ä½ çæå¡ä¸åçº§èæéçå½±åï¼å¹¶åè®¸ä½ å¨ä¸æ¸¸æéæ¶æä¾fallbackååºã\n\nè¦å¨é¡¹ç®ä¸­å¯ç¨hystrixç½å³è¿æ»¤å¨ï¼éè¦æ·»å å¯¹ spring-cloud-starter-netflix-hystrixçä¾èµ spring cloud netflix.\n\nhystrix gatewayfilter factory éè¦ä¸ä¸ªnameåæ°ï¼å³hystrixcommandçåç§°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: hystrix_route\n        uri: http://example.org\n        filters:\n        - hystrix=mycommandname\n\n\nè¿å°å©ä½çè¿æ»¤å¨åè£å¨å½ä»¤åä¸ºâmycommandnameâçhystrixcommandä¸­ã\n\nhystrixè¿æ»¤å¨è¿å¯ä»¥æ¥åå¯éçfallbackuri åæ°ãç®åï¼ä»æ¯æforward: é¢è®¾çuriï¼å¦æè°ç¨fallbackï¼åè¯·æ±å°è½¬åå°ä¸uriå¹éçæ§å¶å¨ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: hystrix_route\n        uri: lb://backing-service:8088\n        predicates:\n        - path=/consumingserviceendpoint\n        filters:\n        - name: hystrix\n          args:\n            name: fallbackcmd\n            fallbackuri: forward:/incaseoffailureusethis\n        - rewritepath=/consumingserviceendpoint, /backingserviceendpoint\n\n\nå½è°ç¨hystrix fallbackæ¶ï¼è¿å°è½¬åå°/incaseoffailureusethis uriãæ³¨æï¼è¿ä¸ªç¤ºä¾è¿æ¼ç¤ºäºï¼å¯éï¼éè¿ç®æ uriä¸ç\'lb`åç¼,ä½¿ç¨spring cloud netflix ribbon å®¢æ·ç«¯è´è½½åè¡¡ã\n\nä¸»è¦åºæ¯æ¯ä½¿ç¨fallbackuri å°ç½å³åºç¨ç¨åºä¸­çåé¨æ§å¶å¨æå¤çç¨åºãä½æ¯ï¼ä¹å¯ä»¥å°è¯·æ±éæ°è·¯ç±å°å¤é¨åºç¨ç¨åºä¸­çæ§å¶å¨æå¤çç¨åºï¼å¦ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: ingredients\n        uri: lb://ingredients\n        predicates:\n        - path=//ingredients/**\n        filters:\n        - name: hystrix\n          args:\n            name: fetchingredients\n            fallbackuri: forward:/fallback\n      - id: ingredients-fallback\n        uri: http://localhost:9994\n        predicates:\n        - path=/fallback\n\n\nå¨æ¬ä¾ä¸­ï¼gatewayåºç¨ç¨åºä¸­æ²¡æ fallback å®ç°ï¼ä½æ¯å¦ä¸ä¸ªåºç¨ç¨åºä¸­æä¸ä¸ªæ¥å£å®ç°ï¼æ³¨åä¸ºâhttp://localhost:9994âã\n\nå¨å°è¯·æ±è½¬åå°fallbackçæåµä¸ï¼hystrix gatewayè¿æ»¤è¿æ¯æç´æ¥æåºthrowable ãå®è¢«ä½ä¸ºserverwebexchangeutils.hystrix_execution_exception_attrå±æ§æ·»å å°serverwebexchangeä¸­ï¼å¯ä»¥å¨å¤çç½å³åºç¨ç¨åºä¸­çfallbackæ¶ä½¿ç¨ã\n\nå¯¹äºå¤é¨æ§å¶å¨/å¤çç¨åºæ¹æ¡ï¼å¯ä»¥æ·»å å¸¦æå¼å¸¸è¯¦ç»ä¿¡æ¯çheaderãå¯ä»¥å¨ fallbackheaders gatewayfilter factory section.ä¸­æ¾å°æå³å®çæ´å¤ä¿¡æ¯ã\n\nhystrixéç½®åæ°ï¼å¦ timeoutsï¼å¯ä»¥ä½¿ç¨å¨å±é»è®¤å¼éç½®ï¼ä¹å¯ä»¥ä½¿ç¨hystrix wikiä¸­æè¿°å±æ§è¿è¡éç½®ã\n\nè¦ä¸ºä¸é¢çç¤ºä¾è·¯ç±è®¾ç½®5ç§è¶æ¶ï¼å°ä½¿ç¨ä»¥ä¸éç½®ï¼\n\napplication.yml.\n\nhystrix.command.fallbackcmd.execution.isolation.thread.timeoutinmilliseconds: 5000\n\n\n\n# 5.5 fallbackheaders gatewayfilter factory\n\nfallbackheadersåè®¸å¨è½¬åå°å¤é¨åºç¨ç¨åºä¸­çfallbackuriçè¯·æ±çheaderä¸­æ·»å hystrixå¼å¸¸è¯¦ç»ä¿¡æ¯ï¼å¦ä¸æç¤ºï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: ingredients\n        uri: lb://ingredients\n        predicates:\n        - path=//ingredients/**\n        filters:\n        - name: hystrix\n          args:\n            name: fetchingredients\n            fallbackuri: forward:/fallback\n      - id: ingredients-fallback\n        uri: http://localhost:9994\n        predicates:\n        - path=/fallback\n        filters:\n        - name: fallbackheaders\n          args:\n            executionexceptiontypeheadername: test-header\n\n\nå¨æ¬ä¾ä¸­ï¼å¨è¿è¡hystrixcommandåçæ§è¡å¼å¸¸åï¼è¯·æ±å°è¢«è½¬åå° localhost:9994åºç¨ç¨åºä¸­ç fallbackç»ç«¯æç¨åºãå¼å¸¸ç±»åãæ¶æ¯ï¼å¦æå¯ç¨ï¼cause exceptionç±»ååæ¶æ¯çå¤´ï¼å°ç±fallbackheaders filteræ·»å å°è¯¥è¯·æ±ä¸­ã\n\néè¿è®¾ç½®ä¸é¢ååºçåæ°å¼åå¶é»è®¤å¼ï¼å¯ä»¥å¨éç½®ä¸­è¦çheadersçåç§°ï¼\n\n * executionexceptiontypeheadername ("execution-exception-type")\n * executionexceptionmessageheadername ("execution-exception-message")\n * rootcauseexceptiontypeheadername ("root-cause-exception-type")\n * rootcauseexceptionmessageheadername ("root-cause-exception-message")\n\nhystrix å¦ä½å®ç°çæ´å¤ç»èå¯ä»¥åè hystrix gatewayfilter factory section.\n\n\n# 5.6 prefixpath gatewayfilter factory\n\nprefixpath gatewayfilter åªæä¸ä¸ª prefix åæ°.\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: prefixpath_route\n        uri: http://example.org\n        filters:\n        - prefixpath=/mypath\n\n\nè¿å°ç»ææå¹éè¯·æ±çè·¯å¾å åç¼/mypathãå æ­¤ï¼å/helloåéçè¯·æ±å°åéå°/mypath/helloã\n\n\n# 5.7 preservehostheader gatewayfilter factory\n\nè¯¥filteræ²¡æåæ°ãè®¾ç½®äºè¯¥filteråï¼gatewayfilterå°ä¸ä½¿ç¨ç±httpå®¢æ·ç«¯ç¡®å®çhost header ï¼èæ¯åéåå§host header ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: preserve_host_route\n        uri: http://example.org\n        filters:\n        - preservehostheader\n\n\n\n# 5.8 requestratelimiter gatewayfilter factory\n\nrequestratelimiterä½¿ç¨ratelimiterå®ç°æ¯å¦åè®¸ç»§ç»­æ§è¡å½åè¯·æ±ãå¦æä¸åè®¸ç»§ç»­æ§è¡ï¼åè¿åhttp 429 - too many requests ï¼é»è®¤æåµä¸ï¼ã\n\nè¿ä¸ªè¿æ»¤å¨å¯ä»¥éç½®ä¸ä¸ªå¯éçkeyresolver åæ°årate limiteråæ°ï¼è§ä¸æï¼ã\n\nkeyresolver æ¯ keyresolver æ¥å£çå®ç°ç±».å¨éç½®ä¸­ï¼æåç§°ä½¿ç¨spelå¼ç¨beanã#{@mykeyresolver} æ¯å¼ç¨åä¸º\'mykeyresolver\'çbeançspelè¡¨è¾¾å¼ã\n\nkeyresolver.java.\n\npublic interface keyresolver {\n    mono<string> resolve(serverwebexchange exchange);\n}\n\n\nkeyresolveræ¥å£åè®¸ä½¿ç¨å¯ææç­ç¥æ¥æ´¾çéå¶è¯·æ±çkeyãå¨æªæ¥çéç¨ç¢çæ¬ä¸­ï¼å°æä¸äºkeyresolverå®ç°ã\n\nkeyresolverçé»è®¤å®ç°æ¯principalnamekeyresolverï¼å®ä»serverwebexchangeæ£ç´¢principalå¹¶è°ç¨principal.getname()ã\n\né»è®¤æåµä¸ï¼å¦ækeyresolver æ²¡æè·åå°keyï¼è¯·æ±å°è¢«æç»ãæ­¤è¡ä¸ºå¯ä»¥ä½¿ç¨ spring.cloud.gateway.filter.request-rate-limiter.deny-empty-key (true or false) å spring.cloud.gateway.filter.request-rate-limiter.empty-key-status-codeå±æ§è¿è¡è°æ´ã\n\n> è¯´æ æ æ³éè¿"shortcut" éç½®requestratelimiterãä»¥ä¸ç¤ºä¾æ æ\n\napplication.properties.\n\n# invalid shortcut configuration\nspring.cloud.gateway.routes[0].filters[0]=requestratelimiter=2, 2, #{@userkeyresolver}\n\n\n\n# 5.8.1 redis ratelimiter\n\nredisçå®ç°åºäº stripeå®ç°ãå®éè¦ä½¿ç¨ spring-boot-starter-data-redis-reactive spring boot starterã\n\nä½¿ç¨çç®æ³æ¯token bucket algorithm.ã\n\nredis-rate-limiter.replenishrateæ¯ä½ åè®¸ç¨æ·æ¯ç§æ§è¡å¤å°è¯·æ±ï¼èä¸¢å¼ä»»ä½è¯·æ±ãè¿æ¯ä»¤çæ¡¶çå¡«åéçã\n\n``redis-rate-limiter.burstcapacity`æ¯åè®¸ç¨æ·å¨ä¸ç§éåæ§è¡çæå¤§è¯·æ±æ°ãè¿æ¯ä»¤çæ¡¶å¯ä»¥ä¿å­çä»¤çæ°ãå°æ­¤å¼è®¾ç½®ä¸ºé¶å°é»æ­¢ææè¯·æ±ã\n\nç¨³å®éçæ¯éè¿å¨replenishrate å burstcapacityä¸­è®¾ç½®ç¸åçå¼æ¥å®ç°çãå¯éè¿è®¾ç½®burstcapacityé«äºreplenishrateæ¥åè®¸ä¸´æ¶çªåæµæµªãå¨è¿ç§æåµä¸ï¼éæµå¨éè¦å¨ä¸¤æ¬¡çªåä¹é´çåºä¸æ®µæ¶é´ï¼æ ¹æ®replenishrateï¼ï¼å ä¸ºè¿ç»­ä¸¤æ¬¡çªåå°å¯¼è´è¯·æ±ä¸¢å¤± (http 429 - too many requests).ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: requestratelimiter_route\n        uri: http://example.org\n        filters:\n        - name: requestratelimiter\n          args:\n            redis-rate-limiter.replenishrate: 10\n            redis-rate-limiter.burstcapacity: 20\n\n\nconfig.java.\n\n@bean\nkeyresolver userkeyresolver() {\n    return exchange -> mono.just(exchange.getrequest().getqueryparams().getfirst("user"));\n}\n\n\nè¿å®ä¹äºæ¯ä¸ªç¨æ·10ä¸ªè¯·æ±çéå¶ãåè®¸20ä¸ªçªåï¼ä½ä¸ä¸ç§åªæ10ä¸ªè¯·æ±å¯ç¨ãkeyresolveræ¯ä¸ä¸ªç®åçè·åuserè¯·æ±åæ°çå·¥å·ï¼æ³¨æï¼ä¸å»ºè®®ç¨äºçäº§ï¼ã\n\néæµå¨ä¹å¯ä»¥å®ä¹ä¸ºratelimiteræ¥å£çå®ç° beanãå¨éç½®ä¸­ï¼æåç§°ä½¿ç¨spelå¼ç¨beanã#{@myratelimiter}æ¯å¼ç¨åä¸º\'myratelimiter\'çbeançspelè¡¨è¾¾å¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: requestratelimiter_route\n        uri: http://example.org\n        filters:\n        - name: requestratelimiter\n          args:\n            rate-limiter: "#{@myratelimiter}"\n            key-resolver: "#{@userkeyresolver}"\n\n\n\n# 5.9 redirectto gatewayfilter factory\n\nè¯¥è¿æ»¤å¨æä¸ä¸ª status åä¸ä¸ª urlåæ°ãstatusæ¯300ç±»éå®åhttpä»£ç ï¼å¦301ãè¯¥urlåºä¸ºææçurlï¼è¿å°æ¯ location headerçå¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: prefixpath_route\n        uri: http://example.org\n        filters:\n        - redirectto=302, http://acme.org\n\n\nè¿å°åéä¸ä¸ª302ç¶æç åä¸ä¸ªlocation:http://acme.org headeræ¥æ§è¡éå®åã\n\n\n# 5.10 removenonproxyheaders gatewayfilter factory\n\nremovenonproxyheaders gatewayfilter factory ä»è½¬åè¯·æ±ä¸­å é¤headersãå é¤çé»è®¤å¤´åè¡¨æ¥èª ietf.\n\nthe default removed headers are:\n\n * connection\n * keep-alive\n * proxy-authenticate\n * proxy-authorization\n * te\n * trailer\n * transfer-encoding\n * upgrade è¦æ´æ¹æ­¤è®¾ç½®ï¼è¯·å° spring.cloud.gateway.filter.remove-non-proxy-headers.headerså±æ§è®¾ç½®ä¸ºè¦å é¤çheaderåç§°ã\n\n\n# 5.11 removerequestheader gatewayfilter factory\n\næä¸ä¸ªnameåæ°. è¿æ¯è¦å é¤çheaderçåç§°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: removerequestheader_route\n        uri: http://example.org\n        filters:\n        - removerequestheader=x-request-foo\n\n\nè¿å°å¨x-request-foo headerè¢«åéå°ä¸æ¸¸ä¹åå é¤å®ã\n\n\n# 5.12 removeresponseheader gatewayfilter factory\n\næä¸ä¸ªnameåæ°. è¿æ¯è¦å é¤çheaderçåç§°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: removeresponseheader_route\n        uri: http://example.org\n        filters:\n        - removeresponseheader=x-response-foo\n\n\nè¿å°å¨è¿åå°ç½å³clientä¹åä»ååºä¸­å é¤x-response-fooå¤´ã\n\n\n# 5.13 rewritepath gatewayfilter factory\n\nåå«ä¸ä¸ª regexpæ­£åè¡¨è¾¾å¼åæ°åä¸ä¸ª replacement åæ°. éè¿ä½¿ç¨javaæ­£åè¡¨è¾¾å¼çµæ´»å°éåè¯·æ±è·¯å¾ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: rewritepath_route\n        uri: http://example.org\n        predicates:\n        - path=/foo/**\n        filters:\n        - rewritepath=/foo/(?<segment>.*), /$\\{segment}\n\n\nå¯¹äºè¯·æ±è·¯å¾/foo/barï¼å°å¨ååºä¸æ¸¸è¯·æ±ä¹åå°è·¯å¾è®¾ç½®ä¸º/barãæ³¨æ,ç±äºyamlè§èï¼è¯·ä½¿ç¨ $\\æ¿æ¢ $ã\n\n\n# 5.14 rewriteresponseheader gatewayfilter factory\n\nåå« name, regexpå replacement åæ°.ãéè¿ä½¿ç¨javaæ­£åè¡¨è¾¾å¼çµæ´»å°éåååºå¤´çå¼ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: rewriteresponseheader_route\n        uri: http://example.org\n        filters:\n        - rewriteresponseheader=x-response-foo, , password=[^&]+, password=***\n\n\nå¯¹äºä¸ä¸ª/42?user=ford&password=omg!what&flag=trueçheaderå¼ï¼å¨åä¸æ¸¸è¯·æ±æ¶å°è¢«è®¾ç½®ä¸º/42?user=ford&password=***&flag=trueï¼ç±äºyamlè§èï¼è¯·ä½¿ç¨ $\\æ¿æ¢ $ã\n\n\n# 5.15 savesession gatewayfilter factory\n\nsavesession gatewayfilter factoryå°è°ç¨è½¬åå°ä¸æ¸¸ä¹åå¼ºå¶æ§è¡websession::save æä½ãè¿å¨ä½¿ç¨ spring session ä¹ç±»æ¶ç¹å«æç¨ï¼éè¦ç¡®ä¿ä¼è¯ç¶æå¨è¿è¡è½¬åè°ç¨ä¹åå·²ä¿å­ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: save_session\n        uri: http://example.org\n        predicates:\n        - path=/foo/**\n        filters:\n        - savesession\n\n\nå¦æä½ å¸æè¦å°[spring security]ï¼https://projects.spring.io/spring security/ï¼ä¸spring sessionéæ,å¹¶ç¡®ä¿å®å¨è¯¦ç»ä¿¡æ¯å·²è½¬åå°è¿ç¨çè¿ç¨ï¼è¿ä¸ç¹è³å³éè¦ã\n\n\n# 5.16 secureheaders gatewayfilter factory\n\nsecureheaders gatewayfilter factory å°è®¸å¤headersæ·»å å°reccomedationå¤çååºä¸­ï¼ä»this blog post.\n\næ·»å ä»¥ä¸æ é¢ï¼ä½¿ç¨é»è®¤å¼åéï¼:\n\n * x-xss-protection:1; mode=block\n * strict-transport-security:max-age=631138519\n * x-frame-options:deny\n * x-content-type-options:nosniff\n * referrer-policy:no-referrer\n * content-security-policy:default-src \'self\' https:; font-src \'self\' https: data:; img-src \'self\' https: data:; object-src \'none\'; script-src https:; style-src \'self\' https: \'unsafe-inline\'\n * x-download-options:noopen\n * x-permitted-cross-domain-policies:none\n\nè¦æ´æ¹é»è®¤å¼ï¼è¯·å¨spring.cloud.gateway.filter.secure-headers å½åç©ºé´ä¸­è®¾ç½®ç¸åºçå±æ§ï¼\n\nproperty to change:\n\n * xss-protection-header\n * strict-transport-security\n * frame-options\n * content-type-options\n * referrer-policy\n * content-security-policy\n * download-options\n * permitted-cross-domain-policies\n\n\n# 5.17 setpath gatewayfilter factory\n\nsetpath gatewayfilter factory éç¨ templateè·¯å¾åæ°ãå®æä¾äºä¸ç§éè¿åè®¸è·¯å¾çæ¨¡æ¿åsegmentsæ¥æä½è¯·æ±è·¯å¾çç®åæ¹æ³ãä½¿ç¨spring frameworkä¸­çuriæ¨¡æ¿ï¼åè®¸å¤ä¸ªå¹ésegmentsã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setpath_route\n        uri: http://example.org\n        predicates:\n        - path=/foo/{segment}\n        filters:\n        - setpath=/{segment}\n\n\nå¯¹äºä¸ä¸ª /foo/barè¯·æ±ï¼å¨åä¸æ¸¸è¯·æ±åï¼è·¯å¾å°è¢«è®¾ç½®ä¸º/bar\n\n\n# 5.18 setresponseheader gatewayfilter factory\n\nsetresponseheader gatewayfilter factory åæ¬ name å value åæ°.\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setresponseheader_route\n        uri: http://example.org\n        filters:\n        - setresponseheader=x-response-foo, bar\n\n\næ­¤gatewayfilterä½¿ç¨ç»å®çåç§°æ¿æ¢ææheaderï¼èä¸æ¯æ·»å ãå æ­¤ï¼å¦æä¸æ¸¸æå¡å¨ååºä¸ºx-response-foo:1234ï¼åä¼å°å¶æ¿æ¢ä¸ºx-response-foo:bar,è¿æ¯ç½å³å®¢æ·ç«¯å°æ¥æ¶çåå®¹ã\n\n\n# 5.19 setstatus gatewayfilter factory\n\nsetstatus gatewayfilter factory åæ¬å¯ä¸ç statusåæ°.å¿é¡»æ¯ä¸ä¸ªå¯ç¨çspring httpstatusãå®å¯ä»¥æ¯æ´æ°å¼404æå­ç¬¦ä¸²æä¸¾not_foundã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setstatusstring_route\n        uri: http://example.org\n        filters:\n        - setstatus=bad_request\n      - id: setstatusint_route\n        uri: http://example.org\n        filters:\n        - setstatus=401\n\n\nå¨è¿ä¸ªä¾å­ä¸­ï¼httpè¿åç å°è®¾ç½®ä¸º401.\n\n\n# 5.20 stripprefix gatewayfilter factory\n\nstripprefix gatewayfilter factory åæ¬ä¸ä¸ªpartsåæ°ã partsåæ°æç¤ºå¨å°è¯·æ±åéå°ä¸æ¸¸ä¹åï¼è¦ä»è¯·æ±ä¸­å»é¤çè·¯å¾ä¸­çèæ°ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: nameroot\n        uri: http://nameservice\n        predicates:\n        - path=/name/**\n        filters:\n        - stripprefix=2\n\n\nå½éè¿ç½å³ååº/name/bar/fooè¯·æ±æ¶ï¼ånameserviceååºçè¯·æ±å°æ¯http://nameservice/fooã\n\n\n# 5.21 retry gatewayfilter factory\n\nretry gatewayfilter factoryåæ¬ retries, statuses, methodså series åæ°.\n\n * retries: åºå°è¯çéè¯æ¬¡æ°\n * statuses: åºè¯¥éè¯çhttpç¶æä»£ç ï¼ç¨org.springframework.http.httpstatusæ è¯\n * methods: åºè¯¥éè¯çhttpæ¹æ³ï¼ç¨ org.springframework.http.httpmethodæ è¯\n * series: è¦éè¯çä¸ç³»åç¶æç ï¼ç¨ org.springframework.http.httpstatus.seriesæ è¯\n\napplication.yml.\n\nspring: cloud: gateway: routes: - id: retry_test uri: http://localhost:8080/flakey predicates: - host=*.retry.com filters: - name: retry args: retries: 3 statuses: bad_gateway\n\n> æ³¨æ retry filter ä¸æ¯æbodyè¯·æ±çéè¯ï¼å¦éè¿bodyçpost æ putè¯·æ±\n> \n> æ³¨æ å¨ä½¿ç¨å¸¦æåç¼ä¸º forward: çretry filteræ¶ï¼åºä»ç»ç¼åç®æ ç«¯ç¹ï¼ä»¥ä¾¿å¨åºç°éè¯¯æ¶ä¸ä¼æ§è¡ä»»ä½å¯è½å¯¼è´å°ååºåéå°å®¢æ·ç«¯å¹¶æäº¤çæä½ãä¾å¦ï¼å¦æç®æ ç«¯ç¹æ¯å¸¦æ³¨è§£çcontrollerï¼åç®æ controlleræ¹æ³ä¸åºè¿åå¸¦æéè¯¯ç¶æä»£ç çresponseentityãç¸åï¼å®åºè¯¥æåºä¸ä¸ªexceptionï¼æèååºä¸ä¸ªéè¯¯ä¿¡å·ï¼ä¾å¦éè¿mono.error(ex) è¿åå¼ï¼éè¯è¿æ»¤å¨å¯ä»¥éç½®ä¸ºéè¿éè¯æ¥å¤çã\n\n\n# 5.22 requestsize gatewayfilter factory\n\nå½è¯·æ±å¤§å°å¤§äºåè®¸çéå¶æ¶ï¼requestsize gatewayfilter factoryå¯ä»¥éå¶è¯·æ±ä¸å°è¾¾ä¸æ¸¸æå¡ãè¿æ»¤å¨ä»¥requestsizeä½ä¸ºåæ°ï¼è¿æ¯å®ä¹è¯·æ±çåè®¸å¤§å°éå¶(ä»¥å­èä¸ºåä½)ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: request_size_route\n      uri: http://localhost:8080/upload\n      predicates:\n      - path=/upload\n      filters:\n      - name: requestsize\n        args:\n          maxsize: 5000000\n\n\nå½è¯·æ±å å¤§å°èè¢«æç»æ¶ï¼ requestsize gatewayfilter factory å°ååºç¶æè®¾ç½®ä¸º413 payload too largeï¼å¹¶å¸¦æé¢å¤çheader errormessage ãä¸é¢æ¯ä¸ä¸ª errormessageçä¾å­ã\n\nerrormessage` : `request size is larger than permissible limit. request size is 6.0 mb where permissible limit is 5.0 mb\n\n\n> æ³¨æ å¦ææªå¨è·¯ç±å®ä¹ä¸­ä½ä¸ºfilteråæ°æä¾ï¼åé»è®¤è¯·æ±å¤§å°å°è®¾ç½®ä¸º5 mbã\n\n\n# 5.23 modify request body gatewayfilter factory\n\nè¿ä¸ªè¿æ»¤å¨è¢«å®ä¹ä¸ºbetaçæ¬ï¼å°æ¥apiå¯è½ä¼æ¹åã\n\næ­¤è¿æ»¤å¨å¯ç¨äºå¨è¯·æ±ä¸»ä½è¢«ç½å³åéå°ä¸æ¸¸ä¹åå¯¹å¶è¿è¡ä¿®æ¹ã\n\n> æ³¨æ åªè½ä½¿ç¨java dsléç½®æ­¤è¿æ»¤å¨\n\n@bean\npublic routelocator routes(routelocatorbuilder builder) {\n    return builder.routes()\n        .route("rewrite_request_obj", r -> r.host("*.rewriterequestobj.org")\n            .filters(f -> f.prefixpath("/httpbin")\n                .modifyrequestbody(string.class, hello.class, mediatype.application_json_value,\n                    (exchange, s) -> return mono.just(new hello(s.touppercase())))).uri(uri))\n        .build();\n}\n\nstatic class hello {\n    string message;\n\n    public hello() { }\n\n    public hello(string message) {\n        this.message = message;\n    }\n\n    public string getmessage() {\n        return message;\n    }\n\n    public void setmessage(string message) {\n        this.message = message;\n    }\n}\n\n\n\n# 5.24 modify response body gatewayfilter factory\n\nè¿ä¸ªè¿æ»¤å¨è¢«å®ä¹ä¸ºbetaçæ¬ï¼å°æ¥apiå¯è½ä¼æ¹åã æ­¤è¿æ»¤å¨å¯ç¨äºå¨å°ååºæ­£æåéåå®¢æ·ç«¯ä¹åå¯¹å¶è¿è¡ä¿®æ¹ã\n\n> æ³¨æ åªè½ä½¿ç¨java dsléç½®æ­¤è¿æ»¤å¨\n\n@bean\npublic routelocator routes(routelocatorbuilder builder) {\n    return builder.routes()\n        .route("rewrite_response_upper", r -> r.host("*.rewriteresponseupper.org")\n            .filters(f -> f.prefixpath("/httpbin")\n                .modifyresponsebody(string.class, string.class,\n                    (exchange, s) -> mono.just(s.touppercase()))).uri(uri)\n        .build();\n}\n\n\n\n# 6. global filters\n\nglobalfilteræ¥å£ä¸gatewayfilterå·æç¸åçç­¾åãæ¯ææ¡ä»¶å°åºç¨äºææè·¯ç±çç¹æ®è¿æ»¤å¨ãï¼æ­¤æ¥å£åç¨æ³å¯è½å¨å°æ¥çéç¨ç¢çæ¬ä¸­åçæ´æ¹ï¼ã\n\n\n# 6.1 å¨å±filterågatewayfilterç»åæåº\n\nå½è¯·æ±è¿å¥ï¼å¹¶ä¸è·¯ç±å¹éï¼æ¶ï¼ç­éweb handler ä¼å°globalfilterçææå®ä¾åææçgatewayfilterè·¯ç±ç¹å®å®ä¾æ·»å å° filter chainãfilterç»åçæåºç±org.springframework.core.orderedæ¥å£å³å®ï¼å¯ä»¥éè¿å®ç°getorde()æ¹æ³æä½¿ç¨@orderæ³¨éæ¥è®¾ç½®ã\n\nç±äºspring cloud gatewayå°ç¨äºæ§è¡è¿æ»¤å¨é»è¾åºåä¸ºâåç½®âåâåç½®âé¶æ®µï¼å·ææé«ä¼åçº§çè¿æ»¤å¨å°æ¯âåç½®âé¶æ®µçç¬¬ä¸ä¸ªï¼èâåç½®âé¶æ®µçæåä¸ä¸ªã\n\nexampleconfiguration.java.\n\n@bean\n@order(-1)\npublic globalfilter a() {\n    return (exchange, chain) -> {\n        log.info("first pre filter");\n        return chain.filter(exchange).then(mono.fromrunnable(() -> {\n            log.info("third post filter");\n        }));\n    };\n}\n\n@bean\n@order(0)\npublic globalfilter b() {\n    return (exchange, chain) -> {\n        log.info("second pre filter");\n        return chain.filter(exchange).then(mono.fromrunnable(() -> {\n            log.info("second post filter");\n        }));\n    };\n}\n\n@bean\n@order(1)\npublic globalfilter c() {\n    return (exchange, chain) -> {\n        log.info("third pre filter");\n        return chain.filter(exchange).then(mono.fromrunnable(() -> {\n            log.info("first post filter");\n        }));\n    };\n}\n\n\n\n# 6.2 forward routing filter\n\nforwardroutingfilterå¨exchangeå±æ§serverwebexchangeutils.gateway_request_url_atträ¸­æ¥æ¾uriãå¦æurlæä¸ä¸ªforwardscheme (å¦ forward:///localendpoint)ï¼å®å°ä½¿ç¨spring dispatcherhandler æ¥å¤çè¯·æ±ãè¯·æ±urlçè·¯å¾é¨åå°è¢«è½¬åurlä¸­çè·¯å¾è¦çãæªä¿®æ¹çåå§urlå°éå å° serverwebexchangeutils.gateway_original_request_url_attrå±æ§ä¸­çåè¡¨ä¸­ã\n\n\n# 6.3 loadbalancerclient filter\n\nloadbalancerclientfilterå¨exchangeå±æ§serverwebexchangeutils.gateway_request_url_atträ¸­æ¥æ¾uriãå¦æurlæä¸ä¸ªlbscheme (å¦ lb://myserviceï¼ï¼å®å°ä½¿ç¨spring cloud loadbalancerclient å°åç§°ï¼å¨åä¸ä¸ªç¤ºä¾ä¸­ä¸º\'myserviceï¼è§£æä¸ºå®éä¸»æºåç«¯å£ï¼å¹¶æ¿æ¢uriãæªä¿®æ¹çåå§urlå°éå å°serverwebexchangeutils.gateway_original_request_url_attrå±æ§ä¸­çåè¡¨ä¸­ãè¿æ»¤å¨è¿å°æ¥çserverwebexchangeutils.gateway_scheme_prefix_attrå±æ§ï¼æ¥çå®æ¯å¦ç­äºlb`ï¼ç¶ååºç¨ç¸åçè§åã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: myroute\n        uri: lb://service\n        predicates:\n        - path=/service/**\n\n\n> æ³¨æ é»è®¤æåµä¸ï¼å¦æä¸ä¸ªæå¡å®ä¾å¨loadbalancer ä¸­æ²¡æåç°ï¼åè¿å503ãå¯ä»¥éè¿è®¾ç½®spring.cloud.gateway.loadbalancer.use404=trueæ¥è®©ç½ç®¡è¿å404.\n> \n> æ³¨æ\n\nä»loadbalancerè¿åçserviceinstanceçissecure å¼å°è¦çå¨å¯¹ç½å³ååºçè¯·æ±ä¸­æå®çschemeãä¾å¦ï¼å¦æè¯·æ±éè¿httpsè¿å¥ç½å³ï¼ä½serviceinstanceè¡¨ç¤ºå®ä¸å®å¨ï¼åä¸æ¸¸è¯·æ±å°éè¿httpåè®®ãç¸åçæåµä¹éç¨ãä½æ¯ï¼å¦æå¨ç½å³éç½®ä¸­ä¸ºè·¯ç±æå®äºgateway_scheme_prefix_attrï¼ååç¼å°è¢«å é¤ï¼å¹¶ä¸è·¯ç±urlçæçschemeå°è¦çserviceinstanceéç½®ã\n\n\n# 6.4 netty routing filter\n\nå¦æä½äº serverwebexchangeutils.gateway_request_url_attrå±æ§ä¸­çurlå·æhttp æhttps æ¨¡å¼ï¼åä¼è¿è¡netty routing filterãå®ä½¿ç¨netty httpclient ååºä¸æ¸¸ä»£çè¯·æ±ãååºæ¾å¨ serverwebexchangeutils.client_response_attr exchangeå±æ§ä¸­ï¼ä»¥ä¾¿å¨ä»¥åçè¿æ»¤å¨ä¸­ä½¿ç¨ãï¼æä¸ä¸ªå®éªé¶æ®µä¸éè¦nettyçç¸åçåè½çfilterï¼webclienthttproutingfilterï¼\n\n\n# 6.5 netty write response filter\n\nå¦æserverwebexchangeutils.client_response_attr exchangeå±æ§ä¸­å­å¨ netty httpclientresponseï¼åè¿è¡ nettywriteresponsefilter ãå®å¨å¶ä»ææè¿æ»¤å¨å®æåå°ä»£çååºååç½å³å®¢æ·ç«¯ååºä¹åè¿è¡ãï¼æä¸ä¸ªä¸éè¦nettyçå®éªæ§çwebclientwriteresponsefilteræ§è¡ç¸åçåè½ï¼\n\n\n# 6.6 routetorequesturl filter\n\nå¦æserverwebexchangeutils.gateway_route_attr exchangeå±æ§ä¸­å­å¨routeå¯¹è±¡ï¼routetorequesturlfilterå°è¿è¡ãå®åºäºè¯·æ±uriåå»ºä¸ä¸ªæ°çuriï¼ä½¿ç¨routeå¯¹è±¡çuriå±æ§è¿è¡æ´æ°ãæ°çuriè¢«æ¾ç½®å¨serverwebexchangeutils.gateway_request_url_attr exchangeå±æ§ä¸­ã\n\nå¦æè¯¥uriæä¸ä¸ªåç¼schemeï¼ä¾å¦lb:ws://serviceidï¼åä¼ä»è¯¥uriä¸­å¥ç¦»è¯¥ lb schemeï¼å¹¶å°å¶æ¾ç½®å¨serverwebexchangeutils.gateway_scheme_prefix_atträ¸­ï¼ä»¥ä¾¿ç¨åå¨è¿æ»¤å¨é¾ä¸­ä½¿ç¨ã\n\n\n# 6.7 websocket routing filter\n\nå¦æserverwebexchangeutils.gateway_request_url_attrexchangeå±æ§ä¸­æ ws ã wssschemeï¼åwebsocket routing filterå°è¢«è¿è¡ãå®ä½¿ç¨spring web socketåºç¡æ¨¡åå°websocketè½¬åå°ä¸æ¸¸ã\n\nuriåç¼ä¸ºlbçwebsocketså¯ä»¥è¢«è´è½½åè¡¡ï¼å¦ lb:ws://serviceid.\n\n> æ³¨æ å¦æä½¿ç¨ sockjs ä½ä¸ºæ®éhttpçfallbackï¼ååºéç½®æ®éhttpè·¯ç±ä»¥åwebsocketè·¯ç±ã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      # sockjs route\n      - id: websocket_sockjs_route\n        uri: http://localhost:3001\n        predicates:\n        - path=/websocket/info/**\n      # normwal websocket route\n      - id: websocket_route\n        uri: ws://localhost:3001\n        predicates:\n        - path=/websocket/**\n\n\n\n# 6.8 gateway metrics filter\n\nè¦å¯ç¨ç½å³ææ ï¼è¯·å°spring-boot-starter-actuatoræ·»å ä¸ºé¡¹ç®ä¾èµé¡¹ãç¶åï¼é»è®¤æåµä¸ï¼åªè¦å±æ§spring.cloud.gateway.metrics.enabledæªè®¾ç½®ä¸ºfalseï¼ç½å³ææ è¿æ»¤å¨å°±ä¼è¿è¡ãæ­¤è¿æ»¤å¨æ·»å åä¸ºâgateway.requestsâçè®¡æ¶å¨ææ ï¼å¹¶å¸¦æä»¥ä¸æ è®°ï¼\n\n * routeid: the route id\n * routeuri: api å°è¢«è½¬åçuri\n * outcome: ç»æåç±»ä¾æ® httpstatus.series\n * status: è¿åclientçè¯·æ±çhttp status\n\nè¿äºææ å¯ä»¥ä»/actuator/metrics/gateway.requestsä¸­è·åï¼å¯ä»¥å¾å®¹æå°ä¸prometheuséæä»¥åå»ºgrafana dashboard.\n\n> æ³¨æ è¦å°pometheuså¯ç¨ï¼éè¦æ·»å  micrometer-registry-prometheusä¸ºé¡¹ç®ä¾èµã\n\n\n# 6.9 making an exchange as routed\n\nç½å³è·¯ç±serverwebexchangeä¹åï¼å®å°éè¿åexchangeå±æ§æ·»å gatewayalreadyroutedï¼å°è¯¥exchangeæ è®°ä¸ºâroutedâãä¸æ¦ä¸ä¸ªè¯·æ±è¢«æ è®°ä¸ºroutedï¼å¶ä»è·¯ç±è¿æ»¤å¨å°ä¸ä¼åæ¬¡è·¯ç±è¯¥è¯·æ±ï¼å°è·³è¿è¯¥è¿æ»¤å¨ãæä¸äºæ¹ä¾¿çæ¹æ³å¯ä»¥ç¨æ¥å°exchangeæ è®°ä¸ºroutedï¼æèæ£æ¥exchangeæ¯å¦å·²ç»routedã\n\n * serverwebexchangeutils.isalreadyrouted æä¸ä¸ª serverwebexchangeå¯¹è±¡å¹¶æ£æ¥å®æ¯å¦å·²"routed"\n * serverwebexchangeutils.setalreadyrouted æä¸ä¸ª serverwebexchange å¯¹è±¡å¹¶å°å¶æ è®°ä¸º"routed"\n\n\n# 7. tls / ssl\n\nç½å³å¯ä»¥éè¿å¸¸è§ç spring server configuration æ¥ä¾¦å¬httpsä¸çè¯·æ±ãä¾å­ï¼\n\napplication.yml.\n\nserver:\n  ssl:\n    enabled: true\n    key-alias: scg\n    key-store-password: scg1234\n    key-store: classpath:scg-keystore.p12\n    key-store-type: pkcs12\n\n\nç½å³è·¯ç±å¯ä»¥è·¯ç±å°httpåhttpsåç«¯ãå¦æè·¯ç±å°httpsåç«¯ï¼åå¯ä»¥å°ç½å³éç½®ä¸ºä¿¡ä»»ææå·æè¯ä¹¦çä¸æ¸¸æå¡ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      httpclient:\n        ssl:\n          useinsecuretrustmanager: true\n\n\nä¸å»ºè®®å¨çäº§ç¯å¢ä½¿ç¨ä¸å®å¨çä¿¡ä»»ç®¡çå¨ãå¯¹äºçäº§é¨ç½²ï¼å¯ä»¥ä½¿ç¨ä¸ç»å·²ç¥è¯ä¹¦éç½®ç½å³ï¼è¿äºè¯ä¹¦å¯ä»¥éè¿ä»¥ä¸æ¹å¼è¿è¡éç½®ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      httpclient:\n        ssl:\n          trustedx509certificates:\n          - cert1.pem\n          - cert2.pem\n\n\nå¦æspring cloud gatewayæªéç½®åä¿¡ä»»è¯ä¹¦ï¼åä½¿ç¨é»è®¤ä¿¡ä»»åºï¼å¯ä»¥ä½¿ç¨ç³»ç»å±æ§javax.net.ssl.truststoreè¦çï¼ã\n\n\n# 7.1 tls æ¡æ\n\nç½å³ç»´æ¤ä¸ä¸ªç¨äºè·¯ç±å°åç«¯çclientæ± ãå½éè¿httpséä¿¡æ¶ï¼å®¢æ·ç«¯å¯å¨ä¸ä¸ªtlsæ¡æï¼å¶ä¸­å¯è½ä¼æå¾å¤è¶æ¶ãè¿äºè¶æ¶å¯ä»¥è¿æ ·éç½®ï¼æ¾ç¤ºé»è®¤å¼ï¼ï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      httpclient:\n        ssl:\n          handshake-timeout-millis: 10000\n          close-notify-flush-timeout-millis: 3000\n          close-notify-read-timeout-millis: 0\n\n\n\n# 8. configuration\n\nspring cloud gatewayçéç½®ç±routedefinitionlocatorçéåé©±å¨ã\n\nroutedefinitionlocator.java.\n\npublic interface routedefinitionlocator {\n    flux<routedefinition> getroutedefinitions();\n}\n\n\né»è®¤æåµä¸ï¼propertiesroutedefinitionlocatorä½¿ç¨spring bootç@configurationpropertiesæºå¶å è½½å±æ§ã\n\nä»¥ä¸ä¸¤ä¸ªç¤ºä¾æ¯ç­æçï¼\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: setstatus_route\n        uri: http://example.org\n        filters:\n        - name: setstatus\n          args:\n            status: 401\n      - id: setstatusshortcut_route\n        uri: http://example.org\n        filters:\n        - setstatus=401\n\n\nå¯¹äºç½å³çå¤§é¨åç¨æ³ï¼éç½®æä»¶æ¹å¼æ¯å¤ç¨çï¼ä½ä¸äºçäº§ç¨ä¾æ´å»ºè®®ä»å¤é¨æºï¼å¦æ°æ®åºï¼å è½½éç½®ãæªæ¥çéç¨ç¢çæ¬å°æåºäºspring data repositories ï¼å¦redisãmongodbåcassandraï¼çroutedefinitionlocatorå®ç°ã\n\n\n# 8.1 fluent java routes api\n\nä¸ºäºå¯ä»¥æ´ç®åå¨javaä¸­éç½®ï¼å¨routelocatorbuilder beanä¸­å®ä¹äºä¸ä¸ªfluent apiã\n\ngatewaysampleapplication.java.\n\n// static imports from gatewayfilters and routepredicates\n@bean\npublic routelocator customroutelocator(routelocatorbuilder builder, throttlegatewayfilterfactory throttle) {\n    return builder.routes()\n            .route(r -> r.host("**.abc.org").and().path("/image/png")\n                .filters(f ->\n                        f.addresponseheader("x-testheader", "foobar"))\n                .uri("http://httpbin.org:80")\n            )\n            .route(r -> r.path("/image/webp")\n                .filters(f ->\n                        f.addresponseheader("x-anotherheader", "baz"))\n                .uri("http://httpbin.org:80")\n            )\n            .route(r -> r.order(-1)\n                .host("**.throttle.org").and().path("/get")\n                .filters(f -> f.filter(throttle.apply(1,\n                        1,\n                        10,\n                        timeunit.seconds)))\n                .uri("http://httpbin.org:80")\n            )\n            .build();\n}\n\n\nè¿ç§æ ·å¼è¿åè®¸ä½¿ç¨æ´å¤çèªå®ä¹æ­è¨ãç±routedefinitionlocator beanså®ä¹çæ­è¨ä½¿ç¨é»è¾ andç»åãéè¿ä½¿ç¨fluent java apiï¼å¯ä»¥å¨ predicateç±»ä¸ä½¿ç¨ and()ãor() ã negate()è¿ç®ç¬¦ã\n\n\n# 8.2 discoveryclient route definition locator\n\nå¯ä»¥å°ç½å³éç½®ä¸ºåºäºä½¿ç¨å¼å®¹discoveryclientæ³¨åä¸­å¿æ³¨åçæå¡æ¥åå»ºè·¯ç±ã\n\nè¦å¯ç¨æ­¤åè½ï¼è¯·è®¾ç½®spring.cloud.gateway.discovery.locator.enabled=trueï¼å¹¶ç¡®ä¿discoveryclientå®ç°ä½äºclasspathä¸å¹¶å·²å¯ç¨ï¼å¦netflix eurekaãconsulæzookeeperï¼ã\n\n\n# 8.2.1 configuring predicates and filters for discoveryclient routes\n\né»è®¤æåµä¸ï¼ç½å³ä¸ºéè¿discoveryclientåå»ºçè·¯ç±å®ä¹åä¸ªæ­è¨åè¿æ»¤å¨ã\n\né»è®¤æ­è¨æ¯ä½¿ç¨/serviceid/**å®ä¹çpathæ­è¨ï¼å¶ä¸­serviceidæ¯discoveryclientä¸­æå¡çidã\n\né»è®¤è¿æ»¤å¨æ¯ä½¿ç¨æ­£åè¡¨è¾¾å¼ /serviceid/(?<remaining>.*)åæ¿æ¢ç/${remaining}è¿è¡éåãè¿åªæ¯å¨è¯·æ±è¢«åéå°ä¸æ¸¸ä¹åä»è·¯å¾ä¸­æªåæ service id ã\n\nå¯ä»¥éè¿è®¾ç½®spring.cloud.gateway.discovery.locator.predicates[x] and spring.cloud.gateway.discovery.locator.filters[y]æ¥å®ç°èªå®ä¹discoveryclientè·¯ç±ä½¿ç¨çæ­è¨and/orè¿æ»¤å¨ãå½ä½ è¿æ ·åæ¶ï¼å¦æä½ æ³è¦ä¿çè¿ä¸ªåè½ï¼ä½ éè¦ç¡®ä¿åæ¬ä¸é¢çé»è®¤æ­è¨åè¿æ»¤å¨ãä¸é¢æ¯è¿æ ·ä¸ä¸ªä¾å­ã\n\napplication.properties.\n\nspring.cloud.gateway.discovery.locator.predicates[0].name: path\nspring.cloud.gateway.discovery.locator.predicates[0].args[pattern]: "\'/\'+serviceid+\'/**\'"\nspring.cloud.gateway.discovery.locator.predicates[1].name: host\nspring.cloud.gateway.discovery.locator.predicates[1].args[pattern]: "\'**.foo.com\'"\nspring.cloud.gateway.discovery.locator.filters[0].name: hystrix\nspring.cloud.gateway.discovery.locator.filters[0].args[name]: serviceid\nspring.cloud.gateway.discovery.locator.filters[1].name: rewritepath\nspring.cloud.gateway.discovery.locator.filters[1].args[regexp]: "\'/\' + serviceid + \'/(?<remaining>.*)\'"\nspring.cloud.gateway.discovery.locator.filters[1].args[replacement]: "\'/${remaining}\'"\n\n\n\n# 9. reactor netty access logs\n\nè®¾ç½® -dreactor.netty.http.server.accesslogenabled=true æ¥å¼å¯reactor netty access logsï¼æ³¨æå¿é¡»æ¯java system propertyèä¸æ¯spring boot propertyã\n\nlogging æ¨¡åä¹å¯ä»¥éè¿éç½®åç¬è¾åºä¸ä¸ªaccess logæä»¶ï¼ä¸é¢æ¯logbackçéç½®ä¾å­ï¼\n\nlogback.xml.\n\n <appender name="accesslog" class="ch.qos.logback.core.fileappender">\n        <file>access_log.log</file>\n        <encoder>\n            <pattern>%msg%n</pattern>\n        </encoder>\n    </appender>\n    <appender name="async" class="ch.qos.logback.classic.asyncappender">\n        <appender-ref ref="accesslog" />\n    </appender>\n\n    <logger name="reactor.netty.http.server.accesslog" level="info" additivity="false">\n        <appender-ref ref="async"/>\n    </logger>\n\n\n\n# 10. cors configuration\n\næä»¬å¯ä»¥éè¿éç½®ç½å³æ¥æ§å¶corsè¡ä¸ºï¼å¨å±corséç½®æ¯ spring framework corsconfigurationæ¨¡å¼çurl mapã\n\napplication.yml.\n\nspring:\n  cloud:\n    gateway:\n      globalcors:\n        corsconfigurations:\n          \'[/**]\':\n            allowedorigins: "http://docs.spring.io"\n            allowedmethods:\n            - get\n\n\nä¾å­ä¸­å°åè®¸ä»docs.spring.ioååºçæægetè¯·æ±è¿è¡corsè¯·æ±ã\n\n\n# 11. actuator api\n\n/gatewayçactuatorç«¯ç¹åè®¸çè§spring cloud gatewayåºç¨ç¨åºå¹¶ä¸ä¹äº¤äºãè¦è¿è¡è¿ç¨è®¿é®ï¼å¿é¡»å¨åºç¨ç¨åºå±æ§ä¸­æ´é²httpæjmx ç«¯å£ã\n\napplication.properties.\n\nmanagement.endpoint.gateway.enabled=true # default value\nmanagement.endpoints.web.exposure.include=gateway\n\n\n\n# 11.1 retrieving route filters\n\n\n# 11.1.1 global filters\n\nè¦æ£ç´¢åºç¨äºææè·¯ç±ç [global filters]ï¼è¯·getè¯·æ± /actuator/gateway/globalfiltersãè¿åçç»æç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\n{\n  "org.springframework.cloud.gateway.filter.loadbalancerclientfilter@77856cc5": 10100,\n  "org.springframework.cloud.gateway.filter.routetorequesturlfilter@4f6fd101": 10000,\n  "org.springframework.cloud.gateway.filter.nettywriteresponsefilter@32d22650": -1,\n  "org.springframework.cloud.gateway.filter.forwardroutingfilter@106459d9": 2147483647,\n  "org.springframework.cloud.gateway.filter.nettyroutingfilter@1fbd5e0": 2147483647,\n  "org.springframework.cloud.gateway.filter.forwardpathfilter@33a71d23": 0,\n  "org.springframework.cloud.gateway.filter.adaptcachedbodyglobalfilter@135064ea": 2147483637,\n  "org.springframework.cloud.gateway.filter.websocketroutingfilter@23c05889": 2147483646\n}\n\n\nè¿åç»æåå«å·²å°±ç»ªçglobal filtersçè¯¦ç»ä¿¡æ¯(å¦ org.springframework.cloud.gateway.filter.loadbalancerclientfilter@77856cc5)ãå¯¹äºæ¯ä¸ªglobal filtersï¼è¿åç»æå­ç¬¦ä¸²å¯¹åºè¿æ»¤å¨é¾ä¸­çç¸åºé¡ºåºã\n\n\n# 11.1.2 route filters\n\nè¦æ£ç´¢åºç¨äºè·¯ç±ç [gatewayfilter factories] ï¼è¯·getè¯·æ±/actuator/gateway/routefiltersãè¿åç»æç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\n{\n  "[addrequestheadergatewayfilterfactory@570ed9c configclass = abstractnamevaluegatewayfilterfactory.namevalueconfig]": null,\n  "[secureheadersgatewayfilterfactory@fceab5d configclass = object]": null,\n  "[savesessiongatewayfilterfactory@4449b273 configclass = object]": null\n}\n\n\nè¿åç»æåå«åºç¨äºææè·¯ç±çgatewayfilterçè¯¦ç»ä¿¡æ¯ãæ¾ç¤ºæ¯ä¸ªå·¥åæä¾å­ç¬¦ä¸²æ ¼å¼çç¸åºå¯¹è±¡ï¼ä¾å¦ï¼ [secureheadersgatewayfilterfactory@fceab5d configclass = object]ï¼ãè¯·æ³¨æï¼nullå¼æ¯ç±äºendpoint controllerå®ç°ä¸å®æ´é æçï¼å ä¸ºå®å°è¯å¨filter chainä¸­è®¾ç½®å¯¹è±¡çé¡ºåºï¼è¿ä¸éç¨äºgatewayfilterå·¥åå¯¹è±¡ã\n\n\n# 11.2 refreshing the route cache\n\nå¦æè¦æ¸çè·¯ç±çç¼å­ï¼è¯·postè¯·æ±/actuator/gateway/refreshãè¯¥è¯·æ±å°è¿åä¸ä¸ªæ²¡æbodyç200è¿åç ã\n\n\n# 11.3 retrieving the routes defined in the gateway\n\nè¦æ£ç´¢ç½å³ä¸­å®ä¹çè·¯ç±ï¼åégetè¯·æ±/actuator/gateway/routesï¼è¿åç»æå¦ä¸æç¤ºï¼\n\n[{\n  "route_id": "first_route",\n  "route_object": {\n    "predicate": "org.springframework.cloud.gateway.handler.predicate.pathroutepredicatefactory$$lambda$432/1736826640@1e9d7e7d",\n    "filters": [\n      "orderedgatewayfilter{delegate=org.springframework.cloud.gateway.filter.factory.preservehostheadergatewayfilterfactory$$lambda$436/674480275@6631ef72, order=0}"\n    ]\n  },\n  "order": 0\n},\n{\n  "route_id": "second_route",\n  "route_object": {\n    "predicate": "org.springframework.cloud.gateway.handler.predicate.pathroutepredicatefactory$$lambda$432/1736826640@cd8d298",\n    "filters": []\n  },\n  "order": 0\n}]\n\n\nè¿åç»æä¸­åå«ç½å³ä¸­ææå®ä¹çè·¯ç±ä¿¡æ¯ï¼ä¸é¢è¡¨æ ¼ä¸­æè¿°äºè¿åç»æä¿¡æ¯ï¼\n\npath                     type     description\nroute_id                 string   the route id.\nroute_object.predicate   object   the route predicate.\nroute_object.filters     array    the gatewayfilter factories applied to the route.\norder                    number   the route order.\n\n\n# 11.4 retrieving information about a particular route\n\nè¦è·ååä¸ªè·¯ç±çä¿¡æ¯ï¼åégetè¯·æ± /actuator/gateway/routes/{id} (å¦ï¼ /actuator/gateway/routes/first_route)ï¼è¿åç»æå¦ä¸æç¤ºï¼\n\n{\n  "id": "first_route",\n  "predicates": [{\n    "name": "path",\n    "args": {"_genkey_0":"/first"}\n  }],\n  "filters": [],\n  "uri": "http://www.uri-destination.org",\n  "order": 0\n}]\n\n\nä¸é¢è¡¨æ ¼ä¸­æè¿°äºè¿åç»æä¿¡æ¯ï¼\n\npath         type     description\nid           string   the route id.\npredicates   array    the collection of route predicates. each item defines the\n                      name and the arguments of a given predicate.\nfilters      array    the collection of filters applied to the route.\nuri          string   the destination uri of the route.\norder        number   the route order.\n\n\n# 11.5 creating and deleting a particular route\n\nè¦åå»ºä¸ä¸ªè·¯ç±ï¼åépostè¯·æ± /gateway/routes/{id_route_to_create}ï¼åæ°ä¸ºjsonç»æï¼å·ä½åæ°æ°æ®ç»æåèä¸é¢ç« èã\n\nè¦å é¤ä¸ä¸ªè·¯ç±ï¼åé deleteè¯·æ± /gateway/routes/{id_route_to_delete}ã\n\n\n# 11.6 recap: list of all endpoints\n\nä¸è¡¨æ»ç»äºspring cloud gateway actuator endpointsãæ³¨æï¼æ¯ä¸ªendpointé½æ¯/actuator/gatewayä½ä¸ºåºæ¬è·¯å¾ã\n\nid              http method   description\nglobalfilters   get           displays the list of global filters applied to the routes.\nroutefilters    get           displays the list of gatewayfilter factories applied to a\n                              particular route.\nrefresh         post          clears the routes cache.\nroutes          get           displays the list of routes defined in the gateway.\nroutes/{id}     get           displays information about a particular route.\nroutes/{id}     post          adds a new route to the gateway.\nroutes/{id}     delete        removes an existing route from the gateway.\n\n\n# 12. developer guide\n\ntodo: overview of writing custom integrations\n\n\n# 12.1 writing custom route predicate factories\n\ntodo: document writing custom route predicate factories\n\n\n# 12.2 writing custom gatewayfilter factories\n\nå¦æè¦èªå®ä¹ä¸ä¸ªgatewayfilterï¼éè¦å®ç°gatewayfilterfactoryãä¸é¢æ¯ä¸ä¸ªä½ éè¦éæçæ½è±¡ç±» abstractgatewayfilterfactoryã\n\npregatewayfilterfactory.java.\n\npublic class pregatewayfilterfactory extends abstractgatewayfilterfactory<pregatewayfilterfactory.config> {\n\n    public pregatewayfilterfactory() {\n        super(config.class);\n    }\n\n    @override\n    public gatewayfilter apply(config config) {\n        // grab configuration from config object\n        return (exchange, chain) -> {\n            //if you want to build a "pre" filter you need to manipulate the\n            //request before calling chain.filter\n            serverhttprequest.builder builder = exchange.getrequest().mutate();\n            //use builder to manipulate the request\n            return chain.filter(exchange.mutate().request(request).build());\n        };\n    }\n\n    public static class config {\n        //put the configuration properties for your filter here\n    }\n\n}\n\n\npostgatewayfilterfactory.java.\n\npublic class postgatewayfilterfactory extends abstractgatewayfilterfactory<postgatewayfilterfactory.config> {\n\n    public postgatewayfilterfactory() {\n        super(config.class);\n    }\n\n    @override\n    public gatewayfilter apply(config config) {\n        // grab configuration from config object\n        return (exchange, chain) -> {\n            return chain.filter(exchange).then(mono.fromrunnable(() -> {\n                serverhttpresponse response = exchange.getresponse();\n                //manipulate the response in some way\n            }));\n        };\n    }\n\n    public static class config {\n        //put the configuration properties for your filter here\n    }\n\n}\n\n\n\n# 12.3 writing custom global filters\n\ntodo: document writing custom global filters\n\n\n# 12.4 writing custom route locators and writers\n\ntodo: document writing custom route locators and writers',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ç®ä»",frontmatter:{title:"ç®ä»",date:"2022-02-09T11:45:40.000Z",permalink:"/pages/b62716/"},regularPath:"/16.Spring%20Cloud%20Alibaba/01.Spring%20Cloud%20Alibaba/01.%E7%AE%80%E4%BB%8B.html",relativePath:"16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/01.ç®ä».md",key:"v-c2d87842",path:"/pages/b62716/",headers:[{level:2,title:"ä¸»è¦åè½",slug:"ä¸»è¦åè½",normalizedTitle:"ä¸»è¦åè½",charIndex:210},{level:2,title:"ç»ä»¶",slug:"ç»ä»¶",normalizedTitle:"ç»ä»¶",charIndex:64}],headersStr:"ä¸»è¦åè½ ç»ä»¶",content:"# ç®ä»\n\nSpring Cloud Alibaba è´åäºæä¾å¾®æå¡å¼åçä¸ç«å¼è§£å³æ¹æ¡ãæ­¤é¡¹ç®åå«å¼ååå¸å¼åºç¨å¾®æå¡çå¿éç»ä»¶ï¼æ¹ä¾¿å¼åèéè¿ Spring Cloud ç¼ç¨æ¨¡åè½»æ¾ä½¿ç¨è¿äºç»ä»¶æ¥å¼ååå¸å¼åºç¨æå¡ã\n\nä¾æ Spring Cloud Alibabaï¼æ¨åªéè¦æ·»å ä¸äºæ³¨è§£åå°ééç½®ï¼å°±å¯ä»¥å° Spring Cloud åºç¨æ¥å¥é¿éå¾®æå¡è§£å³æ¹æ¡ï¼éè¿é¿éä¸­é´ä»¶æ¥è¿éæ­å»ºåå¸å¼åºç¨ç³»ç»ã\n\n\n# ä¸»è¦åè½\n\n * æå¡éæµéçº§ï¼é»è®¤æ¯æ WebServletãWebFlux, OpenFeignãRestTemplateãSpring Cloud Gateway, Zuul, Dubbo å RocketMQ éæµéçº§åè½çæ¥å¥ï¼å¯ä»¥å¨è¿è¡æ¶éè¿æ§å¶å°å®æ¶ä¿®æ¹éæµéçº§è§åï¼è¿æ¯ææ¥çéæµéçº§ Metrics çæ§ã\n * æå¡æ³¨åä¸åç°ï¼éé Spring Cloud æå¡æ³¨åä¸åç°æ åï¼é»è®¤éæäº Ribbon çæ¯æã\n * åå¸å¼éç½®ç®¡çï¼æ¯æåå¸å¼ç³»ç»ä¸­çå¤é¨åéç½®ï¼éç½®æ´æ¹æ¶èªå¨å·æ°ã\n * æ¶æ¯é©±å¨è½åï¼åºäº Spring Cloud Stream ä¸ºå¾®æå¡åºç¨æå»ºæ¶æ¯é©±å¨è½åã\n * åå¸å¼äºå¡ï¼ä½¿ç¨ @GlobalTransactional æ³¨è§£ï¼ é«æå¹¶ä¸å¯¹ä¸å¡é¶ä¾µå¥å°è§£å³åå¸å¼äºå¡é®é¢ãã\n * é¿éäºå¯¹è±¡å­å¨ï¼é¿éäºæä¾çæµ·éãå®å¨ãä½ææ¬ãé«å¯é çäºå­å¨æå¡ãæ¯æå¨ä»»ä½åºç¨ãä»»ä½æ¶é´ãä»»ä½å°ç¹å­å¨åè®¿é®ä»»æç±»åçæ°æ®ã\n * åå¸å¼ä»»å¡è°åº¦ï¼æä¾ç§çº§ãç²¾åãé«å¯é ãé«å¯ç¨çå®æ¶ï¼åºäº Cron è¡¨è¾¾å¼ï¼ä»»å¡è°åº¦æå¡ãåæ¶æä¾åå¸å¼çä»»å¡æ§è¡æ¨¡åï¼å¦ç½æ ¼ä»»å¡ãç½æ ¼ä»»å¡æ¯ææµ·éå­ä»»å¡åååéå°ææ Workerï¼schedulerx-clientï¼ä¸æ§è¡ã\n * é¿éäºç­ä¿¡æå¡ï¼è¦çå¨ççç­ä¿¡æå¡ï¼åå¥½ãé«æãæºè½çäºèåéè®¯è½åï¼å¸®å©ä¼ä¸è¿éæ­å»ºå®¢æ·è§¦è¾¾ééã\n\n\n# ç»ä»¶\n\n * Sentinelï¼ææµéä½ä¸ºåå¥ç¹ï¼ä»æµéæ§å¶ãçæ­éçº§ãç³»ç»è´è½½ä¿æ¤ç­å¤ä¸ªç»´åº¦ä¿æ¤æå¡çç¨³å®æ§ã\n\n * Nacosï¼ä¸ä¸ªæ´æäºæå»ºäºåçåºç¨çå¨ææå¡åç°ãéç½®ç®¡çåæå¡ç®¡çå¹³å°ã\n\n * RocketMQï¼ä¸æ¬¾å¼æºçåå¸å¼æ¶æ¯ç³»ç»ï¼åºäºé«å¯ç¨åå¸å¼éç¾¤ææ¯ï¼æä¾ä½å»¶æ¶çãé«å¯é çæ¶æ¯åå¸ä¸è®¢éæå¡ã\n\n * Dubboï¼Apache Dubboâ¢ æ¯ä¸æ¬¾é«æ§è½ Java RPC æ¡æ¶ã\n\n * Seataï¼é¿éå·´å·´å¼æºäº§åï¼ä¸ä¸ªæäºä½¿ç¨çé«æ§è½å¾®æå¡åå¸å¼äºå¡è§£å³æ¹æ¡ã\n\n * Alibaba Cloud ACMï¼ä¸æ¬¾å¨åå¸å¼æ¶æç¯å¢ä¸­å¯¹åºç¨éç½®è¿è¡éä¸­ç®¡çåæ¨éçåºç¨éç½®ä¸­å¿äº§åã\n\n * Alibaba Cloud OSS: é¿éäºå¯¹è±¡å­å¨æå¡ï¼Object Storage Serviceï¼ç®ç§° OSSï¼ï¼æ¯é¿éäºæä¾çæµ·éãå®å¨ãä½ææ¬ãé«å¯é çäºå­å¨æå¡ãæ¨å¯ä»¥å¨ä»»ä½åºç¨ãä»»ä½æ¶é´ãä»»ä½å°ç¹å­å¨åè®¿é®ä»»æç±»åçæ°æ®ã\n\n * Alibaba Cloud SchedulerX: é¿éä¸­é´ä»¶å¢éå¼åçä¸æ¬¾åå¸å¼ä»»å¡è°åº¦äº§åï¼æä¾ç§çº§ãç²¾åãé«å¯é ãé«å¯ç¨çå®æ¶ï¼åºäº Cron è¡¨è¾¾å¼ï¼ä»»å¡è°åº¦æå¡ã\n\n * Alibaba Cloud SMS: è¦çå¨ççç­ä¿¡æå¡ï¼åå¥½ãé«æãæºè½çäºèåéè®¯è½åï¼å¸®å©ä¼ä¸è¿éæ­å»ºå®¢æ·è§¦è¾¾ééã",normalizedContent:"# ç®ä»\n\nspring cloud alibaba è´åäºæä¾å¾®æå¡å¼åçä¸ç«å¼è§£å³æ¹æ¡ãæ­¤é¡¹ç®åå«å¼ååå¸å¼åºç¨å¾®æå¡çå¿éç»ä»¶ï¼æ¹ä¾¿å¼åèéè¿ spring cloud ç¼ç¨æ¨¡åè½»æ¾ä½¿ç¨è¿äºç»ä»¶æ¥å¼ååå¸å¼åºç¨æå¡ã\n\nä¾æ spring cloud alibabaï¼æ¨åªéè¦æ·»å ä¸äºæ³¨è§£åå°ééç½®ï¼å°±å¯ä»¥å° spring cloud åºç¨æ¥å¥é¿éå¾®æå¡è§£å³æ¹æ¡ï¼éè¿é¿éä¸­é´ä»¶æ¥è¿éæ­å»ºåå¸å¼åºç¨ç³»ç»ã\n\n\n# ä¸»è¦åè½\n\n * æå¡éæµéçº§ï¼é»è®¤æ¯æ webservletãwebflux, openfeignãresttemplateãspring cloud gateway, zuul, dubbo å rocketmq éæµéçº§åè½çæ¥å¥ï¼å¯ä»¥å¨è¿è¡æ¶éè¿æ§å¶å°å®æ¶ä¿®æ¹éæµéçº§è§åï¼è¿æ¯ææ¥çéæµéçº§ metrics çæ§ã\n * æå¡æ³¨åä¸åç°ï¼éé spring cloud æå¡æ³¨åä¸åç°æ åï¼é»è®¤éæäº ribbon çæ¯æã\n * åå¸å¼éç½®ç®¡çï¼æ¯æåå¸å¼ç³»ç»ä¸­çå¤é¨åéç½®ï¼éç½®æ´æ¹æ¶èªå¨å·æ°ã\n * æ¶æ¯é©±å¨è½åï¼åºäº spring cloud stream ä¸ºå¾®æå¡åºç¨æå»ºæ¶æ¯é©±å¨è½åã\n * åå¸å¼äºå¡ï¼ä½¿ç¨ @globaltransactional æ³¨è§£ï¼ é«æå¹¶ä¸å¯¹ä¸å¡é¶ä¾µå¥å°è§£å³åå¸å¼äºå¡é®é¢ãã\n * é¿éäºå¯¹è±¡å­å¨ï¼é¿éäºæä¾çæµ·éãå®å¨ãä½ææ¬ãé«å¯é çäºå­å¨æå¡ãæ¯æå¨ä»»ä½åºç¨ãä»»ä½æ¶é´ãä»»ä½å°ç¹å­å¨åè®¿é®ä»»æç±»åçæ°æ®ã\n * åå¸å¼ä»»å¡è°åº¦ï¼æä¾ç§çº§ãç²¾åãé«å¯é ãé«å¯ç¨çå®æ¶ï¼åºäº cron è¡¨è¾¾å¼ï¼ä»»å¡è°åº¦æå¡ãåæ¶æä¾åå¸å¼çä»»å¡æ§è¡æ¨¡åï¼å¦ç½æ ¼ä»»å¡ãç½æ ¼ä»»å¡æ¯ææµ·éå­ä»»å¡åååéå°ææ workerï¼schedulerx-clientï¼ä¸æ§è¡ã\n * é¿éäºç­ä¿¡æå¡ï¼è¦çå¨ççç­ä¿¡æå¡ï¼åå¥½ãé«æãæºè½çäºèåéè®¯è½åï¼å¸®å©ä¼ä¸è¿éæ­å»ºå®¢æ·è§¦è¾¾ééã\n\n\n# ç»ä»¶\n\n * sentinelï¼ææµéä½ä¸ºåå¥ç¹ï¼ä»æµéæ§å¶ãçæ­éçº§ãç³»ç»è´è½½ä¿æ¤ç­å¤ä¸ªç»´åº¦ä¿æ¤æå¡çç¨³å®æ§ã\n\n * nacosï¼ä¸ä¸ªæ´æäºæå»ºäºåçåºç¨çå¨ææå¡åç°ãéç½®ç®¡çåæå¡ç®¡çå¹³å°ã\n\n * rocketmqï¼ä¸æ¬¾å¼æºçåå¸å¼æ¶æ¯ç³»ç»ï¼åºäºé«å¯ç¨åå¸å¼éç¾¤ææ¯ï¼æä¾ä½å»¶æ¶çãé«å¯é çæ¶æ¯åå¸ä¸è®¢éæå¡ã\n\n * dubboï¼apache dubboâ¢ æ¯ä¸æ¬¾é«æ§è½ java rpc æ¡æ¶ã\n\n * seataï¼é¿éå·´å·´å¼æºäº§åï¼ä¸ä¸ªæäºä½¿ç¨çé«æ§è½å¾®æå¡åå¸å¼äºå¡è§£å³æ¹æ¡ã\n\n * alibaba cloud acmï¼ä¸æ¬¾å¨åå¸å¼æ¶æç¯å¢ä¸­å¯¹åºç¨éç½®è¿è¡éä¸­ç®¡çåæ¨éçåºç¨éç½®ä¸­å¿äº§åã\n\n * alibaba cloud oss: é¿éäºå¯¹è±¡å­å¨æå¡ï¼object storage serviceï¼ç®ç§° ossï¼ï¼æ¯é¿éäºæä¾çæµ·éãå®å¨ãä½ææ¬ãé«å¯é çäºå­å¨æå¡ãæ¨å¯ä»¥å¨ä»»ä½åºç¨ãä»»ä½æ¶é´ãä»»ä½å°ç¹å­å¨åè®¿é®ä»»æç±»åçæ°æ®ã\n\n * alibaba cloud schedulerx: é¿éä¸­é´ä»¶å¢éå¼åçä¸æ¬¾åå¸å¼ä»»å¡è°åº¦äº§åï¼æä¾ç§çº§ãç²¾åãé«å¯é ãé«å¯ç¨çå®æ¶ï¼åºäº cron è¡¨è¾¾å¼ï¼ä»»å¡è°åº¦æå¡ã\n\n * alibaba cloud sms: è¦çå¨ççç­ä¿¡æå¡ï¼åå¥½ãé«æãæºè½çäºèåéè®¯è½åï¼å¸®å©ä¼ä¸è¿éæ­å»ºå®¢æ·è§¦è¾¾ééã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:47:02",lastUpdatedTimestamp:1644378422e3},{title:"æå¡æ³¨åä¸åç°",frontmatter:{title:"æå¡æ³¨åä¸åç°",date:"2022-02-09T11:45:40.000Z",permalink:"/pages/e48516/"},regularPath:"/16.Spring%20Cloud%20Alibaba/01.Spring%20Cloud%20Alibaba/02.%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0.html",relativePath:"16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/02.æå¡æ³¨åä¸åç°.md",key:"v-c1a66828",path:"/pages/e48516/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:14},{level:2,title:"ä»ä¹æ¯ Nacos",slug:"ä»ä¹æ¯-nacos",normalizedTitle:"ä»ä¹æ¯ nacos",charIndex:179},{level:2,title:"Nacos å°å¾",slug:"nacos-å°å¾",normalizedTitle:"nacos å°å¾",charIndex:1369},{level:2,title:"Nacos çæå¾",slug:"nacos-çæå¾",normalizedTitle:"nacos çæå¾",charIndex:1593},{level:2,title:"Nacos Docker å¿«éå¼å§",slug:"nacos-docker-å¿«éå¼å§",normalizedTitle:"nacos docker å¿«éå¼å§",charIndex:1911},{level:3,title:"æä½æ­¥éª¤",slug:"æä½æ­¥éª¤",normalizedTitle:"æä½æ­¥éª¤",charIndex:1933},{level:3,title:"Common property configuration",slug:"common-property-configuration",normalizedTitle:"common property configuration",charIndex:2869},{level:2,title:"Nacos + Grafana + Prometheus",slug:"nacos-grafana-prometheus",normalizedTitle:"nacos + grafana + prometheus",charIndex:4618},{level:2,title:"ç¸å³é¡¹ç®",slug:"ç¸å³é¡¹ç®",normalizedTitle:"ç¸å³é¡¹ç®",charIndex:4721}],headersStr:"æ¦è¿° ä»ä¹æ¯ Nacos Nacos å°å¾ Nacos çæå¾ Nacos Docker å¿«éå¼å§ æä½æ­¥éª¤ Common property configuration Nacos + Grafana + Prometheus ç¸å³é¡¹ç®",content:"# æå¡æ³¨åä¸åç°\n\n\n# æ¦è¿°\n\nNacos è´åäºå¸®å©æ¨åç°ãéç½®åç®¡çå¾®æå¡ãNacos æä¾äºä¸ç»ç®åæç¨çç¹æ§éï¼å¸®å©æ¨å¿«éå®ç°å¨ææå¡åç°ãæå¡éç½®ãæå¡åæ°æ®åæµéç®¡çã\n\nNacos å¸®å©æ¨æ´ææ·åå®¹æå°æå»ºãäº¤ä»åç®¡çå¾®æå¡å¹³å°ã Nacos æ¯æå»ºä»¥âæå¡âä¸ºä¸­å¿çç°ä»£åºç¨æ¶æ (ä¾å¦å¾®æå¡èå¼ãäºåçèå¼) çæå¡åºç¡è®¾æ½ã\n\n\n# ä»ä¹æ¯ Nacos\n\næå¡ï¼Serviceï¼æ¯ Nacos ä¸ççä¸ç­å¬æ°ãNacos æ¯æå ä¹ææä¸»æµç±»åçâæå¡âçåç°ãéç½®åç®¡çï¼\n\nKubernetes Service\n\ngRPC & Dubbo RPC Service\n\nSpring Cloud RESTful Service\n\nNacos çå³é®ç¹æ§åæ¬:\n\n * æå¡åç°åæå¡å¥åº·çæµ\n   \n   Nacos æ¯æåºäº DNS ååºäº RPC çæå¡åç°ãæå¡æä¾èä½¿ç¨ åçSDKãOpenAPIãæä¸ä¸ªç¬ç«çAgent TODOæ³¨å Service åï¼æå¡æ¶è´¹èå¯ä»¥ä½¿ç¨DNS TODO æHTTP&APIæ¥æ¾ååç°æå¡ã\n   \n   Nacos æä¾å¯¹æå¡çå®æ¶çå¥åº·æ£æ¥ï¼é»æ­¢åä¸å¥åº·çä¸»æºææå¡å®ä¾åéè¯·æ±ãNacos æ¯æä¼ è¾å± (PING æ TCP)ååºç¨å± (å¦ HTTPãMySQLãç¨æ·èªå®ä¹ï¼çå¥åº·æ£æ¥ã å¯¹äºå¤æçäºç¯å¢åç½ç»ææç¯å¢ä¸­ï¼å¦ VPCãè¾¹ç¼ç½ç»ç­ï¼æå¡çå¥åº·æ£æ¥ï¼Nacos æä¾äº agent ä¸æ¥æ¨¡å¼åæå¡ç«¯ä¸»å¨æ£æµ2ç§å¥åº·æ£æ¥æ¨¡å¼ãNacos è¿æä¾äºç»ä¸çå¥åº·æ£æ¥ä»ªè¡¨çï¼å¸®å©æ¨æ ¹æ®å¥åº·ç¶æç®¡çæå¡çå¯ç¨æ§åæµéã\n\n * å¨æéç½®æå¡\n   \n   å¨æéç½®æå¡å¯ä»¥è®©æ¨ä»¥ä¸­å¿åãå¤é¨ååå¨æåçæ¹å¼ç®¡çææç¯å¢çåºç¨éç½®åæå¡éç½®ã\n   \n   å¨æéç½®æ¶é¤äºéç½®åæ´æ¶éæ°é¨ç½²åºç¨åæå¡çéè¦ï¼è®©éç½®ç®¡çåå¾æ´å é«æåææ·ã\n   \n   éç½®ä¸­å¿åç®¡çè®©å®ç°æ ç¶ææå¡åå¾æ´ç®åï¼è®©æå¡æéå¼¹æ§æ©å±åå¾æ´å®¹æã\n   \n   Nacos æä¾äºä¸ä¸ªç®æ´æç¨çUI (æ§å¶å°æ ·ä¾ Demo) å¸®å©æ¨ç®¡çææçæå¡ååºç¨çéç½®ãNacos è¿æä¾åæ¬éç½®çæ¬è·è¸ªãéä¸éåå¸ãä¸é®åæ»éç½®ä»¥åå®¢æ·ç«¯éç½®æ´æ°ç¶æè·è¸ªå¨åçä¸ç³»åå¼ç®±å³ç¨çéç½®ç®¡çç¹æ§ï¼å¸®å©æ¨æ´å®å¨å°å¨çäº§ç¯å¢ä¸­ç®¡çéç½®åæ´åéä½éç½®åæ´å¸¦æ¥çé£é©ã\n\n * å¨æ DNS æå¡\n   \n   å¨æ DNS æå¡æ¯ææéè·¯ç±ï¼è®©æ¨æ´å®¹æå°å®ç°ä¸­é´å±è´è½½åè¡¡ãæ´çµæ´»çè·¯ç±ç­ç¥ãæµéæ§å¶ä»¥åæ°æ®ä¸­å¿åç½çç®åDNSè§£ææå¡ãå¨æDNSæå¡è¿è½è®©æ¨æ´å®¹æå°å®ç°ä»¥ DNS åè®®ä¸ºåºç¡çæå¡åç°ï¼ä»¥å¸®å©æ¨æ¶é¤è¦åå°ååç§ææå¡åç° API ä¸çé£é©ã\n   \n   Nacos æä¾äºä¸äºç®åç DNS APIs TODO å¸®å©æ¨ç®¡çæå¡çå³èåååå¯ç¨ç IP:PORT åè¡¨.\n\n * æå¡åå¶åæ°æ®ç®¡ç\n   \n   Nacos è½è®©æ¨ä»å¾®æå¡å¹³å°å»ºè®¾çè§è§ç®¡çæ°æ®ä¸­å¿çæææå¡ååæ°æ®ï¼åæ¬ç®¡çæå¡çæè¿°ãçå½å¨æãæå¡çéæä¾èµåæãæå¡çå¥åº·ç¶æãæå¡çæµéç®¡çãè·¯ç±åå®å¨ç­ç¥ãæå¡ç SLA ä»¥åæé¦è¦ç metrics ç»è®¡æ°æ®ã\n\n * æ´å¤çç¹æ§åè¡¨ ...\n\n\n# Nacos å°å¾\n\nä¸å¾çæ Nacosï¼ä¸é¢æ¶æé¨åä¼è¯¦ç»ä»ç»ã\n\n * ç¹æ§å¤§å¾ï¼è¦ä»åè½ç¹æ§ï¼éåè½ç¹æ§ï¼å¨é¢ä»ç»æä»¬è¦è§£çé®é¢åçç¹æ§è¯æ±\n * æ¶æå¤§å¾ï¼éè¿æ¸æ°æ¶æï¼è®©æ¨å¿«éè¿å¥ Nacos ä¸ç\n * ä¸å¡å¤§å¾ï¼å©ç¨å½åç¹æ§å¯ä»¥æ¯æçä¸å¡åºæ¯ï¼åå¶æä½³å®è·µ\n * çæå¤§å¾ï¼ç³»ç»æ¢³ç Nacos åä¸»æµææ¯çæçå³ç³»\n * ä¼å¿å¤§å¾ï¼å±ç¤º Nacos æ ¸å¿ç«äºå\n * æç¥å¤§å¾ï¼è¦ä»æç¥å°ææ¯å±é¢è®² Nacos çå®è§ä¼å¿\n\n\n# Nacos çæå¾\n\n\n\nå¦ Nacos å¨æ¯å¾æç¤ºï¼Nacos æ ç¼æ¯æä¸äºä¸»æµçå¼æºçæï¼ä¾å¦\n\n * Spring Cloud\n * Apache Dubbo and Dubbo Mesh TODO\n * Kubernetes and CNCF TODOã\n\nä½¿ç¨ Nacos ç®åæå¡åç°ãéç½®ç®¡çãæå¡æ²»çåç®¡ççè§£å³æ¹æ¡ï¼è®©å¾®æå¡çåç°ãç®¡çãå±äº«ãç»åæ´å å®¹æã\n\nå³äºå¦ä½å¨è¿äºçæä¸­ä½¿ç¨ Nacosï¼è¯·åèä»¥ä¸ææ¡£ï¼\n\nNacosä¸Spring Cloudä¸èµ·ä½¿ç¨\n\nNacosä¸Kubernetesä¸èµ·ä½¿ç¨\n\nNacosä¸Dubboä¸èµ·ä½¿ç¨\n\nNacosä¸gRPCä¸èµ·ä½¿ç¨\n\nNacosä¸Istioä¸èµ·ä½¿ç¨\n\n\n# Nacos Docker å¿«éå¼å§\n\n\n# æä½æ­¥éª¤\n\n * Clone é¡¹ç®\n   \n   git clone https://github.com/nacos-group/nacos-docker.git\n   cd nacos-docker\n   \n\n * åæºæ¨¡å¼ Derby\n   \n   docker-compose -f example/standalone-derby.yaml up\n   \n\n * åæºæ¨¡å¼ Mysql\n   \n   docker-compose -f example/standalone-mysql.yaml up\n   \n\n * éç¾¤æ¨¡å¼\n   \n   docker-compose -f example/cluster-hostname.yaml up \n   \n\n * æå¡æ³¨å\n   \n   curl -X POST 'http://127.0.0.1:8848/nacos/v1/ns/instance?serviceName=nacos.naming.serviceName&ip=20.18.7.10&port=8080'\n   \n\n * æå¡åç°\n   \n   curl -X GET 'http://127.0.0.1:8848/nacos/v1/ns/instances?serviceName=nacos.naming.serviceName'\n   \n\n * åå¸éç½®\n   \n   curl -X POST \"http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&group=test&content=helloWorld\"\n   \n\n * è·åéç½®\n   \n     curl -X GET \"http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&group=test\"\n   \n\n * Nacos æ§å¶å°\n   \n   linkï¼http://127.0.0.1:8848/nacos/\n   \n   æç¤º\n   \n   é»è®¤è´¦å·å¯ç ä¸º nacos/nacos\n\nç»å½é¡µ\n\næ§å¶å°\n\n\n# Common property configuration\n\nNAME                            DESCRIPTION                       OPTION\nMODE                            clusteræ¨¡å¼/standaloneæ¨¡å¼            cluster/standalone default cluster\nNACOS_SERVERS                   nacos clusterå°å                   eg. ip1,ip2,ip3\nPREFER_HOST_MODE                æ¯å¦æ¯æhostname                      hostname/ip default ip\nNACOS_SERVER_PORT               nacosæå¡å¨ç«¯å£                        default 8848\nNACOS_SERVER_IP                 å¤ç½å¡ä¸çèªå®ä¹nacosæå¡å¨IP                \nSPRING_DATASOURCE_PLATFORM      standalone æ¯æ mysql               mysql / empty default empty\nMYSQL_MASTER_SERVICE_HOST       mysql ä¸»èç¹host                     \nMYSQL_MASTER_SERVICE_PORT       mysql ä¸»èç¹ç«¯å£                       default : 3306\nMYSQL_MASTER_SERVICE_DB_NAME    mysql ä¸»èç¹æ°æ®åº                      \nMYSQL_MASTER_SERVICE_USER       æ°æ®åºç¨æ·å                            \nMYSQL_MASTER_SERVICE_PASSWORD   æ°æ®åºå¯ç                              \nMYSQL_SLAVE_SERVICE_HOST        mysqlä»èç¹host                      \nMYSQL_SLAVE_SERVICE_PORT        mysqlä»èç¹ç«¯å£                        default :3306\nMYSQL_DATABASE_NUM              æ°æ®åºæ°é                             default :2\nJVM_XMS                         -Xms                              default :2g\nJVM_XMX                         -Xmx                              default :2g\nJVM_XMN                         -Xmn                              default :1g\nJVM_MS                          -XX:MetaspaceSize                 default :128m\nJVM_MMS                         -XX:MaxMetaspaceSize              default :320m\nNACOS_DEBUG                     å¼å¯è¿ç¨è°è¯                            y/n default :n\nTOMCAT_ACCESSLOG_ENABLED        server.tomcat.accesslog.enabled   default :false\n\n\n# Nacos + Grafana + Prometheus\n\nåèï¼Nacosçæ§æå\n\nNote: grafanaåå»ºä¸ä¸ªæ°æ°æ®æºæ¶ï¼æ°æ®æºå°åå¿é¡»æ¯ http://prometheus:9090\n\n\n# ç¸å³é¡¹ç®\n\n * Nacos\n * Nacos Docker",normalizedContent:"# æå¡æ³¨åä¸åç°\n\n\n# æ¦è¿°\n\nnacos è´åäºå¸®å©æ¨åç°ãéç½®åç®¡çå¾®æå¡ãnacos æä¾äºä¸ç»ç®åæç¨çç¹æ§éï¼å¸®å©æ¨å¿«éå®ç°å¨ææå¡åç°ãæå¡éç½®ãæå¡åæ°æ®åæµéç®¡çã\n\nnacos å¸®å©æ¨æ´ææ·åå®¹æå°æå»ºãäº¤ä»åç®¡çå¾®æå¡å¹³å°ã nacos æ¯æå»ºä»¥âæå¡âä¸ºä¸­å¿çç°ä»£åºç¨æ¶æ (ä¾å¦å¾®æå¡èå¼ãäºåçèå¼) çæå¡åºç¡è®¾æ½ã\n\n\n# ä»ä¹æ¯ nacos\n\næå¡ï¼serviceï¼æ¯ nacos ä¸ççä¸ç­å¬æ°ãnacos æ¯æå ä¹ææä¸»æµç±»åçâæå¡âçåç°ãéç½®åç®¡çï¼\n\nkubernetes service\n\ngrpc & dubbo rpc service\n\nspring cloud restful service\n\nnacos çå³é®ç¹æ§åæ¬:\n\n * æå¡åç°åæå¡å¥åº·çæµ\n   \n   nacos æ¯æåºäº dns ååºäº rpc çæå¡åç°ãæå¡æä¾èä½¿ç¨ åçsdkãopenapiãæä¸ä¸ªç¬ç«çagent todoæ³¨å service åï¼æå¡æ¶è´¹èå¯ä»¥ä½¿ç¨dns todo æhttp&apiæ¥æ¾ååç°æå¡ã\n   \n   nacos æä¾å¯¹æå¡çå®æ¶çå¥åº·æ£æ¥ï¼é»æ­¢åä¸å¥åº·çä¸»æºææå¡å®ä¾åéè¯·æ±ãnacos æ¯æä¼ è¾å± (ping æ tcp)ååºç¨å± (å¦ httpãmysqlãç¨æ·èªå®ä¹ï¼çå¥åº·æ£æ¥ã å¯¹äºå¤æçäºç¯å¢åç½ç»ææç¯å¢ä¸­ï¼å¦ vpcãè¾¹ç¼ç½ç»ç­ï¼æå¡çå¥åº·æ£æ¥ï¼nacos æä¾äº agent ä¸æ¥æ¨¡å¼åæå¡ç«¯ä¸»å¨æ£æµ2ç§å¥åº·æ£æ¥æ¨¡å¼ãnacos è¿æä¾äºç»ä¸çå¥åº·æ£æ¥ä»ªè¡¨çï¼å¸®å©æ¨æ ¹æ®å¥åº·ç¶æç®¡çæå¡çå¯ç¨æ§åæµéã\n\n * å¨æéç½®æå¡\n   \n   å¨æéç½®æå¡å¯ä»¥è®©æ¨ä»¥ä¸­å¿åãå¤é¨ååå¨æåçæ¹å¼ç®¡çææç¯å¢çåºç¨éç½®åæå¡éç½®ã\n   \n   å¨æéç½®æ¶é¤äºéç½®åæ´æ¶éæ°é¨ç½²åºç¨åæå¡çéè¦ï¼è®©éç½®ç®¡çåå¾æ´å é«æåææ·ã\n   \n   éç½®ä¸­å¿åç®¡çè®©å®ç°æ ç¶ææå¡åå¾æ´ç®åï¼è®©æå¡æéå¼¹æ§æ©å±åå¾æ´å®¹æã\n   \n   nacos æä¾äºä¸ä¸ªç®æ´æç¨çui (æ§å¶å°æ ·ä¾ demo) å¸®å©æ¨ç®¡çææçæå¡ååºç¨çéç½®ãnacos è¿æä¾åæ¬éç½®çæ¬è·è¸ªãéä¸éåå¸ãä¸é®åæ»éç½®ä»¥åå®¢æ·ç«¯éç½®æ´æ°ç¶æè·è¸ªå¨åçä¸ç³»åå¼ç®±å³ç¨çéç½®ç®¡çç¹æ§ï¼å¸®å©æ¨æ´å®å¨å°å¨çäº§ç¯å¢ä¸­ç®¡çéç½®åæ´åéä½éç½®åæ´å¸¦æ¥çé£é©ã\n\n * å¨æ dns æå¡\n   \n   å¨æ dns æå¡æ¯ææéè·¯ç±ï¼è®©æ¨æ´å®¹æå°å®ç°ä¸­é´å±è´è½½åè¡¡ãæ´çµæ´»çè·¯ç±ç­ç¥ãæµéæ§å¶ä»¥åæ°æ®ä¸­å¿åç½çç®ådnsè§£ææå¡ãå¨ædnsæå¡è¿è½è®©æ¨æ´å®¹æå°å®ç°ä»¥ dns åè®®ä¸ºåºç¡çæå¡åç°ï¼ä»¥å¸®å©æ¨æ¶é¤è¦åå°ååç§ææå¡åç° api ä¸çé£é©ã\n   \n   nacos æä¾äºä¸äºç®åç dns apis todo å¸®å©æ¨ç®¡çæå¡çå³èåååå¯ç¨ç ip:port åè¡¨.\n\n * æå¡åå¶åæ°æ®ç®¡ç\n   \n   nacos è½è®©æ¨ä»å¾®æå¡å¹³å°å»ºè®¾çè§è§ç®¡çæ°æ®ä¸­å¿çæææå¡ååæ°æ®ï¼åæ¬ç®¡çæå¡çæè¿°ãçå½å¨æãæå¡çéæä¾èµåæãæå¡çå¥åº·ç¶æãæå¡çæµéç®¡çãè·¯ç±åå®å¨ç­ç¥ãæå¡ç sla ä»¥åæé¦è¦ç metrics ç»è®¡æ°æ®ã\n\n * æ´å¤çç¹æ§åè¡¨ ...\n\n\n# nacos å°å¾\n\nä¸å¾çæ nacosï¼ä¸é¢æ¶æé¨åä¼è¯¦ç»ä»ç»ã\n\n * ç¹æ§å¤§å¾ï¼è¦ä»åè½ç¹æ§ï¼éåè½ç¹æ§ï¼å¨é¢ä»ç»æä»¬è¦è§£çé®é¢åçç¹æ§è¯æ±\n * æ¶æå¤§å¾ï¼éè¿æ¸æ°æ¶æï¼è®©æ¨å¿«éè¿å¥ nacos ä¸ç\n * ä¸å¡å¤§å¾ï¼å©ç¨å½åç¹æ§å¯ä»¥æ¯æçä¸å¡åºæ¯ï¼åå¶æä½³å®è·µ\n * çæå¤§å¾ï¼ç³»ç»æ¢³ç nacos åä¸»æµææ¯çæçå³ç³»\n * ä¼å¿å¤§å¾ï¼å±ç¤º nacos æ ¸å¿ç«äºå\n * æç¥å¤§å¾ï¼è¦ä»æç¥å°ææ¯å±é¢è®² nacos çå®è§ä¼å¿\n\n\n# nacos çæå¾\n\n\n\nå¦ nacos å¨æ¯å¾æç¤ºï¼nacos æ ç¼æ¯æä¸äºä¸»æµçå¼æºçæï¼ä¾å¦\n\n * spring cloud\n * apache dubbo and dubbo mesh todo\n * kubernetes and cncf todoã\n\nä½¿ç¨ nacos ç®åæå¡åç°ãéç½®ç®¡çãæå¡æ²»çåç®¡ççè§£å³æ¹æ¡ï¼è®©å¾®æå¡çåç°ãç®¡çãå±äº«ãç»åæ´å å®¹æã\n\nå³äºå¦ä½å¨è¿äºçæä¸­ä½¿ç¨ nacosï¼è¯·åèä»¥ä¸ææ¡£ï¼\n\nnacosä¸spring cloudä¸èµ·ä½¿ç¨\n\nnacosä¸kubernetesä¸èµ·ä½¿ç¨\n\nnacosä¸dubboä¸èµ·ä½¿ç¨\n\nnacosä¸grpcä¸èµ·ä½¿ç¨\n\nnacosä¸istioä¸èµ·ä½¿ç¨\n\n\n# nacos docker å¿«éå¼å§\n\n\n# æä½æ­¥éª¤\n\n * clone é¡¹ç®\n   \n   git clone https://github.com/nacos-group/nacos-docker.git\n   cd nacos-docker\n   \n\n * åæºæ¨¡å¼ derby\n   \n   docker-compose -f example/standalone-derby.yaml up\n   \n\n * åæºæ¨¡å¼ mysql\n   \n   docker-compose -f example/standalone-mysql.yaml up\n   \n\n * éç¾¤æ¨¡å¼\n   \n   docker-compose -f example/cluster-hostname.yaml up \n   \n\n * æå¡æ³¨å\n   \n   curl -x post 'http://127.0.0.1:8848/nacos/v1/ns/instance?servicename=nacos.naming.servicename&ip=20.18.7.10&port=8080'\n   \n\n * æå¡åç°\n   \n   curl -x get 'http://127.0.0.1:8848/nacos/v1/ns/instances?servicename=nacos.naming.servicename'\n   \n\n * åå¸éç½®\n   \n   curl -x post \"http://127.0.0.1:8848/nacos/v1/cs/configs?dataid=nacos.cfg.dataid&group=test&content=helloworld\"\n   \n\n * è·åéç½®\n   \n     curl -x get \"http://127.0.0.1:8848/nacos/v1/cs/configs?dataid=nacos.cfg.dataid&group=test\"\n   \n\n * nacos æ§å¶å°\n   \n   linkï¼http://127.0.0.1:8848/nacos/\n   \n   æç¤º\n   \n   é»è®¤è´¦å·å¯ç ä¸º nacos/nacos\n\nç»å½é¡µ\n\næ§å¶å°\n\n\n# common property configuration\n\nname                            description                       option\nmode                            clusteræ¨¡å¼/standaloneæ¨¡å¼            cluster/standalone default cluster\nnacos_servers                   nacos clusterå°å                   eg. ip1,ip2,ip3\nprefer_host_mode                æ¯å¦æ¯æhostname                      hostname/ip default ip\nnacos_server_port               nacosæå¡å¨ç«¯å£                        default 8848\nnacos_server_ip                 å¤ç½å¡ä¸çèªå®ä¹nacosæå¡å¨ip                \nspring_datasource_platform      standalone æ¯æ mysql               mysql / empty default empty\nmysql_master_service_host       mysql ä¸»èç¹host                     \nmysql_master_service_port       mysql ä¸»èç¹ç«¯å£                       default : 3306\nmysql_master_service_db_name    mysql ä¸»èç¹æ°æ®åº                      \nmysql_master_service_user       æ°æ®åºç¨æ·å                            \nmysql_master_service_password   æ°æ®åºå¯ç                              \nmysql_slave_service_host        mysqlä»èç¹host                      \nmysql_slave_service_port        mysqlä»èç¹ç«¯å£                        default :3306\nmysql_database_num              æ°æ®åºæ°é                             default :2\njvm_xms                         -xms                              default :2g\njvm_xmx                         -xmx                              default :2g\njvm_xmn                         -xmn                              default :1g\njvm_ms                          -xx:metaspacesize                 default :128m\njvm_mms                         -xx:maxmetaspacesize              default :320m\nnacos_debug                     å¼å¯è¿ç¨è°è¯                            y/n default :n\ntomcat_accesslog_enabled        server.tomcat.accesslog.enabled   default :false\n\n\n# nacos + grafana + prometheus\n\nåèï¼nacosçæ§æå\n\nnote: grafanaåå»ºä¸ä¸ªæ°æ°æ®æºæ¶ï¼æ°æ®æºå°åå¿é¡»æ¯ http://prometheus:9090\n\n\n# ç¸å³é¡¹ç®\n\n * nacos\n * nacos docker",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Nacos discovery",frontmatter:{title:"Nacos discovery",date:"2022-02-09T11:45:40.000Z",permalink:"/pages/01bdf6/"},regularPath:"/16.Spring%20Cloud%20Alibaba/01.Spring%20Cloud%20Alibaba/03.Nacos%20discovery.html",relativePath:"16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/03.Nacos discovery.md",key:"v-ed96cd98",path:"/pages/01bdf6/",headers:[{level:2,title:"Spring Cloud Alibaba Nacos Discovery",slug:"spring-cloud-alibaba-nacos-discovery",normalizedTitle:"spring cloud alibaba nacos discovery",charIndex:22},{level:3,title:"æå¡æ³¨ååç°: Nacos Discovery Starter",slug:"æå¡æ³¨ååç°-nacos-discovery-starter",normalizedTitle:"æå¡æ³¨ååç°: nacos discovery starter",charIndex:202},{level:3,title:"æå¡ç EndPoint",slug:"æå¡ç-endpoint",normalizedTitle:"æå¡ç endpoint",charIndex:4264},{level:3,title:"å¯å¨ä¸ä¸ª Consumer åºç¨",slug:"å¯å¨ä¸ä¸ª-consumer-åºç¨",normalizedTitle:"å¯å¨ä¸ä¸ª consumer åºç¨",charIndex:5890},{level:3,title:"å³äº Nacos Starter æ´å¤çéç½®é¡¹ä¿¡æ¯",slug:"å³äº-nacos-starter-æ´å¤çéç½®é¡¹ä¿¡æ¯",normalizedTitle:"å³äº nacos starter æ´å¤çéç½®é¡¹ä¿¡æ¯",charIndex:7626}],headersStr:"Spring Cloud Alibaba Nacos Discovery æå¡æ³¨ååç°: Nacos Discovery Starter æå¡ç EndPoint å¯å¨ä¸ä¸ª Consumer åºç¨ å³äº Nacos Starter æ´å¤çéç½®é¡¹ä¿¡æ¯",content:'# Nacos discovery\n\n\n# Spring Cloud Alibaba Nacos Discovery\n\nè¯¥é¡¹ç®éè¿èªå¨éç½®ä»¥åå¶ä» Spring ç¼ç¨æ¨¡åçä¹ æ¯ç¨æ³ä¸º Spring Boot åºç¨ç¨åºå¨æå¡æ³¨åä¸åç°æ¹é¢æä¾å Nacos çæ ç¼éæã éè¿ä¸äºç®åçæ³¨è§£ï¼æ¨å¯ä»¥å¿«éæ¥æ³¨åä¸ä¸ªæå¡ï¼å¹¶ä½¿ç¨ç»è¿ååä¸èéªç Nacos ç»ä»¶æ¥ä½ä¸ºå¤§è§æ¨¡åå¸å¼ç³»ç»çæå¡æ³¨åä¸­å¿ã\n\n\n# æå¡æ³¨ååç°: Nacos Discovery Starter\n\næå¡åç°æ¯å¾®æå¡æ¶æä½ç³»ä¸­æå³é®çç»ä»¶ä¹ä¸ãå¦æå°è¯çç¨æå¨çæ¹å¼æ¥ç»æ¯ä¸ä¸ªå®¢æ·ç«¯æ¥éç½®æææå¡æä¾èçæå¡åè¡¨æ¯ä¸ä»¶éå¸¸å°é¾çäºï¼èä¸ä¹ä¸å©äº æå¡çå¨ææ©ç¼©å®¹ãNacos Discovery Starter å¯ä»¥å¸®å©æ¨å°æå¡èªå¨æ³¨åå° Nacos æå¡ç«¯å¹¶ä¸è½å¤å¨ææç¥åå·æ°æä¸ªæå¡å®ä¾çæå¡åè¡¨ãé¤æ­¤ä¹å¤ï¼Nacos Discovery Starter ä¹å°æå¡å®ä¾èªèº«çä¸äºåæ°æ®ä¿¡æ¯-ä¾å¦ hostï¼port,å¥åº·æ£æ¥URLï¼ä¸»é¡µç­-æ³¨åå° Nacos ãNacos çè·ååå¯å¨æ¹å¼å¯ä»¥åè Nacos å®ç½ã\n\n# å¦ä½å¼å¥ Nacos Discovery Starter\n\nå¦æè¦å¨æ¨çé¡¹ç®ä¸­ä½¿ç¨ Nacos æ¥å®ç°æå¡åç°ï¼ä½¿ç¨ group ID ä¸º com.alibaba.cloud å artifact ID ä¸º spring-cloud-starter-alibaba-nacos-discovery ç starterã\n\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n\n\n# å¯å¨ä¸ä¸ª Provider åºç¨\n\nä»¥ä¸æ­¥éª¤åæ¨å±ç¤ºäºå¦ä½å°ä¸ä¸ªæå¡æ³¨åå° Nacosã\n\n 1. pom.xmlçéç½®ãä¸ä¸ªå®æ´ç pom.xml éç½®å¦ä¸æç¤ºï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>open.source.test</groupId>\n    <artifactId>nacos-discovery-test</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <name>nacos-discovery-test</name>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>${spring.boot.version}</version>\n        <relativePath/>\n    </parent>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <java.version>1.8</java.version>\n    </properties>\n\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>${spring.cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupId>com.alibaba.cloud</groupId>\n                <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n                <version>${spring.cloud.alibaba.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-actuator</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>com.alibaba.cloud</groupId>\n            <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n\n 1. application.properties éç½®ãä¸äºå³äº Nacos åºæ¬çéç½®ä¹å¿é¡»å¨ application.properties(ä¹å¯ä»¥æ¯application.yaml)éç½®ï¼å¦ä¸æç¤ºï¼ application.properties\n\nserver.port=8081\nspring.application.name=nacos-producer\nspring.cloud.nacos.discovery.server-addr=127.0.0.1:8848\nmanagement.endpoints.web.exposure.include=*\n\n\nNOTE   å¦æä¸æ³ä½¿ç¨ NACOS ä½ä¸ºæ¨çæå¡æ³¨åä¸åç°ï¼å¯ä»¥å°\n       SPRING.CLOUD.NACOS.DISCOVERY.ENABLED è®¾ç½®ä¸º FALSEã\n\n 1. å¯å¨ Provider ç¤ºä¾ãå¦ä¸æç¤ºï¼\n\n@SpringBootApplication\n@EnableDiscoveryClient\npublic class NacosProviderDemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(NacosProducerDemoApplication.class, args);\n    }\n\n    @RestController\n    public class EchoController {\n        @GetMapping(value = "/echo/{string}")\n        public String echo(@PathVariable String string) {\n            return "Hello Nacos Discovery " + string;\n        }\n    }\n}\n\n\nè¿ä¸ªæ¶åä½ å°±å¯ä»¥å¨ Nacosçæ§å¶å°ä¸çå°æ³¨åä¸æ¥çæå¡ä¿¡æ¯äºã\n\nNOTE   åå¯å¨ PROVIDER åºç¨ä¹å è¯·åå° NACOS æå¡å¯å¨ãå·ä½å¯å¨æ¹å¼å¯åè NACOS å®ç½ã\n\n\n# æå¡ç EndPoint\n\nspring-cloud-starter-alibaba-nacos-discovery å¨å®ç°çæ¶åæä¾äºä¸ä¸ªEndPoint,EndPointçè®¿é®å°åä¸º http://ip:port/actuator/nacos-discoveryã EndPoint çä¿¡æ¯ä¸»è¦æä¾äºä¸¤ç±»:\n\n1ãsubscribe: æ¾ç¤ºäºå½åæåªäºæå¡è®¢éè\n2ãNacosDiscoveryProperties: æ¾ç¤ºäºå½åæå¡å®ä¾å³äº Nacos çåºç¡éç½®\n\n\nä¸ä¸ªæå¡å®ä¾è®¿é® EndPoint çä¿¡æ¯å¦ä¸æç¤ºï¼\n\n{\n  "subscribe": [\n    {\n      "jsonFromServer": "",\n      "name": "nacos-provider",\n      "clusters": "",\n      "cacheMillis": 10000,\n      "hosts": [\n        {\n          "instanceId": "30.5.124.156#8081#DEFAULT#nacos-provider",\n          "ip": "30.5.124.156",\n          "port": 8081,\n          "weight": 1.0,\n          "healthy": true,\n          "enabled": true,\n          "cluster": {\n            "serviceName": null,\n            "name": null,\n            "healthChecker": {\n              "type": "TCP"\n            },\n            "defaultPort": 80,\n            "defaultCheckPort": 80,\n            "useIPPort4Check": true,\n            "metadata": {\n\n            }\n          },\n          "service": null,\n          "metadata": {\n\n          }\n        }\n      ],\n      "lastRefTime": 1541755293119,\n      "checksum": "e5a699c9201f5328241c178e804657e11541755293119",\n      "allIPs": false,\n      "key": "nacos-producer",\n      "valid": true\n    }\n  ],\n  "NacosDiscoveryProperties": {\n    "serverAddr": "127.0.0.1:8848",\n    "endpoint": "",\n    "namespace": "",\n    "logName": "",\n    "service": "nacos-provider",\n    "weight": 1.0,\n    "clusterName": "DEFAULT",\n    "metadata": {\n\n    },\n    "registerEnabled": true,\n    "ip": "30.5.124.201",\n    "networkInterface": "",\n    "port": 8082,\n    "secure": false,\n    "accessKey": "",\n    "secretKey": ""\n  }\n}\n\n\n\n# å¯å¨ä¸ä¸ª Consumer åºç¨\n\nConsumer çåºç¨å¯è½è¿æ²¡åå¯å¨ä¸ä¸ª Provider åºç¨é£ä¹ç®åãå ä¸ºå¨ Consumer ç«¯éè¦å»è°ç¨ Provider ç«¯æä¾çREST æå¡ãä¾å­ä¸­æä»¬ä½¿ç¨æåå§çä¸ç§æ¹å¼ï¼ å³æ¾ç¤ºçä½¿ç¨ LoadBalanceClient å RestTemolate ç»åçæ¹å¼æ¥è®¿é®ã pom.xml å application.properties çéç½®å¯ä»¥åè 1.2 å°ç»ãå¯å¨ä¸ä¸ª Consumeråºç¨çç¤ºä¾ä»£ç å¦ä¸æç¤ºï¼\n\nNOTE   éè¿å¸¦æè´è½½åè¡¡çRESTTEMPLATE å FEIGNCLIENT ä¹æ¯å¯ä»¥è®¿é®çã\n\n@SpringBootApplication\n@EnableDiscoveryClient\npublic class NacosConsumerApp {\n\n    @RestController\n    public class NacosController{\n\n        @Autowired\n        private LoadBalancerClient loadBalancerClient;\n        @Autowired\n        private RestTemplate restTemplate;\n\n        @Value("${spring.application.name}")\n        private String appName;\n\n        @GetMapping("/echo/app-name")\n        public String echoAppName(){\n            //ä½¿ç¨ LoadBalanceClient å RestTemolate ç»åçæ¹å¼æ¥è®¿é®\n            ServiceInstance serviceInstance = loadBalancerClient.choose("nacos-provider");\n            String url = String.format("http://%s:%s/echo/%s",serviceInstance.getHost(),serviceInstance.getPort(),appName);\n            System.out.println("request url:"+url);\n            return restTemplate.getForObject(url,String.class);\n        }\n\n    }\n\n    //å®ä¾å RestTemplate å®ä¾\n    @Bean\n    public RestTemplate restTemplate(){\n\n        return new RestTemplate();\n    }\n\n    public static void main(String[] args) {\n\n        SpringApplication.run(NacosConsumerApp.class,args);\n    }\n}\n\n\nè¿ä¸ªä¾å­ä¸­æä»¬æ³¨å¥äºä¸ä¸ª LoadBalancerClient çå®ä¾ï¼å¹¶ä¸æå¨çå®ä¾åä¸ä¸ª RestTemplateï¼åæ¶å° spring.application.name çéç½®å¼ æ³¨å¥å°åºç¨ä¸­æ¥ï¼ ç®çæ¯è°ç¨ Provider æä¾çæå¡æ¶ï¼å¸æå°å½åéç½®çåºç¨åç»æ¾ç¤ºåºæ¥ã\n\nNOTE   å¨å¯å¨ CONSUMER åºç¨ä¹åè¯·åå° NACOS æå¡å¯å¨å¥½ãå·ä½å¯å¨æ¹å¼å¯åè NACOS å®ç½ã\n\nå¯å¨åï¼è®¿é® Consumer æä¾åºæ¥ç http://ip:port/echo/app-name æ¥å£ãæè¿éæµè¯å¯å¨ç portæ¯ 8082ãè®¿é®ç»æå¦ä¸æç¤ºï¼\n\nè®¿é®å°åï¼http://127.0.0.1:8082/echo/app-name\nè®¿é®ç»æï¼Hello Nacos Discovery nacos-consumer\n\n\n\n# å³äº Nacos Starter æ´å¤çéç½®é¡¹ä¿¡æ¯\n\næ´å¤å³äº spring-cloud-starter-alibaba-nacos-discovery ç starter éç½®é¡¹å¦ä¸æç¤º:\n\néç½®é¡¹               KEY                                              é»è®¤å¼                          è¯´æ\næå¡ç«¯å°å             spring.cloud.nacos.discovery.server-addr         æ                             Nacos Server å¯å¨çå¬çipå°ååç«¯å£\næå¡å               spring.cloud.nacos.discovery.service             ${spring.application.name}   ç»å½åçæå¡å½å\næå¡åç»              spring.cloud.nacos.discovery.group               DEFAULT_GROUP                è®¾ç½®æå¡æå¤çåç»\næé                spring.cloud.nacos.discovery.weight              1                            åå¼èå´ 1 å° 100ï¼æ°å¼è¶å¤§ï¼æéè¶å¤§\nç½å¡å               spring.cloud.nacos.discovery.network-interface   æ                             å½IPæªéç½®æ¶ï¼æ³¨åçIPä¸ºæ­¤ç½å¡æå¯¹åºçIPå°åï¼å¦ææ­¤é¡¹ä¹æªéç½®ï¼åé»è®¤åç¬¬ä¸åç½å¡çå°å\næ³¨åçIPå°å           spring.cloud.nacos.discovery.ip                  æ                             ä¼åçº§æé«\næ³¨åçç«¯å£             spring.cloud.nacos.discovery.port                -1                           é»è®¤æåµä¸ä¸ç¨éç½®ï¼ä¼èªå¨æ¢æµ\nå½åç©ºé´              spring.cloud.nacos.discovery.namespace           æ                             å¸¸ç¨åºæ¯ä¹ä¸æ¯ä¸åç¯å¢çæ³¨åçåºåéç¦»ï¼ä¾å¦å¼åæµè¯ç¯å¢åçäº§ç¯å¢çèµæºï¼å¦éç½®ãæå¡ï¼éç¦»ç­ã\nAccessKey         spring.cloud.nacos.discovery.access-key          æ                             å½è¦ä¸é¿éäºæ¶ï¼é¿éäºä¸é¢çä¸ä¸ªäºè´¦å·å\nSecretKey         spring.cloud.nacos.discovery.secret-key          æ                             å½è¦ä¸é¿éäºæ¶ï¼é¿éäºä¸é¢çä¸ä¸ªäºè´¦å·å¯ç \nMetadata          spring.cloud.nacos.discovery.metadata            æ                             ä½¿ç¨Mapæ ¼å¼éç½®ï¼ç¨æ·å¯ä»¥æ ¹æ®èªå·±çéè¦èªå®ä¹ä¸äºåæå¡ç¸å³çåæ°æ®ä¿¡æ¯\næ¥å¿æä»¶å             spring.cloud.nacos.discovery.log-name            æ                             \néç¾¤                spring.cloud.nacos.discovery.cluster-name        DEFAULT                      éç½®æNacoséç¾¤åç§°\næ¥å¥ç¹               spring.cloud.nacos.discovery.enpoint             UTF-8                        å°åçæä¸ªæå¡çå¥å£ååï¼éè¿æ­¤ååå¯ä»¥å¨æå°æ¿å°æå¡ç«¯å°å\næ¯å¦éæRibbon        ribbon.nacos.enabled                             true                         ä¸è¬é½è®¾ç½®ætrueå³å¯\næ¯å¦å¼å¯Nacos Watch   spring.cloud.nacos.discovery.watch.enabled       true                         å¯ä»¥è®¾ç½®æfalseæ¥å³é­ watch',normalizedContent:'# nacos discovery\n\n\n# spring cloud alibaba nacos discovery\n\nè¯¥é¡¹ç®éè¿èªå¨éç½®ä»¥åå¶ä» spring ç¼ç¨æ¨¡åçä¹ æ¯ç¨æ³ä¸º spring boot åºç¨ç¨åºå¨æå¡æ³¨åä¸åç°æ¹é¢æä¾å nacos çæ ç¼éæã éè¿ä¸äºç®åçæ³¨è§£ï¼æ¨å¯ä»¥å¿«éæ¥æ³¨åä¸ä¸ªæå¡ï¼å¹¶ä½¿ç¨ç»è¿ååä¸èéªç nacos ç»ä»¶æ¥ä½ä¸ºå¤§è§æ¨¡åå¸å¼ç³»ç»çæå¡æ³¨åä¸­å¿ã\n\n\n# æå¡æ³¨ååç°: nacos discovery starter\n\næå¡åç°æ¯å¾®æå¡æ¶æä½ç³»ä¸­æå³é®çç»ä»¶ä¹ä¸ãå¦æå°è¯çç¨æå¨çæ¹å¼æ¥ç»æ¯ä¸ä¸ªå®¢æ·ç«¯æ¥éç½®æææå¡æä¾èçæå¡åè¡¨æ¯ä¸ä»¶éå¸¸å°é¾çäºï¼èä¸ä¹ä¸å©äº æå¡çå¨ææ©ç¼©å®¹ãnacos discovery starter å¯ä»¥å¸®å©æ¨å°æå¡èªå¨æ³¨åå° nacos æå¡ç«¯å¹¶ä¸è½å¤å¨ææç¥åå·æ°æä¸ªæå¡å®ä¾çæå¡åè¡¨ãé¤æ­¤ä¹å¤ï¼nacos discovery starter ä¹å°æå¡å®ä¾èªèº«çä¸äºåæ°æ®ä¿¡æ¯-ä¾å¦ hostï¼port,å¥åº·æ£æ¥urlï¼ä¸»é¡µç­-æ³¨åå° nacos ãnacos çè·ååå¯å¨æ¹å¼å¯ä»¥åè nacos å®ç½ã\n\n# å¦ä½å¼å¥ nacos discovery starter\n\nå¦æè¦å¨æ¨çé¡¹ç®ä¸­ä½¿ç¨ nacos æ¥å®ç°æå¡åç°ï¼ä½¿ç¨ group id ä¸º com.alibaba.cloud å artifact id ä¸º spring-cloud-starter-alibaba-nacos-discovery ç starterã\n\n<dependency>\n    <groupid>com.alibaba.cloud</groupid>\n    <artifactid>spring-cloud-starter-alibaba-nacos-discovery</artifactid>\n</dependency>\n\n\n# å¯å¨ä¸ä¸ª provider åºç¨\n\nä»¥ä¸æ­¥éª¤åæ¨å±ç¤ºäºå¦ä½å°ä¸ä¸ªæå¡æ³¨åå° nacosã\n\n 1. pom.xmlçéç½®ãä¸ä¸ªå®æ´ç pom.xml éç½®å¦ä¸æç¤ºï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0" xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n\n    <groupid>open.source.test</groupid>\n    <artifactid>nacos-discovery-test</artifactid>\n    <version>1.0-snapshot</version>\n    <name>nacos-discovery-test</name>\n\n    <parent>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-parent</artifactid>\n        <version>${spring.boot.version}</version>\n        <relativepath/>\n    </parent>\n\n    <properties>\n        <project.build.sourceencoding>utf-8</project.build.sourceencoding>\n        <project.reporting.outputencoding>utf-8</project.reporting.outputencoding>\n        <java.version>1.8</java.version>\n    </properties>\n\n    <dependencymanagement>\n        <dependencies>\n            <dependency>\n                <groupid>org.springframework.cloud</groupid>\n                <artifactid>spring-cloud-dependencies</artifactid>\n                <version>${spring.cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupid>com.alibaba.cloud</groupid>\n                <artifactid>spring-cloud-alibaba-dependencies</artifactid>\n                <version>${spring.cloud.alibaba.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencymanagement>\n\n    <dependencies>\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-web</artifactid>\n        </dependency>\n\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-actuator</artifactid>\n        </dependency>\n\n        <dependency>\n            <groupid>com.alibaba.cloud</groupid>\n            <artifactid>spring-cloud-starter-alibaba-nacos-discovery</artifactid>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-maven-plugin</artifactid>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n\n 1. application.properties éç½®ãä¸äºå³äº nacos åºæ¬çéç½®ä¹å¿é¡»å¨ application.properties(ä¹å¯ä»¥æ¯application.yaml)éç½®ï¼å¦ä¸æç¤ºï¼ application.properties\n\nserver.port=8081\nspring.application.name=nacos-producer\nspring.cloud.nacos.discovery.server-addr=127.0.0.1:8848\nmanagement.endpoints.web.exposure.include=*\n\n\nnote   å¦æä¸æ³ä½¿ç¨ nacos ä½ä¸ºæ¨çæå¡æ³¨åä¸åç°ï¼å¯ä»¥å°\n       spring.cloud.nacos.discovery.enabled è®¾ç½®ä¸º falseã\n\n 1. å¯å¨ provider ç¤ºä¾ãå¦ä¸æç¤ºï¼\n\n@springbootapplication\n@enablediscoveryclient\npublic class nacosproviderdemoapplication {\n\n    public static void main(string[] args) {\n        springapplication.run(nacosproducerdemoapplication.class, args);\n    }\n\n    @restcontroller\n    public class echocontroller {\n        @getmapping(value = "/echo/{string}")\n        public string echo(@pathvariable string string) {\n            return "hello nacos discovery " + string;\n        }\n    }\n}\n\n\nè¿ä¸ªæ¶åä½ å°±å¯ä»¥å¨ nacosçæ§å¶å°ä¸çå°æ³¨åä¸æ¥çæå¡ä¿¡æ¯äºã\n\nnote   åå¯å¨ provider åºç¨ä¹å è¯·åå° nacos æå¡å¯å¨ãå·ä½å¯å¨æ¹å¼å¯åè nacos å®ç½ã\n\n\n# æå¡ç endpoint\n\nspring-cloud-starter-alibaba-nacos-discovery å¨å®ç°çæ¶åæä¾äºä¸ä¸ªendpoint,endpointçè®¿é®å°åä¸º http://ip:port/actuator/nacos-discoveryã endpoint çä¿¡æ¯ä¸»è¦æä¾äºä¸¤ç±»:\n\n1ãsubscribe: æ¾ç¤ºäºå½åæåªäºæå¡è®¢éè\n2ãnacosdiscoveryproperties: æ¾ç¤ºäºå½åæå¡å®ä¾å³äº nacos çåºç¡éç½®\n\n\nä¸ä¸ªæå¡å®ä¾è®¿é® endpoint çä¿¡æ¯å¦ä¸æç¤ºï¼\n\n{\n  "subscribe": [\n    {\n      "jsonfromserver": "",\n      "name": "nacos-provider",\n      "clusters": "",\n      "cachemillis": 10000,\n      "hosts": [\n        {\n          "instanceid": "30.5.124.156#8081#default#nacos-provider",\n          "ip": "30.5.124.156",\n          "port": 8081,\n          "weight": 1.0,\n          "healthy": true,\n          "enabled": true,\n          "cluster": {\n            "servicename": null,\n            "name": null,\n            "healthchecker": {\n              "type": "tcp"\n            },\n            "defaultport": 80,\n            "defaultcheckport": 80,\n            "useipport4check": true,\n            "metadata": {\n\n            }\n          },\n          "service": null,\n          "metadata": {\n\n          }\n        }\n      ],\n      "lastreftime": 1541755293119,\n      "checksum": "e5a699c9201f5328241c178e804657e11541755293119",\n      "allips": false,\n      "key": "nacos-producer",\n      "valid": true\n    }\n  ],\n  "nacosdiscoveryproperties": {\n    "serveraddr": "127.0.0.1:8848",\n    "endpoint": "",\n    "namespace": "",\n    "logname": "",\n    "service": "nacos-provider",\n    "weight": 1.0,\n    "clustername": "default",\n    "metadata": {\n\n    },\n    "registerenabled": true,\n    "ip": "30.5.124.201",\n    "networkinterface": "",\n    "port": 8082,\n    "secure": false,\n    "accesskey": "",\n    "secretkey": ""\n  }\n}\n\n\n\n# å¯å¨ä¸ä¸ª consumer åºç¨\n\nconsumer çåºç¨å¯è½è¿æ²¡åå¯å¨ä¸ä¸ª provider åºç¨é£ä¹ç®åãå ä¸ºå¨ consumer ç«¯éè¦å»è°ç¨ provider ç«¯æä¾çrest æå¡ãä¾å­ä¸­æä»¬ä½¿ç¨æåå§çä¸ç§æ¹å¼ï¼ å³æ¾ç¤ºçä½¿ç¨ loadbalanceclient å resttemolate ç»åçæ¹å¼æ¥è®¿é®ã pom.xml å application.properties çéç½®å¯ä»¥åè 1.2 å°ç»ãå¯å¨ä¸ä¸ª consumeråºç¨çç¤ºä¾ä»£ç å¦ä¸æç¤ºï¼\n\nnote   éè¿å¸¦æè´è½½åè¡¡çresttemplate å feignclient ä¹æ¯å¯ä»¥è®¿é®çã\n\n@springbootapplication\n@enablediscoveryclient\npublic class nacosconsumerapp {\n\n    @restcontroller\n    public class nacoscontroller{\n\n        @autowired\n        private loadbalancerclient loadbalancerclient;\n        @autowired\n        private resttemplate resttemplate;\n\n        @value("${spring.application.name}")\n        private string appname;\n\n        @getmapping("/echo/app-name")\n        public string echoappname(){\n            //ä½¿ç¨ loadbalanceclient å resttemolate ç»åçæ¹å¼æ¥è®¿é®\n            serviceinstance serviceinstance = loadbalancerclient.choose("nacos-provider");\n            string url = string.format("http://%s:%s/echo/%s",serviceinstance.gethost(),serviceinstance.getport(),appname);\n            system.out.println("request url:"+url);\n            return resttemplate.getforobject(url,string.class);\n        }\n\n    }\n\n    //å®ä¾å resttemplate å®ä¾\n    @bean\n    public resttemplate resttemplate(){\n\n        return new resttemplate();\n    }\n\n    public static void main(string[] args) {\n\n        springapplication.run(nacosconsumerapp.class,args);\n    }\n}\n\n\nè¿ä¸ªä¾å­ä¸­æä»¬æ³¨å¥äºä¸ä¸ª loadbalancerclient çå®ä¾ï¼å¹¶ä¸æå¨çå®ä¾åä¸ä¸ª resttemplateï¼åæ¶å° spring.application.name çéç½®å¼ æ³¨å¥å°åºç¨ä¸­æ¥ï¼ ç®çæ¯è°ç¨ provider æä¾çæå¡æ¶ï¼å¸æå°å½åéç½®çåºç¨åç»æ¾ç¤ºåºæ¥ã\n\nnote   å¨å¯å¨ consumer åºç¨ä¹åè¯·åå° nacos æå¡å¯å¨å¥½ãå·ä½å¯å¨æ¹å¼å¯åè nacos å®ç½ã\n\nå¯å¨åï¼è®¿é® consumer æä¾åºæ¥ç http://ip:port/echo/app-name æ¥å£ãæè¿éæµè¯å¯å¨ç portæ¯ 8082ãè®¿é®ç»æå¦ä¸æç¤ºï¼\n\nè®¿é®å°åï¼http://127.0.0.1:8082/echo/app-name\nè®¿é®ç»æï¼hello nacos discovery nacos-consumer\n\n\n\n# å³äº nacos starter æ´å¤çéç½®é¡¹ä¿¡æ¯\n\næ´å¤å³äº spring-cloud-starter-alibaba-nacos-discovery ç starter éç½®é¡¹å¦ä¸æç¤º:\n\néç½®é¡¹               key                                              é»è®¤å¼                          è¯´æ\næå¡ç«¯å°å             spring.cloud.nacos.discovery.server-addr         æ                             nacos server å¯å¨çå¬çipå°ååç«¯å£\næå¡å               spring.cloud.nacos.discovery.service             ${spring.application.name}   ç»å½åçæå¡å½å\næå¡åç»              spring.cloud.nacos.discovery.group               default_group                è®¾ç½®æå¡æå¤çåç»\næé                spring.cloud.nacos.discovery.weight              1                            åå¼èå´ 1 å° 100ï¼æ°å¼è¶å¤§ï¼æéè¶å¤§\nç½å¡å               spring.cloud.nacos.discovery.network-interface   æ                             å½ipæªéç½®æ¶ï¼æ³¨åçipä¸ºæ­¤ç½å¡æå¯¹åºçipå°åï¼å¦ææ­¤é¡¹ä¹æªéç½®ï¼åé»è®¤åç¬¬ä¸åç½å¡çå°å\næ³¨åçipå°å           spring.cloud.nacos.discovery.ip                  æ                             ä¼åçº§æé«\næ³¨åçç«¯å£             spring.cloud.nacos.discovery.port                -1                           é»è®¤æåµä¸ä¸ç¨éç½®ï¼ä¼èªå¨æ¢æµ\nå½åç©ºé´              spring.cloud.nacos.discovery.namespace           æ                             å¸¸ç¨åºæ¯ä¹ä¸æ¯ä¸åç¯å¢çæ³¨åçåºåéç¦»ï¼ä¾å¦å¼åæµè¯ç¯å¢åçäº§ç¯å¢çèµæºï¼å¦éç½®ãæå¡ï¼éç¦»ç­ã\naccesskey         spring.cloud.nacos.discovery.access-key          æ                             å½è¦ä¸é¿éäºæ¶ï¼é¿éäºä¸é¢çä¸ä¸ªäºè´¦å·å\nsecretkey         spring.cloud.nacos.discovery.secret-key          æ                             å½è¦ä¸é¿éäºæ¶ï¼é¿éäºä¸é¢çä¸ä¸ªäºè´¦å·å¯ç \nmetadata          spring.cloud.nacos.discovery.metadata            æ                             ä½¿ç¨mapæ ¼å¼éç½®ï¼ç¨æ·å¯ä»¥æ ¹æ®èªå·±çéè¦èªå®ä¹ä¸äºåæå¡ç¸å³çåæ°æ®ä¿¡æ¯\næ¥å¿æä»¶å             spring.cloud.nacos.discovery.log-name            æ                             \néç¾¤                spring.cloud.nacos.discovery.cluster-name        default                      éç½®ænacoséç¾¤åç§°\næ¥å¥ç¹               spring.cloud.nacos.discovery.enpoint             utf-8                        å°åçæä¸ªæå¡çå¥å£ååï¼éè¿æ­¤ååå¯ä»¥å¨æå°æ¿å°æå¡ç«¯å°å\næ¯å¦éæribbon        ribbon.nacos.enabled                             true                         ä¸è¬é½è®¾ç½®ætrueå³å¯\næ¯å¦å¼å¯nacos watch   spring.cloud.nacos.discovery.watch.enabled       true                         å¯ä»¥è®¾ç½®æfalseæ¥å³é­ watch',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:47:02",lastUpdatedTimestamp:1644378422e3},{title:"Nacos config",frontmatter:{title:"Nacos config",date:"2022-02-09T11:45:40.000Z",permalink:"/pages/3a1e7d/"},regularPath:"/16.Spring%20Cloud%20Alibaba/01.Spring%20Cloud%20Alibaba/04.Nacos%20config.html",relativePath:"16.Spring Cloud Alibaba/01.Spring Cloud Alibaba/04.Nacos config.md",key:"v-19430f44",path:"/pages/3a1e7d/",headers:[{level:2,title:"Spring Cloud Alibaba Nacos Config",slug:"spring-cloud-alibaba-nacos-config",normalizedTitle:"spring cloud alibaba nacos config",charIndex:19},{level:3,title:"å¿«éå¼å§",slug:"å¿«éå¼å§",normalizedTitle:"å¿«éå¼å§",charIndex:424},{level:3,title:"åºäº dataid ä¸º yaml çæä»¶æ©å±åéç½®æ¹å¼",slug:"åºäº-dataid-ä¸º-yaml-çæä»¶æ©å±åéç½®æ¹å¼",normalizedTitle:"åºäº dataid ä¸º yaml çæä»¶æ©å±åéç½®æ¹å¼",charIndex:2407},{level:3,title:"æ¯æéç½®çå¨ææ´æ°",slug:"æ¯æéç½®çå¨ææ´æ°",normalizedTitle:"æ¯æéç½®çå¨ææ´æ°",charIndex:3335},{level:3,title:"å¯æ¯æprofileç²åº¦çéç½®",slug:"å¯æ¯æprofileç²åº¦çéç½®",normalizedTitle:"å¯æ¯æprofileç²åº¦çéç½®",charIndex:5159},{level:3,title:"æ¯æèªå®ä¹ namespace çéç½®",slug:"æ¯æèªå®ä¹-namespace-çéç½®",normalizedTitle:"æ¯æèªå®ä¹ namespace çéç½®",charIndex:7888},{level:3,title:"æ¯æèªå®ä¹ Group çéç½®",slug:"æ¯æèªå®ä¹-group-çéç½®",normalizedTitle:"æ¯æèªå®ä¹ group çéç½®",charIndex:8444},{level:3,title:"æ¯æèªå®ä¹æ©å±ç Data Id éç½®",slug:"æ¯æèªå®ä¹æ©å±ç-data-id-éç½®",normalizedTitle:"æ¯æèªå®ä¹æ©å±ç data id éç½®",charIndex:8726},{level:3,title:"éç½®çä¼åçº§",slug:"éç½®çä¼åçº§",normalizedTitle:"éç½®çä¼åçº§",charIndex:10855},{level:3,title:"å®å¨å³é­éç½®",slug:"å®å¨å³é­éç½®",normalizedTitle:"å®å¨å³é­éç½®",charIndex:11182}],headersStr:"Spring Cloud Alibaba Nacos Config å¿«éå¼å§ åºäº dataid ä¸º yaml çæä»¶æ©å±åéç½®æ¹å¼ æ¯æéç½®çå¨ææ´æ° å¯æ¯æprofileç²åº¦çéç½® æ¯æèªå®ä¹ namespace çéç½® æ¯æèªå®ä¹ Group çéç½® æ¯æèªå®ä¹æ©å±ç Data Id éç½® éç½®çä¼åçº§ å®å¨å³é­éç½®",content:'# Nacos config\n\n\n# Spring Cloud Alibaba Nacos Config\n\nNacos æä¾ç¨äºå­å¨éç½®åå¶ä»åæ°æ®ç key/value å­å¨ï¼ä¸ºåå¸å¼ç³»ç»ä¸­çå¤é¨åéç½®æä¾æå¡å¨ç«¯åå®¢æ·ç«¯æ¯æãä½¿ç¨ Spring Cloud Alibaba Nacos Configï¼æ¨å¯ä»¥å¨ Nacos Server éä¸­ç®¡çä½  Spring Cloud åºç¨çå¤é¨å±æ§éç½®ã\n\nSpring Cloud Alibaba Nacos Config æ¯ Config Server å Client çæ¿ä»£æ¹æ¡ï¼å®¢æ·ç«¯åæå¡å¨ä¸çæ¦å¿µä¸ Spring Environment å PropertySource æçä¸è´çæ½è±¡ï¼å¨ç¹æ®ç bootstrap é¶æ®µï¼éç½®è¢«å è½½å° Spring ç¯å¢ä¸­ãå½åºç¨ç¨åºéè¿é¨ç½²ç®¡éä»å¼åå°æµè¯åå°çäº§æ¶ï¼æ¨å¯ä»¥ç®¡çè¿äºç¯å¢ä¹é´çéç½®ï¼å¹¶ç¡®ä¿åºç¨ç¨åºå·æè¿ç§»æ¶éè¦è¿è¡çææåå®¹ã\n\n\n# å¿«éå¼å§\n\n# Nacos æå¡ç«¯åå§å\n\n1ãå¯å¨Nacos Serverãå¯å¨æ¹å¼å¯è§ Nacos å®ç½\n\n2ãå¯å¨å¥½Nacosä¹åï¼å¨Nacosæ·»å å¦ä¸çéç½®ï¼\n\nData ID:    nacos-config.properties\n\nGroup  :    DEFAULT_GROUP\n\néç½®æ ¼å¼:    Properties\n\néç½®åå®¹ï¼   user.name=nacos-config-properties\n            user.age=90\n\n\nNOTE   æ³¨æDATAIDæ¯ä»¥ PROPERTIES(é»è®¤çæä»¶æ©å±åæ¹å¼)ä¸ºæ©å±åã\n\n# å®¢æ·ç«¯ä½¿ç¨æ¹å¼\n\nå¦æè¦å¨æ¨çé¡¹ç®ä¸­ä½¿ç¨ Nacos æ¥å®ç°åºç¨çå¤é¨åéç½®ï¼ä½¿ç¨ group ID ä¸º com.alibaba.cloud å artifact ID ä¸º spring-cloud-starter-alibaba-nacos-config ç starterã\n\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n</dependency>\n\n\nç°å¨å°±å¯ä»¥åå»ºä¸ä¸ªæ åç Spring Boot åºç¨ã\n\n@SpringBootApplication\npublic class ProviderApplication {\n\n    public static void main(String[] args) {\n        ConfigurableApplicationContext applicationContext = SpringApplication.run(ProviderApplication.class, args);\n        String userName = applicationContext.getEnvironment().getProperty("user.name");\n        String userAge = applicationContext.getEnvironment().getProperty("user.age");\n        System.err.println("user name :"+userName+"; age: "+userAge);\n    }\n}\n\n\nå¨è¿è¡æ­¤ Example ä¹åï¼ å¿é¡»ä½¿ç¨ bootstrap.properties éç½®æä»¶æ¥éç½®Nacos Server å°åï¼ä¾å¦ï¼\n\nbootstrap.properties\n\nspring.application.name=nacos-config\nspring.cloud.nacos.config.server-addr=127.0.0.1:8848\n\n\nNOTE   æ³¨æå½ä½ ä½¿ç¨ååçæ¹å¼æ¥è®¿é® NACOS æ¶ï¼SPRING.CLOUD.NACOS.CONFIG.SERVER-ADDR\n       éç½®çæ¹å¼ä¸º åå:PORTã ä¾å¦ NACOS çååä¸ºABC.COM.NACOSï¼çå¬çç«¯å£ä¸º 80ï¼å\n       SPRING.CLOUD.NACOS.CONFIG.SERVER-ADDR=ABC.COM.NACOS:80ã æ³¨æ\n       80 ç«¯å£ä¸è½çç¥ã\n\nå¯å¨è¿ä¸ª Exampleï¼å¯ä»¥çå°å¦ä¸è¾åºç»æï¼\n\n2018-11-02 14:24:51.638  INFO 32700 --- [main] c.a.demo.provider.ProviderApplication    : Started ProviderApplication in 14.645 seconds (JVM running for 15.139)\nuser name :nacos-config-properties; age: 90\n2018-11-02 14:24:51.688  INFO 32700 --- [-127.0.0.1:8848] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@a8c5e74: startup date [Fri Nov 02 14:24:51 CST 2018]; root of context hierarchy\n2018-11\n\n\n\n# åºäº dataid ä¸º yaml çæä»¶æ©å±åéç½®æ¹å¼\n\nspring-cloud-starter-alibaba-nacos-config å¯¹äº yaml æ ¼å¼ä¹æ¯å®ç¾æ¯æçãè¿ä¸ªæ¶ååªéè¦å®æä»¥ä¸ä¸¤æ­¥ï¼\n\n1ãå¨åºç¨ç bootstrap.properties éç½®æä»¶ä¸­æ¾ç¤ºçå£°æ dataid æä»¶æ©å±åãå¦ä¸æç¤º\n\nbootstrap.properties\n\nspring.cloud.nacos.config.file-extension=yaml\n\n\n2ãå¨ Nacos çæ§å¶å°æ°å¢ä¸ä¸ªdataidä¸ºyamlä¸ºæ©å±åçéç½®ï¼å¦ä¸æç¤ºï¼\n\nData ID:        nacos-config.yaml\n\nGroup  :        DEFAULT_GROUP\n\néç½®æ ¼å¼:        YAML\n\néç½®åå®¹:        user.name: nacos-config-yaml\n                user.age: 68\n\n\nè¿ä¸¤æ­¥å®æåï¼éå¯æµè¯ç¨åºï¼å¯ä»¥çå°å¦ä¸è¾åºç»æã\n\n2018-11-02 14:59:00.484  INFO 32928 --- [main] c.a.demo.provider.ProviderApplication:Started ProviderApplication in 14.183 seconds (JVM running for 14.671)\nuser name :nacos-config-yaml; age: 68\n2018-11-02 14:59:00.529  INFO 32928 --- [-127.0.0.1:8848] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@265a478e: startup date [Fri Nov 02 14:59:00 CST 2018]; root of context hierarchy\n\n\n\n# æ¯æéç½®çå¨ææ´æ°\n\nspring-cloud-starter-alibaba-nacos-config ä¹æ¯æéç½®çå¨ææ´æ°ï¼å¯å¨ Spring Boot åºç¨æµè¯çä»£ç å¦ä¸ï¼\n\n@SpringBootApplication\npublic class ProviderApplication {\n\n    public static void main(String[] args) {\n        ConfigurableApplicationContext applicationContext = SpringApplication.run(ProviderApplication.class, args);\n        while(true) {\n            //å½å¨æéç½®å·æ°æ¶ï¼ä¼æ´æ°å° Enviromentä¸­ï¼å æ­¤è¿éæ¯éä¸ç§ä¸­ä»Enviromentä¸­è·åéç½®\n            String userName = applicationContext.getEnvironment().getProperty("user.name");\n            String userAge = applicationContext.getEnvironment().getProperty("user.age");\n            System.err.println("user name :" + userName + "; age: " + userAge);\n            TimeUnit.SECONDS.sleep(1);\n        }\n    }\n}\n\n\nå¦ä¸æç¤ºï¼å½åæ´user.nameæ¶ï¼åºç¨ç¨åºä¸­è½å¤è·åå°ææ°çå¼ï¼\n\nuser name :nacos-config-yaml; age: 68\nuser name :nacos-config-yaml; age: 68\nuser name :nacos-config-yaml; age: 68\n2018-11-02 15:04:25.069  INFO 32957 --- [-127.0.0.1:8848] o.s.boot.SpringApplication               : Started application in 0.144 seconds (JVM running for 71.752)\n2018-11-02 15:04:25.070  INFO 32957 --- [-127.0.0.1:8848] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@10c89124: startup date [Fri Nov 02 15:04:25 CST 2018]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@6520af7\n2018-11-02 15:04:25.071  INFO 32957 --- [-127.0.0.1:8848] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@6520af7: startup date [Fri Nov 02 15:04:24 CST 2018]; root of context hierarchy\n//ä» Enviroment ä¸­ è¯»åå°æ´æ¹åçå¼\nuser name :nacos-config-yaml-update; age: 68\nuser name :nacos-config-yaml-update; age: 68\n\n\nNOTE   ä½ å¯ä»¥éè¿éç½® SPRING.CLOUD.NACOS.CONFIG.REFRESH.ENABLED=FALSE\n       æ¥å³é­å¨æå·æ°\n\n\n# å¯æ¯æprofileç²åº¦çéç½®\n\nspring-cloud-starter-alibaba-nacos-config å¨å è½½éç½®çæ¶åï¼ä¸ä»ä»å è½½äºä»¥ dataid ä¸º ${spring.application.name}.${file-extension:properties} ä¸ºåç¼çåºç¡éç½®ï¼è¿å è½½äºdataidä¸º ${spring.application.name}-${profile}.${file-extension:properties} çåºç¡éç½®ãå¨æ¥å¸¸å¼åä¸­å¦æéå°å¤å¥ç¯å¢ä¸çä¸åéç½®ï¼å¯ä»¥éè¿Spring æä¾ç ${spring.profiles.active} è¿ä¸ªéç½®é¡¹æ¥éç½®ã\n\nspring.profiles.active=develop\n\n\nNOTE   ${SPRING.PROFILES.ACTIVE} å½éè¿éç½®æä»¶æ¥æå®æ¶å¿é¡»æ¾å¨\n       BOOTSTRAP.PROPERTIES æä»¶ä¸­ã\n\nNacos ä¸æ°å¢ä¸ä¸ªdataidä¸ºï¼nacos-config-develop.yamlçåºç¡éç½®ï¼å¦ä¸æç¤ºï¼\n\nData ID:        nacos-config-develop.yaml\n\nGroup  :        DEFAULT_GROUP\n\néç½®æ ¼å¼:        YAML\n\néç½®åå®¹:        current.env: develop-env\n\n\nå¯å¨ Spring Boot åºç¨æµè¯çä»£ç å¦ä¸ï¼\n\n@SpringBootApplication\npublic class ProviderApplication {\n\n    public static void main(String[] args) {\n        ConfigurableApplicationContext applicationContext = SpringApplication.run(ProviderApplication.class, args);\n        while(true) {\n            String userName = applicationContext.getEnvironment().getProperty("user.name");\n            String userAge = applicationContext.getEnvironment().getProperty("user.age");\n            //è·åå½åé¨ç½²çç¯å¢\n            String currentEnv = applicationContext.getEnvironment().getProperty("current.env");\n            System.err.println("in "+currentEnv+" enviroment; "+"user name :" + userName + "; age: " + userAge);\n            TimeUnit.SECONDS.sleep(1);\n        }\n    }\n}\n\n\nå¯å¨åï¼å¯è§æ§å¶å°çè¾åºç»æï¼\n\nin develop-env enviroment; user name :nacos-config-yaml-update; age: 68\n2018-11-02 15:34:25.013  INFO 33014 --- [ Thread-11] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@6f1c29b7: startup date [Fri Nov 02 15:33:57 CST 2018]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@63355449\n\n\nå¦æéè¦åæ¢å°çäº§ç¯å¢ï¼åªéè¦æ´æ¹ ${spring.profiles.active} åæ°éç½®å³å¯ãå¦ä¸æç¤ºï¼\n\nspring.profiles.active=product\n\n\nåæ¶çäº§ç¯å¢ä¸ Nacos éè¦æ·»å å¯¹åº dataid çåºç¡éç½®ãä¾å¦ï¼å¨çæç¯å¢ä¸ç Naocs æ·»å äºdataidä¸ºï¼nacos-config-product.yamlçéç½®ï¼\n\nData ID:        nacos-config-product.yaml\n\nGroup  :        DEFAULT_GROUP\n\néç½®æ ¼å¼:        YAML\n\néç½®åå®¹:        current.env: product-env\n\n\nå¯å¨æµè¯ç¨åºï¼è¾åºç»æå¦ä¸ï¼\n\nin product-env enviroment; user name :nacos-config-yaml-update; age: 68\n2018-11-02 15:42:14.628  INFO 33024 --- [Thread-11] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@6aa8e115: startup date [Fri Nov 02 15:42:03 CST 2018]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@19bb07ed\n\n\nNOTE   æ­¤æ¡ä¾ä¸­æä»¬éè¿ SPRING.PROFILES.ACTIVE=<PROFILENAME>\n       çæ¹å¼åæ­»å¨éç½®æä»¶ä¸­ï¼èå¨çæ­£çé¡¹ç®å®æ½è¿ç¨ä¸­è¿ä¸ªåéçå¼æ¯éè¦ä¸åç¯å¢èæä¸åçå¼ãè¿ä¸ªæ¶åéå¸¸çåæ³æ¯éè¿\n       -DSPRING.PROFILES.ACTIVE=<PROFILE> åæ°æå®å¶éç½®æ¥è¾¾å°ç¯å¢é´çµæ´»çåæ¢ã\n\n\n# æ¯æèªå®ä¹ namespace çéç½®\n\né¦åçä¸ä¸ Nacos ç Namespace çæ¦å¿µï¼ Nacos æ¦å¿µ\n\n> ç¨äºè¿è¡ç§æ·ç²åº¦çéç½®éç¦»ãä¸åçå½åç©ºé´ä¸ï¼å¯ä»¥å­å¨ç¸åç Group æ Data ID çéç½®ãNamespace çå¸¸ç¨åºæ¯ä¹ä¸æ¯ä¸åç¯å¢çéç½®çåºåéç¦»ï¼ä¾å¦å¼åæµè¯ç¯å¢åçäº§ç¯å¢çèµæºï¼å¦éç½®ãæå¡ï¼éç¦»ç­ã\n\nå¨æ²¡ææç¡®æå® ${spring.cloud.nacos.config.namespace} éç½®çæåµä¸ï¼ é»è®¤ä½¿ç¨çæ¯ Nacos ä¸ Public è¿ä¸ªnamespaeãå¦æéè¦ä½¿ç¨èªå®ä¹çå½åç©ºé´ï¼å¯ä»¥éè¿ä»¥ä¸éç½®æ¥å®ç°ï¼\n\nspring.cloud.nacos.config.namespace=b3404bc0-d7dc-4855-b519-570ed34b62d7\n\n\nNOTE   è¯¥éç½®å¿é¡»æ¾å¨ BOOTSTRAP.PROPERTIES æä»¶ä¸­ãæ­¤å¤\n       SPRING.CLOUD.NACOS.CONFIG.NAMESPACE çå¼æ¯ NAMESPACE å¯¹åºç IDï¼ID\n       å¼å¯ä»¥å¨ NACOS çæ§å¶å°è·åãå¹¶ä¸å¨æ·»å éç½®æ¶æ³¨æä¸è¦éæ©å¶ä»ç\n       NAMESPAEï¼å¦åå°ä¼å¯¼è´è¯»åä¸å°æ­£ç¡®çéç½®ã\n\n\n# æ¯æèªå®ä¹ Group çéç½®\n\nå¨æ²¡ææç¡®æå® ${spring.cloud.nacos.config.group} éç½®çæåµä¸ï¼ é»è®¤ä½¿ç¨çæ¯ DEFAULT_GROUP ãå¦æéè¦èªå®ä¹èªå·±ç Groupï¼å¯ä»¥éè¿ä»¥ä¸éç½®æ¥å®ç°ï¼\n\nspring.cloud.nacos.config.group=DEVELOP_GROUP\n\n\nNOTE   è¯¥éç½®å¿é¡»æ¾å¨ BOOTSTRAP.PROPERTIES æä»¶ä¸­ãå¹¶ä¸å¨æ·»å éç½®æ¶ GROUP çå¼ä¸å®è¦å\n       SPRING.CLOUD.NACOS.CONFIG.GROUP çéç½®å¼ä¸è´ã\n\n\n# æ¯æèªå®ä¹æ©å±ç Data Id éç½®\n\nSpring Cloud Alibaba Nacos Config ä» 0.2.1 çæ¬åï¼å¯æ¯æèªå®ä¹ Data Id çéç½®ãå³äºè¿é¨åè¯¦ç»çè®¾è®¡å¯åè è¿éã ä¸ä¸ªå®æ´çéç½®æ¡ä¾å¦ä¸æç¤ºï¼\n\nspring.application.name=opensource-service-provider\nspring.cloud.nacos.config.server-addr=127.0.0.1:8848\n\n# config external configuration\n# 1ãData Id å¨é»è®¤çç» DEFAULT_GROUP,ä¸æ¯æéç½®çå¨æå·æ°\nspring.cloud.nacos.config.extension-configs[0].data-id=ext-config-common01.properties\n\n# 2ãData Id ä¸å¨é»è®¤çç»ï¼ä¸æ¯æå¨æå·æ°\nspring.cloud.nacos.config.extension-configs[1].data-id=ext-config-common02.properties\nspring.cloud.nacos.config.extension-configs[1].group=GLOBALE_GROUP\n\n# 3ãData Id æ¢ä¸å¨é»è®¤çç»ï¼ä¹æ¯æå¨æå·æ°\nspring.cloud.nacos.config.extension-configs[2].data-id=ext-config-common03.properties\nspring.cloud.nacos.config.extension-configs[2].group=REFRESH_GROUP\nspring.cloud.nacos.config.extension-configs[2].refresh=true\n\n\nå¯ä»¥çå°:\n\n * éè¿ spring.cloud.nacos.config.extension-configs[n].data-id çéç½®æ¹å¼æ¥æ¯æå¤ä¸ª Data Id çéç½®ã\n * éè¿ spring.cloud.nacos.config.extension-configs[n].group çéç½®æ¹å¼èªå®ä¹ Data Id æå¨çç»ï¼ä¸æç¡®éç½®çè¯ï¼é»è®¤æ¯ DEFAULT_GROUPã\n * éè¿ spring.cloud.nacos.config.extension-configs[n].refresh çéç½®æ¹å¼æ¥æ§å¶è¯¥ Data Id å¨éç½®åæ´æ¶ï¼æ¯å¦æ¯æåºç¨ä¸­å¯å¨æå·æ°ï¼ æç¥å°ææ°çéç½®å¼ãé»è®¤æ¯ä¸æ¯æçã\n\nNOTE   å¤ä¸ª DATA ID åæ¶éç½®æ¶ï¼ä»çä¼åçº§å³ç³»æ¯\n       SPRING.CLOUD.NACOS.CONFIG.EXTENSION-CONFIGS[N].DATA-ID å¶ä¸­ N\n       çå¼è¶å¤§ï¼ä¼åçº§è¶é«ã\n\nNOTE   SPRING.CLOUD.NACOS.CONFIG.EXTENSION-CONFIGS[N].DATA-ID\n       çå¼å¿é¡»å¸¦æä»¶æ©å±åï¼æä»¶æ©å±åæ¢å¯æ¯æ PROPERTIESï¼åå¯ä»¥æ¯æ YAML/YMLã æ­¤æ¶\n       SPRING.CLOUD.NACOS.CONFIG.FILE-EXTENSION çéç½®å¯¹èªå®ä¹æ©å±éç½®ç DATA\n       ID æä»¶æ©å±åæ²¡æå½±åã\n\néè¿èªå®ä¹æ©å±ç Data Id éç½®ï¼æ¢å¯ä»¥è§£å³å¤ä¸ªåºç¨é´éç½®å±äº«çé®é¢ï¼åå¯ä»¥æ¯æä¸ä¸ªåºç¨æå¤ä¸ªéç½®æä»¶ã\n\nä¸ºäºæ´å æ¸æ°çå¨å¤ä¸ªåºç¨é´éç½®å±äº«ç Data Id ï¼ä½ å¯ä»¥éè¿ä»¥ä¸çæ¹å¼æ¥éç½®ï¼\n\n# éç½®æ¯æå±äº«ç Data Id\nspring.cloud.nacos.config.shared-configs[0].data-id=common.yaml\n\n# éç½® Data Id æå¨åç»ï¼ç¼ºçé»è®¤ DEFAULT_GROUP\nspring.cloud.nacos.config.shared-configs[0].group=GROUP_APP1\n\n# éç½®Data Id å¨éç½®åæ´æ¶ï¼æ¯å¦å¨æå·æ°ï¼ç¼ºçé»è®¤ false\nspring.cloud.nacos.config.shared-configs[0].refresh=true\n\n\nå¯ä»¥çå°ï¼\n\n * éè¿ spring.cloud.nacos.config.shared-configs[n].data-id æ¥æ¯æå¤ä¸ªå±äº« Data Id çéç½®ã\n * éè¿ spring.cloud.nacos.config.shared-configs[n].group æ¥éç½®èªå®ä¹ Data Id æå¨çç»ï¼ä¸æç¡®éç½®çè¯ï¼é»è®¤æ¯ DEFAULT_GROUPã\n * éè¿ spring.cloud.nacos.config.shared-configs[n].refresh æ¥æ§å¶è¯¥Data Idå¨éç½®åæ´æ¶ï¼æ¯å¦æ¯æåºç¨ä¸­å¨æå·æ°ï¼é»è®¤falseã\n\n\n# éç½®çä¼åçº§\n\nSpring Cloud Alibaba Nacos Config ç®åæä¾äºä¸ç§éç½®è½åä» Nacos æåç¸å³çéç½®ã\n\n * A: éè¿ spring.cloud.nacos.config.shared-configs[n].data-id æ¯æå¤ä¸ªå±äº« Data Id çéç½®\n * B: éè¿ spring.cloud.nacos.config.extension-configs[n].data-id çæ¹å¼æ¯æå¤ä¸ªæ©å± Data Id çéç½®\n * C: éè¿åé¨ç¸å³è§å(åºç¨åãåºç¨å+ Profile )èªå¨çæç¸å³ç Data Id éç½®\n\nå½ä¸ç§æ¹å¼å±åä½¿ç¨æ¶ï¼ä»ä»¬çä¸ä¸ªä¼åçº§å³ç³»æ¯:A < B < C\n\n\n# å®å¨å³é­éç½®\n\néè¿è®¾ç½® spring.cloud.nacos.config.enabled = false æ¥å®å¨å³é­ Spring Cloud Nacos Config',normalizedContent:'# nacos config\n\n\n# spring cloud alibaba nacos config\n\nnacos æä¾ç¨äºå­å¨éç½®åå¶ä»åæ°æ®ç key/value å­å¨ï¼ä¸ºåå¸å¼ç³»ç»ä¸­çå¤é¨åéç½®æä¾æå¡å¨ç«¯åå®¢æ·ç«¯æ¯æãä½¿ç¨ spring cloud alibaba nacos configï¼æ¨å¯ä»¥å¨ nacos server éä¸­ç®¡çä½  spring cloud åºç¨çå¤é¨å±æ§éç½®ã\n\nspring cloud alibaba nacos config æ¯ config server å client çæ¿ä»£æ¹æ¡ï¼å®¢æ·ç«¯åæå¡å¨ä¸çæ¦å¿µä¸ spring environment å propertysource æçä¸è´çæ½è±¡ï¼å¨ç¹æ®ç bootstrap é¶æ®µï¼éç½®è¢«å è½½å° spring ç¯å¢ä¸­ãå½åºç¨ç¨åºéè¿é¨ç½²ç®¡éä»å¼åå°æµè¯åå°çäº§æ¶ï¼æ¨å¯ä»¥ç®¡çè¿äºç¯å¢ä¹é´çéç½®ï¼å¹¶ç¡®ä¿åºç¨ç¨åºå·æè¿ç§»æ¶éè¦è¿è¡çææåå®¹ã\n\n\n# å¿«éå¼å§\n\n# nacos æå¡ç«¯åå§å\n\n1ãå¯å¨nacos serverãå¯å¨æ¹å¼å¯è§ nacos å®ç½\n\n2ãå¯å¨å¥½nacosä¹åï¼å¨nacosæ·»å å¦ä¸çéç½®ï¼\n\ndata id:    nacos-config.properties\n\ngroup  :    default_group\n\néç½®æ ¼å¼:    properties\n\néç½®åå®¹ï¼   user.name=nacos-config-properties\n            user.age=90\n\n\nnote   æ³¨ædataidæ¯ä»¥ properties(é»è®¤çæä»¶æ©å±åæ¹å¼)ä¸ºæ©å±åã\n\n# å®¢æ·ç«¯ä½¿ç¨æ¹å¼\n\nå¦æè¦å¨æ¨çé¡¹ç®ä¸­ä½¿ç¨ nacos æ¥å®ç°åºç¨çå¤é¨åéç½®ï¼ä½¿ç¨ group id ä¸º com.alibaba.cloud å artifact id ä¸º spring-cloud-starter-alibaba-nacos-config ç starterã\n\n<dependency>\n    <groupid>com.alibaba.cloud</groupid>\n    <artifactid>spring-cloud-starter-alibaba-nacos-config</artifactid>\n</dependency>\n\n\nç°å¨å°±å¯ä»¥åå»ºä¸ä¸ªæ åç spring boot åºç¨ã\n\n@springbootapplication\npublic class providerapplication {\n\n    public static void main(string[] args) {\n        configurableapplicationcontext applicationcontext = springapplication.run(providerapplication.class, args);\n        string username = applicationcontext.getenvironment().getproperty("user.name");\n        string userage = applicationcontext.getenvironment().getproperty("user.age");\n        system.err.println("user name :"+username+"; age: "+userage);\n    }\n}\n\n\nå¨è¿è¡æ­¤ example ä¹åï¼ å¿é¡»ä½¿ç¨ bootstrap.properties éç½®æä»¶æ¥éç½®nacos server å°åï¼ä¾å¦ï¼\n\nbootstrap.properties\n\nspring.application.name=nacos-config\nspring.cloud.nacos.config.server-addr=127.0.0.1:8848\n\n\nnote   æ³¨æå½ä½ ä½¿ç¨ååçæ¹å¼æ¥è®¿é® nacos æ¶ï¼spring.cloud.nacos.config.server-addr\n       éç½®çæ¹å¼ä¸º åå:portã ä¾å¦ nacos çååä¸ºabc.com.nacosï¼çå¬çç«¯å£ä¸º 80ï¼å\n       spring.cloud.nacos.config.server-addr=abc.com.nacos:80ã æ³¨æ\n       80 ç«¯å£ä¸è½çç¥ã\n\nå¯å¨è¿ä¸ª exampleï¼å¯ä»¥çå°å¦ä¸è¾åºç»æï¼\n\n2018-11-02 14:24:51.638  info 32700 --- [main] c.a.demo.provider.providerapplication    : started providerapplication in 14.645 seconds (jvm running for 15.139)\nuser name :nacos-config-properties; age: 90\n2018-11-02 14:24:51.688  info 32700 --- [-127.0.0.1:8848] s.c.a.annotationconfigapplicationcontext : refreshing org.springframework.context.annotation.annotationconfigapplicationcontext@a8c5e74: startup date [fri nov 02 14:24:51 cst 2018]; root of context hierarchy\n2018-11\n\n\n\n# åºäº dataid ä¸º yaml çæä»¶æ©å±åéç½®æ¹å¼\n\nspring-cloud-starter-alibaba-nacos-config å¯¹äº yaml æ ¼å¼ä¹æ¯å®ç¾æ¯æçãè¿ä¸ªæ¶ååªéè¦å®æä»¥ä¸ä¸¤æ­¥ï¼\n\n1ãå¨åºç¨ç bootstrap.properties éç½®æä»¶ä¸­æ¾ç¤ºçå£°æ dataid æä»¶æ©å±åãå¦ä¸æç¤º\n\nbootstrap.properties\n\nspring.cloud.nacos.config.file-extension=yaml\n\n\n2ãå¨ nacos çæ§å¶å°æ°å¢ä¸ä¸ªdataidä¸ºyamlä¸ºæ©å±åçéç½®ï¼å¦ä¸æç¤ºï¼\n\ndata id:        nacos-config.yaml\n\ngroup  :        default_group\n\néç½®æ ¼å¼:        yaml\n\néç½®åå®¹:        user.name: nacos-config-yaml\n                user.age: 68\n\n\nè¿ä¸¤æ­¥å®æåï¼éå¯æµè¯ç¨åºï¼å¯ä»¥çå°å¦ä¸è¾åºç»æã\n\n2018-11-02 14:59:00.484  info 32928 --- [main] c.a.demo.provider.providerapplication:started providerapplication in 14.183 seconds (jvm running for 14.671)\nuser name :nacos-config-yaml; age: 68\n2018-11-02 14:59:00.529  info 32928 --- [-127.0.0.1:8848] s.c.a.annotationconfigapplicationcontext : refreshing org.springframework.context.annotation.annotationconfigapplicationcontext@265a478e: startup date [fri nov 02 14:59:00 cst 2018]; root of context hierarchy\n\n\n\n# æ¯æéç½®çå¨ææ´æ°\n\nspring-cloud-starter-alibaba-nacos-config ä¹æ¯æéç½®çå¨ææ´æ°ï¼å¯å¨ spring boot åºç¨æµè¯çä»£ç å¦ä¸ï¼\n\n@springbootapplication\npublic class providerapplication {\n\n    public static void main(string[] args) {\n        configurableapplicationcontext applicationcontext = springapplication.run(providerapplication.class, args);\n        while(true) {\n            //å½å¨æéç½®å·æ°æ¶ï¼ä¼æ´æ°å° enviromentä¸­ï¼å æ­¤è¿éæ¯éä¸ç§ä¸­ä»enviromentä¸­è·åéç½®\n            string username = applicationcontext.getenvironment().getproperty("user.name");\n            string userage = applicationcontext.getenvironment().getproperty("user.age");\n            system.err.println("user name :" + username + "; age: " + userage);\n            timeunit.seconds.sleep(1);\n        }\n    }\n}\n\n\nå¦ä¸æç¤ºï¼å½åæ´user.nameæ¶ï¼åºç¨ç¨åºä¸­è½å¤è·åå°ææ°çå¼ï¼\n\nuser name :nacos-config-yaml; age: 68\nuser name :nacos-config-yaml; age: 68\nuser name :nacos-config-yaml; age: 68\n2018-11-02 15:04:25.069  info 32957 --- [-127.0.0.1:8848] o.s.boot.springapplication               : started application in 0.144 seconds (jvm running for 71.752)\n2018-11-02 15:04:25.070  info 32957 --- [-127.0.0.1:8848] s.c.a.annotationconfigapplicationcontext : closing org.springframework.context.annotation.annotationconfigapplicationcontext@10c89124: startup date [fri nov 02 15:04:25 cst 2018]; parent: org.springframework.context.annotation.annotationconfigapplicationcontext@6520af7\n2018-11-02 15:04:25.071  info 32957 --- [-127.0.0.1:8848] s.c.a.annotationconfigapplicationcontext : closing org.springframework.context.annotation.annotationconfigapplicationcontext@6520af7: startup date [fri nov 02 15:04:24 cst 2018]; root of context hierarchy\n//ä» enviroment ä¸­ è¯»åå°æ´æ¹åçå¼\nuser name :nacos-config-yaml-update; age: 68\nuser name :nacos-config-yaml-update; age: 68\n\n\nnote   ä½ å¯ä»¥éè¿éç½® spring.cloud.nacos.config.refresh.enabled=false\n       æ¥å³é­å¨æå·æ°\n\n\n# å¯æ¯æprofileç²åº¦çéç½®\n\nspring-cloud-starter-alibaba-nacos-config å¨å è½½éç½®çæ¶åï¼ä¸ä»ä»å è½½äºä»¥ dataid ä¸º ${spring.application.name}.${file-extension:properties} ä¸ºåç¼çåºç¡éç½®ï¼è¿å è½½äºdataidä¸º ${spring.application.name}-${profile}.${file-extension:properties} çåºç¡éç½®ãå¨æ¥å¸¸å¼åä¸­å¦æéå°å¤å¥ç¯å¢ä¸çä¸åéç½®ï¼å¯ä»¥éè¿spring æä¾ç ${spring.profiles.active} è¿ä¸ªéç½®é¡¹æ¥éç½®ã\n\nspring.profiles.active=develop\n\n\nnote   ${spring.profiles.active} å½éè¿éç½®æä»¶æ¥æå®æ¶å¿é¡»æ¾å¨\n       bootstrap.properties æä»¶ä¸­ã\n\nnacos ä¸æ°å¢ä¸ä¸ªdataidä¸ºï¼nacos-config-develop.yamlçåºç¡éç½®ï¼å¦ä¸æç¤ºï¼\n\ndata id:        nacos-config-develop.yaml\n\ngroup  :        default_group\n\néç½®æ ¼å¼:        yaml\n\néç½®åå®¹:        current.env: develop-env\n\n\nå¯å¨ spring boot åºç¨æµè¯çä»£ç å¦ä¸ï¼\n\n@springbootapplication\npublic class providerapplication {\n\n    public static void main(string[] args) {\n        configurableapplicationcontext applicationcontext = springapplication.run(providerapplication.class, args);\n        while(true) {\n            string username = applicationcontext.getenvironment().getproperty("user.name");\n            string userage = applicationcontext.getenvironment().getproperty("user.age");\n            //è·åå½åé¨ç½²çç¯å¢\n            string currentenv = applicationcontext.getenvironment().getproperty("current.env");\n            system.err.println("in "+currentenv+" enviroment; "+"user name :" + username + "; age: " + userage);\n            timeunit.seconds.sleep(1);\n        }\n    }\n}\n\n\nå¯å¨åï¼å¯è§æ§å¶å°çè¾åºç»æï¼\n\nin develop-env enviroment; user name :nacos-config-yaml-update; age: 68\n2018-11-02 15:34:25.013  info 33014 --- [ thread-11] configservletwebserverapplicationcontext : closing org.springframework.boot.web.servlet.context.annotationconfigservletwebserverapplicationcontext@6f1c29b7: startup date [fri nov 02 15:33:57 cst 2018]; parent: org.springframework.context.annotation.annotationconfigapplicationcontext@63355449\n\n\nå¦æéè¦åæ¢å°çäº§ç¯å¢ï¼åªéè¦æ´æ¹ ${spring.profiles.active} åæ°éç½®å³å¯ãå¦ä¸æç¤ºï¼\n\nspring.profiles.active=product\n\n\nåæ¶çäº§ç¯å¢ä¸ nacos éè¦æ·»å å¯¹åº dataid çåºç¡éç½®ãä¾å¦ï¼å¨çæç¯å¢ä¸ç naocs æ·»å äºdataidä¸ºï¼nacos-config-product.yamlçéç½®ï¼\n\ndata id:        nacos-config-product.yaml\n\ngroup  :        default_group\n\néç½®æ ¼å¼:        yaml\n\néç½®åå®¹:        current.env: product-env\n\n\nå¯å¨æµè¯ç¨åºï¼è¾åºç»æå¦ä¸ï¼\n\nin product-env enviroment; user name :nacos-config-yaml-update; age: 68\n2018-11-02 15:42:14.628  info 33024 --- [thread-11] configservletwebserverapplicationcontext : closing org.springframework.boot.web.servlet.context.annotationconfigservletwebserverapplicationcontext@6aa8e115: startup date [fri nov 02 15:42:03 cst 2018]; parent: org.springframework.context.annotation.annotationconfigapplicationcontext@19bb07ed\n\n\nnote   æ­¤æ¡ä¾ä¸­æä»¬éè¿ spring.profiles.active=<profilename>\n       çæ¹å¼åæ­»å¨éç½®æä»¶ä¸­ï¼èå¨çæ­£çé¡¹ç®å®æ½è¿ç¨ä¸­è¿ä¸ªåéçå¼æ¯éè¦ä¸åç¯å¢èæä¸åçå¼ãè¿ä¸ªæ¶åéå¸¸çåæ³æ¯éè¿\n       -dspring.profiles.active=<profile> åæ°æå®å¶éç½®æ¥è¾¾å°ç¯å¢é´çµæ´»çåæ¢ã\n\n\n# æ¯æèªå®ä¹ namespace çéç½®\n\né¦åçä¸ä¸ nacos ç namespace çæ¦å¿µï¼ nacos æ¦å¿µ\n\n> ç¨äºè¿è¡ç§æ·ç²åº¦çéç½®éç¦»ãä¸åçå½åç©ºé´ä¸ï¼å¯ä»¥å­å¨ç¸åç group æ data id çéç½®ãnamespace çå¸¸ç¨åºæ¯ä¹ä¸æ¯ä¸åç¯å¢çéç½®çåºåéç¦»ï¼ä¾å¦å¼åæµè¯ç¯å¢åçäº§ç¯å¢çèµæºï¼å¦éç½®ãæå¡ï¼éç¦»ç­ã\n\nå¨æ²¡ææç¡®æå® ${spring.cloud.nacos.config.namespace} éç½®çæåµä¸ï¼ é»è®¤ä½¿ç¨çæ¯ nacos ä¸ public è¿ä¸ªnamespaeãå¦æéè¦ä½¿ç¨èªå®ä¹çå½åç©ºé´ï¼å¯ä»¥éè¿ä»¥ä¸éç½®æ¥å®ç°ï¼\n\nspring.cloud.nacos.config.namespace=b3404bc0-d7dc-4855-b519-570ed34b62d7\n\n\nnote   è¯¥éç½®å¿é¡»æ¾å¨ bootstrap.properties æä»¶ä¸­ãæ­¤å¤\n       spring.cloud.nacos.config.namespace çå¼æ¯ namespace å¯¹åºç idï¼id\n       å¼å¯ä»¥å¨ nacos çæ§å¶å°è·åãå¹¶ä¸å¨æ·»å éç½®æ¶æ³¨æä¸è¦éæ©å¶ä»ç\n       namespaeï¼å¦åå°ä¼å¯¼è´è¯»åä¸å°æ­£ç¡®çéç½®ã\n\n\n# æ¯æèªå®ä¹ group çéç½®\n\nå¨æ²¡ææç¡®æå® ${spring.cloud.nacos.config.group} éç½®çæåµä¸ï¼ é»è®¤ä½¿ç¨çæ¯ default_group ãå¦æéè¦èªå®ä¹èªå·±ç groupï¼å¯ä»¥éè¿ä»¥ä¸éç½®æ¥å®ç°ï¼\n\nspring.cloud.nacos.config.group=develop_group\n\n\nnote   è¯¥éç½®å¿é¡»æ¾å¨ bootstrap.properties æä»¶ä¸­ãå¹¶ä¸å¨æ·»å éç½®æ¶ group çå¼ä¸å®è¦å\n       spring.cloud.nacos.config.group çéç½®å¼ä¸è´ã\n\n\n# æ¯æèªå®ä¹æ©å±ç data id éç½®\n\nspring cloud alibaba nacos config ä» 0.2.1 çæ¬åï¼å¯æ¯æèªå®ä¹ data id çéç½®ãå³äºè¿é¨åè¯¦ç»çè®¾è®¡å¯åè è¿éã ä¸ä¸ªå®æ´çéç½®æ¡ä¾å¦ä¸æç¤ºï¼\n\nspring.application.name=opensource-service-provider\nspring.cloud.nacos.config.server-addr=127.0.0.1:8848\n\n# config external configuration\n# 1ãdata id å¨é»è®¤çç» default_group,ä¸æ¯æéç½®çå¨æå·æ°\nspring.cloud.nacos.config.extension-configs[0].data-id=ext-config-common01.properties\n\n# 2ãdata id ä¸å¨é»è®¤çç»ï¼ä¸æ¯æå¨æå·æ°\nspring.cloud.nacos.config.extension-configs[1].data-id=ext-config-common02.properties\nspring.cloud.nacos.config.extension-configs[1].group=globale_group\n\n# 3ãdata id æ¢ä¸å¨é»è®¤çç»ï¼ä¹æ¯æå¨æå·æ°\nspring.cloud.nacos.config.extension-configs[2].data-id=ext-config-common03.properties\nspring.cloud.nacos.config.extension-configs[2].group=refresh_group\nspring.cloud.nacos.config.extension-configs[2].refresh=true\n\n\nå¯ä»¥çå°:\n\n * éè¿ spring.cloud.nacos.config.extension-configs[n].data-id çéç½®æ¹å¼æ¥æ¯æå¤ä¸ª data id çéç½®ã\n * éè¿ spring.cloud.nacos.config.extension-configs[n].group çéç½®æ¹å¼èªå®ä¹ data id æå¨çç»ï¼ä¸æç¡®éç½®çè¯ï¼é»è®¤æ¯ default_groupã\n * éè¿ spring.cloud.nacos.config.extension-configs[n].refresh çéç½®æ¹å¼æ¥æ§å¶è¯¥ data id å¨éç½®åæ´æ¶ï¼æ¯å¦æ¯æåºç¨ä¸­å¯å¨æå·æ°ï¼ æç¥å°ææ°çéç½®å¼ãé»è®¤æ¯ä¸æ¯æçã\n\nnote   å¤ä¸ª data id åæ¶éç½®æ¶ï¼ä»çä¼åçº§å³ç³»æ¯\n       spring.cloud.nacos.config.extension-configs[n].data-id å¶ä¸­ n\n       çå¼è¶å¤§ï¼ä¼åçº§è¶é«ã\n\nnote   spring.cloud.nacos.config.extension-configs[n].data-id\n       çå¼å¿é¡»å¸¦æä»¶æ©å±åï¼æä»¶æ©å±åæ¢å¯æ¯æ propertiesï¼åå¯ä»¥æ¯æ yaml/ymlã æ­¤æ¶\n       spring.cloud.nacos.config.file-extension çéç½®å¯¹èªå®ä¹æ©å±éç½®ç data\n       id æä»¶æ©å±åæ²¡æå½±åã\n\néè¿èªå®ä¹æ©å±ç data id éç½®ï¼æ¢å¯ä»¥è§£å³å¤ä¸ªåºç¨é´éç½®å±äº«çé®é¢ï¼åå¯ä»¥æ¯æä¸ä¸ªåºç¨æå¤ä¸ªéç½®æä»¶ã\n\nä¸ºäºæ´å æ¸æ°çå¨å¤ä¸ªåºç¨é´éç½®å±äº«ç data id ï¼ä½ å¯ä»¥éè¿ä»¥ä¸çæ¹å¼æ¥éç½®ï¼\n\n# éç½®æ¯æå±äº«ç data id\nspring.cloud.nacos.config.shared-configs[0].data-id=common.yaml\n\n# éç½® data id æå¨åç»ï¼ç¼ºçé»è®¤ default_group\nspring.cloud.nacos.config.shared-configs[0].group=group_app1\n\n# éç½®data id å¨éç½®åæ´æ¶ï¼æ¯å¦å¨æå·æ°ï¼ç¼ºçé»è®¤ false\nspring.cloud.nacos.config.shared-configs[0].refresh=true\n\n\nå¯ä»¥çå°ï¼\n\n * éè¿ spring.cloud.nacos.config.shared-configs[n].data-id æ¥æ¯æå¤ä¸ªå±äº« data id çéç½®ã\n * éè¿ spring.cloud.nacos.config.shared-configs[n].group æ¥éç½®èªå®ä¹ data id æå¨çç»ï¼ä¸æç¡®éç½®çè¯ï¼é»è®¤æ¯ default_groupã\n * éè¿ spring.cloud.nacos.config.shared-configs[n].refresh æ¥æ§å¶è¯¥data idå¨éç½®åæ´æ¶ï¼æ¯å¦æ¯æåºç¨ä¸­å¨æå·æ°ï¼é»è®¤falseã\n\n\n# éç½®çä¼åçº§\n\nspring cloud alibaba nacos config ç®åæä¾äºä¸ç§éç½®è½åä» nacos æåç¸å³çéç½®ã\n\n * a: éè¿ spring.cloud.nacos.config.shared-configs[n].data-id æ¯æå¤ä¸ªå±äº« data id çéç½®\n * b: éè¿ spring.cloud.nacos.config.extension-configs[n].data-id çæ¹å¼æ¯æå¤ä¸ªæ©å± data id çéç½®\n * c: éè¿åé¨ç¸å³è§å(åºç¨åãåºç¨å+ profile )èªå¨çæç¸å³ç data id éç½®\n\nå½ä¸ç§æ¹å¼å±åä½¿ç¨æ¶ï¼ä»ä»¬çä¸ä¸ªä¼åçº§å³ç³»æ¯:a < b < c\n\n\n# å®å¨å³é­éç½®\n\néè¿è®¾ç½® spring.cloud.nacos.config.enabled = false æ¥å®å¨å³é­ spring cloud nacos config',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:47:02",lastUpdatedTimestamp:1644378422e3},{title:"ä»ä¹æ¯ Docker",frontmatter:{title:"ä»ä¹æ¯ Docker",date:"2022-02-08T16:52:21.000Z",permalink:"/pages/555c55/"},regularPath:"/17.Docker/01.Docker/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Docker.html",relativePath:"17.Docker/01.Docker/01.ä»ä¹æ¯ Docker.md",key:"v-5b9e5448",path:"/pages/555c55/",headersStr:null,content:"# ä»ä¹æ¯ Docker\n\nDocker æåæ¯ dotCloud å¬å¸åå§äºº Solomon Hykes å¨æ³å½æé´åèµ·çä¸ä¸ªå¬å¸åé¨é¡¹ç®ï¼å®æ¯åºäº dotCloud å¬å¸å¤å¹´äºæå¡ææ¯çä¸æ¬¡é©æ°ï¼å¹¶äº 2013 å¹´ 3 æä»¥ Apache 2.0 ææåè®®å¼æºï¼ä¸»è¦é¡¹ç®ä»£ç å¨ GitHub ä¸è¿è¡ç»´æ¤ãDocker é¡¹ç®åæ¥è¿å å¥äº Linux åºéä¼ï¼å¹¶æç«æ¨å¨ å¼æ¾å®¹å¨èçï¼OCIï¼ã\n\nDocker èªå¼æºååå°å¹¿æ³çå³æ³¨åè®¨è®ºï¼è³ä»å¶ GitHub é¡¹ç®å·²ç»è¶è¿ 4 ä¸ 6 åä¸ªææ åä¸ä¸å¤ä¸ª forkãçè³ç±äº Docker é¡¹ç®çç«çï¼å¨ 2013 å¹´åºï¼dotCloud å¬å¸å³å®æ¹åä¸º DockerãDocker æåæ¯å¨ Ubuntu 12.04 ä¸å¼åå®ç°çï¼Red Hat åä» RHEL 6.5 å¼å§å¯¹ Docker è¿è¡æ¯æï¼Google ä¹å¨å¶ PaaS äº§åä¸­å¹¿æ³åºç¨ Dockerã\n\nDocker ä½¿ç¨ Google å¬å¸æ¨åºç Go è¯­è¨ è¿è¡å¼åå®ç°ï¼åºäº Linux åæ ¸ç cgroupï¼namespaceï¼ä»¥å AUFS ç±»ç Union FS ç­ææ¯ï¼å¯¹è¿ç¨è¿è¡å°è£éç¦»ï¼å±äº æä½ç³»ç»å±é¢çèæåææ¯ãç±äºéç¦»çè¿ç¨ç¬ç«äºå®¿ä¸»åå¶å®çéç¦»çè¿ç¨ï¼å æ­¤ä¹ç§°å¶ä¸ºå®¹å¨ãæåå®ç°æ¯åºäº LXCï¼ä» 0.7 çæ¬ä»¥åå¼å§å»é¤ LXCï¼è½¬èä½¿ç¨èªè¡å¼åç libcontainerï¼ä» 1.11 å¼å§ï¼åè¿ä¸æ­¥æ¼è¿ä¸ºä½¿ç¨ runC å containerdã\n\nDocker å¨å®¹å¨çåºç¡ä¸ï¼è¿è¡äºè¿ä¸æ­¥çå°è£ï¼ä»æä»¶ç³»ç»ãç½ç»äºèå°è¿ç¨éç¦»ç­ç­ï¼æå¤§çç®åäºå®¹å¨çåå»ºåç»´æ¤ãä½¿å¾ Docker ææ¯æ¯èææºææ¯æ´ä¸ºè½»ä¾¿ãå¿«æ·ã\n\nä¸é¢çå¾çæ¯è¾äº Docker åä¼ ç»èæåæ¹å¼çä¸åä¹å¤ãä¼ ç»èææºææ¯æ¯èæåºä¸å¥ç¡¬ä»¶åï¼å¨å¶ä¸è¿è¡ä¸ä¸ªå®æ´æä½ç³»ç»ï¼å¨è¯¥ç³»ç»ä¸åè¿è¡æéåºç¨è¿ç¨ï¼èå®¹å¨åçåºç¨è¿ç¨ç´æ¥è¿è¡äºå®¿ä¸»çåæ ¸ï¼å®¹å¨åæ²¡æèªå·±çåæ ¸ï¼èä¸ä¹æ²¡æè¿è¡ç¡¬ä»¶èæãå æ­¤å®¹å¨è¦æ¯ä¼ ç»èææºæ´ä¸ºè½»ä¾¿ã\n\n\n\n",normalizedContent:"# ä»ä¹æ¯ docker\n\ndocker æåæ¯ dotcloud å¬å¸åå§äºº solomon hykes å¨æ³å½æé´åèµ·çä¸ä¸ªå¬å¸åé¨é¡¹ç®ï¼å®æ¯åºäº dotcloud å¬å¸å¤å¹´äºæå¡ææ¯çä¸æ¬¡é©æ°ï¼å¹¶äº 2013 å¹´ 3 æä»¥ apache 2.0 ææåè®®å¼æºï¼ä¸»è¦é¡¹ç®ä»£ç å¨ github ä¸è¿è¡ç»´æ¤ãdocker é¡¹ç®åæ¥è¿å å¥äº linux åºéä¼ï¼å¹¶æç«æ¨å¨ å¼æ¾å®¹å¨èçï¼ociï¼ã\n\ndocker èªå¼æºååå°å¹¿æ³çå³æ³¨åè®¨è®ºï¼è³ä»å¶ github é¡¹ç®å·²ç»è¶è¿ 4 ä¸ 6 åä¸ªææ åä¸ä¸å¤ä¸ª forkãçè³ç±äº docker é¡¹ç®çç«çï¼å¨ 2013 å¹´åºï¼dotcloud å¬å¸å³å®æ¹åä¸º dockerãdocker æåæ¯å¨ ubuntu 12.04 ä¸å¼åå®ç°çï¼red hat åä» rhel 6.5 å¼å§å¯¹ docker è¿è¡æ¯æï¼google ä¹å¨å¶ paas äº§åä¸­å¹¿æ³åºç¨ dockerã\n\ndocker ä½¿ç¨ google å¬å¸æ¨åºç go è¯­è¨ è¿è¡å¼åå®ç°ï¼åºäº linux åæ ¸ç cgroupï¼namespaceï¼ä»¥å aufs ç±»ç union fs ç­ææ¯ï¼å¯¹è¿ç¨è¿è¡å°è£éç¦»ï¼å±äº æä½ç³»ç»å±é¢çèæåææ¯ãç±äºéç¦»çè¿ç¨ç¬ç«äºå®¿ä¸»åå¶å®çéç¦»çè¿ç¨ï¼å æ­¤ä¹ç§°å¶ä¸ºå®¹å¨ãæåå®ç°æ¯åºäº lxcï¼ä» 0.7 çæ¬ä»¥åå¼å§å»é¤ lxcï¼è½¬èä½¿ç¨èªè¡å¼åç libcontainerï¼ä» 1.11 å¼å§ï¼åè¿ä¸æ­¥æ¼è¿ä¸ºä½¿ç¨ runc å containerdã\n\ndocker å¨å®¹å¨çåºç¡ä¸ï¼è¿è¡äºè¿ä¸æ­¥çå°è£ï¼ä»æä»¶ç³»ç»ãç½ç»äºèå°è¿ç¨éç¦»ç­ç­ï¼æå¤§çç®åäºå®¹å¨çåå»ºåç»´æ¤ãä½¿å¾ docker ææ¯æ¯èææºææ¯æ´ä¸ºè½»ä¾¿ãå¿«æ·ã\n\nä¸é¢çå¾çæ¯è¾äº docker åä¼ ç»èæåæ¹å¼çä¸åä¹å¤ãä¼ ç»èææºææ¯æ¯èæåºä¸å¥ç¡¬ä»¶åï¼å¨å¶ä¸è¿è¡ä¸ä¸ªå®æ´æä½ç³»ç»ï¼å¨è¯¥ç³»ç»ä¸åè¿è¡æéåºç¨è¿ç¨ï¼èå®¹å¨åçåºç¨è¿ç¨ç´æ¥è¿è¡äºå®¿ä¸»çåæ ¸ï¼å®¹å¨åæ²¡æèªå·±çåæ ¸ï¼èä¸ä¹æ²¡æè¿è¡ç¡¬ä»¶èæãå æ­¤å®¹å¨è¦æ¯ä¼ ç»èææºæ´ä¸ºè½»ä¾¿ã\n\n\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä¸ºä»ä¹è¦ä½¿ç¨ Docker",frontmatter:{title:"ä¸ºä»ä¹è¦ä½¿ç¨ Docker",date:"2022-02-08T16:52:21.000Z",permalink:"/pages/d1d9db/"},regularPath:"/17.Docker/01.Docker/02.%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%20Docker.html",relativePath:"17.Docker/01.Docker/02.ä¸ºä»ä¹è¦ä½¿ç¨ Docker.md",key:"v-3058349d",path:"/pages/d1d9db/",headers:[{level:2,title:"æ´é«æçå©ç¨ç³»ç»èµæº",slug:"æ´é«æçå©ç¨ç³»ç»èµæº",normalizedTitle:"æ´é«æçå©ç¨ç³»ç»èµæº",charIndex:61},{level:2,title:"æ´å¿«éçå¯å¨æ¶é´",slug:"æ´å¿«éçå¯å¨æ¶é´",normalizedTitle:"æ´å¿«éçå¯å¨æ¶é´",charIndex:198},{level:2,title:"ä¸è´çè¿è¡ç¯å¢",slug:"ä¸è´çè¿è¡ç¯å¢",normalizedTitle:"ä¸è´çè¿è¡ç¯å¢",charIndex:311},{level:2,title:"æç»­äº¤ä»åé¨ç½²",slug:"æç»­äº¤ä»åé¨ç½²",normalizedTitle:"æç»­äº¤ä»åé¨ç½²",charIndex:457},{level:2,title:"æ´è½»æ¾çè¿ç§»",slug:"æ´è½»æ¾çè¿ç§»",normalizedTitle:"æ´è½»æ¾çè¿ç§»",charIndex:778},{level:2,title:"æ´è½»æ¾çç»´æ¤åæ©å±",slug:"æ´è½»æ¾çç»´æ¤åæ©å±",normalizedTitle:"æ´è½»æ¾çç»´æ¤åæ©å±",charIndex:938},{level:2,title:"å¯¹æ¯ä¼ ç»èææºæ»ç»",slug:"å¯¹æ¯ä¼ ç»èææºæ»ç»",normalizedTitle:"å¯¹æ¯ä¼ ç»èææºæ»ç»",charIndex:1111}],headersStr:"æ´é«æçå©ç¨ç³»ç»èµæº æ´å¿«éçå¯å¨æ¶é´ ä¸è´çè¿è¡ç¯å¢ æç»­äº¤ä»åé¨ç½² æ´è½»æ¾çè¿ç§» æ´è½»æ¾çç»´æ¤åæ©å± å¯¹æ¯ä¼ ç»èææºæ»ç»",content:"# ä¸ºä»ä¹è¦ä½¿ç¨ Docker\n\nä½ä¸ºä¸ç§æ°å´çèæåæ¹å¼ï¼Docker è·ä¼ ç»çèæåæ¹å¼ç¸æ¯å·æä¼å¤çä¼å¿ã\n\n\n# æ´é«æçå©ç¨ç³»ç»èµæº\n\nç±äºå®¹å¨ä¸éè¦è¿è¡ç¡¬ä»¶èæä»¥åè¿è¡å®æ´æä½ç³»ç»ç­é¢å¤å¼éï¼Docker å¯¹ç³»ç»èµæºçå©ç¨çæ´é«ãæ è®ºæ¯åºç¨æ§è¡éåº¦ãåå­æèæèæä»¶å­å¨éåº¦ï¼é½è¦æ¯ä¼ ç»èææºææ¯æ´é«æãå æ­¤ï¼ç¸æ¯èææºææ¯ï¼ä¸ä¸ªç¸åéç½®çä¸»æºï¼å¾å¾å¯ä»¥è¿è¡æ´å¤æ°éçåºç¨ã\n\n\n# æ´å¿«éçå¯å¨æ¶é´\n\nä¼ ç»çèææºææ¯å¯å¨åºç¨æå¡å¾å¾éè¦æ°åéï¼è Docker å®¹å¨åºç¨ï¼ç±äºç´æ¥è¿è¡äºå®¿ä¸»åæ ¸ï¼æ éå¯å¨å®æ´çæä½ç³»ç»ï¼å æ­¤å¯ä»¥åå°ç§çº§ãçè³æ¯«ç§çº§çå¯å¨æ¶é´ãå¤§å¤§çèçº¦äºå¼åãæµè¯ãé¨ç½²çæ¶é´ã\n\n\n# ä¸è´çè¿è¡ç¯å¢\n\nå¼åè¿ç¨ä¸­ä¸ä¸ªå¸¸è§çé®é¢æ¯ç¯å¢ä¸è´æ§é®é¢ãç±äºå¼åç¯å¢ãæµè¯ç¯å¢ãçäº§ç¯å¢ä¸ä¸è´ï¼å¯¼è´æäº bug å¹¶æªå¨å¼åè¿ç¨ä¸­è¢«åç°ãè Docker çéåæä¾äºé¤åæ ¸å¤å®æ´çè¿è¡æ¶ç¯å¢ï¼ç¡®ä¿äºåºç¨è¿è¡ç¯å¢ä¸è´æ§ï¼ä»èä¸ä¼ååºç° ãè¿æ®µä»£ç å¨ææºå¨ä¸æ²¡é®é¢åã è¿ç±»é®é¢ã\n\n\n# æç»­äº¤ä»åé¨ç½²\n\nå¯¹å¼ååè¿ç»´ï¼DevOpsï¼äººåæ¥è¯´ï¼æå¸æçå°±æ¯ä¸æ¬¡åå»ºæéç½®ï¼å¯ä»¥å¨ä»»æå°æ¹æ­£å¸¸è¿è¡ã\n\nä½¿ç¨ Docker å¯ä»¥éè¿å®å¶åºç¨éåæ¥å®ç°æç»­éæãæç»­äº¤ä»ãé¨ç½²ãå¼åäººåå¯ä»¥éè¿ Dockerfile æ¥è¿è¡éåæå»ºï¼å¹¶ç»å æç»­éæ(Continuous Integration) ç³»ç»è¿è¡éææµè¯ï¼èè¿ç»´äººååå¯ä»¥ç´æ¥å¨çäº§ç¯å¢ä¸­å¿«éé¨ç½²è¯¥éåï¼çè³ç»å æç»­é¨ç½²(Continuous Delivery/Deployment) ç³»ç»è¿è¡èªå¨é¨ç½²ã\n\nèä¸ä½¿ç¨ Dockerfile ä½¿éåæå»ºéæåï¼ä¸ä»ä»å¼åå¢éå¯ä»¥çè§£åºç¨è¿è¡ç¯å¢ï¼ä¹æ¹ä¾¿è¿ç»´å¢éçè§£åºç¨è¿è¡æéæ¡ä»¶ï¼å¸®å©æ´å¥½ççäº§ç¯å¢ä¸­é¨ç½²è¯¥éåã\n\n\n# æ´è½»æ¾çè¿ç§»\n\nç±äº Docker ç¡®ä¿äºæ§è¡ç¯å¢çä¸è´æ§ï¼ä½¿å¾åºç¨çè¿ç§»æ´å å®¹æãDocker å¯ä»¥å¨å¾å¤å¹³å°ä¸è¿è¡ï¼æ è®ºæ¯ç©çæºãèææºãå¬æäºãç§æäºï¼çè³æ¯ç¬è®°æ¬ï¼å¶è¿è¡ç»ææ¯ä¸è´çãå æ­¤ç¨æ·å¯ä»¥å¾è½»æçå°å¨ä¸ä¸ªå¹³å°ä¸è¿è¡çåºç¨ï¼è¿ç§»å°å¦ä¸ä¸ªå¹³å°ä¸ï¼èä¸ç¨æå¿è¿è¡ç¯å¢çååå¯¼è´åºç¨æ æ³æ­£å¸¸è¿è¡çæåµã\n\n\n# æ´è½»æ¾çç»´æ¤åæ©å±\n\nDocker ä½¿ç¨çåå±å­å¨ä»¥åéåçææ¯ï¼ä½¿å¾åºç¨éå¤é¨åçå¤ç¨æ´ä¸ºå®¹æï¼ä¹ä½¿å¾åºç¨çç»´æ¤æ´æ°æ´å ç®åï¼åºäºåºç¡éåè¿ä¸æ­¥æ©å±éåä¹åå¾éå¸¸ç®åãæ­¤å¤ï¼Docker å¢éååä¸ªå¼æºé¡¹ç®å¢éä¸èµ·ç»´æ¤äºä¸å¤§æ¹é«è´¨éç å®æ¹éåï¼æ¢å¯ä»¥ç´æ¥å¨çäº§ç¯å¢ä½¿ç¨ï¼åå¯ä»¥ä½ä¸ºåºç¡è¿ä¸æ­¥å®å¶ï¼å¤§å¤§çéä½äºåºç¨æå¡çéåå¶ä½ææ¬ã\n\n\n# å¯¹æ¯ä¼ ç»èææºæ»ç»\n\nç¹æ§      å®¹å¨          èææº\nå¯å¨      ç§çº§          åéçº§\nç¡¬çä½¿ç¨    ä¸è¬ä¸º MB      ä¸è¬ä¸º GB\næ§è½      æ¥è¿åç        å¼±äº\nç³»ç»æ¯æé   åæºæ¯æä¸åä¸ªå®¹å¨   ä¸è¬å åä¸ª",normalizedContent:"# ä¸ºä»ä¹è¦ä½¿ç¨ docker\n\nä½ä¸ºä¸ç§æ°å´çèæåæ¹å¼ï¼docker è·ä¼ ç»çèæåæ¹å¼ç¸æ¯å·æä¼å¤çä¼å¿ã\n\n\n# æ´é«æçå©ç¨ç³»ç»èµæº\n\nç±äºå®¹å¨ä¸éè¦è¿è¡ç¡¬ä»¶èæä»¥åè¿è¡å®æ´æä½ç³»ç»ç­é¢å¤å¼éï¼docker å¯¹ç³»ç»èµæºçå©ç¨çæ´é«ãæ è®ºæ¯åºç¨æ§è¡éåº¦ãåå­æèæèæä»¶å­å¨éåº¦ï¼é½è¦æ¯ä¼ ç»èææºææ¯æ´é«æãå æ­¤ï¼ç¸æ¯èææºææ¯ï¼ä¸ä¸ªç¸åéç½®çä¸»æºï¼å¾å¾å¯ä»¥è¿è¡æ´å¤æ°éçåºç¨ã\n\n\n# æ´å¿«éçå¯å¨æ¶é´\n\nä¼ ç»çèææºææ¯å¯å¨åºç¨æå¡å¾å¾éè¦æ°åéï¼è docker å®¹å¨åºç¨ï¼ç±äºç´æ¥è¿è¡äºå®¿ä¸»åæ ¸ï¼æ éå¯å¨å®æ´çæä½ç³»ç»ï¼å æ­¤å¯ä»¥åå°ç§çº§ãçè³æ¯«ç§çº§çå¯å¨æ¶é´ãå¤§å¤§çèçº¦äºå¼åãæµè¯ãé¨ç½²çæ¶é´ã\n\n\n# ä¸è´çè¿è¡ç¯å¢\n\nå¼åè¿ç¨ä¸­ä¸ä¸ªå¸¸è§çé®é¢æ¯ç¯å¢ä¸è´æ§é®é¢ãç±äºå¼åç¯å¢ãæµè¯ç¯å¢ãçäº§ç¯å¢ä¸ä¸è´ï¼å¯¼è´æäº bug å¹¶æªå¨å¼åè¿ç¨ä¸­è¢«åç°ãè docker çéåæä¾äºé¤åæ ¸å¤å®æ´çè¿è¡æ¶ç¯å¢ï¼ç¡®ä¿äºåºç¨è¿è¡ç¯å¢ä¸è´æ§ï¼ä»èä¸ä¼ååºç° ãè¿æ®µä»£ç å¨ææºå¨ä¸æ²¡é®é¢åã è¿ç±»é®é¢ã\n\n\n# æç»­äº¤ä»åé¨ç½²\n\nå¯¹å¼ååè¿ç»´ï¼devopsï¼äººåæ¥è¯´ï¼æå¸æçå°±æ¯ä¸æ¬¡åå»ºæéç½®ï¼å¯ä»¥å¨ä»»æå°æ¹æ­£å¸¸è¿è¡ã\n\nä½¿ç¨ docker å¯ä»¥éè¿å®å¶åºç¨éåæ¥å®ç°æç»­éæãæç»­äº¤ä»ãé¨ç½²ãå¼åäººåå¯ä»¥éè¿ dockerfile æ¥è¿è¡éåæå»ºï¼å¹¶ç»å æç»­éæ(continuous integration) ç³»ç»è¿è¡éææµè¯ï¼èè¿ç»´äººååå¯ä»¥ç´æ¥å¨çäº§ç¯å¢ä¸­å¿«éé¨ç½²è¯¥éåï¼çè³ç»å æç»­é¨ç½²(continuous delivery/deployment) ç³»ç»è¿è¡èªå¨é¨ç½²ã\n\nèä¸ä½¿ç¨ dockerfile ä½¿éåæå»ºéæåï¼ä¸ä»ä»å¼åå¢éå¯ä»¥çè§£åºç¨è¿è¡ç¯å¢ï¼ä¹æ¹ä¾¿è¿ç»´å¢éçè§£åºç¨è¿è¡æéæ¡ä»¶ï¼å¸®å©æ´å¥½ççäº§ç¯å¢ä¸­é¨ç½²è¯¥éåã\n\n\n# æ´è½»æ¾çè¿ç§»\n\nç±äº docker ç¡®ä¿äºæ§è¡ç¯å¢çä¸è´æ§ï¼ä½¿å¾åºç¨çè¿ç§»æ´å å®¹æãdocker å¯ä»¥å¨å¾å¤å¹³å°ä¸è¿è¡ï¼æ è®ºæ¯ç©çæºãèææºãå¬æäºãç§æäºï¼çè³æ¯ç¬è®°æ¬ï¼å¶è¿è¡ç»ææ¯ä¸è´çãå æ­¤ç¨æ·å¯ä»¥å¾è½»æçå°å¨ä¸ä¸ªå¹³å°ä¸è¿è¡çåºç¨ï¼è¿ç§»å°å¦ä¸ä¸ªå¹³å°ä¸ï¼èä¸ç¨æå¿è¿è¡ç¯å¢çååå¯¼è´åºç¨æ æ³æ­£å¸¸è¿è¡çæåµã\n\n\n# æ´è½»æ¾çç»´æ¤åæ©å±\n\ndocker ä½¿ç¨çåå±å­å¨ä»¥åéåçææ¯ï¼ä½¿å¾åºç¨éå¤é¨åçå¤ç¨æ´ä¸ºå®¹æï¼ä¹ä½¿å¾åºç¨çç»´æ¤æ´æ°æ´å ç®åï¼åºäºåºç¡éåè¿ä¸æ­¥æ©å±éåä¹åå¾éå¸¸ç®åãæ­¤å¤ï¼docker å¢éååä¸ªå¼æºé¡¹ç®å¢éä¸èµ·ç»´æ¤äºä¸å¤§æ¹é«è´¨éç å®æ¹éåï¼æ¢å¯ä»¥ç´æ¥å¨çäº§ç¯å¢ä½¿ç¨ï¼åå¯ä»¥ä½ä¸ºåºç¡è¿ä¸æ­¥å®å¶ï¼å¤§å¤§çéä½äºåºç¨æå¡çéåå¶ä½ææ¬ã\n\n\n# å¯¹æ¯ä¼ ç»èææºæ»ç»\n\nç¹æ§      å®¹å¨          èææº\nå¯å¨      ç§çº§          åéçº§\nç¡¬çä½¿ç¨    ä¸è¬ä¸º mb      ä¸è¬ä¸º gb\næ§è½      æ¥è¿åç        å¼±äº\nç³»ç»æ¯æé   åæºæ¯æä¸åä¸ªå®¹å¨   ä¸è¬å åä¸ª",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker åºæ¬æ¦å¿µ",frontmatter:{title:"Docker åºæ¬æ¦å¿µ",date:"2022-02-08T17:06:01.000Z",permalink:"/pages/ad1da1/"},regularPath:"/17.Docker/02.Docker%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/01.Docker%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html",relativePath:"17.Docker/02.Docker åºæ¬æ¦å¿µ/01.Docker åºæ¬æ¦å¿µ.md",key:"v-741ac0fb",path:"/pages/ad1da1/",headersStr:null,content:"# Docker åºæ¬æ¦å¿µ\n\nDocker åæ¬ä¸ä¸ªåºæ¬æ¦å¿µ\n\n * éåï¼Imageï¼\n * å®¹å¨ï¼Containerï¼\n * ä»åºï¼Repositoryï¼\n\nçè§£äºè¿ä¸ä¸ªæ¦å¿µï¼å°±çè§£äº Docker çæ´ä¸ªçå½å¨æã",normalizedContent:"# docker åºæ¬æ¦å¿µ\n\ndocker åæ¬ä¸ä¸ªåºæ¬æ¦å¿µ\n\n * éåï¼imageï¼\n * å®¹å¨ï¼containerï¼\n * ä»åºï¼repositoryï¼\n\nçè§£äºè¿ä¸ä¸ªæ¦å¿µï¼å°±çè§£äº docker çæ´ä¸ªçå½å¨æã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker å¼æ",frontmatter:{title:"Docker å¼æ",date:"2022-02-08T17:06:01.000Z",permalink:"/pages/77a885/"},regularPath:"/17.Docker/02.Docker%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/02.Docker%20%E5%BC%95%E6%93%8E.html",relativePath:"17.Docker/02.Docker åºæ¬æ¦å¿µ/02.Docker å¼æ.md",key:"v-0dc6bf26",path:"/pages/77a885/",headersStr:null,content:"# Docker å¼æ\n\nDocker å¼ææ¯ä¸ä¸ªåå«ä»¥ä¸ä¸»è¦ç»ä»¶çå®¢æ·ç«¯æå¡å¨åºç¨ç¨åºã\n\n * ä¸ç§æå¡å¨ï¼å®æ¯ä¸ç§ç§°ä¸ºå®æ¤è¿ç¨å¹¶ä¸é¿æ¶é´è¿è¡çç¨åºã\n * REST APIç¨äºæå®ç¨åºå¯ä»¥ç¨æ¥ä¸å®æ¤è¿ç¨éä¿¡çæ¥å£ï¼å¹¶æç¤ºå®åä»ä¹ã\n * ä¸ä¸ªæå½ä»¤è¡çé¢ (CLI) å·¥å·çå®¢æ·ç«¯ã\n\nDocker å¼æç»ä»¶çæµç¨å¦ä¸å¾æç¤ºï¼\n\n",normalizedContent:"# docker å¼æ\n\ndocker å¼ææ¯ä¸ä¸ªåå«ä»¥ä¸ä¸»è¦ç»ä»¶çå®¢æ·ç«¯æå¡å¨åºç¨ç¨åºã\n\n * ä¸ç§æå¡å¨ï¼å®æ¯ä¸ç§ç§°ä¸ºå®æ¤è¿ç¨å¹¶ä¸é¿æ¶é´è¿è¡çç¨åºã\n * rest apiç¨äºæå®ç¨åºå¯ä»¥ç¨æ¥ä¸å®æ¤è¿ç¨éä¿¡çæ¥å£ï¼å¹¶æç¤ºå®åä»ä¹ã\n * ä¸ä¸ªæå½ä»¤è¡çé¢ (cli) å·¥å·çå®¢æ·ç«¯ã\n\ndocker å¼æç»ä»¶çæµç¨å¦ä¸å¾æç¤ºï¼\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Docker ç³»ç»æ¶æ",frontmatter:{title:"Docker ç³»ç»æ¶æ",date:"2022-02-08T17:06:01.000Z",permalink:"/pages/f566e4/"},regularPath:"/17.Docker/02.Docker%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/03.Docker%20%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html",relativePath:"17.Docker/02.Docker åºæ¬æ¦å¿µ/03.Docker ç³»ç»æ¶æ.md",key:"v-17b7bcd2",path:"/pages/f566e4/",headersStr:null,content:"# Docker ç³»ç»æ¶æ\n\nDocker ä½¿ç¨å®¢æ·ç«¯-æå¡å¨ (C/S) æ¶ææ¨¡å¼ï¼ä½¿ç¨è¿ç¨ API æ¥ç®¡çååå»º Docker å®¹å¨ã\n\nDocker å®¹å¨éè¿ Docker éåæ¥åå»ºã\n\nå®¹å¨ä¸éåçå³ç³»ç±»ä¼¼äºé¢åå¯¹è±¡ç¼ç¨ä¸­çå¯¹è±¡ä¸ç±»ã\n\nDOCKER   é¢åå¯¹è±¡\nå®¹å¨       å¯¹è±¡\néå       ç±»\n\n\n\næ é¢               è¯´æ\néå(Images)       Docker éåæ¯ç¨äºåå»º Docker å®¹å¨çæ¨¡æ¿ã\nå®¹å¨(Container)    å®¹å¨æ¯ç¬ç«è¿è¡çä¸ä¸ªæä¸ç»åºç¨ã\nå®¢æ·ç«¯(Client)      Docker å®¢æ·ç«¯éè¿å½ä»¤è¡æèå¶ä»å·¥å·ä½¿ç¨ Docker API ä¸ Docker çå®æ¤è¿ç¨éä¿¡ã\nä¸»æº(Host)         ä¸ä¸ªç©çæèèæçæºå¨ç¨äºæ§è¡ Docker å®æ¤è¿ç¨åå®¹å¨ã\nä»åº(Registry)     Docker ä»åºç¨æ¥ä¿å­éåï¼å¯ä»¥çè§£ä¸ºä»£ç æ§å¶ä¸­çä»£ç ä»åºãDocker Hub æä¾äºåºå¤§çéåéåä¾ä½¿ç¨ã\nDocker Machine   Docker\n                 Machineæ¯ä¸ä¸ªç®åDockerå®è£çå½ä»¤è¡å·¥å·ï¼éè¿ä¸ä¸ªç®åçå½ä»¤è¡å³å¯å¨ç¸åºçå¹³å°ä¸å®è£Dockerï¼æ¯å¦VirtualBoxã\n                 Digital OceanãMicrosoft Azureã",normalizedContent:"# docker ç³»ç»æ¶æ\n\ndocker ä½¿ç¨å®¢æ·ç«¯-æå¡å¨ (c/s) æ¶ææ¨¡å¼ï¼ä½¿ç¨è¿ç¨ api æ¥ç®¡çååå»º docker å®¹å¨ã\n\ndocker å®¹å¨éè¿ docker éåæ¥åå»ºã\n\nå®¹å¨ä¸éåçå³ç³»ç±»ä¼¼äºé¢åå¯¹è±¡ç¼ç¨ä¸­çå¯¹è±¡ä¸ç±»ã\n\ndocker   é¢åå¯¹è±¡\nå®¹å¨       å¯¹è±¡\néå       ç±»\n\n\n\næ é¢               è¯´æ\néå(images)       docker éåæ¯ç¨äºåå»º docker å®¹å¨çæ¨¡æ¿ã\nå®¹å¨(container)    å®¹å¨æ¯ç¬ç«è¿è¡çä¸ä¸ªæä¸ç»åºç¨ã\nå®¢æ·ç«¯(client)      docker å®¢æ·ç«¯éè¿å½ä»¤è¡æèå¶ä»å·¥å·ä½¿ç¨ docker api ä¸ docker çå®æ¤è¿ç¨éä¿¡ã\nä¸»æº(host)         ä¸ä¸ªç©çæèèæçæºå¨ç¨äºæ§è¡ docker å®æ¤è¿ç¨åå®¹å¨ã\nä»åº(registry)     docker ä»åºç¨æ¥ä¿å­éåï¼å¯ä»¥çè§£ä¸ºä»£ç æ§å¶ä¸­çä»£ç ä»åºãdocker hub æä¾äºåºå¤§çéåéåä¾ä½¿ç¨ã\ndocker machine   docker\n                 machineæ¯ä¸ä¸ªç®ådockerå®è£çå½ä»¤è¡å·¥å·ï¼éè¿ä¸ä¸ªç®åçå½ä»¤è¡å³å¯å¨ç¸åºçå¹³å°ä¸å®è£dockerï¼æ¯å¦virtualboxã\n                 digital oceanãmicrosoft azureã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Docker éå",frontmatter:{title:"Docker éå",date:"2022-02-08T17:06:01.000Z",permalink:"/pages/546146/"},regularPath:"/17.Docker/02.Docker%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/04.Docker%20%E9%95%9C%E5%83%8F.html",relativePath:"17.Docker/02.Docker åºæ¬æ¦å¿µ/04.Docker éå.md",key:"v-397e4290",path:"/pages/546146/",headers:[{level:2,title:"åå±å­å¨",slug:"åå±å­å¨",normalizedTitle:"åå±å­å¨",charIndex:287}],headersStr:"åå±å­å¨",content:"# Docker éå\n\næä»¬é½ç¥éï¼æä½ç³»ç»åä¸ºåæ ¸åç¨æ·ç©ºé´ãå¯¹äº Linux èè¨ï¼åæ ¸å¯å¨åï¼ä¼æè½½ root æä»¶ç³»ç»ä¸ºå¶æä¾ç¨æ·ç©ºé´æ¯æãè Docker éåï¼Imageï¼ï¼å°±ç¸å½äºæ¯ä¸ä¸ª root æä»¶ç³»ç»ãæ¯å¦å®æ¹éå ubuntu:16.04 å°±åå«äºå®æ´çä¸å¥ Ubuntu 16.04 æå°ç³»ç»ç root æä»¶ç³»ç»ã\n\nDocker éåæ¯ä¸ä¸ªç¹æ®çæä»¶ç³»ç»ï¼é¤äºæä¾å®¹å¨è¿è¡æ¶æéçç¨åºãåºãèµæºãéç½®ç­æä»¶å¤ï¼è¿åå«äºä¸äºä¸ºè¿è¡æ¶åå¤çä¸äºéç½®åæ°ï¼å¦å¿åå·ãç¯å¢åéãç¨æ·ç­ï¼ãéåä¸åå«ä»»ä½å¨ææ°æ®ï¼å¶åå®¹å¨æå»ºä¹åä¹ä¸ä¼è¢«æ¹åã\n\n\n# åå±å­å¨\n\nå ä¸ºéååå«æä½ç³»ç»å®æ´ç root æä»¶ç³»ç»ï¼å¶ä½ç§¯å¾å¾æ¯åºå¤§çï¼å æ­¤å¨ Docker è®¾è®¡æ¶ï¼å°±ååå©ç¨ Union FS çææ¯ï¼å°å¶è®¾è®¡ä¸ºåå±å­å¨çæ¶æãæä»¥ä¸¥æ ¼æ¥è¯´ï¼éåå¹¶éæ¯åä¸ä¸ª ISO é£æ ·çæåæä»¶ï¼éååªæ¯ä¸ä¸ªèæçæ¦å¿µï¼å¶å®éä½ç°å¹¶éç±ä¸ä¸ªæä»¶ç»æï¼èæ¯ç±ä¸ç»æä»¶ç³»ç»ç»æï¼æèè¯´ï¼ç±å¤å±æä»¶ç³»ç»èåç»æã\n\néåæå»ºæ¶ï¼ä¼ä¸å±å±æå»ºï¼åä¸å±æ¯åä¸å±çåºç¡ãæ¯ä¸å±æå»ºå®å°±ä¸ä¼ååçæ¹åï¼åä¸å±ä¸çä»»ä½æ¹ååªåçå¨èªå·±è¿ä¸å±ãæ¯å¦ï¼å é¤åä¸å±æä»¶çæä½ï¼å®éä¸æ¯ççå é¤åä¸å±çæä»¶ï¼èæ¯ä»å¨å½åå±æ è®°ä¸ºè¯¥æä»¶å·²å é¤ãå¨æç»å®¹å¨è¿è¡çæ¶åï¼è½ç¶ä¸ä¼çå°è¿ä¸ªæä»¶ï¼ä½æ¯å®éä¸è¯¥æä»¶ä¼ä¸ç´è·ééåãå æ­¤ï¼å¨æå»ºéåçæ¶åï¼éè¦é¢å¤å°å¿ï¼æ¯ä¸å±å°½éåªåå«è¯¥å±éè¦æ·»å çä¸è¥¿ï¼ä»»ä½é¢å¤çä¸è¥¿åºè¯¥å¨è¯¥å±æå»ºç»æåæ¸çæã\n\nåå±å­å¨çç¹å¾è¿ä½¿å¾éåçå¤ç¨ãå®å¶åçæ´ä¸ºå®¹æãçè³å¯ä»¥ç¨ä¹åæå»ºå¥½çéåä½ä¸ºåºç¡å±ï¼ç¶åè¿ä¸æ­¥æ·»å æ°çå±ï¼ä»¥å®å¶èªå·±æéçåå®¹ï¼æå»ºæ°çéåã\n\nå³äºéåæå»ºï¼å°ä¼å¨åç»­ç¸å³ç« èä¸­åè¿ä¸æ­¥çè®²è§£ã",normalizedContent:"# docker éå\n\næä»¬é½ç¥éï¼æä½ç³»ç»åä¸ºåæ ¸åç¨æ·ç©ºé´ãå¯¹äº linux èè¨ï¼åæ ¸å¯å¨åï¼ä¼æè½½ root æä»¶ç³»ç»ä¸ºå¶æä¾ç¨æ·ç©ºé´æ¯æãè docker éåï¼imageï¼ï¼å°±ç¸å½äºæ¯ä¸ä¸ª root æä»¶ç³»ç»ãæ¯å¦å®æ¹éå ubuntu:16.04 å°±åå«äºå®æ´çä¸å¥ ubuntu 16.04 æå°ç³»ç»ç root æä»¶ç³»ç»ã\n\ndocker éåæ¯ä¸ä¸ªç¹æ®çæä»¶ç³»ç»ï¼é¤äºæä¾å®¹å¨è¿è¡æ¶æéçç¨åºãåºãèµæºãéç½®ç­æä»¶å¤ï¼è¿åå«äºä¸äºä¸ºè¿è¡æ¶åå¤çä¸äºéç½®åæ°ï¼å¦å¿åå·ãç¯å¢åéãç¨æ·ç­ï¼ãéåä¸åå«ä»»ä½å¨ææ°æ®ï¼å¶åå®¹å¨æå»ºä¹åä¹ä¸ä¼è¢«æ¹åã\n\n\n# åå±å­å¨\n\nå ä¸ºéååå«æä½ç³»ç»å®æ´ç root æä»¶ç³»ç»ï¼å¶ä½ç§¯å¾å¾æ¯åºå¤§çï¼å æ­¤å¨ docker è®¾è®¡æ¶ï¼å°±ååå©ç¨ union fs çææ¯ï¼å°å¶è®¾è®¡ä¸ºåå±å­å¨çæ¶æãæä»¥ä¸¥æ ¼æ¥è¯´ï¼éåå¹¶éæ¯åä¸ä¸ª iso é£æ ·çæåæä»¶ï¼éååªæ¯ä¸ä¸ªèæçæ¦å¿µï¼å¶å®éä½ç°å¹¶éç±ä¸ä¸ªæä»¶ç»æï¼èæ¯ç±ä¸ç»æä»¶ç³»ç»ç»æï¼æèè¯´ï¼ç±å¤å±æä»¶ç³»ç»èåç»æã\n\néåæå»ºæ¶ï¼ä¼ä¸å±å±æå»ºï¼åä¸å±æ¯åä¸å±çåºç¡ãæ¯ä¸å±æå»ºå®å°±ä¸ä¼ååçæ¹åï¼åä¸å±ä¸çä»»ä½æ¹ååªåçå¨èªå·±è¿ä¸å±ãæ¯å¦ï¼å é¤åä¸å±æä»¶çæä½ï¼å®éä¸æ¯ççå é¤åä¸å±çæä»¶ï¼èæ¯ä»å¨å½åå±æ è®°ä¸ºè¯¥æä»¶å·²å é¤ãå¨æç»å®¹å¨è¿è¡çæ¶åï¼è½ç¶ä¸ä¼çå°è¿ä¸ªæä»¶ï¼ä½æ¯å®éä¸è¯¥æä»¶ä¼ä¸ç´è·ééåãå æ­¤ï¼å¨æå»ºéåçæ¶åï¼éè¦é¢å¤å°å¿ï¼æ¯ä¸å±å°½éåªåå«è¯¥å±éè¦æ·»å çä¸è¥¿ï¼ä»»ä½é¢å¤çä¸è¥¿åºè¯¥å¨è¯¥å±æå»ºç»æåæ¸çæã\n\nåå±å­å¨çç¹å¾è¿ä½¿å¾éåçå¤ç¨ãå®å¶åçæ´ä¸ºå®¹æãçè³å¯ä»¥ç¨ä¹åæå»ºå¥½çéåä½ä¸ºåºç¡å±ï¼ç¶åè¿ä¸æ­¥æ·»å æ°çå±ï¼ä»¥å®å¶èªå·±æéçåå®¹ï¼æå»ºæ°çéåã\n\nå³äºéåæå»ºï¼å°ä¼å¨åç»­ç¸å³ç« èä¸­åè¿ä¸æ­¥çè®²è§£ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker å®¹å¨",frontmatter:{title:"Docker å®¹å¨",date:"2022-02-08T17:06:01.000Z",permalink:"/pages/c9e8a8/"},regularPath:"/17.Docker/02.Docker%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/05.Docker%20%E5%AE%B9%E5%99%A8.html",relativePath:"17.Docker/02.Docker åºæ¬æ¦å¿µ/05.Docker å®¹å¨.md",key:"v-4b0f9931",path:"/pages/c9e8a8/",headersStr:null,content:"# Docker å®¹å¨\n\néåï¼Imageï¼åå®¹å¨ï¼Containerï¼çå³ç³»ï¼å°±åæ¯é¢åå¯¹è±¡ç¨åºè®¾è®¡ä¸­ç ç±» å å®ä¾ ä¸æ ·ï¼éåæ¯éæçå®ä¹ï¼å®¹å¨æ¯éåè¿è¡æ¶çå®ä½ãå®¹å¨å¯ä»¥è¢«åå»ºãå¯å¨ãåæ­¢ãå é¤ãæåç­ã\n\nå®¹å¨çå®è´¨æ¯è¿ç¨ï¼ä½ä¸ç´æ¥å¨å®¿ä¸»æ§è¡çè¿ç¨ä¸åï¼å®¹å¨è¿ç¨è¿è¡äºå±äºèªå·±çç¬ç«ç å½åç©ºé´ãå æ­¤å®¹å¨å¯ä»¥æ¥æèªå·±ç root æä»¶ç³»ç»ãèªå·±çç½ç»éç½®ãèªå·±çè¿ç¨ç©ºé´ï¼çè³èªå·±çç¨æ· ID ç©ºé´ãå®¹å¨åçè¿ç¨æ¯è¿è¡å¨ä¸ä¸ªéç¦»çç¯å¢éï¼ä½¿ç¨èµ·æ¥ï¼å°±å¥½åæ¯å¨ä¸ä¸ªç¬ç«äºå®¿ä¸»çç³»ç»ä¸æä½ä¸æ ·ãè¿ç§ç¹æ§ä½¿å¾å®¹å¨å°è£çåºç¨æ¯ç´æ¥å¨å®¿ä¸»è¿è¡æ´å å®å¨ãä¹å ä¸ºè¿ç§éç¦»çç¹æ§ï¼å¾å¤äººåå­¦ Docker æ¶å¸¸å¸¸ä¼æ··æ·å®¹å¨åèææºã\n\nåé¢è®²è¿éåä½¿ç¨çæ¯åå±å­å¨ï¼å®¹å¨ä¹æ¯å¦æ­¤ãæ¯ä¸ä¸ªå®¹å¨è¿è¡æ¶ï¼æ¯ä»¥éåä¸ºåºç¡å±ï¼å¨å¶ä¸åå»ºä¸ä¸ªå½åå®¹å¨çå­å¨å±ï¼æä»¬å¯ä»¥ç§°è¿ä¸ªä¸ºå®¹å¨è¿è¡æ¶è¯»åèåå¤çå­å¨å±ä¸ºå®¹å¨å­å¨å±ã\n\nå®¹å¨å­å¨å±ççå­å¨æåå®¹å¨ä¸æ ·ï¼å®¹å¨æ¶äº¡æ¶ï¼å®¹å¨å­å¨å±ä¹éä¹æ¶äº¡ãå æ­¤ï¼ä»»ä½ä¿å­äºå®¹å¨å­å¨å±çä¿¡æ¯é½ä¼éå®¹å¨å é¤èä¸¢å¤±ã\n\næç§ Docker æä½³å®è·µçè¦æ±ï¼å®¹å¨ä¸åºè¯¥åå¶å­å¨å±ååå¥ä»»ä½æ°æ®ï¼å®¹å¨å­å¨å±è¦ä¿ææ ç¶æåãææçæä»¶åå¥æä½ï¼é½åºè¯¥ä½¿ç¨ æ°æ®å·ï¼Volumeï¼ãæèç»å®å®¿ä¸»ç®å½ï¼å¨è¿äºä½ç½®çè¯»åä¼è·³è¿å®¹å¨å­å¨å±ï¼ç´æ¥å¯¹å®¿ä¸»ï¼æç½ç»å­å¨ï¼åçè¯»åï¼å¶æ§è½åç¨³å®æ§æ´é«ã\n\næ°æ®å·ççå­å¨æç¬ç«äºå®¹å¨ï¼å®¹å¨æ¶äº¡ï¼æ°æ®å·ä¸ä¼æ¶äº¡ãå æ­¤ï¼ä½¿ç¨æ°æ®å·åï¼å®¹å¨å é¤æèéæ°è¿è¡ä¹åï¼æ°æ®å´ä¸ä¼ä¸¢å¤±ã",normalizedContent:"# docker å®¹å¨\n\néåï¼imageï¼åå®¹å¨ï¼containerï¼çå³ç³»ï¼å°±åæ¯é¢åå¯¹è±¡ç¨åºè®¾è®¡ä¸­ç ç±» å å®ä¾ ä¸æ ·ï¼éåæ¯éæçå®ä¹ï¼å®¹å¨æ¯éåè¿è¡æ¶çå®ä½ãå®¹å¨å¯ä»¥è¢«åå»ºãå¯å¨ãåæ­¢ãå é¤ãæåç­ã\n\nå®¹å¨çå®è´¨æ¯è¿ç¨ï¼ä½ä¸ç´æ¥å¨å®¿ä¸»æ§è¡çè¿ç¨ä¸åï¼å®¹å¨è¿ç¨è¿è¡äºå±äºèªå·±çç¬ç«ç å½åç©ºé´ãå æ­¤å®¹å¨å¯ä»¥æ¥æèªå·±ç root æä»¶ç³»ç»ãèªå·±çç½ç»éç½®ãèªå·±çè¿ç¨ç©ºé´ï¼çè³èªå·±çç¨æ· id ç©ºé´ãå®¹å¨åçè¿ç¨æ¯è¿è¡å¨ä¸ä¸ªéç¦»çç¯å¢éï¼ä½¿ç¨èµ·æ¥ï¼å°±å¥½åæ¯å¨ä¸ä¸ªç¬ç«äºå®¿ä¸»çç³»ç»ä¸æä½ä¸æ ·ãè¿ç§ç¹æ§ä½¿å¾å®¹å¨å°è£çåºç¨æ¯ç´æ¥å¨å®¿ä¸»è¿è¡æ´å å®å¨ãä¹å ä¸ºè¿ç§éç¦»çç¹æ§ï¼å¾å¤äººåå­¦ docker æ¶å¸¸å¸¸ä¼æ··æ·å®¹å¨åèææºã\n\nåé¢è®²è¿éåä½¿ç¨çæ¯åå±å­å¨ï¼å®¹å¨ä¹æ¯å¦æ­¤ãæ¯ä¸ä¸ªå®¹å¨è¿è¡æ¶ï¼æ¯ä»¥éåä¸ºåºç¡å±ï¼å¨å¶ä¸åå»ºä¸ä¸ªå½åå®¹å¨çå­å¨å±ï¼æä»¬å¯ä»¥ç§°è¿ä¸ªä¸ºå®¹å¨è¿è¡æ¶è¯»åèåå¤çå­å¨å±ä¸ºå®¹å¨å­å¨å±ã\n\nå®¹å¨å­å¨å±ççå­å¨æåå®¹å¨ä¸æ ·ï¼å®¹å¨æ¶äº¡æ¶ï¼å®¹å¨å­å¨å±ä¹éä¹æ¶äº¡ãå æ­¤ï¼ä»»ä½ä¿å­äºå®¹å¨å­å¨å±çä¿¡æ¯é½ä¼éå®¹å¨å é¤èä¸¢å¤±ã\n\næç§ docker æä½³å®è·µçè¦æ±ï¼å®¹å¨ä¸åºè¯¥åå¶å­å¨å±ååå¥ä»»ä½æ°æ®ï¼å®¹å¨å­å¨å±è¦ä¿ææ ç¶æåãææçæä»¶åå¥æä½ï¼é½åºè¯¥ä½¿ç¨ æ°æ®å·ï¼volumeï¼ãæèç»å®å®¿ä¸»ç®å½ï¼å¨è¿äºä½ç½®çè¯»åä¼è·³è¿å®¹å¨å­å¨å±ï¼ç´æ¥å¯¹å®¿ä¸»ï¼æç½ç»å­å¨ï¼åçè¯»åï¼å¶æ§è½åç¨³å®æ§æ´é«ã\n\næ°æ®å·ççå­å¨æç¬ç«äºå®¹å¨ï¼å®¹å¨æ¶äº¡ï¼æ°æ®å·ä¸ä¼æ¶äº¡ãå æ­¤ï¼ä½¿ç¨æ°æ®å·åï¼å®¹å¨å é¤æèéæ°è¿è¡ä¹åï¼æ°æ®å´ä¸ä¼ä¸¢å¤±ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker ä»åº",frontmatter:{title:"Docker ä»åº",date:"2022-02-08T17:06:01.000Z",permalink:"/pages/f00cd0/"},regularPath:"/17.Docker/02.Docker%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/06.Docker%20%E4%BB%93%E5%BA%93.html",relativePath:"17.Docker/02.Docker åºæ¬æ¦å¿µ/06.Docker ä»åº.md",key:"v-2046e738",path:"/pages/f00cd0/",headers:[{level:2,title:"å¬æ Docker Registry",slug:"å¬æ-docker-registry",normalizedTitle:"å¬æ docker registry",charIndex:565},{level:2,title:"ç§æ Docker Registry",slug:"ç§æ-docker-registry",normalizedTitle:"ç§æ docker registry",charIndex:1104}],headersStr:"å¬æ Docker Registry ç§æ Docker Registry",content:"# Docker ä»åº\n\néåæå»ºå®æåï¼å¯ä»¥å¾å®¹æçå¨å½åå®¿ä¸»æºä¸è¿è¡ï¼ä½æ¯ï¼å¦æéè¦å¨å¶å®æå¡å¨ä¸ä½¿ç¨è¿ä¸ªéåï¼æä»¬å°±éè¦ä¸ä¸ªéä¸­çå­å¨ãååéåçæå¡ï¼Docker Registry å°±æ¯è¿æ ·çæå¡ã\n\nä¸ä¸ª Docker Registry ä¸­å¯ä»¥åå«å¤ä¸ªä»åºï¼Repositoryï¼ï¼æ¯ä¸ªä»åºå¯ä»¥åå«å¤ä¸ªæ ç­¾ï¼Tagï¼ï¼æ¯ä¸ªæ ç­¾å¯¹åºä¸ä¸ªéåã\n\néå¸¸ï¼ä¸ä¸ªä»åºä¼åå«åä¸ä¸ªè½¯ä»¶ä¸åçæ¬çéåï¼èæ ç­¾å°±å¸¸ç¨äºå¯¹åºè¯¥è½¯ä»¶çåä¸ªçæ¬ãæä»¬å¯ä»¥éè¿ <ä»åºå>:<æ ç­¾> çæ ¼å¼æ¥æå®å·ä½æ¯è¿ä¸ªè½¯ä»¶åªä¸ªçæ¬çéåãå¦æä¸ç»åºæ ç­¾ï¼å°ä»¥ latest ä½ä¸ºé»è®¤æ ç­¾ã\n\nä»¥ Ubuntu éå ä¸ºä¾ï¼ubuntu æ¯ä»åºçåå­ï¼å¶ååå«æä¸åççæ¬æ ç­¾ï¼å¦ï¼14.04, 16.04ãæä»¬å¯ä»¥éè¿ ubuntu:14.04ï¼æè ubuntu:16.04 æ¥å·ä½æå®æéåªä¸ªçæ¬çéåãå¦æå¿½ç¥äºæ ç­¾ï¼æ¯å¦ ubuntuï¼é£å°è§ä¸º ubuntu:latestã\n\nä»åºåç»å¸¸ä»¥ ä¸¤æ®µå¼è·¯å¾ å½¢å¼åºç°ï¼æ¯å¦ jwilder/nginx-proxyï¼åèå¾å¾æå³ç Docker Registry å¤ç¨æ·ç¯å¢ä¸çç¨æ·åï¼åèåå¾å¾æ¯å¯¹åºçè½¯ä»¶åãä½è¿å¹¶éç»å¯¹ï¼åå³äºæä½¿ç¨çå·ä½ Docker Registry çè½¯ä»¶ææå¡ã\n\n\n# å¬æ Docker Registry\n\nDocker Registry å¬å¼æå¡æ¯å¼æ¾ç»ç¨æ·ä½¿ç¨ãåè®¸ç¨æ·ç®¡çéåç Registry æå¡ãä¸è¬è¿ç±»å¬å¼æå¡åè®¸ç¨æ·åè´¹ä¸ä¼ ãä¸è½½å¬å¼çéåï¼å¹¶å¯è½æä¾æ¶è´¹æå¡ä¾ç¨æ·ç®¡çç§æéåã\n\næå¸¸ä½¿ç¨ç Registry å¬å¼æå¡æ¯å®æ¹ç Docker Hubï¼è¿ä¹æ¯é»è®¤ç Registryï¼å¹¶æ¥æå¤§éçé«è´¨éçå®æ¹éåãé¤æ­¤ä»¥å¤ï¼è¿æ CoreOS ç Quay.ioï¼CoreOS ç¸å³çéåå­å¨å¨è¿éï¼Google ç Google Container Registryï¼Kubernetes çéåä½¿ç¨çå°±æ¯è¿ä¸ªæå¡ã\n\nç±äºæäºåå ï¼å¨å½åè®¿é®è¿äºæå¡å¯è½ä¼æ¯è¾æ¢ãå½åçä¸äºäºæå¡åæä¾äºéå¯¹ Docker Hub çéåæå¡ï¼Registry Mirrorï¼ï¼è¿äºéåæå¡è¢«ç§°ä¸ºå éå¨ãå¸¸è§çæ é¿éäºå éå¨ãDaoCloud å éå¨ ç­ãä½¿ç¨å éå¨ä¼ç´æ¥ä»å½åçå°åä¸è½½ Docker Hub çéåï¼æ¯ç´æ¥ä» Docker Hub ä¸è½½éåº¦ä¼æé«å¾å¤ã\n\nå½åä¹æä¸äºäºæå¡åæä¾ç±»ä¼¼äº Docker Hub çå¬å¼æå¡ãæ¯å¦ æ¶éäºéåä»åºãç½æäºéåæå¡ãDaoCloud éåå¸åºãé¿éäºéååº ç­ã\n\n\n# ç§æ Docker Registry\n\né¤äºä½¿ç¨å¬å¼æå¡å¤ï¼ç¨æ·è¿å¯ä»¥å¨æ¬å°æ­å»ºç§æ Docker RegistryãDocker å®æ¹æä¾äº Docker Registry éåï¼å¯ä»¥ç´æ¥ä½¿ç¨åä¸ºç§æ Registry æå¡ã\n\nå¼æºç Docker Registry éååªæä¾äº Docker Registry API çæå¡ç«¯å®ç°ï¼è¶³ä»¥æ¯æ docker å½ä»¤ï¼ä¸å½±åä½¿ç¨ãä½ä¸åå«å¾å½¢çé¢ï¼ä»¥åéåç»´æ¤ãç¨æ·ç®¡çãè®¿é®æ§å¶ç­é«çº§åè½ãå¨å®æ¹çåä¸åçæ¬ Docker Trusted Registry ä¸­ï¼æä¾äºè¿äºé«çº§åè½ã\n\né¤äºå®æ¹ç Docker Registry å¤ï¼è¿æç¬¬ä¸æ¹è½¯ä»¶å®ç°äº Docker Registry APIï¼çè³æä¾äºç¨æ·çé¢ä»¥åä¸äºé«çº§åè½ãæ¯å¦ï¼VMWare Harbor å Sonatype Nexusã",normalizedContent:"# docker ä»åº\n\néåæå»ºå®æåï¼å¯ä»¥å¾å®¹æçå¨å½åå®¿ä¸»æºä¸è¿è¡ï¼ä½æ¯ï¼å¦æéè¦å¨å¶å®æå¡å¨ä¸ä½¿ç¨è¿ä¸ªéåï¼æä»¬å°±éè¦ä¸ä¸ªéä¸­çå­å¨ãååéåçæå¡ï¼docker registry å°±æ¯è¿æ ·çæå¡ã\n\nä¸ä¸ª docker registry ä¸­å¯ä»¥åå«å¤ä¸ªä»åºï¼repositoryï¼ï¼æ¯ä¸ªä»åºå¯ä»¥åå«å¤ä¸ªæ ç­¾ï¼tagï¼ï¼æ¯ä¸ªæ ç­¾å¯¹åºä¸ä¸ªéåã\n\néå¸¸ï¼ä¸ä¸ªä»åºä¼åå«åä¸ä¸ªè½¯ä»¶ä¸åçæ¬çéåï¼èæ ç­¾å°±å¸¸ç¨äºå¯¹åºè¯¥è½¯ä»¶çåä¸ªçæ¬ãæä»¬å¯ä»¥éè¿ <ä»åºå>:<æ ç­¾> çæ ¼å¼æ¥æå®å·ä½æ¯è¿ä¸ªè½¯ä»¶åªä¸ªçæ¬çéåãå¦æä¸ç»åºæ ç­¾ï¼å°ä»¥ latest ä½ä¸ºé»è®¤æ ç­¾ã\n\nä»¥ ubuntu éå ä¸ºä¾ï¼ubuntu æ¯ä»åºçåå­ï¼å¶ååå«æä¸åççæ¬æ ç­¾ï¼å¦ï¼14.04, 16.04ãæä»¬å¯ä»¥éè¿ ubuntu:14.04ï¼æè ubuntu:16.04 æ¥å·ä½æå®æéåªä¸ªçæ¬çéåãå¦æå¿½ç¥äºæ ç­¾ï¼æ¯å¦ ubuntuï¼é£å°è§ä¸º ubuntu:latestã\n\nä»åºåç»å¸¸ä»¥ ä¸¤æ®µå¼è·¯å¾ å½¢å¼åºç°ï¼æ¯å¦ jwilder/nginx-proxyï¼åèå¾å¾æå³ç docker registry å¤ç¨æ·ç¯å¢ä¸çç¨æ·åï¼åèåå¾å¾æ¯å¯¹åºçè½¯ä»¶åãä½è¿å¹¶éç»å¯¹ï¼åå³äºæä½¿ç¨çå·ä½ docker registry çè½¯ä»¶ææå¡ã\n\n\n# å¬æ docker registry\n\ndocker registry å¬å¼æå¡æ¯å¼æ¾ç»ç¨æ·ä½¿ç¨ãåè®¸ç¨æ·ç®¡çéåç registry æå¡ãä¸è¬è¿ç±»å¬å¼æå¡åè®¸ç¨æ·åè´¹ä¸ä¼ ãä¸è½½å¬å¼çéåï¼å¹¶å¯è½æä¾æ¶è´¹æå¡ä¾ç¨æ·ç®¡çç§æéåã\n\næå¸¸ä½¿ç¨ç registry å¬å¼æå¡æ¯å®æ¹ç docker hubï¼è¿ä¹æ¯é»è®¤ç registryï¼å¹¶æ¥æå¤§éçé«è´¨éçå®æ¹éåãé¤æ­¤ä»¥å¤ï¼è¿æ coreos ç quay.ioï¼coreos ç¸å³çéåå­å¨å¨è¿éï¼google ç google container registryï¼kubernetes çéåä½¿ç¨çå°±æ¯è¿ä¸ªæå¡ã\n\nç±äºæäºåå ï¼å¨å½åè®¿é®è¿äºæå¡å¯è½ä¼æ¯è¾æ¢ãå½åçä¸äºäºæå¡åæä¾äºéå¯¹ docker hub çéåæå¡ï¼registry mirrorï¼ï¼è¿äºéåæå¡è¢«ç§°ä¸ºå éå¨ãå¸¸è§çæ é¿éäºå éå¨ãdaocloud å éå¨ ç­ãä½¿ç¨å éå¨ä¼ç´æ¥ä»å½åçå°åä¸è½½ docker hub çéåï¼æ¯ç´æ¥ä» docker hub ä¸è½½éåº¦ä¼æé«å¾å¤ã\n\nå½åä¹æä¸äºäºæå¡åæä¾ç±»ä¼¼äº docker hub çå¬å¼æå¡ãæ¯å¦ æ¶éäºéåä»åºãç½æäºéåæå¡ãdaocloud éåå¸åºãé¿éäºéååº ç­ã\n\n\n# ç§æ docker registry\n\né¤äºä½¿ç¨å¬å¼æå¡å¤ï¼ç¨æ·è¿å¯ä»¥å¨æ¬å°æ­å»ºç§æ docker registryãdocker å®æ¹æä¾äº docker registry éåï¼å¯ä»¥ç´æ¥ä½¿ç¨åä¸ºç§æ registry æå¡ã\n\nå¼æºç docker registry éååªæä¾äº docker registry api çæå¡ç«¯å®ç°ï¼è¶³ä»¥æ¯æ docker å½ä»¤ï¼ä¸å½±åä½¿ç¨ãä½ä¸åå«å¾å½¢çé¢ï¼ä»¥åéåç»´æ¤ãç¨æ·ç®¡çãè®¿é®æ§å¶ç­é«çº§åè½ãå¨å®æ¹çåä¸åçæ¬ docker trusted registry ä¸­ï¼æä¾äºè¿äºé«çº§åè½ã\n\né¤äºå®æ¹ç docker registry å¤ï¼è¿æç¬¬ä¸æ¹è½¯ä»¶å®ç°äº docker registry apiï¼çè³æä¾äºç¨æ·çé¢ä»¥åä¸äºé«çº§åè½ãæ¯å¦ï¼vmware harbor å sonatype nexusã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"å®è£ Docker",frontmatter:{title:"å®è£ Docker",date:"2022-02-08T17:17:46.000Z",permalink:"/pages/11ef44/"},regularPath:"/17.Docker/03.%E5%AE%89%E8%A3%85%20Docker/01.%E5%AE%89%E8%A3%85%20Docker.html",relativePath:"17.Docker/03.å®è£ Docker/01.å®è£ Docker.md",key:"v-05980e1b",path:"/pages/11ef44/",headersStr:null,content:"# å®è£ Docker\n\nDocker å¨ 1.13 çæ¬ä¹åï¼ä» 2017 å¹´ç 3 æ 1 æ¥å¼å§ï¼çæ¬å½åè§ååä¸ºå¦ä¸ï¼\n\né¡¹ç®          è¯´æ\nçæ¬æ ¼å¼        YY.MM\nStable çæ¬   æ¯ä¸ªå­£åº¦åè¡\nEdge çæ¬     æ¯ä¸ªæåè¡\n\nåæ¶ Docker ååä¸º CE å EEãCE å³ç¤¾åºçï¼åè´¹ï¼æ¯æå¨æä¸ä¸ªæï¼ï¼EE å³ä¼ä¸çï¼å¼ºè°å®å¨ï¼ä»è´¹ä½¿ç¨ã\n\nDocker CE æ¯æåå¸ä¸ä¸ª Edge çæ¬ (17.03, 17.04, 17.05...)ï¼æ¯ä¸ä¸ªæåå¸ä¸ä¸ª Stable çæ¬ (17.03, 17.06, 17.09...)ï¼Docker EE å Stable çæ¬å·ä¿æä¸è´ï¼ä½æ¯ä¸ªçæ¬æä¾ä¸å¹´ç»´æ¤ã\n\nå®æ¹ç½ç«ä¸æåç§ç¯å¢ä¸ç å®è£æåï¼è¿éä¸»è¦ä»ç» Docker CE å¨ Linux ãWindows 10 (PC) å macOS ä¸çå®è£ã",normalizedContent:"# å®è£ docker\n\ndocker å¨ 1.13 çæ¬ä¹åï¼ä» 2017 å¹´ç 3 æ 1 æ¥å¼å§ï¼çæ¬å½åè§ååä¸ºå¦ä¸ï¼\n\né¡¹ç®          è¯´æ\nçæ¬æ ¼å¼        yy.mm\nstable çæ¬   æ¯ä¸ªå­£åº¦åè¡\nedge çæ¬     æ¯ä¸ªæåè¡\n\nåæ¶ docker ååä¸º ce å eeãce å³ç¤¾åºçï¼åè´¹ï¼æ¯æå¨æä¸ä¸ªæï¼ï¼ee å³ä¼ä¸çï¼å¼ºè°å®å¨ï¼ä»è´¹ä½¿ç¨ã\n\ndocker ce æ¯æåå¸ä¸ä¸ª edge çæ¬ (17.03, 17.04, 17.05...)ï¼æ¯ä¸ä¸ªæåå¸ä¸ä¸ª stable çæ¬ (17.03, 17.06, 17.09...)ï¼docker ee å stable çæ¬å·ä¿æä¸è´ï¼ä½æ¯ä¸ªçæ¬æä¾ä¸å¹´ç»´æ¤ã\n\nå®æ¹ç½ç«ä¸æåç§ç¯å¢ä¸ç å®è£æåï¼è¿éä¸»è¦ä»ç» docker ce å¨ linux ãwindows 10 (pc) å macos ä¸çå®è£ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Ubuntu å®è£ Docker",frontmatter:{title:"Ubuntu å®è£ Docker",date:"2022-02-08T17:17:46.000Z",permalink:"/pages/748872/"},regularPath:"/17.Docker/03.%E5%AE%89%E8%A3%85%20Docker/02.Ubuntu%20%E5%AE%89%E8%A3%85%20Docker.html",relativePath:"17.Docker/03.å®è£ Docker/02.Ubuntu å®è£ Docker.md",key:"v-4637e644",path:"/pages/748872/",headers:[{level:2,title:"åå¤å·¥ä½",slug:"åå¤å·¥ä½",normalizedTitle:"åå¤å·¥ä½",charIndex:74},{level:3,title:"ç³»ç»è¦æ±",slug:"ç³»ç»è¦æ±",normalizedTitle:"ç³»ç»è¦æ±",charIndex:83},{level:3,title:"å³é­swap",slug:"å³é­swap",normalizedTitle:"å³é­swap",charIndex:335},{level:3,title:"å¸è½½æ§çæ¬",slug:"å¸è½½æ§çæ¬",normalizedTitle:"å¸è½½æ§çæ¬",charIndex:686},{level:3,title:"æ¯æçå­å¨é©±å¨ç¨åº",slug:"æ¯æçå­å¨é©±å¨ç¨åº",normalizedTitle:"æ¯æçå­å¨é©±å¨ç¨åº",charIndex:828},{level:2,title:"ä½¿ç¨å­å¨åºå®è£",slug:"ä½¿ç¨å­å¨åºå®è£",normalizedTitle:"ä½¿ç¨å­å¨åºå®è£",charIndex:899},{level:3,title:"è®¾ç½®å­å¨åº",slug:"è®¾ç½®å­å¨åº",normalizedTitle:"è®¾ç½®å­å¨åº",charIndex:969},{level:3,title:"æ´æ°å¹¶å®è£ Docker CE",slug:"æ´æ°å¹¶å®è£-docker-ce",normalizedTitle:"æ´æ°å¹¶å®è£ docker ce",charIndex:1689},{level:2,title:"ä½¿ç¨èæ¬èªå¨å®è£",slug:"ä½¿ç¨èæ¬èªå¨å®è£",normalizedTitle:"ä½¿ç¨èæ¬èªå¨å®è£",charIndex:1933},{level:2,title:"å¯å¨ Docker CE",slug:"å¯å¨-docker-ce",normalizedTitle:"å¯å¨ docker ce",charIndex:2142},{level:2,title:"å»ºç« docker ç¨æ·ç»",slug:"å»ºç«-docker-ç¨æ·ç»",normalizedTitle:"å»ºç« docker ç¨æ·ç»",charIndex:2218},{level:2,title:"æµè¯ Docker æ¯å¦å®è£æ­£ç¡®",slug:"æµè¯-docker-æ¯å¦å®è£æ­£ç¡®",normalizedTitle:"æµè¯ docker æ¯å¦å®è£æ­£ç¡®",charIndex:2518},{level:2,title:"éåå é",slug:"éåå é",normalizedTitle:"éåå é",charIndex:3650},{level:2,title:"å¸¸è§é®é¢",slug:"å¸¸è§é®é¢",normalizedTitle:"å¸¸è§é®é¢",charIndex:3715},{level:2,title:"å¸è½½ Docker Engine",slug:"å¸è½½-docker-engine",normalizedTitle:"å¸è½½ docker engine",charIndex:3976},{level:2,title:"åèææ¡£",slug:"åèææ¡£",normalizedTitle:"åèææ¡£",charIndex:4367}],headersStr:"åå¤å·¥ä½ ç³»ç»è¦æ± å³é­swap å¸è½½æ§çæ¬ æ¯æçå­å¨é©±å¨ç¨åº ä½¿ç¨å­å¨åºå®è£ è®¾ç½®å­å¨åº æ´æ°å¹¶å®è£ Docker CE ä½¿ç¨èæ¬èªå¨å®è£ å¯å¨ Docker CE å»ºç« docker ç¨æ·ç» æµè¯ Docker æ¯å¦å®è£æ­£ç¡® éåå é å¸¸è§é®é¢ å¸è½½ Docker Engine åèææ¡£",content:'# Ubuntu å®è£ Docker\n\næ³¨æ\n\nåå¿å¨æ²¡æéç½® Docker APT æºçæåµä¸ç´æ¥ä½¿ç¨ apt å½ä»¤å®è£ Docker.\n\n\n# åå¤å·¥ä½\n\n\n# ç³»ç»è¦æ±\n\nDocker CE æ¯æä»¥ä¸çæ¬ç Ubuntu æä½ç³»ç»ï¼\n\n * Ubuntu Focal 20.04 (LTS)\n * Ubuntu Bionic 18.04 (LTS)\n\nDocker CE å¯ä»¥å®è£å¨ 64 ä½ç x86 å¹³å°æ ARM å¹³å°ä¸ãUbuntu åè¡çä¸­ï¼LTSï¼Long-Term-Supportï¼é¿ææ¯æçæ¬ï¼ä¼è·å¾ 5 å¹´çåçº§ç»´æ¤æ¯æï¼è¿æ ·ççæ¬ä¼æ´ç¨³å®ï¼å æ­¤å¨çäº§ç¯å¢ä¸­æ¨èä½¿ç¨ LTS çæ¬,å½åææ°ç LTS çæ¬ä¸º Ubuntu 20.04ã\n\n\n# å³é­swap\n\nswapoff -a\nyes | cp /etc/fstab /etc/fstab_bak\ncat /etc/fstab_bak |grep -v swap > /etc/fstab\n\n\nä½¿ç¨free -hå½ä»¤æ£æ¥éç½®æ¯å¦çæ\n\n\n\n\n\nÂ \n\n\nfree -h   \n              total        used        free      shared  buff/cache   available\nMem:           1.8G        142M        1.5G        8.5M        122M        1.5G\nSwap:            0B          0B          0B\n\n\n\n# å¸è½½æ§çæ¬\n\næ§çæ¬ç Docker ç§°ä¸º dockerï¼docker.io æè docker-engineï¼ä½¿ç¨ä»¥ä¸å½ä»¤å¸è½½æ§çæ¬ï¼\n\nsudo apt-get remove docker docker-engine docker.io containerd runc\n\n\n\n# æ¯æçå­å¨é©±å¨ç¨åº\n\nUbuntu 16.04 + ä¸ç Docker CE é»è®¤ä½¿ç¨ overlay2 å­å¨å±é©±å¨,æ éæå¨éç½®ã\n\n\n# ä½¿ç¨å­å¨åºå®è£\n\nå¨æ°ä¸»æºä¸é¦æ¬¡å®è£Dockerå¼æä¹åï¼éè¦è®¾ç½®Dockerå­å¨åºãä¹åï¼æ¨å¯ä»¥ä»å­å¨åºå®è£åæ´æ°Dockerã\n\n\n# è®¾ç½®å­å¨åº\n\nStep 1 : æ´æ°aptç¨åºåç´¢å¼å¹¶å®è£ç¨åºåï¼ä»¥åè®¸aptéè¿HTTPSä½¿ç¨å­å¨åºï¼\n\nsudo apt-get update\n\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg-agent \\\n    software-properties-common\n\n\nStep 2 : æ·»å é¿éäºçå®æ¹GPGå¯é¥ï¼\n\ncurl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n\n\nStep 3 : éªè¯ GPG è¯ä¹¦\n\nsudo apt-key fingerprint 0EBFCD88\n\npub   rsa4096 2017-02-22 [SCEA]\n      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88\nuid           [ unknown] Docker Release (CE deb) <docker@docker.com>\nsub   rsa4096 2017-02-22 [S]\n\n\nStep 4 : åå¥è½¯ä»¶æºä¿¡æ¯\n\nsudo add-apt-repository \\\n   "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable"\n\n\n\n# æ´æ°å¹¶å®è£ Docker CE\n\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n\n\næç¤º\n\nä»¥ä¸å½ä»¤ä¼æ·»å ç¨³å®çæ¬ç Docker CE APT éåæºï¼å¦æéè¦ææ°æèæµè¯çæ¬ç Docker CE è¯·å° stable æ¹ä¸º edge æè testãä» Docker 17.06 å¼å§ï¼edge test çæ¬ç APT éåæºä¹ä¼åå«ç¨³å®çæ¬ç Dockerã\n\n\n# ä½¿ç¨èæ¬èªå¨å®è£\n\nå¨æµè¯æå¼åç¯å¢ä¸­ Docker å®æ¹ä¸ºäºç®åå®è£æµç¨ï¼æä¾äºä¸å¥ä¾¿æ·çå®è£èæ¬ï¼Ubuntu ç³»ç»ä¸å¯ä»¥ä½¿ç¨è¿å¥èæ¬å®è£ï¼\n\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n\n\næ§è¡è¿ä¸ªå½ä»¤åï¼èæ¬å°±ä¼èªå¨çå°ä¸ååå¤å·¥ä½åå¥½ï¼å¹¶ä¸æ Docker CE ç Edge çæ¬å®è£å¨ç³»ç»ä¸­ã\n\n\n# å¯å¨ Docker CE\n\nsudo systemctl enable docker\nsudo systemctl start docker\n\n\n\n# å»ºç« docker ç¨æ·ç»\n\né»è®¤æåµä¸ï¼docker å½ä»¤ä¼ä½¿ç¨ Unix socket ä¸ Docker å¼æéè®¯ãèåªæ root ç¨æ·å docker ç»çç¨æ·æå¯ä»¥è®¿é® Docker å¼æç Unix socketãåºäºå®å¨èèï¼ä¸è¬ Linux ç³»ç»ä¸ä¸ä¼ç´æ¥ä½¿ç¨ root ç¨æ·ãå æ­¤ï¼æ´å¥½å°åæ³æ¯å°éè¦ä½¿ç¨ docker çç¨æ·å å¥ docker ç¨æ·ç»ã\n\nå»ºç« docker ç»ï¼\n\nsudo groupadd docker\n\n\nå°å½åç¨æ·å å¥ docker ç»ï¼\n\nsudo usermod -aG docker $USER\n\n\néåºå½åç»ç«¯å¹¶éæ°ç»å½ï¼è¿è¡å¦ä¸æµè¯ã\n\n\n# æµè¯ Docker æ¯å¦å®è£æ­£ç¡®\n\ndocker run hello-world\n\nUnable to find image \'hello-world:latest\' locally\nlatest: Pulling from library/hello-world\nca4f61b1923c: Pull complete\nDigest: sha256:be0cd392e45be79ffeffa6b05338b98ebb16c87b255f48e297ec7f98e123905c\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.\n    (amd64)\n 3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker ID:\n https://cloud.docker.com/\n\nFor more examples and ideas, visit:\n https://docs.docker.com/engine/userguide/\n\n\nè¥è½æ­£å¸¸è¾åºä»¥ä¸ä¿¡æ¯ï¼åè¯´æå®è£æåã\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå Docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ Docker ä¹åéç½® å½åéåå éã\n\n\n# å¸¸è§é®é¢\n\ndocker infoæä»¤æ¥è¥ä¸éè¯¯ï¼WARNING: No memory limit support æ WARNING: No swap limit support\n\nè§£å³æ¹æ³ï¼\n\n1ãæå¼/etc/default/grubæä»¶ï¼æ·»å å¦ä¸åå®¹ï¼\n\nvim /etc/default/grub\n# ä¿®æ¹\nGRUB_CMDLINE_LINUX="cgroup_enable=memory swapaccount=1"\n\n\n2ãæ´æ°grub\n\nupdate-grub\n\n\n3ãéå¯ç³»ç»\n\nreboot\n\n\n\n# å¸è½½ Docker Engine\n\n 1. Uninstall the Docker Engine, CLI, and Containerd packages:\n\nsudo apt-get purge docker-ce docker-ce-cli containerd.io\n\n\n 2. Images, containers, volumes, or customized configuration files on your host are not automatically removed. To delete all images, containers, and volumes:\n\nsudo rm -rf /var/lib/docker\n\n\nYou must delete any edited configuration files manually.\n\n\n# åèææ¡£\n\n * Docker å®æ¹ Ubuntu å®è£ææ¡£',normalizedContent:'# ubuntu å®è£ docker\n\næ³¨æ\n\nåå¿å¨æ²¡æéç½® docker apt æºçæåµä¸ç´æ¥ä½¿ç¨ apt å½ä»¤å®è£ docker.\n\n\n# åå¤å·¥ä½\n\n\n# ç³»ç»è¦æ±\n\ndocker ce æ¯æä»¥ä¸çæ¬ç ubuntu æä½ç³»ç»ï¼\n\n * ubuntu focal 20.04 (lts)\n * ubuntu bionic 18.04 (lts)\n\ndocker ce å¯ä»¥å®è£å¨ 64 ä½ç x86 å¹³å°æ arm å¹³å°ä¸ãubuntu åè¡çä¸­ï¼ltsï¼long-term-supportï¼é¿ææ¯æçæ¬ï¼ä¼è·å¾ 5 å¹´çåçº§ç»´æ¤æ¯æï¼è¿æ ·ççæ¬ä¼æ´ç¨³å®ï¼å æ­¤å¨çäº§ç¯å¢ä¸­æ¨èä½¿ç¨ lts çæ¬,å½åææ°ç lts çæ¬ä¸º ubuntu 20.04ã\n\n\n# å³é­swap\n\nswapoff -a\nyes | cp /etc/fstab /etc/fstab_bak\ncat /etc/fstab_bak |grep -v swap > /etc/fstab\n\n\nä½¿ç¨free -hå½ä»¤æ£æ¥éç½®æ¯å¦çæ\n\n\n\n\n\nÂ \n\n\nfree -h   \n              total        used        free      shared  buff/cache   available\nmem:           1.8g        142m        1.5g        8.5m        122m        1.5g\nswap:            0b          0b          0b\n\n\n\n# å¸è½½æ§çæ¬\n\næ§çæ¬ç docker ç§°ä¸º dockerï¼docker.io æè docker-engineï¼ä½¿ç¨ä»¥ä¸å½ä»¤å¸è½½æ§çæ¬ï¼\n\nsudo apt-get remove docker docker-engine docker.io containerd runc\n\n\n\n# æ¯æçå­å¨é©±å¨ç¨åº\n\nubuntu 16.04 + ä¸ç docker ce é»è®¤ä½¿ç¨ overlay2 å­å¨å±é©±å¨,æ éæå¨éç½®ã\n\n\n# ä½¿ç¨å­å¨åºå®è£\n\nå¨æ°ä¸»æºä¸é¦æ¬¡å®è£dockerå¼æä¹åï¼éè¦è®¾ç½®dockerå­å¨åºãä¹åï¼æ¨å¯ä»¥ä»å­å¨åºå®è£åæ´æ°dockerã\n\n\n# è®¾ç½®å­å¨åº\n\nstep 1 : æ´æ°aptç¨åºåç´¢å¼å¹¶å®è£ç¨åºåï¼ä»¥åè®¸aptéè¿httpsä½¿ç¨å­å¨åºï¼\n\nsudo apt-get update\n\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg-agent \\\n    software-properties-common\n\n\nstep 2 : æ·»å é¿éäºçå®æ¹gpgå¯é¥ï¼\n\ncurl -fssl http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n\n\nstep 3 : éªè¯ gpg è¯ä¹¦\n\nsudo apt-key fingerprint 0ebfcd88\n\npub   rsa4096 2017-02-22 [scea]\n      9dc8 5822 9fc7 dd38 854a  e2d8 8d81 803c 0ebf cd88\nuid           [ unknown] docker release (ce deb) <docker@docker.com>\nsub   rsa4096 2017-02-22 [s]\n\n\nstep 4 : åå¥è½¯ä»¶æºä¿¡æ¯\n\nsudo add-apt-repository \\\n   "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable"\n\n\n\n# æ´æ°å¹¶å®è£ docker ce\n\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n\n\næç¤º\n\nä»¥ä¸å½ä»¤ä¼æ·»å ç¨³å®çæ¬ç docker ce apt éåæºï¼å¦æéè¦ææ°æèæµè¯çæ¬ç docker ce è¯·å° stable æ¹ä¸º edge æè testãä» docker 17.06 å¼å§ï¼edge test çæ¬ç apt éåæºä¹ä¼åå«ç¨³å®çæ¬ç dockerã\n\n\n# ä½¿ç¨èæ¬èªå¨å®è£\n\nå¨æµè¯æå¼åç¯å¢ä¸­ docker å®æ¹ä¸ºäºç®åå®è£æµç¨ï¼æä¾äºä¸å¥ä¾¿æ·çå®è£èæ¬ï¼ubuntu ç³»ç»ä¸å¯ä»¥ä½¿ç¨è¿å¥èæ¬å®è£ï¼\n\ncurl -fssl https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n\n\næ§è¡è¿ä¸ªå½ä»¤åï¼èæ¬å°±ä¼èªå¨çå°ä¸ååå¤å·¥ä½åå¥½ï¼å¹¶ä¸æ docker ce ç edge çæ¬å®è£å¨ç³»ç»ä¸­ã\n\n\n# å¯å¨ docker ce\n\nsudo systemctl enable docker\nsudo systemctl start docker\n\n\n\n# å»ºç« docker ç¨æ·ç»\n\né»è®¤æåµä¸ï¼docker å½ä»¤ä¼ä½¿ç¨ unix socket ä¸ docker å¼æéè®¯ãèåªæ root ç¨æ·å docker ç»çç¨æ·æå¯ä»¥è®¿é® docker å¼æç unix socketãåºäºå®å¨èèï¼ä¸è¬ linux ç³»ç»ä¸ä¸ä¼ç´æ¥ä½¿ç¨ root ç¨æ·ãå æ­¤ï¼æ´å¥½å°åæ³æ¯å°éè¦ä½¿ç¨ docker çç¨æ·å å¥ docker ç¨æ·ç»ã\n\nå»ºç« docker ç»ï¼\n\nsudo groupadd docker\n\n\nå°å½åç¨æ·å å¥ docker ç»ï¼\n\nsudo usermod -ag docker $user\n\n\néåºå½åç»ç«¯å¹¶éæ°ç»å½ï¼è¿è¡å¦ä¸æµè¯ã\n\n\n# æµè¯ docker æ¯å¦å®è£æ­£ç¡®\n\ndocker run hello-world\n\nunable to find image \'hello-world:latest\' locally\nlatest: pulling from library/hello-world\nca4f61b1923c: pull complete\ndigest: sha256:be0cd392e45be79ffeffa6b05338b98ebb16c87b255f48e297ec7f98e123905c\nstatus: downloaded newer image for hello-world:latest\n\nhello from docker!\nthis message shows that your installation appears to be working correctly.\n\nto generate this message, docker took the following steps:\n 1. the docker client contacted the docker daemon.\n 2. the docker daemon pulled the "hello-world" image from the docker hub.\n    (amd64)\n 3. the docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. the docker daemon streamed that output to the docker client, which sent it\n    to your terminal.\n\nto try something more ambitious, you can run an ubuntu container with:\n docker run -it ubuntu bash\n\nshare images, automate workflows, and more with a free docker id:\n https://cloud.docker.com/\n\nfor more examples and ideas, visit:\n https://docs.docker.com/engine/userguide/\n\n\nè¥è½æ­£å¸¸è¾åºä»¥ä¸ä¿¡æ¯ï¼åè¯´æå®è£æåã\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ docker ä¹åéç½® å½åéåå éã\n\n\n# å¸¸è§é®é¢\n\ndocker infoæä»¤æ¥è¥ä¸éè¯¯ï¼warning: no memory limit support æ warning: no swap limit support\n\nè§£å³æ¹æ³ï¼\n\n1ãæå¼/etc/default/grubæä»¶ï¼æ·»å å¦ä¸åå®¹ï¼\n\nvim /etc/default/grub\n# ä¿®æ¹\ngrub_cmdline_linux="cgroup_enable=memory swapaccount=1"\n\n\n2ãæ´æ°grub\n\nupdate-grub\n\n\n3ãéå¯ç³»ç»\n\nreboot\n\n\n\n# å¸è½½ docker engine\n\n 1. uninstall the docker engine, cli, and containerd packages:\n\nsudo apt-get purge docker-ce docker-ce-cli containerd.io\n\n\n 2. images, containers, volumes, or customized configuration files on your host are not automatically removed. to delete all images, containers, and volumes:\n\nsudo rm -rf /var/lib/docker\n\n\nyou must delete any edited configuration files manually.\n\n\n# åèææ¡£\n\n * docker å®æ¹ ubuntu å®è£ææ¡£',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"CentOS å®è£ Docker",frontmatter:{title:"CentOS å®è£ Docker",date:"2022-02-08T17:17:46.000Z",permalink:"/pages/102284/"},regularPath:"/17.Docker/03.%E5%AE%89%E8%A3%85%20Docker/03.CentOS%20%E5%AE%89%E8%A3%85%20Docker.html",relativePath:"17.Docker/03.å®è£ Docker/03.CentOS å®è£ Docker.md",key:"v-5b6a58d6",path:"/pages/102284/",headers:[{level:2,title:"åææ¡ä»¶",slug:"åææ¡ä»¶",normalizedTitle:"åææ¡ä»¶",charIndex:74},{level:3,title:"æä½ç³»ç»è¦æ±",slug:"æä½ç³»ç»è¦æ±",normalizedTitle:"æä½ç³»ç»è¦æ±",charIndex:83},{level:3,title:"å¸è½½æ§çæ¬",slug:"å¸è½½æ§çæ¬",normalizedTitle:"å¸è½½æ§çæ¬",charIndex:227},{level:2,title:"ä½¿ç¨ yum å®è£",slug:"ä½¿ç¨-yum-å®è£",normalizedTitle:"ä½¿ç¨ yum å®è£",charIndex:573},{level:3,title:"è®¾ç½®å­å¨åº",slug:"è®¾ç½®å­å¨åº",normalizedTitle:"è®¾ç½®å­å¨åº",charIndex:660},{level:3,title:"å®è£ Docker Engine-Community",slug:"å®è£-docker-engine-community",normalizedTitle:"å®è£ docker engine-community",charIndex:1323},{level:2,title:"å¯å¨ Docker CE",slug:"å¯å¨-docker-ce",normalizedTitle:"å¯å¨ docker ce",charIndex:1704},{level:2,title:"å¼æºèªå¯å¨",slug:"å¼æºèªå¯å¨",normalizedTitle:"å¼æºèªå¯å¨",charIndex:1751},{level:2,title:"å»ºç« docker ç¨æ·ç»",slug:"å»ºç«-docker-ç¨æ·ç»",normalizedTitle:"å»ºç« docker ç¨æ·ç»",charIndex:1792},{level:2,title:"æµè¯ Docker æ¯å¦å®è£æ­£ç¡®",slug:"æµè¯-docker-æ¯å¦å®è£æ­£ç¡®",normalizedTitle:"æµè¯ docker æ¯å¦å®è£æ­£ç¡®",charIndex:2092},{level:2,title:"éåå é",slug:"éåå é",normalizedTitle:"éåå é",charIndex:3224},{level:2,title:"æ·»å åæ ¸åæ°",slug:"æ·»å åæ ¸åæ°",normalizedTitle:"æ·»å åæ ¸åæ°",charIndex:3289},{level:2,title:"åèææ¡£",slug:"åèææ¡£",normalizedTitle:"åèææ¡£",charIndex:3617}],headersStr:"åææ¡ä»¶ æä½ç³»ç»è¦æ± å¸è½½æ§çæ¬ ä½¿ç¨ yum å®è£ è®¾ç½®å­å¨åº å®è£ Docker Engine-Community å¯å¨ Docker CE å¼æºèªå¯å¨ å»ºç« docker ç¨æ·ç» æµè¯ Docker æ¯å¦å®è£æ­£ç¡® éåå é æ·»å åæ ¸åæ° åèææ¡£",content:"# CentOS å®è£ Docker\n\næ³¨æ\n\nåå¿å¨æ²¡æéç½® Docker YUM æºçæåµä¸ç´æ¥ä½¿ç¨ yum å½ä»¤å®è£ Docker.\n\n\n# åææ¡ä»¶\n\n\n# æä½ç³»ç»è¦æ±\n\nè¦å®è£Docker Engine-Communityï¼æ¨éè¦ä¸ä¸ªCentOS 7çç»´æ¤çæ¬ãä¸æ¯æææªæµè¯å­æ¡£çæ¬ãè¯¥centos-extrasåºå¿é¡»å¯ç¨ãé»è®¤æåµä¸ï¼æ­¤å­å¨åºæ¯å¯ç¨çï¼ä½æ¯å¦æå·²ç¦ç¨å®ï¼åéè¦ éæ°å¯ç¨å®ãoverlay2å»ºè®®ä½¿ç¨å­å¨é©±å¨ç¨åºã\n\n\n# å¸è½½æ§çæ¬\n\næ§çæ¬ç Docker ç§°ä¸º docker æè docker-engineï¼ä½¿ç¨ä»¥ä¸å½ä»¤å¸è½½æ§çæ¬ï¼\n\nsudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n\n\n\n# ä½¿ç¨ yum å®è£\n\nå¨æ°ä¸»æºä¸é¦æ¬¡å®è£Docker Engine-Communityä¹åï¼éè¦è®¾ç½®Dockerå­å¨åºãä¹åï¼æ¨å¯ä»¥ä»å­å¨åºå®è£åæ´æ°Dockerã\n\n\n# è®¾ç½®å­å¨åº\n\n1.å®è£æéçè½¯ä»¶åãyum-utilsæä¾äºyum-config-manager æç¨ï¼å¹¶device-mapper-persistent-dataålvm2ç±éè¦devicemapperå­å¨é©±å¨ç¨åºã\n\nsudo yum install -y yum-utils \\\n           device-mapper-persistent-data \\\n           lvm2\n\n\n2.ä½¿ç¨ä»¥ä¸å½ä»¤æ¥è®¾ç½®ç¨³å®çå­å¨åºã\n\næç¤º\n\né´äºå½åç½ç»é®é¢ï¼å¼ºçå»ºè®®ä½¿ç¨å½åæºï¼å®æ¹æºè¯·å¨æ³¨éä¸­æ¥çã\n\n# é¿éæº\nsudo yum-config-manager \\\n    --add-repo \\\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n\n# å®æ¹æº\n# sudo yum-config-manager \\\n#     --add-repo \\\n#     https://download.docker.com/linux/centos/docker-ce.repo    \n\n\nå¦æéè¦ææ°çæ¬ç Docker CE è¯·ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n\nsudo yum-config-manager --enable docker-ce-edge\n\n\nå¦æéè¦æµè¯çæ¬ç Docker CE è¯·ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n\nsudo yum-config-manager --enable docker-ce-test\n\n\n\n# å®è£ Docker Engine-Community\n\nå®è£ææ°çæ¬çDocker Engine-Communityåcontainerdï¼æèè½¬å°ä¸ä¸æ­¥å®è£ç¹å®çæ¬ï¼\n\nsudo yum install docker-ce docker-ce-cli containerd.io\n\n\nå¦ææç¤ºæ¨æ¥åGPGå¯é¥ï¼è¯·éªè¯æçº¹æ¯å¦å¹é 060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35ï¼å¦ææ¯ï¼åæ¥åå®ã\n\næ³¨æ\n\næå¤ä¸ªDockerå­å¨åºåï¼ å¦ææ¨å¯ç¨äºå¤ä¸ªDockerå­å¨åºï¼åå¨æªå¨yum installoræyum updateå½ä»¤ä¸­æå®çæ¬çæåµä¸è¿è¡å®è£ææ´æ°å°å§ç»å®è£å¯è½çæé«çæ¬ï¼è¿å¯è½ä¸éåæ¨çç¨³å®æ§éæ±ã\n\nDockerå·²å®è£ä½å°æªå¯å¨ãdockeråå»ºè¯¥ç»ï¼ä½æ²¡æç¨æ·æ·»å å°è¯¥ç»ã\n\n\n# å¯å¨ Docker CE\n\nsudo systemctl start docker\n\n\n\n# å¼æºèªå¯å¨\n\nsudo systemctl enable docker\n\n\n\n# å»ºç« docker ç¨æ·ç»\n\né»è®¤æåµä¸ï¼docker å½ä»¤ä¼ä½¿ç¨ Unix socket ä¸ Docker å¼æéè®¯ãèåªæ root ç¨æ·å docker ç»çç¨æ·æå¯ä»¥è®¿é® Docker å¼æç Unix socketãåºäºå®å¨èèï¼ä¸è¬ Linux ç³»ç»ä¸ä¸ä¼ç´æ¥ä½¿ç¨ root ç¨æ·ãå æ­¤ï¼æ´å¥½å°åæ³æ¯å°éè¦ä½¿ç¨ docker çç¨æ·å å¥ docker ç¨æ·ç»ã\n\nå»ºç« docker ç»ï¼\n\nsudo groupadd docker\n\n\nå°å½åç¨æ·å å¥ docker ç»ï¼\n\nsudo usermod -aG docker $USER\n\n\néåºå½åç»ç«¯å¹¶éæ°ç»å½ï¼è¿è¡å¦ä¸æµè¯ã\n\n\n# æµè¯ Docker æ¯å¦å®è£æ­£ç¡®\n\ndocker run hello-world\n\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\nca4f61b1923c: Pull complete\nDigest: sha256:be0cd392e45be79ffeffa6b05338b98ebb16c87b255f48e297ec7f98e123905c\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n    (amd64)\n 3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker ID:\n https://cloud.docker.com/\n\nFor more examples and ideas, visit:\n https://docs.docker.com/engine/userguide/\n\n\nè¥è½æ­£å¸¸è¾åºä»¥ä¸ä¿¡æ¯ï¼åè¯´æå®è£æåã\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå Docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ Docker ä¹åéç½® å½åéåå éã\n\n\n# æ·»å åæ ¸åæ°\n\né»è®¤éç½®ä¸ï¼å¦æå¨ CentOS ä½¿ç¨ Docker CE çå°ä¸é¢çè¿äºè­¦åä¿¡æ¯ï¼\n\nWARNING: bridge-nf-call-iptables is disabled\nWARNING: bridge-nf-call-ip6tables is disabled\n\n\nè¯·æ·»å åæ ¸éç½®åæ°ä»¥å¯ç¨è¿äºåè½ã\n\nsudo tee -a /etc/sysctl.conf <<-EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF\n\n\nç¶åéæ°å è½½ sysctl.conf å³å¯\n\nsudo sysctl -p\n\n\n\n# åèææ¡£\n\n * Docker å®æ¹ CentOS å®è£ææ¡£ã",normalizedContent:"# centos å®è£ docker\n\næ³¨æ\n\nåå¿å¨æ²¡æéç½® docker yum æºçæåµä¸ç´æ¥ä½¿ç¨ yum å½ä»¤å®è£ docker.\n\n\n# åææ¡ä»¶\n\n\n# æä½ç³»ç»è¦æ±\n\nè¦å®è£docker engine-communityï¼æ¨éè¦ä¸ä¸ªcentos 7çç»´æ¤çæ¬ãä¸æ¯æææªæµè¯å­æ¡£çæ¬ãè¯¥centos-extrasåºå¿é¡»å¯ç¨ãé»è®¤æåµä¸ï¼æ­¤å­å¨åºæ¯å¯ç¨çï¼ä½æ¯å¦æå·²ç¦ç¨å®ï¼åéè¦ éæ°å¯ç¨å®ãoverlay2å»ºè®®ä½¿ç¨å­å¨é©±å¨ç¨åºã\n\n\n# å¸è½½æ§çæ¬\n\næ§çæ¬ç docker ç§°ä¸º docker æè docker-engineï¼ä½¿ç¨ä»¥ä¸å½ä»¤å¸è½½æ§çæ¬ï¼\n\nsudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n\n\n\n# ä½¿ç¨ yum å®è£\n\nå¨æ°ä¸»æºä¸é¦æ¬¡å®è£docker engine-communityä¹åï¼éè¦è®¾ç½®dockerå­å¨åºãä¹åï¼æ¨å¯ä»¥ä»å­å¨åºå®è£åæ´æ°dockerã\n\n\n# è®¾ç½®å­å¨åº\n\n1.å®è£æéçè½¯ä»¶åãyum-utilsæä¾äºyum-config-manager æç¨ï¼å¹¶device-mapper-persistent-dataålvm2ç±éè¦devicemapperå­å¨é©±å¨ç¨åºã\n\nsudo yum install -y yum-utils \\\n           device-mapper-persistent-data \\\n           lvm2\n\n\n2.ä½¿ç¨ä»¥ä¸å½ä»¤æ¥è®¾ç½®ç¨³å®çå­å¨åºã\n\næç¤º\n\né´äºå½åç½ç»é®é¢ï¼å¼ºçå»ºè®®ä½¿ç¨å½åæºï¼å®æ¹æºè¯·å¨æ³¨éä¸­æ¥çã\n\n# é¿éæº\nsudo yum-config-manager \\\n    --add-repo \\\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n\n# å®æ¹æº\n# sudo yum-config-manager \\\n#     --add-repo \\\n#     https://download.docker.com/linux/centos/docker-ce.repo    \n\n\nå¦æéè¦ææ°çæ¬ç docker ce è¯·ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n\nsudo yum-config-manager --enable docker-ce-edge\n\n\nå¦æéè¦æµè¯çæ¬ç docker ce è¯·ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n\nsudo yum-config-manager --enable docker-ce-test\n\n\n\n# å®è£ docker engine-community\n\nå®è£ææ°çæ¬çdocker engine-communityåcontainerdï¼æèè½¬å°ä¸ä¸æ­¥å®è£ç¹å®çæ¬ï¼\n\nsudo yum install docker-ce docker-ce-cli containerd.io\n\n\nå¦ææç¤ºæ¨æ¥ågpgå¯é¥ï¼è¯·éªè¯æçº¹æ¯å¦å¹é 060a 61c5 1b55 8a7f 742b 77aa c52f eb6b 621e 9f35ï¼å¦ææ¯ï¼åæ¥åå®ã\n\næ³¨æ\n\næå¤ä¸ªdockerå­å¨åºåï¼ å¦ææ¨å¯ç¨äºå¤ä¸ªdockerå­å¨åºï¼åå¨æªå¨yum installoræyum updateå½ä»¤ä¸­æå®çæ¬çæåµä¸è¿è¡å®è£ææ´æ°å°å§ç»å®è£å¯è½çæé«çæ¬ï¼è¿å¯è½ä¸éåæ¨çç¨³å®æ§éæ±ã\n\ndockerå·²å®è£ä½å°æªå¯å¨ãdockeråå»ºè¯¥ç»ï¼ä½æ²¡æç¨æ·æ·»å å°è¯¥ç»ã\n\n\n# å¯å¨ docker ce\n\nsudo systemctl start docker\n\n\n\n# å¼æºèªå¯å¨\n\nsudo systemctl enable docker\n\n\n\n# å»ºç« docker ç¨æ·ç»\n\né»è®¤æåµä¸ï¼docker å½ä»¤ä¼ä½¿ç¨ unix socket ä¸ docker å¼æéè®¯ãèåªæ root ç¨æ·å docker ç»çç¨æ·æå¯ä»¥è®¿é® docker å¼æç unix socketãåºäºå®å¨èèï¼ä¸è¬ linux ç³»ç»ä¸ä¸ä¼ç´æ¥ä½¿ç¨ root ç¨æ·ãå æ­¤ï¼æ´å¥½å°åæ³æ¯å°éè¦ä½¿ç¨ docker çç¨æ·å å¥ docker ç¨æ·ç»ã\n\nå»ºç« docker ç»ï¼\n\nsudo groupadd docker\n\n\nå°å½åç¨æ·å å¥ docker ç»ï¼\n\nsudo usermod -ag docker $user\n\n\néåºå½åç»ç«¯å¹¶éæ°ç»å½ï¼è¿è¡å¦ä¸æµè¯ã\n\n\n# æµè¯ docker æ¯å¦å®è£æ­£ç¡®\n\ndocker run hello-world\n\nunable to find image 'hello-world:latest' locally\nlatest: pulling from library/hello-world\nca4f61b1923c: pull complete\ndigest: sha256:be0cd392e45be79ffeffa6b05338b98ebb16c87b255f48e297ec7f98e123905c\nstatus: downloaded newer image for hello-world:latest\n\nhello from docker!\nthis message shows that your installation appears to be working correctly.\n\nto generate this message, docker took the following steps:\n 1. the docker client contacted the docker daemon.\n 2. the docker daemon pulled the \"hello-world\" image from the docker hub.\n    (amd64)\n 3. the docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. the docker daemon streamed that output to the docker client, which sent it\n    to your terminal.\n\nto try something more ambitious, you can run an ubuntu container with:\n docker run -it ubuntu bash\n\nshare images, automate workflows, and more with a free docker id:\n https://cloud.docker.com/\n\nfor more examples and ideas, visit:\n https://docs.docker.com/engine/userguide/\n\n\nè¥è½æ­£å¸¸è¾åºä»¥ä¸ä¿¡æ¯ï¼åè¯´æå®è£æåã\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ docker ä¹åéç½® å½åéåå éã\n\n\n# æ·»å åæ ¸åæ°\n\né»è®¤éç½®ä¸ï¼å¦æå¨ centos ä½¿ç¨ docker ce çå°ä¸é¢çè¿äºè­¦åä¿¡æ¯ï¼\n\nwarning: bridge-nf-call-iptables is disabled\nwarning: bridge-nf-call-ip6tables is disabled\n\n\nè¯·æ·»å åæ ¸éç½®åæ°ä»¥å¯ç¨è¿äºåè½ã\n\nsudo tee -a /etc/sysctl.conf <<-eof\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\neof\n\n\nç¶åéæ°å è½½ sysctl.conf å³å¯\n\nsudo sysctl -p\n\n\n\n# åèææ¡£\n\n * docker å®æ¹ centos å®è£ææ¡£ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"macOS å®è£ Docker",frontmatter:{title:"macOS å®è£ Docker",date:"2022-02-08T17:17:46.000Z",permalink:"/pages/847488/"},regularPath:"/17.Docker/03.%E5%AE%89%E8%A3%85%20Docker/04.macOS%20%E5%AE%89%E8%A3%85%20Docker.html",relativePath:"17.Docker/03.å®è£ Docker/04.macOS å®è£ Docker.md",key:"v-a1271344",path:"/pages/847488/",headers:[{level:2,title:"ç³»ç»è¦æ±",slug:"ç³»ç»è¦æ±",normalizedTitle:"ç³»ç»è¦æ±",charIndex:22},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:8},{level:3,title:"ä½¿ç¨ Homebrew å®è£",slug:"ä½¿ç¨-homebrew-å®è£",normalizedTitle:"ä½¿ç¨ homebrew å®è£",charIndex:116},{level:3,title:"æå¨ä¸è½½å®è£",slug:"æå¨ä¸è½½å®è£",normalizedTitle:"æå¨ä¸è½½å®è£",charIndex:231},{level:2,title:"è¿è¡",slug:"è¿è¡",normalizedTitle:"è¿è¡",charIndex:389},{level:2,title:"éåå é",slug:"éåå é",normalizedTitle:"éåå é",charIndex:1035}],headersStr:"ç³»ç»è¦æ± å®è£ ä½¿ç¨ Homebrew å®è£ æå¨ä¸è½½å®è£ è¿è¡ éåå é",content:'# macOS å®è£ Docker\n\n\n# ç³»ç»è¦æ±\n\nDocker for Mac è¦æ±ç³»ç»æä½ä¸º macOS 10.10.3 Yosemiteãå¦æç³»ç»ä¸æ»¡è¶³éæ±ï¼å¯ä»¥å®è£ Docker Toolboxã\n\n\n# å®è£\n\n\n# ä½¿ç¨ Homebrew å®è£\n\nHomebrew ç Cask å·²ç»æ¯æ Docker for Macï¼å æ­¤å¯ä»¥å¾æ¹ä¾¿çä½¿ç¨ Homebrew Cask æ¥è¿è¡å®è£ï¼\n\nbrew cask install docker\n\n\n\n# æå¨ä¸è½½å®è£\n\nå¦æéè¦æå¨ä¸è½½ï¼è¯·ç¹å»ä»¥ä¸é¾æ¥ä¸è½½ Stable æ Edge çæ¬ç Docker for Macã\n\nå¦å macOS å¶å®è½¯ä»¶ä¸æ ·ï¼å®è£ä¹éå¸¸ç®åï¼åå»ä¸è½½ç .dmg æä»¶ï¼ç¶åå°é£åªå« Moby çé²¸é±¼å¾æ ææ½å° Application æä»¶å¤¹å³å¯ï¼å¶é´éè¦è¾å¥ç¨æ·å¯ç ï¼ã\n\n\n\n\n# è¿è¡\n\nä»åºç¨ä¸­æ¾å° Docker å¾æ å¹¶ç¹å»è¿è¡ã\n\n\n\nè¿è¡ä¹åï¼ä¼å¨å³ä¸è§èåæ çå°å¤äºä¸ä¸ªé²¸é±¼å¾æ ï¼è¿ä¸ªå¾æ è¡¨æäº Docker çè¿è¡ç¶æã\n\n\n\nç¬¬ä¸æ¬¡ç¹å»å¾æ ï¼å¯è½ä¼çå°è¿ä¸ªå®è£æåççé¢ï¼ç¹å» "Got it!" å¯ä»¥å³é­è¿ä¸ªçªå£ã\n\n\n\nä»¥åæ¯æ¬¡ç¹å»é²¸é±¼å¾æ ä¼å¼¹åºæä½èåã\n\n\n\nå¯å¨ç»ç«¯åï¼éè¿å½ä»¤å¯ä»¥æ£æ¥å®è£åç Docker çæ¬ã\n\ndocker --version\nDocker version 17.10.0-ce, build f4ffd25\ndocker-compose --version\ndocker-compose version 1.17.0-rc1, build a0f95af\ndocker-machine --version\ndocker-machine version 0.13.0, build 9ba6da9\n\n\nå¦æ docker versionãdocker info é½æ­£å¸¸çè¯ï¼å¯ä»¥å°è¯è¿è¡ä¸ä¸ª Nginx æå¡å¨ï¼\n\ndocker run -d -p 80:80 --name webserver nginx\n\n\næå¡è¿è¡åï¼å¯ä»¥è®¿é® http://localhostï¼å¦æçå°äº "Welcome to nginx!"ï¼å°±è¯´æ Docker for Mac å®è£æåäºã\n\n\n\nè¦åæ­¢ Nginx æå¡å¨å¹¶å é¤æ§è¡ä¸é¢çå½ä»¤ï¼\n\ndocker stop webserver\ndocker rm webserver\n\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå Docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ Docker ä¹åéç½® å½åéåå éã',normalizedContent:'# macos å®è£ docker\n\n\n# ç³»ç»è¦æ±\n\ndocker for mac è¦æ±ç³»ç»æä½ä¸º macos 10.10.3 yosemiteãå¦æç³»ç»ä¸æ»¡è¶³éæ±ï¼å¯ä»¥å®è£ docker toolboxã\n\n\n# å®è£\n\n\n# ä½¿ç¨ homebrew å®è£\n\nhomebrew ç cask å·²ç»æ¯æ docker for macï¼å æ­¤å¯ä»¥å¾æ¹ä¾¿çä½¿ç¨ homebrew cask æ¥è¿è¡å®è£ï¼\n\nbrew cask install docker\n\n\n\n# æå¨ä¸è½½å®è£\n\nå¦æéè¦æå¨ä¸è½½ï¼è¯·ç¹å»ä»¥ä¸é¾æ¥ä¸è½½ stable æ edge çæ¬ç docker for macã\n\nå¦å macos å¶å®è½¯ä»¶ä¸æ ·ï¼å®è£ä¹éå¸¸ç®åï¼åå»ä¸è½½ç .dmg æä»¶ï¼ç¶åå°é£åªå« moby çé²¸é±¼å¾æ ææ½å° application æä»¶å¤¹å³å¯ï¼å¶é´éè¦è¾å¥ç¨æ·å¯ç ï¼ã\n\n\n\n\n# è¿è¡\n\nä»åºç¨ä¸­æ¾å° docker å¾æ å¹¶ç¹å»è¿è¡ã\n\n\n\nè¿è¡ä¹åï¼ä¼å¨å³ä¸è§èåæ çå°å¤äºä¸ä¸ªé²¸é±¼å¾æ ï¼è¿ä¸ªå¾æ è¡¨æäº docker çè¿è¡ç¶æã\n\n\n\nç¬¬ä¸æ¬¡ç¹å»å¾æ ï¼å¯è½ä¼çå°è¿ä¸ªå®è£æåççé¢ï¼ç¹å» "got it!" å¯ä»¥å³é­è¿ä¸ªçªå£ã\n\n\n\nä»¥åæ¯æ¬¡ç¹å»é²¸é±¼å¾æ ä¼å¼¹åºæä½èåã\n\n\n\nå¯å¨ç»ç«¯åï¼éè¿å½ä»¤å¯ä»¥æ£æ¥å®è£åç docker çæ¬ã\n\ndocker --version\ndocker version 17.10.0-ce, build f4ffd25\ndocker-compose --version\ndocker-compose version 1.17.0-rc1, build a0f95af\ndocker-machine --version\ndocker-machine version 0.13.0, build 9ba6da9\n\n\nå¦æ docker versionãdocker info é½æ­£å¸¸çè¯ï¼å¯ä»¥å°è¯è¿è¡ä¸ä¸ª nginx æå¡å¨ï¼\n\ndocker run -d -p 80:80 --name webserver nginx\n\n\næå¡è¿è¡åï¼å¯ä»¥è®¿é® http://localhostï¼å¦æçå°äº "welcome to nginx!"ï¼å°±è¯´æ docker for mac å®è£æåäºã\n\n\n\nè¦åæ­¢ nginx æå¡å¨å¹¶å é¤æ§è¡ä¸é¢çå½ä»¤ï¼\n\ndocker stop webserver\ndocker rm webserver\n\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ docker ä¹åéç½® å½åéåå éã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Windows å®è£ Docker",frontmatter:{title:"Windows å®è£ Docker",date:"2022-02-08T17:17:46.000Z",permalink:"/pages/c4f755/"},regularPath:"/17.Docker/03.%E5%AE%89%E8%A3%85%20Docker/05.Windows%20%E5%AE%89%E8%A3%85%20Docker.html",relativePath:"17.Docker/03.å®è£ Docker/05.Windows å®è£ Docker.md",key:"v-79b29984",path:"/pages/c4f755/",headers:[{level:2,title:"ç³»ç»è¦æ±",slug:"ç³»ç»è¦æ±",normalizedTitle:"ç³»ç»è¦æ±",charIndex:24},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:10},{level:2,title:"è¿è¡",slug:"è¿è¡",normalizedTitle:"è¿è¡",charIndex:197},{level:2,title:"éåå é",slug:"éåå é",normalizedTitle:"éåå é",charIndex:331}],headersStr:"ç³»ç»è¦æ± å®è£ è¿è¡ éåå é",content:"# Windows å®è£ Docker\n\n\n# ç³»ç»è¦æ±\n\nDocker for Windows æ¯æ 64 ä½çæ¬ç Windows 10 Proï¼ä¸å¿é¡»å¼å¯ Hyper-Vã\n\n\n# å®è£\n\nç¹å»ä»¥ä¸é¾æ¥ä¸è½½ Stable æ Edge çæ¬ç Docker for Windowsã\n\nä¸è½½å¥½ä¹ååå» Docker for Windows Installer.exe å¼å§å®è£ã\n\n\n# è¿è¡\n\nå¨ Windows æç´¢æ è¾å¥ Docker ç¹å» Docker for Windows å¼å§è¿è¡ã\n\n\n\nDocker CE å¯å¨ä¹åä¼å¨ Windows ä»»å¡æ åºç°é²¸é±¼å¾æ ã\n\n\n\nç­å¾çå»ï¼ç¹å» Got it å¼å§ä½¿ç¨ Docker CEã\n\n\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå Docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ Docker ä¹åéç½® å½åéåå éã",normalizedContent:"# windows å®è£ docker\n\n\n# ç³»ç»è¦æ±\n\ndocker for windows æ¯æ 64 ä½çæ¬ç windows 10 proï¼ä¸å¿é¡»å¼å¯ hyper-vã\n\n\n# å®è£\n\nç¹å»ä»¥ä¸é¾æ¥ä¸è½½ stable æ edge çæ¬ç docker for windowsã\n\nä¸è½½å¥½ä¹ååå» docker for windows installer.exe å¼å§å®è£ã\n\n\n# è¿è¡\n\nå¨ windows æç´¢æ è¾å¥ docker ç¹å» docker for windows å¼å§è¿è¡ã\n\n\n\ndocker ce å¯å¨ä¹åä¼å¨ windows ä»»å¡æ åºç°é²¸é±¼å¾æ ã\n\n\n\nç­å¾çå»ï¼ç¹å» got it å¼å§ä½¿ç¨ docker ceã\n\n\n\n\n# éåå é\n\né´äºå½åç½ç»é®é¢ï¼åç»­æå docker éåååç¼æ¢ï¼å¼ºçå»ºè®®å®è£ docker ä¹åéç½® å½åéåå éã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Docker éåå éå¨",frontmatter:{title:"Docker éåå éå¨",date:"2022-02-08T17:17:46.000Z",permalink:"/pages/87062e/"},regularPath:"/17.Docker/03.%E5%AE%89%E8%A3%85%20Docker/06.Docker%20%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8.html",relativePath:"17.Docker/03.å®è£ Docker/06.Docker éåå éå¨.md",key:"v-782329dc",path:"/pages/87062e/",headers:[{level:2,title:"Ubuntu 18.04+ãDebian 8+ãCentOS 7",slug:"ubuntu-18-04-ãdebian-8-ãcentos-7",normalizedTitle:"ubuntu 18.04+ãdebian 8+ãcentos 7",charIndex:166},{level:2,title:"Windows 10",slug:"windows-10",normalizedTitle:"windows 10",charIndex:852},{level:2,title:"macOS",slug:"macos",normalizedTitle:"macos",charIndex:1046},{level:2,title:"æ£æ¥å éå¨æ¯å¦çæ",slug:"æ£æ¥å éå¨æ¯å¦çæ",normalizedTitle:"æ£æ¥å éå¨æ¯å¦çæ",charIndex:1243}],headersStr:"Ubuntu 18.04+ãDebian 8+ãCentOS 7 Windows 10 macOS æ£æ¥å éå¨æ¯å¦çæ",content:'# Docker éåå éå¨\n\nå½åä» Docker Hub æåéåææ¶ä¼éå°å°é¾ï¼æ­¤æ¶å¯ä»¥éç½®éåå éå¨ãDocker å®æ¹åå½åå¾å¤äºæå¡åé½æä¾äºå½åå éå¨æå¡ï¼ä¾å¦ï¼\n\n * Dockerå®æ¹ä¸­å½\n * ç½æäº\n * ç¾åº¦äº\n * é¿éäº\n * DaoCloud\n\næä»¬ä»¥ Docker å®æ¹å éå¨ä¸ºä¾è¿è¡ä»ç»ã\n\n\n# Ubuntu 18.04+ãDebian 8+ãCentOS 7\n\nå¯¹äºä½¿ç¨ systemd çç³»ç»ï¼è¯·å¨ /etc/docker/daemon.json ä¸­åå¥å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\nå®æ¹å é\n\n{\n  "registry-mirrors": [\n     "https://registry.docker-cn.com"\n  ]\n}\n\n\né¿éäºå é\n\n{\n  "registry-mirrors": [\n     "https://registry.cn-beijing.aliyuncs.com"\n  ]\n}\n\n\nç¾åº¦äºå é\n\n{\n  "registry-mirrors": [\n     "https://mirror.baidubce.com"\n  ]\n}\n\n\n163å é\n\n{\n  "registry-mirrors": [\n     "https://hub-mirror.c.163.com"\n  ]\n}\n\n\nå¶ä»\n\n{\n  "registry-mirrors": [\n     "https://dockerhub.azk8s.cn",\n     "https://reg-mirror.qiniu.com",\n     "https://registry.docker-cn.com"\n  ]\n}\n\n\næ³¨æ\n\nä¸å®è¦ä¿è¯è¯¥æä»¶ç¬¦å json è§èï¼å¦å Docker å°ä¸è½å¯å¨ã\n\nä¹åéæ°å¯å¨æå¡ã\n\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n\n\n# Windows 10\n\nå¯¹äºä½¿ç¨ Windows 10 çç³»ç»ï¼å¨ç³»ç»å³ä¸è§æç Docker å¾æ åå³é®èåéæ© Settingsï¼æå¼éç½®çªå£åå·¦ä¾§å¯¼èªèåéæ© Daemonãå¨ Registry mirrors ä¸æ ä¸­å¡«åå éå¨å°å https://registry.docker-cn.comï¼ä¹åç¹å» Apply ä¿å­å Docker å°±ä¼éå¯å¹¶åºç¨éç½®çéåå°åäºã\n\n\n# macOS\n\nå¯¹äºä½¿ç¨ macOS çç¨æ·ï¼å¨ä»»å¡æ ç¹å» Docker for mac åºç¨å¾æ  -> Perferences... -> Daemon -> Registry mirrorsãå¨åè¡¨ä¸­å¡«åå éå¨å°å https://registry.docker-cn.comãä¿®æ¹å®æä¹åï¼ç¹å» Apply & Restart æé®ï¼Docker å°±ä¼éå¯å¹¶åºç¨éç½®çéåå°åäºã\n\n\n# æ£æ¥å éå¨æ¯å¦çæ\n\néç½®å éå¨ä¹åï¼å¦ææåéåä»ç¶ååç¼æ¢ï¼è¯·æå¨æ£æ¥å éå¨éç½®æ¯å¦çæï¼å¨å½ä»¤è¡æ§è¡ docker infoï¼å¦æä»ç»æä¸­çå°äºå¦ä¸åå®¹ï¼è¯´æéç½®æåã\n\nRegistry Mirrors:\n https://registry.docker-cn.com/\n',normalizedContent:'# docker éåå éå¨\n\nå½åä» docker hub æåéåææ¶ä¼éå°å°é¾ï¼æ­¤æ¶å¯ä»¥éç½®éåå éå¨ãdocker å®æ¹åå½åå¾å¤äºæå¡åé½æä¾äºå½åå éå¨æå¡ï¼ä¾å¦ï¼\n\n * dockerå®æ¹ä¸­å½\n * ç½æäº\n * ç¾åº¦äº\n * é¿éäº\n * daocloud\n\næä»¬ä»¥ docker å®æ¹å éå¨ä¸ºä¾è¿è¡ä»ç»ã\n\n\n# ubuntu 18.04+ãdebian 8+ãcentos 7\n\nå¯¹äºä½¿ç¨ systemd çç³»ç»ï¼è¯·å¨ /etc/docker/daemon.json ä¸­åå¥å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\nå®æ¹å é\n\n{\n  "registry-mirrors": [\n     "https://registry.docker-cn.com"\n  ]\n}\n\n\né¿éäºå é\n\n{\n  "registry-mirrors": [\n     "https://registry.cn-beijing.aliyuncs.com"\n  ]\n}\n\n\nç¾åº¦äºå é\n\n{\n  "registry-mirrors": [\n     "https://mirror.baidubce.com"\n  ]\n}\n\n\n163å é\n\n{\n  "registry-mirrors": [\n     "https://hub-mirror.c.163.com"\n  ]\n}\n\n\nå¶ä»\n\n{\n  "registry-mirrors": [\n     "https://dockerhub.azk8s.cn",\n     "https://reg-mirror.qiniu.com",\n     "https://registry.docker-cn.com"\n  ]\n}\n\n\næ³¨æ\n\nä¸å®è¦ä¿è¯è¯¥æä»¶ç¬¦å json è§èï¼å¦å docker å°ä¸è½å¯å¨ã\n\nä¹åéæ°å¯å¨æå¡ã\n\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n\n\n# windows 10\n\nå¯¹äºä½¿ç¨ windows 10 çç³»ç»ï¼å¨ç³»ç»å³ä¸è§æç docker å¾æ åå³é®èåéæ© settingsï¼æå¼éç½®çªå£åå·¦ä¾§å¯¼èªèåéæ© daemonãå¨ registry mirrors ä¸æ ä¸­å¡«åå éå¨å°å https://registry.docker-cn.comï¼ä¹åç¹å» apply ä¿å­å docker å°±ä¼éå¯å¹¶åºç¨éç½®çéåå°åäºã\n\n\n# macos\n\nå¯¹äºä½¿ç¨ macos çç¨æ·ï¼å¨ä»»å¡æ ç¹å» docker for mac åºç¨å¾æ  -> perferences... -> daemon -> registry mirrorsãå¨åè¡¨ä¸­å¡«åå éå¨å°å https://registry.docker-cn.comãä¿®æ¹å®æä¹åï¼ç¹å» apply & restart æé®ï¼docker å°±ä¼éå¯å¹¶åºç¨éç½®çéåå°åäºã\n\n\n# æ£æ¥å éå¨æ¯å¦çæ\n\néç½®å éå¨ä¹åï¼å¦ææåéåä»ç¶ååç¼æ¢ï¼è¯·æå¨æ£æ¥å éå¨éç½®æ¯å¦çæï¼å¨å½ä»¤è¡æ§è¡ docker infoï¼å¦æä»ç»æä¸­çå°äºå¦ä¸åå®¹ï¼è¯´æéç½®æåã\n\nregistry mirrors:\n https://registry.docker-cn.com/\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"ä½¿ç¨ Docker éå",frontmatter:{title:"ä½¿ç¨ Docker éå",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/13e1d1/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/01.%E4%BD%BF%E7%94%A8%20Docker%20%E9%95%9C%E5%83%8F.html",relativePath:"17.Docker/04.Docker éå/01.ä½¿ç¨ Docker éå.md",key:"v-36dcd140",path:"/pages/13e1d1/",headersStr:null,content:"# ä½¿ç¨ Docker éå\n\nå¨ä¹åçä»ç»ä¸­ï¼æä»¬ç¥ééåæ¯ Docker çä¸å¤§ç»ä»¶ä¹ä¸ã\n\nDocker è¿è¡å®¹å¨åéè¦æ¬å°å­å¨å¯¹åºçéåï¼å¦ææ¬å°ä¸å­å¨è¯¥éåï¼Docker ä¼ä»éåä»åºä¸è½½è¯¥éåã\n\næ¬ç« å°ä»ç»æ´å¤å³äºéåçåå®¹ï¼åæ¬ï¼\n\n * ä»ä»åºè·åéåï¼\n * ç®¡çæ¬å°ä¸»æºä¸çéåï¼\n * ä»ç»éåå®ç°çåºæ¬åçã",normalizedContent:"# ä½¿ç¨ docker éå\n\nå¨ä¹åçä»ç»ä¸­ï¼æä»¬ç¥ééåæ¯ docker çä¸å¤§ç»ä»¶ä¹ä¸ã\n\ndocker è¿è¡å®¹å¨åéè¦æ¬å°å­å¨å¯¹åºçéåï¼å¦ææ¬å°ä¸å­å¨è¯¥éåï¼docker ä¼ä»éåä»åºä¸è½½è¯¥éåã\n\næ¬ç« å°ä»ç»æ´å¤å³äºéåçåå®¹ï¼åæ¬ï¼\n\n * ä»ä»åºè·åéåï¼\n * ç®¡çæ¬å°ä¸»æºä¸çéåï¼\n * ä»ç»éåå®ç°çåºæ¬åçã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker è·åéå",frontmatter:{title:"Docker è·åéå",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/840a1a/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/02.Docker%20%E8%8E%B7%E5%8F%96%E9%95%9C%E5%83%8F.html",relativePath:"17.Docker/04.Docker éå/02.Docker è·åéå.md",key:"v-02185a76",path:"/pages/840a1a/",headers:[{level:2,title:"è¿è¡",slug:"è¿è¡",normalizedTitle:"è¿è¡",charIndex:1105}],headersStr:"è¿è¡",content:'# Docker è·åéå\n\nä¹åæå°è¿ï¼Docker Hub ä¸æå¤§éçé«è´¨éçéåå¯ä»¥ç¨ï¼è¿éæä»¬å°±è¯´ä¸ä¸æä¹è·åè¿äºéåã\n\nä» Docker éåä»åºè·åéåçå½ä»¤æ¯ docker pullãå¶å½ä»¤æ ¼å¼ä¸ºï¼\n\ndocker pull [éé¡¹] [Docker Registry å°å[:ç«¯å£å·]/]ä»åºå[:æ ç­¾]\n\n\nå·ä½çéé¡¹å¯ä»¥éè¿ docker pull --help å½ä»¤çå°ï¼è¿éæä»¬è¯´ä¸ä¸éååç§°çæ ¼å¼ã\n\n * Docker éåä»åºå°åï¼å°åçæ ¼å¼ä¸è¬æ¯ <åå/IP>[:ç«¯å£å·]ãé»è®¤å°åæ¯ Docker Hubã\n * ä»åºåï¼å¦ä¹åæè¯´ï¼è¿éçä»åºåæ¯ä¸¤æ®µå¼åç§°ï¼å³ <ç¨æ·å>/<è½¯ä»¶å>ãå¯¹äº Docker Hubï¼å¦æä¸ç»åºç¨æ·åï¼åé»è®¤ä¸º libraryï¼ä¹å°±æ¯å®æ¹éåã\n\næ¯å¦ï¼\n\ndocker pull ubuntu:16.04\n16.04: Pulling from library/ubuntu\nbf5d46315322: Pull complete\n9f13e0ac480c: Pull complete\ne8988b5b3097: Pull complete\n40af181810e7: Pull complete\ne6f7c7e5c03e: Pull complete\nDigest: sha256:147913621d9cdea08853f6ba9116c2e27a3ceffecf3b492983ae97c3d643fbbe\nStatus: Downloaded newer image for ubuntu:16.04\n\n\nä¸é¢çå½ä»¤ä¸­æ²¡æç»åº Docker éåä»åºå°åï¼å æ­¤å°ä¼ä» Docker Hub è·åéåãèéååç§°æ¯ ubuntu:16.04ï¼å æ­¤å°ä¼è·åå®æ¹éå library/ubuntu ä»åºä¸­æ ç­¾ä¸º 16.04 çéåã\n\nä»ä¸è½½è¿ç¨ä¸­å¯ä»¥çå°æä»¬ä¹åæåçåå±å­å¨çæ¦å¿µï¼éåæ¯ç±å¤å±å­å¨æææãä¸è½½ä¹æ¯ä¸å±å±çå»ä¸è½½ï¼å¹¶éåä¸æä»¶ãä¸è½½è¿ç¨ä¸­ç»åºäºæ¯ä¸å±ç ID çå 12 ä½ãå¹¶ä¸ä¸è½½ç»æåï¼ç»åºè¯¥éåå®æ´ç sha256 çæè¦ï¼ä»¥ç¡®ä¿ä¸è½½ä¸è´æ§ã\n\nå¨ä½¿ç¨ä¸é¢å½ä»¤çæ¶åï¼ä½ å¯è½ä¼åç°ï¼ä½ æçå°çå± ID ä»¥å sha256 çæè¦åè¿éçä¸ä¸æ ·ãè¿æ¯å ä¸ºå®æ¹éåæ¯ä¸ç´å¨ç»´æ¤çï¼æä»»ä½æ°ç bugï¼æèçæ¬æ´æ°ï¼é½ä¼è¿è¡ä¿®å¤åä»¥åæ¥çæ ç­¾åå¸ï¼è¿æ ·å¯ä»¥ç¡®ä¿ä»»ä½ä½¿ç¨è¿ä¸ªæ ç­¾çç¨æ·å¯ä»¥è·å¾æ´å®å¨ãæ´ç¨³å®çéåã\n\nå¦æä» Docker Hub ä¸è½½éåéå¸¸ç¼æ¢ï¼å¯ä»¥åç§ éåå éå¨ ä¸èéç½®å éå¨ã\n\n\n# è¿è¡\n\næäºéååï¼æä»¬å°±è½å¤ä»¥è¿ä¸ªéåä¸ºåºç¡å¯å¨å¹¶è¿è¡ä¸ä¸ªå®¹å¨ãä»¥ä¸é¢ç ubuntu:16.04 ä¸ºä¾ï¼å¦ææä»¬æç®å¯å¨éé¢ç bash å¹¶ä¸è¿è¡äº¤äºå¼æä½çè¯ï¼å¯ä»¥æ§è¡ä¸é¢çå½ä»¤ã\n\ndocker run -it --rm \\\n    ubuntu:16.04 \\\n    bash\n\nroot@e7009c6ce357:/# cat /etc/os-release\nNAME="Ubuntu"\nVERSION="16.04.4 LTS, Trusty Tahr"\nID=ubuntu\nID_LIKE=debian\nPRETTY_NAME="Ubuntu 16.04.4 LTS"\nVERSION_ID="16.04"\nHOME_URL="http://www.ubuntu.com/"\nSUPPORT_URL="http://help.ubuntu.com/"\nBUG_REPORT_URL="http://bugs.launchpad.net/ubuntu/"\n\n\ndocker run å°±æ¯è¿è¡å®¹å¨çå½ä»¤ï¼æä»¬è¿éç®è¦çè¯´æä¸ä¸ä¸é¢ç¨å°çåæ°ã\n\n * -itï¼è¿æ¯ä¸¤ä¸ªåæ°ï¼ä¸ä¸ªæ¯ -iï¼äº¤äºå¼æä½ï¼ä¸ä¸ªæ¯ -t ç»ç«¯ãæä»¬è¿éæç®è¿å¥ bash æ§è¡ä¸äºå½ä»¤å¹¶æ¥çè¿åç»æï¼å æ­¤æä»¬éè¦äº¤äºå¼ç»ç«¯ã\n * --rmï¼è¿ä¸ªåæ°æ¯è¯´å®¹å¨éåºåéä¹å°å¶å é¤ãé»è®¤æåµä¸ï¼ä¸ºäºæééæ±ï¼éåºçå®¹å¨å¹¶ä¸ä¼ç«å³å é¤ï¼é¤éæå¨ docker rmãæä»¬è¿éåªæ¯éä¾¿æ§è¡ä¸ªå½ä»¤ï¼ççç»æï¼ä¸éè¦æéåä¿çç»æï¼å æ­¤ä½¿ç¨ --rm å¯ä»¥é¿åæµªè´¹ç©ºé´ã\n * ubuntu:16.04ï¼è¿æ¯æç¨ ubuntu:16.04 éåä¸ºåºç¡æ¥å¯å¨å®¹å¨ã\n * bashï¼æ¾å¨éåååçæ¯å½ä»¤ï¼è¿éæä»¬å¸ææä¸ªäº¤äºå¼ Shellï¼å æ­¤ç¨çæ¯ bashã\n\nè¿å¥å®¹å¨åï¼æä»¬å¯ä»¥å¨ Shell ä¸æä½ï¼æ§è¡ä»»ä½æéçå½ä»¤ãè¿éï¼æä»¬æ§è¡äº cat /etc/os-releaseï¼è¿æ¯ Linux å¸¸ç¨çæ¥çå½åç³»ç»çæ¬çå½ä»¤ï¼ä»è¿åçç»æå¯ä»¥çå°å®¹å¨åæ¯ Ubuntu 16.04.4 LTS ç³»ç»ã\n\næåæä»¬éè¿ exit éåºäºè¿ä¸ªå®¹å¨ã',normalizedContent:'# docker è·åéå\n\nä¹åæå°è¿ï¼docker hub ä¸æå¤§éçé«è´¨éçéåå¯ä»¥ç¨ï¼è¿éæä»¬å°±è¯´ä¸ä¸æä¹è·åè¿äºéåã\n\nä» docker éåä»åºè·åéåçå½ä»¤æ¯ docker pullãå¶å½ä»¤æ ¼å¼ä¸ºï¼\n\ndocker pull [éé¡¹] [docker registry å°å[:ç«¯å£å·]/]ä»åºå[:æ ç­¾]\n\n\nå·ä½çéé¡¹å¯ä»¥éè¿ docker pull --help å½ä»¤çå°ï¼è¿éæä»¬è¯´ä¸ä¸éååç§°çæ ¼å¼ã\n\n * docker éåä»åºå°åï¼å°åçæ ¼å¼ä¸è¬æ¯ <åå/ip>[:ç«¯å£å·]ãé»è®¤å°åæ¯ docker hubã\n * ä»åºåï¼å¦ä¹åæè¯´ï¼è¿éçä»åºåæ¯ä¸¤æ®µå¼åç§°ï¼å³ <ç¨æ·å>/<è½¯ä»¶å>ãå¯¹äº docker hubï¼å¦æä¸ç»åºç¨æ·åï¼åé»è®¤ä¸º libraryï¼ä¹å°±æ¯å®æ¹éåã\n\næ¯å¦ï¼\n\ndocker pull ubuntu:16.04\n16.04: pulling from library/ubuntu\nbf5d46315322: pull complete\n9f13e0ac480c: pull complete\ne8988b5b3097: pull complete\n40af181810e7: pull complete\ne6f7c7e5c03e: pull complete\ndigest: sha256:147913621d9cdea08853f6ba9116c2e27a3ceffecf3b492983ae97c3d643fbbe\nstatus: downloaded newer image for ubuntu:16.04\n\n\nä¸é¢çå½ä»¤ä¸­æ²¡æç»åº docker éåä»åºå°åï¼å æ­¤å°ä¼ä» docker hub è·åéåãèéååç§°æ¯ ubuntu:16.04ï¼å æ­¤å°ä¼è·åå®æ¹éå library/ubuntu ä»åºä¸­æ ç­¾ä¸º 16.04 çéåã\n\nä»ä¸è½½è¿ç¨ä¸­å¯ä»¥çå°æä»¬ä¹åæåçåå±å­å¨çæ¦å¿µï¼éåæ¯ç±å¤å±å­å¨æææãä¸è½½ä¹æ¯ä¸å±å±çå»ä¸è½½ï¼å¹¶éåä¸æä»¶ãä¸è½½è¿ç¨ä¸­ç»åºäºæ¯ä¸å±ç id çå 12 ä½ãå¹¶ä¸ä¸è½½ç»æåï¼ç»åºè¯¥éåå®æ´ç sha256 çæè¦ï¼ä»¥ç¡®ä¿ä¸è½½ä¸è´æ§ã\n\nå¨ä½¿ç¨ä¸é¢å½ä»¤çæ¶åï¼ä½ å¯è½ä¼åç°ï¼ä½ æçå°çå± id ä»¥å sha256 çæè¦åè¿éçä¸ä¸æ ·ãè¿æ¯å ä¸ºå®æ¹éåæ¯ä¸ç´å¨ç»´æ¤çï¼æä»»ä½æ°ç bugï¼æèçæ¬æ´æ°ï¼é½ä¼è¿è¡ä¿®å¤åä»¥åæ¥çæ ç­¾åå¸ï¼è¿æ ·å¯ä»¥ç¡®ä¿ä»»ä½ä½¿ç¨è¿ä¸ªæ ç­¾çç¨æ·å¯ä»¥è·å¾æ´å®å¨ãæ´ç¨³å®çéåã\n\nå¦æä» docker hub ä¸è½½éåéå¸¸ç¼æ¢ï¼å¯ä»¥åç§ éåå éå¨ ä¸èéç½®å éå¨ã\n\n\n# è¿è¡\n\næäºéååï¼æä»¬å°±è½å¤ä»¥è¿ä¸ªéåä¸ºåºç¡å¯å¨å¹¶è¿è¡ä¸ä¸ªå®¹å¨ãä»¥ä¸é¢ç ubuntu:16.04 ä¸ºä¾ï¼å¦ææä»¬æç®å¯å¨éé¢ç bash å¹¶ä¸è¿è¡äº¤äºå¼æä½çè¯ï¼å¯ä»¥æ§è¡ä¸é¢çå½ä»¤ã\n\ndocker run -it --rm \\\n    ubuntu:16.04 \\\n    bash\n\nroot@e7009c6ce357:/# cat /etc/os-release\nname="ubuntu"\nversion="16.04.4 lts, trusty tahr"\nid=ubuntu\nid_like=debian\npretty_name="ubuntu 16.04.4 lts"\nversion_id="16.04"\nhome_url="http://www.ubuntu.com/"\nsupport_url="http://help.ubuntu.com/"\nbug_report_url="http://bugs.launchpad.net/ubuntu/"\n\n\ndocker run å°±æ¯è¿è¡å®¹å¨çå½ä»¤ï¼æä»¬è¿éç®è¦çè¯´æä¸ä¸ä¸é¢ç¨å°çåæ°ã\n\n * -itï¼è¿æ¯ä¸¤ä¸ªåæ°ï¼ä¸ä¸ªæ¯ -iï¼äº¤äºå¼æä½ï¼ä¸ä¸ªæ¯ -t ç»ç«¯ãæä»¬è¿éæç®è¿å¥ bash æ§è¡ä¸äºå½ä»¤å¹¶æ¥çè¿åç»æï¼å æ­¤æä»¬éè¦äº¤äºå¼ç»ç«¯ã\n * --rmï¼è¿ä¸ªåæ°æ¯è¯´å®¹å¨éåºåéä¹å°å¶å é¤ãé»è®¤æåµä¸ï¼ä¸ºäºæééæ±ï¼éåºçå®¹å¨å¹¶ä¸ä¼ç«å³å é¤ï¼é¤éæå¨ docker rmãæä»¬è¿éåªæ¯éä¾¿æ§è¡ä¸ªå½ä»¤ï¼ççç»æï¼ä¸éè¦æéåä¿çç»æï¼å æ­¤ä½¿ç¨ --rm å¯ä»¥é¿åæµªè´¹ç©ºé´ã\n * ubuntu:16.04ï¼è¿æ¯æç¨ ubuntu:16.04 éåä¸ºåºç¡æ¥å¯å¨å®¹å¨ã\n * bashï¼æ¾å¨éåååçæ¯å½ä»¤ï¼è¿éæä»¬å¸ææä¸ªäº¤äºå¼ shellï¼å æ­¤ç¨çæ¯ bashã\n\nè¿å¥å®¹å¨åï¼æä»¬å¯ä»¥å¨ shell ä¸æä½ï¼æ§è¡ä»»ä½æéçå½ä»¤ãè¿éï¼æä»¬æ§è¡äº cat /etc/os-releaseï¼è¿æ¯ linux å¸¸ç¨çæ¥çå½åç³»ç»çæ¬çå½ä»¤ï¼ä»è¿åçç»æå¯ä»¥çå°å®¹å¨åæ¯ ubuntu 16.04.4 lts ç³»ç»ã\n\næåæä»¬éè¿ exit éåºäºè¿ä¸ªå®¹å¨ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker ååºéå",frontmatter:{title:"Docker ååºéå",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/be83bd/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/03.Docker%20%E5%88%97%E5%87%BA%E9%95%9C%E5%83%8F.html",relativePath:"17.Docker/04.Docker éå/03.Docker ååºéå.md",key:"v-38a7db08",path:"/pages/be83bd/",headers:[{level:2,title:"éåä½ç§¯",slug:"éåä½ç§¯",normalizedTitle:"éåä½ç§¯",charIndex:940},{level:2,title:"èæ¬éå",slug:"èæ¬éå",normalizedTitle:"èæ¬éå",charIndex:1933},{level:2,title:"ä¸­é´å±éå",slug:"ä¸­é´å±éå",normalizedTitle:"ä¸­é´å±éå",charIndex:2617},{level:2,title:"ååºé¨åéå",slug:"ååºé¨åéå",normalizedTitle:"ååºé¨åéå",charIndex:2975},{level:2,title:"ä»¥ç¹å®æ ¼å¼æ¾ç¤º",slug:"ä»¥ç¹å®æ ¼å¼æ¾ç¤º",normalizedTitle:"ä»¥ç¹å®æ ¼å¼æ¾ç¤º",charIndex:4240}],headersStr:"éåä½ç§¯ èæ¬éå ä¸­é´å±éå ååºé¨åéå ä»¥ç¹å®æ ¼å¼æ¾ç¤º",content:'# Docker ååºéå\n\nè¦æ³ååºå·²ç»ä¸è½½ä¸æ¥çéåï¼å¯ä»¥ä½¿ç¨ docker image ls å½ä»¤ã\n\ndocker image ls\nREPOSITORY           TAG                 IMAGE ID            CREATED             SIZE\nredis                latest              5f515359c7f8        5 days ago          183 MB\nnginx                latest              05a60462f8ba        5 days ago          181 MB\nmongo                3.2                 fe9198c04d62        5 days ago          342 MB\n<none>               <none>              00285df0df87        5 days ago          342 MB\nubuntu               16.04               f753707788c5        4 weeks ago         127 MB\nubuntu               latest              f753707788c5        4 weeks ago         127 MB\nubuntu               14.04               1e0c3dd64ccd        4 weeks ago         188 MB\n\n\nåè¡¨åå«äº ä»åºåãæ ç­¾ãéå IDãåå»ºæ¶é´ ä»¥å æå ç¨çç©ºé´ã\n\nå¶ä¸­ä»åºåãæ ç­¾å¨ä¹åçåºç¡æ¦å¿µç« èå·²ç»ä»ç»è¿äºãéå ID åæ¯éåçå¯ä¸æ è¯ï¼ä¸ä¸ªéåå¯ä»¥å¯¹åºå¤ä¸ªæ ç­¾ãå æ­¤ï¼å¨ä¸é¢çä¾å­ä¸­ï¼æä»¬å¯ä»¥çå° ubuntu:16.04 å ubuntu:latest æ¥æç¸åç IDï¼å ä¸ºå®ä»¬å¯¹åºçæ¯åä¸ä¸ªéåã\n\n\n# éåä½ç§¯\n\nå¦æä»ç»è§å¯ï¼ä¼æ³¨æå°ï¼è¿éæ è¯çæå ç¨ç©ºé´åå¨ Docker Hub ä¸çå°çéåå¤§å°ä¸åãæ¯å¦ï¼ubuntu:16.04 éåå¤§å°ï¼å¨è¿éæ¯ 127 MBï¼ä½æ¯å¨ Docker Hub æ¾ç¤ºçå´æ¯ 50 MBãè¿æ¯å ä¸º Docker Hub ä¸­æ¾ç¤ºçä½ç§¯æ¯åç¼©åçä½ç§¯ãå¨éåä¸è½½åä¸ä¼ è¿ç¨ä¸­éåæ¯ä¿æçåç¼©ç¶æçï¼å æ­¤ Docker Hub ææ¾ç¤ºçå¤§å°æ¯ç½ç»ä¼ è¾ä¸­æ´å³å¿çæµéå¤§å°ãè docker image ls æ¾ç¤ºçæ¯éåä¸è½½å°æ¬å°åï¼å±å¼çå¤§å°ï¼åç¡®è¯´ï¼æ¯å±å¼åçåå±æå ç©ºé´çæ»åï¼å ä¸ºéåå°æ¬å°åï¼æ¥çç©ºé´çæ¶åï¼æ´å³å¿çæ¯æ¬å°ç£çç©ºé´å ç¨çå¤§å°ã\n\nå¦å¤ä¸ä¸ªéè¦æ³¨æçé®é¢æ¯ï¼docker image ls åè¡¨ä¸­çéåä½ç§¯æ»åå¹¶éæ¯ææéåå®éç¡¬çæ¶èãç±äº Docker éåæ¯å¤å±å­å¨ç»æï¼å¹¶ä¸å¯ä»¥ç»§æ¿ãå¤ç¨ï¼å æ­¤ä¸åéåå¯è½ä¼å ä¸ºä½¿ç¨ç¸åçåºç¡éåï¼ä»èæ¥æå±åçå±ãç±äº Docker ä½¿ç¨ Union FSï¼ç¸åçå±åªéè¦ä¿å­ä¸ä»½å³å¯ï¼å æ­¤å®ééåç¡¬çå ç¨ç©ºé´å¾å¯è½è¦æ¯è¿ä¸ªåè¡¨éåå¤§å°çæ»åè¦å°çå¤ã\n\nä½ å¯ä»¥éè¿ä»¥ä¸å½ä»¤æ¥ä¾¿æ·çæ¥çéåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´ã\n\ndocker system df\n\nTYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLE\nImages              24                  0                   1.992GB             1.992GB (100%)\nContainers          1                   0                   62.82MB             62.82MB (100%)\nLocal Volumes       9                   0                   652.2MB             652.2MB (100%)\nBuild Cache                                                 0B                  0B\n\n\n\n# èæ¬éå\n\nä¸é¢çéååè¡¨ä¸­ï¼è¿å¯ä»¥çå°ä¸ä¸ªç¹æ®çéåï¼è¿ä¸ªéåæ¢æ²¡æä»åºåï¼ä¹æ²¡ææ ç­¾ï¼åä¸º ``ãï¼\n\n<none>               <none>              00285df0df87        5 days ago          342 MB\n\n\nè¿ä¸ªéååæ¬æ¯æéåååæ ç­¾çï¼åæ¥ä¸º mongo:3.2ï¼éçå®æ¹éåç»´æ¤ï¼åå¸äºæ°çæ¬åï¼éæ° docker pull mongo:3.2 æ¶ï¼mongo:3.2 è¿ä¸ªéååè¢«è½¬ç§»å°äºæ°ä¸è½½çéåèº«ä¸ï¼èæ§çéåä¸çè¿ä¸ªåç§°åè¢«åæ¶ï¼ä»èæä¸ºäº ãé¤äº `docker pull` å¯è½å¯¼è´è¿ç§æåµï¼`docker build` ä¹åæ ·å¯ä»¥å¯¼è´è¿ç§ç°è±¡ãç±äºæ°æ§éåååï¼æ§éååç§°è¢«åæ¶ï¼ä»èåºç°ä»åºåãæ ç­¾åä¸º çéåãè¿ç±»æ æ ç­¾éåä¹è¢«ç§°ä¸º èæ¬éå(dangling image) ï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ä¸é¨æ¾ç¤ºè¿ç±»éåï¼\n\ndocker image ls -f dangling=true\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n<none>              <none>              00285df0df87        5 days ago          342 MB\n\n\nä¸è¬æ¥è¯´ï¼èæ¬éåå·²ç»å¤±å»äºå­å¨çä»·å¼ï¼æ¯å¯ä»¥éæå é¤çï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤å é¤ã\n\ndocker image prune\n\n\n\n# ä¸­é´å±éå\n\nä¸ºäºå ééåæå»ºãéå¤å©ç¨èµæºï¼Docker ä¼å©ç¨ ä¸­é´å±éåãæä»¥å¨ä½¿ç¨ä¸æ®µæ¶é´åï¼å¯è½ä¼çå°ä¸äºä¾èµçä¸­é´å±éåãé»è®¤ç docker image ls åè¡¨ä¸­åªä¼æ¾ç¤ºé¡¶å±éåï¼å¦æå¸ææ¾ç¤ºåæ¬ä¸­é´å±éåå¨åçææéåçè¯ï¼éè¦å  -a åæ°ã\n\ndocker image ls -a\n\n\nè¿æ ·ä¼çå°å¾å¤æ æ ç­¾çéåï¼ä¸ä¹åçèæ¬éåä¸åï¼è¿äºæ æ ç­¾çéåå¾å¤é½æ¯ä¸­é´å±éåï¼æ¯å¶å®éåæä¾èµçéåãè¿äºæ æ ç­¾éåä¸åºè¯¥å é¤ï¼å¦åä¼å¯¼è´ä¸å±éåå ä¸ºä¾èµä¸¢å¤±èåºéãå®éä¸ï¼è¿äºéåä¹æ²¡å¿è¦å é¤ï¼å ä¸ºä¹åè¯´è¿ï¼ç¸åçå±åªä¼å­ä¸éï¼èè¿äºéåæ¯å«çéåçä¾èµï¼å æ­¤å¹¶ä¸ä¼å ä¸ºå®ä»¬è¢«ååºæ¥èå¤å­äºä¸ä»½ï¼æ è®ºå¦ä½ä½ ä¹ä¼éè¦å®ä»¬ãåªè¦å é¤é£äºä¾èµå®ä»¬çéååï¼è¿äºä¾èµçä¸­é´å±éåä¹ä¼è¢«è¿å¸¦å é¤ã\n\n\n# ååºé¨åéå\n\nä¸å ä»»ä½åæ°çæåµä¸ï¼docker image ls ä¼ååºææé¡¶çº§éåï¼ä½æ¯ææ¶åæä»¬åªå¸æååºé¨åéåãdocker image ls æå¥½å ä¸ªåæ°å¯ä»¥å¸®å©åå°è¿ä¸ªäºæã\n\næ ¹æ®ä»åºåååºéå\n\ndocker image ls ubuntu\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              16.04               f753707788c5        4 weeks ago         127 MB\nubuntu              latest              f753707788c5        4 weeks ago         127 MB\nubuntu              14.04               1e0c3dd64ccd        4 weeks ago         188 MB\n\n\nååºç¹å®çæä¸ªéåï¼ä¹å°±æ¯è¯´æå®ä»åºååæ ç­¾\n\ndocker image ls ubuntu:16.04\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              16.04               f753707788c5        4 weeks ago         127 MB\n\n\né¤æ­¤ä»¥å¤ï¼docker image ls è¿æ¯æå¼ºå¤§çè¿æ»¤å¨åæ° --filterï¼æèç®å -fãä¹åæä»¬å·²ç»çå°äºä½¿ç¨è¿æ»¤å¨æ¥ååºèæ¬éåçç¨æ³ï¼å®è¿ææ´å¤çç¨æ³ãæ¯å¦ï¼æä»¬å¸æçå°å¨ mongo:3.2 ä¹åå»ºç«çéåï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ï¼\n\ndocker image ls -f since=mongo:3.2\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nredis               latest              5f515359c7f8        5 days ago          183 MB\nnginx               latest              05a60462f8ba        5 days ago          181 MB\n\n\næ³æ¥çæä¸ªä½ç½®ä¹åçéåä¹å¯ä»¥ï¼åªéè¦æ since æ¢æ before å³å¯ã\n\næ­¤å¤ï¼å¦æéåæå»ºæ¶ï¼å®ä¹äº LABELï¼è¿å¯ä»¥éè¿ LABEL æ¥è¿æ»¤ã\n\ndocker image ls -f label=com.example.version=0.1\n...\n\n\n\n# ä»¥ç¹å®æ ¼å¼æ¾ç¤º\n\né»è®¤æåµä¸ï¼docker image ls ä¼è¾åºä¸ä¸ªå®æ´çè¡¨æ ¼ï¼ä½æ¯æä»¬å¹¶éæææ¶åé½ä¼éè¦è¿äºåå®¹ãæ¯å¦ï¼åæå é¤èæ¬éåçæ¶åï¼æä»¬éè¦å©ç¨ docker image ls æææçèæ¬éåç ID ååºæ¥ï¼ç¶åæå¯ä»¥äº¤ç» docker image rm å½ä»¤ä½ä¸ºåæ°æ¥å é¤æå®çè¿äºéåï¼è¿ä¸ªæ¶åå°±ç¨å°äº -q åæ°ã\n\ndocker image ls -q\n5f515359c7f8\n05a60462f8ba\nfe9198c04d62\n00285df0df87\nf753707788c5\nf753707788c5\n1e0c3dd64ccd\n\n\n--filter éå -q äº§çåºæå®èå´ç ID åè¡¨ï¼ç¶åéç»å¦ä¸ä¸ª docker å½ä»¤ä½ä¸ºåæ°ï¼ä»èéå¯¹è¿ç»å®ä½ææ¹çè¿è¡æç§æä½çåæ³å¨ Docker å½ä»¤è¡ä½¿ç¨è¿ç¨ä¸­éå¸¸å¸¸è§ï¼ä¸ä»ä»æ¯éåï¼å°æ¥æä»¬ä¼å¨åä¸ªå½ä»¤ä¸­çå°è¿ç±»æ­éä»¥å®æå¾å¼ºå¤§çåè½ãå æ­¤æ¯æ¬¡å¨ææ¡£çå°è¿æ»¤å¨åï¼å¯ä»¥å¤æ³¨æä¸ä¸å®ä»¬çç¨æ³ã\n\nå¦å¤ä¸äºæ¶åï¼æä»¬å¯è½åªæ¯å¯¹è¡¨æ ¼çç»æä¸æ»¡æï¼å¸æèªå·±ç»ç»åï¼æèä¸å¸æææ é¢ï¼è¿æ ·æ¹ä¾¿å¶å®ç¨åºè§£æç»æç­ï¼è¿å°±ç¨å°äº Go çæ¨¡æ¿è¯­æ³ã\n\næ¯å¦ï¼ä¸é¢çå½ä»¤ä¼ç´æ¥ååºéåç»æï¼å¹¶ä¸åªåå«éåIDåä»åºåï¼\n\ndocker image ls --format "{{.ID}}: {{.Repository}}"\n5f515359c7f8: redis\n05a60462f8ba: nginx\nfe9198c04d62: mongo\n00285df0df87: <none>\nf753707788c5: ubuntu\nf753707788c5: ubuntu\n1e0c3dd64ccd: ubuntu\n\n\næèæç®ä»¥è¡¨æ ¼ç­è·æ¾ç¤ºï¼å¹¶ä¸ææ é¢è¡ï¼åé»è®¤ä¸æ ·ï¼ä¸è¿èªå·±å®ä¹åï¼\n\ndocker image ls --format "table {{.ID}}\\t{{.Repository}}\\t{{.Tag}}"\nIMAGE ID            REPOSITORY          TAG\n5f515359c7f8        redis               latest\n05a60462f8ba        nginx               latest\nfe9198c04d62        mongo               3.2\n00285df0df87        <none>              <none>\nf753707788c5        ubuntu              16.04\nf753707788c5        ubuntu              latest\n1e0c3dd64ccd        ubuntu              14.04\n',normalizedContent:'# docker ååºéå\n\nè¦æ³ååºå·²ç»ä¸è½½ä¸æ¥çéåï¼å¯ä»¥ä½¿ç¨ docker image ls å½ä»¤ã\n\ndocker image ls\nrepository           tag                 image id            created             size\nredis                latest              5f515359c7f8        5 days ago          183 mb\nnginx                latest              05a60462f8ba        5 days ago          181 mb\nmongo                3.2                 fe9198c04d62        5 days ago          342 mb\n<none>               <none>              00285df0df87        5 days ago          342 mb\nubuntu               16.04               f753707788c5        4 weeks ago         127 mb\nubuntu               latest              f753707788c5        4 weeks ago         127 mb\nubuntu               14.04               1e0c3dd64ccd        4 weeks ago         188 mb\n\n\nåè¡¨åå«äº ä»åºåãæ ç­¾ãéå idãåå»ºæ¶é´ ä»¥å æå ç¨çç©ºé´ã\n\nå¶ä¸­ä»åºåãæ ç­¾å¨ä¹åçåºç¡æ¦å¿µç« èå·²ç»ä»ç»è¿äºãéå id åæ¯éåçå¯ä¸æ è¯ï¼ä¸ä¸ªéåå¯ä»¥å¯¹åºå¤ä¸ªæ ç­¾ãå æ­¤ï¼å¨ä¸é¢çä¾å­ä¸­ï¼æä»¬å¯ä»¥çå° ubuntu:16.04 å ubuntu:latest æ¥æç¸åç idï¼å ä¸ºå®ä»¬å¯¹åºçæ¯åä¸ä¸ªéåã\n\n\n# éåä½ç§¯\n\nå¦æä»ç»è§å¯ï¼ä¼æ³¨æå°ï¼è¿éæ è¯çæå ç¨ç©ºé´åå¨ docker hub ä¸çå°çéåå¤§å°ä¸åãæ¯å¦ï¼ubuntu:16.04 éåå¤§å°ï¼å¨è¿éæ¯ 127 mbï¼ä½æ¯å¨ docker hub æ¾ç¤ºçå´æ¯ 50 mbãè¿æ¯å ä¸º docker hub ä¸­æ¾ç¤ºçä½ç§¯æ¯åç¼©åçä½ç§¯ãå¨éåä¸è½½åä¸ä¼ è¿ç¨ä¸­éåæ¯ä¿æçåç¼©ç¶æçï¼å æ­¤ docker hub ææ¾ç¤ºçå¤§å°æ¯ç½ç»ä¼ è¾ä¸­æ´å³å¿çæµéå¤§å°ãè docker image ls æ¾ç¤ºçæ¯éåä¸è½½å°æ¬å°åï¼å±å¼çå¤§å°ï¼åç¡®è¯´ï¼æ¯å±å¼åçåå±æå ç©ºé´çæ»åï¼å ä¸ºéåå°æ¬å°åï¼æ¥çç©ºé´çæ¶åï¼æ´å³å¿çæ¯æ¬å°ç£çç©ºé´å ç¨çå¤§å°ã\n\nå¦å¤ä¸ä¸ªéè¦æ³¨æçé®é¢æ¯ï¼docker image ls åè¡¨ä¸­çéåä½ç§¯æ»åå¹¶éæ¯ææéåå®éç¡¬çæ¶èãç±äº docker éåæ¯å¤å±å­å¨ç»æï¼å¹¶ä¸å¯ä»¥ç»§æ¿ãå¤ç¨ï¼å æ­¤ä¸åéåå¯è½ä¼å ä¸ºä½¿ç¨ç¸åçåºç¡éåï¼ä»èæ¥æå±åçå±ãç±äº docker ä½¿ç¨ union fsï¼ç¸åçå±åªéè¦ä¿å­ä¸ä»½å³å¯ï¼å æ­¤å®ééåç¡¬çå ç¨ç©ºé´å¾å¯è½è¦æ¯è¿ä¸ªåè¡¨éåå¤§å°çæ»åè¦å°çå¤ã\n\nä½ å¯ä»¥éè¿ä»¥ä¸å½ä»¤æ¥ä¾¿æ·çæ¥çéåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´ã\n\ndocker system df\n\ntype                total               active              size                reclaimable\nimages              24                  0                   1.992gb             1.992gb (100%)\ncontainers          1                   0                   62.82mb             62.82mb (100%)\nlocal volumes       9                   0                   652.2mb             652.2mb (100%)\nbuild cache                                                 0b                  0b\n\n\n\n# èæ¬éå\n\nä¸é¢çéååè¡¨ä¸­ï¼è¿å¯ä»¥çå°ä¸ä¸ªç¹æ®çéåï¼è¿ä¸ªéåæ¢æ²¡æä»åºåï¼ä¹æ²¡ææ ç­¾ï¼åä¸º ``ãï¼\n\n<none>               <none>              00285df0df87        5 days ago          342 mb\n\n\nè¿ä¸ªéååæ¬æ¯æéåååæ ç­¾çï¼åæ¥ä¸º mongo:3.2ï¼éçå®æ¹éåç»´æ¤ï¼åå¸äºæ°çæ¬åï¼éæ° docker pull mongo:3.2 æ¶ï¼mongo:3.2 è¿ä¸ªéååè¢«è½¬ç§»å°äºæ°ä¸è½½çéåèº«ä¸ï¼èæ§çéåä¸çè¿ä¸ªåç§°åè¢«åæ¶ï¼ä»èæä¸ºäº ãé¤äº `docker pull` å¯è½å¯¼è´è¿ç§æåµï¼`docker build` ä¹åæ ·å¯ä»¥å¯¼è´è¿ç§ç°è±¡ãç±äºæ°æ§éåååï¼æ§éååç§°è¢«åæ¶ï¼ä»èåºç°ä»åºåãæ ç­¾åä¸º çéåãè¿ç±»æ æ ç­¾éåä¹è¢«ç§°ä¸º èæ¬éå(dangling image) ï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ä¸é¨æ¾ç¤ºè¿ç±»éåï¼\n\ndocker image ls -f dangling=true\nrepository          tag                 image id            created             size\n<none>              <none>              00285df0df87        5 days ago          342 mb\n\n\nä¸è¬æ¥è¯´ï¼èæ¬éåå·²ç»å¤±å»äºå­å¨çä»·å¼ï¼æ¯å¯ä»¥éæå é¤çï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤å é¤ã\n\ndocker image prune\n\n\n\n# ä¸­é´å±éå\n\nä¸ºäºå ééåæå»ºãéå¤å©ç¨èµæºï¼docker ä¼å©ç¨ ä¸­é´å±éåãæä»¥å¨ä½¿ç¨ä¸æ®µæ¶é´åï¼å¯è½ä¼çå°ä¸äºä¾èµçä¸­é´å±éåãé»è®¤ç docker image ls åè¡¨ä¸­åªä¼æ¾ç¤ºé¡¶å±éåï¼å¦æå¸ææ¾ç¤ºåæ¬ä¸­é´å±éåå¨åçææéåçè¯ï¼éè¦å  -a åæ°ã\n\ndocker image ls -a\n\n\nè¿æ ·ä¼çå°å¾å¤æ æ ç­¾çéåï¼ä¸ä¹åçèæ¬éåä¸åï¼è¿äºæ æ ç­¾çéåå¾å¤é½æ¯ä¸­é´å±éåï¼æ¯å¶å®éåæä¾èµçéåãè¿äºæ æ ç­¾éåä¸åºè¯¥å é¤ï¼å¦åä¼å¯¼è´ä¸å±éåå ä¸ºä¾èµä¸¢å¤±èåºéãå®éä¸ï¼è¿äºéåä¹æ²¡å¿è¦å é¤ï¼å ä¸ºä¹åè¯´è¿ï¼ç¸åçå±åªä¼å­ä¸éï¼èè¿äºéåæ¯å«çéåçä¾èµï¼å æ­¤å¹¶ä¸ä¼å ä¸ºå®ä»¬è¢«ååºæ¥èå¤å­äºä¸ä»½ï¼æ è®ºå¦ä½ä½ ä¹ä¼éè¦å®ä»¬ãåªè¦å é¤é£äºä¾èµå®ä»¬çéååï¼è¿äºä¾èµçä¸­é´å±éåä¹ä¼è¢«è¿å¸¦å é¤ã\n\n\n# ååºé¨åéå\n\nä¸å ä»»ä½åæ°çæåµä¸ï¼docker image ls ä¼ååºææé¡¶çº§éåï¼ä½æ¯ææ¶åæä»¬åªå¸æååºé¨åéåãdocker image ls æå¥½å ä¸ªåæ°å¯ä»¥å¸®å©åå°è¿ä¸ªäºæã\n\næ ¹æ®ä»åºåååºéå\n\ndocker image ls ubuntu\nrepository          tag                 image id            created             size\nubuntu              16.04               f753707788c5        4 weeks ago         127 mb\nubuntu              latest              f753707788c5        4 weeks ago         127 mb\nubuntu              14.04               1e0c3dd64ccd        4 weeks ago         188 mb\n\n\nååºç¹å®çæä¸ªéåï¼ä¹å°±æ¯è¯´æå®ä»åºååæ ç­¾\n\ndocker image ls ubuntu:16.04\nrepository          tag                 image id            created             size\nubuntu              16.04               f753707788c5        4 weeks ago         127 mb\n\n\né¤æ­¤ä»¥å¤ï¼docker image ls è¿æ¯æå¼ºå¤§çè¿æ»¤å¨åæ° --filterï¼æèç®å -fãä¹åæä»¬å·²ç»çå°äºä½¿ç¨è¿æ»¤å¨æ¥ååºèæ¬éåçç¨æ³ï¼å®è¿ææ´å¤çç¨æ³ãæ¯å¦ï¼æä»¬å¸æçå°å¨ mongo:3.2 ä¹åå»ºç«çéåï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ï¼\n\ndocker image ls -f since=mongo:3.2\nrepository          tag                 image id            created             size\nredis               latest              5f515359c7f8        5 days ago          183 mb\nnginx               latest              05a60462f8ba        5 days ago          181 mb\n\n\næ³æ¥çæä¸ªä½ç½®ä¹åçéåä¹å¯ä»¥ï¼åªéè¦æ since æ¢æ before å³å¯ã\n\næ­¤å¤ï¼å¦æéåæå»ºæ¶ï¼å®ä¹äº labelï¼è¿å¯ä»¥éè¿ label æ¥è¿æ»¤ã\n\ndocker image ls -f label=com.example.version=0.1\n...\n\n\n\n# ä»¥ç¹å®æ ¼å¼æ¾ç¤º\n\né»è®¤æåµä¸ï¼docker image ls ä¼è¾åºä¸ä¸ªå®æ´çè¡¨æ ¼ï¼ä½æ¯æä»¬å¹¶éæææ¶åé½ä¼éè¦è¿äºåå®¹ãæ¯å¦ï¼åæå é¤èæ¬éåçæ¶åï¼æä»¬éè¦å©ç¨ docker image ls æææçèæ¬éåç id ååºæ¥ï¼ç¶åæå¯ä»¥äº¤ç» docker image rm å½ä»¤ä½ä¸ºåæ°æ¥å é¤æå®çè¿äºéåï¼è¿ä¸ªæ¶åå°±ç¨å°äº -q åæ°ã\n\ndocker image ls -q\n5f515359c7f8\n05a60462f8ba\nfe9198c04d62\n00285df0df87\nf753707788c5\nf753707788c5\n1e0c3dd64ccd\n\n\n--filter éå -q äº§çåºæå®èå´ç id åè¡¨ï¼ç¶åéç»å¦ä¸ä¸ª docker å½ä»¤ä½ä¸ºåæ°ï¼ä»èéå¯¹è¿ç»å®ä½ææ¹çè¿è¡æç§æä½çåæ³å¨ docker å½ä»¤è¡ä½¿ç¨è¿ç¨ä¸­éå¸¸å¸¸è§ï¼ä¸ä»ä»æ¯éåï¼å°æ¥æä»¬ä¼å¨åä¸ªå½ä»¤ä¸­çå°è¿ç±»æ­éä»¥å®æå¾å¼ºå¤§çåè½ãå æ­¤æ¯æ¬¡å¨ææ¡£çå°è¿æ»¤å¨åï¼å¯ä»¥å¤æ³¨æä¸ä¸å®ä»¬çç¨æ³ã\n\nå¦å¤ä¸äºæ¶åï¼æä»¬å¯è½åªæ¯å¯¹è¡¨æ ¼çç»æä¸æ»¡æï¼å¸æèªå·±ç»ç»åï¼æèä¸å¸æææ é¢ï¼è¿æ ·æ¹ä¾¿å¶å®ç¨åºè§£æç»æç­ï¼è¿å°±ç¨å°äº go çæ¨¡æ¿è¯­æ³ã\n\næ¯å¦ï¼ä¸é¢çå½ä»¤ä¼ç´æ¥ååºéåç»æï¼å¹¶ä¸åªåå«éåidåä»åºåï¼\n\ndocker image ls --format "{{.id}}: {{.repository}}"\n5f515359c7f8: redis\n05a60462f8ba: nginx\nfe9198c04d62: mongo\n00285df0df87: <none>\nf753707788c5: ubuntu\nf753707788c5: ubuntu\n1e0c3dd64ccd: ubuntu\n\n\næèæç®ä»¥è¡¨æ ¼ç­è·æ¾ç¤ºï¼å¹¶ä¸ææ é¢è¡ï¼åé»è®¤ä¸æ ·ï¼ä¸è¿èªå·±å®ä¹åï¼\n\ndocker image ls --format "table {{.id}}\\t{{.repository}}\\t{{.tag}}"\nimage id            repository          tag\n5f515359c7f8        redis               latest\n05a60462f8ba        nginx               latest\nfe9198c04d62        mongo               3.2\n00285df0df87        <none>              <none>\nf753707788c5        ubuntu              16.04\nf753707788c5        ubuntu              latest\n1e0c3dd64ccd        ubuntu              14.04\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker å é¤æ¬å°éå",frontmatter:{title:"Docker å é¤æ¬å°éå",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/058894/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/04.Docker%20%E5%88%A0%E9%99%A4%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F.html",relativePath:"17.Docker/04.Docker éå/04.Docker å é¤æ¬å°éå.md",key:"v-1bf741b0",path:"/pages/058894/",headers:[{level:2,title:"ç¨ IDãéååãæè¦å é¤éå",slug:"ç¨-idãéååãæè¦å é¤éå",normalizedTitle:"ç¨ idãéååãæè¦å é¤éå",charIndex:103},{level:2,title:"Untagged å Deleted",slug:"untagged-å-deleted",normalizedTitle:"untagged å deleted",charIndex:2370},{level:2,title:"ç¨ docker image ls å½ä»¤æ¥éå",slug:"ç¨-docker-image-ls-å½ä»¤æ¥éå",normalizedTitle:"ç¨ docker image ls å½ä»¤æ¥éå",charIndex:3129},{level:2,title:"Docker æ¹éå é¤èæ¬éå",slug:"docker-æ¹éå é¤èæ¬éå",normalizedTitle:"docker æ¹éå é¤èæ¬éå",charIndex:3473},{level:2,title:"CentOS/RHEL çç¨æ·éè¦æ³¨æçäºé¡¹",slug:"centos-rhel-çç¨æ·éè¦æ³¨æçäºé¡¹",normalizedTitle:"centos/rhel çç¨æ·éè¦æ³¨æçäºé¡¹",charIndex:3673}],headersStr:"ç¨ IDãéååãæè¦å é¤éå Untagged å Deleted ç¨ docker image ls å½ä»¤æ¥éå Docker æ¹éå é¤èæ¬éå CentOS/RHEL çç¨æ·éè¦æ³¨æçäºé¡¹",content:"# Docker å é¤æ¬å°éå\n\nå¦æè¦å é¤æ¬å°çéåï¼å¯ä»¥ä½¿ç¨ docker image rm å½ä»¤ï¼å¶æ ¼å¼ä¸ºï¼\n\ndocker image rm [éé¡¹] <éå1> [<éå2> ...]\n\n\n\n# ç¨ IDãéååãæè¦å é¤éå\n\nå¶ä¸­ï¼<éå> å¯ä»¥æ¯ éåç­ IDãéåé¿ IDãéåå æè éåæè¦ã\n\næ¯å¦æä»¬æè¿ä¹ä¸äºéåï¼\n\ndocker image ls\nREPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE\ncentos                      latest              0584b3d2cf6d        3 weeks ago         196.5 MB\nredis                       alpine              501ad78535f0        3 weeks ago         21.03 MB\ndocker                      latest              cf693ec9b5c7        3 weeks ago         105.1 MB\nnginx                       latest              e43d811ce2f4        5 weeks ago         181.5 MB\n\n\næä»¬å¯ä»¥ç¨éåçå®æ´ IDï¼ä¹ç§°ä¸º é¿ IDï¼æ¥å é¤éåãä½¿ç¨èæ¬çæ¶åå¯è½ä¼ç¨é¿ IDï¼ä½æ¯äººå·¥è¾å¥å°±å¤ªç´¯äºï¼æä»¥æ´å¤çæ¶åæ¯ç¨ ç­ ID æ¥å é¤éåãdocker image ls é»è®¤ååºçå°±å·²ç»æ¯ç­ ID äºï¼ä¸è¬åå3ä¸ªå­ç¬¦ä»¥ä¸ï¼åªè¦è¶³å¤åºåäºå«çéåå°±å¯ä»¥äºã\n\næ¯å¦è¿éï¼å¦ææä»¬è¦å é¤ redis:alpine éåï¼å¯ä»¥æ§è¡ï¼\n\ndocker image rm 501\nUntagged: redis:alpine\nUntagged: redis@sha256:f1ed3708f538b537eb9c2a7dd50dc90a706f7debd7e1196c9264edeea521a86d\nDeleted: sha256:501ad78535f015d88872e13fa87a828425117e3d28075d0c117932b05bf189b7\nDeleted: sha256:96167737e29ca8e9d74982ef2a0dda76ed7b430da55e321c071f0dbff8c2899b\nDeleted: sha256:32770d1dcf835f192cafd6b9263b7b597a1778a403a109e2cc2ee866f74adf23\nDeleted: sha256:127227698ad74a5846ff5153475e03439d96d4b1c7f2a449c7a826ef74a2d2fa\nDeleted: sha256:1333ecc582459bac54e1437335c0816bc17634e131ea0cc48daa27d32c75eab3\nDeleted: sha256:4fc455b921edf9c4aea207c51ab39b10b06540c8b4825ba57b3feed1668fa7c7\n\n\næä»¬ä¹å¯ä»¥ç¨éååï¼ä¹å°±æ¯ <ä»åºå>:<æ ç­¾>ï¼æ¥å é¤éåã\n\ndocker image rm centos\nUntagged: centos:latest\nUntagged: centos@sha256:b2f9d1c0ff5f87a4743104d099a3d561002ac500db1b9bfa02a783a46e0d366c\nDeleted: sha256:0584b3d2cf6d235ee310cf14b54667d889887b838d3f3d3033acd70fc3c48b8a\nDeleted: sha256:97ca462ad9eeae25941546209454496e1d66749d53dfa2ee32bf1faabd239d38\n\n\nå½ç¶ï¼æ´ç²¾ç¡®çæ¯ä½¿ç¨ éåæè¦ å é¤éåã\n\ndocker image ls --digests\nREPOSITORY                  TAG                 DIGEST                                                                    IMAGE ID            CREATED             SIZE\nnode                        slim                sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228   6e0c4c8e3913        3 weeks ago         214 MB\n\ndocker image rm node@sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228\nUntagged: node@sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228\n\n\n\n# Untagged å Deleted\n\nå¦æè§å¯ä¸é¢è¿å ä¸ªå½ä»¤çè¿è¡è¾åºä¿¡æ¯çè¯ï¼ä½ ä¼æ³¨æå°å é¤è¡ä¸ºåä¸ºä¸¤ç±»ï¼ä¸ç±»æ¯ Untaggedï¼å¦ä¸ç±»æ¯ Deletedãæä»¬ä¹åä»ç»è¿ï¼éåçå¯ä¸æ è¯æ¯å¶ ID åæè¦ï¼èä¸ä¸ªéåå¯ä»¥æå¤ä¸ªæ ç­¾ã\n\nå æ­¤å½æä»¬ä½¿ç¨ä¸é¢å½ä»¤å é¤éåçæ¶åï¼å®éä¸æ¯å¨è¦æ±å é¤æä¸ªæ ç­¾çéåãæä»¥é¦åéè¦åçæ¯å°æ»¡è¶³æä»¬è¦æ±çææéåæ ç­¾é½åæ¶ï¼è¿å°±æ¯æä»¬çå°ç Untagged çä¿¡æ¯ãå ä¸ºä¸ä¸ªéåå¯ä»¥å¯¹åºå¤ä¸ªæ ç­¾ï¼å æ­¤å½æä»¬å é¤äºææå®çæ ç­¾åï¼å¯è½è¿æå«çæ ç­¾æåäºè¿ä¸ªéåï¼å¦ææ¯è¿ç§æåµï¼é£ä¹ Delete è¡ä¸ºå°±ä¸ä¼åçãæä»¥å¹¶éææç docker image rm é½ä¼äº§çå é¤éåçè¡ä¸ºï¼æå¯è½ä»ä»æ¯åæ¶äºæä¸ªæ ç­¾èå·²ã\n\nå½è¯¥éåææçæ ç­¾é½è¢«åæ¶äºï¼è¯¥éåå¾å¯è½ä¼å¤±å»äºå­å¨çæä¹ï¼å æ­¤ä¼è§¦åå é¤è¡ä¸ºãéåæ¯å¤å±å­å¨ç»æï¼å æ­¤å¨å é¤çæ¶åä¹æ¯ä»ä¸å±ååºç¡å±æ¹åä¾æ¬¡è¿è¡å¤æ­å é¤ãéåçå¤å±ç»æè®©éåå¤ç¨åå¨éå¸¸å®¹æï¼å æ­¤å¾æå¯è½æä¸ªå¶å®éåæ­£ä¾èµäºå½åéåçæä¸å±ãè¿ç§æåµï¼ä¾æ§ä¸ä¼è§¦åå é¤è¯¥å±çè¡ä¸ºãç´å°æ²¡æä»»ä½å±ä¾èµå½åå±æ¶ï¼æä¼çå®çå é¤å½åå±ãè¿å°±æ¯ä¸ºä»ä¹ï¼ææ¶åä¼å¥æªï¼ä¸ºä»ä¹æææ²¡æå«çæ ç­¾æåè¿ä¸ªéåï¼ä½æ¯å®è¿æ¯å­å¨çåå ï¼ä¹æ¯ä¸ºä»ä¹ææ¶åä¼åç°æå é¤çå±æ°åèªå·± docker pull çå°çå±æ°ä¸ä¸æ ·çæºã\n\né¤äºéåä¾èµä»¥å¤ï¼è¿éè¦æ³¨æçæ¯å®¹å¨å¯¹éåçä¾èµãå¦ææç¨è¿ä¸ªéåå¯å¨çå®¹å¨å­å¨ï¼å³ä½¿å®¹å¨æ²¡æè¿è¡ï¼ï¼é£ä¹åæ ·ä¸å¯ä»¥å é¤è¿ä¸ªéåãä¹åè®²è¿ï¼å®¹å¨æ¯ä»¥éåä¸ºåºç¡ï¼åå ä¸å±å®¹å¨å­å¨å±ï¼ç»æè¿æ ·çå¤å±å­å¨ç»æå»è¿è¡çãå æ­¤è¯¥éåå¦æè¢«è¿ä¸ªå®¹å¨æä¾èµçï¼é£ä¹å é¤å¿ç¶ä¼å¯¼è´æéãå¦æè¿äºå®¹å¨æ¯ä¸éè¦çï¼åºè¯¥åå°å®ä»¬å é¤ï¼ç¶ååæ¥å é¤éåã\n\n\n# ç¨ docker image ls å½ä»¤æ¥éå\n\nåå¶å®å¯ä»¥æ¿æ¥å¤ä¸ªå®ä½çå½ä»¤ä¸æ ·ï¼å¯ä»¥ä½¿ç¨ docker image ls -q æ¥éåä½¿ç¨ docker image rmï¼è¿æ ·å¯ä»¥ææ¹çå é¤å¸æå é¤çéåãæä»¬å¨âéååè¡¨âç« èä»ç»è¿å¾å¤è¿æ»¤éååè¡¨çæ¹å¼é½å¯ä»¥æ¿è¿æ¥ä½¿ç¨ã\n\næ¯å¦ï¼æä»¬éè¦å é¤ææä»åºåä¸º redis çéåï¼\n\ndocker image rm $(docker image ls -q redis)\n\n\næèå é¤ææå¨ mongo:3.2 ä¹åçéåï¼\n\ndocker image rm $(docker image ls -q -f before=mongo:3.2)\n\n\nååå©ç¨ä½ çæ³è±¡åå Linux å½ä»¤è¡çå¼ºå¤§ï¼ä½ å¯ä»¥å®æå¾å¤éå¸¸èµçåè½ã\n\n\n# Docker æ¹éå é¤èæ¬éå\n\nå¨æä»¬æå»ºéåçè¿ç¨ä¸­ï¼å¸¸å¸¸éè¦ä½¿ç¨buildå½ä»¤æ ¹æ®Dockerfileè¿è¡æå»ºéåï¼å¹¶ä¸ä¼buildå¾å¤æ¬¡ï¼éååå­ä¹æ¯ç¸åçï¼é£ä¹å°±ä¼åºæ¥ä¸é¢è¿ç§æåµ\n\næé£ä¹å¤çèæ¬éåï¼å¯¹äºæè¿ç§å¼ºè¿«ççäººæ¥è¯´ï¼ççå°±è»æ­ªï¼æä»¥å¯ä»¥ä½¿ç¨ä¸é¢çå½ä»¤æ¸é¤è¿äºèæ¬éå\n\ndocker rmi $(docker images -q -f dangling=true)\n\n\n\n# CentOS/RHEL çç¨æ·éè¦æ³¨æçäºé¡¹\n\nå¨ Ubuntu/Debian ä¸æ UnionFS å¯ä»¥ä½¿ç¨ï¼å¦ aufs æè overlay2ï¼è CentOS å RHEL çåæ ¸ä¸­æ²¡æç¸å³é©±å¨ãå æ­¤å¯¹äºè¿ç±»ç³»ç»ï¼ä¸è¬ä½¿ç¨ devicemapper é©±å¨å©ç¨ LVM çä¸äºæºå¶æ¥æ¨¡æåå±å­å¨ãè¿æ ·çåæ³é¤äºæ§è½æ¯è¾å·®å¤ï¼ç¨³å®æ§ä¸è¬ä¹ä¸å¥½ï¼èä¸éç½®ç¸å¯¹å¤æãDocker å®è£å¨ CentOS/RHEL ä¸åï¼ä¼é»è®¤éæ© devicemapperï¼ä½æ¯ä¸ºäºç®åéç½®ï¼å¶ devicemapper æ¯è·å¨ä¸ä¸ªç¨çæä»¶æ¨¡æçåè®¾å¤ä¸ï¼ä¹è¢«ç§°ä¸º loop-lvmãè¿æ ·çéæ©æ¯å ä¸ºä¸éè¦é¢å¤éç½®å°±å¯ä»¥è¿è¡ Dockerï¼è¿æ¯èªå¨éç½®å¯ä¸è½åå°çäºæãä½æ¯ loop-lvm çåæ³éå¸¸ä¸å¥½ï¼å¶ç¨³å®æ§ãæ§è½æ´å·®ï¼æ è®ºæ¯æ¥å¿è¿æ¯ docker info ä¸­é½ä¼çå°è­¦åä¿¡æ¯ãå®æ¹ææ¡£ææç¡®çæç« è®²è§£äºå¦ä½éç½®åè®¾å¤ç» devicemapper é©±å¨åå­å¨å±çåæ³ï¼è¿ç±»åæ³ä¹è¢«ç§°ä¸ºéç½® direct-lvmã\n\né¤äºåé¢è¯´å°çé®é¢å¤ï¼devicemapper + loop-lvm è¿æä¸ä¸ªç¼ºé·ï¼å ä¸ºå®æ¯ç¨çæä»¶ï¼æä»¥å®ä¼ä¸æ­å¢é¿ãç¨æ·å¨ä½¿ç¨è¿ç¨ä¸­ä¼æ³¨æå° /var/lib/docker/devicemapper/devicemapper/data ä¸æ­å¢é¿ï¼èä¸æ æ³æ§å¶ãå¾å¤äººä¼å¸æå é¤éåæèå¯ä»¥è§£å³è¿ä¸ªé®é¢ï¼ç»æåç°ææå¹¶ä¸ææ¾ãåå å°±æ¯è¿ä¸ªç¨çæä»¶çç©ºé´éæ¾ååºæ¬ä¸è¿è¡åå¾åæ¶çé®é¢ãå æ­¤å¾å¾ä¼åºç°å³ä½¿å é¤äºæä»¶åå®¹ï¼ç©ºé´å´æ æ³åæ¶ï¼éçä½¿ç¨è¿ä¸ªç¨çæä»¶ä¸ç´å¨ä¸æ­å¢é¿ã\n\næä»¥å¯¹äº CentOS/RHEL çç¨æ·æ¥è¯´ï¼å¨æ²¡æåæ³ä½¿ç¨ UnionFS çæåµä¸ï¼ä¸å®è¦éç½® direct-lvm ç» devicemapperï¼æ è®ºæ¯ä¸ºäºæ§è½ãç¨³å®æ§è¿æ¯ç©ºé´å©ç¨çã\n\næè®¸æäººæ³¨æå°äº CentOS 7 ä¸­å­å¨è¢« backports åæ¥ç overlay é©±å¨ï¼ä¸è¿ CentOS éçè¿ä¸ªé©±å¨è¾¾ä¸å°çäº§ç¯å¢ä½¿ç¨çç¨³å®ç¨åº¦ï¼æä»¥ä¸æ¨èä½¿ç¨ã",normalizedContent:"# docker å é¤æ¬å°éå\n\nå¦æè¦å é¤æ¬å°çéåï¼å¯ä»¥ä½¿ç¨ docker image rm å½ä»¤ï¼å¶æ ¼å¼ä¸ºï¼\n\ndocker image rm [éé¡¹] <éå1> [<éå2> ...]\n\n\n\n# ç¨ idãéååãæè¦å é¤éå\n\nå¶ä¸­ï¼<éå> å¯ä»¥æ¯ éåç­ idãéåé¿ idãéåå æè éåæè¦ã\n\næ¯å¦æä»¬æè¿ä¹ä¸äºéåï¼\n\ndocker image ls\nrepository                  tag                 image id            created             size\ncentos                      latest              0584b3d2cf6d        3 weeks ago         196.5 mb\nredis                       alpine              501ad78535f0        3 weeks ago         21.03 mb\ndocker                      latest              cf693ec9b5c7        3 weeks ago         105.1 mb\nnginx                       latest              e43d811ce2f4        5 weeks ago         181.5 mb\n\n\næä»¬å¯ä»¥ç¨éåçå®æ´ idï¼ä¹ç§°ä¸º é¿ idï¼æ¥å é¤éåãä½¿ç¨èæ¬çæ¶åå¯è½ä¼ç¨é¿ idï¼ä½æ¯äººå·¥è¾å¥å°±å¤ªç´¯äºï¼æä»¥æ´å¤çæ¶åæ¯ç¨ ç­ id æ¥å é¤éåãdocker image ls é»è®¤ååºçå°±å·²ç»æ¯ç­ id äºï¼ä¸è¬åå3ä¸ªå­ç¬¦ä»¥ä¸ï¼åªè¦è¶³å¤åºåäºå«çéåå°±å¯ä»¥äºã\n\næ¯å¦è¿éï¼å¦ææä»¬è¦å é¤ redis:alpine éåï¼å¯ä»¥æ§è¡ï¼\n\ndocker image rm 501\nuntagged: redis:alpine\nuntagged: redis@sha256:f1ed3708f538b537eb9c2a7dd50dc90a706f7debd7e1196c9264edeea521a86d\ndeleted: sha256:501ad78535f015d88872e13fa87a828425117e3d28075d0c117932b05bf189b7\ndeleted: sha256:96167737e29ca8e9d74982ef2a0dda76ed7b430da55e321c071f0dbff8c2899b\ndeleted: sha256:32770d1dcf835f192cafd6b9263b7b597a1778a403a109e2cc2ee866f74adf23\ndeleted: sha256:127227698ad74a5846ff5153475e03439d96d4b1c7f2a449c7a826ef74a2d2fa\ndeleted: sha256:1333ecc582459bac54e1437335c0816bc17634e131ea0cc48daa27d32c75eab3\ndeleted: sha256:4fc455b921edf9c4aea207c51ab39b10b06540c8b4825ba57b3feed1668fa7c7\n\n\næä»¬ä¹å¯ä»¥ç¨éååï¼ä¹å°±æ¯ <ä»åºå>:<æ ç­¾>ï¼æ¥å é¤éåã\n\ndocker image rm centos\nuntagged: centos:latest\nuntagged: centos@sha256:b2f9d1c0ff5f87a4743104d099a3d561002ac500db1b9bfa02a783a46e0d366c\ndeleted: sha256:0584b3d2cf6d235ee310cf14b54667d889887b838d3f3d3033acd70fc3c48b8a\ndeleted: sha256:97ca462ad9eeae25941546209454496e1d66749d53dfa2ee32bf1faabd239d38\n\n\nå½ç¶ï¼æ´ç²¾ç¡®çæ¯ä½¿ç¨ éåæè¦ å é¤éåã\n\ndocker image ls --digests\nrepository                  tag                 digest                                                                    image id            created             size\nnode                        slim                sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228   6e0c4c8e3913        3 weeks ago         214 mb\n\ndocker image rm node@sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228\nuntagged: node@sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228\n\n\n\n# untagged å deleted\n\nå¦æè§å¯ä¸é¢è¿å ä¸ªå½ä»¤çè¿è¡è¾åºä¿¡æ¯çè¯ï¼ä½ ä¼æ³¨æå°å é¤è¡ä¸ºåä¸ºä¸¤ç±»ï¼ä¸ç±»æ¯ untaggedï¼å¦ä¸ç±»æ¯ deletedãæä»¬ä¹åä»ç»è¿ï¼éåçå¯ä¸æ è¯æ¯å¶ id åæè¦ï¼èä¸ä¸ªéåå¯ä»¥æå¤ä¸ªæ ç­¾ã\n\nå æ­¤å½æä»¬ä½¿ç¨ä¸é¢å½ä»¤å é¤éåçæ¶åï¼å®éä¸æ¯å¨è¦æ±å é¤æä¸ªæ ç­¾çéåãæä»¥é¦åéè¦åçæ¯å°æ»¡è¶³æä»¬è¦æ±çææéåæ ç­¾é½åæ¶ï¼è¿å°±æ¯æä»¬çå°ç untagged çä¿¡æ¯ãå ä¸ºä¸ä¸ªéåå¯ä»¥å¯¹åºå¤ä¸ªæ ç­¾ï¼å æ­¤å½æä»¬å é¤äºææå®çæ ç­¾åï¼å¯è½è¿æå«çæ ç­¾æåäºè¿ä¸ªéåï¼å¦ææ¯è¿ç§æåµï¼é£ä¹ delete è¡ä¸ºå°±ä¸ä¼åçãæä»¥å¹¶éææç docker image rm é½ä¼äº§çå é¤éåçè¡ä¸ºï¼æå¯è½ä»ä»æ¯åæ¶äºæä¸ªæ ç­¾èå·²ã\n\nå½è¯¥éåææçæ ç­¾é½è¢«åæ¶äºï¼è¯¥éåå¾å¯è½ä¼å¤±å»äºå­å¨çæä¹ï¼å æ­¤ä¼è§¦åå é¤è¡ä¸ºãéåæ¯å¤å±å­å¨ç»æï¼å æ­¤å¨å é¤çæ¶åä¹æ¯ä»ä¸å±ååºç¡å±æ¹åä¾æ¬¡è¿è¡å¤æ­å é¤ãéåçå¤å±ç»æè®©éåå¤ç¨åå¨éå¸¸å®¹æï¼å æ­¤å¾æå¯è½æä¸ªå¶å®éåæ­£ä¾èµäºå½åéåçæä¸å±ãè¿ç§æåµï¼ä¾æ§ä¸ä¼è§¦åå é¤è¯¥å±çè¡ä¸ºãç´å°æ²¡æä»»ä½å±ä¾èµå½åå±æ¶ï¼æä¼çå®çå é¤å½åå±ãè¿å°±æ¯ä¸ºä»ä¹ï¼ææ¶åä¼å¥æªï¼ä¸ºä»ä¹æææ²¡æå«çæ ç­¾æåè¿ä¸ªéåï¼ä½æ¯å®è¿æ¯å­å¨çåå ï¼ä¹æ¯ä¸ºä»ä¹ææ¶åä¼åç°æå é¤çå±æ°åèªå·± docker pull çå°çå±æ°ä¸ä¸æ ·çæºã\n\né¤äºéåä¾èµä»¥å¤ï¼è¿éè¦æ³¨æçæ¯å®¹å¨å¯¹éåçä¾èµãå¦ææç¨è¿ä¸ªéåå¯å¨çå®¹å¨å­å¨ï¼å³ä½¿å®¹å¨æ²¡æè¿è¡ï¼ï¼é£ä¹åæ ·ä¸å¯ä»¥å é¤è¿ä¸ªéåãä¹åè®²è¿ï¼å®¹å¨æ¯ä»¥éåä¸ºåºç¡ï¼åå ä¸å±å®¹å¨å­å¨å±ï¼ç»æè¿æ ·çå¤å±å­å¨ç»æå»è¿è¡çãå æ­¤è¯¥éåå¦æè¢«è¿ä¸ªå®¹å¨æä¾èµçï¼é£ä¹å é¤å¿ç¶ä¼å¯¼è´æéãå¦æè¿äºå®¹å¨æ¯ä¸éè¦çï¼åºè¯¥åå°å®ä»¬å é¤ï¼ç¶ååæ¥å é¤éåã\n\n\n# ç¨ docker image ls å½ä»¤æ¥éå\n\nåå¶å®å¯ä»¥æ¿æ¥å¤ä¸ªå®ä½çå½ä»¤ä¸æ ·ï¼å¯ä»¥ä½¿ç¨ docker image ls -q æ¥éåä½¿ç¨ docker image rmï¼è¿æ ·å¯ä»¥ææ¹çå é¤å¸æå é¤çéåãæä»¬å¨âéååè¡¨âç« èä»ç»è¿å¾å¤è¿æ»¤éååè¡¨çæ¹å¼é½å¯ä»¥æ¿è¿æ¥ä½¿ç¨ã\n\næ¯å¦ï¼æä»¬éè¦å é¤ææä»åºåä¸º redis çéåï¼\n\ndocker image rm $(docker image ls -q redis)\n\n\næèå é¤ææå¨ mongo:3.2 ä¹åçéåï¼\n\ndocker image rm $(docker image ls -q -f before=mongo:3.2)\n\n\nååå©ç¨ä½ çæ³è±¡åå linux å½ä»¤è¡çå¼ºå¤§ï¼ä½ å¯ä»¥å®æå¾å¤éå¸¸èµçåè½ã\n\n\n# docker æ¹éå é¤èæ¬éå\n\nå¨æä»¬æå»ºéåçè¿ç¨ä¸­ï¼å¸¸å¸¸éè¦ä½¿ç¨buildå½ä»¤æ ¹æ®dockerfileè¿è¡æå»ºéåï¼å¹¶ä¸ä¼buildå¾å¤æ¬¡ï¼éååå­ä¹æ¯ç¸åçï¼é£ä¹å°±ä¼åºæ¥ä¸é¢è¿ç§æåµ\n\næé£ä¹å¤çèæ¬éåï¼å¯¹äºæè¿ç§å¼ºè¿«ççäººæ¥è¯´ï¼ççå°±è»æ­ªï¼æä»¥å¯ä»¥ä½¿ç¨ä¸é¢çå½ä»¤æ¸é¤è¿äºèæ¬éå\n\ndocker rmi $(docker images -q -f dangling=true)\n\n\n\n# centos/rhel çç¨æ·éè¦æ³¨æçäºé¡¹\n\nå¨ ubuntu/debian ä¸æ unionfs å¯ä»¥ä½¿ç¨ï¼å¦ aufs æè overlay2ï¼è centos å rhel çåæ ¸ä¸­æ²¡æç¸å³é©±å¨ãå æ­¤å¯¹äºè¿ç±»ç³»ç»ï¼ä¸è¬ä½¿ç¨ devicemapper é©±å¨å©ç¨ lvm çä¸äºæºå¶æ¥æ¨¡æåå±å­å¨ãè¿æ ·çåæ³é¤äºæ§è½æ¯è¾å·®å¤ï¼ç¨³å®æ§ä¸è¬ä¹ä¸å¥½ï¼èä¸éç½®ç¸å¯¹å¤æãdocker å®è£å¨ centos/rhel ä¸åï¼ä¼é»è®¤éæ© devicemapperï¼ä½æ¯ä¸ºäºç®åéç½®ï¼å¶ devicemapper æ¯è·å¨ä¸ä¸ªç¨çæä»¶æ¨¡æçåè®¾å¤ä¸ï¼ä¹è¢«ç§°ä¸º loop-lvmãè¿æ ·çéæ©æ¯å ä¸ºä¸éè¦é¢å¤éç½®å°±å¯ä»¥è¿è¡ dockerï¼è¿æ¯èªå¨éç½®å¯ä¸è½åå°çäºæãä½æ¯ loop-lvm çåæ³éå¸¸ä¸å¥½ï¼å¶ç¨³å®æ§ãæ§è½æ´å·®ï¼æ è®ºæ¯æ¥å¿è¿æ¯ docker info ä¸­é½ä¼çå°è­¦åä¿¡æ¯ãå®æ¹ææ¡£ææç¡®çæç« è®²è§£äºå¦ä½éç½®åè®¾å¤ç» devicemapper é©±å¨åå­å¨å±çåæ³ï¼è¿ç±»åæ³ä¹è¢«ç§°ä¸ºéç½® direct-lvmã\n\né¤äºåé¢è¯´å°çé®é¢å¤ï¼devicemapper + loop-lvm è¿æä¸ä¸ªç¼ºé·ï¼å ä¸ºå®æ¯ç¨çæä»¶ï¼æä»¥å®ä¼ä¸æ­å¢é¿ãç¨æ·å¨ä½¿ç¨è¿ç¨ä¸­ä¼æ³¨æå° /var/lib/docker/devicemapper/devicemapper/data ä¸æ­å¢é¿ï¼èä¸æ æ³æ§å¶ãå¾å¤äººä¼å¸æå é¤éåæèå¯ä»¥è§£å³è¿ä¸ªé®é¢ï¼ç»æåç°ææå¹¶ä¸ææ¾ãåå å°±æ¯è¿ä¸ªç¨çæä»¶çç©ºé´éæ¾ååºæ¬ä¸è¿è¡åå¾åæ¶çé®é¢ãå æ­¤å¾å¾ä¼åºç°å³ä½¿å é¤äºæä»¶åå®¹ï¼ç©ºé´å´æ æ³åæ¶ï¼éçä½¿ç¨è¿ä¸ªç¨çæä»¶ä¸ç´å¨ä¸æ­å¢é¿ã\n\næä»¥å¯¹äº centos/rhel çç¨æ·æ¥è¯´ï¼å¨æ²¡æåæ³ä½¿ç¨ unionfs çæåµä¸ï¼ä¸å®è¦éç½® direct-lvm ç» devicemapperï¼æ è®ºæ¯ä¸ºäºæ§è½ãç¨³å®æ§è¿æ¯ç©ºé´å©ç¨çã\n\næè®¸æäººæ³¨æå°äº centos 7 ä¸­å­å¨è¢« backports åæ¥ç overlay é©±å¨ï¼ä¸è¿ centos éçè¿ä¸ªé©±å¨è¾¾ä¸å°çäº§ç¯å¢ä½¿ç¨çç¨³å®ç¨åº¦ï¼æä»¥ä¸æ¨èä½¿ç¨ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker éåå¯¼å¥å¯¼åº",frontmatter:{title:"Docker éåå¯¼å¥å¯¼åº",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/79f5f4/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/05.Docker%20%E9%95%9C%E5%83%8F%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA.html",relativePath:"17.Docker/04.Docker éå/05.Docker éåå¯¼å¥å¯¼åº.md",key:"v-74089f43",path:"/pages/79f5f4/",headers:[{level:2,title:"å¯¼å¥å¯¼åºå½ä»¤ä»ç»",slug:"å¯¼å¥å¯¼åºå½ä»¤ä»ç»",normalizedTitle:"å¯¼å¥å¯¼åºå½ä»¤ä»ç»",charIndex:102},{level:3,title:"save",slug:"save",normalizedTitle:"save",charIndex:132},{level:3,title:"load",slug:"load",normalizedTitle:"load",charIndex:137},{level:3,title:"export",slug:"export",normalizedTitle:"export",charIndex:118},{level:3,title:"import",slug:"import",normalizedTitle:"import",charIndex:125},{level:2,title:"åºå«",slug:"åºå«",normalizedTitle:"åºå«",charIndex:2168},{level:2,title:"å»ºè®®",slug:"å»ºè®®",normalizedTitle:"å»ºè®®",charIndex:4696}],headersStr:"å¯¼å¥å¯¼åºå½ä»¤ä»ç» save load export import åºå« å»ºè®®",content:'# Docker éåå¯¼å¥å¯¼åº\n\næ¬æä»ç»Dockeréåçå¯¼å¥å¯¼åºï¼ç¨äºè¿ç§»ãå¤ä»½ãåçº§ç­åºæ¯ï¼åå¤ç¯å¢å¦ä¸ï¼\n\n * Ubuntu 18.04.5 LTS\n * Docker 19.03.8\n\n\n# å¯¼å¥å¯¼åºå½ä»¤ä»ç»\n\næ¶åçå½ä»¤æexportãimportãsaveãload\n\n\n# save\n\n * å½ä»¤ docker save [options] images [images...]\n   \n   docker save --help\n   \n   Usage:  docker save [OPTIONS] IMAGE [IMAGE...]\n   \n   Save one or more images to a tar archive (streamed to STDOUT by default)\n   \n   Options:\n     -o, --output string   Write to a file, instead of STDOUT\n   \n\n * ç¤ºä¾ docker save -o nginx.tar nginx:latest æ docker save > nginx.tar nginx:latest å¶ä¸­-oå>è¡¨ç¤ºè¾åºå°æä»¶ï¼nginx.tarä¸ºç®æ æä»¶ï¼nginx:latestæ¯æºéååï¼name:tagï¼\n\n\n# load\n\n * å½ä»¤ docker load [options]\n   \n   docker load --help\n   \n   Usage:  docker load [OPTIONS]\n   \n   Load an image from a tar archive or STDIN\n   \n   Options:\n     -i, --input string   Read from tar archive file, instead of STDIN\n     -q, --quiet          Suppress the load output\n   \n\n * ç¤ºä¾ docker load -i nginx.tar æ docker load < nginx.tar å¶ä¸­-iå<è¡¨ç¤ºä»æä»¶è¾å¥ãä¼æåå¯¼å¥éååç¸å³åæ°æ®ï¼åæ¬tagä¿¡æ¯\n\n\n# export\n\n * å½ä»¤ docker export [options] container\n   \n   docker load --help\n   \n   Usage:  docker load [OPTIONS]\n   \n   Load an image from a tar archive or STDIN\n   \n   Options:\n     -i, --input string   Read from tar archive file, instead of STDIN\n     -q, --quiet          Suppress the load output\n   docker export --help\n   \n   Usage:  docker export [OPTIONS] CONTAINER\n   \n   Export a container\'s filesystem as a tar archive\n   \n   Options:\n     -o, --output string   Write to a file, instead of STDOUT\n   \n\n * ç¤ºä¾ docker export -o nginx-test.tar nginx-test å¶ä¸­-oè¡¨ç¤ºè¾åºå°æä»¶ï¼nginx-test.tarä¸ºç®æ æä»¶ï¼nginx-testæ¯æºå®¹å¨åï¼nameï¼\n\n\n# import\n\n * å½ä»¤ docker import [options] file|URL|- [REPOSITORY[:TAG]]\n   \n   docker import --help\n   \n   Usage:  docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]\n   \n   Import the contents from a tarball to create a filesystem image\n   \n   Options:\n     -c, --change list       Apply Dockerfile instruction to the created image\n     -m, --message string    Set commit message for imported image\n         --platform string   Set platform if server is multi-platform capable\n   \n\n * ç¤ºä¾ docker import nginx-test.tar nginx:imp æ cat nginx-test.tar | docker import - nginx:imp\n\n\n# åºå«\n\n * exportå½ä»¤å¯¼åºçtaræä»¶ç¥å°äºsaveå½ä»¤å¯¼åºç\n   \n   ll -al\n   total 802252\n   drwxrwxr-x 2 heyuqiang heyuqiang      4096 Aug 22 14:50 ./\n   drwxrwxr-x 4 heyuqiang heyuqiang      4096 Aug 22 14:06 ../\n   -rw------- 1 heyuqiang heyuqiang 136842240 Aug 22 14:45 nginx.tar\n   -rw------- 1 heyuqiang heyuqiang 135116800 Aug 22 14:50 nginx-test.tar\n   \n\n * exportå½ä»¤æ¯ä»å®¹å¨ï¼containerï¼ä¸­å¯¼åºtaræä»¶ï¼èsaveå½ä»¤åæ¯ä»éåï¼imagesï¼ä¸­å¯¼åº\n * åºäºç¬¬äºç¹ï¼exportå¯¼åºçæä»¶åimportåå»æ¶ï¼æ æ³ä¿çéåææåå²ï¼å³æ¯ä¸å±layerä¿¡æ¯ï¼ä¸çæçå¯ä»¥å»çDockerfileï¼ï¼ä¸è½è¿è¡åæ»æä½ï¼èsaveæ¯ä¾æ®éåæ¥çï¼æä»¥å¯¼å¥æ¶å¯ä»¥å®æ´ä¿çä¸æ¯ä¸å±layerä¿¡æ¯ãå¦ä¸å¾æç¤ºï¼nginx:latestæ¯saveå¯¼åºloadå¯¼å¥çï¼nginx:impæ¯exportå¯¼åºimportå¯¼å¥çã\n   \n   docker history nginx:latest \n   IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\n   4bb46517cac3        8 days ago          /bin/sh -c #(nop)  CMD ["nginx" "-g" "daemonâ¦   0B                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  STOPSIGNAL SIGTERM           0B                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  EXPOSE 80                    0B                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  ENTRYPOINT ["/docker-entrâ¦   0B                  \n   <missing>           8 days ago          /bin/sh -c #(nop) COPY file:0fd5fca330dcd6a7â¦   1.04kB              \n   <missing>           8 days ago          /bin/sh -c #(nop) COPY file:1d0a4127e78a26c1â¦   1.96kB              \n   <missing>           8 days ago          /bin/sh -c #(nop) COPY file:e7e183879c35719câ¦   1.2kB               \n   <missing>           8 days ago          /bin/sh -c set -x     && addgroup --system -â¦   63.4MB              \n   <missing>           8 days ago          /bin/sh -c #(nop)  ENV PKG_RELEASE=1~buster     0B                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  ENV NJS_VERSION=0.4.3        0B                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  ENV NGINX_VERSION=1.19.2     0B                  \n   <missing>           2 weeks ago         /bin/sh -c #(nop)  LABEL maintainer=NGINX Doâ¦   0B                  \n   <missing>           2 weeks ago         /bin/sh -c #(nop)  CMD ["bash"]                 0B                  \n   <missing>           2 weeks ago         /bin/sh -c #(nop) ADD file:3af3091e7d2bb40bcâ¦   69.2MB              \n   docker history nginx:imp\n   IMAGE               CREATED             CREATED BY          SIZE                COMMENT\n   b6a847fedf23        47 seconds ago                          131MB               Imported from -\n   \n\n\n# å»ºè®®\n\nå¯ä»¥ä¾æ®å·ä½ä½¿ç¨åºæ¯æ¥éæ©å½ä»¤\n\n * è¥æ¯åªæ³å¤ä»½imagesï¼ä½¿ç¨saveãloadå³å¯\n * è¥æ¯å¨å¯å¨å®¹å¨åï¼å®¹å¨åå®¹æååï¼éè¦å¤ä»½ï¼åä½¿ç¨exportãimport',normalizedContent:'# docker éåå¯¼å¥å¯¼åº\n\næ¬æä»ç»dockeréåçå¯¼å¥å¯¼åºï¼ç¨äºè¿ç§»ãå¤ä»½ãåçº§ç­åºæ¯ï¼åå¤ç¯å¢å¦ä¸ï¼\n\n * ubuntu 18.04.5 lts\n * docker 19.03.8\n\n\n# å¯¼å¥å¯¼åºå½ä»¤ä»ç»\n\næ¶åçå½ä»¤æexportãimportãsaveãload\n\n\n# save\n\n * å½ä»¤ docker save [options] images [images...]\n   \n   docker save --help\n   \n   usage:  docker save [options] image [image...]\n   \n   save one or more images to a tar archive (streamed to stdout by default)\n   \n   options:\n     -o, --output string   write to a file, instead of stdout\n   \n\n * ç¤ºä¾ docker save -o nginx.tar nginx:latest æ docker save > nginx.tar nginx:latest å¶ä¸­-oå>è¡¨ç¤ºè¾åºå°æä»¶ï¼nginx.tarä¸ºç®æ æä»¶ï¼nginx:latestæ¯æºéååï¼name:tagï¼\n\n\n# load\n\n * å½ä»¤ docker load [options]\n   \n   docker load --help\n   \n   usage:  docker load [options]\n   \n   load an image from a tar archive or stdin\n   \n   options:\n     -i, --input string   read from tar archive file, instead of stdin\n     -q, --quiet          suppress the load output\n   \n\n * ç¤ºä¾ docker load -i nginx.tar æ docker load < nginx.tar å¶ä¸­-iå<è¡¨ç¤ºä»æä»¶è¾å¥ãä¼æåå¯¼å¥éååç¸å³åæ°æ®ï¼åæ¬tagä¿¡æ¯\n\n\n# export\n\n * å½ä»¤ docker export [options] container\n   \n   docker load --help\n   \n   usage:  docker load [options]\n   \n   load an image from a tar archive or stdin\n   \n   options:\n     -i, --input string   read from tar archive file, instead of stdin\n     -q, --quiet          suppress the load output\n   docker export --help\n   \n   usage:  docker export [options] container\n   \n   export a container\'s filesystem as a tar archive\n   \n   options:\n     -o, --output string   write to a file, instead of stdout\n   \n\n * ç¤ºä¾ docker export -o nginx-test.tar nginx-test å¶ä¸­-oè¡¨ç¤ºè¾åºå°æä»¶ï¼nginx-test.tarä¸ºç®æ æä»¶ï¼nginx-testæ¯æºå®¹å¨åï¼nameï¼\n\n\n# import\n\n * å½ä»¤ docker import [options] file|url|- [repository[:tag]]\n   \n   docker import --help\n   \n   usage:  docker import [options] file|url|- [repository[:tag]]\n   \n   import the contents from a tarball to create a filesystem image\n   \n   options:\n     -c, --change list       apply dockerfile instruction to the created image\n     -m, --message string    set commit message for imported image\n         --platform string   set platform if server is multi-platform capable\n   \n\n * ç¤ºä¾ docker import nginx-test.tar nginx:imp æ cat nginx-test.tar | docker import - nginx:imp\n\n\n# åºå«\n\n * exportå½ä»¤å¯¼åºçtaræä»¶ç¥å°äºsaveå½ä»¤å¯¼åºç\n   \n   ll -al\n   total 802252\n   drwxrwxr-x 2 heyuqiang heyuqiang      4096 aug 22 14:50 ./\n   drwxrwxr-x 4 heyuqiang heyuqiang      4096 aug 22 14:06 ../\n   -rw------- 1 heyuqiang heyuqiang 136842240 aug 22 14:45 nginx.tar\n   -rw------- 1 heyuqiang heyuqiang 135116800 aug 22 14:50 nginx-test.tar\n   \n\n * exportå½ä»¤æ¯ä»å®¹å¨ï¼containerï¼ä¸­å¯¼åºtaræä»¶ï¼èsaveå½ä»¤åæ¯ä»éåï¼imagesï¼ä¸­å¯¼åº\n * åºäºç¬¬äºç¹ï¼exportå¯¼åºçæä»¶åimportåå»æ¶ï¼æ æ³ä¿çéåææåå²ï¼å³æ¯ä¸å±layerä¿¡æ¯ï¼ä¸çæçå¯ä»¥å»çdockerfileï¼ï¼ä¸è½è¿è¡åæ»æä½ï¼èsaveæ¯ä¾æ®éåæ¥çï¼æä»¥å¯¼å¥æ¶å¯ä»¥å®æ´ä¿çä¸æ¯ä¸å±layerä¿¡æ¯ãå¦ä¸å¾æç¤ºï¼nginx:latestæ¯saveå¯¼åºloadå¯¼å¥çï¼nginx:impæ¯exportå¯¼åºimportå¯¼å¥çã\n   \n   docker history nginx:latest \n   image               created             created by                                      size                comment\n   4bb46517cac3        8 days ago          /bin/sh -c #(nop)  cmd ["nginx" "-g" "daemonâ¦   0b                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  stopsignal sigterm           0b                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  expose 80                    0b                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  entrypoint ["/docker-entrâ¦   0b                  \n   <missing>           8 days ago          /bin/sh -c #(nop) copy file:0fd5fca330dcd6a7â¦   1.04kb              \n   <missing>           8 days ago          /bin/sh -c #(nop) copy file:1d0a4127e78a26c1â¦   1.96kb              \n   <missing>           8 days ago          /bin/sh -c #(nop) copy file:e7e183879c35719câ¦   1.2kb               \n   <missing>           8 days ago          /bin/sh -c set -x     && addgroup --system -â¦   63.4mb              \n   <missing>           8 days ago          /bin/sh -c #(nop)  env pkg_release=1~buster     0b                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  env njs_version=0.4.3        0b                  \n   <missing>           8 days ago          /bin/sh -c #(nop)  env nginx_version=1.19.2     0b                  \n   <missing>           2 weeks ago         /bin/sh -c #(nop)  label maintainer=nginx doâ¦   0b                  \n   <missing>           2 weeks ago         /bin/sh -c #(nop)  cmd ["bash"]                 0b                  \n   <missing>           2 weeks ago         /bin/sh -c #(nop) add file:3af3091e7d2bb40bcâ¦   69.2mb              \n   docker history nginx:imp\n   image               created             created by          size                comment\n   b6a847fedf23        47 seconds ago                          131mb               imported from -\n   \n\n\n# å»ºè®®\n\nå¯ä»¥ä¾æ®å·ä½ä½¿ç¨åºæ¯æ¥éæ©å½ä»¤\n\n * è¥æ¯åªæ³å¤ä»½imagesï¼ä½¿ç¨saveãloadå³å¯\n * è¥æ¯å¨å¯å¨å®¹å¨åï¼å®¹å¨åå®¹æååï¼éè¦å¤ä»½ï¼åä½¿ç¨exportãimport',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"å©ç¨ commit çè§£éåææ",frontmatter:{title:"å©ç¨ commit çè§£éåææ",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/134f38/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/06.%E5%88%A9%E7%94%A8%20commit%20%E7%90%86%E8%A7%A3%E9%95%9C%E5%83%8F%E6%9E%84%E6%88%90.html",relativePath:"17.Docker/04.Docker éå/06.å©ç¨ commit çè§£éåææ.md",key:"v-16c13813",path:"/pages/134f38/",headers:[{level:2,title:"æç¨ docker commit",slug:"æç¨-docker-commit",normalizedTitle:"æç¨ docker commit",charIndex:3876}],headersStr:"æç¨ docker commit",content:'# å©ç¨ commit çè§£éåææ\n\næ³¨æï¼ docker commit å½ä»¤é¤äºå­¦ä¹ ä¹å¤ï¼è¿æä¸äºç¹æ®çåºç¨åºåï¼æ¯å¦è¢«å¥ä¾µåä¿å­ç°åºç­ãä½æ¯ï¼ä¸è¦ä½¿ç¨ docker commit å®å¶éåï¼å®å¶éååºè¯¥ä½¿ç¨ Dockerfile æ¥å®æãå¦æä½ æ³è¦å®å¶éåè¯·æ¥çä¸ä¸å°èã\n\néåæ¯å®¹å¨çåºç¡ï¼æ¯æ¬¡æ§è¡ docker run çæ¶åé½ä¼æå®åªä¸ªéåä½ä¸ºå®¹å¨è¿è¡çåºç¡ãå¨ä¹åçä¾å­ä¸­ï¼æä»¬æä½¿ç¨çé½æ¯æ¥èªäº Docker Hub çéåãç´æ¥ä½¿ç¨è¿äºéåæ¯å¯ä»¥æ»¡è¶³ä¸å®çéæ±ï¼èå½è¿äºéåæ æ³ç´æ¥æ»¡è¶³éæ±æ¶ï¼æä»¬å°±éè¦å®å¶è¿äºéåãæ¥ä¸æ¥çå èå°±å°è®²è§£å¦ä½å®å¶éåã\n\nåé¡¾ä¸ä¸ä¹åæä»¬å­¦å°çç¥è¯ï¼éåæ¯å¤å±å­å¨ï¼æ¯ä¸å±æ¯å¨åä¸å±çåºç¡ä¸è¿è¡çä¿®æ¹ï¼èå®¹å¨åæ ·ä¹æ¯å¤å±å­å¨ï¼æ¯å¨ä»¥éåä¸ºåºç¡å±ï¼å¨å¶åºç¡ä¸å ä¸å±ä½ä¸ºå®¹å¨è¿è¡æ¶çå­å¨å±ã\n\nç°å¨è®©æä»¬ä»¥å®å¶ä¸ä¸ª Web æå¡å¨ä¸ºä¾å­ï¼æ¥è®²è§£éåæ¯å¦ä½æå»ºçã\n\ndocker run --name webserver -d -p 80:80 nginx\n\n\nè¿æ¡å½ä»¤ä¼ç¨ nginx éåå¯å¨ä¸ä¸ªå®¹å¨ï¼å½åä¸º webserverï¼å¹¶ä¸æ å°äº 80 ç«¯å£ï¼è¿æ ·æä»¬å¯ä»¥ç¨æµè§å¨å»è®¿é®è¿ä¸ª nginx æå¡å¨ã\n\nå¦ææ¯å¨ Linux æ¬æºè¿è¡ç Dockerï¼æèå¦æä½¿ç¨çæ¯ Docker for MacãDocker for Windowsï¼é£ä¹å¯ä»¥ç´æ¥è®¿é®ï¼http://localhostï¼å¦æä½¿ç¨çæ¯ Docker Toolboxï¼æèæ¯å¨èææºãäºæå¡å¨ä¸å®è£ç Dockerï¼åéè¦å° localhost æ¢ä¸ºèææºå°åæèå®éäºæå¡å¨å°åã\n\nç´æ¥ç¨æµè§å¨è®¿é®çè¯ï¼æä»¬ä¼çå°é»è®¤ç Nginx æ¬¢è¿é¡µé¢ã\n\n\n\nç°å¨ï¼åè®¾æä»¬éå¸¸ä¸åæ¬¢è¿ä¸ªæ¬¢è¿é¡µé¢ï¼æä»¬å¸ææ¹ææ¬¢è¿ Docker çæå­ï¼æä»¬å¯ä»¥ä½¿ç¨ docker exec å½ä»¤è¿å¥å®¹å¨ï¼ä¿®æ¹å¶åå®¹ã\n\ndocker exec -it webserver bash\nroot@3729b97e8226:/# echo \'<h1>Hello, Docker!</h1>\' > /usr/share/nginx/html/index.html\nroot@3729b97e8226:/# exit\nexit\n\n\næä»¬ä»¥äº¤äºå¼ç»ç«¯æ¹å¼è¿å¥ webserver å®¹å¨ï¼å¹¶æ§è¡äº bash å½ä»¤ï¼ä¹å°±æ¯è·å¾ä¸ä¸ªå¯æä½ç Shellã\n\nç¶åï¼æä»¬ç¨ Hello, Docker! è¦çäº /usr/share/nginx/html/index.html çåå®¹ã\n\nç°å¨æä»¬åå·æ°æµè§å¨çè¯ï¼ä¼åç°åå®¹è¢«æ¹åäºã\n\n\n\næä»¬ä¿®æ¹äºå®¹å¨çæä»¶ï¼ä¹å°±æ¯æ¹å¨äºå®¹å¨çå­å¨å±ãæä»¬å¯ä»¥éè¿ docker diff å½ä»¤çå°å·ä½çæ¹å¨ã\n\ndocker diff webserver\nC /root\nA /root/.bash_history\nC /run\nC /usr\nC /usr/share\nC /usr/share/nginx\nC /usr/share/nginx/html\nC /usr/share/nginx/html/index.html\nC /var\nC /var/cache\nC /var/cache/nginx\nA /var/cache/nginx/client_temp\nA /var/cache/nginx/fastcgi_temp\nA /var/cache/nginx/proxy_temp\nA /var/cache/nginx/scgi_temp\nA /var/cache/nginx/uwsgi_temp\n\n\nç°å¨æä»¬å®å¶å¥½äºååï¼æä»¬å¸æè½å°å¶ä¿å­ä¸æ¥å½¢æéåã\n\nè¦ç¥éï¼å½æä»¬è¿è¡ä¸ä¸ªå®¹å¨çæ¶åï¼å¦æä¸ä½¿ç¨å·çè¯ï¼ï¼æä»¬åçä»»ä½æä»¶ä¿®æ¹é½ä¼è¢«è®°å½äºå®¹å¨å­å¨å±éãè Docker æä¾äºä¸ä¸ª docker commit å½ä»¤ï¼å¯ä»¥å°å®¹å¨çå­å¨å±ä¿å­ä¸æ¥æä¸ºéåãæ¢å¥è¯è¯´ï¼å°±æ¯å¨åæéåçåºç¡ä¸ï¼åå å ä¸å®¹å¨çå­å¨å±ï¼å¹¶æææ°çéåãä»¥åæä»¬è¿è¡è¿ä¸ªæ°éåçæ¶åï¼å°±ä¼æ¥æåæå®¹å¨æåçæä»¶ååã\n\ndocker commit çè¯­æ³æ ¼å¼ä¸ºï¼\n\ndocker commit [éé¡¹] <å®¹å¨IDæå®¹å¨å> [<ä»åºå>[:<æ ç­¾>]]\n\n\næä»¬å¯ä»¥ç¨ä¸é¢çå½ä»¤å°å®¹å¨ä¿å­ä¸ºéåï¼\n\ndocker commit \\\n    --author "Tao Wang <twang2218@gmail.com>" \\\n    --message "ä¿®æ¹äºé»è®¤ç½é¡µ" \\\n    webserver \\\n    nginx:v2\nsha256:07e33465974800ce65751acc279adc6ed2dc5ed4e0838f8b86f0c87aa1795214\n\n\nå¶ä¸­ --author æ¯æå®ä¿®æ¹çä½èï¼è --message åæ¯è®°å½æ¬æ¬¡ä¿®æ¹çåå®¹ãè¿ç¹å git çæ¬æ§å¶ç¸ä¼¼ï¼ä¸è¿è¿éè¿äºä¿¡æ¯å¯ä»¥çç¥çç©ºã\n\næä»¬å¯ä»¥å¨ docker image ls ä¸­çå°è¿ä¸ªæ°å®å¶çéåï¼\n\ndocker image ls nginx\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nnginx               v2                  07e334659748        9 seconds ago       181.5 MB\nnginx               1.11                05a60462f8ba        12 days ago         181.5 MB\nnginx               latest              e43d811ce2f4        4 weeks ago         181.5 MB```\n\næä»¬è¿å¯ä»¥ç¨ `docker history` å·ä½æ¥çéååçåå²è®°å½ï¼å¦ææ¯è¾ `nginx:latest` çåå²è®°å½ï¼æä»¬ä¼åç°æ°å¢äºæä»¬ååæäº¤çè¿ä¸å±ã\n\n```bash\ndocker history nginx:v2\nIMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\n07e334659748        54 seconds ago      nginx -g daemon off;                            95 B                ä¿®æ¹äºé»è®¤ç½é¡µ\ne43d811ce2f4        4 weeks ago         /bin/sh -c #(nop)  CMD ["nginx" "-g" "daemon    0 B\n<missing>           4 weeks ago         /bin/sh -c #(nop)  EXPOSE 443/tcp 80/tcp        0 B\n<missing>           4 weeks ago         /bin/sh -c ln -sf /dev/stdout /var/log/nginx/   22 B\n<missing>           4 weeks ago         /bin/sh -c apt-key adv --keyserver hkp://pgp.   58.46 MB\n<missing>           4 weeks ago         /bin/sh -c #(nop)  ENV NGINX_VERSION=1.11.5-1   0 B\n<missing>           4 weeks ago         /bin/sh -c #(nop)  MAINTAINER NGINX Docker Ma   0 B\n<missing>           4 weeks ago         /bin/sh -c #(nop)  CMD ["/bin/bash"]            0 B\n<missing>           4 weeks ago         /bin/sh -c #(nop) ADD file:23aa4f893e3288698c   123 MB\n\n\næ°çéåå®å¶å¥½åï¼æä»¬å¯ä»¥æ¥è¿è¡è¿ä¸ªéåã\n\ndocker run --name web2 -d -p 81:80 nginx:v2\n\n\nè¿éæä»¬å½åä¸ºæ°çæå¡ä¸º web2ï¼å¹¶ä¸æ å°å° 81 ç«¯å£ãå¦ææ¯ Docker for Mac/Windows æ Linux æ¡é¢çè¯ï¼æä»¬å°±å¯ä»¥ç´æ¥è®¿é® http://localhost:81 çå°ç»æï¼å¶åå®¹åºè¯¥åä¹åä¿®æ¹åç webserver ä¸æ ·ã\n\nè³æ­¤ï¼æä»¬ç¬¬ä¸æ¬¡å®æäºå®å¶éåï¼ä½¿ç¨çæ¯ docker commit å½ä»¤ï¼æå¨æä½ç»æ§çéåæ·»å äºæ°çä¸å±ï¼å½¢ææ°çéåï¼å¯¹éåå¤å±å­å¨åºè¯¥æäºæ´ç´è§çæè§ã\n\n\n# æç¨ docker commit\n\nä½¿ç¨ docker commit å½ä»¤è½ç¶å¯ä»¥æ¯è¾ç´è§çå¸®å©çè§£éååå±å­å¨çæ¦å¿µï¼ä½æ¯å®éç¯å¢ä¸­å¹¶ä¸ä¼è¿æ ·ä½¿ç¨ã\n\né¦åï¼å¦æä»ç»è§å¯ä¹åç docker diff webserver çç»æï¼ä½ ä¼åç°é¤äºçæ­£æ³è¦ä¿®æ¹ç /usr/share/nginx/html/index.html æä»¶å¤ï¼ç±äºå½ä»¤çæ§è¡ï¼è¿æå¾å¤æä»¶è¢«æ¹å¨ææ·»å äºãè¿è¿ä»ä»æ¯æç®åçæä½ï¼å¦ææ¯å®è£è½¯ä»¶åãç¼è¯æå»ºï¼é£ä¼æå¤§éçæ å³åå®¹è¢«æ·»å è¿æ¥ï¼å¦æä¸å°å¿æ¸çï¼å°ä¼å¯¼è´éåæä¸ºèè¿ã\n\næ­¤å¤ï¼ä½¿ç¨ docker commit æå³çææå¯¹éåçæä½é½æ¯é»ç®±æä½ï¼çæçéåä¹è¢«ç§°ä¸ºé»ç®±éåï¼æ¢å¥è¯è¯´ï¼å°±æ¯é¤äºå¶ä½éåçäººç¥éæ§è¡è¿ä»ä¹å½ä»¤ãæä¹çæçéåï¼å«äººæ ¹æ¬æ ä»å¾ç¥ãèä¸ï¼å³ä½¿æ¯è¿ä¸ªå¶ä½éåçäººï¼è¿ä¸æ®µæ¶é´åä¹æ æ³è®°æ¸å·ä½å¨æä½çãè½ç¶ docker diff æè®¸å¯ä»¥åè¯å¾å°ä¸äºçº¿ç´¢ï¼ä½æ¯è¿è¿ä¸å°å¯ä»¥ç¡®ä¿çæä¸è´éåçå°æ­¥ãè¿ç§é»ç®±éåçç»´æ¤å·¥ä½æ¯éå¸¸çè¦çã\n\nèä¸ï¼åé¡¾ä¹åæåçéåæä½¿ç¨çåå±å­å¨çæ¦å¿µï¼é¤å½åå±å¤ï¼ä¹åçæ¯ä¸å±é½æ¯ä¸ä¼åçæ¹åçï¼æ¢å¥è¯è¯´ï¼ä»»ä½ä¿®æ¹çç»æä»ä»æ¯å¨å½åå±è¿è¡æ è®°ãæ·»å ãä¿®æ¹ï¼èä¸ä¼æ¹å¨ä¸ä¸å±ãå¦æä½¿ç¨ docker commit å¶ä½éåï¼ä»¥ååæä¿®æ¹çè¯ï¼æ¯ä¸æ¬¡ä¿®æ¹é½ä¼è®©éåæ´å èè¿ä¸æ¬¡ï¼æå é¤çä¸ä¸å±çä¸è¥¿å¹¶ä¸ä¼ä¸¢å¤±ï¼ä¼ä¸ç´å¦å½±éå½¢çè·çè¿ä¸ªéåï¼å³ä½¿æ ¹æ¬æ æ³è®¿é®å°ãè¿ä¼è®©éåæ´å èè¿ã',normalizedContent:'# å©ç¨ commit çè§£éåææ\n\næ³¨æï¼ docker commit å½ä»¤é¤äºå­¦ä¹ ä¹å¤ï¼è¿æä¸äºç¹æ®çåºç¨åºåï¼æ¯å¦è¢«å¥ä¾µåä¿å­ç°åºç­ãä½æ¯ï¼ä¸è¦ä½¿ç¨ docker commit å®å¶éåï¼å®å¶éååºè¯¥ä½¿ç¨ dockerfile æ¥å®æãå¦æä½ æ³è¦å®å¶éåè¯·æ¥çä¸ä¸å°èã\n\néåæ¯å®¹å¨çåºç¡ï¼æ¯æ¬¡æ§è¡ docker run çæ¶åé½ä¼æå®åªä¸ªéåä½ä¸ºå®¹å¨è¿è¡çåºç¡ãå¨ä¹åçä¾å­ä¸­ï¼æä»¬æä½¿ç¨çé½æ¯æ¥èªäº docker hub çéåãç´æ¥ä½¿ç¨è¿äºéåæ¯å¯ä»¥æ»¡è¶³ä¸å®çéæ±ï¼èå½è¿äºéåæ æ³ç´æ¥æ»¡è¶³éæ±æ¶ï¼æä»¬å°±éè¦å®å¶è¿äºéåãæ¥ä¸æ¥çå èå°±å°è®²è§£å¦ä½å®å¶éåã\n\nåé¡¾ä¸ä¸ä¹åæä»¬å­¦å°çç¥è¯ï¼éåæ¯å¤å±å­å¨ï¼æ¯ä¸å±æ¯å¨åä¸å±çåºç¡ä¸è¿è¡çä¿®æ¹ï¼èå®¹å¨åæ ·ä¹æ¯å¤å±å­å¨ï¼æ¯å¨ä»¥éåä¸ºåºç¡å±ï¼å¨å¶åºç¡ä¸å ä¸å±ä½ä¸ºå®¹å¨è¿è¡æ¶çå­å¨å±ã\n\nç°å¨è®©æä»¬ä»¥å®å¶ä¸ä¸ª web æå¡å¨ä¸ºä¾å­ï¼æ¥è®²è§£éåæ¯å¦ä½æå»ºçã\n\ndocker run --name webserver -d -p 80:80 nginx\n\n\nè¿æ¡å½ä»¤ä¼ç¨ nginx éåå¯å¨ä¸ä¸ªå®¹å¨ï¼å½åä¸º webserverï¼å¹¶ä¸æ å°äº 80 ç«¯å£ï¼è¿æ ·æä»¬å¯ä»¥ç¨æµè§å¨å»è®¿é®è¿ä¸ª nginx æå¡å¨ã\n\nå¦ææ¯å¨ linux æ¬æºè¿è¡ç dockerï¼æèå¦æä½¿ç¨çæ¯ docker for macãdocker for windowsï¼é£ä¹å¯ä»¥ç´æ¥è®¿é®ï¼http://localhostï¼å¦æä½¿ç¨çæ¯ docker toolboxï¼æèæ¯å¨èææºãäºæå¡å¨ä¸å®è£ç dockerï¼åéè¦å° localhost æ¢ä¸ºèææºå°åæèå®éäºæå¡å¨å°åã\n\nç´æ¥ç¨æµè§å¨è®¿é®çè¯ï¼æä»¬ä¼çå°é»è®¤ç nginx æ¬¢è¿é¡µé¢ã\n\n\n\nç°å¨ï¼åè®¾æä»¬éå¸¸ä¸åæ¬¢è¿ä¸ªæ¬¢è¿é¡µé¢ï¼æä»¬å¸ææ¹ææ¬¢è¿ docker çæå­ï¼æä»¬å¯ä»¥ä½¿ç¨ docker exec å½ä»¤è¿å¥å®¹å¨ï¼ä¿®æ¹å¶åå®¹ã\n\ndocker exec -it webserver bash\nroot@3729b97e8226:/# echo \'<h1>hello, docker!</h1>\' > /usr/share/nginx/html/index.html\nroot@3729b97e8226:/# exit\nexit\n\n\næä»¬ä»¥äº¤äºå¼ç»ç«¯æ¹å¼è¿å¥ webserver å®¹å¨ï¼å¹¶æ§è¡äº bash å½ä»¤ï¼ä¹å°±æ¯è·å¾ä¸ä¸ªå¯æä½ç shellã\n\nç¶åï¼æä»¬ç¨ hello, docker! è¦çäº /usr/share/nginx/html/index.html çåå®¹ã\n\nç°å¨æä»¬åå·æ°æµè§å¨çè¯ï¼ä¼åç°åå®¹è¢«æ¹åäºã\n\n\n\næä»¬ä¿®æ¹äºå®¹å¨çæä»¶ï¼ä¹å°±æ¯æ¹å¨äºå®¹å¨çå­å¨å±ãæä»¬å¯ä»¥éè¿ docker diff å½ä»¤çå°å·ä½çæ¹å¨ã\n\ndocker diff webserver\nc /root\na /root/.bash_history\nc /run\nc /usr\nc /usr/share\nc /usr/share/nginx\nc /usr/share/nginx/html\nc /usr/share/nginx/html/index.html\nc /var\nc /var/cache\nc /var/cache/nginx\na /var/cache/nginx/client_temp\na /var/cache/nginx/fastcgi_temp\na /var/cache/nginx/proxy_temp\na /var/cache/nginx/scgi_temp\na /var/cache/nginx/uwsgi_temp\n\n\nç°å¨æä»¬å®å¶å¥½äºååï¼æä»¬å¸æè½å°å¶ä¿å­ä¸æ¥å½¢æéåã\n\nè¦ç¥éï¼å½æä»¬è¿è¡ä¸ä¸ªå®¹å¨çæ¶åï¼å¦æä¸ä½¿ç¨å·çè¯ï¼ï¼æä»¬åçä»»ä½æä»¶ä¿®æ¹é½ä¼è¢«è®°å½äºå®¹å¨å­å¨å±éãè docker æä¾äºä¸ä¸ª docker commit å½ä»¤ï¼å¯ä»¥å°å®¹å¨çå­å¨å±ä¿å­ä¸æ¥æä¸ºéåãæ¢å¥è¯è¯´ï¼å°±æ¯å¨åæéåçåºç¡ä¸ï¼åå å ä¸å®¹å¨çå­å¨å±ï¼å¹¶æææ°çéåãä»¥åæä»¬è¿è¡è¿ä¸ªæ°éåçæ¶åï¼å°±ä¼æ¥æåæå®¹å¨æåçæä»¶ååã\n\ndocker commit çè¯­æ³æ ¼å¼ä¸ºï¼\n\ndocker commit [éé¡¹] <å®¹å¨idæå®¹å¨å> [<ä»åºå>[:<æ ç­¾>]]\n\n\næä»¬å¯ä»¥ç¨ä¸é¢çå½ä»¤å°å®¹å¨ä¿å­ä¸ºéåï¼\n\ndocker commit \\\n    --author "tao wang <twang2218@gmail.com>" \\\n    --message "ä¿®æ¹äºé»è®¤ç½é¡µ" \\\n    webserver \\\n    nginx:v2\nsha256:07e33465974800ce65751acc279adc6ed2dc5ed4e0838f8b86f0c87aa1795214\n\n\nå¶ä¸­ --author æ¯æå®ä¿®æ¹çä½èï¼è --message åæ¯è®°å½æ¬æ¬¡ä¿®æ¹çåå®¹ãè¿ç¹å git çæ¬æ§å¶ç¸ä¼¼ï¼ä¸è¿è¿éè¿äºä¿¡æ¯å¯ä»¥çç¥çç©ºã\n\næä»¬å¯ä»¥å¨ docker image ls ä¸­çå°è¿ä¸ªæ°å®å¶çéåï¼\n\ndocker image ls nginx\nrepository          tag                 image id            created             size\nnginx               v2                  07e334659748        9 seconds ago       181.5 mb\nnginx               1.11                05a60462f8ba        12 days ago         181.5 mb\nnginx               latest              e43d811ce2f4        4 weeks ago         181.5 mb```\n\næä»¬è¿å¯ä»¥ç¨ `docker history` å·ä½æ¥çéååçåå²è®°å½ï¼å¦ææ¯è¾ `nginx:latest` çåå²è®°å½ï¼æä»¬ä¼åç°æ°å¢äºæä»¬ååæäº¤çè¿ä¸å±ã\n\n```bash\ndocker history nginx:v2\nimage               created             created by                                      size                comment\n07e334659748        54 seconds ago      nginx -g daemon off;                            95 b                ä¿®æ¹äºé»è®¤ç½é¡µ\ne43d811ce2f4        4 weeks ago         /bin/sh -c #(nop)  cmd ["nginx" "-g" "daemon    0 b\n<missing>           4 weeks ago         /bin/sh -c #(nop)  expose 443/tcp 80/tcp        0 b\n<missing>           4 weeks ago         /bin/sh -c ln -sf /dev/stdout /var/log/nginx/   22 b\n<missing>           4 weeks ago         /bin/sh -c apt-key adv --keyserver hkp://pgp.   58.46 mb\n<missing>           4 weeks ago         /bin/sh -c #(nop)  env nginx_version=1.11.5-1   0 b\n<missing>           4 weeks ago         /bin/sh -c #(nop)  maintainer nginx docker ma   0 b\n<missing>           4 weeks ago         /bin/sh -c #(nop)  cmd ["/bin/bash"]            0 b\n<missing>           4 weeks ago         /bin/sh -c #(nop) add file:23aa4f893e3288698c   123 mb\n\n\næ°çéåå®å¶å¥½åï¼æä»¬å¯ä»¥æ¥è¿è¡è¿ä¸ªéåã\n\ndocker run --name web2 -d -p 81:80 nginx:v2\n\n\nè¿éæä»¬å½åä¸ºæ°çæå¡ä¸º web2ï¼å¹¶ä¸æ å°å° 81 ç«¯å£ãå¦ææ¯ docker for mac/windows æ linux æ¡é¢çè¯ï¼æä»¬å°±å¯ä»¥ç´æ¥è®¿é® http://localhost:81 çå°ç»æï¼å¶åå®¹åºè¯¥åä¹åä¿®æ¹åç webserver ä¸æ ·ã\n\nè³æ­¤ï¼æä»¬ç¬¬ä¸æ¬¡å®æäºå®å¶éåï¼ä½¿ç¨çæ¯ docker commit å½ä»¤ï¼æå¨æä½ç»æ§çéåæ·»å äºæ°çä¸å±ï¼å½¢ææ°çéåï¼å¯¹éåå¤å±å­å¨åºè¯¥æäºæ´ç´è§çæè§ã\n\n\n# æç¨ docker commit\n\nä½¿ç¨ docker commit å½ä»¤è½ç¶å¯ä»¥æ¯è¾ç´è§çå¸®å©çè§£éååå±å­å¨çæ¦å¿µï¼ä½æ¯å®éç¯å¢ä¸­å¹¶ä¸ä¼è¿æ ·ä½¿ç¨ã\n\né¦åï¼å¦æä»ç»è§å¯ä¹åç docker diff webserver çç»æï¼ä½ ä¼åç°é¤äºçæ­£æ³è¦ä¿®æ¹ç /usr/share/nginx/html/index.html æä»¶å¤ï¼ç±äºå½ä»¤çæ§è¡ï¼è¿æå¾å¤æä»¶è¢«æ¹å¨ææ·»å äºãè¿è¿ä»ä»æ¯æç®åçæä½ï¼å¦ææ¯å®è£è½¯ä»¶åãç¼è¯æå»ºï¼é£ä¼æå¤§éçæ å³åå®¹è¢«æ·»å è¿æ¥ï¼å¦æä¸å°å¿æ¸çï¼å°ä¼å¯¼è´éåæä¸ºèè¿ã\n\næ­¤å¤ï¼ä½¿ç¨ docker commit æå³çææå¯¹éåçæä½é½æ¯é»ç®±æä½ï¼çæçéåä¹è¢«ç§°ä¸ºé»ç®±éåï¼æ¢å¥è¯è¯´ï¼å°±æ¯é¤äºå¶ä½éåçäººç¥éæ§è¡è¿ä»ä¹å½ä»¤ãæä¹çæçéåï¼å«äººæ ¹æ¬æ ä»å¾ç¥ãèä¸ï¼å³ä½¿æ¯è¿ä¸ªå¶ä½éåçäººï¼è¿ä¸æ®µæ¶é´åä¹æ æ³è®°æ¸å·ä½å¨æä½çãè½ç¶ docker diff æè®¸å¯ä»¥åè¯å¾å°ä¸äºçº¿ç´¢ï¼ä½æ¯è¿è¿ä¸å°å¯ä»¥ç¡®ä¿çæä¸è´éåçå°æ­¥ãè¿ç§é»ç®±éåçç»´æ¤å·¥ä½æ¯éå¸¸çè¦çã\n\nèä¸ï¼åé¡¾ä¹åæåçéåæä½¿ç¨çåå±å­å¨çæ¦å¿µï¼é¤å½åå±å¤ï¼ä¹åçæ¯ä¸å±é½æ¯ä¸ä¼åçæ¹åçï¼æ¢å¥è¯è¯´ï¼ä»»ä½ä¿®æ¹çç»æä»ä»æ¯å¨å½åå±è¿è¡æ è®°ãæ·»å ãä¿®æ¹ï¼èä¸ä¼æ¹å¨ä¸ä¸å±ãå¦æä½¿ç¨ docker commit å¶ä½éåï¼ä»¥ååæä¿®æ¹çè¯ï¼æ¯ä¸æ¬¡ä¿®æ¹é½ä¼è®©éåæ´å èè¿ä¸æ¬¡ï¼æå é¤çä¸ä¸å±çä¸è¥¿å¹¶ä¸ä¼ä¸¢å¤±ï¼ä¼ä¸ç´å¦å½±éå½¢çè·çè¿ä¸ªéåï¼å³ä½¿æ ¹æ¬æ æ³è®¿é®å°ãè¿ä¼è®©éåæ´å èè¿ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä½¿ç¨ Dockerfile å®å¶éå",frontmatter:{title:"ä½¿ç¨ Dockerfile å®å¶éå",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/ffea77/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/07.%E4%BD%BF%E7%94%A8%20Dockerfile%20%E5%AE%9A%E5%88%B6%E9%95%9C%E5%83%8F.html",relativePath:"17.Docker/04.Docker éå/07.ä½¿ç¨ Dockerfile å®å¶éå.md",key:"v-65ae1b58",path:"/pages/ffea77/",headers:[{level:2,title:"Dockerfile å®å¶éå",slug:"dockerfile-å®å¶éå",normalizedTitle:"dockerfile å®å¶éå",charIndex:5},{level:2,title:"FROM æå®åºç¡éå",slug:"from-æå®åºç¡éå",normalizedTitle:"from æå®åºç¡éå",charIndex:543},{level:2,title:"RUN æ§è¡å½ä»¤",slug:"run-æ§è¡å½ä»¤",normalizedTitle:"run æ§è¡å½ä»¤",charIndex:1331},{level:2,title:"æå»ºéå",slug:"æå»ºéå",normalizedTitle:"æå»ºéå",charIndex:3381},{level:2,title:"éåæå»ºä¸ä¸æï¼Contextï¼",slug:"éåæå»ºä¸ä¸æ-context",normalizedTitle:"éåæå»ºä¸ä¸æï¼contextï¼",charIndex:4107},{level:2,title:"å¶å® docker build çç¨æ³",slug:"å¶å®-docker-build-çç¨æ³",normalizedTitle:"å¶å® docker build çç¨æ³",charIndex:6059},{level:3,title:"ç´æ¥ç¨ Git repo è¿è¡æå»º",slug:"ç´æ¥ç¨-git-repo-è¿è¡æå»º",normalizedTitle:"ç´æ¥ç¨ git repo è¿è¡æå»º",charIndex:6083},{level:3,title:"ç¨ç»å®ç tar åç¼©åæå»º",slug:"ç¨ç»å®ç-tar-åç¼©åæå»º",normalizedTitle:"ç¨ç»å®ç tar åç¼©åæå»º",charIndex:6600},{level:3,title:"[#](https://wowox.com/zh/docs-docker/Docker-ä½¿ç¨-Dockerfile-å®å¶éå.html#ä»æ åè¾å¥ä¸­è¯»å-dockerfile-è¿è¡æå»º)ä»æ åè¾å¥ä¸­è¯»å Dockerfile è¿è¡æå»º",slug:"ä»æ åè¾å¥ä¸­è¯»å-dockerfile-è¿è¡æå»º",normalizedTitle:'<a href="https://wowox.com/zh/docs-docker/docker-%e4%bd%bf%e7%94%a8-dockerfile-%e5%ae%9a%e5%88%b6%e9%95%9c%e5%83%8f.html#%e4%bb%8e%e6%a0%87%e5%87%86%e8%be%93%e5%85%a5%e4%b8%ad%e8%af%bb%e5%8f%96-dockerfile-%e8%bf%9b%e8%a1%8c%e6%9e%84%e5%bb%ba" target="_blank" rel="noopener noreferrer">#<outboundlink/></a>ä»æ åè¾å¥ä¸­è¯»å dockerfile è¿è¡æå»º',charIndex:null},{level:3,title:"ä»æ åè¾å¥ä¸­è¯»åä¸ä¸æåç¼©åè¿è¡æå»º",slug:"ä»æ åè¾å¥ä¸­è¯»åä¸ä¸æåç¼©åè¿è¡æå»º",normalizedTitle:"ä»æ åè¾å¥ä¸­è¯»åä¸ä¸æåç¼©åè¿è¡æå»º",charIndex:6950}],headersStr:"Dockerfile å®å¶éå FROM æå®åºç¡éå RUN æ§è¡å½ä»¤ æå»ºéå éåæå»ºä¸ä¸æï¼Contextï¼ å¶å® docker build çç¨æ³ ç´æ¥ç¨ Git repo è¿è¡æå»º ç¨ç»å®ç tar åç¼©åæå»º [#](https://wowox.com/zh/docs-docker/Docker-ä½¿ç¨-Dockerfile-å®å¶éå.html#ä»æ åè¾å¥ä¸­è¯»å-dockerfile-è¿è¡æå»º)ä»æ åè¾å¥ä¸­è¯»å Dockerfile è¿è¡æå»º ä»æ åè¾å¥ä¸­è¯»åä¸ä¸æåç¼©åè¿è¡æå»º",content:'# ä½¿ç¨ Dockerfile å®å¶éå\n\n\n# Dockerfile å®å¶éå\n\nä»åæç docker commit çå­¦ä¹ ä¸­ï¼æä»¬å¯ä»¥äºè§£å°ï¼éåçå®å¶å®éä¸å°±æ¯å®å¶æ¯ä¸å±ææ·»å çéç½®ãæä»¶ãå¦ææä»¬å¯ä»¥ææ¯ä¸å±ä¿®æ¹ãå®è£ãæå»ºãæä½çå½ä»¤é½åå¥ä¸ä¸ªèæ¬ï¼ç¨è¿ä¸ªèæ¬æ¥æå»ºãå®å¶éåï¼é£ä¹ä¹åæåçæ æ³éå¤çé®é¢ãéåæå»ºéææ§çé®é¢ãä½ç§¯çé®é¢å°±é½ä¼è§£å³ãè¿ä¸ªèæ¬å°±æ¯ Dockerfileã\n\nDockerfile æ¯ä¸ä¸ªææ¬æä»¶ï¼å¶ååå«äºä¸æ¡æ¡çæä»¤(Instruction)ï¼æ¯ä¸æ¡æä»¤æå»ºä¸å±ï¼å æ­¤æ¯ä¸æ¡æä»¤çåå®¹ï¼å°±æ¯æè¿°è¯¥å±åºå½å¦ä½æå»ºã\n\nè¿ä»¥ä¹åå®å¶ nginx éåä¸ºä¾ï¼è¿æ¬¡æä»¬ä½¿ç¨ Dockerfile æ¥å®å¶ã\n\nå¨ä¸ä¸ªç©ºç½ç®å½ä¸­ï¼å»ºç«ä¸ä¸ªææ¬æä»¶ï¼å¹¶å½åä¸º Dockerfileï¼\n\nmkdir mynginx\ncd mynginx\ntouch Dockerfile\n\n\nå¶åå®¹ä¸ºï¼\n\nFROM nginx\nRUN echo \'<h1>Hello, Docker!</h1>\' > /usr/share/nginx/html/index.html\n\n\nè¿ä¸ª Dockerfile å¾ç®åï¼ä¸å±å°±ä¸¤è¡ãæ¶åå°äºä¸¤æ¡æä»¤ï¼FROM å RUNã\n\n\n# FROM æå®åºç¡éå\n\næè°å®å¶éåï¼é£ä¸å®æ¯ä»¥ä¸ä¸ªéåä¸ºåºç¡ï¼å¨å¶ä¸è¿è¡å®å¶ãå°±åæä»¬ä¹åè¿è¡äºä¸ä¸ª nginx éåçå®¹å¨ï¼åè¿è¡ä¿®æ¹ä¸æ ·ï¼åºç¡éåæ¯å¿é¡»æå®çãè FROM å°±æ¯æå®åºç¡éåï¼å æ­¤ä¸ä¸ª Dockerfile ä¸­ FROM æ¯å¿å¤çæä»¤ï¼å¹¶ä¸å¿é¡»æ¯ç¬¬ä¸æ¡æä»¤ã\n\nå¨ Docker Store ä¸æéå¸¸å¤çé«è´¨éçå®æ¹éåï¼æå¯ä»¥ç´æ¥æ¿æ¥ä½¿ç¨çæå¡ç±»çéåï¼å¦ nginxãredisãmongoãmysqlãhttpdãphpãtomcat ç­ï¼ä¹æä¸äºæ¹ä¾¿å¼åãæå»ºãè¿è¡åç§è¯­è¨åºç¨çéåï¼å¦ nodeãopenjdkãpythonãrubyãgolang ç­ãå¯ä»¥å¨å¶ä¸­å¯»æ¾ä¸ä¸ªæç¬¦åæä»¬æç»ç®æ çéåä¸ºåºç¡éåè¿è¡å®å¶ã\n\nå¦ææ²¡ææ¾å°å¯¹åºæå¡çéåï¼å®æ¹éåä¸­è¿æä¾äºä¸äºæ´ä¸ºåºç¡çæä½ç³»ç»éåï¼å¦ ubuntuãdebianãcentosãfedoraãalpine ç­ï¼è¿äºæä½ç³»ç»çè½¯ä»¶åºä¸ºæä»¬æä¾äºæ´å¹¿éçæ©å±ç©ºé´ã\n\né¤äºéæ©ç°æéåä¸ºåºç¡éåå¤ï¼Docker è¿å­å¨ä¸ä¸ªç¹æ®çéåï¼åä¸º scratchãè¿ä¸ªéåæ¯èæçæ¦å¿µï¼å¹¶ä¸å®éå­å¨ï¼å®è¡¨ç¤ºä¸ä¸ªç©ºç½çéåã\n\nFROM scratch\n...\n\n\nå¦æä½ ä»¥ scratch ä¸ºåºç¡éåçè¯ï¼æå³çä½ ä¸ä»¥ä»»ä½éåä¸ºåºç¡ï¼æ¥ä¸æ¥æåçæä»¤å°ä½ä¸ºéåç¬¬ä¸å±å¼å§å­å¨ã\n\nä¸ä»¥ä»»ä½ç³»ç»ä¸ºåºç¡ï¼ç´æ¥å°å¯æ§è¡æä»¶å¤å¶è¿éåçåæ³å¹¶ä¸ç½è§ï¼æ¯å¦ swarmãcoreos/etcdãå¯¹äº Linux ä¸éæç¼è¯çç¨åºæ¥è¯´ï¼å¹¶ä¸éè¦ææä½ç³»ç»æä¾è¿è¡æ¶æ¯æï¼æéçä¸ååºé½å·²ç»å¨å¯æ§è¡æä»¶éäºï¼å æ­¤ç´æ¥ FROM scratch ä¼è®©éåä½ç§¯æ´å å°å·§ãä½¿ç¨ Go è¯­è¨ å¼åçåºç¨å¾å¤ä¼ä½¿ç¨è¿ç§æ¹å¼æ¥å¶ä½éåï¼è¿ä¹æ¯ä¸ºä»ä¹æäººè®¤ä¸º Go æ¯ç¹å«éåå®¹å¨å¾®æå¡æ¶æçè¯­è¨çåå ä¹ä¸ã\n\n\n# RUN æ§è¡å½ä»¤\n\nRUN æä»¤æ¯ç¨æ¥æ§è¡å½ä»¤è¡å½ä»¤çãç±äºå½ä»¤è¡çå¼ºå¤§è½åï¼RUN æä»¤å¨å®å¶éåæ¶æ¯æå¸¸ç¨çæä»¤ä¹ä¸ãå¶æ ¼å¼æä¸¤ç§ï¼\n\n * shell æ ¼å¼ï¼RUN <å½ä»¤>ï¼å°±åç´æ¥å¨å½ä»¤è¡ä¸­è¾å¥çå½ä»¤ä¸æ ·ãåæåç Dockerfile ä¸­ç RUN æä»¤å°±æ¯è¿ç§æ ¼å¼ã\n\nRUN echo \'<h1>Hello, Docker!</h1>\' > /usr/share/nginx/html/index.html\n\n\n * exec æ ¼å¼ï¼RUN ["å¯æ§è¡æä»¶", "åæ°1", "åæ°2"]ï¼è¿æ´åæ¯å½æ°è°ç¨ä¸­çæ ¼å¼ã\n\næ¢ç¶ RUN å°±å Shell èæ¬ä¸æ ·å¯ä»¥æ§è¡å½ä»¤ï¼é£ä¹æä»¬æ¯å¦å°±å¯ä»¥å Shell èæ¬ä¸æ ·ææ¯ä¸ªå½ä»¤å¯¹åºä¸ä¸ª RUN å¢ï¼æ¯å¦è¿æ ·ï¼\n\nFROM debian:jessie\n\nRUN apt-get update\nRUN apt-get install -y gcc libc6-dev make\nRUN wget -O redis.tar.gz "http://download.redis.io/releases/redis-3.2.5.tar.gz"\nRUN mkdir -p /usr/src/redis\nRUN tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1\nRUN make -C /usr/src/redis\nRUN make -C /usr/src/redis install\n\n\nä¹åè¯´è¿ï¼Dockerfile ä¸­æ¯ä¸ä¸ªæä»¤é½ä¼å»ºç«ä¸å±ï¼RUN ä¹ä¸ä¾å¤ãæ¯ä¸ä¸ª RUN çè¡ä¸ºï¼å°±ååææä»¬æå·¥å»ºç«éåçè¿ç¨ä¸æ ·ï¼æ°å»ºç«ä¸å±ï¼å¨å¶ä¸æ§è¡è¿äºå½ä»¤ï¼æ§è¡ç»æåï¼commit è¿ä¸å±çä¿®æ¹ï¼æææ°çéåã\n\nèä¸é¢çè¿ç§åæ³ï¼åå»ºäº 7 å±éåãè¿æ¯å®å¨æ²¡ææä¹çï¼èä¸å¾å¤è¿è¡æ¶ä¸éè¦çä¸è¥¿ï¼é½è¢«è£è¿äºéåéï¼æ¯å¦ç¼è¯ç¯å¢ãæ´æ°çè½¯ä»¶åç­ç­ãç»æå°±æ¯äº§çéå¸¸èè¿ãéå¸¸å¤å±çéåï¼ä¸ä»ä»å¢å äºæå»ºé¨ç½²çæ¶é´ï¼ä¹å¾å®¹æåºéã è¿æ¯å¾å¤åå­¦ Docker çäººå¸¸ç¯çä¸ä¸ªéè¯¯ã\n\nUnion FS æ¯ææå¤§å±æ°éå¶çï¼æ¯å¦ AUFSï¼æ¾ç»æ¯æå¤§ä¸å¾è¶è¿ 42 å±ï¼ç°å¨æ¯ä¸å¾è¶è¿ 127 å±ã\n\nä¸é¢ç Dockerfile æ­£ç¡®çåæ³åºè¯¥æ¯è¿æ ·ï¼\n\nFROM debian:jessie\n\nRUN buildDeps=\'gcc libc6-dev make\' \\\n    && apt-get update \\\n    && apt-get install -y $buildDeps \\\n    && wget -O redis.tar.gz "http://download.redis.io/releases/redis-3.2.5.tar.gz" \\\n    && mkdir -p /usr/src/redis \\\n    && tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \\\n    && make -C /usr/src/redis \\\n    && make -C /usr/src/redis install \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && rm redis.tar.gz \\\n    && rm -r /usr/src/redis \\\n    && apt-get purge -y --auto-remove $buildDeps\n\n\né¦åï¼ä¹åææçå½ä»¤åªæä¸ä¸ªç®çï¼å°±æ¯ç¼è¯ãå®è£ redis å¯æ§è¡æä»¶ãå æ­¤æ²¡æå¿è¦å»ºç«å¾å¤å±ï¼è¿åªæ¯ä¸å±çäºæãå æ­¤ï¼è¿éæ²¡æä½¿ç¨å¾å¤ä¸ª RUN å¯¹ä¸ä¸å¯¹åºä¸åçå½ä»¤ï¼èæ¯ä»ä»ä½¿ç¨ä¸ä¸ª RUN æä»¤ï¼å¹¶ä½¿ç¨ && å°åä¸ªæéå½ä»¤ä¸²èèµ·æ¥ãå°ä¹åç 7 å±ï¼ç®åä¸ºäº 1 å±ãå¨æ°å Dockerfile çæ¶åï¼è¦ç»å¸¸æéèªå·±ï¼è¿å¹¶ä¸æ¯å¨å Shell èæ¬ï¼èæ¯å¨å®ä¹æ¯ä¸å±è¯¥å¦ä½æå»ºã\n\nå¹¶ä¸ï¼è¿éä¸ºäºæ ¼å¼åè¿è¿è¡äºæ¢è¡ãDockerfile æ¯æ Shell ç±»çè¡å°¾æ·»å  \\ çå½ä»¤æ¢è¡æ¹å¼ï¼ä»¥åè¡é¦ # è¿è¡æ³¨éçæ ¼å¼ãè¯å¥½çæ ¼å¼ï¼æ¯å¦æ¢è¡ãç¼©è¿ãæ³¨éç­ï¼ä¼è®©ç»´æ¤ãæéæ´ä¸ºå®¹æï¼è¿æ¯ä¸ä¸ªæ¯è¾å¥½çä¹ æ¯ã\n\næ­¤å¤ï¼è¿å¯ä»¥çå°è¿ä¸ç»å½ä»¤çæåæ·»å äºæ¸çå·¥ä½çå½ä»¤ï¼å é¤äºä¸ºäºç¼è¯æå»ºæéè¦çè½¯ä»¶ï¼æ¸çäºææä¸è½½ãå±å¼çæä»¶ï¼å¹¶ä¸è¿æ¸çäº apt ç¼å­æä»¶ãè¿æ¯å¾éè¦çä¸æ­¥ï¼æä»¬ä¹åè¯´è¿ï¼éåæ¯å¤å±å­å¨ï¼æ¯ä¸å±çä¸è¥¿å¹¶ä¸ä¼å¨ä¸ä¸å±è¢«å é¤ï¼ä¼ä¸ç´è·éçéåãå æ­¤éåæå»ºæ¶ï¼ä¸å®è¦ç¡®ä¿æ¯ä¸å±åªæ·»å çæ­£éè¦æ·»å çä¸è¥¿ï¼ä»»ä½æ å³çä¸è¥¿é½åºè¯¥æ¸çæã\n\nå¾å¤äººåå­¦ Docker å¶ä½åºäºå¾èè¿çéåçåå ä¹ä¸ï¼å°±æ¯å¿è®°äºæ¯ä¸å±æå»ºçæåä¸å®è¦æ¸çææ å³æä»¶ã\n\n\n# æå»ºéå\n\nå¥½äºï¼è®©æä»¬ååå°ä¹åå®å¶ç nginx éåç Dockerfile æ¥ãç°å¨æä»¬æç½äºè¿ä¸ª Dockerfile çåå®¹ï¼é£ä¹è®©æä»¬æ¥æå»ºè¿ä¸ªéåå§ã\n\nå¨ Dockerfile æä»¶æå¨ç®å½æ§è¡ï¼\n\ndocker build -t nginx:v3 .\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM nginx\n ---\x3e e43d811ce2f4\nStep 2 : RUN echo \'<h1>Hello, Docker!</h1>\' > /usr/share/nginx/html/index.html\n ---\x3e Running in 9cdc27646c7b\n ---\x3e 44aa4490ce2c\nRemoving intermediate container 9cdc27646c7b\nSuccessfully built 44aa4490ce2c\n\n\nä»å½ä»¤çè¾åºç»æä¸­ï¼æä»¬å¯ä»¥æ¸æ°ççå°éåçæå»ºè¿ç¨ãå¨ Step 2 ä¸­ï¼å¦åæä»¬ä¹åæè¯´çé£æ ·ï¼RUN æä»¤å¯å¨äºä¸ä¸ªå®¹å¨ 9cdc27646c7bï¼æ§è¡äºæè¦æ±çå½ä»¤ï¼å¹¶æåæäº¤äºè¿ä¸å± 44aa4490ce2cï¼éåå é¤äºæç¨å°çè¿ä¸ªå®¹å¨ 9cdc27646c7bã\n\nè¿éæä»¬ä½¿ç¨äº docker build å½ä»¤è¿è¡éåæå»ºãå¶æ ¼å¼ä¸ºï¼\n\ndocker build [éé¡¹] <ä¸ä¸æè·¯å¾/URL/->\n\n\nå¨è¿éæä»¬æå®äºæç»éåçåç§° -t nginx:v3ï¼æå»ºæååï¼æä»¬å¯ä»¥åä¹åè¿è¡ nginx:v2 é£æ ·æ¥è¿è¡è¿ä¸ªéåï¼å¶ç»æä¼å nginx:v2 ä¸æ ·ã\n\n\n# éåæå»ºä¸ä¸æï¼Contextï¼\n\nå¦ææ³¨æï¼ä¼çå° docker build å½ä»¤æåæä¸ä¸ª .ã. è¡¨ç¤ºå½åç®å½ï¼è Dockerfile å°±å¨å½åç®å½ï¼å æ­¤ä¸å°åå­¦èä»¥ä¸ºè¿ä¸ªè·¯å¾æ¯å¨æå® Dockerfile æå¨è·¯å¾ï¼è¿ä¹çè§£å¶å®æ¯ä¸åç¡®çãå¦æå¯¹åºä¸é¢çå½ä»¤æ ¼å¼ï¼ä½ å¯è½ä¼åç°ï¼è¿æ¯å¨æå®ä¸ä¸æè·¯å¾ãé£ä¹ä»ä¹æ¯ä¸ä¸æå¢ï¼\n\né¦åæä»¬è¦çè§£ docker build çå·¥ä½åçãDocker å¨è¿è¡æ¶åä¸º Docker å¼æï¼ä¹å°±æ¯æå¡ç«¯å®æ¤è¿ç¨ï¼åå®¢æ·ç«¯å·¥å·ãDocker çå¼ææä¾äºä¸ç» REST APIï¼è¢«ç§°ä¸º Docker Remote APIï¼èå¦ docker å½ä»¤è¿æ ·çå®¢æ·ç«¯å·¥å·ï¼åæ¯éè¿è¿ç» API ä¸ Docker å¼æäº¤äºï¼ä»èå®æåç§åè½ãå æ­¤ï¼è½ç¶è¡¨é¢ä¸æä»¬å¥½åæ¯å¨æ¬æºæ§è¡åç§ docker åè½ï¼ä½å®éä¸ï¼ä¸åé½æ¯ä½¿ç¨çè¿ç¨è°ç¨å½¢å¼å¨æå¡ç«¯ï¼Docker å¼æï¼å®æãä¹å ä¸ºè¿ç§ C/S è®¾è®¡ï¼è®©æä»¬æä½è¿ç¨æå¡å¨ç Docker å¼æåå¾è½»èæä¸¾ã\n\nå½æä»¬è¿è¡éåæå»ºçæ¶åï¼å¹¶éææå®å¶é½ä¼éè¿ RUN æä»¤å®æï¼ç»å¸¸ä¼éè¦å°ä¸äºæ¬å°æä»¶å¤å¶è¿éåï¼æ¯å¦éè¿ COPY æä»¤ãADD æä»¤ç­ãè docker build å½ä»¤æå»ºéåï¼å¶å®å¹¶éå¨æ¬å°æå»ºï¼èæ¯å¨æå¡ç«¯ï¼ä¹å°±æ¯ Docker å¼æä¸­æå»ºçãé£ä¹å¨è¿ç§å®¢æ·ç«¯/æå¡ç«¯çæ¶æä¸­ï¼å¦ä½æè½è®©æå¡ç«¯è·å¾æ¬å°æä»¶å¢ï¼\n\nè¿å°±å¼å¥äºä¸ä¸æçæ¦å¿µãå½æå»ºçæ¶åï¼ç¨æ·ä¼æå®æå»ºéåä¸ä¸æçè·¯å¾ï¼docker build å½ä»¤å¾ç¥è¿ä¸ªè·¯å¾åï¼ä¼å°è·¯å¾ä¸çææåå®¹æåï¼ç¶åä¸ä¼ ç» Docker å¼æãè¿æ · Docker å¼ææ¶å°è¿ä¸ªä¸ä¸æååï¼å±å¼å°±ä¼è·å¾æå»ºéåæéçä¸åæä»¶ã\n\nå¦æå¨ Dockerfile ä¸­è¿ä¹åï¼\n\nCOPY ./package.json /app/\n\n\nè¿å¹¶ä¸æ¯è¦å¤å¶æ§è¡ docker build å½ä»¤æå¨çç®å½ä¸ç package.jsonï¼ä¹ä¸æ¯å¤å¶ Dockerfile æå¨ç®å½ä¸ç package.jsonï¼èæ¯å¤å¶ ä¸ä¸æï¼contextï¼ ç®å½ä¸ç package.jsonã\n\nå æ­¤ï¼COPY è¿ç±»æä»¤ä¸­çæºæä»¶çè·¯å¾é½æ¯ç¸å¯¹è·¯å¾ãè¿ä¹æ¯åå­¦èç»å¸¸ä¼é®çä¸ºä»ä¹ COPY ../package.json /app æè COPY /opt/xxxx /app æ æ³å·¥ä½çåå ï¼å ä¸ºè¿äºè·¯å¾å·²ç»è¶åºäºä¸ä¸æçèå´ï¼Docker å¼ææ æ³è·å¾è¿äºä½ç½®çæä»¶ãå¦æççéè¦é£äºæä»¶ï¼åºè¯¥å°å®ä»¬å¤å¶å°ä¸ä¸æç®å½ä¸­å»ã\n\nç°å¨å°±å¯ä»¥çè§£åæçå½ä»¤ docker build -t nginx:v3 . ä¸­çè¿ä¸ª .ï¼å®éä¸æ¯å¨æå®ä¸ä¸æçç®å½ï¼docker build å½ä»¤ä¼å°è¯¥ç®å½ä¸çåå®¹æåäº¤ç» Docker å¼æä»¥å¸®å©æå»ºéåã\n\nå¦æè§å¯ docker build è¾åºï¼æä»¬å¶å®å·²ç»çå°äºè¿ä¸ªåéä¸ä¸æçè¿ç¨ï¼\n\ndocker build -t nginx:v3 .\nSending build context to Docker daemon 2.048 kB\n...\n\n\nçè§£æå»ºä¸ä¸æå¯¹äºéåæå»ºæ¯å¾éè¦çï¼é¿åç¯ä¸äºä¸åºè¯¥çéè¯¯ãæ¯å¦æäºåå­¦èå¨åç° COPY /opt/xxxx /app ä¸å·¥ä½åï¼äºæ¯å¹²èå° Dockerfile æ¾å°äºç¡¬çæ ¹ç®å½å»æå»ºï¼ç»æåç° docker build æ§è¡åï¼å¨åéä¸ä¸ªå å GB çä¸è¥¿ï¼æä¸ºç¼æ¢èä¸å¾å®¹ææå»ºå¤±è´¥ãé£æ¯å ä¸ºè¿ç§åæ³æ¯å¨è®© docker build æåæ´ä¸ªç¡¬çï¼è¿æ¾ç¶æ¯ä½¿ç¨éè¯¯ã\n\nä¸è¬æ¥è¯´ï¼åºè¯¥ä¼å° Dockerfile ç½®äºä¸ä¸ªç©ºç®å½ä¸ï¼æèé¡¹ç®æ ¹ç®å½ä¸ãå¦æè¯¥ç®å½ä¸æ²¡ææéæä»¶ï¼é£ä¹åºè¯¥ææéæä»¶å¤å¶ä¸ä»½è¿æ¥ãå¦æç®å½ä¸æäºä¸è¥¿ç¡®å®ä¸å¸ææå»ºæ¶ä¼ ç» Docker å¼æï¼é£ä¹å¯ä»¥ç¨ .gitignore ä¸æ ·çè¯­æ³åä¸ä¸ª .dockerignoreï¼è¯¥æä»¶æ¯ç¨äºåé¤ä¸éè¦ä½ä¸ºä¸ä¸æä¼ éç» Docker å¼æçã\n\né£ä¹ä¸ºä»ä¹ä¼æäººè¯¯ä»¥ä¸º . æ¯æå® Dockerfile æå¨ç®å½å¢ï¼è¿æ¯å ä¸ºå¨é»è®¤æåµä¸ï¼å¦æä¸é¢å¤æå® Dockerfile çè¯ï¼ä¼å°ä¸ä¸æç®å½ä¸çåä¸º Dockerfile çæä»¶ä½ä¸º Dockerfileã\n\nè¿åªæ¯é»è®¤è¡ä¸ºï¼å®éä¸ Dockerfile çæä»¶åå¹¶ä¸è¦æ±å¿é¡»ä¸º Dockerfileï¼èä¸å¹¶ä¸è¦æ±å¿é¡»ä½äºä¸ä¸æç®å½ä¸­ï¼æ¯å¦å¯ä»¥ç¨ -f ../Dockerfile.php åæ°æå®æä¸ªæä»¶ä½ä¸º Dockerfileã\n\nå½ç¶ï¼ä¸è¬å¤§å®¶ä¹ æ¯æ§çä¼ä½¿ç¨é»è®¤çæä»¶å Dockerfileï¼ä»¥åä¼å°å¶ç½®äºéåæå»ºä¸ä¸æç®å½ä¸­ã\n\n\n# å¶å® docker build çç¨æ³\n\n\n# ç´æ¥ç¨ Git repo è¿è¡æå»º\n\næè®¸ä½ å·²ç»æ³¨æå°äºï¼docker build è¿æ¯æä» URL æå»ºï¼æ¯å¦å¯ä»¥ç´æ¥ä» Git repo ä¸­æå»ºï¼\n\ndocker build https://github.com/twang2218/gitlab-ce-zh.git#:8.14\ndocker build https://github.com/twang2218/gitlab-ce-zh.git\\#:8.14\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM gitlab/gitlab-ce:8.14.0-ce.0\n8.14.0-ce.0: Pulling from gitlab/gitlab-ce\naed15891ba52: Already exists\n773ae8583d14: Already exists\n...\n\n\nè¿è¡å½ä»¤æå®äºæå»ºæéç Git repoï¼å¹¶ä¸æå®é»è®¤ç master åæ¯ï¼æå»ºç®å½ä¸º /8.14/ï¼ç¶å Docker å°±ä¼èªå·±å» git clone è¿ä¸ªé¡¹ç®ãåæ¢å°æå®åæ¯ãå¹¶è¿å¥å°æå®ç®å½åå¼å§æå»ºã\n\n\n# ç¨ç»å®ç tar åç¼©åæå»º\n\ndocker build http://server/context.tar.gz\n\n\nå¦ææç»åºç URL ä¸æ¯ä¸ª Git repoï¼èæ¯ä¸ª tar åç¼©åï¼é£ä¹ Docker å¼æä¼ä¸è½½è¿ä¸ªåï¼å¹¶èªå¨è§£åç¼©ï¼ä»¥å¶ä½ä¸ºä¸ä¸æï¼å¼å§æå»ºã\n\n\n# #ä»æ åè¾å¥ä¸­è¯»å Dockerfile è¿è¡æå»º\n\ndocker build - < Dockerfile\n\n\næ\n\ncat Dockerfile | docker build -\n\n\nå¦ææ åè¾å¥ä¼ å¥çæ¯ææ¬æä»¶ï¼åå°å¶è§ä¸º Dockerfileï¼å¹¶å¼å§æå»ºãè¿ç§å½¢å¼ç±äºç´æ¥ä»æ åè¾å¥ä¸­è¯»å Dockerfile çåå®¹ï¼å®æ²¡æä¸ä¸æï¼å æ­¤ä¸å¯ä»¥åå¶ä»æ¹æ³é£æ ·å¯ä»¥å°æ¬å°æä»¶ COPY è¿éåä¹ç±»çäºæã\n\n\n# ä»æ åè¾å¥ä¸­è¯»åä¸ä¸æåç¼©åè¿è¡æå»º\n\ndocker build - < context.tar.gz\n\n\nå¦æåç°æ åè¾å¥çæä»¶æ ¼å¼æ¯ gzipãbzip2 ä»¥å xz çè¯ï¼å°ä¼ä½¿å¶ä¸ºä¸ä¸æåç¼©åï¼ç´æ¥å°å¶å±å¼ï¼å°éé¢è§ä¸ºä¸ä¸æï¼å¹¶å¼å§æå»ºã',normalizedContent:'# ä½¿ç¨ dockerfile å®å¶éå\n\n\n# dockerfile å®å¶éå\n\nä»åæç docker commit çå­¦ä¹ ä¸­ï¼æä»¬å¯ä»¥äºè§£å°ï¼éåçå®å¶å®éä¸å°±æ¯å®å¶æ¯ä¸å±ææ·»å çéç½®ãæä»¶ãå¦ææä»¬å¯ä»¥ææ¯ä¸å±ä¿®æ¹ãå®è£ãæå»ºãæä½çå½ä»¤é½åå¥ä¸ä¸ªèæ¬ï¼ç¨è¿ä¸ªèæ¬æ¥æå»ºãå®å¶éåï¼é£ä¹ä¹åæåçæ æ³éå¤çé®é¢ãéåæå»ºéææ§çé®é¢ãä½ç§¯çé®é¢å°±é½ä¼è§£å³ãè¿ä¸ªèæ¬å°±æ¯ dockerfileã\n\ndockerfile æ¯ä¸ä¸ªææ¬æä»¶ï¼å¶ååå«äºä¸æ¡æ¡çæä»¤(instruction)ï¼æ¯ä¸æ¡æä»¤æå»ºä¸å±ï¼å æ­¤æ¯ä¸æ¡æä»¤çåå®¹ï¼å°±æ¯æè¿°è¯¥å±åºå½å¦ä½æå»ºã\n\nè¿ä»¥ä¹åå®å¶ nginx éåä¸ºä¾ï¼è¿æ¬¡æä»¬ä½¿ç¨ dockerfile æ¥å®å¶ã\n\nå¨ä¸ä¸ªç©ºç½ç®å½ä¸­ï¼å»ºç«ä¸ä¸ªææ¬æä»¶ï¼å¹¶å½åä¸º dockerfileï¼\n\nmkdir mynginx\ncd mynginx\ntouch dockerfile\n\n\nå¶åå®¹ä¸ºï¼\n\nfrom nginx\nrun echo \'<h1>hello, docker!</h1>\' > /usr/share/nginx/html/index.html\n\n\nè¿ä¸ª dockerfile å¾ç®åï¼ä¸å±å°±ä¸¤è¡ãæ¶åå°äºä¸¤æ¡æä»¤ï¼from å runã\n\n\n# from æå®åºç¡éå\n\næè°å®å¶éåï¼é£ä¸å®æ¯ä»¥ä¸ä¸ªéåä¸ºåºç¡ï¼å¨å¶ä¸è¿è¡å®å¶ãå°±åæä»¬ä¹åè¿è¡äºä¸ä¸ª nginx éåçå®¹å¨ï¼åè¿è¡ä¿®æ¹ä¸æ ·ï¼åºç¡éåæ¯å¿é¡»æå®çãè from å°±æ¯æå®åºç¡éåï¼å æ­¤ä¸ä¸ª dockerfile ä¸­ from æ¯å¿å¤çæä»¤ï¼å¹¶ä¸å¿é¡»æ¯ç¬¬ä¸æ¡æä»¤ã\n\nå¨ docker store ä¸æéå¸¸å¤çé«è´¨éçå®æ¹éåï¼æå¯ä»¥ç´æ¥æ¿æ¥ä½¿ç¨çæå¡ç±»çéåï¼å¦ nginxãredisãmongoãmysqlãhttpdãphpãtomcat ç­ï¼ä¹æä¸äºæ¹ä¾¿å¼åãæå»ºãè¿è¡åç§è¯­è¨åºç¨çéåï¼å¦ nodeãopenjdkãpythonãrubyãgolang ç­ãå¯ä»¥å¨å¶ä¸­å¯»æ¾ä¸ä¸ªæç¬¦åæä»¬æç»ç®æ çéåä¸ºåºç¡éåè¿è¡å®å¶ã\n\nå¦ææ²¡ææ¾å°å¯¹åºæå¡çéåï¼å®æ¹éåä¸­è¿æä¾äºä¸äºæ´ä¸ºåºç¡çæä½ç³»ç»éåï¼å¦ ubuntuãdebianãcentosãfedoraãalpine ç­ï¼è¿äºæä½ç³»ç»çè½¯ä»¶åºä¸ºæä»¬æä¾äºæ´å¹¿éçæ©å±ç©ºé´ã\n\né¤äºéæ©ç°æéåä¸ºåºç¡éåå¤ï¼docker è¿å­å¨ä¸ä¸ªç¹æ®çéåï¼åä¸º scratchãè¿ä¸ªéåæ¯èæçæ¦å¿µï¼å¹¶ä¸å®éå­å¨ï¼å®è¡¨ç¤ºä¸ä¸ªç©ºç½çéåã\n\nfrom scratch\n...\n\n\nå¦æä½ ä»¥ scratch ä¸ºåºç¡éåçè¯ï¼æå³çä½ ä¸ä»¥ä»»ä½éåä¸ºåºç¡ï¼æ¥ä¸æ¥æåçæä»¤å°ä½ä¸ºéåç¬¬ä¸å±å¼å§å­å¨ã\n\nä¸ä»¥ä»»ä½ç³»ç»ä¸ºåºç¡ï¼ç´æ¥å°å¯æ§è¡æä»¶å¤å¶è¿éåçåæ³å¹¶ä¸ç½è§ï¼æ¯å¦ swarmãcoreos/etcdãå¯¹äº linux ä¸éæç¼è¯çç¨åºæ¥è¯´ï¼å¹¶ä¸éè¦ææä½ç³»ç»æä¾è¿è¡æ¶æ¯æï¼æéçä¸ååºé½å·²ç»å¨å¯æ§è¡æä»¶éäºï¼å æ­¤ç´æ¥ from scratch ä¼è®©éåä½ç§¯æ´å å°å·§ãä½¿ç¨ go è¯­è¨ å¼åçåºç¨å¾å¤ä¼ä½¿ç¨è¿ç§æ¹å¼æ¥å¶ä½éåï¼è¿ä¹æ¯ä¸ºä»ä¹æäººè®¤ä¸º go æ¯ç¹å«éåå®¹å¨å¾®æå¡æ¶æçè¯­è¨çåå ä¹ä¸ã\n\n\n# run æ§è¡å½ä»¤\n\nrun æä»¤æ¯ç¨æ¥æ§è¡å½ä»¤è¡å½ä»¤çãç±äºå½ä»¤è¡çå¼ºå¤§è½åï¼run æä»¤å¨å®å¶éåæ¶æ¯æå¸¸ç¨çæä»¤ä¹ä¸ãå¶æ ¼å¼æä¸¤ç§ï¼\n\n * shell æ ¼å¼ï¼run <å½ä»¤>ï¼å°±åç´æ¥å¨å½ä»¤è¡ä¸­è¾å¥çå½ä»¤ä¸æ ·ãåæåç dockerfile ä¸­ç run æä»¤å°±æ¯è¿ç§æ ¼å¼ã\n\nrun echo \'<h1>hello, docker!</h1>\' > /usr/share/nginx/html/index.html\n\n\n * exec æ ¼å¼ï¼run ["å¯æ§è¡æä»¶", "åæ°1", "åæ°2"]ï¼è¿æ´åæ¯å½æ°è°ç¨ä¸­çæ ¼å¼ã\n\næ¢ç¶ run å°±å shell èæ¬ä¸æ ·å¯ä»¥æ§è¡å½ä»¤ï¼é£ä¹æä»¬æ¯å¦å°±å¯ä»¥å shell èæ¬ä¸æ ·ææ¯ä¸ªå½ä»¤å¯¹åºä¸ä¸ª run å¢ï¼æ¯å¦è¿æ ·ï¼\n\nfrom debian:jessie\n\nrun apt-get update\nrun apt-get install -y gcc libc6-dev make\nrun wget -o redis.tar.gz "http://download.redis.io/releases/redis-3.2.5.tar.gz"\nrun mkdir -p /usr/src/redis\nrun tar -xzf redis.tar.gz -c /usr/src/redis --strip-components=1\nrun make -c /usr/src/redis\nrun make -c /usr/src/redis install\n\n\nä¹åè¯´è¿ï¼dockerfile ä¸­æ¯ä¸ä¸ªæä»¤é½ä¼å»ºç«ä¸å±ï¼run ä¹ä¸ä¾å¤ãæ¯ä¸ä¸ª run çè¡ä¸ºï¼å°±ååææä»¬æå·¥å»ºç«éåçè¿ç¨ä¸æ ·ï¼æ°å»ºç«ä¸å±ï¼å¨å¶ä¸æ§è¡è¿äºå½ä»¤ï¼æ§è¡ç»æåï¼commit è¿ä¸å±çä¿®æ¹ï¼æææ°çéåã\n\nèä¸é¢çè¿ç§åæ³ï¼åå»ºäº 7 å±éåãè¿æ¯å®å¨æ²¡ææä¹çï¼èä¸å¾å¤è¿è¡æ¶ä¸éè¦çä¸è¥¿ï¼é½è¢«è£è¿äºéåéï¼æ¯å¦ç¼è¯ç¯å¢ãæ´æ°çè½¯ä»¶åç­ç­ãç»æå°±æ¯äº§çéå¸¸èè¿ãéå¸¸å¤å±çéåï¼ä¸ä»ä»å¢å äºæå»ºé¨ç½²çæ¶é´ï¼ä¹å¾å®¹æåºéã è¿æ¯å¾å¤åå­¦ docker çäººå¸¸ç¯çä¸ä¸ªéè¯¯ã\n\nunion fs æ¯ææå¤§å±æ°éå¶çï¼æ¯å¦ aufsï¼æ¾ç»æ¯æå¤§ä¸å¾è¶è¿ 42 å±ï¼ç°å¨æ¯ä¸å¾è¶è¿ 127 å±ã\n\nä¸é¢ç dockerfile æ­£ç¡®çåæ³åºè¯¥æ¯è¿æ ·ï¼\n\nfrom debian:jessie\n\nrun builddeps=\'gcc libc6-dev make\' \\\n    && apt-get update \\\n    && apt-get install -y $builddeps \\\n    && wget -o redis.tar.gz "http://download.redis.io/releases/redis-3.2.5.tar.gz" \\\n    && mkdir -p /usr/src/redis \\\n    && tar -xzf redis.tar.gz -c /usr/src/redis --strip-components=1 \\\n    && make -c /usr/src/redis \\\n    && make -c /usr/src/redis install \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && rm redis.tar.gz \\\n    && rm -r /usr/src/redis \\\n    && apt-get purge -y --auto-remove $builddeps\n\n\né¦åï¼ä¹åææçå½ä»¤åªæä¸ä¸ªç®çï¼å°±æ¯ç¼è¯ãå®è£ redis å¯æ§è¡æä»¶ãå æ­¤æ²¡æå¿è¦å»ºç«å¾å¤å±ï¼è¿åªæ¯ä¸å±çäºæãå æ­¤ï¼è¿éæ²¡æä½¿ç¨å¾å¤ä¸ª run å¯¹ä¸ä¸å¯¹åºä¸åçå½ä»¤ï¼èæ¯ä»ä»ä½¿ç¨ä¸ä¸ª run æä»¤ï¼å¹¶ä½¿ç¨ && å°åä¸ªæéå½ä»¤ä¸²èèµ·æ¥ãå°ä¹åç 7 å±ï¼ç®åä¸ºäº 1 å±ãå¨æ°å dockerfile çæ¶åï¼è¦ç»å¸¸æéèªå·±ï¼è¿å¹¶ä¸æ¯å¨å shell èæ¬ï¼èæ¯å¨å®ä¹æ¯ä¸å±è¯¥å¦ä½æå»ºã\n\nå¹¶ä¸ï¼è¿éä¸ºäºæ ¼å¼åè¿è¿è¡äºæ¢è¡ãdockerfile æ¯æ shell ç±»çè¡å°¾æ·»å  \\ çå½ä»¤æ¢è¡æ¹å¼ï¼ä»¥åè¡é¦ # è¿è¡æ³¨éçæ ¼å¼ãè¯å¥½çæ ¼å¼ï¼æ¯å¦æ¢è¡ãç¼©è¿ãæ³¨éç­ï¼ä¼è®©ç»´æ¤ãæéæ´ä¸ºå®¹æï¼è¿æ¯ä¸ä¸ªæ¯è¾å¥½çä¹ æ¯ã\n\næ­¤å¤ï¼è¿å¯ä»¥çå°è¿ä¸ç»å½ä»¤çæåæ·»å äºæ¸çå·¥ä½çå½ä»¤ï¼å é¤äºä¸ºäºç¼è¯æå»ºæéè¦çè½¯ä»¶ï¼æ¸çäºææä¸è½½ãå±å¼çæä»¶ï¼å¹¶ä¸è¿æ¸çäº apt ç¼å­æä»¶ãè¿æ¯å¾éè¦çä¸æ­¥ï¼æä»¬ä¹åè¯´è¿ï¼éåæ¯å¤å±å­å¨ï¼æ¯ä¸å±çä¸è¥¿å¹¶ä¸ä¼å¨ä¸ä¸å±è¢«å é¤ï¼ä¼ä¸ç´è·éçéåãå æ­¤éåæå»ºæ¶ï¼ä¸å®è¦ç¡®ä¿æ¯ä¸å±åªæ·»å çæ­£éè¦æ·»å çä¸è¥¿ï¼ä»»ä½æ å³çä¸è¥¿é½åºè¯¥æ¸çæã\n\nå¾å¤äººåå­¦ docker å¶ä½åºäºå¾èè¿çéåçåå ä¹ä¸ï¼å°±æ¯å¿è®°äºæ¯ä¸å±æå»ºçæåä¸å®è¦æ¸çææ å³æä»¶ã\n\n\n# æå»ºéå\n\nå¥½äºï¼è®©æä»¬ååå°ä¹åå®å¶ç nginx éåç dockerfile æ¥ãç°å¨æä»¬æç½äºè¿ä¸ª dockerfile çåå®¹ï¼é£ä¹è®©æä»¬æ¥æå»ºè¿ä¸ªéåå§ã\n\nå¨ dockerfile æä»¶æå¨ç®å½æ§è¡ï¼\n\ndocker build -t nginx:v3 .\nsending build context to docker daemon 2.048 kb\nstep 1 : from nginx\n ---\x3e e43d811ce2f4\nstep 2 : run echo \'<h1>hello, docker!</h1>\' > /usr/share/nginx/html/index.html\n ---\x3e running in 9cdc27646c7b\n ---\x3e 44aa4490ce2c\nremoving intermediate container 9cdc27646c7b\nsuccessfully built 44aa4490ce2c\n\n\nä»å½ä»¤çè¾åºç»æä¸­ï¼æä»¬å¯ä»¥æ¸æ°ççå°éåçæå»ºè¿ç¨ãå¨ step 2 ä¸­ï¼å¦åæä»¬ä¹åæè¯´çé£æ ·ï¼run æä»¤å¯å¨äºä¸ä¸ªå®¹å¨ 9cdc27646c7bï¼æ§è¡äºæè¦æ±çå½ä»¤ï¼å¹¶æåæäº¤äºè¿ä¸å± 44aa4490ce2cï¼éåå é¤äºæç¨å°çè¿ä¸ªå®¹å¨ 9cdc27646c7bã\n\nè¿éæä»¬ä½¿ç¨äº docker build å½ä»¤è¿è¡éåæå»ºãå¶æ ¼å¼ä¸ºï¼\n\ndocker build [éé¡¹] <ä¸ä¸æè·¯å¾/url/->\n\n\nå¨è¿éæä»¬æå®äºæç»éåçåç§° -t nginx:v3ï¼æå»ºæååï¼æä»¬å¯ä»¥åä¹åè¿è¡ nginx:v2 é£æ ·æ¥è¿è¡è¿ä¸ªéåï¼å¶ç»æä¼å nginx:v2 ä¸æ ·ã\n\n\n# éåæå»ºä¸ä¸æï¼contextï¼\n\nå¦ææ³¨æï¼ä¼çå° docker build å½ä»¤æåæä¸ä¸ª .ã. è¡¨ç¤ºå½åç®å½ï¼è dockerfile å°±å¨å½åç®å½ï¼å æ­¤ä¸å°åå­¦èä»¥ä¸ºè¿ä¸ªè·¯å¾æ¯å¨æå® dockerfile æå¨è·¯å¾ï¼è¿ä¹çè§£å¶å®æ¯ä¸åç¡®çãå¦æå¯¹åºä¸é¢çå½ä»¤æ ¼å¼ï¼ä½ å¯è½ä¼åç°ï¼è¿æ¯å¨æå®ä¸ä¸æè·¯å¾ãé£ä¹ä»ä¹æ¯ä¸ä¸æå¢ï¼\n\né¦åæä»¬è¦çè§£ docker build çå·¥ä½åçãdocker å¨è¿è¡æ¶åä¸º docker å¼æï¼ä¹å°±æ¯æå¡ç«¯å®æ¤è¿ç¨ï¼åå®¢æ·ç«¯å·¥å·ãdocker çå¼ææä¾äºä¸ç» rest apiï¼è¢«ç§°ä¸º docker remote apiï¼èå¦ docker å½ä»¤è¿æ ·çå®¢æ·ç«¯å·¥å·ï¼åæ¯éè¿è¿ç» api ä¸ docker å¼æäº¤äºï¼ä»èå®æåç§åè½ãå æ­¤ï¼è½ç¶è¡¨é¢ä¸æä»¬å¥½åæ¯å¨æ¬æºæ§è¡åç§ docker åè½ï¼ä½å®éä¸ï¼ä¸åé½æ¯ä½¿ç¨çè¿ç¨è°ç¨å½¢å¼å¨æå¡ç«¯ï¼docker å¼æï¼å®æãä¹å ä¸ºè¿ç§ c/s è®¾è®¡ï¼è®©æä»¬æä½è¿ç¨æå¡å¨ç docker å¼æåå¾è½»èæä¸¾ã\n\nå½æä»¬è¿è¡éåæå»ºçæ¶åï¼å¹¶éææå®å¶é½ä¼éè¿ run æä»¤å®æï¼ç»å¸¸ä¼éè¦å°ä¸äºæ¬å°æä»¶å¤å¶è¿éåï¼æ¯å¦éè¿ copy æä»¤ãadd æä»¤ç­ãè docker build å½ä»¤æå»ºéåï¼å¶å®å¹¶éå¨æ¬å°æå»ºï¼èæ¯å¨æå¡ç«¯ï¼ä¹å°±æ¯ docker å¼æä¸­æå»ºçãé£ä¹å¨è¿ç§å®¢æ·ç«¯/æå¡ç«¯çæ¶æä¸­ï¼å¦ä½æè½è®©æå¡ç«¯è·å¾æ¬å°æä»¶å¢ï¼\n\nè¿å°±å¼å¥äºä¸ä¸æçæ¦å¿µãå½æå»ºçæ¶åï¼ç¨æ·ä¼æå®æå»ºéåä¸ä¸æçè·¯å¾ï¼docker build å½ä»¤å¾ç¥è¿ä¸ªè·¯å¾åï¼ä¼å°è·¯å¾ä¸çææåå®¹æåï¼ç¶åä¸ä¼ ç» docker å¼æãè¿æ · docker å¼ææ¶å°è¿ä¸ªä¸ä¸æååï¼å±å¼å°±ä¼è·å¾æå»ºéåæéçä¸åæä»¶ã\n\nå¦æå¨ dockerfile ä¸­è¿ä¹åï¼\n\ncopy ./package.json /app/\n\n\nè¿å¹¶ä¸æ¯è¦å¤å¶æ§è¡ docker build å½ä»¤æå¨çç®å½ä¸ç package.jsonï¼ä¹ä¸æ¯å¤å¶ dockerfile æå¨ç®å½ä¸ç package.jsonï¼èæ¯å¤å¶ ä¸ä¸æï¼contextï¼ ç®å½ä¸ç package.jsonã\n\nå æ­¤ï¼copy è¿ç±»æä»¤ä¸­çæºæä»¶çè·¯å¾é½æ¯ç¸å¯¹è·¯å¾ãè¿ä¹æ¯åå­¦èç»å¸¸ä¼é®çä¸ºä»ä¹ copy ../package.json /app æè copy /opt/xxxx /app æ æ³å·¥ä½çåå ï¼å ä¸ºè¿äºè·¯å¾å·²ç»è¶åºäºä¸ä¸æçèå´ï¼docker å¼ææ æ³è·å¾è¿äºä½ç½®çæä»¶ãå¦æççéè¦é£äºæä»¶ï¼åºè¯¥å°å®ä»¬å¤å¶å°ä¸ä¸æç®å½ä¸­å»ã\n\nç°å¨å°±å¯ä»¥çè§£åæçå½ä»¤ docker build -t nginx:v3 . ä¸­çè¿ä¸ª .ï¼å®éä¸æ¯å¨æå®ä¸ä¸æçç®å½ï¼docker build å½ä»¤ä¼å°è¯¥ç®å½ä¸çåå®¹æåäº¤ç» docker å¼æä»¥å¸®å©æå»ºéåã\n\nå¦æè§å¯ docker build è¾åºï¼æä»¬å¶å®å·²ç»çå°äºè¿ä¸ªåéä¸ä¸æçè¿ç¨ï¼\n\ndocker build -t nginx:v3 .\nsending build context to docker daemon 2.048 kb\n...\n\n\nçè§£æå»ºä¸ä¸æå¯¹äºéåæå»ºæ¯å¾éè¦çï¼é¿åç¯ä¸äºä¸åºè¯¥çéè¯¯ãæ¯å¦æäºåå­¦èå¨åç° copy /opt/xxxx /app ä¸å·¥ä½åï¼äºæ¯å¹²èå° dockerfile æ¾å°äºç¡¬çæ ¹ç®å½å»æå»ºï¼ç»æåç° docker build æ§è¡åï¼å¨åéä¸ä¸ªå å gb çä¸è¥¿ï¼æä¸ºç¼æ¢èä¸å¾å®¹ææå»ºå¤±è´¥ãé£æ¯å ä¸ºè¿ç§åæ³æ¯å¨è®© docker build æåæ´ä¸ªç¡¬çï¼è¿æ¾ç¶æ¯ä½¿ç¨éè¯¯ã\n\nä¸è¬æ¥è¯´ï¼åºè¯¥ä¼å° dockerfile ç½®äºä¸ä¸ªç©ºç®å½ä¸ï¼æèé¡¹ç®æ ¹ç®å½ä¸ãå¦æè¯¥ç®å½ä¸æ²¡ææéæä»¶ï¼é£ä¹åºè¯¥ææéæä»¶å¤å¶ä¸ä»½è¿æ¥ãå¦æç®å½ä¸æäºä¸è¥¿ç¡®å®ä¸å¸ææå»ºæ¶ä¼ ç» docker å¼æï¼é£ä¹å¯ä»¥ç¨ .gitignore ä¸æ ·çè¯­æ³åä¸ä¸ª .dockerignoreï¼è¯¥æä»¶æ¯ç¨äºåé¤ä¸éè¦ä½ä¸ºä¸ä¸æä¼ éç» docker å¼æçã\n\né£ä¹ä¸ºä»ä¹ä¼æäººè¯¯ä»¥ä¸º . æ¯æå® dockerfile æå¨ç®å½å¢ï¼è¿æ¯å ä¸ºå¨é»è®¤æåµä¸ï¼å¦æä¸é¢å¤æå® dockerfile çè¯ï¼ä¼å°ä¸ä¸æç®å½ä¸çåä¸º dockerfile çæä»¶ä½ä¸º dockerfileã\n\nè¿åªæ¯é»è®¤è¡ä¸ºï¼å®éä¸ dockerfile çæä»¶åå¹¶ä¸è¦æ±å¿é¡»ä¸º dockerfileï¼èä¸å¹¶ä¸è¦æ±å¿é¡»ä½äºä¸ä¸æç®å½ä¸­ï¼æ¯å¦å¯ä»¥ç¨ -f ../dockerfile.php åæ°æå®æä¸ªæä»¶ä½ä¸º dockerfileã\n\nå½ç¶ï¼ä¸è¬å¤§å®¶ä¹ æ¯æ§çä¼ä½¿ç¨é»è®¤çæä»¶å dockerfileï¼ä»¥åä¼å°å¶ç½®äºéåæå»ºä¸ä¸æç®å½ä¸­ã\n\n\n# å¶å® docker build çç¨æ³\n\n\n# ç´æ¥ç¨ git repo è¿è¡æå»º\n\næè®¸ä½ å·²ç»æ³¨æå°äºï¼docker build è¿æ¯æä» url æå»ºï¼æ¯å¦å¯ä»¥ç´æ¥ä» git repo ä¸­æå»ºï¼\n\ndocker build https://github.com/twang2218/gitlab-ce-zh.git#:8.14\ndocker build https://github.com/twang2218/gitlab-ce-zh.git\\#:8.14\nsending build context to docker daemon 2.048 kb\nstep 1 : from gitlab/gitlab-ce:8.14.0-ce.0\n8.14.0-ce.0: pulling from gitlab/gitlab-ce\naed15891ba52: already exists\n773ae8583d14: already exists\n...\n\n\nè¿è¡å½ä»¤æå®äºæå»ºæéç git repoï¼å¹¶ä¸æå®é»è®¤ç master åæ¯ï¼æå»ºç®å½ä¸º /8.14/ï¼ç¶å docker å°±ä¼èªå·±å» git clone è¿ä¸ªé¡¹ç®ãåæ¢å°æå®åæ¯ãå¹¶è¿å¥å°æå®ç®å½åå¼å§æå»ºã\n\n\n# ç¨ç»å®ç tar åç¼©åæå»º\n\ndocker build http://server/context.tar.gz\n\n\nå¦ææç»åºç url ä¸æ¯ä¸ª git repoï¼èæ¯ä¸ª tar åç¼©åï¼é£ä¹ docker å¼æä¼ä¸è½½è¿ä¸ªåï¼å¹¶èªå¨è§£åç¼©ï¼ä»¥å¶ä½ä¸ºä¸ä¸æï¼å¼å§æå»ºã\n\n\n# #ä»æ åè¾å¥ä¸­è¯»å dockerfile è¿è¡æå»º\n\ndocker build - < dockerfile\n\n\næ\n\ncat dockerfile | docker build -\n\n\nå¦ææ åè¾å¥ä¼ å¥çæ¯ææ¬æä»¶ï¼åå°å¶è§ä¸º dockerfileï¼å¹¶å¼å§æå»ºãè¿ç§å½¢å¼ç±äºç´æ¥ä»æ åè¾å¥ä¸­è¯»å dockerfile çåå®¹ï¼å®æ²¡æä¸ä¸æï¼å æ­¤ä¸å¯ä»¥åå¶ä»æ¹æ³é£æ ·å¯ä»¥å°æ¬å°æä»¶ copy è¿éåä¹ç±»çäºæã\n\n\n# ä»æ åè¾å¥ä¸­è¯»åä¸ä¸æåç¼©åè¿è¡æå»º\n\ndocker build - < context.tar.gz\n\n\nå¦æåç°æ åè¾å¥çæä»¶æ ¼å¼æ¯ gzipãbzip2 ä»¥å xz çè¯ï¼å°ä¼ä½¿å¶ä¸ºä¸ä¸æåç¼©åï¼ç´æ¥å°å¶å±å¼ï¼å°éé¢è§ä¸ºä¸ä¸æï¼å¹¶å¼å§æå»ºã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Dockerfile æä»¤è¯¦è§£",frontmatter:{title:"Dockerfile æä»¤è¯¦è§£",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/6d2add/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/08.Dockerfile%20%E6%8C%87%E4%BB%A4%E8%AF%A6%E8%A7%A3.html",relativePath:"17.Docker/04.Docker éå/08.Dockerfile æä»¤è¯¦è§£.md",key:"v-92e32acc",path:"/pages/6d2add/",headers:[{level:2,title:"COPY å¤å¶æä»¶",slug:"copy-å¤å¶æä»¶",normalizedTitle:"copy å¤å¶æä»¶",charIndex:100},{level:2,title:"ADD æ´é«çº§çå¤å¶æä»¶",slug:"add-æ´é«çº§çå¤å¶æä»¶",normalizedTitle:"add æ´é«çº§çå¤å¶æä»¶",charIndex:600},{level:2,title:"CMD å®¹å¨å¯å¨å½ä»¤",slug:"cmd-å®¹å¨å¯å¨å½ä»¤",normalizedTitle:"cmd å®¹å¨å¯å¨å½ä»¤",charIndex:1403},{level:2,title:"ENTRYPOINT å¥å£ç¹",slug:"entrypoint-å¥å£ç¹",normalizedTitle:"entrypoint å¥å£ç¹",charIndex:2772},{level:3,title:"åºæ¯ä¸ï¼è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨",slug:"åºæ¯ä¸-è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨",normalizedTitle:"åºæ¯ä¸ï¼è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨",charIndex:3124},{level:3,title:"åºæ¯äºï¼åºç¨è¿è¡åçåå¤å·¥ä½",slug:"åºæ¯äº-åºç¨è¿è¡åçåå¤å·¥ä½",normalizedTitle:"åºæ¯äºï¼åºç¨è¿è¡åçåå¤å·¥ä½",charIndex:4858},{level:2,title:"ENV è®¾ç½®ç¯å¢åé",slug:"env-è®¾ç½®ç¯å¢åé",normalizedTitle:"env è®¾ç½®ç¯å¢åé",charIndex:5788},{level:2,title:"ARG æå»ºåæ°",slug:"arg-æå»ºåæ°",normalizedTitle:"arg æå»ºåæ°",charIndex:6938},{level:2,title:"VOLUME å®ä¹å¿åå·",slug:"volume-å®ä¹å¿åå·",normalizedTitle:"volume å®ä¹å¿åå·",charIndex:7440},{level:2,title:"EXPOSE æ´é²ç«¯å£",slug:"expose-æ´é²ç«¯å£",normalizedTitle:"expose æ´é²ç«¯å£",charIndex:7926},{level:2,title:"WORKDIR æå®å·¥ä½ç®å½",slug:"workdir-æå®å·¥ä½ç®å½",normalizedTitle:"workdir æå®å·¥ä½ç®å½",charIndex:8534},{level:2,title:"USER æå®å½åç¨æ·",slug:"user-æå®å½åç¨æ·",normalizedTitle:"user æå®å½åç¨æ·",charIndex:9171},{level:2,title:"HEALTHCHECK å¥åº·æ£æ¥",slug:"healthcheck-å¥åº·æ£æ¥",normalizedTitle:"healthcheck å¥åº·æ£æ¥",charIndex:9887},{level:2,title:"ONBUILD ä¸ºä»äººä½å«è¡£",slug:"onbuild-ä¸ºä»äººä½å«è¡£",normalizedTitle:"onbuild ä¸ºä»äººä½å«è¡£",charIndex:13126},{level:2,title:"åèææ¡£",slug:"åèææ¡£",normalizedTitle:"åèææ¡£",charIndex:15039}],headersStr:"COPY å¤å¶æä»¶ ADD æ´é«çº§çå¤å¶æä»¶ CMD å®¹å¨å¯å¨å½ä»¤ ENTRYPOINT å¥å£ç¹ åºæ¯ä¸ï¼è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨ åºæ¯äºï¼åºç¨è¿è¡åçåå¤å·¥ä½ ENV è®¾ç½®ç¯å¢åé ARG æå»ºåæ° VOLUME å®ä¹å¿åå· EXPOSE æ´é²ç«¯å£ WORKDIR æå®å·¥ä½ç®å½ USER æå®å½åç¨æ· HEALTHCHECK å¥åº·æ£æ¥ ONBUILD ä¸ºä»äººä½å«è¡£ åèææ¡£",content:'# Dockerfile æä»¤è¯¦è§£\n\næä»¬å·²ç»ä»ç»äº FROMï¼RUNï¼è¿æåäº COPY, ADDï¼å¶å® Dockerfile åè½å¾å¼ºå¤§ï¼å®æä¾äºåå¤ä¸ªæä»¤ãä¸é¢æä»¬ç»§ç»­è®²è§£å¶ä»çæä»¤ã\n\n\n# COPY å¤å¶æä»¶\n\næ ¼å¼ï¼\n\n * COPY <æºè·¯å¾>... <ç®æ è·¯å¾>\n * COPY ["<æºè·¯å¾1>",... "<ç®æ è·¯å¾>"]\n\nå RUN æä»¤ä¸æ ·ï¼ä¹æä¸¤ç§æ ¼å¼ï¼ä¸ç§ç±»ä¼¼äºå½ä»¤è¡ï¼ä¸ç§ç±»ä¼¼äºå½æ°è°ç¨ã\n\nCOPY æä»¤å°ä»æå»ºä¸ä¸æç®å½ä¸­ <æºè·¯å¾> çæä»¶/ç®å½å¤å¶å°æ°çä¸å±çéååç <ç®æ è·¯å¾> ä½ç½®ãæ¯å¦ï¼\n\nCOPY package.json /usr/src/app/\n\n\n<æºè·¯å¾> å¯ä»¥æ¯å¤ä¸ªï¼çè³å¯ä»¥æ¯ééç¬¦ï¼å¶ééç¬¦è§åè¦æ»¡è¶³ Go ç filepath.Match è§åï¼å¦ï¼\n\nCOPY hom* /mydir/\nCOPY hom?.txt /mydir/\n\n\n<ç®æ è·¯å¾> å¯ä»¥æ¯å®¹å¨åçç»å¯¹è·¯å¾ï¼ä¹å¯ä»¥æ¯ç¸å¯¹äºå·¥ä½ç®å½çç¸å¯¹è·¯å¾ï¼å·¥ä½ç®å½å¯ä»¥ç¨ WORKDIR æä»¤æ¥æå®ï¼ãç®æ è·¯å¾ä¸éè¦äºååå»ºï¼å¦æç®å½ä¸å­å¨ä¼å¨å¤å¶æä»¶ååè¡åå»ºç¼ºå¤±ç®å½ã\n\næ­¤å¤ï¼è¿éè¦æ³¨æä¸ç¹ï¼ä½¿ç¨ COPY æä»¤ï¼æºæä»¶çåç§åæ°æ®é½ä¼ä¿çãæ¯å¦è¯»ãåãæ§è¡æéãæä»¶åæ´æ¶é´ç­ãè¿ä¸ªç¹æ§å¯¹äºéåå®å¶å¾æç¨ãç¹å«æ¯æå»ºç¸å³æä»¶é½å¨ä½¿ç¨ Git è¿è¡ç®¡ççæ¶åã\n\n\n# ADD æ´é«çº§çå¤å¶æä»¶\n\nADD æä»¤å COPY çæ ¼å¼åæ§è´¨åºæ¬ä¸è´ãä½æ¯å¨ COPY åºç¡ä¸å¢å äºä¸äºåè½ã\n\næ¯å¦ <æºè·¯å¾> å¯ä»¥æ¯ä¸ä¸ª URLï¼è¿ç§æåµä¸ï¼Docker å¼æä¼è¯å¾å»ä¸è½½è¿ä¸ªé¾æ¥çæä»¶æ¾å° <ç®æ è·¯å¾> å»ãä¸è½½åçæä»¶æéèªå¨è®¾ç½®ä¸º 600ï¼å¦æè¿å¹¶ä¸æ¯æ³è¦çæéï¼é£ä¹è¿éè¦å¢å é¢å¤çä¸å± RUN è¿è¡æéè°æ´ï¼å¦å¤ï¼å¦æä¸è½½çæ¯ä¸ªåç¼©åï¼éè¦è§£åç¼©ï¼ä¹ä¸æ ·è¿éè¦é¢å¤çä¸å± RUN æä»¤è¿è¡è§£åç¼©ãæä»¥ä¸å¦ç´æ¥ä½¿ç¨ RUN æä»¤ï¼ç¶åä½¿ç¨ wget æè curl å·¥å·ä¸è½½ï¼å¤çæéãè§£åç¼©ãç¶åæ¸çæ ç¨æä»¶æ´åçãå æ­¤ï¼è¿ä¸ªåè½å¶å®å¹¶ä¸å®ç¨ï¼èä¸ä¸æ¨èä½¿ç¨ã\n\nå¦æ <æºè·¯å¾> ä¸ºä¸ä¸ª tar åç¼©æä»¶çè¯ï¼åç¼©æ ¼å¼ä¸º gzip, bzip2 ä»¥å xz çæåµä¸ï¼ADD æä»¤å°ä¼èªå¨è§£åç¼©è¿ä¸ªåç¼©æä»¶å° <ç®æ è·¯å¾> å»ã\n\nå¨æäºæåµä¸ï¼è¿ä¸ªèªå¨è§£åç¼©çåè½éå¸¸æç¨ï¼æ¯å¦å®æ¹éå ubuntu ä¸­ï¼\n\nFROM scratch\nADD ubuntu-xenial-core-cloudimg-amd64-root.tar.gz /\n...\n\n\nä½å¨æäºæåµä¸ï¼å¦ææä»¬ççæ¯å¸æå¤å¶ä¸ªåç¼©æä»¶è¿å»ï¼èä¸è§£åç¼©ï¼è¿æ¶å°±ä¸å¯ä»¥ä½¿ç¨ ADD å½ä»¤äºã\n\nå¨ Docker å®æ¹ç Dockerfile æä½³å®è·µææ¡£ ä¸­è¦æ±ï¼å°½å¯è½çä½¿ç¨ COPYï¼å ä¸º COPY çè¯­ä¹å¾æç¡®ï¼å°±æ¯å¤å¶æä»¶èå·²ï¼è ADD ååå«äºæ´å¤æçåè½ï¼å¶è¡ä¸ºä¹ä¸ä¸å®å¾æ¸æ°ãæéåä½¿ç¨ ADD çåºåï¼å°±æ¯ææåçéè¦èªå¨è§£åç¼©çåºåã\n\nå¦å¤éè¦æ³¨æçæ¯ï¼ADD æä»¤ä¼ä»¤éåæå»ºç¼å­å¤±æï¼ä»èå¯è½ä¼ä»¤éåæå»ºåå¾æ¯è¾ç¼æ¢ã\n\nå æ­¤å¨ COPY å ADD æä»¤ä¸­éæ©çæ¶åï¼å¯ä»¥éµå¾ªè¿æ ·çååï¼ææçæä»¶å¤å¶åä½¿ç¨ COPY æä»¤ï¼ä»å¨éè¦èªå¨è§£åç¼©çåºåä½¿ç¨ ADDã\n\n\n# CMD å®¹å¨å¯å¨å½ä»¤\n\nCMD æä»¤çæ ¼å¼å RUN ç¸ä¼¼ï¼ä¹æ¯ä¸¤ç§æ ¼å¼ï¼\n\n * shell æ ¼å¼ï¼CMD <å½ä»¤>\n * exec æ ¼å¼ï¼CMD ["å¯æ§è¡æä»¶", "åæ°1", "åæ°2"...]\n * åæ°åè¡¨æ ¼å¼ï¼CMD ["åæ°1", "åæ°2"...]ãå¨æå®äº ENTRYPOINT æä»¤åï¼ç¨ CMD æå®å·ä½çåæ°ã\n\nä¹åä»ç»å®¹å¨çæ¶åæ¾ç»è¯´è¿ï¼Docker ä¸æ¯èææºï¼å®¹å¨å°±æ¯è¿ç¨ãæ¢ç¶æ¯è¿ç¨ï¼é£ä¹å¨å¯å¨å®¹å¨çæ¶åï¼éè¦æå®æè¿è¡çç¨åºååæ°ãCMD æä»¤å°±æ¯ç¨äºæå®é»è®¤çå®¹å¨ä¸»è¿ç¨çå¯å¨å½ä»¤çã\n\nå¨è¿è¡æ¶å¯ä»¥æå®æ°çå½ä»¤æ¥æ¿ä»£éåè®¾ç½®ä¸­çè¿ä¸ªé»è®¤å½ä»¤ï¼æ¯å¦ï¼ubuntu éåé»è®¤ç CMD æ¯ /bin/bashï¼å¦ææä»¬ç´æ¥ docker run -it ubuntu çè¯ï¼ä¼ç´æ¥è¿å¥ bashãæä»¬ä¹å¯ä»¥å¨è¿è¡æ¶æå®è¿è¡å«çå½ä»¤ï¼å¦ docker run -it ubuntu cat /etc/os-releaseãè¿å°±æ¯ç¨ cat /etc/os-release å½ä»¤æ¿æ¢äºé»è®¤ç /bin/bash å½ä»¤äºï¼è¾åºäºç³»ç»çæ¬ä¿¡æ¯ã\n\nå¨æä»¤æ ¼å¼ä¸ï¼ä¸è¬æ¨èä½¿ç¨ exec æ ¼å¼ï¼è¿ç±»æ ¼å¼å¨è§£ææ¶ä¼è¢«è§£æä¸º JSON æ°ç»ï¼å æ­¤ä¸å®è¦ä½¿ç¨åå¼å· "ï¼èä¸è¦ä½¿ç¨åå¼å·ã\n\nå¦æä½¿ç¨ shell æ ¼å¼çè¯ï¼å®éçå½ä»¤ä¼è¢«åè£ä¸º sh -c çåæ°çå½¢å¼è¿è¡æ§è¡ãæ¯å¦ï¼\n\nCMD echo $HOME\n\n\nå¨å®éæ§è¡ä¸­ï¼ä¼å°å¶åæ´ä¸ºï¼\n\nCMD [ "sh", "-c", "echo $HOME" ]\n\n\nè¿å°±æ¯ä¸ºä»ä¹æä»¬å¯ä»¥ä½¿ç¨ç¯å¢åéçåå ï¼å ä¸ºè¿äºç¯å¢åéä¼è¢« shell è¿è¡è§£æå¤çã\n\næå° CMD å°±ä¸å¾ä¸æå®¹å¨ä¸­åºç¨å¨åå°æ§è¡ååå°æ§è¡çé®é¢ãè¿æ¯åå­¦èå¸¸åºç°çä¸ä¸ªæ··æ·ã\n\nDocker ä¸æ¯èææºï¼å®¹å¨ä¸­çåºç¨é½åºè¯¥ä»¥åå°æ§è¡ï¼èä¸æ¯åèææºãç©çæºéé¢é£æ ·ï¼ç¨ upstart/systemd å»å¯å¨åå°æå¡ï¼å®¹å¨åæ²¡æåå°æå¡çæ¦å¿µã\n\nä¸äºåå­¦èå° CMD åä¸ºï¼\n\nCMD service nginx start\n\n\nç¶ååç°å®¹å¨æ§è¡åå°±ç«å³éåºäºãçè³å¨å®¹å¨åå»ä½¿ç¨ systemctl å½ä»¤ç»æå´åç°æ ¹æ¬æ§è¡ä¸äºãè¿å°±æ¯å ä¸ºæ²¡æææç½åå°ãåå°çæ¦å¿µï¼æ²¡æåºåå®¹å¨åèææºçå·®å¼ï¼ä¾æ§å¨ä»¥ä¼ ç»èææºçè§åº¦å»çè§£å®¹å¨ã\n\nå¯¹äºå®¹å¨èè¨ï¼å¶å¯å¨ç¨åºå°±æ¯å®¹å¨åºç¨è¿ç¨ï¼å®¹å¨å°±æ¯ä¸ºäºä¸»è¿ç¨èå­å¨çï¼ä¸»è¿ç¨éåºï¼å®¹å¨å°±å¤±å»äºå­å¨çæä¹ï¼ä»èéåºï¼å¶å®è¾å©è¿ç¨ä¸æ¯å®éè¦å³å¿çä¸è¥¿ã\n\nèä½¿ç¨ service nginx start å½ä»¤ï¼åæ¯å¸æ upstart æ¥ä»¥åå°å®æ¤è¿ç¨å½¢å¼å¯å¨ nginx æå¡ãèåæè¯´äº CMD service nginx start ä¼è¢«çè§£ä¸º CMD [ "sh", "-c", "service nginx start"]ï¼å æ­¤ä¸»è¿ç¨å®éä¸æ¯ shãé£ä¹å½ service nginx start å½ä»¤ç»æåï¼sh ä¹å°±ç»æäºï¼sh ä½ä¸ºä¸»è¿ç¨éåºäºï¼èªç¶å°±ä¼ä»¤å®¹å¨éåºã\n\næ­£ç¡®çåæ³æ¯ç´æ¥æ§è¡ nginx å¯æ§è¡æä»¶ï¼å¹¶ä¸è¦æ±ä»¥åå°å½¢å¼è¿è¡ãæ¯å¦ï¼\n\nCMD ["nginx", "-g", "daemon off;"]\n\n\n\n# ENTRYPOINT å¥å£ç¹\n\nENTRYPOINT çæ ¼å¼å RUN æä»¤æ ¼å¼ä¸æ ·ï¼åä¸º exec æ ¼å¼å shell æ ¼å¼ã\n\nENTRYPOINT çç®çå CMD ä¸æ ·ï¼é½æ¯å¨æå®å®¹å¨å¯å¨ç¨åºååæ°ãENTRYPOINT å¨è¿è¡æ¶ä¹å¯ä»¥æ¿ä»£ï¼ä¸è¿æ¯ CMD è¦ç¥æ¾ç¹çï¼éè¦éè¿ docker run çåæ° --entrypoint æ¥æå®ã\n\nå½æå®äº ENTRYPOINT åï¼CMD çå«ä¹å°±åçäºæ¹åï¼ä¸åæ¯ç´æ¥çè¿è¡å¶å½ä»¤ï¼èæ¯å° CMD çåå®¹ä½ä¸ºåæ°ä¼ ç» ENTRYPOINT æä»¤ï¼æ¢å¥è¯è¯´å®éæ§è¡æ¶ï¼å°åä¸ºï¼\n\n<ENTRYPOINT> "<CMD>"\n\n\né£ä¹æäº CMD åï¼ä¸ºä»ä¹è¿è¦æ ENTRYPOINT å¢ï¼è¿ç§ "" æä»ä¹å¥½å¤ä¹ï¼è®©æä»¬æ¥çå ä¸ªåºæ¯ã\n\n\n# åºæ¯ä¸ï¼è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨\n\nåè®¾æä»¬éè¦ä¸ä¸ªå¾ç¥èªå·±å½åå¬ç½ IP çéåï¼é£ä¹å¯ä»¥åç¨ CMD æ¥å®ç°ï¼\n\nFROM ubuntu:16.04\nRUN apt-get update \\\n    && apt-get install -y curl \\\n    && rm -rf /var/lib/apt/lists/*\nCMD [ "curl", "-s", "http://ip.cn" ]\n\n\nåå¦æä»¬ä½¿ç¨ docker build -t myip . æ¥æå»ºéåçè¯ï¼å¦ææä»¬éè¦æ¥è¯¢å½åå¬ç½ IPï¼åªéè¦æ§è¡ï¼\n\ndocker run myip\nå½å IPï¼61.148.226.66 æ¥èªï¼åäº¬å¸ èé\n\n\nå¯ï¼è¿ä¹çèµ·æ¥å¥½åå¯ä»¥ç´æ¥æéåå½åå½ä»¤ä½¿ç¨äºï¼ä¸è¿å½ä»¤æ»æåæ°ï¼å¦ææä»¬å¸æå åæ°å¢ï¼æ¯å¦ä»ä¸é¢ç CMD ä¸­å¯ä»¥çå°å®è´¨çå½ä»¤æ¯ curlï¼é£ä¹å¦ææä»¬å¸ææ¾ç¤º HTTP å¤´ä¿¡æ¯ï¼å°±éè¦å ä¸ -i åæ°ãé£ä¹æä»¬å¯ä»¥ç´æ¥å  -i åæ°ç» docker run myip ä¹ï¼\n\ndocker run myip -i\ndocker: Error response from daemon: invalid header field value "oci runtime error: container_linux.go:247: starting container process caused \\"exec: \\\\\\"-i\\\\\\": executable file not found in $PATH\\"\\n".\n\n\næä»¬å¯ä»¥çå°å¯æ§è¡æä»¶æ¾ä¸å°çæ¥éï¼executable file not foundãä¹åæä»¬è¯´è¿ï¼è·å¨éåååé¢çæ¯ commandï¼è¿è¡æ¶ä¼æ¿æ¢ CMD çé»è®¤å¼ãå æ­¤è¿éç -i æ¿æ¢äºåæ¥ç CMDï¼èä¸æ¯æ·»å å¨åæ¥ç curl -s http://ip.cn åé¢ãè -i æ ¹æ¬ä¸æ¯å½ä»¤ï¼æä»¥èªç¶æ¾ä¸å°ã\n\né£ä¹å¦ææä»¬å¸æå å¥ -i è¿åæ°ï¼æä»¬å°±å¿é¡»éæ°å®æ´çè¾å¥è¿ä¸ªå½ä»¤ï¼\n\ndocker run myip curl -s http://ip.cn -i\n\n\nè¿æ¾ç¶ä¸æ¯å¾å¥½çè§£å³æ¹æ¡ï¼èä½¿ç¨ ENTRYPOINT å°±å¯ä»¥è§£å³è¿ä¸ªé®é¢ãç°å¨æä»¬éæ°ç¨ ENTRYPOINT æ¥å®ç°è¿ä¸ªéåï¼\n\nFROM ubuntu:16.04\nRUN apt-get update \\\n    && apt-get install -y curl \\\n    && rm -rf /var/lib/apt/lists/*\nENTRYPOINT [ "curl", "-s", "http://ip.cn" ]\n\n\nè¿æ¬¡æä»¬åæ¥å°è¯ç´æ¥ä½¿ç¨ docker run myip -iï¼\n\ndocker run myip\nå½å IPï¼61.148.226.66 æ¥èªï¼åäº¬å¸ èé\n\ndocker run myip -i\nHTTP/1.1 200 OK\nServer: nginx/1.8.0\nDate: Tue, 22 Nov 2016 05:12:40 GMT\nContent-Type: text/html; charset=UTF-8\nVary: Accept-Encoding\nX-Powered-By: PHP/5.6.24-1~dotdeb+7.1\nX-Cache: MISS from cache-2\nX-Cache-Lookup: MISS from cache-2:80\nX-Cache: MISS from proxy-2_6\nTransfer-Encoding: chunked\nVia: 1.1 cache-2:80, 1.1 proxy-2_6:8006\nConnection: keep-alive\n\nå½å IPï¼61.148.226.66 æ¥èªï¼åäº¬å¸ èé\n\n\nå¯ä»¥çå°ï¼è¿æ¬¡æåäºãè¿æ¯å ä¸ºå½å­å¨ ENTRYPOINT åï¼CMD çåå®¹å°ä¼ä½ä¸ºåæ°ä¼ ç» ENTRYPOINTï¼èè¿é -i å°±æ¯æ°ç CMDï¼å æ­¤ä¼ä½ä¸ºåæ°ä¼ ç» curlï¼ä»èè¾¾å°äºæä»¬é¢æçææã\n\n\n# åºæ¯äºï¼åºç¨è¿è¡åçåå¤å·¥ä½\n\nå¯å¨å®¹å¨å°±æ¯å¯å¨ä¸»è¿ç¨ï¼ä½æäºæ¶åï¼å¯å¨ä¸»è¿ç¨åï¼éè¦ä¸äºåå¤å·¥ä½ã\n\næ¯å¦ mysql ç±»çæ°æ®åºï¼å¯è½éè¦ä¸äºæ°æ®åºéç½®ãåå§åçå·¥ä½ï¼è¿äºå·¥ä½è¦å¨æç»ç mysql æå¡å¨è¿è¡ä¹åè§£å³ã\n\næ­¤å¤ï¼å¯è½å¸æé¿åä½¿ç¨ root ç¨æ·å»å¯å¨æå¡ï¼ä»èæé«å®å¨æ§ï¼èå¨å¯å¨æå¡åè¿éè¦ä»¥ root èº«ä»½æ§è¡ä¸äºå¿è¦çåå¤å·¥ä½ï¼æååæ¢å°æå¡ç¨æ·èº«ä»½å¯å¨æå¡ãæèé¤äºæå¡å¤ï¼å¶å®å½ä»¤ä¾æ§å¯ä»¥ä½¿ç¨ root èº«ä»½æ§è¡ï¼æ¹ä¾¿è°è¯ç­ã\n\nè¿äºåå¤å·¥ä½æ¯åå®¹å¨ CMD æ å³çï¼æ è®º CMD ä¸ºä»ä¹ï¼é½éè¦äºåè¿è¡ä¸ä¸ªé¢å¤ççå·¥ä½ãè¿ç§æåµä¸ï¼å¯ä»¥åä¸ä¸ªèæ¬ï¼ç¶åæ¾å¥ ENTRYPOINT ä¸­å»æ§è¡ï¼èè¿ä¸ªèæ¬ä¼å°æ¥å°çåæ°ï¼ä¹å°±æ¯ ``ï¼ä½ä¸ºå½ä»¤ï¼å¨èæ¬æåæ§è¡ãæ¯å¦å®æ¹éå redis ä¸­å°±æ¯è¿ä¹åçï¼\n\nFROM alpine:3.4\n...\nRUN addgroup -S redis && adduser -S -G redis redis\n...\nENTRYPOINT ["docker-entrypoint.sh"]\n\nEXPOSE 6379\nCMD [ "redis-server" ]\n\n\nå¯ä»¥çå°å¶ä¸­ä¸ºäº redis æå¡åå»ºäº redis ç¨æ·ï¼å¹¶å¨æåæå®äº ENTRYPOINT ä¸º docker-entrypoint.sh èæ¬ã\n\n#!/bin/sh\n...\n# allow the container to be started with `--user`\nif [ "$1" = \'redis-server\' -a "$(id -u)" = \'0\' ]; then\n\tchown -R redis .\n\texec su-exec redis "$0" "$@"\nfi\n\nexec "$@"\n\n\nè¯¥èæ¬çåå®¹å°±æ¯æ ¹æ® CMD çåå®¹æ¥å¤æ­ï¼å¦ææ¯ redis-server çè¯ï¼ååæ¢å° redis ç¨æ·èº«ä»½å¯å¨æå¡å¨ï¼å¦åä¾æ§ä½¿ç¨ root èº«ä»½æ§è¡ãæ¯å¦ï¼\n\ndocker run -it redis id\nuid=0(root) gid=0(root) groups=0(root)\n\n\n\n# ENV è®¾ç½®ç¯å¢åé\n\næ ¼å¼æä¸¤ç§ï¼\n\n * ENV\n * ENV = =...\n\nè¿ä¸ªæä»¤å¾ç®åï¼å°±æ¯è®¾ç½®ç¯å¢åéèå·²ï¼æ è®ºæ¯åé¢çå¶å®æä»¤ï¼å¦ RUNï¼è¿æ¯è¿è¡æ¶çåºç¨ï¼é½å¯ä»¥ç´æ¥ä½¿ç¨è¿éå®ä¹çç¯å¢åéã\n\nENV VERSION=1.0 DEBUG=on \\\n    NAME="Happy Feet"\n\n\nè¿ä¸ªä¾å­ä¸­æ¼ç¤ºäºå¦ä½æ¢è¡ï¼ä»¥åå¯¹å«æç©ºæ ¼çå¼ç¨åå¼å·æ¬èµ·æ¥çåæ³ï¼è¿å Shell ä¸çè¡ä¸ºæ¯ä¸è´çã\n\nå®ä¹äºç¯å¢åéï¼é£ä¹å¨åç»­çæä»¤ä¸­ï¼å°±å¯ä»¥ä½¿ç¨è¿ä¸ªç¯å¢åéãæ¯å¦å¨å®æ¹ node éå Dockerfile ä¸­ï¼å°±æç±»ä¼¼è¿æ ·çä»£ç ï¼\n\nENV NODE_VERSION 7.2.0\n\nRUN curl -SLO "https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz" \\\n  && curl -SLO "https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc" \\\n  && gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \\\n  && grep " node-v$NODE_VERSION-linux-x64.tar.xz\\$" SHASUMS256.txt | sha256sum -c - \\\n  && tar -xJf "node-v$NODE_VERSION-linux-x64.tar.xz" -C /usr/local --strip-components=1 \\\n  && rm "node-v$NODE_VERSION-linux-x64.tar.xz" SHASUMS256.txt.asc SHASUMS256.txt \\\n  && ln -s /usr/local/bin/node /usr/local/bin/nodejs\n\n\nå¨è¿éåå®ä¹äºç¯å¢åé NODE_VERSIONï¼å¶åç RUN è¿å±éï¼å¤æ¬¡ä½¿ç¨ $NODE_VERSION æ¥è¿è¡æä½å®å¶ãå¯ä»¥çå°ï¼å°æ¥åçº§éåæå»ºçæ¬çæ¶åï¼åªéè¦æ´æ° 7.2.0 å³å¯ï¼Dockerfile æå»ºç»´æ¤åå¾æ´è½»æ¾äºã\n\nä¸åæä»¤å¯ä»¥æ¯æç¯å¢åéå±å¼ï¼ ADDãCOPYãENVãEXPOSEãLABELãUSERãWORKDIRãVOLUMEãSTOPSIGNALãONBUILDã\n\nå¯ä»¥ä»è¿ä¸ªæä»¤åè¡¨éæè§å°ï¼ç¯å¢åéå¯ä»¥ä½¿ç¨çå°æ¹å¾å¤ï¼å¾å¼ºå¤§ãéè¿ç¯å¢åéï¼æä»¬å¯ä»¥è®©ä¸ä»½ Dockerfile å¶ä½æ´å¤çéåï¼åªéä½¿ç¨ä¸åçç¯å¢åéå³å¯ã\n\n\n# ARG æå»ºåæ°\n\næ ¼å¼ï¼ARG <åæ°å>[=<é»è®¤å¼>]\n\næå»ºåæ°å ENV çææä¸æ ·ï¼é½æ¯è®¾ç½®ç¯å¢åéãæä¸åçæ¯ï¼ARG æè®¾ç½®çæå»ºç¯å¢çç¯å¢åéï¼å¨å°æ¥å®¹å¨è¿è¡æ¶æ¯ä¸ä¼å­å¨è¿äºç¯å¢åéçãä½æ¯ä¸è¦å æ­¤å°±ä½¿ç¨ ARG ä¿å­å¯ç ä¹ç±»çä¿¡æ¯ï¼å ä¸º docker history è¿æ¯å¯ä»¥çå°ææå¼çã\n\nDockerfile ä¸­ç ARG æä»¤æ¯å®ä¹åæ°åç§°ï¼ä»¥åå®ä¹å¶é»è®¤å¼ãè¯¥é»è®¤å¼å¯ä»¥å¨æå»ºå½ä»¤ docker build ä¸­ç¨ --build-arg <åæ°å>=<å¼> æ¥è¦çã\n\nå¨ 1.13 ä¹åççæ¬ï¼è¦æ± --build-arg ä¸­çåæ°åï¼å¿é¡»å¨ Dockerfile ä¸­ç¨ ARG å®ä¹è¿äºï¼æ¢å¥è¯è¯´ï¼å°±æ¯ --build-arg æå®çåæ°ï¼å¿é¡»å¨ Dockerfile ä¸­ä½¿ç¨äºãå¦æå¯¹åºåæ°æ²¡æè¢«ä½¿ç¨ï¼åä¼æ¥ééåºæå»ºãä» 1.13 å¼å§ï¼è¿ç§ä¸¥æ ¼çéå¶è¢«æ¾å¼ï¼ä¸åæ¥ééåºï¼èæ¯æ¾ç¤ºè­¦åä¿¡æ¯ï¼å¹¶ç»§ç»­æå»ºãè¿å¯¹äºä½¿ç¨ CI ç³»ç»ï¼ç¨åæ ·çæå»ºæµç¨æå»ºä¸åç Dockerfile çæ¶åæ¯è¾æå¸®å©ï¼é¿åæå»ºå½ä»¤å¿é¡»æ ¹æ®æ¯ä¸ª Dockerfile çåå®¹ä¿®æ¹ã\n\n\n# VOLUME å®ä¹å¿åå·\n\næ ¼å¼ä¸ºï¼\n\n * VOLUME ["<è·¯å¾1>", "<è·¯å¾2>"...]\n * VOLUME <è·¯å¾>\n\nä¹åæä»¬è¯´è¿ï¼å®¹å¨è¿è¡æ¶åºè¯¥å°½éä¿æå®¹å¨å­å¨å±ä¸åçåæä½ï¼å¯¹äºæ°æ®åºç±»éè¦ä¿å­å¨ææ°æ®çåºç¨ï¼å¶æ°æ®åºæä»¶åºè¯¥ä¿å­äºå·(volume)ä¸­ï¼åé¢çç« èæä»¬ä¼è¿ä¸æ­¥ä»ç» Docker å·çæ¦å¿µãä¸ºäºé²æ­¢è¿è¡æ¶ç¨æ·å¿è®°å°å¨ææä»¶æä¿å­ç®å½æè½½ä¸ºå·ï¼å¨ Dockerfile ä¸­ï¼æä»¬å¯ä»¥äºåæå®æäºç®å½æè½½ä¸ºå¿åå·ï¼è¿æ ·å¨è¿è¡æ¶å¦æç¨æ·ä¸æå®æè½½ï¼å¶åºç¨ä¹å¯ä»¥æ­£å¸¸è¿è¡ï¼ä¸ä¼åå®¹å¨å­å¨å±åå¥å¤§éæ°æ®ã\n\nVOLUME /data\n\n\nè¿éç /data ç®å½å°±ä¼å¨è¿è¡æ¶èªå¨æè½½ä¸ºå¿åå·ï¼ä»»ä½å /data ä¸­åå¥çä¿¡æ¯é½ä¸ä¼è®°å½è¿å®¹å¨å­å¨å±ï¼ä»èä¿è¯äºå®¹å¨å­å¨å±çæ ç¶æåãå½ç¶ï¼è¿è¡æ¶å¯ä»¥è¦çè¿ä¸ªæè½½è®¾ç½®ãæ¯å¦ï¼\n\ndocker run -d -v mydata:/data xxxx\n\n\nå¨è¿è¡å½ä»¤ä¸­ï¼å°±ä½¿ç¨äº mydata è¿ä¸ªå½åå·æè½½å°äº /data è¿ä¸ªä½ç½®ï¼æ¿ä»£äº Dockerfile ä¸­å®ä¹çå¿åå·çæè½½éç½®ã\n\n\n# EXPOSE æ´é²ç«¯å£\n\næ ¼å¼ä¸º EXPOSE <ç«¯å£1> [<ç«¯å£2>...]ã\n\nEXPOSE æä»¤æ¯å£°æè¿è¡æ¶å®¹å¨æä¾æå¡ç«¯å£ï¼è¿åªæ¯ä¸ä¸ªå£°æï¼å¨è¿è¡æ¶å¹¶ä¸ä¼å ä¸ºè¿ä¸ªå£°æåºç¨å°±ä¼å¼å¯è¿ä¸ªç«¯å£çæå¡ãå¨ Dockerfile ä¸­åå¥è¿æ ·çå£°ææä¸¤ä¸ªå¥½å¤ï¼ä¸ä¸ªæ¯å¸®å©éåä½¿ç¨èçè§£è¿ä¸ªéåæå¡çå®æ¤ç«¯å£ï¼ä»¥æ¹ä¾¿éç½®æ å°ï¼å¦ä¸ä¸ªç¨å¤åæ¯å¨è¿è¡æ¶ä½¿ç¨éæºç«¯å£æ å°æ¶ï¼ä¹å°±æ¯ docker run -P æ¶ï¼ä¼èªå¨éæºæ å° EXPOSE çç«¯å£ã\n\næ­¤å¤ï¼å¨æ©æ Docker çæ¬ä¸­è¿æä¸ä¸ªç¹æ®çç¨å¤ãä»¥åææå®¹å¨é½è¿è¡äºé»è®¤æ¡¥æ¥ç½ç»ä¸­ï¼å æ­¤ææå®¹å¨äºç¸ä¹é´é½å¯ä»¥ç´æ¥è®¿é®ï¼è¿æ ·å­å¨ä¸å®çå®å¨æ§é®é¢ãäºæ¯æäºä¸ä¸ª Docker å¼æåæ° --icc=falseï¼å½æå®è¯¥åæ°åï¼å®¹å¨é´å°é»è®¤æ æ³äºè®¿ï¼é¤éäºç¸é´ä½¿ç¨äº --links åæ°çå®¹å¨æå¯ä»¥äºéï¼å¹¶ä¸åªæéåä¸­ EXPOSE æå£°æçç«¯å£æå¯ä»¥è¢«è®¿é®ãè¿ä¸ª --icc=false çç¨æ³ï¼å¨å¼å¥äº docker network åå·²ç»åºæ¬ä¸ç¨äºï¼éè¿èªå®ä¹ç½ç»å¯ä»¥å¾è½»æ¾çå®ç°å®¹å¨é´çäºèä¸éç¦»ã\n\nè¦å° EXPOSE åå¨è¿è¡æ¶ä½¿ç¨ -p <å®¿ä¸»ç«¯å£>:<å®¹å¨ç«¯å£> åºåå¼æ¥ã-pï¼æ¯æ å°å®¿ä¸»ç«¯å£åå®¹å¨ç«¯å£ï¼æ¢å¥è¯è¯´ï¼å°±æ¯å°å®¹å¨çå¯¹åºç«¯å£æå¡å¬å¼ç»å¤çè®¿é®ï¼è EXPOSE ä»ä»æ¯å£°æå®¹å¨æç®ä½¿ç¨ä»ä¹ç«¯å£èå·²ï¼å¹¶ä¸ä¼èªå¨å¨å®¿ä¸»è¿è¡ç«¯å£æ å°ã\n\n\n# WORKDIR æå®å·¥ä½ç®å½\n\næ ¼å¼ä¸º WORKDIR <å·¥ä½ç®å½è·¯å¾>ã\n\nä½¿ç¨ WORKDIR æä»¤å¯ä»¥æ¥æå®å·¥ä½ç®å½ï¼æèç§°ä¸ºå½åç®å½ï¼ï¼ä»¥ååå±çå½åç®å½å°±è¢«æ¹ä¸ºæå®çç®å½ï¼å¦è¯¥ç®å½ä¸å­å¨ï¼WORKDIR ä¼å¸®ä½ å»ºç«ç®å½ã\n\nä¹åæå°ä¸äºåå­¦èå¸¸ç¯çéè¯¯æ¯æ Dockerfile ç­åäº Shell èæ¬æ¥ä¹¦åï¼è¿ç§éè¯¯ççè§£è¿å¯è½ä¼å¯¼è´åºç°ä¸é¢è¿æ ·çéè¯¯ï¼\n\nRUN cd /app\nRUN echo "hello" > world.txt\n\n\nå¦æå°è¿ä¸ª Dockerfile è¿è¡æå»ºéåè¿è¡åï¼ä¼åç°æ¾ä¸å° /app/world.txt æä»¶ï¼æèå¶åå®¹ä¸æ¯ helloãåå å¶å®å¾ç®åï¼å¨ Shell ä¸­ï¼è¿ç»­ä¸¤è¡æ¯åä¸ä¸ªè¿ç¨æ§è¡ç¯å¢ï¼å æ­¤åä¸ä¸ªå½ä»¤ä¿®æ¹çåå­ç¶æï¼ä¼ç´æ¥å½±ååä¸ä¸ªå½ä»¤ï¼èå¨ Dockerfile ä¸­ï¼è¿ä¸¤è¡ RUN å½ä»¤çæ§è¡ç¯å¢æ ¹æ¬ä¸åï¼æ¯ä¸¤ä¸ªå®å¨ä¸åçå®¹å¨ãè¿å°±æ¯å¯¹ Dockerfile æå»ºåå±å­å¨çæ¦å¿µä¸äºè§£æå¯¼è´çéè¯¯ã\n\nä¹åè¯´è¿æ¯ä¸ä¸ª RUN é½æ¯å¯å¨ä¸ä¸ªå®¹å¨ãæ§è¡å½ä»¤ãç¶åæäº¤å­å¨å±æä»¶åæ´ãç¬¬ä¸å± RUN cd /app çæ§è¡ä»ä»æ¯å½åè¿ç¨çå·¥ä½ç®å½åæ´ï¼ä¸ä¸ªåå­ä¸çååèå·²ï¼å¶ç»æä¸ä¼é æä»»ä½æä»¶åæ´ãèå°ç¬¬äºå±çæ¶åï¼å¯å¨çæ¯ä¸ä¸ªå¨æ°çå®¹å¨ï¼è·ç¬¬ä¸å±çå®¹å¨æ´å®å¨æ²¡å³ç³»ï¼èªç¶ä¸å¯è½ç»§æ¿åä¸å±æå»ºè¿ç¨ä¸­çåå­ååã\n\nå æ­¤å¦æéè¦æ¹åä»¥ååå±çå·¥ä½ç®å½çä½ç½®ï¼é£ä¹åºè¯¥ä½¿ç¨ WORKDIR æä»¤ã\n\n\n# USER æå®å½åç¨æ·\n\næ ¼å¼ï¼USER <ç¨æ·å>\n\nUSER æä»¤å WORKDIR ç¸ä¼¼ï¼é½æ¯æ¹åç¯å¢ç¶æå¹¶å½±åä»¥åçå±ãWORKDIR æ¯æ¹åå·¥ä½ç®å½ï¼USER åæ¯æ¹åä¹åå±çæ§è¡ RUN, CMD ä»¥å ENTRYPOINT è¿ç±»å½ä»¤çèº«ä»½ã\n\nå½ç¶ï¼å WORKDIR ä¸æ ·ï¼USER åªæ¯å¸®å©ä½ åæ¢å°æå®ç¨æ·èå·²ï¼è¿ä¸ªç¨æ·å¿é¡»æ¯äºåå»ºç«å¥½çï¼å¦åæ æ³åæ¢ã\n\nRUN groupadd -r redis && useradd -r -g redis redis\nUSER redis\nRUN [ "redis-server" ]\n\n\nå¦æä»¥ root æ§è¡çèæ¬ï¼å¨æ§è¡æé´å¸ææ¹åèº«ä»½ï¼æ¯å¦å¸æä»¥æä¸ªå·²ç»å»ºç«å¥½çç¨æ·æ¥è¿è¡æä¸ªæå¡è¿ç¨ï¼ä¸è¦ä½¿ç¨ su æè sudoï¼è¿äºé½éè¦æ¯è¾éº»ç¦çéç½®ï¼èä¸å¨ TTY ç¼ºå¤±çç¯å¢ä¸ç»å¸¸åºéãå»ºè®®ä½¿ç¨ gosuã\n\n# å»ºç« redis ç¨æ·ï¼å¹¶ä½¿ç¨ gosu æ¢å¦ä¸ä¸ªç¨æ·æ§è¡å½ä»¤\nRUN groupadd -r redis && useradd -r -g redis redis\n# ä¸è½½ gosu\nRUN wget -O /usr/local/bin/gosu "https://github.com/tianon/gosu/releases/download/1.7/gosu-amd64" \\\n    && chmod +x /usr/local/bin/gosu \\\n    && gosu nobody true\n# è®¾ç½® CMDï¼å¹¶ä»¥å¦å¤çç¨æ·æ§è¡\nCMD [ "exec", "gosu", "redis", "redis-server" ]\n\n\n\n# HEALTHCHECK å¥åº·æ£æ¥\n\næ ¼å¼ï¼\n\n * HEALTHCHECK [éé¡¹] CMD <å½ä»¤>ï¼è®¾ç½®æ£æ¥å®¹å¨å¥åº·ç¶åµçå½ä»¤\n * HEALTHCHECK NONEï¼å¦æåºç¡éåæå¥åº·æ£æ¥æä»¤ï¼ä½¿ç¨è¿è¡å¯ä»¥å±è½æå¶å¥åº·æ£æ¥æä»¤\n\nHEALTHCHECK æä»¤æ¯åè¯ Docker åºè¯¥å¦ä½è¿è¡å¤æ­å®¹å¨çç¶ææ¯å¦æ­£å¸¸ï¼è¿æ¯ Docker 1.12 å¼å¥çæ°æä»¤ã\n\nå¨æ²¡æ HEALTHCHECK æä»¤åï¼Docker å¼æåªå¯ä»¥éè¿å®¹å¨åä¸»è¿ç¨æ¯å¦éåºæ¥å¤æ­å®¹å¨æ¯å¦ç¶æå¼å¸¸ãå¾å¤æåµä¸è¿æ²¡é®é¢ï¼ä½æ¯å¦æç¨åºè¿å¥æ­»éç¶æï¼æèæ­»å¾ªç¯ç¶æï¼åºç¨è¿ç¨å¹¶ä¸éåºï¼ä½æ¯è¯¥å®¹å¨å·²ç»æ æ³æä¾æå¡äºãå¨ 1.12 ä»¥åï¼Docker ä¸ä¼æ£æµå°å®¹å¨çè¿ç§ç¶æï¼ä»èä¸ä¼éæ°è°åº¦ï¼å¯¼è´å¯è½ä¼æé¨åå®¹å¨å·²ç»æ æ³æä¾æå¡äºå´è¿å¨æ¥åç¨æ·è¯·æ±ã\n\nèèª 1.12 ä¹åï¼Docker æä¾äº HEALTHCHECK æä»¤ï¼éè¿è¯¥æä»¤æå®ä¸è¡å½ä»¤ï¼ç¨è¿è¡å½ä»¤æ¥å¤æ­å®¹å¨ä¸»è¿ç¨çæå¡ç¶ææ¯å¦è¿æ­£å¸¸ï¼ä»èæ¯è¾çå®çååºå®¹å¨å®éç¶æã\n\nå½å¨ä¸ä¸ªéåæå®äº HEALTHCHECK æä»¤åï¼ç¨å¶å¯å¨å®¹å¨ï¼åå§ç¶æä¼ä¸º startingï¼å¨ HEALTHCHECK æä»¤æ£æ¥æåååä¸º healthyï¼å¦æè¿ç»­ä¸å®æ¬¡æ°å¤±è´¥ï¼åä¼åä¸º unhealthyã\n\nHEALTHCHECK æ¯æä¸åéé¡¹ï¼\n\n * --interval=<é´é>ï¼ä¸¤æ¬¡å¥åº·æ£æ¥çé´éï¼é»è®¤ä¸º 30 ç§ï¼\n * --timeout=<æ¶é¿>ï¼å¥åº·æ£æ¥å½ä»¤è¿è¡è¶æ¶æ¶é´ï¼å¦æè¶è¿è¿ä¸ªæ¶é´ï¼æ¬æ¬¡å¥åº·æ£æ¥å°±è¢«è§ä¸ºå¤±è´¥ï¼é»è®¤ 30 ç§ï¼\n * --retries=<æ¬¡æ°>ï¼å½è¿ç»­å¤±è´¥æå®æ¬¡æ°åï¼åå°å®¹å¨ç¶æè§ä¸º unhealthyï¼é»è®¤ 3 æ¬¡ã\n\nå CMD, ENTRYPOINT ä¸æ ·ï¼HEALTHCHECK åªå¯ä»¥åºç°ä¸æ¬¡ï¼å¦æåäºå¤ä¸ªï¼åªææåä¸ä¸ªçæã\n\nå¨ HEALTHCHECK [éé¡¹] CMD åé¢çå½ä»¤ï¼æ ¼å¼å ENTRYPOINT ä¸æ ·ï¼åä¸º shell æ ¼å¼ï¼å exec æ ¼å¼ãå½ä»¤çè¿åå¼å³å®äºè¯¥æ¬¡å¥åº·æ£æ¥çæåä¸å¦ï¼0ï¼æåï¼1ï¼å¤±è´¥ï¼2ï¼ä¿çï¼ä¸è¦ä½¿ç¨è¿ä¸ªå¼ã\n\nåè®¾æä»¬æä¸ªéåæ¯ä¸ªæç®åç Web æå¡ï¼æä»¬å¸æå¢å å¥åº·æ£æ¥æ¥å¤æ­å¶ Web æå¡æ¯å¦å¨æ­£å¸¸å·¥ä½ï¼æä»¬å¯ä»¥ç¨ curl æ¥å¸®å©å¤æ­ï¼å¶ Dockerfile ç HEALTHCHECK å¯ä»¥è¿ä¹åï¼\n\nFROM nginx\nRUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*\nHEALTHCHECK --interval=5s --timeout=3s \\\n  CMD curl -fs http://localhost/ || exit 1\n\n\nè¿éæä»¬è®¾ç½®äºæ¯ 5 ç§æ£æ¥ä¸æ¬¡ï¼è¿éä¸ºäºè¯éªæä»¥é´ééå¸¸ç­ï¼å®éåºè¯¥ç¸å¯¹è¾é¿ï¼ï¼å¦æå¥åº·æ£æ¥å½ä»¤è¶è¿ 3 ç§æ²¡ååºå°±è§ä¸ºå¤±è´¥ï¼å¹¶ä¸ä½¿ç¨ curl -fs http://localhost/ || exit 1 ä½ä¸ºå¥åº·æ£æ¥å½ä»¤ã\n\nä½¿ç¨ docker build æ¥æå»ºè¿ä¸ªéåï¼\n\ndocker build -t myweb:v1 .\n\n\næå»ºå¥½äºåï¼æä»¬å¯å¨ä¸ä¸ªå®¹å¨ï¼\n\ndocker run -d --name web -p 80:80 myweb:v1\n\n\nå½è¿è¡è¯¥éååï¼å¯ä»¥éè¿ docker container ls çå°æåçç¶æä¸º (health: starting)ï¼\n\ndocker container ls\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                            PORTS               NAMES\n03e28eb00bd0        myweb:v1            "nginx -g \'daemon off"   3 seconds ago       Up 2 seconds (health: starting)   80/tcp, 443/tcp     web\n\n\nå¨ç­å¾å ç§éåï¼åæ¬¡ docker container lsï¼å°±ä¼çå°å¥åº·ç¶æååä¸ºäº (healthy)ï¼\n\ndocker container ls\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                    PORTS               NAMES\n03e28eb00bd0        myweb:v1            "nginx -g \'daemon off"   18 seconds ago      Up 16 seconds (healthy)   80/tcp, 443/tcp     web\n\n\nå¦æå¥åº·æ£æ¥è¿ç»­å¤±è´¥è¶è¿äºéè¯æ¬¡æ°ï¼ç¶æå°±ä¼åä¸º (unhealthy)ã\n\nä¸ºäºå¸®å©æéï¼å¥åº·æ£æ¥å½ä»¤çè¾åºï¼åæ¬ stdout ä»¥å stderrï¼é½ä¼è¢«å­å¨äºå¥åº·ç¶æéï¼å¯ä»¥ç¨ docker inspect æ¥æ¥çã\n\ndocker inspect --format \'{{json .State.Health}}\' web | python -m json.tool\n{\n    "FailingStreak": 0,\n    "Log": [\n        {\n            "End": "2016-11-25T14:35:37.940957051Z",\n            "ExitCode": 0,\n            "Output": "<!DOCTYPE html>\\n<html>\\n<head>\\n<title>Welcome to nginx!</title>\\n<style>\\n    body {\\n        width: 35em;\\n        margin: 0 auto;\\n        font-family: Tahoma, Verdana, Arial, sans-serif;\\n    }\\n</style>\\n</head>\\n<body>\\n<h1>Welcome to nginx!</h1>\\n<p>If you see this page, the nginx web server is successfully installed and\\nworking. Further configuration is required.</p>\\n\\n<p>For online documentation and support please refer to\\n<a href=\\"http://nginx.org/\\">nginx.org</a>.<br/>\\nCommercial support is available at\\n<a href=\\"http://nginx.com/\\">nginx.com</a>.</p>\\n\\n<p><em>Thank you for using nginx.</em></p>\\n</body>\\n</html>\\n",\n            "Start": "2016-11-25T14:35:37.780192565Z"\n        }\n    ],\n    "Status": "healthy"\n}\n\n\n\n# ONBUILD ä¸ºä»äººä½å«è¡£\n\næ ¼å¼ï¼ONBUILD <å¶å®æä»¤>ã\n\nONBUILD æ¯ä¸ä¸ªç¹æ®çæä»¤ï¼å®åé¢è·çæ¯å¶å®æä»¤ï¼æ¯å¦ RUN, COPY ç­ï¼èè¿äºæä»¤ï¼å¨å½åéåæå»ºæ¶å¹¶ä¸ä¼è¢«æ§è¡ãåªæå½ä»¥å½åéåä¸ºåºç¡éåï¼å»æå»ºä¸ä¸çº§éåçæ¶åæä¼è¢«æ§è¡ã\n\nDockerfile ä¸­çå¶å®æä»¤é½æ¯ä¸ºäºå®å¶å½åéåèåå¤çï¼å¯æ ONBUILD æ¯ä¸ºäºå¸®å©å«äººå®å¶èªå·±èåå¤çã\n\nåè®¾æä»¬è¦å¶ä½ Node.js æåçåºç¨çéåãæä»¬é½ç¥é Node.js ä½¿ç¨ npm è¿è¡åç®¡çï¼ææä¾èµãéç½®ãå¯å¨ä¿¡æ¯ç­ä¼æ¾å° package.json æä»¶éãå¨æ¿å°ç¨åºä»£ç åï¼éè¦åè¿è¡ npm install æå¯ä»¥è·å¾ææéè¦çä¾èµãç¶åå°±å¯ä»¥éè¿ npm start æ¥å¯å¨åºç¨ãå æ­¤ï¼ä¸è¬æ¥è¯´ä¼è¿æ ·å Dockerfileï¼\n\nFROM node:slim\nRUN mkdir /app\nWORKDIR /app\nCOPY ./package.json /app\nRUN [ "npm", "install" ]\nCOPY . /app/\nCMD [ "npm", "start" ]\n\n\næè¿ä¸ª Dockerfile æ¾å° Node.js é¡¹ç®çæ ¹ç®å½ï¼æå»ºå¥½éååï¼å°±å¯ä»¥ç´æ¥æ¿æ¥å¯å¨å®¹å¨è¿è¡ãä½æ¯å¦ææä»¬è¿æç¬¬äºä¸ª Node.js é¡¹ç®ä¹å·®ä¸å¤å¢ï¼å¥½å§ï¼é£å°±åæè¿ä¸ª Dockerfile å¤å¶å°ç¬¬äºä¸ªé¡¹ç®éãé£å¦ææç¬¬ä¸ä¸ªé¡¹ç®å¢ï¼åå¤å¶ä¹ï¼æä»¶çå¯æ¬è¶å¤ï¼çæ¬æ§å¶å°±è¶å°é¾ï¼è®©æä»¬ç»§ç»­çè¿æ ·çåºæ¯ç»´æ¤çé®é¢ã\n\nå¦æç¬¬ä¸ä¸ª Node.js é¡¹ç®å¨å¼åè¿ç¨ä¸­ï¼åç°è¿ä¸ª Dockerfile éå­å¨é®é¢ï¼æ¯å¦æ²éå­äºãæèéè¦å®è£é¢å¤çåï¼ç¶åå¼åäººåä¿®å¤äºè¿ä¸ª Dockerfileï¼åæ¬¡æå»ºï¼é®é¢è§£å³ã\bç¬¬ä¸ä¸ªé¡¹ç®æ²¡é®é¢äºï¼ä½æ¯ç¬¬äºä¸ªé¡¹ç®å¢ï¼è½ç¶æå Dockerfile æ¯å¤å¶ãç²è´´èªç¬¬ä¸ä¸ªé¡¹ç®çï¼ä½æ¯å¹¶ä¸ä¼å ä¸ºç¬¬ä¸ä¸ªé¡¹ç®ä¿®å¤äºä»ä»¬ç Dockerfileï¼èç¬¬äºä¸ªé¡¹ç®ç Dockerfile å°±ä¼è¢«èªå¨ä¿®å¤ã\n\né£ä¹æä»¬å¯ä¸å¯ä»¥åä¸ä¸ªåºç¡éåï¼ç¶ååä¸ªé¡¹ç®ä½¿ç¨è¿ä¸ªåºç¡éåå¢ï¼è¿æ ·åºç¡éåæ´æ°ï¼åä¸ªé¡¹ç®ä¸ç¨åæ­¥ Dockerfile çååï¼éæ°æå»ºåå°±ç»§æ¿äºåºç¡éåçæ´æ°ï¼å¥½å§ï¼å¯ä»¥ï¼è®©æä»¬ççè¿æ ·çç»æãé£ä¹ä¸é¢çè¿ä¸ª Dockerfile å°±ä¼åä¸ºï¼\n\nFROM node:slim\nRUN mkdir /app\nWORKDIR /app\nCMD [ "npm", "start" ]\n\n\nè¿éæä»¬æé¡¹ç®ç¸å³çæå»ºæä»¤æ¿åºæ¥ï¼æ¾å°å­é¡¹ç®éå»ãåè®¾è¿ä¸ªåºç¡éåçåå­ä¸º my-node çè¯ï¼åä¸ªé¡¹ç®åçèªå·±ç Dockerfile å°±åä¸ºï¼\n\nFROM my-node\nCOPY ./package.json /app\nRUN [ "npm", "install" ]\nCOPY . /app/\n\n\nåºç¡éååååï¼åä¸ªé¡¹ç®é½ç¨è¿ä¸ª Dockerfile éæ°æå»ºéåï¼ä¼ç»§æ¿åºç¡éåçæ´æ°ã\n\né£ä¹ï¼é®é¢è§£å³äºä¹ï¼æ²¡æãåç¡®è¯´ï¼åªè§£å³äºä¸åãå¦æè¿ä¸ª Dockerfile éé¢æäºä¸è¥¿éè¦è°æ´å¢ï¼æ¯å¦ npm install é½éè¦å ä¸äºåæ°ï¼é£æä¹åï¼è¿ä¸è¡ RUN æ¯ä¸å¯è½æ¾å¥åºç¡éåçï¼å ä¸ºæ¶åå°äºå½åé¡¹ç®ç ./package.jsonï¼é¾éåè¦ä¸ä¸ªä¸ªä¿®æ¹ä¹ï¼æä»¥è¯´ï¼è¿æ ·å¶ä½åºç¡éåï¼åªè§£å³äºåæ¥ç Dockerfile çå4æ¡æä»¤çååé®é¢ï¼èåé¢ä¸æ¡æä»¤çåååå®å¨æ²¡åæ³å¤çã\n\nONBUILD å¯ä»¥è§£å³è¿ä¸ªé®é¢ãè®©æä»¬ç¨ ONBUILD éæ°åä¸ä¸åºç¡éåç Dockerfile:\n\nFROM node:slim\nRUN mkdir /app\nWORKDIR /app\nONBUILD COPY ./package.json /app\nONBUILD RUN [ "npm", "install" ]\nONBUILD COPY . /app/\nCMD [ "npm", "start" ]\n\n\nè¿æ¬¡æä»¬åå°åå§ç Dockerfileï¼ä½æ¯è¿æ¬¡å°é¡¹ç®ç¸å³çæä»¤å ä¸ ONBUILDï¼è¿æ ·å¨æå»ºåºç¡éåçæ¶åï¼è¿ä¸è¡å¹¶ä¸ä¼è¢«æ§è¡ãç¶ååä¸ªé¡¹ç®ç Dockerfile å°±åæäºç®åå°ï¼\n\nFROM my-node\n\n\næ¯çï¼åªæè¿ä¹ä¸è¡ãå½å¨åä¸ªé¡¹ç®ç®å½ä¸­ï¼ç¨è¿ä¸ªåªæä¸è¡ç Dockerfile æå»ºéåæ¶ï¼ä¹ååºç¡éåçé£ä¸è¡ ONBUILD å°±ä¼å¼å§æ§è¡ï¼æåçå°å½åé¡¹ç®çä»£ç å¤å¶è¿éåãå¹¶ä¸éå¯¹æ¬é¡¹ç®æ§è¡ npm installï¼çæåºç¨éåã\n\n\n# åèææ¡£\n\n * Dockerfie å®æ¹ææ¡£\n * Dockerfile æä½³å®è·µææ¡£\n * Docker å®æ¹éå Dockerfile',normalizedContent:'# dockerfile æä»¤è¯¦è§£\n\næä»¬å·²ç»ä»ç»äº fromï¼runï¼è¿æåäº copy, addï¼å¶å® dockerfile åè½å¾å¼ºå¤§ï¼å®æä¾äºåå¤ä¸ªæä»¤ãä¸é¢æä»¬ç»§ç»­è®²è§£å¶ä»çæä»¤ã\n\n\n# copy å¤å¶æä»¶\n\næ ¼å¼ï¼\n\n * copy <æºè·¯å¾>... <ç®æ è·¯å¾>\n * copy ["<æºè·¯å¾1>",... "<ç®æ è·¯å¾>"]\n\nå run æä»¤ä¸æ ·ï¼ä¹æä¸¤ç§æ ¼å¼ï¼ä¸ç§ç±»ä¼¼äºå½ä»¤è¡ï¼ä¸ç§ç±»ä¼¼äºå½æ°è°ç¨ã\n\ncopy æä»¤å°ä»æå»ºä¸ä¸æç®å½ä¸­ <æºè·¯å¾> çæä»¶/ç®å½å¤å¶å°æ°çä¸å±çéååç <ç®æ è·¯å¾> ä½ç½®ãæ¯å¦ï¼\n\ncopy package.json /usr/src/app/\n\n\n<æºè·¯å¾> å¯ä»¥æ¯å¤ä¸ªï¼çè³å¯ä»¥æ¯ééç¬¦ï¼å¶ééç¬¦è§åè¦æ»¡è¶³ go ç filepath.match è§åï¼å¦ï¼\n\ncopy hom* /mydir/\ncopy hom?.txt /mydir/\n\n\n<ç®æ è·¯å¾> å¯ä»¥æ¯å®¹å¨åçç»å¯¹è·¯å¾ï¼ä¹å¯ä»¥æ¯ç¸å¯¹äºå·¥ä½ç®å½çç¸å¯¹è·¯å¾ï¼å·¥ä½ç®å½å¯ä»¥ç¨ workdir æä»¤æ¥æå®ï¼ãç®æ è·¯å¾ä¸éè¦äºååå»ºï¼å¦æç®å½ä¸å­å¨ä¼å¨å¤å¶æä»¶ååè¡åå»ºç¼ºå¤±ç®å½ã\n\næ­¤å¤ï¼è¿éè¦æ³¨æä¸ç¹ï¼ä½¿ç¨ copy æä»¤ï¼æºæä»¶çåç§åæ°æ®é½ä¼ä¿çãæ¯å¦è¯»ãåãæ§è¡æéãæä»¶åæ´æ¶é´ç­ãè¿ä¸ªç¹æ§å¯¹äºéåå®å¶å¾æç¨ãç¹å«æ¯æå»ºç¸å³æä»¶é½å¨ä½¿ç¨ git è¿è¡ç®¡ççæ¶åã\n\n\n# add æ´é«çº§çå¤å¶æä»¶\n\nadd æä»¤å copy çæ ¼å¼åæ§è´¨åºæ¬ä¸è´ãä½æ¯å¨ copy åºç¡ä¸å¢å äºä¸äºåè½ã\n\næ¯å¦ <æºè·¯å¾> å¯ä»¥æ¯ä¸ä¸ª urlï¼è¿ç§æåµä¸ï¼docker å¼æä¼è¯å¾å»ä¸è½½è¿ä¸ªé¾æ¥çæä»¶æ¾å° <ç®æ è·¯å¾> å»ãä¸è½½åçæä»¶æéèªå¨è®¾ç½®ä¸º 600ï¼å¦æè¿å¹¶ä¸æ¯æ³è¦çæéï¼é£ä¹è¿éè¦å¢å é¢å¤çä¸å± run è¿è¡æéè°æ´ï¼å¦å¤ï¼å¦æä¸è½½çæ¯ä¸ªåç¼©åï¼éè¦è§£åç¼©ï¼ä¹ä¸æ ·è¿éè¦é¢å¤çä¸å± run æä»¤è¿è¡è§£åç¼©ãæä»¥ä¸å¦ç´æ¥ä½¿ç¨ run æä»¤ï¼ç¶åä½¿ç¨ wget æè curl å·¥å·ä¸è½½ï¼å¤çæéãè§£åç¼©ãç¶åæ¸çæ ç¨æä»¶æ´åçãå æ­¤ï¼è¿ä¸ªåè½å¶å®å¹¶ä¸å®ç¨ï¼èä¸ä¸æ¨èä½¿ç¨ã\n\nå¦æ <æºè·¯å¾> ä¸ºä¸ä¸ª tar åç¼©æä»¶çè¯ï¼åç¼©æ ¼å¼ä¸º gzip, bzip2 ä»¥å xz çæåµä¸ï¼add æä»¤å°ä¼èªå¨è§£åç¼©è¿ä¸ªåç¼©æä»¶å° <ç®æ è·¯å¾> å»ã\n\nå¨æäºæåµä¸ï¼è¿ä¸ªèªå¨è§£åç¼©çåè½éå¸¸æç¨ï¼æ¯å¦å®æ¹éå ubuntu ä¸­ï¼\n\nfrom scratch\nadd ubuntu-xenial-core-cloudimg-amd64-root.tar.gz /\n...\n\n\nä½å¨æäºæåµä¸ï¼å¦ææä»¬ççæ¯å¸æå¤å¶ä¸ªåç¼©æä»¶è¿å»ï¼èä¸è§£åç¼©ï¼è¿æ¶å°±ä¸å¯ä»¥ä½¿ç¨ add å½ä»¤äºã\n\nå¨ docker å®æ¹ç dockerfile æä½³å®è·µææ¡£ ä¸­è¦æ±ï¼å°½å¯è½çä½¿ç¨ copyï¼å ä¸º copy çè¯­ä¹å¾æç¡®ï¼å°±æ¯å¤å¶æä»¶èå·²ï¼è add ååå«äºæ´å¤æçåè½ï¼å¶è¡ä¸ºä¹ä¸ä¸å®å¾æ¸æ°ãæéåä½¿ç¨ add çåºåï¼å°±æ¯ææåçéè¦èªå¨è§£åç¼©çåºåã\n\nå¦å¤éè¦æ³¨æçæ¯ï¼add æä»¤ä¼ä»¤éåæå»ºç¼å­å¤±æï¼ä»èå¯è½ä¼ä»¤éåæå»ºåå¾æ¯è¾ç¼æ¢ã\n\nå æ­¤å¨ copy å add æä»¤ä¸­éæ©çæ¶åï¼å¯ä»¥éµå¾ªè¿æ ·çååï¼ææçæä»¶å¤å¶åä½¿ç¨ copy æä»¤ï¼ä»å¨éè¦èªå¨è§£åç¼©çåºåä½¿ç¨ addã\n\n\n# cmd å®¹å¨å¯å¨å½ä»¤\n\ncmd æä»¤çæ ¼å¼å run ç¸ä¼¼ï¼ä¹æ¯ä¸¤ç§æ ¼å¼ï¼\n\n * shell æ ¼å¼ï¼cmd <å½ä»¤>\n * exec æ ¼å¼ï¼cmd ["å¯æ§è¡æä»¶", "åæ°1", "åæ°2"...]\n * åæ°åè¡¨æ ¼å¼ï¼cmd ["åæ°1", "åæ°2"...]ãå¨æå®äº entrypoint æä»¤åï¼ç¨ cmd æå®å·ä½çåæ°ã\n\nä¹åä»ç»å®¹å¨çæ¶åæ¾ç»è¯´è¿ï¼docker ä¸æ¯èææºï¼å®¹å¨å°±æ¯è¿ç¨ãæ¢ç¶æ¯è¿ç¨ï¼é£ä¹å¨å¯å¨å®¹å¨çæ¶åï¼éè¦æå®æè¿è¡çç¨åºååæ°ãcmd æä»¤å°±æ¯ç¨äºæå®é»è®¤çå®¹å¨ä¸»è¿ç¨çå¯å¨å½ä»¤çã\n\nå¨è¿è¡æ¶å¯ä»¥æå®æ°çå½ä»¤æ¥æ¿ä»£éåè®¾ç½®ä¸­çè¿ä¸ªé»è®¤å½ä»¤ï¼æ¯å¦ï¼ubuntu éåé»è®¤ç cmd æ¯ /bin/bashï¼å¦ææä»¬ç´æ¥ docker run -it ubuntu çè¯ï¼ä¼ç´æ¥è¿å¥ bashãæä»¬ä¹å¯ä»¥å¨è¿è¡æ¶æå®è¿è¡å«çå½ä»¤ï¼å¦ docker run -it ubuntu cat /etc/os-releaseãè¿å°±æ¯ç¨ cat /etc/os-release å½ä»¤æ¿æ¢äºé»è®¤ç /bin/bash å½ä»¤äºï¼è¾åºäºç³»ç»çæ¬ä¿¡æ¯ã\n\nå¨æä»¤æ ¼å¼ä¸ï¼ä¸è¬æ¨èä½¿ç¨ exec æ ¼å¼ï¼è¿ç±»æ ¼å¼å¨è§£ææ¶ä¼è¢«è§£æä¸º json æ°ç»ï¼å æ­¤ä¸å®è¦ä½¿ç¨åå¼å· "ï¼èä¸è¦ä½¿ç¨åå¼å·ã\n\nå¦æä½¿ç¨ shell æ ¼å¼çè¯ï¼å®éçå½ä»¤ä¼è¢«åè£ä¸º sh -c çåæ°çå½¢å¼è¿è¡æ§è¡ãæ¯å¦ï¼\n\ncmd echo $home\n\n\nå¨å®éæ§è¡ä¸­ï¼ä¼å°å¶åæ´ä¸ºï¼\n\ncmd [ "sh", "-c", "echo $home" ]\n\n\nè¿å°±æ¯ä¸ºä»ä¹æä»¬å¯ä»¥ä½¿ç¨ç¯å¢åéçåå ï¼å ä¸ºè¿äºç¯å¢åéä¼è¢« shell è¿è¡è§£æå¤çã\n\næå° cmd å°±ä¸å¾ä¸æå®¹å¨ä¸­åºç¨å¨åå°æ§è¡ååå°æ§è¡çé®é¢ãè¿æ¯åå­¦èå¸¸åºç°çä¸ä¸ªæ··æ·ã\n\ndocker ä¸æ¯èææºï¼å®¹å¨ä¸­çåºç¨é½åºè¯¥ä»¥åå°æ§è¡ï¼èä¸æ¯åèææºãç©çæºéé¢é£æ ·ï¼ç¨ upstart/systemd å»å¯å¨åå°æå¡ï¼å®¹å¨åæ²¡æåå°æå¡çæ¦å¿µã\n\nä¸äºåå­¦èå° cmd åä¸ºï¼\n\ncmd service nginx start\n\n\nç¶ååç°å®¹å¨æ§è¡åå°±ç«å³éåºäºãçè³å¨å®¹å¨åå»ä½¿ç¨ systemctl å½ä»¤ç»æå´åç°æ ¹æ¬æ§è¡ä¸äºãè¿å°±æ¯å ä¸ºæ²¡æææç½åå°ãåå°çæ¦å¿µï¼æ²¡æåºåå®¹å¨åèææºçå·®å¼ï¼ä¾æ§å¨ä»¥ä¼ ç»èææºçè§åº¦å»çè§£å®¹å¨ã\n\nå¯¹äºå®¹å¨èè¨ï¼å¶å¯å¨ç¨åºå°±æ¯å®¹å¨åºç¨è¿ç¨ï¼å®¹å¨å°±æ¯ä¸ºäºä¸»è¿ç¨èå­å¨çï¼ä¸»è¿ç¨éåºï¼å®¹å¨å°±å¤±å»äºå­å¨çæä¹ï¼ä»èéåºï¼å¶å®è¾å©è¿ç¨ä¸æ¯å®éè¦å³å¿çä¸è¥¿ã\n\nèä½¿ç¨ service nginx start å½ä»¤ï¼åæ¯å¸æ upstart æ¥ä»¥åå°å®æ¤è¿ç¨å½¢å¼å¯å¨ nginx æå¡ãèåæè¯´äº cmd service nginx start ä¼è¢«çè§£ä¸º cmd [ "sh", "-c", "service nginx start"]ï¼å æ­¤ä¸»è¿ç¨å®éä¸æ¯ shãé£ä¹å½ service nginx start å½ä»¤ç»æåï¼sh ä¹å°±ç»æäºï¼sh ä½ä¸ºä¸»è¿ç¨éåºäºï¼èªç¶å°±ä¼ä»¤å®¹å¨éåºã\n\næ­£ç¡®çåæ³æ¯ç´æ¥æ§è¡ nginx å¯æ§è¡æä»¶ï¼å¹¶ä¸è¦æ±ä»¥åå°å½¢å¼è¿è¡ãæ¯å¦ï¼\n\ncmd ["nginx", "-g", "daemon off;"]\n\n\n\n# entrypoint å¥å£ç¹\n\nentrypoint çæ ¼å¼å run æä»¤æ ¼å¼ä¸æ ·ï¼åä¸º exec æ ¼å¼å shell æ ¼å¼ã\n\nentrypoint çç®çå cmd ä¸æ ·ï¼é½æ¯å¨æå®å®¹å¨å¯å¨ç¨åºååæ°ãentrypoint å¨è¿è¡æ¶ä¹å¯ä»¥æ¿ä»£ï¼ä¸è¿æ¯ cmd è¦ç¥æ¾ç¹çï¼éè¦éè¿ docker run çåæ° --entrypoint æ¥æå®ã\n\nå½æå®äº entrypoint åï¼cmd çå«ä¹å°±åçäºæ¹åï¼ä¸åæ¯ç´æ¥çè¿è¡å¶å½ä»¤ï¼èæ¯å° cmd çåå®¹ä½ä¸ºåæ°ä¼ ç» entrypoint æä»¤ï¼æ¢å¥è¯è¯´å®éæ§è¡æ¶ï¼å°åä¸ºï¼\n\n<entrypoint> "<cmd>"\n\n\né£ä¹æäº cmd åï¼ä¸ºä»ä¹è¿è¦æ entrypoint å¢ï¼è¿ç§ "" æä»ä¹å¥½å¤ä¹ï¼è®©æä»¬æ¥çå ä¸ªåºæ¯ã\n\n\n# åºæ¯ä¸ï¼è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨\n\nåè®¾æä»¬éè¦ä¸ä¸ªå¾ç¥èªå·±å½åå¬ç½ ip çéåï¼é£ä¹å¯ä»¥åç¨ cmd æ¥å®ç°ï¼\n\nfrom ubuntu:16.04\nrun apt-get update \\\n    && apt-get install -y curl \\\n    && rm -rf /var/lib/apt/lists/*\ncmd [ "curl", "-s", "http://ip.cn" ]\n\n\nåå¦æä»¬ä½¿ç¨ docker build -t myip . æ¥æå»ºéåçè¯ï¼å¦ææä»¬éè¦æ¥è¯¢å½åå¬ç½ ipï¼åªéè¦æ§è¡ï¼\n\ndocker run myip\nå½å ipï¼61.148.226.66 æ¥èªï¼åäº¬å¸ èé\n\n\nå¯ï¼è¿ä¹çèµ·æ¥å¥½åå¯ä»¥ç´æ¥æéåå½åå½ä»¤ä½¿ç¨äºï¼ä¸è¿å½ä»¤æ»æåæ°ï¼å¦ææä»¬å¸æå åæ°å¢ï¼æ¯å¦ä»ä¸é¢ç cmd ä¸­å¯ä»¥çå°å®è´¨çå½ä»¤æ¯ curlï¼é£ä¹å¦ææä»¬å¸ææ¾ç¤º http å¤´ä¿¡æ¯ï¼å°±éè¦å ä¸ -i åæ°ãé£ä¹æä»¬å¯ä»¥ç´æ¥å  -i åæ°ç» docker run myip ä¹ï¼\n\ndocker run myip -i\ndocker: error response from daemon: invalid header field value "oci runtime error: container_linux.go:247: starting container process caused \\"exec: \\\\\\"-i\\\\\\": executable file not found in $path\\"\\n".\n\n\næä»¬å¯ä»¥çå°å¯æ§è¡æä»¶æ¾ä¸å°çæ¥éï¼executable file not foundãä¹åæä»¬è¯´è¿ï¼è·å¨éåååé¢çæ¯ commandï¼è¿è¡æ¶ä¼æ¿æ¢ cmd çé»è®¤å¼ãå æ­¤è¿éç -i æ¿æ¢äºåæ¥ç cmdï¼èä¸æ¯æ·»å å¨åæ¥ç curl -s http://ip.cn åé¢ãè -i æ ¹æ¬ä¸æ¯å½ä»¤ï¼æä»¥èªç¶æ¾ä¸å°ã\n\né£ä¹å¦ææä»¬å¸æå å¥ -i è¿åæ°ï¼æä»¬å°±å¿é¡»éæ°å®æ´çè¾å¥è¿ä¸ªå½ä»¤ï¼\n\ndocker run myip curl -s http://ip.cn -i\n\n\nè¿æ¾ç¶ä¸æ¯å¾å¥½çè§£å³æ¹æ¡ï¼èä½¿ç¨ entrypoint å°±å¯ä»¥è§£å³è¿ä¸ªé®é¢ãç°å¨æä»¬éæ°ç¨ entrypoint æ¥å®ç°è¿ä¸ªéåï¼\n\nfrom ubuntu:16.04\nrun apt-get update \\\n    && apt-get install -y curl \\\n    && rm -rf /var/lib/apt/lists/*\nentrypoint [ "curl", "-s", "http://ip.cn" ]\n\n\nè¿æ¬¡æä»¬åæ¥å°è¯ç´æ¥ä½¿ç¨ docker run myip -iï¼\n\ndocker run myip\nå½å ipï¼61.148.226.66 æ¥èªï¼åäº¬å¸ èé\n\ndocker run myip -i\nhttp/1.1 200 ok\nserver: nginx/1.8.0\ndate: tue, 22 nov 2016 05:12:40 gmt\ncontent-type: text/html; charset=utf-8\nvary: accept-encoding\nx-powered-by: php/5.6.24-1~dotdeb+7.1\nx-cache: miss from cache-2\nx-cache-lookup: miss from cache-2:80\nx-cache: miss from proxy-2_6\ntransfer-encoding: chunked\nvia: 1.1 cache-2:80, 1.1 proxy-2_6:8006\nconnection: keep-alive\n\nå½å ipï¼61.148.226.66 æ¥èªï¼åäº¬å¸ èé\n\n\nå¯ä»¥çå°ï¼è¿æ¬¡æåäºãè¿æ¯å ä¸ºå½å­å¨ entrypoint åï¼cmd çåå®¹å°ä¼ä½ä¸ºåæ°ä¼ ç» entrypointï¼èè¿é -i å°±æ¯æ°ç cmdï¼å æ­¤ä¼ä½ä¸ºåæ°ä¼ ç» curlï¼ä»èè¾¾å°äºæä»¬é¢æçææã\n\n\n# åºæ¯äºï¼åºç¨è¿è¡åçåå¤å·¥ä½\n\nå¯å¨å®¹å¨å°±æ¯å¯å¨ä¸»è¿ç¨ï¼ä½æäºæ¶åï¼å¯å¨ä¸»è¿ç¨åï¼éè¦ä¸äºåå¤å·¥ä½ã\n\næ¯å¦ mysql ç±»çæ°æ®åºï¼å¯è½éè¦ä¸äºæ°æ®åºéç½®ãåå§åçå·¥ä½ï¼è¿äºå·¥ä½è¦å¨æç»ç mysql æå¡å¨è¿è¡ä¹åè§£å³ã\n\næ­¤å¤ï¼å¯è½å¸æé¿åä½¿ç¨ root ç¨æ·å»å¯å¨æå¡ï¼ä»èæé«å®å¨æ§ï¼èå¨å¯å¨æå¡åè¿éè¦ä»¥ root èº«ä»½æ§è¡ä¸äºå¿è¦çåå¤å·¥ä½ï¼æååæ¢å°æå¡ç¨æ·èº«ä»½å¯å¨æå¡ãæèé¤äºæå¡å¤ï¼å¶å®å½ä»¤ä¾æ§å¯ä»¥ä½¿ç¨ root èº«ä»½æ§è¡ï¼æ¹ä¾¿è°è¯ç­ã\n\nè¿äºåå¤å·¥ä½æ¯åå®¹å¨ cmd æ å³çï¼æ è®º cmd ä¸ºä»ä¹ï¼é½éè¦äºåè¿è¡ä¸ä¸ªé¢å¤ççå·¥ä½ãè¿ç§æåµä¸ï¼å¯ä»¥åä¸ä¸ªèæ¬ï¼ç¶åæ¾å¥ entrypoint ä¸­å»æ§è¡ï¼èè¿ä¸ªèæ¬ä¼å°æ¥å°çåæ°ï¼ä¹å°±æ¯ ``ï¼ä½ä¸ºå½ä»¤ï¼å¨èæ¬æåæ§è¡ãæ¯å¦å®æ¹éå redis ä¸­å°±æ¯è¿ä¹åçï¼\n\nfrom alpine:3.4\n...\nrun addgroup -s redis && adduser -s -g redis redis\n...\nentrypoint ["docker-entrypoint.sh"]\n\nexpose 6379\ncmd [ "redis-server" ]\n\n\nå¯ä»¥çå°å¶ä¸­ä¸ºäº redis æå¡åå»ºäº redis ç¨æ·ï¼å¹¶å¨æåæå®äº entrypoint ä¸º docker-entrypoint.sh èæ¬ã\n\n#!/bin/sh\n...\n# allow the container to be started with `--user`\nif [ "$1" = \'redis-server\' -a "$(id -u)" = \'0\' ]; then\n\tchown -r redis .\n\texec su-exec redis "$0" "$@"\nfi\n\nexec "$@"\n\n\nè¯¥èæ¬çåå®¹å°±æ¯æ ¹æ® cmd çåå®¹æ¥å¤æ­ï¼å¦ææ¯ redis-server çè¯ï¼ååæ¢å° redis ç¨æ·èº«ä»½å¯å¨æå¡å¨ï¼å¦åä¾æ§ä½¿ç¨ root èº«ä»½æ§è¡ãæ¯å¦ï¼\n\ndocker run -it redis id\nuid=0(root) gid=0(root) groups=0(root)\n\n\n\n# env è®¾ç½®ç¯å¢åé\n\næ ¼å¼æä¸¤ç§ï¼\n\n * env\n * env = =...\n\nè¿ä¸ªæä»¤å¾ç®åï¼å°±æ¯è®¾ç½®ç¯å¢åéèå·²ï¼æ è®ºæ¯åé¢çå¶å®æä»¤ï¼å¦ runï¼è¿æ¯è¿è¡æ¶çåºç¨ï¼é½å¯ä»¥ç´æ¥ä½¿ç¨è¿éå®ä¹çç¯å¢åéã\n\nenv version=1.0 debug=on \\\n    name="happy feet"\n\n\nè¿ä¸ªä¾å­ä¸­æ¼ç¤ºäºå¦ä½æ¢è¡ï¼ä»¥åå¯¹å«æç©ºæ ¼çå¼ç¨åå¼å·æ¬èµ·æ¥çåæ³ï¼è¿å shell ä¸çè¡ä¸ºæ¯ä¸è´çã\n\nå®ä¹äºç¯å¢åéï¼é£ä¹å¨åç»­çæä»¤ä¸­ï¼å°±å¯ä»¥ä½¿ç¨è¿ä¸ªç¯å¢åéãæ¯å¦å¨å®æ¹ node éå dockerfile ä¸­ï¼å°±æç±»ä¼¼è¿æ ·çä»£ç ï¼\n\nenv node_version 7.2.0\n\nrun curl -slo "https://nodejs.org/dist/v$node_version/node-v$node_version-linux-x64.tar.xz" \\\n  && curl -slo "https://nodejs.org/dist/v$node_version/shasums256.txt.asc" \\\n  && gpg --batch --decrypt --output shasums256.txt shasums256.txt.asc \\\n  && grep " node-v$node_version-linux-x64.tar.xz\\$" shasums256.txt | sha256sum -c - \\\n  && tar -xjf "node-v$node_version-linux-x64.tar.xz" -c /usr/local --strip-components=1 \\\n  && rm "node-v$node_version-linux-x64.tar.xz" shasums256.txt.asc shasums256.txt \\\n  && ln -s /usr/local/bin/node /usr/local/bin/nodejs\n\n\nå¨è¿éåå®ä¹äºç¯å¢åé node_versionï¼å¶åç run è¿å±éï¼å¤æ¬¡ä½¿ç¨ $node_version æ¥è¿è¡æä½å®å¶ãå¯ä»¥çå°ï¼å°æ¥åçº§éåæå»ºçæ¬çæ¶åï¼åªéè¦æ´æ° 7.2.0 å³å¯ï¼dockerfile æå»ºç»´æ¤åå¾æ´è½»æ¾äºã\n\nä¸åæä»¤å¯ä»¥æ¯æç¯å¢åéå±å¼ï¼ addãcopyãenvãexposeãlabelãuserãworkdirãvolumeãstopsignalãonbuildã\n\nå¯ä»¥ä»è¿ä¸ªæä»¤åè¡¨éæè§å°ï¼ç¯å¢åéå¯ä»¥ä½¿ç¨çå°æ¹å¾å¤ï¼å¾å¼ºå¤§ãéè¿ç¯å¢åéï¼æä»¬å¯ä»¥è®©ä¸ä»½ dockerfile å¶ä½æ´å¤çéåï¼åªéä½¿ç¨ä¸åçç¯å¢åéå³å¯ã\n\n\n# arg æå»ºåæ°\n\næ ¼å¼ï¼arg <åæ°å>[=<é»è®¤å¼>]\n\næå»ºåæ°å env çææä¸æ ·ï¼é½æ¯è®¾ç½®ç¯å¢åéãæä¸åçæ¯ï¼arg æè®¾ç½®çæå»ºç¯å¢çç¯å¢åéï¼å¨å°æ¥å®¹å¨è¿è¡æ¶æ¯ä¸ä¼å­å¨è¿äºç¯å¢åéçãä½æ¯ä¸è¦å æ­¤å°±ä½¿ç¨ arg ä¿å­å¯ç ä¹ç±»çä¿¡æ¯ï¼å ä¸º docker history è¿æ¯å¯ä»¥çå°ææå¼çã\n\ndockerfile ä¸­ç arg æä»¤æ¯å®ä¹åæ°åç§°ï¼ä»¥åå®ä¹å¶é»è®¤å¼ãè¯¥é»è®¤å¼å¯ä»¥å¨æå»ºå½ä»¤ docker build ä¸­ç¨ --build-arg <åæ°å>=<å¼> æ¥è¦çã\n\nå¨ 1.13 ä¹åççæ¬ï¼è¦æ± --build-arg ä¸­çåæ°åï¼å¿é¡»å¨ dockerfile ä¸­ç¨ arg å®ä¹è¿äºï¼æ¢å¥è¯è¯´ï¼å°±æ¯ --build-arg æå®çåæ°ï¼å¿é¡»å¨ dockerfile ä¸­ä½¿ç¨äºãå¦æå¯¹åºåæ°æ²¡æè¢«ä½¿ç¨ï¼åä¼æ¥ééåºæå»ºãä» 1.13 å¼å§ï¼è¿ç§ä¸¥æ ¼çéå¶è¢«æ¾å¼ï¼ä¸åæ¥ééåºï¼èæ¯æ¾ç¤ºè­¦åä¿¡æ¯ï¼å¹¶ç»§ç»­æå»ºãè¿å¯¹äºä½¿ç¨ ci ç³»ç»ï¼ç¨åæ ·çæå»ºæµç¨æå»ºä¸åç dockerfile çæ¶åæ¯è¾æå¸®å©ï¼é¿åæå»ºå½ä»¤å¿é¡»æ ¹æ®æ¯ä¸ª dockerfile çåå®¹ä¿®æ¹ã\n\n\n# volume å®ä¹å¿åå·\n\næ ¼å¼ä¸ºï¼\n\n * volume ["<è·¯å¾1>", "<è·¯å¾2>"...]\n * volume <è·¯å¾>\n\nä¹åæä»¬è¯´è¿ï¼å®¹å¨è¿è¡æ¶åºè¯¥å°½éä¿æå®¹å¨å­å¨å±ä¸åçåæä½ï¼å¯¹äºæ°æ®åºç±»éè¦ä¿å­å¨ææ°æ®çåºç¨ï¼å¶æ°æ®åºæä»¶åºè¯¥ä¿å­äºå·(volume)ä¸­ï¼åé¢çç« èæä»¬ä¼è¿ä¸æ­¥ä»ç» docker å·çæ¦å¿µãä¸ºäºé²æ­¢è¿è¡æ¶ç¨æ·å¿è®°å°å¨ææä»¶æä¿å­ç®å½æè½½ä¸ºå·ï¼å¨ dockerfile ä¸­ï¼æä»¬å¯ä»¥äºåæå®æäºç®å½æè½½ä¸ºå¿åå·ï¼è¿æ ·å¨è¿è¡æ¶å¦æç¨æ·ä¸æå®æè½½ï¼å¶åºç¨ä¹å¯ä»¥æ­£å¸¸è¿è¡ï¼ä¸ä¼åå®¹å¨å­å¨å±åå¥å¤§éæ°æ®ã\n\nvolume /data\n\n\nè¿éç /data ç®å½å°±ä¼å¨è¿è¡æ¶èªå¨æè½½ä¸ºå¿åå·ï¼ä»»ä½å /data ä¸­åå¥çä¿¡æ¯é½ä¸ä¼è®°å½è¿å®¹å¨å­å¨å±ï¼ä»èä¿è¯äºå®¹å¨å­å¨å±çæ ç¶æåãå½ç¶ï¼è¿è¡æ¶å¯ä»¥è¦çè¿ä¸ªæè½½è®¾ç½®ãæ¯å¦ï¼\n\ndocker run -d -v mydata:/data xxxx\n\n\nå¨è¿è¡å½ä»¤ä¸­ï¼å°±ä½¿ç¨äº mydata è¿ä¸ªå½åå·æè½½å°äº /data è¿ä¸ªä½ç½®ï¼æ¿ä»£äº dockerfile ä¸­å®ä¹çå¿åå·çæè½½éç½®ã\n\n\n# expose æ´é²ç«¯å£\n\næ ¼å¼ä¸º expose <ç«¯å£1> [<ç«¯å£2>...]ã\n\nexpose æä»¤æ¯å£°æè¿è¡æ¶å®¹å¨æä¾æå¡ç«¯å£ï¼è¿åªæ¯ä¸ä¸ªå£°æï¼å¨è¿è¡æ¶å¹¶ä¸ä¼å ä¸ºè¿ä¸ªå£°æåºç¨å°±ä¼å¼å¯è¿ä¸ªç«¯å£çæå¡ãå¨ dockerfile ä¸­åå¥è¿æ ·çå£°ææä¸¤ä¸ªå¥½å¤ï¼ä¸ä¸ªæ¯å¸®å©éåä½¿ç¨èçè§£è¿ä¸ªéåæå¡çå®æ¤ç«¯å£ï¼ä»¥æ¹ä¾¿éç½®æ å°ï¼å¦ä¸ä¸ªç¨å¤åæ¯å¨è¿è¡æ¶ä½¿ç¨éæºç«¯å£æ å°æ¶ï¼ä¹å°±æ¯ docker run -p æ¶ï¼ä¼èªå¨éæºæ å° expose çç«¯å£ã\n\næ­¤å¤ï¼å¨æ©æ docker çæ¬ä¸­è¿æä¸ä¸ªç¹æ®çç¨å¤ãä»¥åææå®¹å¨é½è¿è¡äºé»è®¤æ¡¥æ¥ç½ç»ä¸­ï¼å æ­¤ææå®¹å¨äºç¸ä¹é´é½å¯ä»¥ç´æ¥è®¿é®ï¼è¿æ ·å­å¨ä¸å®çå®å¨æ§é®é¢ãäºæ¯æäºä¸ä¸ª docker å¼æåæ° --icc=falseï¼å½æå®è¯¥åæ°åï¼å®¹å¨é´å°é»è®¤æ æ³äºè®¿ï¼é¤éäºç¸é´ä½¿ç¨äº --links åæ°çå®¹å¨æå¯ä»¥äºéï¼å¹¶ä¸åªæéåä¸­ expose æå£°æçç«¯å£æå¯ä»¥è¢«è®¿é®ãè¿ä¸ª --icc=false çç¨æ³ï¼å¨å¼å¥äº docker network åå·²ç»åºæ¬ä¸ç¨äºï¼éè¿èªå®ä¹ç½ç»å¯ä»¥å¾è½»æ¾çå®ç°å®¹å¨é´çäºèä¸éç¦»ã\n\nè¦å° expose åå¨è¿è¡æ¶ä½¿ç¨ -p <å®¿ä¸»ç«¯å£>:<å®¹å¨ç«¯å£> åºåå¼æ¥ã-pï¼æ¯æ å°å®¿ä¸»ç«¯å£åå®¹å¨ç«¯å£ï¼æ¢å¥è¯è¯´ï¼å°±æ¯å°å®¹å¨çå¯¹åºç«¯å£æå¡å¬å¼ç»å¤çè®¿é®ï¼è expose ä»ä»æ¯å£°æå®¹å¨æç®ä½¿ç¨ä»ä¹ç«¯å£èå·²ï¼å¹¶ä¸ä¼èªå¨å¨å®¿ä¸»è¿è¡ç«¯å£æ å°ã\n\n\n# workdir æå®å·¥ä½ç®å½\n\næ ¼å¼ä¸º workdir <å·¥ä½ç®å½è·¯å¾>ã\n\nä½¿ç¨ workdir æä»¤å¯ä»¥æ¥æå®å·¥ä½ç®å½ï¼æèç§°ä¸ºå½åç®å½ï¼ï¼ä»¥ååå±çå½åç®å½å°±è¢«æ¹ä¸ºæå®çç®å½ï¼å¦è¯¥ç®å½ä¸å­å¨ï¼workdir ä¼å¸®ä½ å»ºç«ç®å½ã\n\nä¹åæå°ä¸äºåå­¦èå¸¸ç¯çéè¯¯æ¯æ dockerfile ç­åäº shell èæ¬æ¥ä¹¦åï¼è¿ç§éè¯¯ççè§£è¿å¯è½ä¼å¯¼è´åºç°ä¸é¢è¿æ ·çéè¯¯ï¼\n\nrun cd /app\nrun echo "hello" > world.txt\n\n\nå¦æå°è¿ä¸ª dockerfile è¿è¡æå»ºéåè¿è¡åï¼ä¼åç°æ¾ä¸å° /app/world.txt æä»¶ï¼æèå¶åå®¹ä¸æ¯ helloãåå å¶å®å¾ç®åï¼å¨ shell ä¸­ï¼è¿ç»­ä¸¤è¡æ¯åä¸ä¸ªè¿ç¨æ§è¡ç¯å¢ï¼å æ­¤åä¸ä¸ªå½ä»¤ä¿®æ¹çåå­ç¶æï¼ä¼ç´æ¥å½±ååä¸ä¸ªå½ä»¤ï¼èå¨ dockerfile ä¸­ï¼è¿ä¸¤è¡ run å½ä»¤çæ§è¡ç¯å¢æ ¹æ¬ä¸åï¼æ¯ä¸¤ä¸ªå®å¨ä¸åçå®¹å¨ãè¿å°±æ¯å¯¹ dockerfile æå»ºåå±å­å¨çæ¦å¿µä¸äºè§£æå¯¼è´çéè¯¯ã\n\nä¹åè¯´è¿æ¯ä¸ä¸ª run é½æ¯å¯å¨ä¸ä¸ªå®¹å¨ãæ§è¡å½ä»¤ãç¶åæäº¤å­å¨å±æä»¶åæ´ãç¬¬ä¸å± run cd /app çæ§è¡ä»ä»æ¯å½åè¿ç¨çå·¥ä½ç®å½åæ´ï¼ä¸ä¸ªåå­ä¸çååèå·²ï¼å¶ç»æä¸ä¼é æä»»ä½æä»¶åæ´ãèå°ç¬¬äºå±çæ¶åï¼å¯å¨çæ¯ä¸ä¸ªå¨æ°çå®¹å¨ï¼è·ç¬¬ä¸å±çå®¹å¨æ´å®å¨æ²¡å³ç³»ï¼èªç¶ä¸å¯è½ç»§æ¿åä¸å±æå»ºè¿ç¨ä¸­çåå­ååã\n\nå æ­¤å¦æéè¦æ¹åä»¥ååå±çå·¥ä½ç®å½çä½ç½®ï¼é£ä¹åºè¯¥ä½¿ç¨ workdir æä»¤ã\n\n\n# user æå®å½åç¨æ·\n\næ ¼å¼ï¼user <ç¨æ·å>\n\nuser æä»¤å workdir ç¸ä¼¼ï¼é½æ¯æ¹åç¯å¢ç¶æå¹¶å½±åä»¥åçå±ãworkdir æ¯æ¹åå·¥ä½ç®å½ï¼user åæ¯æ¹åä¹åå±çæ§è¡ run, cmd ä»¥å entrypoint è¿ç±»å½ä»¤çèº«ä»½ã\n\nå½ç¶ï¼å workdir ä¸æ ·ï¼user åªæ¯å¸®å©ä½ åæ¢å°æå®ç¨æ·èå·²ï¼è¿ä¸ªç¨æ·å¿é¡»æ¯äºåå»ºç«å¥½çï¼å¦åæ æ³åæ¢ã\n\nrun groupadd -r redis && useradd -r -g redis redis\nuser redis\nrun [ "redis-server" ]\n\n\nå¦æä»¥ root æ§è¡çèæ¬ï¼å¨æ§è¡æé´å¸ææ¹åèº«ä»½ï¼æ¯å¦å¸æä»¥æä¸ªå·²ç»å»ºç«å¥½çç¨æ·æ¥è¿è¡æä¸ªæå¡è¿ç¨ï¼ä¸è¦ä½¿ç¨ su æè sudoï¼è¿äºé½éè¦æ¯è¾éº»ç¦çéç½®ï¼èä¸å¨ tty ç¼ºå¤±çç¯å¢ä¸ç»å¸¸åºéãå»ºè®®ä½¿ç¨ gosuã\n\n# å»ºç« redis ç¨æ·ï¼å¹¶ä½¿ç¨ gosu æ¢å¦ä¸ä¸ªç¨æ·æ§è¡å½ä»¤\nrun groupadd -r redis && useradd -r -g redis redis\n# ä¸è½½ gosu\nrun wget -o /usr/local/bin/gosu "https://github.com/tianon/gosu/releases/download/1.7/gosu-amd64" \\\n    && chmod +x /usr/local/bin/gosu \\\n    && gosu nobody true\n# è®¾ç½® cmdï¼å¹¶ä»¥å¦å¤çç¨æ·æ§è¡\ncmd [ "exec", "gosu", "redis", "redis-server" ]\n\n\n\n# healthcheck å¥åº·æ£æ¥\n\næ ¼å¼ï¼\n\n * healthcheck [éé¡¹] cmd <å½ä»¤>ï¼è®¾ç½®æ£æ¥å®¹å¨å¥åº·ç¶åµçå½ä»¤\n * healthcheck noneï¼å¦æåºç¡éåæå¥åº·æ£æ¥æä»¤ï¼ä½¿ç¨è¿è¡å¯ä»¥å±è½æå¶å¥åº·æ£æ¥æä»¤\n\nhealthcheck æä»¤æ¯åè¯ docker åºè¯¥å¦ä½è¿è¡å¤æ­å®¹å¨çç¶ææ¯å¦æ­£å¸¸ï¼è¿æ¯ docker 1.12 å¼å¥çæ°æä»¤ã\n\nå¨æ²¡æ healthcheck æä»¤åï¼docker å¼æåªå¯ä»¥éè¿å®¹å¨åä¸»è¿ç¨æ¯å¦éåºæ¥å¤æ­å®¹å¨æ¯å¦ç¶æå¼å¸¸ãå¾å¤æåµä¸è¿æ²¡é®é¢ï¼ä½æ¯å¦æç¨åºè¿å¥æ­»éç¶æï¼æèæ­»å¾ªç¯ç¶æï¼åºç¨è¿ç¨å¹¶ä¸éåºï¼ä½æ¯è¯¥å®¹å¨å·²ç»æ æ³æä¾æå¡äºãå¨ 1.12 ä»¥åï¼docker ä¸ä¼æ£æµå°å®¹å¨çè¿ç§ç¶æï¼ä»èä¸ä¼éæ°è°åº¦ï¼å¯¼è´å¯è½ä¼æé¨åå®¹å¨å·²ç»æ æ³æä¾æå¡äºå´è¿å¨æ¥åç¨æ·è¯·æ±ã\n\nèèª 1.12 ä¹åï¼docker æä¾äº healthcheck æä»¤ï¼éè¿è¯¥æä»¤æå®ä¸è¡å½ä»¤ï¼ç¨è¿è¡å½ä»¤æ¥å¤æ­å®¹å¨ä¸»è¿ç¨çæå¡ç¶ææ¯å¦è¿æ­£å¸¸ï¼ä»èæ¯è¾çå®çååºå®¹å¨å®éç¶æã\n\nå½å¨ä¸ä¸ªéåæå®äº healthcheck æä»¤åï¼ç¨å¶å¯å¨å®¹å¨ï¼åå§ç¶æä¼ä¸º startingï¼å¨ healthcheck æä»¤æ£æ¥æåååä¸º healthyï¼å¦æè¿ç»­ä¸å®æ¬¡æ°å¤±è´¥ï¼åä¼åä¸º unhealthyã\n\nhealthcheck æ¯æä¸åéé¡¹ï¼\n\n * --interval=<é´é>ï¼ä¸¤æ¬¡å¥åº·æ£æ¥çé´éï¼é»è®¤ä¸º 30 ç§ï¼\n * --timeout=<æ¶é¿>ï¼å¥åº·æ£æ¥å½ä»¤è¿è¡è¶æ¶æ¶é´ï¼å¦æè¶è¿è¿ä¸ªæ¶é´ï¼æ¬æ¬¡å¥åº·æ£æ¥å°±è¢«è§ä¸ºå¤±è´¥ï¼é»è®¤ 30 ç§ï¼\n * --retries=<æ¬¡æ°>ï¼å½è¿ç»­å¤±è´¥æå®æ¬¡æ°åï¼åå°å®¹å¨ç¶æè§ä¸º unhealthyï¼é»è®¤ 3 æ¬¡ã\n\nå cmd, entrypoint ä¸æ ·ï¼healthcheck åªå¯ä»¥åºç°ä¸æ¬¡ï¼å¦æåäºå¤ä¸ªï¼åªææåä¸ä¸ªçæã\n\nå¨ healthcheck [éé¡¹] cmd åé¢çå½ä»¤ï¼æ ¼å¼å entrypoint ä¸æ ·ï¼åä¸º shell æ ¼å¼ï¼å exec æ ¼å¼ãå½ä»¤çè¿åå¼å³å®äºè¯¥æ¬¡å¥åº·æ£æ¥çæåä¸å¦ï¼0ï¼æåï¼1ï¼å¤±è´¥ï¼2ï¼ä¿çï¼ä¸è¦ä½¿ç¨è¿ä¸ªå¼ã\n\nåè®¾æä»¬æä¸ªéåæ¯ä¸ªæç®åç web æå¡ï¼æä»¬å¸æå¢å å¥åº·æ£æ¥æ¥å¤æ­å¶ web æå¡æ¯å¦å¨æ­£å¸¸å·¥ä½ï¼æä»¬å¯ä»¥ç¨ curl æ¥å¸®å©å¤æ­ï¼å¶ dockerfile ç healthcheck å¯ä»¥è¿ä¹åï¼\n\nfrom nginx\nrun apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*\nhealthcheck --interval=5s --timeout=3s \\\n  cmd curl -fs http://localhost/ || exit 1\n\n\nè¿éæä»¬è®¾ç½®äºæ¯ 5 ç§æ£æ¥ä¸æ¬¡ï¼è¿éä¸ºäºè¯éªæä»¥é´ééå¸¸ç­ï¼å®éåºè¯¥ç¸å¯¹è¾é¿ï¼ï¼å¦æå¥åº·æ£æ¥å½ä»¤è¶è¿ 3 ç§æ²¡ååºå°±è§ä¸ºå¤±è´¥ï¼å¹¶ä¸ä½¿ç¨ curl -fs http://localhost/ || exit 1 ä½ä¸ºå¥åº·æ£æ¥å½ä»¤ã\n\nä½¿ç¨ docker build æ¥æå»ºè¿ä¸ªéåï¼\n\ndocker build -t myweb:v1 .\n\n\næå»ºå¥½äºåï¼æä»¬å¯å¨ä¸ä¸ªå®¹å¨ï¼\n\ndocker run -d --name web -p 80:80 myweb:v1\n\n\nå½è¿è¡è¯¥éååï¼å¯ä»¥éè¿ docker container ls çå°æåçç¶æä¸º (health: starting)ï¼\n\ndocker container ls\ncontainer id        image               command                  created             status                            ports               names\n03e28eb00bd0        myweb:v1            "nginx -g \'daemon off"   3 seconds ago       up 2 seconds (health: starting)   80/tcp, 443/tcp     web\n\n\nå¨ç­å¾å ç§éåï¼åæ¬¡ docker container lsï¼å°±ä¼çå°å¥åº·ç¶æååä¸ºäº (healthy)ï¼\n\ndocker container ls\ncontainer id        image               command                  created             status                    ports               names\n03e28eb00bd0        myweb:v1            "nginx -g \'daemon off"   18 seconds ago      up 16 seconds (healthy)   80/tcp, 443/tcp     web\n\n\nå¦æå¥åº·æ£æ¥è¿ç»­å¤±è´¥è¶è¿äºéè¯æ¬¡æ°ï¼ç¶æå°±ä¼åä¸º (unhealthy)ã\n\nä¸ºäºå¸®å©æéï¼å¥åº·æ£æ¥å½ä»¤çè¾åºï¼åæ¬ stdout ä»¥å stderrï¼é½ä¼è¢«å­å¨äºå¥åº·ç¶æéï¼å¯ä»¥ç¨ docker inspect æ¥æ¥çã\n\ndocker inspect --format \'{{json .state.health}}\' web | python -m json.tool\n{\n    "failingstreak": 0,\n    "log": [\n        {\n            "end": "2016-11-25t14:35:37.940957051z",\n            "exitcode": 0,\n            "output": "<!doctype html>\\n<html>\\n<head>\\n<title>welcome to nginx!</title>\\n<style>\\n    body {\\n        width: 35em;\\n        margin: 0 auto;\\n        font-family: tahoma, verdana, arial, sans-serif;\\n    }\\n</style>\\n</head>\\n<body>\\n<h1>welcome to nginx!</h1>\\n<p>if you see this page, the nginx web server is successfully installed and\\nworking. further configuration is required.</p>\\n\\n<p>for online documentation and support please refer to\\n<a href=\\"http://nginx.org/\\">nginx.org</a>.<br/>\\ncommercial support is available at\\n<a href=\\"http://nginx.com/\\">nginx.com</a>.</p>\\n\\n<p><em>thank you for using nginx.</em></p>\\n</body>\\n</html>\\n",\n            "start": "2016-11-25t14:35:37.780192565z"\n        }\n    ],\n    "status": "healthy"\n}\n\n\n\n# onbuild ä¸ºä»äººä½å«è¡£\n\næ ¼å¼ï¼onbuild <å¶å®æä»¤>ã\n\nonbuild æ¯ä¸ä¸ªç¹æ®çæä»¤ï¼å®åé¢è·çæ¯å¶å®æä»¤ï¼æ¯å¦ run, copy ç­ï¼èè¿äºæä»¤ï¼å¨å½åéåæå»ºæ¶å¹¶ä¸ä¼è¢«æ§è¡ãåªæå½ä»¥å½åéåä¸ºåºç¡éåï¼å»æå»ºä¸ä¸çº§éåçæ¶åæä¼è¢«æ§è¡ã\n\ndockerfile ä¸­çå¶å®æä»¤é½æ¯ä¸ºäºå®å¶å½åéåèåå¤çï¼å¯æ onbuild æ¯ä¸ºäºå¸®å©å«äººå®å¶èªå·±èåå¤çã\n\nåè®¾æä»¬è¦å¶ä½ node.js æåçåºç¨çéåãæä»¬é½ç¥é node.js ä½¿ç¨ npm è¿è¡åç®¡çï¼ææä¾èµãéç½®ãå¯å¨ä¿¡æ¯ç­ä¼æ¾å° package.json æä»¶éãå¨æ¿å°ç¨åºä»£ç åï¼éè¦åè¿è¡ npm install æå¯ä»¥è·å¾ææéè¦çä¾èµãç¶åå°±å¯ä»¥éè¿ npm start æ¥å¯å¨åºç¨ãå æ­¤ï¼ä¸è¬æ¥è¯´ä¼è¿æ ·å dockerfileï¼\n\nfrom node:slim\nrun mkdir /app\nworkdir /app\ncopy ./package.json /app\nrun [ "npm", "install" ]\ncopy . /app/\ncmd [ "npm", "start" ]\n\n\næè¿ä¸ª dockerfile æ¾å° node.js é¡¹ç®çæ ¹ç®å½ï¼æå»ºå¥½éååï¼å°±å¯ä»¥ç´æ¥æ¿æ¥å¯å¨å®¹å¨è¿è¡ãä½æ¯å¦ææä»¬è¿æç¬¬äºä¸ª node.js é¡¹ç®ä¹å·®ä¸å¤å¢ï¼å¥½å§ï¼é£å°±åæè¿ä¸ª dockerfile å¤å¶å°ç¬¬äºä¸ªé¡¹ç®éãé£å¦ææç¬¬ä¸ä¸ªé¡¹ç®å¢ï¼åå¤å¶ä¹ï¼æä»¶çå¯æ¬è¶å¤ï¼çæ¬æ§å¶å°±è¶å°é¾ï¼è®©æä»¬ç»§ç»­çè¿æ ·çåºæ¯ç»´æ¤çé®é¢ã\n\nå¦æç¬¬ä¸ä¸ª node.js é¡¹ç®å¨å¼åè¿ç¨ä¸­ï¼åç°è¿ä¸ª dockerfile éå­å¨é®é¢ï¼æ¯å¦æ²éå­äºãæèéè¦å®è£é¢å¤çåï¼ç¶åå¼åäººåä¿®å¤äºè¿ä¸ª dockerfileï¼åæ¬¡æå»ºï¼é®é¢è§£å³ã\bç¬¬ä¸ä¸ªé¡¹ç®æ²¡é®é¢äºï¼ä½æ¯ç¬¬äºä¸ªé¡¹ç®å¢ï¼è½ç¶æå dockerfile æ¯å¤å¶ãç²è´´èªç¬¬ä¸ä¸ªé¡¹ç®çï¼ä½æ¯å¹¶ä¸ä¼å ä¸ºç¬¬ä¸ä¸ªé¡¹ç®ä¿®å¤äºä»ä»¬ç dockerfileï¼èç¬¬äºä¸ªé¡¹ç®ç dockerfile å°±ä¼è¢«èªå¨ä¿®å¤ã\n\né£ä¹æä»¬å¯ä¸å¯ä»¥åä¸ä¸ªåºç¡éåï¼ç¶ååä¸ªé¡¹ç®ä½¿ç¨è¿ä¸ªåºç¡éåå¢ï¼è¿æ ·åºç¡éåæ´æ°ï¼åä¸ªé¡¹ç®ä¸ç¨åæ­¥ dockerfile çååï¼éæ°æå»ºåå°±ç»§æ¿äºåºç¡éåçæ´æ°ï¼å¥½å§ï¼å¯ä»¥ï¼è®©æä»¬ççè¿æ ·çç»æãé£ä¹ä¸é¢çè¿ä¸ª dockerfile å°±ä¼åä¸ºï¼\n\nfrom node:slim\nrun mkdir /app\nworkdir /app\ncmd [ "npm", "start" ]\n\n\nè¿éæä»¬æé¡¹ç®ç¸å³çæå»ºæä»¤æ¿åºæ¥ï¼æ¾å°å­é¡¹ç®éå»ãåè®¾è¿ä¸ªåºç¡éåçåå­ä¸º my-node çè¯ï¼åä¸ªé¡¹ç®åçèªå·±ç dockerfile å°±åä¸ºï¼\n\nfrom my-node\ncopy ./package.json /app\nrun [ "npm", "install" ]\ncopy . /app/\n\n\nåºç¡éååååï¼åä¸ªé¡¹ç®é½ç¨è¿ä¸ª dockerfile éæ°æå»ºéåï¼ä¼ç»§æ¿åºç¡éåçæ´æ°ã\n\né£ä¹ï¼é®é¢è§£å³äºä¹ï¼æ²¡æãåç¡®è¯´ï¼åªè§£å³äºä¸åãå¦æè¿ä¸ª dockerfile éé¢æäºä¸è¥¿éè¦è°æ´å¢ï¼æ¯å¦ npm install é½éè¦å ä¸äºåæ°ï¼é£æä¹åï¼è¿ä¸è¡ run æ¯ä¸å¯è½æ¾å¥åºç¡éåçï¼å ä¸ºæ¶åå°äºå½åé¡¹ç®ç ./package.jsonï¼é¾éåè¦ä¸ä¸ªä¸ªä¿®æ¹ä¹ï¼æä»¥è¯´ï¼è¿æ ·å¶ä½åºç¡éåï¼åªè§£å³äºåæ¥ç dockerfile çå4æ¡æä»¤çååé®é¢ï¼èåé¢ä¸æ¡æä»¤çåååå®å¨æ²¡åæ³å¤çã\n\nonbuild å¯ä»¥è§£å³è¿ä¸ªé®é¢ãè®©æä»¬ç¨ onbuild éæ°åä¸ä¸åºç¡éåç dockerfile:\n\nfrom node:slim\nrun mkdir /app\nworkdir /app\nonbuild copy ./package.json /app\nonbuild run [ "npm", "install" ]\nonbuild copy . /app/\ncmd [ "npm", "start" ]\n\n\nè¿æ¬¡æä»¬åå°åå§ç dockerfileï¼ä½æ¯è¿æ¬¡å°é¡¹ç®ç¸å³çæä»¤å ä¸ onbuildï¼è¿æ ·å¨æå»ºåºç¡éåçæ¶åï¼è¿ä¸è¡å¹¶ä¸ä¼è¢«æ§è¡ãç¶ååä¸ªé¡¹ç®ç dockerfile å°±åæäºç®åå°ï¼\n\nfrom my-node\n\n\næ¯çï¼åªæè¿ä¹ä¸è¡ãå½å¨åä¸ªé¡¹ç®ç®å½ä¸­ï¼ç¨è¿ä¸ªåªæä¸è¡ç dockerfile æå»ºéåæ¶ï¼ä¹ååºç¡éåçé£ä¸è¡ onbuild å°±ä¼å¼å§æ§è¡ï¼æåçå°å½åé¡¹ç®çä»£ç å¤å¶è¿éåãå¹¶ä¸éå¯¹æ¬é¡¹ç®æ§è¡ npm installï¼çæåºç¨éåã\n\n\n# åèææ¡£\n\n * dockerfie å®æ¹ææ¡£\n * dockerfile æä½³å®è·µææ¡£\n * docker å®æ¹éå dockerfile',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Dockerfile å¤é¶æ®µæå»º",frontmatter:{title:"Dockerfile å¤é¶æ®µæå»º",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/f99491/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/09.Dockerfile%20%E5%A4%9A%E9%98%B6%E6%AE%B5%E6%9E%84%E5%BB%BA.html",relativePath:"17.Docker/04.Docker éå/09.Dockerfile å¤é¶æ®µæå»º.md",key:"v-12b8a377",path:"/pages/f99491/",headers:[{level:2,title:"ä¹åçåæ³",slug:"ä¹åçåæ³",normalizedTitle:"ä¹åçåæ³",charIndex:23},{level:3,title:"å¨é¨æ¾å¥ä¸ä¸ª Dockerfile",slug:"å¨é¨æ¾å¥ä¸ä¸ª-dockerfile",normalizedTitle:"å¨é¨æ¾å¥ä¸ä¸ª dockerfile",charIndex:81},{level:3,title:"åæ£å°å¤ä¸ª Dockerfile",slug:"åæ£å°å¤ä¸ª-dockerfile",normalizedTitle:"åæ£å°å¤ä¸ª dockerfile",charIndex:770},{level:2,title:"ä½¿ç¨å¤é¶æ®µæå»º",slug:"ä½¿ç¨å¤é¶æ®µæå»º",normalizedTitle:"ä½¿ç¨å¤é¶æ®µæå»º",charIndex:1934},{level:3,title:"åªæå»ºæä¸é¶æ®µçéå",slug:"åªæå»ºæä¸é¶æ®µçéå",normalizedTitle:"åªæå»ºæä¸é¶æ®µçéå",charIndex:2835},{level:3,title:"æå»ºæ¶ä»å¶ä»éåå¤å¶æä»¶",slug:"æå»ºæ¶ä»å¶ä»éåå¤å¶æä»¶",normalizedTitle:"æå»ºæ¶ä»å¶ä»éåå¤å¶æä»¶",charIndex:3036}],headersStr:"ä¹åçåæ³ å¨é¨æ¾å¥ä¸ä¸ª Dockerfile åæ£å°å¤ä¸ª Dockerfile ä½¿ç¨å¤é¶æ®µæå»º åªæå»ºæä¸é¶æ®µçéå æå»ºæ¶ä»å¶ä»éåå¤å¶æä»¶",content:'# Dockerfile å¤é¶æ®µæå»º\n\n\n# ä¹åçåæ³\n\nå¨ Docker 17.05 çæ¬ä¹åï¼æä»¬æå»º Docker éåæ¶ï¼éå¸¸ä¼éç¨ä¸¤ç§æ¹å¼ï¼\n\n\n# å¨é¨æ¾å¥ä¸ä¸ª Dockerfile\n\nä¸ç§æ¹å¼æ¯å°ææçæå»ºè¿ç¨ç¼åå«å¨ä¸ä¸ª Dockerfile ä¸­ï¼åæ¬é¡¹ç®åå¶ä¾èµåºçç¼è¯ãæµè¯ãæåç­æµç¨ï¼è¿éå¯è½ä¼å¸¦æ¥çä¸äºé®é¢ï¼\n\n * Dockerfile ç¹å«é¿ï¼å¯ç»´æ¤æ§éä½\n * éåå±æ¬¡å¤ï¼éåä½ç§¯è¾å¤§ï¼é¨ç½²æ¶é´åé¿\n * æºä»£ç å­å¨æ³é²çé£é©\n\nä¾å¦\n\nç¼å app.go æä»¶ï¼è¯¥ç¨åºè¾åº Hello World!\n\npackage main  \n\nimport "fmt"  \n\nfunc main(){  \n    fmt.Printf("Hello World!");\n}\n\n\nç¼å Dockerfile.one æä»¶\n\nFROM golang:1.9-alpine\n\nRUN apk --no-cache add git ca-certificates\n\nWORKDIR /go/src/github.com/go/helloworld/\n\nCOPY app.go .\n\nRUN go get -d -v github.com/go-sql-driver/mysql \\\n  && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app . \\\n  && cp /go/src/github.com/go/helloworld/app /root\n\nWORKDIR /root/\n\nCMD ["./app"]\n\n\næå»ºéå\n\ndocker build -t go/helloworld:1 -f Dockerfile.one .\n\n\n\n# åæ£å°å¤ä¸ª Dockerfile\n\nå¦ä¸ç§æ¹å¼ï¼å°±æ¯æä»¬äºåå¨ä¸ä¸ª Dockerfile å°é¡¹ç®åå¶ä¾èµåºç¼è¯æµè¯æåå¥½åï¼åå°å¶æ·è´å°è¿è¡ç¯å¢ä¸­ï¼è¿ç§æ¹å¼éè¦æä»¬ç¼åä¸¤ä¸ª Dockerfile åä¸äºç¼è¯èæ¬æè½å°å¶ä¸¤ä¸ªé¶æ®µèªå¨æ´åèµ·æ¥ï¼è¿ç§æ¹å¼è½ç¶å¯ä»¥å¾å¥½å°è§é¿ç¬¬ä¸ç§æ¹å¼å­å¨çé£é©ï¼ä½ææ¾é¨ç½²è¿ç¨è¾å¤æã\n\nä¾å¦\n\nç¼å Dockerfile.build æä»¶\n\nFROM golang:1.9-alpine\n\nRUN apk --no-cache add git\n\nWORKDIR /go/src/github.com/go/helloworld\n\nCOPY app.go .\n\nRUN go get -d -v github.com/go-sql-driver/mysql \\\n  && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .\n\n\nç¼å Dockerfile.copy æä»¶\n\nFROM alpine:latest\n\nRUN apk --no-cache add ca-certificates\n\nWORKDIR /root/\n\nCOPY app .\n\nCMD ["./app"]\n\n\næ°å»º build.sh\n\n#!/bin/sh\necho Building go/helloworld:build\n\ndocker build -t go/helloworld:build . -f Dockerfile.build\n\ndocker create --name extract go/helloworld:build\ndocker cp extract:/go/src/github.com/go/helloworld/app ./app\ndocker rm -f extract\n\necho Building go/helloworld:2\n\ndocker build --no-cache -t go/helloworld:2 . -f Dockerfile.copy\nrm ./app\n\n\nç°å¨è¿è¡èæ¬å³å¯æå»ºéå\n\nchmod +x build.sh\n\n./build.sh\n\n\nå¯¹æ¯ä¸¤ç§æ¹å¼çæçéåå¤§å°\n\ndocker image ls\n\nREPOSITORY      TAG    IMAGE ID        CREATED         SIZE\ngo/helloworld   2      f7cf3465432c    22 seconds ago  6.47MB\ngo/helloworld   1      f55d3e16affc    2 minutes ago   295MB\n\n\n\n# ä½¿ç¨å¤é¶æ®µæå»º\n\nä¸ºè§£å³ä»¥ä¸é®é¢ï¼Docker v17.05 å¼å§æ¯æå¤é¶æ®µæå»º (multistage builds)ãä½¿ç¨å¤é¶æ®µæå»ºæä»¬å°±å¯ä»¥å¾å®¹æè§£å³åé¢æå°çé®é¢ï¼å¹¶ä¸åªéè¦ç¼åä¸ä¸ª Dockerfileï¼\n\nä¾å¦\n\nç¼å Dockerfile æä»¶\n\nFROM golang:1.9-alpine as builder\n\nRUN apk --no-cache add git\n\nWORKDIR /go/src/github.com/go/helloworld/\n\nRUN go get -d -v github.com/go-sql-driver/mysql\n\nCOPY app.go .\n\nRUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .\n\nFROM alpine:latest as prod\n\nRUN apk --no-cache add ca-certificates\n\nWORKDIR /root/\n\nCOPY --from=0 /go/src/github.com/go/helloworld/app .\n\nCMD ["./app"]  \n\n\næå»ºéå\n\ndocker build -t go/helloworld:3 .\n\n\nå¯¹æ¯ä¸ä¸ªéåå¤§å°\n\ndocker image ls\n\nREPOSITORY        TAG   IMAGE ID         CREATED            SIZE\ngo/helloworld     3     d6911ed9c846     7 seconds ago      6.47MB\ngo/helloworld     2     f7cf3465432c     22 seconds ago     6.47MB\ngo/helloworld     1     f55d3e16affc     2 minutes ago      295MB\n\n\nå¾ææ¾ä½¿ç¨å¤é¶æ®µæå»ºçéåä½ç§¯å°ï¼åæ¶ä¹å®ç¾è§£å³äºä¸è¾¹æå°çé®é¢ã\n\n\n# åªæå»ºæä¸é¶æ®µçéå\n\næä»¬å¯ä»¥ä½¿ç¨ as æ¥ä¸ºæä¸é¶æ®µå½åï¼ä¾å¦\n\nFROM golang:1.9-alpine as builder\n\n\nä¾å¦å½æä»¬åªæ³æå»º builder é¶æ®µçéåæ¶ï¼æä»¬å¯ä»¥å¨ä½¿ç¨ docker build å½ä»¤æ¶å ä¸ --target åæ°å³å¯\n\ndocker build --target builder -t username/imagename:tag .\n\n\n\n# æå»ºæ¶ä»å¶ä»éåå¤å¶æä»¶\n\nä¸é¢ä¾å­ä¸­æä»¬ä½¿ç¨ COPY --from=0 /go/src/github.com/go/helloworld/app . ä»ä¸ä¸é¶æ®µçéåä¸­å¤å¶æä»¶ï¼æä»¬ä¹å¯ä»¥å¤å¶ä»»æéåä¸­çæä»¶ã\n\nCOPY --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf\n',normalizedContent:'# dockerfile å¤é¶æ®µæå»º\n\n\n# ä¹åçåæ³\n\nå¨ docker 17.05 çæ¬ä¹åï¼æä»¬æå»º docker éåæ¶ï¼éå¸¸ä¼éç¨ä¸¤ç§æ¹å¼ï¼\n\n\n# å¨é¨æ¾å¥ä¸ä¸ª dockerfile\n\nä¸ç§æ¹å¼æ¯å°ææçæå»ºè¿ç¨ç¼åå«å¨ä¸ä¸ª dockerfile ä¸­ï¼åæ¬é¡¹ç®åå¶ä¾èµåºçç¼è¯ãæµè¯ãæåç­æµç¨ï¼è¿éå¯è½ä¼å¸¦æ¥çä¸äºé®é¢ï¼\n\n * dockerfile ç¹å«é¿ï¼å¯ç»´æ¤æ§éä½\n * éåå±æ¬¡å¤ï¼éåä½ç§¯è¾å¤§ï¼é¨ç½²æ¶é´åé¿\n * æºä»£ç å­å¨æ³é²çé£é©\n\nä¾å¦\n\nç¼å app.go æä»¶ï¼è¯¥ç¨åºè¾åº hello world!\n\npackage main  \n\nimport "fmt"  \n\nfunc main(){  \n    fmt.printf("hello world!");\n}\n\n\nç¼å dockerfile.one æä»¶\n\nfrom golang:1.9-alpine\n\nrun apk --no-cache add git ca-certificates\n\nworkdir /go/src/github.com/go/helloworld/\n\ncopy app.go .\n\nrun go get -d -v github.com/go-sql-driver/mysql \\\n  && cgo_enabled=0 goos=linux go build -a -installsuffix cgo -o app . \\\n  && cp /go/src/github.com/go/helloworld/app /root\n\nworkdir /root/\n\ncmd ["./app"]\n\n\næå»ºéå\n\ndocker build -t go/helloworld:1 -f dockerfile.one .\n\n\n\n# åæ£å°å¤ä¸ª dockerfile\n\nå¦ä¸ç§æ¹å¼ï¼å°±æ¯æä»¬äºåå¨ä¸ä¸ª dockerfile å°é¡¹ç®åå¶ä¾èµåºç¼è¯æµè¯æåå¥½åï¼åå°å¶æ·è´å°è¿è¡ç¯å¢ä¸­ï¼è¿ç§æ¹å¼éè¦æä»¬ç¼åä¸¤ä¸ª dockerfile åä¸äºç¼è¯èæ¬æè½å°å¶ä¸¤ä¸ªé¶æ®µèªå¨æ´åèµ·æ¥ï¼è¿ç§æ¹å¼è½ç¶å¯ä»¥å¾å¥½å°è§é¿ç¬¬ä¸ç§æ¹å¼å­å¨çé£é©ï¼ä½ææ¾é¨ç½²è¿ç¨è¾å¤æã\n\nä¾å¦\n\nç¼å dockerfile.build æä»¶\n\nfrom golang:1.9-alpine\n\nrun apk --no-cache add git\n\nworkdir /go/src/github.com/go/helloworld\n\ncopy app.go .\n\nrun go get -d -v github.com/go-sql-driver/mysql \\\n  && cgo_enabled=0 goos=linux go build -a -installsuffix cgo -o app .\n\n\nç¼å dockerfile.copy æä»¶\n\nfrom alpine:latest\n\nrun apk --no-cache add ca-certificates\n\nworkdir /root/\n\ncopy app .\n\ncmd ["./app"]\n\n\næ°å»º build.sh\n\n#!/bin/sh\necho building go/helloworld:build\n\ndocker build -t go/helloworld:build . -f dockerfile.build\n\ndocker create --name extract go/helloworld:build\ndocker cp extract:/go/src/github.com/go/helloworld/app ./app\ndocker rm -f extract\n\necho building go/helloworld:2\n\ndocker build --no-cache -t go/helloworld:2 . -f dockerfile.copy\nrm ./app\n\n\nç°å¨è¿è¡èæ¬å³å¯æå»ºéå\n\nchmod +x build.sh\n\n./build.sh\n\n\nå¯¹æ¯ä¸¤ç§æ¹å¼çæçéåå¤§å°\n\ndocker image ls\n\nrepository      tag    image id        created         size\ngo/helloworld   2      f7cf3465432c    22 seconds ago  6.47mb\ngo/helloworld   1      f55d3e16affc    2 minutes ago   295mb\n\n\n\n# ä½¿ç¨å¤é¶æ®µæå»º\n\nä¸ºè§£å³ä»¥ä¸é®é¢ï¼docker v17.05 å¼å§æ¯æå¤é¶æ®µæå»º (multistage builds)ãä½¿ç¨å¤é¶æ®µæå»ºæä»¬å°±å¯ä»¥å¾å®¹æè§£å³åé¢æå°çé®é¢ï¼å¹¶ä¸åªéè¦ç¼åä¸ä¸ª dockerfileï¼\n\nä¾å¦\n\nç¼å dockerfile æä»¶\n\nfrom golang:1.9-alpine as builder\n\nrun apk --no-cache add git\n\nworkdir /go/src/github.com/go/helloworld/\n\nrun go get -d -v github.com/go-sql-driver/mysql\n\ncopy app.go .\n\nrun cgo_enabled=0 goos=linux go build -a -installsuffix cgo -o app .\n\nfrom alpine:latest as prod\n\nrun apk --no-cache add ca-certificates\n\nworkdir /root/\n\ncopy --from=0 /go/src/github.com/go/helloworld/app .\n\ncmd ["./app"]  \n\n\næå»ºéå\n\ndocker build -t go/helloworld:3 .\n\n\nå¯¹æ¯ä¸ä¸ªéåå¤§å°\n\ndocker image ls\n\nrepository        tag   image id         created            size\ngo/helloworld     3     d6911ed9c846     7 seconds ago      6.47mb\ngo/helloworld     2     f7cf3465432c     22 seconds ago     6.47mb\ngo/helloworld     1     f55d3e16affc     2 minutes ago      295mb\n\n\nå¾ææ¾ä½¿ç¨å¤é¶æ®µæå»ºçéåä½ç§¯å°ï¼åæ¶ä¹å®ç¾è§£å³äºä¸è¾¹æå°çé®é¢ã\n\n\n# åªæå»ºæä¸é¶æ®µçéå\n\næä»¬å¯ä»¥ä½¿ç¨ as æ¥ä¸ºæä¸é¶æ®µå½åï¼ä¾å¦\n\nfrom golang:1.9-alpine as builder\n\n\nä¾å¦å½æä»¬åªæ³æå»º builder é¶æ®µçéåæ¶ï¼æä»¬å¯ä»¥å¨ä½¿ç¨ docker build å½ä»¤æ¶å ä¸ --target åæ°å³å¯\n\ndocker build --target builder -t username/imagename:tag .\n\n\n\n# æå»ºæ¶ä»å¶ä»éåå¤å¶æä»¶\n\nä¸é¢ä¾å­ä¸­æä»¬ä½¿ç¨ copy --from=0 /go/src/github.com/go/helloworld/app . ä»ä¸ä¸é¶æ®µçéåä¸­å¤å¶æä»¶ï¼æä»¬ä¹å¯ä»¥å¤å¶ä»»æéåä¸­çæä»¶ã\n\ncopy --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"éåçå®ç°åç",frontmatter:{title:"éåçå®ç°åç",date:"2022-02-08T17:58:04.000Z",permalink:"/pages/3937d4/"},regularPath:"/17.Docker/04.Docker%20%E9%95%9C%E5%83%8F/10.%E9%95%9C%E5%83%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html",relativePath:"17.Docker/04.Docker éå/10.éåçå®ç°åç.md",key:"v-dd62df30",path:"/pages/3937d4/",headersStr:null,content:"# éåçå®ç°åç\n\nDocker éåæ¯æä¹å®ç°å¢éçä¿®æ¹åç»´æ¤çï¼\n\næ¯ä¸ªéåé½ç±å¾å¤å±æ¬¡ææï¼Docker ä½¿ç¨ Union FS å°è¿äºä¸åçå±ç»åå°ä¸ä¸ªéåä¸­å»ã\n\néå¸¸ Union FS æä¸¤ä¸ªç¨é, ä¸æ¹é¢å¯ä»¥å®ç°ä¸åå© LVMãRAID å°å¤ä¸ª disk æå°åä¸ä¸ªç®å½ä¸,å¦ä¸ä¸ªæ´å¸¸ç¨çå°±æ¯å°ä¸ä¸ªåªè¯»çåæ¯åä¸ä¸ªå¯åçåæ¯èåå¨ä¸èµ·ï¼Live CD æ­£æ¯åºäºæ­¤æ¹æ³å¯ä»¥åè®¸å¨éåä¸åçåºç¡ä¸åè®¸ç¨æ·å¨å¶ä¸è¿è¡ä¸äºåæä½ã\n\nDocker å¨ AUFS ä¸æå»ºçå®¹å¨ä¹æ¯å©ç¨äºç±»ä¼¼çåçã",normalizedContent:"# éåçå®ç°åç\n\ndocker éåæ¯æä¹å®ç°å¢éçä¿®æ¹åç»´æ¤çï¼\n\næ¯ä¸ªéåé½ç±å¾å¤å±æ¬¡ææï¼docker ä½¿ç¨ union fs å°è¿äºä¸åçå±ç»åå°ä¸ä¸ªéåä¸­å»ã\n\néå¸¸ union fs æä¸¤ä¸ªç¨é, ä¸æ¹é¢å¯ä»¥å®ç°ä¸åå© lvmãraid å°å¤ä¸ª disk æå°åä¸ä¸ªç®å½ä¸,å¦ä¸ä¸ªæ´å¸¸ç¨çå°±æ¯å°ä¸ä¸ªåªè¯»çåæ¯åä¸ä¸ªå¯åçåæ¯èåå¨ä¸èµ·ï¼live cd æ­£æ¯åºäºæ­¤æ¹æ³å¯ä»¥åè®¸å¨éåä¸åçåºç¡ä¸åè®¸ç¨æ·å¨å¶ä¸è¿è¡ä¸äºåæä½ã\n\ndocker å¨ aufs ä¸æå»ºçå®¹å¨ä¹æ¯å©ç¨äºç±»ä¼¼çåçã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"æä½ Docker å®¹å¨",frontmatter:{title:"æä½ Docker å®¹å¨",date:"2022-02-09T09:11:46.000Z",permalink:"/pages/7e034a/"},regularPath:"/17.Docker/05.Docker%20%E5%AE%B9%E5%99%A8/01.%E6%93%8D%E4%BD%9C%20Docker%20%E5%AE%B9%E5%99%A8.html",relativePath:"17.Docker/05.Docker å®¹å¨/01.æä½ Docker å®¹å¨.md",key:"v-1247ca23",path:"/pages/7e034a/",headersStr:null,content:"# æä½ Docker å®¹å¨\n\nå®¹å¨æ¯ Docker åä¸æ ¸å¿æ¦å¿µã\n\nç®åçè¯´ï¼å®¹å¨æ¯ç¬ç«è¿è¡çä¸ä¸ªæä¸ç»åºç¨ï¼ä»¥åå®ä»¬çè¿è¡æç¯å¢ãå¯¹åºçï¼èææºå¯ä»¥çè§£ä¸ºæ¨¡æè¿è¡çä¸æ´å¥æä½ç³»ç»ï¼æä¾äºè¿è¡æç¯å¢åå¶ä»ç³»ç»ç¯å¢ï¼åè·å¨ä¸é¢çåºç¨ã\n\næ¬ç« å°å·ä½ä»ç»å¦ä½æ¥ç®¡çä¸ä¸ªå®¹å¨ï¼åæ¬åå»ºãå¯å¨ååæ­¢ç­ã",normalizedContent:"# æä½ docker å®¹å¨\n\nå®¹å¨æ¯ docker åä¸æ ¸å¿æ¦å¿µã\n\nç®åçè¯´ï¼å®¹å¨æ¯ç¬ç«è¿è¡çä¸ä¸ªæä¸ç»åºç¨ï¼ä»¥åå®ä»¬çè¿è¡æç¯å¢ãå¯¹åºçï¼èææºå¯ä»¥çè§£ä¸ºæ¨¡æè¿è¡çä¸æ´å¥æä½ç³»ç»ï¼æä¾äºè¿è¡æç¯å¢åå¶ä»ç³»ç»ç¯å¢ï¼åè·å¨ä¸é¢çåºç¨ã\n\næ¬ç« å°å·ä½ä»ç»å¦ä½æ¥ç®¡çä¸ä¸ªå®¹å¨ï¼åæ¬åå»ºãå¯å¨ååæ­¢ç­ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker å¯å¨å®¹å¨",frontmatter:{title:"Docker å¯å¨å®¹å¨",date:"2022-02-09T09:11:46.000Z",permalink:"/pages/f5a508/"},regularPath:"/17.Docker/05.Docker%20%E5%AE%B9%E5%99%A8/02.Docker%20%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8.html",relativePath:"17.Docker/05.Docker å®¹å¨/02.Docker å¯å¨å®¹å¨.md",key:"v-39ac2c18",path:"/pages/f5a508/",headers:[{level:2,title:"æ°å»ºå¹¶å¯å¨",slug:"æ°å»ºå¹¶å¯å¨",normalizedTitle:"æ°å»ºå¹¶å¯å¨",charIndex:117},{level:2,title:"å¯å¨å·²ç»æ­¢å®¹å¨",slug:"å¯å¨å·²ç»æ­¢å®¹å¨",normalizedTitle:"å¯å¨å·²ç»æ­¢å®¹å¨",charIndex:824}],headersStr:"æ°å»ºå¹¶å¯å¨ å¯å¨å·²ç»æ­¢å®¹å¨",content:"# Docker å¯å¨å®¹å¨\n\nå¯å¨å®¹å¨æä¸¤ç§æ¹å¼ï¼ä¸ç§æ¯åºäºéåæ°å»ºä¸ä¸ªå®¹å¨å¹¶å¯å¨ï¼å¦å¤ä¸ä¸ªæ¯å°å¨ç»æ­¢ç¶æï¼stoppedï¼çå®¹å¨éæ°å¯å¨ã\n\nå ä¸º Docker çå®¹å¨å®å¨å¤ªè½»éçº§äºï¼å¾å¤æ¶åç¨æ·é½æ¯éæ¶å é¤åæ°åå»ºå®¹å¨ã\n\n\n# æ°å»ºå¹¶å¯å¨\n\næéè¦çå½ä»¤ä¸»è¦ä¸º docker runã\n\nä¾å¦ï¼ä¸é¢çå½ä»¤è¾åºä¸ä¸ª âHello Worldâï¼ä¹åç»æ­¢å®¹å¨ã\n\ndocker run ubuntu:14.04 /bin/echo 'Hello world'\nHello world\n\n\nè¿è·å¨æ¬å°ç´æ¥æ§è¡ /bin/echo 'hello world' å ä¹æè§ä¸åºä»»ä½åºå«ã\n\nä¸é¢çå½ä»¤åå¯å¨ä¸ä¸ª bash ç»ç«¯ï¼åè®¸ç¨æ·è¿è¡äº¤äºã\n\ndocker run -t -i ubuntu:14.04 /bin/bash\nroot@af8bae53bdd3:/#\n\n\nå¶ä¸­ï¼-t éé¡¹è®©Dockeråéä¸ä¸ªä¼ªç»ç«¯ï¼pseudo-ttyï¼å¹¶ç»å®å°å®¹å¨çæ åè¾å¥ä¸ï¼ -i åè®©å®¹å¨çæ åè¾å¥ä¿ææå¼ã\n\nå¨äº¤äºæ¨¡å¼ä¸ï¼ç¨æ·å¯ä»¥éè¿æåå»ºçç»ç«¯æ¥è¾å¥å½ä»¤ï¼ä¾å¦\n\nroot@af8bae53bdd3:/# pwd\n/\nroot@af8bae53bdd3:/# ls\nbin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var\n\n\nå½å©ç¨ docker run æ¥åå»ºå®¹å¨æ¶ï¼Docker å¨åå°è¿è¡çæ åæä½åæ¬ï¼\n\n * æ£æ¥æ¬å°æ¯å¦å­å¨æå®çéåï¼ä¸å­å¨å°±ä»å¬æä»åºä¸è½½\n * å©ç¨éååå»ºå¹¶å¯å¨ä¸ä¸ªå®¹å¨\n * åéä¸ä¸ªæä»¶ç³»ç»ï¼å¹¶å¨åªè¯»çéåå±å¤é¢æè½½ä¸å±å¯è¯»åå±\n * ä»å®¿ä¸»ä¸»æºéç½®çç½æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸ä¸ªèææ¥å£å°å®¹å¨ä¸­å»\n * ä»å°åæ± éç½®ä¸ä¸ª ip å°åç»å®¹å¨\n * æ§è¡ç¨æ·æå®çåºç¨ç¨åº\n * æ§è¡å®æ¯åå®¹å¨è¢«ç»æ­¢\n\n\n# å¯å¨å·²ç»æ­¢å®¹å¨\n\nå¯ä»¥å©ç¨ docker container start å½ä»¤ï¼ç´æ¥å°ä¸ä¸ªå·²ç»ç»æ­¢çå®¹å¨å¯å¨è¿è¡ã\n\nå®¹å¨çæ ¸å¿ä¸ºææ§è¡çåºç¨ç¨åºï¼æéè¦çèµæºé½æ¯åºç¨ç¨åºè¿è¡æå¿éçãé¤æ­¤ä¹å¤ï¼å¹¶æ²¡æå¶å®çèµæºãå¯ä»¥å¨ä¼ªç»ç«¯ä¸­å©ç¨ ps æ top æ¥æ¥çè¿ç¨ä¿¡æ¯ã\n\nroot@ba267838cc1b:/# ps\n  PID TTY          TIME CMD\n    1 ?        00:00:00 bash\n   11 ?        00:00:00 ps\n\n\nå¯è§ï¼å®¹å¨ä¸­ä»è¿è¡äºæå®ç bash åºç¨ãè¿ç§ç¹ç¹ä½¿å¾ Docker å¯¹èµæºçå©ç¨çæé«ï¼æ¯è´§çä»·å®çè½»éçº§èæåã",normalizedContent:"# docker å¯å¨å®¹å¨\n\nå¯å¨å®¹å¨æä¸¤ç§æ¹å¼ï¼ä¸ç§æ¯åºäºéåæ°å»ºä¸ä¸ªå®¹å¨å¹¶å¯å¨ï¼å¦å¤ä¸ä¸ªæ¯å°å¨ç»æ­¢ç¶æï¼stoppedï¼çå®¹å¨éæ°å¯å¨ã\n\nå ä¸º docker çå®¹å¨å®å¨å¤ªè½»éçº§äºï¼å¾å¤æ¶åç¨æ·é½æ¯éæ¶å é¤åæ°åå»ºå®¹å¨ã\n\n\n# æ°å»ºå¹¶å¯å¨\n\næéè¦çå½ä»¤ä¸»è¦ä¸º docker runã\n\nä¾å¦ï¼ä¸é¢çå½ä»¤è¾åºä¸ä¸ª âhello worldâï¼ä¹åç»æ­¢å®¹å¨ã\n\ndocker run ubuntu:14.04 /bin/echo 'hello world'\nhello world\n\n\nè¿è·å¨æ¬å°ç´æ¥æ§è¡ /bin/echo 'hello world' å ä¹æè§ä¸åºä»»ä½åºå«ã\n\nä¸é¢çå½ä»¤åå¯å¨ä¸ä¸ª bash ç»ç«¯ï¼åè®¸ç¨æ·è¿è¡äº¤äºã\n\ndocker run -t -i ubuntu:14.04 /bin/bash\nroot@af8bae53bdd3:/#\n\n\nå¶ä¸­ï¼-t éé¡¹è®©dockeråéä¸ä¸ªä¼ªç»ç«¯ï¼pseudo-ttyï¼å¹¶ç»å®å°å®¹å¨çæ åè¾å¥ä¸ï¼ -i åè®©å®¹å¨çæ åè¾å¥ä¿ææå¼ã\n\nå¨äº¤äºæ¨¡å¼ä¸ï¼ç¨æ·å¯ä»¥éè¿æåå»ºçç»ç«¯æ¥è¾å¥å½ä»¤ï¼ä¾å¦\n\nroot@af8bae53bdd3:/# pwd\n/\nroot@af8bae53bdd3:/# ls\nbin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var\n\n\nå½å©ç¨ docker run æ¥åå»ºå®¹å¨æ¶ï¼docker å¨åå°è¿è¡çæ åæä½åæ¬ï¼\n\n * æ£æ¥æ¬å°æ¯å¦å­å¨æå®çéåï¼ä¸å­å¨å°±ä»å¬æä»åºä¸è½½\n * å©ç¨éååå»ºå¹¶å¯å¨ä¸ä¸ªå®¹å¨\n * åéä¸ä¸ªæä»¶ç³»ç»ï¼å¹¶å¨åªè¯»çéåå±å¤é¢æè½½ä¸å±å¯è¯»åå±\n * ä»å®¿ä¸»ä¸»æºéç½®çç½æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸ä¸ªèææ¥å£å°å®¹å¨ä¸­å»\n * ä»å°åæ± éç½®ä¸ä¸ª ip å°åç»å®¹å¨\n * æ§è¡ç¨æ·æå®çåºç¨ç¨åº\n * æ§è¡å®æ¯åå®¹å¨è¢«ç»æ­¢\n\n\n# å¯å¨å·²ç»æ­¢å®¹å¨\n\nå¯ä»¥å©ç¨ docker container start å½ä»¤ï¼ç´æ¥å°ä¸ä¸ªå·²ç»ç»æ­¢çå®¹å¨å¯å¨è¿è¡ã\n\nå®¹å¨çæ ¸å¿ä¸ºææ§è¡çåºç¨ç¨åºï¼æéè¦çèµæºé½æ¯åºç¨ç¨åºè¿è¡æå¿éçãé¤æ­¤ä¹å¤ï¼å¹¶æ²¡æå¶å®çèµæºãå¯ä»¥å¨ä¼ªç»ç«¯ä¸­å©ç¨ ps æ top æ¥æ¥çè¿ç¨ä¿¡æ¯ã\n\nroot@ba267838cc1b:/# ps\n  pid tty          time cmd\n    1 ?        00:00:00 bash\n   11 ?        00:00:00 ps\n\n\nå¯è§ï¼å®¹å¨ä¸­ä»è¿è¡äºæå®ç bash åºç¨ãè¿ç§ç¹ç¹ä½¿å¾ docker å¯¹èµæºçå©ç¨çæé«ï¼æ¯è´§çä»·å®çè½»éçº§èæåã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker å®æ¤æè¿è¡",frontmatter:{title:"Docker å®æ¤æè¿è¡",date:"2022-02-09T09:11:46.000Z",permalink:"/pages/4c0f60/"},regularPath:"/17.Docker/05.Docker%20%E5%AE%B9%E5%99%A8/03.Docker%20%E5%AE%88%E6%8A%A4%E6%80%81%E8%BF%90%E8%A1%8C.html",relativePath:"17.Docker/05.Docker å®¹å¨/03.Docker å®æ¤æè¿è¡.md",key:"v-80330662",path:"/pages/4c0f60/",headersStr:null,content:'# Docker å®æ¤æè¿è¡\n\næ´å¤çæ¶åï¼éè¦è®© Docker å¨åå°è¿è¡èä¸æ¯ç´æ¥ææ§è¡å½ä»¤çç»æè¾åºå¨å½åå®¿ä¸»æºä¸ãæ­¤æ¶ï¼å¯ä»¥éè¿æ·»å  -d åæ°æ¥å®ç°ã\n\nä¸é¢ä¸¾ä¸¤ä¸ªä¾å­æ¥è¯´æä¸ä¸ã\n\nå¦æä¸ä½¿ç¨ -d åæ°è¿è¡å®¹å¨ã\n\ndocker run ubuntu:17.10 /bin/sh -c "while true; do echo hello world; sleep 1; done"\nhello world\nhello world\nhello world\nhello world\n\n\nå®¹å¨ä¼æè¾åºçç»æ (STDOUT) æå°å°å®¿ä¸»æºä¸é¢\n\nå¦æä½¿ç¨äº -d åæ°è¿è¡å®¹å¨ã\n\ndocker run -d ubuntu:17.10 /bin/sh -c "while true; do echo hello world; sleep 1; done"\n77b2dc01fe0f3f1265df143181e7b9af5e05279a884f4776ee75350ea9d8017a\n\n\næ­¤æ¶å®¹å¨ä¼å¨åå°è¿è¡å¹¶ä¸ä¼æè¾åºçç»æ (STDOUT) æå°å°å®¿ä¸»æºä¸é¢(è¾åºç»æå¯ä»¥ç¨ docker logs æ¥ç)ã\n\næ³¨ï¼ å®¹å¨æ¯å¦ä¼é¿ä¹è¿è¡ï¼æ¯å docker run æå®çå½ä»¤æå³ï¼å -d åæ°æ å³ã\n\nä½¿ç¨ -d åæ°å¯å¨åä¼è¿åä¸ä¸ªå¯ä¸ç idï¼ä¹å¯ä»¥éè¿ docker container ls å½ä»¤æ¥æ¥çå®¹å¨ä¿¡æ¯ã\n\ndocker container ls\nCONTAINER ID  IMAGE         COMMAND               CREATED        STATUS       PORTS NAMES\n77b2dc01fe0f  ubuntu:17.10  /bin/sh -c \'while tr  2 minutes ago  Up 1 minute        agitated_wright\n\n\nè¦è·åå®¹å¨çè¾åºä¿¡æ¯ï¼å¯ä»¥éè¿ docker container logs å½ä»¤ã\n\ndocker container logs [container ID or NAMES]\nhello world\nhello world\nhello world\n. . .\n',normalizedContent:'# docker å®æ¤æè¿è¡\n\næ´å¤çæ¶åï¼éè¦è®© docker å¨åå°è¿è¡èä¸æ¯ç´æ¥ææ§è¡å½ä»¤çç»æè¾åºå¨å½åå®¿ä¸»æºä¸ãæ­¤æ¶ï¼å¯ä»¥éè¿æ·»å  -d åæ°æ¥å®ç°ã\n\nä¸é¢ä¸¾ä¸¤ä¸ªä¾å­æ¥è¯´æä¸ä¸ã\n\nå¦æä¸ä½¿ç¨ -d åæ°è¿è¡å®¹å¨ã\n\ndocker run ubuntu:17.10 /bin/sh -c "while true; do echo hello world; sleep 1; done"\nhello world\nhello world\nhello world\nhello world\n\n\nå®¹å¨ä¼æè¾åºçç»æ (stdout) æå°å°å®¿ä¸»æºä¸é¢\n\nå¦æä½¿ç¨äº -d åæ°è¿è¡å®¹å¨ã\n\ndocker run -d ubuntu:17.10 /bin/sh -c "while true; do echo hello world; sleep 1; done"\n77b2dc01fe0f3f1265df143181e7b9af5e05279a884f4776ee75350ea9d8017a\n\n\næ­¤æ¶å®¹å¨ä¼å¨åå°è¿è¡å¹¶ä¸ä¼æè¾åºçç»æ (stdout) æå°å°å®¿ä¸»æºä¸é¢(è¾åºç»æå¯ä»¥ç¨ docker logs æ¥ç)ã\n\næ³¨ï¼ å®¹å¨æ¯å¦ä¼é¿ä¹è¿è¡ï¼æ¯å docker run æå®çå½ä»¤æå³ï¼å -d åæ°æ å³ã\n\nä½¿ç¨ -d åæ°å¯å¨åä¼è¿åä¸ä¸ªå¯ä¸ç idï¼ä¹å¯ä»¥éè¿ docker container ls å½ä»¤æ¥æ¥çå®¹å¨ä¿¡æ¯ã\n\ndocker container ls\ncontainer id  image         command               created        status       ports names\n77b2dc01fe0f  ubuntu:17.10  /bin/sh -c \'while tr  2 minutes ago  up 1 minute        agitated_wright\n\n\nè¦è·åå®¹å¨çè¾åºä¿¡æ¯ï¼å¯ä»¥éè¿ docker container logs å½ä»¤ã\n\ndocker container logs [container id or names]\nhello world\nhello world\nhello world\n. . .\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker ç»æ­¢å®¹å¨",frontmatter:{title:"Docker ç»æ­¢å®¹å¨",date:"2022-02-09T09:11:46.000Z",permalink:"/pages/a777e4/"},regularPath:"/17.Docker/05.Docker%20%E5%AE%B9%E5%99%A8/04.Docker%20%E7%BB%88%E6%AD%A2%E5%AE%B9%E5%99%A8.html",relativePath:"17.Docker/05.Docker å®¹å¨/04.Docker ç»æ­¢å®¹å¨.md",key:"v-73993688",path:"/pages/a777e4/",headersStr:null,content:'# Docker ç»æ­¢å®¹å¨\n\nå¯ä»¥ä½¿ç¨ docker container stop æ¥ç»æ­¢ä¸ä¸ªè¿è¡ä¸­çå®¹å¨ã\n\næ­¤å¤ï¼å½ Docker å®¹å¨ä¸­æå®çåºç¨ç»ç»æ¶ï¼å®¹å¨ä¹èªå¨ç»æ­¢ã\n\nä¾å¦å¯¹äºä¸ä¸ç« èä¸­åªå¯å¨äºä¸ä¸ªç»ç«¯çå®¹å¨ï¼ç¨æ·éè¿ exit å½ä»¤æ Ctrl+d æ¥éåºç»ç«¯æ¶ï¼æåå»ºçå®¹å¨ç«å»ç»æ­¢ã\n\nç»æ­¢ç¶æçå®¹å¨å¯ä»¥ç¨ docker container ls -a å½ä»¤çå°ãä¾å¦\n\ndocker container ls -a\nCONTAINER ID        IMAGE                    COMMAND                CREATED             STATUS                          PORTS               NAMES\nba267838cc1b        ubuntu:14.04             "/bin/bash"            30 minutes ago      Exited (0) About a minute ago                       trusting_newton\n98e5efa7d997        training/webapp:latest   "python app.py"        About an hour ago   Exited (0) 34 minutes ago                           backstabbing_pike\n\n\nå¤äºç»æ­¢ç¶æçå®¹å¨ï¼å¯ä»¥éè¿ docker container start å½ä»¤æ¥éæ°å¯å¨ã\n\næ­¤å¤ï¼docker container restart å½ä»¤ä¼å°ä¸ä¸ªè¿è¡æçå®¹å¨ç»æ­¢ï¼ç¶ååéæ°å¯å¨å®ã',normalizedContent:'# docker ç»æ­¢å®¹å¨\n\nå¯ä»¥ä½¿ç¨ docker container stop æ¥ç»æ­¢ä¸ä¸ªè¿è¡ä¸­çå®¹å¨ã\n\næ­¤å¤ï¼å½ docker å®¹å¨ä¸­æå®çåºç¨ç»ç»æ¶ï¼å®¹å¨ä¹èªå¨ç»æ­¢ã\n\nä¾å¦å¯¹äºä¸ä¸ç« èä¸­åªå¯å¨äºä¸ä¸ªç»ç«¯çå®¹å¨ï¼ç¨æ·éè¿ exit å½ä»¤æ ctrl+d æ¥éåºç»ç«¯æ¶ï¼æåå»ºçå®¹å¨ç«å»ç»æ­¢ã\n\nç»æ­¢ç¶æçå®¹å¨å¯ä»¥ç¨ docker container ls -a å½ä»¤çå°ãä¾å¦\n\ndocker container ls -a\ncontainer id        image                    command                created             status                          ports               names\nba267838cc1b        ubuntu:14.04             "/bin/bash"            30 minutes ago      exited (0) about a minute ago                       trusting_newton\n98e5efa7d997        training/webapp:latest   "python app.py"        about an hour ago   exited (0) 34 minutes ago                           backstabbing_pike\n\n\nå¤äºç»æ­¢ç¶æçå®¹å¨ï¼å¯ä»¥éè¿ docker container start å½ä»¤æ¥éæ°å¯å¨ã\n\næ­¤å¤ï¼docker container restart å½ä»¤ä¼å°ä¸ä¸ªè¿è¡æçå®¹å¨ç»æ­¢ï¼ç¶ååéæ°å¯å¨å®ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker è¿å¥å®¹å¨",frontmatter:{title:"Docker è¿å¥å®¹å¨",date:"2022-02-09T09:11:46.000Z",permalink:"/pages/9efa8d/"},regularPath:"/17.Docker/05.Docker%20%E5%AE%B9%E5%99%A8/05.Docker%20%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8.html",relativePath:"17.Docker/05.Docker å®¹å¨/05.Docker è¿å¥å®¹å¨.md",key:"v-570536b6",path:"/pages/9efa8d/",headers:[{level:2,title:"attach å½ä»¤",slug:"attach-å½ä»¤",normalizedTitle:"attach å½ä»¤",charIndex:66},{level:2,title:"exec å½ä»¤",slug:"exec-å½ä»¤",normalizedTitle:"exec å½ä»¤",charIndex:84},{level:3,title:"-i -t åæ°",slug:"i-t-åæ°",normalizedTitle:"-i -t åæ°",charIndex:647}],headersStr:"attach å½ä»¤ exec å½ä»¤ -i -t åæ°",content:'# Docker è¿å¥å®¹å¨\n\nå¨ä½¿ç¨ -d åæ°æ¶ï¼å®¹å¨å¯å¨åä¼è¿å¥åå°ã\n\næäºæ¶åéè¦è¿å¥å®¹å¨è¿è¡æä½ï¼åæ¬ä½¿ç¨ docker attach å½ä»¤æ docker exec å½ä»¤ï¼æ¨èå¤§å®¶ä½¿ç¨ docker exec å½ä»¤ï¼åå ä¼å¨ä¸é¢è¯´æã\n\n\n# attach å½ä»¤\n\ndocker attach æ¯ Docker èªå¸¦çå½ä»¤ãä¸é¢ç¤ºä¾å¦ä½ä½¿ç¨è¯¥å½ä»¤ã\n\ndocker run -dit ubuntu\n243c32535da7d142fb0e6df616a3c3ada0b8ab417937c853a9e1c251f499f550\n\ndocker container ls\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n243c32535da7        ubuntu:latest       "/bin/bash"         18 seconds ago      Up 17 seconds                           nostalgic_hypatia\n\ndocker attach 243c\nroot@243c32535da7:/#\n\n\næ³¨æï¼ å¦æä»è¿ä¸ª stdin ä¸­ exitï¼ä¼å¯¼è´å®¹å¨çåæ­¢ã\n\n\n# exec å½ä»¤\n\n\n# -i -t åæ°\n\ndocker exec åè¾¹å¯ä»¥è·å¤ä¸ªåæ°ï¼è¿éä¸»è¦è¯´æ -i -t åæ°ã\n\nåªç¨ -i åæ°æ¶ï¼ç±äºæ²¡æåéä¼ªç»ç«¯ï¼çé¢æ²¡ææä»¬çæç Linux å½ä»¤æç¤ºç¬¦ï¼ä½å½ä»¤æ§è¡ç»æä»ç¶å¯ä»¥è¿åã\n\nå½ -i -t åæ°ä¸èµ·ä½¿ç¨æ¶ï¼åå¯ä»¥çå°æä»¬çæç Linux å½ä»¤æç¤ºç¬¦ã\n\ndocker run -dit ubuntu\n69d137adef7a8a689cbcb059e94da5489d3cddd240ff675c640c8d96e84fe1f6\n\ndocker container ls\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n69d137adef7a        ubuntu:latest       "/bin/bash"         18 seconds ago      Up 17 seconds                           zealous_swirles\n\ndocker exec -i 69d1 bash\nls\nbin\nboot\ndev\n...\n\ndocker exec -it 69d1 bash\nroot@69d137adef7a:/#\n\n\nå¦æä»è¿ä¸ª stdin ä¸­ exitï¼ä¸ä¼å¯¼è´å®¹å¨çåæ­¢ãè¿å°±æ¯ä¸ºä»ä¹æ¨èå¤§å®¶ä½¿ç¨ docker exec çåå ã\n\næ´å¤åæ°è¯´æè¯·ä½¿ç¨ docker exec --help æ¥çã',normalizedContent:'# docker è¿å¥å®¹å¨\n\nå¨ä½¿ç¨ -d åæ°æ¶ï¼å®¹å¨å¯å¨åä¼è¿å¥åå°ã\n\næäºæ¶åéè¦è¿å¥å®¹å¨è¿è¡æä½ï¼åæ¬ä½¿ç¨ docker attach å½ä»¤æ docker exec å½ä»¤ï¼æ¨èå¤§å®¶ä½¿ç¨ docker exec å½ä»¤ï¼åå ä¼å¨ä¸é¢è¯´æã\n\n\n# attach å½ä»¤\n\ndocker attach æ¯ docker èªå¸¦çå½ä»¤ãä¸é¢ç¤ºä¾å¦ä½ä½¿ç¨è¯¥å½ä»¤ã\n\ndocker run -dit ubuntu\n243c32535da7d142fb0e6df616a3c3ada0b8ab417937c853a9e1c251f499f550\n\ndocker container ls\ncontainer id        image               command             created             status              ports               names\n243c32535da7        ubuntu:latest       "/bin/bash"         18 seconds ago      up 17 seconds                           nostalgic_hypatia\n\ndocker attach 243c\nroot@243c32535da7:/#\n\n\næ³¨æï¼ å¦æä»è¿ä¸ª stdin ä¸­ exitï¼ä¼å¯¼è´å®¹å¨çåæ­¢ã\n\n\n# exec å½ä»¤\n\n\n# -i -t åæ°\n\ndocker exec åè¾¹å¯ä»¥è·å¤ä¸ªåæ°ï¼è¿éä¸»è¦è¯´æ -i -t åæ°ã\n\nåªç¨ -i åæ°æ¶ï¼ç±äºæ²¡æåéä¼ªç»ç«¯ï¼çé¢æ²¡ææä»¬çæç linux å½ä»¤æç¤ºç¬¦ï¼ä½å½ä»¤æ§è¡ç»æä»ç¶å¯ä»¥è¿åã\n\nå½ -i -t åæ°ä¸èµ·ä½¿ç¨æ¶ï¼åå¯ä»¥çå°æä»¬çæç linux å½ä»¤æç¤ºç¬¦ã\n\ndocker run -dit ubuntu\n69d137adef7a8a689cbcb059e94da5489d3cddd240ff675c640c8d96e84fe1f6\n\ndocker container ls\ncontainer id        image               command             created             status              ports               names\n69d137adef7a        ubuntu:latest       "/bin/bash"         18 seconds ago      up 17 seconds                           zealous_swirles\n\ndocker exec -i 69d1 bash\nls\nbin\nboot\ndev\n...\n\ndocker exec -it 69d1 bash\nroot@69d137adef7a:/#\n\n\nå¦æä»è¿ä¸ª stdin ä¸­ exitï¼ä¸ä¼å¯¼è´å®¹å¨çåæ­¢ãè¿å°±æ¯ä¸ºä»ä¹æ¨èå¤§å®¶ä½¿ç¨ docker exec çåå ã\n\næ´å¤åæ°è¯´æè¯·ä½¿ç¨ docker exec --help æ¥çã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker å¯¼åºåå¯¼å¥å®¹å¨",frontmatter:{title:"Docker å¯¼åºåå¯¼å¥å®¹å¨",date:"2022-02-09T09:11:46.000Z",permalink:"/pages/d3a79f/"},regularPath:"/17.Docker/05.Docker%20%E5%AE%B9%E5%99%A8/06.Docker%20%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5%E5%AE%B9%E5%99%A8.html",relativePath:"17.Docker/05.Docker å®¹å¨/06.Docker å¯¼åºåå¯¼å¥å®¹å¨.md",key:"v-045a323e",path:"/pages/d3a79f/",headers:[{level:2,title:"å¯¼åºå®¹å¨",slug:"å¯¼åºå®¹å¨",normalizedTitle:"å¯¼åºå®¹å¨",charIndex:21},{level:2,title:"å¯¼å¥å®¹å¨å¿«ç§",slug:"å¯¼å¥å®¹å¨å¿«ç§",normalizedTitle:"å¯¼å¥å®¹å¨å¿«ç§",charIndex:411}],headersStr:"å¯¼åºå®¹å¨ å¯¼å¥å®¹å¨å¿«ç§",content:'# Docker å¯¼åºåå¯¼å¥å®¹å¨\n\n\n# å¯¼åºå®¹å¨\n\nå¦æè¦å¯¼åºæ¬å°æä¸ªå®¹å¨ï¼å¯ä»¥ä½¿ç¨ docker export å½ä»¤ã\n\ndocker container ls -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                    PORTS               NAMES\n7691a814370e        ubuntu:14.04        "/bin/bash"         36 hours ago        Exited (0) 21 hours ago                       test\ndocker export 7691a814370e > ubuntu.tar\n\n\nè¿æ ·å°å¯¼åºå®¹å¨å¿«ç§å°æ¬å°æä»¶ã\n\n\n# å¯¼å¥å®¹å¨å¿«ç§\n\nå¯ä»¥ä½¿ç¨ docker import ä»å®¹å¨å¿«ç§æä»¶ä¸­åå¯¼å¥ä¸ºéåï¼ä¾å¦\n\ncat ubuntu.tar | docker import - test/ubuntu:v1.0\ndocker image ls\nREPOSITORY          TAG                 IMAGE ID            CREATED              VIRTUAL SIZE\ntest/ubuntu         v1.0                9d37a6082e97        About a minute ago   171.3 MB\n\n\næ­¤å¤ï¼ä¹å¯ä»¥éè¿æå® URL æèæä¸ªç®å½æ¥å¯¼å¥ï¼ä¾å¦\n\ndocker import http://example.com/exampleimage.tgz example/imagerepo\n\n\næ³¨ï¼ç¨æ·æ¢å¯ä»¥ä½¿ç¨ docker load æ¥å¯¼å¥éåå­å¨æä»¶å°æ¬å°éååºï¼ä¹å¯ä»¥ä½¿ç¨ docker import æ¥å¯¼å¥ä¸ä¸ªå®¹å¨å¿«ç§å°æ¬å°éååºãè¿ä¸¤èçåºå«å¨äºå®¹å¨å¿«ç§æä»¶å°ä¸¢å¼ææçåå²è®°å½ååæ°æ®ä¿¡æ¯ï¼å³ä»ä¿å­å®¹å¨å½æ¶çå¿«ç§ç¶æï¼ï¼èéåå­å¨æä»¶å°ä¿å­å®æ´è®°å½ï¼ä½ç§¯ä¹è¦å¤§ãæ­¤å¤ï¼ä»å®¹å¨å¿«ç§æä»¶å¯¼å¥æ¶å¯ä»¥éæ°æå®æ ç­¾ç­åæ°æ®ä¿¡æ¯ã',normalizedContent:'# docker å¯¼åºåå¯¼å¥å®¹å¨\n\n\n# å¯¼åºå®¹å¨\n\nå¦æè¦å¯¼åºæ¬å°æä¸ªå®¹å¨ï¼å¯ä»¥ä½¿ç¨ docker export å½ä»¤ã\n\ndocker container ls -a\ncontainer id        image               command             created             status                    ports               names\n7691a814370e        ubuntu:14.04        "/bin/bash"         36 hours ago        exited (0) 21 hours ago                       test\ndocker export 7691a814370e > ubuntu.tar\n\n\nè¿æ ·å°å¯¼åºå®¹å¨å¿«ç§å°æ¬å°æä»¶ã\n\n\n# å¯¼å¥å®¹å¨å¿«ç§\n\nå¯ä»¥ä½¿ç¨ docker import ä»å®¹å¨å¿«ç§æä»¶ä¸­åå¯¼å¥ä¸ºéåï¼ä¾å¦\n\ncat ubuntu.tar | docker import - test/ubuntu:v1.0\ndocker image ls\nrepository          tag                 image id            created              virtual size\ntest/ubuntu         v1.0                9d37a6082e97        about a minute ago   171.3 mb\n\n\næ­¤å¤ï¼ä¹å¯ä»¥éè¿æå® url æèæä¸ªç®å½æ¥å¯¼å¥ï¼ä¾å¦\n\ndocker import http://example.com/exampleimage.tgz example/imagerepo\n\n\næ³¨ï¼ç¨æ·æ¢å¯ä»¥ä½¿ç¨ docker load æ¥å¯¼å¥éåå­å¨æä»¶å°æ¬å°éååºï¼ä¹å¯ä»¥ä½¿ç¨ docker import æ¥å¯¼å¥ä¸ä¸ªå®¹å¨å¿«ç§å°æ¬å°éååºãè¿ä¸¤èçåºå«å¨äºå®¹å¨å¿«ç§æä»¶å°ä¸¢å¼ææçåå²è®°å½ååæ°æ®ä¿¡æ¯ï¼å³ä»ä¿å­å®¹å¨å½æ¶çå¿«ç§ç¶æï¼ï¼èéåå­å¨æä»¶å°ä¿å­å®æ´è®°å½ï¼ä½ç§¯ä¹è¦å¤§ãæ­¤å¤ï¼ä»å®¹å¨å¿«ç§æä»¶å¯¼å¥æ¶å¯ä»¥éæ°æå®æ ç­¾ç­åæ°æ®ä¿¡æ¯ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker å é¤å®¹å¨",frontmatter:{title:"Docker å é¤å®¹å¨",date:"2022-02-09T09:11:46.000Z",permalink:"/pages/8b2f36/"},regularPath:"/17.Docker/05.Docker%20%E5%AE%B9%E5%99%A8/07.Docker%20%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8.html",relativePath:"17.Docker/05.Docker å®¹å¨/07.Docker å é¤å®¹å¨.md",key:"v-ae2ed992",path:"/pages/8b2f36/",headers:[{level:2,title:"æ¸çææå¤äºç»æ­¢ç¶æçå®¹å¨",slug:"æ¸çææå¤äºç»æ­¢ç¶æçå®¹å¨",normalizedTitle:"æ¸çææå¤äºç»æ­¢ç¶æçå®¹å¨",charIndex:169}],headersStr:"æ¸çææå¤äºç»æ­¢ç¶æçå®¹å¨",content:"# Docker å é¤å®¹å¨\n\nå¯ä»¥ä½¿ç¨ docker container rm æ¥å é¤ä¸ä¸ªå¤äºç»æ­¢ç¶æçå®¹å¨ãä¾å¦\n\ndocker container rm  trusting_newton\ntrusting_newton\n\n\nå¦æè¦å é¤ä¸ä¸ªè¿è¡ä¸­çå®¹å¨ï¼å¯ä»¥æ·»å  -f åæ°ãDocker ä¼åé SIGKILL ä¿¡å·ç»å®¹å¨ã\n\n\n# æ¸çææå¤äºç»æ­¢ç¶æçå®¹å¨\n\nç¨ docker container ls -a å½ä»¤å¯ä»¥æ¥çææå·²ç»åå»ºçåæ¬ç»æ­¢ç¶æçå®¹å¨ï¼å¦ææ°éå¤ªå¤è¦ä¸ä¸ªä¸ªå é¤å¯è½ä¼å¾éº»ç¦ï¼ç¨ä¸é¢çå½ä»¤å¯ä»¥æ¸çæææå¤äºç»æ­¢ç¶æçå®¹å¨ã\n\ndocker container prune\n",normalizedContent:"# docker å é¤å®¹å¨\n\nå¯ä»¥ä½¿ç¨ docker container rm æ¥å é¤ä¸ä¸ªå¤äºç»æ­¢ç¶æçå®¹å¨ãä¾å¦\n\ndocker container rm  trusting_newton\ntrusting_newton\n\n\nå¦æè¦å é¤ä¸ä¸ªè¿è¡ä¸­çå®¹å¨ï¼å¯ä»¥æ·»å  -f åæ°ãdocker ä¼åé sigkill ä¿¡å·ç»å®¹å¨ã\n\n\n# æ¸çææå¤äºç»æ­¢ç¶æçå®¹å¨\n\nç¨ docker container ls -a å½ä»¤å¯ä»¥æ¥çææå·²ç»åå»ºçåæ¬ç»æ­¢ç¶æçå®¹å¨ï¼å¦ææ°éå¤ªå¤è¦ä¸ä¸ªä¸ªå é¤å¯è½ä¼å¾éº»ç¦ï¼ç¨ä¸é¢çå½ä»¤å¯ä»¥æ¸çæææå¤äºç»æ­¢ç¶æçå®¹å¨ã\n\ndocker container prune\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"è®¿é® Docker ä»åº",frontmatter:{title:"è®¿é® Docker ä»åº",date:"2022-02-09T09:17:56.000Z",permalink:"/pages/c0886b/"},regularPath:"/17.Docker/06.%E8%AE%BF%E9%97%AE%20Docker%20%E4%BB%93%E5%BA%93/01.%E8%AE%BF%E9%97%AE%20Docker%20%E4%BB%93%E5%BA%93.html",relativePath:"17.Docker/06.è®¿é® Docker ä»åº/01.è®¿é® Docker ä»åº.md",key:"v-059385f2",path:"/pages/c0886b/",headersStr:null,content:"# è®¿é® Docker ä»åº\n\nä»åºï¼Repositoryï¼æ¯éä¸­å­æ¾éåçå°æ¹ã\n\nä¸ä¸ªå®¹ææ··æ·çæ¦å¿µæ¯æ³¨åæå¡å¨ï¼Registryï¼ãå®éä¸æ³¨åæå¡å¨æ¯ç®¡çä»åºçå·ä½æå¡å¨ï¼æ¯ä¸ªæå¡å¨ä¸å¯ä»¥æå¤ä¸ªä»åºï¼èæ¯ä¸ªä»åºä¸é¢æå¤ä¸ªéåãä»è¿æ¹é¢æ¥è¯´ï¼ä»åºå¯ä»¥è¢«è®¤ä¸ºæ¯ä¸ä¸ªå·ä½çé¡¹ç®æç®å½ãä¾å¦å¯¹äºä»åºå°å dl.dockerpool.com/ubuntu æ¥è¯´ï¼dl.dockerpool.com æ¯æ³¨åæå¡å¨å°åï¼ubuntu æ¯ä»åºåã\n\nå¤§é¨åæ¶åï¼å¹¶ä¸éè¦ä¸¥æ ¼åºåè¿ä¸¤èçæ¦å¿µã",normalizedContent:"# è®¿é® docker ä»åº\n\nä»åºï¼repositoryï¼æ¯éä¸­å­æ¾éåçå°æ¹ã\n\nä¸ä¸ªå®¹ææ··æ·çæ¦å¿µæ¯æ³¨åæå¡å¨ï¼registryï¼ãå®éä¸æ³¨åæå¡å¨æ¯ç®¡çä»åºçå·ä½æå¡å¨ï¼æ¯ä¸ªæå¡å¨ä¸å¯ä»¥æå¤ä¸ªä»åºï¼èæ¯ä¸ªä»åºä¸é¢æå¤ä¸ªéåãä»è¿æ¹é¢æ¥è¯´ï¼ä»åºå¯ä»¥è¢«è®¤ä¸ºæ¯ä¸ä¸ªå·ä½çé¡¹ç®æç®å½ãä¾å¦å¯¹äºä»åºå°å dl.dockerpool.com/ubuntu æ¥è¯´ï¼dl.dockerpool.com æ¯æ³¨åæå¡å¨å°åï¼ubuntu æ¯ä»åºåã\n\nå¤§é¨åæ¶åï¼å¹¶ä¸éè¦ä¸¥æ ¼åºåè¿ä¸¤èçæ¦å¿µã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Hub",frontmatter:{title:"Docker Hub",date:"2022-02-09T09:17:56.000Z",permalink:"/pages/ebce48/"},regularPath:"/17.Docker/06.%E8%AE%BF%E9%97%AE%20Docker%20%E4%BB%93%E5%BA%93/02.Docker%20Hub.html",relativePath:"17.Docker/06.è®¿é® Docker ä»åº/02.Docker Hub.md",key:"v-687cd7b8",path:"/pages/ebce48/",headers:[{level:2,title:"æ³¨å",slug:"æ³¨å",normalizedTitle:"æ³¨å",charIndex:109},{level:2,title:"ç»å½",slug:"ç»å½",normalizedTitle:"ç»å½",charIndex:165},{level:2,title:"æåéå",slug:"æåéå",normalizedTitle:"æåéå",charIndex:258},{level:2,title:"æ¨ééå",slug:"æ¨ééå",normalizedTitle:"æ¨ééå",charIndex:1648},{level:2,title:"èªå¨åå»º",slug:"èªå¨åå»º",normalizedTitle:"èªå¨åå»º",charIndex:1131}],headersStr:"æ³¨å ç»å½ æåéå æ¨ééå èªå¨åå»º",content:"# Docker Hub\n\nç®å Docker å®æ¹ç»´æ¤äºä¸ä¸ªå¬å±ä»åº Docker Hubï¼å¶ä¸­å·²ç»åæ¬äºæ°éè¶è¿ 15,000 çéåãå¤§é¨åéæ±é½å¯ä»¥éè¿å¨ Docker Hub ä¸­ç´æ¥ä¸è½½éåæ¥å®ç°ã\n\n\n# æ³¨å\n\nä½ å¯ä»¥å¨ https://cloud.docker.com åè´¹æ³¨åä¸ä¸ª Docker è´¦å·ã\n\n\n# ç»å½\n\nå¯ä»¥éè¿æ§è¡ docker login å½ä»¤äº¤äºå¼çè¾å¥ç¨æ·ååå¯ç æ¥å®æå¨å½ä»¤è¡çé¢ç»å½ Docker Hubã\n\nä½ å¯ä»¥éè¿ docker logout éåºç»å½ã\n\n\n# æåéå\n\nä½ å¯ä»¥éè¿ docker search å½ä»¤æ¥æ¥æ¾å®æ¹ä»åºä¸­çéåï¼å¹¶å©ç¨ docker pull å½ä»¤æ¥å°å®ä¸è½½å°æ¬å°ã\n\nä¾å¦ä»¥ centos ä¸ºå³é®è¯è¿è¡æç´¢ï¼\n\ndocker search centos\nNAME                                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\ncentos                                          The official build of CentOS.                   465       [OK]\ntianon/centos                                   CentOS 5 and 6, created using rinse instea...   28\nblalor/centos                                   Bare-bones base CentOS 6.5 image                6                    [OK]\nsaltstack/centos-6-minimal                                                                      6                    [OK]\ntutum/centos-6.4                                DEPRECATED. Use tutum/centos:6.4 instead. ...   5                    [OK]\n\n\nå¯ä»¥çå°è¿åäºå¾å¤åå«å³é®å­çéåï¼å¶ä¸­åæ¬éååå­ãæè¿°ãæ¶èæ°ï¼è¡¨ç¤ºè¯¥éåçåå³æ³¨ç¨åº¦ï¼ãæ¯å¦å®æ¹åå»ºãæ¯å¦èªå¨åå»ºã\n\nå®æ¹çéåè¯´ææ¯å®æ¹é¡¹ç®ç»åå»ºåç»´æ¤çï¼automated èµæºåè®¸ç¨æ·éªè¯éåçæ¥æºååå®¹ã\n\næ ¹æ®æ¯å¦æ¯å®æ¹æä¾ï¼å¯å°éåèµæºåä¸ºä¸¤ç±»ã\n\nä¸ç§æ¯ç±»ä¼¼ centos è¿æ ·çéåï¼è¢«ç§°ä¸ºåºç¡éåææ ¹éåãè¿äºåºç¡éåç± Docker å¬å¸åå»ºãéªè¯ãæ¯æãæä¾ãè¿æ ·çéåå¾å¾ä½¿ç¨åä¸ªåè¯ä½ä¸ºåå­ã\n\nè¿æä¸ç§ç±»åï¼æ¯å¦ tianon/centos éåï¼å®æ¯ç± Docker çç¨æ·åå»ºå¹¶ç»´æ¤çï¼å¾å¾å¸¦æç¨æ·åç§°åç¼ãå¯ä»¥éè¿åç¼ username/ æ¥æå®ä½¿ç¨æä¸ªç¨æ·æä¾çéåï¼æ¯å¦ tianon ç¨æ·ã\n\nå¦å¤ï¼å¨æ¥æ¾çæ¶åéè¿ --filter=stars=N åæ°å¯ä»¥æå®ä»æ¾ç¤ºæ¶èæ°éä¸º N ä»¥ä¸çéåã\n\nä¸è½½å®æ¹ centos éåå°æ¬å°ã\n\ndocker pull centos\nPulling repository centos\n0b443ba03958: Download complete\n539c0211cd76: Download complete\n511136ea3c5a: Download complete\n7064731afe90: Download complete\n\n\n\n# æ¨ééå\n\nç¨æ·ä¹å¯ä»¥å¨ç»å½åéè¿ docker push å½ä»¤æ¥å°èªå·±çéåæ¨éå° Docker Hubã\n\nä»¥ä¸å½ä»¤ä¸­ç username è¯·æ¿æ¢ä¸ºä½ ç Docker è´¦å·ç¨æ·åã\n\ndocker tag ubuntu:17.10 username/ubuntu:17.10\n\ndocker image ls\n\nREPOSITORY                                               TAG                    IMAGE ID            CREATED             SIZE\nubuntu                                                   17.10                  275d79972a86        6 days ago          94.6MB\nusername/ubuntu                                          17.10                  275d79972a86        6 days ago          94.6MB\n\ndocker push username/ubuntu:17.10\n\ndocker search username\n\nNAME                      DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nusername/ubuntu\n\n\n\n# èªå¨åå»º\n\nèªå¨åå»ºï¼Automated Buildsï¼åè½å¯¹äºéè¦ç»å¸¸åçº§éååç¨åºæ¥è¯´ï¼ååæ¹ä¾¿ã\n\nææ¶åï¼ç¨æ·åå»ºäºéåï¼å®è£äºæä¸ªè½¯ä»¶ï¼å¦æè½¯ä»¶åå¸æ°çæ¬åéè¦æå¨æ´æ°éåã\n\nèèªå¨åå»ºåè®¸ç¨æ·éè¿ Docker Hub æå®è·è¸ªä¸ä¸ªç®æ ç½ç«ï¼ç®åæ¯æ GitHub æ BitBucketï¼ä¸çé¡¹ç®ï¼ä¸æ¦é¡¹ç®åçæ°çæäº¤æèåå»ºæ°çæ ç­¾ï¼tagï¼ï¼Docker Hub ä¼èªå¨æå»ºéåå¹¶æ¨éå° Docker Hub ä¸­ã\n\nè¦éç½®èªå¨åå»ºï¼åæ¬å¦ä¸çæ­¥éª¤ï¼\n\n * åå»ºå¹¶ç»å½ Docker Hubï¼ä»¥åç®æ ç½ç«ï¼\n * å¨ç®æ ç½ç«ä¸­è¿æ¥å¸æ·å° Docker Hubï¼\n * å¨ Docker Hub ä¸­ éç½®ä¸ä¸ªèªå¨åå»ºï¼\n * éåä¸ä¸ªç®æ ç½ç«ä¸­çé¡¹ç®ï¼éè¦å« Dockerfileï¼ååæ¯ï¼\n * æå® Dockerfile çä½ç½®ï¼å¹¶æäº¤åå»ºã\n\nä¹åï¼å¯ä»¥å¨ Docker Hub ç èªå¨åå»ºé¡µé¢ ä¸­è·è¸ªæ¯æ¬¡åå»ºçç¶æã",normalizedContent:"# docker hub\n\nç®å docker å®æ¹ç»´æ¤äºä¸ä¸ªå¬å±ä»åº docker hubï¼å¶ä¸­å·²ç»åæ¬äºæ°éè¶è¿ 15,000 çéåãå¤§é¨åéæ±é½å¯ä»¥éè¿å¨ docker hub ä¸­ç´æ¥ä¸è½½éåæ¥å®ç°ã\n\n\n# æ³¨å\n\nä½ å¯ä»¥å¨ https://cloud.docker.com åè´¹æ³¨åä¸ä¸ª docker è´¦å·ã\n\n\n# ç»å½\n\nå¯ä»¥éè¿æ§è¡ docker login å½ä»¤äº¤äºå¼çè¾å¥ç¨æ·ååå¯ç æ¥å®æå¨å½ä»¤è¡çé¢ç»å½ docker hubã\n\nä½ å¯ä»¥éè¿ docker logout éåºç»å½ã\n\n\n# æåéå\n\nä½ å¯ä»¥éè¿ docker search å½ä»¤æ¥æ¥æ¾å®æ¹ä»åºä¸­çéåï¼å¹¶å©ç¨ docker pull å½ä»¤æ¥å°å®ä¸è½½å°æ¬å°ã\n\nä¾å¦ä»¥ centos ä¸ºå³é®è¯è¿è¡æç´¢ï¼\n\ndocker search centos\nname                                            description                                     stars     official   automated\ncentos                                          the official build of centos.                   465       [ok]\ntianon/centos                                   centos 5 and 6, created using rinse instea...   28\nblalor/centos                                   bare-bones base centos 6.5 image                6                    [ok]\nsaltstack/centos-6-minimal                                                                      6                    [ok]\ntutum/centos-6.4                                deprecated. use tutum/centos:6.4 instead. ...   5                    [ok]\n\n\nå¯ä»¥çå°è¿åäºå¾å¤åå«å³é®å­çéåï¼å¶ä¸­åæ¬éååå­ãæè¿°ãæ¶èæ°ï¼è¡¨ç¤ºè¯¥éåçåå³æ³¨ç¨åº¦ï¼ãæ¯å¦å®æ¹åå»ºãæ¯å¦èªå¨åå»ºã\n\nå®æ¹çéåè¯´ææ¯å®æ¹é¡¹ç®ç»åå»ºåç»´æ¤çï¼automated èµæºåè®¸ç¨æ·éªè¯éåçæ¥æºååå®¹ã\n\næ ¹æ®æ¯å¦æ¯å®æ¹æä¾ï¼å¯å°éåèµæºåä¸ºä¸¤ç±»ã\n\nä¸ç§æ¯ç±»ä¼¼ centos è¿æ ·çéåï¼è¢«ç§°ä¸ºåºç¡éåææ ¹éåãè¿äºåºç¡éåç± docker å¬å¸åå»ºãéªè¯ãæ¯æãæä¾ãè¿æ ·çéåå¾å¾ä½¿ç¨åä¸ªåè¯ä½ä¸ºåå­ã\n\nè¿æä¸ç§ç±»åï¼æ¯å¦ tianon/centos éåï¼å®æ¯ç± docker çç¨æ·åå»ºå¹¶ç»´æ¤çï¼å¾å¾å¸¦æç¨æ·åç§°åç¼ãå¯ä»¥éè¿åç¼ username/ æ¥æå®ä½¿ç¨æä¸ªç¨æ·æä¾çéåï¼æ¯å¦ tianon ç¨æ·ã\n\nå¦å¤ï¼å¨æ¥æ¾çæ¶åéè¿ --filter=stars=n åæ°å¯ä»¥æå®ä»æ¾ç¤ºæ¶èæ°éä¸º n ä»¥ä¸çéåã\n\nä¸è½½å®æ¹ centos éåå°æ¬å°ã\n\ndocker pull centos\npulling repository centos\n0b443ba03958: download complete\n539c0211cd76: download complete\n511136ea3c5a: download complete\n7064731afe90: download complete\n\n\n\n# æ¨ééå\n\nç¨æ·ä¹å¯ä»¥å¨ç»å½åéè¿ docker push å½ä»¤æ¥å°èªå·±çéåæ¨éå° docker hubã\n\nä»¥ä¸å½ä»¤ä¸­ç username è¯·æ¿æ¢ä¸ºä½ ç docker è´¦å·ç¨æ·åã\n\ndocker tag ubuntu:17.10 username/ubuntu:17.10\n\ndocker image ls\n\nrepository                                               tag                    image id            created             size\nubuntu                                                   17.10                  275d79972a86        6 days ago          94.6mb\nusername/ubuntu                                          17.10                  275d79972a86        6 days ago          94.6mb\n\ndocker push username/ubuntu:17.10\n\ndocker search username\n\nname                      description                                     stars               official            automated\nusername/ubuntu\n\n\n\n# èªå¨åå»º\n\nèªå¨åå»ºï¼automated buildsï¼åè½å¯¹äºéè¦ç»å¸¸åçº§éååç¨åºæ¥è¯´ï¼ååæ¹ä¾¿ã\n\nææ¶åï¼ç¨æ·åå»ºäºéåï¼å®è£äºæä¸ªè½¯ä»¶ï¼å¦æè½¯ä»¶åå¸æ°çæ¬åéè¦æå¨æ´æ°éåã\n\nèèªå¨åå»ºåè®¸ç¨æ·éè¿ docker hub æå®è·è¸ªä¸ä¸ªç®æ ç½ç«ï¼ç®åæ¯æ github æ bitbucketï¼ä¸çé¡¹ç®ï¼ä¸æ¦é¡¹ç®åçæ°çæäº¤æèåå»ºæ°çæ ç­¾ï¼tagï¼ï¼docker hub ä¼èªå¨æå»ºéåå¹¶æ¨éå° docker hub ä¸­ã\n\nè¦éç½®èªå¨åå»ºï¼åæ¬å¦ä¸çæ­¥éª¤ï¼\n\n * åå»ºå¹¶ç»å½ docker hubï¼ä»¥åç®æ ç½ç«ï¼\n * å¨ç®æ ç½ç«ä¸­è¿æ¥å¸æ·å° docker hubï¼\n * å¨ docker hub ä¸­ éç½®ä¸ä¸ªèªå¨åå»ºï¼\n * éåä¸ä¸ªç®æ ç½ç«ä¸­çé¡¹ç®ï¼éè¦å« dockerfileï¼ååæ¯ï¼\n * æå® dockerfile çä½ç½®ï¼å¹¶æäº¤åå»ºã\n\nä¹åï¼å¯ä»¥å¨ docker hub ç èªå¨åå»ºé¡µé¢ ä¸­è·è¸ªæ¯æ¬¡åå»ºçç¶æã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker ç§æä»åº",frontmatter:{title:"Docker ç§æä»åº",date:"2022-02-09T09:17:56.000Z",permalink:"/pages/92e266/"},regularPath:"/17.Docker/06.%E8%AE%BF%E9%97%AE%20Docker%20%E4%BB%93%E5%BA%93/03.Docker%20%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93.html",relativePath:"17.Docker/06.è®¿é® Docker ä»åº/03.Docker ç§æä»åº.md",key:"v-f8655a0e",path:"/pages/92e266/",headers:[{level:2,title:"å®è£è¿è¡ docker-registry",slug:"å®è£è¿è¡-docker-registry",normalizedTitle:"å®è£è¿è¡ docker-registry",charIndex:155},{level:3,title:"å®¹å¨è¿è¡",slug:"å®¹å¨è¿è¡",normalizedTitle:"å®¹å¨è¿è¡",charIndex:180},{level:2,title:"å¨ç§æä»åºä¸ä¼ ãæç´¢ãä¸è½½éå",slug:"å¨ç§æä»åºä¸ä¼ ãæç´¢ãä¸è½½éå",normalizedTitle:"å¨ç§æä»åºä¸ä¼ ãæç´¢ãä¸è½½éå",charIndex:520},{level:2,title:"æ³¨æäºé¡¹",slug:"æ³¨æäºé¡¹",normalizedTitle:"æ³¨æäºé¡¹",charIndex:2446},{level:3,title:"Ubuntu 16.04+, Debian 8+, centos 7",slug:"ubuntu-16-04-debian-8-centos-7",normalizedTitle:"ubuntu 16.04+, debian 8+, centos 7",charIndex:2660},{level:2,title:"å¶ä»",slug:"å¶ä»",normalizedTitle:"å¶ä»",charIndex:2490}],headersStr:"å®è£è¿è¡ docker-registry å®¹å¨è¿è¡ å¨ç§æä»åºä¸ä¼ ãæç´¢ãä¸è½½éå æ³¨æäºé¡¹ Ubuntu 16.04+, Debian 8+, centos 7 å¶ä»",content:'# Docker ç§æä»åº\n\nææ¶åä½¿ç¨ Docker Hub è¿æ ·çå¬å±ä»åºå¯è½ä¸æ¹ä¾¿ï¼ç¨æ·å¯ä»¥åå»ºä¸ä¸ªæ¬å°ä»åºä¾ç§äººä½¿ç¨ã\n\næ¬èä»ç»å¦ä½ä½¿ç¨æ¬å°ä»åºã\n\ndocker-registry æ¯å®æ¹æä¾çå·¥å·ï¼å¯ä»¥ç¨äºæå»ºç§æçéåä»åºãæ¬æåå®¹åºäº docker-registry v2.x çæ¬ã\n\n\n# å®è£è¿è¡ docker-registry\n\n\n# å®¹å¨è¿è¡\n\nä½ å¯ä»¥éè¿è·åå®æ¹ registry éåæ¥è¿è¡ã\n\ndocker run -d -p 5000:5000 --restart=always --name registry registry\n\n\nè¿å°ä½¿ç¨å®æ¹ç registry éåæ¥å¯å¨ç§æä»åºãé»è®¤æåµä¸ï¼ä»åºä¼è¢«åå»ºå¨å®¹å¨ç /var/lib/registry ç®å½ä¸ãä½ å¯ä»¥éè¿ -v åæ°æ¥å°éåæä»¶å­æ¾å¨æ¬å°çæå®è·¯å¾ãä¾å¦ä¸é¢çä¾å­å°ä¸ä¼ çéåæ¾å°æ¬å°ç /opt/data/registry ç®å½ã\n\ndocker run -d \\\n    -p 5000:5000 \\\n    -v /opt/data/registry:/var/lib/registry \\\n    registry\n\n\n\n# å¨ç§æä»åºä¸ä¼ ãæç´¢ãä¸è½½éå\n\nåå»ºå¥½ç§æä»åºä¹åï¼å°±å¯ä»¥ä½¿ç¨ docker tag æ¥æ è®°ä¸ä¸ªéåï¼ç¶åæ¨éå®å°ä»åºãä¾å¦ç§æä»åºå°åä¸º 127.0.0.1:5000ã\n\nåå¨æ¬æºæ¥çå·²æçéåã\n\ndocker image ls\nREPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB\n\n\nä½¿ç¨ docker tag å° ubuntu:latest è¿ä¸ªéåæ è®°ä¸º 127.0.0.1:5000/ubuntu:latestã\n\næ ¼å¼ä¸º docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG]ã\n\ndocker tag ubuntu:latest 127.0.0.1:5000/ubuntu:latest\ndocker image ls\nREPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB\n127.0.0.1:5000/ubuntu:latest      latest              ba5877dc9bec        6 weeks ago         192.7 MB\n\n\nä½¿ç¨ docker push ä¸ä¼ æ è®°çéåã\n\ndocker push 127.0.0.1:5000/ubuntu:latest\nThe push refers to repository [127.0.0.1:5000/ubuntu]\n373a30c24545: Pushed\na9148f5200b0: Pushed\ncdd3de0940ab: Pushed\nfc56279bbb33: Pushed\nb38367233d37: Pushed\n2aebd096e0e2: Pushed\nlatest: digest: sha256:fe4277621f10b5026266932ddf760f5a756d2facd505a94d2da12f4f52f71f5a size: 1568\n\n\nç¨ curl æ¥çä»åºä¸­çéåã\n\ncurl 127.0.0.1:5000/v2/_catalog\n{"repositories":["ubuntu"]}\n\n\nè¿éå¯ä»¥çå° {"repositories":["ubuntu"]}ï¼è¡¨æéåå·²ç»è¢«æåä¸ä¼ äºã\n\nåå é¤å·²æéåï¼åå°è¯ä»ç§æä»åºä¸­ä¸è½½è¿ä¸ªéåã\n\ndocker image rm 127.0.0.1:5000/ubuntu:latest\n\ndocker pull 127.0.0.1:5000/ubuntu:latest\nPulling repository 127.0.0.1:5000/ubuntu:latest\nba5877dc9bec: Download complete\n511136ea3c5a: Download complete\n9bad880da3d2: Download complete\n25f11f5fb0cb: Download complete\nebc34468f71d: Download complete\n2318d26665ef: Download complete\n\ndocker image ls\nREPOSITORY                         TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\n127.0.0.1:5000/ubuntu:latest       latest              ba5877dc9bec        6 weeks ago         192.7 MB\n\n\n\n# æ³¨æäºé¡¹\n\nå¦æä½ ä¸æ³ä½¿ç¨ 127.0.0.1:5000 ä½ä¸ºä»åºå°åï¼æ¯å¦æ³è®©æ¬ç½æ®µçå¶ä»ä¸»æºä¹è½æéåæ¨éå°ç§æä»åºãä½ å°±å¾æä¾å¦ 192.168.199.100:5000 è¿æ ·çåç½å°åä½ä¸ºç§æä»åºå°åï¼è¿æ¶ä½ ä¼åç°æ æ³æåæ¨ééåã\n\nè¿æ¯å ä¸º Docker é»è®¤ä¸åè®¸é HTTPS æ¹å¼æ¨ééåãæä»¬å¯ä»¥éè¿ Docker çéç½®éé¡¹æ¥åæ¶è¿ä¸ªéå¶ï¼æèæ¥çä¸ä¸èéç½®è½å¤éè¿ HTTPS è®¿é®çç§æä»åºã\n\n\n# Ubuntu 16.04+, Debian 8+, centos 7\n\nå¯¹äºä½¿ç¨ systemd çç³»ç»ï¼è¯·å¨ /etc/docker/daemon.json ä¸­åå¥å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\n{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com"\n  ],\n  "insecure-registries": [\n    "192.168.199.100:5000"\n  ]\n}\n\n\n> æ³¨æï¼è¯¥æä»¶å¿é¡»ç¬¦å json è§èï¼å¦å Docker å°ä¸è½å¯å¨ã\n\n\n# å¶ä»\n\nå¯¹äº Docker for Windows ã Docker for Mac å¨è®¾ç½®ä¸­ç¼è¾ daemon.json å¢å åä¸è¾¹ä¸æ ·çå­ç¬¦ä¸²å³å¯ã',normalizedContent:'# docker ç§æä»åº\n\nææ¶åä½¿ç¨ docker hub è¿æ ·çå¬å±ä»åºå¯è½ä¸æ¹ä¾¿ï¼ç¨æ·å¯ä»¥åå»ºä¸ä¸ªæ¬å°ä»åºä¾ç§äººä½¿ç¨ã\n\næ¬èä»ç»å¦ä½ä½¿ç¨æ¬å°ä»åºã\n\ndocker-registry æ¯å®æ¹æä¾çå·¥å·ï¼å¯ä»¥ç¨äºæå»ºç§æçéåä»åºãæ¬æåå®¹åºäº docker-registry v2.x çæ¬ã\n\n\n# å®è£è¿è¡ docker-registry\n\n\n# å®¹å¨è¿è¡\n\nä½ å¯ä»¥éè¿è·åå®æ¹ registry éåæ¥è¿è¡ã\n\ndocker run -d -p 5000:5000 --restart=always --name registry registry\n\n\nè¿å°ä½¿ç¨å®æ¹ç registry éåæ¥å¯å¨ç§æä»åºãé»è®¤æåµä¸ï¼ä»åºä¼è¢«åå»ºå¨å®¹å¨ç /var/lib/registry ç®å½ä¸ãä½ å¯ä»¥éè¿ -v åæ°æ¥å°éåæä»¶å­æ¾å¨æ¬å°çæå®è·¯å¾ãä¾å¦ä¸é¢çä¾å­å°ä¸ä¼ çéåæ¾å°æ¬å°ç /opt/data/registry ç®å½ã\n\ndocker run -d \\\n    -p 5000:5000 \\\n    -v /opt/data/registry:/var/lib/registry \\\n    registry\n\n\n\n# å¨ç§æä»åºä¸ä¼ ãæç´¢ãä¸è½½éå\n\nåå»ºå¥½ç§æä»åºä¹åï¼å°±å¯ä»¥ä½¿ç¨ docker tag æ¥æ è®°ä¸ä¸ªéåï¼ç¶åæ¨éå®å°ä»åºãä¾å¦ç§æä»åºå°åä¸º 127.0.0.1:5000ã\n\nåå¨æ¬æºæ¥çå·²æçéåã\n\ndocker image ls\nrepository                        tag                 image id            created             virtual size\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 mb\n\n\nä½¿ç¨ docker tag å° ubuntu:latest è¿ä¸ªéåæ è®°ä¸º 127.0.0.1:5000/ubuntu:latestã\n\næ ¼å¼ä¸º docker tag image[:tag] [registry_host[:registry_port]/]repository[:tag]ã\n\ndocker tag ubuntu:latest 127.0.0.1:5000/ubuntu:latest\ndocker image ls\nrepository                        tag                 image id            created             virtual size\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 mb\n127.0.0.1:5000/ubuntu:latest      latest              ba5877dc9bec        6 weeks ago         192.7 mb\n\n\nä½¿ç¨ docker push ä¸ä¼ æ è®°çéåã\n\ndocker push 127.0.0.1:5000/ubuntu:latest\nthe push refers to repository [127.0.0.1:5000/ubuntu]\n373a30c24545: pushed\na9148f5200b0: pushed\ncdd3de0940ab: pushed\nfc56279bbb33: pushed\nb38367233d37: pushed\n2aebd096e0e2: pushed\nlatest: digest: sha256:fe4277621f10b5026266932ddf760f5a756d2facd505a94d2da12f4f52f71f5a size: 1568\n\n\nç¨ curl æ¥çä»åºä¸­çéåã\n\ncurl 127.0.0.1:5000/v2/_catalog\n{"repositories":["ubuntu"]}\n\n\nè¿éå¯ä»¥çå° {"repositories":["ubuntu"]}ï¼è¡¨æéåå·²ç»è¢«æåä¸ä¼ äºã\n\nåå é¤å·²æéåï¼åå°è¯ä»ç§æä»åºä¸­ä¸è½½è¿ä¸ªéåã\n\ndocker image rm 127.0.0.1:5000/ubuntu:latest\n\ndocker pull 127.0.0.1:5000/ubuntu:latest\npulling repository 127.0.0.1:5000/ubuntu:latest\nba5877dc9bec: download complete\n511136ea3c5a: download complete\n9bad880da3d2: download complete\n25f11f5fb0cb: download complete\nebc34468f71d: download complete\n2318d26665ef: download complete\n\ndocker image ls\nrepository                         tag                 image id            created             virtual size\n127.0.0.1:5000/ubuntu:latest       latest              ba5877dc9bec        6 weeks ago         192.7 mb\n\n\n\n# æ³¨æäºé¡¹\n\nå¦æä½ ä¸æ³ä½¿ç¨ 127.0.0.1:5000 ä½ä¸ºä»åºå°åï¼æ¯å¦æ³è®©æ¬ç½æ®µçå¶ä»ä¸»æºä¹è½æéåæ¨éå°ç§æä»åºãä½ å°±å¾æä¾å¦ 192.168.199.100:5000 è¿æ ·çåç½å°åä½ä¸ºç§æä»åºå°åï¼è¿æ¶ä½ ä¼åç°æ æ³æåæ¨ééåã\n\nè¿æ¯å ä¸º docker é»è®¤ä¸åè®¸é https æ¹å¼æ¨ééåãæä»¬å¯ä»¥éè¿ docker çéç½®éé¡¹æ¥åæ¶è¿ä¸ªéå¶ï¼æèæ¥çä¸ä¸èéç½®è½å¤éè¿ https è®¿é®çç§æä»åºã\n\n\n# ubuntu 16.04+, debian 8+, centos 7\n\nå¯¹äºä½¿ç¨ systemd çç³»ç»ï¼è¯·å¨ /etc/docker/daemon.json ä¸­åå¥å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\n{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com"\n  ],\n  "insecure-registries": [\n    "192.168.199.100:5000"\n  ]\n}\n\n\n> æ³¨æï¼è¯¥æä»¶å¿é¡»ç¬¦å json è§èï¼å¦å docker å°ä¸è½å¯å¨ã\n\n\n# å¶ä»\n\nå¯¹äº docker for windows ã docker for mac å¨è®¾ç½®ä¸­ç¼è¾ daemon.json å¢å åä¸è¾¹ä¸æ ·çå­ç¬¦ä¸²å³å¯ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker ç§æä»åºé«çº§éç½®",frontmatter:{title:"Docker ç§æä»åºé«çº§éç½®",date:"2022-02-09T09:17:56.000Z",permalink:"/pages/141d21/"},regularPath:"/17.Docker/06.%E8%AE%BF%E9%97%AE%20Docker%20%E4%BB%93%E5%BA%93/04.Docker%20%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE.html",relativePath:"17.Docker/06.è®¿é® Docker ä»åº/04.Docker ç§æä»åºé«çº§éç½®.md",key:"v-093f317f",path:"/pages/141d21/",headers:[{level:2,title:"åå¤ç«ç¹è¯ä¹¦",slug:"åå¤ç«ç¹è¯ä¹¦",normalizedTitle:"åå¤ç«ç¹è¯ä¹¦",charIndex:115},{level:2,title:"éç½®ç§æä»åº",slug:"éç½®ç§æä»åº",normalizedTitle:"éç½®ç§æä»åº",charIndex:1878},{level:2,title:"çæ http è®¤è¯æä»¶",slug:"çæ-http-è®¤è¯æä»¶",normalizedTitle:"çæ http è®¤è¯æä»¶",charIndex:2658},{level:2,title:"ç¼è¾ docker-compose.yml",slug:"ç¼è¾-docker-compose-yml",normalizedTitle:"ç¼è¾ docker-compose.yml",charIndex:2840},{level:2,title:"ä¿®æ¹ hosts",slug:"ä¿®æ¹-hosts",normalizedTitle:"ä¿®æ¹ hosts",charIndex:3065},{level:2,title:"å¯å¨",slug:"å¯å¨",normalizedTitle:"å¯å¨",charIndex:3123},{level:2,title:"æµè¯ç§æä»åºåè½",slug:"æµè¯ç§æä»åºåè½",normalizedTitle:"æµè¯ç§æä»åºåè½",charIndex:3198},{level:2,title:"æ³¨æäºé¡¹",slug:"æ³¨æäºé¡¹",normalizedTitle:"æ³¨æäºé¡¹",charIndex:3679}],headersStr:"åå¤ç«ç¹è¯ä¹¦ éç½®ç§æä»åº çæ http è®¤è¯æä»¶ ç¼è¾ docker-compose.yml ä¿®æ¹ hosts å¯å¨ æµè¯ç§æä»åºåè½ æ³¨æäºé¡¹",content:'# Docker ç§æä»åºé«çº§éç½®\n\nä¸ä¸èæä»¬æ­å»ºäºä¸ä¸ªå·æåºç¡åè½çç§æä»åºï¼æ¬å°èæä»¬æ¥ä½¿ç¨ Docker Compose æ­å»ºä¸ä¸ªæ¥ææéè®¤è¯ãTLS çç§æä»åºã\n\næ°å»ºä¸ä¸ªæä»¶å¤¹ï¼ä»¥ä¸æ­¥éª¤åå¨è¯¥æä»¶å¤¹ä¸­è¿è¡ã\n\n\n# åå¤ç«ç¹è¯ä¹¦\n\nå¦æä½ æ¥æä¸ä¸ªååï¼å½ååå¤§äºæå¡ååæä¾åè´¹çç«ç¹è¯ä¹¦ãä½ ä¹å¯ä»¥ä½¿ç¨ openssl èªè¡ç­¾åè¯ä¹¦ã\n\nè¿éåè®¾æä»¬å°è¦æ­å»ºçç§æä»åºå°åä¸º docker.domain.comï¼ä¸é¢æä»¬ä»ç»ä½¿ç¨ openssl èªè¡ç­¾å docker.domain.com çç«ç¹ SSL è¯ä¹¦ã\n\nç¬¬ä¸æ­¥åå»º CA ç§é¥ã\n\nopenssl genrsa -out "root-ca.key" 4096\n\n\nç¬¬äºæ­¥å©ç¨ç§é¥åå»º CA æ ¹è¯ä¹¦è¯·æ±æä»¶ã\n\nopenssl req \\\n          -new -key "root-ca.key" \\\n          -out "root-ca.csr" -sha256 \\\n          -subj \'/C=CN/ST=Shanxi/L=Datong/O=Your Company Name/CN=Your Company Name Docker Registry CA\'\n\n\n> ä»¥ä¸å½ä»¤ä¸­ -subj åæ°éç /C è¡¨ç¤ºå½å®¶ï¼å¦ CNï¼/ST è¡¨ç¤ºçï¼/L è¡¨ç¤ºåå¸æèå°åºï¼/O è¡¨ç¤ºç»ç»åï¼/CN éç¨åç§°ã\n\nç¬¬ä¸æ­¥éç½® CA æ ¹è¯ä¹¦ï¼æ°å»º root-ca.cnfã\n\n[root_ca]\nbasicConstraints = critical,CA:TRUE,pathlen:1\nkeyUsage = critical, nonRepudiation, cRLSign, keyCertSign\nsubjectKeyIdentifier=hash\n\n\nç¬¬åæ­¥ç­¾åæ ¹è¯ä¹¦ã\n\nopenssl x509 -req  -days 3650  -in "root-ca.csr" \\\n               -signkey "root-ca.key" -sha256 -out "root-ca.crt" \\\n               -extfile "root-ca.cnf" -extensions \\\n               root_ca\n\n\nç¬¬äºæ­¥çæç«ç¹ SSL ç§é¥ã\n\nopenssl genrsa -out "docker.domain.com.key" 4096\n\n\nç¬¬å­æ­¥ä½¿ç¨ç§é¥çæè¯ä¹¦è¯·æ±æä»¶ã\n\nopenssl req -new -key "docker.domain.com.key" -out "site.csr" -sha256 \\\n          -subj \'/C=CN/ST=Shanxi/L=Datong/O=Your Company Name/CN=docker.domain.com\'\n\n\nç¬¬ä¸æ­¥éç½®è¯ä¹¦ï¼æ°å»º site.cnf æä»¶ã\n\n[server]\nauthorityKeyIdentifier=keyid,issuer\nbasicConstraints = critical,CA:FALSE\nextendedKeyUsage=serverAuth\nkeyUsage = critical, digitalSignature, keyEncipherment\nsubjectAltName = DNS:docker.domain.com, IP:127.0.0.1\nsubjectKeyIdentifier=hash\n\n\nç¬¬å«æ­¥ç­¾ç½²ç«ç¹ SSL è¯ä¹¦ã\n\nopenssl x509 -req -days 750 -in "site.csr" -sha256 \\\n    -CA "root-ca.crt" -CAkey "root-ca.key"  -CAcreateserial \\\n    -out "docker.domain.com.crt" -extfile "site.cnf" -extensions server\n\n\nè¿æ ·å·²ç»æ¥æäº docker.domain.com çç½ç« SSL ç§é¥ docker.domain.com.key å SSL è¯ä¹¦ docker.domain.com.crtã\n\næ°å»º ssl æä»¶å¤¹å¹¶å° docker.domain.com.key docker.domain.com.crt è¿ä¸¤ä¸ªæä»¶ç§»å¥ï¼å é¤å¶ä»æä»¶ã\n\n\n# éç½®ç§æä»åº\n\nç§æä»åºé»è®¤çéç½®æä»¶ä½äº /etc/docker/registry/config.ymlï¼æä»¬åå¨æ¬å°ç¼è¾ config.ymlï¼ä¹åæè½½å°å®¹å¨ä¸­ã\n\nversion: 0.1\nlog:\n  accesslog:\n    disabled: true\n  level: debug\n  formatter: text\n  fields:\n    service: registry\n    environment: staging\nstorage:\n  delete:\n    enabled: true\n  cache:\n    blobdescriptor: inmemory\n  filesystem:\n    rootdirectory: /var/lib/registry\nauth:\n  htpasswd:\n    realm: basic-realm\n    path: /etc/docker/registry/auth/nginx.htpasswd\nhttp:\n  addr: :443\n  host: https://docker.domain.com\n  headers:\n    X-Content-Type-Options: [nosniff]\n  http2:\n    disabled: false\n  tls:\n    certificate: /etc/docker/registry/ssl/docker.domain.com.crt\n    key: /etc/docker/registry/ssl/docker.domain.com.key\nhealth:\n  storagedriver:\n    enabled: true\n    interval: 10s\nthreshold: 3\n\n\n\n# çæ http è®¤è¯æä»¶\n\nmkdir auth\n\ndocker run --rm \\\n    --entrypoint htpasswd \\\n    registry \\\n    -Bbn username password > auth/nginx.htpasswd\n\n\n> å°ä¸é¢ç username password æ¿æ¢ä¸ºä½ èªå·±çç¨æ·ååå¯ç ã\n\n\n# ç¼è¾ docker-compose.yml\n\nversion: \'3\'\n\nservices:\n  registry:\n    image: registry\n    ports:\n      - "443:443"\n    volumes:\n      - ./:/etc/docker/registry\n      - registry-data:/var/lib/registry\n\nvolumes:\n  registry-data:\n\n\n\n# ä¿®æ¹ hosts\n\nç¼è¾ /etc/hosts\n\ndocker.domain.com 127.0.0.1\n\n\n\n# å¯å¨\n\ndocker-compose up -d\n\n\nè¿æ ·æä»¬å°±æ­å»ºå¥½äºä¸ä¸ªå·ææéè®¤è¯ãTLS çç§æä»åºï¼æ¥ä¸æ¥æä»¬æµè¯å¶åè½æ¯å¦æ­£å¸¸ã\n\n\n# æµè¯ç§æä»åºåè½\n\nç»å½å°ç§æä»åºã\n\ndocker login docker.domain.com\n\n\nå°è¯æ¨éãæåéåã\n\ndocker pull ubuntu:17.10\n\ndocker tag ubuntu:17.10 docker.domain.com/username/ubuntu:17.10\n\ndocker push docker.domain.com/username/ubuntu:17.10\n\ndocker image rm docker.domain.com/username/ubuntu:17.10\n\ndocker pull docker.domain.com/username/ubuntu:17.10\n\n\nå¦ææä»¬éåºç»å½ï¼å°è¯æ¨ééåã\n\ndocker logout docker.domain.com\n\ndocker push docker.domain.com/username/ubuntu:17.10\n\nno basic auth credentials\n\n\nåç°ä¼æç¤ºæ²¡æç»å½ï¼ä¸è½å°éåæ¨éå°ç§æä»åºä¸­ã\n\n\n# æ³¨æäºé¡¹\n\nå¦æä½ æ¬æºå ç¨äº 443 ç«¯å£ï¼ä½ å¯ä»¥éç½® Nginx ä»£çï¼è¿éä¸åèµè¿°ã',normalizedContent:'# docker ç§æä»åºé«çº§éç½®\n\nä¸ä¸èæä»¬æ­å»ºäºä¸ä¸ªå·æåºç¡åè½çç§æä»åºï¼æ¬å°èæä»¬æ¥ä½¿ç¨ docker compose æ­å»ºä¸ä¸ªæ¥ææéè®¤è¯ãtls çç§æä»åºã\n\næ°å»ºä¸ä¸ªæä»¶å¤¹ï¼ä»¥ä¸æ­¥éª¤åå¨è¯¥æä»¶å¤¹ä¸­è¿è¡ã\n\n\n# åå¤ç«ç¹è¯ä¹¦\n\nå¦æä½ æ¥æä¸ä¸ªååï¼å½ååå¤§äºæå¡ååæä¾åè´¹çç«ç¹è¯ä¹¦ãä½ ä¹å¯ä»¥ä½¿ç¨ openssl èªè¡ç­¾åè¯ä¹¦ã\n\nè¿éåè®¾æä»¬å°è¦æ­å»ºçç§æä»åºå°åä¸º docker.domain.comï¼ä¸é¢æä»¬ä»ç»ä½¿ç¨ openssl èªè¡ç­¾å docker.domain.com çç«ç¹ ssl è¯ä¹¦ã\n\nç¬¬ä¸æ­¥åå»º ca ç§é¥ã\n\nopenssl genrsa -out "root-ca.key" 4096\n\n\nç¬¬äºæ­¥å©ç¨ç§é¥åå»º ca æ ¹è¯ä¹¦è¯·æ±æä»¶ã\n\nopenssl req \\\n          -new -key "root-ca.key" \\\n          -out "root-ca.csr" -sha256 \\\n          -subj \'/c=cn/st=shanxi/l=datong/o=your company name/cn=your company name docker registry ca\'\n\n\n> ä»¥ä¸å½ä»¤ä¸­ -subj åæ°éç /c è¡¨ç¤ºå½å®¶ï¼å¦ cnï¼/st è¡¨ç¤ºçï¼/l è¡¨ç¤ºåå¸æèå°åºï¼/o è¡¨ç¤ºç»ç»åï¼/cn éç¨åç§°ã\n\nç¬¬ä¸æ­¥éç½® ca æ ¹è¯ä¹¦ï¼æ°å»º root-ca.cnfã\n\n[root_ca]\nbasicconstraints = critical,ca:true,pathlen:1\nkeyusage = critical, nonrepudiation, crlsign, keycertsign\nsubjectkeyidentifier=hash\n\n\nç¬¬åæ­¥ç­¾åæ ¹è¯ä¹¦ã\n\nopenssl x509 -req  -days 3650  -in "root-ca.csr" \\\n               -signkey "root-ca.key" -sha256 -out "root-ca.crt" \\\n               -extfile "root-ca.cnf" -extensions \\\n               root_ca\n\n\nç¬¬äºæ­¥çæç«ç¹ ssl ç§é¥ã\n\nopenssl genrsa -out "docker.domain.com.key" 4096\n\n\nç¬¬å­æ­¥ä½¿ç¨ç§é¥çæè¯ä¹¦è¯·æ±æä»¶ã\n\nopenssl req -new -key "docker.domain.com.key" -out "site.csr" -sha256 \\\n          -subj \'/c=cn/st=shanxi/l=datong/o=your company name/cn=docker.domain.com\'\n\n\nç¬¬ä¸æ­¥éç½®è¯ä¹¦ï¼æ°å»º site.cnf æä»¶ã\n\n[server]\nauthoritykeyidentifier=keyid,issuer\nbasicconstraints = critical,ca:false\nextendedkeyusage=serverauth\nkeyusage = critical, digitalsignature, keyencipherment\nsubjectaltname = dns:docker.domain.com, ip:127.0.0.1\nsubjectkeyidentifier=hash\n\n\nç¬¬å«æ­¥ç­¾ç½²ç«ç¹ ssl è¯ä¹¦ã\n\nopenssl x509 -req -days 750 -in "site.csr" -sha256 \\\n    -ca "root-ca.crt" -cakey "root-ca.key"  -cacreateserial \\\n    -out "docker.domain.com.crt" -extfile "site.cnf" -extensions server\n\n\nè¿æ ·å·²ç»æ¥æäº docker.domain.com çç½ç« ssl ç§é¥ docker.domain.com.key å ssl è¯ä¹¦ docker.domain.com.crtã\n\næ°å»º ssl æä»¶å¤¹å¹¶å° docker.domain.com.key docker.domain.com.crt è¿ä¸¤ä¸ªæä»¶ç§»å¥ï¼å é¤å¶ä»æä»¶ã\n\n\n# éç½®ç§æä»åº\n\nç§æä»åºé»è®¤çéç½®æä»¶ä½äº /etc/docker/registry/config.ymlï¼æä»¬åå¨æ¬å°ç¼è¾ config.ymlï¼ä¹åæè½½å°å®¹å¨ä¸­ã\n\nversion: 0.1\nlog:\n  accesslog:\n    disabled: true\n  level: debug\n  formatter: text\n  fields:\n    service: registry\n    environment: staging\nstorage:\n  delete:\n    enabled: true\n  cache:\n    blobdescriptor: inmemory\n  filesystem:\n    rootdirectory: /var/lib/registry\nauth:\n  htpasswd:\n    realm: basic-realm\n    path: /etc/docker/registry/auth/nginx.htpasswd\nhttp:\n  addr: :443\n  host: https://docker.domain.com\n  headers:\n    x-content-type-options: [nosniff]\n  http2:\n    disabled: false\n  tls:\n    certificate: /etc/docker/registry/ssl/docker.domain.com.crt\n    key: /etc/docker/registry/ssl/docker.domain.com.key\nhealth:\n  storagedriver:\n    enabled: true\n    interval: 10s\nthreshold: 3\n\n\n\n# çæ http è®¤è¯æä»¶\n\nmkdir auth\n\ndocker run --rm \\\n    --entrypoint htpasswd \\\n    registry \\\n    -bbn username password > auth/nginx.htpasswd\n\n\n> å°ä¸é¢ç username password æ¿æ¢ä¸ºä½ èªå·±çç¨æ·ååå¯ç ã\n\n\n# ç¼è¾ docker-compose.yml\n\nversion: \'3\'\n\nservices:\n  registry:\n    image: registry\n    ports:\n      - "443:443"\n    volumes:\n      - ./:/etc/docker/registry\n      - registry-data:/var/lib/registry\n\nvolumes:\n  registry-data:\n\n\n\n# ä¿®æ¹ hosts\n\nç¼è¾ /etc/hosts\n\ndocker.domain.com 127.0.0.1\n\n\n\n# å¯å¨\n\ndocker-compose up -d\n\n\nè¿æ ·æä»¬å°±æ­å»ºå¥½äºä¸ä¸ªå·ææéè®¤è¯ãtls çç§æä»åºï¼æ¥ä¸æ¥æä»¬æµè¯å¶åè½æ¯å¦æ­£å¸¸ã\n\n\n# æµè¯ç§æä»åºåè½\n\nç»å½å°ç§æä»åºã\n\ndocker login docker.domain.com\n\n\nå°è¯æ¨éãæåéåã\n\ndocker pull ubuntu:17.10\n\ndocker tag ubuntu:17.10 docker.domain.com/username/ubuntu:17.10\n\ndocker push docker.domain.com/username/ubuntu:17.10\n\ndocker image rm docker.domain.com/username/ubuntu:17.10\n\ndocker pull docker.domain.com/username/ubuntu:17.10\n\n\nå¦ææä»¬éåºç»å½ï¼å°è¯æ¨ééåã\n\ndocker logout docker.domain.com\n\ndocker push docker.domain.com/username/ubuntu:17.10\n\nno basic auth credentials\n\n\nåç°ä¼æç¤ºæ²¡æç»å½ï¼ä¸è½å°éåæ¨éå°ç§æä»åºä¸­ã\n\n\n# æ³¨æäºé¡¹\n\nå¦æä½ æ¬æºå ç¨äº 443 ç«¯å£ï¼ä½ å¯ä»¥éç½® nginx ä»£çï¼è¿éä¸åèµè¿°ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker æ°æ®ç®¡ç",frontmatter:{title:"Docker æ°æ®ç®¡ç",date:"2022-02-09T09:20:42.000Z",permalink:"/pages/bcfae7/"},regularPath:"/17.Docker/07.Docker%20%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/01.Docker%20%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86.html",relativePath:"17.Docker/07.Docker æ°æ®ç®¡ç/01.Docker æ°æ®ç®¡ç.md",key:"v-9766780a",path:"/pages/bcfae7/",headersStr:null,content:"# Docker æ°æ®ç®¡ç\n\nè¿ä¸ç« ä»ç»å¦ä½å¨ Docker åé¨ä»¥åå®¹å¨ä¹é´ç®¡çæ°æ®ï¼å¨å®¹å¨ä¸­ç®¡çæ°æ®ä¸»è¦æä¸¤ç§æ¹å¼ï¼\n\n * æ°æ®å·ï¼Volumesï¼\n * æè½½ä¸»æºç®å½ (Bind mounts)",normalizedContent:"# docker æ°æ®ç®¡ç\n\nè¿ä¸ç« ä»ç»å¦ä½å¨ docker åé¨ä»¥åå®¹å¨ä¹é´ç®¡çæ°æ®ï¼å¨å®¹å¨ä¸­ç®¡çæ°æ®ä¸»è¦æä¸¤ç§æ¹å¼ï¼\n\n * æ°æ®å·ï¼volumesï¼\n * æè½½ä¸»æºç®å½ (bind mounts)",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker æ°æ®å·",frontmatter:{title:"Docker æ°æ®å·",date:"2022-02-09T09:20:42.000Z",permalink:"/pages/5f0882/"},regularPath:"/17.Docker/07.Docker%20%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/02.Docker%20%E6%95%B0%E6%8D%AE%E5%8D%B7.html",relativePath:"17.Docker/07.Docker æ°æ®ç®¡ç/02.Docker æ°æ®å·.md",key:"v-59a33950",path:"/pages/5f0882/",headers:[{level:2,title:"éæ© -v è¿æ¯ -âmount åæ°",slug:"éæ©-v-è¿æ¯-mount-åæ°",normalizedTitle:"éæ© -v è¿æ¯ -âmount åæ°",charIndex:223},{level:2,title:"åå»ºä¸ä¸ªæ°æ®å·",slug:"åå»ºä¸ä¸ªæ°æ®å·",normalizedTitle:"åå»ºä¸ä¸ªæ°æ®å·",charIndex:333},{level:2,title:"å¯å¨ä¸ä¸ªæè½½æ°æ®å·çå®¹å¨",slug:"å¯å¨ä¸ä¸ªæè½½æ°æ®å·çå®¹å¨",normalizedTitle:"å¯å¨ä¸ä¸ªæè½½æ°æ®å·çå®¹å¨",charIndex:691},{level:2,title:"æ¥çæ°æ®å·çå·ä½ä¿¡æ¯",slug:"æ¥çæ°æ®å·çå·ä½ä¿¡æ¯",normalizedTitle:"æ¥çæ°æ®å·çå·ä½ä¿¡æ¯",charIndex:976},{level:2,title:"å é¤æ°æ®å·",slug:"å é¤æ°æ®å·",normalizedTitle:"å é¤æ°æ®å·",charIndex:1326}],headersStr:"éæ© -v è¿æ¯ -âmount åæ° åå»ºä¸ä¸ªæ°æ®å· å¯å¨ä¸ä¸ªæè½½æ°æ®å·çå®¹å¨ æ¥çæ°æ®å·çå·ä½ä¿¡æ¯ å é¤æ°æ®å·",content:'# Docker æ°æ®å·\n\næ°æ®å· æ¯ä¸ä¸ªå¯ä¾ä¸ä¸ªæå¤ä¸ªå®¹å¨ä½¿ç¨çç¹æ®ç®å½ï¼å®ç»è¿ UFSï¼å¯ä»¥æä¾å¾å¤æç¨çç¹æ§ï¼\n\n * æ°æ®å· å¯ä»¥å¨å®¹å¨ä¹é´å±äº«åéç¨\n * å¯¹ æ°æ®å· çä¿®æ¹ä¼ç«é©¬çæ\n * å¯¹ æ°æ®å· çæ´æ°ï¼ä¸ä¼å½±åéå\n * æ°æ®å· é»è®¤ä¼ä¸ç´å­å¨ï¼å³ä½¿å®¹å¨è¢«å é¤\n\n> æ³¨æï¼æ°æ®å· çä½¿ç¨ï¼ç±»ä¼¼äº Linux ä¸å¯¹ç®å½ææä»¶è¿è¡ mountï¼éåä¸­çè¢«æå®ä¸ºæè½½ç¹çç®å½ä¸­çæä»¶ä¼éèæï¼è½æ¾ç¤ºççæ¯æè½½ç æ°æ®å·ã\n\n\n# éæ© -v è¿æ¯ -âmount åæ°\n\nDocker æ°ç¨æ·åºè¯¥éæ© --mount åæ°ï¼ç»éªä¸°å¯ç Docker ä½¿ç¨èå¯¹ -v æè --volume å·²ç»å¾çæäºï¼ä½æ¯æ¨èä½¿ç¨ --mount åæ°ã\n\n\n# åå»ºä¸ä¸ªæ°æ®å·\n\ndocker volume create my-vol\n\n\næ¥çææç æ°æ®å·\n\ndocker volume ls\n\nlocal               my-vol\n\n\nå¨ä¸»æºéä½¿ç¨ä»¥ä¸å½ä»¤å¯ä»¥æ¥çæå® æ°æ®å· çä¿¡æ¯\n\ndocker volume inspect my-vol\n[\n    {\n        "Driver": "local",\n        "Labels": {},\n        "Mountpoint": "/var/lib/docker/volumes/my-vol/_data",\n        "Name": "my-vol",\n        "Options": {},\n        "Scope": "local"\n    }\n]\n\n\n\n# å¯å¨ä¸ä¸ªæè½½æ°æ®å·çå®¹å¨\n\nå¨ç¨ docker run å½ä»¤çæ¶åï¼ä½¿ç¨ --mount æ è®°æ¥å° æ°æ®å· æè½½å°å®¹å¨éãå¨ä¸æ¬¡ docker run ä¸­å¯ä»¥æè½½å¤ä¸ª æ°æ®å·ã\n\nä¸é¢åå»ºä¸ä¸ªåä¸º web çå®¹å¨ï¼å¹¶å è½½ä¸ä¸ª æ°æ®å· å°å®¹å¨ç /webapp ç®å½ã\n\ndocker run -d -P \\\n    --name web \\\n    # -v my-vol:/wepapp \\\n    --mount source=my-vol,target=/webapp \\\n    training/webapp \\\n    python app.py\n\n\n\n# æ¥çæ°æ®å·çå·ä½ä¿¡æ¯\n\nå¨ä¸»æºéä½¿ç¨ä»¥ä¸å½ä»¤å¯ä»¥æ¥ç web å®¹å¨çä¿¡æ¯\n\ndocker inspect web\n\n\næ°æ®å· ä¿¡æ¯å¨ "Mounts" Key ä¸é¢\n\n"Mounts": [\n    {\n        "Type": "volume",\n        "Name": "my-vol",\n        "Source": "/var/lib/docker/volumes/my-vol/_data",\n        "Destination": "/app",\n        "Driver": "local",\n        "Mode": "",\n        "RW": true,\n        "Propagation": ""\n    }\n],\n\n\n\n# å é¤æ°æ®å·\n\ndocker volume rm my-vol\n\n\næ°æ®å· æ¯è¢«è®¾è®¡ç¨æ¥æä¹åæ°æ®çï¼å®ççå½å¨æç¬ç«äºå®¹å¨ï¼Docker ä¸ä¼å¨å®¹å¨è¢«å é¤åèªå¨å é¤ æ°æ®å·ï¼å¹¶ä¸ä¹ä¸å­å¨åå¾åæ¶è¿æ ·çæºå¶æ¥å¤çæ²¡æä»»ä½å®¹å¨å¼ç¨ç æ°æ®å·ãå¦æéè¦å¨å é¤å®¹å¨çåæ¶ç§»é¤æ°æ®å·ãå¯ä»¥å¨å é¤å®¹å¨çæ¶åä½¿ç¨ docker rm -v è¿ä¸ªå½ä»¤ã\n\næ ä¸»çæ°æ®å·å¯è½ä¼å æ®å¾å¤ç©ºé´ï¼è¦æ¸çè¯·ä½¿ç¨ä»¥ä¸å½ä»¤\n\ndocker volume prune\n',normalizedContent:'# docker æ°æ®å·\n\næ°æ®å· æ¯ä¸ä¸ªå¯ä¾ä¸ä¸ªæå¤ä¸ªå®¹å¨ä½¿ç¨çç¹æ®ç®å½ï¼å®ç»è¿ ufsï¼å¯ä»¥æä¾å¾å¤æç¨çç¹æ§ï¼\n\n * æ°æ®å· å¯ä»¥å¨å®¹å¨ä¹é´å±äº«åéç¨\n * å¯¹ æ°æ®å· çä¿®æ¹ä¼ç«é©¬çæ\n * å¯¹ æ°æ®å· çæ´æ°ï¼ä¸ä¼å½±åéå\n * æ°æ®å· é»è®¤ä¼ä¸ç´å­å¨ï¼å³ä½¿å®¹å¨è¢«å é¤\n\n> æ³¨æï¼æ°æ®å· çä½¿ç¨ï¼ç±»ä¼¼äº linux ä¸å¯¹ç®å½ææä»¶è¿è¡ mountï¼éåä¸­çè¢«æå®ä¸ºæè½½ç¹çç®å½ä¸­çæä»¶ä¼éèæï¼è½æ¾ç¤ºççæ¯æè½½ç æ°æ®å·ã\n\n\n# éæ© -v è¿æ¯ -âmount åæ°\n\ndocker æ°ç¨æ·åºè¯¥éæ© --mount åæ°ï¼ç»éªä¸°å¯ç docker ä½¿ç¨èå¯¹ -v æè --volume å·²ç»å¾çæäºï¼ä½æ¯æ¨èä½¿ç¨ --mount åæ°ã\n\n\n# åå»ºä¸ä¸ªæ°æ®å·\n\ndocker volume create my-vol\n\n\næ¥çææç æ°æ®å·\n\ndocker volume ls\n\nlocal               my-vol\n\n\nå¨ä¸»æºéä½¿ç¨ä»¥ä¸å½ä»¤å¯ä»¥æ¥çæå® æ°æ®å· çä¿¡æ¯\n\ndocker volume inspect my-vol\n[\n    {\n        "driver": "local",\n        "labels": {},\n        "mountpoint": "/var/lib/docker/volumes/my-vol/_data",\n        "name": "my-vol",\n        "options": {},\n        "scope": "local"\n    }\n]\n\n\n\n# å¯å¨ä¸ä¸ªæè½½æ°æ®å·çå®¹å¨\n\nå¨ç¨ docker run å½ä»¤çæ¶åï¼ä½¿ç¨ --mount æ è®°æ¥å° æ°æ®å· æè½½å°å®¹å¨éãå¨ä¸æ¬¡ docker run ä¸­å¯ä»¥æè½½å¤ä¸ª æ°æ®å·ã\n\nä¸é¢åå»ºä¸ä¸ªåä¸º web çå®¹å¨ï¼å¹¶å è½½ä¸ä¸ª æ°æ®å· å°å®¹å¨ç /webapp ç®å½ã\n\ndocker run -d -p \\\n    --name web \\\n    # -v my-vol:/wepapp \\\n    --mount source=my-vol,target=/webapp \\\n    training/webapp \\\n    python app.py\n\n\n\n# æ¥çæ°æ®å·çå·ä½ä¿¡æ¯\n\nå¨ä¸»æºéä½¿ç¨ä»¥ä¸å½ä»¤å¯ä»¥æ¥ç web å®¹å¨çä¿¡æ¯\n\ndocker inspect web\n\n\næ°æ®å· ä¿¡æ¯å¨ "mounts" key ä¸é¢\n\n"mounts": [\n    {\n        "type": "volume",\n        "name": "my-vol",\n        "source": "/var/lib/docker/volumes/my-vol/_data",\n        "destination": "/app",\n        "driver": "local",\n        "mode": "",\n        "rw": true,\n        "propagation": ""\n    }\n],\n\n\n\n# å é¤æ°æ®å·\n\ndocker volume rm my-vol\n\n\næ°æ®å· æ¯è¢«è®¾è®¡ç¨æ¥æä¹åæ°æ®çï¼å®ççå½å¨æç¬ç«äºå®¹å¨ï¼docker ä¸ä¼å¨å®¹å¨è¢«å é¤åèªå¨å é¤ æ°æ®å·ï¼å¹¶ä¸ä¹ä¸å­å¨åå¾åæ¶è¿æ ·çæºå¶æ¥å¤çæ²¡æä»»ä½å®¹å¨å¼ç¨ç æ°æ®å·ãå¦æéè¦å¨å é¤å®¹å¨çåæ¶ç§»é¤æ°æ®å·ãå¯ä»¥å¨å é¤å®¹å¨çæ¶åä½¿ç¨ docker rm -v è¿ä¸ªå½ä»¤ã\n\næ ä¸»çæ°æ®å·å¯è½ä¼å æ®å¾å¤ç©ºé´ï¼è¦æ¸çè¯·ä½¿ç¨ä»¥ä¸å½ä»¤\n\ndocker volume prune\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"çå¬ä¸»æºç®å½",frontmatter:{title:"çå¬ä¸»æºç®å½",date:"2022-02-09T09:20:42.000Z",permalink:"/pages/565ee4/"},regularPath:"/17.Docker/07.Docker%20%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/03.%E7%9B%91%E5%90%AC%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95.html",relativePath:"17.Docker/07.Docker æ°æ®ç®¡ç/03.çå¬ä¸»æºç®å½.md",key:"v-87ec7d3a",path:"/pages/565ee4/",headers:[{level:2,title:"-v è¿æ¯ -âmount åæ°",slug:"v-è¿æ¯-mount-åæ°",normalizedTitle:"-v è¿æ¯ -âmount åæ°",charIndex:13},{level:3,title:"æè½½ä¸ä¸ªä¸»æºç®å½ä½ä¸ºæ°æ®å·",slug:"æè½½ä¸ä¸ªä¸»æºç®å½ä½ä¸ºæ°æ®å·",normalizedTitle:"æè½½ä¸ä¸ªä¸»æºç®å½ä½ä¸ºæ°æ®å·",charIndex:120},{level:3,title:"æ¥çæ°æ®å·çå·ä½ä¿¡æ¯",slug:"æ¥çæ°æ®å·çå·ä½ä¿¡æ¯",normalizedTitle:"æ¥çæ°æ®å·çå·ä½ä¿¡æ¯",charIndex:903},{level:3,title:"æè½½ä¸ä¸ªæ¬å°ä¸»æºæä»¶ä½ä¸ºæ°æ®å·",slug:"æè½½ä¸ä¸ªæ¬å°ä¸»æºæä»¶ä½ä¸ºæ°æ®å·",normalizedTitle:"æè½½ä¸ä¸ªæ¬å°ä¸»æºæä»¶ä½ä¸ºæ°æ®å·",charIndex:1194}],headersStr:"-v è¿æ¯ -âmount åæ° æè½½ä¸ä¸ªä¸»æºç®å½ä½ä¸ºæ°æ®å· æ¥çæ°æ®å·çå·ä½ä¿¡æ¯ æè½½ä¸ä¸ªæ¬å°ä¸»æºæä»¶ä½ä¸ºæ°æ®å·",content:'# çå¬ä¸»æºç®å½\n\n\n# -v è¿æ¯ -âmount åæ°\n\nDocker æ°ç¨æ·åºè¯¥éæ© --mount åæ°ï¼ç»éªä¸°å¯ç Docker ä½¿ç¨èå¯¹ -v æè --volume å·²ç»å¾çæäºï¼ä½æ¯æ¨èä½¿ç¨ --mount åæ°ã\n\n\n# æè½½ä¸ä¸ªä¸»æºç®å½ä½ä¸ºæ°æ®å·\n\nä½¿ç¨ --mount æ è®°å¯ä»¥æå®æè½½ä¸ä¸ªæ¬å°ä¸»æºçç®å½å°å®¹å¨ä¸­å»ã\n\ndocker run -d -P \\\n    --name web \\\n    # -v /src/webapp:/opt/webapp \\\n    --mount type=bind,source=/src/webapp,target=/opt/webapp \\\n    training/webapp \\\n    python app.py\n\n\nä¸é¢çå½ä»¤å è½½ä¸»æºç /src/webapp ç®å½å°å®¹å¨ç /opt/webappç®å½ãè¿ä¸ªåè½å¨è¿è¡æµè¯çæ¶åååæ¹ä¾¿ï¼æ¯å¦ç¨æ·å¯ä»¥æ¾ç½®ä¸äºç¨åºå°æ¬å°ç®å½ä¸­ï¼æ¥æ¥çå®¹å¨æ¯å¦æ­£å¸¸å·¥ä½ãæ¬å°ç®å½çè·¯å¾å¿é¡»æ¯ç»å¯¹è·¯å¾ï¼ä»¥åä½¿ç¨ -v åæ°æ¶å¦ææ¬å°ç®å½ä¸å­å¨ Docker ä¼èªå¨ä¸ºä½ åå»ºä¸ä¸ªæä»¶å¤¹ï¼ç°å¨ä½¿ç¨ --mount åæ°æ¶å¦ææ¬å°ç®å½ä¸å­å¨ï¼Docker ä¼æ¥éã\n\nDocker æè½½ä¸»æºç®å½çé»è®¤æéæ¯ è¯»åï¼ç¨æ·ä¹å¯ä»¥éè¿å¢å  readonly æå®ä¸º åªè¯»ã\n\ndocker run -d -P \\\n    --name web \\\n    # -v /src/webapp:/opt/webapp:ro \\\n    --mount type=bind,source=/src/webapp,target=/opt/webapp,readonly \\\n    training/webapp \\\n    python app.py\n\n\nå äº readonly ä¹åï¼å°±æè½½ä¸º åªè¯» äºãå¦æä½ å¨å®¹å¨å /opt/webapp ç®å½æ°å»ºæä»¶ï¼ä¼æ¾ç¤ºå¦ä¸éè¯¯\n\n/opt/webapp # touch new.txt\ntouch: new.txt: Read-only file system\n\n\n\n# æ¥çæ°æ®å·çå·ä½ä¿¡æ¯\n\nå¨ä¸»æºéä½¿ç¨ä»¥ä¸å½ä»¤å¯ä»¥æ¥ç web å®¹å¨çä¿¡æ¯\n\ndocker inspect web\n\n\næè½½ä¸»æºç®å½ çéç½®ä¿¡æ¯å¨ "Mounts" Key ä¸é¢\n\n"Mounts": [\n    {\n        "Type": "bind",\n        "Source": "/src/webapp",\n        "Destination": "/opt/webapp",\n        "Mode": "",\n        "RW": true,\n        "Propagation": "rprivate"\n    }\n],\n\n\n\n# æè½½ä¸ä¸ªæ¬å°ä¸»æºæä»¶ä½ä¸ºæ°æ®å·\n\n--mount æ è®°ä¹å¯ä»¥ä»ä¸»æºæè½½åä¸ªæä»¶å°å®¹å¨ä¸­\n\ndocker run --rm -it \\\n   # -v $HOME/.bash_history:/root/.bash_history \\\n   --mount type=bind,source=$HOME/.bash_history,target=/root/.bash_history \\\n   ubuntu:17.10 \\\n   bash\n\nroot@2affd44b4667:/# history\n1  ls\n2  diskutil list   \n\n\nè¿æ ·å°±å¯ä»¥è®°å½å¨å®¹å¨è¾å¥è¿çå½ä»¤äºã',normalizedContent:'# çå¬ä¸»æºç®å½\n\n\n# -v è¿æ¯ -âmount åæ°\n\ndocker æ°ç¨æ·åºè¯¥éæ© --mount åæ°ï¼ç»éªä¸°å¯ç docker ä½¿ç¨èå¯¹ -v æè --volume å·²ç»å¾çæäºï¼ä½æ¯æ¨èä½¿ç¨ --mount åæ°ã\n\n\n# æè½½ä¸ä¸ªä¸»æºç®å½ä½ä¸ºæ°æ®å·\n\nä½¿ç¨ --mount æ è®°å¯ä»¥æå®æè½½ä¸ä¸ªæ¬å°ä¸»æºçç®å½å°å®¹å¨ä¸­å»ã\n\ndocker run -d -p \\\n    --name web \\\n    # -v /src/webapp:/opt/webapp \\\n    --mount type=bind,source=/src/webapp,target=/opt/webapp \\\n    training/webapp \\\n    python app.py\n\n\nä¸é¢çå½ä»¤å è½½ä¸»æºç /src/webapp ç®å½å°å®¹å¨ç /opt/webappç®å½ãè¿ä¸ªåè½å¨è¿è¡æµè¯çæ¶åååæ¹ä¾¿ï¼æ¯å¦ç¨æ·å¯ä»¥æ¾ç½®ä¸äºç¨åºå°æ¬å°ç®å½ä¸­ï¼æ¥æ¥çå®¹å¨æ¯å¦æ­£å¸¸å·¥ä½ãæ¬å°ç®å½çè·¯å¾å¿é¡»æ¯ç»å¯¹è·¯å¾ï¼ä»¥åä½¿ç¨ -v åæ°æ¶å¦ææ¬å°ç®å½ä¸å­å¨ docker ä¼èªå¨ä¸ºä½ åå»ºä¸ä¸ªæä»¶å¤¹ï¼ç°å¨ä½¿ç¨ --mount åæ°æ¶å¦ææ¬å°ç®å½ä¸å­å¨ï¼docker ä¼æ¥éã\n\ndocker æè½½ä¸»æºç®å½çé»è®¤æéæ¯ è¯»åï¼ç¨æ·ä¹å¯ä»¥éè¿å¢å  readonly æå®ä¸º åªè¯»ã\n\ndocker run -d -p \\\n    --name web \\\n    # -v /src/webapp:/opt/webapp:ro \\\n    --mount type=bind,source=/src/webapp,target=/opt/webapp,readonly \\\n    training/webapp \\\n    python app.py\n\n\nå äº readonly ä¹åï¼å°±æè½½ä¸º åªè¯» äºãå¦æä½ å¨å®¹å¨å /opt/webapp ç®å½æ°å»ºæä»¶ï¼ä¼æ¾ç¤ºå¦ä¸éè¯¯\n\n/opt/webapp # touch new.txt\ntouch: new.txt: read-only file system\n\n\n\n# æ¥çæ°æ®å·çå·ä½ä¿¡æ¯\n\nå¨ä¸»æºéä½¿ç¨ä»¥ä¸å½ä»¤å¯ä»¥æ¥ç web å®¹å¨çä¿¡æ¯\n\ndocker inspect web\n\n\næè½½ä¸»æºç®å½ çéç½®ä¿¡æ¯å¨ "mounts" key ä¸é¢\n\n"mounts": [\n    {\n        "type": "bind",\n        "source": "/src/webapp",\n        "destination": "/opt/webapp",\n        "mode": "",\n        "rw": true,\n        "propagation": "rprivate"\n    }\n],\n\n\n\n# æè½½ä¸ä¸ªæ¬å°ä¸»æºæä»¶ä½ä¸ºæ°æ®å·\n\n--mount æ è®°ä¹å¯ä»¥ä»ä¸»æºæè½½åä¸ªæä»¶å°å®¹å¨ä¸­\n\ndocker run --rm -it \\\n   # -v $home/.bash_history:/root/.bash_history \\\n   --mount type=bind,source=$home/.bash_history,target=/root/.bash_history \\\n   ubuntu:17.10 \\\n   bash\n\nroot@2affd44b4667:/# history\n1  ls\n2  diskutil list   \n\n\nè¿æ ·å°±å¯ä»¥è®°å½å¨å®¹å¨è¾å¥è¿çå½ä»¤äºã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"ä»ä¹æ¯ Docker Compose",frontmatter:{title:"ä»ä¹æ¯ Docker Compose",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/e17a65/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Docker%20Compose.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/01.ä»ä¹æ¯ Docker Compose.md",key:"v-046481ec",path:"/pages/e17a65/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:88}],headersStr:"æ¦è¿°",content:"# ä»ä¹æ¯ Docker Compose\n\nDocker Compose æ¯ Docker å®æ¹ç¼æï¼Orchestrationï¼é¡¹ç®ä¹ä¸ï¼è´è´£å¿«éçé¨ç½²åå¸å¼åºç¨ã\n\n\n# æ¦è¿°\n\nCompose é¡¹ç®æ¯ Docker å®æ¹çå¼æºé¡¹ç®ï¼è´è´£å®ç°å¯¹ Docker å®¹å¨éç¾¤çå¿«éç¼æãä»åè½ä¸çï¼è· OpenStack ä¸­ç Heat ååç±»ä¼¼ã\n\nå¶ä»£ç ç®åå¨ https://github.com/docker/compose ä¸å¼æºã\n\nCompose å®ä½æ¯ ãå®ä¹åè¿è¡å¤ä¸ª Docker å®¹å¨çåºç¨ï¼Defining and running multi-container Docker applicationsï¼ãï¼å¶åèº«æ¯å¼æºé¡¹ç® Figã\n\néè¿ç¬¬ä¸é¨åä¸­çä»ç»ï¼æä»¬ç¥éä½¿ç¨ä¸ä¸ª Dockerfile æ¨¡æ¿æä»¶ï¼å¯ä»¥è®©ç¨æ·å¾æ¹ä¾¿çå®ä¹ä¸ä¸ªåç¬çåºç¨å®¹å¨ãç¶èï¼å¨æ¥å¸¸å·¥ä½ä¸­ï¼ç»å¸¸ä¼ç¢°å°éè¦å¤ä¸ªå®¹å¨ç¸äºéåæ¥å®ææé¡¹ä»»å¡çæåµãä¾å¦è¦å®ç°ä¸ä¸ª Web é¡¹ç®ï¼é¤äº Web æå¡å®¹å¨æ¬èº«ï¼å¾å¾è¿éè¦åå ä¸åç«¯çæ°æ®åºæå¡å®¹å¨ï¼çè³è¿åæ¬è´è½½åè¡¡å®¹å¨ç­ã\n\nCompose æ°å¥½æ»¡è¶³äºè¿æ ·çéæ±ãå®åè®¸ç¨æ·éè¿ä¸ä¸ªåç¬ç docker-compose.yml æ¨¡æ¿æä»¶ï¼YAML æ ¼å¼ï¼æ¥å®ä¹ä¸ç»ç¸å³èçåºç¨å®¹å¨ä¸ºä¸ä¸ªé¡¹ç®ï¼projectï¼ã\n\nCompose ä¸­æä¸¤ä¸ªéè¦çæ¦å¿µï¼\n\n * æå¡ (service)ï¼ä¸ä¸ªåºç¨çå®¹å¨ï¼å®éä¸å¯ä»¥åæ¬è¥å¹²è¿è¡ç¸åéåçå®¹å¨å®ä¾ã\n * é¡¹ç® (project)ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååï¼å¨ docker-compose.yml æä»¶ä¸­å®ä¹ã\n\nCompose çé»è®¤ç®¡çå¯¹è±¡æ¯é¡¹ç®ï¼éè¿å­å½ä»¤å¯¹é¡¹ç®ä¸­çä¸ç»å®¹å¨è¿è¡ä¾¿æ·å°çå½å¨æç®¡çã\n\nCompose é¡¹ç®ç± Python ç¼åï¼å®ç°ä¸è°ç¨äº Docker æå¡æä¾ç API æ¥å¯¹å®¹å¨è¿è¡ç®¡çãå æ­¤ï¼åªè¦ææä½çå¹³å°æ¯æ Docker APIï¼å°±å¯ä»¥å¨å¶ä¸å©ç¨ Compose æ¥è¿è¡ç¼æç®¡çã",normalizedContent:"# ä»ä¹æ¯ docker compose\n\ndocker compose æ¯ docker å®æ¹ç¼æï¼orchestrationï¼é¡¹ç®ä¹ä¸ï¼è´è´£å¿«éçé¨ç½²åå¸å¼åºç¨ã\n\n\n# æ¦è¿°\n\ncompose é¡¹ç®æ¯ docker å®æ¹çå¼æºé¡¹ç®ï¼è´è´£å®ç°å¯¹ docker å®¹å¨éç¾¤çå¿«éç¼æãä»åè½ä¸çï¼è· openstack ä¸­ç heat ååç±»ä¼¼ã\n\nå¶ä»£ç ç®åå¨ https://github.com/docker/compose ä¸å¼æºã\n\ncompose å®ä½æ¯ ãå®ä¹åè¿è¡å¤ä¸ª docker å®¹å¨çåºç¨ï¼defining and running multi-container docker applicationsï¼ãï¼å¶åèº«æ¯å¼æºé¡¹ç® figã\n\néè¿ç¬¬ä¸é¨åä¸­çä»ç»ï¼æä»¬ç¥éä½¿ç¨ä¸ä¸ª dockerfile æ¨¡æ¿æä»¶ï¼å¯ä»¥è®©ç¨æ·å¾æ¹ä¾¿çå®ä¹ä¸ä¸ªåç¬çåºç¨å®¹å¨ãç¶èï¼å¨æ¥å¸¸å·¥ä½ä¸­ï¼ç»å¸¸ä¼ç¢°å°éè¦å¤ä¸ªå®¹å¨ç¸äºéåæ¥å®ææé¡¹ä»»å¡çæåµãä¾å¦è¦å®ç°ä¸ä¸ª web é¡¹ç®ï¼é¤äº web æå¡å®¹å¨æ¬èº«ï¼å¾å¾è¿éè¦åå ä¸åç«¯çæ°æ®åºæå¡å®¹å¨ï¼çè³è¿åæ¬è´è½½åè¡¡å®¹å¨ç­ã\n\ncompose æ°å¥½æ»¡è¶³äºè¿æ ·çéæ±ãå®åè®¸ç¨æ·éè¿ä¸ä¸ªåç¬ç docker-compose.yml æ¨¡æ¿æä»¶ï¼yaml æ ¼å¼ï¼æ¥å®ä¹ä¸ç»ç¸å³èçåºç¨å®¹å¨ä¸ºä¸ä¸ªé¡¹ç®ï¼projectï¼ã\n\ncompose ä¸­æä¸¤ä¸ªéè¦çæ¦å¿µï¼\n\n * æå¡ (service)ï¼ä¸ä¸ªåºç¨çå®¹å¨ï¼å®éä¸å¯ä»¥åæ¬è¥å¹²è¿è¡ç¸åéåçå®¹å¨å®ä¾ã\n * é¡¹ç® (project)ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååï¼å¨ docker-compose.yml æä»¶ä¸­å®ä¹ã\n\ncompose çé»è®¤ç®¡çå¯¹è±¡æ¯é¡¹ç®ï¼éè¿å­å½ä»¤å¯¹é¡¹ç®ä¸­çä¸ç»å®¹å¨è¿è¡ä¾¿æ·å°çå½å¨æç®¡çã\n\ncompose é¡¹ç®ç± python ç¼åï¼å®ç°ä¸è°ç¨äº docker æå¡æä¾ç api æ¥å¯¹å®¹å¨è¿è¡ç®¡çãå æ­¤ï¼åªè¦ææä½çå¹³å°æ¯æ docker apiï¼å°±å¯ä»¥å¨å¶ä¸å©ç¨ compose æ¥è¿è¡ç¼æç®¡çã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Compose å®è£ä¸å¸è½½",frontmatter:{title:"Docker Compose å®è£ä¸å¸è½½",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/f7fbae/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/02.Docker%20Compose%20%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/02.Docker Compose å®è£ä¸å¸è½½.md",key:"v-098439d0",path:"/pages/f7fbae/",headers:[{level:2,title:"äºè¿å¶å",slug:"äºè¿å¶å",normalizedTitle:"äºè¿å¶å",charIndex:371},{level:2,title:"PIP å®è£",slug:"pip-å®è£",normalizedTitle:"pip å®è£",charIndex:755},{level:2,title:"Bashå½ä»¤è¡¥å¨",slug:"bashå½ä»¤è¡¥å¨",normalizedTitle:"bashå½ä»¤è¡¥å¨",charIndex:1212},{level:2,title:"Zshå½ä»¤è¡¥å¨",slug:"zshå½ä»¤è¡¥å¨",normalizedTitle:"zshå½ä»¤è¡¥å¨",charIndex:1838},{level:3,title:"å·²å®è£ OH-MY-ZSH",slug:"å·²å®è£-oh-my-zsh",normalizedTitle:"å·²å®è£ oh-my-zsh",charIndex:1874},{level:3,title:"æªå®è£ OH-MY-ZSH",slug:"æªå®è£-oh-my-zsh",normalizedTitle:"æªå®è£ oh-my-zsh",charIndex:2287},{level:2,title:"å®¹å¨ä¸­æ§è¡",slug:"å®¹å¨ä¸­æ§è¡",normalizedTitle:"å®¹å¨ä¸­æ§è¡",charIndex:2761},{level:2,title:"å¸è½½",slug:"å¸è½½",normalizedTitle:"å¸è½½",charIndex:20}],headersStr:"äºè¿å¶å PIP å®è£ Bashå½ä»¤è¡¥å¨ Zshå½ä»¤è¡¥å¨ å·²å®è£ OH-MY-ZSH æªå®è£ OH-MY-ZSH å®¹å¨ä¸­æ§è¡ å¸è½½",content:'# Docker Compose å®è£ä¸å¸è½½\n\nCompose æ¯æ LinuxãmacOSãWindows 10 ä¸å¤§å¹³å°ã\n\nCompose å¯ä»¥éè¿ Python çåç®¡çå·¥å· pip è¿è¡å®è£ï¼ä¹å¯ä»¥ç´æ¥ä¸è½½ç¼è¯å¥½çäºè¿å¶æä»¶ä½¿ç¨ï¼çè³è½å¤ç´æ¥å¨ Docker å®¹å¨ä¸­è¿è¡ã\n\nåä¸¤ç§æ¹å¼æ¯ä¼ ç»æ¹å¼ï¼éåæ¬å°ç¯å¢ä¸å®è£ä½¿ç¨ï¼æåä¸ç§æ¹å¼åä¸ç ´åç³»ç»ç¯å¢ï¼æ´éåäºè®¡ç®åºæ¯ã\n\nDocker for Mac ãDocker for Windows èªå¸¦ docker-compose äºè¿å¶æä»¶ï¼å®è£ Docker ä¹åå¯ä»¥ç´æ¥ä½¿ç¨ã\n\ndocker-compose --version\ndocker-compose version 1.29.2, build 8d51620a\n\n\nLinux ç³»ç»è¯·ä½¿ç¨ä»¥ä¸ä»ç»çæ¹æ³å®è£ã\n\n\n# äºè¿å¶å\n\nå¨ Linux ä¸çä¹å®è£ååç®åï¼ä» å®æ¹ GitHub Release å¤ç´æ¥ä¸è½½ç¼è¯å¥½çäºè¿å¶æä»¶å³å¯ã\n\nä¾å¦ï¼å¨ Linux 64 ä½ç³»ç»ä¸ç´æ¥ä¸è½½å¯¹åºçäºè¿å¶åã\n\n1.è¿è¡ä»¥ä¸å½ä»¤ä»¥ä¸è½½Docker Composeçå½åç¨³å®çæ¬ï¼\n\nsudo curl -L https://github.com/docker/compose/releases/download/1.29.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n\n\næç¤º\n\nè¦å®è£å¶ä»çæ¬çComposeï¼è¯·æ¿æ¢1.29.2 ä¸ºè¦ä½¿ç¨çComposeçæ¬ã\n\n2.å°å¯æ§è¡æéåºç¨äºäºè¿å¶æä»¶ï¼\n\nchmod +x /usr/local/bin/docker-compose\n\n\n\n# PIP å®è£\n\næ³¨ï¼ x86_64 æ¶æç Linux å»ºè®®æç§ä¸è¾¹çæ¹æ³ä¸è½½äºè¿å¶åè¿è¡å®è£ï¼å¦ææ¨è®¡ç®æºçæ¶ææ¯ ARM(ä¾å¦ï¼æ èæ´¾)ï¼åä½¿ç¨ pip å®è£ã\n\nè¿ç§æ¹å¼æ¯å° Compose å½ä½ä¸ä¸ª Python åºç¨æ¥ä» pip æºä¸­å®è£ã\n\næ§è¡å®è£å½ä»¤ï¼\n\nsudo pip install -U docker-compose\n\n\nå¯ä»¥çå°ç±»ä¼¼å¦ä¸è¾åºï¼è¯´æå®è£æåã\n\nCollecting docker-compose\n  Downloading docker-compose-1.29.2.tar.gz (149kB): 149kB downloaded\n...\nSuccessfully installed docker-compose cached-property requests texttable websocket-client docker-py dockerpty six enum34 backports.ssl-match-hostname ipaddress\n\n\n\n# Bashå½ä»¤è¡¥å¨\n\n1.å®è£bash-completion ubuntuè¯·è·³è¿æ­¤æ­¥éª¤\n\nyum install bash-completion -y\n\n\n2.è®¾å®docker-composeçè¡¥å¨æä»¶\n\ncurl -L https://raw.githubusercontent.com/docker/compose/1.29.2/contrib/completion/bash/docker-compose > /etc/bash_completion.d/docker-compose\n\n\næç¤º\n\nå¦æç½ç»ç¶æä¸å¥½ï¼æ æ³ç´æ¥ä¸è½½ï¼å¯ä»¥éè¿æµè§å¨è·å¾ï¼ç¶åä½¿ç¨viçææ­¤æä»¶ä¹å¯ä»¥ã\n\n3.æ´æ°éç½®\n\nsource /usr/share/bash-completion/bash_completion\n\n\n3.ç»æç¡®è®¤\n\nroot@localhost:~# docker-compose \nbuild    events   kill     ps       rm       stop     version  \nconfig   exec     logs     pull     run      top      \ncreate   help     pause    push     scale    unpause  \ndown     images   port     restart  start    up   \n\n\n\n# Zshå½ä»¤è¡¥å¨\n\nç¡®ä¿å·²å®è£ oh-my-zsh å¨è®¡ç®æºä¸ã\n\n\n# å·²å®è£ OH-MY-ZSH\n\nç¼è¾~/.zshrcæä»¶ï¼å¨æä»¶åè¡¨ä¸­æ·»å dockerådocker-composeãå¨ä»¥ä¸ç¤ºä¾ä¸­ï¼...ä»£è¡¨æ¨å¯è½å·²å®è£çå¶ä»Zshæä»¶ã\n\n\n\n\n\n\n\n\nÂ \n\n\n\n...\n# Which plugins would you like to load?\n# Standard plugins can be found in $ZSH/plugins/\n# Custom plugins may be added to $ZSH_CUSTOM/plugins/\n# Example format: plugins=(rails git textmate ruby lighthouse)\n# Add wisely, as too many plugins slow down shell startup.\nplugins=(... docker docker-compose)\n...\n\n\n\n# æªå®è£ OH-MY-ZSH\n\n 1. å°å®æèæ¬æ¾å¥æ¨ç/path/to/zsh/completionï¼éå¸¸ä¸º~/.zsh/completion/ï¼ä¸­ï¼\n    \n    mkdir -p ~/.zsh/completion\n    curl -L https://raw.githubusercontent.com/docker/compose/1.29.2/contrib/completion/zsh/_docker-compose > ~/.zsh/completion/_docker-compose\n    \n\n 2. ç¼è¾~/.zshrcæä»¶ï¼æ·»å ä»¥ä¸åå®¹:\n    \n    fpath=(~/.zsh/completion $fpath)\n    \n\n 3. ç¡®ä¿compinitå·²å è½½æéè¿æ·»å æ¥å®æ~/.zshrcï¼\n    \n    autoload -Uz compinit && compinit -i\n    \n\n 4. ç¶åéæ°å è½½æ¨çshellï¼\n    \n    exec $SHELL -l\n    \n\n\n# å®¹å¨ä¸­æ§è¡\n\nCompose æ¢ç¶æ¯ä¸ä¸ª Python åºç¨ï¼èªç¶ä¹å¯ä»¥ç´æ¥ç¨å®¹å¨æ¥æ§è¡å®ã\n\ncurl -L https://github.com/docker/compose/releases/download/1.29.2/run.sh > /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\n\n\nå®éä¸ï¼æ¥çä¸è½½ç run.sh èæ¬åå®¹ï¼å¦ä¸\n\n#!/bin/sh\n#\n# Run docker-compose in a container\n#\n# This script will attempt to mirror the host paths by using volumes for the\n# following paths:\n#   * $(pwd)\n#   * $(dirname $COMPOSE_FILE) if it\'s set\n#   * $HOME if it\'s set\n#\n# You can add additional volumes (or any docker run options) using\n# the $COMPOSE_OPTIONS environment variable.\n#\n\n\nset -e\n\nVERSION="1.29.2"\nIMAGE="docker/compose:$VERSION"\n\n\n# Setup options for connecting to docker host\nif [ -z "$DOCKER_HOST" ]; then\n    DOCKER_HOST="/var/run/docker.sock"\nfi\nif [ -S "$DOCKER_HOST" ]; then\n    DOCKER_ADDR="-v $DOCKER_HOST:$DOCKER_HOST -e DOCKER_HOST"\nelse\n    DOCKER_ADDR="-e DOCKER_HOST -e DOCKER_TLS_VERIFY -e DOCKER_CERT_PATH"\nfi\n\n\n# Setup volume mounts for compose config and context\nif [ "$(pwd)" != \'/\' ]; then\n    VOLUMES="-v $(pwd):$(pwd)"\nfi\nif [ -n "$COMPOSE_FILE" ]; then\n    COMPOSE_OPTIONS="$COMPOSE_OPTIONS -e COMPOSE_FILE=$COMPOSE_FILE"\n    compose_dir=$(realpath "$(dirname "$COMPOSE_FILE")")\nfi\n# TODO: also check --file argument\nif [ -n "$compose_dir" ]; then\n    VOLUMES="$VOLUMES -v $compose_dir:$compose_dir"\nfi\nif [ -n "$HOME" ]; then\n    VOLUMES="$VOLUMES -v $HOME:$HOME -e HOME" # Pass in HOME to share docker.config and allow ~/-relative paths to work.\nfi\n\n# Only allocate tty if we detect one\nif [ -t 0 ] && [ -t 1 ]; then\n    DOCKER_RUN_OPTIONS="$DOCKER_RUN_OPTIONS -t"\nfi\n\n# Always set -i to support piped and terminal input in run/exec\nDOCKER_RUN_OPTIONS="$DOCKER_RUN_OPTIONS -i"\n\n\n# Handle userns security\nif docker info --format \'{{json .SecurityOptions}}\' 2>/dev/null | grep -q \'name=userns\'; then\n    DOCKER_RUN_OPTIONS="$DOCKER_RUN_OPTIONS --userns=host"\nfi\n\n# shellcheck disable=SC2086\nexec docker run --rm $DOCKER_RUN_OPTIONS $DOCKER_ADDR $COMPOSE_OPTIONS $VOLUMES -w "$(pwd)" $IMAGE "$@"\n\n\nå¯ä»¥çå°ï¼å®å¶å®æ¯ä¸è½½äº docker/compose éåå¹¶è¿è¡ã\n\n\n# å¸è½½\n\nå¦ææ¯äºè¿å¶åæ¹å¼å®è£çï¼å é¤äºè¿å¶æä»¶å³å¯ã\n\nsudo rm /usr/local/bin/docker-compose\n\n\nå¦ææ¯éè¿ pip å®è£çï¼åæ§è¡å¦ä¸å½ä»¤å³å¯å é¤ã\n\nsudo pip uninstall docker-compose\n',normalizedContent:'# docker compose å®è£ä¸å¸è½½\n\ncompose æ¯æ linuxãmacosãwindows 10 ä¸å¤§å¹³å°ã\n\ncompose å¯ä»¥éè¿ python çåç®¡çå·¥å· pip è¿è¡å®è£ï¼ä¹å¯ä»¥ç´æ¥ä¸è½½ç¼è¯å¥½çäºè¿å¶æä»¶ä½¿ç¨ï¼çè³è½å¤ç´æ¥å¨ docker å®¹å¨ä¸­è¿è¡ã\n\nåä¸¤ç§æ¹å¼æ¯ä¼ ç»æ¹å¼ï¼éåæ¬å°ç¯å¢ä¸å®è£ä½¿ç¨ï¼æåä¸ç§æ¹å¼åä¸ç ´åç³»ç»ç¯å¢ï¼æ´éåäºè®¡ç®åºæ¯ã\n\ndocker for mac ãdocker for windows èªå¸¦ docker-compose äºè¿å¶æä»¶ï¼å®è£ docker ä¹åå¯ä»¥ç´æ¥ä½¿ç¨ã\n\ndocker-compose --version\ndocker-compose version 1.29.2, build 8d51620a\n\n\nlinux ç³»ç»è¯·ä½¿ç¨ä»¥ä¸ä»ç»çæ¹æ³å®è£ã\n\n\n# äºè¿å¶å\n\nå¨ linux ä¸çä¹å®è£ååç®åï¼ä» å®æ¹ github release å¤ç´æ¥ä¸è½½ç¼è¯å¥½çäºè¿å¶æä»¶å³å¯ã\n\nä¾å¦ï¼å¨ linux 64 ä½ç³»ç»ä¸ç´æ¥ä¸è½½å¯¹åºçäºè¿å¶åã\n\n1.è¿è¡ä»¥ä¸å½ä»¤ä»¥ä¸è½½docker composeçå½åç¨³å®çæ¬ï¼\n\nsudo curl -l https://github.com/docker/compose/releases/download/1.29.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n\n\næç¤º\n\nè¦å®è£å¶ä»çæ¬çcomposeï¼è¯·æ¿æ¢1.29.2 ä¸ºè¦ä½¿ç¨çcomposeçæ¬ã\n\n2.å°å¯æ§è¡æéåºç¨äºäºè¿å¶æä»¶ï¼\n\nchmod +x /usr/local/bin/docker-compose\n\n\n\n# pip å®è£\n\næ³¨ï¼ x86_64 æ¶æç linux å»ºè®®æç§ä¸è¾¹çæ¹æ³ä¸è½½äºè¿å¶åè¿è¡å®è£ï¼å¦ææ¨è®¡ç®æºçæ¶ææ¯ arm(ä¾å¦ï¼æ èæ´¾)ï¼åä½¿ç¨ pip å®è£ã\n\nè¿ç§æ¹å¼æ¯å° compose å½ä½ä¸ä¸ª python åºç¨æ¥ä» pip æºä¸­å®è£ã\n\næ§è¡å®è£å½ä»¤ï¼\n\nsudo pip install -u docker-compose\n\n\nå¯ä»¥çå°ç±»ä¼¼å¦ä¸è¾åºï¼è¯´æå®è£æåã\n\ncollecting docker-compose\n  downloading docker-compose-1.29.2.tar.gz (149kb): 149kb downloaded\n...\nsuccessfully installed docker-compose cached-property requests texttable websocket-client docker-py dockerpty six enum34 backports.ssl-match-hostname ipaddress\n\n\n\n# bashå½ä»¤è¡¥å¨\n\n1.å®è£bash-completion ubuntuè¯·è·³è¿æ­¤æ­¥éª¤\n\nyum install bash-completion -y\n\n\n2.è®¾å®docker-composeçè¡¥å¨æä»¶\n\ncurl -l https://raw.githubusercontent.com/docker/compose/1.29.2/contrib/completion/bash/docker-compose > /etc/bash_completion.d/docker-compose\n\n\næç¤º\n\nå¦æç½ç»ç¶æä¸å¥½ï¼æ æ³ç´æ¥ä¸è½½ï¼å¯ä»¥éè¿æµè§å¨è·å¾ï¼ç¶åä½¿ç¨viçææ­¤æä»¶ä¹å¯ä»¥ã\n\n3.æ´æ°éç½®\n\nsource /usr/share/bash-completion/bash_completion\n\n\n3.ç»æç¡®è®¤\n\nroot@localhost:~# docker-compose \nbuild    events   kill     ps       rm       stop     version  \nconfig   exec     logs     pull     run      top      \ncreate   help     pause    push     scale    unpause  \ndown     images   port     restart  start    up   \n\n\n\n# zshå½ä»¤è¡¥å¨\n\nç¡®ä¿å·²å®è£ oh-my-zsh å¨è®¡ç®æºä¸ã\n\n\n# å·²å®è£ oh-my-zsh\n\nç¼è¾~/.zshrcæä»¶ï¼å¨æä»¶åè¡¨ä¸­æ·»å dockerådocker-composeãå¨ä»¥ä¸ç¤ºä¾ä¸­ï¼...ä»£è¡¨æ¨å¯è½å·²å®è£çå¶ä»zshæä»¶ã\n\n\n\n\n\n\n\n\nÂ \n\n\n\n...\n# which plugins would you like to load?\n# standard plugins can be found in $zsh/plugins/\n# custom plugins may be added to $zsh_custom/plugins/\n# example format: plugins=(rails git textmate ruby lighthouse)\n# add wisely, as too many plugins slow down shell startup.\nplugins=(... docker docker-compose)\n...\n\n\n\n# æªå®è£ oh-my-zsh\n\n 1. å°å®æèæ¬æ¾å¥æ¨ç/path/to/zsh/completionï¼éå¸¸ä¸º~/.zsh/completion/ï¼ä¸­ï¼\n    \n    mkdir -p ~/.zsh/completion\n    curl -l https://raw.githubusercontent.com/docker/compose/1.29.2/contrib/completion/zsh/_docker-compose > ~/.zsh/completion/_docker-compose\n    \n\n 2. ç¼è¾~/.zshrcæä»¶ï¼æ·»å ä»¥ä¸åå®¹:\n    \n    fpath=(~/.zsh/completion $fpath)\n    \n\n 3. ç¡®ä¿compinitå·²å è½½æéè¿æ·»å æ¥å®æ~/.zshrcï¼\n    \n    autoload -uz compinit && compinit -i\n    \n\n 4. ç¶åéæ°å è½½æ¨çshellï¼\n    \n    exec $shell -l\n    \n\n\n# å®¹å¨ä¸­æ§è¡\n\ncompose æ¢ç¶æ¯ä¸ä¸ª python åºç¨ï¼èªç¶ä¹å¯ä»¥ç´æ¥ç¨å®¹å¨æ¥æ§è¡å®ã\n\ncurl -l https://github.com/docker/compose/releases/download/1.29.2/run.sh > /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\n\n\nå®éä¸ï¼æ¥çä¸è½½ç run.sh èæ¬åå®¹ï¼å¦ä¸\n\n#!/bin/sh\n#\n# run docker-compose in a container\n#\n# this script will attempt to mirror the host paths by using volumes for the\n# following paths:\n#   * $(pwd)\n#   * $(dirname $compose_file) if it\'s set\n#   * $home if it\'s set\n#\n# you can add additional volumes (or any docker run options) using\n# the $compose_options environment variable.\n#\n\n\nset -e\n\nversion="1.29.2"\nimage="docker/compose:$version"\n\n\n# setup options for connecting to docker host\nif [ -z "$docker_host" ]; then\n    docker_host="/var/run/docker.sock"\nfi\nif [ -s "$docker_host" ]; then\n    docker_addr="-v $docker_host:$docker_host -e docker_host"\nelse\n    docker_addr="-e docker_host -e docker_tls_verify -e docker_cert_path"\nfi\n\n\n# setup volume mounts for compose config and context\nif [ "$(pwd)" != \'/\' ]; then\n    volumes="-v $(pwd):$(pwd)"\nfi\nif [ -n "$compose_file" ]; then\n    compose_options="$compose_options -e compose_file=$compose_file"\n    compose_dir=$(realpath "$(dirname "$compose_file")")\nfi\n# todo: also check --file argument\nif [ -n "$compose_dir" ]; then\n    volumes="$volumes -v $compose_dir:$compose_dir"\nfi\nif [ -n "$home" ]; then\n    volumes="$volumes -v $home:$home -e home" # pass in home to share docker.config and allow ~/-relative paths to work.\nfi\n\n# only allocate tty if we detect one\nif [ -t 0 ] && [ -t 1 ]; then\n    docker_run_options="$docker_run_options -t"\nfi\n\n# always set -i to support piped and terminal input in run/exec\ndocker_run_options="$docker_run_options -i"\n\n\n# handle userns security\nif docker info --format \'{{json .securityoptions}}\' 2>/dev/null | grep -q \'name=userns\'; then\n    docker_run_options="$docker_run_options --userns=host"\nfi\n\n# shellcheck disable=sc2086\nexec docker run --rm $docker_run_options $docker_addr $compose_options $volumes -w "$(pwd)" $image "$@"\n\n\nå¯ä»¥çå°ï¼å®å¶å®æ¯ä¸è½½äº docker/compose éåå¹¶è¿è¡ã\n\n\n# å¸è½½\n\nå¦ææ¯äºè¿å¶åæ¹å¼å®è£çï¼å é¤äºè¿å¶æä»¶å³å¯ã\n\nsudo rm /usr/local/bin/docker-compose\n\n\nå¦ææ¯éè¿ pip å®è£çï¼åæ§è¡å¦ä¸å½ä»¤å³å¯å é¤ã\n\nsudo pip uninstall docker-compose\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Compose å¥é¨",frontmatter:{title:"Docker Compose å¥é¨",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/a48959/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/03.Docker%20Compose%20%E5%85%A5%E9%97%A8.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/03.Docker Compose å¥é¨.md",key:"v-8eabad82",path:"/pages/a48959/",headers:[{level:2,title:"æ¯è¯­",slug:"æ¯è¯­",normalizedTitle:"æ¯è¯­",charIndex:24},{level:2,title:"åºæ¯",slug:"åºæ¯",normalizedTitle:"åºæ¯",charIndex:165},{level:2,title:"Web åºç¨",slug:"web-åºç¨",normalizedTitle:"web åºç¨",charIndex:306},{level:3,title:"ç¬¬ä¸æ­¥: è®¾ç½®",slug:"ç¬¬ä¸æ­¥-è®¾ç½®",normalizedTitle:"ç¬¬ä¸æ­¥: è®¾ç½®",charIndex:317},{level:3,title:"ç¬¬äºæ­¥: åå»ºä¸ä¸ª Dockerfile",slug:"ç¬¬äºæ­¥-åå»ºä¸ä¸ª-dockerfile",normalizedTitle:"ç¬¬äºæ­¥: åå»ºä¸ä¸ª dockerfile",charIndex:995},{level:3,title:"ç¬¬ä¸æ­¥: å¨ Compose fileä¸­å®ä¹æå¡",slug:"ç¬¬ä¸æ­¥-å¨-compose-fileä¸­å®ä¹æå¡",normalizedTitle:"ç¬¬ä¸æ­¥: å¨ compose fileä¸­å®ä¹æå¡",charIndex:1383},{level:3,title:"ç¬¬åæ­¥: ç¨ Compose æå»ºåè¿è¡ä½ çåºç¨ç¨åº",slug:"ç¬¬åæ­¥-ç¨-compose-æå»ºåè¿è¡ä½ çåºç¨ç¨åº",normalizedTitle:"ç¬¬åæ­¥: ç¨ compose æå»ºåè¿è¡ä½ çåºç¨ç¨åº",charIndex:1772},{level:3,title:"ç¬¬äºæ­¥: å°è¯ä¸äºå¶ä»å½ä»¤",slug:"ç¬¬äºæ­¥-å°è¯ä¸äºå¶ä»å½ä»¤",normalizedTitle:"ç¬¬äºæ­¥: å°è¯ä¸äºå¶ä»å½ä»¤",charIndex:4486}],headersStr:"æ¯è¯­ åºæ¯ Web åºç¨ ç¬¬ä¸æ­¥: è®¾ç½® ç¬¬äºæ­¥: åå»ºä¸ä¸ª Dockerfile ç¬¬ä¸æ­¥: å¨ Compose fileä¸­å®ä¹æå¡ ç¬¬åæ­¥: ç¨ Compose æå»ºåè¿è¡ä½ çåºç¨ç¨åº ç¬¬äºæ­¥: å°è¯ä¸äºå¶ä»å½ä»¤",content:"# Docker Compose å¥é¨\n\n\n# æ¯è¯­\n\né¦åä»ç»å ä¸ªæ¯è¯­ã\n\n * æå¡ (service)ï¼ä¸ä¸ªåºç¨å®¹å¨ï¼å®éä¸å¯ä»¥è¿è¡å¤ä¸ªç¸åéåçå®ä¾ã\n * é¡¹ç® (project)ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååã\n\nå¯è§ï¼ä¸ä¸ªé¡¹ç®å¯ä»¥ç±å¤ä¸ªæå¡ï¼å®¹å¨ï¼å³èèæï¼Compose é¢åé¡¹ç®è¿è¡ç®¡çã\n\n\n# åºæ¯\n\nå¨è¿ä¸ªé¡µé¢ä¸ï¼æ¨æå»ºäºä¸ä¸ªè¿è¡å¨ Docker Compose ä¸çç®å Python web åºç¨ç¨åºã è¯¥åºç¨ç¨åºä½¿ç¨äº Flask æ¡æ¶ï¼å¹¶å¨ Redis ç»´æ¤äºä¸ä¸ªç¹å»è®¡æ°å¨ã è½ç¶ç¤ºä¾ä½¿ç¨ Pythonï¼ä½è¿éæ¼ç¤ºçæ¦å¿µåºè¯¥æ¯å¯ä»¥çè§£çï¼å³ä½¿æ¨ä¸çæå®ã\n\n\n# Web åºç¨\n\n\n# ç¬¬ä¸æ­¥: è®¾ç½®\n\nå®ä¹åºç¨ç¨åºçä¾èµå³ç³»ã\n\n1.ä¸ºé¡¹ç®åå»ºä¸ä¸ªç®å½:\n\nmkdir composetest\ncd composetest\n\n\n2.å¨é¡¹ç®ç®å½ä¸­åå»ºä¸ä¸ªåä¸º app.py çæä»¶\n\nimport time\n\nimport redis\nfrom flask import Flask\n\napp = Flask(__name__)\ncache = redis.Redis(host='redis', port=6379)\n\n\ndef get_hit_count():\n    retries = 5\n    while True:\n        try:\n            return cache.incr('hits')\n        except redis.exceptions.ConnectionError as exc:\n            if retries == 0:\n                raise exc\n            retries -= 1\n            time.sleep(0.5)\n\n\n@app.route('/')\ndef hello():\n    count = get_hit_count()\n    return 'Hello World! I have been seen {} times.\\n'.format(count)\n\n\nå¨æ¬ä¾ä¸­ï¼redis æ¯åºç¨ç¨åºç½ç»ä¸ redis å®¹å¨çä¸»æºåã æä»¬ä½¿ç¨ Redis çé»è®¤ç«¯å£ï¼6379ã\n\n\n# ç¬¬äºæ­¥: åå»ºä¸ä¸ª Dockerfile\n\nå¨è¿ä¸ªæ­¥éª¤ä¸­ï¼æ¨å°ç¼åä¸ä¸ª Dockerfile æ¥æå»ºä¸ä¸ª Docker æ åã æ ååå« Python åºç¨ç¨åºæéçææä¾èµé¡¹ï¼åæ¬ Python æ¬èº«ã\n\nå¨é¡¹ç®ç®å½ä¸­ï¼åå»ºä¸ä¸ªåä¸º Dockerfile çæä»¶ï¼å¹¶ç²è´´ä»¥ä¸åå®¹:\n\nFROM python:3.7-alpine\nWORKDIR /code\nENV FLASK_APP app.py\nENV FLASK_RUN_HOST 0.0.0.0\nRUN apk add --no-cache gcc musl-dev linux-headers\nCOPY requirements.txt requirements.txt\nRUN pip install -r requirements.txt\nCOPY . .\nCMD [\"flask\", \"run\"]\n\n\n\n# ç¬¬ä¸æ­¥: å¨ Compose fileä¸­å®ä¹æå¡\n\nå¨é¡¹ç®ç®å½ä¸­åå»ºä¸ä¸ªåä¸º docker-compose.yml çæä»¶ï¼å¹¶ç²è´´ä»¥ä¸åå®¹:\n\nversion: '3'\nservices:\n  web:\n    build: .\n    ports:\n      - \"5000:5000\"\n  redis:\n    image: \"redis:alpine\"\n\n\nè¿ä¸ªCompose fileå®ä¹äºä¸¤ä¸ªæå¡: web å redisã\n\n# web service\n\nç½ç»æå¡è¿ä¸ªç½ç»æå¡ä½¿ç¨äºä¸ä¸ªæ¥èª Dockerfile çå·¥ä½ç®å½å¾çã ç¶åå°å®¹å¨åä¸»æºç»å®å°å¬å¼ç«¯å£5000ã æ­¤ç¤ºä¾æå¡ä½¿ç¨ Flask web æå¡å¨çé»è®¤ç«¯å£5000ã\n\n# Redis service\n\nRedis æå¡ä½¿ç¨ä» Docker Hub ä»åºæåçå¬å± Redis éåã\n\n\n# ç¬¬åæ­¥: ç¨ Compose æå»ºåè¿è¡ä½ çåºç¨ç¨åº\n\n1.å¨é¡¹ç®ç®å½ä¸­ï¼éè¿è¿è¡ docker-compose up å¯å¨åºç¨ç¨åºã\n\ndocker-compose up\nCreating composetest_redis_1 ... done\nCreating composetest_web_1   ... done\nAttaching to composetest_redis_1, composetest_web_1\nredis_1  | 1:C 29 Mar 2020 11:20:55.313 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\nredis_1  | 1:C 29 Mar 2020 11:20:55.313 # Redis version=5.0.8, bits=64, commit=00000000, modified=0, pid=1, just started\nredis_1  | 1:C 29 Mar 2020 11:20:55.313 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\nredis_1  | 1:M 29 Mar 2020 11:20:55.314 * Running mode=standalone, port=6379.\nredis_1  | 1:M 29 Mar 2020 11:20:55.314 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\nredis_1  | 1:M 29 Mar 2020 11:20:55.314 # Server initialized\nredis_1  | 1:M 29 Mar 2020 11:20:55.314 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\nredis_1  | 1:M 29 Mar 2020 11:20:55.314 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\nredis_1  | 1:M 29 Mar 2020 11:20:55.314 * Ready to accept connections\nweb_1    |  * Serving Flask app \"app.py\"\nweb_1    |  * Environment: production\nweb_1    |    WARNING: This is a development server. Do not use it in a production deployment.\nweb_1    |    Use a production WSGI server instead.\nweb_1    |  * Debug mode: off\nweb_1    |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\n\n\n\nCompose ä¼æå Redis éåï¼ä¸ºæ¨çä»£ç æå»ºä¸ä¸ªéåï¼å¹¶å¯å¨æ¨å®ä¹çæå¡ã å¨è¿ç§æåµä¸ï¼ä»£ç å¨æå»ºæ¶éæå°å¤å¶å°éåä¸­ã\n\n2.å¨æµè§å¨ä¸­è¾å¥ http://localhost:5000/ ï¼æ¥çåºç¨ç¨åºçè¿è¡æåµã\n\nä½ åºè¯¥å¨æµè§å¨ä¸­çå°è¿æ ·ä¸æ¡æ¶æ¯:\n\nHello World! I have been seen 1 times.\n\n\næ¯æ¬¡å·æ°é¡µé¢ï¼è®¡æ°å°±ä¼å  1ã\n\n3.åæ¢å°å¦ä¸ä¸ªç»ç«¯çªå£ï¼å¹¶é®å¥ docker image ls ååºæ¬å°æ åã æ­¤æ¶ååºçå¾ååºè¯¥è¿å redis å webã\n\ndocker image ls\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ncomposetest_web     latest              1253fe08c58d        2 hours ago         220MB\npython              3.7-alpine          7fbc871584eb        5 days ago          95.8MB\nredis               alpine              5c5637d8a823        5 days ago          29.8MB\n\n\n4.åæ­¢åºç¨ç¨åºï¼è¦ä¹å¨ç¬¬äºä¸ªç»ç«¯ä¸­ä»é¡¹ç®ç®å½ä¸­è¿è¡ docker-compose downï¼è¦ä¹å¨å¯å¨åºç¨ç¨åºçåå§ç»ç«¯ä¸­æ ctrl + cã\n\n\n# ç¬¬äºæ­¥: å°è¯ä¸äºå¶ä»å½ä»¤\n\nå¦æä½ æ³å¨åå°è¿è¡ä½ çæå¡ï¼ä½ å¯ä»¥éè¿-d æ å¿(å¯¹äºâåç¦»âæ¨¡å¼)æ¥ docker-compose up åä½¿ç¨ docker-compose ps æ¥æ¥çå½åè¿è¡çæ¯ä»ä¹:\n\ndocker-compose up -d\nStarting composetest_redis_1 ... done\nStarting composetest_web_1   ... done\n\ndocker-compose ps\n       Name                      Command               State           Ports         \n-------------------------------------------------------------------------------------\ncomposetest_redis_1   docker-entrypoint.sh redis ...   Up      6379/tcp              \ncomposetest_web_1     flask run                        Up      0.0.0.0:5000->5000/tcp\n\n\nå¦æä½¿ç¨docker-compose up -då½ä»¤å¯å¨æå¡æ¶ï¼å½éè¦åæ­¢æå¡ï¼éè¦æ§è¡ï¼\n\ndocker-compose stop\n",normalizedContent:"# docker compose å¥é¨\n\n\n# æ¯è¯­\n\né¦åä»ç»å ä¸ªæ¯è¯­ã\n\n * æå¡ (service)ï¼ä¸ä¸ªåºç¨å®¹å¨ï¼å®éä¸å¯ä»¥è¿è¡å¤ä¸ªç¸åéåçå®ä¾ã\n * é¡¹ç® (project)ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååã\n\nå¯è§ï¼ä¸ä¸ªé¡¹ç®å¯ä»¥ç±å¤ä¸ªæå¡ï¼å®¹å¨ï¼å³èèæï¼compose é¢åé¡¹ç®è¿è¡ç®¡çã\n\n\n# åºæ¯\n\nå¨è¿ä¸ªé¡µé¢ä¸ï¼æ¨æå»ºäºä¸ä¸ªè¿è¡å¨ docker compose ä¸çç®å python web åºç¨ç¨åºã è¯¥åºç¨ç¨åºä½¿ç¨äº flask æ¡æ¶ï¼å¹¶å¨ redis ç»´æ¤äºä¸ä¸ªç¹å»è®¡æ°å¨ã è½ç¶ç¤ºä¾ä½¿ç¨ pythonï¼ä½è¿éæ¼ç¤ºçæ¦å¿µåºè¯¥æ¯å¯ä»¥çè§£çï¼å³ä½¿æ¨ä¸çæå®ã\n\n\n# web åºç¨\n\n\n# ç¬¬ä¸æ­¥: è®¾ç½®\n\nå®ä¹åºç¨ç¨åºçä¾èµå³ç³»ã\n\n1.ä¸ºé¡¹ç®åå»ºä¸ä¸ªç®å½:\n\nmkdir composetest\ncd composetest\n\n\n2.å¨é¡¹ç®ç®å½ä¸­åå»ºä¸ä¸ªåä¸º app.py çæä»¶\n\nimport time\n\nimport redis\nfrom flask import flask\n\napp = flask(__name__)\ncache = redis.redis(host='redis', port=6379)\n\n\ndef get_hit_count():\n    retries = 5\n    while true:\n        try:\n            return cache.incr('hits')\n        except redis.exceptions.connectionerror as exc:\n            if retries == 0:\n                raise exc\n            retries -= 1\n            time.sleep(0.5)\n\n\n@app.route('/')\ndef hello():\n    count = get_hit_count()\n    return 'hello world! i have been seen {} times.\\n'.format(count)\n\n\nå¨æ¬ä¾ä¸­ï¼redis æ¯åºç¨ç¨åºç½ç»ä¸ redis å®¹å¨çä¸»æºåã æä»¬ä½¿ç¨ redis çé»è®¤ç«¯å£ï¼6379ã\n\n\n# ç¬¬äºæ­¥: åå»ºä¸ä¸ª dockerfile\n\nå¨è¿ä¸ªæ­¥éª¤ä¸­ï¼æ¨å°ç¼åä¸ä¸ª dockerfile æ¥æå»ºä¸ä¸ª docker æ åã æ ååå« python åºç¨ç¨åºæéçææä¾èµé¡¹ï¼åæ¬ python æ¬èº«ã\n\nå¨é¡¹ç®ç®å½ä¸­ï¼åå»ºä¸ä¸ªåä¸º dockerfile çæä»¶ï¼å¹¶ç²è´´ä»¥ä¸åå®¹:\n\nfrom python:3.7-alpine\nworkdir /code\nenv flask_app app.py\nenv flask_run_host 0.0.0.0\nrun apk add --no-cache gcc musl-dev linux-headers\ncopy requirements.txt requirements.txt\nrun pip install -r requirements.txt\ncopy . .\ncmd [\"flask\", \"run\"]\n\n\n\n# ç¬¬ä¸æ­¥: å¨ compose fileä¸­å®ä¹æå¡\n\nå¨é¡¹ç®ç®å½ä¸­åå»ºä¸ä¸ªåä¸º docker-compose.yml çæä»¶ï¼å¹¶ç²è´´ä»¥ä¸åå®¹:\n\nversion: '3'\nservices:\n  web:\n    build: .\n    ports:\n      - \"5000:5000\"\n  redis:\n    image: \"redis:alpine\"\n\n\nè¿ä¸ªcompose fileå®ä¹äºä¸¤ä¸ªæå¡: web å redisã\n\n# web service\n\nç½ç»æå¡è¿ä¸ªç½ç»æå¡ä½¿ç¨äºä¸ä¸ªæ¥èª dockerfile çå·¥ä½ç®å½å¾çã ç¶åå°å®¹å¨åä¸»æºç»å®å°å¬å¼ç«¯å£5000ã æ­¤ç¤ºä¾æå¡ä½¿ç¨ flask web æå¡å¨çé»è®¤ç«¯å£5000ã\n\n# redis service\n\nredis æå¡ä½¿ç¨ä» docker hub ä»åºæåçå¬å± redis éåã\n\n\n# ç¬¬åæ­¥: ç¨ compose æå»ºåè¿è¡ä½ çåºç¨ç¨åº\n\n1.å¨é¡¹ç®ç®å½ä¸­ï¼éè¿è¿è¡ docker-compose up å¯å¨åºç¨ç¨åºã\n\ndocker-compose up\ncreating composetest_redis_1 ... done\ncreating composetest_web_1   ... done\nattaching to composetest_redis_1, composetest_web_1\nredis_1  | 1:c 29 mar 2020 11:20:55.313 # oo0ooo0ooo0oo redis is starting oo0ooo0ooo0oo\nredis_1  | 1:c 29 mar 2020 11:20:55.313 # redis version=5.0.8, bits=64, commit=00000000, modified=0, pid=1, just started\nredis_1  | 1:c 29 mar 2020 11:20:55.313 # warning: no config file specified, using the default config. in order to specify a config file use redis-server /path/to/redis.conf\nredis_1  | 1:m 29 mar 2020 11:20:55.314 * running mode=standalone, port=6379.\nredis_1  | 1:m 29 mar 2020 11:20:55.314 # warning: the tcp backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\nredis_1  | 1:m 29 mar 2020 11:20:55.314 # server initialized\nredis_1  | 1:m 29 mar 2020 11:20:55.314 # warning overcommit_memory is set to 0! background save may fail under low memory condition. to fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\nredis_1  | 1:m 29 mar 2020 11:20:55.314 # warning you have transparent huge pages (thp) support enabled in your kernel. this will create latency and memory usage issues with redis. to fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. redis must be restarted after thp is disabled.\nredis_1  | 1:m 29 mar 2020 11:20:55.314 * ready to accept connections\nweb_1    |  * serving flask app \"app.py\"\nweb_1    |  * environment: production\nweb_1    |    warning: this is a development server. do not use it in a production deployment.\nweb_1    |    use a production wsgi server instead.\nweb_1    |  * debug mode: off\nweb_1    |  * running on http://0.0.0.0:5000/ (press ctrl+c to quit)\n\n\n\ncompose ä¼æå redis éåï¼ä¸ºæ¨çä»£ç æå»ºä¸ä¸ªéåï¼å¹¶å¯å¨æ¨å®ä¹çæå¡ã å¨è¿ç§æåµä¸ï¼ä»£ç å¨æå»ºæ¶éæå°å¤å¶å°éåä¸­ã\n\n2.å¨æµè§å¨ä¸­è¾å¥ http://localhost:5000/ ï¼æ¥çåºç¨ç¨åºçè¿è¡æåµã\n\nä½ åºè¯¥å¨æµè§å¨ä¸­çå°è¿æ ·ä¸æ¡æ¶æ¯:\n\nhello world! i have been seen 1 times.\n\n\næ¯æ¬¡å·æ°é¡µé¢ï¼è®¡æ°å°±ä¼å  1ã\n\n3.åæ¢å°å¦ä¸ä¸ªç»ç«¯çªå£ï¼å¹¶é®å¥ docker image ls ååºæ¬å°æ åã æ­¤æ¶ååºçå¾ååºè¯¥è¿å redis å webã\n\ndocker image ls\nrepository          tag                 image id            created             size\ncomposetest_web     latest              1253fe08c58d        2 hours ago         220mb\npython              3.7-alpine          7fbc871584eb        5 days ago          95.8mb\nredis               alpine              5c5637d8a823        5 days ago          29.8mb\n\n\n4.åæ­¢åºç¨ç¨åºï¼è¦ä¹å¨ç¬¬äºä¸ªç»ç«¯ä¸­ä»é¡¹ç®ç®å½ä¸­è¿è¡ docker-compose downï¼è¦ä¹å¨å¯å¨åºç¨ç¨åºçåå§ç»ç«¯ä¸­æ ctrl + cã\n\n\n# ç¬¬äºæ­¥: å°è¯ä¸äºå¶ä»å½ä»¤\n\nå¦æä½ æ³å¨åå°è¿è¡ä½ çæå¡ï¼ä½ å¯ä»¥éè¿-d æ å¿(å¯¹äºâåç¦»âæ¨¡å¼)æ¥ docker-compose up åä½¿ç¨ docker-compose ps æ¥æ¥çå½åè¿è¡çæ¯ä»ä¹:\n\ndocker-compose up -d\nstarting composetest_redis_1 ... done\nstarting composetest_web_1   ... done\n\ndocker-compose ps\n       name                      command               state           ports         \n-------------------------------------------------------------------------------------\ncomposetest_redis_1   docker-entrypoint.sh redis ...   up      6379/tcp              \ncomposetest_web_1     flask run                        up      0.0.0.0:5000->5000/tcp\n\n\nå¦æä½¿ç¨docker-compose up -då½ä»¤å¯å¨æå¡æ¶ï¼å½éè¦åæ­¢æå¡ï¼éè¦æ§è¡ï¼\n\ndocker-compose stop\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Compose å½ä»¤è¯´æ",frontmatter:{title:"Docker Compose å½ä»¤è¯´æ",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/cddd90/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/04.Docker%20Compose%20%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/04.Docker Compose å½ä»¤è¯´æ.md",key:"v-262a1fde",path:"/pages/cddd90/",headers:[{level:2,title:"å½ä»¤å¯¹è±¡ä¸æ ¼å¼",slug:"å½ä»¤å¯¹è±¡ä¸æ ¼å¼",normalizedTitle:"å½ä»¤å¯¹è±¡ä¸æ ¼å¼",charIndex:26},{level:2,title:"å½ä»¤éé¡¹",slug:"å½ä»¤éé¡¹",normalizedTitle:"å½ä»¤éé¡¹",charIndex:303},{level:2,title:"å½ä»¤ä½¿ç¨è¯´æ",slug:"å½ä»¤ä½¿ç¨è¯´æ",normalizedTitle:"å½ä»¤ä½¿ç¨è¯´æ",charIndex:572},{level:3,title:"build",slug:"build",normalizedTitle:"build",charIndex:583},{level:3,title:"config",slug:"config",normalizedTitle:"config",charIndex:873},{level:3,title:"down",slug:"down",normalizedTitle:"down",charIndex:927},{level:3,title:"exec",slug:"exec",normalizedTitle:"exec",charIndex:963},{level:3,title:"help",slug:"help",normalizedTitle:"help",charIndex:155},{level:3,title:"images",slug:"images",normalizedTitle:"images",charIndex:1003},{level:3,title:"kill",slug:"kill",normalizedTitle:"kill",charIndex:1036},{level:3,title:"logs",slug:"logs",normalizedTitle:"logs",charIndex:1195},{level:3,title:"pause",slug:"pause",normalizedTitle:"pause",charIndex:1346},{level:3,title:"port",slug:"port",normalizedTitle:"port",charIndex:1407},{level:3,title:"ps",slug:"ps",normalizedTitle:"ps",charIndex:1591},{level:3,title:"pull",slug:"pull",normalizedTitle:"pull",charIndex:840},{level:3,title:"push",slug:"push",normalizedTitle:"push",charIndex:1802},{level:3,title:"restart",slug:"restart",normalizedTitle:"restart",charIndex:1836},{level:3,title:"rm",slug:"rm",normalizedTitle:"rm",charIndex:776},{level:3,title:"run",slug:"run",normalizedTitle:"run",charIndex:2143},{level:3,title:"scale",slug:"scale",normalizedTitle:"scale",charIndex:2917},{level:3,title:"start",slug:"start",normalizedTitle:"start",charIndex:1838},{level:3,title:"stop",slug:"stop",normalizedTitle:"stop",charIndex:2054},{level:3,title:"top",slug:"top",normalizedTitle:"top",charIndex:2055},{level:3,title:"unpause",slug:"unpause",normalizedTitle:"unpause",charIndex:3447},{level:3,title:"up",slug:"up",normalizedTitle:"up",charIndex:941},{level:3,title:"version",slug:"version",normalizedTitle:"version",charIndex:551}],headersStr:"å½ä»¤å¯¹è±¡ä¸æ ¼å¼ å½ä»¤éé¡¹ å½ä»¤ä½¿ç¨è¯´æ build config down exec help images kill logs pause port ps pull push restart rm run scale start stop top unpause up version",content:'# Docker Compose å½ä»¤è¯´æ\n\n\n# å½ä»¤å¯¹è±¡ä¸æ ¼å¼\n\nå¯¹äº Compose æ¥è¯´ï¼å¤§é¨åå½ä»¤çå¯¹è±¡æ¢å¯ä»¥æ¯é¡¹ç®æ¬èº«ï¼ä¹å¯ä»¥æå®ä¸ºé¡¹ç®ä¸­çæå¡æèå®¹å¨ãå¦ææ²¡æç¹å«çè¯´æï¼å½ä»¤å¯¹è±¡å°æ¯é¡¹ç®ï¼è¿æå³çé¡¹ç®ä¸­ææçæå¡é½ä¼åå°å½ä»¤å½±åã\n\næ§è¡ docker-compose [COMMAND] --help æè docker-compose help [COMMAND] å¯ä»¥æ¥çå·ä½æä¸ªå½ä»¤çä½¿ç¨æ ¼å¼ã\n\ndocker-compose å½ä»¤çåºæ¬çä½¿ç¨æ ¼å¼æ¯\n\ndocker-compose [-f=<arg>...] [options] [COMMAND] [ARGS...]\n\n\n\n# å½ä»¤éé¡¹\n\n * -f, --file FILE æå®ä½¿ç¨ç Compose æ¨¡æ¿æä»¶ï¼é»è®¤ä¸º docker-compose.ymlï¼å¯ä»¥å¤æ¬¡æå®ã\n * -p, --project-name NAME æå®é¡¹ç®åç§°ï¼é»è®¤å°ä½¿ç¨æå¨ç®å½åç§°ä½ä¸ºé¡¹ç®åã\n * --x-networking ä½¿ç¨ Docker çå¯ææç½ç»åç«¯ç¹æ§\n * --x-network-driver DRIVER æå®ç½ç»åç«¯çé©±å¨ï¼é»è®¤ä¸º bridge\n * --verbose è¾åºæ´å¤è°è¯ä¿¡æ¯ã\n * -v, --version æå°çæ¬å¹¶éåºã\n\n\n# å½ä»¤ä½¿ç¨è¯´æ\n\n\n# build\n\næ ¼å¼ä¸º docker-compose build [options] [SERVICE...]ã\n\næå»ºï¼éæ°æå»ºï¼é¡¹ç®ä¸­çæå¡å®¹å¨ã\n\næå¡å®¹å¨ä¸æ¦æå»ºåï¼å°ä¼å¸¦ä¸ä¸ä¸ªæ è®°åï¼ä¾å¦å¯¹äº web é¡¹ç®ä¸­çä¸ä¸ª db å®¹å¨ï¼å¯è½æ¯ web_dbã\n\nå¯ä»¥éæ¶å¨é¡¹ç®ç®å½ä¸è¿è¡ docker-compose build æ¥éæ°æå»ºæå¡ã\n\néé¡¹åæ¬ï¼\n\n * --force-rm å é¤æå»ºè¿ç¨ä¸­çä¸´æ¶å®¹å¨ã\n * --no-cache æå»ºéåè¿ç¨ä¸­ä¸ä½¿ç¨ cacheï¼è¿å°å é¿æå»ºè¿ç¨ï¼ã\n * --pull å§ç»å°è¯éè¿ pull æ¥è·åæ´æ°çæ¬çéåã\n\n\n# config\n\néªè¯ Compose æä»¶æ ¼å¼æ¯å¦æ­£ç¡®ï¼è¥æ­£ç¡®åæ¾ç¤ºéç½®ï¼è¥æ ¼å¼éè¯¯æ¾ç¤ºéè¯¯åå ã\n\n\n# down\n\næ­¤å½ä»¤å°ä¼åæ­¢ up å½ä»¤æå¯å¨çå®¹å¨ï¼å¹¶ç§»é¤ç½ç»\n\n\n# exec\n\nè¿å¥æå®çå®¹å¨ã\n\n\n# help\n\nè·å¾ä¸ä¸ªå½ä»¤çå¸®å©ã\n\n\n# images\n\nååº Compose æä»¶ä¸­åå«çéåã\n\n\n# kill\n\næ ¼å¼ä¸º docker-compose kill [options] [SERVICE...]ã\n\néè¿åé SIGKILL ä¿¡å·æ¥å¼ºå¶åæ­¢æå¡å®¹å¨ã\n\næ¯æéè¿ -s åæ°æ¥æå®åéçä¿¡å·ï¼ä¾å¦éè¿å¦ä¸æä»¤åé SIGINT ä¿¡å·ã\n\ndocker-compose kill -s SIGINT\n\n\n\n# logs\n\næ ¼å¼ä¸º docker-compose logs [options] [SERVICE...]ã\n\næ¥çæå¡å®¹å¨çè¾åºãé»è®¤æåµä¸ï¼docker-compose å°å¯¹ä¸åçæå¡è¾åºä½¿ç¨ä¸åçé¢è²æ¥åºåãå¯ä»¥éè¿ --no-color æ¥å³é­é¢è²ã\n\nè¯¥å½ä»¤å¨è°è¯é®é¢çæ¶åååæç¨ã\n\n\n# pause\n\næ ¼å¼ä¸º docker-compose pause [SERVICE...]ã\n\næåä¸ä¸ªæå¡å®¹å¨ã\n\n\n# port\n\næ ¼å¼ä¸º docker-compose port [options] SERVICE PRIVATE_PORTã\n\næå°æä¸ªå®¹å¨ç«¯å£ææ å°çå¬å±ç«¯å£ã\n\néé¡¹ï¼\n\n * --protocol=proto æå®ç«¯å£åè®®ï¼tcpï¼é»è®¤å¼ï¼æè udpã\n * --index=index å¦æåä¸æå¡å­å¨å¤ä¸ªå®¹å¨ï¼æå®å½ä»¤å¯¹è±¡å®¹å¨çåºå·ï¼é»è®¤ä¸º 1ï¼ã\n\n\n# ps\n\næ ¼å¼ä¸º docker-compose ps [options] [SERVICE...]ã\n\nååºé¡¹ç®ä¸­ç®åçææå®¹å¨ã\n\néé¡¹ï¼\n\n * -q åªæå°å®¹å¨ç ID ä¿¡æ¯ã\n\n\n# pull\n\næ ¼å¼ä¸º docker-compose pull [options] [SERVICE...]ã\n\næåæå¡ä¾èµçéåã\n\néé¡¹ï¼\n\n * --ignore-pull-failures å¿½ç¥æåéåè¿ç¨ä¸­çéè¯¯ã\n\n\n# push\n\næ¨éæå¡ä¾èµçéåå° Docker éåä»åºã\n\n\n# restart\n\næ ¼å¼ä¸º docker-compose restart [options] [SERVICE...]ã\n\néå¯é¡¹ç®ä¸­çæå¡ã\n\néé¡¹ï¼\n\n * -t, --timeout TIMEOUT æå®éå¯ååæ­¢å®¹å¨çè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# rm\n\næ ¼å¼ä¸º docker-compose rm [options] [SERVICE...]ã\n\nå é¤ææï¼åæ­¢ç¶æçï¼æå¡å®¹å¨ãæ¨èåæ§è¡ docker-compose stop å½ä»¤æ¥åæ­¢å®¹å¨ã\n\néé¡¹ï¼\n\n * -f, --force å¼ºå¶ç´æ¥å é¤ï¼åæ¬éåæ­¢ç¶æçå®¹å¨ãä¸è¬å°½éä¸è¦ä½¿ç¨è¯¥éé¡¹ã\n * -v å é¤å®¹å¨ææè½½çæ°æ®å·ã\n\n\n# run\n\næ ¼å¼ä¸º docker-compose run [options] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]ã\n\nå¨æå®æå¡ä¸æ§è¡ä¸ä¸ªå½ä»¤ã\n\nä¾å¦ï¼\n\ndocker-compose run ubuntu ping docker.com\n\n\nå°ä¼å¯å¨ä¸ä¸ª ubuntu æå¡å®¹å¨ï¼å¹¶æ§è¡ ping docker.com å½ä»¤ã\n\né»è®¤æåµä¸ï¼å¦æå­å¨å³èï¼åææå³èçæå¡å°ä¼èªå¨è¢«å¯å¨ï¼é¤éè¿äºæå¡å·²ç»å¨è¿è¡ä¸­ã\n\nè¯¥å½ä»¤ç±»ä¼¼å¯å¨å®¹å¨åè¿è¡æå®çå½ä»¤ï¼ç¸å³å·ãé¾æ¥ç­ç­é½å°ä¼æç§éç½®èªå¨åå»ºã\n\nä¸¤ä¸ªä¸åç¹ï¼\n\n * ç»å®å½ä»¤å°ä¼è¦çåæçèªå¨è¿è¡å½ä»¤ï¼\n * ä¸ä¼èªå¨åå»ºç«¯å£ï¼ä»¥é¿åå²çªã\n\nå¦æä¸å¸æèªå¨å¯å¨å³èçå®¹å¨ï¼å¯ä»¥ä½¿ç¨ --no-deps éé¡¹ï¼ä¾å¦\n\ndocker-compose run --no-deps web python manage.py shell\n\n\nå°ä¸ä¼å¯å¨ web å®¹å¨æå³èçå¶å®å®¹å¨ã\n\néé¡¹ï¼\n\n * -d åå°è¿è¡å®¹å¨ã\n * --name NAME ä¸ºå®¹å¨æå®ä¸ä¸ªåå­ã\n * --entrypoint CMD è¦çé»è®¤çå®¹å¨å¯å¨æä»¤ã\n * -e KEY=VAL è®¾ç½®ç¯å¢åéå¼ï¼å¯å¤æ¬¡ä½¿ç¨éé¡¹æ¥è®¾ç½®å¤ä¸ªç¯å¢åéã\n * -u, --user="" æå®è¿è¡å®¹å¨çç¨æ·åæè uidã\n * --no-deps ä¸èªå¨å¯å¨å³èçæå¡å®¹å¨ã\n * --rm è¿è¡å½ä»¤åèªå¨å é¤å®¹å¨ï¼d æ¨¡å¼ä¸å°å¿½ç¥ã\n * -p, --publish=[] æ å°å®¹å¨ç«¯å£å°æ¬å°ä¸»æºã\n * --service-ports éç½®æå¡ç«¯å£å¹¶æ å°å°æ¬å°ä¸»æºã\n * -T ä¸åéä¼ª ttyï¼æå³çä¾èµ tty çæä»¤å°æ æ³è¿è¡ã\n\n\n# scale\n\næ ¼å¼ä¸º docker-compose scale [options] [SERVICE=NUM...]ã\n\nè®¾ç½®æå®æå¡è¿è¡çå®¹å¨ä¸ªæ°ã\n\néè¿ service=num çåæ°æ¥è®¾ç½®æ°éãä¾å¦ï¼\n\ndocker-compose scale web=3 db=2\n\n\nå°å¯å¨ 3 ä¸ªå®¹å¨è¿è¡ web æå¡ï¼2 ä¸ªå®¹å¨è¿è¡ db æå¡ã\n\nä¸è¬çï¼å½æå®æ°ç®å¤äºè¯¥æå¡å½åå®éè¿è¡å®¹å¨ï¼å°æ°åå»ºå¹¶å¯å¨å®¹å¨ï¼åä¹ï¼å°åæ­¢å®¹å¨ã\n\néé¡¹ï¼\n\n * -t, --timeout TIMEOUT åæ­¢å®¹å¨æ¶åçè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# start\n\næ ¼å¼ä¸º docker-compose start [SERVICE...]ã\n\nå¯å¨å·²ç»å­å¨çæå¡å®¹å¨ã\n\n\n# stop\n\næ ¼å¼ä¸º docker-compose stop [options] [SERVICE...]ã\n\nåæ­¢å·²ç»å¤äºè¿è¡ç¶æçå®¹å¨ï¼ä½ä¸å é¤å®ãéè¿ docker-compose start å¯ä»¥åæ¬¡å¯å¨è¿äºå®¹å¨ã\n\néé¡¹ï¼\n\n * -t, --timeout TIMEOUT åæ­¢å®¹å¨æ¶åçè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# top\n\næ¥çåä¸ªæå¡å®¹å¨åè¿è¡çè¿ç¨ã\n\n\n# unpause\n\næ ¼å¼ä¸º docker-compose unpause [SERVICE...]ã\n\næ¢å¤å¤äºæåç¶æä¸­çæå¡ã\n\n\n# up\n\næ ¼å¼ä¸º docker-compose up [options] [SERVICE...]ã\n\nè¯¥å½ä»¤ååå¼ºå¤§ï¼å®å°å°è¯èªå¨å®æåæ¬æå»ºéåï¼ï¼éæ°ï¼åå»ºæå¡ï¼å¯å¨æå¡ï¼å¹¶å³èæå¡ç¸å³å®¹å¨çä¸ç³»åæä½ã\n\né¾æ¥çæå¡é½å°ä¼è¢«èªå¨å¯å¨ï¼é¤éå·²ç»å¤äºè¿è¡ç¶æã\n\nå¯ä»¥è¯´ï¼å¤§é¨åæ¶åé½å¯ä»¥ç´æ¥éè¿è¯¥å½ä»¤æ¥å¯å¨ä¸ä¸ªé¡¹ç®ã\n\né»è®¤æåµï¼docker-compose up å¯å¨çå®¹å¨é½å¨åå°ï¼æ§å¶å°å°ä¼åæ¶æå°ææå®¹å¨çè¾åºä¿¡æ¯ï¼å¯ä»¥å¾æ¹ä¾¿è¿è¡è°è¯ã\n\nå½éè¿ Ctrl-C åæ­¢å½ä»¤æ¶ï¼ææå®¹å¨å°ä¼åæ­¢ã\n\nå¦æä½¿ç¨ docker-compose up -dï¼å°ä¼å¨åå°å¯å¨å¹¶è¿è¡ææçå®¹å¨ãä¸è¬æ¨èçäº§ç¯å¢ä¸ä½¿ç¨è¯¥éé¡¹ã\n\né»è®¤æåµï¼å¦ææå¡å®¹å¨å·²ç»å­å¨ï¼docker-compose up å°ä¼å°è¯åæ­¢å®¹å¨ï¼ç¶åéæ°åå»ºï¼ä¿æä½¿ç¨ volumes-from æè½½çå·ï¼ï¼ä»¥ä¿è¯æ°å¯å¨çæå¡å¹é docker-compose.yml æä»¶çææ°åå®¹ãå¦æç¨æ·ä¸å¸æå®¹å¨è¢«åæ­¢å¹¶éæ°åå»ºï¼å¯ä»¥ä½¿ç¨ docker-compose up --no-recreateãè¿æ ·å°åªä¼å¯å¨å¤äºåæ­¢ç¶æçå®¹å¨ï¼èå¿½ç¥å·²ç»è¿è¡çæå¡ãå¦æç¨æ·åªæ³éæ°é¨ç½²æä¸ªæå¡ï¼å¯ä»¥ä½¿ç¨ docker-compose up --no-deps -d æ¥éæ°åå»ºæå¡å¹¶åå°åæ­¢æ§æå¡ï¼å¯å¨æ°æå¡ï¼å¹¶ä¸ä¼å½±åå°å¶æä¾èµçæå¡ã\n\néé¡¹ï¼\n\n * -d å¨åå°è¿è¡æå¡å®¹å¨ã\n * --no-color ä¸ä½¿ç¨é¢è²æ¥åºåä¸åçæå¡çæ§å¶å°è¾åºã\n * --no-deps ä¸å¯å¨æå¡æé¾æ¥çå®¹å¨ã\n * --force-recreate å¼ºå¶éæ°åå»ºå®¹å¨ï¼ä¸è½ä¸ --no-recreate åæ¶ä½¿ç¨ã\n * --no-recreate å¦æå®¹å¨å·²ç»å­å¨äºï¼åä¸éæ°åå»ºï¼ä¸è½ä¸ --force-recreate åæ¶ä½¿ç¨ã\n * --no-build ä¸èªå¨æå»ºç¼ºå¤±çæå¡éåã\n * -t, --timeout TIMEOUT åæ­¢å®¹å¨æ¶åçè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# version\n\næ ¼å¼ä¸º docker-compose versionã\n\næå°çæ¬ä¿¡æ¯ã',normalizedContent:'# docker compose å½ä»¤è¯´æ\n\n\n# å½ä»¤å¯¹è±¡ä¸æ ¼å¼\n\nå¯¹äº compose æ¥è¯´ï¼å¤§é¨åå½ä»¤çå¯¹è±¡æ¢å¯ä»¥æ¯é¡¹ç®æ¬èº«ï¼ä¹å¯ä»¥æå®ä¸ºé¡¹ç®ä¸­çæå¡æèå®¹å¨ãå¦ææ²¡æç¹å«çè¯´æï¼å½ä»¤å¯¹è±¡å°æ¯é¡¹ç®ï¼è¿æå³çé¡¹ç®ä¸­ææçæå¡é½ä¼åå°å½ä»¤å½±åã\n\næ§è¡ docker-compose [command] --help æè docker-compose help [command] å¯ä»¥æ¥çå·ä½æä¸ªå½ä»¤çä½¿ç¨æ ¼å¼ã\n\ndocker-compose å½ä»¤çåºæ¬çä½¿ç¨æ ¼å¼æ¯\n\ndocker-compose [-f=<arg>...] [options] [command] [args...]\n\n\n\n# å½ä»¤éé¡¹\n\n * -f, --file file æå®ä½¿ç¨ç compose æ¨¡æ¿æä»¶ï¼é»è®¤ä¸º docker-compose.ymlï¼å¯ä»¥å¤æ¬¡æå®ã\n * -p, --project-name name æå®é¡¹ç®åç§°ï¼é»è®¤å°ä½¿ç¨æå¨ç®å½åç§°ä½ä¸ºé¡¹ç®åã\n * --x-networking ä½¿ç¨ docker çå¯ææç½ç»åç«¯ç¹æ§\n * --x-network-driver driver æå®ç½ç»åç«¯çé©±å¨ï¼é»è®¤ä¸º bridge\n * --verbose è¾åºæ´å¤è°è¯ä¿¡æ¯ã\n * -v, --version æå°çæ¬å¹¶éåºã\n\n\n# å½ä»¤ä½¿ç¨è¯´æ\n\n\n# build\n\næ ¼å¼ä¸º docker-compose build [options] [service...]ã\n\næå»ºï¼éæ°æå»ºï¼é¡¹ç®ä¸­çæå¡å®¹å¨ã\n\næå¡å®¹å¨ä¸æ¦æå»ºåï¼å°ä¼å¸¦ä¸ä¸ä¸ªæ è®°åï¼ä¾å¦å¯¹äº web é¡¹ç®ä¸­çä¸ä¸ª db å®¹å¨ï¼å¯è½æ¯ web_dbã\n\nå¯ä»¥éæ¶å¨é¡¹ç®ç®å½ä¸è¿è¡ docker-compose build æ¥éæ°æå»ºæå¡ã\n\néé¡¹åæ¬ï¼\n\n * --force-rm å é¤æå»ºè¿ç¨ä¸­çä¸´æ¶å®¹å¨ã\n * --no-cache æå»ºéåè¿ç¨ä¸­ä¸ä½¿ç¨ cacheï¼è¿å°å é¿æå»ºè¿ç¨ï¼ã\n * --pull å§ç»å°è¯éè¿ pull æ¥è·åæ´æ°çæ¬çéåã\n\n\n# config\n\néªè¯ compose æä»¶æ ¼å¼æ¯å¦æ­£ç¡®ï¼è¥æ­£ç¡®åæ¾ç¤ºéç½®ï¼è¥æ ¼å¼éè¯¯æ¾ç¤ºéè¯¯åå ã\n\n\n# down\n\næ­¤å½ä»¤å°ä¼åæ­¢ up å½ä»¤æå¯å¨çå®¹å¨ï¼å¹¶ç§»é¤ç½ç»\n\n\n# exec\n\nè¿å¥æå®çå®¹å¨ã\n\n\n# help\n\nè·å¾ä¸ä¸ªå½ä»¤çå¸®å©ã\n\n\n# images\n\nååº compose æä»¶ä¸­åå«çéåã\n\n\n# kill\n\næ ¼å¼ä¸º docker-compose kill [options] [service...]ã\n\néè¿åé sigkill ä¿¡å·æ¥å¼ºå¶åæ­¢æå¡å®¹å¨ã\n\næ¯æéè¿ -s åæ°æ¥æå®åéçä¿¡å·ï¼ä¾å¦éè¿å¦ä¸æä»¤åé sigint ä¿¡å·ã\n\ndocker-compose kill -s sigint\n\n\n\n# logs\n\næ ¼å¼ä¸º docker-compose logs [options] [service...]ã\n\næ¥çæå¡å®¹å¨çè¾åºãé»è®¤æåµä¸ï¼docker-compose å°å¯¹ä¸åçæå¡è¾åºä½¿ç¨ä¸åçé¢è²æ¥åºåãå¯ä»¥éè¿ --no-color æ¥å³é­é¢è²ã\n\nè¯¥å½ä»¤å¨è°è¯é®é¢çæ¶åååæç¨ã\n\n\n# pause\n\næ ¼å¼ä¸º docker-compose pause [service...]ã\n\næåä¸ä¸ªæå¡å®¹å¨ã\n\n\n# port\n\næ ¼å¼ä¸º docker-compose port [options] service private_portã\n\næå°æä¸ªå®¹å¨ç«¯å£ææ å°çå¬å±ç«¯å£ã\n\néé¡¹ï¼\n\n * --protocol=proto æå®ç«¯å£åè®®ï¼tcpï¼é»è®¤å¼ï¼æè udpã\n * --index=index å¦æåä¸æå¡å­å¨å¤ä¸ªå®¹å¨ï¼æå®å½ä»¤å¯¹è±¡å®¹å¨çåºå·ï¼é»è®¤ä¸º 1ï¼ã\n\n\n# ps\n\næ ¼å¼ä¸º docker-compose ps [options] [service...]ã\n\nååºé¡¹ç®ä¸­ç®åçææå®¹å¨ã\n\néé¡¹ï¼\n\n * -q åªæå°å®¹å¨ç id ä¿¡æ¯ã\n\n\n# pull\n\næ ¼å¼ä¸º docker-compose pull [options] [service...]ã\n\næåæå¡ä¾èµçéåã\n\néé¡¹ï¼\n\n * --ignore-pull-failures å¿½ç¥æåéåè¿ç¨ä¸­çéè¯¯ã\n\n\n# push\n\næ¨éæå¡ä¾èµçéåå° docker éåä»åºã\n\n\n# restart\n\næ ¼å¼ä¸º docker-compose restart [options] [service...]ã\n\néå¯é¡¹ç®ä¸­çæå¡ã\n\néé¡¹ï¼\n\n * -t, --timeout timeout æå®éå¯ååæ­¢å®¹å¨çè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# rm\n\næ ¼å¼ä¸º docker-compose rm [options] [service...]ã\n\nå é¤ææï¼åæ­¢ç¶æçï¼æå¡å®¹å¨ãæ¨èåæ§è¡ docker-compose stop å½ä»¤æ¥åæ­¢å®¹å¨ã\n\néé¡¹ï¼\n\n * -f, --force å¼ºå¶ç´æ¥å é¤ï¼åæ¬éåæ­¢ç¶æçå®¹å¨ãä¸è¬å°½éä¸è¦ä½¿ç¨è¯¥éé¡¹ã\n * -v å é¤å®¹å¨ææè½½çæ°æ®å·ã\n\n\n# run\n\næ ¼å¼ä¸º docker-compose run [options] [-p port...] [-e key=val...] service [command] [args...]ã\n\nå¨æå®æå¡ä¸æ§è¡ä¸ä¸ªå½ä»¤ã\n\nä¾å¦ï¼\n\ndocker-compose run ubuntu ping docker.com\n\n\nå°ä¼å¯å¨ä¸ä¸ª ubuntu æå¡å®¹å¨ï¼å¹¶æ§è¡ ping docker.com å½ä»¤ã\n\né»è®¤æåµä¸ï¼å¦æå­å¨å³èï¼åææå³èçæå¡å°ä¼èªå¨è¢«å¯å¨ï¼é¤éè¿äºæå¡å·²ç»å¨è¿è¡ä¸­ã\n\nè¯¥å½ä»¤ç±»ä¼¼å¯å¨å®¹å¨åè¿è¡æå®çå½ä»¤ï¼ç¸å³å·ãé¾æ¥ç­ç­é½å°ä¼æç§éç½®èªå¨åå»ºã\n\nä¸¤ä¸ªä¸åç¹ï¼\n\n * ç»å®å½ä»¤å°ä¼è¦çåæçèªå¨è¿è¡å½ä»¤ï¼\n * ä¸ä¼èªå¨åå»ºç«¯å£ï¼ä»¥é¿åå²çªã\n\nå¦æä¸å¸æèªå¨å¯å¨å³èçå®¹å¨ï¼å¯ä»¥ä½¿ç¨ --no-deps éé¡¹ï¼ä¾å¦\n\ndocker-compose run --no-deps web python manage.py shell\n\n\nå°ä¸ä¼å¯å¨ web å®¹å¨æå³èçå¶å®å®¹å¨ã\n\néé¡¹ï¼\n\n * -d åå°è¿è¡å®¹å¨ã\n * --name name ä¸ºå®¹å¨æå®ä¸ä¸ªåå­ã\n * --entrypoint cmd è¦çé»è®¤çå®¹å¨å¯å¨æä»¤ã\n * -e key=val è®¾ç½®ç¯å¢åéå¼ï¼å¯å¤æ¬¡ä½¿ç¨éé¡¹æ¥è®¾ç½®å¤ä¸ªç¯å¢åéã\n * -u, --user="" æå®è¿è¡å®¹å¨çç¨æ·åæè uidã\n * --no-deps ä¸èªå¨å¯å¨å³èçæå¡å®¹å¨ã\n * --rm è¿è¡å½ä»¤åèªå¨å é¤å®¹å¨ï¼d æ¨¡å¼ä¸å°å¿½ç¥ã\n * -p, --publish=[] æ å°å®¹å¨ç«¯å£å°æ¬å°ä¸»æºã\n * --service-ports éç½®æå¡ç«¯å£å¹¶æ å°å°æ¬å°ä¸»æºã\n * -t ä¸åéä¼ª ttyï¼æå³çä¾èµ tty çæä»¤å°æ æ³è¿è¡ã\n\n\n# scale\n\næ ¼å¼ä¸º docker-compose scale [options] [service=num...]ã\n\nè®¾ç½®æå®æå¡è¿è¡çå®¹å¨ä¸ªæ°ã\n\néè¿ service=num çåæ°æ¥è®¾ç½®æ°éãä¾å¦ï¼\n\ndocker-compose scale web=3 db=2\n\n\nå°å¯å¨ 3 ä¸ªå®¹å¨è¿è¡ web æå¡ï¼2 ä¸ªå®¹å¨è¿è¡ db æå¡ã\n\nä¸è¬çï¼å½æå®æ°ç®å¤äºè¯¥æå¡å½åå®éè¿è¡å®¹å¨ï¼å°æ°åå»ºå¹¶å¯å¨å®¹å¨ï¼åä¹ï¼å°åæ­¢å®¹å¨ã\n\néé¡¹ï¼\n\n * -t, --timeout timeout åæ­¢å®¹å¨æ¶åçè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# start\n\næ ¼å¼ä¸º docker-compose start [service...]ã\n\nå¯å¨å·²ç»å­å¨çæå¡å®¹å¨ã\n\n\n# stop\n\næ ¼å¼ä¸º docker-compose stop [options] [service...]ã\n\nåæ­¢å·²ç»å¤äºè¿è¡ç¶æçå®¹å¨ï¼ä½ä¸å é¤å®ãéè¿ docker-compose start å¯ä»¥åæ¬¡å¯å¨è¿äºå®¹å¨ã\n\néé¡¹ï¼\n\n * -t, --timeout timeout åæ­¢å®¹å¨æ¶åçè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# top\n\næ¥çåä¸ªæå¡å®¹å¨åè¿è¡çè¿ç¨ã\n\n\n# unpause\n\næ ¼å¼ä¸º docker-compose unpause [service...]ã\n\næ¢å¤å¤äºæåç¶æä¸­çæå¡ã\n\n\n# up\n\næ ¼å¼ä¸º docker-compose up [options] [service...]ã\n\nè¯¥å½ä»¤ååå¼ºå¤§ï¼å®å°å°è¯èªå¨å®æåæ¬æå»ºéåï¼ï¼éæ°ï¼åå»ºæå¡ï¼å¯å¨æå¡ï¼å¹¶å³èæå¡ç¸å³å®¹å¨çä¸ç³»åæä½ã\n\né¾æ¥çæå¡é½å°ä¼è¢«èªå¨å¯å¨ï¼é¤éå·²ç»å¤äºè¿è¡ç¶æã\n\nå¯ä»¥è¯´ï¼å¤§é¨åæ¶åé½å¯ä»¥ç´æ¥éè¿è¯¥å½ä»¤æ¥å¯å¨ä¸ä¸ªé¡¹ç®ã\n\né»è®¤æåµï¼docker-compose up å¯å¨çå®¹å¨é½å¨åå°ï¼æ§å¶å°å°ä¼åæ¶æå°ææå®¹å¨çè¾åºä¿¡æ¯ï¼å¯ä»¥å¾æ¹ä¾¿è¿è¡è°è¯ã\n\nå½éè¿ ctrl-c åæ­¢å½ä»¤æ¶ï¼ææå®¹å¨å°ä¼åæ­¢ã\n\nå¦æä½¿ç¨ docker-compose up -dï¼å°ä¼å¨åå°å¯å¨å¹¶è¿è¡ææçå®¹å¨ãä¸è¬æ¨èçäº§ç¯å¢ä¸ä½¿ç¨è¯¥éé¡¹ã\n\né»è®¤æåµï¼å¦ææå¡å®¹å¨å·²ç»å­å¨ï¼docker-compose up å°ä¼å°è¯åæ­¢å®¹å¨ï¼ç¶åéæ°åå»ºï¼ä¿æä½¿ç¨ volumes-from æè½½çå·ï¼ï¼ä»¥ä¿è¯æ°å¯å¨çæå¡å¹é docker-compose.yml æä»¶çææ°åå®¹ãå¦æç¨æ·ä¸å¸æå®¹å¨è¢«åæ­¢å¹¶éæ°åå»ºï¼å¯ä»¥ä½¿ç¨ docker-compose up --no-recreateãè¿æ ·å°åªä¼å¯å¨å¤äºåæ­¢ç¶æçå®¹å¨ï¼èå¿½ç¥å·²ç»è¿è¡çæå¡ãå¦æç¨æ·åªæ³éæ°é¨ç½²æä¸ªæå¡ï¼å¯ä»¥ä½¿ç¨ docker-compose up --no-deps -d æ¥éæ°åå»ºæå¡å¹¶åå°åæ­¢æ§æå¡ï¼å¯å¨æ°æå¡ï¼å¹¶ä¸ä¼å½±åå°å¶æä¾èµçæå¡ã\n\néé¡¹ï¼\n\n * -d å¨åå°è¿è¡æå¡å®¹å¨ã\n * --no-color ä¸ä½¿ç¨é¢è²æ¥åºåä¸åçæå¡çæ§å¶å°è¾åºã\n * --no-deps ä¸å¯å¨æå¡æé¾æ¥çå®¹å¨ã\n * --force-recreate å¼ºå¶éæ°åå»ºå®¹å¨ï¼ä¸è½ä¸ --no-recreate åæ¶ä½¿ç¨ã\n * --no-recreate å¦æå®¹å¨å·²ç»å­å¨äºï¼åä¸éæ°åå»ºï¼ä¸è½ä¸ --force-recreate åæ¶ä½¿ç¨ã\n * --no-build ä¸èªå¨æå»ºç¼ºå¤±çæå¡éåã\n * -t, --timeout timeout åæ­¢å®¹å¨æ¶åçè¶æ¶ï¼é»è®¤ä¸º 10 ç§ï¼ã\n\n\n# version\n\næ ¼å¼ä¸º docker-compose versionã\n\næå°çæ¬ä¿¡æ¯ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Compose æ¨¡æ¿æä»¶",frontmatter:{title:"Docker Compose æ¨¡æ¿æä»¶",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/5e9e65/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/05.Docker%20Compose%20%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/05.Docker Compose æ¨¡æ¿æä»¶.md",key:"v-0c749932",path:"/pages/5e9e65/",headers:[{level:2,title:"build",slug:"build",normalizedTitle:"build",charIndex:287},{level:2,title:"cap_add, cap_drop",slug:"cap-add-cap-drop",normalizedTitle:"cap_add, cap_drop",charIndex:948},{level:2,title:"command",slug:"command",normalizedTitle:"command",charIndex:1082},{level:2,title:"configs",slug:"configs",normalizedTitle:"configs",charIndex:1141},{level:2,title:"cgroup_parent",slug:"cgroup-parent",normalizedTitle:"cgroup_parent",charIndex:1169},{level:2,title:"container_name",slug:"container-name",normalizedTitle:"container_name",charIndex:1276},{level:2,title:"deploy",slug:"deploy",normalizedTitle:"deploy",charIndex:1426},{level:2,title:"devices",slug:"devices",normalizedTitle:"devices",charIndex:1453},{level:2,title:"depends_on",slug:"depends-on",normalizedTitle:"depends_on",charIndex:1519},{level:2,title:"dns",slug:"dns",normalizedTitle:"dns",charIndex:1757},{level:2,title:"dns_search",slug:"dns-search",normalizedTitle:"dns_search",charIndex:1848},{level:2,title:"tmpfs",slug:"tmpfs",normalizedTitle:"tmpfs",charIndex:1979},{level:2,title:"env_file",slug:"env-file",normalizedTitle:"env_file",charIndex:2049},{level:2,title:"environment",slug:"environment",normalizedTitle:"environment",charIndex:2171},{level:2,title:"expose",slug:"expose",normalizedTitle:"expose",charIndex:2765},{level:2,title:"external_links",slug:"external-links",normalizedTitle:"external_links",charIndex:2846},{level:2,title:"[#](https://wowox.com/zh/docs-docker/Docker-Compose-æ¨¡æ¿æä»¶.html#extra-hosts)extra_hosts",slug:"extra-hosts",normalizedTitle:'<a href="https://wowox.com/zh/docs-docker/docker-compose-%e6%a8%a1%e6%9d%bf%e6%96%87%e4%bb%b6.html#extra-hosts" target="_blank" rel="noopener noreferrer">#<outboundlink/></a>extra_hosts',charIndex:null},{level:2,title:"healthcheck",slug:"healthcheck",normalizedTitle:"healthcheck",charIndex:3218},{level:2,title:"image",slug:"image",normalizedTitle:"image",charIndex:183},{level:2,title:"labels",slug:"labels",normalizedTitle:"labels",charIndex:3478},{level:2,title:"links",slug:"links",normalizedTitle:"links",charIndex:2855},{level:2,title:"logging",slug:"logging",normalizedTitle:"logging",charIndex:3722},{level:2,title:"network_mode",slug:"network-mode",normalizedTitle:"network_mode",charIndex:3965},{level:2,title:"networks",slug:"networks",normalizedTitle:"networks",charIndex:4177},{level:2,title:"pid",slug:"pid",normalizedTitle:"pid",charIndex:4343},{level:2,title:"ports",slug:"ports",normalizedTitle:"ports",charIndex:207},{level:2,title:"secrets",slug:"secrets",normalizedTitle:"secrets",charIndex:2273},{level:2,title:"security_opt",slug:"security-opt",normalizedTitle:"security_opt",charIndex:5013},{level:2,title:"stop_signal",slug:"stop-signal",normalizedTitle:"stop_signal",charIndex:5144},{level:2,title:"sysctls",slug:"sysctls",normalizedTitle:"sysctls",charIndex:5222},{level:2,title:"ulimits",slug:"ulimits",normalizedTitle:"ulimits",charIndex:5380},{level:2,title:"volumes",slug:"volumes",normalizedTitle:"volumes",charIndex:234},{level:2,title:"å¶å®æä»¤",slug:"å¶å®æä»¤",normalizedTitle:"å¶å®æä»¤",charIndex:5750},{level:2,title:"è¯»ååé",slug:"è¯»ååé",normalizedTitle:"è¯»ååé",charIndex:6387}],headersStr:"build cap_add, cap_drop command configs cgroup_parent container_name deploy devices depends_on dns dns_search tmpfs env_file environment expose external_links [#](https://wowox.com/zh/docs-docker/Docker-Compose-æ¨¡æ¿æä»¶.html#extra-hosts)extra_hosts healthcheck image labels links logging network_mode networks pid ports secrets security_opt stop_signal sysctls ulimits volumes å¶å®æä»¤ è¯»ååé",content:'# Docker Compose æ¨¡æ¿æä»¶\n\næ¨¡æ¿æä»¶æ¯ä½¿ç¨ Compose çæ ¸å¿ï¼æ¶åå°çæä»¤å³é®å­ä¹æ¯è¾å¤ãä½å¤§å®¶ä¸ç¨æå¿ï¼è¿éé¢å¤§é¨åæä»¤è· docker run ç¸å³åæ°çå«ä¹é½æ¯ç±»ä¼¼çã\n\né»è®¤çæ¨¡æ¿æä»¶åç§°ä¸º docker-compose.ymlï¼æ ¼å¼ä¸º YAML æ ¼å¼ã\n\nversion: "3"\n\nservices:\n  webapp:\n    image: examples/web\n    ports:\n      - "80:80"\n    volumes:\n      - "/data"\n\n\næ³¨ææ¯ä¸ªæå¡é½å¿é¡»éè¿ image æä»¤æå®éåæ build æä»¤ï¼éè¦ Dockerfileï¼ç­æ¥èªå¨æå»ºçæéåã\n\nå¦æä½¿ç¨ build æä»¤ï¼å¨ Dockerfile ä¸­è®¾ç½®çéé¡¹(ä¾å¦ï¼CMD, EXPOSE, VOLUME, ENV ç­) å°ä¼èªå¨è¢«è·åï¼æ éå¨ docker-compose.yml ä¸­åæ¬¡è®¾ç½®ã\n\nä¸é¢åå«ä»ç»åä¸ªæä»¤çç¨æ³ã\n\n\n# build\n\næå® Dockerfile æå¨æä»¶å¤¹çè·¯å¾ï¼å¯ä»¥æ¯ç»å¯¹è·¯å¾ï¼æèç¸å¯¹ docker-compose.yml æä»¶çè·¯å¾ï¼ã Compose å°ä¼å©ç¨å®èªå¨æå»ºè¿ä¸ªéåï¼ç¶åä½¿ç¨è¿ä¸ªéåã\n\nversion: \'3\'\nservices:\n\n  webapp:\n    build: ./dir\n\n\nä½ ä¹å¯ä»¥ä½¿ç¨ context æä»¤æå® Dockerfile æå¨æä»¶å¤¹çè·¯å¾ã\n\nä½¿ç¨ dockerfile æä»¤æå® Dockerfile æä»¶åã\n\nä½¿ç¨ arg æä»¤æå®æå»ºéåæ¶çåéã\n\nversion: \'3\'\nservices:\n\n  webapp:\n    build:\n      context: ./dir\n      dockerfile: Dockerfile-alternate\n      args:\n        buildno: 1\n\n\nä½¿ç¨ cache_from æå®æå»ºéåçç¼å­\n\nbuild:\n  context: .\n  cache_from:\n    - alpine:latest\n    - corp/web_app:3.14\n\n\n\n# cap_add, cap_drop\n\næå®å®¹å¨çåæ ¸è½åï¼capacityï¼åéã\n\nä¾å¦ï¼è®©å®¹å¨æ¥æææè½åå¯ä»¥æå®ä¸ºï¼\n\ncap_add:\n  - ALL\n\n\nå»æ NET_ADMIN è½åå¯ä»¥æå®ä¸ºï¼\n\ncap_drop:\n  - NET_ADMIN\n\n\n\n# command\n\nè¦çå®¹å¨å¯å¨åé»è®¤æ§è¡çå½ä»¤ã\n\ncommand: echo "hello world"\n\n\n\n# configs\n\nä»ç¨äº Swarm mode\n\n\n# cgroup_parent\n\næå®ç¶ cgroup ç»ï¼æå³çå°ç»§æ¿è¯¥ç»çèµæºéå¶ã\n\nä¾å¦ï¼åå»ºäºä¸ä¸ª cgroup ç»åç§°ä¸º cgroups_1ã\n\ncgroup_parent: cgroups_1\n\n\n\n# container_name\n\næå®å®¹å¨åç§°ãé»è®¤å°ä¼ä½¿ç¨ é¡¹ç®åç§°_æå¡åç§°_åºå· è¿æ ·çæ ¼å¼ã\n\ncontainer_name: docker-web-container\n\n\næ³¨æ\n\næå®å®¹å¨åç§°åï¼è¯¥æå¡å°æ æ³è¿è¡æ©å±ï¼scaleï¼ï¼å ä¸º Docker ä¸åè®¸å¤ä¸ªå®¹å¨å·æç¸åçåç§°ã\n\n\n# deploy\n\nä»ç¨äº Swarm mode\n\n\n# devices\n\næå®è®¾å¤æ å°å³ç³»ã\n\ndevices:\n  - "/dev/ttyUSB1:/dev/ttyUSB0"\n\n\n\n# depends_on\n\nè§£å³å®¹å¨çä¾èµãå¯å¨ååçé®é¢ãä»¥ä¸ä¾å­ä¸­ä¼åå¯å¨ redis db åå¯å¨ web\n\nversion: \'3\'\n\nservices:\n  web:\n    build: .\n    depends_on:\n      - db\n      - redis\n\n  redis:\n    image: redis\n\n  db:\n    image: postgres\n\n\næ³¨æ\n\nweb æå¡ä¸ä¼ç­å¾ redis db ãå®å¨å¯å¨ãä¹åæå¯å¨ã\n\n\n# dns\n\nèªå®ä¹ DNS æå¡å¨ãå¯ä»¥æ¯ä¸ä¸ªå¼ï¼ä¹å¯ä»¥æ¯ä¸ä¸ªåè¡¨ã\n\ndns: 8.8.8.8\n\ndns:\n  - 8.8.8.8\n  - 114.114.114.114\n\n\n\n# dns_search\n\néç½® DNS æç´¢åãå¯ä»¥æ¯ä¸ä¸ªå¼ï¼ä¹å¯ä»¥æ¯ä¸ä¸ªåè¡¨ã\n\ndns_search: example.com\n\ndns_search:\n  - domain1.example.com\n  - domain2.example.com\n\n\n\n# tmpfs\n\næè½½ä¸ä¸ª tmpfs æä»¶ç³»ç»å°å®¹å¨ã\n\ntmpfs: /run\ntmpfs:\n  - /run\n  - /tmp\n\n\n\n# env_file\n\nä»æä»¶ä¸­è·åç¯å¢åéï¼å¯ä»¥ä¸ºåç¬çæä»¶è·¯å¾æåè¡¨ã\n\nå¦æéè¿ docker-compose -f FILE æ¹å¼æ¥æå® Compose æ¨¡æ¿æä»¶ï¼å env_file ä¸­åéçè·¯å¾ä¼åºäºæ¨¡æ¿æä»¶è·¯å¾ã\n\nå¦ææåéåç§°ä¸ environment æä»¤å²çªï¼åæç§æ¯ä¾ï¼ä»¥åèä¸ºåã\n\nenv_file: .env\n\nenv_file:\n  - ./common.env\n  - ./apps/web.env\n  - /opt/secrets.env\n\n\nç¯å¢åéæä»¶ä¸­æ¯ä¸è¡å¿é¡»ç¬¦åæ ¼å¼ï¼æ¯æ # å¼å¤´çæ³¨éè¡ã\n\n# common.env: Set development environment\nPROG_ENV=development\n\n\n\n# environment\n\nè®¾ç½®ç¯å¢åéãä½ å¯ä»¥ä½¿ç¨æ°ç»æå­å¸ä¸¤ç§æ ¼å¼ã\n\nåªç»å®åç§°çåéä¼èªå¨è·åè¿è¡ Compose ä¸»æºä¸å¯¹åºåéçå¼ï¼å¯ä»¥ç¨æ¥é²æ­¢æ³é²ä¸å¿è¦çæ°æ®ã\n\nenvironment:\n  RACK_ENV: development\n  SESSION_SECRET:\n\nenvironment:\n  - RACK_ENV=development\n  - SESSION_SECRET\n\n\nå¦æåéåç§°æèå¼ä¸­ç¨å° true|falseï¼yes|no ç­è¡¨è¾¾ å¸å° å«ä¹çè¯æ±ï¼æå¥½æ¾å°å¼å·éï¼é¿å YAML èªå¨è§£ææäºåå®¹ä¸ºå¯¹åºçå¸å°è¯­ä¹ãè¿äºç¹å®è¯æ±ï¼åæ¬\n\ny|Y|yes|Yes|YES|n|N|no|No|NO|true|True|TRUE|false|False|FALSE|on|On|ON|off|Off|OFF\n\n\n\n# expose\n\næ´é²ç«¯å£ï¼ä½ä¸æ å°å°å®¿ä¸»æºï¼åªè¢«è¿æ¥çæå¡è®¿é®ã\n\nä»å¯ä»¥æå®åé¨ç«¯å£ä¸ºåæ°\n\nexpose:\n - "3000"\n - "8000"\n\n\n\n# external_links\n\næ³¨æ\n\nä¸å»ºè®®ä½¿ç¨è¯¥æä»¤ã\n\né¾æ¥å° docker-compose.yml å¤é¨çå®¹å¨ï¼çè³å¹¶é Compose ç®¡ççå¤é¨å®¹å¨ã\n\nexternal_links:\n - redis_1\n - project_db_1:mysql\n - project_db_1:postgresql\n\n\n\n# #extra_hosts\n\nç±»ä¼¼ Docker ä¸­ç --add-host åæ°ï¼æå®é¢å¤ç host åç§°æ å°ä¿¡æ¯ã\n\nextra_hosts:\n - "googledns:8.8.8.8"\n - "dockerhub:52.1.157.61"\n\n\nä¼å¨å¯å¨åçæå¡å®¹å¨ä¸­ /etc/hosts æä»¶ä¸­æ·»å å¦ä¸ä¸¤æ¡æ¡ç®ã\n\n8.8.8.8 googledns\n52.1.157.61 dockerhub\n\n\n\n# healthcheck\n\néè¿å½ä»¤æ£æ¥å®¹å¨æ¯å¦å¥åº·è¿è¡ã\n\nhealthcheck:\n  test: ["CMD", "curl", "-f", "http://localhost"]\n  interval: 1m30s\n  timeout: 10s\n  retries: 3\n\n\n\n# image\n\næå®ä¸ºéååç§°æéå IDãå¦æéåå¨æ¬å°ä¸å­å¨ï¼Compose å°ä¼å°è¯æåè¿ä¸ªéåã\n\nimage: ubuntu\nimage: orchardup/postgresql\nimage: a4bc65fd\n\n\n\n# labels\n\nä¸ºå®¹å¨æ·»å  Docker åæ°æ®ï¼metadataï¼ä¿¡æ¯ãä¾å¦å¯ä»¥ä¸ºå®¹å¨æ·»å è¾å©è¯´æä¿¡æ¯ã\n\nlabels:\n  com.startupteam.description: "webapp for a startup team"\n  com.startupteam.department: "devops department"\n  com.startupteam.release: "rc3 for v1.0"\n\n\n\n# links\n\næ³¨æ\n\nä¸æ¨èä½¿ç¨è¯¥æä»¤ã\n\n\n# logging\n\néç½®æ¥å¿éé¡¹ã\n\nlogging:\n  driver: syslog\n  options:\n    syslog-address: "tcp://192.168.0.42:123"\n\n\nç®åæ¯æä¸ç§æ¥å¿é©±å¨ç±»åã\n\ndriver: "json-file"\ndriver: "syslog"\ndriver: "none"\n\n\noptions éç½®æ¥å¿é©±å¨çç¸å³åæ°ã\n\noptions:\n  max-size: "200k"\n  max-file: "10"\n\n\n\n# network_mode\n\nè®¾ç½®ç½ç»æ¨¡å¼ãä½¿ç¨å docker run ç --network åæ°ä¸æ ·çå¼ã\n\nnetwork_mode: "bridge"\nnetwork_mode: "host"\nnetwork_mode: "none"\nnetwork_mode: "service:[service name]"\nnetwork_mode: "container:[container name/id]"\n\n\n\n# networks\n\néç½®å®¹å¨è¿æ¥çç½ç»ã\n\nversion: "3"\nservices:\n\n  some-service:\n    networks:\n     - some-network\n     - other-network\n\nnetworks:\n  some-network:\n  other-network:\n\n\n\n# pid\n\nè·ä¸»æºç³»ç»å±äº«è¿ç¨å½åç©ºé´ãæå¼è¯¥éé¡¹çå®¹å¨ä¹é´ï¼ä»¥åå®¹å¨åå®¿ä¸»æºç³»ç»ä¹é´å¯ä»¥éè¿è¿ç¨ ID æ¥ç¸äºè®¿é®åæä½ã\n\npid: "host"\n\n\n\n# ports\n\næ´é²ç«¯å£ä¿¡æ¯ã\n\nä½¿ç¨å®¿ä¸»ç«¯å£ï¼å®¹å¨ç«¯å£ (HOST:CONTAINER) æ ¼å¼ï¼æèä»ä»æå®å®¹å¨çç«¯å£ï¼å®¿ä¸»å°ä¼éæºéæ©ç«¯å£ï¼é½å¯ä»¥ã\n\nports:\n - "3000"\n - "8000:8000"\n - "49100:22"\n - "127.0.0.1:8001:8001"\n\n\næ³¨æ\n\nå½ä½¿ç¨ HOST:CONTAINER æ ¼å¼æ¥æ å°ç«¯å£æ¶ï¼å¦æä½ ä½¿ç¨çå®¹å¨ç«¯å£å°äº 60 å¹¶ä¸æ²¡æ¾å°å¼å·éï¼å¯è½ä¼å¾å°éè¯¯ç»æï¼å ä¸º YAML ä¼èªå¨è§£æ xx:yy è¿ç§æ°å­æ ¼å¼ä¸º 60 è¿å¶ãä¸ºé¿ååºç°è¿ç§é®é¢ï¼å»ºè®®æ°å­ä¸²é½éç¨å¼å·åæ¬èµ·æ¥çå­ç¬¦ä¸²æ ¼å¼ã\n\n\n# secrets\n\nå­å¨æææ°æ®ï¼ä¾å¦ mysql æå¡å¯ç ã\n\nversion: "3.1"\nservices:\n\nmysql:\n  image: mysql\n  environment:\n    MYSQL_ROOT_PASSWORD_FILE: /run/secrets/db_root_password\n  secrets:\n    - db_root_password\n    - my_other_secret\n\nsecrets:\n  my_secret:\n    file: ./my_secret.txt\n  my_other_secret:\n    external: true\n\n\n\n# security_opt\n\næå®å®¹å¨æ¨¡æ¿æ ç­¾ï¼labelï¼æºå¶çé»è®¤å±æ§ï¼ç¨æ·ãè§è²ãç±»åãçº§å«ç­ï¼ãä¾å¦éç½®æ ç­¾çç¨æ·ååè§è²åã\n\nsecurity_opt:\n    - label:user:USER\n    - label:role:ROLE\n\n\n\n# stop_signal\n\nè®¾ç½®å¦ä¸ä¸ªä¿¡å·æ¥åæ­¢å®¹å¨ãå¨é»è®¤æåµä¸ä½¿ç¨çæ¯ SIGTERM åæ­¢å®¹å¨ã\n\nstop_signal: SIGUSR1\n\n\n\n# sysctls\n\néç½®å®¹å¨åæ ¸åæ°ã\n\nsysctls:\n  net.core.somaxconn: 1024\n  net.ipv4.tcp_syncookies: 0\n\nsysctls:\n  - net.core.somaxconn=1024\n  - net.ipv4.tcp_syncookies=0\n\n\n\n# ulimits\n\næå®å®¹å¨ç ulimits éå¶å¼ã\n\nä¾å¦ï¼æå®æå¤§è¿ç¨æ°ä¸º 65535ï¼æå®æä»¶å¥ææ°ä¸º 20000ï¼è½¯éå¶ï¼åºç¨å¯ä»¥éæ¶ä¿®æ¹ï¼ä¸è½è¶è¿ç¡¬éå¶ï¼ å 40000ï¼ç³»ç»ç¡¬éå¶ï¼åªè½ root ç¨æ·æé«ï¼ã\n\n  ulimits:\n    nproc: 65535\n    nofile:\n      soft: 20000\n      hard: 40000\n\n\n\n# volumes\n\næ°æ®å·ææè½½è·¯å¾è®¾ç½®ãå¯ä»¥è®¾ç½®å®¿ä¸»æºè·¯å¾ ï¼HOST:CONTAINERï¼ æå ä¸è®¿é®æ¨¡å¼ ï¼HOST:CONTAINER:roï¼ã\n\nè¯¥æä»¤ä¸­è·¯å¾æ¯æç¸å¯¹è·¯å¾ã\n\nvolumes:\n - /var/lib/mysql\n - cache/:/tmp/cache\n - ~/configs:/etc/configs/:ro\n\n\n\n# å¶å®æä»¤\n\næ­¤å¤ï¼è¿æåæ¬ domainname, entrypoint, hostname, ipc, mac_address, privileged, read_only, shm_size, restart, stdin_open, tty, user, working_dir ç­æä»¤ï¼åºæ¬è· docker run ä¸­å¯¹åºåæ°çåè½ä¸è´ã\n\næå®æå¡å®¹å¨å¯å¨åæ§è¡çå¥å£æä»¶ã\n\nentrypoint: /code/entrypoint.sh\n\n\næå®å®¹å¨ä¸­è¿è¡åºç¨çç¨æ·åã\n\nuser: nginx\n\n\næå®å®¹å¨ä¸­å·¥ä½ç®å½ã\n\nworking_dir: /code\n\n\næå®å®¹å¨ä¸­æç´¢ååãä¸»æºåãmac å°åç­ã\n\ndomainname: your_website.com\nhostname: test\nmac_address: 08-00-27-00-0C-0A\n\n\nåè®¸å®¹å¨ä¸­è¿è¡ä¸äºç¹æå½ä»¤ã\n\nprivileged: true\n\n\næå®å®¹å¨éåºåçéå¯ç­ç¥ä¸ºå§ç»éå¯ãè¯¥å½ä»¤å¯¹ä¿ææå¡å§ç»è¿è¡ååææï¼å¨çäº§ç¯å¢ä¸­æ¨èéç½®ä¸º always æè unless-stoppedã\n\nrestart: always\n\n\nä»¥åªè¯»æ¨¡å¼æè½½å®¹å¨ç root æä»¶ç³»ç»ï¼æå³çä¸è½å¯¹å®¹å¨åå®¹è¿è¡ä¿®æ¹ã\n\nread_only: true\n\n\næå¼æ åè¾å¥ï¼å¯ä»¥æ¥åå¤é¨è¾å¥ã\n\nstdin_open: true\n\n\næ¨¡æä¸ä¸ªä¼ªç»ç«¯ã\n\ntty: true\n\n\n\n# è¯»ååé\n\nCompose æ¨¡æ¿æä»¶æ¯æå¨æè¯»åä¸»æºçç³»ç»ç¯å¢åéåå½åç®å½ä¸ç .env æä»¶ä¸­çåéã\n\nä¾å¦ï¼ä¸é¢ç Compose æä»¶å°ä»è¿è¡å®çç¯å¢ä¸­è¯»ååé ${MONGO_VERSION} çå¼ï¼å¹¶åå¥æ§è¡çæä»¤ä¸­ã\n\nversion: "3"\nservices:\n\ndb:\n  image: "mongo:${MONGO_VERSION}"\n\n\nå¦ææ§è¡ MONGO_VERSION=3.2 docker-compose up åä¼å¯å¨ä¸ä¸ª mongo:3.2 éåçå®¹å¨ï¼å¦ææ§è¡ MONGO_VERSION=2.8 docker-compose up åä¼å¯å¨ä¸ä¸ª mongo:2.8 éåçå®¹å¨ã\n\nè¥å½åç®å½å­å¨ .env æä»¶ï¼æ§è¡ docker-compose å½ä»¤æ¶å°ä»è¯¥æä»¶ä¸­è¯»ååéã\n\nå¨å½åç®å½æ°å»º .env æä»¶å¹¶åå¥ä»¥ä¸åå®¹ã\n\n# æ¯æ # å·æ³¨é\nMONGO_VERSION=3.6\n\n\næ§è¡ docker-compose up åä¼å¯å¨ä¸ä¸ª mongo:3.6 éåçå®¹å¨ã',normalizedContent:'# docker compose æ¨¡æ¿æä»¶\n\næ¨¡æ¿æä»¶æ¯ä½¿ç¨ compose çæ ¸å¿ï¼æ¶åå°çæä»¤å³é®å­ä¹æ¯è¾å¤ãä½å¤§å®¶ä¸ç¨æå¿ï¼è¿éé¢å¤§é¨åæä»¤è· docker run ç¸å³åæ°çå«ä¹é½æ¯ç±»ä¼¼çã\n\né»è®¤çæ¨¡æ¿æä»¶åç§°ä¸º docker-compose.ymlï¼æ ¼å¼ä¸º yaml æ ¼å¼ã\n\nversion: "3"\n\nservices:\n  webapp:\n    image: examples/web\n    ports:\n      - "80:80"\n    volumes:\n      - "/data"\n\n\næ³¨ææ¯ä¸ªæå¡é½å¿é¡»éè¿ image æä»¤æå®éåæ build æä»¤ï¼éè¦ dockerfileï¼ç­æ¥èªå¨æå»ºçæéåã\n\nå¦æä½¿ç¨ build æä»¤ï¼å¨ dockerfile ä¸­è®¾ç½®çéé¡¹(ä¾å¦ï¼cmd, expose, volume, env ç­) å°ä¼èªå¨è¢«è·åï¼æ éå¨ docker-compose.yml ä¸­åæ¬¡è®¾ç½®ã\n\nä¸é¢åå«ä»ç»åä¸ªæä»¤çç¨æ³ã\n\n\n# build\n\næå® dockerfile æå¨æä»¶å¤¹çè·¯å¾ï¼å¯ä»¥æ¯ç»å¯¹è·¯å¾ï¼æèç¸å¯¹ docker-compose.yml æä»¶çè·¯å¾ï¼ã compose å°ä¼å©ç¨å®èªå¨æå»ºè¿ä¸ªéåï¼ç¶åä½¿ç¨è¿ä¸ªéåã\n\nversion: \'3\'\nservices:\n\n  webapp:\n    build: ./dir\n\n\nä½ ä¹å¯ä»¥ä½¿ç¨ context æä»¤æå® dockerfile æå¨æä»¶å¤¹çè·¯å¾ã\n\nä½¿ç¨ dockerfile æä»¤æå® dockerfile æä»¶åã\n\nä½¿ç¨ arg æä»¤æå®æå»ºéåæ¶çåéã\n\nversion: \'3\'\nservices:\n\n  webapp:\n    build:\n      context: ./dir\n      dockerfile: dockerfile-alternate\n      args:\n        buildno: 1\n\n\nä½¿ç¨ cache_from æå®æå»ºéåçç¼å­\n\nbuild:\n  context: .\n  cache_from:\n    - alpine:latest\n    - corp/web_app:3.14\n\n\n\n# cap_add, cap_drop\n\næå®å®¹å¨çåæ ¸è½åï¼capacityï¼åéã\n\nä¾å¦ï¼è®©å®¹å¨æ¥æææè½åå¯ä»¥æå®ä¸ºï¼\n\ncap_add:\n  - all\n\n\nå»æ net_admin è½åå¯ä»¥æå®ä¸ºï¼\n\ncap_drop:\n  - net_admin\n\n\n\n# command\n\nè¦çå®¹å¨å¯å¨åé»è®¤æ§è¡çå½ä»¤ã\n\ncommand: echo "hello world"\n\n\n\n# configs\n\nä»ç¨äº swarm mode\n\n\n# cgroup_parent\n\næå®ç¶ cgroup ç»ï¼æå³çå°ç»§æ¿è¯¥ç»çèµæºéå¶ã\n\nä¾å¦ï¼åå»ºäºä¸ä¸ª cgroup ç»åç§°ä¸º cgroups_1ã\n\ncgroup_parent: cgroups_1\n\n\n\n# container_name\n\næå®å®¹å¨åç§°ãé»è®¤å°ä¼ä½¿ç¨ é¡¹ç®åç§°_æå¡åç§°_åºå· è¿æ ·çæ ¼å¼ã\n\ncontainer_name: docker-web-container\n\n\næ³¨æ\n\næå®å®¹å¨åç§°åï¼è¯¥æå¡å°æ æ³è¿è¡æ©å±ï¼scaleï¼ï¼å ä¸º docker ä¸åè®¸å¤ä¸ªå®¹å¨å·æç¸åçåç§°ã\n\n\n# deploy\n\nä»ç¨äº swarm mode\n\n\n# devices\n\næå®è®¾å¤æ å°å³ç³»ã\n\ndevices:\n  - "/dev/ttyusb1:/dev/ttyusb0"\n\n\n\n# depends_on\n\nè§£å³å®¹å¨çä¾èµãå¯å¨ååçé®é¢ãä»¥ä¸ä¾å­ä¸­ä¼åå¯å¨ redis db åå¯å¨ web\n\nversion: \'3\'\n\nservices:\n  web:\n    build: .\n    depends_on:\n      - db\n      - redis\n\n  redis:\n    image: redis\n\n  db:\n    image: postgres\n\n\næ³¨æ\n\nweb æå¡ä¸ä¼ç­å¾ redis db ãå®å¨å¯å¨ãä¹åæå¯å¨ã\n\n\n# dns\n\nèªå®ä¹ dns æå¡å¨ãå¯ä»¥æ¯ä¸ä¸ªå¼ï¼ä¹å¯ä»¥æ¯ä¸ä¸ªåè¡¨ã\n\ndns: 8.8.8.8\n\ndns:\n  - 8.8.8.8\n  - 114.114.114.114\n\n\n\n# dns_search\n\néç½® dns æç´¢åãå¯ä»¥æ¯ä¸ä¸ªå¼ï¼ä¹å¯ä»¥æ¯ä¸ä¸ªåè¡¨ã\n\ndns_search: example.com\n\ndns_search:\n  - domain1.example.com\n  - domain2.example.com\n\n\n\n# tmpfs\n\næè½½ä¸ä¸ª tmpfs æä»¶ç³»ç»å°å®¹å¨ã\n\ntmpfs: /run\ntmpfs:\n  - /run\n  - /tmp\n\n\n\n# env_file\n\nä»æä»¶ä¸­è·åç¯å¢åéï¼å¯ä»¥ä¸ºåç¬çæä»¶è·¯å¾æåè¡¨ã\n\nå¦æéè¿ docker-compose -f file æ¹å¼æ¥æå® compose æ¨¡æ¿æä»¶ï¼å env_file ä¸­åéçè·¯å¾ä¼åºäºæ¨¡æ¿æä»¶è·¯å¾ã\n\nå¦ææåéåç§°ä¸ environment æä»¤å²çªï¼åæç§æ¯ä¾ï¼ä»¥åèä¸ºåã\n\nenv_file: .env\n\nenv_file:\n  - ./common.env\n  - ./apps/web.env\n  - /opt/secrets.env\n\n\nç¯å¢åéæä»¶ä¸­æ¯ä¸è¡å¿é¡»ç¬¦åæ ¼å¼ï¼æ¯æ # å¼å¤´çæ³¨éè¡ã\n\n# common.env: set development environment\nprog_env=development\n\n\n\n# environment\n\nè®¾ç½®ç¯å¢åéãä½ å¯ä»¥ä½¿ç¨æ°ç»æå­å¸ä¸¤ç§æ ¼å¼ã\n\nåªç»å®åç§°çåéä¼èªå¨è·åè¿è¡ compose ä¸»æºä¸å¯¹åºåéçå¼ï¼å¯ä»¥ç¨æ¥é²æ­¢æ³é²ä¸å¿è¦çæ°æ®ã\n\nenvironment:\n  rack_env: development\n  session_secret:\n\nenvironment:\n  - rack_env=development\n  - session_secret\n\n\nå¦æåéåç§°æèå¼ä¸­ç¨å° true|falseï¼yes|no ç­è¡¨è¾¾ å¸å° å«ä¹çè¯æ±ï¼æå¥½æ¾å°å¼å·éï¼é¿å yaml èªå¨è§£ææäºåå®¹ä¸ºå¯¹åºçå¸å°è¯­ä¹ãè¿äºç¹å®è¯æ±ï¼åæ¬\n\ny|y|yes|yes|yes|n|n|no|no|no|true|true|true|false|false|false|on|on|on|off|off|off\n\n\n\n# expose\n\næ´é²ç«¯å£ï¼ä½ä¸æ å°å°å®¿ä¸»æºï¼åªè¢«è¿æ¥çæå¡è®¿é®ã\n\nä»å¯ä»¥æå®åé¨ç«¯å£ä¸ºåæ°\n\nexpose:\n - "3000"\n - "8000"\n\n\n\n# external_links\n\næ³¨æ\n\nä¸å»ºè®®ä½¿ç¨è¯¥æä»¤ã\n\né¾æ¥å° docker-compose.yml å¤é¨çå®¹å¨ï¼çè³å¹¶é compose ç®¡ççå¤é¨å®¹å¨ã\n\nexternal_links:\n - redis_1\n - project_db_1:mysql\n - project_db_1:postgresql\n\n\n\n# #extra_hosts\n\nç±»ä¼¼ docker ä¸­ç --add-host åæ°ï¼æå®é¢å¤ç host åç§°æ å°ä¿¡æ¯ã\n\nextra_hosts:\n - "googledns:8.8.8.8"\n - "dockerhub:52.1.157.61"\n\n\nä¼å¨å¯å¨åçæå¡å®¹å¨ä¸­ /etc/hosts æä»¶ä¸­æ·»å å¦ä¸ä¸¤æ¡æ¡ç®ã\n\n8.8.8.8 googledns\n52.1.157.61 dockerhub\n\n\n\n# healthcheck\n\néè¿å½ä»¤æ£æ¥å®¹å¨æ¯å¦å¥åº·è¿è¡ã\n\nhealthcheck:\n  test: ["cmd", "curl", "-f", "http://localhost"]\n  interval: 1m30s\n  timeout: 10s\n  retries: 3\n\n\n\n# image\n\næå®ä¸ºéååç§°æéå idãå¦æéåå¨æ¬å°ä¸å­å¨ï¼compose å°ä¼å°è¯æåè¿ä¸ªéåã\n\nimage: ubuntu\nimage: orchardup/postgresql\nimage: a4bc65fd\n\n\n\n# labels\n\nä¸ºå®¹å¨æ·»å  docker åæ°æ®ï¼metadataï¼ä¿¡æ¯ãä¾å¦å¯ä»¥ä¸ºå®¹å¨æ·»å è¾å©è¯´æä¿¡æ¯ã\n\nlabels:\n  com.startupteam.description: "webapp for a startup team"\n  com.startupteam.department: "devops department"\n  com.startupteam.release: "rc3 for v1.0"\n\n\n\n# links\n\næ³¨æ\n\nä¸æ¨èä½¿ç¨è¯¥æä»¤ã\n\n\n# logging\n\néç½®æ¥å¿éé¡¹ã\n\nlogging:\n  driver: syslog\n  options:\n    syslog-address: "tcp://192.168.0.42:123"\n\n\nç®åæ¯æä¸ç§æ¥å¿é©±å¨ç±»åã\n\ndriver: "json-file"\ndriver: "syslog"\ndriver: "none"\n\n\noptions éç½®æ¥å¿é©±å¨çç¸å³åæ°ã\n\noptions:\n  max-size: "200k"\n  max-file: "10"\n\n\n\n# network_mode\n\nè®¾ç½®ç½ç»æ¨¡å¼ãä½¿ç¨å docker run ç --network åæ°ä¸æ ·çå¼ã\n\nnetwork_mode: "bridge"\nnetwork_mode: "host"\nnetwork_mode: "none"\nnetwork_mode: "service:[service name]"\nnetwork_mode: "container:[container name/id]"\n\n\n\n# networks\n\néç½®å®¹å¨è¿æ¥çç½ç»ã\n\nversion: "3"\nservices:\n\n  some-service:\n    networks:\n     - some-network\n     - other-network\n\nnetworks:\n  some-network:\n  other-network:\n\n\n\n# pid\n\nè·ä¸»æºç³»ç»å±äº«è¿ç¨å½åç©ºé´ãæå¼è¯¥éé¡¹çå®¹å¨ä¹é´ï¼ä»¥åå®¹å¨åå®¿ä¸»æºç³»ç»ä¹é´å¯ä»¥éè¿è¿ç¨ id æ¥ç¸äºè®¿é®åæä½ã\n\npid: "host"\n\n\n\n# ports\n\næ´é²ç«¯å£ä¿¡æ¯ã\n\nä½¿ç¨å®¿ä¸»ç«¯å£ï¼å®¹å¨ç«¯å£ (host:container) æ ¼å¼ï¼æèä»ä»æå®å®¹å¨çç«¯å£ï¼å®¿ä¸»å°ä¼éæºéæ©ç«¯å£ï¼é½å¯ä»¥ã\n\nports:\n - "3000"\n - "8000:8000"\n - "49100:22"\n - "127.0.0.1:8001:8001"\n\n\næ³¨æ\n\nå½ä½¿ç¨ host:container æ ¼å¼æ¥æ å°ç«¯å£æ¶ï¼å¦æä½ ä½¿ç¨çå®¹å¨ç«¯å£å°äº 60 å¹¶ä¸æ²¡æ¾å°å¼å·éï¼å¯è½ä¼å¾å°éè¯¯ç»æï¼å ä¸º yaml ä¼èªå¨è§£æ xx:yy è¿ç§æ°å­æ ¼å¼ä¸º 60 è¿å¶ãä¸ºé¿ååºç°è¿ç§é®é¢ï¼å»ºè®®æ°å­ä¸²é½éç¨å¼å·åæ¬èµ·æ¥çå­ç¬¦ä¸²æ ¼å¼ã\n\n\n# secrets\n\nå­å¨æææ°æ®ï¼ä¾å¦ mysql æå¡å¯ç ã\n\nversion: "3.1"\nservices:\n\nmysql:\n  image: mysql\n  environment:\n    mysql_root_password_file: /run/secrets/db_root_password\n  secrets:\n    - db_root_password\n    - my_other_secret\n\nsecrets:\n  my_secret:\n    file: ./my_secret.txt\n  my_other_secret:\n    external: true\n\n\n\n# security_opt\n\næå®å®¹å¨æ¨¡æ¿æ ç­¾ï¼labelï¼æºå¶çé»è®¤å±æ§ï¼ç¨æ·ãè§è²ãç±»åãçº§å«ç­ï¼ãä¾å¦éç½®æ ç­¾çç¨æ·ååè§è²åã\n\nsecurity_opt:\n    - label:user:user\n    - label:role:role\n\n\n\n# stop_signal\n\nè®¾ç½®å¦ä¸ä¸ªä¿¡å·æ¥åæ­¢å®¹å¨ãå¨é»è®¤æåµä¸ä½¿ç¨çæ¯ sigterm åæ­¢å®¹å¨ã\n\nstop_signal: sigusr1\n\n\n\n# sysctls\n\néç½®å®¹å¨åæ ¸åæ°ã\n\nsysctls:\n  net.core.somaxconn: 1024\n  net.ipv4.tcp_syncookies: 0\n\nsysctls:\n  - net.core.somaxconn=1024\n  - net.ipv4.tcp_syncookies=0\n\n\n\n# ulimits\n\næå®å®¹å¨ç ulimits éå¶å¼ã\n\nä¾å¦ï¼æå®æå¤§è¿ç¨æ°ä¸º 65535ï¼æå®æä»¶å¥ææ°ä¸º 20000ï¼è½¯éå¶ï¼åºç¨å¯ä»¥éæ¶ä¿®æ¹ï¼ä¸è½è¶è¿ç¡¬éå¶ï¼ å 40000ï¼ç³»ç»ç¡¬éå¶ï¼åªè½ root ç¨æ·æé«ï¼ã\n\n  ulimits:\n    nproc: 65535\n    nofile:\n      soft: 20000\n      hard: 40000\n\n\n\n# volumes\n\næ°æ®å·ææè½½è·¯å¾è®¾ç½®ãå¯ä»¥è®¾ç½®å®¿ä¸»æºè·¯å¾ ï¼host:containerï¼ æå ä¸è®¿é®æ¨¡å¼ ï¼host:container:roï¼ã\n\nè¯¥æä»¤ä¸­è·¯å¾æ¯æç¸å¯¹è·¯å¾ã\n\nvolumes:\n - /var/lib/mysql\n - cache/:/tmp/cache\n - ~/configs:/etc/configs/:ro\n\n\n\n# å¶å®æä»¤\n\næ­¤å¤ï¼è¿æåæ¬ domainname, entrypoint, hostname, ipc, mac_address, privileged, read_only, shm_size, restart, stdin_open, tty, user, working_dir ç­æä»¤ï¼åºæ¬è· docker run ä¸­å¯¹åºåæ°çåè½ä¸è´ã\n\næå®æå¡å®¹å¨å¯å¨åæ§è¡çå¥å£æä»¶ã\n\nentrypoint: /code/entrypoint.sh\n\n\næå®å®¹å¨ä¸­è¿è¡åºç¨çç¨æ·åã\n\nuser: nginx\n\n\næå®å®¹å¨ä¸­å·¥ä½ç®å½ã\n\nworking_dir: /code\n\n\næå®å®¹å¨ä¸­æç´¢ååãä¸»æºåãmac å°åç­ã\n\ndomainname: your_website.com\nhostname: test\nmac_address: 08-00-27-00-0c-0a\n\n\nåè®¸å®¹å¨ä¸­è¿è¡ä¸äºç¹æå½ä»¤ã\n\nprivileged: true\n\n\næå®å®¹å¨éåºåçéå¯ç­ç¥ä¸ºå§ç»éå¯ãè¯¥å½ä»¤å¯¹ä¿ææå¡å§ç»è¿è¡ååææï¼å¨çäº§ç¯å¢ä¸­æ¨èéç½®ä¸º always æè unless-stoppedã\n\nrestart: always\n\n\nä»¥åªè¯»æ¨¡å¼æè½½å®¹å¨ç root æä»¶ç³»ç»ï¼æå³çä¸è½å¯¹å®¹å¨åå®¹è¿è¡ä¿®æ¹ã\n\nread_only: true\n\n\næå¼æ åè¾å¥ï¼å¯ä»¥æ¥åå¤é¨è¾å¥ã\n\nstdin_open: true\n\n\næ¨¡æä¸ä¸ªä¼ªç»ç«¯ã\n\ntty: true\n\n\n\n# è¯»ååé\n\ncompose æ¨¡æ¿æä»¶æ¯æå¨æè¯»åä¸»æºçç³»ç»ç¯å¢åéåå½åç®å½ä¸ç .env æä»¶ä¸­çåéã\n\nä¾å¦ï¼ä¸é¢ç compose æä»¶å°ä»è¿è¡å®çç¯å¢ä¸­è¯»ååé ${mongo_version} çå¼ï¼å¹¶åå¥æ§è¡çæä»¤ä¸­ã\n\nversion: "3"\nservices:\n\ndb:\n  image: "mongo:${mongo_version}"\n\n\nå¦ææ§è¡ mongo_version=3.2 docker-compose up åä¼å¯å¨ä¸ä¸ª mongo:3.2 éåçå®¹å¨ï¼å¦ææ§è¡ mongo_version=2.8 docker-compose up åä¼å¯å¨ä¸ä¸ª mongo:2.8 éåçå®¹å¨ã\n\nè¥å½åç®å½å­å¨ .env æä»¶ï¼æ§è¡ docker-compose å½ä»¤æ¶å°ä»è¯¥æä»¶ä¸­è¯»ååéã\n\nå¨å½åç®å½æ°å»º .env æä»¶å¹¶åå¥ä»¥ä¸åå®¹ã\n\n# æ¯æ # å·æ³¨é\nmongo_version=3.6\n\n\næ§è¡ docker-compose up åä¼å¯å¨ä¸ä¸ª mongo:3.6 éåçå®¹å¨ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Compose å®æ WordPress",frontmatter:{title:"Docker Compose å®æ WordPress",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/7285c6/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/06.Docker%20Compose%20%E5%AE%9E%E6%88%98%20WordPress.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/06.Docker Compose å®æ WordPress.md",key:"v-3c3f9ba1",path:"/pages/7285c6/",headers:[{level:2,title:"åå»ºç©ºæä»¶å¤¹",slug:"åå»ºç©ºæä»¶å¤¹",normalizedTitle:"åå»ºç©ºæä»¶å¤¹",charIndex:95},{level:2,title:"åå»º docker-compose.yml æä»¶",slug:"åå»º-docker-compose-yml-æä»¶",normalizedTitle:"åå»º docker-compose.yml æä»¶",charIndex:142},{level:2,title:"æå»ºå¹¶è¿è¡é¡¹ç®",slug:"æå»ºå¹¶è¿è¡é¡¹ç®",normalizedTitle:"æå»ºå¹¶è¿è¡é¡¹ç®",charIndex:780}],headersStr:"åå»ºç©ºæä»¶å¤¹ åå»º docker-compose.yml æä»¶ æå»ºå¹¶è¿è¡é¡¹ç®",content:'# Docker Compose å®æ WordPress\n\næ¬å°èåå®¹éå PHP å¼åäººåéè¯»ã\n\nCompose å¯ä»¥å¾ä¾¿æ·çè®© Wordpress è¿è¡å¨ä¸ä¸ªç¬ç«çç¯å¢ä¸­ã\n\n\n# åå»ºç©ºæä»¶å¤¹\n\nåè®¾æ°å»ºä¸ä¸ªåä¸º wordpress çæä»¶å¤¹ï¼ç¶åè¿å¥è¿ä¸ªæä»¶å¤¹ã\n\n\n# åå»º docker-compose.yml æä»¶\n\ndocker-compose.yml æä»¶å°å¼å¯ä¸ä¸ª wordpress æå¡åä¸ä¸ªç¬ç«ç MySQL å®ä¾ï¼\n\nversion: "3"\nservices:\n\n   db:\n     image: mysql:5.7\n     volumes:\n       - db_data:/var/lib/mysql\n     restart: always\n     environment:\n       MYSQL_ROOT_PASSWORD: somewordpress\n       MYSQL_DATABASE: wordpress\n       MYSQL_USER: wordpress\n       MYSQL_PASSWORD: wordpress\n\n   wordpress:\n     depends_on:\n       - db\n     image: wordpress:latest\n     ports:\n       - "8000:80"\n     restart: always\n     environment:\n       WORDPRESS_DB_HOST: db:3306\n       WORDPRESS_DB_USER: wordpress\n       WORDPRESS_DB_PASSWORD: wordpress\nvolumes:\n    db_data:\n\n\n\n# æå»ºå¹¶è¿è¡é¡¹ç®\n\nè¿è¡ docker-compose up -d Compose å°±ä¼æåéåååå»ºæä»¬æéè¦çéåï¼ç¶åå¯å¨ wordpress åæ°æ®åºå®¹å¨ã æ¥çæµè§å¨è®¿é® 127.0.0.1:8000 ç«¯å£å°±è½çå° WordPress å®è£çé¢äºã',normalizedContent:'# docker compose å®æ wordpress\n\næ¬å°èåå®¹éå php å¼åäººåéè¯»ã\n\ncompose å¯ä»¥å¾ä¾¿æ·çè®© wordpress è¿è¡å¨ä¸ä¸ªç¬ç«çç¯å¢ä¸­ã\n\n\n# åå»ºç©ºæä»¶å¤¹\n\nåè®¾æ°å»ºä¸ä¸ªåä¸º wordpress çæä»¶å¤¹ï¼ç¶åè¿å¥è¿ä¸ªæä»¶å¤¹ã\n\n\n# åå»º docker-compose.yml æä»¶\n\ndocker-compose.yml æä»¶å°å¼å¯ä¸ä¸ª wordpress æå¡åä¸ä¸ªç¬ç«ç mysql å®ä¾ï¼\n\nversion: "3"\nservices:\n\n   db:\n     image: mysql:5.7\n     volumes:\n       - db_data:/var/lib/mysql\n     restart: always\n     environment:\n       mysql_root_password: somewordpress\n       mysql_database: wordpress\n       mysql_user: wordpress\n       mysql_password: wordpress\n\n   wordpress:\n     depends_on:\n       - db\n     image: wordpress:latest\n     ports:\n       - "8000:80"\n     restart: always\n     environment:\n       wordpress_db_host: db:3306\n       wordpress_db_user: wordpress\n       wordpress_db_password: wordpress\nvolumes:\n    db_data:\n\n\n\n# æå»ºå¹¶è¿è¡é¡¹ç®\n\nè¿è¡ docker-compose up -d compose å°±ä¼æåéåååå»ºæä»¬æéè¦çéåï¼ç¶åå¯å¨ wordpress åæ°æ®åºå®¹å¨ã æ¥çæµè§å¨è®¿é® 127.0.0.1:8000 ç«¯å£å°±è½çå° wordpress å®è£çé¢äºã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Compose å®æ Tomcat",frontmatter:{title:"Docker Compose å®æ Tomcat",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/8a9ceb/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/07.Docker%20Compose%20%E5%AE%9E%E6%88%98%20Tomcat.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/07.Docker Compose å®æ Tomcat.md",key:"v-ae86ef32",path:"/pages/8a9ceb/",headersStr:null,content:"# Docker Compose å®æ Tomcat\n\nversion: '3.1'\nservices:\n  tomcat:\n    restart: always\n    image: tomcat\n    container_name: tomcat\n    ports:\n      - 8080:8080\n    volumes:\n      - /usr/local/docker/tomcat/webapps/test:/usr/local/tomcat/webapps/test\n    environment:\n      TZ: Asia/Shanghai\n",normalizedContent:"# docker compose å®æ tomcat\n\nversion: '3.1'\nservices:\n  tomcat:\n    restart: always\n    image: tomcat\n    container_name: tomcat\n    ports:\n      - 8080:8080\n    volumes:\n      - /usr/local/docker/tomcat/webapps/test:/usr/local/tomcat/webapps/test\n    environment:\n      tz: asia/shanghai\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"å¾®æå¡çç¼ºç¹",frontmatter:{title:"å¾®æå¡çç¼ºç¹",date:"2022-02-09T11:40:48.000Z",permalink:"/pages/fb92c3/"},regularPath:"/14.%E5%BE%AE%E6%9C%8D%E5%8A%A1/01.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B/05.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%BC%BA%E7%82%B9.html",relativePath:"14.å¾®æå¡/01.å¾®æå¡ç®ä»/05.å¾®æå¡çç¼ºç¹.md",key:"v-28665664",path:"/pages/fb92c3/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:13},{level:2,title:"å°ç»",slug:"å°ç»",normalizedTitle:"å°ç»",charIndex:1532}],headersStr:"æ¦è¿° å°ç»",content:"# å¾®æå¡çç¼ºç¹\n\n\n# æ¦è¿°\n\nå°±å Fred Brooks å¤§çº¦å¨ 30 å¹´ååçãäººæç¥è¯ãä¸­è¯´çï¼æ²¡æé¶å¼¹ãä¸å¶ä»ææ¯ä¸æ ·ï¼å¾®æå¡æ¶ææ¨¡å¼ä¹å­å¨çç¼ºç¹ãå¶ä¸­ä¸ä¸ªç¼ºç¹å°±æ¯åç§°æ¬èº«ãå¾®æå¡è¿ä¸ªæ¯è¯­çéç¹è¿å¤ååäºæå¡çè§æ¨¡ãäºå®ä¸ï¼æäºå¼åèä¸»å¼ æå»ºæç»ç²åº¦ç 10 è³ 100 LOCï¼ä»£ç è¡ï¼ æå¡ï¼è½ç¶è¿å¯¹äºå°åæå¡å¯è½æ¯è¾å¥½ï¼ä½éè¦çæ¯è¦è®°ä½ï¼å°åæå¡åªæ¯ä¸ç§ææ®µï¼èä¸æ¯ä¸»è¦ç®æ ãå¾®æå¡çç®æ å¨äºåååè§£åºç¨ç¨åºä»¥æ¹ä¾¿åºç¨ææ·å¼ååé¨ç½²ã\n\nå¾®æå¡å¦ä¸ä¸ªä¸»è¦ç¼ºç¹æ¯ç±äºå¾®æå¡æ¯ä¸ä¸ªåå¸å¼ç³»ç»ï¼å¶ä½¿å¾æ´ä½åå¾å¤æãå¼åèéè¦éæ©åå®ç°åºäºæ¶æ¯æè RPC çè¿ç¨é´éä¿¡æºå¶ãæ­¤å¤ï¼ç±äºç®æ è¯·æ±å¯è½å¾æ¢æèä¸å¯ç¨ï¼ä»ä»¬å¿é¡»è¦ç¼åä»£ç æ¥å¤çå±é¨æéãè½ç¶è¿äºå¹¶ä¸æ¯å¾å¤æãé«æ·±ï¼ä½æ¨¡åé´éè¿è¯­è¨çº§æ¹æ³/è¿ç¨è°ç¨ç¸äºè°ç¨ï¼è¿æ¯åä½åºç¨è¦å¤æå¾å¤ã\n\nå¾®æå¡çå¦ä¸ä¸ªæææ¯ååºæ°æ®åºæ¶æãæ´æ°å¤ä¸ªä¸å¡å®ä½çä¸å¡äºå¡æ¯ç¸å½æ®éçãè¿äºäºå¡å¨åä½åºç¨ä¸­çå®ç°æ¾å¾å¾®ä¸è¶³éï¼å ä¸ºåä½åªå­å¨ä¸ä¸ªåç¬çæ°æ®åºãå¨åºäºå¾®æå¡çåºç¨ç¨åºä¸­ï¼æ¨éè¦æ´æ°ä¸åæå¡æç¨çæ°æ®åºãéå¸¸ä¸ä¼éæ©åå¸å¼äºå¡ï¼ä¸ä»ä»æ¯å ä¸º CAP å®çãä»ä»¬æ ¹æ¬ä¸æ¯æå¦ä»é«åº¦å¯æ©å±ç NoSQL æ°æ®åºåæ¶æ¯ä»£çãæ¨æåä¸å¾ä¸ä½¿ç¨åºäºæç»ä¸è´æ§çæ¹æ³ï¼è¿å¯¹äºå¼åäººåæ¥è¯´æ´å·æææ§ã\n\næµè¯å¾®æå¡åºç¨ç¨åºä¹å¾å¤æãä¾å¦ï¼ä½¿ç¨ç°ä»£æ¡æ¶å¦ Spring Bootï¼åªéè¦ç¼åä¸ä¸ªæµè¯ç±»æ¥å¯å¨ä¸ä¸ªåä½ web åºç¨ç¨åºå¹¶æµè¯å¶ REST APIãç¸æ¯ä¹ä¸ï¼ä¸ä¸ªç±»ä¼¼çæµè¯ç±»å¯¹äºå¾®æå¡æ¥è¯´éè¦å¯å¨è¯¥æå¡åå¶æä¾èµçæææå¡ï¼æèè³å°ä¸ºè¿äºæå¡éç½®å­æ ¹ãåæ¬¡å£°æï¼è½ç¶è¿ä¸æ¯ä¸ä»¶é«æ·±çäºæï¼ä½ä¸è¦ä½ä¼°äºè¿æ ·åçå¤ææ§ã\n\nå¾®æå¡æ¶ææ¨¡å¼çå¦ä¸ä¸ªä¸»è¦æææ¯å®ç°äºè·¨è¶å¤æå¡åæ´ãä¾å¦ï¼æä»¬åè®¾æ¨æ­£å¨å®ç°ä¸ä¸ªåæ´æå¡ Aãæå¡ B å æå¡ C çéæ±ï¼å¶ä¸­ A ä¾èµäº Bï¼ä¸ B ä¾èµäº Cãå¨åä½åºç¨ç¨åºä¸­ï¼æ¨å¯ä»¥ç®åå°ä¿®æ¹ç¸åºçæ¨¡åãæ´ååæ´å¹¶ä¸æ¬¡æ§é¨ç½²ä»ä»¬ãç¸åï¼å¨å¾®æå¡ä¸­æ¨éè¦ä»ç»è§åååè°åºç°çåæ´è³æ¯ä¸ªæå¡ãä¾å¦ï¼æ¨éè¦æ´æ°æå¡ Cï¼ç¶åæ´æ°æå¡ Bï¼æåæ´æ°æå¡ Aãå¹¸è¿çæ¯ï¼å¤§å¤æ°åæ´åªä¼å½±åä¸ä¸ªæå¡ï¼éè¦åè°çå¤æå¡åæ´ç¸å¯¹è¾å°ã\n\né¨ç½²åºäºå¾®æå¡çåºç¨ç¨åºä¹æ¯ç¸å½å¤æçãä¸ä¸ªåä½åºç¨å¯ä»¥å¾å®¹æå°é¨ç½²å°åºäºä¼ ç»è´è½½åè¡¡å¨çä¸ç»ç¸åæå¡å¨ä¸ãæ¯ä¸ªåºç¨ç¨åºå®ä¾é½éç½®æåºç¡è®¾æ½æå¡çä½ç½®ï¼ä¸»æºåç«¯å£ï¼ï¼æ¯å¦æ°æ®åºåæ¶æ¯ä»£çãç¸æ¯ä¹ä¸ï¼å¾®æå¡åºç¨ç¨åºéå¸¸ç±å¤§éçæå¡ç»æãä¾å¦ï¼æ® Adrian Cockcroft äºè§£å°ï¼Hailo æ¥æ 160 ä¸ªä¸åçæå¡ï¼Netflix æ¥æçæå¡è¶è¿ 600 ä¸ªã\n\næ¯ä¸ªæå¡é½æå¤ä¸ªè¿è¡æ¶å®ä¾ãè¿ææ´å¤çç§»å¨é¨ä»¶éè¦éç½®ãé¨ç½²ãæ©å±åçæ§ãæ­¤å¤ï¼æ¨è¿éè¦å®ç°æå¡åç°æºå¶ï¼ä½¿å¾æå¡è½å¤åç°éè¦ä¸ä¹éä¿¡çä»»ä½å¶ä»æå¡çä½ç½®ï¼ä¸»æºåç«¯å£ï¼ãæ¯è¾ä¼ ç»éº»ç¦çåºäºç¥¨æ®ï¼ticket-basedï¼åæå¨çæä½æ¹å¼æ æ³æ©å±å°å¦æ­¤å¤æç¨åº¦ãå æ­¤ï¼è¦æåé¨ç½²å¾®æå¡åºç¨ç¨åºï¼éè¦æ±å¼åäººåè½é«åº¦æ§å¶é¨ç½²æ¹å¼åé«åº¦èªå¨åã\n\nä¸ç§èªå¨åæ¹å¼æ¯ä½¿ç¨ç°æçå¹³å°å³æå¡ï¼PaaSï¼ï¼å¦ Cloud FoundryãPaaS ä¸ºå¼åäººåæä¾äºä¸ç§ç®åçæ¹å¼æ¥é¨ç½²åç®¡çä»ä»¬çå¾®æå¡ãå®è®©å¼åäººåé¿å¼äºè¯¸å¦éè´­åéç½® IT èµæºç­ç¦æ¼ãåæ¶ï¼éç½® PaaS çç³»ç»äººååç½ç»ä¸ä¸äººåå¯ä»¥ç¡®ä¿è¾¾å°æä½³å®è·µä»¥è½å®å¬å¸ç­ç¥ã\n\nèªå¨åå¾®æå¡é¨ç½²çå¦ä¸ä¸ªæ¹å¼æ¯å¼åèªå·±ç PaaSãä¸ä¸ªæ®éçèµ·ç¹æ¯ä½¿ç¨éç¾¤æ¹æ¡ï¼å¦ Kubernetesï¼ä¸ Docker ç­å®¹å¨ææ¯ç¸ç»åã\n\n\n# å°ç»\n\næå»ºå¤æçå¾®æå¡åºç¨ç¨åºæ¬è´¨ä¸æ¯å°é¾çãåä½æ¶ææ¨¡å¼åªéç¨äºç®åãè½»éçº§çåºç¨ç¨åºï¼å¦ææ¨ä½¿ç¨å®æ¥æå»ºå¤æåºç¨ï¼æ¨æç»ä¼é·å¥çè¦çå¢å°ãå¾®æå¡æ¶ææ¨¡å¼æ¯å¤æãæç»­åå±åºç¨çä¸ä¸ªæ´å¥½çéæ©ãå°½ç®¡å®å­å¨çç¼ºç¹åå®ç°ææã",normalizedContent:"# å¾®æå¡çç¼ºç¹\n\n\n# æ¦è¿°\n\nå°±å fred brooks å¤§çº¦å¨ 30 å¹´ååçãäººæç¥è¯ãä¸­è¯´çï¼æ²¡æé¶å¼¹ãä¸å¶ä»ææ¯ä¸æ ·ï¼å¾®æå¡æ¶ææ¨¡å¼ä¹å­å¨çç¼ºç¹ãå¶ä¸­ä¸ä¸ªç¼ºç¹å°±æ¯åç§°æ¬èº«ãå¾®æå¡è¿ä¸ªæ¯è¯­çéç¹è¿å¤ååäºæå¡çè§æ¨¡ãäºå®ä¸ï¼æäºå¼åèä¸»å¼ æå»ºæç»ç²åº¦ç 10 è³ 100 locï¼ä»£ç è¡ï¼ æå¡ï¼è½ç¶è¿å¯¹äºå°åæå¡å¯è½æ¯è¾å¥½ï¼ä½éè¦çæ¯è¦è®°ä½ï¼å°åæå¡åªæ¯ä¸ç§ææ®µï¼èä¸æ¯ä¸»è¦ç®æ ãå¾®æå¡çç®æ å¨äºåååè§£åºç¨ç¨åºä»¥æ¹ä¾¿åºç¨ææ·å¼ååé¨ç½²ã\n\nå¾®æå¡å¦ä¸ä¸ªä¸»è¦ç¼ºç¹æ¯ç±äºå¾®æå¡æ¯ä¸ä¸ªåå¸å¼ç³»ç»ï¼å¶ä½¿å¾æ´ä½åå¾å¤æãå¼åèéè¦éæ©åå®ç°åºäºæ¶æ¯æè rpc çè¿ç¨é´éä¿¡æºå¶ãæ­¤å¤ï¼ç±äºç®æ è¯·æ±å¯è½å¾æ¢æèä¸å¯ç¨ï¼ä»ä»¬å¿é¡»è¦ç¼åä»£ç æ¥å¤çå±é¨æéãè½ç¶è¿äºå¹¶ä¸æ¯å¾å¤æãé«æ·±ï¼ä½æ¨¡åé´éè¿è¯­è¨çº§æ¹æ³/è¿ç¨è°ç¨ç¸äºè°ç¨ï¼è¿æ¯åä½åºç¨è¦å¤æå¾å¤ã\n\nå¾®æå¡çå¦ä¸ä¸ªæææ¯ååºæ°æ®åºæ¶æãæ´æ°å¤ä¸ªä¸å¡å®ä½çä¸å¡äºå¡æ¯ç¸å½æ®éçãè¿äºäºå¡å¨åä½åºç¨ä¸­çå®ç°æ¾å¾å¾®ä¸è¶³éï¼å ä¸ºåä½åªå­å¨ä¸ä¸ªåç¬çæ°æ®åºãå¨åºäºå¾®æå¡çåºç¨ç¨åºä¸­ï¼æ¨éè¦æ´æ°ä¸åæå¡æç¨çæ°æ®åºãéå¸¸ä¸ä¼éæ©åå¸å¼äºå¡ï¼ä¸ä»ä»æ¯å ä¸º cap å®çãä»ä»¬æ ¹æ¬ä¸æ¯æå¦ä»é«åº¦å¯æ©å±ç nosql æ°æ®åºåæ¶æ¯ä»£çãæ¨æåä¸å¾ä¸ä½¿ç¨åºäºæç»ä¸è´æ§çæ¹æ³ï¼è¿å¯¹äºå¼åäººåæ¥è¯´æ´å·æææ§ã\n\næµè¯å¾®æå¡åºç¨ç¨åºä¹å¾å¤æãä¾å¦ï¼ä½¿ç¨ç°ä»£æ¡æ¶å¦ spring bootï¼åªéè¦ç¼åä¸ä¸ªæµè¯ç±»æ¥å¯å¨ä¸ä¸ªåä½ web åºç¨ç¨åºå¹¶æµè¯å¶ rest apiãç¸æ¯ä¹ä¸ï¼ä¸ä¸ªç±»ä¼¼çæµè¯ç±»å¯¹äºå¾®æå¡æ¥è¯´éè¦å¯å¨è¯¥æå¡åå¶æä¾èµçæææå¡ï¼æèè³å°ä¸ºè¿äºæå¡éç½®å­æ ¹ãåæ¬¡å£°æï¼è½ç¶è¿ä¸æ¯ä¸ä»¶é«æ·±çäºæï¼ä½ä¸è¦ä½ä¼°äºè¿æ ·åçå¤ææ§ã\n\nå¾®æå¡æ¶ææ¨¡å¼çå¦ä¸ä¸ªä¸»è¦æææ¯å®ç°äºè·¨è¶å¤æå¡åæ´ãä¾å¦ï¼æä»¬åè®¾æ¨æ­£å¨å®ç°ä¸ä¸ªåæ´æå¡ aãæå¡ b å æå¡ c çéæ±ï¼å¶ä¸­ a ä¾èµäº bï¼ä¸ b ä¾èµäº cãå¨åä½åºç¨ç¨åºä¸­ï¼æ¨å¯ä»¥ç®åå°ä¿®æ¹ç¸åºçæ¨¡åãæ´ååæ´å¹¶ä¸æ¬¡æ§é¨ç½²ä»ä»¬ãç¸åï¼å¨å¾®æå¡ä¸­æ¨éè¦ä»ç»è§åååè°åºç°çåæ´è³æ¯ä¸ªæå¡ãä¾å¦ï¼æ¨éè¦æ´æ°æå¡ cï¼ç¶åæ´æ°æå¡ bï¼æåæ´æ°æå¡ aãå¹¸è¿çæ¯ï¼å¤§å¤æ°åæ´åªä¼å½±åä¸ä¸ªæå¡ï¼éè¦åè°çå¤æå¡åæ´ç¸å¯¹è¾å°ã\n\né¨ç½²åºäºå¾®æå¡çåºç¨ç¨åºä¹æ¯ç¸å½å¤æçãä¸ä¸ªåä½åºç¨å¯ä»¥å¾å®¹æå°é¨ç½²å°åºäºä¼ ç»è´è½½åè¡¡å¨çä¸ç»ç¸åæå¡å¨ä¸ãæ¯ä¸ªåºç¨ç¨åºå®ä¾é½éç½®æåºç¡è®¾æ½æå¡çä½ç½®ï¼ä¸»æºåç«¯å£ï¼ï¼æ¯å¦æ°æ®åºåæ¶æ¯ä»£çãç¸æ¯ä¹ä¸ï¼å¾®æå¡åºç¨ç¨åºéå¸¸ç±å¤§éçæå¡ç»æãä¾å¦ï¼æ® adrian cockcroft äºè§£å°ï¼hailo æ¥æ 160 ä¸ªä¸åçæå¡ï¼netflix æ¥æçæå¡è¶è¿ 600 ä¸ªã\n\næ¯ä¸ªæå¡é½æå¤ä¸ªè¿è¡æ¶å®ä¾ãè¿ææ´å¤çç§»å¨é¨ä»¶éè¦éç½®ãé¨ç½²ãæ©å±åçæ§ãæ­¤å¤ï¼æ¨è¿éè¦å®ç°æå¡åç°æºå¶ï¼ä½¿å¾æå¡è½å¤åç°éè¦ä¸ä¹éä¿¡çä»»ä½å¶ä»æå¡çä½ç½®ï¼ä¸»æºåç«¯å£ï¼ãæ¯è¾ä¼ ç»éº»ç¦çåºäºç¥¨æ®ï¼ticket-basedï¼åæå¨çæä½æ¹å¼æ æ³æ©å±å°å¦æ­¤å¤æç¨åº¦ãå æ­¤ï¼è¦æåé¨ç½²å¾®æå¡åºç¨ç¨åºï¼éè¦æ±å¼åäººåè½é«åº¦æ§å¶é¨ç½²æ¹å¼åé«åº¦èªå¨åã\n\nä¸ç§èªå¨åæ¹å¼æ¯ä½¿ç¨ç°æçå¹³å°å³æå¡ï¼paasï¼ï¼å¦ cloud foundryãpaas ä¸ºå¼åäººåæä¾äºä¸ç§ç®åçæ¹å¼æ¥é¨ç½²åç®¡çä»ä»¬çå¾®æå¡ãå®è®©å¼åäººåé¿å¼äºè¯¸å¦éè´­åéç½® it èµæºç­ç¦æ¼ãåæ¶ï¼éç½® paas çç³»ç»äººååç½ç»ä¸ä¸äººåå¯ä»¥ç¡®ä¿è¾¾å°æä½³å®è·µä»¥è½å®å¬å¸ç­ç¥ã\n\nèªå¨åå¾®æå¡é¨ç½²çå¦ä¸ä¸ªæ¹å¼æ¯å¼åèªå·±ç paasãä¸ä¸ªæ®éçèµ·ç¹æ¯ä½¿ç¨éç¾¤æ¹æ¡ï¼å¦ kubernetesï¼ä¸ docker ç­å®¹å¨ææ¯ç¸ç»åã\n\n\n# å°ç»\n\næå»ºå¤æçå¾®æå¡åºç¨ç¨åºæ¬è´¨ä¸æ¯å°é¾çãåä½æ¶ææ¨¡å¼åªéç¨äºç®åãè½»éçº§çåºç¨ç¨åºï¼å¦ææ¨ä½¿ç¨å®æ¥æå»ºå¤æåºç¨ï¼æ¨æç»ä¼é·å¥çè¦çå¢å°ãå¾®æå¡æ¶ææ¨¡å¼æ¯å¤æãæç»­åå±åºç¨çä¸ä¸ªæ´å¥½çéæ©ãå°½ç®¡å®å­å¨çç¼ºç¹åå®ç°ææã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:41:52",lastUpdatedTimestamp:1644378112e3},{title:"Docker Compose å®æ MySQL",frontmatter:{title:"Docker Compose å®æ MySQL",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/853cbd/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/08.Docker%20Compose%20%E5%AE%9E%E6%88%98%20MySQL.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/08.Docker Compose å®æ MySQL.md",key:"v-4c82f50b",path:"/pages/853cbd/",headers:[{level:2,title:"MySQL5",slug:"mysql5",normalizedTitle:"mysql5",charIndex:30},{level:2,title:"MySQL8",slug:"mysql8",normalizedTitle:"mysql8",charIndex:664}],headersStr:"MySQL5 MySQL8",content:"# Docker Compose å®æ MySQL\n\n\n# MySQL5\n\nversion: '3.1'\nservices:\n  mysql:\n    restart: always\n    image: mysql:5.7.22\n    container_name: mysql\n    ports:\n      - 3306:3306\n    environment:\n      TZ: Asia/Shanghai\n      MYSQL_ROOT_PASSWORD: 123456\n    command:\n      --character-set-server=utf8mb4\n      --collation-server=utf8mb4_general_ci\n      --explicit_defaults_for_timestamp=true\n      --lower_case_table_names=1\n      --max_allowed_packet=128M\n      --sql-mode=\"STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO\"\n    volumes:\n      - mysql-data:/var/lib/mysql\n\nvolumes:\n  mysql-data:\n\n\n\n# MySQL8\n\nversion: '3.1'\nservices:\n  db:\n    image: mysql\n    restart: always\n    environment:\n      TZ: Asia/Shanghai\n      MYSQL_ROOT_PASSWORD: 123456\n    command:\n      --default-authentication-plugin=mysql_native_password\n      --character-set-server=utf8mb4\n      --collation-server=utf8mb4_general_ci\n      --explicit_defaults_for_timestamp=true\n      --lower_case_table_names=1\n    ports:\n      - 3306:3306\n    volumes:\n      - mysql-data:/var/lib/mysql\n\n  adminer:\n    image: adminer\n    restart: always\n    ports:\n      - 8080:8080\n\nvolumes:\n  mysql-data:\n",normalizedContent:"# docker compose å®æ mysql\n\n\n# mysql5\n\nversion: '3.1'\nservices:\n  mysql:\n    restart: always\n    image: mysql:5.7.22\n    container_name: mysql\n    ports:\n      - 3306:3306\n    environment:\n      tz: asia/shanghai\n      mysql_root_password: 123456\n    command:\n      --character-set-server=utf8mb4\n      --collation-server=utf8mb4_general_ci\n      --explicit_defaults_for_timestamp=true\n      --lower_case_table_names=1\n      --max_allowed_packet=128m\n      --sql-mode=\"strict_trans_tables,no_auto_create_user,no_engine_substitution,no_zero_date,no_zero_in_date,error_for_division_by_zero\"\n    volumes:\n      - mysql-data:/var/lib/mysql\n\nvolumes:\n  mysql-data:\n\n\n\n# mysql8\n\nversion: '3.1'\nservices:\n  db:\n    image: mysql\n    restart: always\n    environment:\n      tz: asia/shanghai\n      mysql_root_password: 123456\n    command:\n      --default-authentication-plugin=mysql_native_password\n      --character-set-server=utf8mb4\n      --collation-server=utf8mb4_general_ci\n      --explicit_defaults_for_timestamp=true\n      --lower_case_table_names=1\n    ports:\n      - 3306:3306\n    volumes:\n      - mysql-data:/var/lib/mysql\n\n  adminer:\n    image: adminer\n    restart: always\n    ports:\n      - 8080:8080\n\nvolumes:\n  mysql-data:\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"YAML éç½®æä»¶è¯­è¨",frontmatter:{title:"YAML éç½®æä»¶è¯­è¨",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/bd41de/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/10.YAML%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%AD%E8%A8%80.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/10.YAML éç½®æä»¶è¯­è¨.md",key:"v-6272dfb6",path:"/pages/bd41de/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:18},{level:2,title:"å¯¹è±¡",slug:"å¯¹è±¡",normalizedTitle:"å¯¹è±¡",charIndex:246},{level:2,title:"æ°ç»",slug:"æ°ç»",normalizedTitle:"æ°ç»",charIndex:303},{level:2,title:"å¤åç»æ",slug:"å¤åç»æ",normalizedTitle:"å¤åç»æ",charIndex:531},{level:2,title:"çº¯é",slug:"çº¯é",normalizedTitle:"çº¯é",charIndex:346}],headersStr:"ç®ä» å¯¹è±¡ æ°ç» å¤åç»æ çº¯é",content:"# YAML éç½®æä»¶è¯­è¨\n\n\n# ç®ä»\n\nYAML æ¯ä¸é¨ç¨æ¥åéç½®æä»¶çè¯­è¨ï¼éå¸¸ç®æ´åå¼ºå¤§ï¼è¿æ¯ JSON æ ¼å¼æ¹ä¾¿ã\n\nYAML è¯­è¨çè®¾è®¡ç®æ ï¼å°±æ¯æ¹ä¾¿äººç±»è¯»åãå®å®è´¨ä¸æ¯ä¸ç§éç¨çæ°æ®ä¸²è¡åæ ¼å¼ãå®çåºæ¬è¯­æ³è§åå¦ä¸ï¼\n\n * å¤§å°åææ\n * ä½¿ç¨ç¼©è¿è¡¨ç¤ºå±çº§å³ç³»\n * ç¼©è¿æ¶ä¸åè®¸ä½¿ç¨Tabé®ï¼åªåè®¸ä½¿ç¨ç©ºæ ¼ã\n * ç¼©è¿çç©ºæ ¼æ°ç®ä¸éè¦ï¼åªè¦ç¸åå±çº§çåç´ å·¦ä¾§å¯¹é½å³å¯\n\n# è¡¨ç¤ºæ³¨éï¼ä»è¿ä¸ªå­ç¬¦ä¸ç´å°è¡å°¾ï¼é½ä¼è¢«è§£æå¨å¿½ç¥ã\n\nYAML æ¯æçæ°æ®ç»ææä¸ç§ï¼\n\n * å¯¹è±¡ï¼é®å¼å¯¹çéåï¼åç§°ä¸ºæ å°ï¼mappingï¼/ åå¸ï¼hashesï¼ / å­å¸ï¼dictionaryï¼\n * æ°ç»ï¼ä¸ç»ææ¬¡åºæåçå¼ï¼åç§°ä¸ºåºåï¼sequenceï¼ / åè¡¨ï¼listï¼\n * çº¯éï¼scalarsï¼ï¼åä¸ªçãä¸å¯ååçå¼\n\n\n# å¯¹è±¡\n\nå¯¹è±¡çä¸ç»é®å¼å¯¹ï¼ä½¿ç¨åå·ç»æè¡¨ç¤º\n\nanimal: pets1\n\n\n\n# æ°ç»\n\nä¸ç»è¿è¯çº¿å¼å¤´çè¡ï¼ææä¸ä¸ªæ°ç»\n\n- Cat\n- Dog\n- Goldfish\n\n\næ°æ®ç»æçå­æåæ¯ä¸ä¸ªæ°ç»ï¼åå¯ä»¥å¨è¯¥é¡¹ä¸é¢ç¼©è¿ä¸ä¸ªç©ºæ ¼\n\n- Array\n - Cat\n - Dog\n - Goldfish\n\n\n\n# å¤åç»æ\n\nå¯¹è±¡åæ°ç»å¯ä»¥ç»åä½¿ç¨ï¼å½¢æå¤åç»æ\n\nlanguages:\n - Ruby\n - Perl\n - Python \nwebsites:\n YAML: yaml.org \n Ruby: ruby-lang.org \n Python: python.org \n Perl: use.perl.org \n\n\n\n# çº¯é\n\nçº¯éæ¯æåºæ¬çãä¸å¯ååçå¼ãä»¥ä¸æ°æ®ç±»åé½å±äº JavaScript ççº¯é\n\n * å­ç¬¦ä¸²\n * å¸å°å¼\n * æ´æ°\n * æµ®ç¹æ°\n * Null\n * æ¶é´\n * æ¥æ",normalizedContent:"# yaml éç½®æä»¶è¯­è¨\n\n\n# ç®ä»\n\nyaml æ¯ä¸é¨ç¨æ¥åéç½®æä»¶çè¯­è¨ï¼éå¸¸ç®æ´åå¼ºå¤§ï¼è¿æ¯ json æ ¼å¼æ¹ä¾¿ã\n\nyaml è¯­è¨çè®¾è®¡ç®æ ï¼å°±æ¯æ¹ä¾¿äººç±»è¯»åãå®å®è´¨ä¸æ¯ä¸ç§éç¨çæ°æ®ä¸²è¡åæ ¼å¼ãå®çåºæ¬è¯­æ³è§åå¦ä¸ï¼\n\n * å¤§å°åææ\n * ä½¿ç¨ç¼©è¿è¡¨ç¤ºå±çº§å³ç³»\n * ç¼©è¿æ¶ä¸åè®¸ä½¿ç¨tabé®ï¼åªåè®¸ä½¿ç¨ç©ºæ ¼ã\n * ç¼©è¿çç©ºæ ¼æ°ç®ä¸éè¦ï¼åªè¦ç¸åå±çº§çåç´ å·¦ä¾§å¯¹é½å³å¯\n\n# è¡¨ç¤ºæ³¨éï¼ä»è¿ä¸ªå­ç¬¦ä¸ç´å°è¡å°¾ï¼é½ä¼è¢«è§£æå¨å¿½ç¥ã\n\nyaml æ¯æçæ°æ®ç»ææä¸ç§ï¼\n\n * å¯¹è±¡ï¼é®å¼å¯¹çéåï¼åç§°ä¸ºæ å°ï¼mappingï¼/ åå¸ï¼hashesï¼ / å­å¸ï¼dictionaryï¼\n * æ°ç»ï¼ä¸ç»ææ¬¡åºæåçå¼ï¼åç§°ä¸ºåºåï¼sequenceï¼ / åè¡¨ï¼listï¼\n * çº¯éï¼scalarsï¼ï¼åä¸ªçãä¸å¯ååçå¼\n\n\n# å¯¹è±¡\n\nå¯¹è±¡çä¸ç»é®å¼å¯¹ï¼ä½¿ç¨åå·ç»æè¡¨ç¤º\n\nanimal: pets1\n\n\n\n# æ°ç»\n\nä¸ç»è¿è¯çº¿å¼å¤´çè¡ï¼ææä¸ä¸ªæ°ç»\n\n- cat\n- dog\n- goldfish\n\n\næ°æ®ç»æçå­æåæ¯ä¸ä¸ªæ°ç»ï¼åå¯ä»¥å¨è¯¥é¡¹ä¸é¢ç¼©è¿ä¸ä¸ªç©ºæ ¼\n\n- array\n - cat\n - dog\n - goldfish\n\n\n\n# å¤åç»æ\n\nå¯¹è±¡åæ°ç»å¯ä»¥ç»åä½¿ç¨ï¼å½¢æå¤åç»æ\n\nlanguages:\n - ruby\n - perl\n - python \nwebsites:\n yaml: yaml.org \n ruby: ruby-lang.org \n python: python.org \n perl: use.perl.org \n\n\n\n# çº¯é\n\nçº¯éæ¯æåºæ¬çãä¸å¯ååçå¼ãä»¥ä¸æ°æ®ç±»åé½å±äº javascript ççº¯é\n\n * å­ç¬¦ä¸²\n * å¸å°å¼\n * æ´æ°\n * æµ®ç¹æ°\n * null\n * æ¶é´\n * æ¥æ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"Docker Compose å¸¸ç¨å½ä»¤",frontmatter:{title:"Docker Compose å¸¸ç¨å½ä»¤",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/f508e3/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/09.Docker%20Compose%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/09.Docker Compose å¸¸ç¨å½ä»¤.md",key:"v-1dfe3ec2",path:"/pages/f508e3/",headers:[{level:2,title:"åå°è¿è¡",slug:"åå°è¿è¡",normalizedTitle:"åå°è¿è¡",charIndex:26},{level:2,title:"åå°è¿è¡",slug:"åå°è¿è¡",normalizedTitle:"åå°è¿è¡",charIndex:55},{level:2,title:"å¯å¨",slug:"å¯å¨",normalizedTitle:"å¯å¨",charIndex:87},{level:2,title:"åæ­¢",slug:"åæ­¢",normalizedTitle:"åæ­¢",charIndex:117},{level:2,title:"åæ­¢å¹¶ç§»é¤å®¹å¨",slug:"åæ­¢å¹¶ç§»é¤å®¹å¨",normalizedTitle:"åæ­¢å¹¶ç§»é¤å®¹å¨",charIndex:146}],headersStr:"åå°è¿è¡ åå°è¿è¡ å¯å¨ åæ­¢ åæ­¢å¹¶ç§»é¤å®¹å¨",content:"# Docker Compose å¸¸ç¨å½ä»¤\n\n\n# åå°è¿è¡\n\ndocker-compose up\n\n\n\n# åå°è¿è¡\n\ndocker-compose up -d\n\n\n\n# å¯å¨\n\ndocker-compose start\n\n\n\n# åæ­¢\n\ndocker-compose stop\n\n\n\n# åæ­¢å¹¶ç§»é¤å®¹å¨\n\ndocker-compose down\n",normalizedContent:"# docker compose å¸¸ç¨å½ä»¤\n\n\n# åå°è¿è¡\n\ndocker-compose up\n\n\n\n# åå°è¿è¡\n\ndocker-compose up -d\n\n\n\n# å¯å¨\n\ndocker-compose start\n\n\n\n# åæ­¢\n\ndocker-compose stop\n\n\n\n# åæ­¢å¹¶ç§»é¤å®¹å¨\n\ndocker-compose down\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"éï¼ä¸ºä»ä¹è¯´ JSON ä¸éååéç½®æä»¶ï¼",frontmatter:{title:"éï¼ä¸ºä»ä¹è¯´ JSON ä¸éååéç½®æä»¶ï¼",date:"2022-02-09T09:23:30.000Z",permalink:"/pages/0c8168/"},regularPath:"/17.Docker/08.Docker%20%E4%B8%89%E5%89%91%E5%AE%A2%20Compose/11.%E9%99%84%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4%20JSON%20%E4%B8%8D%E9%80%82%E5%90%88%E5%81%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9F.html",relativePath:"17.Docker/08.Docker ä¸åå®¢ Compose/11.éï¼ä¸ºä»ä¹è¯´ JSON ä¸éååéç½®æä»¶ï¼.md",key:"v-a0974e96",path:"/pages/0c8168/",headers:[{level:2,title:"ä¸ºä»ä¹æµè¡ä½¿ç¨ JSON ä½ä¸ºéç½®è¯­è¨ï¼",slug:"ä¸ºä»ä¹æµè¡ä½¿ç¨-json-ä½ä¸ºéç½®è¯­è¨",normalizedTitle:"ä¸ºä»ä¹æµè¡ä½¿ç¨ json ä½ä¸ºéç½®è¯­è¨ï¼",charIndex:275},{level:2,title:"JSON çé®é¢",slug:"json-çé®é¢",normalizedTitle:"json çé®é¢",charIndex:477},{level:3,title:"ç¼ºä¹æ³¨é",slug:"ç¼ºä¹æ³¨é",normalizedTitle:"ç¼ºä¹æ³¨é",charIndex:490},{level:3,title:"è¿äºä¸¥æ ¼",slug:"è¿äºä¸¥æ ¼",normalizedTitle:"è¿äºä¸¥æ ¼",charIndex:989},{level:3,title:"ä½ä¿¡åªæ¯",slug:"ä½ä¿¡åªæ¯",normalizedTitle:"ä½ä¿¡åªæ¯",charIndex:1065},{level:3,title:"é¿å­ç¬¦ä¸²",slug:"é¿å­ç¬¦ä¸²",normalizedTitle:"é¿å­ç¬¦ä¸²",charIndex:1407},{level:3,title:"æ°å­",slug:"æ°å­",normalizedTitle:"æ°å­",charIndex:1599},{level:2,title:"JSON çæ¿ä»£æ¹æ¡",slug:"json-çæ¿ä»£æ¹æ¡",normalizedTitle:"json çæ¿ä»£æ¹æ¡",charIndex:2564},{level:3,title:"HJSON",slug:"hjson",normalizedTitle:"hjson",charIndex:3376},{level:3,title:"HOCON",slug:"hocon",normalizedTitle:"hocon",charIndex:4369},{level:3,title:"YAML",slug:"yaml",normalizedTitle:"yaml",charIndex:135},{level:3,title:"èæ¬è¯­è¨",slug:"èæ¬è¯­è¨",normalizedTitle:"èæ¬è¯­è¨",charIndex:5557},{level:3,title:"èªå®ä¹éç½®æ ¼å¼",slug:"èªå®ä¹éç½®æ ¼å¼",normalizedTitle:"èªå®ä¹éç½®æ ¼å¼",charIndex:5763},{level:2,title:"ç»è®º",slug:"ç»è®º",normalizedTitle:"ç»è®º",charIndex:5892}],headersStr:"ä¸ºä»ä¹æµè¡ä½¿ç¨ JSON ä½ä¸ºéç½®è¯­è¨ï¼ JSON çé®é¢ ç¼ºä¹æ³¨é è¿äºä¸¥æ ¼ ä½ä¿¡åªæ¯ é¿å­ç¬¦ä¸² æ°å­ JSON çæ¿ä»£æ¹æ¡ HJSON HOCON YAML èæ¬è¯­è¨ èªå®ä¹éç½®æ ¼å¼ ç»è®º",content:'# éï¼ä¸ºä»ä¹è¯´ JSON ä¸éååéç½®æä»¶ï¼\n\næç¤º\n\nå¾å¤é¡¹ç®ä½¿ç¨ JSON ä½ä¸ºéç½®æä»¶ï¼æææ¾çä¾å­å°±æ¯ npm å yarn ä½¿ç¨ç package.json æä»¶ãå½ç¶ï¼è¿æå¾å¤å¶ä»æä»¶ï¼ä¾å¦ CloudFormationï¼æååªæ JSONï¼ä½ç°å¨ä¹æ¯æ YAMLï¼å composerï¼PHPï¼ã\n\nä½æ¯ï¼JSON å®éä¸æ¯ä¸ç§éå¸¸ç³ç³çéç½®è¯­è¨ãå«è¯¯ä¼æçææï¼æå¶å®æ¯åæ¬¢ JSON çãå®æ¯ä¸ç§ç¸å¯¹çµæ´»çææ¬æ ¼å¼ï¼å¯¹äºæºå¨åäººç±»æ¥è¯´é½å¾å®¹æéè¯»ï¼èä¸æ¯ä¸ç§éå¸¸å¥½çæ°æ®äº¤æ¢åå­å¨æ ¼å¼ãä½ä½ä¸ºä¸ç§éç½®è¯­è¨ï¼å®æå®çä¸è¶³ã\n\n\n# ä¸ºä»ä¹æµè¡ä½¿ç¨ JSON ä½ä¸ºéç½®è¯­è¨ï¼\n\nå° JSON ç¨ä½éç½®æä»¶æå ä¸ªæ¹é¢çåå ï¼å¶ä¸­æå¤§çåå å¯è½æ¯å®å¾å®¹æå®ç°ãå¾å¤ç¼ç¨è¯­è¨çæ ååºé½æ¯æ JSONï¼å¼åäººåæç¨æ·å¯è½å·²ç»å¾çæ JSONï¼æä»¥ä¸éè¦å­¦ä¹ æ°çéç½®æ ¼å¼å°±å¯ä»¥ä½¿ç¨é£äºäº§åãç°å¨å ä¹ææçå·¥å·é½æä¾ JSON æ¯æï¼åæ¬è¯­æ³çªåºæ¾ç¤ºãèªå¨æ ¼å¼åãéªè¯å·¥å·ç­ã\n\nè¿äºé½æ¯å¾å¥½ççç±ï¼ä½è¿ç§æ å¤ä¸å¨çæ ¼å¼å¶å®ä¸éåç¨ä½éç½®ã\n\n\n# JSON çé®é¢\n\n\n# ç¼ºä¹æ³¨é\n\næ³¨éå¯¹äºéç½®è¯­è¨èè¨ç»å¯¹æ¯ä¸ä¸ªéè¦çåè½ãæ³¨éå¯ç¨äºæ æ³¨ä¸åçéç½®éé¡¹ãè§£éä¸ºä»ä¹è¦éç½®æç¹å®çå¼ï¼æ´éè¦çæ¯ï¼å¨ä½¿ç¨ä¸åçéç½®è¿è¡æµè¯åè°è¯æ¶éè¦ä¸´æ¶æ³¨éæé¨åéç½®ãå½ç¶ï¼å¦æåªæ¯æ JSON å½ä½æ¯ä¸ç§æ°æ®äº¤æ¢æ ¼å¼ï¼é£ä¹å°±ä¸éè¦ç¨å°æ³¨éã\n\næä»¬å¯ä»¥éè¿ä¸äºæ¹æ³ç» JSON æ·»å æ³¨éãä¸ç§å¸¸è§çæ¹æ³æ¯å¨å¯¹è±¡ä¸­ä½¿ç¨ç¹æ®çé®ä½ä¸ºæ³¨éï¼ä¾å¦â//âæâ__commentâãä½æ¯ï¼è¿ç§è¯­æ³çå¯è¯»æ§ä¸é«ï¼å¹¶ä¸ä¸ºäºå¨åä¸ªå¯¹è±¡ä¸­åå«å¤ä¸ªæ³¨éï¼éè¦ä¸ºæ¯ä¸ªæ³¨éä½¿ç¨å¯ä¸çé®ãDavid Crockfordï¼JSON çåæèï¼å»ºè®®ä½¿ç¨é¢å¤çå¨æ¥å é¤æ³¨éãå¦æä½ çåºç¨ç¨åºéè¦ä½¿ç¨ JSON ä½ä¸ºéç½®ï¼é£ä¹å®å¨æ²¡é®é¢ï¼ä¸è¿è¿ç¡®å®å¸¦æ¥äºä¸äºé¢å¤çå·¥ä½éã\n\nä¸äº JSON åºåè®¸å°æ³¨éä½ä¸ºè¾å¥ãä¾å¦ï¼Ruby ç JSON æ¨¡ååå¯ç¨äº JsonParser.Feature.ALLOW_COMMENTS åè½ç Java Jackson åºå¯ä»¥å¤ç JavaScript é£æ ¼çæ³¨éãä½æ¯ï¼è¿ä¸æ¯æ åçæ¹å¼ï¼èä¸å¾å¤ç¼è¾å¨æ æ³æ­£ç¡®å¤ç JSON æä»¶ä¸­çæ³¨éï¼è¿è®©ç¼è¾å®ä»¬åå¾æ´å å°é¾ã\n\n\n# è¿äºä¸¥æ ¼\n\nJSON è§èéå¸¸ä¸¥æ ¼ï¼è¿ä¹æ¯ä¸ºä»ä¹å®ç° JSON è§£æå¨ä¼è¿ä¹ç®åï¼ä½å¨æçæ¥ï¼å®è¿ä¼å½±åå¯è¯»æ§ï¼å¹¶ä¸å¨è¾å°ç¨åº¦ä¸ä¼å½±åå¯åæ§ã\n\n\n# ä½ä¿¡åªæ¯\n\nä¸å¶ä»éç½®è¯­è¨ç¸æ¯ï¼JSON æ¾å¾éå¸¸åæãJSON çå¾å¤æ ç¹ç¬¦å·å¯¹å¯è¯»æ§æ¯«æ å¸®å©ï¼åµä¸ï¼å¯¹è±¡ä¸­çé®å ä¹é½æ¯æ è¯ç¬¦ï¼æä»¥é®çå¼å·å¶å®æ¯å¤ä½çã\n\næ­¤å¤ï¼JSON éè¦ä½¿ç¨è±æ¬å·å°æ´ä¸ªææ¡£åå´èµ·æ¥ï¼æä»¥ JSON æ¯ JavaScript çå­éï¼å¹¶å¨æµä¸­åéå¤ä¸ªå¯¹è±¡æ¶ç¨äºçå®ä¸åçå¯¹è±¡ãä½æ¯ï¼å¯¹äºéç½®æä»¶æ¥è¯´ï¼æå¤é¢çå¤§æ¬å·å¶å®æ²¡æä»»ä½ç¨å¤ãå¨éç½®æä»¶ä¸­ï¼é®å¼å¯¹ä¹é´çéå·ä¹æ¯æ²¡æå¿è¦çãéå¸¸æåµä¸ï¼æ¯è¡åªæä¸ä¸ªé®å¼å¯¹ï¼æä»¥ä½¿ç¨æ¢è¡ä½ä¸ºåéç¬¦æ´ææä¹ã\n\nè¯´å°éå·ï¼JSON å±ç¶ä¸åè®¸å¨ç»å°¾åºç°éå·ãå¦æä½ éè¦å¨æ¯ä¸ªé®å¼å¯¹ä¹åä½¿ç¨éå·ï¼é£ä¹è³å°åºè¯¥æ¥åç»å°¾çéå·ï¼å ä¸ºæäºç»å°¾çéå·ï¼å¨æ·»å æ°æ¡ç®æ¶ä¼æ´å®¹æï¼èä¸å¨è¿è¡ commit diff æ¶ä¹æ´æ¸æ°ã\n\n\n# é¿å­ç¬¦ä¸²\n\nJSON ä½ä¸ºéç½®æ ¼å¼çå¦ä¸ä¸ªé®é¢æ¯ï¼å®ä¸æ¯æå¤è¡å­ç¬¦ä¸²ãå¦æä½ æ³å¨å­ç¬¦ä¸²ä¸­æ¢è¡ï¼å¿é¡»ä½¿ç¨ â\\nâ è¿è¡è½¬ä¹ï¼æ´ç³ç³çæ¯ï¼å¦æä½ æ³è¦ä¸ä¸ªå­ç¬¦ä¸²å¨æä»¶ä¸­å¦èµ·ä¸è¡æ¾ç¤ºï¼é£å°±å½»åºæ²¡åæ³äºãå¦æä½ çéç½®é¡¹éæ²¡æå¾é¿çå­ç¬¦ä¸²ï¼é£å°±ä¸æ¯é®é¢ãä½æ¯ï¼å¦æä½ çéç½®é¡¹éåæ¬äºé¿å­ç¬¦ä¸²ï¼ä¾å¦é¡¹ç®æè¿°æ GPG å¯é¥ï¼ä½ å¯è½ä¸å¸æåªæ¯ä½¿ç¨ â\\nâ æ¥è½¬ä¹èä¸æ¯ä½¿ç¨çå®çæ¢è¡ç¬¦ã\n\n\n# æ°å­\n\næ­¤å¤ï¼å¨æäºæåµä¸ï¼JSON å¯¹æ°å­çå®ä¹å¯è½ä¼æé®é¢ãJSON è§èä¸­å°æ°å­å®ä¹æä½¿ç¨åè¿å¶è¡¨ç¤ºçä»»æç²¾åº¦æéæµ®ç¹æ°ãå¯¹äºå¤§å¤æ°åºç¨ç¨åºæ¥è¯´ï¼è¿æ²¡æé®é¢ãä½æ¯ï¼å¦æä½ éè¦ä½¿ç¨åå­è¿å¶è¡¨ç¤ºæ³æè¡¨ç¤ºæ ç©·å¤§æ NaN ç­å¼æ¶ï¼é£ä¹ TOML æ YAML å°è½å¤æ´å¥½å°å¤çå®ä»¬ã\n\n{\n\n  "name": "example",\n\n  "description": "A really long description that needs multiple lines.\\nThis is a sample project to illustrate why JSON is not a good configuration format. This description is pretty long, but it doesn\'t have any way to go onto multiple lines.",\n\n  "version": "0.0.1",\n\n  "main": "index.js",\n\n  "//": "This is as close to a comment as you are going to get",\n\n  "keywords": ["example", "config"],\n\n  "scripts": {\n\n    "test": "./test.sh",\n\n    "do_stuff": "./do_stuff.sh"\n\n  },\n\n  "bugs": {\n\n    "url": "https://example.com/bugs"\n\n  },\n\n  "contributors": [{\n\n    "name": "John Doe",\n\n    "email": "johndoe@example.com"\n\n  }, {\n\n    "name": "Ivy Lane",\n\n    "url": "https://example.com/ivylane"\n\n  }],\n\n  "dependencies": {\n\n    "dep1": "^1.0.0",\n\n    "dep2": "3.40",\n\n    "dep3": "6.7"\n\n  }\n\n}\n\n\n\n# JSON çæ¿ä»£æ¹æ¡\n\néæ©åªä¸ç§éç½®è¯­è¨åå³äºä½ çåºç¨ç¨åºãæ¯ç§è¯­è¨é½æåèªçä¼ç¼ºç¹ï¼ä¸é¢ååºäºä¸äºå¯ä»¥èèçéé¡¹ãå®ä»¬é½æ¯ä¸ºéç½®èè®¾è®¡çè¯­è¨ï¼æ¯ä¸ç§é½æ¯ JSON è¿æ ·çæ°æ®è¯­è¨æ´å¥½ã\n\nname = "example"\n\ndescription = """\n\nA really long description that needs multiple lines.\n\nThis is a sample project to illustrate why JSON is not a \\\n\ngood configuration format. This description is pretty long, \\\n\nbut it doesn\'t have any way to go onto multiple lines."""\n\n\n\nversion = "0.0.1"\n\nmain = "index.js"\n\n# This is a comment\n\nkeywords = ["example", "config"]\n\n\n\n[bugs]\n\nurl = "https://example.com/bugs"\n\n\n\n[scripts]\n\n\n\ntest = "./test.sh"\n\ndo_stuff = "./do_stuff.sh"\n\n\n\n[[contributors]]\n\nname = "John Doe"\n\nemail = "johndow@example.com"\n\n\n\n[[contributors]]\n\nname = "Ivy Lane"\n\nurl = "https://example.com/ivylane"\n\n\n\n[dependencies]\n\n\n\ndep1 = "^1.0.0"\n\n# Why we depend on dep2\n\ndep2 = "3.40"\n\ndep3 = "6.7"\n\n\n\n# HJSON\n\nHJSON æ¯ä¸ç§åºäº JSON çæ ¼å¼ï¼ä½å·ææ´å¤§ççµæ´»æ§ï¼å¯è¯»æ§ä¹æ´å¼ºãå®æ¯ææ³¨éãå¤è¡å­ç¬¦ä¸²ãä¸å¸¦å¼å·çé®åå­ç¬¦ä¸²ï¼ä»¥åå¯éçéå·ãå¦æä½ æ³è¦ JSON ç»æçç®åæ§ï¼åæ¶å¯¹éç½®æä»¶æ´åå¥½ï¼é£ä¹å¯ä»¥èè HJSONãæä¸äºå¯ä»¥å° HJSON è½¬æ¢ä¸º JSON çå½ä»¤è¡å·¥å·ï¼å¦æä½ ä½¿ç¨çå·¥å·æ¯åºäº JSON çï¼å¯ä»¥åç¨ HJSON ç¼åéç½®ï¼ç¶ååè½¬æ¢æ JSONãJSON5 æ¯å¦ä¸ä¸ªä¸ HJSON éå¸¸ç¸ä¼¼çéç½®è¯­è¨ã\n\n{\n\n  name: example\n\n  description: \'\'\'\n\n  A really long description that needs multiple lines.\n\n  This is a sample project to illustrate why JSON is \n\n  not a good configuration format.  This description \n\n  is pretty long, but it doesn\'t have any way to go \n\n  onto multiple lines.\n\n  \'\'\'\n\n  version: 0.0.1\n\n  main: index.js\n\n  # This is a a comment\n\n  keywords: ["example", "config"]\n\n  scripts: {\n\n    test: ./test.sh\n\n    do_stuff: ./do_stuff.sh\n\n  }\n\n  bugs: {\n\n    url: https://example.com/bugs\n\n  }\n\n  contributors: [{\n\n    name: John Doe\n\n    email: johndoe@example.com\n\n  } {\n\n    name: Ivy Lane\n\n    url: https://example.com/ivylane\n\n  }]\n\n  dependencies: {\n\n    dep1: ^1.0.0\n\n    # Why we have this dependency\n\n    dep2: "3.40"\n\n    dep3: "6.7"\n\n  }\n\n}\n\n\n\n# HOCON\n\nHOCON æ¯ä¸º Play æ¡æ¶è®¾è®¡çéç½®æ ¼å¼ï¼å¨ Scala é¡¹ç®ä¸­éå¸¸æµè¡ãå®æ¯ JSON çè¶éï¼å æ­¤å¯ä»¥ä½¿ç¨ç°æç JSON æä»¶ãé¤äºæ³¨éãå¯ééå·åå¤è¡å­ç¬¦ä¸²è¿äºæ åç¹æ§å¤ï¼HOCON è¿æ¯æä»å¶ä»æä»¶å¯¼å¥åå¼ç¨å¶ä»å¼çé®ï¼é¿åéå¤ä»£ç ï¼å¹¶ä½¿ç¨ä»¥ç¹ä½ä¸ºåéç¬¦çé®æ¥æå®å¼çè·¯å¾ï¼å æ­¤ç¨æ·å¯ä»¥ä¸å¿å°ææå¼ç´æ¥æ¾å¨è±æ¬å·å¯¹è±¡ä¸­ã\n\nname = example\n\ndescription = """\n\nA really long description that needs multiple lines.\n\n\n\nThis is a sample project to illustrate why JSON is \n\nnot a good configuration format.  This description \n\nis pretty long, but it doesn\'t have any way to go \n\nonto multiple lines.\n\n"""\n\nversion = 0.0.1\n\nmain = index.js\n\n# This is a a comment\n\nkeywords = ["example", "config"]\n\nscripts {\n\n  test = ./test.sh\n\n  do_stuff = ./do_stuff.sh\n\n}\n\nbugs.url = "https://example.com/bugs"\n\ncontributors = [\n\n  {\n\n    name = John Doe\n\n    email = johndoe@example.com\n\n  }\n\n  {\n\n    name = Ivy Lane\n\n    url = "https://example.com/ivylane"\n\n  }\n\n]\n\ndependencies {\n\n  dep1 = ^1.0.0\n\n  # Why we have this dependency\n\n  dep2 = "3.40"\n\n  dep3 = "6.7"\n\n}\n\n\n\n# YAML\n\nYAMLï¼YAML ä¸æ¯æ è®°è¯­è¨ï¼æ¯ä¸ç§éå¸¸çµæ´»çæ ¼å¼ï¼å ä¹æ¯ JSON çè¶éï¼å·²ç»è¢«ç¨å¨ä¸äºèåçé¡¹ç®ä¸­ï¼å¦ Travis CIãCircle CI å AWS CloudFormationãYAML çåºå ä¹å JSON ä¸æ ·æ å¤ä¸å¨ãé¤äºæ¯ææ³¨éãæ¢è¡ç¬¦åéãå¤è¡å­ç¬¦ä¸²ãè£¸å­ç¬¦ä¸²åæ´çµæ´»çç±»åç³»ç»ä¹å¤ï¼YAML ä¹æ¯æå¼ç¨æä»¶ï¼ä»¥é¿åéå¤ä»£ç ã\n\nYAML çä¸»è¦ç¼ºç¹æ¯è§èéå¸¸å¤æï¼ä¸åçå®ç°ä¹é´å¯è½å­å¨ä¸ä¸è´çæåµãå®å°ç¼©è¿è§ä¸ºä¸¥æ ¼è¯­æ³çä¸é¨åï¼ç±»ä¼¼äº Pythonï¼ï¼æäºäººåæ¬¢ï¼æäºäººä¸åæ¬¢ãè¿ä¼è®©å¤å¶åç²è´´åå¾å¾éº»ç¦ã\n\n\n# èæ¬è¯­è¨\n\nå¦æä½ çåºç¨ç¨åºæ¯ä½¿ç¨ Python æ Ruby ç­èæ¬è¯­è¨å¼åçï¼å¹¶ä¸ä½ ç¥ééç½®çæ¥æºæ¯å¯é çï¼é£ä¹æå¥½çéæ©å¯è½å°±æ¯ä½¿ç¨è¿äºè¯­è¨è¿è¡éç½®ãå¦æä½ éè¦ä¸ä¸ªçæ­£çµæ´»çéç½®éé¡¹ï¼ä¹å¯ä»¥å¨ç¼è¯è¯­è¨ä¸­åµå¥è¯¸å¦ Lua ä¹ç±»çèæ¬è¯­è¨ãè¿æ ·å¯ä»¥è·å¾èæ¬è¯­è¨ççµæ´»æ§ï¼èä¸æ¯ä½¿ç¨ä¸åçéç½®è¯­è¨æ´å®¹æå®ç°ãä½¿ç¨èæ¬è¯­è¨çç¼ºç¹æ¯å®å¯è½è¿äºå¼ºå¤§ï¼å½ç¶ï¼å¦æéç½®æ¥æºæ¯ä¸åä¿¡ä»»çï¼å¯è½ä¼å¼å¥ä¸¥éçå®å¨é®é¢ã\n\n\n# èªå®ä¹éç½®æ ¼å¼\n\nå¦æç±äºæç§åå ï¼é®å¼éç½®æ ¼å¼ä¸è½æ»¡è¶³ä½ çè¦æ±ï¼å¹¶ä¸ç±äºæ§è½æå¤§å°éå¶èæ æ³ä½¿ç¨èæ¬è¯­è¨ï¼é£ä¹å¯ä»¥èèèªå®ä¹éç½®æ ¼å¼ãå¦ææ¯è¿ç§æåµï¼é£ä¹å¨ååºéæ©ä¹åè¦æ³æ¸æ¥ï¼å ä¸ºä½ ä¸ä»è¦ç¼ååç»´æ¤ä¸ä¸ªè§£æå¨ï¼è¿è¦è®©ä½ çç¨æ·çæå¦ä¸ç§éç½®æ ¼å¼ã\n\n\n# ç»è®º\n\næäºè¿ä¹å¤æ´å¥½çéç½®è¯­è¨ï¼æ²¡æçç±è¿è¦ä½¿ç¨ JSONãå¦æè¦åå»ºéè¦ç¨å°éç½®çæ°åºç¨ç¨åºãæ¡æ¶æåºï¼è¯·éæ© JSON ä»¥å¤çå¶ä»éé¡¹ã\n\nè±æåæï¼https://www.lucidchart.com/techblog/2018/07/16/why-json-isnt-a-good-configuration-language/',normalizedContent:'# éï¼ä¸ºä»ä¹è¯´ json ä¸éååéç½®æä»¶ï¼\n\næç¤º\n\nå¾å¤é¡¹ç®ä½¿ç¨ json ä½ä¸ºéç½®æä»¶ï¼æææ¾çä¾å­å°±æ¯ npm å yarn ä½¿ç¨ç package.json æä»¶ãå½ç¶ï¼è¿æå¾å¤å¶ä»æä»¶ï¼ä¾å¦ cloudformationï¼æååªæ jsonï¼ä½ç°å¨ä¹æ¯æ yamlï¼å composerï¼phpï¼ã\n\nä½æ¯ï¼json å®éä¸æ¯ä¸ç§éå¸¸ç³ç³çéç½®è¯­è¨ãå«è¯¯ä¼æçææï¼æå¶å®æ¯åæ¬¢ json çãå®æ¯ä¸ç§ç¸å¯¹çµæ´»çææ¬æ ¼å¼ï¼å¯¹äºæºå¨åäººç±»æ¥è¯´é½å¾å®¹æéè¯»ï¼èä¸æ¯ä¸ç§éå¸¸å¥½çæ°æ®äº¤æ¢åå­å¨æ ¼å¼ãä½ä½ä¸ºä¸ç§éç½®è¯­è¨ï¼å®æå®çä¸è¶³ã\n\n\n# ä¸ºä»ä¹æµè¡ä½¿ç¨ json ä½ä¸ºéç½®è¯­è¨ï¼\n\nå° json ç¨ä½éç½®æä»¶æå ä¸ªæ¹é¢çåå ï¼å¶ä¸­æå¤§çåå å¯è½æ¯å®å¾å®¹æå®ç°ãå¾å¤ç¼ç¨è¯­è¨çæ ååºé½æ¯æ jsonï¼å¼åäººåæç¨æ·å¯è½å·²ç»å¾çæ jsonï¼æä»¥ä¸éè¦å­¦ä¹ æ°çéç½®æ ¼å¼å°±å¯ä»¥ä½¿ç¨é£äºäº§åãç°å¨å ä¹ææçå·¥å·é½æä¾ json æ¯æï¼åæ¬è¯­æ³çªåºæ¾ç¤ºãèªå¨æ ¼å¼åãéªè¯å·¥å·ç­ã\n\nè¿äºé½æ¯å¾å¥½ççç±ï¼ä½è¿ç§æ å¤ä¸å¨çæ ¼å¼å¶å®ä¸éåç¨ä½éç½®ã\n\n\n# json çé®é¢\n\n\n# ç¼ºä¹æ³¨é\n\næ³¨éå¯¹äºéç½®è¯­è¨èè¨ç»å¯¹æ¯ä¸ä¸ªéè¦çåè½ãæ³¨éå¯ç¨äºæ æ³¨ä¸åçéç½®éé¡¹ãè§£éä¸ºä»ä¹è¦éç½®æç¹å®çå¼ï¼æ´éè¦çæ¯ï¼å¨ä½¿ç¨ä¸åçéç½®è¿è¡æµè¯åè°è¯æ¶éè¦ä¸´æ¶æ³¨éæé¨åéç½®ãå½ç¶ï¼å¦æåªæ¯æ json å½ä½æ¯ä¸ç§æ°æ®äº¤æ¢æ ¼å¼ï¼é£ä¹å°±ä¸éè¦ç¨å°æ³¨éã\n\næä»¬å¯ä»¥éè¿ä¸äºæ¹æ³ç» json æ·»å æ³¨éãä¸ç§å¸¸è§çæ¹æ³æ¯å¨å¯¹è±¡ä¸­ä½¿ç¨ç¹æ®çé®ä½ä¸ºæ³¨éï¼ä¾å¦â//âæâ__commentâãä½æ¯ï¼è¿ç§è¯­æ³çå¯è¯»æ§ä¸é«ï¼å¹¶ä¸ä¸ºäºå¨åä¸ªå¯¹è±¡ä¸­åå«å¤ä¸ªæ³¨éï¼éè¦ä¸ºæ¯ä¸ªæ³¨éä½¿ç¨å¯ä¸çé®ãdavid crockfordï¼json çåæèï¼å»ºè®®ä½¿ç¨é¢å¤çå¨æ¥å é¤æ³¨éãå¦æä½ çåºç¨ç¨åºéè¦ä½¿ç¨ json ä½ä¸ºéç½®ï¼é£ä¹å®å¨æ²¡é®é¢ï¼ä¸è¿è¿ç¡®å®å¸¦æ¥äºä¸äºé¢å¤çå·¥ä½éã\n\nä¸äº json åºåè®¸å°æ³¨éä½ä¸ºè¾å¥ãä¾å¦ï¼ruby ç json æ¨¡ååå¯ç¨äº jsonparser.feature.allow_comments åè½ç java jackson åºå¯ä»¥å¤ç javascript é£æ ¼çæ³¨éãä½æ¯ï¼è¿ä¸æ¯æ åçæ¹å¼ï¼èä¸å¾å¤ç¼è¾å¨æ æ³æ­£ç¡®å¤ç json æä»¶ä¸­çæ³¨éï¼è¿è®©ç¼è¾å®ä»¬åå¾æ´å å°é¾ã\n\n\n# è¿äºä¸¥æ ¼\n\njson è§èéå¸¸ä¸¥æ ¼ï¼è¿ä¹æ¯ä¸ºä»ä¹å®ç° json è§£æå¨ä¼è¿ä¹ç®åï¼ä½å¨æçæ¥ï¼å®è¿ä¼å½±åå¯è¯»æ§ï¼å¹¶ä¸å¨è¾å°ç¨åº¦ä¸ä¼å½±åå¯åæ§ã\n\n\n# ä½ä¿¡åªæ¯\n\nä¸å¶ä»éç½®è¯­è¨ç¸æ¯ï¼json æ¾å¾éå¸¸åæãjson çå¾å¤æ ç¹ç¬¦å·å¯¹å¯è¯»æ§æ¯«æ å¸®å©ï¼åµä¸ï¼å¯¹è±¡ä¸­çé®å ä¹é½æ¯æ è¯ç¬¦ï¼æä»¥é®çå¼å·å¶å®æ¯å¤ä½çã\n\næ­¤å¤ï¼json éè¦ä½¿ç¨è±æ¬å·å°æ´ä¸ªææ¡£åå´èµ·æ¥ï¼æä»¥ json æ¯ javascript çå­éï¼å¹¶å¨æµä¸­åéå¤ä¸ªå¯¹è±¡æ¶ç¨äºçå®ä¸åçå¯¹è±¡ãä½æ¯ï¼å¯¹äºéç½®æä»¶æ¥è¯´ï¼æå¤é¢çå¤§æ¬å·å¶å®æ²¡æä»»ä½ç¨å¤ãå¨éç½®æä»¶ä¸­ï¼é®å¼å¯¹ä¹é´çéå·ä¹æ¯æ²¡æå¿è¦çãéå¸¸æåµä¸ï¼æ¯è¡åªæä¸ä¸ªé®å¼å¯¹ï¼æä»¥ä½¿ç¨æ¢è¡ä½ä¸ºåéç¬¦æ´ææä¹ã\n\nè¯´å°éå·ï¼json å±ç¶ä¸åè®¸å¨ç»å°¾åºç°éå·ãå¦æä½ éè¦å¨æ¯ä¸ªé®å¼å¯¹ä¹åä½¿ç¨éå·ï¼é£ä¹è³å°åºè¯¥æ¥åç»å°¾çéå·ï¼å ä¸ºæäºç»å°¾çéå·ï¼å¨æ·»å æ°æ¡ç®æ¶ä¼æ´å®¹æï¼èä¸å¨è¿è¡ commit diff æ¶ä¹æ´æ¸æ°ã\n\n\n# é¿å­ç¬¦ä¸²\n\njson ä½ä¸ºéç½®æ ¼å¼çå¦ä¸ä¸ªé®é¢æ¯ï¼å®ä¸æ¯æå¤è¡å­ç¬¦ä¸²ãå¦æä½ æ³å¨å­ç¬¦ä¸²ä¸­æ¢è¡ï¼å¿é¡»ä½¿ç¨ â\\nâ è¿è¡è½¬ä¹ï¼æ´ç³ç³çæ¯ï¼å¦æä½ æ³è¦ä¸ä¸ªå­ç¬¦ä¸²å¨æä»¶ä¸­å¦èµ·ä¸è¡æ¾ç¤ºï¼é£å°±å½»åºæ²¡åæ³äºãå¦æä½ çéç½®é¡¹éæ²¡æå¾é¿çå­ç¬¦ä¸²ï¼é£å°±ä¸æ¯é®é¢ãä½æ¯ï¼å¦æä½ çéç½®é¡¹éåæ¬äºé¿å­ç¬¦ä¸²ï¼ä¾å¦é¡¹ç®æè¿°æ gpg å¯é¥ï¼ä½ å¯è½ä¸å¸æåªæ¯ä½¿ç¨ â\\nâ æ¥è½¬ä¹èä¸æ¯ä½¿ç¨çå®çæ¢è¡ç¬¦ã\n\n\n# æ°å­\n\næ­¤å¤ï¼å¨æäºæåµä¸ï¼json å¯¹æ°å­çå®ä¹å¯è½ä¼æé®é¢ãjson è§èä¸­å°æ°å­å®ä¹æä½¿ç¨åè¿å¶è¡¨ç¤ºçä»»æç²¾åº¦æéæµ®ç¹æ°ãå¯¹äºå¤§å¤æ°åºç¨ç¨åºæ¥è¯´ï¼è¿æ²¡æé®é¢ãä½æ¯ï¼å¦æä½ éè¦ä½¿ç¨åå­è¿å¶è¡¨ç¤ºæ³æè¡¨ç¤ºæ ç©·å¤§æ nan ç­å¼æ¶ï¼é£ä¹ toml æ yaml å°è½å¤æ´å¥½å°å¤çå®ä»¬ã\n\n{\n\n  "name": "example",\n\n  "description": "a really long description that needs multiple lines.\\nthis is a sample project to illustrate why json is not a good configuration format. this description is pretty long, but it doesn\'t have any way to go onto multiple lines.",\n\n  "version": "0.0.1",\n\n  "main": "index.js",\n\n  "//": "this is as close to a comment as you are going to get",\n\n  "keywords": ["example", "config"],\n\n  "scripts": {\n\n    "test": "./test.sh",\n\n    "do_stuff": "./do_stuff.sh"\n\n  },\n\n  "bugs": {\n\n    "url": "https://example.com/bugs"\n\n  },\n\n  "contributors": [{\n\n    "name": "john doe",\n\n    "email": "johndoe@example.com"\n\n  }, {\n\n    "name": "ivy lane",\n\n    "url": "https://example.com/ivylane"\n\n  }],\n\n  "dependencies": {\n\n    "dep1": "^1.0.0",\n\n    "dep2": "3.40",\n\n    "dep3": "6.7"\n\n  }\n\n}\n\n\n\n# json çæ¿ä»£æ¹æ¡\n\néæ©åªä¸ç§éç½®è¯­è¨åå³äºä½ çåºç¨ç¨åºãæ¯ç§è¯­è¨é½æåèªçä¼ç¼ºç¹ï¼ä¸é¢ååºäºä¸äºå¯ä»¥èèçéé¡¹ãå®ä»¬é½æ¯ä¸ºéç½®èè®¾è®¡çè¯­è¨ï¼æ¯ä¸ç§é½æ¯ json è¿æ ·çæ°æ®è¯­è¨æ´å¥½ã\n\nname = "example"\n\ndescription = """\n\na really long description that needs multiple lines.\n\nthis is a sample project to illustrate why json is not a \\\n\ngood configuration format. this description is pretty long, \\\n\nbut it doesn\'t have any way to go onto multiple lines."""\n\n\n\nversion = "0.0.1"\n\nmain = "index.js"\n\n# this is a comment\n\nkeywords = ["example", "config"]\n\n\n\n[bugs]\n\nurl = "https://example.com/bugs"\n\n\n\n[scripts]\n\n\n\ntest = "./test.sh"\n\ndo_stuff = "./do_stuff.sh"\n\n\n\n[[contributors]]\n\nname = "john doe"\n\nemail = "johndow@example.com"\n\n\n\n[[contributors]]\n\nname = "ivy lane"\n\nurl = "https://example.com/ivylane"\n\n\n\n[dependencies]\n\n\n\ndep1 = "^1.0.0"\n\n# why we depend on dep2\n\ndep2 = "3.40"\n\ndep3 = "6.7"\n\n\n\n# hjson\n\nhjson æ¯ä¸ç§åºäº json çæ ¼å¼ï¼ä½å·ææ´å¤§ççµæ´»æ§ï¼å¯è¯»æ§ä¹æ´å¼ºãå®æ¯ææ³¨éãå¤è¡å­ç¬¦ä¸²ãä¸å¸¦å¼å·çé®åå­ç¬¦ä¸²ï¼ä»¥åå¯éçéå·ãå¦æä½ æ³è¦ json ç»æçç®åæ§ï¼åæ¶å¯¹éç½®æä»¶æ´åå¥½ï¼é£ä¹å¯ä»¥èè hjsonãæä¸äºå¯ä»¥å° hjson è½¬æ¢ä¸º json çå½ä»¤è¡å·¥å·ï¼å¦æä½ ä½¿ç¨çå·¥å·æ¯åºäº json çï¼å¯ä»¥åç¨ hjson ç¼åéç½®ï¼ç¶ååè½¬æ¢æ jsonãjson5 æ¯å¦ä¸ä¸ªä¸ hjson éå¸¸ç¸ä¼¼çéç½®è¯­è¨ã\n\n{\n\n  name: example\n\n  description: \'\'\'\n\n  a really long description that needs multiple lines.\n\n  this is a sample project to illustrate why json is \n\n  not a good configuration format.  this description \n\n  is pretty long, but it doesn\'t have any way to go \n\n  onto multiple lines.\n\n  \'\'\'\n\n  version: 0.0.1\n\n  main: index.js\n\n  # this is a a comment\n\n  keywords: ["example", "config"]\n\n  scripts: {\n\n    test: ./test.sh\n\n    do_stuff: ./do_stuff.sh\n\n  }\n\n  bugs: {\n\n    url: https://example.com/bugs\n\n  }\n\n  contributors: [{\n\n    name: john doe\n\n    email: johndoe@example.com\n\n  } {\n\n    name: ivy lane\n\n    url: https://example.com/ivylane\n\n  }]\n\n  dependencies: {\n\n    dep1: ^1.0.0\n\n    # why we have this dependency\n\n    dep2: "3.40"\n\n    dep3: "6.7"\n\n  }\n\n}\n\n\n\n# hocon\n\nhocon æ¯ä¸º play æ¡æ¶è®¾è®¡çéç½®æ ¼å¼ï¼å¨ scala é¡¹ç®ä¸­éå¸¸æµè¡ãå®æ¯ json çè¶éï¼å æ­¤å¯ä»¥ä½¿ç¨ç°æç json æä»¶ãé¤äºæ³¨éãå¯ééå·åå¤è¡å­ç¬¦ä¸²è¿äºæ åç¹æ§å¤ï¼hocon è¿æ¯æä»å¶ä»æä»¶å¯¼å¥åå¼ç¨å¶ä»å¼çé®ï¼é¿åéå¤ä»£ç ï¼å¹¶ä½¿ç¨ä»¥ç¹ä½ä¸ºåéç¬¦çé®æ¥æå®å¼çè·¯å¾ï¼å æ­¤ç¨æ·å¯ä»¥ä¸å¿å°ææå¼ç´æ¥æ¾å¨è±æ¬å·å¯¹è±¡ä¸­ã\n\nname = example\n\ndescription = """\n\na really long description that needs multiple lines.\n\n\n\nthis is a sample project to illustrate why json is \n\nnot a good configuration format.  this description \n\nis pretty long, but it doesn\'t have any way to go \n\nonto multiple lines.\n\n"""\n\nversion = 0.0.1\n\nmain = index.js\n\n# this is a a comment\n\nkeywords = ["example", "config"]\n\nscripts {\n\n  test = ./test.sh\n\n  do_stuff = ./do_stuff.sh\n\n}\n\nbugs.url = "https://example.com/bugs"\n\ncontributors = [\n\n  {\n\n    name = john doe\n\n    email = johndoe@example.com\n\n  }\n\n  {\n\n    name = ivy lane\n\n    url = "https://example.com/ivylane"\n\n  }\n\n]\n\ndependencies {\n\n  dep1 = ^1.0.0\n\n  # why we have this dependency\n\n  dep2 = "3.40"\n\n  dep3 = "6.7"\n\n}\n\n\n\n# yaml\n\nyamlï¼yaml ä¸æ¯æ è®°è¯­è¨ï¼æ¯ä¸ç§éå¸¸çµæ´»çæ ¼å¼ï¼å ä¹æ¯ json çè¶éï¼å·²ç»è¢«ç¨å¨ä¸äºèåçé¡¹ç®ä¸­ï¼å¦ travis ciãcircle ci å aws cloudformationãyaml çåºå ä¹å json ä¸æ ·æ å¤ä¸å¨ãé¤äºæ¯ææ³¨éãæ¢è¡ç¬¦åéãå¤è¡å­ç¬¦ä¸²ãè£¸å­ç¬¦ä¸²åæ´çµæ´»çç±»åç³»ç»ä¹å¤ï¼yaml ä¹æ¯æå¼ç¨æä»¶ï¼ä»¥é¿åéå¤ä»£ç ã\n\nyaml çä¸»è¦ç¼ºç¹æ¯è§èéå¸¸å¤æï¼ä¸åçå®ç°ä¹é´å¯è½å­å¨ä¸ä¸è´çæåµãå®å°ç¼©è¿è§ä¸ºä¸¥æ ¼è¯­æ³çä¸é¨åï¼ç±»ä¼¼äº pythonï¼ï¼æäºäººåæ¬¢ï¼æäºäººä¸åæ¬¢ãè¿ä¼è®©å¤å¶åç²è´´åå¾å¾éº»ç¦ã\n\n\n# èæ¬è¯­è¨\n\nå¦æä½ çåºç¨ç¨åºæ¯ä½¿ç¨ python æ ruby ç­èæ¬è¯­è¨å¼åçï¼å¹¶ä¸ä½ ç¥ééç½®çæ¥æºæ¯å¯é çï¼é£ä¹æå¥½çéæ©å¯è½å°±æ¯ä½¿ç¨è¿äºè¯­è¨è¿è¡éç½®ãå¦æä½ éè¦ä¸ä¸ªçæ­£çµæ´»çéç½®éé¡¹ï¼ä¹å¯ä»¥å¨ç¼è¯è¯­è¨ä¸­åµå¥è¯¸å¦ lua ä¹ç±»çèæ¬è¯­è¨ãè¿æ ·å¯ä»¥è·å¾èæ¬è¯­è¨ççµæ´»æ§ï¼èä¸æ¯ä½¿ç¨ä¸åçéç½®è¯­è¨æ´å®¹æå®ç°ãä½¿ç¨èæ¬è¯­è¨çç¼ºç¹æ¯å®å¯è½è¿äºå¼ºå¤§ï¼å½ç¶ï¼å¦æéç½®æ¥æºæ¯ä¸åä¿¡ä»»çï¼å¯è½ä¼å¼å¥ä¸¥éçå®å¨é®é¢ã\n\n\n# èªå®ä¹éç½®æ ¼å¼\n\nå¦æç±äºæç§åå ï¼é®å¼éç½®æ ¼å¼ä¸è½æ»¡è¶³ä½ çè¦æ±ï¼å¹¶ä¸ç±äºæ§è½æå¤§å°éå¶èæ æ³ä½¿ç¨èæ¬è¯­è¨ï¼é£ä¹å¯ä»¥èèèªå®ä¹éç½®æ ¼å¼ãå¦ææ¯è¿ç§æåµï¼é£ä¹å¨ååºéæ©ä¹åè¦æ³æ¸æ¥ï¼å ä¸ºä½ ä¸ä»è¦ç¼ååç»´æ¤ä¸ä¸ªè§£æå¨ï¼è¿è¦è®©ä½ çç¨æ·çæå¦ä¸ç§éç½®æ ¼å¼ã\n\n\n# ç»è®º\n\næäºè¿ä¹å¤æ´å¥½çéç½®è¯­è¨ï¼æ²¡æçç±è¿è¦ä½¿ç¨ jsonãå¦æè¦åå»ºéè¦ç¨å°éç½®çæ°åºç¨ç¨åºãæ¡æ¶æåºï¼è¯·éæ© json ä»¥å¤çå¶ä»éé¡¹ã\n\nè±æåæï¼https://www.lucidchart.com/techblog/2018/07/16/why-json-isnt-a-good-configuration-language/',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"dockerç£çç©ºé´ä¸è¶³è§£å³åæ³",frontmatter:{title:"dockerç£çç©ºé´ä¸è¶³è§£å³åæ³",date:"2022-02-11T14:32:31.000Z",permalink:"/pages/be0094/"},regularPath:"/17.Docker/09.%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/01.docker%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html",relativePath:"17.Docker/09.å¸¸è§é®é¢/01.dockerç£çç©ºé´ä¸è¶³è§£å³åæ³.md",key:"v-321c5958",path:"/pages/be0094/",headers:[{level:2,title:"å¯¼å¥dockeréåæ¶ï¼éè¯¯æç¤ºï¼ç£çç©ºé´ä¸è¶³ã",slug:"å¯¼å¥dockeréåæ¶-éè¯¯æç¤º-ç£çç©ºé´ä¸è¶³ã",normalizedTitle:"å¯¼å¥dockeréåæ¶ï¼éè¯¯æç¤ºï¼ç£çç©ºé´ä¸è¶³ã",charIndex:23},{level:2,title:"å¸¸è§dockeræ¸çæ¹æ³",slug:"å¸¸è§dockeræ¸çæ¹æ³",normalizedTitle:"å¸¸è§dockeræ¸çæ¹æ³",charIndex:717}],headersStr:"å¯¼å¥dockeréåæ¶ï¼éè¯¯æç¤ºï¼ç£çç©ºé´ä¸è¶³ã å¸¸è§dockeræ¸çæ¹æ³",content:'# dockerç£çç©ºé´ä¸è¶³è§£å³åæ³\n\n\n# å¯¼å¥dockeréåæ¶ï¼éè¯¯æç¤ºï¼ç£çç©ºé´ä¸è¶³ã\n\n1.æ¥çdockeréåå­æ¾ç®å½ç©ºé´å¤§å°\n\ndu -hs /var/lib/docker/\n\n\n2.åæ­¢dockeræå¡ã\n\nsystemctl stop docker\n\n\n3.æ¥çç£çå®¹éå¤§çç©ºé´ï¼ä¸å¨ä¸é¢åå»ºæ°çdockerç®å½ã\n\ndf -h\nmkdir -p /data/docker/lib\n\n\n4.è¿ç§»/var/lib/dockerç®å½ä¸çæä»¶å°æ°åå»ºçç®å½/data/docker/lib\n\nrsync -avz /var/lib/docker /data/docker/lib/\n\n\n5.ç¼è¾ /etc/docker/daemon.json æ·»å å¦ä¸åæ°\n\n{\n  "graph": "/data/docker/lib/docker"\n}\n\n\n6.éæ°å è½½dockerï¼å¹¶éå¯dockeræå¡ã\n\nsystemctl daemon-reload && systemctl restart docker\n\n\n7.æ£æ¥dockeræ¯å¦åæ´ä¸ºæ°ç®å½/data/docker/lib/docker\n\n[root@localhost ~]# docker info\n\nDocker Root Dir: /data/docker/lib/docker\n\nDebug Mode (client): false\n\nDebug Mode (server): false\n\nRegistry: https://index.docker.io/v1/\n\n\n8.å ædockeræ§ç®å½\n\nrm -rf /var/lib/docker\n\n\n\n# å¸¸è§dockeræ¸çæ¹æ³\n\n * docker system df ç±»ä¼¼äºLinuxä¸çdfå½ä»¤ï¼ç¨äºæ¥çDockerçç£çä½¿ç¨æåµ:\n\n * docker system prune å¯ä»¥ç¨äºæ¸çç£çï¼å é¤å³é­çå®¹å¨ãæ ç¨çæ°æ®å·åç½ç»ï¼ä»¥ådanglingéå(å³æ tagçéå)ã\n\n * docker system prune -a æ¸çå¾æ´å å½»åºï¼å¯ä»¥å°æ²¡æå®¹å¨ä½¿ç¨Dockeréåé½å æãæ³¨æï¼è¿ä¸¤ä¸ªå½ä»¤ä¼æä½ ææ¶å³é­çå®¹å¨ï¼ä»¥åææ¶æ²¡æç¨å°çDockeréåé½å æäºâ¦æä»¥ä½¿ç¨ä¹åä¸å®è¦æ³æ¸æ¥.ãææ²¡ç¨è¿ï¼å ä¸ºä¼æ¸ç æ²¡æå¼å¯ç Docker',normalizedContent:'# dockerç£çç©ºé´ä¸è¶³è§£å³åæ³\n\n\n# å¯¼å¥dockeréåæ¶ï¼éè¯¯æç¤ºï¼ç£çç©ºé´ä¸è¶³ã\n\n1.æ¥çdockeréåå­æ¾ç®å½ç©ºé´å¤§å°\n\ndu -hs /var/lib/docker/\n\n\n2.åæ­¢dockeræå¡ã\n\nsystemctl stop docker\n\n\n3.æ¥çç£çå®¹éå¤§çç©ºé´ï¼ä¸å¨ä¸é¢åå»ºæ°çdockerç®å½ã\n\ndf -h\nmkdir -p /data/docker/lib\n\n\n4.è¿ç§»/var/lib/dockerç®å½ä¸çæä»¶å°æ°åå»ºçç®å½/data/docker/lib\n\nrsync -avz /var/lib/docker /data/docker/lib/\n\n\n5.ç¼è¾ /etc/docker/daemon.json æ·»å å¦ä¸åæ°\n\n{\n  "graph": "/data/docker/lib/docker"\n}\n\n\n6.éæ°å è½½dockerï¼å¹¶éå¯dockeræå¡ã\n\nsystemctl daemon-reload && systemctl restart docker\n\n\n7.æ£æ¥dockeræ¯å¦åæ´ä¸ºæ°ç®å½/data/docker/lib/docker\n\n[root@localhost ~]# docker info\n\ndocker root dir: /data/docker/lib/docker\n\ndebug mode (client): false\n\ndebug mode (server): false\n\nregistry: https://index.docker.io/v1/\n\n\n8.å ædockeræ§ç®å½\n\nrm -rf /var/lib/docker\n\n\n\n# å¸¸è§dockeræ¸çæ¹æ³\n\n * docker system df ç±»ä¼¼äºlinuxä¸çdfå½ä»¤ï¼ç¨äºæ¥çdockerçç£çä½¿ç¨æåµ:\n\n * docker system prune å¯ä»¥ç¨äºæ¸çç£çï¼å é¤å³é­çå®¹å¨ãæ ç¨çæ°æ®å·åç½ç»ï¼ä»¥ådanglingéå(å³æ tagçéå)ã\n\n * docker system prune -a æ¸çå¾æ´å å½»åºï¼å¯ä»¥å°æ²¡æå®¹å¨ä½¿ç¨dockeréåé½å æãæ³¨æï¼è¿ä¸¤ä¸ªå½ä»¤ä¼æä½ ææ¶å³é­çå®¹å¨ï¼ä»¥åææ¶æ²¡æç¨å°çdockeréåé½å æäºâ¦æä»¥ä½¿ç¨ä¹åä¸å®è¦æ³æ¸æ¥.ãææ²¡ç¨è¿ï¼å ä¸ºä¼æ¸ç æ²¡æå¼å¯ç docker',charsets:{cjk:!0},lastUpdated:"2022/02/11, 14:49:04",lastUpdatedTimestamp:1644562144e3},{title:"ä»ä¹æ¯ Kubernetes",frontmatter:{title:"ä»ä¹æ¯ Kubernetes",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/419ea5/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Kubernetes.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/01.ä»ä¹æ¯ Kubernetes.md",key:"v-efa3c938",path:"/pages/419ea5/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:21},{level:2,title:"ç¹ç¹",slug:"ç¹ç¹",normalizedTitle:"ç¹ç¹",charIndex:284},{level:2,title:"ä»ä¼ ç»å°å®¹å¨åé¨ç½²",slug:"ä»ä¼ ç»å°å®¹å¨åé¨ç½²",normalizedTitle:"ä»ä¼ ç»å°å®¹å¨åé¨ç½²",charIndex:380},{level:3,title:"ä¼ ç»çé¨ç½²æ¹å¼",slug:"ä¼ ç»çé¨ç½²æ¹å¼",normalizedTitle:"ä¼ ç»çé¨ç½²æ¹å¼",charIndex:396},{level:3,title:"å®¹å¨åé¨ç½²çä¼å¿",slug:"å®¹å¨åé¨ç½²çä¼å¿",normalizedTitle:"å®¹å¨åé¨ç½²çä¼å¿",charIndex:530},{level:2,title:"ä¸ºä»ä¹éè¦ Kubernetes",slug:"ä¸ºä»ä¹éè¦-kubernetes",normalizedTitle:"ä¸ºä»ä¹éè¦ kubernetes",charIndex:870}],headersStr:"æ¦è¿° ç¹ç¹ ä»ä¼ ç»å°å®¹å¨åé¨ç½² ä¼ ç»çé¨ç½²æ¹å¼ å®¹å¨åé¨ç½²çä¼å¿ ä¸ºä»ä¹éè¦ Kubernetes",content:"# ä»ä¹æ¯ Kubernetes\n\n\n# æ¦è¿°\n\n\n\nKubernetes æ¯ Google 2014 å¹´åå»ºç®¡ççï¼æ¯ Google 10 å¤å¹´å¤§è§æ¨¡å®¹å¨ç®¡çææ¯ Borg çå¼æºçæ¬ã\n\nKubernetes æ¯å®¹å¨éç¾¤ç®¡çç³»ç»ï¼æ¯ä¸ä¸ªå¼æºçå¹³å°ï¼å¯ä»¥å®ç°å®¹å¨éç¾¤çèªå¨åé¨ç½²ãèªå¨æ©ç¼©å®¹ãç»´æ¤ç­åè½ãä½¿ç¨ Kubernetes æä»¬å¯ä»¥ï¼\n\n * å¿«éé¨ç½²åºç¨\n * å¿«éæ©å±åºç¨\n * æ ç¼å¯¹æ¥æ°çåºç¨åè½\n * èçèµæºï¼ä¼åç¡¬ä»¶èµæºçä½¿ç¨\n\nKubernetes çç®æ æ¯ä¿è¿å®åç»ä»¶åå·¥å·ççæç³»ç»ï¼ä»¥åè½»åºç¨ç¨åºå¨å¬æäºæç§æäºä¸­è¿è¡çè´æã\n\n\n# ç¹ç¹\n\n * å¯ç§»æ¤ï¼ æ¯æå¬æäºï¼ç§æäºï¼æ··åäºï¼å¤éäºï¼å¤ä¸ªå¬å±äºï¼\n * å¯æ©å±ï¼ æ¨¡ååï¼æä»¶åï¼å¯æè½½ï¼å¯ç»å\n * èªå¨åï¼ èªå¨é¨ç½²ï¼èªå¨éå¯ï¼èªå¨å¤å¶ï¼èªå¨ä¼¸ç¼©/æ©å±\n\n\n# ä»ä¼ ç»å°å®¹å¨åé¨ç½²\n\n\n\n\n# ä¼ ç»çé¨ç½²æ¹å¼\n\nä¼ ç»çåºç¨é¨ç½²æ¹å¼æ¯éè¿æä»¶æèæ¬æ¥å®è£åºç¨ãè¿æ ·åçç¼ºç¹æ¯åºç¨çè¿è¡ãéç½®ãç®¡çãææçå­å¨æå°ä¸å½åæä½ç³»ç»ç»å®ï¼è¿æ ·åå¹¶ä¸å©äºåºç¨çåçº§æ´æ°/åæ»ç­æä½ï¼å½ç¶ä¹å¯ä»¥éè¿åå»ºèæºçæ¹å¼æ¥å®ç°æäºåè½ï¼ä½æ¯èææºéå¸¸éï¼å¹¶ä¸å©äºå¯ç§»æ¤æ§ã\n\n\n# å®¹å¨åé¨ç½²çä¼å¿\n\n * å¿«éåå»º/é¨ç½²åºç¨ï¼ ä¸èææºç¸æ¯ï¼å®¹å¨éåçåå»ºæ´å å®¹æã\n * æç»­å¼åãéæåé¨ç½²ï¼ æä¾å¯é ä¸é¢ç¹çå®¹å¨éåæå»º/é¨ç½²ï¼å¹¶ä½¿ç¨å¿«éåç®åçåæ»(ç±äºéåä¸å¯åæ§)ã\n * å¼ååè¿è¡ç¸åç¦»ï¼ å¨ build æè release é¶æ®µåå»ºå®¹å¨éåï¼ä½¿å¾åºç¨ååºç¡è®¾æ½è§£è¦ã\n * å¼åï¼æµè¯åçäº§ç¯å¢ä¸è´æ§ï¼ å¨æ¬å°æå¤ç½ï¼çäº§ç¯å¢ï¼è¿è¡çä¸è´æ§ã\n * äºå¹³å°æå¶ä»æä½ç³»ç»ï¼ å¯ä»¥å¨ UbuntuãRHELãCoreOSãon-premãGoogle Container Engine æå¶å®ä»»ä½ç¯å¢ä¸­è¿è¡ã\n * åå¸å¼ï¼å¼¹æ§ï¼å¾®æå¡åï¼ åºç¨ç¨åºåä¸ºæ´å°çãç¬ç«çé¨ä»¶ï¼å¯ä»¥å¨æé¨ç½²åç®¡çã\n * èµæºéç¦»\n * èµæºå©ç¨æ´é«æ\n\n\n# ä¸ºä»ä¹éè¦ Kubernetes\n\nå¯ä»¥å¨ç©çæèææºç Kubernetes éç¾¤ä¸è¿è¡å®¹å¨ååºç¨ï¼Kubernetes è½æä¾ä¸ä¸ªä»¥ âå®¹å¨ä¸ºä¸­å¿çåºç¡æ¶æâï¼æ»¡è¶³å¨çäº§ç¯å¢ä¸­è¿è¡åºç¨çä¸äºå¸¸è§éæ±ï¼å¦ï¼\n\n * å¤ä¸ªè¿ç¨ååå·¥ä½\n * å­å¨ç³»ç»æè½½\n * åºç¨å¥åº·æ£æ¥\n * åºç¨å®ä¾çå¤å¶\n * èªå¨ä¼¸ç¼©/æ©å±\n * æ³¨åä¸åç°\n * è´è½½åè¡¡\n * æ»å¨æ´æ°\n * èµæºçæ§\n * æ¥å¿è®¿é®\n * è°è¯åºç¨ç¨åº\n * æä¾è®¤è¯åææ",normalizedContent:"# ä»ä¹æ¯ kubernetes\n\n\n# æ¦è¿°\n\n\n\nkubernetes æ¯ google 2014 å¹´åå»ºç®¡ççï¼æ¯ google 10 å¤å¹´å¤§è§æ¨¡å®¹å¨ç®¡çææ¯ borg çå¼æºçæ¬ã\n\nkubernetes æ¯å®¹å¨éç¾¤ç®¡çç³»ç»ï¼æ¯ä¸ä¸ªå¼æºçå¹³å°ï¼å¯ä»¥å®ç°å®¹å¨éç¾¤çèªå¨åé¨ç½²ãèªå¨æ©ç¼©å®¹ãç»´æ¤ç­åè½ãä½¿ç¨ kubernetes æä»¬å¯ä»¥ï¼\n\n * å¿«éé¨ç½²åºç¨\n * å¿«éæ©å±åºç¨\n * æ ç¼å¯¹æ¥æ°çåºç¨åè½\n * èçèµæºï¼ä¼åç¡¬ä»¶èµæºçä½¿ç¨\n\nkubernetes çç®æ æ¯ä¿è¿å®åç»ä»¶åå·¥å·ççæç³»ç»ï¼ä»¥åè½»åºç¨ç¨åºå¨å¬æäºæç§æäºä¸­è¿è¡çè´æã\n\n\n# ç¹ç¹\n\n * å¯ç§»æ¤ï¼ æ¯æå¬æäºï¼ç§æäºï¼æ··åäºï¼å¤éäºï¼å¤ä¸ªå¬å±äºï¼\n * å¯æ©å±ï¼ æ¨¡ååï¼æä»¶åï¼å¯æè½½ï¼å¯ç»å\n * èªå¨åï¼ èªå¨é¨ç½²ï¼èªå¨éå¯ï¼èªå¨å¤å¶ï¼èªå¨ä¼¸ç¼©/æ©å±\n\n\n# ä»ä¼ ç»å°å®¹å¨åé¨ç½²\n\n\n\n\n# ä¼ ç»çé¨ç½²æ¹å¼\n\nä¼ ç»çåºç¨é¨ç½²æ¹å¼æ¯éè¿æä»¶æèæ¬æ¥å®è£åºç¨ãè¿æ ·åçç¼ºç¹æ¯åºç¨çè¿è¡ãéç½®ãç®¡çãææçå­å¨æå°ä¸å½åæä½ç³»ç»ç»å®ï¼è¿æ ·åå¹¶ä¸å©äºåºç¨çåçº§æ´æ°/åæ»ç­æä½ï¼å½ç¶ä¹å¯ä»¥éè¿åå»ºèæºçæ¹å¼æ¥å®ç°æäºåè½ï¼ä½æ¯èææºéå¸¸éï¼å¹¶ä¸å©äºå¯ç§»æ¤æ§ã\n\n\n# å®¹å¨åé¨ç½²çä¼å¿\n\n * å¿«éåå»º/é¨ç½²åºç¨ï¼ ä¸èææºç¸æ¯ï¼å®¹å¨éåçåå»ºæ´å å®¹æã\n * æç»­å¼åãéæåé¨ç½²ï¼ æä¾å¯é ä¸é¢ç¹çå®¹å¨éåæå»º/é¨ç½²ï¼å¹¶ä½¿ç¨å¿«éåç®åçåæ»(ç±äºéåä¸å¯åæ§)ã\n * å¼ååè¿è¡ç¸åç¦»ï¼ å¨ build æè release é¶æ®µåå»ºå®¹å¨éåï¼ä½¿å¾åºç¨ååºç¡è®¾æ½è§£è¦ã\n * å¼åï¼æµè¯åçäº§ç¯å¢ä¸è´æ§ï¼ å¨æ¬å°æå¤ç½ï¼çäº§ç¯å¢ï¼è¿è¡çä¸è´æ§ã\n * äºå¹³å°æå¶ä»æä½ç³»ç»ï¼ å¯ä»¥å¨ ubuntuãrhelãcoreosãon-premãgoogle container engine æå¶å®ä»»ä½ç¯å¢ä¸­è¿è¡ã\n * åå¸å¼ï¼å¼¹æ§ï¼å¾®æå¡åï¼ åºç¨ç¨åºåä¸ºæ´å°çãç¬ç«çé¨ä»¶ï¼å¯ä»¥å¨æé¨ç½²åç®¡çã\n * èµæºéç¦»\n * èµæºå©ç¨æ´é«æ\n\n\n# ä¸ºä»ä¹éè¦ kubernetes\n\nå¯ä»¥å¨ç©çæèææºç kubernetes éç¾¤ä¸è¿è¡å®¹å¨ååºç¨ï¼kubernetes è½æä¾ä¸ä¸ªä»¥ âå®¹å¨ä¸ºä¸­å¿çåºç¡æ¶æâï¼æ»¡è¶³å¨çäº§ç¯å¢ä¸­è¿è¡åºç¨çä¸äºå¸¸è§éæ±ï¼å¦ï¼\n\n * å¤ä¸ªè¿ç¨ååå·¥ä½\n * å­å¨ç³»ç»æè½½\n * åºç¨å¥åº·æ£æ¥\n * åºç¨å®ä¾çå¤å¶\n * èªå¨ä¼¸ç¼©/æ©å±\n * æ³¨åä¸åç°\n * è´è½½åè¡¡\n * æ»å¨æ´æ°\n * èµæºçæ§\n * æ¥å¿è®¿é®\n * è°è¯åºç¨ç¨åº\n * æä¾è®¤è¯åææ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Kubernetes å®è£åçåå¤",frontmatter:{title:"Kubernetes å®è£åçåå¤",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/b2e7fa/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/02.Kubernetes%20%E5%AE%89%E8%A3%85%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/02.Kubernetes å®è£åçåå¤.md",key:"v-255f6b29",path:"/pages/b2e7fa/",headers:[{level:2,title:"åææ¡ä»¶",slug:"åææ¡ä»¶",normalizedTitle:"åææ¡ä»¶",charIndex:58},{level:2,title:"ä¿®æ¹ä¸»æºå",slug:"ä¿®æ¹ä¸»æºå",normalizedTitle:"ä¿®æ¹ä¸»æºå",charIndex:1201},{level:2,title:"ä¿®æ¹/etc/hostsæä»¶",slug:"ä¿®æ¹-etc-hostsæä»¶",normalizedTitle:"ä¿®æ¹/etc/hostsæä»¶",charIndex:1378},{level:2,title:"å³é­é²ç«å¢åselinux",slug:"å³é­é²ç«å¢åselinux",normalizedTitle:"å³é­é²ç«å¢åselinux",charIndex:1507},{level:2,title:"å³é­swap",slug:"å³é­swap",normalizedTitle:"å³é­swap",charIndex:1668},{level:2,title:"éç½®æ¶é´åæ­¥",slug:"éç½®æ¶é´åæ­¥",normalizedTitle:"éç½®æ¶é´åæ­¥",charIndex:2042},{level:2,title:"éç½®æænodeèç¹",slug:"éç½®æænodeèç¹",normalizedTitle:"éç½®æænodeèç¹",charIndex:2535},{level:2,title:"ä¿®æ¹iptablesç¸å³åæ°",slug:"ä¿®æ¹iptablesç¸å³åæ°",normalizedTitle:"ä¿®æ¹iptablesç¸å³åæ°",charIndex:3166},{level:2,title:"å è½½ipvsç¸å³æ¨¡å",slug:"å è½½ipvsç¸å³æ¨¡å",normalizedTitle:"å è½½ipvsç¸å³æ¨¡å",charIndex:3497},{level:2,title:"å®è£ Docker",slug:"å®è£-docker",normalizedTitle:"å®è£ docker",charIndex:4135},{level:3,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:13},{level:3,title:"éªè¯",slug:"éªè¯",normalizedTitle:"éªè¯",charIndex:4576},{level:3,title:"éç½®å éå¨",slug:"éç½®å éå¨",normalizedTitle:"éç½®å éå¨",charIndex:5421}],headersStr:"åææ¡ä»¶ ä¿®æ¹ä¸»æºå ä¿®æ¹/etc/hostsæä»¶ å³é­é²ç«å¢åselinux å³é­swap éç½®æ¶é´åæ­¥ éç½®æænodeèç¹ ä¿®æ¹iptablesç¸å³åæ° å è½½ipvsç¸å³æ¨¡å å®è£ Docker å®è£ éªè¯ éç½®å éå¨",content:"# Kubernetes å®è£åçåå¤\n\nå®æ¹ææ¡£\n\nå®è£ kubeadm ä½¿ç¨ kubeadm åå»ºéç¾¤\n\n\n# åææ¡ä»¶\n\næ¬æ¬¡å®è£éç¨ CentOS 7 çæ¬å®è£ kubernetes éç¾¤ç¯å¢ï¼éç¾¤èç¹ä¸º 1 ä¸» 2 ä»æ¨¡å¼ï¼æ­¤æ¬¡å¯¹èææºä¼æäºåºæ¬è¦æ±ï¼å¦ä¸ï¼\n\n * OSï¼CentOS 7.9\n * CPUï¼æä½è¦æ±ï¼1 CPU 2 æ ¸\n * åå­ï¼æä½è¦æ±ï¼2GB\n * ç£çï¼æä½è¦æ±ï¼20GB\n * ç½ç»ï¼å¯ä»¥è®¿é®å¤ç½ï¼ä¸éç¾¤ä¸­çæææºå¨çç½ç»å¯ä»¥ç¸äºéä¿¡\n\nåºäºUbuntu é¨ç½²K8Sæç¨\n\nè¯·ç¹å»è¿é\n\nåå»ºä¸å°èææºï¼åå«å½åå¦ä¸ï¼\n\n * k8s-master\n * k8s-node1\n * k8s-node2\n\nä¸»æºå          IPå°å              è§è²       OS          ç»ä»¶                         éç½®\nk8s-master   192.168.199.101   master   CentOS7.7   kube-apiserver             2æ ¸2G\n                                                    kube-controller-manasger\n                                                    kube-scheduler\n                                                    kube-proxy\n                                                    etcd\n                                                    coredns\n                                                    kube-flannel\nk8s-node1    192.168.199.102   node     CentOS7.7   kube-proxy                 2æ ¸2G\n                                                    kube-flannel\nk8s-node2    192.168.199.103   node     CentOS7.7   kube-proxy                 2æ ¸2G\n                                                    kube-flannel\n\næç¤º\n\næ ç¹æ®è¯´æä»¥ä¸æä½å¨ææèç¹æ§è¡\n\n\n# ä¿®æ¹ä¸»æºå\n\nå¨åä¸å±åç½ä¸­ä¸»æºåä¸åºè¯¥ç¸åï¼æä»¥æä»¬éè¦åä¿®æ¹ã\n\n#masterèç¹:\nhostnamectl set-hostname k8s-master\n#node1èç¹ï¼\nhostnamectl set-hostname k8s-node1\n#node2èç¹:\nhostnamectl set-hostname k8s-node2\n\n\n\n# ä¿®æ¹/etc/hostsæä»¶\n\ncat >> /etc/hosts << EOF\n192.168.199.101 k8s-master\n192.168.199.102 k8s-node1\n192.168.199.103 k8s-node2\nEOF\n\n\n\n# å³é­é²ç«å¢åselinux\n\nsystemctl stop firewalld && systemctl disable firewalld\nsed -i 's/^SELINUX=enforcing$/SELINUX=disabled/' /etc/selinux/config && setenforce 0\n\n\n\n# å³é­swap\n\nswapoff -a\nyes | cp /etc/fstab /etc/fstab_bak\ncat /etc/fstab_bak |grep -v swap > /etc/fstab\n\n\nä½¿ç¨free -hå½ä»¤æ£æ¥éç½®æ¯å¦çæ\n\n\n\n\n\nÂ \n\n\n[root@k8s-master etc]# free -h   \n              total        used        free      shared  buff/cache   available\nMem:           1.8G        142M        1.5G        8.5M        122M        1.5G\nSwap:            0B          0B          0B\n\n\n\n# éç½®æ¶é´åæ­¥\n\nä½¿ç¨chronyåæ­¥æ¶é´ï¼éç½®masterèç¹ä¸ç½ç»NTPæå¡å¨åæ­¥æ¶é´ï¼æænodeèç¹ä¸masterèç¹åæ­¥æ¶é´ã\n\néç½®masterèç¹ï¼\n\n#å®è£chronyï¼\nyum install -y chrony\n#æ³¨éé»è®¤ntpæå¡å¨\nsed -i 's/^server/#&/' /etc/chrony.conf\n#æå®ä¸æ¸¸å¬å± ntp æå¡å¨ï¼å¹¶åè®¸å¶ä»èç¹åæ­¥æ¶é´\ncat >> /etc/chrony.conf << EOF\nserver 0.asia.pool.ntp.org iburst\nserver 1.asia.pool.ntp.org iburst\nserver 2.asia.pool.ntp.org iburst\nserver 3.asia.pool.ntp.org iburst\nallow all\nEOF\n#éå¯chronydæå¡å¹¶è®¾ä¸ºå¼æºå¯å¨ï¼\nsystemctl enable chronyd && systemctl restart chronyd\n#å¼å¯ç½ç»æ¶é´åæ­¥åè½\ntimedatectl set-ntp true\n\n\n\n# éç½®æænodeèç¹\n\n(æ³¨æä¿®æ¹master IPå°å)\n\n\n\n\n\n\n\nÂ \n\n\n\n\n#å®è£chronyï¼\nyum install -y chrony\n#æ³¨éé»è®¤æå¡å¨\nsed -i 's/^server/#&/' /etc/chrony.conf\n#æå®åç½ masterèç¹ä¸ºä¸æ¸¸NTPæå¡å¨\necho server 192.168.199.101 iburst >> /etc/chrony.conf\n#éå¯æå¡å¹¶è®¾ä¸ºå¼æºå¯å¨ï¼\nsystemctl enable chronyd && systemctl restart chronyd\n\n\nææèç¹æ§è¡chronyc sourceså½ä»¤ï¼æ¥çå­å¨ä»¥^*å¼å¤´çè¡ï¼è¯´æå·²ç»ä¸æå¡å¨æ¶é´åæ­¥\n\n[root@localhost ~]# chronyc sources\n210 Number of sources = 1\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^* k8s-master                    3   6     7     0   +358ns[  -18ms] +/-   36ms\n\n\n\n# ä¿®æ¹iptablesç¸å³åæ°\n\nRHEL/CentOS 7ä¸çä¸äºç¨æ·æ¥åäºç±äºiptablesè¢«ç»è¿èå¯¼è´æµéè·¯ç±ä¸æ­£ç¡®çé®é¢ãåå»º/etc/sysctl.d/k8s.confæä»¶ï¼æ·»å å¦ä¸åå®¹ï¼\n\ncat <<EOF >  /etc/sysctl.d/k8s.conf\nvm.swappiness = 0\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF\n\n# ä½¿éç½®çæ\nmodprobe br_netfilter\nsysctl -p /etc/sysctl.d/k8s.conf\n\n\n\n# å è½½ipvsç¸å³æ¨¡å\n\nç±äºipvså·²ç»å å¥å°äºåæ ¸çä¸»å¹²ï¼æä»¥ä¸ºkube-proxyå¼å¯ipvsçåæéè¦å è½½ä»¥ä¸çåæ ¸æ¨¡åï¼ å¨ææçKubernetesèç¹æ§è¡ä»¥ä¸èæ¬:\n\ncat > /etc/sysconfig/modules/ipvs.modules <<EOF\n#!/bin/bash\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack_ipv4\nEOF\n\n#æ§è¡èæ¬\nchmod 755 /etc/sysconfig/modules/ipvs.modules && bash /etc/sysconfig/modules/ipvs.modules && lsmod | grep -e ip_vs -e nf_conntrack_ipv4\n\n\nä¸é¢èæ¬åå»ºäº/etc/sysconfig/modules/ipvs.modulesæä»¶ï¼ä¿è¯å¨èç¹éå¯åè½èªå¨å è½½æéæ¨¡åã ä½¿ç¨lsmod | grep -e ip_vs -e nf_conntrack_ipv4å½ä»¤æ¥çæ¯å¦å·²ç»æ­£ç¡®å è½½æéçåæ ¸æ¨¡åã æ¥ä¸æ¥è¿éè¦ç¡®ä¿åä¸ªèç¹ä¸å·²ç»å®è£äºipsetè½¯ä»¶åã ä¸ºäºä¾¿äºæ¥çipvsçä»£çè§åï¼æå¥½å®è£ä¸ä¸ç®¡çå·¥å·ipvsadmã\n\nyum install ipset ipvsadm -y\n\n\n\n# å®è£ Docker\n\nKubernetesé»è®¤çå®¹å¨è¿è¡æ¶ä»ç¶æ¯Dockerï¼ä½¿ç¨çæ¯kubeletä¸­åç½®dockershim CRIå®ç°ã\n\n\n# å®è£\n\n# å®è£æéä¾èµ\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n# éç½®docker yumæº\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n# å®è£ Docker Engine-Community\nsudo yum install docker-ce docker-ce-cli containerd.io\n# å¯å¨ Docker CE å¹¶è®¾ç½®å¼æºèªå¯å¨\nsudo systemctl start docker && sudo systemctl enable docker\n\n\n\n# éªè¯\n\n[root@k8s-master ~]# docker version  \nClient: Docker Engine - Community\n Version:           19.03.8\n API version:       1.40\n Go version:        go1.12.17\n Git commit:        afacb8b\n Built:             Wed Mar 11 01:27:04 2020\n OS/Arch:           linux/amd64\n Experimental:      false\n\nServer: Docker Engine - Community\n Engine:\n  Version:          19.03.8\n  API version:      1.40 (minimum version 1.12)\n  Go version:       go1.12.17\n  Git commit:       afacb8b\n  Built:            Wed Mar 11 01:25:42 2020\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          1.2.13\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\n runc:\n  Version:          1.0.0-rc10\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\n docker-init:\n  Version:          0.18.0\n  GitCommit:        fec3683\n\n\n\n# éç½®å éå¨\n\nå¯¹äºä½¿ç¨ systemd çç³»ç»ï¼è¯·å¨ /etc/docker/daemon.json ä¸­åå¥å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\ncat > /etc/docker/daemon.json <<EOF\n{\n  \"registry-mirrors\": [\n    \"https://registry.docker-cn.com\"\n  ]\n}\nEOF\n\n\néªè¯å éå¨æ¯å¦éç½®æåï¼\n\n\n\n\n\n\n\nÂ \n\n\n\nsudo systemctl restart docker\ndocker info\n...\n# åºç°å¦ä¸è¯­å¥å³è¡¨ç¤ºéç½®æå\nRegistry Mirrors:\n https://registry.docker-cn.com/\n...\n",normalizedContent:"# kubernetes å®è£åçåå¤\n\nå®æ¹ææ¡£\n\nå®è£ kubeadm ä½¿ç¨ kubeadm åå»ºéç¾¤\n\n\n# åææ¡ä»¶\n\næ¬æ¬¡å®è£éç¨ centos 7 çæ¬å®è£ kubernetes éç¾¤ç¯å¢ï¼éç¾¤èç¹ä¸º 1 ä¸» 2 ä»æ¨¡å¼ï¼æ­¤æ¬¡å¯¹èææºä¼æäºåºæ¬è¦æ±ï¼å¦ä¸ï¼\n\n * osï¼centos 7.9\n * cpuï¼æä½è¦æ±ï¼1 cpu 2 æ ¸\n * åå­ï¼æä½è¦æ±ï¼2gb\n * ç£çï¼æä½è¦æ±ï¼20gb\n * ç½ç»ï¼å¯ä»¥è®¿é®å¤ç½ï¼ä¸éç¾¤ä¸­çæææºå¨çç½ç»å¯ä»¥ç¸äºéä¿¡\n\nåºäºubuntu é¨ç½²k8sæç¨\n\nè¯·ç¹å»è¿é\n\nåå»ºä¸å°èææºï¼åå«å½åå¦ä¸ï¼\n\n * k8s-master\n * k8s-node1\n * k8s-node2\n\nä¸»æºå          ipå°å              è§è²       os          ç»ä»¶                         éç½®\nk8s-master   192.168.199.101   master   centos7.7   kube-apiserver             2æ ¸2g\n                                                    kube-controller-manasger\n                                                    kube-scheduler\n                                                    kube-proxy\n                                                    etcd\n                                                    coredns\n                                                    kube-flannel\nk8s-node1    192.168.199.102   node     centos7.7   kube-proxy                 2æ ¸2g\n                                                    kube-flannel\nk8s-node2    192.168.199.103   node     centos7.7   kube-proxy                 2æ ¸2g\n                                                    kube-flannel\n\næç¤º\n\næ ç¹æ®è¯´æä»¥ä¸æä½å¨ææèç¹æ§è¡\n\n\n# ä¿®æ¹ä¸»æºå\n\nå¨åä¸å±åç½ä¸­ä¸»æºåä¸åºè¯¥ç¸åï¼æä»¥æä»¬éè¦åä¿®æ¹ã\n\n#masterèç¹:\nhostnamectl set-hostname k8s-master\n#node1èç¹ï¼\nhostnamectl set-hostname k8s-node1\n#node2èç¹:\nhostnamectl set-hostname k8s-node2\n\n\n\n# ä¿®æ¹/etc/hostsæä»¶\n\ncat >> /etc/hosts << eof\n192.168.199.101 k8s-master\n192.168.199.102 k8s-node1\n192.168.199.103 k8s-node2\neof\n\n\n\n# å³é­é²ç«å¢åselinux\n\nsystemctl stop firewalld && systemctl disable firewalld\nsed -i 's/^selinux=enforcing$/selinux=disabled/' /etc/selinux/config && setenforce 0\n\n\n\n# å³é­swap\n\nswapoff -a\nyes | cp /etc/fstab /etc/fstab_bak\ncat /etc/fstab_bak |grep -v swap > /etc/fstab\n\n\nä½¿ç¨free -hå½ä»¤æ£æ¥éç½®æ¯å¦çæ\n\n\n\n\n\nÂ \n\n\n[root@k8s-master etc]# free -h   \n              total        used        free      shared  buff/cache   available\nmem:           1.8g        142m        1.5g        8.5m        122m        1.5g\nswap:            0b          0b          0b\n\n\n\n# éç½®æ¶é´åæ­¥\n\nä½¿ç¨chronyåæ­¥æ¶é´ï¼éç½®masterèç¹ä¸ç½ç»ntpæå¡å¨åæ­¥æ¶é´ï¼æænodeèç¹ä¸masterèç¹åæ­¥æ¶é´ã\n\néç½®masterèç¹ï¼\n\n#å®è£chronyï¼\nyum install -y chrony\n#æ³¨éé»è®¤ntpæå¡å¨\nsed -i 's/^server/#&/' /etc/chrony.conf\n#æå®ä¸æ¸¸å¬å± ntp æå¡å¨ï¼å¹¶åè®¸å¶ä»èç¹åæ­¥æ¶é´\ncat >> /etc/chrony.conf << eof\nserver 0.asia.pool.ntp.org iburst\nserver 1.asia.pool.ntp.org iburst\nserver 2.asia.pool.ntp.org iburst\nserver 3.asia.pool.ntp.org iburst\nallow all\neof\n#éå¯chronydæå¡å¹¶è®¾ä¸ºå¼æºå¯å¨ï¼\nsystemctl enable chronyd && systemctl restart chronyd\n#å¼å¯ç½ç»æ¶é´åæ­¥åè½\ntimedatectl set-ntp true\n\n\n\n# éç½®æænodeèç¹\n\n(æ³¨æä¿®æ¹master ipå°å)\n\n\n\n\n\n\n\nÂ \n\n\n\n\n#å®è£chronyï¼\nyum install -y chrony\n#æ³¨éé»è®¤æå¡å¨\nsed -i 's/^server/#&/' /etc/chrony.conf\n#æå®åç½ masterèç¹ä¸ºä¸æ¸¸ntpæå¡å¨\necho server 192.168.199.101 iburst >> /etc/chrony.conf\n#éå¯æå¡å¹¶è®¾ä¸ºå¼æºå¯å¨ï¼\nsystemctl enable chronyd && systemctl restart chronyd\n\n\nææèç¹æ§è¡chronyc sourceså½ä»¤ï¼æ¥çå­å¨ä»¥^*å¼å¤´çè¡ï¼è¯´æå·²ç»ä¸æå¡å¨æ¶é´åæ­¥\n\n[root@localhost ~]# chronyc sources\n210 number of sources = 1\nms name/ip address         stratum poll reach lastrx last sample               \n===============================================================================\n^* k8s-master                    3   6     7     0   +358ns[  -18ms] +/-   36ms\n\n\n\n# ä¿®æ¹iptablesç¸å³åæ°\n\nrhel/centos 7ä¸çä¸äºç¨æ·æ¥åäºç±äºiptablesè¢«ç»è¿èå¯¼è´æµéè·¯ç±ä¸æ­£ç¡®çé®é¢ãåå»º/etc/sysctl.d/k8s.confæä»¶ï¼æ·»å å¦ä¸åå®¹ï¼\n\ncat <<eof >  /etc/sysctl.d/k8s.conf\nvm.swappiness = 0\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\neof\n\n# ä½¿éç½®çæ\nmodprobe br_netfilter\nsysctl -p /etc/sysctl.d/k8s.conf\n\n\n\n# å è½½ipvsç¸å³æ¨¡å\n\nç±äºipvså·²ç»å å¥å°äºåæ ¸çä¸»å¹²ï¼æä»¥ä¸ºkube-proxyå¼å¯ipvsçåæéè¦å è½½ä»¥ä¸çåæ ¸æ¨¡åï¼ å¨ææçkubernetesèç¹æ§è¡ä»¥ä¸èæ¬:\n\ncat > /etc/sysconfig/modules/ipvs.modules <<eof\n#!/bin/bash\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack_ipv4\neof\n\n#æ§è¡èæ¬\nchmod 755 /etc/sysconfig/modules/ipvs.modules && bash /etc/sysconfig/modules/ipvs.modules && lsmod | grep -e ip_vs -e nf_conntrack_ipv4\n\n\nä¸é¢èæ¬åå»ºäº/etc/sysconfig/modules/ipvs.modulesæä»¶ï¼ä¿è¯å¨èç¹éå¯åè½èªå¨å è½½æéæ¨¡åã ä½¿ç¨lsmod | grep -e ip_vs -e nf_conntrack_ipv4å½ä»¤æ¥çæ¯å¦å·²ç»æ­£ç¡®å è½½æéçåæ ¸æ¨¡åã æ¥ä¸æ¥è¿éè¦ç¡®ä¿åä¸ªèç¹ä¸å·²ç»å®è£äºipsetè½¯ä»¶åã ä¸ºäºä¾¿äºæ¥çipvsçä»£çè§åï¼æå¥½å®è£ä¸ä¸ç®¡çå·¥å·ipvsadmã\n\nyum install ipset ipvsadm -y\n\n\n\n# å®è£ docker\n\nkubernetesé»è®¤çå®¹å¨è¿è¡æ¶ä»ç¶æ¯dockerï¼ä½¿ç¨çæ¯kubeletä¸­åç½®dockershim criå®ç°ã\n\n\n# å®è£\n\n# å®è£æéä¾èµ\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n# éç½®docker yumæº\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n# å®è£ docker engine-community\nsudo yum install docker-ce docker-ce-cli containerd.io\n# å¯å¨ docker ce å¹¶è®¾ç½®å¼æºèªå¯å¨\nsudo systemctl start docker && sudo systemctl enable docker\n\n\n\n# éªè¯\n\n[root@k8s-master ~]# docker version  \nclient: docker engine - community\n version:           19.03.8\n api version:       1.40\n go version:        go1.12.17\n git commit:        afacb8b\n built:             wed mar 11 01:27:04 2020\n os/arch:           linux/amd64\n experimental:      false\n\nserver: docker engine - community\n engine:\n  version:          19.03.8\n  api version:      1.40 (minimum version 1.12)\n  go version:       go1.12.17\n  git commit:       afacb8b\n  built:            wed mar 11 01:25:42 2020\n  os/arch:          linux/amd64\n  experimental:     false\n containerd:\n  version:          1.2.13\n  gitcommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\n runc:\n  version:          1.0.0-rc10\n  gitcommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\n docker-init:\n  version:          0.18.0\n  gitcommit:        fec3683\n\n\n\n# éç½®å éå¨\n\nå¯¹äºä½¿ç¨ systemd çç³»ç»ï¼è¯·å¨ /etc/docker/daemon.json ä¸­åå¥å¦ä¸åå®¹ï¼å¦ææä»¶ä¸å­å¨è¯·æ°å»ºè¯¥æä»¶ï¼\n\ncat > /etc/docker/daemon.json <<eof\n{\n  \"registry-mirrors\": [\n    \"https://registry.docker-cn.com\"\n  ]\n}\neof\n\n\néªè¯å éå¨æ¯å¦éç½®æåï¼\n\n\n\n\n\n\n\nÂ \n\n\n\nsudo systemctl restart docker\ndocker info\n...\n# åºç°å¦ä¸è¯­å¥å³è¡¨ç¤ºéç½®æå\nregistry mirrors:\n https://registry.docker-cn.com/\n...\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"å®è£ kubeadm",frontmatter:{title:"å®è£ kubeadm",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/babf51/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/03.%E5%AE%89%E8%A3%85%20kubeadm.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/03.å®è£ kubeadm.md",key:"v-28726c01",path:"/pages/babf51/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:17},{level:2,title:"éç½®è½¯ä»¶æº",slug:"éç½®è½¯ä»¶æº",normalizedTitle:"éç½®è½¯ä»¶æº",charIndex:76},{level:2,title:"å®è£ kubeadmï¼kubeletï¼kubectl",slug:"å®è£-kubeadm-kubelet-kubectl",normalizedTitle:"å®è£ kubeadmï¼kubeletï¼kubectl",charIndex:458},{level:2,title:"è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet",slug:"è®¾ç½®-kubelet-èªå¯å¨-å¹¶å¯å¨-kubelet",normalizedTitle:"è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet",charIndex:11490}],headersStr:"æ¦è¿° éç½®è½¯ä»¶æº å®è£ kubeadmï¼kubeletï¼kubectl è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet",content:'# å®è£ kubeadm\n\n\n# æ¦è¿°\n\nkubeadm æ¯ kubernetes çéç¾¤å®è£å·¥å·ï¼è½å¤å¿«éå®è£ kubernetes éç¾¤ã\n\n\n# éç½®è½¯ä»¶æº\n\néç½®kubernetes.repoçæºï¼ç±äºå®æ¹æºå½åæ æ³è®¿é®ï¼è¿éä½¿ç¨é¿éäºyumæº\n\ncat <<EOF > /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n\n\n\n# å®è£ kubeadmï¼kubeletï¼kubectl\n\nå¨ææèç¹ä¸å®è£æå®çæ¬ kubeletãkubeadm å kubectl\n\nyum install -y kubelet kubeadm kubectl\n\n# å®è£è¿ç¨å¦ä¸ï¼æ³¨æ kubeadm ççæ¬å·\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirrors.huaweicloud.com\n * extras: mirrors.huaweicloud.com\n * updates: mirrors.huaweicloud.com\nkubernetes/signature                                                                                    |  454 B  00:00:00     \nRetrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nImporting GPG key 0xA7317B0F:\n Userid     : "Google Cloud Packages Automatic Signing Key <gc-team@google.com>"\n Fingerprint: d0bc 747f d8ca f711 7500 d6fa 3746 c208 a731 7b0f\n From       : https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nRetrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nkubernetes/signature                                                                                    | 1.4 kB  00:00:00 !!! \nkubernetes/primary                                                                                      |  67 kB  00:00:00     \nkubernetes                                                                                                             493/493\nResolving Dependencies\n--\x3e Running transaction check\n---\x3e Package kubeadm.x86_64 0:1.18.2-0 will be installed\n--\x3e Processing Dependency: kubernetes-cni >= 0.7.5 for package: kubeadm-1.18.2-0.x86_64\n--\x3e Processing Dependency: cri-tools >= 1.13.0 for package: kubeadm-1.18.2-0.x86_64\n---\x3e Package kubectl.x86_64 0:1.18.2-0 will be installed\n---\x3e Package kubelet.x86_64 0:1.18.2-0 will be installed\n--\x3e Processing Dependency: socat for package: kubelet-1.18.2-0.x86_64\n--\x3e Processing Dependency: conntrack for package: kubelet-1.18.2-0.x86_64\n--\x3e Running transaction check\n---\x3e Package conntrack-tools.x86_64 0:1.4.4-5.el7_7.2 will be installed\n--\x3e Processing Dependency: libnetfilter_cttimeout.so.1(LIBNETFILTER_CTTIMEOUT_1.1)(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e Processing Dependency: libnetfilter_cttimeout.so.1(LIBNETFILTER_CTTIMEOUT_1.0)(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e Processing Dependency: libnetfilter_cthelper.so.0(LIBNETFILTER_CTHELPER_1.0)(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e Processing Dependency: libnetfilter_queue.so.1()(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e Processing Dependency: libnetfilter_cttimeout.so.1()(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e Processing Dependency: libnetfilter_cthelper.so.0()(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n---\x3e Package cri-tools.x86_64 0:1.13.0-0 will be installed\n---\x3e Package kubernetes-cni.x86_64 0:0.7.5-0 will be installed\n---\x3e Package socat.x86_64 0:1.7.3.2-2.el7 will be installed\n--\x3e Running transaction check\n---\x3e Package libnetfilter_cthelper.x86_64 0:1.0.0-10.el7_7.1 will be installed\n---\x3e Package libnetfilter_cttimeout.x86_64 0:1.0.0-6.el7_7.1 will be installed\n---\x3e Package libnetfilter_queue.x86_64 0:1.0.2-2.el7_2 will be installed\n--\x3e Finished Dependency Resolution\n\nDependencies Resolved\n\n===============================================================================================================================\n Package                               Arch                  Version                           Repository                 Size\n===============================================================================================================================\nInstalling:\n kubeadm                               x86_64                1.18.2-0                          kubernetes                8.8 M\n kubectl                               x86_64                1.18.2-0                          kubernetes                9.5 M\n kubelet                               x86_64                1.18.2-0                          kubernetes                 21 M\nInstalling for dependencies:\n conntrack-tools                       x86_64                1.4.4-5.el7_7.2                   updates                   187 k\n cri-tools                             x86_64                1.13.0-0                          kubernetes                5.1 M\n kubernetes-cni                        x86_64                0.7.5-0                           kubernetes                 10 M\n libnetfilter_cthelper                 x86_64                1.0.0-10.el7_7.1                  updates                    18 k\n libnetfilter_cttimeout                x86_64                1.0.0-6.el7_7.1                   updates                    18 k\n libnetfilter_queue                    x86_64                1.0.2-2.el7_2                     base                       23 k\n socat                                 x86_64                1.7.3.2-2.el7                     base                      290 k\n\nTransaction Summary\n===============================================================================================================================\nInstall  3 Packages (+7 Dependent packages)\n\nTotal download size: 55 M\nInstalled size: 246 M\nDownloading packages:\n(1/10): conntrack-tools-1.4.4-5.el7_7.2.x86_64.rpm                                                      | 187 kB  00:00:00     \nwarning: /var/cache/yum/x86_64/7/kubernetes/packages/14bfe6e75a9efc8eca3f638eb22c7e2ce759c67f95b43b16fae4ebabde1549f3-cri-tools-1.13.0-0.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 3e1ba8d5: NOKEY\nPublic key for 14bfe6e75a9efc8eca3f638eb22c7e2ce759c67f95b43b16fae4ebabde1549f3-cri-tools-1.13.0-0.x86_64.rpm is not installed\n(2/10): 14bfe6e75a9efc8eca3f638eb22c7e2ce759c67f95b43b16fae4ebabde1549f3-cri-tools-1.13.0-0.x86_64.rpm  | 5.1 MB  00:00:01     \n(3/10): 515b36bce35de42218470b171ae2ba5cd82132e63d98c7bb87e4298d61fde1dc-kubeadm-1.18.2-0.x86_64.rpm    | 8.8 MB  00:00:01     \n(4/10): 29337f2b1dfd3e11eb9465dbf87b35a1cc48ff0a5e8f992c9f1da70f7641c6bf-kubectl-1.18.2-0.x86_64.rpm    | 9.5 MB  00:00:01     \n(5/10): libnetfilter_cthelper-1.0.0-10.el7_7.1.x86_64.rpm                                               |  18 kB  00:00:00     \n(6/10): libnetfilter_cttimeout-1.0.0-6.el7_7.1.x86_64.rpm                                               |  18 kB  00:00:00     \n(7/10): libnetfilter_queue-1.0.2-2.el7_2.x86_64.rpm                                                     |  23 kB  00:00:00     \n(8/10): socat-1.7.3.2-2.el7.x86_64.rpm                                                                  | 290 kB  00:00:00     \n(9/10): 548a0dcd865c16a50980420ddfa5fbccb8b59621179798e6dc905c9bf8af3b34-kubernetes-cni-0.7.5-0.x86_64. |  10 MB  00:00:02     \n(10/10): d9c0a14c480bd39ac0890746493f9a01325e9ef8fc6fc923520bfc7d0f11744e-kubelet-1.18.2-0.x86_64.rpm   |  21 MB  00:00:04     \n-------------------------------------------------------------------------------------------------------------------------------\nTotal                                                                                          8.5 MB/s |  55 MB  00:00:06     \nRetrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nImporting GPG key 0xA7317B0F:\n Userid     : "Google Cloud Packages Automatic Signing Key <gc-team@google.com>"\n Fingerprint: d0bc 747f d8ca f711 7500 d6fa 3746 c208 a731 7b0f\n From       : https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nRetrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nImporting GPG key 0x3E1BA8D5:\n Userid     : "Google Cloud Packages RPM Signing Key <gc-team@google.com>"\n Fingerprint: 3749 e1ba 95a8 6ce0 5454 6ed2 f09c 394c 3e1b a8d5\n From       : https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : libnetfilter_cthelper-1.0.0-10.el7_7.1.x86_64                                                              1/10 \n  Installing : libnetfilter_cttimeout-1.0.0-6.el7_7.1.x86_64                                                              2/10 \n  Installing : kubectl-1.18.2-0.x86_64                                                                                    3/10 \n  Installing : socat-1.7.3.2-2.el7.x86_64                                                                                 4/10 \n  Installing : cri-tools-1.13.0-0.x86_64                                                                                  5/10 \n  Installing : libnetfilter_queue-1.0.2-2.el7_2.x86_64                                                                    6/10 \n  Installing : conntrack-tools-1.4.4-5.el7_7.2.x86_64                                                                     7/10 \n  Installing : kubernetes-cni-0.7.5-0.x86_64                                                                              8/10 \n  Installing : kubelet-1.18.2-0.x86_64                                                                                    9/10 \n  Installing : kubeadm-1.18.2-0.x86_64                                                                                   10/10 \n  Verifying  : kubeadm-1.18.2-0.x86_64                                                                                    1/10 \n  Verifying  : conntrack-tools-1.4.4-5.el7_7.2.x86_64                                                                     2/10 \n  Verifying  : libnetfilter_queue-1.0.2-2.el7_2.x86_64                                                                    3/10 \n  Verifying  : kubelet-1.18.2-0.x86_64                                                                                    4/10 \n  Verifying  : cri-tools-1.13.0-0.x86_64                                                                                  5/10 \n  Verifying  : kubernetes-cni-0.7.5-0.x86_64                                                                              6/10 \n  Verifying  : socat-1.7.3.2-2.el7.x86_64                                                                                 7/10 \n  Verifying  : kubectl-1.18.2-0.x86_64                                                                                    8/10 \n  Verifying  : libnetfilter_cttimeout-1.0.0-6.el7_7.1.x86_64                                                              9/10 \n  Verifying  : libnetfilter_cthelper-1.0.0-10.el7_7.1.x86_64                                                             10/10 \n\nInstalled:\n  kubeadm.x86_64 0:1.18.2-0                 kubectl.x86_64 0:1.18.2-0                 kubelet.x86_64 0:1.18.2-0                \n\nDependency Installed:\n  conntrack-tools.x86_64 0:1.4.4-5.el7_7.2                       cri-tools.x86_64 0:1.13.0-0                                   \n  kubernetes-cni.x86_64 0:0.7.5-0                                libnetfilter_cthelper.x86_64 0:1.0.0-10.el7_7.1               \n  libnetfilter_cttimeout.x86_64 0:1.0.0-6.el7_7.1                libnetfilter_queue.x86_64 0:1.0.2-2.el7_2                     \n  socat.x86_64 0:1.7.3.2-2.el7                                  \n\nComplete!\n\n\n * kubeadmï¼ç¨äºåå§å Kubernetes éç¾¤\n * kubectlï¼Kubernetes çå½ä»¤è¡å·¥å·ï¼ä¸»è¦ä½ç¨æ¯é¨ç½²åç®¡çåºç¨ï¼æ¥çåç§èµæºï¼åå»ºï¼å é¤åæ´æ°ç»ä»¶\n * kubeletï¼ä¸»è¦è´è´£å¯å¨ Pod åå®¹å¨\n\n\n# è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet\n\nsystemctl enable kubelet && systemctl start kubelet\n',normalizedContent:'# å®è£ kubeadm\n\n\n# æ¦è¿°\n\nkubeadm æ¯ kubernetes çéç¾¤å®è£å·¥å·ï¼è½å¤å¿«éå®è£ kubernetes éç¾¤ã\n\n\n# éç½®è½¯ä»¶æº\n\néç½®kubernetes.repoçæºï¼ç±äºå®æ¹æºå½åæ æ³è®¿é®ï¼è¿éä½¿ç¨é¿éäºyumæº\n\ncat <<eof > /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\neof\n\n\n\n# å®è£ kubeadmï¼kubeletï¼kubectl\n\nå¨ææèç¹ä¸å®è£æå®çæ¬ kubeletãkubeadm å kubectl\n\nyum install -y kubelet kubeadm kubectl\n\n# å®è£è¿ç¨å¦ä¸ï¼æ³¨æ kubeadm ççæ¬å·\nloaded plugins: fastestmirror\nloading mirror speeds from cached hostfile\n * base: mirrors.huaweicloud.com\n * extras: mirrors.huaweicloud.com\n * updates: mirrors.huaweicloud.com\nkubernetes/signature                                                                                    |  454 b  00:00:00     \nretrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nimporting gpg key 0xa7317b0f:\n userid     : "google cloud packages automatic signing key <gc-team@google.com>"\n fingerprint: d0bc 747f d8ca f711 7500 d6fa 3746 c208 a731 7b0f\n from       : https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nretrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nkubernetes/signature                                                                                    | 1.4 kb  00:00:00 !!! \nkubernetes/primary                                                                                      |  67 kb  00:00:00     \nkubernetes                                                                                                             493/493\nresolving dependencies\n--\x3e running transaction check\n---\x3e package kubeadm.x86_64 0:1.18.2-0 will be installed\n--\x3e processing dependency: kubernetes-cni >= 0.7.5 for package: kubeadm-1.18.2-0.x86_64\n--\x3e processing dependency: cri-tools >= 1.13.0 for package: kubeadm-1.18.2-0.x86_64\n---\x3e package kubectl.x86_64 0:1.18.2-0 will be installed\n---\x3e package kubelet.x86_64 0:1.18.2-0 will be installed\n--\x3e processing dependency: socat for package: kubelet-1.18.2-0.x86_64\n--\x3e processing dependency: conntrack for package: kubelet-1.18.2-0.x86_64\n--\x3e running transaction check\n---\x3e package conntrack-tools.x86_64 0:1.4.4-5.el7_7.2 will be installed\n--\x3e processing dependency: libnetfilter_cttimeout.so.1(libnetfilter_cttimeout_1.1)(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e processing dependency: libnetfilter_cttimeout.so.1(libnetfilter_cttimeout_1.0)(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e processing dependency: libnetfilter_cthelper.so.0(libnetfilter_cthelper_1.0)(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e processing dependency: libnetfilter_queue.so.1()(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e processing dependency: libnetfilter_cttimeout.so.1()(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n--\x3e processing dependency: libnetfilter_cthelper.so.0()(64bit) for package: conntrack-tools-1.4.4-5.el7_7.2.x86_64\n---\x3e package cri-tools.x86_64 0:1.13.0-0 will be installed\n---\x3e package kubernetes-cni.x86_64 0:0.7.5-0 will be installed\n---\x3e package socat.x86_64 0:1.7.3.2-2.el7 will be installed\n--\x3e running transaction check\n---\x3e package libnetfilter_cthelper.x86_64 0:1.0.0-10.el7_7.1 will be installed\n---\x3e package libnetfilter_cttimeout.x86_64 0:1.0.0-6.el7_7.1 will be installed\n---\x3e package libnetfilter_queue.x86_64 0:1.0.2-2.el7_2 will be installed\n--\x3e finished dependency resolution\n\ndependencies resolved\n\n===============================================================================================================================\n package                               arch                  version                           repository                 size\n===============================================================================================================================\ninstalling:\n kubeadm                               x86_64                1.18.2-0                          kubernetes                8.8 m\n kubectl                               x86_64                1.18.2-0                          kubernetes                9.5 m\n kubelet                               x86_64                1.18.2-0                          kubernetes                 21 m\ninstalling for dependencies:\n conntrack-tools                       x86_64                1.4.4-5.el7_7.2                   updates                   187 k\n cri-tools                             x86_64                1.13.0-0                          kubernetes                5.1 m\n kubernetes-cni                        x86_64                0.7.5-0                           kubernetes                 10 m\n libnetfilter_cthelper                 x86_64                1.0.0-10.el7_7.1                  updates                    18 k\n libnetfilter_cttimeout                x86_64                1.0.0-6.el7_7.1                   updates                    18 k\n libnetfilter_queue                    x86_64                1.0.2-2.el7_2                     base                       23 k\n socat                                 x86_64                1.7.3.2-2.el7                     base                      290 k\n\ntransaction summary\n===============================================================================================================================\ninstall  3 packages (+7 dependent packages)\n\ntotal download size: 55 m\ninstalled size: 246 m\ndownloading packages:\n(1/10): conntrack-tools-1.4.4-5.el7_7.2.x86_64.rpm                                                      | 187 kb  00:00:00     \nwarning: /var/cache/yum/x86_64/7/kubernetes/packages/14bfe6e75a9efc8eca3f638eb22c7e2ce759c67f95b43b16fae4ebabde1549f3-cri-tools-1.13.0-0.x86_64.rpm: header v4 rsa/sha512 signature, key id 3e1ba8d5: nokey\npublic key for 14bfe6e75a9efc8eca3f638eb22c7e2ce759c67f95b43b16fae4ebabde1549f3-cri-tools-1.13.0-0.x86_64.rpm is not installed\n(2/10): 14bfe6e75a9efc8eca3f638eb22c7e2ce759c67f95b43b16fae4ebabde1549f3-cri-tools-1.13.0-0.x86_64.rpm  | 5.1 mb  00:00:01     \n(3/10): 515b36bce35de42218470b171ae2ba5cd82132e63d98c7bb87e4298d61fde1dc-kubeadm-1.18.2-0.x86_64.rpm    | 8.8 mb  00:00:01     \n(4/10): 29337f2b1dfd3e11eb9465dbf87b35a1cc48ff0a5e8f992c9f1da70f7641c6bf-kubectl-1.18.2-0.x86_64.rpm    | 9.5 mb  00:00:01     \n(5/10): libnetfilter_cthelper-1.0.0-10.el7_7.1.x86_64.rpm                                               |  18 kb  00:00:00     \n(6/10): libnetfilter_cttimeout-1.0.0-6.el7_7.1.x86_64.rpm                                               |  18 kb  00:00:00     \n(7/10): libnetfilter_queue-1.0.2-2.el7_2.x86_64.rpm                                                     |  23 kb  00:00:00     \n(8/10): socat-1.7.3.2-2.el7.x86_64.rpm                                                                  | 290 kb  00:00:00     \n(9/10): 548a0dcd865c16a50980420ddfa5fbccb8b59621179798e6dc905c9bf8af3b34-kubernetes-cni-0.7.5-0.x86_64. |  10 mb  00:00:02     \n(10/10): d9c0a14c480bd39ac0890746493f9a01325e9ef8fc6fc923520bfc7d0f11744e-kubelet-1.18.2-0.x86_64.rpm   |  21 mb  00:00:04     \n-------------------------------------------------------------------------------------------------------------------------------\ntotal                                                                                          8.5 mb/s |  55 mb  00:00:06     \nretrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nimporting gpg key 0xa7317b0f:\n userid     : "google cloud packages automatic signing key <gc-team@google.com>"\n fingerprint: d0bc 747f d8ca f711 7500 d6fa 3746 c208 a731 7b0f\n from       : https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\nretrieving key from https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nimporting gpg key 0x3e1ba8d5:\n userid     : "google cloud packages rpm signing key <gc-team@google.com>"\n fingerprint: 3749 e1ba 95a8 6ce0 5454 6ed2 f09c 394c 3e1b a8d5\n from       : https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nrunning transaction check\nrunning transaction test\ntransaction test succeeded\nrunning transaction\n  installing : libnetfilter_cthelper-1.0.0-10.el7_7.1.x86_64                                                              1/10 \n  installing : libnetfilter_cttimeout-1.0.0-6.el7_7.1.x86_64                                                              2/10 \n  installing : kubectl-1.18.2-0.x86_64                                                                                    3/10 \n  installing : socat-1.7.3.2-2.el7.x86_64                                                                                 4/10 \n  installing : cri-tools-1.13.0-0.x86_64                                                                                  5/10 \n  installing : libnetfilter_queue-1.0.2-2.el7_2.x86_64                                                                    6/10 \n  installing : conntrack-tools-1.4.4-5.el7_7.2.x86_64                                                                     7/10 \n  installing : kubernetes-cni-0.7.5-0.x86_64                                                                              8/10 \n  installing : kubelet-1.18.2-0.x86_64                                                                                    9/10 \n  installing : kubeadm-1.18.2-0.x86_64                                                                                   10/10 \n  verifying  : kubeadm-1.18.2-0.x86_64                                                                                    1/10 \n  verifying  : conntrack-tools-1.4.4-5.el7_7.2.x86_64                                                                     2/10 \n  verifying  : libnetfilter_queue-1.0.2-2.el7_2.x86_64                                                                    3/10 \n  verifying  : kubelet-1.18.2-0.x86_64                                                                                    4/10 \n  verifying  : cri-tools-1.13.0-0.x86_64                                                                                  5/10 \n  verifying  : kubernetes-cni-0.7.5-0.x86_64                                                                              6/10 \n  verifying  : socat-1.7.3.2-2.el7.x86_64                                                                                 7/10 \n  verifying  : kubectl-1.18.2-0.x86_64                                                                                    8/10 \n  verifying  : libnetfilter_cttimeout-1.0.0-6.el7_7.1.x86_64                                                              9/10 \n  verifying  : libnetfilter_cthelper-1.0.0-10.el7_7.1.x86_64                                                             10/10 \n\ninstalled:\n  kubeadm.x86_64 0:1.18.2-0                 kubectl.x86_64 0:1.18.2-0                 kubelet.x86_64 0:1.18.2-0                \n\ndependency installed:\n  conntrack-tools.x86_64 0:1.4.4-5.el7_7.2                       cri-tools.x86_64 0:1.13.0-0                                   \n  kubernetes-cni.x86_64 0:0.7.5-0                                libnetfilter_cthelper.x86_64 0:1.0.0-10.el7_7.1               \n  libnetfilter_cttimeout.x86_64 0:1.0.0-6.el7_7.1                libnetfilter_queue.x86_64 0:1.0.2-2.el7_2                     \n  socat.x86_64 0:1.7.3.2-2.el7                                  \n\ncomplete!\n\n\n * kubeadmï¼ç¨äºåå§å kubernetes éç¾¤\n * kubectlï¼kubernetes çå½ä»¤è¡å·¥å·ï¼ä¸»è¦ä½ç¨æ¯é¨ç½²åç®¡çåºç¨ï¼æ¥çåç§èµæºï¼åå»ºï¼å é¤åæ´æ°ç»ä»¶\n * kubeletï¼ä¸»è¦è´è´£å¯å¨ pod åå®¹å¨\n\n\n# è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet\n\nsystemctl enable kubelet && systemctl start kubelet\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"éç½® kubeadm",frontmatter:{title:"éç½® kubeadm",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/14ea2d/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/05.%E9%85%8D%E7%BD%AE%20kubeadm.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/05.éç½® kubeadm.md",key:"v-4a1b2e40",path:"/pages/14ea2d/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:17},{level:2,title:"åå»ºå¹¶ä¿®æ¹éç½®",slug:"åå»ºå¹¶ä¿®æ¹éç½®",normalizedTitle:"åå»ºå¹¶ä¿®æ¹éç½®",charIndex:568},{level:2,title:"æ¥çåæåéå",slug:"æ¥çåæåéå",normalizedTitle:"æ¥çåæåéå",charIndex:1689}],headersStr:"æ¦è¿° åå»ºå¹¶ä¿®æ¹éç½® æ¥çåæåéå",content:'# éç½® kubeadm\n\n\n# æ¦è¿°\n\nkubeadmå·²ç»è¿å¥GAé¶æ®µï¼å¶æ§å¶é¢åå§ååå å¥èç¹æ­¥éª¤é½æ¯æå¤§éå¯å®å¶åå®¹ï¼å æ­¤kubeadmè¿æä¾äºéç½®æä»¶åè½ç¨äºå¤æå®å¶ãåæ¶ï¼kubeadmå°éç½®æä»¶ä»¥ConfigMapçå½¢å¼ä¿å­å°éç¾¤ä¸­ï¼ä¾¿äºåç»­çæ¥è¯¢ååçº§å·¥ä½ãkubeadm configå­å½ä»¤æä¾äºå¯¹è¿ä¸ç»åè½çæ¯æï¼\n\n * kubeadm config upload from-fileï¼ç±éç½®æä»¶ä¸ä¼ å°éç¾¤ä¸­çæConfigMapã\n * kubeadm config upload from-flagsï¼ç±éç½®åæ°çæConfigMapã\n * kubeadm config viewï¼æ¥çå½åéç¾¤ä¸­çéç½®å¼ã\n * kubeadm config print init-defaultsï¼è¾åºkubeadm inité»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config print join-defaultsï¼è¾åºkubeadm joiné»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config migrateï¼å¨æ°æ§çæ¬ä¹é´è¿è¡éç½®è½¬æ¢ã\n * kubeadm config images listï¼ååºæéçéååè¡¨ã\n * kubeadm config images pullï¼æåéåå°æ¬å°ã\n\n\n# åå»ºå¹¶ä¿®æ¹éç½®\n\nå¯¼åºéç½®æä»¶\n\nkubeadm config print init-defaults > init-config.yaml\n\n\nä¿®æ¹éç½®ä¸ºå¦ä¸åå®¹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\nÂ \n\n\n\n\napiVersion: kubeadm.k8s.io/v1beta2\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  # ä¿®æ¹ä¸ºä¸»èç¹ IP\n  advertiseAddress: 192.169.199.101\n  bindPort: 6443\nnodeRegistration:\n  criSocket: /var/run/dockershim.sock\n  name: k8s-master\n  taints:\n  - effect: NoSchedule\n    key: node-role.kubernetes.io/master\n---\napiServer:\n  timeoutForControlPlane: 4m0s\napiVersion: kubeadm.k8s.io/v1beta2\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns:\n  type: CoreDNS\netcd:\n  local:\n    dataDir: /var/lib/etcd\n# å½åä¸è½è®¿é® Googleï¼ä¿®æ¹ä¸ºé¿éäº\nimageRepository: registry.aliyuncs.com/google_containers\nkind: ClusterConfiguration\nkubernetesVersion: v1.18.0\nnetworking:\n  dnsDomain: cluster.local\n  # éç½®æ Calico çé»è®¤ç½æ®µ\n  podSubnet: "10.244.0.0/16"\n  serviceSubnet: 10.96.0.0/12\nscheduler: {}\n\n\nå°ä¸é¢çåå®¹ä¿å­ä¸ºinit-config.yamlå¤ç¨ã\n\n\n# æ¥çåæåéå\n\næ¥çæééååè¡¨\n\nkubeadm config images list --config init-config.yaml\n\n\næåéå\n\nkubeadm config images pull --config init-config.yaml\n\n\næ¥çéå\n\ndocker images\n\nREPOSITORY                                                        TAG                 IMAGE ID            CREATED             SIZE\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.18.0             43940c34f24f        10 days ago         117MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.18.0             74060cea7f70        10 days ago         173MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.0             d3e55153f52f        10 days ago         162MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.18.0             a31f78c7c8ce        10 days ago         95.3MB\nregistry.aliyuncs.com/google_containers/pause                     3.2                 80d28bedfe5d        7 weeks ago         683kB\nregistry.aliyuncs.com/google_containers/coredns                   1.6.7               67da37a9a360        2 months ago        43.8MB\nregistry.aliyuncs.com/google_containers/etcd                      3.4.3-0             303ce5db0e90        5 months ago        288MB\n\n\nå¨éåä¸è½½å®æä¹åï¼å°±å¯ä»¥è¿è¡å®è£äºã',normalizedContent:'# éç½® kubeadm\n\n\n# æ¦è¿°\n\nkubeadmå·²ç»è¿å¥gaé¶æ®µï¼å¶æ§å¶é¢åå§ååå å¥èç¹æ­¥éª¤é½æ¯æå¤§éå¯å®å¶åå®¹ï¼å æ­¤kubeadmè¿æä¾äºéç½®æä»¶åè½ç¨äºå¤æå®å¶ãåæ¶ï¼kubeadmå°éç½®æä»¶ä»¥configmapçå½¢å¼ä¿å­å°éç¾¤ä¸­ï¼ä¾¿äºåç»­çæ¥è¯¢ååçº§å·¥ä½ãkubeadm configå­å½ä»¤æä¾äºå¯¹è¿ä¸ç»åè½çæ¯æï¼\n\n * kubeadm config upload from-fileï¼ç±éç½®æä»¶ä¸ä¼ å°éç¾¤ä¸­çæconfigmapã\n * kubeadm config upload from-flagsï¼ç±éç½®åæ°çæconfigmapã\n * kubeadm config viewï¼æ¥çå½åéç¾¤ä¸­çéç½®å¼ã\n * kubeadm config print init-defaultsï¼è¾åºkubeadm inité»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config print join-defaultsï¼è¾åºkubeadm joiné»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config migrateï¼å¨æ°æ§çæ¬ä¹é´è¿è¡éç½®è½¬æ¢ã\n * kubeadm config images listï¼ååºæéçéååè¡¨ã\n * kubeadm config images pullï¼æåéåå°æ¬å°ã\n\n\n# åå»ºå¹¶ä¿®æ¹éç½®\n\nå¯¼åºéç½®æä»¶\n\nkubeadm config print init-defaults > init-config.yaml\n\n\nä¿®æ¹éç½®ä¸ºå¦ä¸åå®¹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\nÂ \n\n\n\n\napiversion: kubeadm.k8s.io/v1beta2\nbootstraptokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: initconfiguration\nlocalapiendpoint:\n  # ä¿®æ¹ä¸ºä¸»èç¹ ip\n  advertiseaddress: 192.169.199.101\n  bindport: 6443\nnoderegistration:\n  crisocket: /var/run/dockershim.sock\n  name: k8s-master\n  taints:\n  - effect: noschedule\n    key: node-role.kubernetes.io/master\n---\napiserver:\n  timeoutforcontrolplane: 4m0s\napiversion: kubeadm.k8s.io/v1beta2\ncertificatesdir: /etc/kubernetes/pki\nclustername: kubernetes\ncontrollermanager: {}\ndns:\n  type: coredns\netcd:\n  local:\n    datadir: /var/lib/etcd\n# å½åä¸è½è®¿é® googleï¼ä¿®æ¹ä¸ºé¿éäº\nimagerepository: registry.aliyuncs.com/google_containers\nkind: clusterconfiguration\nkubernetesversion: v1.18.0\nnetworking:\n  dnsdomain: cluster.local\n  # éç½®æ calico çé»è®¤ç½æ®µ\n  podsubnet: "10.244.0.0/16"\n  servicesubnet: 10.96.0.0/12\nscheduler: {}\n\n\nå°ä¸é¢çåå®¹ä¿å­ä¸ºinit-config.yamlå¤ç¨ã\n\n\n# æ¥çåæåéå\n\næ¥çæééååè¡¨\n\nkubeadm config images list --config init-config.yaml\n\n\næåéå\n\nkubeadm config images pull --config init-config.yaml\n\n\næ¥çéå\n\ndocker images\n\nrepository                                                        tag                 image id            created             size\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.18.0             43940c34f24f        10 days ago         117mb\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.18.0             74060cea7f70        10 days ago         173mb\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.0             d3e55153f52f        10 days ago         162mb\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.18.0             a31f78c7c8ce        10 days ago         95.3mb\nregistry.aliyuncs.com/google_containers/pause                     3.2                 80d28bedfe5d        7 weeks ago         683kb\nregistry.aliyuncs.com/google_containers/coredns                   1.6.7               67da37a9a360        2 months ago        43.8mb\nregistry.aliyuncs.com/google_containers/etcd                      3.4.3-0             303ce5db0e90        5 months ago        288mb\n\n\nå¨éåä¸è½½å®æä¹åï¼å°±å¯ä»¥è¿è¡å®è£äºã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"ä½¿ç¨ kubeadm é¨ç½² Master èç¹",frontmatter:{title:"ä½¿ç¨ kubeadm é¨ç½² Master èç¹",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/9b17d0/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/06.%E4%BD%BF%E7%94%A8%20kubeadm%20%E9%83%A8%E7%BD%B2%20Master%20%E8%8A%82%E7%82%B9.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/06.ä½¿ç¨ kubeadm é¨ç½² Master èç¹.md",key:"v-f8a50a56",path:"/pages/9b17d0/",headers:[{level:2,title:"è¿è¡ kubeadm init å½ä»¤å®è£ Master",slug:"è¿è¡-kubeadm-init-å½ä»¤å®è£-master",normalizedTitle:"è¿è¡ kubeadm init å½ä»¤å®è£ master",charIndex:30},{level:2,title:"éç½® kubectl",slug:"éç½®-kubectl",normalizedTitle:"éç½® kubectl",charIndex:5967},{level:2,title:"éªè¯æ¯å¦æå",slug:"éªè¯æ¯å¦æå",normalizedTitle:"éªè¯æ¯å¦æå",charIndex:6808},{level:2,title:"kubeadm init çæ§è¡è¿ç¨",slug:"kubeadm-init-çæ§è¡è¿ç¨",normalizedTitle:"kubeadm init çæ§è¡è¿ç¨",charIndex:10337}],headersStr:"è¿è¡ kubeadm init å½ä»¤å®è£ Master éç½® kubectl éªè¯æ¯å¦æå kubeadm init çæ§è¡è¿ç¨",content:'# ä½¿ç¨ kubeadm é¨ç½² Master èç¹\n\n\n# è¿è¡ kubeadm init å½ä»¤å®è£ Master\n\nè³æ­¤ï¼åå¤å·¥ä½å·²ç»å°±ç»ªãæ§è¡ kubeadm init å½ä»¤å³å¯ä¸é®å®è£ Kubernetes ç Masterã\n\nå¨å¼å§ä¹åéè¦æ³¨æï¼kubeadm çå®è£è¿ç¨ä¸æ¶åç½ç»æä»¶ï¼CNIï¼çåå§åï¼å æ­¤ kubeadm åæ­¥å®è£å®æçéç¾¤ä¸å·å¤ç½ç»åè½ï¼ä»»ä½ Pod åæ¬èªå¸¦ç CoreDNS é½æ æ³æ­£å¸¸å·¥ä½ãèç½ç»æä»¶çå®è£å¾å¾å¯¹ kubeadm init å½ä»¤çåæ°æä¸å®çè¦æ±ãä¾å¦ï¼å®è£ Calico æä»¶æ¶éè¦æå® --pod-network-cidr=192.168.0.0/16ã\n\næ¥ä¸æ¥ä½¿ç¨ kubeadm init å½ä»¤ï¼ä½¿ç¨åé¢åå»ºçéç½®æä»¶è¿è¡éç¾¤çåå§åï¼\n\nkubeadm init --config=init-config.yaml | tee kubeadm-init.log\n\n\nè¿½å ç tee kubeadm-init.log ç¨ä»¥è¾åºæ¥å¿ãè¿è¡åï¼æ§å¶å°å°è¾åºå¦ä¸åå®¹ï¼\n\nW0419 17:11:25.925070   12136 configset.go:202] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] Using Kubernetes version: v1.18.0\n[preflight] Running pre-flight checks\n        [WARNING IsDockerSystemdCheck]: detected "cgroupfs" as the Docker cgroup driver. The recommended driver is "systemd". Please follow the guide at https://kubernetes.io/docs/setup/cri/\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action in beforehand using \'kubeadm config images pull\'\n[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] Starting the kubelet\n[certs] Using certificateDir folder "/etc/kubernetes/pki"\n[certs] Generating "ca" certificate and key\n[certs] Generating "apiserver" certificate and key\n[certs] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.199.101]\n[certs] Generating "apiserver-kubelet-client" certificate and key\n[certs] Generating "front-proxy-ca" certificate and key\n[certs] Generating "front-proxy-client" certificate and key\n[certs] Generating "etcd/ca" certificate and key\n[certs] Generating "etcd/server" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [k8s-master localhost] and IPs [192.168.199.101 127.0.0.1 ::1]\n[certs] Generating "etcd/peer" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [k8s-master localhost] and IPs [192.168.199.101 127.0.0.1 ::1]\n[certs] Generating "etcd/healthcheck-client" certificate and key\n[certs] Generating "apiserver-etcd-client" certificate and key\n[certs] Generating "sa" key and public key\n[kubeconfig] Using kubeconfig folder "/etc/kubernetes"\n[kubeconfig] Writing "admin.conf" kubeconfig file\n[kubeconfig] Writing "kubelet.conf" kubeconfig file\n[kubeconfig] Writing "controller-manager.conf" kubeconfig file\n[kubeconfig] Writing "scheduler.conf" kubeconfig file\n[control-plane] Using manifest folder "/etc/kubernetes/manifests"\n[control-plane] Creating static Pod manifest for "kube-apiserver"\nW0419 17:11:31.212283   12136 manifests.go:225] the default kube-apiserver authorization-mode is "Node,RBAC"; using "Node,RBAC"\nW0419 17:11:31.213179   12136 manifests.go:225] the default kube-apiserver authorization-mode is "Node,RBAC"; using "Node,RBAC"\n[control-plane] Creating static Pod manifest for "kube-controller-manager"\n[control-plane] Creating static Pod manifest for "kube-scheduler"\n[etcd] Creating static Pod manifest for local etcd in "/etc/kubernetes/manifests"\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 4m0s\n[apiclient] All control plane components are healthy after 21.005920 seconds\n[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace\n[kubelet] Creating a ConfigMap "kubelet-config-1.18" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] Skipping phase. Please see --upload-certs\n[mark-control-plane] Marking the node k8s-master as control-plane by adding the label "node-role.kubernetes.io/master=\'\'"\n[mark-control-plane] Marking the node k8s-master as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]\n[bootstrap-token] Using token: abcdef.0123456789abcdef\n[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace\n[kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key\n[addons] Applied essential addon: CoreDNS\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.199.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:b694f8ad9e298f3ce7ec83f4fa60c784e09bd34c995a01cc862c269a4ac51cef\n\n\næ³¨æ\n\nè®°å½ä¸åå§åç»æä¸­çkubeadm joinå½ä»¤ï¼é¨ç½²workerèç¹æ¶ä¼ç¨å°\n\næç¤º\n\nå¦æå®è£ kubernetes çæ¬åä¸è½½çéåçæ¬ä¸ç»ä¸åä¼åºç° timed out waiting for the condition éè¯¯ãä¸­éå¤±è´¥ææ¯æ³ä¿®æ¹éç½®å¯ä»¥ä½¿ç¨ kubeadm reset å½ä»¤éç½®éç½®ï¼åååå§åæä½å³å¯ã\n\n\n# éç½® kubectl\n\nkubectl æ¯ç®¡ç Kubernetes Cluster çå½ä»¤è¡å·¥å·ï¼åé¢æä»¬å·²ç»å¨ææçèç¹å®è£äº kubectlãMaster åå§åå®æåéè¦åä¸äºéç½®å·¥ä½ï¼ç¶å kubectl å°±è½ä½¿ç¨äºã ä¾ç§ kubeadm init è¾åºçæåæç¤ºï¼æ¨èç¨ Linux æ®éç¨æ·æ§è¡ kubectlã\n\nåå»ºæ®éç¨æ·centos\n\n#åå»ºæ®éç¨æ·å¹¶è®¾ç½®å¯ç 123456\nuseradd centos && echo "centos:123456" | chpasswd centos\n\n#è¿½å sudoæé,å¹¶éç½®sudoåå¯\nsed -i \'/^root/a\\centos  ALL=(ALL)       NOPASSWD:ALL\' /etc/sudoers\n\n#ä¿å­éç¾¤å®å¨éç½®æä»¶å°å½åç¨æ·.kubeç®å½\nsu - centos\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n#å¯ç¨ kubectl å½ä»¤èªå¨è¡¥å¨åè½ï¼æ³¨ééæ°ç»å½çæï¼\necho "source <(kubectl completion bash)" >> ~/.bashrc\n\n\néè¦è¿äºéç½®å½ä»¤çåå æ¯ï¼Kubernetes éç¾¤é»è®¤éè¦å å¯æ¹å¼è®¿é®ãæä»¥ï¼è¿å æ¡å½ä»¤ï¼å°±æ¯å°ååé¨ç½²çæç Kubernetes éç¾¤çå®å¨éç½®æä»¶ï¼ä¿å­å°å½åç¨æ·ç .kube ç®å½ä¸ï¼kubectl é»è®¤ä¼ä½¿ç¨è¿ä¸ªç®å½ä¸çææä¿¡æ¯è®¿é® Kubernetes éç¾¤ã å¦æä¸è¿ä¹åçè¯ï¼æä»¬æ¯æ¬¡é½éè¦éè¿ export KUBECONFIG ç¯å¢åéåè¯ kubectl è¿ä¸ªå®å¨éç½®æä»¶çä½ç½®ã éç½®å®æå centos ç¨æ·å°±å¯ä»¥ä½¿ç¨ kubectl å½ä»¤ç®¡çéç¾¤äºã\n\n\n# éªè¯æ¯å¦æå\n\næ¥çéç¾¤ç¶æï¼\n\n[centos@k8s-master ~]$ kubectl get cs\nNAME                 STATUS    MESSAGE             ERROR\ncontroller-manager   Healthy   ok                  \nscheduler            Healthy   ok                  \netcd-0               Healthy   {"health":"true"}  \n\n\nç¡®è®¤åä¸ªç»ä»¶é½å¤äºhealthyç¶æã æ¥çèç¹ç¶æ\n\n[centos@k8s-master ~]$ kubectl get nodes\nNAME         STATUS     ROLES    AGE   VERSION\nk8s-master   NotReady   master   23m   v1.18.2\n\n\nå¯ä»¥çå°ï¼å½ååªå­å¨1ä¸ªmasterèç¹ï¼å¹¶ä¸è¿ä¸ªèç¹çç¶ææ¯ NotReadyã ä½¿ç¨ kubectl describe å½ä»¤æ¥æ¥çè¿ä¸ªèç¹ï¼Nodeï¼å¯¹è±¡çè¯¦ç»ä¿¡æ¯ãç¶æåäºä»¶ï¼Eventï¼ï¼\n\n[centos@k8s-master ~]$ kubectl describe node k8s-master \n......\nEvents:\n  Type    Reason                   Age                From                    Message\n  ----    ------                   ----               ----                    -------\n  Normal  Starting                 27m                kubelet, k8s-master     Starting kubelet.\n  Normal  NodeHasSufficientMemory  27m (x3 over 27m)  kubelet, k8s-master     Node k8s-master status is now: NodeHasSufficientMemory\n  Normal  NodeHasNoDiskPressure    27m (x3 over 27m)  kubelet, k8s-master     Node k8s-master status is now: NodeHasNoDiskPressure\n  Normal  NodeHasSufficientPID     27m (x2 over 27m)  kubelet, k8s-master     Node k8s-master status is now: NodeHasSufficientPID\n  Normal  NodeAllocatableEnforced  27m                kubelet, k8s-master     Updated Node Allocatable limit across pods\n  Normal  Starting                 27m                kubelet, k8s-master     Starting kubelet.\n  Normal  NodeHasSufficientMemory  27m                kubelet, k8s-master     Node k8s-master status is now: NodeHasSufficientMemory\n  Normal  NodeHasNoDiskPressure    27m                kubelet, k8s-master     Node k8s-master status is now: NodeHasNoDiskPressure\n  Normal  NodeHasSufficientPID     27m                kubelet, k8s-master     Node k8s-master status is now: NodeHasSufficientPID\n  Normal  NodeAllocatableEnforced  27m                kubelet, k8s-master     Updated Node Allocatable limit across pods\n  Normal  Starting                 27m                kube-proxy, k8s-master  Starting kube-proxy.\n\n\néè¿ kubectl describe æä»¤çè¾åºï¼æä»¬å¯ä»¥çå° NodeNotReady çåå å¨äºï¼æä»¬å°æªé¨ç½²ä»»ä½ç½ç»æä»¶ï¼kube-proxy ç­ç»ä»¶è¿å¤äº starting ç¶æã\n\nå¦å¤ï¼æä»¬è¿å¯ä»¥éè¿ kubectl æ£æ¥è¿ä¸ªèç¹ä¸åä¸ªç³»ç» Pod çç¶æï¼å¶ä¸­ï¼kube-system æ¯ Kubernetes é¡¹ç®é¢ççç³»ç» Pod çå·¥ä½ç©ºé´ï¼Namespaceï¼æ³¨æå®å¹¶ä¸æ¯ Linux Namespaceï¼å®åªæ¯ Kubernetes ååä¸åå·¥ä½ç©ºé´çåä½ï¼ï¼\n\n[centos@k8s-master ~]$ kubectl get pod -n kube-system -o wide\nNAME                                 READY   STATUS    RESTARTS   AGE   IP                NODE         NOMINATED NODE   READINESS GATES\ncoredns-78d4cf999f-7jdx7             0/1     Pending   0          32m   <none>            <none>       <none>           <none>\ncoredns-78d4cf999f-s6mhk             0/1     Pending   0          32m   <none>            <none>       <none>           <none>\netcd-k8s-master                      1/1     Running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-apiserver-k8s-master            1/1     Running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-controller-manager-k8s-master   1/1     Running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-proxy-cg29f                     1/1     Running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-scheduler-k8s-master            1/1     Running   0          32m   192.168.199.101   k8s-master   <none>           <none>\n\n\nå¯ä»¥çå°ï¼CoreDNS ä¾èµäºç½ç»ç Pod é½å¤äº Pending ç¶æï¼å³è°åº¦å¤±è´¥ãè¿å½ç¶æ¯ç¬¦åé¢æçï¼å ä¸ºè¿ä¸ª Master èç¹çç½ç»å°æªå°±ç»ªã\n\nè³æ­¤ä¸»èç¹éç½®å®æã\n\n\n# kubeadm init çæ§è¡è¿ç¨\n\n * initï¼æå®çæ¬è¿è¡åå§åæä½\n * preflightï¼åå§ååçæ£æ¥åä¸è½½æéè¦ç Docker éåæä»¶\n * kubelet-startï¼çæ kubelet çéç½®æä»¶ var/lib/kubelet/config.yamlï¼æ²¡æè¿ä¸ªæä»¶ kubelet æ æ³å¯å¨ï¼æä»¥åå§åä¹åç kubelet å®éä¸å¯å¨ä¸ä¼æå\n * certificatesï¼çæ Kubernetes ä½¿ç¨çè¯ä¹¦ï¼å­æ¾å¨ /etc/kubernetes/pki ç®å½ä¸­\n * kubeconfigï¼çæ KubeConfig æä»¶ï¼å­æ¾å¨ /etc/kubernetes ç®å½ä¸­ï¼ç»ä»¶ä¹é´éä¿¡éè¦ä½¿ç¨å¯¹åºæä»¶\n * control-planeï¼ä½¿ç¨ /etc/kubernetes/manifest ç®å½ä¸ç YAML æä»¶ï¼å®è£ Master ç»ä»¶\n * etcdï¼ä½¿ç¨ /etc/kubernetes/manifest/etcd.yaml å®è£ Etcd æå¡\n * wait-control-planeï¼ç­å¾ control-plan é¨ç½²ç Master ç»ä»¶å¯å¨\n * apiclientï¼æ£æ¥ Master ç»ä»¶æå¡ç¶æã\n * uploadconfigï¼æ´æ°éç½®\n * kubeletï¼ä½¿ç¨ configMap éç½® kubelet\n * patchnodeï¼æ´æ° CNI ä¿¡æ¯å° Node ä¸ï¼éè¿æ³¨éçæ¹å¼è®°å½\n * mark-control-planeï¼ä¸ºå½åèç¹ææ ç­¾ï¼æäºè§è² Masterï¼åä¸å¯è°åº¦æ ç­¾ï¼è¿æ ·é»è®¤å°±ä¸ä¼ä½¿ç¨ Master èç¹æ¥è¿è¡ Pod\n * bootstrap-tokenï¼çæ token è®°å½ä¸æ¥ï¼åè¾¹ä½¿ç¨ kubeadm join å¾éç¾¤ä¸­æ·»å èç¹æ¶ä¼ç¨å°\n * addonsï¼å®è£éå ç»ä»¶ CoreDNS å kube-proxy',normalizedContent:'# ä½¿ç¨ kubeadm é¨ç½² master èç¹\n\n\n# è¿è¡ kubeadm init å½ä»¤å®è£ master\n\nè³æ­¤ï¼åå¤å·¥ä½å·²ç»å°±ç»ªãæ§è¡ kubeadm init å½ä»¤å³å¯ä¸é®å®è£ kubernetes ç masterã\n\nå¨å¼å§ä¹åéè¦æ³¨æï¼kubeadm çå®è£è¿ç¨ä¸æ¶åç½ç»æä»¶ï¼cniï¼çåå§åï¼å æ­¤ kubeadm åæ­¥å®è£å®æçéç¾¤ä¸å·å¤ç½ç»åè½ï¼ä»»ä½ pod åæ¬èªå¸¦ç coredns é½æ æ³æ­£å¸¸å·¥ä½ãèç½ç»æä»¶çå®è£å¾å¾å¯¹ kubeadm init å½ä»¤çåæ°æä¸å®çè¦æ±ãä¾å¦ï¼å®è£ calico æä»¶æ¶éè¦æå® --pod-network-cidr=192.168.0.0/16ã\n\næ¥ä¸æ¥ä½¿ç¨ kubeadm init å½ä»¤ï¼ä½¿ç¨åé¢åå»ºçéç½®æä»¶è¿è¡éç¾¤çåå§åï¼\n\nkubeadm init --config=init-config.yaml | tee kubeadm-init.log\n\n\nè¿½å ç tee kubeadm-init.log ç¨ä»¥è¾åºæ¥å¿ãè¿è¡åï¼æ§å¶å°å°è¾åºå¦ä¸åå®¹ï¼\n\nw0419 17:11:25.925070   12136 configset.go:202] warning: kubeadm cannot validate component configs for api groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] using kubernetes version: v1.18.0\n[preflight] running pre-flight checks\n        [warning isdockersystemdcheck]: detected "cgroupfs" as the docker cgroup driver. the recommended driver is "systemd". please follow the guide at https://kubernetes.io/docs/setup/cri/\n[preflight] pulling images required for setting up a kubernetes cluster\n[preflight] this might take a minute or two, depending on the speed of your internet connection\n[preflight] you can also perform this action in beforehand using \'kubeadm config images pull\'\n[kubelet-start] writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] starting the kubelet\n[certs] using certificatedir folder "/etc/kubernetes/pki"\n[certs] generating "ca" certificate and key\n[certs] generating "apiserver" certificate and key\n[certs] apiserver serving cert is signed for dns names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and ips [10.96.0.1 192.168.199.101]\n[certs] generating "apiserver-kubelet-client" certificate and key\n[certs] generating "front-proxy-ca" certificate and key\n[certs] generating "front-proxy-client" certificate and key\n[certs] generating "etcd/ca" certificate and key\n[certs] generating "etcd/server" certificate and key\n[certs] etcd/server serving cert is signed for dns names [k8s-master localhost] and ips [192.168.199.101 127.0.0.1 ::1]\n[certs] generating "etcd/peer" certificate and key\n[certs] etcd/peer serving cert is signed for dns names [k8s-master localhost] and ips [192.168.199.101 127.0.0.1 ::1]\n[certs] generating "etcd/healthcheck-client" certificate and key\n[certs] generating "apiserver-etcd-client" certificate and key\n[certs] generating "sa" key and public key\n[kubeconfig] using kubeconfig folder "/etc/kubernetes"\n[kubeconfig] writing "admin.conf" kubeconfig file\n[kubeconfig] writing "kubelet.conf" kubeconfig file\n[kubeconfig] writing "controller-manager.conf" kubeconfig file\n[kubeconfig] writing "scheduler.conf" kubeconfig file\n[control-plane] using manifest folder "/etc/kubernetes/manifests"\n[control-plane] creating static pod manifest for "kube-apiserver"\nw0419 17:11:31.212283   12136 manifests.go:225] the default kube-apiserver authorization-mode is "node,rbac"; using "node,rbac"\nw0419 17:11:31.213179   12136 manifests.go:225] the default kube-apiserver authorization-mode is "node,rbac"; using "node,rbac"\n[control-plane] creating static pod manifest for "kube-controller-manager"\n[control-plane] creating static pod manifest for "kube-scheduler"\n[etcd] creating static pod manifest for local etcd in "/etc/kubernetes/manifests"\n[wait-control-plane] waiting for the kubelet to boot up the control plane as static pods from directory "/etc/kubernetes/manifests". this can take up to 4m0s\n[apiclient] all control plane components are healthy after 21.005920 seconds\n[upload-config] storing the configuration used in configmap "kubeadm-config" in the "kube-system" namespace\n[kubelet] creating a configmap "kubelet-config-1.18" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] skipping phase. please see --upload-certs\n[mark-control-plane] marking the node k8s-master as control-plane by adding the label "node-role.kubernetes.io/master=\'\'"\n[mark-control-plane] marking the node k8s-master as control-plane by adding the taints [node-role.kubernetes.io/master:noschedule]\n[bootstrap-token] using token: abcdef.0123456789abcdef\n[bootstrap-token] configuring bootstrap tokens, cluster-info configmap, rbac roles\n[bootstrap-token] configured rbac rules to allow node bootstrap tokens to get nodes\n[bootstrap-token] configured rbac rules to allow node bootstrap tokens to post csrs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured rbac rules to allow the csrapprover controller automatically approve csrs from a node bootstrap token\n[bootstrap-token] configured rbac rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] creating the "cluster-info" configmap in the "kube-public" namespace\n[kubelet-finalize] updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key\n[addons] applied essential addon: coredns\n[addons] applied essential addon: kube-proxy\n\nyour kubernetes control-plane has initialized successfully!\n\nto start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $home/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $home/.kube/config\n  sudo chown $(id -u):$(id -g) $home/.kube/config\n\nyou should now deploy a pod network to the cluster.\nrun "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nthen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.199.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:b694f8ad9e298f3ce7ec83f4fa60c784e09bd34c995a01cc862c269a4ac51cef\n\n\næ³¨æ\n\nè®°å½ä¸åå§åç»æä¸­çkubeadm joinå½ä»¤ï¼é¨ç½²workerèç¹æ¶ä¼ç¨å°\n\næç¤º\n\nå¦æå®è£ kubernetes çæ¬åä¸è½½çéåçæ¬ä¸ç»ä¸åä¼åºç° timed out waiting for the condition éè¯¯ãä¸­éå¤±è´¥ææ¯æ³ä¿®æ¹éç½®å¯ä»¥ä½¿ç¨ kubeadm reset å½ä»¤éç½®éç½®ï¼åååå§åæä½å³å¯ã\n\n\n# éç½® kubectl\n\nkubectl æ¯ç®¡ç kubernetes cluster çå½ä»¤è¡å·¥å·ï¼åé¢æä»¬å·²ç»å¨ææçèç¹å®è£äº kubectlãmaster åå§åå®æåéè¦åä¸äºéç½®å·¥ä½ï¼ç¶å kubectl å°±è½ä½¿ç¨äºã ä¾ç§ kubeadm init è¾åºçæåæç¤ºï¼æ¨èç¨ linux æ®éç¨æ·æ§è¡ kubectlã\n\nåå»ºæ®éç¨æ·centos\n\n#åå»ºæ®éç¨æ·å¹¶è®¾ç½®å¯ç 123456\nuseradd centos && echo "centos:123456" | chpasswd centos\n\n#è¿½å sudoæé,å¹¶éç½®sudoåå¯\nsed -i \'/^root/a\\centos  all=(all)       nopasswd:all\' /etc/sudoers\n\n#ä¿å­éç¾¤å®å¨éç½®æä»¶å°å½åç¨æ·.kubeç®å½\nsu - centos\nmkdir -p $home/.kube\nsudo cp -i /etc/kubernetes/admin.conf $home/.kube/config\nsudo chown $(id -u):$(id -g) $home/.kube/config\n\n#å¯ç¨ kubectl å½ä»¤èªå¨è¡¥å¨åè½ï¼æ³¨ééæ°ç»å½çæï¼\necho "source <(kubectl completion bash)" >> ~/.bashrc\n\n\néè¦è¿äºéç½®å½ä»¤çåå æ¯ï¼kubernetes éç¾¤é»è®¤éè¦å å¯æ¹å¼è®¿é®ãæä»¥ï¼è¿å æ¡å½ä»¤ï¼å°±æ¯å°ååé¨ç½²çæç kubernetes éç¾¤çå®å¨éç½®æä»¶ï¼ä¿å­å°å½åç¨æ·ç .kube ç®å½ä¸ï¼kubectl é»è®¤ä¼ä½¿ç¨è¿ä¸ªç®å½ä¸çææä¿¡æ¯è®¿é® kubernetes éç¾¤ã å¦æä¸è¿ä¹åçè¯ï¼æä»¬æ¯æ¬¡é½éè¦éè¿ export kubeconfig ç¯å¢åéåè¯ kubectl è¿ä¸ªå®å¨éç½®æä»¶çä½ç½®ã éç½®å®æå centos ç¨æ·å°±å¯ä»¥ä½¿ç¨ kubectl å½ä»¤ç®¡çéç¾¤äºã\n\n\n# éªè¯æ¯å¦æå\n\næ¥çéç¾¤ç¶æï¼\n\n[centos@k8s-master ~]$ kubectl get cs\nname                 status    message             error\ncontroller-manager   healthy   ok                  \nscheduler            healthy   ok                  \netcd-0               healthy   {"health":"true"}  \n\n\nç¡®è®¤åä¸ªç»ä»¶é½å¤äºhealthyç¶æã æ¥çèç¹ç¶æ\n\n[centos@k8s-master ~]$ kubectl get nodes\nname         status     roles    age   version\nk8s-master   notready   master   23m   v1.18.2\n\n\nå¯ä»¥çå°ï¼å½ååªå­å¨1ä¸ªmasterèç¹ï¼å¹¶ä¸è¿ä¸ªèç¹çç¶ææ¯ notreadyã ä½¿ç¨ kubectl describe å½ä»¤æ¥æ¥çè¿ä¸ªèç¹ï¼nodeï¼å¯¹è±¡çè¯¦ç»ä¿¡æ¯ãç¶æåäºä»¶ï¼eventï¼ï¼\n\n[centos@k8s-master ~]$ kubectl describe node k8s-master \n......\nevents:\n  type    reason                   age                from                    message\n  ----    ------                   ----               ----                    -------\n  normal  starting                 27m                kubelet, k8s-master     starting kubelet.\n  normal  nodehassufficientmemory  27m (x3 over 27m)  kubelet, k8s-master     node k8s-master status is now: nodehassufficientmemory\n  normal  nodehasnodiskpressure    27m (x3 over 27m)  kubelet, k8s-master     node k8s-master status is now: nodehasnodiskpressure\n  normal  nodehassufficientpid     27m (x2 over 27m)  kubelet, k8s-master     node k8s-master status is now: nodehassufficientpid\n  normal  nodeallocatableenforced  27m                kubelet, k8s-master     updated node allocatable limit across pods\n  normal  starting                 27m                kubelet, k8s-master     starting kubelet.\n  normal  nodehassufficientmemory  27m                kubelet, k8s-master     node k8s-master status is now: nodehassufficientmemory\n  normal  nodehasnodiskpressure    27m                kubelet, k8s-master     node k8s-master status is now: nodehasnodiskpressure\n  normal  nodehassufficientpid     27m                kubelet, k8s-master     node k8s-master status is now: nodehassufficientpid\n  normal  nodeallocatableenforced  27m                kubelet, k8s-master     updated node allocatable limit across pods\n  normal  starting                 27m                kube-proxy, k8s-master  starting kube-proxy.\n\n\néè¿ kubectl describe æä»¤çè¾åºï¼æä»¬å¯ä»¥çå° nodenotready çåå å¨äºï¼æä»¬å°æªé¨ç½²ä»»ä½ç½ç»æä»¶ï¼kube-proxy ç­ç»ä»¶è¿å¤äº starting ç¶æã\n\nå¦å¤ï¼æä»¬è¿å¯ä»¥éè¿ kubectl æ£æ¥è¿ä¸ªèç¹ä¸åä¸ªç³»ç» pod çç¶æï¼å¶ä¸­ï¼kube-system æ¯ kubernetes é¡¹ç®é¢ççç³»ç» pod çå·¥ä½ç©ºé´ï¼namespaceï¼æ³¨æå®å¹¶ä¸æ¯ linux namespaceï¼å®åªæ¯ kubernetes ååä¸åå·¥ä½ç©ºé´çåä½ï¼ï¼\n\n[centos@k8s-master ~]$ kubectl get pod -n kube-system -o wide\nname                                 ready   status    restarts   age   ip                node         nominated node   readiness gates\ncoredns-78d4cf999f-7jdx7             0/1     pending   0          32m   <none>            <none>       <none>           <none>\ncoredns-78d4cf999f-s6mhk             0/1     pending   0          32m   <none>            <none>       <none>           <none>\netcd-k8s-master                      1/1     running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-apiserver-k8s-master            1/1     running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-controller-manager-k8s-master   1/1     running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-proxy-cg29f                     1/1     running   0          32m   192.168.199.101   k8s-master   <none>           <none>\nkube-scheduler-k8s-master            1/1     running   0          32m   192.168.199.101   k8s-master   <none>           <none>\n\n\nå¯ä»¥çå°ï¼coredns ä¾èµäºç½ç»ç pod é½å¤äº pending ç¶æï¼å³è°åº¦å¤±è´¥ãè¿å½ç¶æ¯ç¬¦åé¢æçï¼å ä¸ºè¿ä¸ª master èç¹çç½ç»å°æªå°±ç»ªã\n\nè³æ­¤ä¸»èç¹éç½®å®æã\n\n\n# kubeadm init çæ§è¡è¿ç¨\n\n * initï¼æå®çæ¬è¿è¡åå§åæä½\n * preflightï¼åå§ååçæ£æ¥åä¸è½½æéè¦ç docker éåæä»¶\n * kubelet-startï¼çæ kubelet çéç½®æä»¶ var/lib/kubelet/config.yamlï¼æ²¡æè¿ä¸ªæä»¶ kubelet æ æ³å¯å¨ï¼æä»¥åå§åä¹åç kubelet å®éä¸å¯å¨ä¸ä¼æå\n * certificatesï¼çæ kubernetes ä½¿ç¨çè¯ä¹¦ï¼å­æ¾å¨ /etc/kubernetes/pki ç®å½ä¸­\n * kubeconfigï¼çæ kubeconfig æä»¶ï¼å­æ¾å¨ /etc/kubernetes ç®å½ä¸­ï¼ç»ä»¶ä¹é´éä¿¡éè¦ä½¿ç¨å¯¹åºæä»¶\n * control-planeï¼ä½¿ç¨ /etc/kubernetes/manifest ç®å½ä¸ç yaml æä»¶ï¼å®è£ master ç»ä»¶\n * etcdï¼ä½¿ç¨ /etc/kubernetes/manifest/etcd.yaml å®è£ etcd æå¡\n * wait-control-planeï¼ç­å¾ control-plan é¨ç½²ç master ç»ä»¶å¯å¨\n * apiclientï¼æ£æ¥ master ç»ä»¶æå¡ç¶æã\n * uploadconfigï¼æ´æ°éç½®\n * kubeletï¼ä½¿ç¨ configmap éç½® kubelet\n * patchnodeï¼æ´æ° cni ä¿¡æ¯å° node ä¸ï¼éè¿æ³¨éçæ¹å¼è®°å½\n * mark-control-planeï¼ä¸ºå½åèç¹ææ ç­¾ï¼æäºè§è² masterï¼åä¸å¯è°åº¦æ ç­¾ï¼è¿æ ·é»è®¤å°±ä¸ä¼ä½¿ç¨ master èç¹æ¥è¿è¡ pod\n * bootstrap-tokenï¼çæ token è®°å½ä¸æ¥ï¼åè¾¹ä½¿ç¨ kubeadm join å¾éç¾¤ä¸­æ·»å èç¹æ¶ä¼ç¨å°\n * addonsï¼å®è£éå ç»ä»¶ coredns å kube-proxy',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"å®è£ç½ç»æä»¶",frontmatter:{title:"å®è£ç½ç»æä»¶",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/9477b8/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/07.%E5%AE%89%E8%A3%85%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/07.å®è£ç½ç»æä»¶.md",key:"v-4b869476",path:"/pages/9477b8/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:13},{level:2,title:"ä»ä¹æ¯ CNI",slug:"ä»ä¹æ¯-cni",normalizedTitle:"ä»ä¹æ¯ cni",charIndex:265},{level:2,title:"Kubernetes ä¸­ç CNI æä»¶",slug:"kubernetes-ä¸­ç-cni-æä»¶",normalizedTitle:"kubernetes ä¸­ç cni æä»¶",charIndex:441},{level:2,title:"ä»ä¹æ¯ Calico",slug:"ä»ä¹æ¯-calico",normalizedTitle:"ä»ä¹æ¯ calico",charIndex:908},{level:2,title:"å®è£ç½ç»æä»¶ Calico",slug:"å®è£ç½ç»æä»¶-calico",normalizedTitle:"å®è£ç½ç»æä»¶ calico",charIndex:1118},{level:2,title:"è§£å³ ImagePullBackOff",slug:"è§£å³-imagepullbackoff",normalizedTitle:"è§£å³ imagepullbackoff",charIndex:4570}],headersStr:"æ¦è¿° ä»ä¹æ¯ CNI Kubernetes ä¸­ç CNI æä»¶ ä»ä¹æ¯ Calico å®è£ç½ç»æä»¶ Calico è§£å³ ImagePullBackOff",content:"# å®è£ç½ç»æä»¶\n\n\n# æ¦è¿°\n\nå®¹å¨ç½ç»æ¯å®¹å¨éæ©è¿æ¥å°å¶ä»å®¹å¨ãä¸»æºåå¤é¨ç½ç»çæºå¶ãå®¹å¨ç runtime æä¾äºåç§ç½ç»æ¨¡å¼ï¼æ¯ç§æ¨¡å¼é½ä¼äº§çä¸åçä½éªãä¾å¦ï¼Docker é»è®¤æåµä¸å¯ä»¥ä¸ºå®¹å¨éç½®ä»¥ä¸ç½ç»ï¼\n\n * noneï¼ å°å®¹å¨æ·»å å°ä¸ä¸ªå®¹å¨ä¸é¨çç½ç»å æ ä¸­ï¼æ²¡æå¯¹å¤è¿æ¥ã\n * hostï¼ å°å®¹å¨æ·»å å°ä¸»æºçç½ç»å æ ä¸­ï¼æ²¡æéç¦»ã\n * default bridgeï¼ é»è®¤ç½ç»æ¨¡å¼ãæ¯ä¸ªå®¹å¨å¯ä»¥éè¿ IP å°åç¸äºè¿æ¥ã\n * èªå®ä¹ç½æ¡¥ï¼ ç¨æ·å®ä¹çç½æ¡¥ï¼å·ææ´å¤ççµæ´»æ§ãéç¦»æ§åå¶ä»ä¾¿å©åè½ã\n\n\n# ä»ä¹æ¯ CNI\n\nCNI(Container Network Interface) æ¯ä¸ä¸ªæ åçï¼éç¨çæ¥å£ãå¨å®¹å¨å¹³å°ï¼Dockerï¼Kubernetesï¼Mesos å®¹å¨ç½ç»è§£å³æ¹æ¡ flannelï¼calicoï¼weaveãåªè¦æä¾ä¸ä¸ªæ åçæ¥å£ï¼å°±è½ä¸ºåæ ·æ»¡è¶³è¯¥åè®®çææå®¹å¨å¹³å°æä¾ç½ç»åè½ï¼è CNI æ­£æ¯è¿æ ·çä¸ä¸ªæ åæ¥å£åè®®ã\n\n\n# Kubernetes ä¸­ç CNI æä»¶\n\nCNI çåè¡·æ¯åå»ºä¸ä¸ªæ¡æ¶ï¼ç¨äºå¨éç½®æéæ¯å®¹å¨æ¶å¨æéç½®éå½çç½ç»éç½®åèµæºãæä»¶è´è´£ä¸ºæ¥å£éç½®åç®¡ç IP å°åï¼å¹¶ä¸éå¸¸æä¾ä¸ IP ç®¡çãæ¯ä¸ªå®¹å¨ç IP åéãä»¥åå¤ä¸»æºè¿æ¥ç¸å³çåè½ãå®¹å¨è¿è¡æ¶ä¼è°ç¨ç½ç»æä»¶ï¼ä»èå¨å®¹å¨å¯å¨æ¶åé IP å°åå¹¶éç½®ç½ç»ï¼å¹¶å¨å é¤å®¹å¨æ¶åæ¬¡è°ç¨å®ä»¥æ¸çè¿äºèµæºã\n\nè¿è¡æ¶æåè°å¨å³å®äºå®¹å¨åºè¯¥å å¥åªä¸ªç½ç»ä»¥åå®éè¦è°ç¨åªä¸ªæä»¶ãç¶åï¼æä»¶ä¼å°æ¥å£æ·»å å°å®¹å¨ç½ç»å½åç©ºé´ä¸­ï¼ä½ä¸ºä¸ä¸ª veth å¯¹çä¸ä¾§ãæ¥çï¼å®ä¼å¨ä¸»æºä¸è¿è¡æ´æ¹ï¼åæ¬å° veth çå¶ä»é¨åè¿æ¥å°ç½æ¡¥ãåä¹åï¼å®ä¼éè¿è°ç¨åç¬ç IPAMï¼IPå°åç®¡çï¼æä»¶æ¥åé IP å°åå¹¶è®¾ç½®è·¯ç±ã\n\nå¨ Kubernetes ä¸­ï¼kubelet å¯ä»¥å¨éå½çæ¶é´è°ç¨å®æ¾å°çæä»¶ï¼ä¸ºéè¿ kubelet å¯å¨ç podè¿è¡èªå¨çç½ç»éç½®ã\n\nKubernetes ä¸­å¯éç CNI æä»¶å¦ä¸ï¼\n\n * Flannel\n * Calico\n * Canal\n * Weave\n\n\n# ä»ä¹æ¯ Calico\n\nCalico ä¸ºå®¹å¨åèææºæä¾äºå®å¨çç½ç»è¿æ¥è§£å³æ¹æ¡ï¼å¹¶ç»è¿äºå¤§è§æ¨¡çäº§éªè¯ï¼å¨å¬æäºåè·¨æ°åä¸ªéç¾¤èç¹ä¸­ï¼ï¼å¯ä¸ Kubernetesï¼OpenShiftï¼Dockerï¼Mesosï¼DC / OS å OpenStack éæã\n\nCalico è¿æä¾ç½ç»å®å¨è§åçå¨æå®æ½ãä½¿ç¨ Calico çç®åç­ç¥è¯­è¨ï¼æ¨å¯ä»¥å®ç°å¯¹å®¹å¨ï¼èææºå·¥ä½è´è½½åè£¸æºä¸»æºç«¯ç¹ä¹é´éä¿¡çç»ç²åº¦æ§å¶ã\n\n\n# å®è£ç½ç»æä»¶ Calico\n\næç¤º\n\næªæ­¢å°æç« åè¡¨æ¥æ 2020 å¹´ 04 æ 5 æ¥ï¼Calico å®æ¹çæ¬ä¸º v3.13.2\n\nåèå®æ¹ææ¡£å®è£ï¼https://docs.projectcalico.org/getting-started/kubernetes/\n\n# å¨ Master èç¹æä½å³å¯\nkubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml\n\n# å®è£æ¶æ¾ç¤ºå¦ä¸è¾åº\nconfigmap/calico-config created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\nclusterrole.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrole.rbac.authorization.k8s.io/calico-node created\nclusterrolebinding.rbac.authorization.k8s.io/calico-node created\ndaemonset.extensions/calico-node created\nserviceaccount/calico-node created\ndeployment.extensions/calico-kube-controllers created\nserviceaccount/calico-kube-controllers created\n\n\nç¡®è®¤å®è£æ¯å¦æå\n\nwatch kubectl get pods --all-namespaces\n\n# éè¦ç­å¾ææç¶æä¸º Runningï¼æ³¨ææ¶é´å¯è½è¾ä¹ï¼3 - 5 åéçæ ·å­\nEvery 2.0s: kubectl get pods --all-namespaces                                                                                                    kubernetes-master: Fri May 10 18:16:51 2019\n\nNAMESPACE     NAME                                        READY   STATUS    RESTARTS   AGE\nkube-system   calico-kube-controllers-555fc8cc5c-mcmst   1/1     Running   0          12m\nkube-system   calico-node-s76tm                          1/1     Running   0          12m\nkube-system   coredns-7ff77c879f-h95kn                   1/1     Running   0          13m\nkube-system   coredns-7ff77c879f-lczbq                   1/1     Running   0          13m\nkube-system   etcd-k8s-master                            1/1     Running   0          13m\nkube-system   kube-apiserver-k8s-master                  1/1     Running   0          13m\nkube-system   kube-controller-manager-k8s-master         1/1     Running   0          13m\nkube-system   kube-proxy-2kg9t                           1/1     Running   0          13m\nkube-system   kube-scheduler-k8s-master                  1/1     Running   0          13m\n\n\nåæ¬¡æ¥çmasterèç¹ç¶æå·²ç»ä¸ºreadyç¶æï¼\n\n[centos@k8s-master ~]$ kubectl get nodes\nNAME         STATUS   ROLES    AGE   VERSION\nk8s-master   Ready    master   19m   v1.18.2\n\n\nè³æ­¤ï¼Kubernetes ç Master èç¹å°±é¨ç½²å®æäºãå¦æä½ åªéè¦ä¸ä¸ªåèç¹ç Kubernetesï¼ç°å¨ä½ å°±å¯ä»¥ä½¿ç¨äºãä¸è¿ï¼å¨é»è®¤æåµä¸ï¼Kubernetes ç Master èç¹æ¯ä¸è½è¿è¡ç¨æ· Pod çã\n\n\n# è§£å³ ImagePullBackOff\n\nå¨ä½¿ç¨ watch kubectl get pods --all-namespaces å½ä»¤è§å¯ Pods ç¶ææ¶å¦æåºç° ImagePullBackOff æ æ³ Running çæåµï¼è¯·å°è¯ä½¿ç¨å¦ä¸æ­¥éª¤å¤çï¼\n\n * Master ä¸­å é¤ Nodesï¼kubectl delete nodes <NAME>\n * Slave ä¸­éç½®éç½®ï¼kubeadm reset\n * Slave éå¯è®¡ç®æºï¼reboot\n * Slave éæ°å å¥éç¾¤ï¼kubeadm join",normalizedContent:"# å®è£ç½ç»æä»¶\n\n\n# æ¦è¿°\n\nå®¹å¨ç½ç»æ¯å®¹å¨éæ©è¿æ¥å°å¶ä»å®¹å¨ãä¸»æºåå¤é¨ç½ç»çæºå¶ãå®¹å¨ç runtime æä¾äºåç§ç½ç»æ¨¡å¼ï¼æ¯ç§æ¨¡å¼é½ä¼äº§çä¸åçä½éªãä¾å¦ï¼docker é»è®¤æåµä¸å¯ä»¥ä¸ºå®¹å¨éç½®ä»¥ä¸ç½ç»ï¼\n\n * noneï¼ å°å®¹å¨æ·»å å°ä¸ä¸ªå®¹å¨ä¸é¨çç½ç»å æ ä¸­ï¼æ²¡æå¯¹å¤è¿æ¥ã\n * hostï¼ å°å®¹å¨æ·»å å°ä¸»æºçç½ç»å æ ä¸­ï¼æ²¡æéç¦»ã\n * default bridgeï¼ é»è®¤ç½ç»æ¨¡å¼ãæ¯ä¸ªå®¹å¨å¯ä»¥éè¿ ip å°åç¸äºè¿æ¥ã\n * èªå®ä¹ç½æ¡¥ï¼ ç¨æ·å®ä¹çç½æ¡¥ï¼å·ææ´å¤ççµæ´»æ§ãéç¦»æ§åå¶ä»ä¾¿å©åè½ã\n\n\n# ä»ä¹æ¯ cni\n\ncni(container network interface) æ¯ä¸ä¸ªæ åçï¼éç¨çæ¥å£ãå¨å®¹å¨å¹³å°ï¼dockerï¼kubernetesï¼mesos å®¹å¨ç½ç»è§£å³æ¹æ¡ flannelï¼calicoï¼weaveãåªè¦æä¾ä¸ä¸ªæ åçæ¥å£ï¼å°±è½ä¸ºåæ ·æ»¡è¶³è¯¥åè®®çææå®¹å¨å¹³å°æä¾ç½ç»åè½ï¼è cni æ­£æ¯è¿æ ·çä¸ä¸ªæ åæ¥å£åè®®ã\n\n\n# kubernetes ä¸­ç cni æä»¶\n\ncni çåè¡·æ¯åå»ºä¸ä¸ªæ¡æ¶ï¼ç¨äºå¨éç½®æéæ¯å®¹å¨æ¶å¨æéç½®éå½çç½ç»éç½®åèµæºãæä»¶è´è´£ä¸ºæ¥å£éç½®åç®¡ç ip å°åï¼å¹¶ä¸éå¸¸æä¾ä¸ ip ç®¡çãæ¯ä¸ªå®¹å¨ç ip åéãä»¥åå¤ä¸»æºè¿æ¥ç¸å³çåè½ãå®¹å¨è¿è¡æ¶ä¼è°ç¨ç½ç»æä»¶ï¼ä»èå¨å®¹å¨å¯å¨æ¶åé ip å°åå¹¶éç½®ç½ç»ï¼å¹¶å¨å é¤å®¹å¨æ¶åæ¬¡è°ç¨å®ä»¥æ¸çè¿äºèµæºã\n\nè¿è¡æ¶æåè°å¨å³å®äºå®¹å¨åºè¯¥å å¥åªä¸ªç½ç»ä»¥åå®éè¦è°ç¨åªä¸ªæä»¶ãç¶åï¼æä»¶ä¼å°æ¥å£æ·»å å°å®¹å¨ç½ç»å½åç©ºé´ä¸­ï¼ä½ä¸ºä¸ä¸ª veth å¯¹çä¸ä¾§ãæ¥çï¼å®ä¼å¨ä¸»æºä¸è¿è¡æ´æ¹ï¼åæ¬å° veth çå¶ä»é¨åè¿æ¥å°ç½æ¡¥ãåä¹åï¼å®ä¼éè¿è°ç¨åç¬ç ipamï¼ipå°åç®¡çï¼æä»¶æ¥åé ip å°åå¹¶è®¾ç½®è·¯ç±ã\n\nå¨ kubernetes ä¸­ï¼kubelet å¯ä»¥å¨éå½çæ¶é´è°ç¨å®æ¾å°çæä»¶ï¼ä¸ºéè¿ kubelet å¯å¨ç podè¿è¡èªå¨çç½ç»éç½®ã\n\nkubernetes ä¸­å¯éç cni æä»¶å¦ä¸ï¼\n\n * flannel\n * calico\n * canal\n * weave\n\n\n# ä»ä¹æ¯ calico\n\ncalico ä¸ºå®¹å¨åèææºæä¾äºå®å¨çç½ç»è¿æ¥è§£å³æ¹æ¡ï¼å¹¶ç»è¿äºå¤§è§æ¨¡çäº§éªè¯ï¼å¨å¬æäºåè·¨æ°åä¸ªéç¾¤èç¹ä¸­ï¼ï¼å¯ä¸ kubernetesï¼openshiftï¼dockerï¼mesosï¼dc / os å openstack éæã\n\ncalico è¿æä¾ç½ç»å®å¨è§åçå¨æå®æ½ãä½¿ç¨ calico çç®åç­ç¥è¯­è¨ï¼æ¨å¯ä»¥å®ç°å¯¹å®¹å¨ï¼èææºå·¥ä½è´è½½åè£¸æºä¸»æºç«¯ç¹ä¹é´éä¿¡çç»ç²åº¦æ§å¶ã\n\n\n# å®è£ç½ç»æä»¶ calico\n\næç¤º\n\næªæ­¢å°æç« åè¡¨æ¥æ 2020 å¹´ 04 æ 5 æ¥ï¼calico å®æ¹çæ¬ä¸º v3.13.2\n\nåèå®æ¹ææ¡£å®è£ï¼https://docs.projectcalico.org/getting-started/kubernetes/\n\n# å¨ master èç¹æä½å³å¯\nkubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml\n\n# å®è£æ¶æ¾ç¤ºå¦ä¸è¾åº\nconfigmap/calico-config created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\nclusterrole.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrole.rbac.authorization.k8s.io/calico-node created\nclusterrolebinding.rbac.authorization.k8s.io/calico-node created\ndaemonset.extensions/calico-node created\nserviceaccount/calico-node created\ndeployment.extensions/calico-kube-controllers created\nserviceaccount/calico-kube-controllers created\n\n\nç¡®è®¤å®è£æ¯å¦æå\n\nwatch kubectl get pods --all-namespaces\n\n# éè¦ç­å¾ææç¶æä¸º runningï¼æ³¨ææ¶é´å¯è½è¾ä¹ï¼3 - 5 åéçæ ·å­\nevery 2.0s: kubectl get pods --all-namespaces                                                                                                    kubernetes-master: fri may 10 18:16:51 2019\n\nnamespace     name                                        ready   status    restarts   age\nkube-system   calico-kube-controllers-555fc8cc5c-mcmst   1/1     running   0          12m\nkube-system   calico-node-s76tm                          1/1     running   0          12m\nkube-system   coredns-7ff77c879f-h95kn                   1/1     running   0          13m\nkube-system   coredns-7ff77c879f-lczbq                   1/1     running   0          13m\nkube-system   etcd-k8s-master                            1/1     running   0          13m\nkube-system   kube-apiserver-k8s-master                  1/1     running   0          13m\nkube-system   kube-controller-manager-k8s-master         1/1     running   0          13m\nkube-system   kube-proxy-2kg9t                           1/1     running   0          13m\nkube-system   kube-scheduler-k8s-master                  1/1     running   0          13m\n\n\nåæ¬¡æ¥çmasterèç¹ç¶æå·²ç»ä¸ºreadyç¶æï¼\n\n[centos@k8s-master ~]$ kubectl get nodes\nname         status   roles    age   version\nk8s-master   ready    master   19m   v1.18.2\n\n\nè³æ­¤ï¼kubernetes ç master èç¹å°±é¨ç½²å®æäºãå¦æä½ åªéè¦ä¸ä¸ªåèç¹ç kubernetesï¼ç°å¨ä½ å°±å¯ä»¥ä½¿ç¨äºãä¸è¿ï¼å¨é»è®¤æåµä¸ï¼kubernetes ç master èç¹æ¯ä¸è½è¿è¡ç¨æ· pod çã\n\n\n# è§£å³ imagepullbackoff\n\nå¨ä½¿ç¨ watch kubectl get pods --all-namespaces å½ä»¤è§å¯ pods ç¶ææ¶å¦æåºç° imagepullbackoff æ æ³ running çæåµï¼è¯·å°è¯ä½¿ç¨å¦ä¸æ­¥éª¤å¤çï¼\n\n * master ä¸­å é¤ nodesï¼kubectl delete nodes <name>\n * slave ä¸­éç½®éç½®ï¼kubeadm reset\n * slave éå¯è®¡ç®æºï¼reboot\n * slave éæ°å å¥éç¾¤ï¼kubeadm join",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"ä½¿ç¨ kubeadm éç½® Worker èç¹",frontmatter:{title:"ä½¿ç¨ kubeadm éç½® Worker èç¹",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/f6617c/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/08.%E4%BD%BF%E7%94%A8%20kubeadm%20%E9%85%8D%E7%BD%AE%20Worker%20%E8%8A%82%E7%82%B9.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/08.ä½¿ç¨ kubeadm éç½® Worker èç¹.md",key:"v-20e14c4b",path:"/pages/f6617c/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:30},{level:2,title:"å å¥éç¾¤",slug:"å å¥éç¾¤",normalizedTitle:"å å¥éç¾¤",charIndex:283},{level:2,title:"éªè¯æ¯å¦æå",slug:"éªè¯æ¯å¦æå",normalizedTitle:"éªè¯æ¯å¦æå",charIndex:2533},{level:2,title:"æµè¯éç¾¤åä¸ªç»ä»¶",slug:"æµè¯éç¾¤åä¸ªç»ä»¶",normalizedTitle:"æµè¯éç¾¤åä¸ªç»ä»¶",charIndex:10480},{level:2,title:"éªè¯kube-proxy",slug:"éªè¯kube-proxy",normalizedTitle:"éªè¯kube-proxy",charIndex:11342},{level:2,title:"åæ­¢æå¡",slug:"åæ­¢æå¡",normalizedTitle:"åæ­¢æå¡",charIndex:12784},{level:2,title:"Podè°åº¦å°Masterèç¹",slug:"podè°åº¦å°masterèç¹",normalizedTitle:"podè°åº¦å°masterèç¹",charIndex:12958},{level:2,title:"kube-proxyå¼å¯ipvs",slug:"kube-proxyå¼å¯ipvs",normalizedTitle:"kube-proxyå¼å¯ipvs",charIndex:13530},{level:2,title:"ç§»é¤èç¹åéç¾¤",slug:"ç§»é¤èç¹åéç¾¤",normalizedTitle:"ç§»é¤èç¹åéç¾¤",charIndex:15406}],headersStr:"æ¦è¿° å å¥éç¾¤ éªè¯æ¯å¦æå æµè¯éç¾¤åä¸ªç»ä»¶ éªè¯kube-proxy åæ­¢æå¡ Podè°åº¦å°Masterèç¹ kube-proxyå¼å¯ipvs ç§»é¤èç¹åéç¾¤",content:'# ä½¿ç¨ kubeadm éç½® Worker èç¹\n\n\n# æ¦è¿°\n\né¨ç½²workerèç¹ Kubernetes ç Worker èç¹è· Master èç¹å ä¹æ¯ç¸åçï¼å®ä»¬è¿è¡ççé½æ¯ä¸ä¸ª kubelet ç»ä»¶ãå¯ä¸çåºå«å¨äºï¼å¨ kubeadm init çè¿ç¨ä¸­ï¼kubelet å¯å¨åï¼Master èç¹ä¸è¿ä¼èªå¨è¿è¡ kube-apiserverãkube-schedulerãkube-controller-manger è¿ä¸ä¸ªç³»ç» Podã å¨ k8s-node1 å k8s-node2 ä¸åå«æ§è¡å¦ä¸å½ä»¤ï¼å°å¶æ³¨åå° Cluster ä¸­ï¼\n\n\n# å å¥éç¾¤\n\næ§è¡ä»¥ä¸å½ä»¤å°èç¹æ¥å¥éç¾¤\n\nkubeadm join 192.168.199.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:d7df0d887d0407995eb46df24d3481c5e9b6ffc13da97be7f5f685f3aca1d8e7 \n\n\nå¦ææ§è¡kubeadm initæ¶æ²¡æè®°å½ä¸å å¥éç¾¤çå½ä»¤ï¼å¯ä»¥éè¿ä»¥ä¸å½ä»¤éæ°åå»º kubeadm token create --print-join-command å¨k8s-node1ä¸æ§è¡kubeadm join ï¼\n\n[root@k8s-node1 ~]# kubeadm join 192.168.199.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:d7df0d887d0407995eb46df24d3481c5e9b6ffc13da97be7f5f685f3aca1d8e7 \nW0419 19:00:43.118672   32562 join.go:346] [preflight] WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.\n[preflight] Running pre-flight checks\n        [WARNING IsDockerSystemdCheck]: detected "cgroupfs" as the Docker cgroup driver. The recommended driver is "systemd". Please follow the guide at https://kubernetes.io/docs/setup/cri/\n[preflight] Reading configuration from the cluster...\n[preflight] FYI: You can look at this config file with \'kubectl -n kube-system get cm kubeadm-config -oyaml\'\n[kubelet-start] Downloading configuration for the kubelet from the "kubelet-config-1.18" ConfigMap in the kube-system namespace\n[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] Starting the kubelet\n[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun \'kubectl get nodes\' on the control-plane to see this node join the cluster.\n\n\néå¤æ§è¡ä»¥ä¸æä½å°k8s-node2ä¹å è¿å»ï¼æ³¨æéæ°æ§è¡kubeadm token create --print-join-commandï¼ã ç¶åæ ¹æ®æç¤ºï¼æä»¬å¯ä»¥éè¿ kubectl get nodes æ¥çèç¹çç¶æï¼\n\nè¯´æï¼\n\n * token\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç token ä¿¡æ¯\n   * å¯ä»¥éè¿ kubeadm token list å½ä»¤æå°åº token ä¿¡æ¯\n   * å¦æ token è¿æï¼å¯ä»¥ä½¿ç¨ kubeadm token create å½ä»¤åå»ºæ°ç token\n * discovery-token-ca-cert-hash\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç sha256 ä¿¡æ¯\n   * å¯ä»¥éè¿ openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2>/dev/null | openssl dgst -sha256 -hex | sed \'s/^.* //\' å½ä»¤æ¥ç sha256 ä¿¡æ¯\n\n\n# éªè¯æ¯å¦æå\n\nåå° master æå¡å¨,å¯ä»¥çå° node æåå å¥ master\n\n[centos@k8s-master ~]$ kubectl get nodes\nNAME         STATUS   ROLES    AGE     VERSION\nk8s-master   Ready    master   38m     v1.18.2\nk8s-node1    Ready    <none>   7m57s   v1.18.2\nk8s-node2    Ready    <none>   7m37s   v1.18.2\n\n\næç¤º\n\nå¦æ node èç¹å å¥ master æ¶éç½®æé®é¢å¯ä»¥å¨ node èç¹ä¸ä½¿ç¨ kubeadm reset éç½®éç½®åä½¿ç¨ kubeadm join å½ä»¤éæ°å å¥å³å¯ãå¸æå¨ master èç¹å é¤ node ï¼å¯ä»¥ä½¿ç¨ kubeadm delete nodes å é¤ã\n\nnodesç¶æå¨é¨ä¸ºreadyï¼ç±äºæ¯ä¸ªèç¹é½éè¦å¯å¨è¥å¹²ç»ä»¶ï¼å¦ænodeèç¹çç¶ææ¯ NotReadyï¼å¯ä»¥æ¥çææèç¹podç¶æï¼ç¡®ä¿ææpodæåæåå°éåå¹¶å¤äºrunningç¶æï¼\n\n[centos@k8s-master ~]$ kubectl get pod --all-namespaces -o wide\nNAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE   IP                NODE         NOMINATED NODE   READINESS GATES\nkube-system   calico-kube-controllers-555fc8cc5c-mcmst   1/1     Running   0          66m   10.244.235.193    k8s-master   <none>           <none>\nkube-system   calico-node-lh5j2                          1/1     Running   0          37m   192.168.199.102   k8s-node1    <none>           <none>\nkube-system   calico-node-s76tm                          1/1     Running   0          66m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   calico-node-wd4rj                          1/1     Running   0          36m   192.168.199.103   k8s-node2    <none>           <none>\nkube-system   coredns-7ff77c879f-h95kn                   1/1     Running   0          67m   10.244.235.195    k8s-master   <none>           <none>\nkube-system   coredns-7ff77c879f-lczbq                   1/1     Running   0          67m   10.244.235.194    k8s-master   <none>           <none>\nkube-system   etcd-k8s-master                            1/1     Running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-apiserver-k8s-master                  1/1     Running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-controller-manager-k8s-master         1/1     Running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-proxy-2kg9t                           1/1     Running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-proxy-7fkx9                           1/1     Running   0          36m   192.168.199.103   k8s-node2    <none>           <none>\nkube-system   kube-proxy-mcjc5                           1/1     Running   0          37m   192.168.199.102   k8s-node1    <none>           <none>\nkube-system   kube-scheduler-k8s-master                  1/1     Running   0          67m   192.168.199.101   k8s-master   <none>           <none>\n\n\nè¿æ¶ï¼ææçèç¹é½å·²ç» Readyï¼Kubernetes Cluster åå»ºæåï¼ä¸ååå¤å°±ç»ªã å¦æpodç¶æä¸ºPendingãContainerCreatingãImagePullBackOff é½è¡¨æ Pod æ²¡æå°±ç»ªï¼Running ææ¯å°±ç»ªç¶æã å¦ææpodæç¤ºInit:ImagePullBackOffï¼è¯´æè¿ä¸ªpodçéåå¨å¯¹åºèç¹ä¸æåå¤±è´¥ï¼æä»¬å¯ä»¥éè¿ kubectl describe pod æ¥ç Pod å·ä½æåµï¼ä»¥ç¡®è®¤æåå¤±è´¥çéåï¼\n\n[centos@k8s-master ~]$ kubectl describe pod calico-node-lh5j2 --namespace=kube-system\n......\nEvents:\n  Type     Reason     Age   From                Message\n  ----     ------     ----  ----                -------\n  Normal   Scheduled  42m   default-scheduler   Successfully assigned kube-system/calico-node-lh5j2 to k8s-node1\n  Normal   Pulling    42m   kubelet, k8s-node1  Pulling image "calico/cni:v3.13.2"\n  Normal   Pulled     37m   kubelet, k8s-node1  Successfully pulled image "calico/cni:v3.13.2"\n  Normal   Created    37m   kubelet, k8s-node1  Created container upgrade-ipam\n  Normal   Started    37m   kubelet, k8s-node1  Started container upgrade-ipam\n  Normal   Pulled     37m   kubelet, k8s-node1  Container image "calico/cni:v3.13.2" already present on machine\n  Normal   Created    37m   kubelet, k8s-node1  Created container install-cni\n  Normal   Started    37m   kubelet, k8s-node1  Started container install-cni\n  Normal   Pulling    37m   kubelet, k8s-node1  Pulling image "calico/pod2daemon-flexvol:v3.13.2"\n  Normal   Pulled     37m   kubelet, k8s-node1  Successfully pulled image "calico/pod2daemon-flexvol:v3.13.2"\n  Normal   Created    37m   kubelet, k8s-node1  Created container flexvol-driver\n  Normal   Started    37m   kubelet, k8s-node1  Started container flexvol-driver\n  Normal   Pulling    37m   kubelet, k8s-node1  Pulling image "calico/node:v3.13.2"\n  Normal   Pulled     33m   kubelet, k8s-node1  Successfully pulled image "calico/node:v3.13.2"\n  Normal   Created    33m   kubelet, k8s-node1  Created container calico-node\n  Normal   Started    33m   kubelet, k8s-node1  Started container calico-node\n  Warning  Unhealthy  33m   kubelet, k8s-node1  Readiness probe failed: calico/node is not ready: BIRD is not ready: BGP not established with 192.168.199.1032020-04-19 11:10:12.409 [INFO][168] health.go 156: Number of node(s) with BGP peering established = 1\n\n\næ¥çmasterèç¹ä¸è½½äºåªäºéå\n\n[centos@k8s-master ~]$  sudo docker images\nREPOSITORY                                                        TAG                 IMAGE ID            CREATED             SIZE\ncalico/pod2daemon-flexvol                                         v3.13.2             77a3fabf99a5        2 weeks ago         111MB\ncalico/cni                                                        v3.13.2             a89faaa1676a        2 weeks ago         224MB\ncalico/kube-controllers                                           v3.13.2             0c3bf0adad2b        2 weeks ago         56.6MB\ncalico/node                                                       v3.13.2             6f674c890b23        2 weeks ago         260MB\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.18.0             43940c34f24f        3 weeks ago         117MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.18.0             74060cea7f70        3 weeks ago         173MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.18.0             a31f78c7c8ce        3 weeks ago         95.3MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.0             d3e55153f52f        3 weeks ago         162MB\nregistry.aliyuncs.com/google_containers/pause                     3.2                 80d28bedfe5d        2 months ago        683kB\nregistry.aliyuncs.com/google_containers/coredns                   1.6.7               67da37a9a360        2 months ago        43.8MB\nregistry.aliyuncs.com/google_containers/etcd                      3.4.3-0             303ce5db0e90        5 months ago        288MB\n\n\næ¥çworkerèç¹ä¸è½½äºåªäºéåï¼\n\n[root@k8s-node1 ~]#  sudo docker images\nREPOSITORY                                                        TAG                 IMAGE ID            CREATED             SIZE\ncalico/pod2daemon-flexvol                                         v3.13.2             77a3fabf99a5        2 weeks ago         111MB\ncalico/cni                                                        v3.13.2             a89faaa1676a        2 weeks ago         224MB\ncalico/node                                                       v3.13.2             6f674c890b23        2 weeks ago         260MB\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.18.0             43940c34f24f        3 weeks ago         117MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.0             d3e55153f52f        3 weeks ago         162MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.18.0             a31f78c7c8ce        3 weeks ago         95.3MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.18.0             74060cea7f70        3 weeks ago         173MB\nregistry.aliyuncs.com/google_containers/pause                     3.2                 80d28bedfe5d        2 months ago        683kB\nregistry.aliyuncs.com/google_containers/coredns                   1.6.7               67da37a9a360        2 months ago        43.8MB\nregistry.aliyuncs.com/google_containers/etcd                      3.4.3-0             303ce5db0e90        5 months ago        288MB\n\n\n\n# æµè¯éç¾¤åä¸ªç»ä»¶\n\né¦åéªè¯kube-apiserver, kube-controller-manager, kube-scheduler, pod network æ¯å¦æ­£å¸¸ï¼ é¨ç½²ä¸ä¸ª Nginx Deploymentï¼åå«2ä¸ªPod åèï¼https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\n\n[centos@k8s-master ~]$ kubectl create deployment nginx --image=nginx:alpine\ndeployment.apps/nginx created\n[centos@k8s-master ~]$ kubectl scale deployment nginx --replicas=2\ndeployment.apps/nginx scaled\n\n\néªè¯Nginx Podæ¯å¦æ­£ç¡®è¿è¡ï¼å¹¶ä¸ä¼åé10.244.å¼å¤´çéç¾¤IP\n\n[centos@k8s-master ~]$ kubectl get pods -l app=nginx -o wide      \nNAME                     READY   STATUS    RESTARTS   AGE     IP               NODE        NOMINATED NODE   READINESS GATES\nnginx-745b4df97d-jb5f4   1/1     Running   0          3m10s   10.244.169.129   k8s-node2   <none>           <none>\nnginx-745b4df97d-zgdbr   1/1     Running   0          2m29s   10.244.36.65     k8s-node1   <none>           <none>\n\n\n\n# éªè¯kube-proxy\n\nä»¥ NodePort æ¹å¼å¯¹å¤æä¾æå¡ åèï¼https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/\n\n[centos@k8s-master ~]$ kubectl expose deployment nginx --port=80 --type=NodePort\nservice/nginx exposed\n[centos@k8s-master ~]$ kubectl get services nginx\nNAME    TYPE       CLUSTER-IP   EXTERNAL-IP   PORT(S)        AGE\nnginx   NodePort   10.97.5.8    <none>        80:32350/TCP   19s\n\n\nå¯ä»¥éè¿ä»»æ NodeIP:Port å¨éç¾¤å¤é¨è®¿é®è¿ä¸ªæå¡ï¼\n\n[centos@k8s-master ~]$ curl 192.168.199.101:32350\n[centos@k8s-master ~]$ curl 192.168.199.102:32350\n[centos@k8s-master ~]$ curl 192.168.199.103:32350\n\n\næåéªè¯ä¸ä¸dns, pod networkæ¯å¦æ­£å¸¸ï¼ è¿è¡Busyboxå¹¶è¿å¥äº¤äºæ¨¡å¼\n\n[centos@k8s-master ~]$ kubectl run -it curl --image=radial/busyboxplus:curl\nIf you don\'t see a command prompt, try pressing enter.\n\n\nè¾å¥nslookup nginxæ¥çæ¯å¦å¯ä»¥æ­£ç¡®è§£æåºéç¾¤åçIPï¼ä»¥éªè¯DNSæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ nslookup nginx\nServer:    10.96.0.10\nAddress 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local\n\nName:      nginx\nAddress 1: 10.97.5.8 nginx.default.svc.cluster.local\n\n\néè¿æå¡åè¿è¡è®¿é®ï¼éªè¯kube-proxyæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ curl http://nginx/\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n......\n</body>\n</html>\n# åå«è®¿é®ä¸ä¸2ä¸ªPodçåç½IPï¼éªè¯è·¨Nodeçç½ç»éä¿¡æ¯å¦æ­£å¸¸\n[ root@curl:/ ]$ curl 10.244.169.129\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n......\n</body>\n</html>\n[ root@curl:/ ]$ curl 10.244.36.65\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n......\n</body>\n</html>\n\n\n\n# åæ­¢æå¡\n\n[centos@k8s-master ~]$ kubectl delete deployment nginx\ndeployment.apps "nginx" deleted\n[centos@k8s-master ~]$ kubectl delete service nginx\nservice "nginx" deleted\n\n\n\n# Podè°åº¦å°Masterèç¹\n\nåºäºå®å¨èèï¼é»è®¤éç½®ä¸Kubernetesä¸ä¼å°Podè°åº¦å°Masterèç¹ãæ¥çTaintså­æ®µé»è®¤éç½®ï¼\n\n[centos@k8s-master ~]$ kubectl describe node k8s-master \n......\nTaints:             node-role.kubernetes.io/master:NoSchedule\n\n\nå¦æå¸æå°k8s-masterä¹å½ä½Nodeèç¹ä½¿ç¨ï¼å¯ä»¥æ§è¡å¦ä¸å½ä»¤,å¶ä¸­k8s-masteræ¯ä¸»æºèç¹hostnameï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master-\n\n\nä¿®æ¹åTaintså­æ®µç¶æï¼\n\n[centos@k8s-master ~]$ kubectl describe node k8s-master                             \n......\nTaints:             <none>\n\n\nå¦æè¦æ¢å¤Master Onlyç¶æï¼æ§è¡å¦ä¸å½ä»¤ï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master=:NoSchedule\n\n\n\n# kube-proxyå¼å¯ipvs\n\nä¿®æ¹ConfigMapçkube-system/kube-proxyä¸­çconfig.confï¼mode: âipvsâï¼\n\n[centos@k8s-master ~]$ kubectl edit cm kube-proxy -n kube-system\nconfigmap/kube-proxy edited\nä¹åéå¯åä¸ªèç¹ä¸çkube-proxy podï¼\n\n[centos@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy | awk \'{system("kubectl delete pod "$1" -n kube-system")}\'\npod "kube-proxy-2w9sh" deleted\npod "kube-proxy-gw4lx" deleted\npod "kube-proxy-thv4c" deleted\n[centos@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy\nkube-proxy-6qlgv                        1/1     Running   0          65s\nkube-proxy-fdtjd                        1/1     Running   0          47s\nkube-proxy-m8zkx                        1/1     Running   0          52s\n[centos@k8s-master ~]$\n\n\næ¥çæ¥å¿ï¼\n\n[centos@k8s-master ~]$ kubectl logs kube-proxy-6qlgv -n kube-system\nI1213 09:50:15.414493       1 server_others.go:189] Using ipvs Proxier.\nW1213 09:50:15.414908       1 proxier.go:365] IPVS scheduler not specified, use rr by default\nI1213 09:50:15.415021       1 server_others.go:216] Tearing down inactive rules.\nI1213 09:50:15.461658       1 server.go:464] Version: v1.13.0\nI1213 09:50:15.467827       1 conntrack.go:52] Setting nf_conntrack_max to 131072\nI1213 09:50:15.467997       1 config.go:202] Starting service config controller\nI1213 09:50:15.468010       1 controller_utils.go:1027] Waiting for caches to sync for service config controller\nI1213 09:50:15.468092       1 config.go:102] Starting endpoints config controller\nI1213 09:50:15.468100       1 controller_utils.go:1027] Waiting for caches to sync for endpoints config controller\nI1213 09:50:15.568766       1 controller_utils.go:1034] Caches are synced for endpoints config controller\nI1213 09:50:15.568950       1 controller_utils.go:1034] Caches are synced for service config controller\n[centos@k8s-master ~]$\n\n\næ¥å¿ä¸­æå°åºäºUsing ipvs Proxierï¼è¯´æipvsæ¨¡å¼å·²ç»å¼å¯ã\n\n\n# ç§»é¤èç¹åéç¾¤\n\nkuberneteséç¾¤ç§»é¤èç¹ï¼ä»¥ç§»é¤k8s-node2èç¹ä¸ºä¾ï¼å¨Masterèç¹ä¸è¿è¡ï¼\n\nkubectl drain k8s-node2 --delete-local-data --force --ignore-daemonsets\nkubectl delete node k8s-node2\n\n\nä¸é¢ä¸¤æ¡å½ä»¤æ§è¡å®æåï¼å¨k8s-node2èç¹æ§è¡æ¸çå½ä»¤ï¼éç½®kubeadmçå®è£ç¶æï¼\n\nkubeadm reset\n\n\nå¨masterä¸å é¤nodeå¹¶ä¸ä¼æ¸çk8s-node2è¿è¡çå®¹å¨ï¼éè¦å¨å é¤èç¹ä¸é¢æå¨è¿è¡æ¸çå½ä»¤ã å¦æä½ æ³éæ°éç½®éç¾¤ï¼ä½¿ç¨æ°çåæ°éæ°è¿è¡kubeadm initæèkubeadm joinå³å¯ã\n\nè³æ­¤3ä¸ªèç¹çéç¾¤æ­å»ºå®æï¼åç»­å¯ä»¥ç»§ç»­æ·»å nodeèç¹ï¼æèé¨ç½²dashboardãhelmåç®¡çå·¥å·ãEFKæ¥å¿ç³»ç»ãPrometheus Operatorçæ§ç³»ç»ãrook+cephå­å¨ç³»ç»ç­ç»ä»¶ã',normalizedContent:'# ä½¿ç¨ kubeadm éç½® worker èç¹\n\n\n# æ¦è¿°\n\né¨ç½²workerèç¹ kubernetes ç worker èç¹è· master èç¹å ä¹æ¯ç¸åçï¼å®ä»¬è¿è¡ççé½æ¯ä¸ä¸ª kubelet ç»ä»¶ãå¯ä¸çåºå«å¨äºï¼å¨ kubeadm init çè¿ç¨ä¸­ï¼kubelet å¯å¨åï¼master èç¹ä¸è¿ä¼èªå¨è¿è¡ kube-apiserverãkube-schedulerãkube-controller-manger è¿ä¸ä¸ªç³»ç» podã å¨ k8s-node1 å k8s-node2 ä¸åå«æ§è¡å¦ä¸å½ä»¤ï¼å°å¶æ³¨åå° cluster ä¸­ï¼\n\n\n# å å¥éç¾¤\n\næ§è¡ä»¥ä¸å½ä»¤å°èç¹æ¥å¥éç¾¤\n\nkubeadm join 192.168.199.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:d7df0d887d0407995eb46df24d3481c5e9b6ffc13da97be7f5f685f3aca1d8e7 \n\n\nå¦ææ§è¡kubeadm initæ¶æ²¡æè®°å½ä¸å å¥éç¾¤çå½ä»¤ï¼å¯ä»¥éè¿ä»¥ä¸å½ä»¤éæ°åå»º kubeadm token create --print-join-command å¨k8s-node1ä¸æ§è¡kubeadm join ï¼\n\n[root@k8s-node1 ~]# kubeadm join 192.168.199.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:d7df0d887d0407995eb46df24d3481c5e9b6ffc13da97be7f5f685f3aca1d8e7 \nw0419 19:00:43.118672   32562 join.go:346] [preflight] warning: joincontrolpane.controlplane settings will be ignored when control-plane flag is not set.\n[preflight] running pre-flight checks\n        [warning isdockersystemdcheck]: detected "cgroupfs" as the docker cgroup driver. the recommended driver is "systemd". please follow the guide at https://kubernetes.io/docs/setup/cri/\n[preflight] reading configuration from the cluster...\n[preflight] fyi: you can look at this config file with \'kubectl -n kube-system get cm kubeadm-config -oyaml\'\n[kubelet-start] downloading configuration for the kubelet from the "kubelet-config-1.18" configmap in the kube-system namespace\n[kubelet-start] writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] starting the kubelet\n[kubelet-start] waiting for the kubelet to perform the tls bootstrap...\n\nthis node has joined the cluster:\n* certificate signing request was sent to apiserver and a response was received.\n* the kubelet was informed of the new secure connection details.\n\nrun \'kubectl get nodes\' on the control-plane to see this node join the cluster.\n\n\néå¤æ§è¡ä»¥ä¸æä½å°k8s-node2ä¹å è¿å»ï¼æ³¨æéæ°æ§è¡kubeadm token create --print-join-commandï¼ã ç¶åæ ¹æ®æç¤ºï¼æä»¬å¯ä»¥éè¿ kubectl get nodes æ¥çèç¹çç¶æï¼\n\nè¯´æï¼\n\n * token\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç token ä¿¡æ¯\n   * å¯ä»¥éè¿ kubeadm token list å½ä»¤æå°åº token ä¿¡æ¯\n   * å¦æ token è¿æï¼å¯ä»¥ä½¿ç¨ kubeadm token create å½ä»¤åå»ºæ°ç token\n * discovery-token-ca-cert-hash\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç sha256 ä¿¡æ¯\n   * å¯ä»¥éè¿ openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2>/dev/null | openssl dgst -sha256 -hex | sed \'s/^.* //\' å½ä»¤æ¥ç sha256 ä¿¡æ¯\n\n\n# éªè¯æ¯å¦æå\n\nåå° master æå¡å¨,å¯ä»¥çå° node æåå å¥ master\n\n[centos@k8s-master ~]$ kubectl get nodes\nname         status   roles    age     version\nk8s-master   ready    master   38m     v1.18.2\nk8s-node1    ready    <none>   7m57s   v1.18.2\nk8s-node2    ready    <none>   7m37s   v1.18.2\n\n\næç¤º\n\nå¦æ node èç¹å å¥ master æ¶éç½®æé®é¢å¯ä»¥å¨ node èç¹ä¸ä½¿ç¨ kubeadm reset éç½®éç½®åä½¿ç¨ kubeadm join å½ä»¤éæ°å å¥å³å¯ãå¸æå¨ master èç¹å é¤ node ï¼å¯ä»¥ä½¿ç¨ kubeadm delete nodes å é¤ã\n\nnodesç¶æå¨é¨ä¸ºreadyï¼ç±äºæ¯ä¸ªèç¹é½éè¦å¯å¨è¥å¹²ç»ä»¶ï¼å¦ænodeèç¹çç¶ææ¯ notreadyï¼å¯ä»¥æ¥çææèç¹podç¶æï¼ç¡®ä¿ææpodæåæåå°éåå¹¶å¤äºrunningç¶æï¼\n\n[centos@k8s-master ~]$ kubectl get pod --all-namespaces -o wide\nnamespace     name                                       ready   status    restarts   age   ip                node         nominated node   readiness gates\nkube-system   calico-kube-controllers-555fc8cc5c-mcmst   1/1     running   0          66m   10.244.235.193    k8s-master   <none>           <none>\nkube-system   calico-node-lh5j2                          1/1     running   0          37m   192.168.199.102   k8s-node1    <none>           <none>\nkube-system   calico-node-s76tm                          1/1     running   0          66m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   calico-node-wd4rj                          1/1     running   0          36m   192.168.199.103   k8s-node2    <none>           <none>\nkube-system   coredns-7ff77c879f-h95kn                   1/1     running   0          67m   10.244.235.195    k8s-master   <none>           <none>\nkube-system   coredns-7ff77c879f-lczbq                   1/1     running   0          67m   10.244.235.194    k8s-master   <none>           <none>\nkube-system   etcd-k8s-master                            1/1     running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-apiserver-k8s-master                  1/1     running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-controller-manager-k8s-master         1/1     running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-proxy-2kg9t                           1/1     running   0          67m   192.168.199.101   k8s-master   <none>           <none>\nkube-system   kube-proxy-7fkx9                           1/1     running   0          36m   192.168.199.103   k8s-node2    <none>           <none>\nkube-system   kube-proxy-mcjc5                           1/1     running   0          37m   192.168.199.102   k8s-node1    <none>           <none>\nkube-system   kube-scheduler-k8s-master                  1/1     running   0          67m   192.168.199.101   k8s-master   <none>           <none>\n\n\nè¿æ¶ï¼ææçèç¹é½å·²ç» readyï¼kubernetes cluster åå»ºæåï¼ä¸ååå¤å°±ç»ªã å¦æpodç¶æä¸ºpendingãcontainercreatingãimagepullbackoff é½è¡¨æ pod æ²¡æå°±ç»ªï¼running ææ¯å°±ç»ªç¶æã å¦ææpodæç¤ºinit:imagepullbackoffï¼è¯´æè¿ä¸ªpodçéåå¨å¯¹åºèç¹ä¸æåå¤±è´¥ï¼æä»¬å¯ä»¥éè¿ kubectl describe pod æ¥ç pod å·ä½æåµï¼ä»¥ç¡®è®¤æåå¤±è´¥çéåï¼\n\n[centos@k8s-master ~]$ kubectl describe pod calico-node-lh5j2 --namespace=kube-system\n......\nevents:\n  type     reason     age   from                message\n  ----     ------     ----  ----                -------\n  normal   scheduled  42m   default-scheduler   successfully assigned kube-system/calico-node-lh5j2 to k8s-node1\n  normal   pulling    42m   kubelet, k8s-node1  pulling image "calico/cni:v3.13.2"\n  normal   pulled     37m   kubelet, k8s-node1  successfully pulled image "calico/cni:v3.13.2"\n  normal   created    37m   kubelet, k8s-node1  created container upgrade-ipam\n  normal   started    37m   kubelet, k8s-node1  started container upgrade-ipam\n  normal   pulled     37m   kubelet, k8s-node1  container image "calico/cni:v3.13.2" already present on machine\n  normal   created    37m   kubelet, k8s-node1  created container install-cni\n  normal   started    37m   kubelet, k8s-node1  started container install-cni\n  normal   pulling    37m   kubelet, k8s-node1  pulling image "calico/pod2daemon-flexvol:v3.13.2"\n  normal   pulled     37m   kubelet, k8s-node1  successfully pulled image "calico/pod2daemon-flexvol:v3.13.2"\n  normal   created    37m   kubelet, k8s-node1  created container flexvol-driver\n  normal   started    37m   kubelet, k8s-node1  started container flexvol-driver\n  normal   pulling    37m   kubelet, k8s-node1  pulling image "calico/node:v3.13.2"\n  normal   pulled     33m   kubelet, k8s-node1  successfully pulled image "calico/node:v3.13.2"\n  normal   created    33m   kubelet, k8s-node1  created container calico-node\n  normal   started    33m   kubelet, k8s-node1  started container calico-node\n  warning  unhealthy  33m   kubelet, k8s-node1  readiness probe failed: calico/node is not ready: bird is not ready: bgp not established with 192.168.199.1032020-04-19 11:10:12.409 [info][168] health.go 156: number of node(s) with bgp peering established = 1\n\n\næ¥çmasterèç¹ä¸è½½äºåªäºéå\n\n[centos@k8s-master ~]$  sudo docker images\nrepository                                                        tag                 image id            created             size\ncalico/pod2daemon-flexvol                                         v3.13.2             77a3fabf99a5        2 weeks ago         111mb\ncalico/cni                                                        v3.13.2             a89faaa1676a        2 weeks ago         224mb\ncalico/kube-controllers                                           v3.13.2             0c3bf0adad2b        2 weeks ago         56.6mb\ncalico/node                                                       v3.13.2             6f674c890b23        2 weeks ago         260mb\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.18.0             43940c34f24f        3 weeks ago         117mb\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.18.0             74060cea7f70        3 weeks ago         173mb\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.18.0             a31f78c7c8ce        3 weeks ago         95.3mb\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.0             d3e55153f52f        3 weeks ago         162mb\nregistry.aliyuncs.com/google_containers/pause                     3.2                 80d28bedfe5d        2 months ago        683kb\nregistry.aliyuncs.com/google_containers/coredns                   1.6.7               67da37a9a360        2 months ago        43.8mb\nregistry.aliyuncs.com/google_containers/etcd                      3.4.3-0             303ce5db0e90        5 months ago        288mb\n\n\næ¥çworkerèç¹ä¸è½½äºåªäºéåï¼\n\n[root@k8s-node1 ~]#  sudo docker images\nrepository                                                        tag                 image id            created             size\ncalico/pod2daemon-flexvol                                         v3.13.2             77a3fabf99a5        2 weeks ago         111mb\ncalico/cni                                                        v3.13.2             a89faaa1676a        2 weeks ago         224mb\ncalico/node                                                       v3.13.2             6f674c890b23        2 weeks ago         260mb\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.18.0             43940c34f24f        3 weeks ago         117mb\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.0             d3e55153f52f        3 weeks ago         162mb\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.18.0             a31f78c7c8ce        3 weeks ago         95.3mb\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.18.0             74060cea7f70        3 weeks ago         173mb\nregistry.aliyuncs.com/google_containers/pause                     3.2                 80d28bedfe5d        2 months ago        683kb\nregistry.aliyuncs.com/google_containers/coredns                   1.6.7               67da37a9a360        2 months ago        43.8mb\nregistry.aliyuncs.com/google_containers/etcd                      3.4.3-0             303ce5db0e90        5 months ago        288mb\n\n\n\n# æµè¯éç¾¤åä¸ªç»ä»¶\n\né¦åéªè¯kube-apiserver, kube-controller-manager, kube-scheduler, pod network æ¯å¦æ­£å¸¸ï¼ é¨ç½²ä¸ä¸ª nginx deploymentï¼åå«2ä¸ªpod åèï¼https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\n\n[centos@k8s-master ~]$ kubectl create deployment nginx --image=nginx:alpine\ndeployment.apps/nginx created\n[centos@k8s-master ~]$ kubectl scale deployment nginx --replicas=2\ndeployment.apps/nginx scaled\n\n\néªè¯nginx podæ¯å¦æ­£ç¡®è¿è¡ï¼å¹¶ä¸ä¼åé10.244.å¼å¤´çéç¾¤ip\n\n[centos@k8s-master ~]$ kubectl get pods -l app=nginx -o wide      \nname                     ready   status    restarts   age     ip               node        nominated node   readiness gates\nnginx-745b4df97d-jb5f4   1/1     running   0          3m10s   10.244.169.129   k8s-node2   <none>           <none>\nnginx-745b4df97d-zgdbr   1/1     running   0          2m29s   10.244.36.65     k8s-node1   <none>           <none>\n\n\n\n# éªè¯kube-proxy\n\nä»¥ nodeport æ¹å¼å¯¹å¤æä¾æå¡ åèï¼https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/\n\n[centos@k8s-master ~]$ kubectl expose deployment nginx --port=80 --type=nodeport\nservice/nginx exposed\n[centos@k8s-master ~]$ kubectl get services nginx\nname    type       cluster-ip   external-ip   port(s)        age\nnginx   nodeport   10.97.5.8    <none>        80:32350/tcp   19s\n\n\nå¯ä»¥éè¿ä»»æ nodeip:port å¨éç¾¤å¤é¨è®¿é®è¿ä¸ªæå¡ï¼\n\n[centos@k8s-master ~]$ curl 192.168.199.101:32350\n[centos@k8s-master ~]$ curl 192.168.199.102:32350\n[centos@k8s-master ~]$ curl 192.168.199.103:32350\n\n\næåéªè¯ä¸ä¸dns, pod networkæ¯å¦æ­£å¸¸ï¼ è¿è¡busyboxå¹¶è¿å¥äº¤äºæ¨¡å¼\n\n[centos@k8s-master ~]$ kubectl run -it curl --image=radial/busyboxplus:curl\nif you don\'t see a command prompt, try pressing enter.\n\n\nè¾å¥nslookup nginxæ¥çæ¯å¦å¯ä»¥æ­£ç¡®è§£æåºéç¾¤åçipï¼ä»¥éªè¯dnsæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ nslookup nginx\nserver:    10.96.0.10\naddress 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local\n\nname:      nginx\naddress 1: 10.97.5.8 nginx.default.svc.cluster.local\n\n\néè¿æå¡åè¿è¡è®¿é®ï¼éªè¯kube-proxyæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ curl http://nginx/\n<!doctype html>\n<html>\n<head>\n<title>welcome to nginx!</title>\n......\n</body>\n</html>\n# åå«è®¿é®ä¸ä¸2ä¸ªpodçåç½ipï¼éªè¯è·¨nodeçç½ç»éä¿¡æ¯å¦æ­£å¸¸\n[ root@curl:/ ]$ curl 10.244.169.129\n<!doctype html>\n<html>\n<head>\n<title>welcome to nginx!</title>\n......\n</body>\n</html>\n[ root@curl:/ ]$ curl 10.244.36.65\n<!doctype html>\n<html>\n<head>\n<title>welcome to nginx!</title>\n......\n</body>\n</html>\n\n\n\n# åæ­¢æå¡\n\n[centos@k8s-master ~]$ kubectl delete deployment nginx\ndeployment.apps "nginx" deleted\n[centos@k8s-master ~]$ kubectl delete service nginx\nservice "nginx" deleted\n\n\n\n# podè°åº¦å°masterèç¹\n\nåºäºå®å¨èèï¼é»è®¤éç½®ä¸kubernetesä¸ä¼å°podè°åº¦å°masterèç¹ãæ¥çtaintså­æ®µé»è®¤éç½®ï¼\n\n[centos@k8s-master ~]$ kubectl describe node k8s-master \n......\ntaints:             node-role.kubernetes.io/master:noschedule\n\n\nå¦æå¸æå°k8s-masterä¹å½ä½nodeèç¹ä½¿ç¨ï¼å¯ä»¥æ§è¡å¦ä¸å½ä»¤,å¶ä¸­k8s-masteræ¯ä¸»æºèç¹hostnameï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master-\n\n\nä¿®æ¹åtaintså­æ®µç¶æï¼\n\n[centos@k8s-master ~]$ kubectl describe node k8s-master                             \n......\ntaints:             <none>\n\n\nå¦æè¦æ¢å¤master onlyç¶æï¼æ§è¡å¦ä¸å½ä»¤ï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master=:noschedule\n\n\n\n# kube-proxyå¼å¯ipvs\n\nä¿®æ¹configmapçkube-system/kube-proxyä¸­çconfig.confï¼mode: âipvsâï¼\n\n[centos@k8s-master ~]$ kubectl edit cm kube-proxy -n kube-system\nconfigmap/kube-proxy edited\nä¹åéå¯åä¸ªèç¹ä¸çkube-proxy podï¼\n\n[centos@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy | awk \'{system("kubectl delete pod "$1" -n kube-system")}\'\npod "kube-proxy-2w9sh" deleted\npod "kube-proxy-gw4lx" deleted\npod "kube-proxy-thv4c" deleted\n[centos@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy\nkube-proxy-6qlgv                        1/1     running   0          65s\nkube-proxy-fdtjd                        1/1     running   0          47s\nkube-proxy-m8zkx                        1/1     running   0          52s\n[centos@k8s-master ~]$\n\n\næ¥çæ¥å¿ï¼\n\n[centos@k8s-master ~]$ kubectl logs kube-proxy-6qlgv -n kube-system\ni1213 09:50:15.414493       1 server_others.go:189] using ipvs proxier.\nw1213 09:50:15.414908       1 proxier.go:365] ipvs scheduler not specified, use rr by default\ni1213 09:50:15.415021       1 server_others.go:216] tearing down inactive rules.\ni1213 09:50:15.461658       1 server.go:464] version: v1.13.0\ni1213 09:50:15.467827       1 conntrack.go:52] setting nf_conntrack_max to 131072\ni1213 09:50:15.467997       1 config.go:202] starting service config controller\ni1213 09:50:15.468010       1 controller_utils.go:1027] waiting for caches to sync for service config controller\ni1213 09:50:15.468092       1 config.go:102] starting endpoints config controller\ni1213 09:50:15.468100       1 controller_utils.go:1027] waiting for caches to sync for endpoints config controller\ni1213 09:50:15.568766       1 controller_utils.go:1034] caches are synced for endpoints config controller\ni1213 09:50:15.568950       1 controller_utils.go:1034] caches are synced for service config controller\n[centos@k8s-master ~]$\n\n\næ¥å¿ä¸­æå°åºäºusing ipvs proxierï¼è¯´æipvsæ¨¡å¼å·²ç»å¼å¯ã\n\n\n# ç§»é¤èç¹åéç¾¤\n\nkuberneteséç¾¤ç§»é¤èç¹ï¼ä»¥ç§»é¤k8s-node2èç¹ä¸ºä¾ï¼å¨masterèç¹ä¸è¿è¡ï¼\n\nkubectl drain k8s-node2 --delete-local-data --force --ignore-daemonsets\nkubectl delete node k8s-node2\n\n\nä¸é¢ä¸¤æ¡å½ä»¤æ§è¡å®æåï¼å¨k8s-node2èç¹æ§è¡æ¸çå½ä»¤ï¼éç½®kubeadmçå®è£ç¶æï¼\n\nkubeadm reset\n\n\nå¨masterä¸å é¤nodeå¹¶ä¸ä¼æ¸çk8s-node2è¿è¡çå®¹å¨ï¼éè¦å¨å é¤èç¹ä¸é¢æå¨è¿è¡æ¸çå½ä»¤ã å¦æä½ æ³éæ°éç½®éç¾¤ï¼ä½¿ç¨æ°çåæ°éæ°è¿è¡kubeadm initæèkubeadm joinå³å¯ã\n\nè³æ­¤3ä¸ªèç¹çéç¾¤æ­å»ºå®æï¼åç»­å¯ä»¥ç»§ç»­æ·»å nodeèç¹ï¼æèé¨ç½²dashboardãhelmåç®¡çå·¥å·ãefkæ¥å¿ç³»ç»ãprometheus operatorçæ§ç³»ç»ãrook+cephå­å¨ç³»ç»ç­ç»ä»¶ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:50:39",lastUpdatedTimestamp:1644378639e3},{title:"æ¦å¿µæ»ç»",frontmatter:{title:"æ¦å¿µæ»ç»",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/f4b696/"},regularPath:"/18.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/09.%E6%A6%82%E5%BF%B5%E6%80%BB%E7%BB%93.html",relativePath:"18.Kubernetes/01.Kubernetes å¥é¨/09.æ¦å¿µæ»ç».md",key:"v-7e4ade2c",path:"/pages/f4b696/",headers:[{level:2,title:"ä»ä¹æ¯ Kubernetes",slug:"ä»ä¹æ¯-kubernetes",normalizedTitle:"ä»ä¹æ¯ kubernetes",charIndex:11},{level:2,title:"Kubernetes Master",slug:"kubernetes-master",normalizedTitle:"kubernetes master",charIndex:756},{level:2,title:"Kubernetes Node",slug:"kubernetes-node",normalizedTitle:"kubernetes node",charIndex:865},{level:2,title:"Kubernetes æ¶æ",slug:"kubernetes-æ¶æ",normalizedTitle:"kubernetes æ¶æ",charIndex:1538}],headersStr:"ä»ä¹æ¯ Kubernetes Kubernetes Master Kubernetes Node Kubernetes æ¶æ",content:"# æ¦å¿µæ»ç»\n\n\n# ä»ä¹æ¯ Kubernetes\n\nKubernetes æ¯ä¸ä¸ªå¼æºç Docker å®¹å¨ç¼æç³»ç»ï¼å®å¯ä»¥è°åº¦è®¡ç®éç¾¤çèç¹ï¼å¨æç®¡çä¸é¢çä½ä¸ï¼ä¿è¯å®ä»¬æç¨æ·ææçç¶æè¿è¡ãéè¿ä½¿ç¨ãlabelsãåãpodsãçæ¦å¿µï¼Kubernetes å°åºç¨æé»è¾ååè¿è¡åç»ï¼æ¹ä¾¿ç®¡çåæå¡åç°ã\n\n\n\n * podsï¼ æ¯ä¸ç»ç´§å¯å³èçå®¹å¨éåï¼å®ä»¬å±äº« IPC(è¿ç¨é´éä¿¡)ãNetwork(ç½ç») å UTS namespace(UTS å½åç©ºé´æ¯ Linux å½åç©ºé´çä¸ä¸ªå­ç³»ç»ï¼ä¸»è¦ä½ç¨æ¯å®æå¯¹å®¹å¨ Hostname å Domain çéç¦»ï¼åæ¶ä¿å­åæ ¸åç§°ãçæ¬ãä»¥ååºå±ä½ç³»ç»æç±»åç­ä¿¡æ¯)ï¼æ¯ Kubernetes è°åº¦çåºæ¬åä½ã\n * labelsï¼ é®å¼å¯¹(key/value)æ ç­¾ï¼å¯ä»¥è¢«å³èå°å¦ Pod è¿æ ·çå¯¹è±¡ä¸ï¼ä¸»è¦ä½ç¨æ¯ç»ç¨æ·ä¸ä¸ªç´è§çæåï¼æ¯å¦è¿ä¸ª Pod æ¯ç¨æ¥æ¾ç½®æ°æ®åºç\n * GUIï¼ ç¨æ·å¾å½¢çé¢ï¼å¯ä»¥æ¯ Web ç¨æ·çé¢ï¼æ¯å¦ä½¿ç¨ kubernetes-dashboard ç»ä»¶ï¼ç¨æ·å¯ä»¥éè¿ Dashboard å¨ Kubernetes éç¾¤ä¸­é¨ç½²å®¹å¨åçåºç¨ï¼å¯ä»¥æ¥çéç¾¤ä¸­åºç¨çè¿è¡æåµï¼åæ¶ä¹è½å¤åºäº Dashboard åå»ºæä¿®æ¹é¨ç½²ãä»»å¡ãæå¡ç­ Kubernetes çèµæºãéè¿é¨ç½²åå¯¼ï¼ç¨æ·è½å¤å¯¹é¨ç½²è¿è¡æ©ç¼©å®¹ï¼è¿è¡æ»å¨æ´æ°ãéå¯ Pod åé¨ç½²æ°åºç¨ãå½ç¶ï¼éè¿ Dashboard ä¹è½å¤æ¥ç Kubernetes èµæºçç¶æ\n * kubectlï¼ ç¨äºç®¡ç Kubernetes éç¾¤çå½ä»¤è¡å·¥å·\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãAPI æ³¨åååç°ç­æºå¶\n * Kubernetes Masterï¼ Kubernetes éç¾¤ä¸»èç¹ï¼ä¸»è¦ç± kube-apiserverãkube-schedulerãkube-controller-managerãetcd åä¸ªæ¨¡åç»æ\n * Kubernetes Nodeï¼ Kubernetes éç¾¤å­èç¹ï¼ä¸»è¦ç± kubeletãkube-proxyãruntime ä¸ä¸ªæ¨¡åç»æ\n * Image Registryï¼ éåä»åºï¼æ¯å¦ï¼Ducker HUB æ Docker ç§æ\n\n\n# Kubernetes Master\n\n\n\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãAPI æ³¨åååç°ç­æºå¶\n * kube-schedulerï¼ è´è´£èµæºçè°åº¦ï¼æç§é¢å®çè°åº¦ç­ç¥å° Pod è°åº¦å°ç¸åºçæºå¨ä¸\n * kube-controller-managerï¼ è´è´£ç»´æ¤éç¾¤çç¶æï¼æ¯å¦æéæ£æµãèªå¨æ©å±ãæ»å¨æ´æ°ç­\n * etcdï¼ CoreOS åºäº Raft å¼åçåå¸å¼ key-value å­å¨ï¼å¯ç¨äºæå¡åç°ãå±äº«éç½®ä»¥åä¸è´æ§ä¿éï¼å¦æ°æ®åºéä¸»ãåå¸å¼éç­ï¼\n\n\n# Kubernetes Node\n\n\n\n * runtimeï¼ è´è´£éåç®¡çä»¥å Pod åå®¹å¨ççæ­£è¿è¡ï¼CRIï¼Container Runtime Interfaceï¼ï¼é»è®¤çå®¹å¨è¿è¡æ¶ä¸º Dockerï¼è¿æ¯æ RKT å®¹å¨\n * kubeletï¼ è´è´£ç»´æå®¹å¨ççå½å¨æï¼åæ¶ä¹è´è´£ Volumeï¼CVIï¼Container Volume Interfaceï¼åç½ç»ï¼CNIï¼Container Network Interfaceï¼çç®¡ç\n * kube-proxyï¼ è´è´£ä¸º Service æä¾ cluster åé¨çæå¡åç°åè´è½½åè¡¡\n\n\n# Kubernetes æ¶æ\n\n\n\n",normalizedContent:"# æ¦å¿µæ»ç»\n\n\n# ä»ä¹æ¯ kubernetes\n\nkubernetes æ¯ä¸ä¸ªå¼æºç docker å®¹å¨ç¼æç³»ç»ï¼å®å¯ä»¥è°åº¦è®¡ç®éç¾¤çèç¹ï¼å¨æç®¡çä¸é¢çä½ä¸ï¼ä¿è¯å®ä»¬æç¨æ·ææçç¶æè¿è¡ãéè¿ä½¿ç¨ãlabelsãåãpodsãçæ¦å¿µï¼kubernetes å°åºç¨æé»è¾ååè¿è¡åç»ï¼æ¹ä¾¿ç®¡çåæå¡åç°ã\n\n\n\n * podsï¼ æ¯ä¸ç»ç´§å¯å³èçå®¹å¨éåï¼å®ä»¬å±äº« ipc(è¿ç¨é´éä¿¡)ãnetwork(ç½ç») å uts namespace(uts å½åç©ºé´æ¯ linux å½åç©ºé´çä¸ä¸ªå­ç³»ç»ï¼ä¸»è¦ä½ç¨æ¯å®æå¯¹å®¹å¨ hostname å domain çéç¦»ï¼åæ¶ä¿å­åæ ¸åç§°ãçæ¬ãä»¥ååºå±ä½ç³»ç»æç±»åç­ä¿¡æ¯)ï¼æ¯ kubernetes è°åº¦çåºæ¬åä½ã\n * labelsï¼ é®å¼å¯¹(key/value)æ ç­¾ï¼å¯ä»¥è¢«å³èå°å¦ pod è¿æ ·çå¯¹è±¡ä¸ï¼ä¸»è¦ä½ç¨æ¯ç»ç¨æ·ä¸ä¸ªç´è§çæåï¼æ¯å¦è¿ä¸ª pod æ¯ç¨æ¥æ¾ç½®æ°æ®åºç\n * guiï¼ ç¨æ·å¾å½¢çé¢ï¼å¯ä»¥æ¯ web ç¨æ·çé¢ï¼æ¯å¦ä½¿ç¨ kubernetes-dashboard ç»ä»¶ï¼ç¨æ·å¯ä»¥éè¿ dashboard å¨ kubernetes éç¾¤ä¸­é¨ç½²å®¹å¨åçåºç¨ï¼å¯ä»¥æ¥çéç¾¤ä¸­åºç¨çè¿è¡æåµï¼åæ¶ä¹è½å¤åºäº dashboard åå»ºæä¿®æ¹é¨ç½²ãä»»å¡ãæå¡ç­ kubernetes çèµæºãéè¿é¨ç½²åå¯¼ï¼ç¨æ·è½å¤å¯¹é¨ç½²è¿è¡æ©ç¼©å®¹ï¼è¿è¡æ»å¨æ´æ°ãéå¯ pod åé¨ç½²æ°åºç¨ãå½ç¶ï¼éè¿ dashboard ä¹è½å¤æ¥ç kubernetes èµæºçç¶æ\n * kubectlï¼ ç¨äºç®¡ç kubernetes éç¾¤çå½ä»¤è¡å·¥å·\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãapi æ³¨åååç°ç­æºå¶\n * kubernetes masterï¼ kubernetes éç¾¤ä¸»èç¹ï¼ä¸»è¦ç± kube-apiserverãkube-schedulerãkube-controller-managerãetcd åä¸ªæ¨¡åç»æ\n * kubernetes nodeï¼ kubernetes éç¾¤å­èç¹ï¼ä¸»è¦ç± kubeletãkube-proxyãruntime ä¸ä¸ªæ¨¡åç»æ\n * image registryï¼ éåä»åºï¼æ¯å¦ï¼ducker hub æ docker ç§æ\n\n\n# kubernetes master\n\n\n\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãapi æ³¨åååç°ç­æºå¶\n * kube-schedulerï¼ è´è´£èµæºçè°åº¦ï¼æç§é¢å®çè°åº¦ç­ç¥å° pod è°åº¦å°ç¸åºçæºå¨ä¸\n * kube-controller-managerï¼ è´è´£ç»´æ¤éç¾¤çç¶æï¼æ¯å¦æéæ£æµãèªå¨æ©å±ãæ»å¨æ´æ°ç­\n * etcdï¼ coreos åºäº raft å¼åçåå¸å¼ key-value å­å¨ï¼å¯ç¨äºæå¡åç°ãå±äº«éç½®ä»¥åä¸è´æ§ä¿éï¼å¦æ°æ®åºéä¸»ãåå¸å¼éç­ï¼\n\n\n# kubernetes node\n\n\n\n * runtimeï¼ è´è´£éåç®¡çä»¥å pod åå®¹å¨ççæ­£è¿è¡ï¼criï¼container runtime interfaceï¼ï¼é»è®¤çå®¹å¨è¿è¡æ¶ä¸º dockerï¼è¿æ¯æ rkt å®¹å¨\n * kubeletï¼ è´è´£ç»´æå®¹å¨ççå½å¨æï¼åæ¶ä¹è´è´£ volumeï¼cviï¼container volume interfaceï¼åç½ç»ï¼cniï¼container network interfaceï¼çç®¡ç\n * kube-proxyï¼ è´è´£ä¸º service æä¾ cluster åé¨çæå¡åç°åè´è½½åè¡¡\n\n\n# kubernetes æ¶æ\n\n\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Kubernetes Dashboard",frontmatter:{title:"Kubernetes Dashboard",date:"2022-02-09T11:48:30.000Z",permalink:"/pages/e68987/"},regularPath:"/18.Kubernetes/02.Kubernetes%20%E5%AE%9E%E8%B7%B5/01.Kubernetes%20Dashboard.html",relativePath:"18.Kubernetes/02.Kubernetes å®è·µ/01.Kubernetes Dashboard.md",key:"v-61b52e07",path:"/pages/e68987/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:27},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:88},{level:2,title:"è®¿é®",slug:"è®¿é®",normalizedTitle:"è®¿é®",charIndex:1785},{level:2,title:"ç»å½",slug:"ç»å½",normalizedTitle:"ç»å½",charIndex:2312}],headersStr:"æ¦è¿° å®è£ è®¿é® ç»å½",content:'# Kubernetes Dashboard\n\n\n# æ¦è¿°\n\nKubernetes Dashboard æ¯ Kubernetes éç¾¤ç Web UIï¼ç¨äºç®¡çéç¾¤ã\n\n\n# å®è£\n\nGitHub å°åï¼Kubernetes Dashboard\n\nä¸è½½éç½®æä»¶\n\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yaml\n\n\nä¿®æ¹éç½®å¦ä¸\n\n# çç¥é¨åä»£ç ...\n\n# ------------------- Dashboard Deployment ------------------- #\n\nkind: Deployment\napiVersion: apps/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kube-system\nspec:\n  replicas: 1\n  revisionHistoryLimit: 10\n  selector:\n    matchLabels:\n      k8s-app: kubernetes-dashboard\n  template:\n    metadata:\n      labels:\n        k8s-app: kubernetes-dashboard\n    spec:\n      containers:\n      - name: kubernetes-dashboard\n        # ä¿®æ¹éåå°åä¸ºé¿éäº\n        image: registry.aliyuncs.com/google_containers/dashboard:v2.5.0\n        ports:\n        - containerPort: 8443\n          protocol: TCP\n        args:\n          - --auto-generate-certificates\n        volumeMounts:\n        - name: kubernetes-dashboard-certs\n          mountPath: /certs\n        - mountPath: /tmp\n          name: tmp-volume\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /\n            port: 8443\n          initialDelaySeconds: 30\n          timeoutSeconds: 30\n      volumes:\n      - name: kubernetes-dashboard-certs\n        secret:\n          secretName: kubernetes-dashboard-certs\n      - name: tmp-volume\n        emptyDir: {}\n      serviceAccountName: kubernetes-dashboard\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        effect: NoSchedule\n\n---\n# ------------------- Dashboard Service ------------------- #\n\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kube-system\nspec:\n  # ä¿®æ¹ç±»åä¸º NodePort è®¿é®\n  type: NodePort\n  ports:\n    - port: 443\n      targetPort: 8443\n      # è®¾ç½®ç«¯å£å·ä¸º 30001\n      nodePort: 30001\n  selector:\n    k8s-app: kubernetes-dashboard\n\n\né¨ç½²å°éç¾¤\n\n# é¨ç½²\nkubectl apply -f kubernetes-dashboard.yaml\n\n# æ¥ç\nkubectl -n kubernetes-dashboard get pods\nkubectl -n kubernetes-dashboard get service kubernetes-dashboard\nkubectl -n kubernetes-dashboard describe service kubernetes-dashboard\n\n\n\n# è®¿é®\n\néè¦ä½¿ç¨ NodeIP:30001 è®¿é® Dashboardï¼å ä¸ºè¯ä¹¦åå é¤ç«çæµè§å¨å¤å¶å®æµè§å¨æ æ³ç´æ¥æå¼é¡µé¢\n\nChrome æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nFirefox æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nç¹å» æ¥åé£é©å¹¶ç»§ç»­ å³å¯æ¾ç¤ºæ¬¢è¿çé¢\n\n\n\n\n# ç»å½\n\næä»¬éç¨ Token æ¹å¼ç»å½\n\n * åå»ºç»å½è´¦å·ï¼åå»ºä¸ä¸ªåä¸º dashboard-adminuser.yaml çéç½®æä»¶\n\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\n\n\nkubectl apply -f dashboard-adminuser.yaml\n\n\n * ç°å¨æä»¬éè¦æ¾å°å¯ä»¥ç¨æ¥ç»å½çä»¤çãæ§è¡ä»¥ä¸å½ä»¤ï¼\n\nkubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath="{.secrets[0].name}") -o go-template="{{.data.token | base64decode}}"\n\n\nå®åºè¯¥æå°å¦ä¸åå®¹ï¼\n\neyJhbGciOiJSUzI1NiIsImtpZCI6IkQ5NmxnbUlWcENuMFJDYzM1ZDYxSFI2ZF9BRXYwaVVFUENfYTlBU2swVEkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLTUyODJoIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI3NGJkNjk4MC1kMzcwLTQzN2ItYjE3Zi03NmQ3MmViZTk3NTMiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.XjU01lmdwtRfQbcTcK2BUgRpZOgYlz44qJkoRKAqkQFj2lEFyGwRFCz2oaHD_1fTWH6Q9NetAHrkaRPrt9D0JMrEKnGtiH2wqcuXkleIMx51tmpHsjDxJa_B7C3AD2rDfxyr1DpKmp8vIAx276loAO5ke0ggbGYOHlopLZzcahQhAjvIJtb6U15eZ76VAoxsTYq0CU3J_cgydH56_KYZQ76wI3qnjLf2fuQHvryMLV9UhHBqLLYn3jH24Kqye5TOuIEG9gL5vA3cLbv5fLGFAkZp7T4qEQhlULs1P9W0JEV7u7N9nqXqSvteoGP-HE5l3DwizaCig8hkhKLeB3dx4g\n\n\n * å° Token è¾å¥æµè§å¨ï¼æåç»éåææå¦ä¸\n\n',normalizedContent:'# kubernetes dashboard\n\n\n# æ¦è¿°\n\nkubernetes dashboard æ¯ kubernetes éç¾¤ç web uiï¼ç¨äºç®¡çéç¾¤ã\n\n\n# å®è£\n\ngithub å°åï¼kubernetes dashboard\n\nä¸è½½éç½®æä»¶\n\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yaml\n\n\nä¿®æ¹éç½®å¦ä¸\n\n# çç¥é¨åä»£ç ...\n\n# ------------------- dashboard deployment ------------------- #\n\nkind: deployment\napiversion: apps/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kube-system\nspec:\n  replicas: 1\n  revisionhistorylimit: 10\n  selector:\n    matchlabels:\n      k8s-app: kubernetes-dashboard\n  template:\n    metadata:\n      labels:\n        k8s-app: kubernetes-dashboard\n    spec:\n      containers:\n      - name: kubernetes-dashboard\n        # ä¿®æ¹éåå°åä¸ºé¿éäº\n        image: registry.aliyuncs.com/google_containers/dashboard:v2.5.0\n        ports:\n        - containerport: 8443\n          protocol: tcp\n        args:\n          - --auto-generate-certificates\n        volumemounts:\n        - name: kubernetes-dashboard-certs\n          mountpath: /certs\n        - mountpath: /tmp\n          name: tmp-volume\n        livenessprobe:\n          httpget:\n            scheme: https\n            path: /\n            port: 8443\n          initialdelayseconds: 30\n          timeoutseconds: 30\n      volumes:\n      - name: kubernetes-dashboard-certs\n        secret:\n          secretname: kubernetes-dashboard-certs\n      - name: tmp-volume\n        emptydir: {}\n      serviceaccountname: kubernetes-dashboard\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        effect: noschedule\n\n---\n# ------------------- dashboard service ------------------- #\n\nkind: service\napiversion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kube-system\nspec:\n  # ä¿®æ¹ç±»åä¸º nodeport è®¿é®\n  type: nodeport\n  ports:\n    - port: 443\n      targetport: 8443\n      # è®¾ç½®ç«¯å£å·ä¸º 30001\n      nodeport: 30001\n  selector:\n    k8s-app: kubernetes-dashboard\n\n\né¨ç½²å°éç¾¤\n\n# é¨ç½²\nkubectl apply -f kubernetes-dashboard.yaml\n\n# æ¥ç\nkubectl -n kubernetes-dashboard get pods\nkubectl -n kubernetes-dashboard get service kubernetes-dashboard\nkubectl -n kubernetes-dashboard describe service kubernetes-dashboard\n\n\n\n# è®¿é®\n\néè¦ä½¿ç¨ nodeip:30001 è®¿é® dashboardï¼å ä¸ºè¯ä¹¦åå é¤ç«çæµè§å¨å¤å¶å®æµè§å¨æ æ³ç´æ¥æå¼é¡µé¢\n\nchrome æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nfirefox æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nç¹å» æ¥åé£é©å¹¶ç»§ç»­ å³å¯æ¾ç¤ºæ¬¢è¿çé¢\n\n\n\n\n# ç»å½\n\næä»¬éç¨ token æ¹å¼ç»å½\n\n * åå»ºç»å½è´¦å·ï¼åå»ºä¸ä¸ªåä¸º dashboard-adminuser.yaml çéç½®æä»¶\n\napiversion: v1\nkind: serviceaccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiversion: rbac.authorization.k8s.io/v1\nkind: clusterrolebinding\nmetadata:\n  name: admin-user\nroleref:\n  apigroup: rbac.authorization.k8s.io\n  kind: clusterrole\n  name: cluster-admin\nsubjects:\n- kind: serviceaccount\n  name: admin-user\n  namespace: kubernetes-dashboard\n\n\nkubectl apply -f dashboard-adminuser.yaml\n\n\n * ç°å¨æä»¬éè¦æ¾å°å¯ä»¥ç¨æ¥ç»å½çä»¤çãæ§è¡ä»¥ä¸å½ä»¤ï¼\n\nkubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath="{.secrets[0].name}") -o go-template="{{.data.token | base64decode}}"\n\n\nå®åºè¯¥æå°å¦ä¸åå®¹ï¼\n\neyjhbgcioijsuzi1niisimtpzci6ikq5nmxnbulwcenumfjdyzm1zdyxsfi2zf9brxywavvfuenfytlbu2swvekifq.eyjpc3mioijrdwjlcm5ldgvzl3nlcnzpy2vhy2nvdw50iiwia3vizxjuzxrlcy5pby9zzxj2awnlywnjb3vudc9uyw1lc3bhy2uioijrdwjlcm5ldgvzlwrhc2hib2fyzcisimt1ymvybmv0zxmuaw8vc2vydmljzwfjy291bnqvc2vjcmv0lm5hbwuioijhzg1pbi11c2vylxrva2vultuyodjoiiwia3vizxjuzxrlcy5pby9zzxj2awnlywnjb3vudc9zzxj2awnllwfjy291bnqubmftzsi6imfkbwlulxvzzxiilcjrdwjlcm5ldgvzlmlvl3nlcnzpy2vhy2nvdw50l3nlcnzpy2utywnjb3vudc51awqioii3ngjknjk4mc1kmzcwltqzn2ityje3zi03nmq3mmviztk3ntmilcjzdwiioijzexn0zw06c2vydmljzwfjy291bnq6a3vizxjuzxrlcy1kyxnoym9hcmq6ywrtaw4tdxnlcij9.xju01lmdwtrfqbctck2bugrpzogylz44qjkorkaqkqfj2lefygwrfcz2oahd_1ftwh6q9netahrkarprt9d0jmrekngtih2wqcuxkleimx51tmphsjdxja_b7c3ad2rdfxyr1dpkmp8viax276loao5ke0ggbgyohloplzzcahqhajvijtb6u15ez76vaoxstyq0cu3j_cgydh56_kyzq76wi3qnjlf2fuqhvrymlv9uhhbqllyn3jh24kqye5touieg9gl5va3clbv5flgfakzp7t4qeqhluls1p9w0jev7u7n9nqxqsvteogp-he5l3dwizacig8hkhkleb3dx4g\n\n\n * å° token è¾å¥æµè§å¨ï¼æåç»éåææå¦ä¸\n\n',charsets:{cjk:!0},lastUpdated:"2022/03/01, 13:42:47",lastUpdatedTimestamp:1646113367e3},{title:"NFS é«å¯ç¨æ¹æ¡",frontmatter:{title:"NFS é«å¯ç¨æ¹æ¡",date:"2022-03-01T13:55:00.000Z",permalink:"/pages/1b012a/"},regularPath:"/18.Kubernetes/02.Kubernetes%20%E5%AE%9E%E8%B7%B5/02.NFS%20%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88.html",relativePath:"18.Kubernetes/02.Kubernetes å®è·µ/02.NFS é«å¯ç¨æ¹æ¡.md",key:"v-88106b62",path:"/pages/1b012a/",headers:[{level:2,title:"å®è£ç¯å¢",slug:"å®è£ç¯å¢",normalizedTitle:"å®è£ç¯å¢",charIndex:107},{level:2,title:"åå¤å·¥ä½",slug:"åå¤å·¥ä½",normalizedTitle:"åå¤å·¥ä½",charIndex:115},{level:2,title:"å®è£ NFS",slug:"å®è£-nfs",normalizedTitle:"å®è£ nfs",charIndex:123},{level:2,title:"æµè¯ NFS",slug:"æµè¯-nfs",normalizedTitle:"æµè¯ nfs",charIndex:133},{level:2,title:"å¨ Slave è¿è¡åæ­¥ Master æ°æ®",slug:"å¨-slave-è¿è¡åæ­¥-master-æ°æ®",normalizedTitle:"å¨ slave è¿è¡åæ­¥ master æ°æ®",charIndex:143},{level:2,title:"å¨ Master è¿è¡åæ­¥ Slave æ°æ®",slug:"å¨-master-è¿è¡åæ­¥-slave-æ°æ®",normalizedTitle:"å¨ master è¿è¡åæ­¥ slave æ°æ®",charIndex:169},{level:2,title:"Masterå®è£ Keepalived",slug:"masterå®è£-keepalived",normalizedTitle:"masterå®è£ keepalived",charIndex:195},{level:2,title:"Slaveå®è£ Keepalived",slug:"slaveå®è£-keepalived",normalizedTitle:"slaveå®è£ keepalived",charIndex:218},{level:2,title:"æµè¯ NFS",slug:"æµè¯-nfs-2",normalizedTitle:"æµè¯ nfs",charIndex:133},{level:2,title:"k8séç¾¤nodeèç¹æå¨",slug:"k8séç¾¤nodeèç¹æå¨",normalizedTitle:"k8séç¾¤nodeèç¹æå¨",charIndex:250},{level:2,title:"è®¾ç½® Keepalived èæ¬",slug:"è®¾ç½®-keepalived-èæ¬",normalizedTitle:"è®¾ç½® keepalived èæ¬",charIndex:267}],headersStr:"å®è£ç¯å¢ åå¤å·¥ä½ å®è£ NFS æµè¯ NFS å¨ Slave è¿è¡åæ­¥ Master æ°æ® å¨ Master è¿è¡åæ­¥ Slave æ°æ® Masterå®è£ Keepalived Slaveå®è£ Keepalived æµè¯ NFS k8séç¾¤nodeèç¹æå¨ è®¾ç½® Keepalived èæ¬",content:'# NFS (Kubernetes) é«å¯ç¨æ¹æ¡ï¼NFS+keepalived+Sersync)\n\næç¤º\n\nNFS (Kubernetes) é«å¯ç¨æ¹æ¡ï¼NFS+keepalived+Sersync)\n\n\n\n * å®è£ç¯å¢\n * åå¤å·¥ä½\n * å®è£ NFS\n * æµè¯ NFS\n * å¨ Slave è¿è¡åæ­¥ Master æ°æ®\n * å¨ Master è¿è¡åæ­¥ Slave æ°æ®\n * Masterå®è£ Keepalived\n * Slaveå®è£ Keepalived\n * æµè¯ NFS\n * k8séç¾¤nodeèç¹æå¨\n * è®¾ç½® Keepalived èæ¬\n\n\n\n\n# å®è£ç¯å¢\n\næ¬æ¹æ¡æ¯ NFS çé«å¯ç¨æ¹æ¡ï¼å®¢æ·ç«¯ä¸º k8séç¾¤ä¸å°ï¼æä»¶æå¡å¨åå«ä¸º Master å Slaveï¼ä½¿ç¨ keepalived çæä¸ä¸ªèæ IPï¼ä½¿ç¨ Sersync è¿è¡ Master ä¸ Slave ä¹é´æä»¶ç¸äºåæ­¥ï¼ç¡®ä¿é«å¯ç¨ã\n\nè§è²       ç³»ç»           IP\nèæIP                  192.168.100.110\nClient   k8séç¾¤        192.168.100.116,192.168.100.117,192.168.100.118\nMaster   centos 7.9   192.168.100.111\nSlave    centos 7.9   192.168.100.112\n\n\n# åå¤å·¥ä½\n\nå®è£ vimï¼å¹¶ä¸å³é­é²ç«å¢\n\nyum install vim -y\nsystemctl stop firewalld && systemctl disable firewalld\n\n\næ¥çåæ ¸çæ¬\n\n[root@localhost ~]# uname -smr\nLinux 3.10.0-1160.59.1.el7.x86_64 x86_64\n\n\n> å»ºè®®åçº§å°ææ°çé¿ææ¯æçæ¬ åçº§åæ ¸\n\n[root@localhost ~]# cat /etc/redhat-release #æ¥çç³»ç»çæ¬\nCentOS Linux release 7.9.2009 (Core)\n[root@localhost ~]# uname -r #æ¥çç³»ç»åæ ¸çæ¬\n3.10.0-1160.59.1.el7.x86_64\n[root@localhost ~]# uname -m #æ¥çç³»ç»æ¯å¦64ä½\nx86_64\n\n\n\n# å®è£ NFS\n\nå¨ master å slave ä¸é¢åå»ºå±äº«ç®å½ï¼æ°æ®çæå¨å°/dataã\n\nmkdir -p /data/nfs-share\n## èµäºåæé\nchmod o+w /data/nfs-share\n\n\nå¨master å slaveä¸å®è£nfsæå¡\n\nyum -y install nfs-utils rpcbind\n\n\nè®¾å®åäº«çç®å½ï¼éç½®è¦æ¹å¨éè¦reload nfs æå¡ï¼\n\n## æå®å·ä½k8s nodeèç¹IPå°å\necho \'/data/nfs-share 192.168.100.116,192.168.100.117,192.168.100.118(rw,sync,all_squash)\' >> /etc/exports\n\n\nåäº«ç®å½çèå´è¯¦è§£ï¼ç»åªäºå®¢æ·ç«¯åäº«ï¼\n\nç¹å»æ¥ç\n\n(1).æå®ipå°åçä¸»æºï¼192.168.0.100\n\nåªåè®¸IPå°åä¸º192.168.0.100çä¸»æºå¯ä»¥ç»å½å°æ­¤å±äº«ç®å½\n\n(2).æå®å­ç½ä¸­çææä¸»æºï¼192.168.0.0/24æè192.168.0.0/255.255.255.0\n\nåªåè®¸192.168.0.1~192.168.0.254è¿ä¸ªç½æ®µåçIPç»å½å°æ­¤å±äº«ç®å½\n\n(3).æå®ååçä¸»æºï¼centosNameNode.pigxcloud.com\n\nåªåè®¸ä¸»æºåä¸ºcentosNameNode.pigxcloud.comçå¯ä»¥ç»å½å°æ­¤å±äº«ç®å½\n\n(4).æå®ååçææä¸»æºï¼*.pigxcloud.com\n\nåªåè®¸ååä¸º.pigxcloud.comçå¯ä»¥ç»å½å°æ­¤å±äº«ç®å½\n\n(5).æå®ææçä¸»æºï¼*\n\nåäº«ç®å½çæéè¯¦è§£ï¼å®¢æ·ç«¯è½å¯¹åäº«çç®å½è¿è¡åªäºæä½ï¼\n\nç¹å»æ¥ç\n\n(1).rwï¼å¯è¯»å¯åçæé\n\n(2).roï¼åªè¯»çæé\n\n(3).no_root_squashï¼ç»å¥åäº«ç®å½çä½¿ç¨èå¦ææ¯rootçè¯ï¼é£ä¹å¯¹äºè¿ä¸ªåäº«çç®å½æ¥è¯´ï¼ä»å°±å·ærootçæéï¼è¿ä¸é¡¹ä¸å®å¨ï¼ä¸å»ºè®®ä½¿ç¨ï¼\n\n(4).root_squashï¼ç»å¥åäº«ç®å½çä½¿ç¨èå¦ææ¯rootçè¯ï¼é£ä¹è¿ä¸ªä½¿ç¨èçæéå°è¢«åç¼©æå¿åä½¿ç¨èï¼éå¸¸ä»çUIDä¸GIDé½ä¼åænobodyé£ä¸ªç³»ç»è´¦å·çèº«ä»½ã\n\n(5).all_squashï¼ä¸è®ºç»å¥åäº«ç®å½çä½¿ç¨èæ¯ä»ä¹èº«ä»½ï¼é½ä¼è¢«åç¼©æå¿åä½¿ç¨èã\n\n(6).anonuidï¼å¯ä»¥èªè¡è®¾å®ä½¿ç¨èUIDçå¼ï¼ä¹å°±æ¯ä½¿ç¨èç»å½å°åäº«ç®å½ä¸­ï¼èº«ä»½æä¸ºUIDè¿ä¸ªä½¿ç¨èï¼å¿é¡»å¨/etc/passwdä¸­å­å¨è¿ä¸ªUIDã\n\n(7).anongidï¼å¯ä»¥èªè¡è®¾å®ä½¿ç¨èGIDçå¼ï¼ä¹å°±æ¯ä½¿ç¨èç»å½å°åäº«ç®å½ä¸­ï¼èº«ä»½æä¸ºGIDè¿ä¸ªä½¿ç¨èï¼å¿é¡»å¨/etc/groupä¸­å­å¨è¿ä¸ªGIDã\n\n(8).syncï¼æ°æ®åæ­¥åå¥å°åå­ä¸ç¡¬çå½ä¸­\n\n(9).asyncï¼æ°æ®ä¼åæå­äºåå­å½ä¸­ï¼èéç´æ¥åå¥ç¡¬ç\n\nå¼å¯æå¡\n\nsystemctl start rpcbind && systemctl start nfs\n\n\nè®¾ç½®å¼æºèªå¯å¨\n\nsystemctl enable rpcbind && systemctl enable nfs\n\n\n\n# æµè¯ NFS\n\nå¨k8séç¾¤éé¢æ¾ä¸ªnode æµè¯æ¯å¦è½é¾æ¥ä¸nfsæå¡\n\nä¸è½½nfs\n\nyum -y install nfs-utils rpcbind\n\n\næè½½ç®å½\n\nmkdir -p /data/nfs-data\n\n\næè½½nfs\n\nmount -t nfs 192.168.100.111:/data/nfs-share /data/nfs-data\n\n\næ¥ç\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n[root@localhost ~]# df -TH\nFilesystem                      Type      Size  Used Avail Use% Mounted on\ndevtmpfs                        devtmpfs  508M     0  508M   0% /dev\ntmpfs                           tmpfs     520M     0  520M   0% /dev/shm\ntmpfs                           tmpfs     520M  7.1M  513M   2% /run\ntmpfs                           tmpfs     520M     0  520M   0% /sys/fs/cgroup\n/dev/mapper/centos-root         xfs        54G  1.7G   52G   4% /\n/dev/mapper/centos-home         xfs       1.1T   34M  1.1T   1% /home\n/dev/sda1                       xfs       1.1G  208M  856M  20% /boot\ntmpfs                           tmpfs     104M     0  104M   0% /run/user/0\n192.168.100.111:/data/nfs-share nfs4       54G  1.8G   52G   4% /data1/nfs-data\n\n\nå¸è½½æè½½\n\numount /data1/nfs-data\n\n\næ£æ¥ nfs æå¡å¨ç«¯æ¯å¦æè®¾ç½®å±äº«ç®å½ showmount -e $(nfsæå¡å¨çIP)\n\n[root@localhost ~]# showmount -e 192.168.100.111\nExport list for 192.168.100.111:\n/data/nfs-share 192.168.100.0/23\n\n\n\n# å¨ Slave è¿è¡åæ­¥ Master æ°æ®\n\næå°æ°æ®åæ­¥å°±å¿ç¶ä¼è°å°rsyncï¼ä¸è¬ç®åçæå¡å¨æ°æ®ä¼ è¾ä¼ä½¿ç¨ftp/sftpç­æ¹å¼ï¼ä½æ¯è¿æ ·çæ¹å¼æçä¸é«ï¼ä¸æ¯æå·®å¼åå¢éåæ­¥ä¹ä¸æ¯æå®æ¶ä¼ è¾ãéå¯¹æ°æ®å®æ¶åæ­¥éæ±å¤§å¤æ°äººä¼éæ©rsync+inotify-toolsçè§£å³æ¹æ¡ï¼ä½æ¯è¿æ ·çæ¹æ¡ä¹å­å¨ä¸äºç¼ºé·ï¼sersyncæ¯å½äººåºäºåä¸¤èå¼åçå·¥å·ï¼ä¸ä»ä¿çäºä¼ç¹åæ¶è¿å¼ºåäºå®æ¶çæ§ï¼æä»¶è¿æ»¤ï¼ç®åéç½®ç­åè½ï¼å¸®å©ç¨æ·æé«è¿è¡æçï¼èçæ¶é´åç½ç»èµæºã\n\nå¨ Slave ä¸ç¼è¾éç½®æä»¶\n\nvim /etc/rsyncd.conf\n\n\nç¹å»æ¥ç\n\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\nuid = root\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\ngid = root\n# é»è®¤ç«¯å£\nport = 873\n# pidæä»¶çå­æ¾ä½ç½®\npid file = /var/rsyncd.pid\n# æ¥å¿æä»¶ä½ç½®ï¼å¯å¨rsyncåèªå¨äº§çè¿ä¸ªæä»¶ï¼æ éæååå»º\nlog file = /var/log/rsyncd.log\n# é»è®¤ä¸ºtrueï¼ä¿®æ¹ä¸ºnoï¼å¢å å¯¹ç®å½æä»¶è½¯è¿æ¥çå¤ä»½\nuse chroot = no\n# æå¤§è¿æ¥æ°\nmax connections = 200\n# è®¾ç½®rsyncæå¡ç«¯æä»¶ä¸ºè¯»åæé\nread only = no\n# ä¸æ¾ç¤ºrsyncæå¡ç«¯èµæºåè¡¨ \nlist = false\nfake super = yes\nignore errors\n[data]\n# rsyncæå¡ç«¯æ°æ®ç®å½è·¯å¾\npath = /data/nfs-share\n# æ§è¡æ°æ®åæ­¥çç¨æ·åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nauth users = root\n# ç¨æ·è®¤è¯éç½®æä»¶ï¼éé¢ä¿å­ç¨æ·åç§°åå¯ç ï¼åé¢ä¼åå»ºè¿ä¸ªæä»¶\nsecrets file = /etc/rsync_slave.pass\n# åè®¸è¿è¡æ°æ®åæ­¥çå®¢æ·ç«¯IPå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nhosts allow = 192.168.100.111\n# ç¦æ­¢æ°æ®åæ­¥çå®¢æ·ç«¯IPå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\n#hosts deny = 192.168.0.1\n\n\nå¨ Slave ä¸å®è£å¯å¨\n\nyum install rsync\necho \'root:123456\' > /etc/rsync_slave.pass\nchmod 600 /etc/rsync_slave.pass\nchown -R root:root /data/nfs-share\nrsync --daemon --config=/etc/rsyncd.conf\n\n\nå¨ Master ä¸æµè¯ä¸\n\nyum -y install rsync\nchown -R root:root /data/nfs-share\necho "123456" > /etc/rsync_slave.pass\nchmod 600 /etc/rsync_slave.pass\n// åå»ºæµè¯æä»¶,æµè¯æ¨é\ncd /data/nfs-share\necho "test" > slave.txt\nrsync -arv /data/nfs-share/ root@192.168.100.112::data --password-file=/etc/rsync_slave.pass\n#å¨ slave ä¸æµè¯\nls /fs/nsf-data\n# åºç° slave.txt å³å¯\n\n\nå¨ Master ä¸éç½®èªå¨åæ­¥å®è£\n\n# ä¸è½½\nwget https://raw.githubusercontent.com/orangle/sersync/master/release/sersync2.5.4_64bit_binary_stable_final.tar.gz\n# è§£å\ntar zxvf sersync2.5.4_64bit_binary_stable_final.tar.gz  \n# ç§»å¨ç®å½å° /usr/local/sersync\nmv GNU-Linux-x86  /usr/local/sersync   \n\n\nå¨ Master ä¸éç½®èªå¨åæ­¥éç½®\n\ncd /usr/local/sersync/ && vim /usr/local/sersync/confxml.xml\n\n\nä¿®æ¹éç½®æä»¶éé¢èç¹æ°æ®\n\nç¹å»æ¥ç\n\n<delete start="flase"/>\n\n#æºæå¡å¨åæ­¥ç®å½\n<localpath watch="/data/nfs-share/">  \n\n#remote ip="172.12.17.167"  #ç®æ æå¡å¨ipï¼æ¯è¡ä¸ä¸ª \n#name="data"   ç®æ æå¡å¨rsyncåæ­¥ç®å½æ¨¡ååç§°\n<remote ip="172.12.17.167" name="data"/> \n\n#rsyncåæ­¥è®¤è¯\n#start="true"   \n#users="root" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·å\n#passwordfile="/etc/rsync_slave.pass" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·çå¯ç å¨æºæå¡å¨çå­æ¾è·¯å¾\n<auth start="true" users="root" passwordfile="/etc/rsync_slave.pass"/>\n\n# è®¾ç½®rsyncè¿ç¨æå¡ç«¯å£ï¼è¿ç¨éé»è®¤ç«¯å£åéæå¼èªå®ä¹\n<userDefinedPort start="false" port="873"/>\x3c!-- port=874 --\x3e\n\n#èæ¬è¿è¡å¤±è´¥æ¥å¿è®°å½\nfailLog path="/tmp/rsync_fail_log.sh"\n\n\nå¯å¨\n\n./sersync2 -r -d -o confxml.xml\n\n\næµè¯\n\ncd /data/nfs-share && touch slave.txt\n\n\nå¨ Slave éé¢ /data/nfs-share éé¢å»ççæ°æ®æ¯å¦å­å¨\n\n\n\n\n\n\nÂ \n\n\n[root@localhost nfs-share]# ls -al \ntotal 12512\ndrwxr-xrwx. 2 root root      146 Mar  1 12:28 .\ndrwxr-xr-x. 3 root root       23 Mar  1 10:43 ..\n-rw-r--r--. 1 root root        5 Mar  1 10:56 slave.txt\n\n\n\n# å¨ Master è¿è¡åæ­¥ Slave æ°æ®\n\næ³¨æ\n\nå¦æMasterææåæ¢å¤ä¸è½åæ­¥æ°æ®å°Slaveï¼è¿éä¹åæ ·éç½®Masterå°Slaveçèªå¨åæ­¥\n\nå¨Masterä¸ç¼è¾éç½®æä»¶\n\nvim /etc/rsyncd.conf\n\n\nç¹å»æ¥ç\n\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\nuid = root\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\ngid = root\n# é»è®¤ç«¯å£\nport = 873\n# pidæä»¶çå­æ¾ä½ç½®\npid file = /var/rsyncd.pid\n# æ¥å¿æä»¶ä½ç½®ï¼å¯å¨rsyncåèªå¨äº§çè¿ä¸ªæä»¶ï¼æ éæååå»º\nlog file = /var/log/rsyncd.log\n# é»è®¤ä¸ºtrueï¼ä¿®æ¹ä¸ºnoï¼å¢å å¯¹ç®å½æä»¶è½¯è¿æ¥çå¤ä»½\nuse chroot = no\n# æå¤§è¿æ¥æ°\nmax connections = 200\n# è®¾ç½®rsyncæå¡ç«¯æä»¶ä¸ºè¯»åæé\nread only = no\n# ä¸æ¾ç¤ºrsyncæå¡ç«¯èµæºåè¡¨ \nlist = false\nfake super = yes\nignore errors\n[data]\n# rsyncæå¡ç«¯æ°æ®ç®å½è·¯å¾\npath = /data/nfs-share\n# æ§è¡æ°æ®åæ­¥çç¨æ·åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nauth users = root\n# ç¨æ·è®¤è¯éç½®æä»¶ï¼éé¢ä¿å­ç¨æ·åç§°åå¯ç ï¼åé¢ä¼åå»ºè¿ä¸ªæä»¶\nsecrets file = /etc/rsync_master.pass\n# åè®¸è¿è¡æ°æ®åæ­¥çå®¢æ·ç«¯IPå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nhosts allow = 192.168.100.112\n# ç¦æ­¢æ°æ®åæ­¥çå®¢æ·ç«¯IPå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\n#hosts deny = 192.168.0.1\n\n\nå¨Masterä¸å®è£å¯å¨\n\nyum install rsync\necho \'root:123456\' > /etc/rsync_master.pass\nchmod 600 /etc/rsync_master.pass\nchown -R root:root /data/nfs-share\nrsync --daemon --config=/etc/rsyncd.conf\n\n\nå¨ Slave ä¸æµè¯ä¸\n\nyum -y install rsync\nchown -R root:root /data/nfs-share\necho "123456" > /etc/rsync_master.pass\nchmod 600 /etc/rsync_master.pass\n# åå»ºæµè¯æä»¶,æµè¯æ¨é\ncd /data/nfs-share\necho "test" > master.txt\nrsync -arv /data/nfs-share/ root@192.168.100.111::data --password-file=/etc/rsync_master.pass\n# å¨ Master ä¸æµè¯\nls /data/nfs-share\n# åºç° master.txt å³å¯\n\n\nå¨ Slave ä¸éç½®èªå¨åæ­¥å®è£\n\n# ä¸è½½\nwget https://raw.githubusercontent.com/orangle/sersync/master/release/sersync2.5.4_64bit_binary_stable_final.tar.gz\n# è§£å\ntar zxvf sersync2.5.4_64bit_binary_stable_final.tar.gz  \n# ç§»å¨ç®å½å° /usr/local/sersync\nmv GNU-Linux-x86  /usr/local/sersync   \n\n\nå¨ Slave ä¸éç½®èªå¨åæ­¥éç½®\n\ncd /usr/local/sersync/ && vim /usr/local/sersync/confxml.xml\n\n\nä¿®æ¹éç½®æä»¶éé¢èç¹æ°æ®\n\nç¹å»æ¥ç\n\n<delete start="flase"/>\n\n#æºæå¡å¨åæ­¥ç®å½\n<localpath watch="/data/nfs-share/">  \n\n#remote ip="192.168.100.111"  #ç®æ æå¡å¨ipï¼æ¯è¡ä¸ä¸ª \n#name="data"   ç®æ æå¡å¨rsyncåæ­¥ç®å½æ¨¡ååç§°\n<remote ip="192.168.100.111" name="data"/> \n\n#rsyncåæ­¥è®¤è¯\n#start="true"   \n#users="root" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·å\n#passwordfile="/etc/rsync_master.pass" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·çå¯ç å¨æºæå¡å¨çå­æ¾è·¯å¾\n<auth start="true" users="root" passwordfile="/etc/rsync_master.pass"/>\n\n# è®¾ç½®rsyncè¿ç¨æå¡ç«¯å£ï¼è¿ç¨éé»è®¤ç«¯å£åéæå¼èªå®ä¹\n<userDefinedPort start="false" port="873"/>\x3c!-- port=874 --\x3e\n\n#èæ¬è¿è¡å¤±è´¥æ¥å¿è®°å½\nfailLog path="/tmp/rsync_fail_log.sh"\n\n\nå¯å¨\n\n./sersync2 -r -d -o confxml.xml\n# æµè¯\ncd /data/nfs-share\ntouch Master1.txt\n# å¨ Slave éé¢ /data/nfs-share éé¢å»ççæ°æ®æ¯å¦å­å¨\n\n\n\n# Masterå®è£ Keepalived\n\nå®è£ keepalived\n\nyum -y install keepalived\n\n\nä¿®æ¹éç½®æä»¶\n\nvim /etc/keepalived/keepalived.conf\n\n\nç¹å»æ¥ç\n\n# å¶ä¸­ enp0s3 ä¸ºç»å®ç½å¡åç§°ï¼å¯ä»¥ä½¿ç¨ ip addr å½ä»¤æ¥ç\n# å¶ä¸­ 192.168.100.123  ä¸ºèæ ip ï¼æ³¨æä¸è¦åå¶å® ip å²çª\n! Configuration File for keepalived\nglobal_defs {\n   router_id lb01\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface enp0s3\n    # èæè·¯ç±æ è¯ï¼è¿ä¸ªæ è¯æ¯ä¸ä¸ªæ°å­ï¼åä¸ä¸ªvrrpå®ä¾ä½¿ç¨å¯ä¸çæ è¯ã\n    # å³åä¸vrrp_instanceä¸ï¼MASTERåBACKUPå¿é¡»æ¯ä¸è´ç\n    virtual_router_id 51\n    # å®ä¹ä¼åçº§ï¼æ°å­è¶å¤§ï¼ä¼åçº§è¶é«ï¼0-255ï¼ã\n    # å¨åä¸ä¸ªvrrp_instanceä¸ï¼MASTER çä¼åçº§å¿é¡»å¤§äº BACKUP çä¼åçº§\n    priority 150\n    # è®¾å® MASTER ä¸ BACKUP è´è½½åè¡¡å¨ä¹é´åæ­¥æ£æ¥çæ¶é´é´éï¼åä½æ¯ç§\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 123456\n    }\n    virtual_ipaddress {\n        192.168.100.123/23 brd 192.168.101.255\n    }\n}\n\n\nå¯å¨æå¡\n\nsystemctl start keepalived.service && systemctl enable keepalived.service\n\n\n\n# Slaveå®è£ Keepalived\n\nå®è£ keepalived\n\nyum -y install keepalived\n\n\nä¿®æ¹éç½®æä»¶\n\nvim /etc/keepalived/keepalived.conf\n\n\nç¹å»æ¥ç\n\n# å¶ä¸­ enp0s3 ä¸ºç»å®ç½å¡åç§°ï¼å¯ä»¥ä½¿ç¨ ip addr å½ä»¤æ¥ç\n# å¶ä¸­ 192.168.100.123  ä¸ºèæ ip ï¼æ³¨æä¸è¦åå¶å® ip å²çª\n! Configuration File for keepalived\nglobal_defs {\n   router_id lb02\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface enp0s3\n    # èæè·¯ç±æ è¯ï¼è¿ä¸ªæ è¯æ¯ä¸ä¸ªæ°å­ï¼åä¸ä¸ªvrrpå®ä¾ä½¿ç¨å¯ä¸çæ è¯ã\n    # å³åä¸vrrp_instanceä¸ï¼MASTERåBACKUPå¿é¡»æ¯ä¸è´ç\n    virtual_router_id 51\n    # å®ä¹ä¼åçº§ï¼æ°å­è¶å¤§ï¼ä¼åçº§è¶é«ï¼0-255ï¼ã\n    # å¨åä¸ä¸ªvrrp_instanceä¸ï¼MASTER çä¼åçº§å¿é¡»å¤§äº BACKUP çä¼åçº§\n    priority 100\n    # è®¾å® MASTER ä¸ BACKUP è´è½½åè¡¡å¨ä¹é´åæ­¥æ£æ¥çæ¶é´é´éï¼åä½æ¯ç§\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 123456\n    }\n    virtual_ipaddress {\n        192.168.100.123/23 brd 192.168.101.255\n    }\n}\n\n\nå¯å¨æå¡\n\nsystemctl start keepalived.service && systemctl enable keepalived.service\n\n\n\n# æµè¯ NFS\n\nå¨ Masterä¸æ§è¡ï¼æè¾åº\n\n[root@localhost ~]# ip a | grep  192.168.100.123\n    inet 192.168.100.123/23 brd 192.168.101.255 scope global secondary enp0s3\n\n\nå¨ Slaveä¸æ§è¡ï¼æ è¾åº\n\n[root@localhost ~]# ip a | grep  192.168.100.123\n\n\nå³é­ Master ä¸keepalivedæµè¯IPæ¯å¦æ´æ¢\n\nå¨ Masterä¸\n\nsystemctl stop keepalived\n\n\nå¨ Slave ä¸,æè¾åºè¡¨ç¤ºèªå¨åæ¢æå\n\n[root@localhost ~]# ip a | grep  192.168.100.123\n    inet 192.168.100.123/23 brd 192.168.101.255 scope global secondary enp0s3\n\n\n\n# k8séç¾¤nodeèç¹æå¨\n\n# æè½½ç®å½\nmkdir -p /data/nfs-share-123\n# æè½½nfs\nmount -t nfs 192.168.100.123:/data/nfs-share /data/nfs-share-123\n# æ¥ç\ndf -TH\nè¾åºéé¢å«æ  192.168.100.111:/data/nfs-share nfs4       54G  1.8G   52G   4% /data1/nfs-data\n# å¸è½½æè½½\numount /data/nfs-share-123\n\n\n\n# è®¾ç½® Keepalived èæ¬\n\nå¨å®è£Keepalivedçæºå¨ä¸è®¾ç½® Keepalived èæ¬\n\n> ip çæ¼ç§»æ¯æ ¹æ® Keepalived çå­æ´»æ¥å¤æ­çï¼æä»¥å¨ nfs æä¹åéè¦åæ­¢ keepalived æå¡\n\necho \'systemctl status nfs &>/dev/null\nif [ $? -ne 0 ]; then\n  systemctl start nfs\n  systemctl status nfs &>/dev/null\n  if [ $? -ne 0 ]; then\n    systemctl stop keepalived.service\n  fi\nfi\' >> /usr/local/sbin/task_nfs.sh\n\n\nå å¥å®æ¶ä»»å¡\n\nchmod 777 /usr/local/sbin/task_nfs.sh\ncrontab -e\n# æ·»å å®æ¶ä»»å¡ 5ç§æ§è¡ä¸æ¬¡\n* * * * * sleep 5;/usr/local/sbin/task_nfs.sh &> /dev/null\n\n\nå®ç»ã',normalizedContent:'# nfs (kubernetes) é«å¯ç¨æ¹æ¡ï¼nfs+keepalived+sersync)\n\næç¤º\n\nnfs (kubernetes) é«å¯ç¨æ¹æ¡ï¼nfs+keepalived+sersync)\n\n\n\n * å®è£ç¯å¢\n * åå¤å·¥ä½\n * å®è£ nfs\n * æµè¯ nfs\n * å¨ slave è¿è¡åæ­¥ master æ°æ®\n * å¨ master è¿è¡åæ­¥ slave æ°æ®\n * masterå®è£ keepalived\n * slaveå®è£ keepalived\n * æµè¯ nfs\n * k8séç¾¤nodeèç¹æå¨\n * è®¾ç½® keepalived èæ¬\n\n\n\n\n# å®è£ç¯å¢\n\næ¬æ¹æ¡æ¯ nfs çé«å¯ç¨æ¹æ¡ï¼å®¢æ·ç«¯ä¸º k8séç¾¤ä¸å°ï¼æä»¶æå¡å¨åå«ä¸º master å slaveï¼ä½¿ç¨ keepalived çæä¸ä¸ªèæ ipï¼ä½¿ç¨ sersync è¿è¡ master ä¸ slave ä¹é´æä»¶ç¸äºåæ­¥ï¼ç¡®ä¿é«å¯ç¨ã\n\nè§è²       ç³»ç»           ip\nèæip                  192.168.100.110\nclient   k8séç¾¤        192.168.100.116,192.168.100.117,192.168.100.118\nmaster   centos 7.9   192.168.100.111\nslave    centos 7.9   192.168.100.112\n\n\n# åå¤å·¥ä½\n\nå®è£ vimï¼å¹¶ä¸å³é­é²ç«å¢\n\nyum install vim -y\nsystemctl stop firewalld && systemctl disable firewalld\n\n\næ¥çåæ ¸çæ¬\n\n[root@localhost ~]# uname -smr\nlinux 3.10.0-1160.59.1.el7.x86_64 x86_64\n\n\n> å»ºè®®åçº§å°ææ°çé¿ææ¯æçæ¬ åçº§åæ ¸\n\n[root@localhost ~]# cat /etc/redhat-release #æ¥çç³»ç»çæ¬\ncentos linux release 7.9.2009 (core)\n[root@localhost ~]# uname -r #æ¥çç³»ç»åæ ¸çæ¬\n3.10.0-1160.59.1.el7.x86_64\n[root@localhost ~]# uname -m #æ¥çç³»ç»æ¯å¦64ä½\nx86_64\n\n\n\n# å®è£ nfs\n\nå¨ master å slave ä¸é¢åå»ºå±äº«ç®å½ï¼æ°æ®çæå¨å°/dataã\n\nmkdir -p /data/nfs-share\n## èµäºåæé\nchmod o+w /data/nfs-share\n\n\nå¨master å slaveä¸å®è£nfsæå¡\n\nyum -y install nfs-utils rpcbind\n\n\nè®¾å®åäº«çç®å½ï¼éç½®è¦æ¹å¨éè¦reload nfs æå¡ï¼\n\n## æå®å·ä½k8s nodeèç¹ipå°å\necho \'/data/nfs-share 192.168.100.116,192.168.100.117,192.168.100.118(rw,sync,all_squash)\' >> /etc/exports\n\n\nåäº«ç®å½çèå´è¯¦è§£ï¼ç»åªäºå®¢æ·ç«¯åäº«ï¼\n\nç¹å»æ¥ç\n\n(1).æå®ipå°åçä¸»æºï¼192.168.0.100\n\nåªåè®¸ipå°åä¸º192.168.0.100çä¸»æºå¯ä»¥ç»å½å°æ­¤å±äº«ç®å½\n\n(2).æå®å­ç½ä¸­çææä¸»æºï¼192.168.0.0/24æè192.168.0.0/255.255.255.0\n\nåªåè®¸192.168.0.1~192.168.0.254è¿ä¸ªç½æ®µåçipç»å½å°æ­¤å±äº«ç®å½\n\n(3).æå®ååçä¸»æºï¼centosnamenode.pigxcloud.com\n\nåªåè®¸ä¸»æºåä¸ºcentosnamenode.pigxcloud.comçå¯ä»¥ç»å½å°æ­¤å±äº«ç®å½\n\n(4).æå®ååçææä¸»æºï¼*.pigxcloud.com\n\nåªåè®¸ååä¸º.pigxcloud.comçå¯ä»¥ç»å½å°æ­¤å±äº«ç®å½\n\n(5).æå®ææçä¸»æºï¼*\n\nåäº«ç®å½çæéè¯¦è§£ï¼å®¢æ·ç«¯è½å¯¹åäº«çç®å½è¿è¡åªäºæä½ï¼\n\nç¹å»æ¥ç\n\n(1).rwï¼å¯è¯»å¯åçæé\n\n(2).roï¼åªè¯»çæé\n\n(3).no_root_squashï¼ç»å¥åäº«ç®å½çä½¿ç¨èå¦ææ¯rootçè¯ï¼é£ä¹å¯¹äºè¿ä¸ªåäº«çç®å½æ¥è¯´ï¼ä»å°±å·ærootçæéï¼è¿ä¸é¡¹ä¸å®å¨ï¼ä¸å»ºè®®ä½¿ç¨ï¼\n\n(4).root_squashï¼ç»å¥åäº«ç®å½çä½¿ç¨èå¦ææ¯rootçè¯ï¼é£ä¹è¿ä¸ªä½¿ç¨èçæéå°è¢«åç¼©æå¿åä½¿ç¨èï¼éå¸¸ä»çuidä¸gidé½ä¼åænobodyé£ä¸ªç³»ç»è´¦å·çèº«ä»½ã\n\n(5).all_squashï¼ä¸è®ºç»å¥åäº«ç®å½çä½¿ç¨èæ¯ä»ä¹èº«ä»½ï¼é½ä¼è¢«åç¼©æå¿åä½¿ç¨èã\n\n(6).anonuidï¼å¯ä»¥èªè¡è®¾å®ä½¿ç¨èuidçå¼ï¼ä¹å°±æ¯ä½¿ç¨èç»å½å°åäº«ç®å½ä¸­ï¼èº«ä»½æä¸ºuidè¿ä¸ªä½¿ç¨èï¼å¿é¡»å¨/etc/passwdä¸­å­å¨è¿ä¸ªuidã\n\n(7).anongidï¼å¯ä»¥èªè¡è®¾å®ä½¿ç¨ègidçå¼ï¼ä¹å°±æ¯ä½¿ç¨èç»å½å°åäº«ç®å½ä¸­ï¼èº«ä»½æä¸ºgidè¿ä¸ªä½¿ç¨èï¼å¿é¡»å¨/etc/groupä¸­å­å¨è¿ä¸ªgidã\n\n(8).syncï¼æ°æ®åæ­¥åå¥å°åå­ä¸ç¡¬çå½ä¸­\n\n(9).asyncï¼æ°æ®ä¼åæå­äºåå­å½ä¸­ï¼èéç´æ¥åå¥ç¡¬ç\n\nå¼å¯æå¡\n\nsystemctl start rpcbind && systemctl start nfs\n\n\nè®¾ç½®å¼æºèªå¯å¨\n\nsystemctl enable rpcbind && systemctl enable nfs\n\n\n\n# æµè¯ nfs\n\nå¨k8séç¾¤éé¢æ¾ä¸ªnode æµè¯æ¯å¦è½é¾æ¥ä¸nfsæå¡\n\nä¸è½½nfs\n\nyum -y install nfs-utils rpcbind\n\n\næè½½ç®å½\n\nmkdir -p /data/nfs-data\n\n\næè½½nfs\n\nmount -t nfs 192.168.100.111:/data/nfs-share /data/nfs-data\n\n\næ¥ç\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n[root@localhost ~]# df -th\nfilesystem                      type      size  used avail use% mounted on\ndevtmpfs                        devtmpfs  508m     0  508m   0% /dev\ntmpfs                           tmpfs     520m     0  520m   0% /dev/shm\ntmpfs                           tmpfs     520m  7.1m  513m   2% /run\ntmpfs                           tmpfs     520m     0  520m   0% /sys/fs/cgroup\n/dev/mapper/centos-root         xfs        54g  1.7g   52g   4% /\n/dev/mapper/centos-home         xfs       1.1t   34m  1.1t   1% /home\n/dev/sda1                       xfs       1.1g  208m  856m  20% /boot\ntmpfs                           tmpfs     104m     0  104m   0% /run/user/0\n192.168.100.111:/data/nfs-share nfs4       54g  1.8g   52g   4% /data1/nfs-data\n\n\nå¸è½½æè½½\n\numount /data1/nfs-data\n\n\næ£æ¥ nfs æå¡å¨ç«¯æ¯å¦æè®¾ç½®å±äº«ç®å½ showmount -e $(nfsæå¡å¨çip)\n\n[root@localhost ~]# showmount -e 192.168.100.111\nexport list for 192.168.100.111:\n/data/nfs-share 192.168.100.0/23\n\n\n\n# å¨ slave è¿è¡åæ­¥ master æ°æ®\n\næå°æ°æ®åæ­¥å°±å¿ç¶ä¼è°å°rsyncï¼ä¸è¬ç®åçæå¡å¨æ°æ®ä¼ è¾ä¼ä½¿ç¨ftp/sftpç­æ¹å¼ï¼ä½æ¯è¿æ ·çæ¹å¼æçä¸é«ï¼ä¸æ¯æå·®å¼åå¢éåæ­¥ä¹ä¸æ¯æå®æ¶ä¼ è¾ãéå¯¹æ°æ®å®æ¶åæ­¥éæ±å¤§å¤æ°äººä¼éæ©rsync+inotify-toolsçè§£å³æ¹æ¡ï¼ä½æ¯è¿æ ·çæ¹æ¡ä¹å­å¨ä¸äºç¼ºé·ï¼sersyncæ¯å½äººåºäºåä¸¤èå¼åçå·¥å·ï¼ä¸ä»ä¿çäºä¼ç¹åæ¶è¿å¼ºåäºå®æ¶çæ§ï¼æä»¶è¿æ»¤ï¼ç®åéç½®ç­åè½ï¼å¸®å©ç¨æ·æé«è¿è¡æçï¼èçæ¶é´åç½ç»èµæºã\n\nå¨ slave ä¸ç¼è¾éç½®æä»¶\n\nvim /etc/rsyncd.conf\n\n\nç¹å»æ¥ç\n\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\nuid = root\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\ngid = root\n# é»è®¤ç«¯å£\nport = 873\n# pidæä»¶çå­æ¾ä½ç½®\npid file = /var/rsyncd.pid\n# æ¥å¿æä»¶ä½ç½®ï¼å¯å¨rsyncåèªå¨äº§çè¿ä¸ªæä»¶ï¼æ éæååå»º\nlog file = /var/log/rsyncd.log\n# é»è®¤ä¸ºtrueï¼ä¿®æ¹ä¸ºnoï¼å¢å å¯¹ç®å½æä»¶è½¯è¿æ¥çå¤ä»½\nuse chroot = no\n# æå¤§è¿æ¥æ°\nmax connections = 200\n# è®¾ç½®rsyncæå¡ç«¯æä»¶ä¸ºè¯»åæé\nread only = no\n# ä¸æ¾ç¤ºrsyncæå¡ç«¯èµæºåè¡¨ \nlist = false\nfake super = yes\nignore errors\n[data]\n# rsyncæå¡ç«¯æ°æ®ç®å½è·¯å¾\npath = /data/nfs-share\n# æ§è¡æ°æ®åæ­¥çç¨æ·åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nauth users = root\n# ç¨æ·è®¤è¯éç½®æä»¶ï¼éé¢ä¿å­ç¨æ·åç§°åå¯ç ï¼åé¢ä¼åå»ºè¿ä¸ªæä»¶\nsecrets file = /etc/rsync_slave.pass\n# åè®¸è¿è¡æ°æ®åæ­¥çå®¢æ·ç«¯ipå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nhosts allow = 192.168.100.111\n# ç¦æ­¢æ°æ®åæ­¥çå®¢æ·ç«¯ipå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\n#hosts deny = 192.168.0.1\n\n\nå¨ slave ä¸å®è£å¯å¨\n\nyum install rsync\necho \'root:123456\' > /etc/rsync_slave.pass\nchmod 600 /etc/rsync_slave.pass\nchown -r root:root /data/nfs-share\nrsync --daemon --config=/etc/rsyncd.conf\n\n\nå¨ master ä¸æµè¯ä¸\n\nyum -y install rsync\nchown -r root:root /data/nfs-share\necho "123456" > /etc/rsync_slave.pass\nchmod 600 /etc/rsync_slave.pass\n// åå»ºæµè¯æä»¶,æµè¯æ¨é\ncd /data/nfs-share\necho "test" > slave.txt\nrsync -arv /data/nfs-share/ root@192.168.100.112::data --password-file=/etc/rsync_slave.pass\n#å¨ slave ä¸æµè¯\nls /fs/nsf-data\n# åºç° slave.txt å³å¯\n\n\nå¨ master ä¸éç½®èªå¨åæ­¥å®è£\n\n# ä¸è½½\nwget https://raw.githubusercontent.com/orangle/sersync/master/release/sersync2.5.4_64bit_binary_stable_final.tar.gz\n# è§£å\ntar zxvf sersync2.5.4_64bit_binary_stable_final.tar.gz  \n# ç§»å¨ç®å½å° /usr/local/sersync\nmv gnu-linux-x86  /usr/local/sersync   \n\n\nå¨ master ä¸éç½®èªå¨åæ­¥éç½®\n\ncd /usr/local/sersync/ && vim /usr/local/sersync/confxml.xml\n\n\nä¿®æ¹éç½®æä»¶éé¢èç¹æ°æ®\n\nç¹å»æ¥ç\n\n<delete start="flase"/>\n\n#æºæå¡å¨åæ­¥ç®å½\n<localpath watch="/data/nfs-share/">  \n\n#remote ip="172.12.17.167"  #ç®æ æå¡å¨ipï¼æ¯è¡ä¸ä¸ª \n#name="data"   ç®æ æå¡å¨rsyncåæ­¥ç®å½æ¨¡ååç§°\n<remote ip="172.12.17.167" name="data"/> \n\n#rsyncåæ­¥è®¤è¯\n#start="true"   \n#users="root" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·å\n#passwordfile="/etc/rsync_slave.pass" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·çå¯ç å¨æºæå¡å¨çå­æ¾è·¯å¾\n<auth start="true" users="root" passwordfile="/etc/rsync_slave.pass"/>\n\n# è®¾ç½®rsyncè¿ç¨æå¡ç«¯å£ï¼è¿ç¨éé»è®¤ç«¯å£åéæå¼èªå®ä¹\n<userdefinedport start="false" port="873"/>\x3c!-- port=874 --\x3e\n\n#èæ¬è¿è¡å¤±è´¥æ¥å¿è®°å½\nfaillog path="/tmp/rsync_fail_log.sh"\n\n\nå¯å¨\n\n./sersync2 -r -d -o confxml.xml\n\n\næµè¯\n\ncd /data/nfs-share && touch slave.txt\n\n\nå¨ slave éé¢ /data/nfs-share éé¢å»ççæ°æ®æ¯å¦å­å¨\n\n\n\n\n\n\nÂ \n\n\n[root@localhost nfs-share]# ls -al \ntotal 12512\ndrwxr-xrwx. 2 root root      146 mar  1 12:28 .\ndrwxr-xr-x. 3 root root       23 mar  1 10:43 ..\n-rw-r--r--. 1 root root        5 mar  1 10:56 slave.txt\n\n\n\n# å¨ master è¿è¡åæ­¥ slave æ°æ®\n\næ³¨æ\n\nå¦æmasterææåæ¢å¤ä¸è½åæ­¥æ°æ®å°slaveï¼è¿éä¹åæ ·éç½®masterå°slaveçèªå¨åæ­¥\n\nå¨masterä¸ç¼è¾éç½®æä»¶\n\nvim /etc/rsyncd.conf\n\n\nç¹å»æ¥ç\n\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\nuid = root\n# è®¾ç½®rsyncè¿è¡æéä¸ºroot\ngid = root\n# é»è®¤ç«¯å£\nport = 873\n# pidæä»¶çå­æ¾ä½ç½®\npid file = /var/rsyncd.pid\n# æ¥å¿æä»¶ä½ç½®ï¼å¯å¨rsyncåèªå¨äº§çè¿ä¸ªæä»¶ï¼æ éæååå»º\nlog file = /var/log/rsyncd.log\n# é»è®¤ä¸ºtrueï¼ä¿®æ¹ä¸ºnoï¼å¢å å¯¹ç®å½æä»¶è½¯è¿æ¥çå¤ä»½\nuse chroot = no\n# æå¤§è¿æ¥æ°\nmax connections = 200\n# è®¾ç½®rsyncæå¡ç«¯æä»¶ä¸ºè¯»åæé\nread only = no\n# ä¸æ¾ç¤ºrsyncæå¡ç«¯èµæºåè¡¨ \nlist = false\nfake super = yes\nignore errors\n[data]\n# rsyncæå¡ç«¯æ°æ®ç®å½è·¯å¾\npath = /data/nfs-share\n# æ§è¡æ°æ®åæ­¥çç¨æ·åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nauth users = root\n# ç¨æ·è®¤è¯éç½®æä»¶ï¼éé¢ä¿å­ç¨æ·åç§°åå¯ç ï¼åé¢ä¼åå»ºè¿ä¸ªæä»¶\nsecrets file = /etc/rsync_master.pass\n# åè®¸è¿è¡æ°æ®åæ­¥çå®¢æ·ç«¯ipå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\nhosts allow = 192.168.100.112\n# ç¦æ­¢æ°æ®åæ­¥çå®¢æ·ç«¯ipå°åï¼å¯ä»¥è®¾ç½®å¤ä¸ªï¼ç¨è±æç¶æä¸éå·éå¼\n#hosts deny = 192.168.0.1\n\n\nå¨masterä¸å®è£å¯å¨\n\nyum install rsync\necho \'root:123456\' > /etc/rsync_master.pass\nchmod 600 /etc/rsync_master.pass\nchown -r root:root /data/nfs-share\nrsync --daemon --config=/etc/rsyncd.conf\n\n\nå¨ slave ä¸æµè¯ä¸\n\nyum -y install rsync\nchown -r root:root /data/nfs-share\necho "123456" > /etc/rsync_master.pass\nchmod 600 /etc/rsync_master.pass\n# åå»ºæµè¯æä»¶,æµè¯æ¨é\ncd /data/nfs-share\necho "test" > master.txt\nrsync -arv /data/nfs-share/ root@192.168.100.111::data --password-file=/etc/rsync_master.pass\n# å¨ master ä¸æµè¯\nls /data/nfs-share\n# åºç° master.txt å³å¯\n\n\nå¨ slave ä¸éç½®èªå¨åæ­¥å®è£\n\n# ä¸è½½\nwget https://raw.githubusercontent.com/orangle/sersync/master/release/sersync2.5.4_64bit_binary_stable_final.tar.gz\n# è§£å\ntar zxvf sersync2.5.4_64bit_binary_stable_final.tar.gz  \n# ç§»å¨ç®å½å° /usr/local/sersync\nmv gnu-linux-x86  /usr/local/sersync   \n\n\nå¨ slave ä¸éç½®èªå¨åæ­¥éç½®\n\ncd /usr/local/sersync/ && vim /usr/local/sersync/confxml.xml\n\n\nä¿®æ¹éç½®æä»¶éé¢èç¹æ°æ®\n\nç¹å»æ¥ç\n\n<delete start="flase"/>\n\n#æºæå¡å¨åæ­¥ç®å½\n<localpath watch="/data/nfs-share/">  \n\n#remote ip="192.168.100.111"  #ç®æ æå¡å¨ipï¼æ¯è¡ä¸ä¸ª \n#name="data"   ç®æ æå¡å¨rsyncåæ­¥ç®å½æ¨¡ååç§°\n<remote ip="192.168.100.111" name="data"/> \n\n#rsyncåæ­¥è®¤è¯\n#start="true"   \n#users="root" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·å\n#passwordfile="/etc/rsync_master.pass" ç®æ æå¡å¨rsyncåæ­¥ç¨æ·çå¯ç å¨æºæå¡å¨çå­æ¾è·¯å¾\n<auth start="true" users="root" passwordfile="/etc/rsync_master.pass"/>\n\n# è®¾ç½®rsyncè¿ç¨æå¡ç«¯å£ï¼è¿ç¨éé»è®¤ç«¯å£åéæå¼èªå®ä¹\n<userdefinedport start="false" port="873"/>\x3c!-- port=874 --\x3e\n\n#èæ¬è¿è¡å¤±è´¥æ¥å¿è®°å½\nfaillog path="/tmp/rsync_fail_log.sh"\n\n\nå¯å¨\n\n./sersync2 -r -d -o confxml.xml\n# æµè¯\ncd /data/nfs-share\ntouch master1.txt\n# å¨ slave éé¢ /data/nfs-share éé¢å»ççæ°æ®æ¯å¦å­å¨\n\n\n\n# masterå®è£ keepalived\n\nå®è£ keepalived\n\nyum -y install keepalived\n\n\nä¿®æ¹éç½®æä»¶\n\nvim /etc/keepalived/keepalived.conf\n\n\nç¹å»æ¥ç\n\n# å¶ä¸­ enp0s3 ä¸ºç»å®ç½å¡åç§°ï¼å¯ä»¥ä½¿ç¨ ip addr å½ä»¤æ¥ç\n# å¶ä¸­ 192.168.100.123  ä¸ºèæ ip ï¼æ³¨æä¸è¦åå¶å® ip å²çª\n! configuration file for keepalived\nglobal_defs {\n   router_id lb01\n}\n\nvrrp_instance vi_1 {\n    state master\n    interface enp0s3\n    # èæè·¯ç±æ è¯ï¼è¿ä¸ªæ è¯æ¯ä¸ä¸ªæ°å­ï¼åä¸ä¸ªvrrpå®ä¾ä½¿ç¨å¯ä¸çæ è¯ã\n    # å³åä¸vrrp_instanceä¸ï¼masteråbackupå¿é¡»æ¯ä¸è´ç\n    virtual_router_id 51\n    # å®ä¹ä¼åçº§ï¼æ°å­è¶å¤§ï¼ä¼åçº§è¶é«ï¼0-255ï¼ã\n    # å¨åä¸ä¸ªvrrp_instanceä¸ï¼master çä¼åçº§å¿é¡»å¤§äº backup çä¼åçº§\n    priority 150\n    # è®¾å® master ä¸ backup è´è½½åè¡¡å¨ä¹é´åæ­¥æ£æ¥çæ¶é´é´éï¼åä½æ¯ç§\n    advert_int 1\n    authentication {\n        auth_type pass\n        auth_pass 123456\n    }\n    virtual_ipaddress {\n        192.168.100.123/23 brd 192.168.101.255\n    }\n}\n\n\nå¯å¨æå¡\n\nsystemctl start keepalived.service && systemctl enable keepalived.service\n\n\n\n# slaveå®è£ keepalived\n\nå®è£ keepalived\n\nyum -y install keepalived\n\n\nä¿®æ¹éç½®æä»¶\n\nvim /etc/keepalived/keepalived.conf\n\n\nç¹å»æ¥ç\n\n# å¶ä¸­ enp0s3 ä¸ºç»å®ç½å¡åç§°ï¼å¯ä»¥ä½¿ç¨ ip addr å½ä»¤æ¥ç\n# å¶ä¸­ 192.168.100.123  ä¸ºèæ ip ï¼æ³¨æä¸è¦åå¶å® ip å²çª\n! configuration file for keepalived\nglobal_defs {\n   router_id lb02\n}\n\nvrrp_instance vi_1 {\n    state master\n    interface enp0s3\n    # èæè·¯ç±æ è¯ï¼è¿ä¸ªæ è¯æ¯ä¸ä¸ªæ°å­ï¼åä¸ä¸ªvrrpå®ä¾ä½¿ç¨å¯ä¸çæ è¯ã\n    # å³åä¸vrrp_instanceä¸ï¼masteråbackupå¿é¡»æ¯ä¸è´ç\n    virtual_router_id 51\n    # å®ä¹ä¼åçº§ï¼æ°å­è¶å¤§ï¼ä¼åçº§è¶é«ï¼0-255ï¼ã\n    # å¨åä¸ä¸ªvrrp_instanceä¸ï¼master çä¼åçº§å¿é¡»å¤§äº backup çä¼åçº§\n    priority 100\n    # è®¾å® master ä¸ backup è´è½½åè¡¡å¨ä¹é´åæ­¥æ£æ¥çæ¶é´é´éï¼åä½æ¯ç§\n    advert_int 1\n    authentication {\n        auth_type pass\n        auth_pass 123456\n    }\n    virtual_ipaddress {\n        192.168.100.123/23 brd 192.168.101.255\n    }\n}\n\n\nå¯å¨æå¡\n\nsystemctl start keepalived.service && systemctl enable keepalived.service\n\n\n\n# æµè¯ nfs\n\nå¨ masterä¸æ§è¡ï¼æè¾åº\n\n[root@localhost ~]# ip a | grep  192.168.100.123\n    inet 192.168.100.123/23 brd 192.168.101.255 scope global secondary enp0s3\n\n\nå¨ slaveä¸æ§è¡ï¼æ è¾åº\n\n[root@localhost ~]# ip a | grep  192.168.100.123\n\n\nå³é­ master ä¸keepalivedæµè¯ipæ¯å¦æ´æ¢\n\nå¨ masterä¸\n\nsystemctl stop keepalived\n\n\nå¨ slave ä¸,æè¾åºè¡¨ç¤ºèªå¨åæ¢æå\n\n[root@localhost ~]# ip a | grep  192.168.100.123\n    inet 192.168.100.123/23 brd 192.168.101.255 scope global secondary enp0s3\n\n\n\n# k8séç¾¤nodeèç¹æå¨\n\n# æè½½ç®å½\nmkdir -p /data/nfs-share-123\n# æè½½nfs\nmount -t nfs 192.168.100.123:/data/nfs-share /data/nfs-share-123\n# æ¥ç\ndf -th\nè¾åºéé¢å«æ  192.168.100.111:/data/nfs-share nfs4       54g  1.8g   52g   4% /data1/nfs-data\n# å¸è½½æè½½\numount /data/nfs-share-123\n\n\n\n# è®¾ç½® keepalived èæ¬\n\nå¨å®è£keepalivedçæºå¨ä¸è®¾ç½® keepalived èæ¬\n\n> ip çæ¼ç§»æ¯æ ¹æ® keepalived çå­æ´»æ¥å¤æ­çï¼æä»¥å¨ nfs æä¹åéè¦åæ­¢ keepalived æå¡\n\necho \'systemctl status nfs &>/dev/null\nif [ $? -ne 0 ]; then\n  systemctl start nfs\n  systemctl status nfs &>/dev/null\n  if [ $? -ne 0 ]; then\n    systemctl stop keepalived.service\n  fi\nfi\' >> /usr/local/sbin/task_nfs.sh\n\n\nå å¥å®æ¶ä»»å¡\n\nchmod 777 /usr/local/sbin/task_nfs.sh\ncrontab -e\n# æ·»å å®æ¶ä»»å¡ 5ç§æ§è¡ä¸æ¬¡\n* * * * * sleep 5;/usr/local/sbin/task_nfs.sh &> /dev/null\n\n\nå®ç»ã',charsets:{cjk:!0},lastUpdated:"2022/03/01, 16:23:59",lastUpdatedTimestamp:1646123039e3},{title:"ç¦»çº¿é¨ç½² Kubernetess + KubeSphere",frontmatter:{title:"ç¦»çº¿é¨ç½² Kubernetess + KubeSphere",date:"2022-03-03T13:43:40.000Z",permalink:"/pages/8a1473/"},regularPath:"/18.Kubernetes/02.Kubernetes%20%E5%AE%9E%E8%B7%B5/03.%E7%A6%BB%E7%BA%BF%E9%83%A8%E7%BD%B2%20Kubernetess%20+%20KubeSphere.html",relativePath:"18.Kubernetes/02.Kubernetes å®è·µ/03.ç¦»çº¿é¨ç½² Kubernetess + KubeSphere.md",key:"v-18890533",path:"/pages/8a1473/",headers:[{level:2,title:"èæ¯",slug:"èæ¯",normalizedTitle:"èæ¯",charIndex:100},{level:2,title:"ç¯å¢åå¤",slug:"ç¯å¢åå¤",normalizedTitle:"ç¯å¢åå¤",charIndex:201},{level:3,title:"èç¹",slug:"èç¹",normalizedTitle:"èç¹",charIndex:265},{level:3,title:"ç«¯å£è¦æ±",slug:"ç«¯å£è¦æ±",normalizedTitle:"ç«¯å£è¦æ±",charIndex:683},{level:3,title:"ä¾èµè½¯ä»¶",slug:"ä¾èµè½¯ä»¶",normalizedTitle:"ä¾èµè½¯ä»¶",charIndex:1777},{level:3,title:"å®è£docker",slug:"å®è£docker",normalizedTitle:"å®è£docker",charIndex:1863},{level:3,title:"éåä»åº",slug:"éåä»åº",normalizedTitle:"éåä»åº",charIndex:2370},{level:3,title:"å®è£åä¸è½½ï¼",slug:"å®è£åä¸è½½",normalizedTitle:"å®è£åä¸è½½ï¼",charIndex:2435},{level:2,title:"å®è£æ­¥éª¤ï¼",slug:"å®è£æ­¥éª¤",normalizedTitle:"å®è£æ­¥éª¤ï¼",charIndex:2680},{level:3,title:"1.åå»ºéç¾¤éç½®æä»¶",slug:"_1-åå»ºéç¾¤éç½®æä»¶",normalizedTitle:"1.åå»ºéç¾¤éç½®æä»¶",charIndex:2690},{level:3,title:"2.ç¯å¢åå§å",slug:"_2-ç¯å¢åå§å",normalizedTitle:"2.ç¯å¢åå§å",charIndex:4635},{level:3,title:"3.å¯¼å¥éå",slug:"_3-å¯¼å¥éå",normalizedTitle:"3.å¯¼å¥éå",charIndex:5134},{level:3,title:"4.æ§è¡å®è£",slug:"_4-æ§è¡å®è£",normalizedTitle:"4.æ§è¡å®è£",charIndex:6391},{level:3,title:"5.æ¥çç»æ",slug:"_5-æ¥çç»æ",normalizedTitle:"5.æ¥çç»æ",charIndex:7655}],headersStr:"èæ¯ ç¯å¢åå¤ èç¹ ç«¯å£è¦æ± ä¾èµè½¯ä»¶ å®è£docker éåä»åº å®è£åä¸è½½ï¼ å®è£æ­¥éª¤ï¼ 1.åå»ºéç¾¤éç½®æä»¶ 2.ç¯å¢åå§å 3.å¯¼å¥éå 4.æ§è¡å®è£ 5.æ¥çç»æ",content:'# ä¸æ­¥æå® ARM64 ç¦»çº¿é¨ç½² Kubernetess + KubeSphere\n\næç¤º\n\næ¬æå°ä¸»è¦ä»ç»å¦ä½å¨ ARM64 ç¯å¢ä¸é¨ç½² Kubernetes å KubeSphereã\n\n\n# èæ¯\n\néçæå½å¯¹ä¿¡æ¯å®å¨çæåéè§ï¼å½äº§åçè¶å¿ä¹è¶æ¥è¶æµï¼åæ¬å½äº§æä½ç³»ç»ãå½äº§ CPU ç­ãç±äº ARM æ¶æå½äº§ CPU å¨ç»´æåæ°å¯ä¿¡ååè¿æ§æ¹é¢çæ½å¨ä¼å¿ï¼å¶åºç¨ä¹å°ä¼è¶æ¥è¶å¹¿æ³ã\n\n\n# ç¯å¢åå¤\n\nå®è£è¿ç¨å½å±å°åï¼https://www.bilibili.com/video/BV1VL4y137Fn/\n\n\n# èç¹\n\nkubeSphere æ¯æçæä½ç³»ç»åæ¬ï¼\n\n * Ubuntu 16.04, 18.04\n * Debian Buster, Stretch\n * CentOS/RHEL 7\n * SUSE Linux Enterprise Server 15\n * openEuler\n\nåå¤å·²ä¸ä¸å° CentOS Linux release 7.9.2009 (AltArch) ä¸ºä¾ï¼\n\nä¸»æºå          IPå°å            è§è²       OS          éç½®\nk8s-master   192.168.7.38    master   CentOS7.9   4æ ¸8G\nk8s-node1    192.168.7.20    worker   CentOS7.9   8æ ¸16G\nk8s-node2    192.168.7.187   worker   CentOS7.9   8æ ¸16G\n\n\n# ç«¯å£è¦æ±\n\nKubeSphere éè¦æäºç«¯å£ç¨äºæå¡ä¹é´çéä¿¡ãå¦ææ¨çç½ç»éç½®æé²ç«å¢è§åï¼åéè¦ç¡®ä¿åºç¡è®¾æ½ç»ä»¶å¯ä»¥éè¿ç¹å®ç«¯å£ç¸äºéä¿¡ãè¿äºç«¯å£ç¨ä½æäºè¿ç¨ææå¡çéä¿¡ç«¯ç¹ã\n\næå¡               åè®®               è¡ä¸º      èµ·å§ç«¯å£    ç»æç«¯å£    å¤æ³¨\nssh              TCP              allow   22              \netcd             TCP              allow   2379    2380    \napiserver        TCP              allow   6443            \ncalico           TCP              allow   9099    9100    \nbgp              TCP              allow   179             \nnodeport         TCP              allow   30000   32767   \nmaster           TCP              allow   10250   10258   \ndns              TCP              allow   53              \ndns              UDP              allow   53              \nlocal-registry   TCP              allow   5000            ç¦»çº¿ç¯å¢éè¦\nlocal-apt        TCP              allow   5080            ç¦»çº¿ç¯å¢éè¦\nrpcbind          TCP              allow   111             ä½¿ç¨ NFS æ¶éè¦\nipip             IPENCAP / IPIP   allow                   Calico éè¦ä½¿ç¨ IPIP åè®®\nmetrics-server   TCP              allow   8443            \n\næ³¨æ\n\nå½æ¨ä½¿ç¨ Calico ç½ç»æä»¶å¹¶ä¸å¨äºå¹³å°ä¸ä½¿ç¨ç»å¸ç½ç»è¿è¡éç¾¤æ¶ï¼æ¨éè¦å¯¹æºå°åå¯ç¨ IPENCAP å IPIP åè®®ã\n\n\n# ä¾èµè½¯ä»¶\n\nç¡®ä¿æºå¨å·²ç»å®è£æéä¾èµè½¯ä»¶\n\nyum install curl openssl ebtables socat ipset conntrack -y\n\n\n\n# å®è£docker\n\nKubernetesé»è®¤çå®¹å¨è¿è¡æ¶ä»ç¶æ¯Dockerï¼ä½¿ç¨çæ¯kubeletä¸­åç½®dockershim CRIå®ç°ã\n\nå®è£æéä¾èµ\n\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n\n\néç½®docker yumæº\n\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n\nå®è£ Docker Engine-Community\n\nsudo yum install docker-ce docker-ce-cli containerd.io -y\n\n\nå¯å¨ Docker CE å¹¶è®¾ç½®å¼æºèªå¯å¨\n\nsudo systemctl start docker && sudo systemctl enable docker\n\n\næç¤º\n\nå¯å°å®è£äºææä¾èµè½¯ä»¶çæä½ç³»ç»å¶ä½æç³»ç»éåä½¿ç¨ï¼é¿åæ¯å°æºå¨é½å®è£ä¾èµè½¯ä»¶ï¼å³å¯æåäº¤ä»é¨ç½²æçï¼åå¯é¿åä¾èµé®é¢çåçã\n\n\n# éåä»åº\n\nå¯ä½¿ç¨harboræå¶ä»ç¬¬ä¸æ¹éåä»åºãå¨æ¥ä¸æ¥çå®è£æ­¥éª¤ä¸­ï¼åå§åç¯å¢è¿ç¨æä»¬ä½¿ç¨kkåå»ºèªç­¾åéåä»åºã\n\n\n# å®è£åä¸è½½ï¼\n\næç¤º\n\nè¯¥å®è£åä»åå« Kubernetes + KubeSphere-core éåï¼å¦éæ´å¤ç»ä»¶ arm64 éåï¼å¯èªè¡ç¼è¯æå»ºã\n\n# md5: 3ad57823faf2dfe945e2fe3dcfd4ace9\ncurl -Ok https://kubesphere-installer.pek3b.qingstor.com/offline/v3.0.0/kubesphere-core-v3.0.0-offline-linux-arm64.tar.gz\n\n\n\n# å®è£æ­¥éª¤ï¼\n\n\n# 1.åå»ºéç¾¤éç½®æä»¶\n\nå®è£åè§£ååè¿å¥kubesphere-core-v3.0.0-offline-linux-arm64\n\n# è§£å\ntar -zxvf kubesphere-core-v3.0.0-offline-linux-arm64.tar.gz\n\n\n[root@node1 kubesphere-core-v3.0.0-offline-linux-arm64]# ls -al \ntotal 55364\ndrwxr-xr-x  6 root root     4096 Mar  3 19:27 .\ndr-xr-x---. 8 root root     4096 Mar  3 18:02 ..\ndrwxr-xr-x  3 root root     4096 Oct 27  2020 charts\n-rw-r--r--  1 root root      727 Mar  3 17:35 config-sample.yaml\ndrwxr-xr-x  2 root root     4096 Mar  3 17:24 dependencies\n-rwxr-xr-x  1 root root 56661021 Dec  3  2020 kk\ndrwxr-xr-x  4 root root     4096 Dec  3  2020 kubekey\ndrwxr-xr-x  3 root root     4096 Dec 10  2020 kubesphere-images-v3.0.0\n\n\n./kk create config --with-kubesphere v3.0.0\n\n\næ ¹æ®å®éç¯å¢ä¿¡æ¯ä¿®æ¹çæçéç½®æä»¶config-sample.yamlï¼ä¹å¯ä½¿ç¨-fåæ°èªå®ä¹éç½®æä»¶è·¯å¾ãkk è¯¦ç»ç¨æ³å¯åèï¼https://github.com/kubesphere/kubekey\n\næ³¨æ\n\nå¡«åæ­£ç¡®çç§æä»åºå°åprivateRegistryï¼å¦å·²åå¤å¥½ç§æä»åºå¯è®¾ç½®ä¸ºå·²æä»åºå°åï¼è¥ä½¿ç¨ kk åå»ºç§æä»åºï¼åè¯¥åæ°è®¾ç½®ä¸ºï¼dockerhub.kubekey.localï¼\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \n\n\nÂ \n\nÂ \n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\napiVersion: kubekey.kubesphere.io/v1alpha1\nkind: Cluster\nmetadata:\n  name: sample\nspec:\n  hosts:\n  # æ³¨ææå®èç¹ arch ä¸º arm64\n  - {name: k8s-master, address: 192.168.7.38, internalAddress: 192.168.7.38, password: Qcloud@123, arch: arm64}\n  - {name: k8s-node1, address: 192.168.7.20, internalAddress: 192.168.7.20, password: Qcloud@123, arch: arm64}\n  - {name: k8s-node2, address: 192.168.7.187, internalAddress: 192.168.7.187, password: Qcloud@123, arch: arm64}\n  roleGroups:\n    etcd:\n    - k8s-master\n    master:\n    - k8s-master\n    worker:\n    - k8s-node1\n    - k8s-node2\n  controlPlaneEndpoint:\n    domain: lb.kubesphere.local\n    address: ""\n    port: 6443\n  kubernetes:\n    version: v1.17.9\n    imageRepo: kubesphere\n    clusterName: cluster.local\n  network:\n    plugin: calico\n    kubePodsCIDR: 10.233.64.0/18\n    kubeServiceCIDR: 10.233.0.0/18\n  registry:\n    registryMirrors: []\n    insecureRegistries: []\n    # è®¾ç½®ç§æä»åº\n    privateRegistry: dockerhub.kubekey.local\n  addons: []\n  \n\n\n\n# 2.ç¯å¢åå§å\n\næç¤º\n\nè¥å·²å®è£ç¸å³ä¾èµï¼å¹¶ä¸å·²ç»åå¤å¥½éåä»åºï¼å¯ç¥è¿è¯¥æ­¥éª¤ã (ä¸ºé¿åä¾èµé®é¢çäº§çï¼å»ºè®®æåå®è£ç¸å³ä¾èµæä½¿ç¨å·²å®è£ç¸å³ä¾èµçç³»ç»éåæ§è¡å®è£)\n\næ³¨æ\n\nå¦éä½¿ç¨kkåå»ºèªç­¾åéåä»åºï¼åä¼å¨å½åæºå¨å¯å¨docker registryæå¡ï¼è¯·ç¡®ä¿å½åæºå¨å­å¨registry:2ï¼å¦æ²¡æï¼å¯ä»kubesphere-images-v3.0.0/registry.tarä¸­å¯¼å¥ã\n\n# å¯¼å¥å½ä»¤ï¼\ndocker load < registry.tar\n\n\næ³¨æ\n\nç±kkå¯å¨çéåä»åºç«¯å£ä¸º443ï¼è¯·ç¡®ä¿æææºå¨åå¯è®¿é®å½åæºå¨443ç«¯å£ãéåæ°æ®å­å¨å°æ¬å°/mnt/registry (å»ºè®®åç¬æç)ã\n\n# æ§è¡å¦ä¸å½ä»¤ä¼å¯¹éç½®æä»¶ä¸­ææèç¹å®è£ä¾èµï¼\n./kk init os -f config-sample.yaml -s ./dependencies/\n\n# å¦éä½¿ç¨kkåå»ºèªç­¾åéåä»åºï¼å¯æ§è¡å¦ä¸å½ä»¤ï¼\n./kk init os -f config-sample.yaml -s ./dependencies/ --add-images-repo\n\n\n\n# 3.å¯¼å¥éå\n\nè¿å¥kubesphere-all-v3.0.0-offline-linux-arm64/kubesphere-images-v3.0.0\n\n[root@node1 kubesphere-images-v3.0.0]# ls -al \ntotal 24540\ndrwxr-xr-x 3 root root     4096 Dec 10  2020 .\ndrwxr-xr-x 6 root root     4096 Mar  3 21:45 ..\n-rw-r--r-- 1 root root     2890 Dec 10  2020 images-list-v3.0.0.txt\ndrwxr-xr-x 2 root root     4096 Dec 10  2020 kubesphere-images\n-rwxr-xr-x 1 root root     6762 Nov 10  2020 offline-installation-tool.sh\n-rw------- 1 root root 25104384 Oct 27  2020 registry.tar\n\n\nä½¿ç¨ offline-installation-tool.sh å°éåå¯¼å¥ä¹ååå¤çä»åºä¸­ï¼\n\næ³¨æ\n\nèæ¬åéåä»åºå°åè¯·å¡«åçå®ä»åºå°åï¼dockerhub.kubekey.local\n\n./offline-installation-tool.sh -l images-list-v3.0.0.txt -d kubesphere-images -r dockerhub.kubekey.local\n\n\nä½¿ç¨kkåå»ºèªç­¾åéåä»åºè¯ä¹¦é®é¢ï¼å¦æéå°ä¸ä¸æåµï¼å¯ä»¥éè¿ä¿®æ¹docker.service éç½®æä»¶æå®è¯ä¹¦éªè¯åæ°\n\næ¥éä¿¡æ¯\n\nGet "https://dockerhub.kubekey.local/v2/": x509: certificate relies on legacy Common Name field, use SANs or temporarily enable Common Name matching with GODEBUG=x509ignoreCN=0\n\nè§£å³æ¹æ³\n\nvi /usr/lib/systemd/system/docker.service\n\n\næ¾å°[Service]éç½®èç¹ï¼ä¸é¢è¿½å å¦ä¸åå®¹ï¼\n\n\n\n\nÂ \n\n\n\n...\n[Service]\nEnvironment=GODEBUG=x509ignoreCN=0\n...\n\n\néå¯dockeræå¡\n\nsystemctl daemon-reload\nsystemctl restart docker.service\n\n\nè¯¦æåèï¼https://forum.gitlab.com/t/docker-push-to-gilab-registry-self-signed-certs-problem/52831/3\n\n\n# 4.æ§è¡å®è£\n\næç¤º\n\nä»¥ä¸åå¤å·¥ä½å®æä¸åæ¬¡æ£æ¥éç½®æä»¶æ è¯¯åï¼æ§è¡å®è£ã\n\n./kk create cluster -f config-sample.yaml --with-kubesphere\n\n\næ³¨æ\n\nå¦æä¸­éå®è£å¤±è´¥æ§è¡å¦ä¸å½ä»¤å é¤éç¾¤ä»¥ååéæ°æ§è¡å®è£å½ä»¤\n\n./kk delete cluster -f config-sample.yaml\n\n\nå®è£å®æåæ§å¶å°è¾åºåå®¹å¦ä¸ï¼\n\n#####################################################\n###              Welcome to KubeSphere!           ###\n#####################################################\n\nConsole: http://192.168.7.38:30880\nAccount: admin\nPassword: P@88w0rd\n\nNOTESï¼\n  1. After logging into the console, please check the\n     monitoring status of service components in\n     the "Cluster Management". If any service is not\n     ready, please wait patiently until all components \n     are ready.\n  2. Please modify the default password after login.\n\n#####################################################\nhttps://kubesphere.io             2022-03-04 03:34:18\n#####################################################\nINFO[02:16:07 CST] Installation is complete.\n\nPlease check the result using the command:\n\n       kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath=\'{.items[0].metadata.name}\') -f\n\n\n\nå®è£æ¥å¿æ¥ç\n\nkubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath=\'{.items[0].metadata.name}\') -f\n\n\n\n# 5.æ¥çç»æ\n\næå¼æµè§å¨è®¿é®KubeSphereç®¡æ§å°ï¼http://117.78.8.124:30880/login\n\n> Account: admin\n> \n> Password: P@88w0rd\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',normalizedContent:'# ä¸æ­¥æå® arm64 ç¦»çº¿é¨ç½² kubernetess + kubesphere\n\næç¤º\n\næ¬æå°ä¸»è¦ä»ç»å¦ä½å¨ arm64 ç¯å¢ä¸é¨ç½² kubernetes å kubesphereã\n\n\n# èæ¯\n\néçæå½å¯¹ä¿¡æ¯å®å¨çæåéè§ï¼å½äº§åçè¶å¿ä¹è¶æ¥è¶æµï¼åæ¬å½äº§æä½ç³»ç»ãå½äº§ cpu ç­ãç±äº arm æ¶æå½äº§ cpu å¨ç»´æåæ°å¯ä¿¡ååè¿æ§æ¹é¢çæ½å¨ä¼å¿ï¼å¶åºç¨ä¹å°ä¼è¶æ¥è¶å¹¿æ³ã\n\n\n# ç¯å¢åå¤\n\nå®è£è¿ç¨å½å±å°åï¼https://www.bilibili.com/video/bv1vl4y137fn/\n\n\n# èç¹\n\nkubesphere æ¯æçæä½ç³»ç»åæ¬ï¼\n\n * ubuntu 16.04, 18.04\n * debian buster, stretch\n * centos/rhel 7\n * suse linux enterprise server 15\n * openeuler\n\nåå¤å·²ä¸ä¸å° centos linux release 7.9.2009 (altarch) ä¸ºä¾ï¼\n\nä¸»æºå          ipå°å            è§è²       os          éç½®\nk8s-master   192.168.7.38    master   centos7.9   4æ ¸8g\nk8s-node1    192.168.7.20    worker   centos7.9   8æ ¸16g\nk8s-node2    192.168.7.187   worker   centos7.9   8æ ¸16g\n\n\n# ç«¯å£è¦æ±\n\nkubesphere éè¦æäºç«¯å£ç¨äºæå¡ä¹é´çéä¿¡ãå¦ææ¨çç½ç»éç½®æé²ç«å¢è§åï¼åéè¦ç¡®ä¿åºç¡è®¾æ½ç»ä»¶å¯ä»¥éè¿ç¹å®ç«¯å£ç¸äºéä¿¡ãè¿äºç«¯å£ç¨ä½æäºè¿ç¨ææå¡çéä¿¡ç«¯ç¹ã\n\næå¡               åè®®               è¡ä¸º      èµ·å§ç«¯å£    ç»æç«¯å£    å¤æ³¨\nssh              tcp              allow   22              \netcd             tcp              allow   2379    2380    \napiserver        tcp              allow   6443            \ncalico           tcp              allow   9099    9100    \nbgp              tcp              allow   179             \nnodeport         tcp              allow   30000   32767   \nmaster           tcp              allow   10250   10258   \ndns              tcp              allow   53              \ndns              udp              allow   53              \nlocal-registry   tcp              allow   5000            ç¦»çº¿ç¯å¢éè¦\nlocal-apt        tcp              allow   5080            ç¦»çº¿ç¯å¢éè¦\nrpcbind          tcp              allow   111             ä½¿ç¨ nfs æ¶éè¦\nipip             ipencap / ipip   allow                   calico éè¦ä½¿ç¨ ipip åè®®\nmetrics-server   tcp              allow   8443            \n\næ³¨æ\n\nå½æ¨ä½¿ç¨ calico ç½ç»æä»¶å¹¶ä¸å¨äºå¹³å°ä¸ä½¿ç¨ç»å¸ç½ç»è¿è¡éç¾¤æ¶ï¼æ¨éè¦å¯¹æºå°åå¯ç¨ ipencap å ipip åè®®ã\n\n\n# ä¾èµè½¯ä»¶\n\nç¡®ä¿æºå¨å·²ç»å®è£æéä¾èµè½¯ä»¶\n\nyum install curl openssl ebtables socat ipset conntrack -y\n\n\n\n# å®è£docker\n\nkubernetesé»è®¤çå®¹å¨è¿è¡æ¶ä»ç¶æ¯dockerï¼ä½¿ç¨çæ¯kubeletä¸­åç½®dockershim criå®ç°ã\n\nå®è£æéä¾èµ\n\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n\n\néç½®docker yumæº\n\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n\nå®è£ docker engine-community\n\nsudo yum install docker-ce docker-ce-cli containerd.io -y\n\n\nå¯å¨ docker ce å¹¶è®¾ç½®å¼æºèªå¯å¨\n\nsudo systemctl start docker && sudo systemctl enable docker\n\n\næç¤º\n\nå¯å°å®è£äºææä¾èµè½¯ä»¶çæä½ç³»ç»å¶ä½æç³»ç»éåä½¿ç¨ï¼é¿åæ¯å°æºå¨é½å®è£ä¾èµè½¯ä»¶ï¼å³å¯æåäº¤ä»é¨ç½²æçï¼åå¯é¿åä¾èµé®é¢çåçã\n\n\n# éåä»åº\n\nå¯ä½¿ç¨harboræå¶ä»ç¬¬ä¸æ¹éåä»åºãå¨æ¥ä¸æ¥çå®è£æ­¥éª¤ä¸­ï¼åå§åç¯å¢è¿ç¨æä»¬ä½¿ç¨kkåå»ºèªç­¾åéåä»åºã\n\n\n# å®è£åä¸è½½ï¼\n\næç¤º\n\nè¯¥å®è£åä»åå« kubernetes + kubesphere-core éåï¼å¦éæ´å¤ç»ä»¶ arm64 éåï¼å¯èªè¡ç¼è¯æå»ºã\n\n# md5: 3ad57823faf2dfe945e2fe3dcfd4ace9\ncurl -ok https://kubesphere-installer.pek3b.qingstor.com/offline/v3.0.0/kubesphere-core-v3.0.0-offline-linux-arm64.tar.gz\n\n\n\n# å®è£æ­¥éª¤ï¼\n\n\n# 1.åå»ºéç¾¤éç½®æä»¶\n\nå®è£åè§£ååè¿å¥kubesphere-core-v3.0.0-offline-linux-arm64\n\n# è§£å\ntar -zxvf kubesphere-core-v3.0.0-offline-linux-arm64.tar.gz\n\n\n[root@node1 kubesphere-core-v3.0.0-offline-linux-arm64]# ls -al \ntotal 55364\ndrwxr-xr-x  6 root root     4096 mar  3 19:27 .\ndr-xr-x---. 8 root root     4096 mar  3 18:02 ..\ndrwxr-xr-x  3 root root     4096 oct 27  2020 charts\n-rw-r--r--  1 root root      727 mar  3 17:35 config-sample.yaml\ndrwxr-xr-x  2 root root     4096 mar  3 17:24 dependencies\n-rwxr-xr-x  1 root root 56661021 dec  3  2020 kk\ndrwxr-xr-x  4 root root     4096 dec  3  2020 kubekey\ndrwxr-xr-x  3 root root     4096 dec 10  2020 kubesphere-images-v3.0.0\n\n\n./kk create config --with-kubesphere v3.0.0\n\n\næ ¹æ®å®éç¯å¢ä¿¡æ¯ä¿®æ¹çæçéç½®æä»¶config-sample.yamlï¼ä¹å¯ä½¿ç¨-fåæ°èªå®ä¹éç½®æä»¶è·¯å¾ãkk è¯¦ç»ç¨æ³å¯åèï¼https://github.com/kubesphere/kubekey\n\næ³¨æ\n\nå¡«åæ­£ç¡®çç§æä»åºå°åprivateregistryï¼å¦å·²åå¤å¥½ç§æä»åºå¯è®¾ç½®ä¸ºå·²æä»åºå°åï¼è¥ä½¿ç¨ kk åå»ºç§æä»åºï¼åè¯¥åæ°è®¾ç½®ä¸ºï¼dockerhub.kubekey.localï¼\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \n\n\nÂ \n\nÂ \n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\napiversion: kubekey.kubesphere.io/v1alpha1\nkind: cluster\nmetadata:\n  name: sample\nspec:\n  hosts:\n  # æ³¨ææå®èç¹ arch ä¸º arm64\n  - {name: k8s-master, address: 192.168.7.38, internaladdress: 192.168.7.38, password: qcloud@123, arch: arm64}\n  - {name: k8s-node1, address: 192.168.7.20, internaladdress: 192.168.7.20, password: qcloud@123, arch: arm64}\n  - {name: k8s-node2, address: 192.168.7.187, internaladdress: 192.168.7.187, password: qcloud@123, arch: arm64}\n  rolegroups:\n    etcd:\n    - k8s-master\n    master:\n    - k8s-master\n    worker:\n    - k8s-node1\n    - k8s-node2\n  controlplaneendpoint:\n    domain: lb.kubesphere.local\n    address: ""\n    port: 6443\n  kubernetes:\n    version: v1.17.9\n    imagerepo: kubesphere\n    clustername: cluster.local\n  network:\n    plugin: calico\n    kubepodscidr: 10.233.64.0/18\n    kubeservicecidr: 10.233.0.0/18\n  registry:\n    registrymirrors: []\n    insecureregistries: []\n    # è®¾ç½®ç§æä»åº\n    privateregistry: dockerhub.kubekey.local\n  addons: []\n  \n\n\n\n# 2.ç¯å¢åå§å\n\næç¤º\n\nè¥å·²å®è£ç¸å³ä¾èµï¼å¹¶ä¸å·²ç»åå¤å¥½éåä»åºï¼å¯ç¥è¿è¯¥æ­¥éª¤ã (ä¸ºé¿åä¾èµé®é¢çäº§çï¼å»ºè®®æåå®è£ç¸å³ä¾èµæä½¿ç¨å·²å®è£ç¸å³ä¾èµçç³»ç»éåæ§è¡å®è£)\n\næ³¨æ\n\nå¦éä½¿ç¨kkåå»ºèªç­¾åéåä»åºï¼åä¼å¨å½åæºå¨å¯å¨docker registryæå¡ï¼è¯·ç¡®ä¿å½åæºå¨å­å¨registry:2ï¼å¦æ²¡æï¼å¯ä»kubesphere-images-v3.0.0/registry.tarä¸­å¯¼å¥ã\n\n# å¯¼å¥å½ä»¤ï¼\ndocker load < registry.tar\n\n\næ³¨æ\n\nç±kkå¯å¨çéåä»åºç«¯å£ä¸º443ï¼è¯·ç¡®ä¿æææºå¨åå¯è®¿é®å½åæºå¨443ç«¯å£ãéåæ°æ®å­å¨å°æ¬å°/mnt/registry (å»ºè®®åç¬æç)ã\n\n# æ§è¡å¦ä¸å½ä»¤ä¼å¯¹éç½®æä»¶ä¸­ææèç¹å®è£ä¾èµï¼\n./kk init os -f config-sample.yaml -s ./dependencies/\n\n# å¦éä½¿ç¨kkåå»ºèªç­¾åéåä»åºï¼å¯æ§è¡å¦ä¸å½ä»¤ï¼\n./kk init os -f config-sample.yaml -s ./dependencies/ --add-images-repo\n\n\n\n# 3.å¯¼å¥éå\n\nè¿å¥kubesphere-all-v3.0.0-offline-linux-arm64/kubesphere-images-v3.0.0\n\n[root@node1 kubesphere-images-v3.0.0]# ls -al \ntotal 24540\ndrwxr-xr-x 3 root root     4096 dec 10  2020 .\ndrwxr-xr-x 6 root root     4096 mar  3 21:45 ..\n-rw-r--r-- 1 root root     2890 dec 10  2020 images-list-v3.0.0.txt\ndrwxr-xr-x 2 root root     4096 dec 10  2020 kubesphere-images\n-rwxr-xr-x 1 root root     6762 nov 10  2020 offline-installation-tool.sh\n-rw------- 1 root root 25104384 oct 27  2020 registry.tar\n\n\nä½¿ç¨ offline-installation-tool.sh å°éåå¯¼å¥ä¹ååå¤çä»åºä¸­ï¼\n\næ³¨æ\n\nèæ¬åéåä»åºå°åè¯·å¡«åçå®ä»åºå°åï¼dockerhub.kubekey.local\n\n./offline-installation-tool.sh -l images-list-v3.0.0.txt -d kubesphere-images -r dockerhub.kubekey.local\n\n\nä½¿ç¨kkåå»ºèªç­¾åéåä»åºè¯ä¹¦é®é¢ï¼å¦æéå°ä¸ä¸æåµï¼å¯ä»¥éè¿ä¿®æ¹docker.service éç½®æä»¶æå®è¯ä¹¦éªè¯åæ°\n\næ¥éä¿¡æ¯\n\nget "https://dockerhub.kubekey.local/v2/": x509: certificate relies on legacy common name field, use sans or temporarily enable common name matching with godebug=x509ignorecn=0\n\nè§£å³æ¹æ³\n\nvi /usr/lib/systemd/system/docker.service\n\n\næ¾å°[service]éç½®èç¹ï¼ä¸é¢è¿½å å¦ä¸åå®¹ï¼\n\n\n\n\nÂ \n\n\n\n...\n[service]\nenvironment=godebug=x509ignorecn=0\n...\n\n\néå¯dockeræå¡\n\nsystemctl daemon-reload\nsystemctl restart docker.service\n\n\nè¯¦æåèï¼https://forum.gitlab.com/t/docker-push-to-gilab-registry-self-signed-certs-problem/52831/3\n\n\n# 4.æ§è¡å®è£\n\næç¤º\n\nä»¥ä¸åå¤å·¥ä½å®æä¸åæ¬¡æ£æ¥éç½®æä»¶æ è¯¯åï¼æ§è¡å®è£ã\n\n./kk create cluster -f config-sample.yaml --with-kubesphere\n\n\næ³¨æ\n\nå¦æä¸­éå®è£å¤±è´¥æ§è¡å¦ä¸å½ä»¤å é¤éç¾¤ä»¥ååéæ°æ§è¡å®è£å½ä»¤\n\n./kk delete cluster -f config-sample.yaml\n\n\nå®è£å®æåæ§å¶å°è¾åºåå®¹å¦ä¸ï¼\n\n#####################################################\n###              welcome to kubesphere!           ###\n#####################################################\n\nconsole: http://192.168.7.38:30880\naccount: admin\npassword: p@88w0rd\n\nnotesï¼\n  1. after logging into the console, please check the\n     monitoring status of service components in\n     the "cluster management". if any service is not\n     ready, please wait patiently until all components \n     are ready.\n  2. please modify the default password after login.\n\n#####################################################\nhttps://kubesphere.io             2022-03-04 03:34:18\n#####################################################\ninfo[02:16:07 cst] installation is complete.\n\nplease check the result using the command:\n\n       kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath=\'{.items[0].metadata.name}\') -f\n\n\n\nå®è£æ¥å¿æ¥ç\n\nkubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath=\'{.items[0].metadata.name}\') -f\n\n\n\n# 5.æ¥çç»æ\n\næå¼æµè§å¨è®¿é®kubesphereç®¡æ§å°ï¼http://117.78.8.124:30880/login\n\n> account: admin\n> \n> password: p@88w0rd\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',charsets:{cjk:!0},lastUpdated:"2022/03/04, 04:07:03",lastUpdatedTimestamp:1646338023e3},{title:"ä»ç»",frontmatter:{title:"ä»ç»",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/1b4b4e/"},regularPath:"/19.Spring%20Security%20OAuth2/01.Spring%20Security%20OAuth2/01.%E4%BB%8B%E7%BB%8D.html",relativePath:"19.Spring Security OAuth2/01.Spring Security OAuth2/01.ä»ç».md",key:"v-74c698d0",path:"/pages/1b4b4e/",headers:[{level:2,title:"ä»ä¹æ¯ OAuth",slug:"ä»ä¹æ¯-oauth",normalizedTitle:"ä»ä¹æ¯ oauth",charIndex:9},{level:2,title:"ä»ä¹æ¯ Spring Security",slug:"ä»ä¹æ¯-spring-security",normalizedTitle:"ä»ä¹æ¯ spring security",charIndex:379}],headersStr:"ä»ä¹æ¯ OAuth ä»ä¹æ¯ Spring Security",content:"# ä»ç»\n\n\n# ä»ä¹æ¯ OAuth\n\nOAuth(å¼æ¾ææ)æ¯ä¸ä¸ªå¼æ¾æ åï¼åè®¸ç¨æ·ææç¬¬ä¸æ¹åºç¨è®¿é®ä»ä»¬å­å¨å¨å¦å¤çæå¡æä¾èä¸çä¿¡æ¯ï¼èä¸ éè¦å°ç¨æ·ååå¯ç æä¾ç»ç¬¬ä¸æ¹åºç¨æåäº«ä»ä»¬æ°æ®çææåå®¹ãOAuth2.0æ¯OAuthåè®®çå»¶ç»­çæ¬ï¼ä½ä¸å åå¼å®¹OAuth 1.0å³å®å¨åºæ­¢äºOAuth1.0ãå¾å¤å¤§å¬å¸å¦Googleï¼Yahooï¼Microsoftç­é½æä¾äºOAUTHè®¤è¯æ å¡ï¼è¿äºé½è¶³ä»¥è¯´æOAUTHæ åéæ¸æä¸ºå¼æ¾èµæºææçæ åã\n\nOauthåè®®ç®ååå±å°2.0çæ¬ï¼1.0çæ¬è¿äºå¤æï¼2.0çæ¬å·²å¾å°å¹¿æ³åºç¨ã\n\nåè:https://baike.baidu.com/item/oAuth/7153134?fr=aladdin\n\nOauthåè®®:https://tools.ietf.org/html/rfc6749\n\n\n# ä»ä¹æ¯ Spring Security\n\nSpring Security æ¯ä¸ä¸ªå®å¨æ¡æ¶ï¼åèº«æ¯ Acegi Securityï¼è½å¤ä¸º Spring ä¼ä¸åºç¨ç³»ç»æä¾å£°æå¼çå®å¨è®¿é®æ§å¶ãSpring Security åºäº Servlet è¿æ»¤å¨ãIoC å AOPï¼ä¸º Web è¯·æ±åæ¹æ³è°ç¨æä¾èº«ä»½ç¡®è®¤åææå¤çï¼é¿åäºä»£ç è¦åï¼åå°äºå¤§ééå¤ä»£ç å·¥ä½ã",normalizedContent:"# ä»ç»\n\n\n# ä»ä¹æ¯ oauth\n\noauth(å¼æ¾ææ)æ¯ä¸ä¸ªå¼æ¾æ åï¼åè®¸ç¨æ·ææç¬¬ä¸æ¹åºç¨è®¿é®ä»ä»¬å­å¨å¨å¦å¤çæå¡æä¾èä¸çä¿¡æ¯ï¼èä¸ éè¦å°ç¨æ·ååå¯ç æä¾ç»ç¬¬ä¸æ¹åºç¨æåäº«ä»ä»¬æ°æ®çææåå®¹ãoauth2.0æ¯oauthåè®®çå»¶ç»­çæ¬ï¼ä½ä¸å åå¼å®¹oauth 1.0å³å®å¨åºæ­¢äºoauth1.0ãå¾å¤å¤§å¬å¸å¦googleï¼yahooï¼microsoftç­é½æä¾äºoauthè®¤è¯æ å¡ï¼è¿äºé½è¶³ä»¥è¯´æoauthæ åéæ¸æä¸ºå¼æ¾èµæºææçæ åã\n\noauthåè®®ç®ååå±å°2.0çæ¬ï¼1.0çæ¬è¿äºå¤æï¼2.0çæ¬å·²å¾å°å¹¿æ³åºç¨ã\n\nåè:https://baike.baidu.com/item/oauth/7153134?fr=aladdin\n\noauthåè®®:https://tools.ietf.org/html/rfc6749\n\n\n# ä»ä¹æ¯ spring security\n\nspring security æ¯ä¸ä¸ªå®å¨æ¡æ¶ï¼åèº«æ¯ acegi securityï¼è½å¤ä¸º spring ä¼ä¸åºç¨ç³»ç»æä¾å£°æå¼çå®å¨è®¿é®æ§å¶ãspring security åºäº servlet è¿æ»¤å¨ãioc å aopï¼ä¸º web è¯·æ±åæ¹æ³è°ç¨æä¾èº«ä»½ç¡®è®¤åææå¤çï¼é¿åäºä»£ç è¦åï¼åå°äºå¤§ééå¤ä»£ç å·¥ä½ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"ä¸ºä»ä¹éè¦ OAuth2",frontmatter:{title:"ä¸ºä»ä¹éè¦ OAuth2",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/17b300/"},regularPath:"/19.Spring%20Security%20OAuth2/01.Spring%20Security%20OAuth2/02.%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%20OAuth2.html",relativePath:"19.Spring Security OAuth2/01.Spring Security OAuth2/02.ä¸ºä»ä¹éè¦ OAuth2.md",key:"v-78a70910",path:"/pages/17b300/",headers:[{level:2,title:"åºç¨åºæ¯",slug:"åºç¨åºæ¯",normalizedTitle:"åºç¨åºæ¯",charIndex:19},{level:2,title:"åè¯è§£é",slug:"åè¯è§£é",normalizedTitle:"åè¯è§£é",charIndex:459},{level:2,title:"äº¤äºè¿ç¨",slug:"äº¤äºè¿ç¨",normalizedTitle:"äº¤äºè¿ç¨",charIndex:1035}],headersStr:"åºç¨åºæ¯ åè¯è§£é äº¤äºè¿ç¨",content:'# ä¸ºä»ä¹éè¦ OAuth2\n\n\n# åºç¨åºæ¯\n\næä»¬åè®¾ä½ æä¸ä¸ªâäºç¬è®°âäº§åï¼å¹¶æä¾äºâäºç¬è®°æå¡âåâäºç¸åæå¡âï¼æ­¤æ¶ç¨æ·éè¦å¨ä¸åçè®¾å¤ï¼PCãAndroidãiPhoneãTVãWatchï¼ä¸å»è®¿é®è¿äºâèµæºâï¼ç¬è®°ï¼å¾çï¼\n\né£ä¹ç¨æ·å¦ä½æè½è®¿é®å±äºèªå·±çé£é¨åèµæºå¢ï¼æ­¤æ¶ä¼ ç»çåæ³å°±æ¯æä¾èªå·±çè´¦å·åå¯ç ç»æä»¬çâäºç¬è®°âï¼ç»å½æååå°±å¯ä»¥è·åèµæºäºãä½è¿æ ·çåæ³ä¼æä»¥ä¸å ä¸ªé®é¢ï¼\n\n * âäºç¬è®°æå¡âåâäºç¸åæå¡âä¼åå«é¨ç½²ï¼é¾éæä»¬è¦åå«ç»å½åï¼\n * å¦ææç¬¬ä¸æ¹åºç¨ç¨åºæ³è¦æ¥å¥æä»¬çâäºç¬è®°âï¼é¾ééè¦ç¨æ·æä¾è´¦å·åå¯ç ç»ç¬¬ä¸æ¹åºç¨ç¨åºï¼è®©ä»è®°å½ååè®¿é®æä»¬çèµæºåï¼\n * ç¨æ·å¦ä½éå¶ç¬¬ä¸æ¹åºç¨ç¨åºå¨æä»¬âäºç¬è®°âçææèå´åä½¿ç¨æéï¼é¾éæææèµæé½æ°¸ä¹æ´é²ç»å®åï¼\n * å¦æç¨æ·ä¿®æ¹äºå¯ç æ¶åäºæéï¼é£ä¹ææç¬¬ä¸æ¹åºç¨ç¨åºä¼å¨é¨å¤±æã\n * åªè¦æä¸ä¸ªæ¥å¥çç¬¬ä¸æ¹åºç¨ç¨åºé­å°ç ´è§£ï¼é£ä¹ç¨æ·çå¯ç å°±ä¼æ³é²ï¼åæä¸å ªè®¾æ³ã\n\nä¸ºäºè§£å³å¦ä¸é®é¢ï¼OAuth åºç¨èçã\n\n\n# åè¯è§£é\n\n * ç¬¬ä¸æ¹åºç¨ç¨åºï¼Third-party applicationï¼ï¼ åç§°ä¹ä¸ºå®¢æ·ç«¯ï¼clientï¼ï¼æ¯å¦ä¸èä¸­æå°çè®¾å¤ï¼PCãAndroidãiPhoneãTVãWatchï¼ï¼æä»¬ä¼å¨è¿äºè®¾å¤ä¸­å®è£æä»¬èªå·±ç åç APPãåæ¯å¦æä»¬çäº§åæ³è¦ä½¿ç¨ QQãå¾®ä¿¡ç­ç¬¬ä¸æ¹ç»å½ãå¯¹æä»¬çäº§åæ¥è¯´ï¼QQãå¾®ä¿¡ç»å½æ¯ç¬¬ä¸æ¹ç»å½ç³»ç»ãæä»¬åéè¦ç¬¬ä¸æ¹ç»å½ç³»ç»çèµæºï¼å¤´åãæµç§°ç­ï¼ãå¯¹äº QQãå¾®ä¿¡ç­ç³»ç»æä»¬åæ¯ç¬¬ä¸æ¹åºç¨ç¨åºã\n * HTTP æå¡æä¾åï¼HTTP serviceï¼ï¼ æä»¬çäºç¬è®°äº§åä»¥å QQãå¾®ä¿¡ç­é½å¯ä»¥ç§°ä¹ä¸ºâæå¡æä¾åâã\n * èµæºææèï¼Resource Ownerï¼ï¼ åç§°ä¹ä¸ºç¨æ·ï¼userï¼ã\n * ç¨æ·ä»£çï¼User Agentï¼ï¼ æ¯å¦æµè§å¨ï¼ä»£æ¿ç¨æ·å»è®¿é®è¿äºèµæºã\n * è®¤è¯æå¡å¨ï¼Authorization serverï¼ï¼ å³æå¡æä¾åä¸é¨ç¨æ¥å¤çè®¤è¯çæå¡å¨ï¼ç®åç¹è¯´å°±æ¯ç»å½åè½ï¼éªè¯ç¨æ·çè´¦å·å¯ç æ¯å¦æ­£ç¡®ä»¥ååéç¸åºçæéï¼\n * èµæºæå¡å¨ï¼Resource serverï¼ï¼ å³æå¡æä¾åå­æ¾ç¨æ·çæçèµæºçæå¡å¨ãå®ä¸è®¤è¯æå¡å¨ï¼å¯ä»¥æ¯åä¸å°æå¡å¨ï¼ä¹å¯ä»¥æ¯ä¸åçæå¡å¨ãç®åç¹è¯´å°±æ¯èµæºçè®¿é®å¥å£ï¼æ¯å¦ä¸èä¸­æå°çâäºç¬è®°æå¡âåâäºç¸åæå¡âé½å¯ä»¥ç§°ä¹ä¸ºèµæºæå¡å¨ã\n\n\n# äº¤äºè¿ç¨\n\nOAuth å¨ "å®¢æ·ç«¯" ä¸ "æå¡æä¾å" ä¹é´ï¼è®¾ç½®äºä¸ä¸ªææå±ï¼authorization layerï¼ã"å®¢æ·ç«¯" ä¸è½ç´æ¥ç»å½ "æå¡æä¾å"ï¼åªè½ç»å½ææå±ï¼ä»¥æ­¤å°ç¨æ·ä¸å®¢æ·ç«¯åºåå¼æ¥ã"å®¢æ·ç«¯" ç»å½ææå±æç¨çä»¤çï¼tokenï¼ï¼ä¸ç¨æ·çå¯ç ä¸åãç¨æ·å¯ä»¥å¨ç»å½çæ¶åï¼æå®ææå±ä»¤ççæéèå´åæææã"å®¢æ·ç«¯" ç»å½ææå±ä»¥åï¼"æå¡æä¾å" æ ¹æ®ä»¤ççæéèå´åæææï¼å "å®¢æ·ç«¯" å¼æ¾ç¨æ·å¨å­çèµæã\n\n',normalizedContent:'# ä¸ºä»ä¹éè¦ oauth2\n\n\n# åºç¨åºæ¯\n\næä»¬åè®¾ä½ æä¸ä¸ªâäºç¬è®°âäº§åï¼å¹¶æä¾äºâäºç¬è®°æå¡âåâäºç¸åæå¡âï¼æ­¤æ¶ç¨æ·éè¦å¨ä¸åçè®¾å¤ï¼pcãandroidãiphoneãtvãwatchï¼ä¸å»è®¿é®è¿äºâèµæºâï¼ç¬è®°ï¼å¾çï¼\n\né£ä¹ç¨æ·å¦ä½æè½è®¿é®å±äºèªå·±çé£é¨åèµæºå¢ï¼æ­¤æ¶ä¼ ç»çåæ³å°±æ¯æä¾èªå·±çè´¦å·åå¯ç ç»æä»¬çâäºç¬è®°âï¼ç»å½æååå°±å¯ä»¥è·åèµæºäºãä½è¿æ ·çåæ³ä¼æä»¥ä¸å ä¸ªé®é¢ï¼\n\n * âäºç¬è®°æå¡âåâäºç¸åæå¡âä¼åå«é¨ç½²ï¼é¾éæä»¬è¦åå«ç»å½åï¼\n * å¦ææç¬¬ä¸æ¹åºç¨ç¨åºæ³è¦æ¥å¥æä»¬çâäºç¬è®°âï¼é¾ééè¦ç¨æ·æä¾è´¦å·åå¯ç ç»ç¬¬ä¸æ¹åºç¨ç¨åºï¼è®©ä»è®°å½ååè®¿é®æä»¬çèµæºåï¼\n * ç¨æ·å¦ä½éå¶ç¬¬ä¸æ¹åºç¨ç¨åºå¨æä»¬âäºç¬è®°âçææèå´åä½¿ç¨æéï¼é¾éæææèµæé½æ°¸ä¹æ´é²ç»å®åï¼\n * å¦æç¨æ·ä¿®æ¹äºå¯ç æ¶åäºæéï¼é£ä¹ææç¬¬ä¸æ¹åºç¨ç¨åºä¼å¨é¨å¤±æã\n * åªè¦æä¸ä¸ªæ¥å¥çç¬¬ä¸æ¹åºç¨ç¨åºé­å°ç ´è§£ï¼é£ä¹ç¨æ·çå¯ç å°±ä¼æ³é²ï¼åæä¸å ªè®¾æ³ã\n\nä¸ºäºè§£å³å¦ä¸é®é¢ï¼oauth åºç¨èçã\n\n\n# åè¯è§£é\n\n * ç¬¬ä¸æ¹åºç¨ç¨åºï¼third-party applicationï¼ï¼ åç§°ä¹ä¸ºå®¢æ·ç«¯ï¼clientï¼ï¼æ¯å¦ä¸èä¸­æå°çè®¾å¤ï¼pcãandroidãiphoneãtvãwatchï¼ï¼æä»¬ä¼å¨è¿äºè®¾å¤ä¸­å®è£æä»¬èªå·±ç åç appãåæ¯å¦æä»¬çäº§åæ³è¦ä½¿ç¨ qqãå¾®ä¿¡ç­ç¬¬ä¸æ¹ç»å½ãå¯¹æä»¬çäº§åæ¥è¯´ï¼qqãå¾®ä¿¡ç»å½æ¯ç¬¬ä¸æ¹ç»å½ç³»ç»ãæä»¬åéè¦ç¬¬ä¸æ¹ç»å½ç³»ç»çèµæºï¼å¤´åãæµç§°ç­ï¼ãå¯¹äº qqãå¾®ä¿¡ç­ç³»ç»æä»¬åæ¯ç¬¬ä¸æ¹åºç¨ç¨åºã\n * http æå¡æä¾åï¼http serviceï¼ï¼ æä»¬çäºç¬è®°äº§åä»¥å qqãå¾®ä¿¡ç­é½å¯ä»¥ç§°ä¹ä¸ºâæå¡æä¾åâã\n * èµæºææèï¼resource ownerï¼ï¼ åç§°ä¹ä¸ºç¨æ·ï¼userï¼ã\n * ç¨æ·ä»£çï¼user agentï¼ï¼ æ¯å¦æµè§å¨ï¼ä»£æ¿ç¨æ·å»è®¿é®è¿äºèµæºã\n * è®¤è¯æå¡å¨ï¼authorization serverï¼ï¼ å³æå¡æä¾åä¸é¨ç¨æ¥å¤çè®¤è¯çæå¡å¨ï¼ç®åç¹è¯´å°±æ¯ç»å½åè½ï¼éªè¯ç¨æ·çè´¦å·å¯ç æ¯å¦æ­£ç¡®ä»¥ååéç¸åºçæéï¼\n * èµæºæå¡å¨ï¼resource serverï¼ï¼ å³æå¡æä¾åå­æ¾ç¨æ·çæçèµæºçæå¡å¨ãå®ä¸è®¤è¯æå¡å¨ï¼å¯ä»¥æ¯åä¸å°æå¡å¨ï¼ä¹å¯ä»¥æ¯ä¸åçæå¡å¨ãç®åç¹è¯´å°±æ¯èµæºçè®¿é®å¥å£ï¼æ¯å¦ä¸èä¸­æå°çâäºç¬è®°æå¡âåâäºç¸åæå¡âé½å¯ä»¥ç§°ä¹ä¸ºèµæºæå¡å¨ã\n\n\n# äº¤äºè¿ç¨\n\noauth å¨ "å®¢æ·ç«¯" ä¸ "æå¡æä¾å" ä¹é´ï¼è®¾ç½®äºä¸ä¸ªææå±ï¼authorization layerï¼ã"å®¢æ·ç«¯" ä¸è½ç´æ¥ç»å½ "æå¡æä¾å"ï¼åªè½ç»å½ææå±ï¼ä»¥æ­¤å°ç¨æ·ä¸å®¢æ·ç«¯åºåå¼æ¥ã"å®¢æ·ç«¯" ç»å½ææå±æç¨çä»¤çï¼tokenï¼ï¼ä¸ç¨æ·çå¯ç ä¸åãç¨æ·å¯ä»¥å¨ç»å½çæ¶åï¼æå®ææå±ä»¤ççæéèå´åæææã"å®¢æ·ç«¯" ç»å½ææå±ä»¥åï¼"æå¡æä¾å" æ ¹æ®ä»¤ççæéèå´åæææï¼å "å®¢æ·ç«¯" å¼æ¾ç¨æ·å¨å­çèµæã\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å¼æ¾å¹³å°",frontmatter:{title:"å¼æ¾å¹³å°",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/5cb943/"},regularPath:"/19.Spring%20Security%20OAuth2/01.Spring%20Security%20OAuth2/03.%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0.html",relativePath:"19.Spring Security OAuth2/01.Spring Security OAuth2/03.å¼æ¾å¹³å°.md",key:"v-3222f444",path:"/pages/5cb943/",headers:[{level:2,title:"äº¤äºæ¨¡å",slug:"äº¤äºæ¨¡å",normalizedTitle:"äº¤äºæ¨¡å",charIndex:11},{level:3,title:"è®¤è¯æå¡å¨",slug:"è®¤è¯æå¡å¨",normalizedTitle:"è®¤è¯æå¡å¨",charIndex:72},{level:2,title:"OAuth2 å¼æ¾å¹³å°",slug:"oauth2-å¼æ¾å¹³å°",normalizedTitle:"oauth2 å¼æ¾å¹³å°",charIndex:580}],headersStr:"äº¤äºæ¨¡å è®¤è¯æå¡å¨ OAuth2 å¼æ¾å¹³å°",content:'# å¼æ¾å¹³å°\n\n\n# äº¤äºæ¨¡å\n\näº¤äºæ¨¡åæ¶åä¸æ¹ï¼\n\n * èµæºæ¥æèï¼ç¨æ·\n * å®¢æ·ç«¯ï¼APP\n * æå¡æä¾æ¹ï¼åå«ä¸¤ä¸ªè§è²\n   * è®¤è¯æå¡å¨\n   * èµæºæå¡å¨\n\n\n# è®¤è¯æå¡å¨\n\nè®¤è¯æå¡å¨è´è´£å¯¹ç¨æ·è¿è¡è®¤è¯ï¼å¹¶ææç»å®¢æ·ç«¯æéãè®¤è¯å¾å®¹æå®ç°ï¼éªè¯è´¦å·å¯ç å³å¯ï¼ï¼é®é¢å¨äºå¦ä½ææãæ¯å¦æä»¬ä½¿ç¨ç¬¬ä¸æ¹ç»å½ "æéäºç¬è®°"ï¼ä½ å¯ä»¥çå°å¦ä½¿ç¨ QQ ç»å½çææé¡µé¢ä¸æ "æéäºç¬è®°å°è·å¾ä»¥ä¸æé" çå­æ ·ä»¥åæéä¿¡æ¯\n\n\n\nè®¤è¯æå¡å¨éè¦ç¥éè¯·æ±ææçå®¢æ·ç«¯çèº«ä»½ä»¥åè¯¥å®¢æ·ç«¯è¯·æ±çæéãæä»¬å¯ä»¥ä¸ºæ¯ä¸ä¸ªå®¢æ·ç«¯é¢ååéä¸ä¸ª idï¼å¹¶ç»æ¯ä¸ª id å¯¹åºä¸ä¸ªåç§°ä»¥åæéä¿¡æ¯ãè¿äºä¿¡æ¯å¯ä»¥åå¨è®¤è¯æå¡å¨ä¸çéç½®æä»¶éãç¶åï¼å®¢æ·ç«¯æ¯æ¬¡æå¼ææé¡µé¢çæ¶åï¼æå±äºèªå·±ç id ä¼ è¿æ¥ï¼å¦ï¼\n\nhttps://www.ivoov.com/oauth/authorize?client_id=yourClientId&response_type=code&scope=all&redirect_uri=https://www.ivoov.com\n\n\néçæ¶é´çæ¨ç§»åä¸å¡çå¢é¿ï¼ä¼åç°ï¼ä¿®æ¹éç½®çå·¥ä½æ¶èäºå¤ªå¤çäººåãææ²¡æåæ³æè¿ä¸ªè¿ç¨èªå¨åèµ·æ¥ï¼æäººå·¥ä»è¿äºç¹ççæä½ä¸­è§£æ¾åºæ¥ï¼å½å¼å§èèè¿ä¸æ­¥ï¼å¼æ¾å¹³å°çæåä¹å°±æ¯æ°´å°æ¸ æçäºæäºã\n\n\n# OAuth2 å¼æ¾å¹³å°\n\nå¼æ¾å¹³å°æ¯ç± OAuth2.0 åè®®è¡çåºæ¥çä¸ä¸ªäº§åãå®çä½ç¨æ¯è®©å®¢æ·ç«¯èªå·±å»è¿ä¸é¢è¿è¡æ³¨åãç³è¯·ï¼éè¿ä¹åç³»ç»èªå¨åé client_id ï¼å¹¶å®æéç½®çèªå¨æ´æ°ï¼éå¸¸æ¯åè¿æ°æ®åºï¼ã\n\nå®¢æ·ç«¯è¦å®æç³è¯·ï¼éå¸¸éè¦å¡«åå®¢æ·ç«¯ç¨åºçç±»åï¼WebãApp ç­ï¼ãä¼ä¸ä»ç»ãæ§ç§ãæ³è¦è·åçæéç­ç­ä¿¡æ¯ãè¿äºä¿¡æ¯å¨å¾å°æå¡æä¾æ¹çäººå·¥å®¡æ ¸éè¿åï¼å¼åå¹³å°å°±ä¼èªå¨åéä¸ä¸ª client_id ç»å®¢æ·ç«¯äºã\n\nå°è¿éï¼å·²ç»å®ç°äºç»å½è®¤è¯ãææé¡µçä¿¡æ¯å±ç¤ºãé£ä¹æ¥ä¸æ¥ï¼å½ç¨æ·æåè¿è¡ææä¹åï¼è®¤è¯æå¡å¨éè¦æäº§çç access_token åéç»å®¢æ·ç«¯ï¼æ¹æ¡å¦ä¸ï¼\n\n * è®©å®¢æ·ç«¯å¨å¼æ¾å¹³å°ç³è¯·çæ¶åï¼å¡«åä¸ä¸ª URLï¼ä¾å¦ï¼https://www.ivoov.com\n * æ¯æ¬¡å½æç¨æ·æææåä¹åï¼è®¤è¯æå¡å¨å°é¡µé¢éå®åå°è¿ä¸ª URLï¼åè°ï¼ï¼å¹¶å¸¦ä¸ access_tokenï¼ä¾å¦ï¼https://www.ivoov.com?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5hbn ...\n * å®¢æ·ç«¯æ¥æ¶å°äºè¿ä¸ª access_tokenï¼èä¸è®¤è¯æå¡å¨çææå¨ä½å·²ç»å®æï¼åå¥½å¯ä»¥æç¨åºçæ§å¶æè½¬äº¤åå®¢æ·ç«¯ï¼ç±å®¢æ·ç«¯å³å®æ¥ä¸æ¥åç¨æ·å±ç¤ºä»ä¹åå®¹',normalizedContent:'# å¼æ¾å¹³å°\n\n\n# äº¤äºæ¨¡å\n\näº¤äºæ¨¡åæ¶åä¸æ¹ï¼\n\n * èµæºæ¥æèï¼ç¨æ·\n * å®¢æ·ç«¯ï¼app\n * æå¡æä¾æ¹ï¼åå«ä¸¤ä¸ªè§è²\n   * è®¤è¯æå¡å¨\n   * èµæºæå¡å¨\n\n\n# è®¤è¯æå¡å¨\n\nè®¤è¯æå¡å¨è´è´£å¯¹ç¨æ·è¿è¡è®¤è¯ï¼å¹¶ææç»å®¢æ·ç«¯æéãè®¤è¯å¾å®¹æå®ç°ï¼éªè¯è´¦å·å¯ç å³å¯ï¼ï¼é®é¢å¨äºå¦ä½ææãæ¯å¦æä»¬ä½¿ç¨ç¬¬ä¸æ¹ç»å½ "æéäºç¬è®°"ï¼ä½ å¯ä»¥çå°å¦ä½¿ç¨ qq ç»å½çææé¡µé¢ä¸æ "æéäºç¬è®°å°è·å¾ä»¥ä¸æé" çå­æ ·ä»¥åæéä¿¡æ¯\n\n\n\nè®¤è¯æå¡å¨éè¦ç¥éè¯·æ±ææçå®¢æ·ç«¯çèº«ä»½ä»¥åè¯¥å®¢æ·ç«¯è¯·æ±çæéãæä»¬å¯ä»¥ä¸ºæ¯ä¸ä¸ªå®¢æ·ç«¯é¢ååéä¸ä¸ª idï¼å¹¶ç»æ¯ä¸ª id å¯¹åºä¸ä¸ªåç§°ä»¥åæéä¿¡æ¯ãè¿äºä¿¡æ¯å¯ä»¥åå¨è®¤è¯æå¡å¨ä¸çéç½®æä»¶éãç¶åï¼å®¢æ·ç«¯æ¯æ¬¡æå¼ææé¡µé¢çæ¶åï¼æå±äºèªå·±ç id ä¼ è¿æ¥ï¼å¦ï¼\n\nhttps://www.ivoov.com/oauth/authorize?client_id=yourclientid&response_type=code&scope=all&redirect_uri=https://www.ivoov.com\n\n\néçæ¶é´çæ¨ç§»åä¸å¡çå¢é¿ï¼ä¼åç°ï¼ä¿®æ¹éç½®çå·¥ä½æ¶èäºå¤ªå¤çäººåãææ²¡æåæ³æè¿ä¸ªè¿ç¨èªå¨åèµ·æ¥ï¼æäººå·¥ä»è¿äºç¹ççæä½ä¸­è§£æ¾åºæ¥ï¼å½å¼å§èèè¿ä¸æ­¥ï¼å¼æ¾å¹³å°çæåä¹å°±æ¯æ°´å°æ¸ æçäºæäºã\n\n\n# oauth2 å¼æ¾å¹³å°\n\nå¼æ¾å¹³å°æ¯ç± oauth2.0 åè®®è¡çåºæ¥çä¸ä¸ªäº§åãå®çä½ç¨æ¯è®©å®¢æ·ç«¯èªå·±å»è¿ä¸é¢è¿è¡æ³¨åãç³è¯·ï¼éè¿ä¹åç³»ç»èªå¨åé client_id ï¼å¹¶å®æéç½®çèªå¨æ´æ°ï¼éå¸¸æ¯åè¿æ°æ®åºï¼ã\n\nå®¢æ·ç«¯è¦å®æç³è¯·ï¼éå¸¸éè¦å¡«åå®¢æ·ç«¯ç¨åºçç±»åï¼webãapp ç­ï¼ãä¼ä¸ä»ç»ãæ§ç§ãæ³è¦è·åçæéç­ç­ä¿¡æ¯ãè¿äºä¿¡æ¯å¨å¾å°æå¡æä¾æ¹çäººå·¥å®¡æ ¸éè¿åï¼å¼åå¹³å°å°±ä¼èªå¨åéä¸ä¸ª client_id ç»å®¢æ·ç«¯äºã\n\nå°è¿éï¼å·²ç»å®ç°äºç»å½è®¤è¯ãææé¡µçä¿¡æ¯å±ç¤ºãé£ä¹æ¥ä¸æ¥ï¼å½ç¨æ·æåè¿è¡ææä¹åï¼è®¤è¯æå¡å¨éè¦æäº§çç access_token åéç»å®¢æ·ç«¯ï¼æ¹æ¡å¦ä¸ï¼\n\n * è®©å®¢æ·ç«¯å¨å¼æ¾å¹³å°ç³è¯·çæ¶åï¼å¡«åä¸ä¸ª urlï¼ä¾å¦ï¼https://www.ivoov.com\n * æ¯æ¬¡å½æç¨æ·æææåä¹åï¼è®¤è¯æå¡å¨å°é¡µé¢éå®åå°è¿ä¸ª urlï¼åè°ï¼ï¼å¹¶å¸¦ä¸ access_tokenï¼ä¾å¦ï¼https://www.ivoov.com?access_token=eyjhbgcioijiuzi1niisinr5cci6ikpxvcj9.eyj0zw5hbn ...\n * å®¢æ·ç«¯æ¥æ¶å°äºè¿ä¸ª access_tokenï¼èä¸è®¤è¯æå¡å¨çææå¨ä½å·²ç»å®æï¼åå¥½å¯ä»¥æç¨åºçæ§å¶æè½¬äº¤åå®¢æ·ç«¯ï¼ç±å®¢æ·ç«¯å³å®æ¥ä¸æ¥åç¨æ·å±ç¤ºä»ä¹åå®¹',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä»¤ççè®¿é®ä¸å·æ°",frontmatter:{title:"ä»¤ççè®¿é®ä¸å·æ°",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/37f648/"},regularPath:"/19.Spring%20Security%20OAuth2/01.Spring%20Security%20OAuth2/04.%E4%BB%A4%E7%89%8C%E7%9A%84%E8%AE%BF%E9%97%AE%E4%B8%8E%E5%88%B7%E6%96%B0.html",relativePath:"19.Spring Security OAuth2/01.Spring Security OAuth2/04.ä»¤ççè®¿é®ä¸å·æ°.md",key:"v-3c995a47",path:"/pages/37f648/",headers:[{level:2,title:"Access Token",slug:"access-token",normalizedTitle:"access token",charIndex:15},{level:2,title:"Refresh Token",slug:"refresh-token",normalizedTitle:"refresh token",charIndex:323}],headersStr:"Access Token Refresh Token",content:"# ä»¤ççè®¿é®ä¸å·æ°\n\n\n# Access Token\n\nAccess Token æ¯å®¢æ·ç«¯è®¿é®èµæºæå¡å¨çä»¤çãæ¥æè¿ä¸ªä»¤çä»£è¡¨çå¾å°ç¨æ·çææãç¶èï¼è¿ä¸ªææåºè¯¥æ¯ ä¸´æ¶ çï¼æä¸å®æææãè¿æ¯å ä¸ºï¼Access Token å¨ä½¿ç¨çè¿ç¨ä¸­ å¯è½ä¼æ³é²ãç» Access Token éå®ä¸ä¸ª è¾ç­çæææ å¯ä»¥éä½å  Access Token æ³é²èå¸¦æ¥çé£é©ã\n\nç¶èå¼å¥äºæææä¹åï¼å®¢æ·ç«¯ä½¿ç¨èµ·æ¥å°±ä¸é£ä¹æ¹ä¾¿äºãæ¯å½ Access Token è¿æï¼å®¢æ·ç«¯å°±å¿é¡»éæ°åç¨æ·ç´¢è¦ææãè¿æ ·ç¨æ·å¯è½æ¯éå å¤©ï¼çè³æ¯å¤©é½éè¦è¿è¡æææä½ãè¿æ¯ä¸ä»¶éå¸¸å½±åç¨æ·ä½éªçäºæãå¸ææä¸ç§æ¹æ³ï¼å¯ä»¥é¿åè¿ç§æåµã\n\näºæ¯ OAuth2.0 å¼å¥äº Refresh Token æºå¶\n\n\n# Refresh Token\n\nRefresh Token çä½ç¨æ¯ç¨æ¥å·æ° Access Tokenãè®¤è¯æå¡å¨æä¾ä¸ä¸ªå·æ°æ¥å£ï¼ä¾å¦ï¼\n\nhttps://www.ivoov.com/refresh?refresh_token=&client_id=\n\n\nä¼ å¥ refresh_token å client_idï¼è®¤è¯æå¡å¨éªè¯éè¿åï¼è¿åä¸ä¸ªæ°ç Access Tokenãä¸ºäºå®å¨ï¼OAuth2.0 å¼å¥äºä¸¤ä¸ªæªæ½ï¼\n\n * OAuth2.0 è¦æ±ï¼Refresh Token ä¸å®æ¯ä¿å­å¨å®¢æ·ç«¯çæå¡å¨ä¸ ï¼èç»ä¸è½å­æ¾å¨ç­ä¹çå®¢æ·ç«¯ï¼ä¾å¦ AppãPC ç«¯è½¯ä»¶ï¼ä¸ãè°ç¨ refresh æ¥å£çæ¶åï¼ä¸å®æ¯ä»æå¡å¨å°æå¡å¨çè®¿é®ã\n * OAuth2.0 å¼å¥äº client_secret æºå¶ãå³æ¯ä¸ä¸ª client_id é½å¯¹åºä¸ä¸ª client_secretãè¿ä¸ª client_secret ä¼å¨å®¢æ·ç«¯ç³è¯· client_id æ¶ï¼é client_id ä¸èµ·åéç»å®¢æ·ç«¯ãå®¢æ·ç«¯å¿é¡»æ client_secret å¦¥åä¿ç®¡å¨æå¡å¨ä¸ï¼å³ä¸è½æ³é²ãå·æ° Access Token æ¶ï¼éè¦éªè¯è¿ä¸ª client_secretã\n\nå®éä¸çå·æ°æ¥å£ç±»ä¼¼äºï¼\n\nhttps://www.ivoov.com/oauth/refresh?refresh_token=&client_id=&client_secret=\n\n\nä»¥ä¸å°±æ¯ Refresh Token æºå¶ãRefresh Token çæææéå¸¸é¿ï¼ä¼å¨ç¨æ·æææ¶ï¼é Access Token ä¸èµ·éå®åå°åè° URLï¼ä¼ éç»å®¢æ·ç«¯ã",normalizedContent:"# ä»¤ççè®¿é®ä¸å·æ°\n\n\n# access token\n\naccess token æ¯å®¢æ·ç«¯è®¿é®èµæºæå¡å¨çä»¤çãæ¥æè¿ä¸ªä»¤çä»£è¡¨çå¾å°ç¨æ·çææãç¶èï¼è¿ä¸ªææåºè¯¥æ¯ ä¸´æ¶ çï¼æä¸å®æææãè¿æ¯å ä¸ºï¼access token å¨ä½¿ç¨çè¿ç¨ä¸­ å¯è½ä¼æ³é²ãç» access token éå®ä¸ä¸ª è¾ç­çæææ å¯ä»¥éä½å  access token æ³é²èå¸¦æ¥çé£é©ã\n\nç¶èå¼å¥äºæææä¹åï¼å®¢æ·ç«¯ä½¿ç¨èµ·æ¥å°±ä¸é£ä¹æ¹ä¾¿äºãæ¯å½ access token è¿æï¼å®¢æ·ç«¯å°±å¿é¡»éæ°åç¨æ·ç´¢è¦ææãè¿æ ·ç¨æ·å¯è½æ¯éå å¤©ï¼çè³æ¯å¤©é½éè¦è¿è¡æææä½ãè¿æ¯ä¸ä»¶éå¸¸å½±åç¨æ·ä½éªçäºæãå¸ææä¸ç§æ¹æ³ï¼å¯ä»¥é¿åè¿ç§æåµã\n\näºæ¯ oauth2.0 å¼å¥äº refresh token æºå¶\n\n\n# refresh token\n\nrefresh token çä½ç¨æ¯ç¨æ¥å·æ° access tokenãè®¤è¯æå¡å¨æä¾ä¸ä¸ªå·æ°æ¥å£ï¼ä¾å¦ï¼\n\nhttps://www.ivoov.com/refresh?refresh_token=&client_id=\n\n\nä¼ å¥ refresh_token å client_idï¼è®¤è¯æå¡å¨éªè¯éè¿åï¼è¿åä¸ä¸ªæ°ç access tokenãä¸ºäºå®å¨ï¼oauth2.0 å¼å¥äºä¸¤ä¸ªæªæ½ï¼\n\n * oauth2.0 è¦æ±ï¼refresh token ä¸å®æ¯ä¿å­å¨å®¢æ·ç«¯çæå¡å¨ä¸ ï¼èç»ä¸è½å­æ¾å¨ç­ä¹çå®¢æ·ç«¯ï¼ä¾å¦ appãpc ç«¯è½¯ä»¶ï¼ä¸ãè°ç¨ refresh æ¥å£çæ¶åï¼ä¸å®æ¯ä»æå¡å¨å°æå¡å¨çè®¿é®ã\n * oauth2.0 å¼å¥äº client_secret æºå¶ãå³æ¯ä¸ä¸ª client_id é½å¯¹åºä¸ä¸ª client_secretãè¿ä¸ª client_secret ä¼å¨å®¢æ·ç«¯ç³è¯· client_id æ¶ï¼é client_id ä¸èµ·åéç»å®¢æ·ç«¯ãå®¢æ·ç«¯å¿é¡»æ client_secret å¦¥åä¿ç®¡å¨æå¡å¨ä¸ï¼å³ä¸è½æ³é²ãå·æ° access token æ¶ï¼éè¦éªè¯è¿ä¸ª client_secretã\n\nå®éä¸çå·æ°æ¥å£ç±»ä¼¼äºï¼\n\nhttps://www.ivoov.com/oauth/refresh?refresh_token=&client_id=&client_secret=\n\n\nä»¥ä¸å°±æ¯ refresh token æºå¶ãrefresh token çæææéå¸¸é¿ï¼ä¼å¨ç¨æ·æææ¶ï¼é access token ä¸èµ·éå®åå°åè° urlï¼ä¼ éç»å®¢æ·ç«¯ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"å®¢æ·ç«¯æææ¨¡å¼",frontmatter:{title:"å®¢æ·ç«¯æææ¨¡å¼",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/fbe541/"},regularPath:"/19.Spring%20Security%20OAuth2/01.Spring%20Security%20OAuth2/05.%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8E%88%E6%9D%83%E6%A8%A1%E5%BC%8F.html",relativePath:"19.Spring Security OAuth2/01.Spring Security OAuth2/05.å®¢æ·ç«¯æææ¨¡å¼.md",key:"v-18111e3e",path:"/pages/fbe541/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:14},{level:2,title:"ç®åæ¨¡å¼",slug:"ç®åæ¨¡å¼",normalizedTitle:"ç®åæ¨¡å¼",charIndex:107},{level:3,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:959},{level:2,title:"ææç æ¨¡å¼",slug:"ææç æ¨¡å¼",normalizedTitle:"ææç æ¨¡å¼",charIndex:140},{level:3,title:"æµè¯",slug:"æµè¯-2",normalizedTitle:"æµè¯",charIndex:959},{level:2,title:"å¯ç æ¨¡å¼",slug:"å¯ç æ¨¡å¼",normalizedTitle:"å¯ç æ¨¡å¼",charIndex:185},{level:3,title:"æµè¯",slug:"æµè¯-3",normalizedTitle:"æµè¯",charIndex:959},{level:2,title:"å®¢æ·ç«¯æ¨¡å¼",slug:"å®¢æ·ç«¯æ¨¡å¼",normalizedTitle:"å®¢æ·ç«¯æ¨¡å¼",charIndex:212},{level:3,title:"æµè¯",slug:"æµè¯-4",normalizedTitle:"æµè¯",charIndex:959}],headersStr:"æ¦è¿° ç®åæ¨¡å¼ æµè¯ ææç æ¨¡å¼ æµè¯ å¯ç æ¨¡å¼ æµè¯ å®¢æ·ç«¯æ¨¡å¼ æµè¯",content:'# å®¢æ·ç«¯æææ¨¡å¼\n\n\n# æ¦è¿°\n\nå®¢æ·ç«¯å¿é¡»å¾å°ç¨æ·çææï¼authorization grantï¼ï¼æè½è·å¾ä»¤çï¼access tokenï¼ãOAuth 2.0 å®ä¹äºåç§æææ¹å¼ã\n\n * implicitï¼ç®åæ¨¡å¼ï¼ä¸æ¨èä½¿ç¨\n * authorization codeï¼ææç æ¨¡å¼\n * resource owner password credentialsï¼å¯ç æ¨¡å¼\n * client credentialsï¼å®¢æ·ç«¯æ¨¡å¼\n\n\n# ç®åæ¨¡å¼\n\nç®åæ¨¡å¼éç¨äºçº¯éæé¡µé¢åºç¨ãæè°çº¯éæé¡µé¢åºç¨ï¼ä¹å°±æ¯åºç¨æ²¡æå¨æå¡å¨ä¸æ§è¡ä»£ç çæéï¼éå¸¸æ¯æä»£ç æç®¡å¨å«äººçæå¡å¨ä¸ï¼ï¼åªæåç«¯ JS ä»£ç çæ§å¶æã\n\nè¿ç§åºæ¯ä¸ï¼åºç¨æ¯æ²¡ææä¹åå­å¨çè½åçãå æ­¤ï¼æç§ OAuth2.0 çè§å®ï¼è¿ç§åºç¨æ¯æ¿ä¸å° Refresh Token çãå¶æ´ä¸ªæææµç¨å¦ä¸ï¼\n\n\n\nè¯¥æ¨¡å¼ä¸ï¼access_token å®¹ææ³é²ä¸ä¸å¯å·æ°\n\nï¼1ï¼èµæºæ¥æèæå¼å®¢æ·ç«¯ï¼å®¢æ·ç«¯è¦æ±èµæºæ¥æèç»äºææï¼å®å°æµè§å¨è¢«éå®åå°æææå¡å¨ï¼éå®åæ¶ä¼éå å®¢æ·ç«¯çèº«ä»½ä¿¡æ¯ãå¦ï¼\n\n/oauth/authorize?client_id=simplify&response_type=token&scope=server&redirect_uri=https://www.ivoov.com\n\n\nåæ°æè¿°åææç æ¨¡å¼ ï¼æ³¨æresponse_type=tokenï¼è¯´ææ¯ç®åæ¨¡å¼ã\n\nï¼2ï¼æµè§å¨åºç°åæææå¡å¨ææé¡µé¢ï¼ä¹åå°ç¨æ·åæææã\n\nï¼3ï¼æææå¡å¨å°ææç å°ä»¤çï¼access_tokenï¼ä»¥Hashçå½¢å¼å­æ¾å¨éå®åuriçfargmentä¸­åéç»æµè§å¨ã\n\næç¤º\n\nfragment ä¸»è¦æ¯ç¨æ¥æ è¯ URI ææ è¯èµæºéçæä¸ªèµæºï¼å¨ URI çæ«å°¾éè¿ ï¼#ï¼ä½ä¸º fragment çå¼å¤´ï¼å¶ä¸­ # ä¸å±äº fragment çå¼ãå¦https://domain/index#L18è¿ä¸ª URI ä¸­ L18 å°±æ¯ fragment çå¼ãå¤§å®¶åªéè¦ç¥éjséè¿ååºæµè§å¨å°åæ ååçæ¹å¼è½è·åå°fragment å°±è¡äºãä¸è¬æ¥è¯´ï¼ç®åæ¨¡å¼ç¨äºæ²¡ææå¡å¨ç«¯çç¬¬ä¸æ¹åé¡µé¢åºç¨ï¼å ä¸ºæ²¡ææå¡å¨ç«¯å°±æ æ³æ¥æ¶ææç ã\n\n\n# æµè¯\n\næµè§å¨è®¿é®è®¤è¯é¡µé¢ï¼\n\nhttp://localhost:3000/oauth/authorize?client_id=simplify&response_type=token&scope=server&redirect_uri=https://www.ivoov.com\n\n\n\n\nç¶åè¾å¥æ¨¡æçè´¦å·åå¯ç ç¹ç»éä¹åè¿å¥ææé¡µé¢ï¼\n\n\n\nç¡®è®¤ææåï¼æµè§å¨ä¼éå®åå°æå®è·¯å¾ï¼oauth_client_detailsè¡¨ä¸­çweb_server_redirect_uriï¼å¹¶ä»¥Hashçå½¢å¼å­æ¾å¨éå®åuriçfargmentä¸­,å¦ï¼\n\nhttps://www.ivoov.com/#access_token=273b7f10-3b4d-495e-9b15-b5bc801ff265&token_type=bearer&expires_in=43199&scope=server\n\n\n\n# ææç æ¨¡å¼\n\nææç æ¨¡å¼éç¨äºæèªå·±çæå¡å¨çåºç¨ï¼å®æ¯ä¸ä¸ªä¸æ¬¡æ§çä¸´æ¶å­è¯ï¼ç¨æ¥æ¢å access_token å refresh_tokenãè®¤è¯æå¡å¨æä¾äºä¸ä¸ªç±»ä¼¼è¿æ ·çæ¥å£ï¼\n\n/oauth/authorize?response_type=code&client_id=ci&scope=server&redirect_uri=https://www.ivoov.com\n\n\néè¦ä¼ å¥ codeãclient_id ä»¥å client_secretãéªè¯éè¿åï¼è¿å access_token å refresh_tokenãä¸æ¦æ¢åæåï¼code ç«å³ä½åºï¼ä¸è½åä½¿ç¨ç¬¬äºæ¬¡ãæµç¨å¾å¦ä¸ï¼\n\n\n\nï¼1ï¼èµæºæ¥æèæå¼å®¢æ·ç«¯ï¼å®¢æ·ç«¯è¦æ±èµæºæ¥æèç»äºææï¼å®å°æµè§å¨è¢«éå®åå°æææå¡å¨ï¼éå®åæ¶ä¼éå å®¢æ·ç«¯çèº«ä»½ä¿¡æ¯ãå¦ï¼\n\n/oauth/authorize?client_id=simplify&response_type=code&scope=server&redirect_uri=https://www.ivoov.com\n\n\nåæ°åè¡¨å¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * response_typeï¼ææç æ¨¡å¼åºå®ä¸ºcodeã\n * scopeï¼å®¢æ·ç«¯æéã\n * redirect_uriï¼è·³è½¬uriï¼å½ææç ç³è¯·æååä¼è·³è½¬å°æ­¤å°åï¼å¹¶å¨åè¾¹å¸¦ä¸codeåæ°ï¼ææç ï¼ã\n\nï¼2ï¼æµè§å¨åºç°åæææå¡å¨ææé¡µé¢ï¼ä¹åå°ç¨æ·åæææã\n\nï¼3ï¼æææå¡å¨å°ææç ï¼AuthorizationCodeï¼è½¬ç»æµè§å¨åéç»client(éè¿redirect_uri)ã\n\nï¼4ï¼å®¢æ·ç«¯æ¿çææç åæææå¡å¨ç´¢è¦è®¿é®access_tokenï¼è¯·æ±å¦ä¸ï¼\n\n/oauth/token?client_id=simplify&client_secret=secret&grant_type=authorization_code&code=5PgfcD&redirect_uri=https://www.ivoov.com\n\n\nåæ°åè¡¨å¦ä¸\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * client_secretï¼å®¢æ·ç«¯ç§é¥ã\n * grant_typeï¼ææç±»åï¼å¡«åauthorization_codeï¼è¡¨ç¤ºææç æ¨¡å¼\n * codeï¼ææç ï¼å°±æ¯ååè·åçææç ï¼æ³¨æï¼ææç åªä½¿ç¨ä¸æ¬¡å°±æ æäºï¼éè¦éæ°ç³è¯·ã\n * redirect_uriï¼ç³è¯·ææç æ¶çè·³è½¬urlï¼ä¸å®åç³è¯·ææç æ¶ç¨çredirect_uriä¸è´ã\n\nï¼5ï¼æææå¡å¨è¿åä»¤ç(access_token)\n\nè¿ç§æ¨¡å¼æ¯åç§æ¨¡å¼ä¸­æå®å¨çä¸ç§æ¨¡å¼ãä¸è¬ç¨äºclientæ¯Webæå¡å¨ç«¯åºç¨æç¬¬ä¸æ¹çåçAppè°ç¨èµæºæå¡çæ¶åãå ä¸ºå¨è¿ç§æ¨¡å¼ä¸­access_tokenä¸ä¼ç»è¿æµè§å¨æç§»å¨ç«¯çAppï¼èæ¯ç´æ¥ä»æå¡ç«¯å»äº¤æ¢ï¼è¿æ ·å°±æå¤§éåº¦çåå°äºä»¤çæ³æ¼çé£é©ã\n\nè¿ä¸ª code çä½ç¨æ¯ä¿æ¤ token çå®å¨æ§ãä¸ä¸èè¯´å°ï¼ç®åæ¨¡å¼ä¸ï¼token æ¯ä¸å®å¨çãè¿æ¯å ä¸ºå¨ç¬¬ 4 æ­¥å½ä¸­ç´æ¥æ token è¿åç»åºç¨ãèè¿ä¸æ­¥å®¹æè¢«æ¦æªãçªå¬ãå¼å¥äº code ä¹åï¼å³ä½¿æ»å»èè½å¤çªåå° codeï¼ä½æ¯ç±äºä»æ æ³è·å¾åºç¨ä¿å­å¨æå¡å¨ç client_secretï¼å æ­¤ä¹æ æ³éè¿ code æ¢å tokenãèç¬¬ 5 æ­¥ï¼ä¸ºä»ä¹ä¸å®¹æè¢«æ¦æªãçªå¬å¢ï¼è¿æ¯å ä¸ºï¼é¦åï¼è¿æ¯ä¸ä¸ªä»æå¡å¨å°æå¡å¨çè®¿é®ï¼é»å®¢æ¯è¾é¾ææå°ï¼å¶æ¬¡ï¼è¿ä¸ªè¯·æ±éå¸¸è¦æ±æ¯ https çå®ç°ãå³ä½¿è½çªå¬å°æ°æ®åä¹æ æ³è§£æåºåå®¹ã\n\næäºè¿ä¸ª codeï¼token çå®å¨æ§å¤§å¤§æé«ãå æ­¤ï¼OAuth2.0 é¼å±ä½¿ç¨è¿ç§æ¹å¼è¿è¡ææï¼èç®åæ¨¡å¼åæ¯å¨ä¸å¾å·²æåµä¸æä¼ä½¿ç¨ã\n\n\n# æµè¯\n\næµè§å¨è®¿é®è®¤è¯é¡µé¢ï¼\n\n/oauth/authorize?client_id=simplify&response_type=code&scope=server&redirect_uri=https://www.ivoov.com\n\n\n\n\nç¶åè¾å¥æ¨¡æçè´¦å·åå¯ç ç¹ç»éä¹åè¿å¥ææé¡µé¢ï¼\n\n\n\nç¡®è®¤ææåï¼æµè§å¨ä¼éå®åå°æå®è·¯å¾ï¼oauth_client_detailsè¡¨ä¸­çweb_server_redirect_uriï¼å¹¶éå éªè¯ç ?code=hzzmj7ï¼æ¯æ¬¡ä¸ä¸æ ·ï¼ï¼æåä½¿ç¨è¯¥éªè¯ç è·åtokenã\n\nä½¿ç¨Postmanè¯·æ±æææå¡å¨ã\n\n\n\n\n# å¯ç æ¨¡å¼\n\nå¯ç æ¨¡å¼ä¸­ï¼ç¨æ·åå®¢æ·ç«¯æä¾èªå·±çç¨æ·ååå¯ç ãå®¢æ·ç«¯ä½¿ç¨è¿äºä¿¡æ¯ï¼å "æå¡åæä¾å" ç´¢è¦ææãå¨è¿ç§æ¨¡å¼ä¸­ï¼ç¨æ·å¿é¡»æèªå·±çå¯ç ç»å®¢æ·ç«¯ï¼ä½æ¯å®¢æ·ç«¯ä¸å¾å¨å­å¯ç ãè¿éå¸¸ç¨å¨ç¨æ·å¯¹å®¢æ·ç«¯é«åº¦ä¿¡ä»»çæåµä¸ï¼æ¯å¦å®¢æ·ç«¯æ¯æä½ç³»ç»çä¸é¨åã\n\nä¸ä¸ªå¸åçä¾å­æ¯åä¸ä¸ªä¼ä¸åé¨çä¸åäº§åè¦ä½¿ç¨æ¬ä¼ä¸ç oAuth2.0 ä½ç³»ãå¨æäºæåµä¸ï¼äº§åå¸æè½å¤å®å¶åææé¡µé¢ãç±äºæ¯åä¸ªä¼ä¸ï¼ä¸éè¦åç¨æ·å±ç¤ºâxxxå°è·åä»¥ä¸æéâç­å­æ ·å¹¶è¯¢é®ç¨æ·çæææåï¼èåªéè¿è¡ç¨æ·çèº«ä»½è®¤è¯å³å¯ãè¿ä¸ªæ¶åï¼ç±å·ä½çäº§åå¢éå¼åå®å¶åçææçé¢ï¼æ¥æ¶ç¨æ·è¾å¥è´¦å·å¯ç ï¼å¹¶ç´æ¥ä¼ éç»é´ææå¡å¨è¿è¡ææå³å¯ã\n\n\n\nï¼1ï¼èµæºæ¥æèå°ç¨æ·åãå¯ç åéç»å®¢æ·ç«¯\n\nï¼2ï¼å®¢æ·ç«¯æ¿çèµæºæ¥æèçç¨æ·åãå¯ç åæææå¡å¨è¯·æ±ä»¤çï¼access_tokenï¼ï¼è¯·æ±å¦ä¸ï¼\n\n/oauth/token?client_id=simplify&client_secret=simplify&username=admin&grant_type=password&password=123456\n\n\nåæ°åè¡¨å¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * client_secretï¼å®¢æ·ç«¯ç§é¥ã\n * grant_typeï¼ææç±»åï¼å¡«åpasswordè¡¨ç¤ºå¯ç æ¨¡å¼\n * usernameï¼èµæºæ¥æèç¨æ·åã\n * passwordï¼èµæºæ¥æèå¯ç ã\n\nï¼3ï¼æææå¡å¨å°ä»¤çï¼access_tokenï¼åéç»client\n\nè¿ç§æ¨¡å¼ååç®åï¼ä½æ¯å´æå³çç´æ¥å°ç¨æ·ææä¿¡æ¯æ³æ¼ç»äºclientï¼å æ­¤è¿å°±è¯´æè¿ç§æ¨¡å¼åªè½ç¨äºclientæ¯æä»¬èªå·±å¼åçæåµä¸ãå æ­¤å¯ç æ¨¡å¼ä¸è¬ç¨äºæä»¬èªå·±å¼åçï¼ç¬¬ä¸æ¹åçAppæç¬¬ä¸æ¹åé¡µé¢åºç¨ã\n\næä¸ç¹éè¦ç¹å«æ³¨æçæ¯ï¼å¨ç¬¬ 2 æ­¥ä¸­ï¼è®¤è¯æå¡å¨éè¦å¯¹å®¢æ·ç«¯çèº«ä»½è¿è¡éªè¯ï¼ç¡®ä¿æ¯åä¿¡ä»»çå®¢æ·ç«¯ã\n\n\n# æµè¯\n\nä½¿ç¨Postmanè¯·æ±æææå¡å¨ã\n\n\n\n\n# å®¢æ·ç«¯æ¨¡å¼\n\nå¦æä¿¡ä»»å³ç³»åè¿ä¸æ­¥ï¼æèè°ç¨èæ¯ä¸ä¸ªåç«¯çæ¨¡åï¼æ²¡æç¨æ·çé¢çæ¶åï¼å¯ä»¥ä½¿ç¨å®¢æ·ç«¯æ¨¡å¼ãé´ææå¡å¨ç´æ¥å¯¹å®¢æ·ç«¯è¿è¡èº«ä»½éªè¯ï¼éªè¯éè¿åï¼è¿å tokenã\n\n\n\nï¼1ï¼å®¢æ·ç«¯åæææå¡å¨åéèªå·±çèº«ä»½ä¿¡æ¯ï¼å¹¶è¯·æ±ä»¤çï¼access_tokenï¼ ï¼2ï¼ç¡®è®¤å®¢æ·ç«¯èº«ä»½æ è¯¯åï¼å°ä»¤çï¼access_tokenï¼åéç»clientï¼è¯·æ±å¦ä¸ï¼\n\n/oauth/token?client_id=simplify&client_secret=simplify&grant_type=client_credentials\n\n\nåæ°åè¡¨å¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * client_secretï¼å®¢æ·ç«¯ç§é¥ã\n * grant_typeï¼ææç±»åï¼å¡«åclient_credentialsè¡¨ç¤ºå®¢æ·ç«¯æ¨¡å¼\n\nè¿ç§æ¨¡å¼æ¯ææ¹ä¾¿ä½æä¸å®å¨çæ¨¡å¼ãå æ­¤è¿å°±è¦æ±æä»¬å¯¹clientå®å¨çä¿¡ä»»ï¼èclientæ¬èº«ä¹æ¯å®å¨çãå æ­¤è¿ç§æ¨¡å¼ä¸è¬ç¨æ¥æä¾ç»æä»¬å®å¨ä¿¡ä»»çæå¡å¨ç«¯æå¡ãæ¯å¦ï¼åä½æ¹ç³»ç»å¯¹æ¥ï¼æåä¸ç»ç¨æ·ä¿¡æ¯ã\n\n\n# æµè¯\n\nä½¿ç¨Postmanè¯·æ±æææå¡å¨ã\n\n',normalizedContent:'# å®¢æ·ç«¯æææ¨¡å¼\n\n\n# æ¦è¿°\n\nå®¢æ·ç«¯å¿é¡»å¾å°ç¨æ·çææï¼authorization grantï¼ï¼æè½è·å¾ä»¤çï¼access tokenï¼ãoauth 2.0 å®ä¹äºåç§æææ¹å¼ã\n\n * implicitï¼ç®åæ¨¡å¼ï¼ä¸æ¨èä½¿ç¨\n * authorization codeï¼ææç æ¨¡å¼\n * resource owner password credentialsï¼å¯ç æ¨¡å¼\n * client credentialsï¼å®¢æ·ç«¯æ¨¡å¼\n\n\n# ç®åæ¨¡å¼\n\nç®åæ¨¡å¼éç¨äºçº¯éæé¡µé¢åºç¨ãæè°çº¯éæé¡µé¢åºç¨ï¼ä¹å°±æ¯åºç¨æ²¡æå¨æå¡å¨ä¸æ§è¡ä»£ç çæéï¼éå¸¸æ¯æä»£ç æç®¡å¨å«äººçæå¡å¨ä¸ï¼ï¼åªæåç«¯ js ä»£ç çæ§å¶æã\n\nè¿ç§åºæ¯ä¸ï¼åºç¨æ¯æ²¡ææä¹åå­å¨çè½åçãå æ­¤ï¼æç§ oauth2.0 çè§å®ï¼è¿ç§åºç¨æ¯æ¿ä¸å° refresh token çãå¶æ´ä¸ªæææµç¨å¦ä¸ï¼\n\n\n\nè¯¥æ¨¡å¼ä¸ï¼access_token å®¹ææ³é²ä¸ä¸å¯å·æ°\n\nï¼1ï¼èµæºæ¥æèæå¼å®¢æ·ç«¯ï¼å®¢æ·ç«¯è¦æ±èµæºæ¥æèç»äºææï¼å®å°æµè§å¨è¢«éå®åå°æææå¡å¨ï¼éå®åæ¶ä¼éå å®¢æ·ç«¯çèº«ä»½ä¿¡æ¯ãå¦ï¼\n\n/oauth/authorize?client_id=simplify&response_type=token&scope=server&redirect_uri=https://www.ivoov.com\n\n\nåæ°æè¿°åææç æ¨¡å¼ ï¼æ³¨æresponse_type=tokenï¼è¯´ææ¯ç®åæ¨¡å¼ã\n\nï¼2ï¼æµè§å¨åºç°åæææå¡å¨ææé¡µé¢ï¼ä¹åå°ç¨æ·åæææã\n\nï¼3ï¼æææå¡å¨å°ææç å°ä»¤çï¼access_tokenï¼ä»¥hashçå½¢å¼å­æ¾å¨éå®åuriçfargmentä¸­åéç»æµè§å¨ã\n\næç¤º\n\nfragment ä¸»è¦æ¯ç¨æ¥æ è¯ uri ææ è¯èµæºéçæä¸ªèµæºï¼å¨ uri çæ«å°¾éè¿ ï¼#ï¼ä½ä¸º fragment çå¼å¤´ï¼å¶ä¸­ # ä¸å±äº fragment çå¼ãå¦https://domain/index#l18è¿ä¸ª uri ä¸­ l18 å°±æ¯ fragment çå¼ãå¤§å®¶åªéè¦ç¥éjséè¿ååºæµè§å¨å°åæ ååçæ¹å¼è½è·åå°fragment å°±è¡äºãä¸è¬æ¥è¯´ï¼ç®åæ¨¡å¼ç¨äºæ²¡ææå¡å¨ç«¯çç¬¬ä¸æ¹åé¡µé¢åºç¨ï¼å ä¸ºæ²¡ææå¡å¨ç«¯å°±æ æ³æ¥æ¶ææç ã\n\n\n# æµè¯\n\næµè§å¨è®¿é®è®¤è¯é¡µé¢ï¼\n\nhttp://localhost:3000/oauth/authorize?client_id=simplify&response_type=token&scope=server&redirect_uri=https://www.ivoov.com\n\n\n\n\nç¶åè¾å¥æ¨¡æçè´¦å·åå¯ç ç¹ç»éä¹åè¿å¥ææé¡µé¢ï¼\n\n\n\nç¡®è®¤ææåï¼æµè§å¨ä¼éå®åå°æå®è·¯å¾ï¼oauth_client_detailsè¡¨ä¸­çweb_server_redirect_uriï¼å¹¶ä»¥hashçå½¢å¼å­æ¾å¨éå®åuriçfargmentä¸­,å¦ï¼\n\nhttps://www.ivoov.com/#access_token=273b7f10-3b4d-495e-9b15-b5bc801ff265&token_type=bearer&expires_in=43199&scope=server\n\n\n\n# ææç æ¨¡å¼\n\nææç æ¨¡å¼éç¨äºæèªå·±çæå¡å¨çåºç¨ï¼å®æ¯ä¸ä¸ªä¸æ¬¡æ§çä¸´æ¶å­è¯ï¼ç¨æ¥æ¢å access_token å refresh_tokenãè®¤è¯æå¡å¨æä¾äºä¸ä¸ªç±»ä¼¼è¿æ ·çæ¥å£ï¼\n\n/oauth/authorize?response_type=code&client_id=ci&scope=server&redirect_uri=https://www.ivoov.com\n\n\néè¦ä¼ å¥ codeãclient_id ä»¥å client_secretãéªè¯éè¿åï¼è¿å access_token å refresh_tokenãä¸æ¦æ¢åæåï¼code ç«å³ä½åºï¼ä¸è½åä½¿ç¨ç¬¬äºæ¬¡ãæµç¨å¾å¦ä¸ï¼\n\n\n\nï¼1ï¼èµæºæ¥æèæå¼å®¢æ·ç«¯ï¼å®¢æ·ç«¯è¦æ±èµæºæ¥æèç»äºææï¼å®å°æµè§å¨è¢«éå®åå°æææå¡å¨ï¼éå®åæ¶ä¼éå å®¢æ·ç«¯çèº«ä»½ä¿¡æ¯ãå¦ï¼\n\n/oauth/authorize?client_id=simplify&response_type=code&scope=server&redirect_uri=https://www.ivoov.com\n\n\nåæ°åè¡¨å¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * response_typeï¼ææç æ¨¡å¼åºå®ä¸ºcodeã\n * scopeï¼å®¢æ·ç«¯æéã\n * redirect_uriï¼è·³è½¬uriï¼å½ææç ç³è¯·æååä¼è·³è½¬å°æ­¤å°åï¼å¹¶å¨åè¾¹å¸¦ä¸codeåæ°ï¼ææç ï¼ã\n\nï¼2ï¼æµè§å¨åºç°åæææå¡å¨ææé¡µé¢ï¼ä¹åå°ç¨æ·åæææã\n\nï¼3ï¼æææå¡å¨å°ææç ï¼authorizationcodeï¼è½¬ç»æµè§å¨åéç»client(éè¿redirect_uri)ã\n\nï¼4ï¼å®¢æ·ç«¯æ¿çææç åæææå¡å¨ç´¢è¦è®¿é®access_tokenï¼è¯·æ±å¦ä¸ï¼\n\n/oauth/token?client_id=simplify&client_secret=secret&grant_type=authorization_code&code=5pgfcd&redirect_uri=https://www.ivoov.com\n\n\nåæ°åè¡¨å¦ä¸\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * client_secretï¼å®¢æ·ç«¯ç§é¥ã\n * grant_typeï¼ææç±»åï¼å¡«åauthorization_codeï¼è¡¨ç¤ºææç æ¨¡å¼\n * codeï¼ææç ï¼å°±æ¯ååè·åçææç ï¼æ³¨æï¼ææç åªä½¿ç¨ä¸æ¬¡å°±æ æäºï¼éè¦éæ°ç³è¯·ã\n * redirect_uriï¼ç³è¯·ææç æ¶çè·³è½¬urlï¼ä¸å®åç³è¯·ææç æ¶ç¨çredirect_uriä¸è´ã\n\nï¼5ï¼æææå¡å¨è¿åä»¤ç(access_token)\n\nè¿ç§æ¨¡å¼æ¯åç§æ¨¡å¼ä¸­æå®å¨çä¸ç§æ¨¡å¼ãä¸è¬ç¨äºclientæ¯webæå¡å¨ç«¯åºç¨æç¬¬ä¸æ¹çåçappè°ç¨èµæºæå¡çæ¶åãå ä¸ºå¨è¿ç§æ¨¡å¼ä¸­access_tokenä¸ä¼ç»è¿æµè§å¨æç§»å¨ç«¯çappï¼èæ¯ç´æ¥ä»æå¡ç«¯å»äº¤æ¢ï¼è¿æ ·å°±æå¤§éåº¦çåå°äºä»¤çæ³æ¼çé£é©ã\n\nè¿ä¸ª code çä½ç¨æ¯ä¿æ¤ token çå®å¨æ§ãä¸ä¸èè¯´å°ï¼ç®åæ¨¡å¼ä¸ï¼token æ¯ä¸å®å¨çãè¿æ¯å ä¸ºå¨ç¬¬ 4 æ­¥å½ä¸­ç´æ¥æ token è¿åç»åºç¨ãèè¿ä¸æ­¥å®¹æè¢«æ¦æªãçªå¬ãå¼å¥äº code ä¹åï¼å³ä½¿æ»å»èè½å¤çªåå° codeï¼ä½æ¯ç±äºä»æ æ³è·å¾åºç¨ä¿å­å¨æå¡å¨ç client_secretï¼å æ­¤ä¹æ æ³éè¿ code æ¢å tokenãèç¬¬ 5 æ­¥ï¼ä¸ºä»ä¹ä¸å®¹æè¢«æ¦æªãçªå¬å¢ï¼è¿æ¯å ä¸ºï¼é¦åï¼è¿æ¯ä¸ä¸ªä»æå¡å¨å°æå¡å¨çè®¿é®ï¼é»å®¢æ¯è¾é¾ææå°ï¼å¶æ¬¡ï¼è¿ä¸ªè¯·æ±éå¸¸è¦æ±æ¯ https çå®ç°ãå³ä½¿è½çªå¬å°æ°æ®åä¹æ æ³è§£æåºåå®¹ã\n\næäºè¿ä¸ª codeï¼token çå®å¨æ§å¤§å¤§æé«ãå æ­¤ï¼oauth2.0 é¼å±ä½¿ç¨è¿ç§æ¹å¼è¿è¡ææï¼èç®åæ¨¡å¼åæ¯å¨ä¸å¾å·²æåµä¸æä¼ä½¿ç¨ã\n\n\n# æµè¯\n\næµè§å¨è®¿é®è®¤è¯é¡µé¢ï¼\n\n/oauth/authorize?client_id=simplify&response_type=code&scope=server&redirect_uri=https://www.ivoov.com\n\n\n\n\nç¶åè¾å¥æ¨¡æçè´¦å·åå¯ç ç¹ç»éä¹åè¿å¥ææé¡µé¢ï¼\n\n\n\nç¡®è®¤ææåï¼æµè§å¨ä¼éå®åå°æå®è·¯å¾ï¼oauth_client_detailsè¡¨ä¸­çweb_server_redirect_uriï¼å¹¶éå éªè¯ç ?code=hzzmj7ï¼æ¯æ¬¡ä¸ä¸æ ·ï¼ï¼æåä½¿ç¨è¯¥éªè¯ç è·åtokenã\n\nä½¿ç¨postmanè¯·æ±æææå¡å¨ã\n\n\n\n\n# å¯ç æ¨¡å¼\n\nå¯ç æ¨¡å¼ä¸­ï¼ç¨æ·åå®¢æ·ç«¯æä¾èªå·±çç¨æ·ååå¯ç ãå®¢æ·ç«¯ä½¿ç¨è¿äºä¿¡æ¯ï¼å "æå¡åæä¾å" ç´¢è¦ææãå¨è¿ç§æ¨¡å¼ä¸­ï¼ç¨æ·å¿é¡»æèªå·±çå¯ç ç»å®¢æ·ç«¯ï¼ä½æ¯å®¢æ·ç«¯ä¸å¾å¨å­å¯ç ãè¿éå¸¸ç¨å¨ç¨æ·å¯¹å®¢æ·ç«¯é«åº¦ä¿¡ä»»çæåµä¸ï¼æ¯å¦å®¢æ·ç«¯æ¯æä½ç³»ç»çä¸é¨åã\n\nä¸ä¸ªå¸åçä¾å­æ¯åä¸ä¸ªä¼ä¸åé¨çä¸åäº§åè¦ä½¿ç¨æ¬ä¼ä¸ç oauth2.0 ä½ç³»ãå¨æäºæåµä¸ï¼äº§åå¸æè½å¤å®å¶åææé¡µé¢ãç±äºæ¯åä¸ªä¼ä¸ï¼ä¸éè¦åç¨æ·å±ç¤ºâxxxå°è·åä»¥ä¸æéâç­å­æ ·å¹¶è¯¢é®ç¨æ·çæææåï¼èåªéè¿è¡ç¨æ·çèº«ä»½è®¤è¯å³å¯ãè¿ä¸ªæ¶åï¼ç±å·ä½çäº§åå¢éå¼åå®å¶åçææçé¢ï¼æ¥æ¶ç¨æ·è¾å¥è´¦å·å¯ç ï¼å¹¶ç´æ¥ä¼ éç»é´ææå¡å¨è¿è¡ææå³å¯ã\n\n\n\nï¼1ï¼èµæºæ¥æèå°ç¨æ·åãå¯ç åéç»å®¢æ·ç«¯\n\nï¼2ï¼å®¢æ·ç«¯æ¿çèµæºæ¥æèçç¨æ·åãå¯ç åæææå¡å¨è¯·æ±ä»¤çï¼access_tokenï¼ï¼è¯·æ±å¦ä¸ï¼\n\n/oauth/token?client_id=simplify&client_secret=simplify&username=admin&grant_type=password&password=123456\n\n\nåæ°åè¡¨å¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * client_secretï¼å®¢æ·ç«¯ç§é¥ã\n * grant_typeï¼ææç±»åï¼å¡«åpasswordè¡¨ç¤ºå¯ç æ¨¡å¼\n * usernameï¼èµæºæ¥æèç¨æ·åã\n * passwordï¼èµæºæ¥æèå¯ç ã\n\nï¼3ï¼æææå¡å¨å°ä»¤çï¼access_tokenï¼åéç»client\n\nè¿ç§æ¨¡å¼ååç®åï¼ä½æ¯å´æå³çç´æ¥å°ç¨æ·ææä¿¡æ¯æ³æ¼ç»äºclientï¼å æ­¤è¿å°±è¯´æè¿ç§æ¨¡å¼åªè½ç¨äºclientæ¯æä»¬èªå·±å¼åçæåµä¸ãå æ­¤å¯ç æ¨¡å¼ä¸è¬ç¨äºæä»¬èªå·±å¼åçï¼ç¬¬ä¸æ¹åçappæç¬¬ä¸æ¹åé¡µé¢åºç¨ã\n\næä¸ç¹éè¦ç¹å«æ³¨æçæ¯ï¼å¨ç¬¬ 2 æ­¥ä¸­ï¼è®¤è¯æå¡å¨éè¦å¯¹å®¢æ·ç«¯çèº«ä»½è¿è¡éªè¯ï¼ç¡®ä¿æ¯åä¿¡ä»»çå®¢æ·ç«¯ã\n\n\n# æµè¯\n\nä½¿ç¨postmanè¯·æ±æææå¡å¨ã\n\n\n\n\n# å®¢æ·ç«¯æ¨¡å¼\n\nå¦æä¿¡ä»»å³ç³»åè¿ä¸æ­¥ï¼æèè°ç¨èæ¯ä¸ä¸ªåç«¯çæ¨¡åï¼æ²¡æç¨æ·çé¢çæ¶åï¼å¯ä»¥ä½¿ç¨å®¢æ·ç«¯æ¨¡å¼ãé´ææå¡å¨ç´æ¥å¯¹å®¢æ·ç«¯è¿è¡èº«ä»½éªè¯ï¼éªè¯éè¿åï¼è¿å tokenã\n\n\n\nï¼1ï¼å®¢æ·ç«¯åæææå¡å¨åéèªå·±çèº«ä»½ä¿¡æ¯ï¼å¹¶è¯·æ±ä»¤çï¼access_tokenï¼ ï¼2ï¼ç¡®è®¤å®¢æ·ç«¯èº«ä»½æ è¯¯åï¼å°ä»¤çï¼access_tokenï¼åéç»clientï¼è¯·æ±å¦ä¸ï¼\n\n/oauth/token?client_id=simplify&client_secret=simplify&grant_type=client_credentials\n\n\nåæ°åè¡¨å¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯åå¥æ è¯ã\n * client_secretï¼å®¢æ·ç«¯ç§é¥ã\n * grant_typeï¼ææç±»åï¼å¡«åclient_credentialsè¡¨ç¤ºå®¢æ·ç«¯æ¨¡å¼\n\nè¿ç§æ¨¡å¼æ¯ææ¹ä¾¿ä½æä¸å®å¨çæ¨¡å¼ãå æ­¤è¿å°±è¦æ±æä»¬å¯¹clientå®å¨çä¿¡ä»»ï¼èclientæ¬èº«ä¹æ¯å®å¨çãå æ­¤è¿ç§æ¨¡å¼ä¸è¬ç¨æ¥æä¾ç»æä»¬å®å¨ä¿¡ä»»çæå¡å¨ç«¯æå¡ãæ¯å¦ï¼åä½æ¹ç³»ç»å¯¹æ¥ï¼æåä¸ç»ç¨æ·ä¿¡æ¯ã\n\n\n# æµè¯\n\nä½¿ç¨postmanè¯·æ±æææå¡å¨ã\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"åå»ºæ¡ä¾å·¥ç¨é¡¹ç®",frontmatter:{title:"åå»ºæ¡ä¾å·¥ç¨é¡¹ç®",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/00c356/"},regularPath:"/19.Spring%20Security%20OAuth2/02.%E5%88%9B%E5%BB%BA%E6%A1%88%E4%BE%8B%E5%B7%A5%E7%A8%8B/01.%E5%88%9B%E5%BB%BA%E6%A1%88%E4%BE%8B%E5%B7%A5%E7%A8%8B%E9%A1%B9%E7%9B%AE.html",relativePath:"19.Spring Security OAuth2/02.åå»ºæ¡ä¾å·¥ç¨/01.åå»ºæ¡ä¾å·¥ç¨é¡¹ç®.md",key:"v-2d7230e8",path:"/pages/00c356/",headers:[{level:2,title:"pom",slug:"pom",normalizedTitle:"pom",charIndex:15}],headersStr:"pom",content:'# åå»ºæ¡ä¾å·¥ç¨é¡¹ç®\n\n\n# pom\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.ieooc</groupId>\n    <artifactId>simplify</artifactId>\n    <packaging>pom</packaging>\n    <name>${project.artifactId}</name>\n    <version>1.0.0-SNAPSHOT</version>\n    <organization>\n        <name>simplify</name>\n        <url>https://www.ieooc.com</url>\n    </organization>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <maven.compiler.encoding>UTF-8</maven.compiler.encoding>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n        <spring-boot.version>2.3.2.RELEASE</spring-boot.version>\n        <spring-cloud.version>Hoxton.SR8</spring-cloud.version>\n        <spring-cloud-alibaba.version>2.2.3.RELEASE</spring-cloud-alibaba.version>\n        <hutool.version>5.4.5</hutool.version>\n    </properties>\n\n    <modules>\n\n        <module>simplify-common-bom</module>\n    </modules>\n\n    <dependencies>\n        \x3c!-- éç½®æä»¶æ³¨éå¤çå¨ --\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-configuration-processor</artifactId>\n            <optional>true</optional>\n        </dependency>\n        \x3c!--çæ§--\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-actuator</artifactId>\n        </dependency>\n        \x3c!--lombokææ·å¼åå·¥å·å--\x3e\n        <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <scope>provided</scope>\n        </dependency>\n        \x3c!--æµè¯ä¾èµ--\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-dependencies</artifactId>\n                <version>${spring-boot.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>${spring-cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-bom</artifactId>\n                <version>1.0.0-SNAPSHOT</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            \x3c!--spring cloud alibaba--\x3e\n            <dependency>\n                <groupId>com.alibaba.cloud</groupId>\n                <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n                <version>${spring-cloud-alibaba.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            \x3c!--web æ¨¡å--\x3e\n            <dependency>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-starter-web</artifactId>\n                <version>${spring-boot.version}</version>\n                <exclusions>\n                    \x3c!--æé¤tomcatä¾èµ--\x3e\n                    <exclusion>\n                        <artifactId>spring-boot-starter-tomcat</artifactId>\n                        <groupId>org.springframework.boot</groupId>\n                    </exclusion>\n                </exclusions>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n\n    \x3c!--ååæä»¶å°è¿ç¨ä»åº--\x3e\n    \x3c!-- å®ä¹snapshotsåºåreleasesåºçnexuså°å --\x3e\n    <distributionManagement>\n        <repository>\n            <id>nexus</id>\n            <name>Nexus Release Repository</name>\n            <url>http://192.168.199.111:8081/repository/maven-releases/</url>\n        </repository>\n        <snapshotRepository>\n            <id>nexus</id>\n            <name>Nexus Snapshot Repository</name>\n            <url>http://192.168.199.111:8081/repository/maven-snapshots/</url>\n        </snapshotRepository>\n    </distributionManagement>\n\n    <build>\n        <finalName>${project.name}</finalName>\n        <resources>\n            <resource>\n                <directory>src/main/resources</directory>\n                <filtering>true</filtering>\n            </resource>\n        </resources>\n        <pluginManagement>\n            <plugins>\n                <plugin>\n                    <groupId>org.springframework.boot</groupId>\n                    <artifactId>spring-boot-maven-plugin</artifactId>\n                    <version>${spring-boot.version}</version>\n                    <executions>\n                        \x3c!-- å¨ mvn package æ§è¡ä¹åï¼è¿ä¸ªå½ä»¤åæ¬¡æåçæå¯æ§è¡ç jarï¼\n                        åæ¶å° mvn package çæç jar éå½åä¸º *.origin --\x3e\n                        <execution>\n                            <id>repackage</id>\n                            <goals>\n                                <goal>repackage</goal>\n                            </goals>\n                        </execution>\n                    </executions>\n                </plugin>\n            </plugins>\n        </pluginManagement>\n        <plugins>\n            <plugin>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.8.0</version>\n                <configuration>\n                    <target>${maven.compiler.target}</target>\n                    <source>${maven.compiler.source}</source>\n                    <encoding>UTF-8</encoding>\n                    <skip>true</skip>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n\n    <repositories>\n        \x3c!--é¿éäºä»£ç--\x3e\n        <repository>\n            <id>aliyun</id>\n            <name>aliyun</name>\n            <url>http://maven.aliyun.com/nexus/content/groups/public</url>\n        </repository>\n    </repositories>\n\n    <profiles>\n        <profile>\n            <id>dev</id>\n            <properties>\n                \x3c!-- ç¯å¢æ è¯ï¼éè¦ä¸éç½®æä»¶çåç§°ç¸å¯¹åº --\x3e\n                <profiles.active>dev</profiles.active>\n            </properties>\n            <activation>\n                \x3c!-- é»è®¤ç¯å¢ --\x3e\n                <activeByDefault>true</activeByDefault>\n            </activation>\n        </profile>\n        <profile>\n            <id>test</id>\n            <properties>\n                <profiles.active>test</profiles.active>\n            </properties>\n        </profile>\n        <profile>\n            <id>prod</id>\n            <properties>\n                <profiles.active>prod</profiles.active>\n            </properties>\n        </profile>\n    </profiles>\n</project>\n',normalizedContent:'# åå»ºæ¡ä¾å·¥ç¨é¡¹ç®\n\n\n# pom\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n\n    <groupid>com.ieooc</groupid>\n    <artifactid>simplify</artifactid>\n    <packaging>pom</packaging>\n    <name>${project.artifactid}</name>\n    <version>1.0.0-snapshot</version>\n    <organization>\n        <name>simplify</name>\n        <url>https://www.ieooc.com</url>\n    </organization>\n\n    <properties>\n        <project.build.sourceencoding>utf-8</project.build.sourceencoding>\n        <project.reporting.outputencoding>utf-8</project.reporting.outputencoding>\n        <maven.compiler.encoding>utf-8</maven.compiler.encoding>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n        <spring-boot.version>2.3.2.release</spring-boot.version>\n        <spring-cloud.version>hoxton.sr8</spring-cloud.version>\n        <spring-cloud-alibaba.version>2.2.3.release</spring-cloud-alibaba.version>\n        <hutool.version>5.4.5</hutool.version>\n    </properties>\n\n    <modules>\n\n        <module>simplify-common-bom</module>\n    </modules>\n\n    <dependencies>\n        \x3c!-- éç½®æä»¶æ³¨éå¤çå¨ --\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-configuration-processor</artifactid>\n            <optional>true</optional>\n        </dependency>\n        \x3c!--çæ§--\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-actuator</artifactid>\n        </dependency>\n        \x3c!--lombokææ·å¼åå·¥å·å--\x3e\n        <dependency>\n            <groupid>org.projectlombok</groupid>\n            <artifactid>lombok</artifactid>\n            <scope>provided</scope>\n        </dependency>\n        \x3c!--æµè¯ä¾èµ--\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-test</artifactid>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <dependencymanagement>\n        <dependencies>\n            <dependency>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-dependencies</artifactid>\n                <version>${spring-boot.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupid>org.springframework.cloud</groupid>\n                <artifactid>spring-cloud-dependencies</artifactid>\n                <version>${spring-cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-bom</artifactid>\n                <version>1.0.0-snapshot</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            \x3c!--spring cloud alibaba--\x3e\n            <dependency>\n                <groupid>com.alibaba.cloud</groupid>\n                <artifactid>spring-cloud-alibaba-dependencies</artifactid>\n                <version>${spring-cloud-alibaba.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            \x3c!--web æ¨¡å--\x3e\n            <dependency>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-starter-web</artifactid>\n                <version>${spring-boot.version}</version>\n                <exclusions>\n                    \x3c!--æé¤tomcatä¾èµ--\x3e\n                    <exclusion>\n                        <artifactid>spring-boot-starter-tomcat</artifactid>\n                        <groupid>org.springframework.boot</groupid>\n                    </exclusion>\n                </exclusions>\n            </dependency>\n        </dependencies>\n    </dependencymanagement>\n\n    \x3c!--ååæä»¶å°è¿ç¨ä»åº--\x3e\n    \x3c!-- å®ä¹snapshotsåºåreleasesåºçnexuså°å --\x3e\n    <distributionmanagement>\n        <repository>\n            <id>nexus</id>\n            <name>nexus release repository</name>\n            <url>http://192.168.199.111:8081/repository/maven-releases/</url>\n        </repository>\n        <snapshotrepository>\n            <id>nexus</id>\n            <name>nexus snapshot repository</name>\n            <url>http://192.168.199.111:8081/repository/maven-snapshots/</url>\n        </snapshotrepository>\n    </distributionmanagement>\n\n    <build>\n        <finalname>${project.name}</finalname>\n        <resources>\n            <resource>\n                <directory>src/main/resources</directory>\n                <filtering>true</filtering>\n            </resource>\n        </resources>\n        <pluginmanagement>\n            <plugins>\n                <plugin>\n                    <groupid>org.springframework.boot</groupid>\n                    <artifactid>spring-boot-maven-plugin</artifactid>\n                    <version>${spring-boot.version}</version>\n                    <executions>\n                        \x3c!-- å¨ mvn package æ§è¡ä¹åï¼è¿ä¸ªå½ä»¤åæ¬¡æåçæå¯æ§è¡ç jarï¼\n                        åæ¶å° mvn package çæç jar éå½åä¸º *.origin --\x3e\n                        <execution>\n                            <id>repackage</id>\n                            <goals>\n                                <goal>repackage</goal>\n                            </goals>\n                        </execution>\n                    </executions>\n                </plugin>\n            </plugins>\n        </pluginmanagement>\n        <plugins>\n            <plugin>\n                <artifactid>maven-compiler-plugin</artifactid>\n                <version>3.8.0</version>\n                <configuration>\n                    <target>${maven.compiler.target}</target>\n                    <source>${maven.compiler.source}</source>\n                    <encoding>utf-8</encoding>\n                    <skip>true</skip>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n\n    <repositories>\n        \x3c!--é¿éäºä»£ç--\x3e\n        <repository>\n            <id>aliyun</id>\n            <name>aliyun</name>\n            <url>http://maven.aliyun.com/nexus/content/groups/public</url>\n        </repository>\n    </repositories>\n\n    <profiles>\n        <profile>\n            <id>dev</id>\n            <properties>\n                \x3c!-- ç¯å¢æ è¯ï¼éè¦ä¸éç½®æä»¶çåç§°ç¸å¯¹åº --\x3e\n                <profiles.active>dev</profiles.active>\n            </properties>\n            <activation>\n                \x3c!-- é»è®¤ç¯å¢ --\x3e\n                <activebydefault>true</activebydefault>\n            </activation>\n        </profile>\n        <profile>\n            <id>test</id>\n            <properties>\n                <profiles.active>test</profiles.active>\n            </properties>\n        </profile>\n        <profile>\n            <id>prod</id>\n            <properties>\n                <profiles.active>prod</profiles.active>\n            </properties>\n        </profile>\n    </profiles>\n</project>\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"åå»ºç»ä¸çä¾èµç®¡çæ¨¡å",frontmatter:{title:"åå»ºç»ä¸çä¾èµç®¡çæ¨¡å",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/c3686c/"},regularPath:"/19.Spring%20Security%20OAuth2/02.%E5%88%9B%E5%BB%BA%E6%A1%88%E4%BE%8B%E5%B7%A5%E7%A8%8B/02.%E5%88%9B%E5%BB%BA%E7%BB%9F%E4%B8%80%E7%9A%84%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97.html",relativePath:"19.Spring Security OAuth2/02.åå»ºæ¡ä¾å·¥ç¨/02.åå»ºç»ä¸çä¾èµç®¡çæ¨¡å.md",key:"v-2fa8ca6b",path:"/pages/c3686c/",headers:[{level:2,title:"pom",slug:"pom",normalizedTitle:"pom",charIndex:18}],headersStr:"pom",content:'# åå»ºç»ä¸çä¾èµç®¡çæ¨¡å\n\n\n# pom\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <parent>\n        <groupId>com.ieooc.cloud</groupId>\n        <artifactId>simplify-cloud-dependencies-parent</artifactId>\n        <version>1.0.0.RELEASE</version>\n        <relativePath/>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.ieooc</groupId>\n    <artifactId>simplify-common-bom</artifactId>\n    <packaging>pom</packaging>\n    <version>1.0.0-SNAPSHOT</version>\n    <description>simplify å¬å±çæ¬æ§å¶</description>\n\n    <properties>\n        <simplify.version>1.0.0-SNAPSHOT</simplify.version>\n        <mybatis-plus.version>3.4.0</mybatis-plus.version>\n        <druid.version>1.1.24</druid.version>\n        <mysql-connector.version>8.0.21</mysql-connector.version>\n        <swagger.core.version>1.5.20</swagger.core.version>\n        <swagger.fox.version>3.0.0</swagger.fox.version>\n    </properties>\n\n    <dependencyManagement>\n        <dependencies>\n            \x3c!--å¬å±å·¥å·æ ¸å¿å--\x3e\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-core</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--æ°æ®æä½ç¸å³--\x3e\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-data</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--å®å¨å·¥å·ç±»--\x3e\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-security</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--ç½å³éç½®--\x3e\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-gateway</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-datasource</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-job</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-log</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-minio</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-sentinel</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--Sentinel æå¡éçº§çæ­ãéæµç»ä»¶--\x3e\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-sequence</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--swaggeræå»ºæRESTful APIææ¡£--\x3e\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-swagger</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-common-transaction</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--éç¨ç¨æ·æéç®¡çç³»ç»å¬å±apiæ¨¡å--\x3e\n            <dependency>\n                <groupId>com.ieooc</groupId>\n                <artifactId>simplify-upms-api</artifactId>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--mybatis plus extension,åå«mybatis plus core--\x3e\n            <dependency>\n                <groupId>com.baomidou</groupId>\n                <artifactId>mybatis-plus-extension</artifactId>\n                <version>${mybatis-plus.version}</version>\n            </dependency>\n            \x3c!--mybatis-plus--\x3e\n            <dependency>\n                <groupId>com.baomidou</groupId>\n                <artifactId>mybatis-plus-boot-starter</artifactId>\n                <version>${mybatis-plus.version}</version>\n            </dependency>\n            \x3c!--mybatis-plusä»£ç çæå¨--\x3e\n            <dependency>\n                <groupId>com.baomidou</groupId>\n                <artifactId>mybatis-plus-generator</artifactId>\n                <version>${mybatis-plus.version}</version>\n            </dependency>\n            \x3c!--druidæ°æ®åºè¿æ¥æ± åçæ§--\x3e\n            <dependency>\n                <groupId>com.alibaba</groupId>\n                <artifactId>druid-spring-boot-starter</artifactId>\n                <version>${druid.version}</version>\n            </dependency>\n            \x3c!--swagger æ ¸å¿ç»ä»¶--\x3e\n            <dependency>\n                <groupId>io.swagger</groupId>\n                <artifactId>swagger-annotations</artifactId>\n                <version>${swagger.core.version}</version>\n            </dependency>\n            \x3c!--swagger ä¾èµ--\x3e\n            <dependency>\n                <groupId>io.springfox</groupId>\n                <artifactId>springfox-swagger2</artifactId>\n                <version>${swagger.fox.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>io.springfox</groupId>\n                <artifactId>springfox-boot-starter</artifactId>\n                <version>${swagger.fox.version}</version>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n</project>\n',normalizedContent:'# åå»ºç»ä¸çä¾èµç®¡çæ¨¡å\n\n\n# pom\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <parent>\n        <groupid>com.ieooc.cloud</groupid>\n        <artifactid>simplify-cloud-dependencies-parent</artifactid>\n        <version>1.0.0.release</version>\n        <relativepath/>\n    </parent>\n    <modelversion>4.0.0</modelversion>\n\n    <groupid>com.ieooc</groupid>\n    <artifactid>simplify-common-bom</artifactid>\n    <packaging>pom</packaging>\n    <version>1.0.0-snapshot</version>\n    <description>simplify å¬å±çæ¬æ§å¶</description>\n\n    <properties>\n        <simplify.version>1.0.0-snapshot</simplify.version>\n        <mybatis-plus.version>3.4.0</mybatis-plus.version>\n        <druid.version>1.1.24</druid.version>\n        <mysql-connector.version>8.0.21</mysql-connector.version>\n        <swagger.core.version>1.5.20</swagger.core.version>\n        <swagger.fox.version>3.0.0</swagger.fox.version>\n    </properties>\n\n    <dependencymanagement>\n        <dependencies>\n            \x3c!--å¬å±å·¥å·æ ¸å¿å--\x3e\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-core</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--æ°æ®æä½ç¸å³--\x3e\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-data</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--å®å¨å·¥å·ç±»--\x3e\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-security</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--ç½å³éç½®--\x3e\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-gateway</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-datasource</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-job</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-log</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-minio</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-sentinel</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--sentinel æå¡éçº§çæ­ãéæµç»ä»¶--\x3e\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-sequence</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--swaggeræå»ºærestful apiææ¡£--\x3e\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-swagger</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-common-transaction</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--éç¨ç¨æ·æéç®¡çç³»ç»å¬å±apiæ¨¡å--\x3e\n            <dependency>\n                <groupid>com.ieooc</groupid>\n                <artifactid>simplify-upms-api</artifactid>\n                <version>${simplify.version}</version>\n            </dependency>\n            \x3c!--mybatis plus extension,åå«mybatis plus core--\x3e\n            <dependency>\n                <groupid>com.baomidou</groupid>\n                <artifactid>mybatis-plus-extension</artifactid>\n                <version>${mybatis-plus.version}</version>\n            </dependency>\n            \x3c!--mybatis-plus--\x3e\n            <dependency>\n                <groupid>com.baomidou</groupid>\n                <artifactid>mybatis-plus-boot-starter</artifactid>\n                <version>${mybatis-plus.version}</version>\n            </dependency>\n            \x3c!--mybatis-plusä»£ç çæå¨--\x3e\n            <dependency>\n                <groupid>com.baomidou</groupid>\n                <artifactid>mybatis-plus-generator</artifactid>\n                <version>${mybatis-plus.version}</version>\n            </dependency>\n            \x3c!--druidæ°æ®åºè¿æ¥æ± åçæ§--\x3e\n            <dependency>\n                <groupid>com.alibaba</groupid>\n                <artifactid>druid-spring-boot-starter</artifactid>\n                <version>${druid.version}</version>\n            </dependency>\n            \x3c!--swagger æ ¸å¿ç»ä»¶--\x3e\n            <dependency>\n                <groupid>io.swagger</groupid>\n                <artifactid>swagger-annotations</artifactid>\n                <version>${swagger.core.version}</version>\n            </dependency>\n            \x3c!--swagger ä¾èµ--\x3e\n            <dependency>\n                <groupid>io.springfox</groupid>\n                <artifactid>springfox-swagger2</artifactid>\n                <version>${swagger.fox.version}</version>\n            </dependency>\n            <dependency>\n                <groupid>io.springfox</groupid>\n                <artifactid>springfox-boot-starter</artifactid>\n                <version>${swagger.fox.version}</version>\n            </dependency>\n        </dependencies>\n    </dependencymanagement>\n</project>\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"æææå¡å¨éç½®",frontmatter:{title:"æææå¡å¨éç½®",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/5eb137/"},regularPath:"/19.Spring%20Security%20OAuth2/03.%E5%88%9B%E5%BB%BA%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8/01.%E6%8E%88%E6%9D%83%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE.html",relativePath:"19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/01.æææå¡å¨éç½®.md",key:"v-ca52ce64",path:"/pages/5eb137/",headers:[{level:2,title:"pom.xml",slug:"pom-xml",normalizedTitle:"pom.xml",charIndex:14},{level:2,title:"Application",slug:"application",normalizedTitle:"application",charIndex:1461},{level:2,title:"EnableAuthorizationServer",slug:"enableauthorizationserver",normalizedTitle:"enableauthorizationserver",charIndex:1855},{level:2,title:"éç½®å®¢æ·ç«¯è¯¦ç»ä¿¡æ¯",slug:"éç½®å®¢æ·ç«¯è¯¦ç»ä¿¡æ¯",normalizedTitle:"éç½®å®¢æ·ç«¯è¯¦ç»ä¿¡æ¯",charIndex:2949},{level:2,title:"ç®¡çä»¤ç",slug:"ç®¡çä»¤ç",normalizedTitle:"ç®¡çä»¤ç",charIndex:4202},{level:2,title:"ä»¤çè®¿é®ç«¯ç¹éç½®",slug:"ä»¤çè®¿é®ç«¯ç¹éç½®",normalizedTitle:"ä»¤çè®¿é®ç«¯ç¹éç½®",charIndex:6019},{level:3,title:"éç½®ææç±»åï¼Grant Typesï¼",slug:"éç½®ææç±»å-grant-types",normalizedTitle:"éç½®ææç±»åï¼grant typesï¼",charIndex:6103},{level:3,title:"éç½®ææç«¯ç¹çURLï¼Endpoint URLsï¼ï¼",slug:"éç½®ææç«¯ç¹çurl-endpoint-urls",normalizedTitle:"éç½®ææç«¯ç¹çurlï¼endpoint urlsï¼ï¼",charIndex:6821},{level:3,title:"ä»¤çç«¯ç¹çå®å¨çº¦æ",slug:"ä»¤çç«¯ç¹çå®å¨çº¦æ",normalizedTitle:"ä»¤çç«¯ç¹çå®å¨çº¦æ",charIndex:2934},{level:3,title:"webå®å¨éç½®",slug:"webå®å¨éç½®",normalizedTitle:"webå®å¨éç½®",charIndex:8371}],headersStr:"pom.xml Application EnableAuthorizationServer éç½®å®¢æ·ç«¯è¯¦ç»ä¿¡æ¯ ç®¡çä»¤ç ä»¤çè®¿é®ç«¯ç¹éç½® éç½®ææç±»åï¼Grant Typesï¼ éç½®ææç«¯ç¹çURLï¼Endpoint URLsï¼ï¼ ä»¤çç«¯ç¹çå®å¨çº¦æ webå®å¨éç½®",content:'# æææå¡å¨éç½®\n\n\n# pom.xml\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <parent>\n        <artifactId>simplify-samples</artifactId>\n        <groupId>com.ieooc.simplify.samples</groupId>\n        <version>0.0.1-SNAPSHOT</version>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <artifactId>simplify-auth</artifactId>\n    <packaging>jar</packaging>\n    <description>è®¤è¯æææå¡</description>\n\n    <dependencies>\n        \x3c!--web æ¨¡å--\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        \x3c!--undertowå®¹å¨--\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-undertow</artifactId>\n        </dependency>\n        \x3c!--éæOAuth2--\x3e\n        <dependency>\n            <groupId>org.springframework.cloud</groupId>\n            <artifactId>spring-cloud-starter-oauth2</artifactId>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n\n\n# Application\n\npackage com.ieooc.simplify.samples;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@SpringBootApplication\npublic class AuthApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AuthApplication.class, args);\n    }\n}\n\n\n\n\n# EnableAuthorizationServer\n\nå¯ä»¥ç¨ @EnableAuthorizationServer æ³¨è§£å¹¶ç»§æ¿AuthorizationServerConfigurerAdapteræ¥éç½®OAuth2.0 æææå¡å¨ã\n\nå¨Configåä¸åå»ºAuthorizationServerï¼\n\n@Configuration\n@EnableAuthorizationServer\npublic class AuthorizationServer extends AuthorizationServerConfigurerAdapter {\n    //ç¥...\n}\n\n\nAuthorizationServerConfigurerAdapterè¦æ±éç½®ä»¥ä¸å ä¸ªç±»ï¼è¿å ä¸ªç±»æ¯ç±Springåå»ºçç¬ç«çéç½®å¯¹è±¡ï¼å®ä»¬ä¼è¢«Springä¼ å¥AuthorizationServerConfigurerä¸­è¿è¡éç½®ã\n\npublic class AuthorizationServerConfigurerAdapter implements AuthorizationServerConfigurer {\n    public AuthorizationServerConfigurerAdapter() {}\n    public void configure(AuthorizationServerSecurityConfigurer security) throws Exception {}\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {}\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {}\n}\n\n\n * ClientDetailsServiceConfigurerï¼ç¨æ¥éç½®å®¢æ·ç«¯è¯¦ææå¡ï¼ClientDetailsServiceï¼ï¼å®¢æ·ç«¯è¯¦æä¿¡æ¯å¨è¿éè¿è¡åå§åï¼ä½ è½å¤æå®¢æ·ç«¯è¯¦æä¿¡æ¯åæ­»å¨è¿éæèæ¯éè¿æ°æ®åºæ¥å­å¨è°åè¯¦æä¿¡æ¯ã\n * AuthorizationServerEndpointsConfigurerï¼ç¨æ¥éç½®ä»¤çï¼tokenï¼çè®¿é®ç«¯ç¹åä»¤çæå¡(tokenservices)ã\n * AuthorizationServerSecurityConfigurerï¼ç¨æ¥éç½®ä»¤çç«¯ç¹çå®å¨çº¦æ.\n\n\n# éç½®å®¢æ·ç«¯è¯¦ç»ä¿¡æ¯\n\nClientDetailsServiceConfigurer è½å¤ä½¿ç¨åå­æèJDBCæ¥å®ç°å®¢æ·ç«¯è¯¦ææå¡ï¼ClientDetailsServiceï¼ï¼ClientDetailsServiceè´è´£æ¥æ¾ClientDetailsï¼èClientDetailsæå ä¸ªéè¦çå±æ§å¦ä¸åè¡¨ï¼\n\n * clientIdï¼ï¼å¿é¡»çï¼ç¨æ¥æ è¯å®¢æ·çIdã\n * secretï¼ï¼éè¦å¼å¾ä¿¡ä»»çå®¢æ·ç«¯ï¼å®¢æ·ç«¯å®å¨ç ï¼å¦ææçè¯ã\n * scopeï¼ç¨æ¥éå¶å®¢æ·ç«¯çè®¿é®èå´ï¼å¦æä¸ºç©ºï¼é»è®¤ï¼çè¯ï¼é£ä¹å®¢æ·ç«¯æ¥æå¨é¨çè®¿é®èå´ã\n * authorizedGrantTypesï¼æ­¤å®¢æ·ç«¯å¯ä»¥ä½¿ç¨çææç±»åï¼é»è®¤ä¸ºç©ºã\n * authoritiesï¼æ­¤å®¢æ·ç«¯å¯ä»¥ä½¿ç¨çæéï¼åºäºSpring Security authoritiesï¼ã\n\nå®¢æ·ç«¯è¯¦æï¼Client Detailsï¼è½å¤å¨åºç¨ç¨åºè¿è¡çæ¶åè¿è¡æ´æ°ï¼å¯ä»¥éè¿è®¿é®åºå±çå­å¨æå¡ï¼ä¾å¦å°å®¢æ·ç«¯è¯¦æå­å¨å¨ä¸ä¸ªå³ç³»æ°æ®åºçè¡¨ä¸­ï¼å°±å¯ä»¥ä½¿ç¨ JdbcClientDetailsServiceï¼æèéè¿èªå·±å®ç°ClientRegistrationServiceæ¥å£ï¼åæ¶ä½ ä¹å¯ä»¥å®ç° ClientDetailsService æ¥å£ï¼æ¥è¿è¡ç®¡çã\n\n@Override\npublic void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n    // clients.withClientDetails(clientDetailsService);\n    clients.inMemory()// ä½¿ç¨inâmemoryå­å¨\n            .withClient("c1")// client_id\n            .secret(new BCryptPasswordEncoder().encode("secret"))\n            .resourceIds("res1")\n            // è¯¥clientåè®¸çææç±»å authorization_code, password, refresh_token, implicit, client_credentials\n            .authorizedGrantTypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n            .scopes("all")// åè®¸çææèå´\n            .autoApprove(false)\n            //å ä¸éªè¯åè°å°å\n            .redirectUris("http://www.baidu.com");\n}\n\n\n\n# ç®¡çä»¤ç\n\nAuthorizationServerTokenServices æ¥å£å®ä¹äºä¸äºæä½ä½¿å¾ä½ å¯ä»¥å¯¹ä»¤çè¿è¡ä¸äºå¿è¦çç®¡çï¼ä»¤çå¯ä»¥è¢«ç¨æ¥å è½½èº«ä»½ä¿¡æ¯ï¼éé¢åå«äºè¿ä¸ªä»¤ççç¸å³æéã\n\nèªå·±å¯ä»¥åå»º AuthorizationServerTokenServices è¿ä¸ªæ¥å£çå®ç°ï¼åéè¦ç»§æ¿ DefaultTokenServices è¿ä¸ªç±»ï¼éé¢åå«äºä¸äºæç¨å®ç°ï¼ä½ å¯ä»¥ä½¿ç¨å®æ¥ä¿®æ¹ä»¤ççæ ¼å¼åä»¤ççå­å¨ãé»è®¤çï¼å½å®å°è¯åå»ºä¸ä¸ªä»¤ççæ¶åï¼æ¯ä½¿ç¨éæºå¼æ¥è¿è¡å¡«åçï¼é¤äºæä¹åä»¤çæ¯å§æä¸ä¸ª TokenStore æ¥å£æ¥å®ç°ä»¥å¤ï¼è¿ä¸ªç±»å ä¹å¸®ä½ åäºææçäºæãå¹¶ä¸ TokenStore è¿ä¸ªæ¥å£æä¸ä¸ªé»è®¤çå®ç°ï¼å®å°±æ¯ InMemoryTokenStore ï¼å¦å¶å½åï¼ææçä»¤çæ¯è¢«ä¿å­å¨äºåå­ä¸­ãé¤äºä½¿ç¨è¿ä¸ªç±»ä»¥å¤ï¼ä½ è¿å¯ä»¥ä½¿ç¨ä¸äºå¶ä»çé¢å®ä¹å®ç°ï¼ä¸é¢æå ä¸ªçæ¬ï¼å®ä»¬é½å®ç°äºTokenStoreæ¥å£ï¼\n\n * InMemoryTokenStoreï¼è¿ä¸ªçæ¬çå®ç°æ¯è¢«é»è®¤éç¨çï¼å®å¯ä»¥å®ç¾çå·¥ä½å¨åæå¡å¨ä¸ï¼å³è®¿é®å¹¶åé ååä¸å¤§çæåµä¸ï¼å¹¶ä¸å®å¨å¤±è´¥çæ¶åä¸ä¼è¿è¡å¤ä»½ï¼ï¼å¤§å¤æ°çé¡¹ç®é½å¯ä»¥ä½¿ç¨è¿ä¸ªçæ¬çå®ç°æ¥è¿è¡ å°è¯ï¼ä½ å¯ä»¥å¨å¼åçæ¶åä½¿ç¨å®æ¥è¿è¡ç®¡çï¼å ä¸ºä¸ä¼è¢«ä¿å­å°ç£çä¸­ï¼æä»¥æ´æäºè°è¯ã\n\n * JdbcTokenStoreï¼è¿æ¯ä¸ä¸ªåºäºJDBCçå®ç°çæ¬ï¼ä»¤çä¼è¢«ä¿å­è¿å³ç³»åæ°æ®åºãä½¿ç¨è¿ä¸ªçæ¬çå®ç°æ¶ï¼ ä½ å¯ä»¥å¨ä¸åçæå¡å¨ä¹é´å±äº«ä»¤çä¿¡æ¯ï¼ä½¿ç¨è¿ä¸ªçæ¬çæ¶åè¯·æ³¨ææ"spring-jdbc"è¿ä¸ªä¾èµå å¥å°ä½ ç classpathå½ä¸­ã\n\n * JwtTokenStoreï¼è¿ä¸ªçæ¬çå¨ç§°æ¯ JSON Web Tokenï¼JWTï¼ï¼å®å¯ä»¥æä»¤çç¸å³çæ°æ®è¿è¡ç¼ç ï¼å æ­¤å¯¹ äºåç«¯æå¡æ¥è¯´ï¼å®ä¸éè¦è¿è¡å­å¨ï¼è¿å°æ¯ä¸ä¸ªéå¤§ä¼å¿ï¼ï¼ä½æ¯å®æä¸ä¸ªç¼ºç¹ï¼é£å°±æ¯æ¤éä¸ä¸ªå·²ç»æ æä»¤çå°ä¼éå¸¸å°é¾ï¼æä»¥å®éå¸¸ç¨æ¥å¤çä¸ä¸ªçå½å¨æè¾ç­çä»¤çä»¥åæ¤éå·æ°ä»¤çï¼refresh_tokenï¼ã å¦å¤ä¸ä¸ªç¼ºç¹å°±æ¯è¿ä¸ªä»¤çå ç¨çç©ºé´ä¼æ¯è¾å¤§ï¼å¦æä½ å å¥äºæ¯è¾å¤ç¨æ·å­è¯ä¿¡æ¯ãJwtTokenStore ä¸ä¼ä¿\n\nå­ä»»ä½æ°æ®ï¼ä½æ¯å®å¨è½¬æ¢ä»¤çå¼ä»¥åææä¿¡æ¯æ¹é¢ä¸ DefaultTokenServices ææ®æ¼çè§è²æ¯ä¸æ ·çã\n\n1ãå®ä¹TokenConfig\n\nå¨configåä¸å®ä¹TokenConfigï¼æä»¬ææ¶åä½¿ç¨InMemoryTokenStoreï¼çæä¸ä¸ªæ®éçä»¤çã\n\n@Configuration\npublic class TokenConfig {\n    @Bean\n    public TokenStore tokenStore() {\n        return new InMemoryTokenStore();\n    }\n}\n\n\n2ãå®ä¹AuthorizationServerTokenServices\n\nå¨AuthorizationServerä¸­å®ä¹AuthorizationServerTokenServices\n\n@Autowired\nprivate TokenStore tokenStore;\n@Autowired\nprivate ClientDetailsService clientDetailsService;\n\n@Bean\npublic AuthorizationServerTokenServices tokenService() {\n    DefaultTokenServices service=new DefaultTokenServices();\n    service.setClientDetailsService(clientDetailsService);\n    service.setSupportRefreshToken(true);\n    service.setTokenStore(tokenStore);\n    service.setAccessTokenValiditySeconds(7200); // ä»¤çé»è®¤æææ2å°æ¶\n    service.setRefreshTokenValiditySeconds(259200); // å·æ°ä»¤çé»è®¤æææ3å¤©\n    return service;\n}\n\n\n\n# ä»¤çè®¿é®ç«¯ç¹éç½®\n\nAuthorizationServerEndpointsConfigurer è¿ä¸ªå¯¹è±¡çå®ä¾å¯ä»¥å®æä»¤çæå¡ä»¥åä»¤çendpointéç½®ã\n\n\n# éç½®ææç±»åï¼Grant Typesï¼\n\nAuthorizationServerEndpointsConfigurer éè¿è®¾å®ä»¥ä¸å±æ§å³å®æ¯æçææç±»åï¼Grant Typesï¼:\n\n * authenticationManagerï¼è®¤è¯ç®¡çå¨ï¼å½ä½ éæ©äºèµæºææèå¯ç ï¼passwordï¼ææç±»åçæ¶åï¼è¯·è®¾ç½® è¿ä¸ªå±æ§æ³¨å¥ä¸ä¸ª AuthenticationManager å¯¹è±¡ã\n * userDetailsServiceï¼å¦æä½ è®¾ç½®äºè¿ä¸ªå±æ§çè¯ï¼é£è¯´æä½ æä¸ä¸ªèªå·±ç UserDetailsService æ¥å£çå®ç°ï¼ æèä½ å¯ä»¥æè¿ä¸ªä¸è¥¿è®¾ç½®å°å¨å±åä¸é¢å»ï¼ä¾å¦ GlobalAuthenticationManagerConfigurer è¿ä¸ªéç½®å¯¹ è±¡ï¼ï¼å½ä½ è®¾ç½®äºè¿ä¸ªä¹åï¼é£ä¹ "refresh_token" å³å·æ°ä»¤çææç±»åæ¨¡å¼çæµç¨ä¸­å°±ä¼åå«ä¸ä¸ªæ£æ¥ï¼ç¨ æ¥ç¡®ä¿è¿ä¸ªè´¦å·æ¯å¦ä»ç¶ææï¼åå¦è¯´ä½ ç¦ç¨äºè¿ä¸ªè´¦æ·çè¯ã\n * authorizationCodeServicesï¼è¿ä¸ªå±æ§æ¯ç¨æ¥è®¾ç½®ææç æå¡çï¼å³ AuthorizationCodeServices çå®ä¾å¯¹ è±¡ï¼ï¼ä¸»è¦ç¨äº "authorization_code" ææç ç±»åæ¨¡å¼ã\n * implicitGrantServiceï¼è¿ä¸ªå±æ§ç¨äºè®¾ç½®éå¼æææ¨¡å¼ï¼ç¨æ¥ç®¡çéå¼æææ¨¡å¼çç¶æã tokenGranterï¼å½ä½ è®¾ç½®äºè¿ä¸ªä¸è¥¿ï¼å³ TokenGranter æ¥å£å®ç°ï¼ï¼é£ä¹ææå°ä¼äº¤ç±ä½ æ¥å®å¨ææ§ï¼å¹¶ ä¸ä¼å¿½ç¥æä¸é¢çè¿å ä¸ªå±æ§ï¼è¿ä¸ªå±æ§ä¸è¬æ¯ç¨ä½æå±ç¨éçï¼å³æ åçåç§æææ¨¡å¼å·²ç»æ»¡è¶³ä¸äºä½ ç éæ±çæ¶åï¼æä¼èèä½¿ç¨è¿ä¸ªã\n\n\n# éç½®ææç«¯ç¹çURLï¼Endpoint URLsï¼ï¼\n\nAuthorizationServerEndpointsConfigurer è¿ä¸ªéç½®å¯¹è±¡æä¸ä¸ªå«å pathMapping() çæ¹æ³ç¨æ¥éç½®ç«¯ç¹URLé¾æ¥ï¼å®æä¸¤ä¸ªåæ°ï¼\n\n * ç¬¬ä¸ä¸ªåæ°ï¼String ç±»åçï¼è¿ä¸ªç«¯ç¹URLçé»è®¤é¾æ¥ã\n * ç¬¬äºä¸ªåæ°ï¼String ç±»åçï¼ä½ è¦è¿è¡æ¿ä»£çURLé¾æ¥ã\n\nä»¥ä¸çåæ°é½å°ä»¥ "/" å­ç¬¦ä¸ºå¼å§çå­ç¬¦ä¸²ï¼æ¡æ¶çé»è®¤URLé¾æ¥å¦ä¸åè¡¨ï¼å¯ä»¥ä½ä¸ºè¿ä¸ª pathMapping() æ¹æ³çç¬¬ä¸ä¸ªåæ°ï¼\n\n * /oauth/authorizeï¼ææç«¯ç¹ã\n * /oauth/tokenï¼ä»¤çç«¯ç¹ã\n * /oauth/confirm_accessï¼ç¨æ·ç¡®è®¤æææäº¤ç«¯ç¹ã\n * /oauth/errorï¼æææå¡éè¯¯ä¿¡æ¯ç«¯ç¹ã\n * /oauth/check_tokenï¼ç¨äºèµæºæå¡è®¿é®çä»¤çè§£æç«¯ç¹ã\n * /oauth/token_keyï¼æä¾å¬æå¯åçç«¯ç¹ï¼å¦æä½ ä½¿ç¨JWTä»¤ççè¯ã\n\néè¦æ³¨æçæ¯ææç«¯ç¹è¿ä¸ªURLåºè¯¥è¢«Spring Securityä¿æ¤èµ·æ¥åªä¾ææç¨æ·è®¿é®.å¨AuthorizationServeréç½®ä»¤çè®¿é®ç«¯ç¹\n\n@Autowired\nprivate AuthorizationCodeServices authorizationCodeServices;\n@Autowired\nprivate AuthenticationManager authenticationManager;\n@Override\n\npublic void configure(AuthorizationServerEndpointsConfigurer endpoints) {\n    endpoints\n        .authenticationManager(authenticationManager)\n        .authorizationCodeServices(authorizationCodeServices)\n        .tokenServices(tokenService())\n        .allowedTokenEndpointRequestMethods(HttpMethod.POST);\n}\n@Bean\npublic AuthorizationCodeServices authorizationCodeServices() { \n    //è®¾ç½®ææç æ¨¡å¼çææç å¦ä½å­åï¼ææ¶éç¨åå­æ¹å¼\n    return new InMemoryAuthorizationCodeServices();\n}\n\n\n\n# ä»¤çç«¯ç¹çå®å¨çº¦æ\n\nAuthorizationServerSecurityConfigurerï¼ç¨æ¥éç½®ä»¤çç«¯ç¹(Token Endpoint)çå®å¨çº¦æï¼å¨AuthorizationServerä¸­éç½®å¦ä¸.\n\nï¼1ï¼tokenkeyè¿ä¸ªendpointå½ä½¿ç¨JwtTokenä¸ä½¿ç¨éå¯¹ç§°å å¯æ¶ï¼èµæºæå¡ç¨äºè·åå¬é¥èå¼æ¾çï¼è¿éæè¿ä¸ªendpointå®å¨å¬å¼ã\nï¼2ï¼checkTokenè¿ä¸ªendpointå®å¨å¬å¼\nï¼3ï¼åè®¸è¡¨åè®¤è¯\n\n\næææå¡éç½®æ»ç»ï¼æææå¡éç½®åæä¸å¤§åï¼å¯ä»¥å³èè®°å¿ã\n\næ¢ç¶è¦å®æè®¤è¯ï¼å®é¦åå¾ç¥éå®¢æ·ç«¯ä¿¡æ¯ä»åªå¿è¯»åï¼å æ­¤è¦è¿è¡å®¢æ·ç«¯è¯¦æéç½®ã\n\næ¢ç¶è¦é¢åtokenï¼é£å¿é¡»å¾å®ä¹tokençç¸å³endpointï¼ä»¥åtokenå¦ä½å­åï¼ä»¥åå®¢æ·ç«¯æ¯æåªäºç±»åçtokenã\n\næ¢ç¶æ´é²é¤äºä¸äºendpointï¼é£å¯¹è¿äºendpointå¯ä»¥å®ä¹ä¸äºå®å¨ä¸ççº¦æç­ã\n\n\n# webå®å¨éç½®\n\nå°Spring-Bootå·¥ç¨ä¸­çWebSecurityConfigæ·è´å°simplify-authå·¥ç¨ä¸­ã\n\n@Configuration\n@EnableGlobalMethodSecurity(securedEnabled = true,prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    } \n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n    // å®å¨æ¦æªæºå¶ï¼æéè¦ï¼\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n            .authorizeRequests()\n            .antMatchers("/r/r1").hasAnyAuthority("p1")\n            .antMatchers("/login*").permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .formLogin();\n    }\n}\n',normalizedContent:'# æææå¡å¨éç½®\n\n\n# pom.xml\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <parent>\n        <artifactid>simplify-samples</artifactid>\n        <groupid>com.ieooc.simplify.samples</groupid>\n        <version>0.0.1-snapshot</version>\n    </parent>\n    <modelversion>4.0.0</modelversion>\n\n    <artifactid>simplify-auth</artifactid>\n    <packaging>jar</packaging>\n    <description>è®¤è¯æææå¡</description>\n\n    <dependencies>\n        \x3c!--web æ¨¡å--\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-web</artifactid>\n        </dependency>\n        \x3c!--undertowå®¹å¨--\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-undertow</artifactid>\n        </dependency>\n        \x3c!--éæoauth2--\x3e\n        <dependency>\n            <groupid>org.springframework.cloud</groupid>\n            <artifactid>spring-cloud-starter-oauth2</artifactid>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-maven-plugin</artifactid>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n\n\n# application\n\npackage com.ieooc.simplify.samples;\n\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@springbootapplication\npublic class authapplication {\n\n    public static void main(string[] args) {\n        springapplication.run(authapplication.class, args);\n    }\n}\n\n\n\n\n# enableauthorizationserver\n\nå¯ä»¥ç¨ @enableauthorizationserver æ³¨è§£å¹¶ç»§æ¿authorizationserverconfigureradapteræ¥éç½®oauth2.0 æææå¡å¨ã\n\nå¨configåä¸åå»ºauthorizationserverï¼\n\n@configuration\n@enableauthorizationserver\npublic class authorizationserver extends authorizationserverconfigureradapter {\n    //ç¥...\n}\n\n\nauthorizationserverconfigureradapterè¦æ±éç½®ä»¥ä¸å ä¸ªç±»ï¼è¿å ä¸ªç±»æ¯ç±springåå»ºçç¬ç«çéç½®å¯¹è±¡ï¼å®ä»¬ä¼è¢«springä¼ å¥authorizationserverconfigurerä¸­è¿è¡éç½®ã\n\npublic class authorizationserverconfigureradapter implements authorizationserverconfigurer {\n    public authorizationserverconfigureradapter() {}\n    public void configure(authorizationserversecurityconfigurer security) throws exception {}\n    public void configure(clientdetailsserviceconfigurer clients) throws exception {}\n    public void configure(authorizationserverendpointsconfigurer endpoints) throws exception {}\n}\n\n\n * clientdetailsserviceconfigurerï¼ç¨æ¥éç½®å®¢æ·ç«¯è¯¦ææå¡ï¼clientdetailsserviceï¼ï¼å®¢æ·ç«¯è¯¦æä¿¡æ¯å¨è¿éè¿è¡åå§åï¼ä½ è½å¤æå®¢æ·ç«¯è¯¦æä¿¡æ¯åæ­»å¨è¿éæèæ¯éè¿æ°æ®åºæ¥å­å¨è°åè¯¦æä¿¡æ¯ã\n * authorizationserverendpointsconfigurerï¼ç¨æ¥éç½®ä»¤çï¼tokenï¼çè®¿é®ç«¯ç¹åä»¤çæå¡(tokenservices)ã\n * authorizationserversecurityconfigurerï¼ç¨æ¥éç½®ä»¤çç«¯ç¹çå®å¨çº¦æ.\n\n\n# éç½®å®¢æ·ç«¯è¯¦ç»ä¿¡æ¯\n\nclientdetailsserviceconfigurer è½å¤ä½¿ç¨åå­æèjdbcæ¥å®ç°å®¢æ·ç«¯è¯¦ææå¡ï¼clientdetailsserviceï¼ï¼clientdetailsserviceè´è´£æ¥æ¾clientdetailsï¼èclientdetailsæå ä¸ªéè¦çå±æ§å¦ä¸åè¡¨ï¼\n\n * clientidï¼ï¼å¿é¡»çï¼ç¨æ¥æ è¯å®¢æ·çidã\n * secretï¼ï¼éè¦å¼å¾ä¿¡ä»»çå®¢æ·ç«¯ï¼å®¢æ·ç«¯å®å¨ç ï¼å¦ææçè¯ã\n * scopeï¼ç¨æ¥éå¶å®¢æ·ç«¯çè®¿é®èå´ï¼å¦æä¸ºç©ºï¼é»è®¤ï¼çè¯ï¼é£ä¹å®¢æ·ç«¯æ¥æå¨é¨çè®¿é®èå´ã\n * authorizedgranttypesï¼æ­¤å®¢æ·ç«¯å¯ä»¥ä½¿ç¨çææç±»åï¼é»è®¤ä¸ºç©ºã\n * authoritiesï¼æ­¤å®¢æ·ç«¯å¯ä»¥ä½¿ç¨çæéï¼åºäºspring security authoritiesï¼ã\n\nå®¢æ·ç«¯è¯¦æï¼client detailsï¼è½å¤å¨åºç¨ç¨åºè¿è¡çæ¶åè¿è¡æ´æ°ï¼å¯ä»¥éè¿è®¿é®åºå±çå­å¨æå¡ï¼ä¾å¦å°å®¢æ·ç«¯è¯¦æå­å¨å¨ä¸ä¸ªå³ç³»æ°æ®åºçè¡¨ä¸­ï¼å°±å¯ä»¥ä½¿ç¨ jdbcclientdetailsserviceï¼æèéè¿èªå·±å®ç°clientregistrationserviceæ¥å£ï¼åæ¶ä½ ä¹å¯ä»¥å®ç° clientdetailsservice æ¥å£ï¼æ¥è¿è¡ç®¡çã\n\n@override\npublic void configure(clientdetailsserviceconfigurer clients) throws exception {\n    // clients.withclientdetails(clientdetailsservice);\n    clients.inmemory()// ä½¿ç¨inâmemoryå­å¨\n            .withclient("c1")// client_id\n            .secret(new bcryptpasswordencoder().encode("secret"))\n            .resourceids("res1")\n            // è¯¥clientåè®¸çææç±»å authorization_code, password, refresh_token, implicit, client_credentials\n            .authorizedgranttypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n            .scopes("all")// åè®¸çææèå´\n            .autoapprove(false)\n            //å ä¸éªè¯åè°å°å\n            .redirecturis("http://www.baidu.com");\n}\n\n\n\n# ç®¡çä»¤ç\n\nauthorizationservertokenservices æ¥å£å®ä¹äºä¸äºæä½ä½¿å¾ä½ å¯ä»¥å¯¹ä»¤çè¿è¡ä¸äºå¿è¦çç®¡çï¼ä»¤çå¯ä»¥è¢«ç¨æ¥å è½½èº«ä»½ä¿¡æ¯ï¼éé¢åå«äºè¿ä¸ªä»¤ççç¸å³æéã\n\nèªå·±å¯ä»¥åå»º authorizationservertokenservices è¿ä¸ªæ¥å£çå®ç°ï¼åéè¦ç»§æ¿ defaulttokenservices è¿ä¸ªç±»ï¼éé¢åå«äºä¸äºæç¨å®ç°ï¼ä½ å¯ä»¥ä½¿ç¨å®æ¥ä¿®æ¹ä»¤ççæ ¼å¼åä»¤ççå­å¨ãé»è®¤çï¼å½å®å°è¯åå»ºä¸ä¸ªä»¤ççæ¶åï¼æ¯ä½¿ç¨éæºå¼æ¥è¿è¡å¡«åçï¼é¤äºæä¹åä»¤çæ¯å§æä¸ä¸ª tokenstore æ¥å£æ¥å®ç°ä»¥å¤ï¼è¿ä¸ªç±»å ä¹å¸®ä½ åäºææçäºæãå¹¶ä¸ tokenstore è¿ä¸ªæ¥å£æä¸ä¸ªé»è®¤çå®ç°ï¼å®å°±æ¯ inmemorytokenstore ï¼å¦å¶å½åï¼ææçä»¤çæ¯è¢«ä¿å­å¨äºåå­ä¸­ãé¤äºä½¿ç¨è¿ä¸ªç±»ä»¥å¤ï¼ä½ è¿å¯ä»¥ä½¿ç¨ä¸äºå¶ä»çé¢å®ä¹å®ç°ï¼ä¸é¢æå ä¸ªçæ¬ï¼å®ä»¬é½å®ç°äºtokenstoreæ¥å£ï¼\n\n * inmemorytokenstoreï¼è¿ä¸ªçæ¬çå®ç°æ¯è¢«é»è®¤éç¨çï¼å®å¯ä»¥å®ç¾çå·¥ä½å¨åæå¡å¨ä¸ï¼å³è®¿é®å¹¶åé ååä¸å¤§çæåµä¸ï¼å¹¶ä¸å®å¨å¤±è´¥çæ¶åä¸ä¼è¿è¡å¤ä»½ï¼ï¼å¤§å¤æ°çé¡¹ç®é½å¯ä»¥ä½¿ç¨è¿ä¸ªçæ¬çå®ç°æ¥è¿è¡ å°è¯ï¼ä½ å¯ä»¥å¨å¼åçæ¶åä½¿ç¨å®æ¥è¿è¡ç®¡çï¼å ä¸ºä¸ä¼è¢«ä¿å­å°ç£çä¸­ï¼æä»¥æ´æäºè°è¯ã\n\n * jdbctokenstoreï¼è¿æ¯ä¸ä¸ªåºäºjdbcçå®ç°çæ¬ï¼ä»¤çä¼è¢«ä¿å­è¿å³ç³»åæ°æ®åºãä½¿ç¨è¿ä¸ªçæ¬çå®ç°æ¶ï¼ ä½ å¯ä»¥å¨ä¸åçæå¡å¨ä¹é´å±äº«ä»¤çä¿¡æ¯ï¼ä½¿ç¨è¿ä¸ªçæ¬çæ¶åè¯·æ³¨ææ"spring-jdbc"è¿ä¸ªä¾èµå å¥å°ä½ ç classpathå½ä¸­ã\n\n * jwttokenstoreï¼è¿ä¸ªçæ¬çå¨ç§°æ¯ json web tokenï¼jwtï¼ï¼å®å¯ä»¥æä»¤çç¸å³çæ°æ®è¿è¡ç¼ç ï¼å æ­¤å¯¹ äºåç«¯æå¡æ¥è¯´ï¼å®ä¸éè¦è¿è¡å­å¨ï¼è¿å°æ¯ä¸ä¸ªéå¤§ä¼å¿ï¼ï¼ä½æ¯å®æä¸ä¸ªç¼ºç¹ï¼é£å°±æ¯æ¤éä¸ä¸ªå·²ç»æ æä»¤çå°ä¼éå¸¸å°é¾ï¼æä»¥å®éå¸¸ç¨æ¥å¤çä¸ä¸ªçå½å¨æè¾ç­çä»¤çä»¥åæ¤éå·æ°ä»¤çï¼refresh_tokenï¼ã å¦å¤ä¸ä¸ªç¼ºç¹å°±æ¯è¿ä¸ªä»¤çå ç¨çç©ºé´ä¼æ¯è¾å¤§ï¼å¦æä½ å å¥äºæ¯è¾å¤ç¨æ·å­è¯ä¿¡æ¯ãjwttokenstore ä¸ä¼ä¿\n\nå­ä»»ä½æ°æ®ï¼ä½æ¯å®å¨è½¬æ¢ä»¤çå¼ä»¥åææä¿¡æ¯æ¹é¢ä¸ defaulttokenservices ææ®æ¼çè§è²æ¯ä¸æ ·çã\n\n1ãå®ä¹tokenconfig\n\nå¨configåä¸å®ä¹tokenconfigï¼æä»¬ææ¶åä½¿ç¨inmemorytokenstoreï¼çæä¸ä¸ªæ®éçä»¤çã\n\n@configuration\npublic class tokenconfig {\n    @bean\n    public tokenstore tokenstore() {\n        return new inmemorytokenstore();\n    }\n}\n\n\n2ãå®ä¹authorizationservertokenservices\n\nå¨authorizationserverä¸­å®ä¹authorizationservertokenservices\n\n@autowired\nprivate tokenstore tokenstore;\n@autowired\nprivate clientdetailsservice clientdetailsservice;\n\n@bean\npublic authorizationservertokenservices tokenservice() {\n    defaulttokenservices service=new defaulttokenservices();\n    service.setclientdetailsservice(clientdetailsservice);\n    service.setsupportrefreshtoken(true);\n    service.settokenstore(tokenstore);\n    service.setaccesstokenvalidityseconds(7200); // ä»¤çé»è®¤æææ2å°æ¶\n    service.setrefreshtokenvalidityseconds(259200); // å·æ°ä»¤çé»è®¤æææ3å¤©\n    return service;\n}\n\n\n\n# ä»¤çè®¿é®ç«¯ç¹éç½®\n\nauthorizationserverendpointsconfigurer è¿ä¸ªå¯¹è±¡çå®ä¾å¯ä»¥å®æä»¤çæå¡ä»¥åä»¤çendpointéç½®ã\n\n\n# éç½®ææç±»åï¼grant typesï¼\n\nauthorizationserverendpointsconfigurer éè¿è®¾å®ä»¥ä¸å±æ§å³å®æ¯æçææç±»åï¼grant typesï¼:\n\n * authenticationmanagerï¼è®¤è¯ç®¡çå¨ï¼å½ä½ éæ©äºèµæºææèå¯ç ï¼passwordï¼ææç±»åçæ¶åï¼è¯·è®¾ç½® è¿ä¸ªå±æ§æ³¨å¥ä¸ä¸ª authenticationmanager å¯¹è±¡ã\n * userdetailsserviceï¼å¦æä½ è®¾ç½®äºè¿ä¸ªå±æ§çè¯ï¼é£è¯´æä½ æä¸ä¸ªèªå·±ç userdetailsservice æ¥å£çå®ç°ï¼ æèä½ å¯ä»¥æè¿ä¸ªä¸è¥¿è®¾ç½®å°å¨å±åä¸é¢å»ï¼ä¾å¦ globalauthenticationmanagerconfigurer è¿ä¸ªéç½®å¯¹ è±¡ï¼ï¼å½ä½ è®¾ç½®äºè¿ä¸ªä¹åï¼é£ä¹ "refresh_token" å³å·æ°ä»¤çææç±»åæ¨¡å¼çæµç¨ä¸­å°±ä¼åå«ä¸ä¸ªæ£æ¥ï¼ç¨ æ¥ç¡®ä¿è¿ä¸ªè´¦å·æ¯å¦ä»ç¶ææï¼åå¦è¯´ä½ ç¦ç¨äºè¿ä¸ªè´¦æ·çè¯ã\n * authorizationcodeservicesï¼è¿ä¸ªå±æ§æ¯ç¨æ¥è®¾ç½®ææç æå¡çï¼å³ authorizationcodeservices çå®ä¾å¯¹ è±¡ï¼ï¼ä¸»è¦ç¨äº "authorization_code" ææç ç±»åæ¨¡å¼ã\n * implicitgrantserviceï¼è¿ä¸ªå±æ§ç¨äºè®¾ç½®éå¼æææ¨¡å¼ï¼ç¨æ¥ç®¡çéå¼æææ¨¡å¼çç¶æã tokengranterï¼å½ä½ è®¾ç½®äºè¿ä¸ªä¸è¥¿ï¼å³ tokengranter æ¥å£å®ç°ï¼ï¼é£ä¹ææå°ä¼äº¤ç±ä½ æ¥å®å¨ææ§ï¼å¹¶ ä¸ä¼å¿½ç¥æä¸é¢çè¿å ä¸ªå±æ§ï¼è¿ä¸ªå±æ§ä¸è¬æ¯ç¨ä½æå±ç¨éçï¼å³æ åçåç§æææ¨¡å¼å·²ç»æ»¡è¶³ä¸äºä½ ç éæ±çæ¶åï¼æä¼èèä½¿ç¨è¿ä¸ªã\n\n\n# éç½®ææç«¯ç¹çurlï¼endpoint urlsï¼ï¼\n\nauthorizationserverendpointsconfigurer è¿ä¸ªéç½®å¯¹è±¡æä¸ä¸ªå«å pathmapping() çæ¹æ³ç¨æ¥éç½®ç«¯ç¹urlé¾æ¥ï¼å®æä¸¤ä¸ªåæ°ï¼\n\n * ç¬¬ä¸ä¸ªåæ°ï¼string ç±»åçï¼è¿ä¸ªç«¯ç¹urlçé»è®¤é¾æ¥ã\n * ç¬¬äºä¸ªåæ°ï¼string ç±»åçï¼ä½ è¦è¿è¡æ¿ä»£çurlé¾æ¥ã\n\nä»¥ä¸çåæ°é½å°ä»¥ "/" å­ç¬¦ä¸ºå¼å§çå­ç¬¦ä¸²ï¼æ¡æ¶çé»è®¤urlé¾æ¥å¦ä¸åè¡¨ï¼å¯ä»¥ä½ä¸ºè¿ä¸ª pathmapping() æ¹æ³çç¬¬ä¸ä¸ªåæ°ï¼\n\n * /oauth/authorizeï¼ææç«¯ç¹ã\n * /oauth/tokenï¼ä»¤çç«¯ç¹ã\n * /oauth/confirm_accessï¼ç¨æ·ç¡®è®¤æææäº¤ç«¯ç¹ã\n * /oauth/errorï¼æææå¡éè¯¯ä¿¡æ¯ç«¯ç¹ã\n * /oauth/check_tokenï¼ç¨äºèµæºæå¡è®¿é®çä»¤çè§£æç«¯ç¹ã\n * /oauth/token_keyï¼æä¾å¬æå¯åçç«¯ç¹ï¼å¦æä½ ä½¿ç¨jwtä»¤ççè¯ã\n\néè¦æ³¨æçæ¯ææç«¯ç¹è¿ä¸ªurlåºè¯¥è¢«spring securityä¿æ¤èµ·æ¥åªä¾ææç¨æ·è®¿é®.å¨authorizationserveréç½®ä»¤çè®¿é®ç«¯ç¹\n\n@autowired\nprivate authorizationcodeservices authorizationcodeservices;\n@autowired\nprivate authenticationmanager authenticationmanager;\n@override\n\npublic void configure(authorizationserverendpointsconfigurer endpoints) {\n    endpoints\n        .authenticationmanager(authenticationmanager)\n        .authorizationcodeservices(authorizationcodeservices)\n        .tokenservices(tokenservice())\n        .allowedtokenendpointrequestmethods(httpmethod.post);\n}\n@bean\npublic authorizationcodeservices authorizationcodeservices() { \n    //è®¾ç½®ææç æ¨¡å¼çææç å¦ä½å­åï¼ææ¶éç¨åå­æ¹å¼\n    return new inmemoryauthorizationcodeservices();\n}\n\n\n\n# ä»¤çç«¯ç¹çå®å¨çº¦æ\n\nauthorizationserversecurityconfigurerï¼ç¨æ¥éç½®ä»¤çç«¯ç¹(token endpoint)çå®å¨çº¦æï¼å¨authorizationserverä¸­éç½®å¦ä¸.\n\nï¼1ï¼tokenkeyè¿ä¸ªendpointå½ä½¿ç¨jwttokenä¸ä½¿ç¨éå¯¹ç§°å å¯æ¶ï¼èµæºæå¡ç¨äºè·åå¬é¥èå¼æ¾çï¼è¿éæè¿ä¸ªendpointå®å¨å¬å¼ã\nï¼2ï¼checktokenè¿ä¸ªendpointå®å¨å¬å¼\nï¼3ï¼åè®¸è¡¨åè®¤è¯\n\n\næææå¡éç½®æ»ç»ï¼æææå¡éç½®åæä¸å¤§åï¼å¯ä»¥å³èè®°å¿ã\n\næ¢ç¶è¦å®æè®¤è¯ï¼å®é¦åå¾ç¥éå®¢æ·ç«¯ä¿¡æ¯ä»åªå¿è¯»åï¼å æ­¤è¦è¿è¡å®¢æ·ç«¯è¯¦æéç½®ã\n\næ¢ç¶è¦é¢åtokenï¼é£å¿é¡»å¾å®ä¹tokençç¸å³endpointï¼ä»¥åtokenå¦ä½å­åï¼ä»¥åå®¢æ·ç«¯æ¯æåªäºç±»åçtokenã\n\næ¢ç¶æ´é²é¤äºä¸äºendpointï¼é£å¯¹è¿äºendpointå¯ä»¥å®ä¹ä¸äºå®å¨ä¸ççº¦æç­ã\n\n\n# webå®å¨éç½®\n\nå°spring-bootå·¥ç¨ä¸­çwebsecurityconfigæ·è´å°simplify-authå·¥ç¨ä¸­ã\n\n@configuration\n@enableglobalmethodsecurity(securedenabled = true,prepostenabled = true)\npublic class websecurityconfig extends websecurityconfigureradapter {\n    @bean\n    public passwordencoder passwordencoder() {\n        return new bcryptpasswordencoder();\n    } \n    @bean\n    public authenticationmanager authenticationmanagerbean() throws exception {\n        return super.authenticationmanagerbean();\n    }\n    // å®å¨æ¦æªæºå¶ï¼æéè¦ï¼\n    @override\n    protected void configure(httpsecurity http) throws exception {\n        http.csrf().disable()\n            .authorizerequests()\n            .antmatchers("/r/r1").hasanyauthority("p1")\n            .antmatchers("/login*").permitall()\n            .anyrequest().authenticated()\n            .and()\n            .formlogin();\n    }\n}\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"åºäºåå­å­å¨ä»¤ç",frontmatter:{title:"åºäºåå­å­å¨ä»¤ç",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/2279cf/"},regularPath:"/19.Spring%20Security%20OAuth2/03.%E5%88%9B%E5%BB%BA%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8/02.%E5%9F%BA%E4%BA%8E%E5%86%85%E5%AD%98%E5%AD%98%E5%82%A8%E4%BB%A4%E7%89%8C.html",relativePath:"19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/02.åºäºåå­å­å¨ä»¤ç.md",key:"v-620b25ca",path:"/pages/2279cf/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:15},{level:2,title:"éç½®è®¤è¯æå¡å¨",slug:"éç½®è®¤è¯æå¡å¨",normalizedTitle:"éç½®è®¤è¯æå¡å¨",charIndex:104},{level:2,title:"æå¡å¨å®å¨éç½®",slug:"æå¡å¨å®å¨éç½®",normalizedTitle:"æå¡å¨å®å¨éç½®",charIndex:2938},{level:2,title:"application.yml",slug:"application-yml",normalizedTitle:"application.yml",charIndex:4507},{level:2,title:"è®¿é®è·åææç ",slug:"è®¿é®è·åææç ",normalizedTitle:"è®¿é®è·åææç ",charIndex:4655},{level:2,title:"éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",slug:"éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",normalizedTitle:"éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",charIndex:4956}],headersStr:"æ¦è¿° éç½®è®¤è¯æå¡å¨ æå¡å¨å®å¨éç½® application.yml è®¿é®è·åææç  éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",content:'# åºäºåå­å­å¨ä»¤ç\n\n\n# æ¦è¿°\n\næ¬ç« èåºäº åå­å­å¨ä»¤ç çæ¨¡å¼ç¨äºæ¼ç¤ºæåºæ¬çæä½ï¼å¸®å©å¤§å®¶å¿«éçè§£ oAuth2 è®¤è¯æå¡å¨ä¸­ "è®¤è¯"ã"ææ"ã"è®¿é®ä»¤çâ çåºæ¬æ¦å¿µ\n\næä½æµç¨\n\n\n\n * éç½®è®¤è¯æå¡å¨\n   * éç½®å®¢æ·ç«¯ä¿¡æ¯ï¼ClientDetailsServiceConfigurer\n     * inMemoryï¼åå­éç½®\n     * withClientï¼å®¢æ·ç«¯æ è¯\n     * secretï¼å®¢æ·ç«¯å®å¨ç \n     * authorizedGrantTypesï¼å®¢æ·ç«¯ææç±»å\n     * scopesï¼å®¢æ·ç«¯ææèå´\n     * redirectUrisï¼æ³¨ååè°å°å\n * éç½® Web å®å¨\n * éè¿ GET è¯·æ±è®¿é®è®¤è¯æå¡å¨è·åææç \n   * ç«¯ç¹ï¼/oauth/authorize\n * éè¿ POST è¯·æ±å©ç¨ææç è®¿é®è®¤è¯æå¡å¨è·åä»¤ç\n   * ç«¯ç¹ï¼/oauth/token\n\néï¼é»è®¤çç«¯ç¹ URL\n\n * /oauth/authorizeï¼ææç«¯ç¹\n * /oauth/tokenï¼ä»¤çç«¯ç¹\n * /oauth/confirm_accessï¼ç¨æ·ç¡®è®¤æææäº¤ç«¯ç¹\n * /oauth/errorï¼æææå¡éè¯¯ä¿¡æ¯ç«¯ç¹\n * /oauth/check_tokenï¼ç¨äºèµæºæå¡è®¿é®çä»¤çè§£æç«¯ç¹\n * /oauth/token_keyï¼æä¾å¬æå¯åçç«¯ç¹ï¼å¦æä½ ä½¿ç¨ JWT ä»¤ççè¯\n\n\n# éç½®è®¤è¯æå¡å¨\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ AuthorizationServerConfigurerAdapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @Configuration\n * @EnableAuthorizationServer\n\npackage com.ieooc.simplify.samples.config;\n\nimport lombok.AllArgsConstructor;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.oauth2.config.annotation.configurers.ClientDetailsServiceConfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerConfigurerAdapter;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerSecurityConfigurer;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@Configuration\n@EnableAuthorizationServer\n@AllArgsConstructor\npublic class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter {\n\n\n    private final PasswordEncoder passwordEncoder;\n\n    /**\n     * éç½®å®¢æ·ç«¯\n     */\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n        // ä½¿ç¨inâmemoryå­å¨\n        clients.inMemory()\n                // client_id\n                .withClient("simplify")\n                .secret(passwordEncoder.encode("simplify"))\n                .resourceIds("res1")\n                // è¯¥clientåè®¸çææç±»åauthorization_code, password, refresh_token, implicit, client_credentials\n                .authorizedGrantTypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n                // åè®¸çææèå´\n                .scopes("all")\n                .autoApprove(false)\n                //å ä¸éªè¯åè°å°å\n                .redirectUris("https://www.ivoov.com");\n\n    }\n\n    /**\n     * å®å¨éç½®\n     */\n    @Override\n    public void configure(AuthorizationServerSecurityConfigurer security) throws Exception {\n        security\n                // æ£æ¥ä»¤ç /oauth/token_key\n                .tokenKeyAccess("permitAll()")\n                // æ£æ¥ä»¤ç /oauth/check_token\n                .checkTokenAccess("permitAll()")\n                // å¼å¯åè¯·æ±éè¦å¸¦ä¸ client_id client_secret ä¸éè¦ Basic è¯·æ±å¤´\n                // é»è®¤è¯·æ±å¤´ Basic Base64(client_id+client_secret)\n                .allowFormAuthenticationForClients();\n    }\n}\n\n\n\n# æå¡å¨å®å¨éç½®\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ WebSecurityConfigurerAdapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @Configuration\n * @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)ï¼å¨å±æ¹æ³æ¦æª\n\npackage com.ieooc.simplify.samples.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.factory.PasswordEncoderFactories;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@Configuration\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    /**\n     * ææå¯ç ç¼ç å¨\n     */\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n\n        auth.inMemoryAuthentication()\n                .passwordEncoder(passwordEncoder())\n                .withUser("admin")\n                .password(passwordEncoder().encode("123456"))\n                .roles("ROOT", "USER")\n                .and()\n                .withUser("user")\n                .password(passwordEncoder().encode("123456"))\n                .roles("USER");\n    }\n}\n\n\n\n# application.yml\n\nserver:\n  port: 3000\nspring:\n  application:\n    name: simplify-auth\nlogging:\n  level:\n    org.springframework.security: debug\n\n\n\n# è®¿é®è·åææç \n\næå¼æµè§å¨ï¼è¾å¥å°åï¼\n\nhttp://localhost:3000/oauth/authorize?response_type=code&client_id=simplify&scope=all&redirect_uri=https://www.ivoov.com\n\n\nç¬¬ä¸æ¬¡è®¿é®ä¼è·³è½¬å°ç»å½é¡µé¢\n\n\n\néªè¯æååä¼è¯¢é®ç¨æ·æ¯å¦ææå®¢æ·ç«¯\n\n\n\néæ©ææåä¼è·³è½¬å°æçåå®¢ï¼æµè§å¨å°åä¸è¿ä¼åå«ä¸ä¸ªææç ï¼code=jB00SKï¼ï¼æµè§å¨å°åæ ä¼æ¾ç¤ºå¦ä¸å°åï¼\n\nhttps://www.ivoov.com/?code=jB00SK\n\n\næäºè¿ä¸ªææç å°±å¯ä»¥è·åè®¿é®ä»¤çäº\n\n\n# éè¿ææç åæå¡å¨ç³è¯·ä»¤ç\n\néè¿ CURL ææ¯ Postman è¯·æ±\n\ncurl --location --request POST \'http://localhost:3000/oauth/token?grant_type=authorization_code&code=jB00SK&client_id=simplify&client_secret=simplify&redirect_uri=https://www.ivoov.com\'\n\n\n',normalizedContent:'# åºäºåå­å­å¨ä»¤ç\n\n\n# æ¦è¿°\n\næ¬ç« èåºäº åå­å­å¨ä»¤ç çæ¨¡å¼ç¨äºæ¼ç¤ºæåºæ¬çæä½ï¼å¸®å©å¤§å®¶å¿«éçè§£ oauth2 è®¤è¯æå¡å¨ä¸­ "è®¤è¯"ã"ææ"ã"è®¿é®ä»¤çâ çåºæ¬æ¦å¿µ\n\næä½æµç¨\n\n\n\n * éç½®è®¤è¯æå¡å¨\n   * éç½®å®¢æ·ç«¯ä¿¡æ¯ï¼clientdetailsserviceconfigurer\n     * inmemoryï¼åå­éç½®\n     * withclientï¼å®¢æ·ç«¯æ è¯\n     * secretï¼å®¢æ·ç«¯å®å¨ç \n     * authorizedgranttypesï¼å®¢æ·ç«¯ææç±»å\n     * scopesï¼å®¢æ·ç«¯ææèå´\n     * redirecturisï¼æ³¨ååè°å°å\n * éç½® web å®å¨\n * éè¿ get è¯·æ±è®¿é®è®¤è¯æå¡å¨è·åææç \n   * ç«¯ç¹ï¼/oauth/authorize\n * éè¿ post è¯·æ±å©ç¨ææç è®¿é®è®¤è¯æå¡å¨è·åä»¤ç\n   * ç«¯ç¹ï¼/oauth/token\n\néï¼é»è®¤çç«¯ç¹ url\n\n * /oauth/authorizeï¼ææç«¯ç¹\n * /oauth/tokenï¼ä»¤çç«¯ç¹\n * /oauth/confirm_accessï¼ç¨æ·ç¡®è®¤æææäº¤ç«¯ç¹\n * /oauth/errorï¼æææå¡éè¯¯ä¿¡æ¯ç«¯ç¹\n * /oauth/check_tokenï¼ç¨äºèµæºæå¡è®¿é®çä»¤çè§£æç«¯ç¹\n * /oauth/token_keyï¼æä¾å¬æå¯åçç«¯ç¹ï¼å¦æä½ ä½¿ç¨ jwt ä»¤ççè¯\n\n\n# éç½®è®¤è¯æå¡å¨\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ authorizationserverconfigureradapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @configuration\n * @enableauthorizationserver\n\npackage com.ieooc.simplify.samples.config;\n\nimport lombok.allargsconstructor;\nimport org.springframework.context.annotation.configuration;\nimport org.springframework.security.crypto.password.passwordencoder;\nimport org.springframework.security.oauth2.config.annotation.configurers.clientdetailsserviceconfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.authorizationserverconfigureradapter;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.enableauthorizationserver;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.authorizationserversecurityconfigurer;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@configuration\n@enableauthorizationserver\n@allargsconstructor\npublic class authorizationserverconfig extends authorizationserverconfigureradapter {\n\n\n    private final passwordencoder passwordencoder;\n\n    /**\n     * éç½®å®¢æ·ç«¯\n     */\n    @override\n    public void configure(clientdetailsserviceconfigurer clients) throws exception {\n        // ä½¿ç¨inâmemoryå­å¨\n        clients.inmemory()\n                // client_id\n                .withclient("simplify")\n                .secret(passwordencoder.encode("simplify"))\n                .resourceids("res1")\n                // è¯¥clientåè®¸çææç±»åauthorization_code, password, refresh_token, implicit, client_credentials\n                .authorizedgranttypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n                // åè®¸çææèå´\n                .scopes("all")\n                .autoapprove(false)\n                //å ä¸éªè¯åè°å°å\n                .redirecturis("https://www.ivoov.com");\n\n    }\n\n    /**\n     * å®å¨éç½®\n     */\n    @override\n    public void configure(authorizationserversecurityconfigurer security) throws exception {\n        security\n                // æ£æ¥ä»¤ç /oauth/token_key\n                .tokenkeyaccess("permitall()")\n                // æ£æ¥ä»¤ç /oauth/check_token\n                .checktokenaccess("permitall()")\n                // å¼å¯åè¯·æ±éè¦å¸¦ä¸ client_id client_secret ä¸éè¦ basic è¯·æ±å¤´\n                // é»è®¤è¯·æ±å¤´ basic base64(client_id+client_secret)\n                .allowformauthenticationforclients();\n    }\n}\n\n\n\n# æå¡å¨å®å¨éç½®\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ websecurityconfigureradapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @configuration\n * @enableglobalmethodsecurity(prepostenabled = true, securedenabled = true, jsr250enabled = true)ï¼å¨å±æ¹æ³æ¦æª\n\npackage com.ieooc.simplify.samples.config;\n\nimport org.springframework.context.annotation.bean;\nimport org.springframework.context.annotation.configuration;\nimport org.springframework.security.config.annotation.authentication.builders.authenticationmanagerbuilder;\nimport org.springframework.security.config.annotation.web.builders.httpsecurity;\nimport org.springframework.security.config.annotation.web.configuration.websecurityconfigureradapter;\nimport org.springframework.security.crypto.factory.passwordencoderfactories;\nimport org.springframework.security.crypto.password.passwordencoder;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@configuration\npublic class websecurityconfig extends websecurityconfigureradapter {\n\n    /**\n     * ææå¯ç ç¼ç å¨\n     */\n    @bean\n    public passwordencoder passwordencoder() {\n        return passwordencoderfactories.createdelegatingpasswordencoder();\n    }\n\n    @override\n    protected void configure(authenticationmanagerbuilder auth) throws exception {\n\n        auth.inmemoryauthentication()\n                .passwordencoder(passwordencoder())\n                .withuser("admin")\n                .password(passwordencoder().encode("123456"))\n                .roles("root", "user")\n                .and()\n                .withuser("user")\n                .password(passwordencoder().encode("123456"))\n                .roles("user");\n    }\n}\n\n\n\n# application.yml\n\nserver:\n  port: 3000\nspring:\n  application:\n    name: simplify-auth\nlogging:\n  level:\n    org.springframework.security: debug\n\n\n\n# è®¿é®è·åææç \n\næå¼æµè§å¨ï¼è¾å¥å°åï¼\n\nhttp://localhost:3000/oauth/authorize?response_type=code&client_id=simplify&scope=all&redirect_uri=https://www.ivoov.com\n\n\nç¬¬ä¸æ¬¡è®¿é®ä¼è·³è½¬å°ç»å½é¡µé¢\n\n\n\néªè¯æååä¼è¯¢é®ç¨æ·æ¯å¦ææå®¢æ·ç«¯\n\n\n\néæ©ææåä¼è·³è½¬å°æçåå®¢ï¼æµè§å¨å°åä¸è¿ä¼åå«ä¸ä¸ªææç ï¼code=jb00skï¼ï¼æµè§å¨å°åæ ä¼æ¾ç¤ºå¦ä¸å°åï¼\n\nhttps://www.ivoov.com/?code=jb00sk\n\n\næäºè¿ä¸ªææç å°±å¯ä»¥è·åè®¿é®ä»¤çäº\n\n\n# éè¿ææç åæå¡å¨ç³è¯·ä»¤ç\n\néè¿ curl ææ¯ postman è¯·æ±\n\ncurl --location --request post \'http://localhost:3000/oauth/token?grant_type=authorization_code&code=jb00sk&client_id=simplify&client_secret=simplify&redirect_uri=https://www.ivoov.com\'\n\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"åºäº JDBC å­å¨ä»¤ç",frontmatter:{title:"åºäº JDBC å­å¨ä»¤ç",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/9b9a7b/"},regularPath:"/19.Spring%20Security%20OAuth2/03.%E5%88%9B%E5%BB%BA%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8/03.%E5%9F%BA%E4%BA%8E%20JDBC%20%E5%AD%98%E5%82%A8%E4%BB%A4%E7%89%8C.html",relativePath:"19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/03.åºäº JDBC å­å¨ä»¤ç.md",key:"v-d70c8d9c",path:"/pages/9b9a7b/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:19},{level:2,title:"åå§å OAuth2 æ°æ®åº schema",slug:"åå§å-oauth2-æ°æ®åº-schema",normalizedTitle:"åå§å oauth2 æ°æ®åº schema",charIndex:891},{level:2,title:"å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯",slug:"å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯",normalizedTitle:"å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯",charIndex:130},{level:2,title:"POM",slug:"pom",normalizedTitle:"pom",charIndex:7252},{level:2,title:"éç½®è®¤è¯æå¡å¨",slug:"éç½®è®¤è¯æå¡å¨",normalizedTitle:"éç½®è®¤è¯æå¡å¨",charIndex:144},{level:2,title:"æå¡å¨å®å¨éç½®",slug:"æå¡å¨å®å¨éç½®",normalizedTitle:"æå¡å¨å®å¨éç½®",charIndex:12064},{level:2,title:"application.yml",slug:"application-yml",normalizedTitle:"application.yml",charIndex:13844},{level:2,title:"è®¿é®è·åææç ",slug:"è®¿é®è·åææç ",normalizedTitle:"è®¿é®è·åææç ",charIndex:14416},{level:2,title:"éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",slug:"éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",normalizedTitle:"éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",charIndex:14717}],headersStr:"æ¦è¿° åå§å OAuth2 æ°æ®åº schema å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯ POM éç½®è®¤è¯æå¡å¨ æå¡å¨å®å¨éç½® application.yml è®¿é®è·åææç  éè¿ææç åæå¡å¨ç³è¯·ä»¤ç",content:"# åºäº JDBC å­å¨ä»¤ç\n\n\n# æ¦è¿°\n\næ¬ç« è åºäº JDBC å­å¨ä»¤ç çæ¨¡å¼ç¨äºæ¼ç¤ºæåºæ¬çæä½ï¼å¸®å©å¤§å®¶å¿«éçè§£ oAuth2 è®¤è¯æå¡å¨ä¸­ \"è®¤è¯\"ã\"ææ\"ã\"è®¿é®ä»¤çâ çåºæ¬æ¦å¿µ\n\næä½æµç¨\n\n\n\n * åå§å oAuth2 ç¸å³è¡¨\n * å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯\n * éç½®è®¤è¯æå¡å¨\n   * éç½®æ°æ®æºï¼DataSource\n   * éç½®ä»¤çå­å¨æ¹å¼ï¼TokenStore -> JdbcTokenStore\n   * éç½®å®¢æ·ç«¯è¯»åæ¹å¼ï¼ClientDetailsService -> JdbcClientDetailsService\n   * éç½®æå¡ç«¯ç¹ä¿¡æ¯ï¼\n     \n     AuthorizationServerEndpointsConfigurer\n     \n     \n     * tokenStoreï¼è®¾ç½®ä»¤çå­å¨æ¹å¼\n   * éç½®å®¢æ·ç«¯ä¿¡æ¯ï¼\n     \n     ClientDetailsServiceConfigurer\n     \n     \n     * withClientDetailsï¼è®¾ç½®å®¢æ·ç«¯éç½®è¯»åæ¹å¼\n * éç½® Web å®å¨\n   * éç½®å¯ç å å¯æ¹å¼ï¼BCryptPasswordEncoder\n   * éç½®è®¤è¯ä¿¡æ¯ï¼AuthenticationManagerBuilder\n * éè¿ GET è¯·æ±è®¿é®è®¤è¯æå¡å¨è·åææç \n   * ç«¯ç¹ï¼/oauth/authorize\n * éè¿ POST è¯·æ±å©ç¨ææç è®¿é®è®¤è¯æå¡å¨è·åä»¤ç\n   * ç«¯ç¹ï¼/oauth/token\n\néï¼é»è®¤çç«¯ç¹ URL\n\n * /oauth/authorizeï¼ææç«¯ç¹\n * /oauth/tokenï¼ä»¤çç«¯ç¹\n * /oauth/confirm_accessï¼ç¨æ·ç¡®è®¤æææäº¤ç«¯ç¹\n * /oauth/errorï¼æææå¡éè¯¯ä¿¡æ¯ç«¯ç¹\n * /oauth/check_tokenï¼ç¨äºèµæºæå¡è®¿é®çä»¤çè§£æç«¯ç¹\n * /oauth/token_keyï¼æä¾å¬æå¯åçç«¯ç¹ï¼å¦æä½ ä½¿ç¨ JWT ä»¤ççè¯\n\n\n# åå§å OAuth2 æ°æ®åº schema\n\nä½¿ç¨spring-security-oauth2å®æ¹æä¾çå»ºè¡¨èæ¬åå§åOAuth2ç¸å³è¡¨ï¼å°åå¦ä¸ï¼\n\nhttps://github.com/spring-projects/spring-security-oauth/blob/master/spring-security-oauth2/src/test/resources/schema.sql\n\n\nOAuth2ç¸å³ç5å¼ è¡¨ï¼\n\n * oauth_access_tokenï¼è®¿é®ä»¤ç\n * oauth_refresh_tokenï¼æ´æ°ä»¤ç\n * oauth_client_detailsï¼å®¢æ·ç«¯ä¿¡æ¯\n * oauth_codeï¼ææç \n * oauth_approvalsï¼ææè®°å½\n * oauth_client_token: å®¢æ·ç«¯ç¨æ¥è®°å½tokenä¿¡æ¯\n\n> åªä»¥å¯ç æ¨¡å¼æ¥è¿è¡æµè¯ï¼ä¸èèç®¡çåè½ï¼åªç¨å°äºäºoauth_client_detailsï¼oauth_access_tokenï¼oauth_refresh_token ä¸å¼ è¡¨\n\nç±äºæä»¬ä½¿ç¨çæ¯ MySQL 8 æ°æ®åºï¼é»è®¤å»ºè¡¨è¯­å¥ä¸­ä¸»é®ä¸º VARCHAR(256)ï¼è¿è¶è¿äºæå¤§çä¸»é®é¿åº¦ï¼è¯·æå¨ä¿®æ¹ä¸º 255ï¼å¹¶ç¨ BLOB æ¿æ¢è¯­å¥ä¸­ç LONGVARBINARY ç±»å(å®æ¹ææ¡£)ï¼ä¿®æ¹åçå»ºè¡¨èæ¬å¦ä¸ï¼\n\nSET NAMES utf8mb4;\nSET FOREIGN_KEY_CHECKS = 0;\n\n-- ----------------------------\n-- Table structure for oauth_access_token\n-- ----------------------------\nDROP TABLE IF EXISTS `oauth_access_token`;\nCREATE TABLE `oauth_access_token` (\n  `token_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å å¯çaccess_tokençå¼',\n  `token` blob COMMENT 'OAuth2AccessToken.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®',\n  `authentication_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å å¯è¿çusername,client_id,scope',\n  `user_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç»å½çç¨æ·å',\n  `client_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å®¢æ·ç«¯ID',\n  `authentication` blob COMMENT 'OAuth2Authentication.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®',\n  `refresh_token` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å å¯çrefresh_tokençå¼'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC;\n\n-- ----------------------------\n-- Table structure for oauth_approvals\n-- ----------------------------\nDROP TABLE IF EXISTS `oauth_approvals`;\nCREATE TABLE `oauth_approvals` (\n  `userId` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç»å½çç¨æ·å',\n  `clientId` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å®¢æ·ç«¯ID',\n  `scope` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç³è¯·çæéèå´',\n  `status` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç¶æï¼ApproveæDenyï¼',\n  `expiresAt` datetime DEFAULT NULL COMMENT 'è¿ææ¶é´',\n  `lastModifiedAt` datetime DEFAULT NULL COMMENT 'æç»ä¿®æ¹æ¶é´'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC COMMENT='å·²ææå®¢æ·ç«¯å­å¨è®°å½';\n\n-- ----------------------------\n-- Table structure for oauth_client_details\n-- ----------------------------\nDROP TABLE IF EXISTS `oauth_client_details`;\nCREATE TABLE `oauth_client_details` (\n  `client_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'å®¢æ·ç«¯ID',\n  `resource_ids` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'èµæºIDéå,å¤ä¸ªèµæºæ¶ç¨éå·(,)åé',\n  `client_secret` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å®¢æ·ç«¯å¯å',\n  `scope` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å®¢æ·ç«¯ç³è¯·çæéèå´',\n  `authorized_grant_types` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å®¢æ·ç«¯æ¯æçgrant_type',\n  `web_server_redirect_uri` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'éå®åURI',\n  `authorities` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å®¢æ·ç«¯ææ¥æçSpring Securityçæéå¼ï¼å¤ä¸ªç¨éå·(,)åé',\n  `access_token_validity` int DEFAULT NULL COMMENT 'è®¿é®ä»¤çæææ¶é´å¼(åä½:ç§)',\n  `refresh_token_validity` int DEFAULT NULL COMMENT 'æ´æ°ä»¤çæææ¶é´å¼(åä½:ç§)',\n  `additional_information` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'é¢çå­æ®µ',\n  `autoapprove` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç¨æ·æ¯å¦èªå¨Approvalæä½'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC;\n\n-- ----------------------------\n-- Table structure for oauth_client_token\n-- ----------------------------\nDROP TABLE IF EXISTS `oauth_client_token`;\nCREATE TABLE `oauth_client_token` (\n  `token_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å å¯çaccess_tokenå¼',\n  `token` blob COMMENT 'OAuth2AccessToken.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®',\n  `authentication_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å å¯è¿çusername,client_id,scope',\n  `user_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç»å½çç¨æ·å',\n  `client_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å®¢æ·ç«¯ID'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC;\n\n-- ----------------------------\n-- Table structure for oauth_code\n-- ----------------------------\nDROP TABLE IF EXISTS `oauth_code`;\nCREATE TABLE `oauth_code` (\n  `code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ææç (æªå å¯)',\n  `authentication` blob COMMENT 'AuthorizationRequestHolder.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC;\n\n-- ----------------------------\n-- Table structure for oauth_refresh_token\n-- ----------------------------\nDROP TABLE IF EXISTS `oauth_refresh_token`;\nCREATE TABLE `oauth_refresh_token` (\n  `token_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'å å¯è¿çrefresh_tokençå¼',\n  `token` blob COMMENT 'OAuth2RefreshToken.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ® ',\n  `authentication` blob COMMENT 'OAuth2Authentication.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC;\n\nSET FOREIGN_KEY_CHECKS = 1;\n\n\n\n# å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯\n\nå¨è¡¨ oauth_client_details ä¸­å¢å ä¸æ¡å®¢æ·ç«¯éç½®è®°å½ï¼éè¦è®¾ç½®çå­æ®µå¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯æ è¯\n * client_secretï¼å®¢æ·ç«¯å®å¨ç ï¼æ­¤å¤ä¸è½æ¯ææï¼éè¦å å¯\n * scopeï¼å®¢æ·ç«¯ææèå´\n * authorized_grant_typesï¼å®¢æ·ç«¯ææç±»å\n * web_server_redirect_uriï¼æå¡å¨åè°å°å\n\nä½¿ç¨ BCryptPasswordEncoder ä¸ºå®¢æ·ç«¯å®å¨ç å å¯ï¼ä»£ç å¦ä¸ï¼\n\nSystem.out.println(new BCryptPasswordEncoder().encode(\"simplify\"));\n\n\næ§è¡å¦ä¸sqlèæ¬åå»ºä¸æ¡å®¢æ·ç«¯ä¿¡æ¯ï¼\n\nINSERT INTO `oauth_client_details` VALUES ('simplify', NULL, '{bcrypt}$2a$10$7X.MyK2rDC2SsZQsYFYczOeuc0AX.FaUNam0IlMXL.YkcWNP1t/Ge', 'read,write', 'password,refresh_token,authorization_code,client_credentials,implicit', 'https://www.ivoov.com', NULL, NULL, NULL, NULL, 'false');\n\n\n\n# POM\n\nç±äºä½¿ç¨äº JDBC å­å¨ï¼æä»¬éè¦å¢å ç¸å³ä¾èµ\n\n<dependencies>              \n    \x3c!--spring jdbc--\x3e\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-jdbc</artifactId>\n    </dependency>\n    \x3c!--mysqlé©±å¨--\x3e\n    <dependency>\n        <groupId>mysql</groupId>\n        <artifactId>mysql-connector-java</artifactId>\n    </dependency>\n</dependencies>\n\n\n\n# éç½®è®¤è¯æå¡å¨\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ AuthorizationServerConfigurerAdapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @Configuration\n * @EnableAuthorizationServer\n\npackage com.ieooc.simplify.samples.config;\n\nimport lombok.AllArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.oauth2.config.annotation.configurers.ClientDetailsServiceConfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerConfigurerAdapter;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerEndpointsConfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerSecurityConfigurer;\nimport org.springframework.security.oauth2.provider.approval.ApprovalStore;\nimport org.springframework.security.oauth2.provider.approval.JdbcApprovalStore;\nimport org.springframework.security.oauth2.provider.client.JdbcClientDetailsService;\nimport org.springframework.security.oauth2.provider.code.AuthorizationCodeServices;\nimport org.springframework.security.oauth2.provider.code.JdbcAuthorizationCodeServices;\nimport org.springframework.security.oauth2.provider.token.TokenStore;\nimport org.springframework.security.oauth2.provider.token.store.JdbcTokenStore;\n\nimport javax.sql.DataSource;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@Configuration\n@EnableAuthorizationServer\n@AllArgsConstructor\npublic class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter {\n\n    private final DataSource dataSource;\n    private final AuthenticationManager authenticationManagerBean;\n\n    /**\n     * å·²ææå®¢æ·ç«¯å­å¨è®°å½ éç¨mysqlç¼å­\n     * <p>\n     * 1.æ°æ®åºè¡¨åï¼oauth_approvals\n     * 2.å¦æä¸éç½®é»è®¤ä½¿ç¨TokenApprovalStoreä»tokenä¿¡æ¯ä¸­æå\n     *\n     * @return\n     */\n    @Bean\n    public ApprovalStore approvalStore() {\n        return new JdbcApprovalStore(dataSource);\n    }\n\n    /**\n     * è®¾ç½®ææç æ¨¡å¼çææç å¦ä½å­å éç¨mysqlç¼å­\n     *\n     * @return\n     */\n    @Bean\n    public AuthorizationCodeServices authorizationCodeServices() {\n        return new JdbcAuthorizationCodeServices(dataSource);\n    }\n\n    /**\n     * è®¿é®ä»¤ç éç¨Jdbcå®ç°ç¨mysqlå­å¨\n     *\n     * @return\n     */\n    @Bean\n    public TokenStore tokenStore() {\n        return new JdbcTokenStore(dataSource);\n    }\n\n    /**\n     * ç¨æ¥éç½®ä»¤çï¼tokenï¼çè®¿é®ç«¯ç¹åä»¤çæå¡(token services)ã\n     * <p>\n     * 1ãtokenKeyè¿ä¸ªendpointå½ä½¿ç¨JwtTokenä¸ä½¿ç¨éå¯¹ç§°å å¯æ¶ï¼èµæºæå¡ç¨äºè·åå¬é¥èå¼æ¾çï¼è¿éæè¿ä¸ªendpointå®å¨å¬å¼ã\n     * 2ãcheckTokenè¿ä¸ªendpointå®å¨å¬å¼\n     * 3ãåè®¸ä½¿ç¨ClientDetailsUserDetailsServiceæ¥è¿è¡clientç«¯ç»å½çéªè¯\n     *\n     * @param security j\n     * @throws Exception hg\n     */\n    @Override\n    public void configure(AuthorizationServerSecurityConfigurer security) throws Exception {\n        security\n                // æ£æ¥ä»¤ç /oauth/token_key\n                .tokenKeyAccess(\"permitAll()\")\n                // æ£æ¥ä»¤ç /oauth/check_token\n                .checkTokenAccess(\"permitAll()\")\n                // å¼å¯åè¯·æ±éè¦å¸¦ä¸ client_id client_secret ä¸éè¦ Basic è¯·æ±å¤´\n                // é»è®¤è¯·æ±å¤´ Basic Base64(client_id+client_secret)\n                .allowFormAuthenticationForClients();\n    }\n\n    /**\n     * åºäºJDBC - ç¨æ¥éç½®å®¢æ·ç«¯è¯¦ææå¡ï¼ClientDetailsServiceï¼ï¼\n     * å®¢æ·ç«¯è¯¦æä¿¡æ¯å¨è¿éè¿è¡åå§åï¼ä½ è½å¤æå®¢æ·ç«¯è¯¦æä¿¡æ¯åæ­»å¨è¿éæèæ¯éè¿æ°æ®åºæ¥å­å¨è°åè¯¦æä¿¡æ¯ã\n     *\n     * @param clients\n     * @throws Exception\n     */\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n        // è®¾ç½®å®¢æ·ç«¯çéç½®ä»æ°æ®åºä¸­è¯»åï¼å­å¨å¨oauth_client_detailsè¡¨\n        JdbcClientDetailsService jdbcClientDetailsService = new JdbcClientDetailsService(dataSource);\n        clients.withClientDetails(jdbcClientDetailsService);\n    }\n\n    /**\n     * éç½®æææå¡å¨ç«¯ç¹ä¿¡æ¯\n     *\n     * @param endpoints\n     * @throws Exception\n     */\n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\n        endpoints\n                // è®¾ç½®å·²ææå®¢æ·ç«¯å­å¨è®°å½å­å¨æ¹å¼\n                .approvalStore(approvalStore())\n                // è®¾ç½®è®¿é®ä»¤çå­å¨æ¹å¼\n                .tokenStore(tokenStore())\n                // è®¾ç½®ææç æ¨¡å¼çææç å­å¨æ¹å¼\n                .authorizationCodeServices(authorizationCodeServices())\n                // å¼å¯å¯ç éªè¯ï¼æ¥æºäº WebSecurityConfigurerAdapter\n                .authenticationManager(authenticationManagerBean)\n        ;\n\n    }\n}\n\n\n\n# æå¡å¨å®å¨éç½®\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ WebSecurityConfigurerAdapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @Configuration\n * @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)ï¼å¨å±æ¹æ³æ¦æª\n\npackage com.ieooc.simplify.samples.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.factory.PasswordEncoderFactories;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@Configuration\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    /**\n     * ææå¯ç ç¼ç å¨\n     */\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n    }\n\n    /**\n     * ä¸å®ä¹æ²¡æpassword grant_typeæ¨¡å¼\n     */\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n\n        auth.inMemoryAuthentication()\n                .passwordEncoder(passwordEncoder())\n                .withUser(\"admin\")\n                .password(passwordEncoder().encode(\"123456\"))\n                .roles(\"ROOT\", \"USER\")\n                .and()\n                .withUser(\"user\")\n                .password(passwordEncoder().encode(\"123456\"))\n                .roles(\"USER\");\n    }\n}\n\n\n\n# application.yml\n\nserver:\n  port: 3000\nspring:\n  application:\n    name: simplify-auth\n  datasource:\n    type: com.alibaba.druid.pool.DruidDataSource\n    druid:\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      username: root\n      password: root\n      url: jdbc:mysql://localhost:3306/simplify?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=GMT%2B8&allowMultiQueries=true&allowPublicKeyRetrieval=true\n\nlogging:\n  level:\n    org.springframework.security: debug\n\n\n\n# è®¿é®è·åææç \n\næå¼æµè§å¨ï¼è¾å¥å°åï¼\n\nhttp://localhost:3000/oauth/authorize?response_type=code&client_id=simplify&scope=all&redirect_uri=https://www.ivoov.com\n\n\nç¬¬ä¸æ¬¡è®¿é®ä¼è·³è½¬å°ç»å½é¡µé¢\n\n\n\néªè¯æååä¼è¯¢é®ç¨æ·æ¯å¦ææå®¢æ·ç«¯\n\n\n\néæ©ææåä¼è·³è½¬å°æçåå®¢ï¼æµè§å¨å°åä¸è¿ä¼åå«ä¸ä¸ªææç ï¼code=jB00SKï¼ï¼æµè§å¨å°åæ ä¼æ¾ç¤ºå¦ä¸å°åï¼\n\nhttps://www.ivoov.com/?code=jB00SK\n\n\næäºè¿ä¸ªææç å°±å¯ä»¥è·åè®¿é®ä»¤çäº\n\n\n# éè¿ææç åæå¡å¨ç³è¯·ä»¤ç\n\néè¿ CURL ææ¯ Postman è¯·æ±\n\ncurl --location --request POST 'http://localhost:3000/oauth/token?grant_type=authorization_code&code=jB00SK&client_id=simplify&client_secret=simplify&redirect_uri=https://www.ivoov.com'\n\n\n\n\næä½æååæ°æ®åº oauth_access_token è¡¨ä¸­ä¼å¢å ä¸ç¬è®°å½ï¼ææå¾å¦ä¸ï¼\n\n",normalizedContent:"# åºäº jdbc å­å¨ä»¤ç\n\n\n# æ¦è¿°\n\næ¬ç« è åºäº jdbc å­å¨ä»¤ç çæ¨¡å¼ç¨äºæ¼ç¤ºæåºæ¬çæä½ï¼å¸®å©å¤§å®¶å¿«éçè§£ oauth2 è®¤è¯æå¡å¨ä¸­ \"è®¤è¯\"ã\"ææ\"ã\"è®¿é®ä»¤çâ çåºæ¬æ¦å¿µ\n\næä½æµç¨\n\n\n\n * åå§å oauth2 ç¸å³è¡¨\n * å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯\n * éç½®è®¤è¯æå¡å¨\n   * éç½®æ°æ®æºï¼datasource\n   * éç½®ä»¤çå­å¨æ¹å¼ï¼tokenstore -> jdbctokenstore\n   * éç½®å®¢æ·ç«¯è¯»åæ¹å¼ï¼clientdetailsservice -> jdbcclientdetailsservice\n   * éç½®æå¡ç«¯ç¹ä¿¡æ¯ï¼\n     \n     authorizationserverendpointsconfigurer\n     \n     \n     * tokenstoreï¼è®¾ç½®ä»¤çå­å¨æ¹å¼\n   * éç½®å®¢æ·ç«¯ä¿¡æ¯ï¼\n     \n     clientdetailsserviceconfigurer\n     \n     \n     * withclientdetailsï¼è®¾ç½®å®¢æ·ç«¯éç½®è¯»åæ¹å¼\n * éç½® web å®å¨\n   * éç½®å¯ç å å¯æ¹å¼ï¼bcryptpasswordencoder\n   * éç½®è®¤è¯ä¿¡æ¯ï¼authenticationmanagerbuilder\n * éè¿ get è¯·æ±è®¿é®è®¤è¯æå¡å¨è·åææç \n   * ç«¯ç¹ï¼/oauth/authorize\n * éè¿ post è¯·æ±å©ç¨ææç è®¿é®è®¤è¯æå¡å¨è·åä»¤ç\n   * ç«¯ç¹ï¼/oauth/token\n\néï¼é»è®¤çç«¯ç¹ url\n\n * /oauth/authorizeï¼ææç«¯ç¹\n * /oauth/tokenï¼ä»¤çç«¯ç¹\n * /oauth/confirm_accessï¼ç¨æ·ç¡®è®¤æææäº¤ç«¯ç¹\n * /oauth/errorï¼æææå¡éè¯¯ä¿¡æ¯ç«¯ç¹\n * /oauth/check_tokenï¼ç¨äºèµæºæå¡è®¿é®çä»¤çè§£æç«¯ç¹\n * /oauth/token_keyï¼æä¾å¬æå¯åçç«¯ç¹ï¼å¦æä½ ä½¿ç¨ jwt ä»¤ççè¯\n\n\n# åå§å oauth2 æ°æ®åº schema\n\nä½¿ç¨spring-security-oauth2å®æ¹æä¾çå»ºè¡¨èæ¬åå§åoauth2ç¸å³è¡¨ï¼å°åå¦ä¸ï¼\n\nhttps://github.com/spring-projects/spring-security-oauth/blob/master/spring-security-oauth2/src/test/resources/schema.sql\n\n\noauth2ç¸å³ç5å¼ è¡¨ï¼\n\n * oauth_access_tokenï¼è®¿é®ä»¤ç\n * oauth_refresh_tokenï¼æ´æ°ä»¤ç\n * oauth_client_detailsï¼å®¢æ·ç«¯ä¿¡æ¯\n * oauth_codeï¼ææç \n * oauth_approvalsï¼ææè®°å½\n * oauth_client_token: å®¢æ·ç«¯ç¨æ¥è®°å½tokenä¿¡æ¯\n\n> åªä»¥å¯ç æ¨¡å¼æ¥è¿è¡æµè¯ï¼ä¸èèç®¡çåè½ï¼åªç¨å°äºäºoauth_client_detailsï¼oauth_access_tokenï¼oauth_refresh_token ä¸å¼ è¡¨\n\nç±äºæä»¬ä½¿ç¨çæ¯ mysql 8 æ°æ®åºï¼é»è®¤å»ºè¡¨è¯­å¥ä¸­ä¸»é®ä¸º varchar(256)ï¼è¿è¶è¿äºæå¤§çä¸»é®é¿åº¦ï¼è¯·æå¨ä¿®æ¹ä¸º 255ï¼å¹¶ç¨ blob æ¿æ¢è¯­å¥ä¸­ç longvarbinary ç±»å(å®æ¹ææ¡£)ï¼ä¿®æ¹åçå»ºè¡¨èæ¬å¦ä¸ï¼\n\nset names utf8mb4;\nset foreign_key_checks = 0;\n\n-- ----------------------------\n-- table structure for oauth_access_token\n-- ----------------------------\ndrop table if exists `oauth_access_token`;\ncreate table `oauth_access_token` (\n  `token_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å å¯çaccess_tokençå¼',\n  `token` blob comment 'oauth2accesstoken.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®',\n  `authentication_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å å¯è¿çusername,client_id,scope',\n  `user_name` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'ç»å½çç¨æ·å',\n  `client_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å®¢æ·ç«¯id',\n  `authentication` blob comment 'oauth2authentication.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®',\n  `refresh_token` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å å¯çrefresh_tokençå¼'\n) engine=innodb default charset=utf8mb4 collate=utf8mb4_0900_ai_ci row_format=dynamic;\n\n-- ----------------------------\n-- table structure for oauth_approvals\n-- ----------------------------\ndrop table if exists `oauth_approvals`;\ncreate table `oauth_approvals` (\n  `userid` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'ç»å½çç¨æ·å',\n  `clientid` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å®¢æ·ç«¯id',\n  `scope` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'ç³è¯·çæéèå´',\n  `status` varchar(10) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'ç¶æï¼approveædenyï¼',\n  `expiresat` datetime default null comment 'è¿ææ¶é´',\n  `lastmodifiedat` datetime default null comment 'æç»ä¿®æ¹æ¶é´'\n) engine=innodb default charset=utf8mb4 collate=utf8mb4_0900_ai_ci row_format=dynamic comment='å·²ææå®¢æ·ç«¯å­å¨è®°å½';\n\n-- ----------------------------\n-- table structure for oauth_client_details\n-- ----------------------------\ndrop table if exists `oauth_client_details`;\ncreate table `oauth_client_details` (\n  `client_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci not null comment 'å®¢æ·ç«¯id',\n  `resource_ids` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'èµæºidéå,å¤ä¸ªèµæºæ¶ç¨éå·(,)åé',\n  `client_secret` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å®¢æ·ç«¯å¯å',\n  `scope` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å®¢æ·ç«¯ç³è¯·çæéèå´',\n  `authorized_grant_types` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å®¢æ·ç«¯æ¯æçgrant_type',\n  `web_server_redirect_uri` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'éå®åuri',\n  `authorities` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å®¢æ·ç«¯ææ¥æçspring securityçæéå¼ï¼å¤ä¸ªç¨éå·(,)åé',\n  `access_token_validity` int default null comment 'è®¿é®ä»¤çæææ¶é´å¼(åä½:ç§)',\n  `refresh_token_validity` int default null comment 'æ´æ°ä»¤çæææ¶é´å¼(åä½:ç§)',\n  `additional_information` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'é¢çå­æ®µ',\n  `autoapprove` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'ç¨æ·æ¯å¦èªå¨approvalæä½'\n) engine=innodb default charset=utf8mb4 collate=utf8mb4_0900_ai_ci row_format=dynamic;\n\n-- ----------------------------\n-- table structure for oauth_client_token\n-- ----------------------------\ndrop table if exists `oauth_client_token`;\ncreate table `oauth_client_token` (\n  `token_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å å¯çaccess_tokenå¼',\n  `token` blob comment 'oauth2accesstoken.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®',\n  `authentication_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å å¯è¿çusername,client_id,scope',\n  `user_name` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'ç»å½çç¨æ·å',\n  `client_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å®¢æ·ç«¯id'\n) engine=innodb default charset=utf8mb4 collate=utf8mb4_0900_ai_ci row_format=dynamic;\n\n-- ----------------------------\n-- table structure for oauth_code\n-- ----------------------------\ndrop table if exists `oauth_code`;\ncreate table `oauth_code` (\n  `code` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'ææç (æªå å¯)',\n  `authentication` blob comment 'authorizationrequestholder.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®'\n) engine=innodb default charset=utf8mb4 collate=utf8mb4_0900_ai_ci row_format=dynamic;\n\n-- ----------------------------\n-- table structure for oauth_refresh_token\n-- ----------------------------\ndrop table if exists `oauth_refresh_token`;\ncreate table `oauth_refresh_token` (\n  `token_id` varchar(255) character set utf8mb4 collate utf8mb4_0900_ai_ci default null comment 'å å¯è¿çrefresh_tokençå¼',\n  `token` blob comment 'oauth2refreshtoken.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ® ',\n  `authentication` blob comment 'oauth2authentication.javaå¯¹è±¡åºåååçäºè¿å¶æ°æ®'\n) engine=innodb default charset=utf8mb4 collate=utf8mb4_0900_ai_ci row_format=dynamic;\n\nset foreign_key_checks = 1;\n\n\n\n# å¨æ°æ®åºä¸­éç½®å®¢æ·ç«¯\n\nå¨è¡¨ oauth_client_details ä¸­å¢å ä¸æ¡å®¢æ·ç«¯éç½®è®°å½ï¼éè¦è®¾ç½®çå­æ®µå¦ä¸ï¼\n\n * client_idï¼å®¢æ·ç«¯æ è¯\n * client_secretï¼å®¢æ·ç«¯å®å¨ç ï¼æ­¤å¤ä¸è½æ¯ææï¼éè¦å å¯\n * scopeï¼å®¢æ·ç«¯ææèå´\n * authorized_grant_typesï¼å®¢æ·ç«¯ææç±»å\n * web_server_redirect_uriï¼æå¡å¨åè°å°å\n\nä½¿ç¨ bcryptpasswordencoder ä¸ºå®¢æ·ç«¯å®å¨ç å å¯ï¼ä»£ç å¦ä¸ï¼\n\nsystem.out.println(new bcryptpasswordencoder().encode(\"simplify\"));\n\n\næ§è¡å¦ä¸sqlèæ¬åå»ºä¸æ¡å®¢æ·ç«¯ä¿¡æ¯ï¼\n\ninsert into `oauth_client_details` values ('simplify', null, '{bcrypt}$2a$10$7x.myk2rdc2sszqsyfyczoeuc0ax.faunam0ilmxl.ykcwnp1t/ge', 'read,write', 'password,refresh_token,authorization_code,client_credentials,implicit', 'https://www.ivoov.com', null, null, null, null, 'false');\n\n\n\n# pom\n\nç±äºä½¿ç¨äº jdbc å­å¨ï¼æä»¬éè¦å¢å ç¸å³ä¾èµ\n\n<dependencies>              \n    \x3c!--spring jdbc--\x3e\n    <dependency>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-jdbc</artifactid>\n    </dependency>\n    \x3c!--mysqlé©±å¨--\x3e\n    <dependency>\n        <groupid>mysql</groupid>\n        <artifactid>mysql-connector-java</artifactid>\n    </dependency>\n</dependencies>\n\n\n\n# éç½®è®¤è¯æå¡å¨\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ authorizationserverconfigureradapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @configuration\n * @enableauthorizationserver\n\npackage com.ieooc.simplify.samples.config;\n\nimport lombok.allargsconstructor;\nimport org.springframework.context.annotation.bean;\nimport org.springframework.context.annotation.configuration;\nimport org.springframework.security.crypto.password.passwordencoder;\nimport org.springframework.security.oauth2.config.annotation.configurers.clientdetailsserviceconfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.authorizationserverconfigureradapter;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.enableauthorizationserver;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.authorizationserverendpointsconfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.authorizationserversecurityconfigurer;\nimport org.springframework.security.oauth2.provider.approval.approvalstore;\nimport org.springframework.security.oauth2.provider.approval.jdbcapprovalstore;\nimport org.springframework.security.oauth2.provider.client.jdbcclientdetailsservice;\nimport org.springframework.security.oauth2.provider.code.authorizationcodeservices;\nimport org.springframework.security.oauth2.provider.code.jdbcauthorizationcodeservices;\nimport org.springframework.security.oauth2.provider.token.tokenstore;\nimport org.springframework.security.oauth2.provider.token.store.jdbctokenstore;\n\nimport javax.sql.datasource;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@configuration\n@enableauthorizationserver\n@allargsconstructor\npublic class authorizationserverconfig extends authorizationserverconfigureradapter {\n\n    private final datasource datasource;\n    private final authenticationmanager authenticationmanagerbean;\n\n    /**\n     * å·²ææå®¢æ·ç«¯å­å¨è®°å½ éç¨mysqlç¼å­\n     * <p>\n     * 1.æ°æ®åºè¡¨åï¼oauth_approvals\n     * 2.å¦æä¸éç½®é»è®¤ä½¿ç¨tokenapprovalstoreä»tokenä¿¡æ¯ä¸­æå\n     *\n     * @return\n     */\n    @bean\n    public approvalstore approvalstore() {\n        return new jdbcapprovalstore(datasource);\n    }\n\n    /**\n     * è®¾ç½®ææç æ¨¡å¼çææç å¦ä½å­å éç¨mysqlç¼å­\n     *\n     * @return\n     */\n    @bean\n    public authorizationcodeservices authorizationcodeservices() {\n        return new jdbcauthorizationcodeservices(datasource);\n    }\n\n    /**\n     * è®¿é®ä»¤ç éç¨jdbcå®ç°ç¨mysqlå­å¨\n     *\n     * @return\n     */\n    @bean\n    public tokenstore tokenstore() {\n        return new jdbctokenstore(datasource);\n    }\n\n    /**\n     * ç¨æ¥éç½®ä»¤çï¼tokenï¼çè®¿é®ç«¯ç¹åä»¤çæå¡(token services)ã\n     * <p>\n     * 1ãtokenkeyè¿ä¸ªendpointå½ä½¿ç¨jwttokenä¸ä½¿ç¨éå¯¹ç§°å å¯æ¶ï¼èµæºæå¡ç¨äºè·åå¬é¥èå¼æ¾çï¼è¿éæè¿ä¸ªendpointå®å¨å¬å¼ã\n     * 2ãchecktokenè¿ä¸ªendpointå®å¨å¬å¼\n     * 3ãåè®¸ä½¿ç¨clientdetailsuserdetailsserviceæ¥è¿è¡clientç«¯ç»å½çéªè¯\n     *\n     * @param security j\n     * @throws exception hg\n     */\n    @override\n    public void configure(authorizationserversecurityconfigurer security) throws exception {\n        security\n                // æ£æ¥ä»¤ç /oauth/token_key\n                .tokenkeyaccess(\"permitall()\")\n                // æ£æ¥ä»¤ç /oauth/check_token\n                .checktokenaccess(\"permitall()\")\n                // å¼å¯åè¯·æ±éè¦å¸¦ä¸ client_id client_secret ä¸éè¦ basic è¯·æ±å¤´\n                // é»è®¤è¯·æ±å¤´ basic base64(client_id+client_secret)\n                .allowformauthenticationforclients();\n    }\n\n    /**\n     * åºäºjdbc - ç¨æ¥éç½®å®¢æ·ç«¯è¯¦ææå¡ï¼clientdetailsserviceï¼ï¼\n     * å®¢æ·ç«¯è¯¦æä¿¡æ¯å¨è¿éè¿è¡åå§åï¼ä½ è½å¤æå®¢æ·ç«¯è¯¦æä¿¡æ¯åæ­»å¨è¿éæèæ¯éè¿æ°æ®åºæ¥å­å¨è°åè¯¦æä¿¡æ¯ã\n     *\n     * @param clients\n     * @throws exception\n     */\n    @override\n    public void configure(clientdetailsserviceconfigurer clients) throws exception {\n        // è®¾ç½®å®¢æ·ç«¯çéç½®ä»æ°æ®åºä¸­è¯»åï¼å­å¨å¨oauth_client_detailsè¡¨\n        jdbcclientdetailsservice jdbcclientdetailsservice = new jdbcclientdetailsservice(datasource);\n        clients.withclientdetails(jdbcclientdetailsservice);\n    }\n\n    /**\n     * éç½®æææå¡å¨ç«¯ç¹ä¿¡æ¯\n     *\n     * @param endpoints\n     * @throws exception\n     */\n    @override\n    public void configure(authorizationserverendpointsconfigurer endpoints) throws exception {\n        endpoints\n                // è®¾ç½®å·²ææå®¢æ·ç«¯å­å¨è®°å½å­å¨æ¹å¼\n                .approvalstore(approvalstore())\n                // è®¾ç½®è®¿é®ä»¤çå­å¨æ¹å¼\n                .tokenstore(tokenstore())\n                // è®¾ç½®ææç æ¨¡å¼çææç å­å¨æ¹å¼\n                .authorizationcodeservices(authorizationcodeservices())\n                // å¼å¯å¯ç éªè¯ï¼æ¥æºäº websecurityconfigureradapter\n                .authenticationmanager(authenticationmanagerbean)\n        ;\n\n    }\n}\n\n\n\n# æå¡å¨å®å¨éç½®\n\nåå»ºä¸ä¸ªç±»ç»§æ¿ websecurityconfigureradapter å¹¶æ·»å ç¸å³æ³¨è§£ï¼\n\n * @configuration\n * @enableglobalmethodsecurity(prepostenabled = true, securedenabled = true, jsr250enabled = true)ï¼å¨å±æ¹æ³æ¦æª\n\npackage com.ieooc.simplify.samples.config;\n\nimport org.springframework.context.annotation.bean;\nimport org.springframework.context.annotation.configuration;\nimport org.springframework.security.config.annotation.authentication.builders.authenticationmanagerbuilder;\nimport org.springframework.security.config.annotation.web.builders.httpsecurity;\nimport org.springframework.security.config.annotation.web.configuration.websecurityconfigureradapter;\nimport org.springframework.security.crypto.factory.passwordencoderfactories;\nimport org.springframework.security.crypto.password.passwordencoder;\n\n/**\n * @author heyuqiang\n * @date 2020/11/10\n */\n@configuration\npublic class websecurityconfig extends websecurityconfigureradapter {\n\n    /**\n     * ææå¯ç ç¼ç å¨\n     */\n    @bean\n    public passwordencoder passwordencoder() {\n        return passwordencoderfactories.createdelegatingpasswordencoder();\n    }\n\n    /**\n     * ä¸å®ä¹æ²¡æpassword grant_typeæ¨¡å¼\n     */\n    @bean\n    @override\n    public authenticationmanager authenticationmanagerbean() throws exception {\n        return super.authenticationmanagerbean();\n    }\n\n    @override\n    protected void configure(authenticationmanagerbuilder auth) throws exception {\n\n        auth.inmemoryauthentication()\n                .passwordencoder(passwordencoder())\n                .withuser(\"admin\")\n                .password(passwordencoder().encode(\"123456\"))\n                .roles(\"root\", \"user\")\n                .and()\n                .withuser(\"user\")\n                .password(passwordencoder().encode(\"123456\"))\n                .roles(\"user\");\n    }\n}\n\n\n\n# application.yml\n\nserver:\n  port: 3000\nspring:\n  application:\n    name: simplify-auth\n  datasource:\n    type: com.alibaba.druid.pool.druiddatasource\n    druid:\n      driver-class-name: com.mysql.cj.jdbc.driver\n      username: root\n      password: root\n      url: jdbc:mysql://localhost:3306/simplify?characterencoding=utf8&zerodatetimebehavior=converttonull&usessl=false&usejdbccomplianttimezoneshift=true&uselegacydatetimecode=false&servertimezone=gmt%2b8&allowmultiqueries=true&allowpublickeyretrieval=true\n\nlogging:\n  level:\n    org.springframework.security: debug\n\n\n\n# è®¿é®è·åææç \n\næå¼æµè§å¨ï¼è¾å¥å°åï¼\n\nhttp://localhost:3000/oauth/authorize?response_type=code&client_id=simplify&scope=all&redirect_uri=https://www.ivoov.com\n\n\nç¬¬ä¸æ¬¡è®¿é®ä¼è·³è½¬å°ç»å½é¡µé¢\n\n\n\néªè¯æååä¼è¯¢é®ç¨æ·æ¯å¦ææå®¢æ·ç«¯\n\n\n\néæ©ææåä¼è·³è½¬å°æçåå®¢ï¼æµè§å¨å°åä¸è¿ä¼åå«ä¸ä¸ªææç ï¼code=jb00skï¼ï¼æµè§å¨å°åæ ä¼æ¾ç¤ºå¦ä¸å°åï¼\n\nhttps://www.ivoov.com/?code=jb00sk\n\n\næäºè¿ä¸ªææç å°±å¯ä»¥è·åè®¿é®ä»¤çäº\n\n\n# éè¿ææç åæå¡å¨ç³è¯·ä»¤ç\n\néè¿ curl ææ¯ postman è¯·æ±\n\ncurl --location --request post 'http://localhost:3000/oauth/token?grant_type=authorization_code&code=jb00sk&client_id=simplify&client_secret=simplify&redirect_uri=https://www.ivoov.com'\n\n\n\n\næä½æååæ°æ®åº oauth_access_token è¡¨ä¸­ä¼å¢å ä¸ç¬è®°å½ï¼ææå¾å¦ä¸ï¼\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"RBAC åºäºè§è²çæéæ§å¶",frontmatter:{title:"RBAC åºäºè§è²çæéæ§å¶",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/cee981/"},regularPath:"/19.Spring%20Security%20OAuth2/03.%E5%88%9B%E5%BB%BA%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8/04.RBAC%20%E5%9F%BA%E4%BA%8E%E8%A7%92%E8%89%B2%E7%9A%84%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6.html",relativePath:"19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/04.RBAC åºäºè§è²çæéæ§å¶.md",key:"v-8dc9cdca",path:"/pages/cee981/",headersStr:null,content:"# RBAC åºäºè§è²çæéæ§å¶",normalizedContent:"# rbac åºäºè§è²çæéæ§å¶",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"åºäº RBAC çèªå®ä¹è®¤è¯",frontmatter:{title:"åºäº RBAC çèªå®ä¹è®¤è¯",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/4bff79/"},regularPath:"/19.Spring%20Security%20OAuth2/03.%E5%88%9B%E5%BB%BA%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8/05.%E5%9F%BA%E4%BA%8E%20RBAC%20%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AE%A4%E8%AF%81.html",relativePath:"19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/05.åºäº RBAC çèªå®ä¹è®¤è¯.md",key:"v-994030a6",path:"/pages/4bff79/",headersStr:null,content:"# åºäº RBAC çèªå®ä¹è®¤è¯",normalizedContent:"# åºäº rbac çèªå®ä¹è®¤è¯",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"JWTä»¤ç",frontmatter:{title:"JWTä»¤ç",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/8dc90c/"},regularPath:"/19.Spring%20Security%20OAuth2/03.%E5%88%9B%E5%BB%BA%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8/06.JWT%E4%BB%A4%E7%89%8C.html",relativePath:"19.Spring Security OAuth2/03.åå»ºè®¤è¯æå¡å¨/06.JWTä»¤ç.md",key:"v-c4e4c304",path:"/pages/8dc90c/",headers:[{level:2,title:"JWTä»ç»",slug:"jwtä»ç»",normalizedTitle:"jwtä»ç»",charIndex:12},{level:3,title:"ä»ä¹æ¯JWTï¼",slug:"ä»ä¹æ¯jwt",normalizedTitle:"ä»ä¹æ¯jwtï¼",charIndex:233},{level:3,title:"JWTä»¤çç»æ",slug:"jwtä»¤çç»æ",normalizedTitle:"jwtä»¤çç»æ",charIndex:593},{level:2,title:"éç½®JWTä»¤çæå¡",slug:"éç½®jwtä»¤çæå¡",normalizedTitle:"éç½®jwtä»¤çæå¡",charIndex:1411},{level:2,title:"çæjwtä»¤ç",slug:"çæjwtä»¤ç",normalizedTitle:"çæjwtä»¤ç",charIndex:2703},{level:2,title:"æ ¡éªjwtä»¤ç",slug:"æ ¡éªjwtä»¤ç",normalizedTitle:"æ ¡éªjwtä»¤ç",charIndex:2722}],headersStr:"JWTä»ç» ä»ä¹æ¯JWTï¼ JWTä»¤çç»æ éç½®JWTä»¤çæå¡ çæjwtä»¤ç æ ¡éªjwtä»¤ç",content:'# JWTä»¤ç\n\n\n# JWTä»ç»\n\néè¿ä¸è¾¹çæµè¯æä»¬åç°ï¼å½èµæºæå¡åæææå¡ä¸å¨ä¸èµ·æ¶èµæºæå¡ä½¿ç¨RemoteTokenServices è¿ç¨è¯·æ±æææå¡éªè¯tokenï¼å¦æè®¿é®éè¾å¤§å°ä¼å½±åç³»ç»çæ§è½ ã\n\nè§£å³ä¸è¾¹é®é¢ï¼\n\nä»¤çéç¨JWTæ ¼å¼å³å¯è§£å³ä¸è¾¹çé®é¢ï¼ç¨æ·è®¤è¯éè¿ä¼å¾å°ä¸ä¸ªJWTä»¤çï¼JWTä»¤çä¸­å·²ç»åæ¬äºç¨æ·ç¸å³çä¿¡æ¯ï¼å®¢æ·ç«¯åªéè¦æºå¸¦JWTè®¿é®èµæºæå¡ï¼èµæºæå¡æ ¹æ®äºåçº¦å®çç®æ³èªè¡å®æä»¤çæ ¡éªï¼æ éæ¯æ¬¡é½è¯·æ±è®¤è¯æå¡å®æææã\n\n\n# ä»ä¹æ¯JWTï¼\n\nJSON Web Tokenï¼JWTï¼æ¯ä¸ä¸ªå¼æ¾çè¡ä¸æ åï¼RFC 7519ï¼ï¼å®å®ä¹äºä¸ç§ç®ä»çãèªåå«çåè®®æ ¼å¼ï¼ç¨äºå¨éä¿¡åæ¹ä¼ éjsonå¯¹è±¡ï¼ä¼ éçä¿¡æ¯ç»è¿æ°å­ç­¾åå¯ä»¥è¢«éªè¯åä¿¡ä»»ãJWTå¯ä»¥ä½¿ç¨HMACç®æ³æä½¿ç¨RSAçå¬é¥/ç§é¥å¯¹æ¥ç­¾åï¼é²æ­¢è¢«ç¯¡æ¹ã\n\nå®ç½ï¼https://jwt.io/\n\næ åï¼https://tools.ietf.org/html/rfc7519\n\nJWTä»¤ççä¼ç¹ï¼\n\n * 1ï¼jwtåºäºjsonï¼éå¸¸æ¹ä¾¿è§£æã\n * 2ï¼å¯ä»¥å¨ä»¤çä¸­èªå®ä¹ä¸°å¯çåå®¹ï¼ææ©å±ã\n * 3ï¼éè¿éå¯¹ç§°å å¯ç®æ³åæ°å­ç­¾åææ¯ï¼JWTé²æ­¢ç¯¡æ¹ï¼å®å¨æ§é«ã\n * 4ï¼èµæºæå¡ä½¿ç¨JWTå¯ä¸ä¾èµè®¤è¯æå¡å³å¯å®æææã\n\nç¼ºç¹ï¼\n\n * 1ï¼JWTä»¤çè¾é¿ï¼å å­å¨ç©ºé´æ¯è¾å¤§ã\n\n\n# JWTä»¤çç»æ\n\néè¿å­¦ä¹ JWTä»¤çç»æä¸ºèªå®ä¹jwtä»¤çæå¥½åºç¡ã\n\nJWTä»¤çç±ä¸é¨åç»æï¼æ¯é¨åä¸­é´ä½¿ç¨ç¹ï¼.ï¼åéï¼æ¯å¦ï¼xxxxx.yyyyy.zzzzz\n\n * Header\n   \n   å¤´é¨åæ¬ä»¤ççç±»åï¼å³JWTï¼åä½¿ç¨çåå¸ç®æ³ï¼å¦HMAC SHA256æRSAï¼\n   \n   ä¸ä¸ªä¾å­å¦ä¸ï¼\n   \n   ä¸è¾¹æ¯Headeré¨åçåå®¹\n\n{\n    "alg": "HS256",\n    "typ": "JWT"\n}\n\n\nå°ä¸è¾¹çåå®¹ä½¿ç¨Base64Urlç¼ç ï¼å¾å°ä¸ä¸ªå­ç¬¦ä¸²å°±æ¯JWTä»¤ççç¬¬ä¸é¨åã\n\n * Payload\n\nç¬¬äºé¨åæ¯è´è½½ï¼åå®¹ä¹æ¯ä¸ä¸ªjsonå¯¹è±¡ï¼å®æ¯å­æ¾ææä¿¡æ¯çå°æ¹ï¼å®å¯ä»¥å­æ¾jwtæä¾çç°æå­æ®µï¼æ¯å¦ï¼issï¼ç­¾åèï¼,expï¼è¿ææ¶é´æ³ï¼, subï¼é¢åçç¨æ·ï¼ç­ï¼ä¹å¯èªå®ä¹å­æ®µãæ­¤é¨åä¸å»ºè®®å­æ¾ææä¿¡æ¯ï¼å ä¸ºæ­¤é¨åå¯ä»¥è§£ç è¿ååå§åå®¹ã\n\næåå°ç¬¬äºé¨åè´è½½ä½¿ç¨Base64Urlç¼ç ï¼å¾å°ä¸ä¸ªå­ç¬¦ä¸²å°±æ¯JWTä»¤ççç¬¬äºé¨åã\n\nä¸ä¸ªä¾å­ï¼\n\n{\n    "sub": "1234567890",\n    "name": "456",\n    "admin": true\n}\n\n\n * Signature\n\nç¬¬ä¸é¨åæ¯ç­¾åï¼æ­¤é¨åç¨äºé²æ­¢jwtåå®¹è¢«ç¯¡æ¹ã\n\nè¿ä¸ªé¨åä½¿ç¨base64urlå°åä¸¤é¨åè¿è¡ç¼ç ï¼ç¼ç åä½¿ç¨ç¹ï¼.ï¼è¿æ¥ç»æå­ç¬¦ä¸²ï¼æåä½¿ç¨headerä¸­å£°æç­¾åç®æ³è¿è¡ç­¾åã\n\nä¸ä¸ªä¾å­ï¼\n\nHMACSHA256(\nbase64UrlEncode(header) + "." +\nbase64UrlEncode(payload),\nsecret)\n\n\n * base64UrlEncode(header)ï¼jwtä»¤ççç¬¬ä¸é¨åã\n * base64UrlEncode(payload)ï¼jwtä»¤ççç¬¬äºé¨åã\n * secretï¼ç­¾åæä½¿ç¨çå¯é¥ã\n\n\n# éç½®JWTä»¤çæå¡\n\nå¨simplify-authä¸­éç½®jwtä»¤çæå¡ï¼å³å¯å®ç°çæjwtæ ¼å¼çä»¤çã\n\n1ãTokenConfig\n\n@Configuration\npublic class TokenConfig {\n    private String SIGNING_KEY = "simplify_key";\n\n    @Bean\n    public TokenStore tokenStore() {\n        return new JwtTokenStore(accessTokenConverter());\n    } \n    \n    @Bean\n    public JwtAccessTokenConverter accessTokenConverter() {\n        JwtAccessTokenConverter converter = new JwtAccessTokenConverter();\n        converter.setSigningKey(SIGNING_KEY); //å¯¹ç§°ç§é¥ï¼èµæºæå¡å¨ä½¿ç¨è¯¥ç§é¥æ¥éªè¯\n        return converter;\n    }\n}\n\n\n2ãå®ä¹JWTä»¤çæå¡\n\n@Autowired\nprivate JwtAccessTokenConverter accessTokenConverter;\n    @Bean\n    public AuthorizationServerTokenServices tokenService() {\n        DefaultTokenServices service=new DefaultTokenServices();\n        service.setClientDetailsService(clientDetailsService);\n        service.setSupportRefreshToken(true);\n        service.setTokenStore(tokenStore);\n        TokenEnhancerChain tokenEnhancerChain = new TokenEnhancerChain();\n        tokenEnhancerChain.setTokenEnhancers(Arrays.asList(accessTokenConverter));\n        service.setTokenEnhancer(tokenEnhancerChain);\n        //ä»¤çé»è®¤æææ2å°æ¶\n        service.setAccessTokenValiditySeconds(7200);\n        //å·æ°ä»¤çé»è®¤æææ3å¤©\n        service.setRefreshTokenValiditySeconds(259200); \n        return service;\n    }\n}\n\n\n\n# çæjwtä»¤ç\n\ntodo\n\n\n\n# æ ¡éªjwtä»¤ç\n\nèµæºæå¡éè¦åæææå¡æ¥æä¸è´çç­¾å­ãä»¤çæå¡ç­ï¼\n\n1ãå°æææå¡ä¸­çTokenConfigç±»æ·è´å°èµæº æå¡ä¸­\n\n2ãå±è½èµæº æå¡åæ¥çä»¤çæå¡ç±»\n\ntodo\n\n\n3ãæµè¯\n\n1ï¼ç³è¯·jwtä»¤ç\n\n2ï¼ä½¿ç¨ä»¤çè¯·æ±èµæº',normalizedContent:'# jwtä»¤ç\n\n\n# jwtä»ç»\n\néè¿ä¸è¾¹çæµè¯æä»¬åç°ï¼å½èµæºæå¡åæææå¡ä¸å¨ä¸èµ·æ¶èµæºæå¡ä½¿ç¨remotetokenservices è¿ç¨è¯·æ±æææå¡éªè¯tokenï¼å¦æè®¿é®éè¾å¤§å°ä¼å½±åç³»ç»çæ§è½ ã\n\nè§£å³ä¸è¾¹é®é¢ï¼\n\nä»¤çéç¨jwtæ ¼å¼å³å¯è§£å³ä¸è¾¹çé®é¢ï¼ç¨æ·è®¤è¯éè¿ä¼å¾å°ä¸ä¸ªjwtä»¤çï¼jwtä»¤çä¸­å·²ç»åæ¬äºç¨æ·ç¸å³çä¿¡æ¯ï¼å®¢æ·ç«¯åªéè¦æºå¸¦jwtè®¿é®èµæºæå¡ï¼èµæºæå¡æ ¹æ®äºåçº¦å®çç®æ³èªè¡å®æä»¤çæ ¡éªï¼æ éæ¯æ¬¡é½è¯·æ±è®¤è¯æå¡å®æææã\n\n\n# ä»ä¹æ¯jwtï¼\n\njson web tokenï¼jwtï¼æ¯ä¸ä¸ªå¼æ¾çè¡ä¸æ åï¼rfc 7519ï¼ï¼å®å®ä¹äºä¸ç§ç®ä»çãèªåå«çåè®®æ ¼å¼ï¼ç¨äºå¨éä¿¡åæ¹ä¼ éjsonå¯¹è±¡ï¼ä¼ éçä¿¡æ¯ç»è¿æ°å­ç­¾åå¯ä»¥è¢«éªè¯åä¿¡ä»»ãjwtå¯ä»¥ä½¿ç¨hmacç®æ³æä½¿ç¨rsaçå¬é¥/ç§é¥å¯¹æ¥ç­¾åï¼é²æ­¢è¢«ç¯¡æ¹ã\n\nå®ç½ï¼https://jwt.io/\n\næ åï¼https://tools.ietf.org/html/rfc7519\n\njwtä»¤ççä¼ç¹ï¼\n\n * 1ï¼jwtåºäºjsonï¼éå¸¸æ¹ä¾¿è§£æã\n * 2ï¼å¯ä»¥å¨ä»¤çä¸­èªå®ä¹ä¸°å¯çåå®¹ï¼ææ©å±ã\n * 3ï¼éè¿éå¯¹ç§°å å¯ç®æ³åæ°å­ç­¾åææ¯ï¼jwté²æ­¢ç¯¡æ¹ï¼å®å¨æ§é«ã\n * 4ï¼èµæºæå¡ä½¿ç¨jwtå¯ä¸ä¾èµè®¤è¯æå¡å³å¯å®æææã\n\nç¼ºç¹ï¼\n\n * 1ï¼jwtä»¤çè¾é¿ï¼å å­å¨ç©ºé´æ¯è¾å¤§ã\n\n\n# jwtä»¤çç»æ\n\néè¿å­¦ä¹ jwtä»¤çç»æä¸ºèªå®ä¹jwtä»¤çæå¥½åºç¡ã\n\njwtä»¤çç±ä¸é¨åç»æï¼æ¯é¨åä¸­é´ä½¿ç¨ç¹ï¼.ï¼åéï¼æ¯å¦ï¼xxxxx.yyyyy.zzzzz\n\n * header\n   \n   å¤´é¨åæ¬ä»¤ççç±»åï¼å³jwtï¼åä½¿ç¨çåå¸ç®æ³ï¼å¦hmac sha256ærsaï¼\n   \n   ä¸ä¸ªä¾å­å¦ä¸ï¼\n   \n   ä¸è¾¹æ¯headeré¨åçåå®¹\n\n{\n    "alg": "hs256",\n    "typ": "jwt"\n}\n\n\nå°ä¸è¾¹çåå®¹ä½¿ç¨base64urlç¼ç ï¼å¾å°ä¸ä¸ªå­ç¬¦ä¸²å°±æ¯jwtä»¤ççç¬¬ä¸é¨åã\n\n * payload\n\nç¬¬äºé¨åæ¯è´è½½ï¼åå®¹ä¹æ¯ä¸ä¸ªjsonå¯¹è±¡ï¼å®æ¯å­æ¾ææä¿¡æ¯çå°æ¹ï¼å®å¯ä»¥å­æ¾jwtæä¾çç°æå­æ®µï¼æ¯å¦ï¼issï¼ç­¾åèï¼,expï¼è¿ææ¶é´æ³ï¼, subï¼é¢åçç¨æ·ï¼ç­ï¼ä¹å¯èªå®ä¹å­æ®µãæ­¤é¨åä¸å»ºè®®å­æ¾ææä¿¡æ¯ï¼å ä¸ºæ­¤é¨åå¯ä»¥è§£ç è¿ååå§åå®¹ã\n\næåå°ç¬¬äºé¨åè´è½½ä½¿ç¨base64urlç¼ç ï¼å¾å°ä¸ä¸ªå­ç¬¦ä¸²å°±æ¯jwtä»¤ççç¬¬äºé¨åã\n\nä¸ä¸ªä¾å­ï¼\n\n{\n    "sub": "1234567890",\n    "name": "456",\n    "admin": true\n}\n\n\n * signature\n\nç¬¬ä¸é¨åæ¯ç­¾åï¼æ­¤é¨åç¨äºé²æ­¢jwtåå®¹è¢«ç¯¡æ¹ã\n\nè¿ä¸ªé¨åä½¿ç¨base64urlå°åä¸¤é¨åè¿è¡ç¼ç ï¼ç¼ç åä½¿ç¨ç¹ï¼.ï¼è¿æ¥ç»æå­ç¬¦ä¸²ï¼æåä½¿ç¨headerä¸­å£°æç­¾åç®æ³è¿è¡ç­¾åã\n\nä¸ä¸ªä¾å­ï¼\n\nhmacsha256(\nbase64urlencode(header) + "." +\nbase64urlencode(payload),\nsecret)\n\n\n * base64urlencode(header)ï¼jwtä»¤ççç¬¬ä¸é¨åã\n * base64urlencode(payload)ï¼jwtä»¤ççç¬¬äºé¨åã\n * secretï¼ç­¾åæä½¿ç¨çå¯é¥ã\n\n\n# éç½®jwtä»¤çæå¡\n\nå¨simplify-authä¸­éç½®jwtä»¤çæå¡ï¼å³å¯å®ç°çæjwtæ ¼å¼çä»¤çã\n\n1ãtokenconfig\n\n@configuration\npublic class tokenconfig {\n    private string signing_key = "simplify_key";\n\n    @bean\n    public tokenstore tokenstore() {\n        return new jwttokenstore(accesstokenconverter());\n    } \n    \n    @bean\n    public jwtaccesstokenconverter accesstokenconverter() {\n        jwtaccesstokenconverter converter = new jwtaccesstokenconverter();\n        converter.setsigningkey(signing_key); //å¯¹ç§°ç§é¥ï¼èµæºæå¡å¨ä½¿ç¨è¯¥ç§é¥æ¥éªè¯\n        return converter;\n    }\n}\n\n\n2ãå®ä¹jwtä»¤çæå¡\n\n@autowired\nprivate jwtaccesstokenconverter accesstokenconverter;\n    @bean\n    public authorizationservertokenservices tokenservice() {\n        defaulttokenservices service=new defaulttokenservices();\n        service.setclientdetailsservice(clientdetailsservice);\n        service.setsupportrefreshtoken(true);\n        service.settokenstore(tokenstore);\n        tokenenhancerchain tokenenhancerchain = new tokenenhancerchain();\n        tokenenhancerchain.settokenenhancers(arrays.aslist(accesstokenconverter));\n        service.settokenenhancer(tokenenhancerchain);\n        //ä»¤çé»è®¤æææ2å°æ¶\n        service.setaccesstokenvalidityseconds(7200);\n        //å·æ°ä»¤çé»è®¤æææ3å¤©\n        service.setrefreshtokenvalidityseconds(259200); \n        return service;\n    }\n}\n\n\n\n# çæjwtä»¤ç\n\ntodo\n\n\n\n# æ ¡éªjwtä»¤ç\n\nèµæºæå¡éè¦åæææå¡æ¥æä¸è´çç­¾å­ãä»¤çæå¡ç­ï¼\n\n1ãå°æææå¡ä¸­çtokenconfigç±»æ·è´å°èµæº æå¡ä¸­\n\n2ãå±è½èµæº æå¡åæ¥çä»¤çæå¡ç±»\n\ntodo\n\n\n3ãæµè¯\n\n1ï¼ç³è¯·jwtä»¤ç\n\n2ï¼ä½¿ç¨ä»¤çè¯·æ±èµæº',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"èµæºæå¡å¨éç½®",frontmatter:{title:"èµæºæå¡å¨éç½®",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/3414a7/"},regularPath:"/19.Spring%20Security%20OAuth2/04.%E5%88%9B%E5%BB%BA%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8/01.%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE.html",relativePath:"19.Spring Security OAuth2/04.åå»ºèµæºæå¡å¨/01.èµæºæå¡å¨éç½®.md",key:"v-c4de77d8",path:"/pages/3414a7/",headers:[{level:2,title:"pom.xml",slug:"pom-xml",normalizedTitle:"pom.xml",charIndex:14},{level:2,title:"èµæºæå¡å¨éç½®",slug:"èµæºæå¡å¨éç½®-2",normalizedTitle:"èµæºæå¡å¨éç½®",charIndex:2},{level:2,title:"éªè¯token",slug:"éªè¯token",normalizedTitle:"éªè¯token",charIndex:5679},{level:2,title:"ç¼åèµæº",slug:"ç¼åèµæº",normalizedTitle:"ç¼åèµæº",charIndex:7034},{level:2,title:"æ·»å å®å¨è®¿é®æ§å¶",slug:"æ·»å å®å¨è®¿é®æ§å¶",normalizedTitle:"æ·»å å®å¨è®¿é®æ§å¶",charIndex:7278},{level:2,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:7848}],headersStr:"pom.xml èµæºæå¡å¨éç½® éªè¯token ç¼åèµæº æ·»å å®å¨è®¿é®æ§å¶ æµè¯",content:'# èµæºæå¡å¨éç½®\n\n\n# pom.xml\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <parent>\n        <artifactId>simplify-upms</artifactId>\n        <groupId>com.ieooc</groupId>\n        <version>1.0.0-SNAPSHOT</version>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <artifactId>simplify-upms-biz</artifactId>\n    <packaging>jar</packaging>\n    <description>simplify éç¨ç¨æ·æéç®¡çç³»ç»ä¸å¡å¤çæ¨¡å</description>\n\n    <dependencies>\n        \x3c!--upms apiãmodel æ¨¡å--\x3e\n        <dependency>\n            <groupId>com.ieooc</groupId>\n            <artifactId>simplify-upms-api</artifactId>\n        </dependency>\n        \x3c!--Swagger æ¥å£ææ¡£--\x3e\n        <dependency>\n            <groupId>com.ieooc</groupId>\n            <artifactId>simplify-common-swagger</artifactId>\n        </dependency>\n        \x3c!--æ°æ®æä½ç¸å³--\x3e\n        <dependency>\n            <groupId>com.ieooc</groupId>\n            <artifactId>simplify-common-data</artifactId>\n        </dependency>\n        \x3c!--å®å¨å·¥å·ç±»--\x3e\n        <dependency>\n            <groupId>com.ieooc</groupId>\n            <artifactId>simplify-common-security</artifactId>\n        </dependency>\n        \x3c!--æ³¨åä¸­å¿å®¢æ·ç«¯--\x3e\n        <dependency>\n            <groupId>com.alibaba.cloud</groupId>\n            <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n        </dependency>\n        \x3c!--éç½®ä¸­å¿å®¢æ·ç«¯--\x3e\n        <dependency>\n            <groupId>com.alibaba.cloud</groupId>\n            <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n        </dependency>\n        \x3c!--web æ¨¡å--\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        \x3c!--undertowå®¹å¨--\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-undertow</artifactId>\n        </dependency>\n        \x3c!-- TODO ä¸´æ¶è§£å³é®é¢ï¼https://blog.csdn.net/qq_24585103/article/details/103126411 --\x3e\n        <dependency>\n            <groupId>org.springframework.cloud</groupId>\n            <artifactId>spring-cloud-starter-netflix-hystrix</artifactId>\n        </dependency>\n        \x3c!--mybatis-plusä»£ç çæå¨--\x3e\n        <dependency>\n            <groupId>com.baomidou</groupId>\n            <artifactId>mybatis-plus-generator</artifactId>\n        </dependency>\n        \x3c!--freemarkerè¿éåªç¨ä½ä»£ç çæ--\x3e\n        <dependency>\n            <groupId>org.freemarker</groupId>\n            <artifactId>freemarker</artifactId>\n        </dependency>\n        \x3c!--druidæ°æ®åºè¿æ¥æ± åçæ§--\x3e\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>druid-spring-boot-starter</artifactId>\n        </dependency>\n        \x3c!--mysql é©±å¨--\x3e\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <scope>runtime</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n\n\n# èµæºæå¡å¨éç½®\n\n@EnableResourceServer æ³¨è§£å°ä¸ä¸ª @Configuration éç½®ç±»ä¸ï¼å¹¶ä¸å¿é¡»ä½¿ç¨ ResourceServerConfigurer è¿ä¸ªéç½®å¯¹è±¡æ¥è¿è¡éç½®ï¼å¯ä»¥éæ©ç»§æ¿èª ResourceServerConfigurerAdapter ç¶åè¦åå¶ä¸­çæ¹æ³ï¼åæ°å°±æ¯è¿ä¸ªå¯¹è±¡çå®ä¾ï¼ï¼ä¸é¢æ¯ä¸äºå¯ä»¥éç½®çå±æ§ï¼\n\nResourceServerSecurityConfigurerä¸­ä¸»è¦åæ¬ï¼\n\n * tokenServicesï¼ResourceServerTokenServices ç±»çå®ä¾ï¼ç¨æ¥å®ç°ä»¤çæå¡ã\n * tokenStoreï¼TokenStoreç±»çå®ä¾ï¼æå®ä»¤çå¦ä½è®¿é®ï¼ä¸tokenServiceséç½®å¯é\n * resourceIdï¼è¿ä¸ªèµæºæå¡çIDï¼è¿ä¸ªå±æ§æ¯å¯éçï¼ä½æ¯æ¨èè®¾ç½®å¹¶å¨æææå¡ä¸­è¿è¡éªè¯ã\n\nå¶ä»çæå±å±æ§ä¾å¦ tokenExtractor ä»¤çæåå¨ç¨æ¥æåè¯·æ±ä¸­çä»¤çã\n\nHttpSecurityéç½®è¿ä¸ªä¸Spring Securityç±»ä¼¼ï¼\n\n * è¯·æ±å¹éå¨ï¼ç¨æ¥è®¾ç½®éè¦è¿è¡ä¿æ¤çèµæºè·¯å¾ï¼é»è®¤çæåµä¸æ¯ä¿æ¤èµæºæå¡çå¨é¨è·¯å¾ã\n * éè¿http.authorizeRequests()æ¥è®¾ç½®åä¿æ¤èµæºçè®¿é®è§å\n * å¶ä»çèªå®ä¹æéä¿æ¤è§åéè¿ HttpSecurity æ¥è¿è¡éç½®ã\n\n@EnableResourceServer æ³¨è§£èªå¨å¢å äºä¸ä¸ªç±»åä¸º OAuth2AuthenticationProcessingFilter çè¿æ»¤å¨é¾ç¼åResouceServerConfigï¼\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableResourceServer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.ResourceServerSecurityConfigurer;\nimport org.springframework.security.oauth2.provider.token.RemoteTokenServices;\nimport org.springframework.security.oauth2.provider.token.ResourceServerTokenServices;\n\n@Configuration\n@EnableResourceServer\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class ResouceServerConfig extends ResourceServerConfigurerAdapter {\n    public static final String RESOURCE_ID = "res1";\n\n    @Override\n    public void configure(ResourceServerSecurityConfigurer resources) {\n            resources.resourceId(RESOURCE_ID)\n                .tokenServices(tokenService())\n                .stateless(true);\n    } \n    \n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n            http\n                .authorizeRequests()\n                .antMatchers("/**").access("#oauth2.hasScope(\'all\')")\n                .and().csrf().disable()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    }\n}\n\n\n\n# éªè¯token\n\nResourceServerTokenServices æ¯ç»ææææå¡çå¦ä¸åï¼å¦æä½ çæææå¡åèµæºæå¡å¨åä¸ä¸ªåºç¨ç¨åºä¸çè¯ï¼ä½ å¯ä»¥ä½¿ç¨ DefaultTokenServices ï¼è¿æ ·çè¯ï¼ä½ å°±ä¸ç¨èèå³äºå®ç°ææå¿è¦çæ¥å£çä¸è´æ§é®é¢ãå¦æä½ çèµæºæå¡å¨æ¯åç¦»å¼çï¼é£ä¹ä½ å°±å¿é¡»è¦ç¡®ä¿è½å¤æå¹éæææå¡æä¾ç ResourceServerTokenServicesï¼å®ç¥éå¦ä½å¯¹ä»¤çè¿è¡è§£ç ã\n\nä»¤çè§£ææ¹æ³ï¼ ä½¿ç¨ DefaultTokenServices å¨èµæºæå¡å¨æ¬å°éç½®ä»¤çå­å¨ãè§£ç ãè§£ææ¹å¼ ä½¿ç¨RemoteTokenServices èµæºæå¡å¨éè¿ HTTP è¯·æ±æ¥è§£ç ä»¤çï¼æ¯æ¬¡é½è¯·æ±æææå¡å¨ç«¯ç¹ /oauth/check_token\n\nä½¿ç¨æææå¡ç /oauth/check_token ç«¯ç¹ä½ éè¦å¨æææå¡å°è¿ä¸ªç«¯ç¹æ´é²åºå»ï¼ä»¥ä¾¿èµæºæå¡å¯ä»¥è¿è¡è®¿é®ï¼è¿å¨å±ä»¬æææå¡éç½®ä¸­å·²ç»æå°äºï¼ä¸é¢æ¯ä¸ä¸ªä¾å­,å¨è¿ä¸ªä¾å­ä¸­ï¼æä»¬å¨æææå¡ä¸­éç½®äº/oauth/check_token å /oauth/token_key è¿ä¸¤ä¸ªç«¯ç¹ï¼\n\n@Override\npublic void configure(AuthorizationServerSecurityConfigurer security) throws Exception {\n        security\n        .tokenKeyAccess("permitAll()")// /oauth/token_key å®å¨éç½®\n        .checkTokenAccess("permitAll()") // /oauth/check_token å®å¨éç½®\n}\n\n\nå¨èµæº æå¡éç½®RemoteTokenServices ï¼å¨ResouceServerConfigä¸­éç½®ï¼\n\n//èµæºæå¡ä»¤çè§£ææå¡\n@Bean\npublic ResourceServerTokenServices tokenService() {\n    //ä½¿ç¨è¿ç¨æå¡è¯·æ±æææå¡å¨æ ¡éªtoken,å¿é¡»æå®æ ¡éªtoken çurlãclient_idï¼client_secret\n    RemoteTokenServices service=new RemoteTokenServices();\n    service.setCheckTokenEndpointUrl("http://localhost:53020/uaa/oauth/check_token");\n    service.setClientId("c1");\n    service.setClientSecret("secret");\n    return service;\n} \n\n@Override\npublic void configure(ResourceServerSecurityConfigurer resources) {\n    resources.resourceId(RESOURCE_ID)\n    .tokenServices(tokenService())\n    .stateless(true);\n}\n\n\n\n# ç¼åèµæº\n\nå¨controlleråä¸ç¼åOrderControllerï¼æ­¤controllerè¡¨ç¤ºè®¢åèµæºçè®¿é®ç±»ï¼\n\n@RestController\npublic class OrderController {\n\n    @GetMapping(value = "/r1")\n    @PreAuthorize("hasAnyAuthority(\'p1\')")\n    public String r1(){\n        return "è®¿é®èµæº1";\n    }\n}\n\n\n\n# æ·»å å®å¨è®¿é®æ§å¶\n\n@Configuration\n@EnableGlobalMethodSecurity(securedEnabled = true,prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    //å®å¨æ¦æªæºå¶ï¼æéè¦ï¼\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n        .authorizeRequests()\n        // .antMatchers("/r/r1").hasAuthority("p2")\n        // .antMatchers("/r/r2").hasAuthority("p2")\n        .antMatchers("/r/**").authenticated()//ææ/r/**çè¯·æ±å¿é¡»è®¤è¯éè¿\n        .anyRequest().permitAll()//é¤äº/r/**ï¼å¶å®çè¯·æ±å¯ä»¥è®¿é®\n        ;\n    }\n}\n\n\n\n# æµè¯\n\n1ãç³è¯·ä»¤ç\n\néç¨å¯ç æ¨¡å¼ï¼ä½¿ç¨Postmanè¯·æ±æææå¡å¨ã\n\n\n\n{\n    "access_token": "273b7f10-3b4d-495e-9b15-b5bc801ff265",\n    "token_type": "bearer",\n    "refresh_token": "6c9c8d31-cd8b-41e5-8199-6fbd0a08ae31",\n    "expires_in": 41353,\n    "scope": "server"\n}\n\n\n2ãè¯·æ±èµæº\n\næç§oauth2.0åè®®è¦æ±ï¼è¯·æ±èµæºéè¦æºå¸¦tokenï¼å¦ä¸ï¼ tokençåæ°åç§°ä¸ºï¼Authorizationï¼å¼ä¸ºï¼Bearer tokenå¼\n\n\n\n{\n    "success": true,\n    "code": 200,\n    "message": "æä½æå",\n    "data": {\n        "userId": 1,\n        "username": "admin",\n        "password": "{bcrypt}$2a$10$IVzj1Wd.ZQdOIWdb1htQjexU94uoNeuk1crlQ9ExVupPi0Iy1uv.C",\n        "createTime": "2020-09-28T07:15:18",\n        "updateTime": "2020-11-05T19:29:05"\n    }\n}\n\n\nå¦ætokenéè¯¯ï¼åææå¤±è´¥ï¼å¦ä¸ï¼\n\n{\n    "error": "unauthorized",\n    "error_description": "Full authentication is required to access this resource"\n}\n',normalizedContent:'# èµæºæå¡å¨éç½®\n\n\n# pom.xml\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <parent>\n        <artifactid>simplify-upms</artifactid>\n        <groupid>com.ieooc</groupid>\n        <version>1.0.0-snapshot</version>\n    </parent>\n    <modelversion>4.0.0</modelversion>\n\n    <artifactid>simplify-upms-biz</artifactid>\n    <packaging>jar</packaging>\n    <description>simplify éç¨ç¨æ·æéç®¡çç³»ç»ä¸å¡å¤çæ¨¡å</description>\n\n    <dependencies>\n        \x3c!--upms apiãmodel æ¨¡å--\x3e\n        <dependency>\n            <groupid>com.ieooc</groupid>\n            <artifactid>simplify-upms-api</artifactid>\n        </dependency>\n        \x3c!--swagger æ¥å£ææ¡£--\x3e\n        <dependency>\n            <groupid>com.ieooc</groupid>\n            <artifactid>simplify-common-swagger</artifactid>\n        </dependency>\n        \x3c!--æ°æ®æä½ç¸å³--\x3e\n        <dependency>\n            <groupid>com.ieooc</groupid>\n            <artifactid>simplify-common-data</artifactid>\n        </dependency>\n        \x3c!--å®å¨å·¥å·ç±»--\x3e\n        <dependency>\n            <groupid>com.ieooc</groupid>\n            <artifactid>simplify-common-security</artifactid>\n        </dependency>\n        \x3c!--æ³¨åä¸­å¿å®¢æ·ç«¯--\x3e\n        <dependency>\n            <groupid>com.alibaba.cloud</groupid>\n            <artifactid>spring-cloud-starter-alibaba-nacos-discovery</artifactid>\n        </dependency>\n        \x3c!--éç½®ä¸­å¿å®¢æ·ç«¯--\x3e\n        <dependency>\n            <groupid>com.alibaba.cloud</groupid>\n            <artifactid>spring-cloud-starter-alibaba-nacos-config</artifactid>\n        </dependency>\n        \x3c!--web æ¨¡å--\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-web</artifactid>\n        </dependency>\n        \x3c!--undertowå®¹å¨--\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-undertow</artifactid>\n        </dependency>\n        \x3c!-- todo ä¸´æ¶è§£å³é®é¢ï¼https://blog.csdn.net/qq_24585103/article/details/103126411 --\x3e\n        <dependency>\n            <groupid>org.springframework.cloud</groupid>\n            <artifactid>spring-cloud-starter-netflix-hystrix</artifactid>\n        </dependency>\n        \x3c!--mybatis-plusä»£ç çæå¨--\x3e\n        <dependency>\n            <groupid>com.baomidou</groupid>\n            <artifactid>mybatis-plus-generator</artifactid>\n        </dependency>\n        \x3c!--freemarkerè¿éåªç¨ä½ä»£ç çæ--\x3e\n        <dependency>\n            <groupid>org.freemarker</groupid>\n            <artifactid>freemarker</artifactid>\n        </dependency>\n        \x3c!--druidæ°æ®åºè¿æ¥æ± åçæ§--\x3e\n        <dependency>\n            <groupid>com.alibaba</groupid>\n            <artifactid>druid-spring-boot-starter</artifactid>\n        </dependency>\n        \x3c!--mysql é©±å¨--\x3e\n        <dependency>\n            <groupid>mysql</groupid>\n            <artifactid>mysql-connector-java</artifactid>\n            <scope>runtime</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-maven-plugin</artifactid>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n\n\n# èµæºæå¡å¨éç½®\n\n@enableresourceserver æ³¨è§£å°ä¸ä¸ª @configuration éç½®ç±»ä¸ï¼å¹¶ä¸å¿é¡»ä½¿ç¨ resourceserverconfigurer è¿ä¸ªéç½®å¯¹è±¡æ¥è¿è¡éç½®ï¼å¯ä»¥éæ©ç»§æ¿èª resourceserverconfigureradapter ç¶åè¦åå¶ä¸­çæ¹æ³ï¼åæ°å°±æ¯è¿ä¸ªå¯¹è±¡çå®ä¾ï¼ï¼ä¸é¢æ¯ä¸äºå¯ä»¥éç½®çå±æ§ï¼\n\nresourceserversecurityconfigurerä¸­ä¸»è¦åæ¬ï¼\n\n * tokenservicesï¼resourceservertokenservices ç±»çå®ä¾ï¼ç¨æ¥å®ç°ä»¤çæå¡ã\n * tokenstoreï¼tokenstoreç±»çå®ä¾ï¼æå®ä»¤çå¦ä½è®¿é®ï¼ä¸tokenserviceséç½®å¯é\n * resourceidï¼è¿ä¸ªèµæºæå¡çidï¼è¿ä¸ªå±æ§æ¯å¯éçï¼ä½æ¯æ¨èè®¾ç½®å¹¶å¨æææå¡ä¸­è¿è¡éªè¯ã\n\nå¶ä»çæå±å±æ§ä¾å¦ tokenextractor ä»¤çæåå¨ç¨æ¥æåè¯·æ±ä¸­çä»¤çã\n\nhttpsecurityéç½®è¿ä¸ªä¸spring securityç±»ä¼¼ï¼\n\n * è¯·æ±å¹éå¨ï¼ç¨æ¥è®¾ç½®éè¦è¿è¡ä¿æ¤çèµæºè·¯å¾ï¼é»è®¤çæåµä¸æ¯ä¿æ¤èµæºæå¡çå¨é¨è·¯å¾ã\n * éè¿http.authorizerequests()æ¥è®¾ç½®åä¿æ¤èµæºçè®¿é®è§å\n * å¶ä»çèªå®ä¹æéä¿æ¤è§åéè¿ httpsecurity æ¥è¿è¡éç½®ã\n\n@enableresourceserver æ³¨è§£èªå¨å¢å äºä¸ä¸ªç±»åä¸º oauth2authenticationprocessingfilter çè¿æ»¤å¨é¾ç¼åresouceserverconfigï¼\n\nimport org.springframework.context.annotation.bean;\nimport org.springframework.context.annotation.configuration;\nimport org.springframework.security.config.annotation.method.configuration.enableglobalmethodsecurity;\nimport org.springframework.security.config.annotation.web.builders.httpsecurity;\nimport org.springframework.security.config.http.sessioncreationpolicy;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.enableresourceserver;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.resourceserverconfigureradapter;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.resourceserversecurityconfigurer;\nimport org.springframework.security.oauth2.provider.token.remotetokenservices;\nimport org.springframework.security.oauth2.provider.token.resourceservertokenservices;\n\n@configuration\n@enableresourceserver\n@enableglobalmethodsecurity(prepostenabled = true)\npublic class resouceserverconfig extends resourceserverconfigureradapter {\n    public static final string resource_id = "res1";\n\n    @override\n    public void configure(resourceserversecurityconfigurer resources) {\n            resources.resourceid(resource_id)\n                .tokenservices(tokenservice())\n                .stateless(true);\n    } \n    \n    @override\n    public void configure(httpsecurity http) throws exception {\n            http\n                .authorizerequests()\n                .antmatchers("/**").access("#oauth2.hasscope(\'all\')")\n                .and().csrf().disable()\n                .sessionmanagement().sessioncreationpolicy(sessioncreationpolicy.stateless);\n    }\n}\n\n\n\n# éªè¯token\n\nresourceservertokenservices æ¯ç»ææææå¡çå¦ä¸åï¼å¦æä½ çæææå¡åèµæºæå¡å¨åä¸ä¸ªåºç¨ç¨åºä¸çè¯ï¼ä½ å¯ä»¥ä½¿ç¨ defaulttokenservices ï¼è¿æ ·çè¯ï¼ä½ å°±ä¸ç¨èèå³äºå®ç°ææå¿è¦çæ¥å£çä¸è´æ§é®é¢ãå¦æä½ çèµæºæå¡å¨æ¯åç¦»å¼çï¼é£ä¹ä½ å°±å¿é¡»è¦ç¡®ä¿è½å¤æå¹éæææå¡æä¾ç resourceservertokenservicesï¼å®ç¥éå¦ä½å¯¹ä»¤çè¿è¡è§£ç ã\n\nä»¤çè§£ææ¹æ³ï¼ ä½¿ç¨ defaulttokenservices å¨èµæºæå¡å¨æ¬å°éç½®ä»¤çå­å¨ãè§£ç ãè§£ææ¹å¼ ä½¿ç¨remotetokenservices èµæºæå¡å¨éè¿ http è¯·æ±æ¥è§£ç ä»¤çï¼æ¯æ¬¡é½è¯·æ±æææå¡å¨ç«¯ç¹ /oauth/check_token\n\nä½¿ç¨æææå¡ç /oauth/check_token ç«¯ç¹ä½ éè¦å¨æææå¡å°è¿ä¸ªç«¯ç¹æ´é²åºå»ï¼ä»¥ä¾¿èµæºæå¡å¯ä»¥è¿è¡è®¿é®ï¼è¿å¨å±ä»¬æææå¡éç½®ä¸­å·²ç»æå°äºï¼ä¸é¢æ¯ä¸ä¸ªä¾å­,å¨è¿ä¸ªä¾å­ä¸­ï¼æä»¬å¨æææå¡ä¸­éç½®äº/oauth/check_token å /oauth/token_key è¿ä¸¤ä¸ªç«¯ç¹ï¼\n\n@override\npublic void configure(authorizationserversecurityconfigurer security) throws exception {\n        security\n        .tokenkeyaccess("permitall()")// /oauth/token_key å®å¨éç½®\n        .checktokenaccess("permitall()") // /oauth/check_token å®å¨éç½®\n}\n\n\nå¨èµæº æå¡éç½®remotetokenservices ï¼å¨resouceserverconfigä¸­éç½®ï¼\n\n//èµæºæå¡ä»¤çè§£ææå¡\n@bean\npublic resourceservertokenservices tokenservice() {\n    //ä½¿ç¨è¿ç¨æå¡è¯·æ±æææå¡å¨æ ¡éªtoken,å¿é¡»æå®æ ¡éªtoken çurlãclient_idï¼client_secret\n    remotetokenservices service=new remotetokenservices();\n    service.setchecktokenendpointurl("http://localhost:53020/uaa/oauth/check_token");\n    service.setclientid("c1");\n    service.setclientsecret("secret");\n    return service;\n} \n\n@override\npublic void configure(resourceserversecurityconfigurer resources) {\n    resources.resourceid(resource_id)\n    .tokenservices(tokenservice())\n    .stateless(true);\n}\n\n\n\n# ç¼åèµæº\n\nå¨controlleråä¸ç¼åordercontrollerï¼æ­¤controllerè¡¨ç¤ºè®¢åèµæºçè®¿é®ç±»ï¼\n\n@restcontroller\npublic class ordercontroller {\n\n    @getmapping(value = "/r1")\n    @preauthorize("hasanyauthority(\'p1\')")\n    public string r1(){\n        return "è®¿é®èµæº1";\n    }\n}\n\n\n\n# æ·»å å®å¨è®¿é®æ§å¶\n\n@configuration\n@enableglobalmethodsecurity(securedenabled = true,prepostenabled = true)\npublic class websecurityconfig extends websecurityconfigureradapter {\n    //å®å¨æ¦æªæºå¶ï¼æéè¦ï¼\n    @override\n    protected void configure(httpsecurity http) throws exception {\n        http.csrf().disable()\n        .authorizerequests()\n        // .antmatchers("/r/r1").hasauthority("p2")\n        // .antmatchers("/r/r2").hasauthority("p2")\n        .antmatchers("/r/**").authenticated()//ææ/r/**çè¯·æ±å¿é¡»è®¤è¯éè¿\n        .anyrequest().permitall()//é¤äº/r/**ï¼å¶å®çè¯·æ±å¯ä»¥è®¿é®\n        ;\n    }\n}\n\n\n\n# æµè¯\n\n1ãç³è¯·ä»¤ç\n\néç¨å¯ç æ¨¡å¼ï¼ä½¿ç¨postmanè¯·æ±æææå¡å¨ã\n\n\n\n{\n    "access_token": "273b7f10-3b4d-495e-9b15-b5bc801ff265",\n    "token_type": "bearer",\n    "refresh_token": "6c9c8d31-cd8b-41e5-8199-6fbd0a08ae31",\n    "expires_in": 41353,\n    "scope": "server"\n}\n\n\n2ãè¯·æ±èµæº\n\næç§oauth2.0åè®®è¦æ±ï¼è¯·æ±èµæºéè¦æºå¸¦tokenï¼å¦ä¸ï¼ tokençåæ°åç§°ä¸ºï¼authorizationï¼å¼ä¸ºï¼bearer tokenå¼\n\n\n\n{\n    "success": true,\n    "code": 200,\n    "message": "æä½æå",\n    "data": {\n        "userid": 1,\n        "username": "admin",\n        "password": "{bcrypt}$2a$10$ivzj1wd.zqdoiwdb1htqjexu94uoneuk1crlq9exvuppi0iy1uv.c",\n        "createtime": "2020-09-28t07:15:18",\n        "updatetime": "2020-11-05t19:29:05"\n    }\n}\n\n\nå¦ætokenéè¯¯ï¼åææå¤±è´¥ï¼å¦ä¸ï¼\n\n{\n    "error": "unauthorized",\n    "error_description": "full authentication is required to access this resource"\n}\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä»ä¹æ¯åå¸å¼ç³»ç»",frontmatter:{title:"ä»ä¹æ¯åå¸å¼ç³»ç»",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/d62ff2/"},regularPath:"/19.Spring%20Security%20OAuth2/05.%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88/01.%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F.html",relativePath:"19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/01.ä»ä¹æ¯åå¸å¼ç³»ç».md",key:"v-8851eab0",path:"/pages/d62ff2/",headersStr:null,content:"# ä»ä¹æ¯åå¸å¼ç³»ç»\n\néçè½¯ä»¶ç¯å¢åéæ±çååï¼è½¯ä»¶çæ¶æç±åä½ç»ææ¼åä¸ºåå¸å¼æ¶æï¼å·æåå¸å¼æ¶æçç³»ç»å«åå¸å¼ç³»ç»ï¼åå¸å¼ç³»ç»çè¿è¡éå¸¸ä¾èµç½ç»ï¼å®å°åä½ç»æçç³»ç»åä¸ºè¥å¹²æå¡ï¼æå¡ä¹é´éè¿ç½ç»äº¤äºæ¥å®æç¨æ·çä¸å¡å¤çï¼å½åæµè¡çå¾®æå¡æ¶æå°±æ¯åå¸å¼ç³»ç»æ¶æï¼å¦ä¸å¾ï¼\n\n\n\nåå¸å¼ç³»ç»å·ä½å¦ä¸åºæ¬ç¹ç¹:\n\n * åå¸æ§ï¼æ¯ä¸ªé¨åé½å¯ä»¥ç¬ç«é¨ç½²ï¼æå¡ä¹é´äº¤äºéè¿ç½ç»è¿è¡éä¿¡ï¼æ¯å¦:è®¢åæå¡ãååæå¡ã\n\n * ä¼¸ç¼©æ§ï¼æ¯ä¸ªé¨åé½å¯ä»¥éç¾¤æ¹å¼é¨ç½²ï¼å¹¶å¯éå¯¹é¨åç»ç¹è¿è¡ç¡¬ä»¶åè½¯ä»¶æ©å®¹ï¼å·æä¸å®çä¼¸ç¼©è½åã\n\n * å±äº«æ§ï¼æ¯ä¸ªé¨åé½å¯ä»¥ä½ä¸ºå±äº«èµæºå¯¹å¤æä¾æå¡ï¼å¤ä¸ªé¨åå¯è½ææä½å±äº«èµæºçæåµã\n\n * å¼æ¾æ§ï¼æ¯ä¸ªé¨åæ ¹æ®éæ±é½å¯ä»¥å¯¹å¤åå¸å±äº«èµæºçè®¿é®æ¥å£ï¼å¹¶å¯åè®¸ç¬¬ä¸æ¹ç³»ç»è®¿é®ã",normalizedContent:"# ä»ä¹æ¯åå¸å¼ç³»ç»\n\néçè½¯ä»¶ç¯å¢åéæ±çååï¼è½¯ä»¶çæ¶æç±åä½ç»ææ¼åä¸ºåå¸å¼æ¶æï¼å·æåå¸å¼æ¶æçç³»ç»å«åå¸å¼ç³»ç»ï¼åå¸å¼ç³»ç»çè¿è¡éå¸¸ä¾èµç½ç»ï¼å®å°åä½ç»æçç³»ç»åä¸ºè¥å¹²æå¡ï¼æå¡ä¹é´éè¿ç½ç»äº¤äºæ¥å®æç¨æ·çä¸å¡å¤çï¼å½åæµè¡çå¾®æå¡æ¶æå°±æ¯åå¸å¼ç³»ç»æ¶æï¼å¦ä¸å¾ï¼\n\n\n\nåå¸å¼ç³»ç»å·ä½å¦ä¸åºæ¬ç¹ç¹:\n\n * åå¸æ§ï¼æ¯ä¸ªé¨åé½å¯ä»¥ç¬ç«é¨ç½²ï¼æå¡ä¹é´äº¤äºéè¿ç½ç»è¿è¡éä¿¡ï¼æ¯å¦:è®¢åæå¡ãååæå¡ã\n\n * ä¼¸ç¼©æ§ï¼æ¯ä¸ªé¨åé½å¯ä»¥éç¾¤æ¹å¼é¨ç½²ï¼å¹¶å¯éå¯¹é¨åç»ç¹è¿è¡ç¡¬ä»¶åè½¯ä»¶æ©å®¹ï¼å·æä¸å®çä¼¸ç¼©è½åã\n\n * å±äº«æ§ï¼æ¯ä¸ªé¨åé½å¯ä»¥ä½ä¸ºå±äº«èµæºå¯¹å¤æä¾æå¡ï¼å¤ä¸ªé¨åå¯è½ææä½å±äº«èµæºçæåµã\n\n * å¼æ¾æ§ï¼æ¯ä¸ªé¨åæ ¹æ®éæ±é½å¯ä»¥å¯¹å¤åå¸å±äº«èµæºçè®¿é®æ¥å£ï¼å¹¶å¯åè®¸ç¬¬ä¸æ¹ç³»ç»è®¿é®ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"åå¸å¼è®¤è¯éæ±",frontmatter:{title:"åå¸å¼è®¤è¯éæ±",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/16b31e/"},regularPath:"/19.Spring%20Security%20OAuth2/05.%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88/02.%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A4%E8%AF%81%E9%9C%80%E6%B1%82.html",relativePath:"19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/02.åå¸å¼è®¤è¯éæ±.md",key:"v-f80986b8",path:"/pages/16b31e/",headers:[{level:2,title:"ç»ä¸è®¤è¯ææ",slug:"ç»ä¸è®¤è¯ææ",normalizedTitle:"ç»ä¸è®¤è¯ææ",charIndex:153},{level:2,title:"åºç¨æ¥å¥è®¤è¯",slug:"åºç¨æ¥å¥è®¤è¯",normalizedTitle:"åºç¨æ¥å¥è®¤è¯",charIndex:317}],headersStr:"ç»ä¸è®¤è¯ææ åºç¨æ¥å¥è®¤è¯",content:"# åå¸å¼è®¤è¯éæ±\n\nåå¸å¼ç³»ç»çæ¯ä¸ªæå¡é½ä¼æè®¤è¯ãææçéæ±ï¼å¦ææ¯ä¸ªæå¡é½å®ç°ä¸å¥è®¤è¯ææé»è¾ä¼éå¸¸åä½ï¼èèåå¸å¼ ç³»ç»å±äº«æ§çç¹ç¹ï¼éè¦ç±ç¬ç«çè®¤è¯æå¡å¤çç³»ç»è®¤è¯ææçè¯·æ±;èèåå¸å¼ç³»ç»å¼æ¾æ§çç¹ç¹ï¼ä¸ä»å¯¹ç³»ç» åé¨æå¡æä¾è®¤è¯ï¼å¯¹ç¬¬ä¸æ¹ç³»ç»ä¹è¦æä¾è®¤è¯ãåå¸å¼è®¤è¯çéæ±æ»ç»å¦ä¸:\n\n\n# ç»ä¸è®¤è¯ææ\n\næä¾ç¬ç«çè®¤è¯æå¡ï¼ç»ä¸å¤çè®¤è¯ææã\n\næ è®ºæ¯ä¸åç±»åçç¨æ·ï¼è¿æ¯ä¸åç§ç±»çå®¢æ·ç«¯(webç«¯ï¼H5ãAPP)ï¼åéç¨ä¸è´çè®¤è¯ãæéãä¼è¯æºå¶ï¼å®ç° ç»ä¸è®¤è¯ææã\n\nè¦å®ç°ç»ä¸åè®¤è¯æ¹å¼å¿é¡»å¯æ©å±ï¼æ¯æåç§è®¤è¯éæ±ï¼æ¯å¦:ç¨æ·åå¯ç è®¤è¯ãç­ä¿¡éªè¯ç ãäºç»´ç ãäººè¸è¯ç­è®¤è¯æ¹å¼ï¼å¹¶å¯ä»¥éå¸¸çµæ´»çåæ¢ã\n\n\n# åºç¨æ¥å¥è®¤è¯\n\nåºæä¾æ©å±åå¼æ¾è½åï¼æä¾å®å¨çç³»ç»å¯¹æ¥æºå¶ï¼å¹¶å¯å¼æ¾é¨åAPIç»æ¥å¥ç¬¬ä¸æ¹ä½¿ç¨ï¼ä¸æ¹åºç¨(åé¨ ç³»ç»æ å¡)åä¸æ¹åºç¨(ç¬¬ä¸æ¹åºç¨)åéç¨ç»ä¸æºå¶æ¥å¥ã",normalizedContent:"# åå¸å¼è®¤è¯éæ±\n\nåå¸å¼ç³»ç»çæ¯ä¸ªæå¡é½ä¼æè®¤è¯ãææçéæ±ï¼å¦ææ¯ä¸ªæå¡é½å®ç°ä¸å¥è®¤è¯ææé»è¾ä¼éå¸¸åä½ï¼èèåå¸å¼ ç³»ç»å±äº«æ§çç¹ç¹ï¼éè¦ç±ç¬ç«çè®¤è¯æå¡å¤çç³»ç»è®¤è¯ææçè¯·æ±;èèåå¸å¼ç³»ç»å¼æ¾æ§çç¹ç¹ï¼ä¸ä»å¯¹ç³»ç» åé¨æå¡æä¾è®¤è¯ï¼å¯¹ç¬¬ä¸æ¹ç³»ç»ä¹è¦æä¾è®¤è¯ãåå¸å¼è®¤è¯çéæ±æ»ç»å¦ä¸:\n\n\n# ç»ä¸è®¤è¯ææ\n\næä¾ç¬ç«çè®¤è¯æå¡ï¼ç»ä¸å¤çè®¤è¯ææã\n\næ è®ºæ¯ä¸åç±»åçç¨æ·ï¼è¿æ¯ä¸åç§ç±»çå®¢æ·ç«¯(webç«¯ï¼h5ãapp)ï¼åéç¨ä¸è´çè®¤è¯ãæéãä¼è¯æºå¶ï¼å®ç° ç»ä¸è®¤è¯ææã\n\nè¦å®ç°ç»ä¸åè®¤è¯æ¹å¼å¿é¡»å¯æ©å±ï¼æ¯æåç§è®¤è¯éæ±ï¼æ¯å¦:ç¨æ·åå¯ç è®¤è¯ãç­ä¿¡éªè¯ç ãäºç»´ç ãäººè¸è¯ç­è®¤è¯æ¹å¼ï¼å¹¶å¯ä»¥éå¸¸çµæ´»çåæ¢ã\n\n\n# åºç¨æ¥å¥è®¤è¯\n\nåºæä¾æ©å±åå¼æ¾è½åï¼æä¾å®å¨çç³»ç»å¯¹æ¥æºå¶ï¼å¹¶å¯å¼æ¾é¨åapiç»æ¥å¥ç¬¬ä¸æ¹ä½¿ç¨ï¼ä¸æ¹åºç¨(åé¨ ç³»ç»æ å¡)åä¸æ¹åºç¨(ç¬¬ä¸æ¹åºç¨)åéç¨ç»ä¸æºå¶æ¥å¥ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"åå¸å¼è®¤è¯æ¹æ¡",frontmatter:{title:"åå¸å¼è®¤è¯æ¹æ¡",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/d6bec0/"},regularPath:"/19.Spring%20Security%20OAuth2/05.%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88/03.%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88.html",relativePath:"19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/03.åå¸å¼è®¤è¯æ¹æ¡.md",key:"v-7afa71b5",path:"/pages/d6bec0/",headers:[{level:2,title:"åºäºsessionçè®¤è¯æ¹å¼",slug:"åºäºsessionçè®¤è¯æ¹å¼",normalizedTitle:"åºäºsessionçè®¤è¯æ¹å¼",charIndex:14},{level:2,title:"åºäºtokençè®¤è¯æ¹å¼",slug:"åºäºtokençè®¤è¯æ¹å¼",normalizedTitle:"åºäºtokençè®¤è¯æ¹å¼",charIndex:451}],headersStr:"åºäºsessionçè®¤è¯æ¹å¼ åºäºtokençè®¤è¯æ¹å¼",content:"# åå¸å¼è®¤è¯æ¹æ¡\n\n\n# åºäºsessionçè®¤è¯æ¹å¼\n\nå¨åå¸å¼çç¯å¢ä¸ï¼åºäºsessionçè®¤è¯ä¼åºç°ä¸ä¸ªé®é¢ï¼æ¯ä¸ªåºç¨æå¡é½éè¦å¨sessionä¸­å­å¨ç¨æ·èº«ä»½ä¿¡æ¯ï¼é è¿è´è½½åè¡¡å°æ¬å°çè¯·æ±åéå°å¦ä¸ä¸ªåºç¨æå¡éè¦å°sessionä¿¡æ¯å¸¦è¿å»ï¼å¦åä¼éæ°è®¤è¯ã\n\n\n\nè¿ä¸ªæ¶åï¼éå¸¸çåæ³æä¸é¢å ç§:\n\n * Sessionå¤å¶ï¼å¤å°åºç¨æå¡å¨ä¹é´åæ­¥sessionï¼ä½¿sessionä¿æä¸è´ï¼å¯¹å¤éæã\n * Sessioné»è´´ï¼å½ç¨æ·è®¿é®éç¾¤ä¸­æå°æå¡å¨åï¼å¼ºå¶æå®åç»­ææè¯·æ±åè½å°æ­¤æºå¨ä¸ã\n * Sessionéä¸­å­å¨ï¼å°Sessionå­å¥åå¸å¼ç¼å­ä¸­ï¼æææå¡å¨åºç¨å®ä¾ç»ä¸ä»åå¸å¼ç¼å­ä¸­å­åSessionã\n\næ»ä½æ¥è®²ï¼åºäºsessionè®¤è¯çè®¤è¯æ¹å¼ï¼å¯ä»¥æ´å¥½çå¨æå¡ç«¯å¯¹ä¼è¯è¿è¡æ§å¶ï¼ä¸å®å¨æ§è¾é«ãä½æ¯ï¼sessionæº å¶æ¹å¼åºäºcookieï¼å¨å¤æå¤æ ·çç§»å¨å®¢æ·ç«¯ä¸ä¸è½ææçä½¿ç¨ï¼å¹¶ä¸æ æ³è·¨åï¼å¦å¤éçç³»ç»çæ©å±éæé« sessionçå¤å¶ãé»è´´åå­å¨çå®¹éæ§ã\n\n\n# åºäºtokençè®¤è¯æ¹å¼\n\nåºäºtokençè®¤è¯æ¹å¼ï¼æå¡ç«¯ä¸ç¨å­å¨è®¤è¯æ°æ®ï¼æç»´æ¤æ©å±æ§å¼ºï¼ å®¢æ·ç«¯å¯ä»¥ætoken å­å¨ä»»æå°æ¹ï¼å¹¶ä¸å¯ ä»¥å®ç°webåappç»ä¸è®¤è¯æºå¶ãå¶ç¼ºç¹ä¹å¾ææ¾ï¼tokenç±äºèªåå«ä¿¡æ¯ï¼å æ­¤ä¸è¬æ°æ®éè¾å¤§ï¼èä¸æ¯æ¬¡è¯·æ± é½éè¦ä¼ éï¼å æ­¤æ¯è¾å å¸¦å®½ãå¦å¤ï¼tokençç­¾åéªç­¾æä½ä¹ä¼ç»cpuå¸¦æ¥é¢å¤çå¤çè´æã\n\n",normalizedContent:"# åå¸å¼è®¤è¯æ¹æ¡\n\n\n# åºäºsessionçè®¤è¯æ¹å¼\n\nå¨åå¸å¼çç¯å¢ä¸ï¼åºäºsessionçè®¤è¯ä¼åºç°ä¸ä¸ªé®é¢ï¼æ¯ä¸ªåºç¨æå¡é½éè¦å¨sessionä¸­å­å¨ç¨æ·èº«ä»½ä¿¡æ¯ï¼é è¿è´è½½åè¡¡å°æ¬å°çè¯·æ±åéå°å¦ä¸ä¸ªåºç¨æå¡éè¦å°sessionä¿¡æ¯å¸¦è¿å»ï¼å¦åä¼éæ°è®¤è¯ã\n\n\n\nè¿ä¸ªæ¶åï¼éå¸¸çåæ³æä¸é¢å ç§:\n\n * sessionå¤å¶ï¼å¤å°åºç¨æå¡å¨ä¹é´åæ­¥sessionï¼ä½¿sessionä¿æä¸è´ï¼å¯¹å¤éæã\n * sessioné»è´´ï¼å½ç¨æ·è®¿é®éç¾¤ä¸­æå°æå¡å¨åï¼å¼ºå¶æå®åç»­ææè¯·æ±åè½å°æ­¤æºå¨ä¸ã\n * sessionéä¸­å­å¨ï¼å°sessionå­å¥åå¸å¼ç¼å­ä¸­ï¼æææå¡å¨åºç¨å®ä¾ç»ä¸ä»åå¸å¼ç¼å­ä¸­å­åsessionã\n\næ»ä½æ¥è®²ï¼åºäºsessionè®¤è¯çè®¤è¯æ¹å¼ï¼å¯ä»¥æ´å¥½çå¨æå¡ç«¯å¯¹ä¼è¯è¿è¡æ§å¶ï¼ä¸å®å¨æ§è¾é«ãä½æ¯ï¼sessionæº å¶æ¹å¼åºäºcookieï¼å¨å¤æå¤æ ·çç§»å¨å®¢æ·ç«¯ä¸ä¸è½ææçä½¿ç¨ï¼å¹¶ä¸æ æ³è·¨åï¼å¦å¤éçç³»ç»çæ©å±éæé« sessionçå¤å¶ãé»è´´åå­å¨çå®¹éæ§ã\n\n\n# åºäºtokençè®¤è¯æ¹å¼\n\nåºäºtokençè®¤è¯æ¹å¼ï¼æå¡ç«¯ä¸ç¨å­å¨è®¤è¯æ°æ®ï¼æç»´æ¤æ©å±æ§å¼ºï¼ å®¢æ·ç«¯å¯ä»¥ætoken å­å¨ä»»æå°æ¹ï¼å¹¶ä¸å¯ ä»¥å®ç°webåappç»ä¸è®¤è¯æºå¶ãå¶ç¼ºç¹ä¹å¾ææ¾ï¼tokenç±äºèªåå«ä¿¡æ¯ï¼å æ­¤ä¸è¬æ°æ®éè¾å¤§ï¼èä¸æ¯æ¬¡è¯·æ± é½éè¦ä¼ éï¼å æ­¤æ¯è¾å å¸¦å®½ãå¦å¤ï¼tokençç­¾åéªç­¾æä½ä¹ä¼ç»cpuå¸¦æ¥é¢å¤çå¤çè´æã\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"åå¸å¼è®¤è¯å®æ",frontmatter:{title:"åå¸å¼è®¤è¯å®æ",date:"2022-02-09T11:52:11.000Z",permalink:"/pages/7b210e/"},regularPath:"/19.Spring%20Security%20OAuth2/05.%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88/04.%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A4%E8%AF%81%E5%AE%9E%E6%88%98.html",relativePath:"19.Spring Security OAuth2/05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/04.åå¸å¼è®¤è¯å®æ.md",key:"v-bee7b4c4",path:"/pages/7b210e/",headers:[{level:2,title:"ææ¯æ¹æ¡",slug:"ææ¯æ¹æ¡",normalizedTitle:"ææ¯æ¹æ¡",charIndex:14},{level:2,title:"ç»ä¸è®¤è¯æå¡",slug:"ç»ä¸è®¤è¯æå¡",normalizedTitle:"ç»ä¸è®¤è¯æå¡",charIndex:245},{level:2,title:"APIç½å³",slug:"apiç½å³",normalizedTitle:"apiç½å³",charIndex:452}],headersStr:"ææ¯æ¹æ¡ ç»ä¸è®¤è¯æå¡ APIç½å³",content:"# åå¸å¼è®¤è¯å®æ\n\n\n# ææ¯æ¹æ¡\n\næ ¹æ®éåçåæï¼å³å®éç¨åºäºtokençè®¤è¯æ¹å¼ï¼å®çä¼ç¹æ¯:\n\n * éåç»ä¸è®¤è¯çæºå¶ï¼å®¢æ·ç«¯ãä¸æ¹åºç¨ãä¸æ¹åºç¨é½éµå¾ªä¸è´çè®¤è¯æºå¶ã\n\n * tokenè®¤è¯æ¹å¼å¯¹ç¬¬ä¸æ¹åºç¨æ¥å¥æ´éåï¼å ä¸ºå®æ´å¼æ¾ï¼å¯ä½¿ç¨å½åææµè¡çå¼æ¾åè®®Oauth2.0ãJWTç­ã\n\n * ä¸è¬æåµæå¡ç«¯æ éå­å¨ä¼è¯ä¿¡æ¯ï¼åè½»äºæå¡ç«¯çååã\n\nåå¸å¼ç³»ç»è®¤è¯ææ¯æ¹æ¡è§ä¸å¾:\n\n\n\næµç¨æè¿°:\n\n * (1)ç¨æ·éè¿æ¥å¥æ¹(åºç¨)ç»å½ï¼æ¥å¥æ¹éåOAuth2.0æ¹å¼å¨ç»ä¸è®¤è¯æå¡(simplify-auth)ä¸­è®¤è¯ã\n\n * (2)è®¤è¯æå¡(simplify-auth)è°ç¨éªè¯è¯¥ç¨æ·çèº«ä»½æ¯å¦åæ³ï¼å¹¶è·åç¨æ·æéä¿¡æ¯ã\n\n * (3)è®¤è¯æå¡(simplify-auth)è·åæ¥å¥æ¹æéä¿¡æ¯ï¼å¹¶éªè¯æ¥å¥æ¹æ¯å¦åæ³ã\n\n * (4)è¥ç»å½ç¨æ·ä»¥åæ¥å¥æ¹é½åæ³ï¼è®¤è¯æå¡çæjwtä»¤çè¿åç»æ¥å¥æ¹ï¼å¶ä¸­jwtä¸­åå«äºç¨æ·æéåæ¥å¥æ¹æéã\n\n * (5)åç»­ï¼æ¥å¥æ¹æºå¸¦jwtä»¤çå¯¹APIç½å³åçå¾®æå¡èµæºè¿è¡è®¿é®ã\n\n * (6)APIç½å³å¯¹ä»¤çè§£æãå¹¶éªè¯æ¥å¥æ¹çæéæ¯å¦è½å¤è®¿é®æ¬æ¬¡è¯·æ±çå¾®æå¡ã\n\n * (7)å¦ææ¥å¥æ¹çæéæ²¡é®é¢ï¼APIç½å³å°åè¯·æ±headerä¸­éå è§£æåçææTokenï¼å¹¶å°è¯·æ±è½¬åè³å¾®æå¡ã\n\n * (8)å¾®æå¡æ¶å°è¯·æ±ï¼æætokenä¸­åå«ç»å½ç¨æ·çèº«ä»½åæéä¿¡æ¯ãå æ­¤åç»­å¾®æå¡èªå·±å¯ä»¥å¹²ä¸¤ä»¶äº:\n   \n   * 1ãç¨æ·æææ¦æª(çå½åç¨æ·æ¯å¦ææè®¿é®è¯¥èµæº)\n   \n   * 2ãå°ç¨æ·ä¿¡æ¯å­å¨è¿å½åçº¿ç¨ä¸ä¸æ(æå©äºåç»­ä¸å¡é»è¾éæ¶è·åå½åç¨æ·ä¿¡æ¯)\n\næµç¨ææ¶åå°UAAæå¡ãAPIç½å³è¿ä¸ä¸ªç»ä»¶èè´£å¦ä¸:\n\n\n# ç»ä¸è®¤è¯æå¡\n\nå®æ¿è½½äºOAuth2.0æ¥å¥æ¹è®¤è¯ãç»å¥ç¨æ·çè®¤è¯ãææä»¥åçæä»¤ççèè´£ï¼å®æå®éçç¨æ·è®¤è¯ãææåè½ã\n\n\n# APIç½å³\n\nä½ä¸ºç³»ç»çå¯ä¸å¥å£ï¼APIç½å³ä¸ºæ¥å¥æ¹æä¾å®å¶çAPIéåï¼å®å¯è½è¿å·æå¶å®èè´£ï¼å¦èº«ä»½éªè¯ãçæ§ãè´è½½å è¡¡ãç¼å­ç­ãAPIç½å³æ¹å¼çæ ¸å¿è¦ç¹æ¯ï¼ææçæ¥å¥æ¹åæ¶è´¹ç«¯é½éè¿ç»ä¸çç½å³æ¥å¥å¾®æå¡ï¼å¨ç½å³å±å¤çæ æçéä¸å¡åè½ã",normalizedContent:"# åå¸å¼è®¤è¯å®æ\n\n\n# ææ¯æ¹æ¡\n\næ ¹æ®éåçåæï¼å³å®éç¨åºäºtokençè®¤è¯æ¹å¼ï¼å®çä¼ç¹æ¯:\n\n * éåç»ä¸è®¤è¯çæºå¶ï¼å®¢æ·ç«¯ãä¸æ¹åºç¨ãä¸æ¹åºç¨é½éµå¾ªä¸è´çè®¤è¯æºå¶ã\n\n * tokenè®¤è¯æ¹å¼å¯¹ç¬¬ä¸æ¹åºç¨æ¥å¥æ´éåï¼å ä¸ºå®æ´å¼æ¾ï¼å¯ä½¿ç¨å½åææµè¡çå¼æ¾åè®®oauth2.0ãjwtç­ã\n\n * ä¸è¬æåµæå¡ç«¯æ éå­å¨ä¼è¯ä¿¡æ¯ï¼åè½»äºæå¡ç«¯çååã\n\nåå¸å¼ç³»ç»è®¤è¯ææ¯æ¹æ¡è§ä¸å¾:\n\n\n\næµç¨æè¿°:\n\n * (1)ç¨æ·éè¿æ¥å¥æ¹(åºç¨)ç»å½ï¼æ¥å¥æ¹éåoauth2.0æ¹å¼å¨ç»ä¸è®¤è¯æå¡(simplify-auth)ä¸­è®¤è¯ã\n\n * (2)è®¤è¯æå¡(simplify-auth)è°ç¨éªè¯è¯¥ç¨æ·çèº«ä»½æ¯å¦åæ³ï¼å¹¶è·åç¨æ·æéä¿¡æ¯ã\n\n * (3)è®¤è¯æå¡(simplify-auth)è·åæ¥å¥æ¹æéä¿¡æ¯ï¼å¹¶éªè¯æ¥å¥æ¹æ¯å¦åæ³ã\n\n * (4)è¥ç»å½ç¨æ·ä»¥åæ¥å¥æ¹é½åæ³ï¼è®¤è¯æå¡çæjwtä»¤çè¿åç»æ¥å¥æ¹ï¼å¶ä¸­jwtä¸­åå«äºç¨æ·æéåæ¥å¥æ¹æéã\n\n * (5)åç»­ï¼æ¥å¥æ¹æºå¸¦jwtä»¤çå¯¹apiç½å³åçå¾®æå¡èµæºè¿è¡è®¿é®ã\n\n * (6)apiç½å³å¯¹ä»¤çè§£æãå¹¶éªè¯æ¥å¥æ¹çæéæ¯å¦è½å¤è®¿é®æ¬æ¬¡è¯·æ±çå¾®æå¡ã\n\n * (7)å¦ææ¥å¥æ¹çæéæ²¡é®é¢ï¼apiç½å³å°åè¯·æ±headerä¸­éå è§£æåçæætokenï¼å¹¶å°è¯·æ±è½¬åè³å¾®æå¡ã\n\n * (8)å¾®æå¡æ¶å°è¯·æ±ï¼æætokenä¸­åå«ç»å½ç¨æ·çèº«ä»½åæéä¿¡æ¯ãå æ­¤åç»­å¾®æå¡èªå·±å¯ä»¥å¹²ä¸¤ä»¶äº:\n   \n   * 1ãç¨æ·æææ¦æª(çå½åç¨æ·æ¯å¦ææè®¿é®è¯¥èµæº)\n   \n   * 2ãå°ç¨æ·ä¿¡æ¯å­å¨è¿å½åçº¿ç¨ä¸ä¸æ(æå©äºåç»­ä¸å¡é»è¾éæ¶è·åå½åç¨æ·ä¿¡æ¯)\n\næµç¨ææ¶åå°uaaæå¡ãapiç½å³è¿ä¸ä¸ªç»ä»¶èè´£å¦ä¸:\n\n\n# ç»ä¸è®¤è¯æå¡\n\nå®æ¿è½½äºoauth2.0æ¥å¥æ¹è®¤è¯ãç»å¥ç¨æ·çè®¤è¯ãææä»¥åçæä»¤ççèè´£ï¼å®æå®éçç¨æ·è®¤è¯ãææåè½ã\n\n\n# apiç½å³\n\nä½ä¸ºç³»ç»çå¯ä¸å¥å£ï¼apiç½å³ä¸ºæ¥å¥æ¹æä¾å®å¶çapiéåï¼å®å¯è½è¿å·æå¶å®èè´£ï¼å¦èº«ä»½éªè¯ãçæ§ãè´è½½å è¡¡ãç¼å­ç­ãapiç½å³æ¹å¼çæ ¸å¿è¦ç¹æ¯ï¼ææçæ¥å¥æ¹åæ¶è´¹ç«¯é½éè¿ç»ä¸çç½å³æ¥å¥å¾®æå¡ï¼å¨ç½å³å±å¤çæ æçéä¸å¡åè½ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"è½¯ä»¶å·¥ç¨ä»ç»",frontmatter:{title:"è½¯ä»¶å·¥ç¨ä»ç»",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/11f8a5/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/01.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%BB%8B%E7%BB%8D.html",relativePath:"20.DevOps/01.å¥é¨/01.è½¯ä»¶å·¥ç¨ä»ç».md",key:"v-7bad6842",path:"/pages/11f8a5/",headers:[{level:2,title:"è½¯ä»¶å¼åçå½å¨æ (SDLC)",slug:"è½¯ä»¶å¼åçå½å¨æ-sdlc",normalizedTitle:"è½¯ä»¶å¼åçå½å¨æ (sdlc)",charIndex:13},{level:3,title:"è®¡ååéæ±åæ (Planning and Requirement Analysis)",slug:"è®¡ååéæ±åæ-planning-and-requirement-analysis",normalizedTitle:"è®¡ååéæ±åæ (planning and requirement analysis)",charIndex:116},{level:3,title:"è®¾è®¡é¡¹ç®æ¶æ (Project Architecture)",slug:"è®¾è®¡é¡¹ç®æ¶æ-project-architecture",normalizedTitle:"è®¾è®¡é¡¹ç®æ¶æ (project architecture)",charIndex:296},{level:3,title:"å¼ååç¼ç¨ (Development and Coding)",slug:"å¼ååç¼ç¨-development-and-coding",normalizedTitle:"å¼ååç¼ç¨ (development and coding)",charIndex:447},{level:3,title:"æµè¯ (Testing)",slug:"æµè¯-testing",normalizedTitle:"æµè¯ (testing)",charIndex:617},{level:3,title:"é¨ç½² (Deployment)",slug:"é¨ç½²-deployment",normalizedTitle:"é¨ç½² (deployment)",charIndex:715},{level:2,title:"SDLCæ¨¡å (Software Development Lifecycle Model)",slug:"sdlcæ¨¡å-software-development-lifecycle-model",normalizedTitle:"sdlcæ¨¡å (software development lifecycle model)",charIndex:852},{level:3,title:"çå¸SDLCæ¨¡å",slug:"çå¸sdlcæ¨¡å",normalizedTitle:"çå¸sdlcæ¨¡å",charIndex:1177},{level:3,title:"è¿­ä»£SDLCæ¨¡å",slug:"è¿­ä»£sdlcæ¨¡å",normalizedTitle:"è¿­ä»£sdlcæ¨¡å",charIndex:1709},{level:3,title:"èºæSDLCæ¨¡å",slug:"èºæsdlcæ¨¡å",normalizedTitle:"èºæsdlcæ¨¡å",charIndex:2325},{level:3,title:"Vå½¢SDLCæ¨¡å",slug:"vå½¢sdlcæ¨¡å",normalizedTitle:"vå½¢sdlcæ¨¡å",charIndex:2865},{level:3,title:"ææ·SDLCæ¨¡å",slug:"ææ·sdlcæ¨¡å",normalizedTitle:"ææ·sdlcæ¨¡å",charIndex:3204}],headersStr:"è½¯ä»¶å¼åçå½å¨æ (SDLC) è®¡ååéæ±åæ (Planning and Requirement Analysis) è®¾è®¡é¡¹ç®æ¶æ (Project Architecture) å¼ååç¼ç¨ (Development and Coding) æµè¯ (Testing) é¨ç½² (Deployment) SDLCæ¨¡å (Software Development Lifecycle Model) çå¸SDLCæ¨¡å è¿­ä»£SDLCæ¨¡å èºæSDLCæ¨¡å Vå½¢SDLCæ¨¡å ææ·SDLCæ¨¡å",content:"# è½¯ä»¶å·¥ç¨ä»ç»\n\n\n# è½¯ä»¶å¼åçå½å¨æ (SDLC)\n\nè½¯ä»¶å¼åçå½å¨æåå«åSDLC(Software Development Life Cycle)ï¼å®æ¯éåäºè®¡åãå¼åãæµè¯ åé¨ç½²è¿ç¨çéåãå¦ä¸å¾æç¤º :\n\n\n\n\n# è®¡ååéæ±åæ (Planning and Requirement Analysis)\n\næ¯ä¸ªè½¯ä»¶å¼åçå½å¨ææ¨¡åé½ä»åæå¼å§ï¼è¿ç¨çå©çç¸å³èè®¨è®ºå¯¹æç»äº§åçè¦æ±ãæ­¤é¶æ®µçç®æ æ¯ç³»ç»è¦æ±çè¯¦ç»å®ä¹ãæ­¤å¤ï¼è¿éè¦ç¡®ä¿æææµç¨åä¸èé½æ¸æ¥å°äºè§£ä»»å¡ä»¥åæ¯ä¸ªéæ±å°å¦ä½å®æ½ãéå¸¸ï¼è®¨è®ºæ¶åè´¨éä¿è¯ä¸å®¶ï¼å¦ææå¿è¦ï¼ä»ä»¬çè³å¯ä»¥å¨å¼åé¶æ®µå¹²é¢è¿ç¨ä¸­çæ·»å ã\n\n\n# è®¾è®¡é¡¹ç®æ¶æ (Project Architecture)\n\nå¨è½¯ä»¶å¼åçå½å¨æçç¬¬äºé¶æ®µï¼å¼åäººåå®éä¸æ­£å¨è®¾è®¡æ¶æãææå©çç¸å³èï¼åæ¬å®¢æ·ï¼é½ä¼è®¨è®ºæ­¤é¶æ®µå¯è½åºç°çææä¸åææ¯é®é¢ãæ­¤å¤ï¼è¿å®ä¹äºé¡¹ç®ä¸­ä½¿ç¨çææ¯ï¼å¢éè´è½½ï¼éå¶ï¼æ¶é´èå´åé¢ç®ãæåéçé¡¹ç®å³ç­æ¯æ ¹æ®å®ä¹çè¦æ±ååºçã\n\n\n# å¼ååç¼ç¨ (Development and Coding)\n\nå¨æ¹åè¦æ±åï¼è¯¥è¿ç¨è¿å¥ä¸ä¸é¶æ®µ - å®éå¼åãç¨åºåä»è¿éå¼å§ç¼åæºä»£ç ï¼åæ¶ç¢è®°ååå®ä¹çéæ±ãç³»ç»ç®¡çåè°æ´è½¯ä»¶ç¯å¢ï¼åç«¯ç¨åºåå¼åç¨åºçç¨æ·çé¢ä»¥åä¸æå¡å¨äº¤äºçé»è¾ã ç¼ç¨æ¬èº«åè®¾æåä¸ªé¶æ®µ\n\n * ç®æ³å¼å\n * æºä»£ç ç¼å\n * æ±ç¼\n * æµè¯åè°è¯\n\n\n# æµè¯ (Testing)\n\næµè¯é¶æ®µåæ¬è°è¯è¿ç¨ãå¼åè¿ç¨ä¸­éæ¼çææä»£ç ç¼ºé·é½ä¼å¨æ­¤å¤æ£æµå°ï¼è®°å½ä¸æ¥å¹¶ä¼ åç»å¼åäººåè¿è¡ä¿®å¤ãéå¤æµè¯è¿ç¨ï¼ç´å°å é¤ææå³é®é®é¢å¹¶ä¸è½¯ä»¶å·¥ä½æµç¨ç¨³å®ã\n\n\n# é¨ç½² (Deployment)\n\nå½ç¨åºæç»ç¡®å®å¹¶ä¸æ²¡æå³é®é®é¢æ¶ - æ¯æ¶åä¸ºæç»ç¨æ·å¯å¨å®äºãæ°ç¨åºçæ¬åå¸åï¼ææ¯æ¯æå¢éå å¥ãè¯¥é¨é¨æä¾ç¨æ·åé¦; å¨å©ç¨æé´å¨è¯¢åæ¯æç¨æ·ãæ­¤å¤ï¼æ­¤é¶æ®µè¿åæ¬æéç»ä»¶çæ´æ°ï¼ä»¥ç¡®ä¿è½¯ä»¶æ¯ææ°çï¼å¹¶ä¸ä¸ä¼åå°å®å¨æ¼æ´çå½±åã\n\n\n# SDLCæ¨¡å (Software Development Lifecycle Model)\n\nä»ç¬¬ä¸ä¸ªä¹æ¯æå¤èçâçå¸å¼âSDLCæ¨¡åæ¼åèæ¥ï¼å®ä»¬çç§ç±»æ¾çæ©å¤§ãSDLCæ¨¡åçå¤æ ·æ§ç±ä¼å¤äº§åç±»åé¢åç¡®å® - ä»ç®åçç½ç«å°å¤æçå»çè½¯ä»¶ãå¦æä½ éç¨ä¸é¢æå°çSDLCæ¨¡åä¹ä¸ä½ä¸ºåºç¡ - æ è®ºå¦ä½ï¼å®åºè¯¥æ ¹æ®äº§åï¼é¡¹ç®åå¬å¸çç¹å¾è¿è¡è°æ´ãä¸é¢ç»åºäºæå¸¸ç¨ï¼æåæ¬¢è¿åæéè¦çSDLCæ¨¡åï¼\n\n * çå¸æ¨¡å (Waterfall Model)\n * è¿­ä»£æ¨¡å (Iterative Model)\n * èºææ¨¡å (Spiral Model)\n * Vå½¢æ¨¡å (V-Shape Model)\n * ææ·æ¨¡å (Agile Model)\n\n\n# çå¸SDLCæ¨¡å\n\nçå¸ - æ¯ä¸ä¸ªçº§èSDLCæ¨¡åï¼å¶ä¸­å¼åè¿ç¨çèµ·æ¥åæµç¨ï¼ä¸æ­¥ä¸æ­¥å°è¿è¡åæï¼é¢æµï¼å®ç°ï¼æµè¯ï¼å®æ½åæ¯æé¶æ®µãè¯¥SDLCæ¨¡ååæ¬å®å¨éæ­¥æ§è¡æ¯ä¸ªé¶æ®µãè¯¥è¿ç¨ä¸¥æ ¼è®°å½å¹¶é¢å®ä¹ï¼å·æè¯¥è½¯ä»¶å¼åçå½å¨ææ¨¡åçæ¯ä¸ªé¶æ®µæææçåè½ã\n\n\n\nå¥½å¤                            å£å¿\nç®åæç¨åçè§£                       åªæå¨æåä¸ä¸ªé¶æ®µç»æåï¼è½¯ä»¶æä¼åå¤å°±ç»ª\nç±äºå¶åæ§ï¼ç®¡çç®åï¼æ¯ä¸ªé¶æ®µé½ææç¡®çç»æåæµç¨å®¡æ¥   é«é£é©åä¸ç¡®å®æ§\nåå±é¶æ®µéä¸è¿è¡                      ä¸æ¯å¤æåé¢åå¯¹è±¡é¡¹ç®çæä½³éæ©\néç¨äºè¦æ±æç¡®ä¸ä¸æ¨¡æ£±ä¸¤å¯çå°åæä¸­åé¡¹ç®         ä¸éåé¿æé¡¹ç®\næäºç¡®å®å¼åå¨æä¸­çå³é®ç¹                 é¶æ®µçè¿å±å¾é¾è¡¡éï¼ä½ä»å¤äºåå±é¶æ®µ\næäºåç±»åç¡®å®ä»»å¡çä¼åçº§                 éæå¨æåå®æï¼ä¸æä¾é¢åè¯å«é®é¢çéé¡¹\n\nWaterfall SDLCæ¨¡åçç¨ä¾ï¼\n\n * åç¡®è®°å½äºè¿äºè¦æ±\n * äº§åå®ä¹ç¨³å®\n * ææ¯å æ æ¯é¢å®ä¹çï¼è¿ä½¿å¾å®ä¸æ¯å¨æç\n * æ²¡ææ¨¡æ£±ä¸¤å¯çè¦æ±\n * è¯¥é¡¹ç®å¾ç­\n\n\n# è¿­ä»£SDLCæ¨¡å\n\nå¨é¡¹ç®å¼å§ä¹åï¼è¿­ä»£SDLCæ¨¡åä¸éè¦å®æ´çéæ±åè¡¨ãå¼åè¿ç¨å¯ä»¥ä»å¯¹åè½é¨ä»¶çè¦æ±å¼å§ï¼å¯ä»¥å¨ä»¥åæ©å±ãè¯¥è¿ç¨æ¯éå¤çï¼åè®¸ä¸ºæ¯ä¸ªå¾ªç¯å¶ä½æ°çæ¬çäº§åãæ¯æ¬¡è¿­ä»£ï¼æç»­ä¸¤å°å­å¨ï¼é½åæ¬å¼åç³»ç»çåç¬ç»ä»¶ï¼ç¶åï¼å°æ­¤ç»ä»¶æ·»å å°ä¹åå¼åçåè½ä¸­ãè¯´å°æ°å­¦æ¯è¯­ï¼è¿­ä»£æ¨¡åæ¯é¡ºåºé¼è¿æ¹æ³çå®ç°; è¿æå³çéæ¸æ¥è¿è®¡åçæç»äº§åå½¢ç¶ã\n\n\n\nå¥½å¤                              å£å¿\næäºåè½å¯ä»¥å¨å¼åçå½å¨æçå¼å§é¶æ®µå¿«éå¼å          è¿­ä»£æ¨¡åæ¯çå¸æ¨¡åéè¦æ´å¤èµæº\nå¯ä»¥åºç¨å¹¶è¡å¼å                        éè¦æç»­ç®¡ç\nè¿å±å¾å®¹æè¡¡é                         å¯è½ä¼åºç°æ¶ææè®¾è®¡é®é¢ï¼å ä¸ºå¨ç­æè§åé¶æ®µå¹¶æªé¢è§å°ææè¦æ±\nè¾ç­çè¿­ä»£æ¯ - æ´å®¹æçæµè¯åè°è¯é¶æ®µ            å°é¡¹ç®çç³ç³éæ©\nç±äºé¦åå®æé«é£é©ä»»å¡ï¼å æ­¤æ´å®¹ææ§å¶é£é©           è¿ä¸ªè¿ç¨å¾é¾ç®¡ç\nå¨ä¸ä¸ä¸ªsprintä¸­å¯ä»¥é²æ­¢å¨ä¸æ¬¡è¿­ä»£ä¸­å®ä¹çé®é¢åé£é©   å³ä½¿å¨é¡¹ç®çæåé¶æ®µï¼é£é©ä¹å¯è½æ æ³å®å¨ç¡®å®\nçµæ´»æ§ååå¤ååçè¦æ±                     é£é©åæéè¦é«ç´ è´¨ä¸å®¶çåä¸\n\nè¿­ä»£æ¨¡åçç¨ä¾ï¼\n\n * æç»äº§åçè¦æ±æ¯ä¸¥æ ¼é¢å®ä¹ç\n * éç¨äºå¤§åé¡¹ç®\n * ä¸»è¦ä»»å¡æ¯é¢å®ä¹çï¼ä½ç»èå¯è½éçæ¶é´èæ¨è¿\n\n\n# èºæSDLCæ¨¡å\n\nèºææ¨¡å - æ¯SDLCæ¨¡åï¼å®åé¶æ®µç»åäºæ¶æåååãå®æ¯IterativeåWaterfall SDLCæ¨¡åçç»åï¼å·æéè¦çé£é©åæéç¹ãèºææ¨¡åçä¸»è¦é®é¢æ¯ç¡®å®è¿å¥ä¸ä¸é¶æ®µçæ­£ç¡®æ¶æºãå»ºè®®å°åæ­¥è®¾å®çæ¶é´èå´ä½ä¸ºæ­¤é®é¢çè§£å³æ¹æ¡ãå³ä½¿åä¸é¶æ®µçå·¥ä½å°æªå®æï¼ä¹å°æ ¹æ®è®¡åå®æåä¸ä¸é¶æ®µçè½¬åãè¯¥è®¡åæ¯æ ¹æ®ç»è®¡æ°æ®å¼å¥çï¼å³ä½¿ä»ä¸ªäººå¼åäººåçç»éªæ¥çï¼ä¹å¯ä»¥å¨ä¹åçé¡¹ç®ä¸­æ¶å°ã\n\n\n\nå¥½å¤                                   å£å¿\nçå½å¨æåä¸ºå°é¨åï¼å¦æé£é©éä¸­åº¦è¾é«ï¼åå¯ä»¥æåå®æé¶æ®µä»¥è§£å³é®é¢   å¯è½ç¸å½æè´µ\nå¼åè¿ç¨åç¡®è®°å½ï¼å¯æ ¹æ®ååè¿è¡æ©å±                   é£é©æ§å¶éè¦é«æè½ä¸ä¸äººåçåä¸\nå¯ä¼¸ç¼©æ§åè®¸å¨ç¸å¯¹è¾æçé¶æ®µè¿è¡æ´æ¹å¹¶æ·»å æ°åè½             å¯¹å°é¡¹ç®å¯è½æ æ\næ©æçå·¥ä½ååå·²ç»å®æ - ç¨æ·å¯ä»¥æ´å¿«å°æåºè¿äºç¼ºé·          å¤§éçä¸­é´é¶æ®µéè¦è¿å¤çææ¡£\n\nææ¨¡åçç¨ä¾\n\n * å®¢æ·ä¸ç¡®å®è¦æ±\n * é¢è®¡å¨å¼åå¨æä¸­ä¼è¿è¡éå¤§ç¼è¾\n * å·æä¸­çº§æé«çº§é£é©çé¡¹ç®ï¼é²æ­¢è¿äºé£é©éå¸¸éè¦\n * åºè¯¥å¨å ä¸ªé¶æ®µåå¸çæ°äº§åï¼ä»¥è·å¾è¶³å¤çå®¢æ·åé¦\n\n\n# Vå½¢SDLCæ¨¡å\n\nVå½¢SDLCæ¨¡åæ¯ç»å¸çå¸æ¨¡åçæ©å±ï¼å®åºäºæ¯ä¸ªå¼åé¶æ®µçç¸å³æµè¯é¶æ®µãè¿æ¯ä¸ä¸ªéå¸¸ä¸¥æ ¼çæ¨¡åï¼ä¸ä¸é¶æ®µä»å¨åä¸é¶æ®µä¹åå¼å§ãè¿ä¹ç§°ä¸ºâéªè¯åéªè¯âæ¨¡åãæ¯ä¸ªé¶æ®µé½æå½åçè¿ç¨æ§å¶ï¼ä»¥ç¡®ä¿å¯ä»¥è½¬æ¢å°ä¸ä¸ä¸ªé¶æ®µã\n\n\n\nå¥½å¤                         å£å¿\nVå½¢æ¨¡åçæ¯ä¸ªé¶æ®µé½æä¸¥æ ¼çç»æï¼å æ­¤å¾å®¹ææ§å¶   ç¼ºä¹çµæ´»æ§\næµè¯åéªè¯å¨æ©æé¶æ®µè¿è¡               å°é¡¹ç®çç³ç³éæ©\néç¨äºéæ±ç¨³å®ä¸æ¸æ°çå°åé¡¹ç®            ç¸å¯¹è¾å¤§çé£é©\n\nVå½¢æ¨¡åçç¨ä¾ï¼\n\n * å¯¹äºéè¦è¿è¡åç¡®äº§åæµè¯çé¡¹ç®\n * éç¨äºä¸­å°åé¡¹ç®ï¼å¶ä¸­ä¸¥æ ¼è¦æ±ä¸¥æ ¼è¦æ±\n * è·å¾æéèµæ ¼çå·¥ç¨å¸ï¼ç¹å«æ¯æµè¯äººåï¼å¯è½»æ¾å°è¾¾ã\n\n\n# ææ·SDLCæ¨¡å\n\nå¨æ¯æ¬¡å¼åè¿­ä»£ä¹åçææ·æ¹æ³ä¸­ï¼å®¢æ·è½å¤çå°ç»æå¹¶çè§£ä»æ¯å¦æ»¡ææä¸æ»¡æãè¿æ¯ææ·è½¯ä»¶å¼åçå½å¨ææ¨¡åçä¼å¿ä¹ä¸ãå¶ç¼ºç¹ä¹ä¸æ¯ï¼ç±äºç¼ºä¹æç¡®çè¦æ±ï¼å¾é¾ä¼°è®¡èµæºåå¼åææ¬ãæéç¼ç¨æ¯ææ·æ¨¡åçå®éåºç¨ä¹ä¸ãè¿ç§æ¨¡åçåºç¡åæ¬æ¯å¨ç­æçä¼è®® - Sprintæ¯Scrumæ¹æ³çä¸é¨åã\n\n\n\nå¥½å¤                       å£å¿\nåè½éæ±çæ´æ­£è¢«å®æ½å°å¼åè¿ç¨ä¸­ä»¥æä¾ç«äºå   ç±äºæ°¸ä¹æ§ååèæ æ³è¡¡éæç»ææ¬\né¡¹ç®æç­èéæçè¿­ä»£åå             å¢éåºè¯¥æ¯é«åº¦ä¸ä¸åå®¢æ·å¯¼åç\nçµæ´»çåæ´è¿ç¨ä½¿é£é©æå°å            æ°è¦æ±å¯è½ä¸ç°ææ¶æå²çª\nå¿«éåå¸ç¬¬ä¸ä¸ªäº§åçæ¬              éè¿æææ´æ­£åæ´æ¹ï¼é¡¹ç®å¯è½ä¼è¶åºé¢ææ¶é´\n\nææ·æ¨¡åçç¨ä¾ï¼\n\n * ç¨æ·éæ±å¨æåå\n * ç±äºè®¸å¤è¿­ä»£ï¼å®æ½çæ´æ¹çä»·æ ¼æ´ä½\n * ä¸çå¸æ¨¡åä¸åï¼å®åªéè¦åå§è®¡åæ¥å¯å¨é¡¹ç®",normalizedContent:"# è½¯ä»¶å·¥ç¨ä»ç»\n\n\n# è½¯ä»¶å¼åçå½å¨æ (sdlc)\n\nè½¯ä»¶å¼åçå½å¨æåå«åsdlc(software development life cycle)ï¼å®æ¯éåäºè®¡åãå¼åãæµè¯ åé¨ç½²è¿ç¨çéåãå¦ä¸å¾æç¤º :\n\n\n\n\n# è®¡ååéæ±åæ (planning and requirement analysis)\n\næ¯ä¸ªè½¯ä»¶å¼åçå½å¨ææ¨¡åé½ä»åæå¼å§ï¼è¿ç¨çå©çç¸å³èè®¨è®ºå¯¹æç»äº§åçè¦æ±ãæ­¤é¶æ®µçç®æ æ¯ç³»ç»è¦æ±çè¯¦ç»å®ä¹ãæ­¤å¤ï¼è¿éè¦ç¡®ä¿æææµç¨åä¸èé½æ¸æ¥å°äºè§£ä»»å¡ä»¥åæ¯ä¸ªéæ±å°å¦ä½å®æ½ãéå¸¸ï¼è®¨è®ºæ¶åè´¨éä¿è¯ä¸å®¶ï¼å¦ææå¿è¦ï¼ä»ä»¬çè³å¯ä»¥å¨å¼åé¶æ®µå¹²é¢è¿ç¨ä¸­çæ·»å ã\n\n\n# è®¾è®¡é¡¹ç®æ¶æ (project architecture)\n\nå¨è½¯ä»¶å¼åçå½å¨æçç¬¬äºé¶æ®µï¼å¼åäººåå®éä¸æ­£å¨è®¾è®¡æ¶æãææå©çç¸å³èï¼åæ¬å®¢æ·ï¼é½ä¼è®¨è®ºæ­¤é¶æ®µå¯è½åºç°çææä¸åææ¯é®é¢ãæ­¤å¤ï¼è¿å®ä¹äºé¡¹ç®ä¸­ä½¿ç¨çææ¯ï¼å¢éè´è½½ï¼éå¶ï¼æ¶é´èå´åé¢ç®ãæåéçé¡¹ç®å³ç­æ¯æ ¹æ®å®ä¹çè¦æ±ååºçã\n\n\n# å¼ååç¼ç¨ (development and coding)\n\nå¨æ¹åè¦æ±åï¼è¯¥è¿ç¨è¿å¥ä¸ä¸é¶æ®µ - å®éå¼åãç¨åºåä»è¿éå¼å§ç¼åæºä»£ç ï¼åæ¶ç¢è®°ååå®ä¹çéæ±ãç³»ç»ç®¡çåè°æ´è½¯ä»¶ç¯å¢ï¼åç«¯ç¨åºåå¼åç¨åºçç¨æ·çé¢ä»¥åä¸æå¡å¨äº¤äºçé»è¾ã ç¼ç¨æ¬èº«åè®¾æåä¸ªé¶æ®µ\n\n * ç®æ³å¼å\n * æºä»£ç ç¼å\n * æ±ç¼\n * æµè¯åè°è¯\n\n\n# æµè¯ (testing)\n\næµè¯é¶æ®µåæ¬è°è¯è¿ç¨ãå¼åè¿ç¨ä¸­éæ¼çææä»£ç ç¼ºé·é½ä¼å¨æ­¤å¤æ£æµå°ï¼è®°å½ä¸æ¥å¹¶ä¼ åç»å¼åäººåè¿è¡ä¿®å¤ãéå¤æµè¯è¿ç¨ï¼ç´å°å é¤ææå³é®é®é¢å¹¶ä¸è½¯ä»¶å·¥ä½æµç¨ç¨³å®ã\n\n\n# é¨ç½² (deployment)\n\nå½ç¨åºæç»ç¡®å®å¹¶ä¸æ²¡æå³é®é®é¢æ¶ - æ¯æ¶åä¸ºæç»ç¨æ·å¯å¨å®äºãæ°ç¨åºçæ¬åå¸åï¼ææ¯æ¯æå¢éå å¥ãè¯¥é¨é¨æä¾ç¨æ·åé¦; å¨å©ç¨æé´å¨è¯¢åæ¯æç¨æ·ãæ­¤å¤ï¼æ­¤é¶æ®µè¿åæ¬æéç»ä»¶çæ´æ°ï¼ä»¥ç¡®ä¿è½¯ä»¶æ¯ææ°çï¼å¹¶ä¸ä¸ä¼åå°å®å¨æ¼æ´çå½±åã\n\n\n# sdlcæ¨¡å (software development lifecycle model)\n\nä»ç¬¬ä¸ä¸ªä¹æ¯æå¤èçâçå¸å¼âsdlcæ¨¡åæ¼åèæ¥ï¼å®ä»¬çç§ç±»æ¾çæ©å¤§ãsdlcæ¨¡åçå¤æ ·æ§ç±ä¼å¤äº§åç±»åé¢åç¡®å® - ä»ç®åçç½ç«å°å¤æçå»çè½¯ä»¶ãå¦æä½ éç¨ä¸é¢æå°çsdlcæ¨¡åä¹ä¸ä½ä¸ºåºç¡ - æ è®ºå¦ä½ï¼å®åºè¯¥æ ¹æ®äº§åï¼é¡¹ç®åå¬å¸çç¹å¾è¿è¡è°æ´ãä¸é¢ç»åºäºæå¸¸ç¨ï¼æåæ¬¢è¿åæéè¦çsdlcæ¨¡åï¼\n\n * çå¸æ¨¡å (waterfall model)\n * è¿­ä»£æ¨¡å (iterative model)\n * èºææ¨¡å (spiral model)\n * vå½¢æ¨¡å (v-shape model)\n * ææ·æ¨¡å (agile model)\n\n\n# çå¸sdlcæ¨¡å\n\nçå¸ - æ¯ä¸ä¸ªçº§èsdlcæ¨¡åï¼å¶ä¸­å¼åè¿ç¨çèµ·æ¥åæµç¨ï¼ä¸æ­¥ä¸æ­¥å°è¿è¡åæï¼é¢æµï¼å®ç°ï¼æµè¯ï¼å®æ½åæ¯æé¶æ®µãè¯¥sdlcæ¨¡ååæ¬å®å¨éæ­¥æ§è¡æ¯ä¸ªé¶æ®µãè¯¥è¿ç¨ä¸¥æ ¼è®°å½å¹¶é¢å®ä¹ï¼å·æè¯¥è½¯ä»¶å¼åçå½å¨ææ¨¡åçæ¯ä¸ªé¶æ®µæææçåè½ã\n\n\n\nå¥½å¤                            å£å¿\nç®åæç¨åçè§£                       åªæå¨æåä¸ä¸ªé¶æ®µç»æåï¼è½¯ä»¶æä¼åå¤å°±ç»ª\nç±äºå¶åæ§ï¼ç®¡çç®åï¼æ¯ä¸ªé¶æ®µé½ææç¡®çç»æåæµç¨å®¡æ¥   é«é£é©åä¸ç¡®å®æ§\nåå±é¶æ®µéä¸è¿è¡                      ä¸æ¯å¤æåé¢åå¯¹è±¡é¡¹ç®çæä½³éæ©\néç¨äºè¦æ±æç¡®ä¸ä¸æ¨¡æ£±ä¸¤å¯çå°åæä¸­åé¡¹ç®         ä¸éåé¿æé¡¹ç®\næäºç¡®å®å¼åå¨æä¸­çå³é®ç¹                 é¶æ®µçè¿å±å¾é¾è¡¡éï¼ä½ä»å¤äºåå±é¶æ®µ\næäºåç±»åç¡®å®ä»»å¡çä¼åçº§                 éæå¨æåå®æï¼ä¸æä¾é¢åè¯å«é®é¢çéé¡¹\n\nwaterfall sdlcæ¨¡åçç¨ä¾ï¼\n\n * åç¡®è®°å½äºè¿äºè¦æ±\n * äº§åå®ä¹ç¨³å®\n * ææ¯å æ æ¯é¢å®ä¹çï¼è¿ä½¿å¾å®ä¸æ¯å¨æç\n * æ²¡ææ¨¡æ£±ä¸¤å¯çè¦æ±\n * è¯¥é¡¹ç®å¾ç­\n\n\n# è¿­ä»£sdlcæ¨¡å\n\nå¨é¡¹ç®å¼å§ä¹åï¼è¿­ä»£sdlcæ¨¡åä¸éè¦å®æ´çéæ±åè¡¨ãå¼åè¿ç¨å¯ä»¥ä»å¯¹åè½é¨ä»¶çè¦æ±å¼å§ï¼å¯ä»¥å¨ä»¥åæ©å±ãè¯¥è¿ç¨æ¯éå¤çï¼åè®¸ä¸ºæ¯ä¸ªå¾ªç¯å¶ä½æ°çæ¬çäº§åãæ¯æ¬¡è¿­ä»£ï¼æç»­ä¸¤å°å­å¨ï¼é½åæ¬å¼åç³»ç»çåç¬ç»ä»¶ï¼ç¶åï¼å°æ­¤ç»ä»¶æ·»å å°ä¹åå¼åçåè½ä¸­ãè¯´å°æ°å­¦æ¯è¯­ï¼è¿­ä»£æ¨¡åæ¯é¡ºåºé¼è¿æ¹æ³çå®ç°; è¿æå³çéæ¸æ¥è¿è®¡åçæç»äº§åå½¢ç¶ã\n\n\n\nå¥½å¤                              å£å¿\næäºåè½å¯ä»¥å¨å¼åçå½å¨æçå¼å§é¶æ®µå¿«éå¼å          è¿­ä»£æ¨¡åæ¯çå¸æ¨¡åéè¦æ´å¤èµæº\nå¯ä»¥åºç¨å¹¶è¡å¼å                        éè¦æç»­ç®¡ç\nè¿å±å¾å®¹æè¡¡é                         å¯è½ä¼åºç°æ¶ææè®¾è®¡é®é¢ï¼å ä¸ºå¨ç­æè§åé¶æ®µå¹¶æªé¢è§å°ææè¦æ±\nè¾ç­çè¿­ä»£æ¯ - æ´å®¹æçæµè¯åè°è¯é¶æ®µ            å°é¡¹ç®çç³ç³éæ©\nç±äºé¦åå®æé«é£é©ä»»å¡ï¼å æ­¤æ´å®¹ææ§å¶é£é©           è¿ä¸ªè¿ç¨å¾é¾ç®¡ç\nå¨ä¸ä¸ä¸ªsprintä¸­å¯ä»¥é²æ­¢å¨ä¸æ¬¡è¿­ä»£ä¸­å®ä¹çé®é¢åé£é©   å³ä½¿å¨é¡¹ç®çæåé¶æ®µï¼é£é©ä¹å¯è½æ æ³å®å¨ç¡®å®\nçµæ´»æ§ååå¤ååçè¦æ±                     é£é©åæéè¦é«ç´ è´¨ä¸å®¶çåä¸\n\nè¿­ä»£æ¨¡åçç¨ä¾ï¼\n\n * æç»äº§åçè¦æ±æ¯ä¸¥æ ¼é¢å®ä¹ç\n * éç¨äºå¤§åé¡¹ç®\n * ä¸»è¦ä»»å¡æ¯é¢å®ä¹çï¼ä½ç»èå¯è½éçæ¶é´èæ¨è¿\n\n\n# èºæsdlcæ¨¡å\n\nèºææ¨¡å - æ¯sdlcæ¨¡åï¼å®åé¶æ®µç»åäºæ¶æåååãå®æ¯iterativeåwaterfall sdlcæ¨¡åçç»åï¼å·æéè¦çé£é©åæéç¹ãèºææ¨¡åçä¸»è¦é®é¢æ¯ç¡®å®è¿å¥ä¸ä¸é¶æ®µçæ­£ç¡®æ¶æºãå»ºè®®å°åæ­¥è®¾å®çæ¶é´èå´ä½ä¸ºæ­¤é®é¢çè§£å³æ¹æ¡ãå³ä½¿åä¸é¶æ®µçå·¥ä½å°æªå®æï¼ä¹å°æ ¹æ®è®¡åå®æåä¸ä¸é¶æ®µçè½¬åãè¯¥è®¡åæ¯æ ¹æ®ç»è®¡æ°æ®å¼å¥çï¼å³ä½¿ä»ä¸ªäººå¼åäººåçç»éªæ¥çï¼ä¹å¯ä»¥å¨ä¹åçé¡¹ç®ä¸­æ¶å°ã\n\n\n\nå¥½å¤                                   å£å¿\nçå½å¨æåä¸ºå°é¨åï¼å¦æé£é©éä¸­åº¦è¾é«ï¼åå¯ä»¥æåå®æé¶æ®µä»¥è§£å³é®é¢   å¯è½ç¸å½æè´µ\nå¼åè¿ç¨åç¡®è®°å½ï¼å¯æ ¹æ®ååè¿è¡æ©å±                   é£é©æ§å¶éè¦é«æè½ä¸ä¸äººåçåä¸\nå¯ä¼¸ç¼©æ§åè®¸å¨ç¸å¯¹è¾æçé¶æ®µè¿è¡æ´æ¹å¹¶æ·»å æ°åè½             å¯¹å°é¡¹ç®å¯è½æ æ\næ©æçå·¥ä½ååå·²ç»å®æ - ç¨æ·å¯ä»¥æ´å¿«å°æåºè¿äºç¼ºé·          å¤§éçä¸­é´é¶æ®µéè¦è¿å¤çææ¡£\n\nææ¨¡åçç¨ä¾\n\n * å®¢æ·ä¸ç¡®å®è¦æ±\n * é¢è®¡å¨å¼åå¨æä¸­ä¼è¿è¡éå¤§ç¼è¾\n * å·æä¸­çº§æé«çº§é£é©çé¡¹ç®ï¼é²æ­¢è¿äºé£é©éå¸¸éè¦\n * åºè¯¥å¨å ä¸ªé¶æ®µåå¸çæ°äº§åï¼ä»¥è·å¾è¶³å¤çå®¢æ·åé¦\n\n\n# vå½¢sdlcæ¨¡å\n\nvå½¢sdlcæ¨¡åæ¯ç»å¸çå¸æ¨¡åçæ©å±ï¼å®åºäºæ¯ä¸ªå¼åé¶æ®µçç¸å³æµè¯é¶æ®µãè¿æ¯ä¸ä¸ªéå¸¸ä¸¥æ ¼çæ¨¡åï¼ä¸ä¸é¶æ®µä»å¨åä¸é¶æ®µä¹åå¼å§ãè¿ä¹ç§°ä¸ºâéªè¯åéªè¯âæ¨¡åãæ¯ä¸ªé¶æ®µé½æå½åçè¿ç¨æ§å¶ï¼ä»¥ç¡®ä¿å¯ä»¥è½¬æ¢å°ä¸ä¸ä¸ªé¶æ®µã\n\n\n\nå¥½å¤                         å£å¿\nvå½¢æ¨¡åçæ¯ä¸ªé¶æ®µé½æä¸¥æ ¼çç»æï¼å æ­¤å¾å®¹ææ§å¶   ç¼ºä¹çµæ´»æ§\næµè¯åéªè¯å¨æ©æé¶æ®µè¿è¡               å°é¡¹ç®çç³ç³éæ©\néç¨äºéæ±ç¨³å®ä¸æ¸æ°çå°åé¡¹ç®            ç¸å¯¹è¾å¤§çé£é©\n\nvå½¢æ¨¡åçç¨ä¾ï¼\n\n * å¯¹äºéè¦è¿è¡åç¡®äº§åæµè¯çé¡¹ç®\n * éç¨äºä¸­å°åé¡¹ç®ï¼å¶ä¸­ä¸¥æ ¼è¦æ±ä¸¥æ ¼è¦æ±\n * è·å¾æéèµæ ¼çå·¥ç¨å¸ï¼ç¹å«æ¯æµè¯äººåï¼å¯è½»æ¾å°è¾¾ã\n\n\n# ææ·sdlcæ¨¡å\n\nå¨æ¯æ¬¡å¼åè¿­ä»£ä¹åçææ·æ¹æ³ä¸­ï¼å®¢æ·è½å¤çå°ç»æå¹¶çè§£ä»æ¯å¦æ»¡ææä¸æ»¡æãè¿æ¯ææ·è½¯ä»¶å¼åçå½å¨ææ¨¡åçä¼å¿ä¹ä¸ãå¶ç¼ºç¹ä¹ä¸æ¯ï¼ç±äºç¼ºä¹æç¡®çè¦æ±ï¼å¾é¾ä¼°è®¡èµæºåå¼åææ¬ãæéç¼ç¨æ¯ææ·æ¨¡åçå®éåºç¨ä¹ä¸ãè¿ç§æ¨¡åçåºç¡åæ¬æ¯å¨ç­æçä¼è®® - sprintæ¯scrumæ¹æ³çä¸é¨åã\n\n\n\nå¥½å¤                       å£å¿\nåè½éæ±çæ´æ­£è¢«å®æ½å°å¼åè¿ç¨ä¸­ä»¥æä¾ç«äºå   ç±äºæ°¸ä¹æ§ååèæ æ³è¡¡éæç»ææ¬\né¡¹ç®æç­èéæçè¿­ä»£åå             å¢éåºè¯¥æ¯é«åº¦ä¸ä¸åå®¢æ·å¯¼åç\nçµæ´»çåæ´è¿ç¨ä½¿é£é©æå°å            æ°è¦æ±å¯è½ä¸ç°ææ¶æå²çª\nå¿«éåå¸ç¬¬ä¸ä¸ªäº§åçæ¬              éè¿æææ´æ­£åæ´æ¹ï¼é¡¹ç®å¯è½ä¼è¶åºé¢ææ¶é´\n\nææ·æ¨¡åçç¨ä¾ï¼\n\n * ç¨æ·éæ±å¨æåå\n * ç±äºè®¸å¤è¿­ä»£ï¼å®æ½çæ´æ¹çä»·æ ¼æ´ä½\n * ä¸çå¸æ¨¡åä¸åï¼å®åªéè¦åå§è®¡åæ¥å¯å¨é¡¹ç®",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"æç»­ç»§æ¿æµç¨è¯´æ",frontmatter:{title:"æç»­ç»§æ¿æµç¨è¯´æ",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/5b4493/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/02.%E6%8C%81%E7%BB%AD%E7%BB%A7%E6%89%BF%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E.html",relativePath:"20.DevOps/01.å¥é¨/02.æç»­ç»§æ¿æµç¨è¯´æ.md",key:"v-d8f92f9e",path:"/pages/5b4493/",headersStr:null,content:"# æç»­ç»§æ¿æµç¨è¯´æ\n\n\n\n1 )é¦åï¼å¼åäººåæ¯å¤©è¿è¡ä»£ç æäº¤ï¼æäº¤å°Gitä»åº\n\n2 )ç¶åï¼Jenkinsä½ä¸ºæç»­éæå·¥å·ï¼ä½¿ç¨Gitå·¥å·å°Gitä»åºæåä»£ç å°éææå¡å¨ï¼åéåJDKï¼ Mavenç­è½¯ä»¶å®æä»£ç ç¼è¯ï¼ä»£ç æµè¯ä¸å®¡æ¥ï¼æµè¯ï¼æåç­å·¥ä½ï¼å¨è¿ä¸ªè¿ç¨ä¸­æ¯ä¸æ­¥åºéï¼é½éæ° åæ§è¡ä¸æ¬¡æ´ä¸ªæµç¨ã\n\n3 )æåï¼Jenkinsæçæçjaræwaråååå°æµè¯æå¡å¨æèçäº§æå¡å¨ï¼æµè¯äººåæç¨æ·å°±å¯ä»¥è®¿é® åºç¨ã",normalizedContent:"# æç»­ç»§æ¿æµç¨è¯´æ\n\n\n\n1 )é¦åï¼å¼åäººåæ¯å¤©è¿è¡ä»£ç æäº¤ï¼æäº¤å°gitä»åº\n\n2 )ç¶åï¼jenkinsä½ä¸ºæç»­éæå·¥å·ï¼ä½¿ç¨gitå·¥å·å°gitä»åºæåä»£ç å°éææå¡å¨ï¼åéåjdkï¼ mavenç­è½¯ä»¶å®æä»£ç ç¼è¯ï¼ä»£ç æµè¯ä¸å®¡æ¥ï¼æµè¯ï¼æåç­å·¥ä½ï¼å¨è¿ä¸ªè¿ç¨ä¸­æ¯ä¸æ­¥åºéï¼é½éæ° åæ§è¡ä¸æ¬¡æ´ä¸ªæµç¨ã\n\n3 )æåï¼jenkinsæçæçjaræwaråååå°æµè¯æå¡å¨æèçäº§æå¡å¨ï¼æµè¯äººåæç¨æ·å°±å¯ä»¥è®¿é® åºç¨ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Gitlabä»£ç æç®¡æå¡å¨å®è£",frontmatter:{title:"Gitlabä»£ç æç®¡æå¡å¨å®è£",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/eaeddc/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/03.Gitlab%E4%BB%A3%E7%A0%81%E6%89%98%E7%AE%A1%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85.html",relativePath:"20.DevOps/01.å¥é¨/03.Gitlabä»£ç æç®¡æå¡å¨å®è£.md",key:"v-f6cd3ec8",path:"/pages/eaeddc/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:22},{level:2,title:"ç¡¬ä»¶è¦æ±",slug:"ç¡¬ä»¶è¦æ±",normalizedTitle:"ç¡¬ä»¶è¦æ±",charIndex:117},{level:2,title:"å®è£ä¾èµ",slug:"å®è£ä¾èµ",normalizedTitle:"å®è£ä¾èµ",charIndex:237},{level:2,title:"ä¸è½½",slug:"ä¸è½½",normalizedTitle:"ä¸è½½",charIndex:758},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:15},{level:2,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:145},{level:2,title:"éå¯",slug:"éå¯",normalizedTitle:"éå¯",charIndex:3096},{level:2,title:"é¦æ¬¡è®¿é®",slug:"é¦æ¬¡è®¿é®",normalizedTitle:"é¦æ¬¡è®¿é®",charIndex:3177}],headersStr:"æ¦è¿° ç¡¬ä»¶è¦æ± å®è£ä¾èµ ä¸è½½ å®è£ éç½® éå¯ é¦æ¬¡è®¿é®",content:"# Gitlabä»£ç æç®¡æå¡å¨å®è£\n\n\n# æ¦è¿°\n\n\n\nGitLab æ¯ä¸ä¸ªç¨äºä»åºç®¡çç³»ç»çå¼æºé¡¹ç®ï¼ä½¿ç¨Gitä½ä¸ºä»£ç ç®¡çå·¥å·ï¼å¹¶å¨æ­¤åºç¡ä¸æ­å»ºèµ·æ¥çWebæå¡ãå®è£æ¹æ³æ¯åèGitLabå¨GitHubä¸çWikié¡µé¢ã\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²Gitlabçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\nCPU    4 CPU   8 CPU\nMem    4 GB    8 GB\nDisk   40 GB   160 GB\n\n\n# å®è£ä¾èµ\n\n * CentOS\n   \n   å¨ CentOS 7/8 ä¸ï¼ä¸é¢çå½ä»¤ä¹ä¼å¨ç³»ç»é²ç«å¢ä¸­æå¼ HTTPãHTTPS å SSH è®¿é®ã è¿æ¯ä¸ä¸ªå¯éæ­¥éª¤ï¼å¦ææ¨æç®ä»ä»æ¬å°ç½ç»è®¿é® GitLab æ å³é­é²ç«å¢ï¼åå¯ä»¥è·³è¿å®ã\n   \n   sudo yum install -y curl policycoreutils-python openssh-server perl\n   sudo systemctl enable sshd\n   sudo systemctl start sshd\n   sudo firewall-cmd --permanent --add-service=http\n   sudo firewall-cmd --permanent --add-service=https\n   sudo systemctl reload firewalld\n   \n\n * Ubuntu\n   \n   sudo apt-get update\n   sudo apt-get install -y curl openssh-server ca-certificates tzdata perl\n   \n\n\n# ä¸è½½\n\nå®æ¹ç¤¾åºçæ¬: GitLab CE\n\nNAME                                    DISTRO/VERSION   OS\ngitlab-ce-13.12.4-ce.0.el7.x86_64.rpm   el/7             CentOS 7\ngitlab-ce-13.12.4-ce.0.el8.x86_64.rpm   el/8             CentOS 8\ngitlab-ce_13.12.4-ce.0_amd64.deb        ubuntu/bionic    Ubuntu 18.04 LTS\ngitlab-ce_13.12.4-ce.0_amd64.deb        ubuntu/focal     Ubuntu 20.04 LTS\n\næ ¹æ®æä½ç³»ç»çæ¬éæ©å¯¹åºè½¯ä»¶åçæ¬ï¼ç¹å»å³ä¸è§Downloadæé®ä¸è½½è½¯ä»¶å\n\n\n# å®è£\n\nä¸è½½ GitLab ååï¼ä½¿ç¨ä»¥ä¸å½ä»¤å®è£å®ï¼\n\n# GitLab Community Edition\n# Debian/Ubuntu\nsudo dpkg -i gitlab-ce_<version>.deb\n\n# CentOS/RHEL\nsudo rpm -Uvh gitlab-ce-<version>.rpm\n\n\nå®è£è¿ç¨éè¦äºæ¶é´ï¼å¦æåºç°æ¥å¿ï¼åè¯´æå®è£æåã\n\nubuntu@ubuntu:~$ sudo dpkg -i gitlab-ce_13.12.4-ce.0_amd64.deb \nSelecting previously unselected package gitlab-ce.\n(Reading database ... 71349 files and directories currently installed.)\nPreparing to unpack gitlab-ce_13.12.4-ce.0_amd64.deb ...\nUnpacking gitlab-ce (13.12.4-ce.0) ...\nSetting up gitlab-ce (13.12.4-ce.0) ...\nIt looks like GitLab has not been configured yet; skipping the upgrade script.\n\n       *.                  *.\n      ***                 ***\n     *****               *****\n    .******             *******\n    ********            ********\n   ,,,,,,,,,***********,,,,,,,,,\n  ,,,,,,,,,,,*********,,,,,,,,,,,\n  .,,,,,,,,,,,*******,,,,,,,,,,,,\n      ,,,,,,,,,*****,,,,,,,,,.\n         ,,,,,,,****,,,,,,\n            .,,,***,,,,\n                ,*,.\n  \n\n\n     _______ __  __          __\n    / ____(_) /_/ /   ____ _/ /_\n   / / __/ / __/ /   / __ `/ __ \\\n  / /_/ / / /_/ /___/ /_/ / /_/ /\n  \\____/_/\\__/_____/\\__,_/_.___/\n  \n\nThank you for installing GitLab!\nGitLab was unable to detect a valid hostname for your instance.\nPlease configure a URL for your GitLab instance by setting `external_url`\nconfiguration in /etc/gitlab/gitlab.rb file.\nThen, you can start your GitLab instance by running the following command:\n  sudo gitlab-ctl reconfigure\n\nFor a comprehensive list of configuration options please see the Omnibus GitLab readme\nhttps://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/01.è½¯ä»¶å·¥ç¨ä»ç».md\n\nHelp us improve the installation experience, let us know how we did with a 1 minute survey:\nhttps://gitlab.fra1.qualtrics.com/jfe/form/SV_6kVqZANThUQ1bZb?installation=omnibus&release=13-12\n\n\n\n# éç½®\n\nä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£ï¼\n\nsudo vi /etc/gitlab/gitlab.rb\n\n\næ¾å°external_url 'http://gitlab.example.com'å¹¶ä¿®æ¹ä¸ºå½åæå¡å¨IPæååå°åã\n\n\n# éå¯\n\nsudo gitlab-ctl reconfigure\n\n\næç¤º\n\néæ°éç½®gitlabå¯è½æ¶èå åéçæ¶é´ï¼æ ¹æ®ç¡¬ä»¶éç½®æå³ï¼è¯·èå¿ç­å¾å³å¯ã\n\n\n# é¦æ¬¡è®¿é®\n\nå¨æ¨ç¬¬ä¸æ¬¡è®¿é®æ¶ï¼æ¨å°è¢«éå®åå°å¯ç éç½®å±å¹ã æä¾åå§ç®¡çåå¸æ·çå¯ç ï¼æ¨å°è¢«éå®ååç»å½é¡µé¢ã ä½¿ç¨é»è®¤å¸æ·çç¨æ·å root ç»å½ã\n\n\n\næå³å®è£åéç½®çè¯¦ç»è¯´æï¼è¯·åéæä»¬çææ¡£ã",normalizedContent:"# gitlabä»£ç æç®¡æå¡å¨å®è£\n\n\n# æ¦è¿°\n\n\n\ngitlab æ¯ä¸ä¸ªç¨äºä»åºç®¡çç³»ç»çå¼æºé¡¹ç®ï¼ä½¿ç¨gitä½ä¸ºä»£ç ç®¡çå·¥å·ï¼å¹¶å¨æ­¤åºç¡ä¸æ­å»ºèµ·æ¥çwebæå¡ãå®è£æ¹æ³æ¯åègitlabå¨githubä¸çwikié¡µé¢ã\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²gitlabçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\ncpu    4 cpu   8 cpu\nmem    4 gb    8 gb\ndisk   40 gb   160 gb\n\n\n# å®è£ä¾èµ\n\n * centos\n   \n   å¨ centos 7/8 ä¸ï¼ä¸é¢çå½ä»¤ä¹ä¼å¨ç³»ç»é²ç«å¢ä¸­æå¼ httpãhttps å ssh è®¿é®ã è¿æ¯ä¸ä¸ªå¯éæ­¥éª¤ï¼å¦ææ¨æç®ä»ä»æ¬å°ç½ç»è®¿é® gitlab æ å³é­é²ç«å¢ï¼åå¯ä»¥è·³è¿å®ã\n   \n   sudo yum install -y curl policycoreutils-python openssh-server perl\n   sudo systemctl enable sshd\n   sudo systemctl start sshd\n   sudo firewall-cmd --permanent --add-service=http\n   sudo firewall-cmd --permanent --add-service=https\n   sudo systemctl reload firewalld\n   \n\n * ubuntu\n   \n   sudo apt-get update\n   sudo apt-get install -y curl openssh-server ca-certificates tzdata perl\n   \n\n\n# ä¸è½½\n\nå®æ¹ç¤¾åºçæ¬: gitlab ce\n\nname                                    distro/version   os\ngitlab-ce-13.12.4-ce.0.el7.x86_64.rpm   el/7             centos 7\ngitlab-ce-13.12.4-ce.0.el8.x86_64.rpm   el/8             centos 8\ngitlab-ce_13.12.4-ce.0_amd64.deb        ubuntu/bionic    ubuntu 18.04 lts\ngitlab-ce_13.12.4-ce.0_amd64.deb        ubuntu/focal     ubuntu 20.04 lts\n\næ ¹æ®æä½ç³»ç»çæ¬éæ©å¯¹åºè½¯ä»¶åçæ¬ï¼ç¹å»å³ä¸è§downloadæé®ä¸è½½è½¯ä»¶å\n\n\n# å®è£\n\nä¸è½½ gitlab ååï¼ä½¿ç¨ä»¥ä¸å½ä»¤å®è£å®ï¼\n\n# gitlab community edition\n# debian/ubuntu\nsudo dpkg -i gitlab-ce_<version>.deb\n\n# centos/rhel\nsudo rpm -uvh gitlab-ce-<version>.rpm\n\n\nå®è£è¿ç¨éè¦äºæ¶é´ï¼å¦æåºç°æ¥å¿ï¼åè¯´æå®è£æåã\n\nubuntu@ubuntu:~$ sudo dpkg -i gitlab-ce_13.12.4-ce.0_amd64.deb \nselecting previously unselected package gitlab-ce.\n(reading database ... 71349 files and directories currently installed.)\npreparing to unpack gitlab-ce_13.12.4-ce.0_amd64.deb ...\nunpacking gitlab-ce (13.12.4-ce.0) ...\nsetting up gitlab-ce (13.12.4-ce.0) ...\nit looks like gitlab has not been configured yet; skipping the upgrade script.\n\n       *.                  *.\n      ***                 ***\n     *****               *****\n    .******             *******\n    ********            ********\n   ,,,,,,,,,***********,,,,,,,,,\n  ,,,,,,,,,,,*********,,,,,,,,,,,\n  .,,,,,,,,,,,*******,,,,,,,,,,,,\n      ,,,,,,,,,*****,,,,,,,,,.\n         ,,,,,,,****,,,,,,\n            .,,,***,,,,\n                ,*,.\n  \n\n\n     _______ __  __          __\n    / ____(_) /_/ /   ____ _/ /_\n   / / __/ / __/ /   / __ `/ __ \\\n  / /_/ / / /_/ /___/ /_/ / /_/ /\n  \\____/_/\\__/_____/\\__,_/_.___/\n  \n\nthank you for installing gitlab!\ngitlab was unable to detect a valid hostname for your instance.\nplease configure a url for your gitlab instance by setting `external_url`\nconfiguration in /etc/gitlab/gitlab.rb file.\nthen, you can start your gitlab instance by running the following command:\n  sudo gitlab-ctl reconfigure\n\nfor a comprehensive list of configuration options please see the omnibus gitlab readme\nhttps://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/01.è½¯ä»¶å·¥ç¨ä»ç».md\n\nhelp us improve the installation experience, let us know how we did with a 1 minute survey:\nhttps://gitlab.fra1.qualtrics.com/jfe/form/sv_6kvqzanthuq1bzb?installation=omnibus&release=13-12\n\n\n\n# éç½®\n\nä¿®æ¹gitlabéç½®æä»¶æå®æå¡å¨ipåèªå®ä¹ç«¯å£ï¼\n\nsudo vi /etc/gitlab/gitlab.rb\n\n\næ¾å°external_url 'http://gitlab.example.com'å¹¶ä¿®æ¹ä¸ºå½åæå¡å¨ipæååå°åã\n\n\n# éå¯\n\nsudo gitlab-ctl reconfigure\n\n\næç¤º\n\néæ°éç½®gitlabå¯è½æ¶èå åéçæ¶é´ï¼æ ¹æ®ç¡¬ä»¶éç½®æå³ï¼è¯·èå¿ç­å¾å³å¯ã\n\n\n# é¦æ¬¡è®¿é®\n\nå¨æ¨ç¬¬ä¸æ¬¡è®¿é®æ¶ï¼æ¨å°è¢«éå®åå°å¯ç éç½®å±å¹ã æä¾åå§ç®¡çåå¸æ·çå¯ç ï¼æ¨å°è¢«éå®ååç»å½é¡µé¢ã ä½¿ç¨é»è®¤å¸æ·çç¨æ·å root ç»å½ã\n\n\n\næå³å®è£åéç½®çè¯¦ç»è¯´æï¼è¯·åéæä»¬çææ¡£ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinsèªå¨åæå¡å¨å®è£",frontmatter:{title:"Jenkinsèªå¨åæå¡å¨å®è£",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/605fde/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/04.Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85.html",relativePath:"20.DevOps/01.å¥é¨/04.Jenkinsèªå¨åæå¡å¨å®è£.md",key:"v-d7bef6c8",path:"/pages/605fde/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:22},{level:2,title:"ç¡¬ä»¶è¦æ±",slug:"ç¡¬ä»¶è¦æ±",normalizedTitle:"ç¡¬ä»¶è¦æ±",charIndex:462},{level:2,title:"å®è£ Java",slug:"å®è£-java",normalizedTitle:"å®è£ java",charIndex:582},{level:2,title:"å®è£ Jenkins",slug:"å®è£-jenkins",normalizedTitle:"å®è£ jenkins",charIndex:1274},{level:3,title:"Ubuntu",slug:"ubuntu",normalizedTitle:"ubuntu",charIndex:1031},{level:3,title:"CentOS",slug:"centos",normalizedTitle:"centos",charIndex:1608},{level:2,title:"å¯å¨ Jenkins",slug:"å¯å¨-jenkins",normalizedTitle:"å¯å¨ jenkins",charIndex:2365},{level:2,title:"å®è£åè®¾ç½®åå¯¼",slug:"å®è£åè®¾ç½®åå¯¼",normalizedTitle:"å®è£åè®¾ç½®åå¯¼",charIndex:3160},{level:3,title:"è§£é Jenkins",slug:"è§£é-jenkins",normalizedTitle:"è§£é jenkins",charIndex:3172},{level:3,title:"ä½¿ç¨æä»¶èªå®ä¹ Jenkins",slug:"ä½¿ç¨æä»¶èªå®ä¹-jenkins",normalizedTitle:"ä½¿ç¨æä»¶èªå®ä¹ jenkins",charIndex:4614},{level:3,title:"åå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ·",slug:"åå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ·",normalizedTitle:"åå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ·",charIndex:4966},{level:2,title:"Jenkins æ¬¢è¿é¡µé¢",slug:"jenkins-æ¬¢è¿é¡µé¢",normalizedTitle:"jenkins æ¬¢è¿é¡µé¢",charIndex:5258}],headersStr:"æ¦è¿° ç¡¬ä»¶è¦æ± å®è£ Java å®è£ Jenkins Ubuntu CentOS å¯å¨ Jenkins å®è£åè®¾ç½®åå¯¼ è§£é Jenkins ä½¿ç¨æä»¶èªå®ä¹ Jenkins åå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ· Jenkins æ¬¢è¿é¡µé¢",content:'# Jenkinsèªå¨åæå¡å¨å®è£\n\n\n# æ¦è¿°\n\n\n\nJenkins æ¯ä¸æ¬¾æµè¡çå¼æºæç»­éæ(Continuous Integration)å·¥å·ï¼å¹¿æ³ç¨äºé¡¹ç®å¼åï¼å·æèªå¨ åæå»ºãæµè¯åé¨ç½²ç­åè½ãå®ç½: http://jenkins-ci.org/ã\n\nJenkinsçç¹å¾:\n\n * å¼æºçJavaè¯­è¨å¼åæç»­éæå·¥å·ï¼æ¯ææç»­éæï¼æç»­é¨ç½²ã\n * æäºå®è£é¨ç½²éç½®:å¯éè¿yumå®è£,æä¸è½½waråä»¥åéè¿dockerå®¹å¨ç­å¿«éå®ç°å®è£é¨ç½²ï¼å¯æ¹ä¾¿webçé¢éç½®ç®¡çã\n * æ¶æ¯éç¥åæµè¯æ¥å:éæRSS/E-mailéè¿RSSåå¸æå»ºç»ææå½æå»ºå®ææ¶éè¿e-mailéç¥ï¼çæJUnit/TestNGæµè¯æ¥åã\n * åå¸å¼æå»º:æ¯æJenkinsè½å¤è®©å¤å°è®¡ç®æºä¸èµ·æå»º/æµè¯ã\n * æä»¶è¯å«:Jenkinsè½å¤è·è¸ªåªæ¬¡æå»ºçæåªäºjarï¼åªæ¬¡æå»ºä½¿ç¨åªä¸ªçæ¬çjarç­ã\n * ä¸°å¯çæä»¶æ¯æ:æ¯ææ©å±æä»¶ï¼ä½ å¯ä»¥å¼åéåèªå·±å¢éä½¿ç¨çå·¥å·ï¼å¦gitï¼svnï¼mavenï¼dockerç­ã\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²Jenkinsçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\nCPU    2 CPU   4 CPU\nMem    1 GB    4 GB\nDisk   10 GB   40 GB\n\n\n# å®è£ Java\n\nJenkinséè¦Javaæè½è¿è¡ï¼ä½æäºåè¡çé»è®¤ä¸åå«æ­¤åè½ï¼å¹¶ä¸æäº Java çæ¬ä¸ Jenkins ä¸å¼å®¹ã\n\næ¨å¯ä»¥ä½¿ç¨å¤ç§ Java å®ç°ã OpenJDK æ¯ç®åææµè¡çï¼æä»¬å°å¨æ¬æåä¸­ä½¿ç¨å®ã\n\nè¦å®è£ Open Java Development Kit (OpenJDK)ï¼è¯·è¿è¡ä»¥ä¸å½ä»¤ï¼\n\n * æ´æ°å­å¨åº:\n\nsudo apt update\n\n\n * æç´¢ææå¯ç¨çå :\n\nsudo apt search openjdk\n\n\n * éæ©ä¸ä¸ªéé¡¹å¹¶å®è£å® :\n\nsudo apt install openjdk-8-jdk\n\n\n * ç¡®è®¤å®è£:\n\nsudo apt install openjdk-8-jdk\n\n\n * æ£æ¥å®è£ :\n\njava -version\n\n\n * æ£æ¥ç»æ:\n\nopenjdk version "11.0.11" 2021-04-20\nOpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.18.04)\nOpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.18.04, mixed mode, sharing)\n\n\næç¤º\n\nä¸ºä»ä¹ä½¿ç¨ apt èä¸æ¯ apt-get æå¶ä»å½ä»¤ï¼ apt å½ä»¤èª 2014 å¹´å¼å§å¯ç¨ãå®å·æç±»ä¼¼äº apt-get çå½ä»¤ç»æï¼ä½æ¨å¨ä¸ºå¸åç¨æ·æä¾æ´æå¿«çä½éªã ä½¿ç¨ apt å¯ä»¥æ´è½»æ¾å°æ§è¡ç®åçè½¯ä»¶ç®¡çä»»å¡ï¼ä¾å¦å®è£ãæç´¢åå é¤ã\n\n\n# å®è£ Jenkins\n\n\n# Ubuntu\n\nå¨ Debian ååºäº Debian çåè¡çï¼å¦ Ubuntuï¼ä¸ï¼æ¨å¯ä»¥éè¿ apt å®è£ Jenkinsã\n\nwget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -\nsudo sh -c \'echo deb https://pkg.jenkins.io/debian-stable binary/ > \\\n    /etc/apt/sources.list.d/jenkins.list\'\nsudo apt-get update\nsudo apt-get install jenkins\n\n\n\n# CentOS\n\næ¨å¯ä»¥éè¿ yum å¨ Red Hat Enterprise LinuxãCentOS åå¶ä»åºäº Red Hat çåè¡çä¸å®è£ Jenkinsã\n\nsudo wget -O /etc/yum.repos.d/jenkins.repo \\\n    https://pkg.jenkins.io/redhat-stable/jenkins.repo\nsudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key\nsudo yum upgrade\nsudo yum install jenkins java-11-openjdk-devel\nsudo systemctl daemon-reload\n\n\næ­¤è½¯ä»¶åå®è£å°ï¼\n\n * å°Jenkinsè®¾ç½®ä¸ºå¯å¨æ¶å¯å¨çå®æ¤è¿ç¨ãæå³æ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åé /etc/init.d/jenkinsã\n * åå»ºä¸ä¸ªjenkinsç¨æ·æ¥è¿è¡è¿ä¸ªæå¡ã\n * ç´æ¥æ§å¶å°æ¥å¿è¾åºå°æä»¶ /var/log/jenkins/jenkins.logãå¦ææ¨æ­£å¨å¯¹Jenkinsè¿è¡æéæé¤ï¼è¯·æ£æ¥æ­¤æä»¶ã\n * ä½¿ç¨å¯å¨çéç½®åæ°å¡«å /etc/default/jenkinsï¼ä¾å¦JENKINS_HOME\n * å°Jenkinsè®¾ç½®ä¸ºä¾¦å¬ç«¯å£8080ãä½¿ç¨æµè§å¨è®¿é®æ­¤ç«¯å£ä»¥å¼å§éç½®ã\n\nå¦ä½ä¿®æ¹é»è®¤æå¡ç«¯å£ï¼\n\nå¦ææ¨ç/etc/init.d/jenkinsæä»¶æ æ³å¯å¨Jenkinsï¼è¯·ç¼è¾/etc/default/jenkinså°----HTTP_PORT=8080----è¡æ¿æ¢ä¸º----HTTP_PORT=8081---æ­¤å¤éæ©äº8081ï¼ä½æ¨å¯ä»¥è®¾ç½®å¦ä¸ä¸ªå¯ç¨ç«¯å£ã\n\n\n# å¯å¨ Jenkins\n\nä½¿ç¨å½ä»¤æ³¨å Jenkins æå¡:\n\nsudo systemctl daemon-reload\n\n\næ¨å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤å¯å¨ Jenkins æå¡:\n\nsudo systemctl start jenkins\n\n\næ¨å¯ä»¥ä½¿ç¨å½ä»¤æ£æ¥ Jenkins æå¡çç¶æ:\n\nsudo systemctl status jenkins\n\n\nå¦æä¸åé½è®¾ç½®æ­£ç¡®ï¼ä½ åºè¯¥çå°è¿æ ·çè¾åº:\n\nLoaded: loaded (/etc/rc.d/init.d/jenkins; generated)\nActive: active (running) since Tue 2018-11-13 16:19:01 +03; 4min 57s ago\n\n\næ³¨æ\n\nå¦ææ¨å®è£äºé²ç«å¢ï¼åå¿é¡»å° Jenkins æ·»å ä¸ºä¾å¤ã æ¨å¿é¡»å°ä¸é¢èæ¬ä¸­ç YOURPORT æ´æ¹ä¸ºè¦ä½¿ç¨çç«¯å£ã ç«¯å£ 8080 æ¯æå¸¸è§çã\n\nYOURPORT=8080\nPERM="--permanent"\nSERV="$PERM --service=jenkins"\n\nfirewall-cmd $PERM --new-service=jenkins\nfirewall-cmd $SERV --set-short="Jenkins ports"\nfirewall-cmd $SERV --set-description="Jenkins port exceptions"\nfirewall-cmd $SERV --add-port=$YOURPORT/tcp\nfirewall-cmd $PERM --add-service=jenkins\nfirewall-cmd --zone=public --add-service=http --permanent\nfirewall-cmd --reload\n\n\n\n# å®è£åè®¾ç½®åå¯¼\n\n\n# è§£é Jenkins\n\nå½æ¨ç¬¬ä¸æ¬¡è®¿é®ä¸ä¸ªæ°ç Jenkins å®ä¾æ¶ï¼ç³»ç»ä¼è¦æ±æ¨ä½¿ç¨èªå¨çæçå¯ç å°å¶è§£éã\n\n1.æµè§å° http://localhost:8080ï¼ææ¨å¨å®è£æ¶ä¸º Jenkins éç½®çä»»ä½ç«¯å£ï¼å¹¶ç­å¾ Unlock Jenkins é¡µé¢åºç°ã\n\n2.ä» Jenkins æ§å¶å°æ¥å¿è¾åºä¸­ï¼å¤å¶èªå¨çæçå­æ¯æ°å­å¯ç ï¼å¨ 2 ç»æå·ä¹é´ï¼ã\n\ncat /var/log/jenkins/jenkins.log\n\n\nJenkins å¯å¨æ¥å¿å¦ä¸ï¼\n\n...\n2021-06-15 10:36:55.529+0000 [id=28]    INFO    jenkins.install.SetupWizard#init: \n\n*************************************************************\n*************************************************************\n*************************************************************\n\nJenkins initial setup is required. An admin user has been created and a password generated.\nPlease use the following password to proceed to installation:\n\n7400569b100b47c2b86c2e674c7123f3\n\nThis may also be found at: /var/lib/jenkins/secrets/initialAdminPassword\n\n*************************************************************\n*************************************************************\n*************************************************************\n\n2021-06-15 10:37:27.106+0000 [id=28]    INFO    jenkins.InitReactorRunner$1#onAttained: Completed initialization\n2021-06-15 10:37:27.153+0000 [id=22]    INFO    hudson.WebAppMain$3#run: Jenkins is fully up and running\n...\n\n\næç¤º\n\næ§è¡å½ä»¤ï¼ sudo cat /var/lib/jenkins/secrets/initialAdminPassword å°å¨æ§å¶å°æå°å¯ç ã\n\nå¦ææ¨ä½¿ç¨å®æ¹ jenkins/jenkins æ åå¨ Docker ä¸­è¿è¡ Jenkinsï¼åå¯ä»¥ä½¿ç¨ sudo docker exec ${CONTAINER_ID or CONTAINER_NAME} cat /var/jenkins_home/secrets/initialAdminPassword å¨æ§å¶å°ä¸­æå°å¯ç ï¼èæ éæ§è¡å°å®¹å¨ä¸­ã\n\n\n# ä½¿ç¨æä»¶èªå®ä¹ Jenkins\n\nè§£éJenkinsåï¼ä¼åºç°Customize Jenkinsé¡µé¢ã ä½ä¸ºåå§è®¾ç½®çä¸é¨åï¼æ¨å¯ä»¥å¨æ­¤å¤å®è£ä»»ææ°éçæç¨æä»¶ã\n\nåå»æ¾ç¤ºçä¸¤ä¸ªéé¡¹ä¹ä¸ï¼\n\n * å®è£å»ºè®®çæä»¶ - å®è£æ¨èçæä»¶éï¼è¿äºæä»¶åºäºæå¸¸è§çç¨ä¾ã\n\n * éæ©è¦å®è£çæä»¶ - éæ©æåå®è£çæä»¶éã å½æ¨ç¬¬ä¸æ¬¡è®¿é®æä»¶éæ©é¡µé¢æ¶ï¼é»è®¤æåµä¸ä¼éæ©å»ºè®®çæä»¶ã\n\næç¤º\n\nå¦ææ¨ä¸ç¡®å®éè¦åªäºæä»¶ï¼è¯·éæ©å®è£å»ºè®®çæä»¶ã æ¨å¯ä»¥ç¨åéè¿Manage Jenkins > Manage Plugins é¡µé¢å®è£ï¼æå é¤ï¼å¶ä» Jenkins æä»¶ã\n\n\n\nè®¾ç½®åå¯¼æ¾ç¤ºæ­£å¨éç½®ç Jenkins çè¿åº¦ä»¥åæ­£å¨å®è£çæ¨éæ©ç Jenkins æä»¶éã æ­¤è¿ç¨å¯è½éè¦å åéæ¶é´ã\n\n\n# åå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ·\n\næåï¼å¨ä½¿ç¨æä»¶èªå®ä¹ Jenkins ä¹åï¼Jenkins è¦æ±æ¨åå»ºæ¨çç¬¬ä¸ä¸ªç®¡çåç¨æ·ã\n\n1.å½âåå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ·âé¡µé¢åºç°æ¶ï¼å¨ç¸åºå­æ®µä¸­æå®ç®¡çåç¨æ·çè¯¦ç»ä¿¡æ¯ï¼ç¶ååå»ä¿å­å¹¶å®æã\n\n\n\n2.å½ Jenkins åå¤å°±ç»ªé¡µé¢åºç°æ¶ï¼åå»å¼å§ä½¿ç¨ Jenkinsã\n\næç¤º\n\nè¿ä¸ªé¡µé¢å¯è½è¡¨æjenkinså ä¹åå¤å¥½äºï¼ ç¸åï¼å¦ææ¯è¿æ ·ï¼è¯·åå»éæ°å¯å¨ã\n\nå¦æé¡µé¢å¨ä¸åéåæ²¡æèªå¨å·æ°ï¼è¯·ä½¿ç¨ Web æµè§å¨æå¨å·æ°é¡µé¢ã\n\n3.å¦æéè¦ï¼è¯·ä½¿ç¨æ¨åååå»ºçç¨æ·çå­æ®ç»å½ Jenkinsï¼æ¨å°±å¯ä»¥å¼å§ä½¿ç¨ Jenkins äºï¼\n\n\n# Jenkins æ¬¢è¿é¡µé¢\n\n\n\næå³å®è£åéç½®çè¯¦ç»è¯´æï¼è¯·åéå®æ¹ææ¡£ã',normalizedContent:'# jenkinsèªå¨åæå¡å¨å®è£\n\n\n# æ¦è¿°\n\n\n\njenkins æ¯ä¸æ¬¾æµè¡çå¼æºæç»­éæ(continuous integration)å·¥å·ï¼å¹¿æ³ç¨äºé¡¹ç®å¼åï¼å·æèªå¨ åæå»ºãæµè¯åé¨ç½²ç­åè½ãå®ç½: http://jenkins-ci.org/ã\n\njenkinsçç¹å¾:\n\n * å¼æºçjavaè¯­è¨å¼åæç»­éæå·¥å·ï¼æ¯ææç»­éæï¼æç»­é¨ç½²ã\n * æäºå®è£é¨ç½²éç½®:å¯éè¿yumå®è£,æä¸è½½waråä»¥åéè¿dockerå®¹å¨ç­å¿«éå®ç°å®è£é¨ç½²ï¼å¯æ¹ä¾¿webçé¢éç½®ç®¡çã\n * æ¶æ¯éç¥åæµè¯æ¥å:éærss/e-mailéè¿rssåå¸æå»ºç»ææå½æå»ºå®ææ¶éè¿e-mailéç¥ï¼çæjunit/testngæµè¯æ¥åã\n * åå¸å¼æå»º:æ¯æjenkinsè½å¤è®©å¤å°è®¡ç®æºä¸èµ·æå»º/æµè¯ã\n * æä»¶è¯å«:jenkinsè½å¤è·è¸ªåªæ¬¡æå»ºçæåªäºjarï¼åªæ¬¡æå»ºä½¿ç¨åªä¸ªçæ¬çjarç­ã\n * ä¸°å¯çæä»¶æ¯æ:æ¯ææ©å±æä»¶ï¼ä½ å¯ä»¥å¼åéåèªå·±å¢éä½¿ç¨çå·¥å·ï¼å¦gitï¼svnï¼mavenï¼dockerç­ã\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²jenkinsçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\ncpu    2 cpu   4 cpu\nmem    1 gb    4 gb\ndisk   10 gb   40 gb\n\n\n# å®è£ java\n\njenkinséè¦javaæè½è¿è¡ï¼ä½æäºåè¡çé»è®¤ä¸åå«æ­¤åè½ï¼å¹¶ä¸æäº java çæ¬ä¸ jenkins ä¸å¼å®¹ã\n\næ¨å¯ä»¥ä½¿ç¨å¤ç§ java å®ç°ã openjdk æ¯ç®åææµè¡çï¼æä»¬å°å¨æ¬æåä¸­ä½¿ç¨å®ã\n\nè¦å®è£ open java development kit (openjdk)ï¼è¯·è¿è¡ä»¥ä¸å½ä»¤ï¼\n\n * æ´æ°å­å¨åº:\n\nsudo apt update\n\n\n * æç´¢ææå¯ç¨çå :\n\nsudo apt search openjdk\n\n\n * éæ©ä¸ä¸ªéé¡¹å¹¶å®è£å® :\n\nsudo apt install openjdk-8-jdk\n\n\n * ç¡®è®¤å®è£:\n\nsudo apt install openjdk-8-jdk\n\n\n * æ£æ¥å®è£ :\n\njava -version\n\n\n * æ£æ¥ç»æ:\n\nopenjdk version "11.0.11" 2021-04-20\nopenjdk runtime environment (build 11.0.11+9-ubuntu-0ubuntu2.18.04)\nopenjdk 64-bit server vm (build 11.0.11+9-ubuntu-0ubuntu2.18.04, mixed mode, sharing)\n\n\næç¤º\n\nä¸ºä»ä¹ä½¿ç¨ apt èä¸æ¯ apt-get æå¶ä»å½ä»¤ï¼ apt å½ä»¤èª 2014 å¹´å¼å§å¯ç¨ãå®å·æç±»ä¼¼äº apt-get çå½ä»¤ç»æï¼ä½æ¨å¨ä¸ºå¸åç¨æ·æä¾æ´æå¿«çä½éªã ä½¿ç¨ apt å¯ä»¥æ´è½»æ¾å°æ§è¡ç®åçè½¯ä»¶ç®¡çä»»å¡ï¼ä¾å¦å®è£ãæç´¢åå é¤ã\n\n\n# å®è£ jenkins\n\n\n# ubuntu\n\nå¨ debian ååºäº debian çåè¡çï¼å¦ ubuntuï¼ä¸ï¼æ¨å¯ä»¥éè¿ apt å®è£ jenkinsã\n\nwget -q -o - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -\nsudo sh -c \'echo deb https://pkg.jenkins.io/debian-stable binary/ > \\\n    /etc/apt/sources.list.d/jenkins.list\'\nsudo apt-get update\nsudo apt-get install jenkins\n\n\n\n# centos\n\næ¨å¯ä»¥éè¿ yum å¨ red hat enterprise linuxãcentos åå¶ä»åºäº red hat çåè¡çä¸å®è£ jenkinsã\n\nsudo wget -o /etc/yum.repos.d/jenkins.repo \\\n    https://pkg.jenkins.io/redhat-stable/jenkins.repo\nsudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key\nsudo yum upgrade\nsudo yum install jenkins java-11-openjdk-devel\nsudo systemctl daemon-reload\n\n\næ­¤è½¯ä»¶åå®è£å°ï¼\n\n * å°jenkinsè®¾ç½®ä¸ºå¯å¨æ¶å¯å¨çå®æ¤è¿ç¨ãæå³æ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åé /etc/init.d/jenkinsã\n * åå»ºä¸ä¸ªjenkinsç¨æ·æ¥è¿è¡è¿ä¸ªæå¡ã\n * ç´æ¥æ§å¶å°æ¥å¿è¾åºå°æä»¶ /var/log/jenkins/jenkins.logãå¦ææ¨æ­£å¨å¯¹jenkinsè¿è¡æéæé¤ï¼è¯·æ£æ¥æ­¤æä»¶ã\n * ä½¿ç¨å¯å¨çéç½®åæ°å¡«å /etc/default/jenkinsï¼ä¾å¦jenkins_home\n * å°jenkinsè®¾ç½®ä¸ºä¾¦å¬ç«¯å£8080ãä½¿ç¨æµè§å¨è®¿é®æ­¤ç«¯å£ä»¥å¼å§éç½®ã\n\nå¦ä½ä¿®æ¹é»è®¤æå¡ç«¯å£ï¼\n\nå¦ææ¨ç/etc/init.d/jenkinsæä»¶æ æ³å¯å¨jenkinsï¼è¯·ç¼è¾/etc/default/jenkinså°----http_port=8080----è¡æ¿æ¢ä¸º----http_port=8081---æ­¤å¤éæ©äº8081ï¼ä½æ¨å¯ä»¥è®¾ç½®å¦ä¸ä¸ªå¯ç¨ç«¯å£ã\n\n\n# å¯å¨ jenkins\n\nä½¿ç¨å½ä»¤æ³¨å jenkins æå¡:\n\nsudo systemctl daemon-reload\n\n\næ¨å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤å¯å¨ jenkins æå¡:\n\nsudo systemctl start jenkins\n\n\næ¨å¯ä»¥ä½¿ç¨å½ä»¤æ£æ¥ jenkins æå¡çç¶æ:\n\nsudo systemctl status jenkins\n\n\nå¦æä¸åé½è®¾ç½®æ­£ç¡®ï¼ä½ åºè¯¥çå°è¿æ ·çè¾åº:\n\nloaded: loaded (/etc/rc.d/init.d/jenkins; generated)\nactive: active (running) since tue 2018-11-13 16:19:01 +03; 4min 57s ago\n\n\næ³¨æ\n\nå¦ææ¨å®è£äºé²ç«å¢ï¼åå¿é¡»å° jenkins æ·»å ä¸ºä¾å¤ã æ¨å¿é¡»å°ä¸é¢èæ¬ä¸­ç yourport æ´æ¹ä¸ºè¦ä½¿ç¨çç«¯å£ã ç«¯å£ 8080 æ¯æå¸¸è§çã\n\nyourport=8080\nperm="--permanent"\nserv="$perm --service=jenkins"\n\nfirewall-cmd $perm --new-service=jenkins\nfirewall-cmd $serv --set-short="jenkins ports"\nfirewall-cmd $serv --set-description="jenkins port exceptions"\nfirewall-cmd $serv --add-port=$yourport/tcp\nfirewall-cmd $perm --add-service=jenkins\nfirewall-cmd --zone=public --add-service=http --permanent\nfirewall-cmd --reload\n\n\n\n# å®è£åè®¾ç½®åå¯¼\n\n\n# è§£é jenkins\n\nå½æ¨ç¬¬ä¸æ¬¡è®¿é®ä¸ä¸ªæ°ç jenkins å®ä¾æ¶ï¼ç³»ç»ä¼è¦æ±æ¨ä½¿ç¨èªå¨çæçå¯ç å°å¶è§£éã\n\n1.æµè§å° http://localhost:8080ï¼ææ¨å¨å®è£æ¶ä¸º jenkins éç½®çä»»ä½ç«¯å£ï¼å¹¶ç­å¾ unlock jenkins é¡µé¢åºç°ã\n\n2.ä» jenkins æ§å¶å°æ¥å¿è¾åºä¸­ï¼å¤å¶èªå¨çæçå­æ¯æ°å­å¯ç ï¼å¨ 2 ç»æå·ä¹é´ï¼ã\n\ncat /var/log/jenkins/jenkins.log\n\n\njenkins å¯å¨æ¥å¿å¦ä¸ï¼\n\n...\n2021-06-15 10:36:55.529+0000 [id=28]    info    jenkins.install.setupwizard#init: \n\n*************************************************************\n*************************************************************\n*************************************************************\n\njenkins initial setup is required. an admin user has been created and a password generated.\nplease use the following password to proceed to installation:\n\n7400569b100b47c2b86c2e674c7123f3\n\nthis may also be found at: /var/lib/jenkins/secrets/initialadminpassword\n\n*************************************************************\n*************************************************************\n*************************************************************\n\n2021-06-15 10:37:27.106+0000 [id=28]    info    jenkins.initreactorrunner$1#onattained: completed initialization\n2021-06-15 10:37:27.153+0000 [id=22]    info    hudson.webappmain$3#run: jenkins is fully up and running\n...\n\n\næç¤º\n\næ§è¡å½ä»¤ï¼ sudo cat /var/lib/jenkins/secrets/initialadminpassword å°å¨æ§å¶å°æå°å¯ç ã\n\nå¦ææ¨ä½¿ç¨å®æ¹ jenkins/jenkins æ åå¨ docker ä¸­è¿è¡ jenkinsï¼åå¯ä»¥ä½¿ç¨ sudo docker exec ${container_id or container_name} cat /var/jenkins_home/secrets/initialadminpassword å¨æ§å¶å°ä¸­æå°å¯ç ï¼èæ éæ§è¡å°å®¹å¨ä¸­ã\n\n\n# ä½¿ç¨æä»¶èªå®ä¹ jenkins\n\nè§£éjenkinsåï¼ä¼åºç°customize jenkinsé¡µé¢ã ä½ä¸ºåå§è®¾ç½®çä¸é¨åï¼æ¨å¯ä»¥å¨æ­¤å¤å®è£ä»»ææ°éçæç¨æä»¶ã\n\nåå»æ¾ç¤ºçä¸¤ä¸ªéé¡¹ä¹ä¸ï¼\n\n * å®è£å»ºè®®çæä»¶ - å®è£æ¨èçæä»¶éï¼è¿äºæä»¶åºäºæå¸¸è§çç¨ä¾ã\n\n * éæ©è¦å®è£çæä»¶ - éæ©æåå®è£çæä»¶éã å½æ¨ç¬¬ä¸æ¬¡è®¿é®æä»¶éæ©é¡µé¢æ¶ï¼é»è®¤æåµä¸ä¼éæ©å»ºè®®çæä»¶ã\n\næç¤º\n\nå¦ææ¨ä¸ç¡®å®éè¦åªäºæä»¶ï¼è¯·éæ©å®è£å»ºè®®çæä»¶ã æ¨å¯ä»¥ç¨åéè¿manage jenkins > manage plugins é¡µé¢å®è£ï¼æå é¤ï¼å¶ä» jenkins æä»¶ã\n\n\n\nè®¾ç½®åå¯¼æ¾ç¤ºæ­£å¨éç½®ç jenkins çè¿åº¦ä»¥åæ­£å¨å®è£çæ¨éæ©ç jenkins æä»¶éã æ­¤è¿ç¨å¯è½éè¦å åéæ¶é´ã\n\n\n# åå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ·\n\næåï¼å¨ä½¿ç¨æä»¶èªå®ä¹ jenkins ä¹åï¼jenkins è¦æ±æ¨åå»ºæ¨çç¬¬ä¸ä¸ªç®¡çåç¨æ·ã\n\n1.å½âåå»ºç¬¬ä¸ä¸ªç®¡çåç¨æ·âé¡µé¢åºç°æ¶ï¼å¨ç¸åºå­æ®µä¸­æå®ç®¡çåç¨æ·çè¯¦ç»ä¿¡æ¯ï¼ç¶ååå»ä¿å­å¹¶å®æã\n\n\n\n2.å½ jenkins åå¤å°±ç»ªé¡µé¢åºç°æ¶ï¼åå»å¼å§ä½¿ç¨ jenkinsã\n\næç¤º\n\nè¿ä¸ªé¡µé¢å¯è½è¡¨æjenkinså ä¹åå¤å¥½äºï¼ ç¸åï¼å¦ææ¯è¿æ ·ï¼è¯·åå»éæ°å¯å¨ã\n\nå¦æé¡µé¢å¨ä¸åéåæ²¡æèªå¨å·æ°ï¼è¯·ä½¿ç¨ web æµè§å¨æå¨å·æ°é¡µé¢ã\n\n3.å¦æéè¦ï¼è¯·ä½¿ç¨æ¨åååå»ºçç¨æ·çå­æ®ç»å½ jenkinsï¼æ¨å°±å¯ä»¥å¼å§ä½¿ç¨ jenkins äºï¼\n\n\n# jenkins æ¬¢è¿é¡µé¢\n\n\n\næå³å®è£åéç½®çè¯¦ç»è¯´æï¼è¯·åéå®æ¹ææ¡£ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinsæä»¶ç®¡ç",frontmatter:{title:"Jenkinsæä»¶ç®¡ç",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/6519b5/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/05.Jenkins%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86.html",relativePath:"20.DevOps/01.å¥é¨/05.Jenkinsæä»¶ç®¡ç.md",key:"v-4988c303",path:"/pages/6519b5/",headers:[{level:2,title:"ä¿®æ¹Jenkinsæä»¶ä¸è½½å°å",slug:"ä¿®æ¹jenkinsæä»¶ä¸è½½å°å",normalizedTitle:"ä¿®æ¹jenkinsæä»¶ä¸è½½å°å",charIndex:105}],headersStr:"ä¿®æ¹Jenkinsæä»¶ä¸è½½å°å",content:"# Jenkinsæä»¶ç®¡ç\n\nJenkinsæ¬èº«ä¸æä¾å¾å¤åè½ï¼æä»¬å¯ä»¥éè¿ä½¿ç¨æä»¶æ¥æ»¡è¶³æä»¬çä½¿ç¨ãä¾å¦ä»Gitlabæåä»£ç ï¼ä½¿ç¨Mavenæå»ºé¡¹ç®ç­åè½éè¦ä¾é æä»¶å®æãæ¥ä¸æ¥æ¼ç¤ºå¦ä½ä¸è½½æä»¶ã\n\n\n# ä¿®æ¹Jenkinsæä»¶ä¸è½½å°å\n\nJenkinså½å¤å®æ¹æä»¶å°åä¸è½½éåº¦éå¸¸æ¢ï¼æä»¥å¯ä»¥ä¿®æ¹ä¸ºå½åæä»¶å°åï¼ ç³»ç»ç®¡ç->æä»¶ç®¡çï¼ç¹å»å¯éæä»¶\n\n\n\nè¿æ ·åæ¯ä¸ºäºæJenkinså®æ¹çæä»¶åè¡¨ä¸è½½å°æ¬å°ï¼æ¥çä¿®æ¹å°åæä»¶ï¼æ¿æ¢ä¸ºå½åæä»¶å°å\n\n# è¿å¥Jenkinséç½®ç®å½\ncd /var/lib/jenkins/updates\n# å¤ä»½é»è®¤éç½®æä»¶\ncp default.json default.json.bak\n# æ§è¡æ¿æ¢æä½\nsed -i 's/http:\\/\\/updates.jenkinsci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json\nsed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json\n\n\næåï¼æä»¶ç®¡çç¹å»é«çº§ï¼æåçº§ç«ç¹æ¹ä¸ºå½åæä»¶ä¸è½½å°å\n\nhttps://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json\n\n\n\n\nç¹å»æäº¤åï¼éå¯Jenkins",normalizedContent:"# jenkinsæä»¶ç®¡ç\n\njenkinsæ¬èº«ä¸æä¾å¾å¤åè½ï¼æä»¬å¯ä»¥éè¿ä½¿ç¨æä»¶æ¥æ»¡è¶³æä»¬çä½¿ç¨ãä¾å¦ä»gitlabæåä»£ç ï¼ä½¿ç¨mavenæå»ºé¡¹ç®ç­åè½éè¦ä¾é æä»¶å®æãæ¥ä¸æ¥æ¼ç¤ºå¦ä½ä¸è½½æä»¶ã\n\n\n# ä¿®æ¹jenkinsæä»¶ä¸è½½å°å\n\njenkinså½å¤å®æ¹æä»¶å°åä¸è½½éåº¦éå¸¸æ¢ï¼æä»¥å¯ä»¥ä¿®æ¹ä¸ºå½åæä»¶å°åï¼ ç³»ç»ç®¡ç->æä»¶ç®¡çï¼ç¹å»å¯éæä»¶\n\n\n\nè¿æ ·åæ¯ä¸ºäºæjenkinså®æ¹çæä»¶åè¡¨ä¸è½½å°æ¬å°ï¼æ¥çä¿®æ¹å°åæä»¶ï¼æ¿æ¢ä¸ºå½åæä»¶å°å\n\n# è¿å¥jenkinséç½®ç®å½\ncd /var/lib/jenkins/updates\n# å¤ä»½é»è®¤éç½®æä»¶\ncp default.json default.json.bak\n# æ§è¡æ¿æ¢æä½\nsed -i 's/http:\\/\\/updates.jenkinsci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json\nsed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json\n\n\næåï¼æä»¶ç®¡çç¹å»é«çº§ï¼æåçº§ç«ç¹æ¹ä¸ºå½åæä»¶ä¸è½½å°å\n\nhttps://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json\n\n\n\n\nç¹å»æäº¤åï¼éå¯jenkins",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinsç¨æ·æéç®¡ç",frontmatter:{title:"Jenkinsç¨æ·æéç®¡ç",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/61d667/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/06.Jenkins%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html",relativePath:"20.DevOps/01.å¥é¨/06.Jenkinsç¨æ·æéç®¡ç.md",key:"v-7073a58e",path:"/pages/61d667/",headers:[{level:2,title:"å®è£Role-based Authorization Strategyæä»¶",slug:"å®è£role-based-authorization-strategyæä»¶",normalizedTitle:"å®è£role-based authorization strategyæä»¶",charIndex:78},{level:2,title:"å¼å¯æéå¨å±å®å¨éç½®",slug:"å¼å¯æéå¨å±å®å¨éç½®",normalizedTitle:"å¼å¯æéå¨å±å®å¨éç½®",charIndex:136},{level:2,title:"åå»ºè§è²",slug:"åå»ºè§è²",normalizedTitle:"åå»ºè§è²",charIndex:207},{level:2,title:"åå»ºç¨æ·",slug:"åå»ºç¨æ·",normalizedTitle:"åå»ºç¨æ·",charIndex:653},{level:3,title:"ç»ç¨æ·åéè§è²",slug:"ç»ç¨æ·åéè§è²",normalizedTitle:"ç»ç¨æ·åéè§è²",charIndex:720},{level:2,title:"åå»ºé¡¹ç®æµè¯æé",slug:"åå»ºé¡¹ç®æµè¯æé",normalizedTitle:"åå»ºé¡¹ç®æµè¯æé",charIndex:865}],headersStr:"å®è£Role-based Authorization Strategyæä»¶ å¼å¯æéå¨å±å®å¨éç½® åå»ºè§è² åå»ºç¨æ· ç»ç¨æ·åéè§è² åå»ºé¡¹ç®æµè¯æé",content:'# Jenkinsç¨æ·æéç®¡ç\n\næä»¬å¯ä»¥å©ç¨Role-based Authorization Strategy æä»¶æ¥ç®¡çJenkinsç¨æ·æé\n\n\n# å®è£Role-based Authorization Strategyæä»¶\n\nç³»ç»ç®¡ç -> æä»¶ç®¡ç\n\n\n\n\n# å¼å¯æéå¨å±å®å¨éç½®\n\nç³»ç»ç®¡ç -> å¨å±å®å¨éç½®\n\n\n\nææç­ç¥åæ¢ä¸ºRole-Based Strategyï¼ç¹å»"ä¿å­"ã\n\n\n\n\n# åå»ºè§è²\n\nå¨ç³»ç»ç®¡çé¡µé¢è¿å¥ Manage and Assign Roles\n\n\n\nç¹å»Manage Roles\n\n\n\n * Global rolesï¼å¨å±è§è²ï¼ï¼ç®¡çåç­é«çº§ç¨æ·å¯ä»¥åå»ºåºäºå¨å±çè§è²\n * Item rolesï¼é¡¹ç®è§è²ï¼ï¼ éå¯¹æä¸ªæèæäºé¡¹ç®çè§è²\n * Node rolesï¼ä»èç¹ï¼ï¼èç¹ç¸å³çæé\n\næä»¬æ·»å ä»¥ä¸ä¸ä¸ªè§è²ï¼\n\n * baseRoleï¼è¯¥è§è²ä¸ºå¨å±è§è²ãè¿ä¸ªè§è²éè¦ç»å®Overallä¸é¢çReadæéï¼æ¯ä¸ºäºç»ææç¨æ·ç»å®æåºæ¬çJenkinsè®¿é®æéãæ³¨æï¼å¦æä¸ç»åç»­ç¨æ·ç»å®è¿ä¸ªè§è²ï¼ä¼æ¥éè¯¯ï¼ç¨æ·å is missing the Overall/Read permission\n * role1ï¼è¯¥è§è²ä¸ºé¡¹ç®è§è²ãä½¿ç¨æ­£åè¡¨è¾¾å¼ç»å®project1.*ï¼æææ¯åªè½æä½project1å¼å¤´çé¡¹ç®ã\n * role2ï¼è¯¥è§è²ä¹ä¸ºé¡¹ç®è§è²ãç»å®project2.*ï¼æææ¯åªè½æä½project2å¼å¤´çé¡¹ç®ã\n\n\n\nç¹å»"ä¿å­"ã\n\n\n# åå»ºç¨æ·\n\nå¨ç³»ç»ç®¡çé¡µé¢è¿å¥ ç®¡çç¨æ·\n\n\n\nç®¡çç¨æ· -> æ°å»ºç¨æ·\n\n\n\nåå«åå»ºä¸¤ä¸ªç¨æ·ï¼jackåjasper\n\n\n\n\n# ç»ç¨æ·åéè§è²\n\nç³»ç»ç®¡çé¡µé¢è¿å¥Manage and Assign Rolesï¼ç¹å»Assign Roles\n\n\n\nç»å®è§åå¦ä¸ï¼\n\n * jackç¨æ·åå«ç»å®baseRoleårole1è§è²\n * jasperç¨æ·åå«ç»å®baseRoleårole2è§è²\n\n\n\nç¹å»"ä¿å­"ã\n\n\n# åå»ºé¡¹ç®æµè¯æé\n\nä»¥adminç®¡çåè´¦æ·åå»ºä¸¤ä¸ªé¡¹ç®ï¼åå«ä¸ºproject1_demoåproject2_demo\n\nç»æä¸ºï¼\n\n * jackç¨æ·ç»å½ï¼åªè½çå°project1_demoé¡¹ç®\n   \n   \n\n * jsaperç¨æ·ç»å½ï¼åªè½çå°project2_demoé¡¹ç®\n   \n   \n\nè³æ­¤ï¼åºäºè§è²çæééç½®å°±å®æäºï¼å®éä½¿ç¨ä¸­æ ¹æ®é¡¹ç®åç§°å¹éç¨æ·ç®¡çé¡¹ç®å³å¯ã',normalizedContent:'# jenkinsç¨æ·æéç®¡ç\n\næä»¬å¯ä»¥å©ç¨role-based authorization strategy æä»¶æ¥ç®¡çjenkinsç¨æ·æé\n\n\n# å®è£role-based authorization strategyæä»¶\n\nç³»ç»ç®¡ç -> æä»¶ç®¡ç\n\n\n\n\n# å¼å¯æéå¨å±å®å¨éç½®\n\nç³»ç»ç®¡ç -> å¨å±å®å¨éç½®\n\n\n\nææç­ç¥åæ¢ä¸ºrole-based strategyï¼ç¹å»"ä¿å­"ã\n\n\n\n\n# åå»ºè§è²\n\nå¨ç³»ç»ç®¡çé¡µé¢è¿å¥ manage and assign roles\n\n\n\nç¹å»manage roles\n\n\n\n * global rolesï¼å¨å±è§è²ï¼ï¼ç®¡çåç­é«çº§ç¨æ·å¯ä»¥åå»ºåºäºå¨å±çè§è²\n * item rolesï¼é¡¹ç®è§è²ï¼ï¼ éå¯¹æä¸ªæèæäºé¡¹ç®çè§è²\n * node rolesï¼ä»èç¹ï¼ï¼èç¹ç¸å³çæé\n\næä»¬æ·»å ä»¥ä¸ä¸ä¸ªè§è²ï¼\n\n * baseroleï¼è¯¥è§è²ä¸ºå¨å±è§è²ãè¿ä¸ªè§è²éè¦ç»å®overallä¸é¢çreadæéï¼æ¯ä¸ºäºç»ææç¨æ·ç»å®æåºæ¬çjenkinsè®¿é®æéãæ³¨æï¼å¦æä¸ç»åç»­ç¨æ·ç»å®è¿ä¸ªè§è²ï¼ä¼æ¥éè¯¯ï¼ç¨æ·å is missing the overall/read permission\n * role1ï¼è¯¥è§è²ä¸ºé¡¹ç®è§è²ãä½¿ç¨æ­£åè¡¨è¾¾å¼ç»å®project1.*ï¼æææ¯åªè½æä½project1å¼å¤´çé¡¹ç®ã\n * role2ï¼è¯¥è§è²ä¹ä¸ºé¡¹ç®è§è²ãç»å®project2.*ï¼æææ¯åªè½æä½project2å¼å¤´çé¡¹ç®ã\n\n\n\nç¹å»"ä¿å­"ã\n\n\n# åå»ºç¨æ·\n\nå¨ç³»ç»ç®¡çé¡µé¢è¿å¥ ç®¡çç¨æ·\n\n\n\nç®¡çç¨æ· -> æ°å»ºç¨æ·\n\n\n\nåå«åå»ºä¸¤ä¸ªç¨æ·ï¼jackåjasper\n\n\n\n\n# ç»ç¨æ·åéè§è²\n\nç³»ç»ç®¡çé¡µé¢è¿å¥manage and assign rolesï¼ç¹å»assign roles\n\n\n\nç»å®è§åå¦ä¸ï¼\n\n * jackç¨æ·åå«ç»å®baseroleårole1è§è²\n * jasperç¨æ·åå«ç»å®baseroleårole2è§è²\n\n\n\nç¹å»"ä¿å­"ã\n\n\n# åå»ºé¡¹ç®æµè¯æé\n\nä»¥adminç®¡çåè´¦æ·åå»ºä¸¤ä¸ªé¡¹ç®ï¼åå«ä¸ºproject1_demoåproject2_demo\n\nç»æä¸ºï¼\n\n * jackç¨æ·ç»å½ï¼åªè½çå°project1_demoé¡¹ç®\n   \n   \n\n * jsaperç¨æ·ç»å½ï¼åªè½çå°project2_demoé¡¹ç®\n   \n   \n\nè³æ­¤ï¼åºäºè§è²çæééç½®å°±å®æäºï¼å®éä½¿ç¨ä¸­æ ¹æ®é¡¹ç®åç§°å¹éç¨æ·ç®¡çé¡¹ç®å³å¯ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinså­è¯ç®¡ç",frontmatter:{title:"Jenkinså­è¯ç®¡ç",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/a1fe86/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/07.Jenkins%E5%87%AD%E8%AF%81%E7%AE%A1%E7%90%86.html",relativePath:"20.DevOps/01.å¥é¨/07.Jenkinså­è¯ç®¡ç.md",key:"v-60dca1e3",path:"/pages/a1fe86/",headers:[{level:2,title:"å®è£Credentials Binding Pluginæä»¶",slug:"å®è£credentials-binding-pluginæä»¶",normalizedTitle:"å®è£credentials binding pluginæä»¶",charIndex:92},{level:2,title:"å®è£Gitæä»¶åGitå·¥å·",slug:"å®è£gitæä»¶ågitå·¥å·",normalizedTitle:"å®è£gitæä»¶ågitå·¥å·",charIndex:668},{level:3,title:"Jenkins Git pluginæä»¶å®è£",slug:"jenkins-git-pluginæä»¶å®è£",normalizedTitle:"jenkins git pluginæä»¶å®è£",charIndex:740},{level:3,title:"CentOS7ä¸å®è£Gitå·¥å·",slug:"centos7ä¸å®è£gitå·¥å·",normalizedTitle:"centos7ä¸å®è£gitå·¥å·",charIndex:719},{level:3,title:"ç¨æ·å¯ç ç±»å",slug:"ç¨æ·å¯ç ç±»å",normalizedTitle:"ç¨æ·å¯ç ç±»å",charIndex:878},{level:3,title:"SSHå¯é¥ç±»å",slug:"sshå¯é¥ç±»å",normalizedTitle:"sshå¯é¥ç±»å",charIndex:1548}],headersStr:"å®è£Credentials Binding Pluginæä»¶ å®è£Gitæä»¶åGitå·¥å· Jenkins Git pluginæä»¶å®è£ CentOS7ä¸å®è£Gitå·¥å· ç¨æ·å¯ç ç±»å SSHå¯é¥ç±»å",content:'# Jenkinså­è¯ç®¡ç\n\nå­æ®å¯ä»¥ç¨æ¥å­å¨éè¦å¯æä¿æ¤çæ°æ®åºå¯ç ãGitlabå¯ç ä¿¡æ¯ãDockerç§æä»åºå¯ç ç­ï¼ä»¥ä¾¿ Jenkinså¯ä»¥åè¿äºç¬¬ä¸æ¹çåºç¨è¿è¡äº¤äºã\n\n\n# å®è£Credentials Binding Pluginæä»¶\n\nè¦å¨Jenkinsä½¿ç¨å­è¯ç®¡çåè½ï¼éè¦å®è£Credentials Binding Pluginæä»¶\n\n\n\nå®è£æä»¶åï¼ç³»ç»ç®¡ç -> Manage Credentialsï¼å¨è¿éç®¡çææå­è¯\n\n\n\nç¹å» å¨å± -> æ·»å å­è¯ ï¼å¯ä»¥æ·»å çå­è¯æ6ç§:\n\n\n\n * Username with passwordï¼ç¨æ·ååå¯ç \n * Github Appï¼å¯¹æ¥Githubåºç¨\n * SSH Username with private keyï¼ä½¿ç¨SSHç¨æ·åå¯é¥\n * Secret fileï¼éè¦ä¿å¯çææ¬æä»¶ï¼ä½¿ç¨æ¶Jenkinsä¼å°æä»¶å¤å¶å°ä¸ä¸ªä¸´æ¶ç®å½ä¸­ï¼åå°æä»¶è·¯å¾ è®¾ç½®å°ä¸ä¸ªåéä¸­ï¼ç­æå»ºç»æåï¼æå¤å¶çSecret fileå°±ä¼è¢«å é¤ã\n * Secret textï¼éè¦ä¿å­çä¸ä¸ªå å¯çææ¬ä¸²ï¼å¦ééæºå¨äººæGithubçapi token\n * Certificateï¼éè¿ä¸ä¼ è¯ä¹¦æä»¶çæ¹å¼\n\nå¸¸ç¨çå­è¯ç±»åæ: Username with password(ç¨æ·å¯ç ) å SSH Username with private key(SSH å¯é¥)\n\næ¥ä¸æ¥ä»¥ä½¿ç¨Gitå·¥å·å°Gitlabæåé¡¹ç®æºç ä¸ºä¾ï¼æ¼ç¤ºJenkinsçå¦ä½ç®¡çGitlabçå­è¯ã\n\n\n# å®è£Gitæä»¶åGitå·¥å·\n\nä¸ºäºè®©Jenkinsæ¯æä»Gitlabæåæºç ï¼éè¦å®è£Gitæä»¶ä»¥åå¨CentOS7ä¸å®è£Gitå·¥å·ã\n\n\n# Jenkins Git pluginæä»¶å®è£\n\n\n\n\n# CentOS7ä¸å®è£Gitå·¥å·\n\n# å®è£\nyum install git -y\n# å®è£åæ¥ççæ¬\ngit --version\n\n\næç¤º\n\nubuntu server 20.04ç³»ç»èªå¸¦gitå·¥å·æ éå®è£ã\n\n\n# ç¨æ·å¯ç ç±»å\n\n1)åå»ºå­è¯ jenkins-gitlab-checkout-creds\n\nJenkins->å­è¯->ç³»ç»->å¨å±å­è¯->æ·»å å­è¯\n\n\n\néæ©Username with passwordï¼è¾å¥Gitlabçç¨æ·ååå¯ç ï¼ç¹å»"ç¡®å®"ã\n\n\n\n2)æµè¯å­è¯æ¯å¦å¯ç¨\n\nåå»ºä¸ä¸ªFreeStyleé¡¹ç®ï¼æ°å»ºä»»å¡->èªç±é£æ ¼é¡¹ç®->ç¡®å®\n\n\n\næ¾å°"æºç ç®¡ç"->"Git"ï¼å¨Repository URLå¤å¶Gitlabä¸­çé¡¹ç®URL\n\n\n\n\n\nè¿æ¶ä¼æ¥éè¯´æ æ³è¿æ¥ä»åº!å¨Credentialséæ©ååæ·»å çå­è¯å°±ä¸æ¥éå¦\n\n\n\nä¿å­éç½®åï¼ç¹å»"æå»ºå¾æ " å¼å§æå»ºé¡¹ç®\n\n\n\næ¥çæ§å¶å°è¾åºæ¥å¿\n\n\n\næ¥ç/var/lib/jenkins/workspace/ç®å½ï¼åç°å·²ç»ä»Gitlabæåæåäºä»£ç å°Jenkinsä¸­ã\n\n\n\n\n\n\nÂ \nÂ \n\n\nubuntu@jenkins:/var/lib/jenkins/workspace$ ls -al\ntotal 24\ndrwxr-xr-x  6 jenkins jenkins 4096 Jun 20 17:24 .\ndrwxr-xr-x 18 jenkins jenkins 4096 Jun 20 17:25 ..\ndrwxr-xr-x  3 jenkins jenkins 4096 Jun 20 14:52 my-project\ndrwxr-xr-x  2 jenkins jenkins 4096 Jun 20 14:52 my-project@tmp\n\n\n\n# SSHå¯é¥ç±»å\n\nSSHåå¯ç»å½ç¤ºæå¾\n\n\n\n1)ç»å½jenkinsæå¡å¨ï¼æ§è¡å¦ä¸å½ä»¤çæå¬é¥åç§é¥ï¼-Cåæ°æå®å¯é¥æ³¨éåå®¹ï¼å¯ä»¥å¡«å¥é®ç®±å°åã\n\nssh-keygen -t rsa -b 2048 -C "<comment>"\n\n\nä¾å­ï¼\n\nubuntu@jenkins:~$ ssh-keygen -t rsa -b 2048 -C "<jenkins@ieooc.com>"\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/ubuntu/.ssh/id_rsa):\nCreated directory \'/home/ubuntu/.ssh\'.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/ubuntu/.ssh/id_rsa\nYour public key has been saved in /home/ubuntu/.ssh/id_rsa.pub\nThe key fingerprint is:\nSHA256:azN4tuxLMbWM5Hd25GaXRaN4Kgttgee8Yg3/8uFS8M8 <jenkins@ieooc.com>\nThe key\'s randomart image is:\n+---[RSA 2048]----+\n|               ..|\n|        .   . ...|\n|       ..o.. o. .|\n|       o==..oo  o|\n|       oS**.o =..|\n|       .*=+= + . |\n|      .oO=..o    |\n|      .*.*o .E   |\n|       .=.++     |\n+----[SHA256]-----+\n\n\næ³¨æ\n\nä¸ºäºå®ç°åå¯ç»å½ææï¼çæè¯ä¹¦æ¶è¦æ±è¾å¥è¯ä¹¦å¯ç æ­¥éª¤æ¶ç´æ¥åè½¦è·³è¿æ éè®¾ç½®å¯ç ã\n\nå¨/home/ubuntu/.ssh/ç®å½ä¿å­äºå¬é¥åä½¿ç¨\n\nubuntu@jenkins:~/.ssh$ ls\nid_rsa  id_rsa.pub\n\n\n * id_rsaï¼ç§é¥æä»¶\n * id_rsa.pubï¼å¬é¥æä»¶\n\n2)æçæçå¬é¥æ¾å¨Gitlabä¸­\n\nä»¥rootè´¦æ·ç»å½Gitlab->ç¹å»å¤´å->Edit profile->SSH Keys å¤å¶åæid_rsa.pubæä»¶çåå®¹å°è¿éï¼ç¹å»"Add Key"\n\n\n\n3)å¨Jenkinsä¸­æ·»å å­è¯ï¼éç½®ç§é¥\n\nå¨Jenkinsæ·»å ä¸ä¸ªæ°çå­è¯ï¼ç±»åä¸ºSSH Username with private keyï¼æåæçæç§ææä»¶åå®¹å¤å¶è¿æ¥\n\n\n\n\n\n4)æµè¯å­è¯æ¯å¦å¯ç¨ æ°å»ºmy-project-sshé¡¹ç®->æºç ç®¡ç->Gitï¼è¿æ¬¡è¦ä½¿ç¨GitlabçSSHè¿æ¥ï¼å¹¶ä¸éæ©SSHå­è¯\n\n\n\n\n\n\n\nåæ ·å°è¯æå»ºé¡¹ç®ï¼å¦æä»£ç å¯ä»¥æ­£å¸¸æåï¼ä»£è¡¨å­è¯éç½®æå!\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\nubuntu@jenkins:/var/lib/jenkins/workspace$ ls -al\ntotal 24\ndrwxr-xr-x  6 jenkins jenkins 4096 Jun 20 17:24 .\ndrwxr-xr-x 18 jenkins jenkins 4096 Jun 20 17:25 ..\ndrwxr-xr-x  3 jenkins jenkins 4096 Jun 20 14:52 my-project\ndrwxr-xr-x  3 jenkins jenkins 4096 Jun 20 17:24 my-project-ssh\ndrwxr-xr-x  2 jenkins jenkins 4096 Jun 20 17:24 my-project-ssh@tmp\ndrwxr-xr-x  2 jenkins jenkins 4096 Jun 20 14:52 my-project@tmp\n',normalizedContent:'# jenkinså­è¯ç®¡ç\n\nå­æ®å¯ä»¥ç¨æ¥å­å¨éè¦å¯æä¿æ¤çæ°æ®åºå¯ç ãgitlabå¯ç ä¿¡æ¯ãdockerç§æä»åºå¯ç ç­ï¼ä»¥ä¾¿ jenkinså¯ä»¥åè¿äºç¬¬ä¸æ¹çåºç¨è¿è¡äº¤äºã\n\n\n# å®è£credentials binding pluginæä»¶\n\nè¦å¨jenkinsä½¿ç¨å­è¯ç®¡çåè½ï¼éè¦å®è£credentials binding pluginæä»¶\n\n\n\nå®è£æä»¶åï¼ç³»ç»ç®¡ç -> manage credentialsï¼å¨è¿éç®¡çææå­è¯\n\n\n\nç¹å» å¨å± -> æ·»å å­è¯ ï¼å¯ä»¥æ·»å çå­è¯æ6ç§:\n\n\n\n * username with passwordï¼ç¨æ·ååå¯ç \n * github appï¼å¯¹æ¥githubåºç¨\n * ssh username with private keyï¼ä½¿ç¨sshç¨æ·åå¯é¥\n * secret fileï¼éè¦ä¿å¯çææ¬æä»¶ï¼ä½¿ç¨æ¶jenkinsä¼å°æä»¶å¤å¶å°ä¸ä¸ªä¸´æ¶ç®å½ä¸­ï¼åå°æä»¶è·¯å¾ è®¾ç½®å°ä¸ä¸ªåéä¸­ï¼ç­æå»ºç»æåï¼æå¤å¶çsecret fileå°±ä¼è¢«å é¤ã\n * secret textï¼éè¦ä¿å­çä¸ä¸ªå å¯çææ¬ä¸²ï¼å¦ééæºå¨äººægithubçapi token\n * certificateï¼éè¿ä¸ä¼ è¯ä¹¦æä»¶çæ¹å¼\n\nå¸¸ç¨çå­è¯ç±»åæ: username with password(ç¨æ·å¯ç ) å ssh username with private key(ssh å¯é¥)\n\næ¥ä¸æ¥ä»¥ä½¿ç¨gitå·¥å·å°gitlabæåé¡¹ç®æºç ä¸ºä¾ï¼æ¼ç¤ºjenkinsçå¦ä½ç®¡çgitlabçå­è¯ã\n\n\n# å®è£gitæä»¶ågitå·¥å·\n\nä¸ºäºè®©jenkinsæ¯æä»gitlabæåæºç ï¼éè¦å®è£gitæä»¶ä»¥åå¨centos7ä¸å®è£gitå·¥å·ã\n\n\n# jenkins git pluginæä»¶å®è£\n\n\n\n\n# centos7ä¸å®è£gitå·¥å·\n\n# å®è£\nyum install git -y\n# å®è£åæ¥ççæ¬\ngit --version\n\n\næç¤º\n\nubuntu server 20.04ç³»ç»èªå¸¦gitå·¥å·æ éå®è£ã\n\n\n# ç¨æ·å¯ç ç±»å\n\n1)åå»ºå­è¯ jenkins-gitlab-checkout-creds\n\njenkins->å­è¯->ç³»ç»->å¨å±å­è¯->æ·»å å­è¯\n\n\n\néæ©username with passwordï¼è¾å¥gitlabçç¨æ·ååå¯ç ï¼ç¹å»"ç¡®å®"ã\n\n\n\n2)æµè¯å­è¯æ¯å¦å¯ç¨\n\nåå»ºä¸ä¸ªfreestyleé¡¹ç®ï¼æ°å»ºä»»å¡->èªç±é£æ ¼é¡¹ç®->ç¡®å®\n\n\n\næ¾å°"æºç ç®¡ç"->"git"ï¼å¨repository urlå¤å¶gitlabä¸­çé¡¹ç®url\n\n\n\n\n\nè¿æ¶ä¼æ¥éè¯´æ æ³è¿æ¥ä»åº!å¨credentialséæ©ååæ·»å çå­è¯å°±ä¸æ¥éå¦\n\n\n\nä¿å­éç½®åï¼ç¹å»"æå»ºå¾æ " å¼å§æå»ºé¡¹ç®\n\n\n\næ¥çæ§å¶å°è¾åºæ¥å¿\n\n\n\næ¥ç/var/lib/jenkins/workspace/ç®å½ï¼åç°å·²ç»ä»gitlabæåæåäºä»£ç å°jenkinsä¸­ã\n\n\n\n\n\n\nÂ \nÂ \n\n\nubuntu@jenkins:/var/lib/jenkins/workspace$ ls -al\ntotal 24\ndrwxr-xr-x  6 jenkins jenkins 4096 jun 20 17:24 .\ndrwxr-xr-x 18 jenkins jenkins 4096 jun 20 17:25 ..\ndrwxr-xr-x  3 jenkins jenkins 4096 jun 20 14:52 my-project\ndrwxr-xr-x  2 jenkins jenkins 4096 jun 20 14:52 my-project@tmp\n\n\n\n# sshå¯é¥ç±»å\n\nsshåå¯ç»å½ç¤ºæå¾\n\n\n\n1)ç»å½jenkinsæå¡å¨ï¼æ§è¡å¦ä¸å½ä»¤çæå¬é¥åç§é¥ï¼-cåæ°æå®å¯é¥æ³¨éåå®¹ï¼å¯ä»¥å¡«å¥é®ç®±å°åã\n\nssh-keygen -t rsa -b 2048 -c "<comment>"\n\n\nä¾å­ï¼\n\nubuntu@jenkins:~$ ssh-keygen -t rsa -b 2048 -c "<jenkins@ieooc.com>"\ngenerating public/private rsa key pair.\nenter file in which to save the key (/home/ubuntu/.ssh/id_rsa):\ncreated directory \'/home/ubuntu/.ssh\'.\nenter passphrase (empty for no passphrase):\nenter same passphrase again:\nyour identification has been saved in /home/ubuntu/.ssh/id_rsa\nyour public key has been saved in /home/ubuntu/.ssh/id_rsa.pub\nthe key fingerprint is:\nsha256:azn4tuxlmbwm5hd25gaxran4kgttgee8yg3/8ufs8m8 <jenkins@ieooc.com>\nthe key\'s randomart image is:\n+---[rsa 2048]----+\n|               ..|\n|        .   . ...|\n|       ..o.. o. .|\n|       o==..oo  o|\n|       os**.o =..|\n|       .*=+= + . |\n|      .oo=..o    |\n|      .*.*o .e   |\n|       .=.++     |\n+----[sha256]-----+\n\n\næ³¨æ\n\nä¸ºäºå®ç°åå¯ç»å½ææï¼çæè¯ä¹¦æ¶è¦æ±è¾å¥è¯ä¹¦å¯ç æ­¥éª¤æ¶ç´æ¥åè½¦è·³è¿æ éè®¾ç½®å¯ç ã\n\nå¨/home/ubuntu/.ssh/ç®å½ä¿å­äºå¬é¥åä½¿ç¨\n\nubuntu@jenkins:~/.ssh$ ls\nid_rsa  id_rsa.pub\n\n\n * id_rsaï¼ç§é¥æä»¶\n * id_rsa.pubï¼å¬é¥æä»¶\n\n2)æçæçå¬é¥æ¾å¨gitlabä¸­\n\nä»¥rootè´¦æ·ç»å½gitlab->ç¹å»å¤´å->edit profile->ssh keys å¤å¶åæid_rsa.pubæä»¶çåå®¹å°è¿éï¼ç¹å»"add key"\n\n\n\n3)å¨jenkinsä¸­æ·»å å­è¯ï¼éç½®ç§é¥\n\nå¨jenkinsæ·»å ä¸ä¸ªæ°çå­è¯ï¼ç±»åä¸ºssh username with private keyï¼æåæçæç§ææä»¶åå®¹å¤å¶è¿æ¥\n\n\n\n\n\n4)æµè¯å­è¯æ¯å¦å¯ç¨ æ°å»ºmy-project-sshé¡¹ç®->æºç ç®¡ç->gitï¼è¿æ¬¡è¦ä½¿ç¨gitlabçsshè¿æ¥ï¼å¹¶ä¸éæ©sshå­è¯\n\n\n\n\n\n\n\nåæ ·å°è¯æå»ºé¡¹ç®ï¼å¦æä»£ç å¯ä»¥æ­£å¸¸æåï¼ä»£è¡¨å­è¯éç½®æå!\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\nubuntu@jenkins:/var/lib/jenkins/workspace$ ls -al\ntotal 24\ndrwxr-xr-x  6 jenkins jenkins 4096 jun 20 17:24 .\ndrwxr-xr-x 18 jenkins jenkins 4096 jun 20 17:25 ..\ndrwxr-xr-x  3 jenkins jenkins 4096 jun 20 14:52 my-project\ndrwxr-xr-x  3 jenkins jenkins 4096 jun 20 17:24 my-project-ssh\ndrwxr-xr-x  2 jenkins jenkins 4096 jun 20 17:24 my-project-ssh@tmp\ndrwxr-xr-x  2 jenkins jenkins 4096 jun 20 14:52 my-project@tmp\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Mavenå®è£åéç½®",frontmatter:{title:"Mavenå®è£åéç½®",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/c15beb/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/08.Maven%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE.html",relativePath:"20.DevOps/01.å¥é¨/08.Mavenå®è£åéç½®.md",key:"v-69282982",path:"/pages/c15beb/",headers:[{level:2,title:"å®è£Maven",slug:"å®è£maven",normalizedTitle:"å®è£maven",charIndex:33},{level:2,title:"å¨å±å·¥å·éç½®å³èJDKåMaven",slug:"å¨å±å·¥å·éç½®å³èjdkåmaven",normalizedTitle:"å¨å±å·¥å·éç½®å³èjdkåmaven",charIndex:1087},{level:2,title:"æ·»å Jenkinså¨å±åé",slug:"æ·»å jenkinså¨å±åé",normalizedTitle:"æ·»å jenkinså¨å±åé",charIndex:1185},{level:2,title:"ä¿®æ¹Mavençsettings.xml",slug:"ä¿®æ¹mavençsettings-xml",normalizedTitle:"ä¿®æ¹mavençsettings.xml",charIndex:1271},{level:2,title:"æµè¯Mavenæ¯å¦éç½®æå",slug:"æµè¯mavenæ¯å¦éç½®æå",normalizedTitle:"æµè¯mavenæ¯å¦éç½®æå",charIndex:1618}],headersStr:"å®è£Maven å¨å±å·¥å·éç½®å³èJDKåMaven æ·»å Jenkinså¨å±åé ä¿®æ¹Mavençsettings.xml æµè¯Mavenæ¯å¦éç½®æå",content:'# Mavenå®è£åéç½®\n\nå¨Jenkinséææå¡å¨ä¸ï¼æä»¬éè¦å®è£Mavenæ¥ç¼è¯åæåé¡¹ç®ã\n\n\n# å®è£Maven\n\nä¸è½½maven\n\nwget https://mirrors.bfsu.edu.cn/apache/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.tar.gz\n\n\nè§£åmaven\n\nsudo tar -zxvf apache-maven-3.8.1-bin.tar.gz -C /usr/local/\n\n\néç½®ç¯å¢åé\n\nsudo vi /etc/profile\n\n\nææ¡£æåé¢è¿½å å¦ä¸åå®¹ï¼\n\nexport JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nexport MAVEN_HOME=/usr/local/apache-maven-3.8.1\nexport PATH=$JAVA_HOME/bin:$MAVEN_HOME/bin:$PATH:.\n\n\næ£æ¥éç½®æ¯å¦æ­£ç¡®\n\n# éç½®çæ\nubuntu@jenkins:~$ source /etc/profile   \n# æ£æ¥java \nubuntu@jenkins:~$ java -version \nopenjdk version "11.0.11" 2021-04-20\nOpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)\nOpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)\n# æ£æ¥maven\nubuntu@jenkins:~$ mvn -v \nApache Maven 3.8.1 (05c21c65bdfed0f71a2f2ada8b84da59348c4c5d)\nMaven home: /usr/local/apache-maven-3.8.1\nJava version: 11.0.11, vendor: Ubuntu, runtime: /usr/lib/jvm/java-11-openjdk-amd64\nDefault locale: en_US, platform encoding: UTF-8\nOS name: "linux", version: "5.4.0-74-generic", arch: "amd64", family: "unix"\n\n\n\n# å¨å±å·¥å·éç½®å³èJDKåMaven\n\nJenkins->å¨å±å·¥å·éç½®->JDK->æ°å¢JDKï¼éç½®å¦ä¸:\n\n\n\nJenkins->å¨å±å·¥å·éç½®->JDK->æ°å¢Mavenï¼éç½®å¦ä¸:\n\n\n\n\n# æ·»å Jenkinså¨å±åé\n\nç³»ç»ç®¡ç->ç³»ç»éç½®->å¨å±å±æ§\n\næ·»å ä¸ä¸ªå¨å±åé JAVA_HOMEãM2_HOMEãPATH+EXTRA\n\n\n\nç¹å»"ä¿å­"ã\n\n\n# ä¿®æ¹Mavençsettings.xml\n\næå¼ maven çéç½®æä»¶ï¼maven å®è£ç®å½çï¼\n\nsudo vi /usr/local/apache-maven-3.8.1/conf/settings.xml\n\n\nå¨<mirrors></mirrors>æ ç­¾ä¸­æ·»å  mirror å­èç¹:\n\n<mirror>\n  <id>aliyunmaven</id>\n  <mirrorOf>*</mirrorOf>\n  <name>é¿éäºå¬å±ä»åº</name>\n  <url>https://maven.aliyun.com/repository/public</url>\n</mirror>\n\n\næç¤º\n\né¿éäºä»åºæå¡ï¼https://maven.aliyun.com/mvn/guide\n\n\n# æµè¯Mavenæ¯å¦éç½®æå\n\nä¿®æ¹my-projecté¡¹ç®éç½®\n\n\n\næå»º->å¢å æå»ºæ­¥éª¤->æ§è¡ Shell\n\n\n\nè¾å¥æå»ºå½ä»¤ï¼mvn clean package\n\n\n\nåæ¬¡æå»ºï¼å¦æå¯ä»¥æé¡¹ç®ææwaråï¼ä»£è¡¨mavenç¯å¢éç½®æåå¦!\n\n...\nDownloaded from aliyunmaven: https://maven.aliyun.com/repository/public/com/thoughtworks/xstream/xstream/1.4.10/xstream-1.4.10.jar (590 kB at 516 kB/s)\nDownloaded from aliyunmaven: https://maven.aliyun.com/repository/public/org/codehaus/plexus/plexus-utils/3.1.0/plexus-utils-3.1.0.jar (262 kB at 216 kB/s)\n[INFO] Packaging webapp\n[INFO] Assembling webapp [my-project] in [/var/lib/jenkins/workspace/my-project/target/my-project]\n[INFO] Processing war project\n[INFO] Copying webapp resources [/var/lib/jenkins/workspace/my-project/src/main/webapp]\n[INFO] Webapp assembled in [44 msecs]\n[INFO] Building war: /var/lib/jenkins/workspace/my-project/target/my-project.war\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  11.555 s\n[INFO] Finished at: 2021-06-20T20:21:58+08:00\n[INFO] ------------------------------------------------------------------------\nFinished: SUCCESS\n',normalizedContent:'# mavenå®è£åéç½®\n\nå¨jenkinséææå¡å¨ä¸ï¼æä»¬éè¦å®è£mavenæ¥ç¼è¯åæåé¡¹ç®ã\n\n\n# å®è£maven\n\nä¸è½½maven\n\nwget https://mirrors.bfsu.edu.cn/apache/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.tar.gz\n\n\nè§£åmaven\n\nsudo tar -zxvf apache-maven-3.8.1-bin.tar.gz -c /usr/local/\n\n\néç½®ç¯å¢åé\n\nsudo vi /etc/profile\n\n\nææ¡£æåé¢è¿½å å¦ä¸åå®¹ï¼\n\nexport java_home=/usr/lib/jvm/java-11-openjdk-amd64\nexport maven_home=/usr/local/apache-maven-3.8.1\nexport path=$java_home/bin:$maven_home/bin:$path:.\n\n\næ£æ¥éç½®æ¯å¦æ­£ç¡®\n\n# éç½®çæ\nubuntu@jenkins:~$ source /etc/profile   \n# æ£æ¥java \nubuntu@jenkins:~$ java -version \nopenjdk version "11.0.11" 2021-04-20\nopenjdk runtime environment (build 11.0.11+9-ubuntu-0ubuntu2.20.04)\nopenjdk 64-bit server vm (build 11.0.11+9-ubuntu-0ubuntu2.20.04, mixed mode, sharing)\n# æ£æ¥maven\nubuntu@jenkins:~$ mvn -v \napache maven 3.8.1 (05c21c65bdfed0f71a2f2ada8b84da59348c4c5d)\nmaven home: /usr/local/apache-maven-3.8.1\njava version: 11.0.11, vendor: ubuntu, runtime: /usr/lib/jvm/java-11-openjdk-amd64\ndefault locale: en_us, platform encoding: utf-8\nos name: "linux", version: "5.4.0-74-generic", arch: "amd64", family: "unix"\n\n\n\n# å¨å±å·¥å·éç½®å³èjdkåmaven\n\njenkins->å¨å±å·¥å·éç½®->jdk->æ°å¢jdkï¼éç½®å¦ä¸:\n\n\n\njenkins->å¨å±å·¥å·éç½®->jdk->æ°å¢mavenï¼éç½®å¦ä¸:\n\n\n\n\n# æ·»å jenkinså¨å±åé\n\nç³»ç»ç®¡ç->ç³»ç»éç½®->å¨å±å±æ§\n\næ·»å ä¸ä¸ªå¨å±åé java_homeãm2_homeãpath+extra\n\n\n\nç¹å»"ä¿å­"ã\n\n\n# ä¿®æ¹mavençsettings.xml\n\næå¼ maven çéç½®æä»¶ï¼maven å®è£ç®å½çï¼\n\nsudo vi /usr/local/apache-maven-3.8.1/conf/settings.xml\n\n\nå¨<mirrors></mirrors>æ ç­¾ä¸­æ·»å  mirror å­èç¹:\n\n<mirror>\n  <id>aliyunmaven</id>\n  <mirrorof>*</mirrorof>\n  <name>é¿éäºå¬å±ä»åº</name>\n  <url>https://maven.aliyun.com/repository/public</url>\n</mirror>\n\n\næç¤º\n\né¿éäºä»åºæå¡ï¼https://maven.aliyun.com/mvn/guide\n\n\n# æµè¯mavenæ¯å¦éç½®æå\n\nä¿®æ¹my-projecté¡¹ç®éç½®\n\n\n\næå»º->å¢å æå»ºæ­¥éª¤->æ§è¡ shell\n\n\n\nè¾å¥æå»ºå½ä»¤ï¼mvn clean package\n\n\n\nåæ¬¡æå»ºï¼å¦æå¯ä»¥æé¡¹ç®ææwaråï¼ä»£è¡¨mavenç¯å¢éç½®æåå¦!\n\n...\ndownloaded from aliyunmaven: https://maven.aliyun.com/repository/public/com/thoughtworks/xstream/xstream/1.4.10/xstream-1.4.10.jar (590 kb at 516 kb/s)\ndownloaded from aliyunmaven: https://maven.aliyun.com/repository/public/org/codehaus/plexus/plexus-utils/3.1.0/plexus-utils-3.1.0.jar (262 kb at 216 kb/s)\n[info] packaging webapp\n[info] assembling webapp [my-project] in [/var/lib/jenkins/workspace/my-project/target/my-project]\n[info] processing war project\n[info] copying webapp resources [/var/lib/jenkins/workspace/my-project/src/main/webapp]\n[info] webapp assembled in [44 msecs]\n[info] building war: /var/lib/jenkins/workspace/my-project/target/my-project.war\n[info] ------------------------------------------------------------------------\n[info] build success\n[info] ------------------------------------------------------------------------\n[info] total time:  11.555 s\n[info] finished at: 2021-06-20t20:21:58+08:00\n[info] ------------------------------------------------------------------------\nfinished: success\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Tomcatå®è£åéç½®",frontmatter:{title:"Tomcatå®è£åéç½®",date:"2022-02-09T13:05:09.000Z",permalink:"/pages/9d384b/"},regularPath:"/20.DevOps/01.%E5%85%A5%E9%97%A8/09.Tomcat%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE.html",relativePath:"20.DevOps/01.å¥é¨/09.Tomcatå®è£åéç½®.md",key:"v-fae7c1bc",path:"/pages/9d384b/",headers:[{level:2,title:"å®è£tomcat",slug:"å®è£tomcat",normalizedTitle:"å®è£tomcat",charIndex:18},{level:2,title:"éç½®Tomcatç¨æ·è§è²æé",slug:"éç½®tomcatç¨æ·è§è²æé",normalizedTitle:"éç½®tomcatç¨æ·è§è²æé",charIndex:340}],headersStr:"å®è£tomcat éç½®Tomcatç¨æ·è§è²æé",content:'# Tomcatå®è£åéç½®\n\n\n# å®è£tomcat\n\nå®è£jdk\n\nsudo apt install openjdk-11-jdk\n\n\nä¸è½½\n\nwget https://mirrors.bfsu.edu.cn/apache/tomcat/tomcat-9/v9.0.48/bin/apache-tomcat-9.0.48.tar.gz\n\n\nè§£å\n\ntar -zxvf apache-tomcat-9.0.48.tar.gz\n\n\nå¯å¨\n\n/home/ubuntu/apache-tomcat-9.0.48/bin/startup.sh\n\n\nè®¿é®å°åï¼http://192.168.50.103:8080\n\n\n\næç¤º\n\nå¦ææ¯centosè¯·å³é­é²ç«å¢ï¼æèæå¼8080ç«¯å£\n\n\n# éç½®Tomcatç¨æ·è§è²æé\n\né»è®¤æåµä¸Tomcatæ¯æ²¡æéç½®ç¨æ·è§è²æéï¼ç¹å»manager webappé¡µé¢æ¾ç¤º403ã\n\n\n\nä¿®æ¹tomcatä»¥ä¸éç½®tomcat-users.xmlï¼æ·»å ç¨æ·åæé\n\nsudo vi /home/ubuntu/apache-tomcat-9.0.48/conf/tomcat-users.xml\n\n\nåå®¹å¦ä¸:\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n<tomcat-users>\n    <role rolename="role1"/>\n    <role rolename="manager-script"/>\n    <role rolename="manager-gui"/>\n    <role rolename="manager-status"/>\n    <role rolename="admin-gui"/>\n    <role rolename="admin-script"/>\n    <user username="tomcat" password="tomcat" roles="manager-gui,manager-script,tomcat,admin-gui,admin-script"/>\n</tomcat-users>\n\n\nç¨æ·åå¯ç é½æ¯:tomcat\n\næ³¨æ\n\nä¸ºäºè½å¤åæéç½®çç¨æ·ç»å½å°Tomcatï¼è¿éè¦ä¿®æ¹ä»¥ä¸éç½®allowæ­£åè¡¨è¾¾å¼ï¼åè®¸æ¬å°ip\n\nvi /home/ubuntu/apache-tomcat-9.0.48/webapps/manager/META-INF/context.xml\n\n\n\n\nÂ \n\n\n  <Valve className="org.apache.catalina.valves.RemoteAddrValve"\n         allow="192\\.\\168\\.\\50\\.\\d+|::1|0:0:0:0:0:0:0:1" />\n\n\néå¯tomcat\n\n# åæ­¢\n/home/ubuntu/apache-tomcat-9.0.48/bin/shutdown.sh\n# å¯å¨\n/home/ubuntu/apache-tomcat-9.0.48/bin/startup.sh\n\n\nè®¿é®: http://192.168.50.103:8080/manager/html ï¼è¾å¥tomcatåtomcatï¼çå°ä»¥ä¸é¡µé¢ä»£è¡¨æåå¦\n\n',normalizedContent:'# tomcatå®è£åéç½®\n\n\n# å®è£tomcat\n\nå®è£jdk\n\nsudo apt install openjdk-11-jdk\n\n\nä¸è½½\n\nwget https://mirrors.bfsu.edu.cn/apache/tomcat/tomcat-9/v9.0.48/bin/apache-tomcat-9.0.48.tar.gz\n\n\nè§£å\n\ntar -zxvf apache-tomcat-9.0.48.tar.gz\n\n\nå¯å¨\n\n/home/ubuntu/apache-tomcat-9.0.48/bin/startup.sh\n\n\nè®¿é®å°åï¼http://192.168.50.103:8080\n\n\n\næç¤º\n\nå¦ææ¯centosè¯·å³é­é²ç«å¢ï¼æèæå¼8080ç«¯å£\n\n\n# éç½®tomcatç¨æ·è§è²æé\n\né»è®¤æåµä¸tomcatæ¯æ²¡æéç½®ç¨æ·è§è²æéï¼ç¹å»manager webappé¡µé¢æ¾ç¤º403ã\n\n\n\nä¿®æ¹tomcatä»¥ä¸éç½®tomcat-users.xmlï¼æ·»å ç¨æ·åæé\n\nsudo vi /home/ubuntu/apache-tomcat-9.0.48/conf/tomcat-users.xml\n\n\nåå®¹å¦ä¸:\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n<tomcat-users>\n    <role rolename="role1"/>\n    <role rolename="manager-script"/>\n    <role rolename="manager-gui"/>\n    <role rolename="manager-status"/>\n    <role rolename="admin-gui"/>\n    <role rolename="admin-script"/>\n    <user username="tomcat" password="tomcat" roles="manager-gui,manager-script,tomcat,admin-gui,admin-script"/>\n</tomcat-users>\n\n\nç¨æ·åå¯ç é½æ¯:tomcat\n\næ³¨æ\n\nä¸ºäºè½å¤åæéç½®çç¨æ·ç»å½å°tomcatï¼è¿éè¦ä¿®æ¹ä»¥ä¸éç½®allowæ­£åè¡¨è¾¾å¼ï¼åè®¸æ¬å°ip\n\nvi /home/ubuntu/apache-tomcat-9.0.48/webapps/manager/meta-inf/context.xml\n\n\n\n\nÂ \n\n\n  <valve classname="org.apache.catalina.valves.remoteaddrvalve"\n         allow="192\\.\\168\\.\\50\\.\\d+|::1|0:0:0:0:0:0:0:1" />\n\n\néå¯tomcat\n\n# åæ­¢\n/home/ubuntu/apache-tomcat-9.0.48/bin/shutdown.sh\n# å¯å¨\n/home/ubuntu/apache-tomcat-9.0.48/bin/startup.sh\n\n\nè®¿é®: http://192.168.50.103:8080/manager/html ï¼è¾å¥tomcatåtomcatï¼çå°ä»¥ä¸é¡µé¢ä»£è¡¨æåå¦\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinsæå»ºMavené¡¹ç®",frontmatter:{title:"Jenkinsæå»ºMavené¡¹ç®",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/5448da/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/01.Jenkins%E6%9E%84%E5%BB%BAMaven%E9%A1%B9%E7%9B%AE.html",relativePath:"20.DevOps/02.å®æ/01.Jenkinsæå»ºMavené¡¹ç®.md",key:"v-7c133ad0",path:"/pages/5448da/",headers:[{level:2,title:"Jenkinsæå»ºçé¡¹ç®ç±»åä»ç»",slug:"jenkinsæå»ºçé¡¹ç®ç±»åä»ç»",normalizedTitle:"jenkinsæå»ºçé¡¹ç®ç±»åä»ç»",charIndex:23},{level:2,title:"èªç±é£æ ¼é¡¹ç®æå»º",slug:"èªç±é£æ ¼é¡¹ç®æå»º",normalizedTitle:"èªç±é£æ ¼é¡¹ç®æå»º",charIndex:255},{level:3,title:"æåä»£ç ",slug:"æåä»£ç ",normalizedTitle:"æåä»£ç ",charIndex:296},{level:3,title:"ç¼è¯æå",slug:"ç¼è¯æå",normalizedTitle:"ç¼è¯æå",charIndex:360},{level:3,title:"é¨ç½²",slug:"é¨ç½²",normalizedTitle:"é¨ç½²",charIndex:310},{level:3,title:"æ¼ç¤ºæ¹å¨ä»£ç åçæç»­éæ",slug:"æ¼ç¤ºæ¹å¨ä»£ç åçæç»­éæ",normalizedTitle:"æ¼ç¤ºæ¹å¨ä»£ç åçæç»­éæ",charIndex:2093},{level:2,title:"Mavené¡¹ç®æå»º",slug:"mavené¡¹ç®æå»º",normalizedTitle:"mavené¡¹ç®æå»º",charIndex:2164},{level:2,title:"Pipelineæµæ°´çº¿é¡¹ç®æå»º",slug:"pipelineæµæ°´çº¿é¡¹ç®æå»º",normalizedTitle:"pipelineæµæ°´çº¿é¡¹ç®æå»º",charIndex:2263},{level:3,title:"Pipelineç®ä»",slug:"pipelineç®ä»",normalizedTitle:"pipelineç®ä»",charIndex:2283},{level:2,title:"å®è£Pipelineæä»¶",slug:"å®è£pipelineæä»¶",normalizedTitle:"å®è£pipelineæä»¶",charIndex:2964},{level:2,title:"Pipelineè¯­æ³å¿«éå¥é¨",slug:"pipelineè¯­æ³å¿«éå¥é¨",normalizedTitle:"pipelineè¯­æ³å¿«éå¥é¨",charIndex:3021},{level:3,title:"Declarativeå£°æå¼-Pipeline",slug:"declarativeå£°æå¼-pipeline",normalizedTitle:"declarativeå£°æå¼-pipeline",charIndex:3040},{level:3,title:"Scripted Pipelineèæ¬å¼-Pipeline",slug:"scripted-pipelineèæ¬å¼-pipeline",normalizedTitle:"scripted pipelineèæ¬å¼-pipeline",charIndex:3818},{level:3,title:"Pipeline Script from SCM",slug:"pipeline-script-from-scm",normalizedTitle:"pipeline script from scm",charIndex:6770}],headersStr:"Jenkinsæå»ºçé¡¹ç®ç±»åä»ç» èªç±é£æ ¼é¡¹ç®æå»º æåä»£ç  ç¼è¯æå é¨ç½² æ¼ç¤ºæ¹å¨ä»£ç åçæç»­éæ Mavené¡¹ç®æå»º Pipelineæµæ°´çº¿é¡¹ç®æå»º Pipelineç®ä» å®è£Pipelineæä»¶ Pipelineè¯­æ³å¿«éå¥é¨ Declarativeå£°æå¼-Pipeline Scripted Pipelineèæ¬å¼-Pipeline Pipeline Script from SCM",content:"# Jenkinsæå»ºMavené¡¹ç®\n\n\n# Jenkinsæå»ºçé¡¹ç®ç±»åä»ç»\n\nJenkinsä¸­èªå¨æå»ºé¡¹ç®çç±»åæå¾å¤ï¼å¸¸ç¨çæä»¥ä¸ä¸ç§:\n\n * èªç±é£æ ¼è½¯ä»¶é¡¹ç®(FreeStyle Project)\n * Mavené¡¹ç®(Maven Project)\n * æµæ°´çº¿é¡¹ç®(Pipeline Project)\n\næ¯ç§ç±»åçæå»ºå¶å®é½å¯ä»¥å®æä¸æ ·çæå»ºè¿ç¨ä¸ç»æï¼åªæ¯å¨æä½æ¹å¼ãçµæ´»åº¦ç­æ¹é¢ææåºå«ï¼å¨ å®éå¼åä¸­å¯ä»¥æ ¹æ®èªå·±çéæ±åä¹ æ¯æ¥éæ©ã(PS:ä¸ªäººæ¨èä½¿ç¨æµæ°´çº¿ç±»åï¼å ä¸ºçµæ´»åº¦éå¸¸é«)\n\n\n# èªç±é£æ ¼é¡¹ç®æå»º\n\nä¸é¢æ¼ç¤ºåå»ºä¸ä¸ªèªç±é£æ ¼é¡¹ç®æ¥å®æé¡¹ç®çéæè¿ç¨:\n\næç¤º\n\næåä»£ç ->ç¼è¯->æå->é¨ç½²\n\n\n# æåä»£ç \n\n1)åå»ºé¡¹ç®\n\n\n\n2)éç½®æºç ç®¡çï¼ä»gitlabæåä»£ç \n\n\n\n\n# ç¼è¯æå\n\næç¤º\n\næå»º->æ·»å æå»ºæ­¥éª¤->æ§è¡ Shell\n\necho \"å¼å§ç¼è¯åæå\" \nmvn clean package \necho \"ç¼è¯åæåç»æ\"\n\n\n\n\n\n# é¨ç½²\n\næé¡¹ç®é¨ç½²å°è¿ç¨çTomcatéé¢\n\n1)å®è£ Deploy to containeræä»¶\n\næç¤º\n\nJenkinsæ¬èº«æ æ³å®ç°è¿ç¨é¨ç½²å°Tomcatçåè½ï¼éè¦å®è£Deploy to containeræä»¶å®ç°\n\n\n\n2)æ·»å Tomcatç¨æ·å­è¯ jenkins-tomcat-deploy-creds\n\n\n\n3)æ·»å æå»ºåæä½\n\n\n\n\n\nç¹å»\"ç«å³æå»º\"ï¼å¼å§æå»ºè¿ç¨\n\n[INFO] --- maven-compiler-plugin:3.8.0:testCompile (default-testCompile) @ web-demo ---\n[INFO] No sources to compile\n[INFO] \n[INFO] --- maven-surefire-plugin:2.22.1:test (default-test) @ web-demo ---\n[INFO] No tests to run.\n[INFO] \n[INFO] --- maven-war-plugin:3.2.2:war (default-war) @ web-demo ---\n[INFO] Packaging webapp\n[INFO] Assembling webapp [web-demo] in [/var/lib/jenkins/workspace/web-demo/target/web-demo]\n[INFO] Processing war project\n[INFO] Copying webapp resources [/var/lib/jenkins/workspace/web-demo/src/main/webapp]\n[INFO] Webapp assembled in [61 msecs]\n[INFO] Building war: /var/lib/jenkins/workspace/web-demo/target/web-demo.war\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  4.462 s\n[INFO] Finished at: 2021-06-24T23:05:22+08:00\n[INFO] ------------------------------------------------------------------------\n+ echo ç¼è¯åæåç»æ\nç¼è¯åæåç»æ\n[DeployPublisher][INFO] Attempting to deploy 1 war file(s)\n[DeployPublisher][INFO] Deploying /var/lib/jenkins/workspace/web-demo/target/web-demo.war to container Tomcat 9.x Remote with context null\n  [/var/lib/jenkins/workspace/web-demo/target/web-demo.war] is not deployed. Doing a fresh deployment.\n  Deploying [/var/lib/jenkins/workspace/web-demo/target/web-demo.war]\nFinished: SUCCESS\n\n\n4)é¨ç½²æååï¼è®¿é®é¡¹ç® http://192.168.50.103:8080/web-demo/\n\n\n\n\n# æ¼ç¤ºæ¹å¨ä»£ç åçæç»­éæ\n\n1)IDEAä¸­æºç ä¿®æ¹å¹¶æäº¤å°gitlab\n\n2)å¨Jenkinsä¸­é¡¹ç®éæ°æå»º\n\n3)è®¿é®Tomcat\n\n\n# Mavené¡¹ç®æå»º\n\n1)å®è£Maven Integrationæä»¶\n\n\n\n2)åå»ºMavené¡¹ç®\n\n\n\n3)éç½®é¡¹ç® æåä»£ç åè¿ç¨é¨ç½²çè¿ç¨åèªç±é£æ ¼é¡¹ç®ä¸æ ·ï¼åªæ¯\"æå»º\"é¨åä¸å\n\n\n\n\n# Pipelineæµæ°´çº¿é¡¹ç®æå»º\n\n\n# Pipelineç®ä»\n\n1)æ¦å¿µ\n\nPipelineï¼ç®åæ¥è¯´å°±æ¯ä¸å¥è¿è¡å¨ Jenkins ä¸çå·¥ä½æµæ¡æ¶ï¼å°åæ¥ç¬ç«è¿è¡äºåä¸ªæèå¤ä¸ªèç¹çä»»å¡è¿æ¥èµ·æ¥ï¼å®ç°åä¸ªä»»å¡é¾ä»¥å®æçå¤ææµç¨ç¼æåå¯è§åçå·¥ä½ã\n\n2)ä½¿ç¨Pipelineæä»¥ä¸å¥½å¤(æ¥èªç¿»è¯èªå®æ¹ææ¡£):\n\n * ä»£ç :Pipelineä»¥ä»£ç çå½¢å¼å®ç°ï¼éå¸¸è¢«æ£å¥æºä»£ç æ§å¶ï¼ä½¿å¢éè½å¤ç¼è¾ï¼å®¡æ¥åè¿­ä»£å¶ä¼ éæµç¨ã\n * æä¹:æ è®ºæ¯è®¡ååçè¿æ¯è®¡åå¤çæå¡å¨éå¯ï¼Pipelineé½æ¯å¯æ¢å¤çã\n * å¯åæ­¢:Pipelineå¯æ¥ æ¶äº¤äºå¼è¾å¥ï¼ä»¥ç¡®å®æ¯å¦ç»§ç»­æ§è¡Pipelineã\n * å¤åè½:Pipelineæ¯æç°å®ä¸çä¸­å¤æçæç»­äº¤ä»è¦æ±ãå®æ¯æfork/joinãå¾ªç¯æ§è¡ï¼å¹¶è¡æ§è¡ä»»å¡çåè½ã\n * å¯æ©å±:Pipelineæä»¶æ¯æå¶DSLçèªå®ä¹æ©å± ä»¥åä¸å¶ä»æä»¶éæçå¤ä¸ªéé¡¹ã\n\n3)å¦ä½åå»º Jenkins Pipelineå¢?\n\n * Pipeline èæ¬æ¯ç± Groovy è¯­è¨å®ç°çï¼ä½æ¯æä»¬æ²¡å¿è¦åç¬å»å­¦ä¹  Groovy\n * Pipeline æ¯æä¸¤ç§è¯­æ³:Declarative(å£°æå¼)å Scripted Pipeline(èæ¬å¼)è¯­æ³\n * Pipeline ä¹æä¸¤ç§åå»ºæ¹æ³:å¯ä»¥ç´æ¥å¨ Jenkins ç Web UI çé¢ä¸­è¾å¥èæ¬;ä¹å¯ä»¥éè¿åå»ºä¸ ä¸ª Jenkinsfile èæ¬æä»¶æ¾å¥é¡¹ç®æºç åºä¸­(ä¸è¬æä»¬é½æ¨èå¨ Jenkins ä¸­ç´æ¥ä»æºä»£ç æ§å¶(SCM) ä¸­ç´æ¥è½½å¥ Jenkinsfile Pipeline è¿ç§æ¹æ³)ã\n\n\n# å®è£Pipelineæä»¶\n\næä»¶ç®¡ç->å¯éæä»¶\n\n\n\nå®è£æä»¶åï¼åå»ºé¡¹ç®çæ¶åå¤äºâæµæ°´çº¿âç±»å\n\n\n\n\n# Pipelineè¯­æ³å¿«éå¥é¨\n\n\n# Declarativeå£°æå¼-Pipeline\n\nåå»ºé¡¹ç®\n\n\n\næµæ°´çº¿->éæ©HelloWorldæ¨¡æ¿\n\n\n\nçæåå®¹å¦ä¸:\n\npipeline {\n    agent any\n\n    stages {\n        stage('Hello') {\n            steps {\n                echo 'Hello World'\n            }\n        }\n    }\n}\n\n\nstages:ä»£è¡¨æ´ä¸ªæµæ°´çº¿çæææ§è¡é¶æ®µãéå¸¸stagesåªæ1ä¸ªï¼éé¢åå«å¤ä¸ªstage\n\nstage:ä»£è¡¨æµæ°´çº¿ä¸­çæä¸ªé¶æ®µï¼å¯è½åºç°nä¸ªãä¸è¬åä¸ºæåä»£ç ï¼ç¼è¯æå»ºï¼é¨ç½²ç­é¶æ®µã\n\nsteps:ä»£è¡¨ä¸ä¸ªé¶æ®µåéè¦æ§è¡çé»è¾ãstepséé¢æ¯shellèæ¬ï¼gitæåä»£ç ï¼sshè¿ç¨åå¸ç­ä»»æåå®¹ã ç¼åä¸ä¸ªç®åå£°æå¼Pipeline:\n\nç¼åä¸ä¸ªç®åå£°æå¼Pipeline:\n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                echo 'æåä»£ç '\n            }\n        }\n        stage('Build') {\n            steps {\n                echo 'ç¼è¯æå»º'\n            }\n        }\n        stage('Deoloy') {\n            steps {\n                echo 'é¡¹ç®é¨ç½²'\n            }\n        }\n    }\n}\n\n\nç¹å»æå»ºï¼å¯ä»¥çå°æ´ä¸ªæå»ºè¿ç¨\n\n\n\n\n# Scripted Pipelineèæ¬å¼-Pipeline\n\nåå»ºé¡¹ç®\n\n\n\nè¿æ¬¡éæ©\"Scripted Pipeline\"\n\nnode {\n    def mvnHome\n    stage('Preparation') { // for display purposes\n        // Get some code from a GitHub repository\n        git 'https://github.com/jglick/simple-maven-project-with-tests.git'\n        // Get the Maven tool.\n        // ** NOTE: This 'M3' Maven tool must be configured\n        // **       in the global configuration.\n        mvnHome = tool 'M3'\n    }\n    stage('Build') {\n        // Run the maven build\n        withEnv([\"MVN_HOME=$mvnHome\"]) {\n            if (isUnix()) {\n                sh '\"$MVN_HOME/bin/mvn\" -Dmaven.test.failure.ignore clean package'\n            } else {\n                bat(/\"%MVN_HOME%\\bin\\mvn\" -Dmaven.test.failure.ignore clean package/)\n            }\n        }\n    }\n    stage('Results') {\n        junit '**/target/surefire-reports/TEST-*.xml'\n        archiveArtifacts 'target/*.jar'\n    }\n}\n\n\n * Node:èç¹ï¼ä¸ä¸ª Node å°±æ¯ä¸ä¸ª Jenkins èç¹ï¼Master æè Agentï¼æ¯æ§è¡ Step çå·ä½è¿è¡ ç¯å¢ï¼åç»­è®²å°JenkinsçMaster-Slaveæ¶æçæ¶åç¨å°ã\n * Stage:é¶æ®µï¼ä¸ä¸ª Pipeline å¯ä»¥ååä¸ºè¥å¹²ä¸ª Stageï¼æ¯ä¸ª Stage ä»£è¡¨ä¸ç»æä½ï¼æ¯å¦: BuildãTestãDeployï¼Stage æ¯ä¸ä¸ªé»è¾åç»çæ¦å¿µã\n * Step:æ­¥éª¤ï¼Step æ¯æåºæ¬çæä½ååï¼å¯ä»¥æ¯æå°ä¸å¥è¯ï¼ä¹å¯ä»¥æ¯æå»ºä¸ä¸ª Docker éåï¼ ç±åç±» Jenkins æä»¶æä¾ï¼æ¯å¦å½ä»¤:sh âmakeâï¼å°±ç¸å½äºæä»¬å¹³æ¶ shell ç»ç«¯ä¸­æ§è¡ make å½ä»¤ ä¸æ ·ã\n\nç¼åä¸ä¸ªç®åçèæ¬å¼Pipeline\n\nnode {\n    def mvnHome\n    stage('Checkout') { // for display purposes\n        echo 'æåä»£ç '\n    }\n    stage('Build') {\n        echo 'ç¼è¯æå»º'\n    }\n    stage('Deoloy') {\n        echo 'é¡¹ç®é¨ç½²'\n    }\n}\n\n\næå»ºç»æåå£°æå¼ä¸æ ·!\n\næåä»£ç \n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n    }\n}\n\n\nç¼è¯æå\n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n        stage('Build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n    }\n}\n\n\né¨ç½²\n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n        stage('Build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n        stage('Deoloy') {\n            steps {\n                deploy adapters: [tomcat9(credentialsId: 'dd2801ae-50d3-472c-98ee-bfc1265fef97', path: '', url: 'http://192.168.50.103:8080')], contextPath: null, war: 'target/*.war'\n            }\n        }\n    }\n}\n\n\n\n# Pipeline Script from SCM\n\nåææä»¬é½æ¯ç´æ¥å¨JenkinsçUIçé¢ç¼åPipelineä»£ç ï¼è¿æ ·ä¸æ¹ä¾¿èæ¬ç»´æ¤ï¼å»ºè®®æPipelineèæ¬æ¾å¨é¡¹ç®ä¸­(ä¸èµ·è¿è¡çæ¬æ§å¶)\n\n1)å¨é¡¹ç®æ ¹ç®å½å»ºç«Jenkinsfileæä»¶ï¼æåå®¹å¤å¶å°è¯¥æä»¶ä¸­\n\n\n\næJenkinsfileä¸ä¼ å°Gitlab\n\n2)å¨é¡¹ç®ä¸­å¼ç¨è¯¥æä»¶\n\n",normalizedContent:"# jenkinsæå»ºmavené¡¹ç®\n\n\n# jenkinsæå»ºçé¡¹ç®ç±»åä»ç»\n\njenkinsä¸­èªå¨æå»ºé¡¹ç®çç±»åæå¾å¤ï¼å¸¸ç¨çæä»¥ä¸ä¸ç§:\n\n * èªç±é£æ ¼è½¯ä»¶é¡¹ç®(freestyle project)\n * mavené¡¹ç®(maven project)\n * æµæ°´çº¿é¡¹ç®(pipeline project)\n\næ¯ç§ç±»åçæå»ºå¶å®é½å¯ä»¥å®æä¸æ ·çæå»ºè¿ç¨ä¸ç»æï¼åªæ¯å¨æä½æ¹å¼ãçµæ´»åº¦ç­æ¹é¢ææåºå«ï¼å¨ å®éå¼åä¸­å¯ä»¥æ ¹æ®èªå·±çéæ±åä¹ æ¯æ¥éæ©ã(ps:ä¸ªäººæ¨èä½¿ç¨æµæ°´çº¿ç±»åï¼å ä¸ºçµæ´»åº¦éå¸¸é«)\n\n\n# èªç±é£æ ¼é¡¹ç®æå»º\n\nä¸é¢æ¼ç¤ºåå»ºä¸ä¸ªèªç±é£æ ¼é¡¹ç®æ¥å®æé¡¹ç®çéæè¿ç¨:\n\næç¤º\n\næåä»£ç ->ç¼è¯->æå->é¨ç½²\n\n\n# æåä»£ç \n\n1)åå»ºé¡¹ç®\n\n\n\n2)éç½®æºç ç®¡çï¼ä»gitlabæåä»£ç \n\n\n\n\n# ç¼è¯æå\n\næç¤º\n\næå»º->æ·»å æå»ºæ­¥éª¤->æ§è¡ shell\n\necho \"å¼å§ç¼è¯åæå\" \nmvn clean package \necho \"ç¼è¯åæåç»æ\"\n\n\n\n\n\n# é¨ç½²\n\næé¡¹ç®é¨ç½²å°è¿ç¨çtomcatéé¢\n\n1)å®è£ deploy to containeræä»¶\n\næç¤º\n\njenkinsæ¬èº«æ æ³å®ç°è¿ç¨é¨ç½²å°tomcatçåè½ï¼éè¦å®è£deploy to containeræä»¶å®ç°\n\n\n\n2)æ·»å tomcatç¨æ·å­è¯ jenkins-tomcat-deploy-creds\n\n\n\n3)æ·»å æå»ºåæä½\n\n\n\n\n\nç¹å»\"ç«å³æå»º\"ï¼å¼å§æå»ºè¿ç¨\n\n[info] --- maven-compiler-plugin:3.8.0:testcompile (default-testcompile) @ web-demo ---\n[info] no sources to compile\n[info] \n[info] --- maven-surefire-plugin:2.22.1:test (default-test) @ web-demo ---\n[info] no tests to run.\n[info] \n[info] --- maven-war-plugin:3.2.2:war (default-war) @ web-demo ---\n[info] packaging webapp\n[info] assembling webapp [web-demo] in [/var/lib/jenkins/workspace/web-demo/target/web-demo]\n[info] processing war project\n[info] copying webapp resources [/var/lib/jenkins/workspace/web-demo/src/main/webapp]\n[info] webapp assembled in [61 msecs]\n[info] building war: /var/lib/jenkins/workspace/web-demo/target/web-demo.war\n[info] ------------------------------------------------------------------------\n[info] build success\n[info] ------------------------------------------------------------------------\n[info] total time:  4.462 s\n[info] finished at: 2021-06-24t23:05:22+08:00\n[info] ------------------------------------------------------------------------\n+ echo ç¼è¯åæåç»æ\nç¼è¯åæåç»æ\n[deploypublisher][info] attempting to deploy 1 war file(s)\n[deploypublisher][info] deploying /var/lib/jenkins/workspace/web-demo/target/web-demo.war to container tomcat 9.x remote with context null\n  [/var/lib/jenkins/workspace/web-demo/target/web-demo.war] is not deployed. doing a fresh deployment.\n  deploying [/var/lib/jenkins/workspace/web-demo/target/web-demo.war]\nfinished: success\n\n\n4)é¨ç½²æååï¼è®¿é®é¡¹ç® http://192.168.50.103:8080/web-demo/\n\n\n\n\n# æ¼ç¤ºæ¹å¨ä»£ç åçæç»­éæ\n\n1)ideaä¸­æºç ä¿®æ¹å¹¶æäº¤å°gitlab\n\n2)å¨jenkinsä¸­é¡¹ç®éæ°æå»º\n\n3)è®¿é®tomcat\n\n\n# mavené¡¹ç®æå»º\n\n1)å®è£maven integrationæä»¶\n\n\n\n2)åå»ºmavené¡¹ç®\n\n\n\n3)éç½®é¡¹ç® æåä»£ç åè¿ç¨é¨ç½²çè¿ç¨åèªç±é£æ ¼é¡¹ç®ä¸æ ·ï¼åªæ¯\"æå»º\"é¨åä¸å\n\n\n\n\n# pipelineæµæ°´çº¿é¡¹ç®æå»º\n\n\n# pipelineç®ä»\n\n1)æ¦å¿µ\n\npipelineï¼ç®åæ¥è¯´å°±æ¯ä¸å¥è¿è¡å¨ jenkins ä¸çå·¥ä½æµæ¡æ¶ï¼å°åæ¥ç¬ç«è¿è¡äºåä¸ªæèå¤ä¸ªèç¹çä»»å¡è¿æ¥èµ·æ¥ï¼å®ç°åä¸ªä»»å¡é¾ä»¥å®æçå¤ææµç¨ç¼æåå¯è§åçå·¥ä½ã\n\n2)ä½¿ç¨pipelineæä»¥ä¸å¥½å¤(æ¥èªç¿»è¯èªå®æ¹ææ¡£):\n\n * ä»£ç :pipelineä»¥ä»£ç çå½¢å¼å®ç°ï¼éå¸¸è¢«æ£å¥æºä»£ç æ§å¶ï¼ä½¿å¢éè½å¤ç¼è¾ï¼å®¡æ¥åè¿­ä»£å¶ä¼ éæµç¨ã\n * æä¹:æ è®ºæ¯è®¡ååçè¿æ¯è®¡åå¤çæå¡å¨éå¯ï¼pipelineé½æ¯å¯æ¢å¤çã\n * å¯åæ­¢:pipelineå¯æ¥ æ¶äº¤äºå¼è¾å¥ï¼ä»¥ç¡®å®æ¯å¦ç»§ç»­æ§è¡pipelineã\n * å¤åè½:pipelineæ¯æç°å®ä¸çä¸­å¤æçæç»­äº¤ä»è¦æ±ãå®æ¯æfork/joinãå¾ªç¯æ§è¡ï¼å¹¶è¡æ§è¡ä»»å¡çåè½ã\n * å¯æ©å±:pipelineæä»¶æ¯æå¶dslçèªå®ä¹æ©å± ä»¥åä¸å¶ä»æä»¶éæçå¤ä¸ªéé¡¹ã\n\n3)å¦ä½åå»º jenkins pipelineå¢?\n\n * pipeline èæ¬æ¯ç± groovy è¯­è¨å®ç°çï¼ä½æ¯æä»¬æ²¡å¿è¦åç¬å»å­¦ä¹  groovy\n * pipeline æ¯æä¸¤ç§è¯­æ³:declarative(å£°æå¼)å scripted pipeline(èæ¬å¼)è¯­æ³\n * pipeline ä¹æä¸¤ç§åå»ºæ¹æ³:å¯ä»¥ç´æ¥å¨ jenkins ç web ui çé¢ä¸­è¾å¥èæ¬;ä¹å¯ä»¥éè¿åå»ºä¸ ä¸ª jenkinsfile èæ¬æä»¶æ¾å¥é¡¹ç®æºç åºä¸­(ä¸è¬æä»¬é½æ¨èå¨ jenkins ä¸­ç´æ¥ä»æºä»£ç æ§å¶(scm) ä¸­ç´æ¥è½½å¥ jenkinsfile pipeline è¿ç§æ¹æ³)ã\n\n\n# å®è£pipelineæä»¶\n\næä»¶ç®¡ç->å¯éæä»¶\n\n\n\nå®è£æä»¶åï¼åå»ºé¡¹ç®çæ¶åå¤äºâæµæ°´çº¿âç±»å\n\n\n\n\n# pipelineè¯­æ³å¿«éå¥é¨\n\n\n# declarativeå£°æå¼-pipeline\n\nåå»ºé¡¹ç®\n\n\n\næµæ°´çº¿->éæ©helloworldæ¨¡æ¿\n\n\n\nçæåå®¹å¦ä¸:\n\npipeline {\n    agent any\n\n    stages {\n        stage('hello') {\n            steps {\n                echo 'hello world'\n            }\n        }\n    }\n}\n\n\nstages:ä»£è¡¨æ´ä¸ªæµæ°´çº¿çæææ§è¡é¶æ®µãéå¸¸stagesåªæ1ä¸ªï¼éé¢åå«å¤ä¸ªstage\n\nstage:ä»£è¡¨æµæ°´çº¿ä¸­çæä¸ªé¶æ®µï¼å¯è½åºç°nä¸ªãä¸è¬åä¸ºæåä»£ç ï¼ç¼è¯æå»ºï¼é¨ç½²ç­é¶æ®µã\n\nsteps:ä»£è¡¨ä¸ä¸ªé¶æ®µåéè¦æ§è¡çé»è¾ãstepséé¢æ¯shellèæ¬ï¼gitæåä»£ç ï¼sshè¿ç¨åå¸ç­ä»»æåå®¹ã ç¼åä¸ä¸ªç®åå£°æå¼pipeline:\n\nç¼åä¸ä¸ªç®åå£°æå¼pipeline:\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                echo 'æåä»£ç '\n            }\n        }\n        stage('build') {\n            steps {\n                echo 'ç¼è¯æå»º'\n            }\n        }\n        stage('deoloy') {\n            steps {\n                echo 'é¡¹ç®é¨ç½²'\n            }\n        }\n    }\n}\n\n\nç¹å»æå»ºï¼å¯ä»¥çå°æ´ä¸ªæå»ºè¿ç¨\n\n\n\n\n# scripted pipelineèæ¬å¼-pipeline\n\nåå»ºé¡¹ç®\n\n\n\nè¿æ¬¡éæ©\"scripted pipeline\"\n\nnode {\n    def mvnhome\n    stage('preparation') { // for display purposes\n        // get some code from a github repository\n        git 'https://github.com/jglick/simple-maven-project-with-tests.git'\n        // get the maven tool.\n        // ** note: this 'm3' maven tool must be configured\n        // **       in the global configuration.\n        mvnhome = tool 'm3'\n    }\n    stage('build') {\n        // run the maven build\n        withenv([\"mvn_home=$mvnhome\"]) {\n            if (isunix()) {\n                sh '\"$mvn_home/bin/mvn\" -dmaven.test.failure.ignore clean package'\n            } else {\n                bat(/\"%mvn_home%\\bin\\mvn\" -dmaven.test.failure.ignore clean package/)\n            }\n        }\n    }\n    stage('results') {\n        junit '**/target/surefire-reports/test-*.xml'\n        archiveartifacts 'target/*.jar'\n    }\n}\n\n\n * node:èç¹ï¼ä¸ä¸ª node å°±æ¯ä¸ä¸ª jenkins èç¹ï¼master æè agentï¼æ¯æ§è¡ step çå·ä½è¿è¡ ç¯å¢ï¼åç»­è®²å°jenkinsçmaster-slaveæ¶æçæ¶åç¨å°ã\n * stage:é¶æ®µï¼ä¸ä¸ª pipeline å¯ä»¥ååä¸ºè¥å¹²ä¸ª stageï¼æ¯ä¸ª stage ä»£è¡¨ä¸ç»æä½ï¼æ¯å¦: buildãtestãdeployï¼stage æ¯ä¸ä¸ªé»è¾åç»çæ¦å¿µã\n * step:æ­¥éª¤ï¼step æ¯æåºæ¬çæä½ååï¼å¯ä»¥æ¯æå°ä¸å¥è¯ï¼ä¹å¯ä»¥æ¯æå»ºä¸ä¸ª docker éåï¼ ç±åç±» jenkins æä»¶æä¾ï¼æ¯å¦å½ä»¤:sh âmakeâï¼å°±ç¸å½äºæä»¬å¹³æ¶ shell ç»ç«¯ä¸­æ§è¡ make å½ä»¤ ä¸æ ·ã\n\nç¼åä¸ä¸ªç®åçèæ¬å¼pipeline\n\nnode {\n    def mvnhome\n    stage('checkout') { // for display purposes\n        echo 'æåä»£ç '\n    }\n    stage('build') {\n        echo 'ç¼è¯æå»º'\n    }\n    stage('deoloy') {\n        echo 'é¡¹ç®é¨ç½²'\n    }\n}\n\n\næå»ºç»æåå£°æå¼ä¸æ ·!\n\næåä»£ç \n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n    }\n}\n\n\nç¼è¯æå\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n    }\n}\n\n\né¨ç½²\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n        stage('deoloy') {\n            steps {\n                deploy adapters: [tomcat9(credentialsid: 'dd2801ae-50d3-472c-98ee-bfc1265fef97', path: '', url: 'http://192.168.50.103:8080')], contextpath: null, war: 'target/*.war'\n            }\n        }\n    }\n}\n\n\n\n# pipeline script from scm\n\nåææä»¬é½æ¯ç´æ¥å¨jenkinsçuiçé¢ç¼åpipelineä»£ç ï¼è¿æ ·ä¸æ¹ä¾¿èæ¬ç»´æ¤ï¼å»ºè®®æpipelineèæ¬æ¾å¨é¡¹ç®ä¸­(ä¸èµ·è¿è¡çæ¬æ§å¶)\n\n1)å¨é¡¹ç®æ ¹ç®å½å»ºç«jenkinsfileæä»¶ï¼æåå®¹å¤å¶å°è¯¥æä»¶ä¸­\n\n\n\næjenkinsfileä¸ä¼ å°gitlab\n\n2)å¨é¡¹ç®ä¸­å¼ç¨è¯¥æä»¶\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinså¸¸ç¨æå»ºè§¦åå¨",frontmatter:{title:"Jenkinså¸¸ç¨æå»ºè§¦åå¨",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/bf228f/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/02.Jenkins%E5%B8%B8%E7%94%A8%E6%9E%84%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8.html",relativePath:"20.DevOps/02.å®æ/02.Jenkinså¸¸ç¨æå»ºè§¦åå¨.md",key:"v-0f2a3d88",path:"/pages/bf228f/",headers:[{level:2,title:"Jenkinsåç½®å»ºè§¦åå¨",slug:"jenkinsåç½®å»ºè§¦åå¨",normalizedTitle:"jenkinsåç½®å»ºè§¦åå¨",charIndex:21},{level:3,title:"è§¦åè¿ç¨æå»º",slug:"è§¦åè¿ç¨æå»º",normalizedTitle:"è§¦åè¿ç¨æå»º",charIndex:58},{level:3,title:"å¶ä»å·¥ç¨æå»ºåè§¦å",slug:"å¶ä»å·¥ç¨æå»ºåè§¦å",normalizedTitle:"å¶ä»å·¥ç¨æå»ºåè§¦å",charIndex:68},{level:3,title:"å®æ¶æå»º",slug:"å®æ¶æå»º",normalizedTitle:"å®æ¶æå»º",charIndex:119},{level:3,title:"è½®è¯¢SCM",slug:"è½®è¯¢scm",normalizedTitle:"è½®è¯¢scm",charIndex:147},{level:2,title:"Git hookèªå¨è§¦åæå»º",slug:"git-hookèªå¨è§¦åæå»º",normalizedTitle:"git hookèªå¨è§¦åæå»º",charIndex:815},{level:3,title:"å®è£Gitlab Hookæä»¶",slug:"å®è£gitlab-hookæä»¶",normalizedTitle:"å®è£gitlab hookæä»¶",charIndex:956},{level:3,title:"Jenkinsè®¾ç½®èªå¨æå»º",slug:"jenkinsè®¾ç½®èªå¨æå»º",normalizedTitle:"jenkinsè®¾ç½®èªå¨æå»º",charIndex:1010},{level:3,title:"Gitlabéç½®webhook",slug:"gitlabéç½®webhook",normalizedTitle:"gitlabéç½®webhook",charIndex:1225},{level:3,title:"Jenkinsæ·»å å­è¯",slug:"jenkinsæ·»å å­è¯",normalizedTitle:"jenkinsæ·»å å­è¯",charIndex:1694},{level:3,title:"æµè¯Webhooks",slug:"æµè¯webhooks",normalizedTitle:"æµè¯webhooks",charIndex:1838}],headersStr:"Jenkinsåç½®å»ºè§¦åå¨ è§¦åè¿ç¨æå»º å¶ä»å·¥ç¨æå»ºåè§¦å å®æ¶æå»º è½®è¯¢SCM Git hookèªå¨è§¦åæå»º å®è£Gitlab Hookæä»¶ Jenkinsè®¾ç½®èªå¨æå»º Gitlabéç½®webhook Jenkinsæ·»å å­è¯ æµè¯Webhooks",content:'# Jenkinså¸¸ç¨æå»ºè§¦åå¨\n\n\n# Jenkinsåç½®å»ºè§¦åå¨\n\nJenkinsåç½®4ç§æå»ºè§¦åå¨:\n\n * è§¦åè¿ç¨æå»º\n * å¶ä»å·¥ç¨æå»ºåè§¦å(Build after other projects are build)\n * å®æ¶æå»º(Build periodically)\n * è½®è¯¢SCM(Poll SCM)\n\n\n# è§¦åè¿ç¨æå»º\n\næç¤º\n\nèº«ä»½éªè¯ä»¤çä¸è¬æ¯å å¯å­ç¬¦ä¸²\n\n\n\nè§¦åæå»ºurl: http://192.168.50.102:8080/job/web-demo-pipeline02/build?token=123456\n\n\n# å¶ä»å·¥ç¨æå»ºåè§¦å\n\n1)åå»ºpre_projectæµæ°´çº¿å·¥ç¨\n\næç¤º\n\nä¸è¬å¨å¤æ¨¡åé¡¹ç®å­å¨ä¾èµå³ç³»æ¶ä½¿ç¨\n\n\n\n2)éç½®éè¦è§¦åçå·¥ç¨\n\næç¤º\n\néç½®å¤ä¸ªä¾èµé¡¹ç®æ¶ä½¿ç¨,åå²\n\n\n\n\n# å®æ¶æå»º\n\n\n\nå®æ¶å­ç¬¦ä¸²ä»å·¦å¾å³åå«ä¸º: å æ¶ æ¥ æ å¨\n\nä¸äºå®æ¶è¡¨è¾¾å¼çä¾å­:\n\næ¯30åéæå»ºä¸æ¬¡:Hä»£è¡¨å½¢å H/30 * * * * 10:02 10:32\næ¯2ä¸ªå°æ¶æå»ºä¸æ¬¡: H H/2 * * *\næ¯å¤©ç8ç¹ï¼12ç¹ï¼22ç¹ï¼ä¸å¤©æå»º3æ¬¡: (å¤ä¸ªæ¶é´ç¹ä¸­é´ç¨éå·éå¼) 0 8,12,22 * * * \næ¯å¤©ä¸­å12ç¹å®æ¶æå»ºä¸æ¬¡ H 12 * * *\næ¯å¤©ä¸å18ç¹å®æ¶æå»ºä¸æ¬¡ H 18 * * * \nå¨æ¯ä¸ªå°æ¶çååä¸ªå°æ¶åçæ¯10åé H(0-29)/10 * * * *\næ¯ä¸¤å°æ¶ä¸æ¬¡ï¼æ¯ä¸ªå·¥ä½æ¥ä¸å9ç¹å°ä¸å5ç¹(ä¹è®¸æ¯ä¸å10:38ï¼ä¸å12:38ï¼ä¸å2:38ï¼ä¸å 4:38) H H(9-16)/2 * * 1-5\n\n\n\n# è½®è¯¢SCM\n\nè½®è¯¢SCMï¼æ¯æå®æ¶æ«ææ¬å°ä»£ç ä»åºçä»£ç æ¯å¦æåæ´ï¼å¦æä»£ç æåæ´å°±è§¦åé¡¹ç®æå»ºã\n\n\n\næ³¨æ\n\nè½®è¯¢SCMï¼æ¯æå®æ¶æ«ææ¬å°ä»£ç ä»åºçä»£ç æ¯å¦æåæ´ï¼å¦æä»£ç æåæ´å°±è§¦åé¡¹ç®æå»ºã\n\n\n# Git hookèªå¨è§¦åæå»º\n\nåææä»¬çå°å¨Jenkinsçåç½®æå»ºè§¦åå¨ä¸­ï¼è½®è¯¢SCMå¯ä»¥å®ç°Gitlabä»£ç æ´æ°ï¼é¡¹ç®èªå¨æå»ºï¼ä½æ¯è¯¥æ¹æ¡çæ§è½ä¸ä½³ãé£ææ²¡ææ´å¥½çæ¹æ¡å¢? æçãå°±æ¯å©ç¨Gitlabçwebhookå®ç°ä»£ç pushå°ä»åºï¼ç«å³è§¦åé¡¹ç®èªå¨æå»ºã\n\n\n\n\n# å®è£Gitlab Hookæä»¶\n\néè¦å®è£ä¸¤ä¸ªæä»¶: GitLab å Gitlab Hook\n\n\n\n\n# Jenkinsè®¾ç½®èªå¨æå»º\n\n\n\nGitLab webhook URL:\n\nhttp://192.168.50.102:8080/project/web-demo-pipeline02\n\n\nSecret token: ç¹å»"Generate"\n\n726808fb71ce6d9c7ac2610ce718d5a2\n\n\nç­ä¼éè¦æçæçGitLab webhook URL å Secret tokenéç½®å°Gitlabä¸­ã\n\n\n# Gitlabéç½®webhook\n\n1)å¼å¯webhookåè½\n\næç¤º\n\nå¼å¯webhookåè½éè¦ä½¿ç¨Gitlabçrootç¨æ·æä½\n\nä½¿ç¨rootè´¦æ·ç»å½å°åå°ï¼ç¹å»Admin Area -> Settings -> Network å¾é"Allow requests to the local network from web hooks and services"\n\n\n\n2)å¨é¡¹ç®æ·»å webhook\n\nç¹å»é¡¹ç®->Settings->Integrations\n\næç¤º\n\né¡¹ç®æ·»å webhookï¼å¦æé¡¹ç®ä½¿ç¨æ®éç¨æ·åå»ºï¼ä¾å¦ï¼jackï¼éè¦ä½¿ç¨æ®éç¨æ·è¿è¡æä½\n\n\n\n3)åå»ºè®¿é®ä»¤ç\n\nEdit profile -> Access Tokens ç¹å»"Create personal access token"\n\n\n\næç¤º\n\næ³¨æä¿å­access token,åªæ¾ç¤ºä¸æ¬¡ï¼å·æ°åä¸åæ¾ç¤ºãï¼å¯ä»¥éæ°åå»ºï¼\n\n\n\nYour new personal access token\n\nQszazrfXTedjnk-Zw56e\n\n\n\n# Jenkinsæ·»å å­è¯\n\nè¿åJenkinsï¼æ·»å ç±»åGitlab API token , API tokenå¡«åä¸ä¸æ­¥Gitlabåå»ºçpersonal access tokenï¼QszazrfXTedjnk-Zw56e\n\n\n\nç³»ç»ç®¡ç -> ç³»ç»éç½® -> Gitlab\n\n\n\n\n# æµè¯Webhooks\n\nè¿åGitlabï¼æå¼web-demoé¡¹ç® -> Settings -> Webhooks -> Test -> Push events\n\n\n\næç¤ºå¦ä¸åå®¹è¡¨ç¤ºè°ç¨æåï¼è¿åJenkinsï¼é¡¹ç®å·²ç»å¼å§æå»ºã\n\nHook executed successfully: HTTP 200\n',normalizedContent:'# jenkinså¸¸ç¨æå»ºè§¦åå¨\n\n\n# jenkinsåç½®å»ºè§¦åå¨\n\njenkinsåç½®4ç§æå»ºè§¦åå¨:\n\n * è§¦åè¿ç¨æå»º\n * å¶ä»å·¥ç¨æå»ºåè§¦å(build after other projects are build)\n * å®æ¶æå»º(build periodically)\n * è½®è¯¢scm(poll scm)\n\n\n# è§¦åè¿ç¨æå»º\n\næç¤º\n\nèº«ä»½éªè¯ä»¤çä¸è¬æ¯å å¯å­ç¬¦ä¸²\n\n\n\nè§¦åæå»ºurl: http://192.168.50.102:8080/job/web-demo-pipeline02/build?token=123456\n\n\n# å¶ä»å·¥ç¨æå»ºåè§¦å\n\n1)åå»ºpre_projectæµæ°´çº¿å·¥ç¨\n\næç¤º\n\nä¸è¬å¨å¤æ¨¡åé¡¹ç®å­å¨ä¾èµå³ç³»æ¶ä½¿ç¨\n\n\n\n2)éç½®éè¦è§¦åçå·¥ç¨\n\næç¤º\n\néç½®å¤ä¸ªä¾èµé¡¹ç®æ¶ä½¿ç¨,åå²\n\n\n\n\n# å®æ¶æå»º\n\n\n\nå®æ¶å­ç¬¦ä¸²ä»å·¦å¾å³åå«ä¸º: å æ¶ æ¥ æ å¨\n\nä¸äºå®æ¶è¡¨è¾¾å¼çä¾å­:\n\næ¯30åéæå»ºä¸æ¬¡:hä»£è¡¨å½¢å h/30 * * * * 10:02 10:32\næ¯2ä¸ªå°æ¶æå»ºä¸æ¬¡: h h/2 * * *\næ¯å¤©ç8ç¹ï¼12ç¹ï¼22ç¹ï¼ä¸å¤©æå»º3æ¬¡: (å¤ä¸ªæ¶é´ç¹ä¸­é´ç¨éå·éå¼) 0 8,12,22 * * * \næ¯å¤©ä¸­å12ç¹å®æ¶æå»ºä¸æ¬¡ h 12 * * *\næ¯å¤©ä¸å18ç¹å®æ¶æå»ºä¸æ¬¡ h 18 * * * \nå¨æ¯ä¸ªå°æ¶çååä¸ªå°æ¶åçæ¯10åé h(0-29)/10 * * * *\næ¯ä¸¤å°æ¶ä¸æ¬¡ï¼æ¯ä¸ªå·¥ä½æ¥ä¸å9ç¹å°ä¸å5ç¹(ä¹è®¸æ¯ä¸å10:38ï¼ä¸å12:38ï¼ä¸å2:38ï¼ä¸å 4:38) h h(9-16)/2 * * 1-5\n\n\n\n# è½®è¯¢scm\n\nè½®è¯¢scmï¼æ¯æå®æ¶æ«ææ¬å°ä»£ç ä»åºçä»£ç æ¯å¦æåæ´ï¼å¦æä»£ç æåæ´å°±è§¦åé¡¹ç®æå»ºã\n\n\n\næ³¨æ\n\nè½®è¯¢scmï¼æ¯æå®æ¶æ«ææ¬å°ä»£ç ä»åºçä»£ç æ¯å¦æåæ´ï¼å¦æä»£ç æåæ´å°±è§¦åé¡¹ç®æå»ºã\n\n\n# git hookèªå¨è§¦åæå»º\n\nåææä»¬çå°å¨jenkinsçåç½®æå»ºè§¦åå¨ä¸­ï¼è½®è¯¢scmå¯ä»¥å®ç°gitlabä»£ç æ´æ°ï¼é¡¹ç®èªå¨æå»ºï¼ä½æ¯è¯¥æ¹æ¡çæ§è½ä¸ä½³ãé£ææ²¡ææ´å¥½çæ¹æ¡å¢? æçãå°±æ¯å©ç¨gitlabçwebhookå®ç°ä»£ç pushå°ä»åºï¼ç«å³è§¦åé¡¹ç®èªå¨æå»ºã\n\n\n\n\n# å®è£gitlab hookæä»¶\n\néè¦å®è£ä¸¤ä¸ªæä»¶: gitlab å gitlab hook\n\n\n\n\n# jenkinsè®¾ç½®èªå¨æå»º\n\n\n\ngitlab webhook url:\n\nhttp://192.168.50.102:8080/project/web-demo-pipeline02\n\n\nsecret token: ç¹å»"generate"\n\n726808fb71ce6d9c7ac2610ce718d5a2\n\n\nç­ä¼éè¦æçæçgitlab webhook url å secret tokenéç½®å°gitlabä¸­ã\n\n\n# gitlabéç½®webhook\n\n1)å¼å¯webhookåè½\n\næç¤º\n\nå¼å¯webhookåè½éè¦ä½¿ç¨gitlabçrootç¨æ·æä½\n\nä½¿ç¨rootè´¦æ·ç»å½å°åå°ï¼ç¹å»admin area -> settings -> network å¾é"allow requests to the local network from web hooks and services"\n\n\n\n2)å¨é¡¹ç®æ·»å webhook\n\nç¹å»é¡¹ç®->settings->integrations\n\næç¤º\n\né¡¹ç®æ·»å webhookï¼å¦æé¡¹ç®ä½¿ç¨æ®éç¨æ·åå»ºï¼ä¾å¦ï¼jackï¼éè¦ä½¿ç¨æ®éç¨æ·è¿è¡æä½\n\n\n\n3)åå»ºè®¿é®ä»¤ç\n\nedit profile -> access tokens ç¹å»"create personal access token"\n\n\n\næç¤º\n\næ³¨æä¿å­access token,åªæ¾ç¤ºä¸æ¬¡ï¼å·æ°åä¸åæ¾ç¤ºãï¼å¯ä»¥éæ°åå»ºï¼\n\n\n\nyour new personal access token\n\nqszazrfxtedjnk-zw56e\n\n\n\n# jenkinsæ·»å å­è¯\n\nè¿åjenkinsï¼æ·»å ç±»ågitlab api token , api tokenå¡«åä¸ä¸æ­¥gitlabåå»ºçpersonal access tokenï¼qszazrfxtedjnk-zw56e\n\n\n\nç³»ç»ç®¡ç -> ç³»ç»éç½® -> gitlab\n\n\n\n\n# æµè¯webhooks\n\nè¿ågitlabï¼æå¼web-demoé¡¹ç® -> settings -> webhooks -> test -> push events\n\n\n\næç¤ºå¦ä¸åå®¹è¡¨ç¤ºè°ç¨æåï¼è¿åjenkinsï¼é¡¹ç®å·²ç»å¼å§æå»ºã\n\nhook executed successfully: http 200\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinsåæ°åæå»º",frontmatter:{title:"Jenkinsåæ°åæå»º",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/991f2e/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/03.Jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA.html",relativePath:"20.DevOps/02.å®æ/03.Jenkinsåæ°åæå»º.md",key:"v-78c2fe6d",path:"/pages/991f2e/",headersStr:null,content:"# Jenkinsåæ°åæå»º\n\nææ¶å¨é¡¹ç®æå»ºçè¿ç¨ä¸­ï¼æä»¬éè¦æ ¹æ®ç¨æ·çè¾å¥å¨æä¼ å¥ä¸äºåæ°ï¼ä»èå½±åæ´ä¸ªæå»ºç»æï¼è¿æ¶æä»¬å¯ä»¥ä½¿ç¨åæ°åæå»ºã\n\nJenkinsæ¯æéå¸¸ä¸°å¯çåæ°ç±»å\n\n\n\næ¥ä¸æ¥æ¼ç¤ºéè¿è¾å¥gitlabé¡¹ç®çåæ¯åç§°æ¥é¨ç½²ä¸ååæ¯é¡¹ç®ã\n\né¡¹ç®åå»ºåæ¯v1ï¼å¹¶æ¨éå°Gitlabä¸ï¼è¿æ¶çå°gitlabä¸æä¸ä¸ªä¸¤ä¸ªåæ¯:masteråv1\n\n\n\nå¨Jenkinsæ·»å å­ç¬¦ä¸²ç±»ååæ°\n\n\n\næ¹å¨pipelineæµæ°´çº¿ä»£ç ï¼ä¿®æ¹*/masteræ¿æ¢ä¸º*/${branch}\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/${branch}']], extensions: [], userRemoteConfigs: [[credentialsId: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n        stage('Build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n        stage('Deoloy') {\n            steps {\n                deploy adapters: [tomcat9(credentialsId: 'dd2801ae-50d3-472c-98ee-bfc1265fef97', path: '', url: 'http://192.168.50.103:8080')], contextPath: null, war: 'target/*.war'\n            }\n        }\n    }\n}\n\n\nç¹å»Build with Parameters\n\n\n\nè¾å¥åæ¯åç§°ï¼ç¹å»\"å¼å§æå»º\"ï¼æå»ºå®æåè®¿é®Tomcatæ¥çç»æã",normalizedContent:"# jenkinsåæ°åæå»º\n\nææ¶å¨é¡¹ç®æå»ºçè¿ç¨ä¸­ï¼æä»¬éè¦æ ¹æ®ç¨æ·çè¾å¥å¨æä¼ å¥ä¸äºåæ°ï¼ä»èå½±åæ´ä¸ªæå»ºç»æï¼è¿æ¶æä»¬å¯ä»¥ä½¿ç¨åæ°åæå»ºã\n\njenkinsæ¯æéå¸¸ä¸°å¯çåæ°ç±»å\n\n\n\næ¥ä¸æ¥æ¼ç¤ºéè¿è¾å¥gitlabé¡¹ç®çåæ¯åç§°æ¥é¨ç½²ä¸ååæ¯é¡¹ç®ã\n\né¡¹ç®åå»ºåæ¯v1ï¼å¹¶æ¨éå°gitlabä¸ï¼è¿æ¶çå°gitlabä¸æä¸ä¸ªä¸¤ä¸ªåæ¯:masteråv1\n\n\n\nå¨jenkinsæ·»å å­ç¬¦ä¸²ç±»ååæ°\n\n\n\næ¹å¨pipelineæµæ°´çº¿ä»£ç ï¼ä¿®æ¹*/masteræ¿æ¢ä¸º*/${branch}\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/${branch}']], extensions: [], userremoteconfigs: [[credentialsid: 'adf6d5d5-d16c-4665-b85b-ed720f9641ad', url: 'git@192.168.50.101:jack/web-demo.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n        stage('deoloy') {\n            steps {\n                deploy adapters: [tomcat9(credentialsid: 'dd2801ae-50d3-472c-98ee-bfc1265fef97', path: '', url: 'http://192.168.50.103:8080')], contextpath: null, war: 'target/*.war'\n            }\n        }\n    }\n}\n\n\nç¹å»build with parameters\n\n\n\nè¾å¥åæ¯åç§°ï¼ç¹å»\"å¼å§æå»º\"ï¼æå»ºå®æåè®¿é®tomcatæ¥çç»æã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinséç½®é®ç®±æå¡å¨",frontmatter:{title:"Jenkinséç½®é®ç®±æå¡å¨",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/bd7581/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/04.Jenkins%E9%85%8D%E7%BD%AE%E9%82%AE%E7%AE%B1%E6%9C%8D%E5%8A%A1%E5%99%A8.html",relativePath:"20.DevOps/02.å®æ/04.Jenkinséç½®é®ç®±æå¡å¨.md",key:"v-7183b4d5",path:"/pages/bd7581/",headersStr:null,content:'# Jenkinséç½®é®ç®±æå¡å¨\n\nJenkinséç½®é®ç®±æå¡å¨ï¼åéæå»ºç»æã\n\nå®è£Email Extensionæä»¶\n\n\n\nJenkinsè®¾ç½®é®ç®±ç¸å³åæ°\n\nç³»ç»ç®¡ç -> ç³»ç»éç½®\n\n\n\nè®¾ç½®é®ä»¶åæ°\n\n\n\nè®¾ç½®Jenkinsé»è®¤é®ç®±ä¿¡æ¯\n\n\n\néç½®å®æåç¹å»"Test configuration"æé®åéæµè¯é®ä»¶\n\nåå¤é®ä»¶åå®¹\n\nå¨é¡¹ç®æ ¹ç®å½ç¼åemail.htmlï¼å¹¶ææä»¶æ¨éå°Gitlabï¼åå®¹å¦ä¸:\n\n\n\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>${ENV, var="JOB_NAME"}-ç¬¬${BUILD_NUMBER}æ¬¡æå»ºæ¥å¿</title>\n</head>\n<body leftmargin="8" marginwidth="0" topmargin="8" marginheight="4" offset="0">\n<table width="95%" cellpadding="0" cellspacing="0"\n       style="font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif">\n    <tr>\n        <td>(æ¬é®ä»¶æ¯ç¨åºèªå¨ä¸åçï¼è¯·å¿åå¤!)</td>\n    </tr>\n    <tr>\n        <td>\n            <h2>\n                <font color="#0000FF">æå»ºç»æ - ${BUILD_STATUS}</font>\n            </h2>\n        </td>\n    </tr>\n    <tr>\n        <td><br/>\n            <b><font color="#0B610B">æå»ºä¿¡æ¯</font></b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <ul>\n                <li>é¡¹ç®åç§°&nbsp;:&nbsp;${PROJECT_NAME}</li>\n                <li>æå»ºç¼å·&nbsp;:&nbsp;ç¬¬${BUILD_NUMBER}æ¬¡æå»º</li>\n                <li>è§¦ååå :&nbsp;${CAUSE}</li>\n                <li>æå»ºæ¥å¿:&nbsp;<a href="${BUILD_URL}console">${BUILD_URL}console</a></li>\n                <li>æå»º&nbsp;&nbsp;Url&nbsp;:&nbsp;<a href="${BUILD_URL}">${BUILD_URL}</a></li>\n                <li>å·¥ä½ç®å½&nbsp;:&nbsp;<a href="${PROJECT_URL}ws">${PROJECT_URL}ws</a></li>\n                <li>é¡¹ç®&nbsp;&nbsp;Url&nbsp;:&nbsp;<a href="${PROJECT_URL}">${PROJECT_URL}</a></li>\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td><b>\n            <font color="#0B610B">Changes Since Last Successful Build:</font></b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <ul>\n                <li>åå²åæ´è®°å½ : <a href="${PROJECT_URL}changes">${PROJECT_URL}changes</a></li>\n            </ul> ${CHANGES_SINCE_LAST_SUCCESS,reverse=true, format="Changes for Build #%n:<br />%c<br />",showPaths=true,changesFormat="<pre>[%a]<br />%m</pre>",pathFormat="&nbsp;&nbsp;&nbsp;&nbsp;%p"}\n        </td>\n    </tr>\n    <tr>\n        <td><b>Failed Test Results</b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td><pre\n                style="font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif">$FAILED_TESTS</pre>\n            <br/></td>\n    </tr>\n    <tr>\n        <td><b><font color="#0B610B">æå»ºæ¥å¿ (æå 100è¡):</font></b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td><textarea cols="80" rows="30" readonly="readonly"\n                      style="font-family: Courier New">${BUILD_LOG,maxLines=100}</textarea>\n        </td>\n    </tr>\n</table>\n</body>\n</html>\n\n\nç¼åJenkinsfileæ·»å æå»ºååéé®ä»¶\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage(\'Checkout\') {\n            steps {\n                checkout([$class: \'GitSCM\', branches: [[name: \'*/${branch}\']], extensions: [], userRemoteConfigs: [[credentialsId: \'adf6d5d5-d16c-4665-b85b-ed720f9641ad\', url: \'git@192.168.50.101:jack/web-demo.git\']]])\n            }\n        }\n        stage(\'Build\') {\n            steps {\n                sh \'mvn clean package\'\n            }\n        }\n        stage(\'Deoloy\') {\n            steps {\n                deploy adapters: [tomcat9(credentialsId: \'dd2801ae-50d3-472c-98ee-bfc1265fef97\', path: \'\', url: \'http://192.168.50.103:8080\')], contextPath: null, war: \'target/*.war\'\n            }\n        }\n    }\n\n    post {\n      always {\n        // One or more steps need to be included within each condition\'s block.\n        // åéç³»ç»éç¥é®ä»¶\n        emailext body: \'${FILE,path="email.html"}\', subject: \'æå»ºéç¥:${PROJECT_NAME} - Build # ${BUILD_NUMBER} - ${BUILD_STATUS}!\', to: \'785056500@qq.com\'\n      }\n    }\n}\n\n\næäº¤ä»£ç è§¦åwebhooks,jenkinså¼å§èªå¨ç¼è¯æååå¸é¡¹ç®ï¼æååéæå»ºç»æé®ä»¶éç¥ã\n\n\n\né®ä»¶ç¸å³å¨å±åæ°åèåè¡¨\n\nç³»ç»è®¾ç½®->Extended E-mail Notification->Content Token Referenceï¼ç¹å»æè¾¹ç?å·\n\n',normalizedContent:'# jenkinséç½®é®ç®±æå¡å¨\n\njenkinséç½®é®ç®±æå¡å¨ï¼åéæå»ºç»æã\n\nå®è£email extensionæä»¶\n\n\n\njenkinsè®¾ç½®é®ç®±ç¸å³åæ°\n\nç³»ç»ç®¡ç -> ç³»ç»éç½®\n\n\n\nè®¾ç½®é®ä»¶åæ°\n\n\n\nè®¾ç½®jenkinsé»è®¤é®ç®±ä¿¡æ¯\n\n\n\néç½®å®æåç¹å»"test configuration"æé®åéæµè¯é®ä»¶\n\nåå¤é®ä»¶åå®¹\n\nå¨é¡¹ç®æ ¹ç®å½ç¼åemail.htmlï¼å¹¶ææä»¶æ¨éå°gitlabï¼åå®¹å¦ä¸:\n\n\n\n<!doctype html>\n<html lang="en">\n<head>\n    <meta charset="utf-8">\n    <title>${env, var="job_name"}-ç¬¬${build_number}æ¬¡æå»ºæ¥å¿</title>\n</head>\n<body leftmargin="8" marginwidth="0" topmargin="8" marginheight="4" offset="0">\n<table width="95%" cellpadding="0" cellspacing="0"\n       style="font-size: 11pt; font-family: tahoma, arial, helvetica, sans-serif">\n    <tr>\n        <td>(æ¬é®ä»¶æ¯ç¨åºèªå¨ä¸åçï¼è¯·å¿åå¤!)</td>\n    </tr>\n    <tr>\n        <td>\n            <h2>\n                <font color="#0000ff">æå»ºç»æ - ${build_status}</font>\n            </h2>\n        </td>\n    </tr>\n    <tr>\n        <td><br/>\n            <b><font color="#0b610b">æå»ºä¿¡æ¯</font></b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <ul>\n                <li>é¡¹ç®åç§°&nbsp;:&nbsp;${project_name}</li>\n                <li>æå»ºç¼å·&nbsp;:&nbsp;ç¬¬${build_number}æ¬¡æå»º</li>\n                <li>è§¦ååå :&nbsp;${cause}</li>\n                <li>æå»ºæ¥å¿:&nbsp;<a href="${build_url}console">${build_url}console</a></li>\n                <li>æå»º&nbsp;&nbsp;url&nbsp;:&nbsp;<a href="${build_url}">${build_url}</a></li>\n                <li>å·¥ä½ç®å½&nbsp;:&nbsp;<a href="${project_url}ws">${project_url}ws</a></li>\n                <li>é¡¹ç®&nbsp;&nbsp;url&nbsp;:&nbsp;<a href="${project_url}">${project_url}</a></li>\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td><b>\n            <font color="#0b610b">changes since last successful build:</font></b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <ul>\n                <li>åå²åæ´è®°å½ : <a href="${project_url}changes">${project_url}changes</a></li>\n            </ul> ${changes_since_last_success,reverse=true, format="changes for build #%n:<br />%c<br />",showpaths=true,changesformat="<pre>[%a]<br />%m</pre>",pathformat="&nbsp;&nbsp;&nbsp;&nbsp;%p"}\n        </td>\n    </tr>\n    <tr>\n        <td><b>failed test results</b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td><pre\n                style="font-size: 11pt; font-family: tahoma, arial, helvetica, sans-serif">$failed_tests</pre>\n            <br/></td>\n    </tr>\n    <tr>\n        <td><b><font color="#0b610b">æå»ºæ¥å¿ (æå 100è¡):</font></b>\n            <hr size="2" width="100%" align="center"/>\n        </td>\n    </tr>\n    <tr>\n        <td><textarea cols="80" rows="30" readonly="readonly"\n                      style="font-family: courier new">${build_log,maxlines=100}</textarea>\n        </td>\n    </tr>\n</table>\n</body>\n</html>\n\n\nç¼åjenkinsfileæ·»å æå»ºååéé®ä»¶\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage(\'checkout\') {\n            steps {\n                checkout([$class: \'gitscm\', branches: [[name: \'*/${branch}\']], extensions: [], userremoteconfigs: [[credentialsid: \'adf6d5d5-d16c-4665-b85b-ed720f9641ad\', url: \'git@192.168.50.101:jack/web-demo.git\']]])\n            }\n        }\n        stage(\'build\') {\n            steps {\n                sh \'mvn clean package\'\n            }\n        }\n        stage(\'deoloy\') {\n            steps {\n                deploy adapters: [tomcat9(credentialsid: \'dd2801ae-50d3-472c-98ee-bfc1265fef97\', path: \'\', url: \'http://192.168.50.103:8080\')], contextpath: null, war: \'target/*.war\'\n            }\n        }\n    }\n\n    post {\n      always {\n        // one or more steps need to be included within each condition\'s block.\n        // åéç³»ç»éç¥é®ä»¶\n        emailext body: \'${file,path="email.html"}\', subject: \'æå»ºéç¥:${project_name} - build # ${build_number} - ${build_status}!\', to: \'785056500@qq.com\'\n      }\n    }\n}\n\n\næäº¤ä»£ç è§¦åwebhooks,jenkinså¼å§èªå¨ç¼è¯æååå¸é¡¹ç®ï¼æååéæå»ºç»æé®ä»¶éç¥ã\n\n\n\né®ä»¶ç¸å³å¨å±åæ°åèåè¡¨\n\nç³»ç»è®¾ç½®->extended e-mail notification->content token referenceï¼ç¹å»æè¾¹ç?å·\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"SonarQubeèªå¨ä»£ç å®¡æ¥å·¥å·",frontmatter:{title:"SonarQubeèªå¨ä»£ç å®¡æ¥å·¥å·",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/e2748f/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/05.SonarQube%E8%87%AA%E5%8A%A8%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5%E5%B7%A5%E5%85%B7.html",relativePath:"20.DevOps/02.å®æ/05.SonarQubeèªå¨ä»£ç å®¡æ¥å·¥å·.md",key:"v-8f10297e",path:"/pages/e2748f/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:24},{level:2,title:"ç¡¬ä»¶è¦æ±",slug:"ç¡¬ä»¶è¦æ±",normalizedTitle:"ç¡¬ä»¶è¦æ±",charIndex:143},{level:2,title:"è½¯ä»¶çæ¬",slug:"è½¯ä»¶çæ¬",normalizedTitle:"è½¯ä»¶çæ¬",charIndex:267},{level:2,title:"å®è£PostgreSQL",slug:"å®è£postgresql",normalizedTitle:"å®è£postgresql",charIndex:453},{level:3,title:"å®è£PostgreSQL:",slug:"å®è£postgresql-2",normalizedTitle:"å®è£postgresql:",charIndex:598},{level:3,title:"PostgreSQLè§è²åèº«ä»½è®¤è¯æ¹å¼",slug:"postgresqlè§è²åèº«ä»½è®¤è¯æ¹å¼",normalizedTitle:"postgresqlè§è²åèº«ä»½è®¤è¯æ¹å¼",charIndex:1034},{level:3,title:"åå»º PostgreSQL è§è²åæ°æ®åº",slug:"åå»º-postgresql-è§è²åæ°æ®åº",normalizedTitle:"åå»º postgresql è§è²åæ°æ®åº",charIndex:1675},{level:3,title:"å¯ç¨è¿ç¨è®¿é®PostgreSQLæå¡å¨",slug:"å¯ç¨è¿ç¨è®¿é®postgresqlæå¡å¨",normalizedTitle:"å¯ç¨è¿ç¨è®¿é®postgresqlæå¡å¨",charIndex:2091},{level:3,title:"å°sonarqubeç¨æ·å¯ç è®¾ç½®ä¸ºsonarqube",slug:"å°sonarqubeç¨æ·å¯ç è®¾ç½®ä¸ºsonarqube",normalizedTitle:"å°sonarqubeç¨æ·å¯ç è®¾ç½®ä¸ºsonarqube",charIndex:3770},{level:2,title:"å®è£JDK",slug:"å®è£jdk",normalizedTitle:"å®è£jdk",charIndex:4429},{level:2,title:"å®è£SonarQube",slug:"å®è£sonarqube",normalizedTitle:"å®è£sonarqube",charIndex:4979}],headersStr:"æ¦è¿° ç¡¬ä»¶è¦æ± è½¯ä»¶çæ¬ å®è£PostgreSQL å®è£PostgreSQL: PostgreSQLè§è²åèº«ä»½è®¤è¯æ¹å¼ åå»º PostgreSQL è§è²åæ°æ®åº å¯ç¨è¿ç¨è®¿é®PostgreSQLæå¡å¨ å°sonarqubeç¨æ·å¯ç è®¾ç½®ä¸ºsonarqube å®è£JDK å®è£SonarQube",content:'# SonarQubeèªå¨ä»£ç å®¡æ¥å·¥å·\n\n\n# æ¦è¿°\n\nSonarï¼SonarQubeï¼æ¯ä¸ä¸ªå¼æºå¹³å°ï¼ç¨äºç®¡çæºä»£ç çè´¨éãSonar ä¸åªæ¯ä¸ä¸ªè´¨éæ°æ®æ¥åå·¥å·ï¼æ´æ¯ä»£ç è´¨éç®¡çå¹³å°ãæ¯æçè¯­è¨åæ¬ï¼JavaãPHPãC#ãCãCobolãPL/SQLãFlex ç­ã\n\n\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²SonarQubeçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\nCPU    2 CPU   8 CPU\nMem    4 GB    16 GB\nDisk   40 GB   160 GB\n\n\n# è½¯ä»¶çæ¬\n\nä¸è¡¨ååºäºé¨ç½²SonarQubeçä¾èµè½¯ä»¶çæ¬è¦æ±ã\n\nè½¯ä»¶          çæ¬\nJava        Oracle JRE 11 æ OpenJDK 11\nDatabase    PostgreSQL 12\nOS          Ubuntu 20.04 Server LTS\nSonarQube   Community 8.9.1 LTS\n\n\n# å®è£PostgreSQL\n\nPostgreSQL æè Postgres æ¯ä¸ä¸ªå¼æºçï¼å¤ç¨éçå³ç³»åæ°æ®åºç®¡çç³»ç»ãå®æå¾å¤é«çº§ç¹æ§ï¼å¯ä»¥åè®¸ä½ æå»ºå®¹éçç¯å¢æèå¤æçåºç¨ã\n\nå¨åè¿ç¯æç« çæ¶åï¼PostgreSQL å¨ Ubuntu å®æ¹è½¯ä»¶æºä¸­çææ°å¯ç¨çæ¬ä¸º 12.7ã\n\n\n# å®è£PostgreSQL:\n\nsudo apt update\nsudo apt install postgresql postgresql-contrib\n\n\næä»¬åæ¶å®è£ PostgreSQL contrib è½¯ä»¶åï¼å®å¯ä»¥æä¾ PostgreSQL æ°æ®åºç³»ç»çä¸äºé¢å¤ç¹æ§ã\n\nä¸æ¦å®è£å®æï¼ PostgreSQL æå¡å°ä¼èªå¨å¯å¨ãä½¿ç¨psqlå·¥å·éè¿è¿æ¥ PostgreSQL æ°æ®åºå¹¶ä¸æå°å®ççæ¬æ¥éªè¯å®è£ï¼\n\nsudo -u postgres psql -c "SELECT version();"\n\n\nè¾åºï¼\n\nPostgreSQL 12.7 (Ubuntu 12.7-0ubuntu0.20.04.1) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0, 64-bit\n\n\nå°±è¿æ ·ãPostgreSQL å·²ç»å®è£å¥½äºï¼ä½ å¯ä»¥å¼å§ä½¿ç¨å®äºã\n\n\n# PostgreSQLè§è²åèº«ä»½è®¤è¯æ¹å¼\n\nPostgreSQL æ°æ®åºè®¿é®æéæ¯éè¿è§è²æ¥å¤ççãä¸ä¸ªè§è²ä»£è¡¨ä¸ä¸ªæ°æ®åºç¨æ·æèä¸ä¸ªæ°æ®åºç¨æ·ç»ã\n\nPostgreSQL æ¯æå¤ç§èº«ä»½è®¤è¯æ¹å¼ãæå¸¸ç¨çæ¹æ³å¦ä¸ï¼\n\n * Trust - åªè¦æ»¡è¶³pg_hba.confå®ä¹çæ¡ä»¶ï¼ä¸ä¸ªè§è²å°±å¯ä»¥ä¸ä½¿ç¨å¯ç å°±è½è¿æ¥æå¡å¨\n * Password - éè¿å¯ç ï¼ä¸ä¸ªè§è²å¯ä»¥è¿æ¥æå¡å¨ãå¯ç å¯ä»¥è¢«å­å¨ä¸º scram-sha-256, md5, å password(ææ)ã\n * Ident - ä»ä»æ¯æ TCP/IP è¿æ¥ãå®éå¸¸éè¿ä¸ä¸ªå¯éçç¨æ·åæ å°è¡¨ï¼è·åå®¢æ·ç«¯æä½ç³»ç»ç¨æ·åã\n * Peer - å Ident ä¸æ ·ï¼ä»ä»æ¯ææ¬å°è¿æ¥ã\n\nPostgreSQL å®¢æ·ç«¯èº«ä»½éªè¯éå¸¸è¢«å®ä¹å¨pg_hba.confæä»¶ä¸­ãé»è®¤æåµä¸ï¼å¯¹äºæ¬å°è¿æ¥ï¼PostgreSQL è¢«è®¾ç½®æèº«ä»½è®¤è¯é²è peerã\n\nä¸ºäºä»¥postgresç¨æ·èº«ä»½ç»å½ PostgreSQL æå¡å¨ï¼é¦ååæ¢ç¨æ·ï¼ç¶åä½¿ç¨psqlå·¥å·è®¿é® PostgreSQLã\n\nsudo su - postgres\npsql\n\n\nä»è¿éå¼å§ï¼ä½ å¯ä»¥ä¸ PostgreSQL å®ä¾äº¤äºãéåº PostgreSQL Shellï¼è¾å¥ï¼\n\n\\q\n\n\nä½ ä¹å¯ä»¥ä¸åæ¢ç¨æ·ï¼èä½¿ç¨sudoå½ä»¤è®¿é® PostgreSQLï¼\n\nsudo -u postgres psql\n\n\néå¸¸ï¼postgresç¨æ·ä»ä»å¨æ¬å°è¢«ä½¿ç¨ã\n\n\n# åå»º PostgreSQL è§è²åæ°æ®åº\n\nä»ä»è¶çº§ç¨æ·åæ¥æCREATEROLEæéçè§è²å¯ä»¥åå»ºæ°è§è²ã\n\nå¨ä¸é¢çä¾å­ä¸­ï¼æä»¬åå»ºä¸ä¸ªåç§°ä¸ºsonarqubeçè§è²ï¼ä¸ä¸ªåç§°ä¸ºsonarqubeçæ°æ®åºï¼å¹¶ä¸æäºæ°æ®åºä¸çæéï¼\n\n1)åå»ºä¸ä¸ªæ°ç PostgreSQL è§è²ï¼\n\nsudo su - postgres -c "createuser sonarqube"\n\n\n2)åå»ºä¸ä¸ªæ°ç PostgreSQL æ°æ®åºï¼\n\nsudo su - postgres -c "createdb sonarqube"\n\n\næ³è¦ææç¨æ·æä½æ°æ®åºï¼è¿æ¥å° PostgreSQL shell:\n\nsudo -u postgres psql\n\n\nå¹¶ä¸è¿è¡ä¸é¢ç query:\n\npostgres=# grant all privileges on database sonarqube to sonarqube;\nGRANT\n\n\n\n# å¯ç¨è¿ç¨è®¿é®PostgreSQLæå¡å¨\n\né»è®¤æåµä¸ï¼PostgreSQL æå¡å¨ä»ä»çå¬æ¬å°ç½ç»æ¥å£ï¼127.0.0.1ã\n\nä¸ºäºåè®¸è¿ç¨è®¿é®ä½ ç PostgreSQL æå¡å¨ï¼æå¼éç½®æä»¶postgresql.confå¹¶ä¸å¨CONNECTIONS AND AUTHENTICATIONä¸èæ·»å listen_addresses = \'*\'ã\n\nsudo vim /etc/postgresql/12/main/postgresql.conf\n#------------------------------------------------------------------------------\n# CONNECTIONS AND AUTHENTICATION\n#------------------------------------------------------------------------------\n\n# - Connection Settings -\n\nlisten_addresses = \'*\'     # what IP address(es) to listen on;\n\n\nä¿å­æä»¶å¹¶ä¸éå¯ PostgreSQL æå¡ï¼\n\nsudo systemctl restart postgresql\n\n\nä½¿ç¨sså·¥å·éªè¯ä¿®æ¹ï¼\n\nss -nlt | grep 5432\n\n\nè¾åºæ¾ç¤º PostgreSQL æå¡å¨æ­£å¨çå¬ææçç½ç»æ¥å£(0.0.0.0):\n\nLISTEN  0        244              0.0.0.0:5432           0.0.0.0:*              \nLISTEN  0        244                 [::]:5432              [::]:*\n\n\nä¸ä¸æ­¥å°±æ¯éç½®æå¡å¨æ¥åè¿ç¨è¿æ¥ï¼ç¼è¾/etc/postgresql/12/main/pg_hba.confæä»¶ã\n\nä¸é¢æ¯ä¸äºä¾å­ï¼æ¾ç¤ºä¸åçç¨æ·åºæ¯ï¼\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# The user jane can access all databases from all locations using md5 password\nhost    all             sonarqube       0.0.0.0/0                md5\n\n# The user jane can access only the janedb from all locations using md5 password\nhost    sonarqube       sonarqube       0.0.0.0/0                md5\n\n# The user jane can access all databases from a trusted location (192.168.1.134) without a password\nhost    all             sonarqube       192.168.50.100             trust\n\n\néå¯PostgreSQLæå¡\n\nsudo systemctl restart postgresql\n\n\næåä¸æ­¥ï¼å¯éï¼å°±æ¯å¨ä½ çé²ç«å¢ä¸æå¼ç«¯å£5432ç«¯å£ã\n\nåè®¾ä½ æ­£å¨ä½¿ç¨UFWæ¥ç®¡çä½ çé²ç«å¢ï¼å¹¶ä¸ä½ æ³åè®¸ä»10.17.10.0/24å­ç½è¿æ¥çè®¿é®ï¼ä½ åºè¯¥è¿è¡ä¸é¢çå½ä»¤ï¼\n\nsudo ufw allow proto tcp from 10.17.10.0/24 to any port 5432\n\n\nç¡®ä¿ä½ çé²ç«å¢è¢«éç½®å¥½ï¼å¹¶ä»ä»æ¥åæ¥èªåä¿¡ä»» IP èå´çè¿æ¥ã\n\n\n# å°sonarqubeç¨æ·å¯ç è®¾ç½®ä¸ºsonarqube\n\nsudo su - postgres\npsql\n\npostgres=# \\password sonarqube\nEnter new password: \nEnter it again: \n\npostgres=# SELECT rolname,rolpassword FROM pg_authid;\n          rolname          |             rolpassword             \n---------------------------+-------------------------------------\n postgres                  | \n pg_monitor                | \n pg_read_all_settings      | \n pg_read_all_stats         | \n pg_stat_scan_tables       | \n pg_read_server_files      | \n pg_write_server_files     | \n pg_execute_server_program | \n pg_signal_backend         | \n sonarqube                 | md5699b64e757e1f31984196747c316e4e3\n(10 rows)\n\n\n\n# å®è£JDK\n\nä¸è½½ jdk-11.0.11_linux-x64_bin.tar.gz\n\nsudo mkdir /usr/lib/jvm\nsudo tar -zxvf jdk-11.0.11_linux-x64_bin.tar.gz -C /usr/lib/jvm\n\n\néç½®ç¯å¢åéï¼ç¼è¾sudo vi /etc/profileæä»¶ï¼ææ¡£æåè¿½å å¦ä¸åå®¹ï¼\n\nexport ES_JAVA_HOME=/usr/lib/jvm/jdk-11.0.11\nexport CLASSPATH=.:%{ES_JAVA_HOME}/lib\nexport PATH=${ES_JAVA_HOME}/bin:$PATH\n\n\næ´æ°\n\nsource /etc/profile\n\n\néªè¯\n\nubuntu@sonarqueb:~$ java -version\njava version "11.0.11" 2021-04-20 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.11+9-LTS-194)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.11+9-LTS-194, mixed mode)\n\n\n\n# å®è£SonarQube\n\nåå¤å·¥ä½\n\nsudo sysctl -w vm.max_map_count=524288\nsudo sysctl -w fs.file-max=131072\nulimit -n 131072\nulimit -u 8192\n\n\nå®ç½ä¸è½½å¹¶è§£å ä¸è½½å°å: http://www.sonarqube.org/downloads/ ä¸è½½SonarQube 8.9.1çæ¬\n\nåæ¢å°æ®éç¨æ·\n\n$ cd /home/ubuntu\n$ wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-8.9.1.44547.zip\n\n\nå®è£zip\n\nsudo apt install zip unzip\n\n\nè§£åå®è£\n\n$ unzip sonarqube-8.9.1.44547.zip \n\n\néç½® SonarQube\n\n$ vi /home/ubuntu/sonarqube-8.9.1.44547/conf/sonar.properties\n\n\nä¿®æ¹å¦ä¸åå®¹ï¼\n\n# æ°æ®åºè´¦æ·\nsonar.jdbc.username=sonarqube\nsonar.jdbc.password=sonarqube\n# æ°æ®åºè¿æ¥\nsonar.jdbc.url=jdbc:postgresql://localhost/sonarqube?currentSchema=public\nsonar.web.host=0.0.0.0\nsonar.web.port=9000\n\n\nå¯å¨æµè¯\n\ncd /home/ubuntu/sonarqube-8.9.1.44547/bin/linux-x86-64\n./sonar.sh console\n\n\næµè§å¨è®¿é®ï¼http://Server_IP:9000ï¼é»è®¤ç®¡çåè´¦å·ï¼adminï¼å¯ç ï¼adminãé¦æ¬¡ç»å½åä¿®æ¹å¯ç ã\n\n',normalizedContent:'# sonarqubeèªå¨ä»£ç å®¡æ¥å·¥å·\n\n\n# æ¦è¿°\n\nsonarï¼sonarqubeï¼æ¯ä¸ä¸ªå¼æºå¹³å°ï¼ç¨äºç®¡çæºä»£ç çè´¨éãsonar ä¸åªæ¯ä¸ä¸ªè´¨éæ°æ®æ¥åå·¥å·ï¼æ´æ¯ä»£ç è´¨éç®¡çå¹³å°ãæ¯æçè¯­è¨åæ¬ï¼javaãphpãc#ãcãcobolãpl/sqlãflex ç­ã\n\n\n\n\n# ç¡¬ä»¶è¦æ±\n\nä¸è¡¨ååºäºé¨ç½²sonarqubeçæä½åå»ºè®®çç¡¬ä»¶éç½®ã\n\nèµæº     æå°éç½®    æ¨èéç½®\ncpu    2 cpu   8 cpu\nmem    4 gb    16 gb\ndisk   40 gb   160 gb\n\n\n# è½¯ä»¶çæ¬\n\nä¸è¡¨ååºäºé¨ç½²sonarqubeçä¾èµè½¯ä»¶çæ¬è¦æ±ã\n\nè½¯ä»¶          çæ¬\njava        oracle jre 11 æ openjdk 11\ndatabase    postgresql 12\nos          ubuntu 20.04 server lts\nsonarqube   community 8.9.1 lts\n\n\n# å®è£postgresql\n\npostgresql æè postgres æ¯ä¸ä¸ªå¼æºçï¼å¤ç¨éçå³ç³»åæ°æ®åºç®¡çç³»ç»ãå®æå¾å¤é«çº§ç¹æ§ï¼å¯ä»¥åè®¸ä½ æå»ºå®¹éçç¯å¢æèå¤æçåºç¨ã\n\nå¨åè¿ç¯æç« çæ¶åï¼postgresql å¨ ubuntu å®æ¹è½¯ä»¶æºä¸­çææ°å¯ç¨çæ¬ä¸º 12.7ã\n\n\n# å®è£postgresql:\n\nsudo apt update\nsudo apt install postgresql postgresql-contrib\n\n\næä»¬åæ¶å®è£ postgresql contrib è½¯ä»¶åï¼å®å¯ä»¥æä¾ postgresql æ°æ®åºç³»ç»çä¸äºé¢å¤ç¹æ§ã\n\nä¸æ¦å®è£å®æï¼ postgresql æå¡å°ä¼èªå¨å¯å¨ãä½¿ç¨psqlå·¥å·éè¿è¿æ¥ postgresql æ°æ®åºå¹¶ä¸æå°å®ççæ¬æ¥éªè¯å®è£ï¼\n\nsudo -u postgres psql -c "select version();"\n\n\nè¾åºï¼\n\npostgresql 12.7 (ubuntu 12.7-0ubuntu0.20.04.1) on x86_64-pc-linux-gnu, compiled by gcc (ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0, 64-bit\n\n\nå°±è¿æ ·ãpostgresql å·²ç»å®è£å¥½äºï¼ä½ å¯ä»¥å¼å§ä½¿ç¨å®äºã\n\n\n# postgresqlè§è²åèº«ä»½è®¤è¯æ¹å¼\n\npostgresql æ°æ®åºè®¿é®æéæ¯éè¿è§è²æ¥å¤ççãä¸ä¸ªè§è²ä»£è¡¨ä¸ä¸ªæ°æ®åºç¨æ·æèä¸ä¸ªæ°æ®åºç¨æ·ç»ã\n\npostgresql æ¯æå¤ç§èº«ä»½è®¤è¯æ¹å¼ãæå¸¸ç¨çæ¹æ³å¦ä¸ï¼\n\n * trust - åªè¦æ»¡è¶³pg_hba.confå®ä¹çæ¡ä»¶ï¼ä¸ä¸ªè§è²å°±å¯ä»¥ä¸ä½¿ç¨å¯ç å°±è½è¿æ¥æå¡å¨\n * password - éè¿å¯ç ï¼ä¸ä¸ªè§è²å¯ä»¥è¿æ¥æå¡å¨ãå¯ç å¯ä»¥è¢«å­å¨ä¸º scram-sha-256, md5, å password(ææ)ã\n * ident - ä»ä»æ¯æ tcp/ip è¿æ¥ãå®éå¸¸éè¿ä¸ä¸ªå¯éçç¨æ·åæ å°è¡¨ï¼è·åå®¢æ·ç«¯æä½ç³»ç»ç¨æ·åã\n * peer - å ident ä¸æ ·ï¼ä»ä»æ¯ææ¬å°è¿æ¥ã\n\npostgresql å®¢æ·ç«¯èº«ä»½éªè¯éå¸¸è¢«å®ä¹å¨pg_hba.confæä»¶ä¸­ãé»è®¤æåµä¸ï¼å¯¹äºæ¬å°è¿æ¥ï¼postgresql è¢«è®¾ç½®æèº«ä»½è®¤è¯é²è peerã\n\nä¸ºäºä»¥postgresç¨æ·èº«ä»½ç»å½ postgresql æå¡å¨ï¼é¦ååæ¢ç¨æ·ï¼ç¶åä½¿ç¨psqlå·¥å·è®¿é® postgresqlã\n\nsudo su - postgres\npsql\n\n\nä»è¿éå¼å§ï¼ä½ å¯ä»¥ä¸ postgresql å®ä¾äº¤äºãéåº postgresql shellï¼è¾å¥ï¼\n\n\\q\n\n\nä½ ä¹å¯ä»¥ä¸åæ¢ç¨æ·ï¼èä½¿ç¨sudoå½ä»¤è®¿é® postgresqlï¼\n\nsudo -u postgres psql\n\n\néå¸¸ï¼postgresç¨æ·ä»ä»å¨æ¬å°è¢«ä½¿ç¨ã\n\n\n# åå»º postgresql è§è²åæ°æ®åº\n\nä»ä»è¶çº§ç¨æ·åæ¥æcreateroleæéçè§è²å¯ä»¥åå»ºæ°è§è²ã\n\nå¨ä¸é¢çä¾å­ä¸­ï¼æä»¬åå»ºä¸ä¸ªåç§°ä¸ºsonarqubeçè§è²ï¼ä¸ä¸ªåç§°ä¸ºsonarqubeçæ°æ®åºï¼å¹¶ä¸æäºæ°æ®åºä¸çæéï¼\n\n1)åå»ºä¸ä¸ªæ°ç postgresql è§è²ï¼\n\nsudo su - postgres -c "createuser sonarqube"\n\n\n2)åå»ºä¸ä¸ªæ°ç postgresql æ°æ®åºï¼\n\nsudo su - postgres -c "createdb sonarqube"\n\n\næ³è¦ææç¨æ·æä½æ°æ®åºï¼è¿æ¥å° postgresql shell:\n\nsudo -u postgres psql\n\n\nå¹¶ä¸è¿è¡ä¸é¢ç query:\n\npostgres=# grant all privileges on database sonarqube to sonarqube;\ngrant\n\n\n\n# å¯ç¨è¿ç¨è®¿é®postgresqlæå¡å¨\n\né»è®¤æåµä¸ï¼postgresql æå¡å¨ä»ä»çå¬æ¬å°ç½ç»æ¥å£ï¼127.0.0.1ã\n\nä¸ºäºåè®¸è¿ç¨è®¿é®ä½ ç postgresql æå¡å¨ï¼æå¼éç½®æä»¶postgresql.confå¹¶ä¸å¨connections and authenticationä¸èæ·»å listen_addresses = \'*\'ã\n\nsudo vim /etc/postgresql/12/main/postgresql.conf\n#------------------------------------------------------------------------------\n# connections and authentication\n#------------------------------------------------------------------------------\n\n# - connection settings -\n\nlisten_addresses = \'*\'     # what ip address(es) to listen on;\n\n\nä¿å­æä»¶å¹¶ä¸éå¯ postgresql æå¡ï¼\n\nsudo systemctl restart postgresql\n\n\nä½¿ç¨sså·¥å·éªè¯ä¿®æ¹ï¼\n\nss -nlt | grep 5432\n\n\nè¾åºæ¾ç¤º postgresql æå¡å¨æ­£å¨çå¬ææçç½ç»æ¥å£(0.0.0.0):\n\nlisten  0        244              0.0.0.0:5432           0.0.0.0:*              \nlisten  0        244                 [::]:5432              [::]:*\n\n\nä¸ä¸æ­¥å°±æ¯éç½®æå¡å¨æ¥åè¿ç¨è¿æ¥ï¼ç¼è¾/etc/postgresql/12/main/pg_hba.confæä»¶ã\n\nä¸é¢æ¯ä¸äºä¾å­ï¼æ¾ç¤ºä¸åçç¨æ·åºæ¯ï¼\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n# type  database        user            address                 method\n\n# the user jane can access all databases from all locations using md5 password\nhost    all             sonarqube       0.0.0.0/0                md5\n\n# the user jane can access only the janedb from all locations using md5 password\nhost    sonarqube       sonarqube       0.0.0.0/0                md5\n\n# the user jane can access all databases from a trusted location (192.168.1.134) without a password\nhost    all             sonarqube       192.168.50.100             trust\n\n\néå¯postgresqlæå¡\n\nsudo systemctl restart postgresql\n\n\næåä¸æ­¥ï¼å¯éï¼å°±æ¯å¨ä½ çé²ç«å¢ä¸æå¼ç«¯å£5432ç«¯å£ã\n\nåè®¾ä½ æ­£å¨ä½¿ç¨ufwæ¥ç®¡çä½ çé²ç«å¢ï¼å¹¶ä¸ä½ æ³åè®¸ä»10.17.10.0/24å­ç½è¿æ¥çè®¿é®ï¼ä½ åºè¯¥è¿è¡ä¸é¢çå½ä»¤ï¼\n\nsudo ufw allow proto tcp from 10.17.10.0/24 to any port 5432\n\n\nç¡®ä¿ä½ çé²ç«å¢è¢«éç½®å¥½ï¼å¹¶ä»ä»æ¥åæ¥èªåä¿¡ä»» ip èå´çè¿æ¥ã\n\n\n# å°sonarqubeç¨æ·å¯ç è®¾ç½®ä¸ºsonarqube\n\nsudo su - postgres\npsql\n\npostgres=# \\password sonarqube\nenter new password: \nenter it again: \n\npostgres=# select rolname,rolpassword from pg_authid;\n          rolname          |             rolpassword             \n---------------------------+-------------------------------------\n postgres                  | \n pg_monitor                | \n pg_read_all_settings      | \n pg_read_all_stats         | \n pg_stat_scan_tables       | \n pg_read_server_files      | \n pg_write_server_files     | \n pg_execute_server_program | \n pg_signal_backend         | \n sonarqube                 | md5699b64e757e1f31984196747c316e4e3\n(10 rows)\n\n\n\n# å®è£jdk\n\nä¸è½½ jdk-11.0.11_linux-x64_bin.tar.gz\n\nsudo mkdir /usr/lib/jvm\nsudo tar -zxvf jdk-11.0.11_linux-x64_bin.tar.gz -c /usr/lib/jvm\n\n\néç½®ç¯å¢åéï¼ç¼è¾sudo vi /etc/profileæä»¶ï¼ææ¡£æåè¿½å å¦ä¸åå®¹ï¼\n\nexport es_java_home=/usr/lib/jvm/jdk-11.0.11\nexport classpath=.:%{es_java_home}/lib\nexport path=${es_java_home}/bin:$path\n\n\næ´æ°\n\nsource /etc/profile\n\n\néªè¯\n\nubuntu@sonarqueb:~$ java -version\njava version "11.0.11" 2021-04-20 lts\njava(tm) se runtime environment 18.9 (build 11.0.11+9-lts-194)\njava hotspot(tm) 64-bit server vm 18.9 (build 11.0.11+9-lts-194, mixed mode)\n\n\n\n# å®è£sonarqube\n\nåå¤å·¥ä½\n\nsudo sysctl -w vm.max_map_count=524288\nsudo sysctl -w fs.file-max=131072\nulimit -n 131072\nulimit -u 8192\n\n\nå®ç½ä¸è½½å¹¶è§£å ä¸è½½å°å: http://www.sonarqube.org/downloads/ ä¸è½½sonarqube 8.9.1çæ¬\n\nåæ¢å°æ®éç¨æ·\n\n$ cd /home/ubuntu\n$ wget https://binaries.sonarsource.com/distribution/sonarqube/sonarqube-8.9.1.44547.zip\n\n\nå®è£zip\n\nsudo apt install zip unzip\n\n\nè§£åå®è£\n\n$ unzip sonarqube-8.9.1.44547.zip \n\n\néç½® sonarqube\n\n$ vi /home/ubuntu/sonarqube-8.9.1.44547/conf/sonar.properties\n\n\nä¿®æ¹å¦ä¸åå®¹ï¼\n\n# æ°æ®åºè´¦æ·\nsonar.jdbc.username=sonarqube\nsonar.jdbc.password=sonarqube\n# æ°æ®åºè¿æ¥\nsonar.jdbc.url=jdbc:postgresql://localhost/sonarqube?currentschema=public\nsonar.web.host=0.0.0.0\nsonar.web.port=9000\n\n\nå¯å¨æµè¯\n\ncd /home/ubuntu/sonarqube-8.9.1.44547/bin/linux-x86-64\n./sonar.sh console\n\n\næµè§å¨è®¿é®ï¼http://server_ip:9000ï¼é»è®¤ç®¡çåè´¦å·ï¼adminï¼å¯ç ï¼adminãé¦æ¬¡ç»å½åä¿®æ¹å¯ç ã\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Jenkinsæ´åSonarQubeå®ç°ä»£ç å®¡æ¥",frontmatter:{title:"Jenkinsæ´åSonarQubeå®ç°ä»£ç å®¡æ¥",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/848aec/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/06.Jenkins%E6%95%B4%E5%90%88SonarQube%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5.html",relativePath:"20.DevOps/02.å®æ/06.Jenkinsæ´åSonarQubeå®ç°ä»£ç å®¡æ¥.md",key:"v-233d0506",path:"/pages/848aec/",headers:[{level:2,title:"æµç¨å¾",slug:"æµç¨å¾",normalizedTitle:"æµç¨å¾",charIndex:31},{level:2,title:"Jenkinså®è£SonarQube Scanneræä»¶",slug:"jenkinså®è£sonarqube-scanneræä»¶",normalizedTitle:"jenkinså®è£sonarqube scanneræä»¶",charIndex:41},{level:2,title:"SonarQube çætoken",slug:"sonarqube-çætoken",normalizedTitle:"sonarqube çætoken",charIndex:109},{level:2,title:"Jenkins æ·»å  SonarQubeå­è¯",slug:"jenkins-æ·»å -sonarqubeå­è¯",normalizedTitle:"jenkins æ·»å  sonarqubeå­è¯",charIndex:254},{level:2,title:"Jenkins éç½®SonarQube",slug:"jenkins-éç½®sonarqube",normalizedTitle:"jenkins éç½®sonarqube",charIndex:336},{level:2,title:"SonaQubeå³é­å®¡æ¥ç»æä¸ä¼ å°SCMåè½",slug:"sonaqubeå³é­å®¡æ¥ç»æä¸ä¼ å°scmåè½",normalizedTitle:"sonaqubeå³é­å®¡æ¥ç»æä¸ä¼ å°scmåè½",charIndex:580},{level:2,title:"éæµæ°´çº¿é¡¹ç®",slug:"éæµæ°´çº¿é¡¹ç®",normalizedTitle:"éæµæ°´çº¿é¡¹ç®",charIndex:644},{level:2,title:"æµæ°´çº¿é¡¹ç®",slug:"æµæ°´çº¿é¡¹ç®",normalizedTitle:"æµæ°´çº¿é¡¹ç®",charIndex:645}],headersStr:"æµç¨å¾ Jenkinså®è£SonarQube Scanneræä»¶ SonarQube çætoken Jenkins æ·»å  SonarQubeå­è¯ Jenkins éç½®SonarQube SonaQubeå³é­å®¡æ¥ç»æä¸ä¼ å°SCMåè½ éæµæ°´çº¿é¡¹ç® æµæ°´çº¿é¡¹ç®",content:"# Jenkinsæ´åSonarQubeå®ç°ä»£ç å®¡æ¥\n\n\n# æµç¨å¾\n\n\n\n\n# Jenkinså®è£SonarQube Scanneræä»¶\n\nJenkins -> ç³»ç»ç®¡ç -> æä»¶ç®¡ç -> å¯éæä»¶\n\n\n\n\n# SonarQube çætoken\n\nç¹å»å³ä¸è§å¤´å -> My Account -> Securityï¼Generate Tokens ç¹å» \"Generate\"\n\n\n\nç¹å»\"Copy\"å®è£å¤å¶\n\na691b0c2921eedb7f025a6f95a5147351a520b34\n\n\n# Jenkins æ·»å  SonarQubeå­è¯\n\nJenkins -> ç³»ç»ç®¡ç -> Manage Credentials -> å¨å± -> æ·»å å­æ®\n\n\n\n\n# Jenkins éç½®SonarQube\n\nJenkins -> ç³»ç»ç®¡ç -> ç³»ç»éç½® -> SonarQube servers\n\nç¹å»\"Add SonarQube\"æé®ï¼æ·»å SonarQube servers\n\n * nameï¼sonarqube-8.9.1\n * Server URLï¼http://10.17.10.104:9000/\n\n\n\nç³»ç»ç®¡ç -> å¨å±å·¥å·éç½® -> SonarQube Scanner\n\n * Nameï¼sonarqube-scanner\n\n\n\n\n# SonaQubeå³é­å®¡æ¥ç»æä¸ä¼ å°SCMåè½\n\nè¿åSonarQubeï¼Administration -> SCM\n\n\n\n\n# éæµæ°´çº¿é¡¹ç®\n\nå¨é¡¹ç®æ·»å SonaQubeä»£ç å®¡æ¥\n\n1ï¼é¡¹ç®æ ¹ç®å½ä¸ï¼åå»ºsonar-project.propertiesæä»¶\n\n\n\n# must be unique in a given SonarQube instance\nsonar.projectKey=web-project\n# this is the name and version displayed in the SonarQube UI. Was mandatory prior to SonarQube 9.8.1.\nsonar.projectName=web-project\nsonar.projectVersion=1.0\n# Path is relative to the sonar-project.properties file. Replace \"\\\" by \"/\" on Windows.\n# This property is optional if sonar.modules is set.\nsonar.sources=.\nsonar.exclusions=**/test/**,**/target/**\nsonar.java.source=1.8\nsonar.java.target=1.8\n# Encoding of the source code. Default is default system encoding\nsonar.sourceEncoding=UTF-8\n\n\n2ï¼Jenkinsæ°å»ºä»»å¡ï¼éæ©\"æå»ºä¸ä¸ªèªç±é£æ ¼çè½¯ä»¶é¡¹ç®\"\n\n\n\n3ï¼éç½®æºç ç®¡ç\n\n\n\n4ï¼æ·»å æå»ºæ­¥éª¤ \"Execute SonarQube Scanner\"\n\n\n\n\n\n 5. éç½®å®æï¼ç¹å»\"ç«å³æå»º\"ï¼æå»ºå®æåæå¼SonarQubeå¯ä»¥æ¥çæå»ºç»æ\n\n\n\n\n# æµæ°´çº¿é¡¹ç®\n\n1ï¼ä¿®æ¹Jenkinsfileï¼å å¥SonarQubeä»£ç å®¡æ¥é¶æ®µ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'b8994da1-c4c7-4d37-b12e-939363a42230', url: 'http://192.168.50.100/demo/web-project.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n        stage('sonarqube') {\n            steps{\n                script {\n                    scannerHome = tool 'sonarqube-scanner'\n                }\n                withSonarQubeEnv('sonarqube-8.9.1') {\n                    sh \"${scannerHome}/bin/sonar-scanner\"\n                }\n            }\n        }\n        stage('deploy') {\n            steps {\n                echo 'é¡¹ç®é¨ç½²'\n            }\n        }\n    }\n\n    post {\n          always {\n            emailext body: '${FILE,path=\"email.html\"}', subject: 'æå»ºéç¥:${PROJECT_NAME} - Build # ${BUILD_NUMBER} - ${BUILD_STATUS}!', to: '785056500@qq.com'\n          }\n    }\n}\n\n\n3ï¼å°SonarQubeçUIçé¢æ¥çå®¡æ¥ç»æ\n\n",normalizedContent:"# jenkinsæ´åsonarqubeå®ç°ä»£ç å®¡æ¥\n\n\n# æµç¨å¾\n\n\n\n\n# jenkinså®è£sonarqube scanneræä»¶\n\njenkins -> ç³»ç»ç®¡ç -> æä»¶ç®¡ç -> å¯éæä»¶\n\n\n\n\n# sonarqube çætoken\n\nç¹å»å³ä¸è§å¤´å -> my account -> securityï¼generate tokens ç¹å» \"generate\"\n\n\n\nç¹å»\"copy\"å®è£å¤å¶\n\na691b0c2921eedb7f025a6f95a5147351a520b34\n\n\n# jenkins æ·»å  sonarqubeå­è¯\n\njenkins -> ç³»ç»ç®¡ç -> manage credentials -> å¨å± -> æ·»å å­æ®\n\n\n\n\n# jenkins éç½®sonarqube\n\njenkins -> ç³»ç»ç®¡ç -> ç³»ç»éç½® -> sonarqube servers\n\nç¹å»\"add sonarqube\"æé®ï¼æ·»å sonarqube servers\n\n * nameï¼sonarqube-8.9.1\n * server urlï¼http://10.17.10.104:9000/\n\n\n\nç³»ç»ç®¡ç -> å¨å±å·¥å·éç½® -> sonarqube scanner\n\n * nameï¼sonarqube-scanner\n\n\n\n\n# sonaqubeå³é­å®¡æ¥ç»æä¸ä¼ å°scmåè½\n\nè¿åsonarqubeï¼administration -> scm\n\n\n\n\n# éæµæ°´çº¿é¡¹ç®\n\nå¨é¡¹ç®æ·»å sonaqubeä»£ç å®¡æ¥\n\n1ï¼é¡¹ç®æ ¹ç®å½ä¸ï¼åå»ºsonar-project.propertiesæä»¶\n\n\n\n# must be unique in a given sonarqube instance\nsonar.projectkey=web-project\n# this is the name and version displayed in the sonarqube ui. was mandatory prior to sonarqube 9.8.1.\nsonar.projectname=web-project\nsonar.projectversion=1.0\n# path is relative to the sonar-project.properties file. replace \"\\\" by \"/\" on windows.\n# this property is optional if sonar.modules is set.\nsonar.sources=.\nsonar.exclusions=**/test/**,**/target/**\nsonar.java.source=1.8\nsonar.java.target=1.8\n# encoding of the source code. default is default system encoding\nsonar.sourceencoding=utf-8\n\n\n2ï¼jenkinsæ°å»ºä»»å¡ï¼éæ©\"æå»ºä¸ä¸ªèªç±é£æ ¼çè½¯ä»¶é¡¹ç®\"\n\n\n\n3ï¼éç½®æºç ç®¡ç\n\n\n\n4ï¼æ·»å æå»ºæ­¥éª¤ \"execute sonarqube scanner\"\n\n\n\n\n\n 5. éç½®å®æï¼ç¹å»\"ç«å³æå»º\"ï¼æå»ºå®æåæå¼sonarqubeå¯ä»¥æ¥çæå»ºç»æ\n\n\n\n\n# æµæ°´çº¿é¡¹ç®\n\n1ï¼ä¿®æ¹jenkinsfileï¼å å¥sonarqubeä»£ç å®¡æ¥é¶æ®µ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'b8994da1-c4c7-4d37-b12e-939363a42230', url: 'http://192.168.50.100/demo/web-project.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                sh 'mvn clean package'\n            }\n        }\n        stage('sonarqube') {\n            steps{\n                script {\n                    scannerhome = tool 'sonarqube-scanner'\n                }\n                withsonarqubeenv('sonarqube-8.9.1') {\n                    sh \"${scannerhome}/bin/sonar-scanner\"\n                }\n            }\n        }\n        stage('deploy') {\n            steps {\n                echo 'é¡¹ç®é¨ç½²'\n            }\n        }\n    }\n\n    post {\n          always {\n            emailext body: '${file,path=\"email.html\"}', subject: 'æå»ºéç¥:${project_name} - build # ${build_number} - ${build_status}!', to: '785056500@qq.com'\n          }\n    }\n}\n\n\n3ï¼å°sonarqubeçuiçé¢æ¥çå®¡æ¥ç»æ\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å¾®æå¡æç»­éæ(ä¸)",frontmatter:{title:"å¾®æå¡æç»­éæ(ä¸)",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/8e8067/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/07.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90(%E4%B8%8A).html",relativePath:"20.DevOps/02.å®æ/07.å¾®æå¡æç»­éæ(ä¸).md",key:"v-64d0cdf1",path:"/pages/8e8067/",headers:[{level:2,title:"Jenkins+Docker+SpringCloudæç»­éææµç¨è¯´æ",slug:"jenkins-docker-springcloudæç»­éææµç¨è¯´æ",normalizedTitle:"jenkins+docker+springcloudæç»­éææµç¨è¯´æ",charIndex:17},{level:2,title:"æå¡åè¡¨",slug:"æå¡åè¡¨",normalizedTitle:"æå¡åè¡¨",charIndex:232},{level:2,title:"Harboréåä»åºå®è£åä½¿ç¨",slug:"harboréåä»åºå®è£åä½¿ç¨",normalizedTitle:"harboréåä»åºå®è£åä½¿ç¨",charIndex:512},{level:2,title:"é¡¹ç®ä»£ç ä¸ä¼ å°Gitlab",slug:"é¡¹ç®ä»£ç ä¸ä¼ å°gitlab",normalizedTitle:"é¡¹ç®ä»£ç ä¸ä¼ å°gitlab",charIndex:558},{level:2,title:"ä»Gitlabæåé¡¹ç®æºç ",slug:"ä»gitlabæåé¡¹ç®æºç ",normalizedTitle:"ä»gitlabæåé¡¹ç®æºç ",charIndex:613},{level:2,title:"æäº¤å°SonarQubeä»£ç å®¡æ¥",slug:"æäº¤å°sonarqubeä»£ç å®¡æ¥",normalizedTitle:"æäº¤å°sonarqubeä»£ç å®¡æ¥",charIndex:1123},{level:2,title:"ä½¿ç¨Dockerfileç¼è¯ãçæéåï¼æ¨ééåå°ç§æ",slug:"ä½¿ç¨dockerfileç¼è¯ãçæéå-æ¨ééåå°ç§æ",normalizedTitle:"ä½¿ç¨dockerfileç¼è¯ãçæéåï¼æ¨ééåå°ç§æ",charIndex:2743},{level:2,title:"æåéåååå¸åºç¨",slug:"æåéåååå¸åºç¨",normalizedTitle:"æåéåååå¸åºç¨",charIndex:3508},{level:2,title:"è®¾ç½®SSHéè¿å¯é¥ç»å½",slug:"è®¾ç½®sshéè¿å¯é¥ç»å½",normalizedTitle:"è®¾ç½®sshéè¿å¯é¥ç»å½",charIndex:3562},{level:2,title:"å®è£ Publish Over SSH æä»¶",slug:"å®è£-publish-over-ssh-æä»¶",normalizedTitle:"å®è£ publish over ssh æä»¶",charIndex:4648},{level:2,title:"ä¿®æ¹Jenkinsfileæå»ºèæ¬",slug:"ä¿®æ¹jenkinsfileæå»ºèæ¬",normalizedTitle:"ä¿®æ¹jenkinsfileæå»ºèæ¬",charIndex:1867},{level:2,title:"Jenkinsä¸­Pipelineæ²¡æDockeræ§è¡æéè§£å³åæ³",slug:"jenkinsä¸­pipelineæ²¡ædockeræ§è¡æéè§£å³åæ³",normalizedTitle:"jenkinsä¸­pipelineæ²¡ædockeræ§è¡æéè§£å³åæ³",charIndex:8166},{level:2,title:"æå®jdkçæ¬",slug:"æå®jdkçæ¬",normalizedTitle:"æå®jdkçæ¬",charIndex:8567},{level:2,title:"ç¼ådeploy.shé¨ç½²èæ¬",slug:"ç¼ådeploy-shé¨ç½²èæ¬",normalizedTitle:"ç¼ådeploy.shé¨ç½²èæ¬",charIndex:8782},{level:2,title:"é¨ç½²åç«¯éæwebç½ç«",slug:"é¨ç½²åç«¯éæwebç½ç«",normalizedTitle:"é¨ç½²åç«¯éæwebç½ç«",charIndex:9542},{level:3,title:"å®è£Nginxæå¡å¨",slug:"å®è£nginxæå¡å¨",normalizedTitle:"å®è£nginxæå¡å¨",charIndex:9560},{level:2,title:"å®è£NodeJSæä»¶",slug:"å®è£nodejsæä»¶",normalizedTitle:"å®è£nodejsæä»¶",charIndex:9814},{level:2,title:"Jenkinséç½®Nodejs",slug:"jenkinséç½®nodejs",normalizedTitle:"jenkinséç½®nodejs",charIndex:9831},{level:2,title:"åå»ºåç«¯æµæ°´çº¿é¡¹ç®",slug:"åå»ºåç«¯æµæ°´çº¿é¡¹ç®",normalizedTitle:"åå»ºåç«¯æµæ°´çº¿é¡¹ç®",charIndex:9896},{level:2,title:"å»ºç«Jenkinsfileæå»ºèæ¬",slug:"å»ºç«jenkinsfileæå»ºèæ¬",normalizedTitle:"å»ºç«jenkinsfileæå»ºèæ¬",charIndex:9916}],headersStr:"Jenkins+Docker+SpringCloudæç»­éææµç¨è¯´æ æå¡åè¡¨ Harboréåä»åºå®è£åä½¿ç¨ é¡¹ç®ä»£ç ä¸ä¼ å°Gitlab ä»Gitlabæåé¡¹ç®æºç  æäº¤å°SonarQubeä»£ç å®¡æ¥ ä½¿ç¨Dockerfileç¼è¯ãçæéåï¼æ¨ééåå°ç§æ æåéåååå¸åºç¨ è®¾ç½®SSHéè¿å¯é¥ç»å½ å®è£ Publish Over SSH æä»¶ ä¿®æ¹Jenkinsfileæå»ºèæ¬ Jenkinsä¸­Pipelineæ²¡æDockeræ§è¡æéè§£å³åæ³ æå®jdkçæ¬ ç¼ådeploy.shé¨ç½²èæ¬ é¨ç½²åç«¯éæwebç½ç« å®è£Nginxæå¡å¨ å®è£NodeJSæä»¶ Jenkinséç½®Nodejs åå»ºåç«¯æµæ°´çº¿é¡¹ç® å»ºç«Jenkinsfileæå»ºèæ¬",content:"# å¾®æå¡æç»­éæ(ä¸)\n\n\n# Jenkins+Docker+SpringCloudæç»­éææµç¨è¯´æ\n\n\n\nå¤§è´æµç¨è¯´æï¼\n\n1ï¼å¼åäººåæ¯å¤©æä»£ç æäº¤å°Gitlabä»£ç ä»åº\n\n2ï¼Jenkinsä»Gitlabä¸­æåé¡¹ç®æºç ï¼ç¼è¯å¹¶ææjaråï¼ç¶åæå»ºæDockeréåï¼å°éåä¸ä¼ å° Harborç§æä»åºã\n\n3ï¼JenkinsåéSSHè¿ç¨å½ä»¤ï¼è®©çäº§é¨ç½²æå¡å¨å°Harborç§æä»åºæåéåå°æ¬å°ï¼ç¶ååå»ºå®¹å¨ã\n\n4ï¼æåï¼ç¨æ·å¯ä»¥è®¿é®å°å®¹å¨\n\n\n# æå¡åè¡¨\n\næå¡å¨åç§°         IPå°å             å®è£çè½¯ä»¶\nä»£ç æç®¡æå¡å¨       192.168.50.100   GitLab Community Edition 14.0.5\næç»­éææå¡å¨       192.168.50.101   Jenkinsï¼Mavenï¼Docker18.06.1-ce\nDockerä»åºæå¡å¨   192.168.50.102   Docker18.06.1-ceï¼Harbor1.9.2\nçäº§é¨ç½²æå¡å¨       192.168.50.103   Docker18.06.1-ce\n\n\n# Harboréåä»åºå®è£åä½¿ç¨\n\né¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨\n\n\n# é¡¹ç®ä»£ç ä¸ä¼ å°Gitlab\n\nå¨IDEAæä½å³å¯ï¼åèä¹åçæ­¥éª¤ãåæ¬åå°å¾®æå¡ååç«¯webç½ç«ä»£ç \n\n\n# ä»Gitlabæåé¡¹ç®æºç \n\n1ï¼åå»ºJenkinsfileæä»¶\n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'jenkins-gitlab-checkout-creds', url: 'git@192.168.50.100:ieooc/simplify.git']]])\n            }\n        }\n        stage('Build') {\n            steps {\n                sh 'mvn -B -DskipTests clean package'\n            }\n        }\n    }\n}\n\n\n2ï¼æåJenkinsfileæä»¶\n\n\n# æäº¤å°SonarQubeä»£ç å®¡æ¥\n\n1ï¼åå»ºé¡¹ç®ï¼å¹¶è®¾ç½®åæ°\n\nåå»ºsimplifyé¡¹ç®ï¼æ·»å ä¸¤ä¸ªåæ°\n\n2ï¼æ¯ä¸ªé¡¹ç®çæ ¹ç®å½ä¸æ·»å sonar-project.properties\n\n\n\nÂ \n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n# must be unique in a given SonarQube instance\nsonar.projectKey=simplify\n# this is the name and version displayed in the SonarQube UI.\nsonar.projectName=simplify\nsonar.projectVersion=1.0\n# Path is relative to the sonar-project.properties file. Replace \"\\\" by \"/\" on Windows.\n# This property is optional if sonar.modules is set.\nsonar.sources=.\nsonar.exclusions=**/test/**,**/target/**\nsonar.java.binaries=.\nsonar.java.source=1.8\nsonar.java.target=1.8\nsonar.java.libraries=**/target/classes/**\n# Encoding of the source code. Default is default system encoding\nsonar.sourceEncoding=UTF-8\n\n\næ³¨æ\n\nä¿®æ¹sonar.projectKeyåsonar.projectName\n\n3ï¼ä¿®æ¹Jenkinsfileæå»ºèæ¬\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'jenkins-gitlab-checkout-creds', url: 'git@192.168.50.100:ieooc/simplify.git']]])\n            }\n        }\n        stage('Build') {\n            steps {\n                sh 'mvn -B -DskipTests clean package'\n            }\n        }\n        stage('Code Quality') {\n            steps{\n                script {\n                    scannerHome = tool 'sonarqube-scanner'\n                }\n                withSonarQubeEnv('sonarqube-8.9.1') {\n                    sh \"\"\"\n                        ${scannerHome}/bin/sonar-scanner\n                    \"\"\"\n                }\n            }\n        }\n    }\n}\n\n\n\n# ä½¿ç¨Dockerfileç¼è¯ãçæéåï¼æ¨ééåå°ç§æ\n\n1ï¼Ubuntu å®è£ Docker\n\n2ï¼èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå\n\n3ï¼å©ç¨docker-maven-pluginæä»¶æå»ºDockeréå\n\n4ï¼ä¿®æ¹Jenkinsfileæå»ºèæ¬\n\npipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'jenkins-gitlab-checkout-creds', url: 'http://192.168.50.100/simplify-cloud/simplify.git']]])\n            }\n        }\n        stage('Build') {\n            steps {\n                // ç¼è¯å¹¶å®è£å¬å±èåæ¨¡å\n                sh 'mvn -f simplify-common clean install'\n                // ç¼è¯æå»ºdockeréåå¹¶æ¨éè³Harboréåç§æ\n                sh 'mvn -f ${project_name} clean package docker:build docker:push'\n            }\n        }\n    }\n}\n\n\n\n# æåéåååå¸åºç¨\n\n\n\næç¤º\n\næ³¨æï¼192.168.50.103æå¡å·²ç»å®è£Dockerå¹¶å¯å¨\n\n\n# è®¾ç½®SSHéè¿å¯é¥ç»å½\n\næç¤º\n\nçè®ºä¸åªéè¦å¨çäº§æå¡å¨éç½®SSHå¯é¥ç»å½ï¼æåæ·è´Jenkinsæå¡å¨ä¸çå¬é¥å³å¯ã\n\n1ï¼çæå¯é¥ï¼å¹¶éè¿-m PEMæå®æ ¼å¼\n\nssh-keygen -m PEM -t rsa -b 4096\n\n\nåæ°è¯´æï¼\n\n * -m åæ°æå®å¯é¥çæ ¼å¼ï¼PEMæ¯rsaä¹åä½¿ç¨çæ§æ ¼å¼\n * -b æå®å¯é¥é¿åº¦ãå¯¹äºRSAå¯é¥ï¼æå°è¦æ±768ä½ï¼é»è®¤æ¯2048ä½ã\n\næ¥çå¯é¥æ ¼å¼\n\n\n\nÂ \n\n\n\n\nubuntu@jenkins:~/.ssh$ more /home/ubuntu/.ssh/id_rsa\n-----BEGIN RSA PRIVATE KEY-----\nMIIJKQIBAAKCAgEAuL2pM5NMsPPR9LhvNbfjx1uVMSR8z98ID/s1qMQ5bYVbYTIg\n...\n\n\nå¯ä»¥çå°å¯é¥çé¦è¡æ¯ï¼\n\n-----BEGIN RSA PRIVATE KEY-----\n\n\nèæä»¬çæå¯é¥æ¶å¦æä¸æå®æ ¼å¼ï¼é»è®¤çæçå¯é¥é¦è¡æ¯ï¼\n\n-----BEGIN OPENSSH PRIVATE KEY-----\n\n\nè Jenkins 2.289.1 çæ¬å¨æ£éªå¯é¥æ¶è¿ä¸æ¯æè¿ç§æ ¼å¼ï¼ä¼åºç°å¦ä¸éè¯¯ï¼\n\njenkins.plugins.publish_over.BapPublisherException: Failed to add SSH key. Message [invalid privatekey: [B@60373f7]\n\n\né®å¥ä»¥ä¸å½ä»¤ï¼å¨æå¡å¨ä¸å®è£å¬é¥ï¼\n\ncd ~/.ssh\ncat id_rsa.pub >> authorized_keys\n\n\nå¦æ­¤ä¾¿å®æäºå¬é¥çå®è£ãä¸ºäºç¡®ä¿è¿æ¥æåï¼è¯·ä¿è¯ä»¥ä¸æä»¶æéæ­£ç¡®ï¼\n\nchmod 600 authorized_keys\nchmod 700 ~/.ssh\n\n\nè®¾ç½®SSHï¼æå¼å¯é¥ç»å½åè½\n\nç¼è¾ vi /etc/ssh/sshd_config æä»¶ï¼è¿è¡å¦ä¸è®¾ç½®ï¼\n\nPubkeyAuthentication yes\n\nå½ä½ å®æå¨é¨è®¾ç½®ï¼å¹¶ä»¥å¯é¥æ¹å¼ç»å½æååï¼åç¦ç¨å¯ç ç»å½ï¼\n\nPasswordAuthentication no\n\næåï¼å°ç§é¥æä»¶ id_rsa ä¸è½½å°å®¢æ·ç«¯æºå¨ä¸ï¼éå¯ SSH æå¡ï¼\n\nsystemctl restart sshd.service\n\n\nç»å½jenkinsæå¡å¨ï¼æ·è´sshå¬é¥å°çäº§æå¡å¨\n\nubuntu@jenkins:~$ ssh-copy-id ubuntu@10.17.10.103\n\n\n\n# å®è£ Publish Over SSH æä»¶\n\nå®è£ä»¥ä¸æä»¶ï¼å¯ä»¥å®ç°è¿ç¨åéShellå½ä»¤\n\n\n\næç¤º\n\nå¨éç½®ä¸ä¸åå®¹æ¶ï¼è¦é¦åå¨jenkinsæå¡å¨ä¸çæç§é¥ï¼ç¶åå°å¬é¥æ¨éå°çææå¡å¨ä¸ã\n\nç»å½jenkinsæå¡å¨ï¼æ·è´ç§é¥æä»¶id_rsaå°jenkinså·¥ä½ç®å½ã\n\n# åæ¢rootç¨æ·\nubuntu@jenkins:~$ su\n# æ·è´ç§é¥æä»¶\nroot@jenkins:/home/ubuntu# cp /home/ubuntu/.ssh/id_rsa /var/lib/jenkins/.ssh\n# ä¿®æ¹ç§é¥æä»¶è®¿é®æé\nroot@jenkins:/home/ubuntu# chown jenkins:jenkins /var/lib/jenkins/.ssh/id_rsa\n\n\nç³»ç»ç®¡ç -> ç³»ç»éç½® -> Publish over SSH\n\n\n\n * Passphraseï¼ å¦æç§é¥è®¾ç½®äºå¯ç å°±æ¯ç§é¥çå¯ç ï¼ç§é¥æ²¡è®¾ç½®å¯ç å¯ä»¥ä¸å¡«\n * Path to keyï¼ ç§é¥çä½ç½®(å®éæä»¶æå¨ä½ç½®/var/lib/jenkins/.ssh/id_rsa)\n * Keyï¼ ç§é¥çåå®¹ãå¦ææ­¤å¤å¡«å¥äºå¼ï¼åä»¥æ­¤å¤çå¼ä¸ºåï¼ä¼å¿½ç¥æPath to keyçéç½®\n\n\n\nSSH Serversï¼æå¡å¨çéç½®\n\n * Nameï¼ åç§°ï¼èªå®ä¹ï¼\n * Hostnameï¼ æå¡å¨å°å\n * Usernameï¼ ç¨æ·å\n * Remote Directoryï¼ é»è®¤è¿ç¨æå¡å¨çå°å\n\n\n# ä¿®æ¹Jenkinsfileæå»ºèæ¬\n\nçæè¿ç¨è°ç¨æ¨¡æ¿ä»£ç \n\n\n\nsshPublisher(publishers: [sshPublisherDesc(configName: '10.17.10.107_deploy-simplify', transfers: [sshTransfer(cleanRemote: false, excludes: '', execCommand: \"/home/ubuntu/jenkins_shell/deploy.sh ${HARBOR_URL} ${HARBOR_PROJECT_NAME} ${project_name} ${TAG}\", execTimeout: 120000, flatten: false, makeEmptyDirs: false, noDefaultExcludes: false, patternSeparator: '[, ]+', remoteDirectory: '', remoteDirectorySDF: false, removePrefix: '', sourceFiles: '')], usePromotionTimestamp: false, useWorkspaceInPromotion: false, verbose: false)])\n\n\næ°å¢æå»ºåæ°\n\n * é¡¹ç®æ¨¡ååç§°\n * å¯å¨æå¡ç«¯å£\n\n\n\nå®æ´çJenkinsfileåå®¹æ¥ä¸ï¼\n\npipeline {\n    agent any\n    \n    environment {\n        HARBOR_URL = '10.17.10.110'\n        HARBOR_PROJECT_NAME = 'library'\n        TAG = \"1.0.0-SNAPSHOT\"\n        HARBOR_COMMON_CREDS = credentials('jenkins-harbor-auth-creds')\n    }\n    \n    stages {\n        stage('Checkout') {\n            steps {\n                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'b8994da1-c4c7-4d37-b12e-939363a42230', url: 'http://10.17.10.101/simplify-cloud/simplify.git']]])\n            }\n        }\n        stage('Install') {\n            steps {\n                // Compile and install common modules\n                sh 'mvn -f simplify-common clean install'\n            }\n        }\n        stage('Test') {\n            steps {\n                echo \"do test\"\n            }\n        }\n        stage('Build') {\n            steps {\n                // withCredentials([usernamePassword(credentialsId: 'jenkins-harbor-auth-creds', passwordVariable: 'password', usernameVariable: 'username')]) {\n                //     // Harbor Login\n                //     sh \"docker login -u ${docker_username} -p ${docker_password} ${HARBOR_URL}\"\n                // }\n\n                // Harbor Login\n                sh  \"docker login -u ${HARBOR_COMMON_CREDS_USR} -p ${HARBOR_COMMON_CREDS_PSW} ${HARBOR_URL}\"\n                // Compile and build the docker image and push it to the harbor image private server\n                sh \"mvn -f ${PROJECT_NAME} clean package docker:build docker:push\"\n            }\n        }\n        stage('Deploy') {\n            steps {\n                sshPublisher(publishers: [sshPublisherDesc(configName: '10.17.10.107_deploy-simplify', transfers: [sshTransfer(cleanRemote: false, excludes: '', execCommand: \"/home/ubuntu/jenkins_shell/deploy.sh ${HARBOR_URL} ${HARBOR_PROJECT_NAME} ${project_name} ${TAG} ${PORT} ${HARBOR_COMMON_CREDS_USR} ${HARBOR_COMMON_CREDS_PSW}\", execTimeout: 120000, flatten: false, makeEmptyDirs: false, noDefaultExcludes: false, patternSeparator: '[, ]+', remoteDirectory: '', remoteDirectorySDF: false, removePrefix: '', sourceFiles: '')], usePromotionTimestamp: false, useWorkspaceInPromotion: false, verbose: false)])\n            }\n        }\n    }\n}\n\n\n\n# Jenkinsä¸­Pipelineæ²¡æDockeræ§è¡æéè§£å³åæ³\n\nvi /etc/init.d/jenkins\n\n\næ·»å å¦ä¸åå®¹å°èæ¬é¡¶é¨\n\nDOCKER_SOCKET=/var/run/docker.sock\nDOCKER_GROUP=docker\nJENKINS_USER=jenkins\n\nif [ -S ${DOCKER_SOCKET} ]; then\n    DOCKER_GID=$(stat -c '%g' ${DOCKER_SOCKET})\n    sudo groupadd -for -g ${DOCKER_GID} ${DOCKER_GROUP}\n    sudo usermod -aG ${DOCKER_GROUP} ${JENKINS_USER}\nfi\n\n# Start Jenkins service\nsudo service jenkins restart\n\n\n\n# æå®jdkçæ¬\n\nvi /etc/init.d/jenkins\n\n\næ·»å å¦ä¸åå®¹å°èæ¬é¡¶é¨\n\nexport JAVA_HOME=/usr/lib/jvm/jdk1.8.0_291\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n\n\n\n# ç¼ådeploy.shé¨ç½²èæ¬\n\nä¸ä¼ deploy.shæä»¶å°/opt/jenkins_shellç®å½ä¸ï¼ä¸æä»¶è³å°ææ§è¡æéï¼\n\n#!/bin/bash\n  \nharbor_url=$1\nharbor_project_name=$2\nproject_name=$3\ntag=$4\nport=$5\nharbor_username=$6\nharbor_password=$7\n\nimage_name=\"${harbor_url}/${harbor_project_name}/${project_name}:${tag}\"\n\n\ncontainerId=`docker ps -a | grep -w ${project_name}:${tag} | awk '{print $1}'`\n\nif [ \"$containerId\" != \"\" ]; then\n    docker stop $containerId\n    docker rm $containerId\n    echo \"Container deleted successfully\"\nfi\n\ndocker login -u ${harbor_username} -p ${harbor_password} ${harbor_url}\n\ndocker pull $image_name\n\ndocker run -itd -p ${port}:${port} --name ${project_name} ${image_name}\n\ndocker rmi $(docker images -q -f dangling=true)\n\necho \"Deployment complete\"\n\n\næ·»å æ§è¡æé\n\nchmod +x deploy.sh \n\n\n\n# é¨ç½²åç«¯éæwebç½ç«\n\n\n\n\n# å®è£Nginxæå¡å¨\n\nå³é­SELinux\n\n# ä¸´æ¶å³é­selinux\nsetenforce 0\n# æ°¸ä¹å³é­selinux\nsed -i 's#SELINUX=enforcing#SELINUX=disabled#g' /etc/selinux/config\n\n\nå¯å¨Nginx\n\nsystemctl enable nginx è®¾ç½®å¼æºå¯å¨\nsystemctl start nginx å¯å¨\nsystemctl stop nginx åæ­¢\nsystemctl restart nginx éå¯\n\n\n\n# å®è£NodeJSæä»¶\n\n\n\n\n# Jenkinséç½®Nodejs\n\nManage Jenkins->Global Tool Configuration\n\n\n\n\n# åå»ºåç«¯æµæ°´çº¿é¡¹ç®\n\n\n\n\n\n\n\n\n# å»ºç«Jenkinsfileæå»ºèæ¬\n\n//gitlabçå­è¯\ndef git_auth = \"68f2087f-a034-4d39-a9ff-1f776dd3dfa8\"\nnode {\nstage('Checkout') {\ncheckout([$class: 'GitSCM', branches: [[name: '*/${branch}']],\ndoGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [],\nuserRemoteConfigs: [[credentialsId: \"${git_auth}\", url:\n'git@192.168.66.100:itheima_group/tensquare_front.git']]])\n} s\ntage('æåï¼é¨ç½²ç½ç«') {\n//ä½¿ç¨NodeJSçnpmè¿è¡æå\nnodejs('nodejs12'){\nsh '''\nnpm install\nnpm run build\n'''\n} /\n/=====ä»¥ä¸ä¸ºè¿ç¨è°ç¨è¿è¡é¡¹ç®é¨ç½²========\nsshPublisher(publishers: [sshPublisherDesc(configName: 'master_server',\ntransfers: [sshTransfer(cleanRemote: false, excludes: '', execCommand: '',\nexecTimeout: 120000, flatten: false, makeEmptyDirs: false, noDefaultExcludes:\nfalse, patternSeparator: '[, ]+', remoteDirectory: '/usr/share/nginx/html',\nremoteDirectorySDF: false, removePrefix: 'dist', sourceFiles: 'dist/**')],\nusePromotionTimestamp: false, useWorkspaceInPromotion: false, verbose: false)])\n}\n}\n\n\nå®æåï¼è®¿é®ï¼http://192.168.66.103:9090 è¿è¡æµè¯ã",normalizedContent:"# å¾®æå¡æç»­éæ(ä¸)\n\n\n# jenkins+docker+springcloudæç»­éææµç¨è¯´æ\n\n\n\nå¤§è´æµç¨è¯´æï¼\n\n1ï¼å¼åäººåæ¯å¤©æä»£ç æäº¤å°gitlabä»£ç ä»åº\n\n2ï¼jenkinsä»gitlabä¸­æåé¡¹ç®æºç ï¼ç¼è¯å¹¶ææjaråï¼ç¶åæå»ºædockeréåï¼å°éåä¸ä¼ å° harborç§æä»åºã\n\n3ï¼jenkinsåésshè¿ç¨å½ä»¤ï¼è®©çäº§é¨ç½²æå¡å¨å°harborç§æä»åºæåéåå°æ¬å°ï¼ç¶ååå»ºå®¹å¨ã\n\n4ï¼æåï¼ç¨æ·å¯ä»¥è®¿é®å°å®¹å¨\n\n\n# æå¡åè¡¨\n\næå¡å¨åç§°         ipå°å             å®è£çè½¯ä»¶\nä»£ç æç®¡æå¡å¨       192.168.50.100   gitlab community edition 14.0.5\næç»­éææå¡å¨       192.168.50.101   jenkinsï¼mavenï¼docker18.06.1-ce\ndockerä»åºæå¡å¨   192.168.50.102   docker18.06.1-ceï¼harbor1.9.2\nçäº§é¨ç½²æå¡å¨       192.168.50.103   docker18.06.1-ce\n\n\n# harboréåä»åºå®è£åä½¿ç¨\n\né¨ç½² harbor ä¼ä¸çº§registryæå¡å¨\n\n\n# é¡¹ç®ä»£ç ä¸ä¼ å°gitlab\n\nå¨ideaæä½å³å¯ï¼åèä¹åçæ­¥éª¤ãåæ¬åå°å¾®æå¡ååç«¯webç½ç«ä»£ç \n\n\n# ä»gitlabæåé¡¹ç®æºç \n\n1ï¼åå»ºjenkinsfileæä»¶\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'jenkins-gitlab-checkout-creds', url: 'git@192.168.50.100:ieooc/simplify.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                sh 'mvn -b -dskiptests clean package'\n            }\n        }\n    }\n}\n\n\n2ï¼æåjenkinsfileæä»¶\n\n\n# æäº¤å°sonarqubeä»£ç å®¡æ¥\n\n1ï¼åå»ºé¡¹ç®ï¼å¹¶è®¾ç½®åæ°\n\nåå»ºsimplifyé¡¹ç®ï¼æ·»å ä¸¤ä¸ªåæ°\n\n2ï¼æ¯ä¸ªé¡¹ç®çæ ¹ç®å½ä¸æ·»å sonar-project.properties\n\n\n\nÂ \n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n# must be unique in a given sonarqube instance\nsonar.projectkey=simplify\n# this is the name and version displayed in the sonarqube ui.\nsonar.projectname=simplify\nsonar.projectversion=1.0\n# path is relative to the sonar-project.properties file. replace \"\\\" by \"/\" on windows.\n# this property is optional if sonar.modules is set.\nsonar.sources=.\nsonar.exclusions=**/test/**,**/target/**\nsonar.java.binaries=.\nsonar.java.source=1.8\nsonar.java.target=1.8\nsonar.java.libraries=**/target/classes/**\n# encoding of the source code. default is default system encoding\nsonar.sourceencoding=utf-8\n\n\næ³¨æ\n\nä¿®æ¹sonar.projectkeyåsonar.projectname\n\n3ï¼ä¿®æ¹jenkinsfileæå»ºèæ¬\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'jenkins-gitlab-checkout-creds', url: 'git@192.168.50.100:ieooc/simplify.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                sh 'mvn -b -dskiptests clean package'\n            }\n        }\n        stage('code quality') {\n            steps{\n                script {\n                    scannerhome = tool 'sonarqube-scanner'\n                }\n                withsonarqubeenv('sonarqube-8.9.1') {\n                    sh \"\"\"\n                        ${scannerhome}/bin/sonar-scanner\n                    \"\"\"\n                }\n            }\n        }\n    }\n}\n\n\n\n# ä½¿ç¨dockerfileç¼è¯ãçæéåï¼æ¨ééåå°ç§æ\n\n1ï¼ubuntu å®è£ docker\n\n2ï¼èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå\n\n3ï¼å©ç¨docker-maven-pluginæä»¶æå»ºdockeréå\n\n4ï¼ä¿®æ¹jenkinsfileæå»ºèæ¬\n\npipeline {\n    agent any\n\n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'jenkins-gitlab-checkout-creds', url: 'http://192.168.50.100/simplify-cloud/simplify.git']]])\n            }\n        }\n        stage('build') {\n            steps {\n                // ç¼è¯å¹¶å®è£å¬å±èåæ¨¡å\n                sh 'mvn -f simplify-common clean install'\n                // ç¼è¯æå»ºdockeréåå¹¶æ¨éè³harboréåç§æ\n                sh 'mvn -f ${project_name} clean package docker:build docker:push'\n            }\n        }\n    }\n}\n\n\n\n# æåéåååå¸åºç¨\n\n\n\næç¤º\n\næ³¨æï¼192.168.50.103æå¡å·²ç»å®è£dockerå¹¶å¯å¨\n\n\n# è®¾ç½®sshéè¿å¯é¥ç»å½\n\næç¤º\n\nçè®ºä¸åªéè¦å¨çäº§æå¡å¨éç½®sshå¯é¥ç»å½ï¼æåæ·è´jenkinsæå¡å¨ä¸çå¬é¥å³å¯ã\n\n1ï¼çæå¯é¥ï¼å¹¶éè¿-m pemæå®æ ¼å¼\n\nssh-keygen -m pem -t rsa -b 4096\n\n\nåæ°è¯´æï¼\n\n * -m åæ°æå®å¯é¥çæ ¼å¼ï¼pemæ¯rsaä¹åä½¿ç¨çæ§æ ¼å¼\n * -b æå®å¯é¥é¿åº¦ãå¯¹äºrsaå¯é¥ï¼æå°è¦æ±768ä½ï¼é»è®¤æ¯2048ä½ã\n\næ¥çå¯é¥æ ¼å¼\n\n\n\nÂ \n\n\n\n\nubuntu@jenkins:~/.ssh$ more /home/ubuntu/.ssh/id_rsa\n-----begin rsa private key-----\nmiijkqibaakcageaul2pm5nmsppr9lhvnbfjx1uvmsr8z98id/s1qmq5byvbytig\n...\n\n\nå¯ä»¥çå°å¯é¥çé¦è¡æ¯ï¼\n\n-----begin rsa private key-----\n\n\nèæä»¬çæå¯é¥æ¶å¦æä¸æå®æ ¼å¼ï¼é»è®¤çæçå¯é¥é¦è¡æ¯ï¼\n\n-----begin openssh private key-----\n\n\nè jenkins 2.289.1 çæ¬å¨æ£éªå¯é¥æ¶è¿ä¸æ¯æè¿ç§æ ¼å¼ï¼ä¼åºç°å¦ä¸éè¯¯ï¼\n\njenkins.plugins.publish_over.bappublisherexception: failed to add ssh key. message [invalid privatekey: [b@60373f7]\n\n\né®å¥ä»¥ä¸å½ä»¤ï¼å¨æå¡å¨ä¸å®è£å¬é¥ï¼\n\ncd ~/.ssh\ncat id_rsa.pub >> authorized_keys\n\n\nå¦æ­¤ä¾¿å®æäºå¬é¥çå®è£ãä¸ºäºç¡®ä¿è¿æ¥æåï¼è¯·ä¿è¯ä»¥ä¸æä»¶æéæ­£ç¡®ï¼\n\nchmod 600 authorized_keys\nchmod 700 ~/.ssh\n\n\nè®¾ç½®sshï¼æå¼å¯é¥ç»å½åè½\n\nç¼è¾ vi /etc/ssh/sshd_config æä»¶ï¼è¿è¡å¦ä¸è®¾ç½®ï¼\n\npubkeyauthentication yes\n\nå½ä½ å®æå¨é¨è®¾ç½®ï¼å¹¶ä»¥å¯é¥æ¹å¼ç»å½æååï¼åç¦ç¨å¯ç ç»å½ï¼\n\npasswordauthentication no\n\næåï¼å°ç§é¥æä»¶ id_rsa ä¸è½½å°å®¢æ·ç«¯æºå¨ä¸ï¼éå¯ ssh æå¡ï¼\n\nsystemctl restart sshd.service\n\n\nç»å½jenkinsæå¡å¨ï¼æ·è´sshå¬é¥å°çäº§æå¡å¨\n\nubuntu@jenkins:~$ ssh-copy-id ubuntu@10.17.10.103\n\n\n\n# å®è£ publish over ssh æä»¶\n\nå®è£ä»¥ä¸æä»¶ï¼å¯ä»¥å®ç°è¿ç¨åéshellå½ä»¤\n\n\n\næç¤º\n\nå¨éç½®ä¸ä¸åå®¹æ¶ï¼è¦é¦åå¨jenkinsæå¡å¨ä¸çæç§é¥ï¼ç¶åå°å¬é¥æ¨éå°çææå¡å¨ä¸ã\n\nç»å½jenkinsæå¡å¨ï¼æ·è´ç§é¥æä»¶id_rsaå°jenkinså·¥ä½ç®å½ã\n\n# åæ¢rootç¨æ·\nubuntu@jenkins:~$ su\n# æ·è´ç§é¥æä»¶\nroot@jenkins:/home/ubuntu# cp /home/ubuntu/.ssh/id_rsa /var/lib/jenkins/.ssh\n# ä¿®æ¹ç§é¥æä»¶è®¿é®æé\nroot@jenkins:/home/ubuntu# chown jenkins:jenkins /var/lib/jenkins/.ssh/id_rsa\n\n\nç³»ç»ç®¡ç -> ç³»ç»éç½® -> publish over ssh\n\n\n\n * passphraseï¼ å¦æç§é¥è®¾ç½®äºå¯ç å°±æ¯ç§é¥çå¯ç ï¼ç§é¥æ²¡è®¾ç½®å¯ç å¯ä»¥ä¸å¡«\n * path to keyï¼ ç§é¥çä½ç½®(å®éæä»¶æå¨ä½ç½®/var/lib/jenkins/.ssh/id_rsa)\n * keyï¼ ç§é¥çåå®¹ãå¦ææ­¤å¤å¡«å¥äºå¼ï¼åä»¥æ­¤å¤çå¼ä¸ºåï¼ä¼å¿½ç¥æpath to keyçéç½®\n\n\n\nssh serversï¼æå¡å¨çéç½®\n\n * nameï¼ åç§°ï¼èªå®ä¹ï¼\n * hostnameï¼ æå¡å¨å°å\n * usernameï¼ ç¨æ·å\n * remote directoryï¼ é»è®¤è¿ç¨æå¡å¨çå°å\n\n\n# ä¿®æ¹jenkinsfileæå»ºèæ¬\n\nçæè¿ç¨è°ç¨æ¨¡æ¿ä»£ç \n\n\n\nsshpublisher(publishers: [sshpublisherdesc(configname: '10.17.10.107_deploy-simplify', transfers: [sshtransfer(cleanremote: false, excludes: '', execcommand: \"/home/ubuntu/jenkins_shell/deploy.sh ${harbor_url} ${harbor_project_name} ${project_name} ${tag}\", exectimeout: 120000, flatten: false, makeemptydirs: false, nodefaultexcludes: false, patternseparator: '[, ]+', remotedirectory: '', remotedirectorysdf: false, removeprefix: '', sourcefiles: '')], usepromotiontimestamp: false, useworkspaceinpromotion: false, verbose: false)])\n\n\næ°å¢æå»ºåæ°\n\n * é¡¹ç®æ¨¡ååç§°\n * å¯å¨æå¡ç«¯å£\n\n\n\nå®æ´çjenkinsfileåå®¹æ¥ä¸ï¼\n\npipeline {\n    agent any\n    \n    environment {\n        harbor_url = '10.17.10.110'\n        harbor_project_name = 'library'\n        tag = \"1.0.0-snapshot\"\n        harbor_common_creds = credentials('jenkins-harbor-auth-creds')\n    }\n    \n    stages {\n        stage('checkout') {\n            steps {\n                checkout([$class: 'gitscm', branches: [[name: '*/master']], extensions: [], userremoteconfigs: [[credentialsid: 'b8994da1-c4c7-4d37-b12e-939363a42230', url: 'http://10.17.10.101/simplify-cloud/simplify.git']]])\n            }\n        }\n        stage('install') {\n            steps {\n                // compile and install common modules\n                sh 'mvn -f simplify-common clean install'\n            }\n        }\n        stage('test') {\n            steps {\n                echo \"do test\"\n            }\n        }\n        stage('build') {\n            steps {\n                // withcredentials([usernamepassword(credentialsid: 'jenkins-harbor-auth-creds', passwordvariable: 'password', usernamevariable: 'username')]) {\n                //     // harbor login\n                //     sh \"docker login -u ${docker_username} -p ${docker_password} ${harbor_url}\"\n                // }\n\n                // harbor login\n                sh  \"docker login -u ${harbor_common_creds_usr} -p ${harbor_common_creds_psw} ${harbor_url}\"\n                // compile and build the docker image and push it to the harbor image private server\n                sh \"mvn -f ${project_name} clean package docker:build docker:push\"\n            }\n        }\n        stage('deploy') {\n            steps {\n                sshpublisher(publishers: [sshpublisherdesc(configname: '10.17.10.107_deploy-simplify', transfers: [sshtransfer(cleanremote: false, excludes: '', execcommand: \"/home/ubuntu/jenkins_shell/deploy.sh ${harbor_url} ${harbor_project_name} ${project_name} ${tag} ${port} ${harbor_common_creds_usr} ${harbor_common_creds_psw}\", exectimeout: 120000, flatten: false, makeemptydirs: false, nodefaultexcludes: false, patternseparator: '[, ]+', remotedirectory: '', remotedirectorysdf: false, removeprefix: '', sourcefiles: '')], usepromotiontimestamp: false, useworkspaceinpromotion: false, verbose: false)])\n            }\n        }\n    }\n}\n\n\n\n# jenkinsä¸­pipelineæ²¡ædockeræ§è¡æéè§£å³åæ³\n\nvi /etc/init.d/jenkins\n\n\næ·»å å¦ä¸åå®¹å°èæ¬é¡¶é¨\n\ndocker_socket=/var/run/docker.sock\ndocker_group=docker\njenkins_user=jenkins\n\nif [ -s ${docker_socket} ]; then\n    docker_gid=$(stat -c '%g' ${docker_socket})\n    sudo groupadd -for -g ${docker_gid} ${docker_group}\n    sudo usermod -ag ${docker_group} ${jenkins_user}\nfi\n\n# start jenkins service\nsudo service jenkins restart\n\n\n\n# æå®jdkçæ¬\n\nvi /etc/init.d/jenkins\n\n\næ·»å å¦ä¸åå®¹å°èæ¬é¡¶é¨\n\nexport java_home=/usr/lib/jvm/jdk1.8.0_291\nexport jre_home=${java_home}/jre\nexport classpath=.:${java_home}/lib:${jre_home}/lib\nexport path=${java_home}/bin:$path\n\n\n\n# ç¼ådeploy.shé¨ç½²èæ¬\n\nä¸ä¼ deploy.shæä»¶å°/opt/jenkins_shellç®å½ä¸ï¼ä¸æä»¶è³å°ææ§è¡æéï¼\n\n#!/bin/bash\n  \nharbor_url=$1\nharbor_project_name=$2\nproject_name=$3\ntag=$4\nport=$5\nharbor_username=$6\nharbor_password=$7\n\nimage_name=\"${harbor_url}/${harbor_project_name}/${project_name}:${tag}\"\n\n\ncontainerid=`docker ps -a | grep -w ${project_name}:${tag} | awk '{print $1}'`\n\nif [ \"$containerid\" != \"\" ]; then\n    docker stop $containerid\n    docker rm $containerid\n    echo \"container deleted successfully\"\nfi\n\ndocker login -u ${harbor_username} -p ${harbor_password} ${harbor_url}\n\ndocker pull $image_name\n\ndocker run -itd -p ${port}:${port} --name ${project_name} ${image_name}\n\ndocker rmi $(docker images -q -f dangling=true)\n\necho \"deployment complete\"\n\n\næ·»å æ§è¡æé\n\nchmod +x deploy.sh \n\n\n\n# é¨ç½²åç«¯éæwebç½ç«\n\n\n\n\n# å®è£nginxæå¡å¨\n\nå³é­selinux\n\n# ä¸´æ¶å³é­selinux\nsetenforce 0\n# æ°¸ä¹å³é­selinux\nsed -i 's#selinux=enforcing#selinux=disabled#g' /etc/selinux/config\n\n\nå¯å¨nginx\n\nsystemctl enable nginx è®¾ç½®å¼æºå¯å¨\nsystemctl start nginx å¯å¨\nsystemctl stop nginx åæ­¢\nsystemctl restart nginx éå¯\n\n\n\n# å®è£nodejsæä»¶\n\n\n\n\n# jenkinséç½®nodejs\n\nmanage jenkins->global tool configuration\n\n\n\n\n# åå»ºåç«¯æµæ°´çº¿é¡¹ç®\n\n\n\n\n\n\n\n\n# å»ºç«jenkinsfileæå»ºèæ¬\n\n//gitlabçå­è¯\ndef git_auth = \"68f2087f-a034-4d39-a9ff-1f776dd3dfa8\"\nnode {\nstage('checkout') {\ncheckout([$class: 'gitscm', branches: [[name: '*/${branch}']],\ndogeneratesubmoduleconfigurations: false, extensions: [], submodulecfg: [],\nuserremoteconfigs: [[credentialsid: \"${git_auth}\", url:\n'git@192.168.66.100:itheima_group/tensquare_front.git']]])\n} s\ntage('æåï¼é¨ç½²ç½ç«') {\n//ä½¿ç¨nodejsçnpmè¿è¡æå\nnodejs('nodejs12'){\nsh '''\nnpm install\nnpm run build\n'''\n} /\n/=====ä»¥ä¸ä¸ºè¿ç¨è°ç¨è¿è¡é¡¹ç®é¨ç½²========\nsshpublisher(publishers: [sshpublisherdesc(configname: 'master_server',\ntransfers: [sshtransfer(cleanremote: false, excludes: '', execcommand: '',\nexectimeout: 120000, flatten: false, makeemptydirs: false, nodefaultexcludes:\nfalse, patternseparator: '[, ]+', remotedirectory: '/usr/share/nginx/html',\nremotedirectorysdf: false, removeprefix: 'dist', sourcefiles: 'dist/**')],\nusepromotiontimestamp: false, useworkspaceinpromotion: false, verbose: false)])\n}\n}\n\n\nå®æåï¼è®¿é®ï¼http://192.168.66.103:9090 è¿è¡æµè¯ã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å¾®æå¡æç»­éæ(ä¸)",frontmatter:{title:"å¾®æå¡æç»­éæ(ä¸)",date:"2022-02-09T13:05:17.000Z",permalink:"/pages/b7044d/"},regularPath:"/20.DevOps/02.%E5%AE%9E%E6%88%98/08.%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90(%E4%B8%8B).html",relativePath:"20.DevOps/02.å®æ/08.å¾®æå¡æç»­éæ(ä¸).md",key:"v-6dbf4a31",path:"/pages/b7044d/",headers:[{level:2,title:"Jenkins+Docker+SpringCloudé¨ç½²æ¹æ¡ä¼å",slug:"jenkins-docker-springcloudé¨ç½²æ¹æ¡ä¼å",normalizedTitle:"jenkins+docker+springcloudé¨ç½²æ¹æ¡ä¼å",charIndex:17},{level:2,title:"Jenkins+Docker+SpringCloudéç¾¤é¨ç½²æµç¨è¯´æ",slug:"jenkins-docker-springcloudéç¾¤é¨ç½²æµç¨è¯´æ",normalizedTitle:"jenkins+docker+springcloudéç¾¤é¨ç½²æµç¨è¯´æ",charIndex:211},{level:2,title:"ä¿®æ¹ææå¾®æå¡éç½®",slug:"ä¿®æ¹ææå¾®æå¡éç½®",normalizedTitle:"ä¿®æ¹ææå¾®æå¡éç½®",charIndex:252},{level:2,title:"è®¾è®¡Jenkinséç¾¤é¡¹ç®çæå»ºåæ°",slug:"è®¾è®¡jenkinséç¾¤é¡¹ç®çæå»ºåæ°",normalizedTitle:"è®¾è®¡jenkinséç¾¤é¡¹ç®çæå»ºåæ°",charIndex:277},{level:2,title:"å®æå¾®æå¡å¤æå¡å¨è¿ç¨åå¸",slug:"å®æå¾®æå¡å¤æå¡å¨è¿ç¨åå¸",normalizedTitle:"å®æå¾®æå¡å¤æå¡å¨è¿ç¨åå¸",charIndex:3123},{level:2,title:"Nginx+Zuuléç¾¤å®ç°é«å¯ç¨ç½å³",slug:"nginx-zuuléç¾¤å®ç°é«å¯ç¨ç½å³",normalizedTitle:"nginx+zuuléç¾¤å®ç°é«å¯ç¨ç½å³",charIndex:7192}],headersStr:"Jenkins+Docker+SpringCloudé¨ç½²æ¹æ¡ä¼å Jenkins+Docker+SpringCloudéç¾¤é¨ç½²æµç¨è¯´æ ä¿®æ¹ææå¾®æå¡éç½® è®¾è®¡Jenkinséç¾¤é¡¹ç®çæå»ºåæ° å®æå¾®æå¡å¤æå¡å¨è¿ç¨åå¸ Nginx+Zuuléç¾¤å®ç°é«å¯ç¨ç½å³",content:'# å¾®æå¡æç»­éæ(ä¸)\n\n\n# Jenkins+Docker+SpringCloudé¨ç½²æ¹æ¡ä¼å\n\nä¸é¢é¨ç½²æ¹æ¡å­å¨çé®é¢ï¼\n\n1ï¼ä¸æ¬¡åªè½éæ©ä¸ä¸ªå¾®æå¡é¨ç½²\n\n2ï¼åªæä¸å°çäº§èé¨ç½²æå¡å¨\n\n3ï¼æ¯ä¸ªå¾®æå¡åªæä¸ä¸ªå®ä¾ï¼å®¹éçä½\n\nä¼åæ¹æ¡ï¼\n\n1ï¼å¨ä¸ä¸ªJenkinså·¥ç¨ä¸­å¯ä»¥éæ©å¤ä¸ªå¾®æå¡åæ¶åå¸\n\n2ï¼å¨ä¸ä¸ªJenkinså·¥ç¨ä¸­å¯ä»¥éæ©å¤å°çäº§æå¡å¨åæ¶é¨ç½²\n\n3ï¼æ¯ä¸ªå¾®æå¡é½æ¯ä»¥éç¾¤é«å¯ç¨å½¢å¼é¨ç½²\n\n\n# Jenkins+Docker+SpringCloudéç¾¤é¨ç½²æµç¨è¯´æ\n\n\n\n\n# ä¿®æ¹ææå¾®æå¡éç½®\n\næ³¨åä¸­å¿éç½®(*)\n\n\n# è®¾è®¡Jenkinséç¾¤é¡¹ç®çæå»ºåæ°\n\n1ï¼å®è£Extended Choice Parameteræä»¶\n\n\n\næ¯æå¤éæ¡\n\n2ï¼åå»ºæµæ°´çº¿é¡¹ç®\n\n\n\n3ï¼æ·»å åæ°\n\nå­ç¬¦ä¸²åæ°ï¼åæ¯åç§°\n\n\n\nå¤éæ¡ï¼é¡¹ç®åç§°\n\n\n\n\n\ntensquare_eureka_server@10086,tensquare_zuul@10020,tensquare_admin_service@9001,\ntensquare_gathering@9002\n\n\n\n\næåææï¼\n\n\n\nå®æå¾®æå¡æå»ºéåï¼ä¸ä¼ ç§æ\n\n//gitlabçå­è¯\ndef git_auth = "68f2087f-a034-4d39-a9ff-1f776dd3dfa8"\n//æå»ºçæ¬çåç§°\ndef tag = "latest"\n//Harborç§æå°å\ndef harbor_url = "192.168.66.102:85"\n//Harborçé¡¹ç®åç§°\ndef harbor_project_name = "tensquare"\n//Harborçå­è¯\ndef harbor_auth = "ef499f29-f138-44dd-975e-ff1ca1d8c933"\nnode {\n//æéæ©çé¡¹ç®ä¿¡æ¯è½¬ä¸ºæ°ç»\ndef selectedProjects = "${project_name}".split(\',\')\nstage(\'Checkout\') {\ncheckout([$class: \'GitSCM\', branches: [[name: \'*/${branch}\']],\ndoGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [],\nuserRemoteConfigs: [[credentialsId: \'${git_auth}\', url:\n\'git@192.168.66.100:itheima_group/tensquare_back_cluster.git\']]])\n} s\ntage(\'ä»£ç å®¡æ¥\') {\ndef scannerHome = tool \'sonarqube-scanner\'\nwithSonarQubeEnv(\'sonarqube6.7.4\') {\nfor(int i=0;i<selectedProjects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentProject = selectedProjects[i];\n//é¡¹ç®åç§°\ndef currentProjectName = currentProject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentProjectPort = currentProject.split(\'@\')[1]\nsh """\ncd ${currentProjectName}\n${scannerHome}/bin/sonar-scanner\n"""\necho "${currentProjectName}å®æä»£ç å®¡æ¥"\n}\n}\n} s\ntage(\'ç¼è¯ï¼æå»ºéåï¼é¨ç½²æå¡\') {\n//ç¼è¯å¹¶å®è£å¬å±å·¥ç¨\nsh "mvn -f tensquare_common clean install"\nfor(int i=0;i<selectedProjects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentProject = selectedProjects[i];\n//é¡¹ç®åç§°\ndef currentProjectName = currentProject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentProjectPort = currentProject.split(\'@\')[1]\n//å®ä¹éååç§°\ndef imageName = "${currentProjectName}:${tag}"\n//ç¼è¯ï¼æå»ºæ¬å°éå\nsh "mvn -f ${currentProjectName} clean package\ndockerfile:build"\n//ç»éåææ ç­¾\nsh "docker tag ${imageName}\n${harbor_url}/${harbor_project_name}/${imageName}"\n//ç»å½Harborï¼å¹¶ä¸ä¼ éå\nwithCredentials([usernamePassword(credentialsId:\n"${harbor_auth}", passwordVariable: \'password\', usernameVariable: \'username\')])\n{\n//ç»å½\nsh "docker login -u ${username} -p ${password}\n${harbor_url}"\n//ä¸ä¼ éå\nsh "docker push\n${harbor_url}/${harbor_project_name}/${imageName}"\n} /\n/å é¤æ¬å°éå\nsh "docker rmi -f ${imageName}"\nsh "docker rmi -f\n${harbor_url}/${harbor_project_name}/${imageName}"\n//=====ä»¥ä¸ä¸ºè¿ç¨è°ç¨è¿è¡é¡¹ç®é¨ç½²========\n//sshPublisher(publishers: [sshPublisherDesc(configName:\n\'master_server\', transfers: [sshTransfer(cleanRemote: false, excludes: \'\',\nexecCommand: "/opt/jenkins_shell/deployCluster.sh $harbor_url\n$harbor_project_name $currentProjectName $tag $currentProjectPort", execTimeout:\n120000, flatten: false, makeEmptyDirs: false, noDefaultExcludes: false,\npatternSeparator: \'[, ]+\', remoteDirectory: \'\', remoteDirectorySDF: false,\nremovePrefix: \'\', sourceFiles: \'\')], usePromotionTimestamp: false,\nuseWorkspaceInPromotion: false, verbose: false)])\necho "${currentProjectName}å®æç¼è¯ï¼æå»ºéå"\n}\n}\n}\n\n\n\n# å®æå¾®æå¡å¤æå¡å¨è¿ç¨åå¸\n\n1ï¼éç½®è¿ç¨é¨ç½²æå¡å¨\n\næ·è´å¬é¥å°è¿ç¨æå¡å¨\n\nssh-copy-id 192.168.66.104\n\nç³»ç»éç½®->æ·»å è¿ç¨æå¡å¨\n\n\n\n2ï¼ä¿®æ¹Dockeréç½®ä¿¡ä»»Harborç§æå°å\n\n{ "\nregistry-mirrors": ["https://zydiol88.mirror.aliyuncs.com"],\n"insecure-registries": ["192.168.66.102:85"]\n}\n\n\néå¯Docker\n\n3ï¼æ·»å åæ°\n\nå¤éæ¡ï¼é¨ç½²æå¡å¨\n\n\n\n\n\næç»ææï¼\n\n\n\n4ï¼ä¿®æ¹Jenkinsfileæå»ºèæ¬\n\n//gitlabçå­è¯\ndef git_auth = "68f2087f-a034-4d39-a9ff-1f776dd3dfa8"\n//æå»ºçæ¬çåç§°\ndef tag = "latest"\n//Harborç§æå°å\ndef harbor_url = "192.168.66.102:85"\n//Harborçé¡¹ç®åç§°\ndef harbor_project_name = "tensquare"\n//Harborçå­è¯\ndef harbor_auth = "ef499f29-f138-44dd-975e-ff1ca1d8c933"\nnode {\n//æéæ©çé¡¹ç®ä¿¡æ¯è½¬ä¸ºæ°ç»\ndef selectedProjects = "${project_name}".split(\',\')\n//æéæ©çæå¡åºä¿¡æ¯è½¬ä¸ºæ°ç»\ndef selectedServers = "${publish_server}".split(\',\')\nstage(\'Checkout\') {\ncheckout([$class: \'GitSCM\', branches: [[name: \'*/${branch}\']],\ndoGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [],\nuserRemoteConfigs: [[credentialsId: \'${git_auth}\', url:\n\'git@192.168.66.100:itheima_group/tensquare_back_cluster.git\']]])\n}\nstage(\'ä»£ç å®¡æ¥\') {\ndef scannerHome = tool \'sonarqube-scanner\'\nwithSonarQubeEnv(\'sonarqube6.7.4\') {\nfor(int i=0;i<selectedProjects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentProject = selectedProjects[i];\n//é¡¹ç®åç§°\ndef currentProjectName = currentProject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentProjectPort = currentProject.split(\'@\')[1]\nsh """\ncd ${currentProjectName}\n${scannerHome}/bin/sonar-scanner\n"""\necho "${currentProjectName}å®æä»£ç å®¡æ¥"\n}\n}\n} s\ntage(\'ç¼è¯ï¼æå»ºéåï¼é¨ç½²æå¡\') {\n//ç¼è¯å¹¶å®è£å¬å±å·¥ç¨\nsh "mvn -f tensquare_common clean install"\nfor(int i=0;i<selectedProjects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentProject = selectedProjects[i];\n//é¡¹ç®åç§°\ndef currentProjectName = currentProject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentProjectPort = currentProject.split(\'@\')[1]\n//å®ä¹éååç§°\ndef imageName = "${currentProjectName}:${tag}"\n//ç¼è¯ï¼æå»ºæ¬å°éå\nsh "mvn -f ${currentProjectName} clean package\ndockerfile:build"\n//ç»éåææ ç­¾\nsh "docker tag ${imageName}\n${harbor_url}/${harbor_project_name}/${imageName}"\n//ç»å½Harborï¼å¹¶ä¸ä¼ éå\nwithCredentials([usernamePassword(credentialsId:\n"${harbor_auth}", passwordVariable: \'password\', usernameVariable: \'username\')])\n{\n//ç»å½\nsh "docker login -u ${username} -p ${password}\n${harbor_url}"\n//ä¸ä¼ éå\nsh "docker push\n${harbor_url}/${harbor_project_name}/${imageName}"\n}\n//å é¤æ¬å°éå\nsh "docker rmi -f ${imageName}"\nsh "docker rmi -f\n${harbor_url}/${harbor_project_name}/${imageName}"\n//=====ä»¥ä¸ä¸ºè¿ç¨è°ç¨è¿è¡é¡¹ç®é¨ç½²========\nfor(int j=0;j<selectedServers.size();j++){\n//æ¯ä¸ªæå¡åç§°\ndef currentServer = selectedServers[j]\n//æ·»å å¾®æå¡è¿è¡æ¶çåæ°ï¼spring.profiles.active\ndef activeProfile = "--spring.profiles.active="\nif(currentServer=="master_server"){\nactiveProfile = activeProfile+"eureka-server1"\n}else if(currentServer=="slave_server1"){\nactiveProfile = activeProfile+"eureka-server2"\n} s\nshPublisher(publishers: [sshPublisherDesc(configName:\n"${currentServer}", transfers: [sshTransfer(cleanRemote: false, excludes: \'\',\nexecCommand: "/opt/jenkins_shell/deployCluster.sh $harbor_url\n$harbor_project_name $currentProjectName $tag $currentProjectPort\n$activeProfile", execTimeout: 120000, flatten: false, makeEmptyDirs: false,\nnoDefaultExcludes: false, patternSeparator: \'[, ]+\', remoteDirectory: \'\',\nremoteDirectorySDF: false, removePrefix: \'\', sourceFiles: \'\')],\nusePromotionTimestamp: false, useWorkspaceInPromotion: false, verbose: false)])\n} e\ncho "${currentProjectName}å®æç¼è¯ï¼æå»ºéå"\n}\n}\n}\n\n\n5ï¼ç¼ådeployCluster.shé¨ç½²èæ¬\n\n#\n! /bin/sh\n#æ¥æ¶å¤é¨åæ°\nharbor_url=$1\nharbor_project_name=$2\nproject_name=$3\ntag=$4\nport=$5\nprofile=$6\nimageName=$harbor_url/$harbor_project_name/$project_name:$tag\necho "$imageName"\n#æ¥è¯¢å®¹å¨æ¯å¦å­å¨ï¼å­å¨åå é¤\ncontainerId=`docker ps -a | grep -w ${project_name}:${tag} | awk \'{print $1}\'`\nif [ "$containerId" != "" ] ; then\n#åæå®¹å¨\ndocker stop $containerId\n#å é¤å®¹å¨\ndocker rm $containerId\necho "æåå é¤å®¹å¨"\nfi\n#æ¥è¯¢éåæ¯å¦å­å¨ï¼å­å¨åå é¤\nimageId=`docker images | grep -w $project_name | awk \'{print $3}\'`\nif [ "$imageId" != "" ] ; then\n#å é¤éå\ndocker rmi -f $imageId\necho "æåå é¤éå"\nfi\n# ç»å½Harborç§æ\ndocker login -u itcast -p Itcast123 $harbor_url\n# ä¸è½½éå\ndocker pull $imageName\n# å¯å¨å®¹å¨\ndocker run -di -p $port:$port $imageName $profile\necho "å®¹å¨å¯å¨æå"\n\n\n6ï¼éç¾¤ææ\n\n\n# Nginx+Zuuléç¾¤å®ç°é«å¯ç¨ç½å³\n\n\n\n1ï¼å®è£Nginxï¼å·²å®æï¼\n\n2ï¼ä¿®æ¹Nginxéç½®\n\nvi /etc/nginx/nginx.conf\n\n\nåå®¹å¦ä¸ï¼\n\nupstream zuulServer{\nserver 192.168.66.103:10020 weight=1;\nserver 192.168.66.104:10020 weight=1;\n}\nserver {\nlisten 85 default_server;\nlisten [::]:85 default_server;\nserver_name _;\nroot /usr/share/nginx/html;\n# Load configuration files for the default server block.\ninclude /etc/nginx/default.d/*.conf;\nlocation / {\n### æå®æå¡å¨è´è½½åè¡¡æå¡å¨\nproxy_pass http://zuulServer/;\n}\n}\n\n\n\n3ï¼éå¯Nginxï¼ systemctl restart nginx\n\n4ï¼ä¿®æ¹åç«¯Nginxçè®¿é®å°å\n\n',normalizedContent:'# å¾®æå¡æç»­éæ(ä¸)\n\n\n# jenkins+docker+springcloudé¨ç½²æ¹æ¡ä¼å\n\nä¸é¢é¨ç½²æ¹æ¡å­å¨çé®é¢ï¼\n\n1ï¼ä¸æ¬¡åªè½éæ©ä¸ä¸ªå¾®æå¡é¨ç½²\n\n2ï¼åªæä¸å°çäº§èé¨ç½²æå¡å¨\n\n3ï¼æ¯ä¸ªå¾®æå¡åªæä¸ä¸ªå®ä¾ï¼å®¹éçä½\n\nä¼åæ¹æ¡ï¼\n\n1ï¼å¨ä¸ä¸ªjenkinså·¥ç¨ä¸­å¯ä»¥éæ©å¤ä¸ªå¾®æå¡åæ¶åå¸\n\n2ï¼å¨ä¸ä¸ªjenkinså·¥ç¨ä¸­å¯ä»¥éæ©å¤å°çäº§æå¡å¨åæ¶é¨ç½²\n\n3ï¼æ¯ä¸ªå¾®æå¡é½æ¯ä»¥éç¾¤é«å¯ç¨å½¢å¼é¨ç½²\n\n\n# jenkins+docker+springcloudéç¾¤é¨ç½²æµç¨è¯´æ\n\n\n\n\n# ä¿®æ¹ææå¾®æå¡éç½®\n\næ³¨åä¸­å¿éç½®(*)\n\n\n# è®¾è®¡jenkinséç¾¤é¡¹ç®çæå»ºåæ°\n\n1ï¼å®è£extended choice parameteræä»¶\n\n\n\næ¯æå¤éæ¡\n\n2ï¼åå»ºæµæ°´çº¿é¡¹ç®\n\n\n\n3ï¼æ·»å åæ°\n\nå­ç¬¦ä¸²åæ°ï¼åæ¯åç§°\n\n\n\nå¤éæ¡ï¼é¡¹ç®åç§°\n\n\n\n\n\ntensquare_eureka_server@10086,tensquare_zuul@10020,tensquare_admin_service@9001,\ntensquare_gathering@9002\n\n\n\n\næåææï¼\n\n\n\nå®æå¾®æå¡æå»ºéåï¼ä¸ä¼ ç§æ\n\n//gitlabçå­è¯\ndef git_auth = "68f2087f-a034-4d39-a9ff-1f776dd3dfa8"\n//æå»ºçæ¬çåç§°\ndef tag = "latest"\n//harborç§æå°å\ndef harbor_url = "192.168.66.102:85"\n//harborçé¡¹ç®åç§°\ndef harbor_project_name = "tensquare"\n//harborçå­è¯\ndef harbor_auth = "ef499f29-f138-44dd-975e-ff1ca1d8c933"\nnode {\n//æéæ©çé¡¹ç®ä¿¡æ¯è½¬ä¸ºæ°ç»\ndef selectedprojects = "${project_name}".split(\',\')\nstage(\'checkout\') {\ncheckout([$class: \'gitscm\', branches: [[name: \'*/${branch}\']],\ndogeneratesubmoduleconfigurations: false, extensions: [], submodulecfg: [],\nuserremoteconfigs: [[credentialsid: \'${git_auth}\', url:\n\'git@192.168.66.100:itheima_group/tensquare_back_cluster.git\']]])\n} s\ntage(\'ä»£ç å®¡æ¥\') {\ndef scannerhome = tool \'sonarqube-scanner\'\nwithsonarqubeenv(\'sonarqube6.7.4\') {\nfor(int i=0;i<selectedprojects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentproject = selectedprojects[i];\n//é¡¹ç®åç§°\ndef currentprojectname = currentproject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentprojectport = currentproject.split(\'@\')[1]\nsh """\ncd ${currentprojectname}\n${scannerhome}/bin/sonar-scanner\n"""\necho "${currentprojectname}å®æä»£ç å®¡æ¥"\n}\n}\n} s\ntage(\'ç¼è¯ï¼æå»ºéåï¼é¨ç½²æå¡\') {\n//ç¼è¯å¹¶å®è£å¬å±å·¥ç¨\nsh "mvn -f tensquare_common clean install"\nfor(int i=0;i<selectedprojects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentproject = selectedprojects[i];\n//é¡¹ç®åç§°\ndef currentprojectname = currentproject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentprojectport = currentproject.split(\'@\')[1]\n//å®ä¹éååç§°\ndef imagename = "${currentprojectname}:${tag}"\n//ç¼è¯ï¼æå»ºæ¬å°éå\nsh "mvn -f ${currentprojectname} clean package\ndockerfile:build"\n//ç»éåææ ç­¾\nsh "docker tag ${imagename}\n${harbor_url}/${harbor_project_name}/${imagename}"\n//ç»å½harborï¼å¹¶ä¸ä¼ éå\nwithcredentials([usernamepassword(credentialsid:\n"${harbor_auth}", passwordvariable: \'password\', usernamevariable: \'username\')])\n{\n//ç»å½\nsh "docker login -u ${username} -p ${password}\n${harbor_url}"\n//ä¸ä¼ éå\nsh "docker push\n${harbor_url}/${harbor_project_name}/${imagename}"\n} /\n/å é¤æ¬å°éå\nsh "docker rmi -f ${imagename}"\nsh "docker rmi -f\n${harbor_url}/${harbor_project_name}/${imagename}"\n//=====ä»¥ä¸ä¸ºè¿ç¨è°ç¨è¿è¡é¡¹ç®é¨ç½²========\n//sshpublisher(publishers: [sshpublisherdesc(configname:\n\'master_server\', transfers: [sshtransfer(cleanremote: false, excludes: \'\',\nexeccommand: "/opt/jenkins_shell/deploycluster.sh $harbor_url\n$harbor_project_name $currentprojectname $tag $currentprojectport", exectimeout:\n120000, flatten: false, makeemptydirs: false, nodefaultexcludes: false,\npatternseparator: \'[, ]+\', remotedirectory: \'\', remotedirectorysdf: false,\nremoveprefix: \'\', sourcefiles: \'\')], usepromotiontimestamp: false,\nuseworkspaceinpromotion: false, verbose: false)])\necho "${currentprojectname}å®æç¼è¯ï¼æå»ºéå"\n}\n}\n}\n\n\n\n# å®æå¾®æå¡å¤æå¡å¨è¿ç¨åå¸\n\n1ï¼éç½®è¿ç¨é¨ç½²æå¡å¨\n\næ·è´å¬é¥å°è¿ç¨æå¡å¨\n\nssh-copy-id 192.168.66.104\n\nç³»ç»éç½®->æ·»å è¿ç¨æå¡å¨\n\n\n\n2ï¼ä¿®æ¹dockeréç½®ä¿¡ä»»harborç§æå°å\n\n{ "\nregistry-mirrors": ["https://zydiol88.mirror.aliyuncs.com"],\n"insecure-registries": ["192.168.66.102:85"]\n}\n\n\néå¯docker\n\n3ï¼æ·»å åæ°\n\nå¤éæ¡ï¼é¨ç½²æå¡å¨\n\n\n\n\n\næç»ææï¼\n\n\n\n4ï¼ä¿®æ¹jenkinsfileæå»ºèæ¬\n\n//gitlabçå­è¯\ndef git_auth = "68f2087f-a034-4d39-a9ff-1f776dd3dfa8"\n//æå»ºçæ¬çåç§°\ndef tag = "latest"\n//harborç§æå°å\ndef harbor_url = "192.168.66.102:85"\n//harborçé¡¹ç®åç§°\ndef harbor_project_name = "tensquare"\n//harborçå­è¯\ndef harbor_auth = "ef499f29-f138-44dd-975e-ff1ca1d8c933"\nnode {\n//æéæ©çé¡¹ç®ä¿¡æ¯è½¬ä¸ºæ°ç»\ndef selectedprojects = "${project_name}".split(\',\')\n//æéæ©çæå¡åºä¿¡æ¯è½¬ä¸ºæ°ç»\ndef selectedservers = "${publish_server}".split(\',\')\nstage(\'checkout\') {\ncheckout([$class: \'gitscm\', branches: [[name: \'*/${branch}\']],\ndogeneratesubmoduleconfigurations: false, extensions: [], submodulecfg: [],\nuserremoteconfigs: [[credentialsid: \'${git_auth}\', url:\n\'git@192.168.66.100:itheima_group/tensquare_back_cluster.git\']]])\n}\nstage(\'ä»£ç å®¡æ¥\') {\ndef scannerhome = tool \'sonarqube-scanner\'\nwithsonarqubeenv(\'sonarqube6.7.4\') {\nfor(int i=0;i<selectedprojects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentproject = selectedprojects[i];\n//é¡¹ç®åç§°\ndef currentprojectname = currentproject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentprojectport = currentproject.split(\'@\')[1]\nsh """\ncd ${currentprojectname}\n${scannerhome}/bin/sonar-scanner\n"""\necho "${currentprojectname}å®æä»£ç å®¡æ¥"\n}\n}\n} s\ntage(\'ç¼è¯ï¼æå»ºéåï¼é¨ç½²æå¡\') {\n//ç¼è¯å¹¶å®è£å¬å±å·¥ç¨\nsh "mvn -f tensquare_common clean install"\nfor(int i=0;i<selectedprojects.size();i++){\n//ååºæ¯ä¸ªé¡¹ç®çåç§°åç«¯å£\ndef currentproject = selectedprojects[i];\n//é¡¹ç®åç§°\ndef currentprojectname = currentproject.split(\'@\')[0]\n//é¡¹ç®å¯å¨ç«¯å£\ndef currentprojectport = currentproject.split(\'@\')[1]\n//å®ä¹éååç§°\ndef imagename = "${currentprojectname}:${tag}"\n//ç¼è¯ï¼æå»ºæ¬å°éå\nsh "mvn -f ${currentprojectname} clean package\ndockerfile:build"\n//ç»éåææ ç­¾\nsh "docker tag ${imagename}\n${harbor_url}/${harbor_project_name}/${imagename}"\n//ç»å½harborï¼å¹¶ä¸ä¼ éå\nwithcredentials([usernamepassword(credentialsid:\n"${harbor_auth}", passwordvariable: \'password\', usernamevariable: \'username\')])\n{\n//ç»å½\nsh "docker login -u ${username} -p ${password}\n${harbor_url}"\n//ä¸ä¼ éå\nsh "docker push\n${harbor_url}/${harbor_project_name}/${imagename}"\n}\n//å é¤æ¬å°éå\nsh "docker rmi -f ${imagename}"\nsh "docker rmi -f\n${harbor_url}/${harbor_project_name}/${imagename}"\n//=====ä»¥ä¸ä¸ºè¿ç¨è°ç¨è¿è¡é¡¹ç®é¨ç½²========\nfor(int j=0;j<selectedservers.size();j++){\n//æ¯ä¸ªæå¡åç§°\ndef currentserver = selectedservers[j]\n//æ·»å å¾®æå¡è¿è¡æ¶çåæ°ï¼spring.profiles.active\ndef activeprofile = "--spring.profiles.active="\nif(currentserver=="master_server"){\nactiveprofile = activeprofile+"eureka-server1"\n}else if(currentserver=="slave_server1"){\nactiveprofile = activeprofile+"eureka-server2"\n} s\nshpublisher(publishers: [sshpublisherdesc(configname:\n"${currentserver}", transfers: [sshtransfer(cleanremote: false, excludes: \'\',\nexeccommand: "/opt/jenkins_shell/deploycluster.sh $harbor_url\n$harbor_project_name $currentprojectname $tag $currentprojectport\n$activeprofile", exectimeout: 120000, flatten: false, makeemptydirs: false,\nnodefaultexcludes: false, patternseparator: \'[, ]+\', remotedirectory: \'\',\nremotedirectorysdf: false, removeprefix: \'\', sourcefiles: \'\')],\nusepromotiontimestamp: false, useworkspaceinpromotion: false, verbose: false)])\n} e\ncho "${currentprojectname}å®æç¼è¯ï¼æå»ºéå"\n}\n}\n}\n\n\n5ï¼ç¼ådeploycluster.shé¨ç½²èæ¬\n\n#\n! /bin/sh\n#æ¥æ¶å¤é¨åæ°\nharbor_url=$1\nharbor_project_name=$2\nproject_name=$3\ntag=$4\nport=$5\nprofile=$6\nimagename=$harbor_url/$harbor_project_name/$project_name:$tag\necho "$imagename"\n#æ¥è¯¢å®¹å¨æ¯å¦å­å¨ï¼å­å¨åå é¤\ncontainerid=`docker ps -a | grep -w ${project_name}:${tag} | awk \'{print $1}\'`\nif [ "$containerid" != "" ] ; then\n#åæå®¹å¨\ndocker stop $containerid\n#å é¤å®¹å¨\ndocker rm $containerid\necho "æåå é¤å®¹å¨"\nfi\n#æ¥è¯¢éåæ¯å¦å­å¨ï¼å­å¨åå é¤\nimageid=`docker images | grep -w $project_name | awk \'{print $3}\'`\nif [ "$imageid" != "" ] ; then\n#å é¤éå\ndocker rmi -f $imageid\necho "æåå é¤éå"\nfi\n# ç»å½harborç§æ\ndocker login -u itcast -p itcast123 $harbor_url\n# ä¸è½½éå\ndocker pull $imagename\n# å¯å¨å®¹å¨\ndocker run -di -p $port:$port $imagename $profile\necho "å®¹å¨å¯å¨æå"\n\n\n6ï¼éç¾¤ææ\n\n\n# nginx+zuuléç¾¤å®ç°é«å¯ç¨ç½å³\n\n\n\n1ï¼å®è£nginxï¼å·²å®æï¼\n\n2ï¼ä¿®æ¹nginxéç½®\n\nvi /etc/nginx/nginx.conf\n\n\nåå®¹å¦ä¸ï¼\n\nupstream zuulserver{\nserver 192.168.66.103:10020 weight=1;\nserver 192.168.66.104:10020 weight=1;\n}\nserver {\nlisten 85 default_server;\nlisten [::]:85 default_server;\nserver_name _;\nroot /usr/share/nginx/html;\n# load configuration files for the default server block.\ninclude /etc/nginx/default.d/*.conf;\nlocation / {\n### æå®æå¡å¨è´è½½åè¡¡æå¡å¨\nproxy_pass http://zuulserver/;\n}\n}\n\n\n\n3ï¼éå¯nginxï¼ systemctl restart nginx\n\n4ï¼ä¿®æ¹åç«¯nginxçè®¿é®å°å\n\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Lombokä½¿ç¨æå",frontmatter:{title:"Lombokä½¿ç¨æå",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/d49c54/"},regularPath:"/21.Simplify/01.Simplify%20Docs/01.Lombok%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html",relativePath:"21.Simplify/01.Simplify Docs/01.Lombokä½¿ç¨æå.md",key:"v-f97f4056",path:"/pages/d49c54/",headers:[{level:2,title:"Lombok ç®ä»",slug:"lombok-ç®ä»",normalizedTitle:"lombok ç®ä»",charIndex:19},{level:2,title:"Lombok å®è£",slug:"lombok-å®è£",normalizedTitle:"lombok å®è£",charIndex:32},{level:3,title:"æå»ºå·¥å·",slug:"æå»ºå·¥å·",normalizedTitle:"æå»ºå·¥å·",charIndex:47},{level:3,title:"IDE",slug:"ide",normalizedTitle:"ide",charIndex:57},{level:2,title:"Lombok è¯¦è§£",slug:"lombok-è¯¦è§£",normalizedTitle:"lombok è¯¦è§£",charIndex:64},{level:3,title:"@Getter and @Setter",slug:"getter-and-setter",normalizedTitle:"@getter and @setter",charIndex:79},{level:3,title:"Constructor Annotations",slug:"constructor-annotations",normalizedTitle:"constructor annotations",charIndex:104},{level:3,title:"@UtilityClass",slug:"utilityclass",normalizedTitle:"@utilityclass",charIndex:133},{level:3,title:"@EqualsAndHashCode",slug:"equalsandhashcode",normalizedTitle:"@equalsandhashcode",charIndex:152},{level:3,title:"@ToString",slug:"tostring",normalizedTitle:"@tostring",charIndex:176},{level:3,title:"@Data",slug:"data",normalizedTitle:"@data",charIndex:191},{level:3,title:"@Log",slug:"log",normalizedTitle:"@log",charIndex:202},{level:3,title:"@Synchronized",slug:"synchronized",normalizedTitle:"@synchronized",charIndex:212},{level:3,title:"@Builder",slug:"builder",normalizedTitle:"@builder",charIndex:231},{level:3,title:"@SneakyThrows",slug:"sneakythrows",normalizedTitle:"@sneakythrows",charIndex:245},{level:3,title:"@NonNull",slug:"nonnull",normalizedTitle:"@nonnull",charIndex:264},{level:3,title:"@Clean",slug:"clean",normalizedTitle:"@clean",charIndex:278},{level:3,title:"@With",slug:"with",normalizedTitle:"@with",charIndex:290},{level:3,title:"@Accessors",slug:"accessors",normalizedTitle:"@accessors",charIndex:301},{level:3,title:"å¶å®ç¹æ§",slug:"å¶å®ç¹æ§",normalizedTitle:"å¶å®ç¹æ§",charIndex:317},{level:2,title:"Lombokæ³¨è§£åç",slug:"lombokæ³¨è§£åç",normalizedTitle:"lombokæ³¨è§£åç",charIndex:325}],headersStr:"Lombok ç®ä» Lombok å®è£ æå»ºå·¥å· IDE Lombok è¯¦è§£ @Getter and @Setter Constructor Annotations @UtilityClass @EqualsAndHashCode @ToString @Data @Log @Synchronized @Builder @SneakyThrows @NonNull @Clean @With @Accessors å¶å®ç¹æ§ Lombokæ³¨è§£åç",content:'# Lombokä½¿ç¨æå\n\n\n\n * Lombok ç®ä»\n * Lombok å®è£\n   * æå»ºå·¥å·\n   * IDE\n * Lombok è¯¦è§£\n   * @Getter and @Setter\n   * Constructor Annotations\n   * @UtilityClass\n   * @EqualsAndHashCode\n   * @ToString\n   * @Data\n   * @Log\n   * @Synchronized\n   * @Builder\n   * @SneakyThrows\n   * @NonNull\n   * @Clean\n   * @With\n   * @Accessors\n   * å¶å®ç¹æ§\n * Lombokæ³¨è§£åç\n\n\n\n\n# Lombok ç®ä»\n\nLombok æ¯ä¸æ¬¾ Java å¼åæä»¶ï¼ä½¿å¾ Java å¼åèå¯ä»¥éè¿å¶å®ä¹çä¸äºæ³¨è§£æ¥æ¶é¤ä¸å¡å·¥ç¨ä¸­åé¿åç¹ççä»£ç ï¼å°¤å¶å¯¹äºç®åç Java æ¨¡åå¯¹è±¡ï¼POJOï¼ãå¨å¼åç¯å¢ä¸­ä½¿ç¨ Lombok æä»¶åï¼Java å¼åäººåå¯ä»¥èçåºéå¤æå»ºï¼è¯¸å¦ hashCode å equals è¿æ ·çæ¹æ³ä»¥ååç§ä¸å¡å¯¹è±¡æ¨¡åç accessor å toString ç­æ¹æ³çå¤§éæ¶é´ãå¯¹äºè¿äºæ¹æ³ï¼Lombok è½å¤å¨ç¼è¯æºä»£ç æé´èªå¨å¸®æä»¬çæè¿äºæ¹æ³ï¼ä½å¹¶ä¸ä¼ååå°é£æ ·éä½ç¨åºçæ§è½ã\n\n\n# Lombok å®è£\n\n\n# æå»ºå·¥å·\n\n * Maven\n\nå¨ Maven é¡¹ç®ç pom.xml æä»¶ä¸­æ·»å  Lombok ä¾èµï¼\n\n<dependency>\n    <groupId>org.projectlombok</groupId>\n    <artifactId>lombok</artifactId>\n    <version>1.18.10</version>\n    <scope>provided</scope>\n</dependency>\n\n\n\n# IDE\n\nç±äº Lombok ä»å¨ç¼è¯é¶æ®µçæä»£ç ï¼æä»¥ä½¿ç¨ Lombok æ³¨è§£çæºä»£ç ï¼å¨ IDE ä¸­ä¼è¢«é«äº®æ¾ç¤ºéè¯¯ï¼éå¯¹è¿ä¸ªé®é¢å¯ä»¥éè¿å®è£ IDE å¯¹åºçæä»¶æ¥è§£å³ãå·ä½çå®è£æ¹å¼å¯ä»¥åè:https://www.baeldung.com/lombok-ideã\n\nLombok in IntelliJ IDEA\n\n\n\n\n# Lombok è¯¦è§£\n\næ³¨è§£è¯´æ\n\n * valï¼ç¨å¨å±é¨åéåé¢ï¼ç¸å½äºå°åéå£°æä¸ºfinal\n\n * @NonNullï¼ç»æ¹æ³åæ°å¢å è¿ä¸ªæ³¨è§£ä¼èªå¨å¨æ¹æ³åå¯¹è¯¥åæ°è¿è¡æ¯å¦ä¸ºç©ºçæ ¡éªï¼å¦æä¸ºç©ºï¼åæåºNPEï¼NullPointerExceptionï¼\n\n * @Cleanupï¼èªå¨ç®¡çèµæºï¼ç¨å¨å±é¨åéä¹åï¼å¨å½ååéèå´åå³å°æ§è¡å®æ¯éåºä¹åä¼èªå¨æ¸çèµæºï¼èªå¨çætry-finallyè¿æ ·çä»£ç æ¥å³é­æµ\n\n * @Getter/@Setterï¼ç¨å¨å±æ§ä¸ï¼åä¹ä¸ç¨èªå·±æåsetterågetteræ¹æ³äºï¼è¿å¯ä»¥æå®è®¿é®èå´\n\n * @ToStringï¼ç¨å¨ç±»ä¸ï¼å¯ä»¥èªå¨è¦åtoStringæ¹æ³ï¼å½ç¶è¿å¯ä»¥å å¶ä»åæ°ï¼ä¾å¦@ToString(exclude=âidâ)æé¤idå±æ§ï¼æè@ToString(callSuper=true, includeFieldNames=true)è°ç¨ç¶ç±»çtoStringæ¹æ³ï¼åå«ææå±æ§\n\n * @EqualsAndHashCodeï¼ç¨å¨ç±»ä¸ï¼èªå¨çæequalsæ¹æ³åhashCodeæ¹æ³\n\n * @NoArgsConstructor, @RequiredArgsConstructor and @AllArgsConstructorï¼ç¨å¨ç±»ä¸ï¼èªå¨çææ åæé åä½¿ç¨ææåæ°çæé å½æ°ä»¥åæææ@NonNullå±æ§ä½ä¸ºåæ°çæé å½æ°ï¼å¦ææå®staticName = âofâåæ°ï¼åæ¶è¿ä¼çæä¸ä¸ªè¿åç±»å¯¹è±¡çéæå·¥åæ¹æ³ï¼æ¯ä½¿ç¨æé å½æ°æ¹ä¾¿å¾å¤\n\n * @UtilityClass:æ³¨è§£å¨ç±»ä¸ï¼æ·»å äºstaticåæ¶åå»ºäºä¸ä¸ªç§æçæé æ¹æ³\n\n * @Dataï¼æ³¨è§£å¨ç±»ä¸ï¼ç¸å½äºåæ¶ä½¿ç¨äº@ToStringã@EqualsAndHashCodeã@Getterã@Setterå@RequiredArgsConstrutorè¿äºæ³¨è§£ï¼å¯¹äºPOJOç±»ååæç¨\n\n * @Valueï¼ç¨å¨ç±»ä¸ï¼æ¯@Dataçä¸å¯åå½¢å¼ï¼ç¸å½äºä¸ºå±æ§æ·»å finalå£°æï¼åªæä¾getteræ¹æ³ï¼èä¸æä¾setteræ¹æ³\n\n * @Builderï¼ç¨å¨ç±»ãæé å¨ãæ¹æ³ä¸ï¼ä¸ºä½ æä¾å¤æçbuilder APIsï¼è®©ä½ å¯ä»¥åå¦ä¸æ¹å¼ä¸æ ·è°ç¨Person.builder().name("Adam Savage").city("San Francisco").job("Mythbusters").job("Unchained Reaction").build();æ´å¤è¯´æåèBuilder\n\n * @SneakyThrowsï¼èªå¨æåæ£å¼å¸¸ï¼èæ éæ¾å¼å¨æ¹æ³ä¸ä½¿ç¨throwsè¯­å¥\n\n * @Synchronizedï¼ç¨å¨æ¹æ³ä¸ï¼å°æ¹æ³å£°æä¸ºåæ­¥çï¼å¹¶èªå¨å éï¼èéå¯¹è±¡æ¯ä¸ä¸ªç§æçå±æ§$lockæ$LOCKï¼èjavaä¸­çsynchronizedå³é®å­éå¯¹è±¡æ¯thisï¼éå¨thisæèèªå·±çç±»å¯¹è±¡ä¸å­å¨å¯ä½ç¨ï¼å°±æ¯ä½ ä¸è½é»æ­¢éåæ§ä»£ç å»éthisæèç±»å¯¹è±¡ï¼è¿å¯è½ä¼å¯¼è´ç«äºæ¡ä»¶æèå¶å®çº¿ç¨éè¯¯\n\n * @Getter(lazy=true)ï¼å¯ä»¥æ¿ä»£ç»å¸çDouble Check Lockæ ·æ¿ä»£ç \n\n * @Logï¼æ ¹æ®ä¸åçæ³¨è§£çæä¸åç±»åçlogå¯¹è±¡ï¼ä½æ¯å®ä¾åç§°é½æ¯logï¼æå­ç§å¯éå®ç°ç±»\n\n * * @CommonsLog Creates log = org.apache.commons.logging.LogFactory.getLog(LogExample.class);\n   * @Log Creates log = java.util.logging.Logger.getLogger(LogExample.class.getName());\n   * @Log4j Creates log = org.apache.log4j.Logger.getLogger(LogExample.class);\n   * @Log4j2 Creates log = org.apache.logging.log4j.LogManager.getLogger(LogExample.class);\n   * @Slf4j Creates log = org.slf4j.LoggerFactory.getLogger(LogExample.class);\n   * @XSlf4j Creates log = org.slf4j.ext.XLoggerFactory.getXLogger(LogExample.class);\n\n\n# @Getter and @Setter\n\nä½ å¯ä»¥ä½¿ç¨ @Getter æ @Setter æ³¨éä»»ä½ç±»æå­æ®µï¼Lombok ä¼èªå¨çæé»è®¤ç getter/setter æ¹æ³ã\n\n@Getter\n\n@Target({ElementType.FIELD, ElementType.TYPE})\n@Retention(RetentionPolicy.SOURCE)\npublic @interface Getter {\n  // è¥getteræ¹æ³épublicçè¯ï¼å¯ä»¥è®¾ç½®å¯è®¿é®çº§å«\n    lombok.AccessLevel value() default lombok.AccessLevel.PUBLIC;\n    AnyAnnotation[] onMethod() default {};\n  // æ¯å¦å¯ç¨å»¶è¿åå§å\n    boolean lazy() default false;\n}\n\n\n@Setter\n\n@Target({ElementType.FIELD, ElementType.TYPE})\n@Retention(RetentionPolicy.SOURCE)\npublic @interface Setter {\n  // è¥setteræ¹æ³épublicçè¯ï¼å¯ä»¥è®¾ç½®å¯è®¿é®çº§å«\n    lombok.AccessLevel value() default lombok.AccessLevel.PUBLIC;\n    AnyAnnotation[] onMethod() default {};\n    AnyAnnotation[] onParam() default {};\n}\n\n\nä½¿ç¨ç¤ºä¾\n\n@Getter\n@Setter\npublic class GetterAndSetterDemo {\n    String firstName;\n    String lastName;\n    LocalDate dateOfBirth;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class GetterAndSetterDemo {\n    String firstName;\n    String lastName;\n    LocalDate dateOfBirth;\n\n    public GetterAndSetterDemo() {\n    }\n\n    // çç¥å¶å®setterågetteræ¹æ³\n    public String getFirstName() {\n        return this.firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n}\n\n\nLazy Getter\n\n@Getter æ³¨è§£æ¯æä¸ä¸ª lazy å±æ§ï¼è¯¥å±æ§é»è®¤ä¸º falseãå½è®¾ç½®ä¸º true æ¶ï¼ä¼å¯ç¨å»¶è¿åå§åï¼å³å½é¦æ¬¡è°ç¨ getter æ¹æ³æ¶æè¿è¡åå§åã\n\nç¤ºä¾\n\npublic class LazyGetterDemo {\n    public static void main(String[] args) {\n        LazyGetterDemo m = new LazyGetterDemo();\n        System.out.println("Main instance is created");\n        m.getLazy();\n    }\n\n    @Getter\n    private final String notLazy = createValue("not lazy");\n\n    @Getter(lazy = true)\n    private final String lazy = createValue("lazy");\n\n    private String createValue(String name) {\n        System.out.println("createValue(" + name + ")");\n        return null;\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class LazyGetterDemo {\n    private final String notLazy = this.createValue("not lazy");\n    private final AtomicReference<Object> lazy = new AtomicReference();\n\n    // å·²çç¥é¨åä»£ç \n    public String getNotLazy() {\n        return this.notLazy;\n    }\n\n    public String getLazy() {\n        Object value = this.lazy.get();\n        if (value == null) {\n            synchronized(this.lazy) {\n                value = this.lazy.get();\n                if (value == null) {\n                    String actualValue = this.createValue("lazy");\n                    value = actualValue == null ? this.lazy : actualValue;\n                    this.lazy.set(value);\n                }\n            }\n        }\n\n        return (String)((String)(value == this.lazy ? null : value));\n    }\n}\n\n\néè¿ä»¥ä¸ä»£ç å¯ç¥ï¼è°ç¨ getLazy æ¹æ³æ¶ï¼è¥åç° value ä¸º nullï¼åä¼å¨åæ­¥ä»£ç åä¸­æ§è¡åå§åæä½ã\n\n\n# Constructor Annotations\n\n@NoArgsConstructor\n\nä½¿ç¨ @NoArgsConstructor æ³¨è§£å¯ä»¥ä¸ºæå®ç±»ï¼çæé»è®¤çæé å½æ°ï¼@NoArgsConstructor æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface NoArgsConstructor {\n  // è¥è®¾ç½®è¯¥å±æ§ï¼å°ä¼çæä¸ä¸ªç§æçæé å½æ°ä¸çæä¸ä¸ªstaticNameæå®çéææ¹æ³\n    String staticName() default "";\n    AnyAnnotation[] onConstructor() default {};\n  // è®¾ç½®çææé å½æ°çè®¿é®çº§å«ï¼é»è®¤æ¯public\n    AccessLevel access() default lombok.AccessLevel.PUBLIC;\n  // è¥è®¾ç½®ä¸ºtrueï¼ååå§åææfinalçå­æ®µä¸º0/null/false\n    boolean force() default false;\n}\n\n\nç¤ºä¾\n\n@NoArgsConstructor(staticName = "getInstance")\npublic class NoArgsConstructorDemo {\n    private long id;\n    private String name;\n    private int age;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class NoArgsConstructorDemo {\n    private long id;\n    private String name;\n    private int age;\n\n    private NoArgsConstructorDemo() {\n    }\n\n    public static NoArgsConstructorDemo getInstance() {\n        return new NoArgsConstructorDemo();\n    }\n}\n\n\n@AllArgsConstructor\n\nä½¿ç¨ @AllArgsConstructor æ³¨è§£å¯ä»¥ä¸ºæå®ç±»ï¼çæåå«æææåçæé å½æ°ï¼@AllArgsConstructor æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface AllArgsConstructor {\n  // è¥è®¾ç½®è¯¥å±æ§ï¼å°ä¼çæä¸ä¸ªç§æçæé å½æ°ä¸çæä¸ä¸ªstaticNameæå®çéææ¹æ³\n    String staticName() default "";\n    AnyAnnotation[] onConstructor() default {};\n  // è®¾ç½®çææé å½æ°çè®¿é®çº§å«ï¼é»è®¤æ¯public\n    AccessLevel access() default lombok.AccessLevel.PUBLIC;\n}\n\n\nç¤ºä¾\n\n@AllArgsConstructor\npublic class AllArgsConstructorDemo {\n    private long id;\n    private String name;\n    private int age;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class AllArgsConstructorDemo {\n    private long id;\n    private String name;\n    private int age;\n\n    public AllArgsConstructorDemo(long id, String name, int age) {\n        this.id = id;\n        this.name = name;\n        this.age = age;\n    }\n}\n\n\n@RequiredArgsConstructor\n\nä½¿ç¨ @RequiredArgsConstructor æ³¨è§£å¯ä»¥ä¸ºæå®ç±»å¿éåå§åçæååéï¼å¦ final æååéï¼çæå¯¹åºçæé å½æ°ï¼@RequiredArgsConstructor æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface RequiredArgsConstructor {\n  // è¥è®¾ç½®è¯¥å±æ§ï¼å°ä¼çæä¸ä¸ªç§æçæé å½æ°ä¸çæä¸ä¸ªstaticNameæå®çéææ¹æ³\n    String staticName() default "";\n    AnyAnnotation[] onConstructor() default {};\n  // è®¾ç½®çææé å½æ°çè®¿é®çº§å«ï¼é»è®¤æ¯public\n    AccessLevel access() default lombok.AccessLevel.PUBLIC;\n}\n\n\nç¤ºä¾\n\n@RequiredArgsConstructor\npublic class RequiredArgsConstructorDemo {\n    private final long id;\n    private String name;\n    private int age;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class RequiredArgsConstructorDemo {\n    private final long id;\n    private String name;\n    private int age;\n\n    public RequiredArgsConstructorDemo(long id) {\n        this.id = id;\n    }\n}\n\n\n\n# @UtilityClass\n\nç¤ºä¾\n\n@UtilityClass\npublic class SecurityUtils {\n\n    public Authentication getAuthentication() {\n        return SecurityContextHolder.getContext().getAuthentication();\n    }\n\n    public SimplifyUser getUser(Authentication authentication) {\n        Object principal = authentication.getPrincipal();\n        if (principal instanceof SimplifyUser) {\n            return (SimplifyUser) principal;\n        }\n        return null;\n    }\n\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic final class SecurityUtils {\n    public static Authentication getAuthentication() {\n        return SecurityContextHolder.getContext().getAuthentication();\n    }\n\n    private SecurityUtils() {\n        throw new UnsupportedOperationException("This is a utility class and cannot be instantiated");\n    }\n}\n\n\n\n# @EqualsAndHashCode\n\nä½¿ç¨ @EqualsAndHashCode æ³¨è§£å¯ä»¥ä¸ºæå®ç±»çæ equals å hashCode æ¹æ³ï¼ @EqualsAndHashCode æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface EqualsAndHashCode {\n  // æå®å¨çæçequalsåhashCodeæ¹æ³ä¸­éè¦æé¤çå­æ®µåè¡¨\n    String[] exclude() default {};\n    \n  // æ¾å¼ååºç¨äºidentityçå­æ®µï¼ä¸è¬æåµä¸non-static,non-transientå­æ®µä¼è¢«ç¨äºidentity\n    String[] of() default {};\n    \n  // æ è¯å¨æ§è¡å­æ®µè®¡ç®åï¼æ¯å¦è°ç¨ç¶ç±»çequalsåhashCodeæ¹æ³\n    boolean callSuper() default false;\n    \n    boolean doNotUseGetters() default false;\n    \n    AnyAnnotation[] onParam() default {};\n    \n    @Deprecated\n    @Retention(RetentionPolicy.SOURCE)\n    @Target({})\n    @interface AnyAnnotation {}\n    \n    @Target(ElementType.FIELD)\n    @Retention(RetentionPolicy.SOURCE)\n    public @interface Exclude {}\n    \n    @Target({ElementType.FIELD, ElementType.METHOD})\n    @Retention(RetentionPolicy.SOURCE)\n    public @interface Include {\n        String replaces() default "";\n    }\n}\n\n\nç¤ºä¾\n\npublic class EqualsAndHashCodeDemo {\n    String firstName;\n    String lastName;\n    LocalDate dateOfBirth;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class EqualsAndHashCodeDemo {\n    String firstName;\n    String lastName;\n    LocalDate dateOfBirth;\n\n    public EqualsAndHashCodeDemo() {\n    }\n\n    public boolean equals(Object o) {\n        if (o == this) {\n            return true;\n        } else if (!(o instanceof EqualsAndHashCodeDemo)) {\n            return false;\n        } else {\n            EqualsAndHashCodeDemo other = (EqualsAndHashCodeDemo)o;\n            if (!other.canEqual(this)) {\n                return false;\n            } else {\n              // å·²çç¥å¤§éä»£ç \n        }\n    }\n\n    public int hashCode() {\n        int PRIME = true;\n        int result = 1;\n        Object $firstName = this.firstName;\n        int result = result * 59 + ($firstName == null ? 43 : $firstName.hashCode());\n        Object $lastName = this.lastName;\n        result = result * 59 + ($lastName == null ? 43 : $lastName.hashCode());\n        Object $dateOfBirth = this.dateOfBirth;\n        result = result * 59 + ($dateOfBirth == null ? 43 : $dateOfBirth.hashCode());\n        return result;\n    }\n}\n\n\n\n# @ToString\n\nä½¿ç¨ @ToString æ³¨è§£å¯ä»¥ä¸ºæå®ç±»çæ toString æ¹æ³ï¼ @ToString æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface ToString {\n  // æå°è¾åºæ¶æ¯å¦åå«å­æ®µçåç§°\n    boolean includeFieldNames() default true;\n    \n  // ååºæå°è¾åºæ¶ï¼éè¦æé¤çå­æ®µåè¡¨\n    String[] exclude() default {};\n    \n  // æ¾å¼çååºéè¦æå°è¾åºçå­æ®µåè¡¨\n    String[] of() default {};\n    \n  // æå°è¾åºçç»æä¸­æ¯å¦åå«ç¶ç±»çtoStringæ¹æ³çè¿åç»æ\n    boolean callSuper() default false;\n    \n    boolean doNotUseGetters() default false;\n    \n    boolean onlyExplicitlyIncluded() default false;\n    \n    @Target(ElementType.FIELD)\n    @Retention(RetentionPolicy.SOURCE)\n    public @interface Exclude {}\n    \n    @Target({ElementType.FIELD, ElementType.METHOD})\n    @Retention(RetentionPolicy.SOURCE)\n    public @interface Include {\n        int rank() default 0;\n        String name() default "";\n    }\n}\n\n\nç¤ºä¾\n\n@ToString(exclude = {"dateOfBirth"})\npublic class ToStringDemo {\n    String firstName;\n    String lastName;\n    LocalDate dateOfBirth;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class ToStringDemo {\n    String firstName;\n    String lastName;\n    LocalDate dateOfBirth;\n\n    public ToStringDemo() {\n    }\n\n    public String toString() {\n        return "ToStringDemo(firstName=" + this.firstName + ", lastName=" + this.lastName + ")";\n    }\n}\n\n\n\n# @Data\n\n@Data æ³¨è§£ä¸åæ¶ä½¿ç¨ä»¥ä¸çæ³¨è§£çæææ¯ä¸æ ·çï¼\n\n@ToString\n@Getter\n@Setter\n@RequiredArgsConstructor\n@EqualsAndHashCode\n\n\n@Data æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface Data {\n    String staticConstructor() default "";\n}\n\n\nç¤ºä¾\n\n@Data\npublic class DataDemo {\n    private Long id;\n    private String summary;\n    private String description;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class DataDemo {\n    private Long id;\n    private String summary;\n    private String description;\n\n    public DataDemo() {\n    }\n\n    // çç¥summaryådescriptionæåå±æ§çsetterågetteræ¹æ³\n    public Long getId() {\n        return this.id;\n    }\n  \n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public boolean equals(Object o) {\n        if (o == this) {\n            return true;\n        } else if (!(o instanceof DataDemo)) {\n            return false;\n        } else {\n            DataDemo other = (DataDemo)o;\n            if (!other.canEqual(this)) {\n                return false;\n            } else {\n               // å·²çç¥å¤§éä»£ç \n            }\n        }\n    }\n\n    protected boolean canEqual(Object other) {\n        return other instanceof DataDemo;\n    }\n\n    public int hashCode() {\n        int PRIME = true;\n        int result = 1;\n        Object $id = this.getId();\n        int result = result * 59 + ($id == null ? 43 : $id.hashCode());\n        Object $summary = this.getSummary();\n        result = result * 59 + ($summary == null ? 43 : $summary.hashCode());\n        Object $description = this.getDescription();\n        result = result * 59 + ($description == null ? 43 : $description.hashCode());\n        return result;\n    }\n\n    public String toString() {\n        return "DataDemo(id=" + this.getId() + ", summary=" + this.getSummary() + ", description=" + this.getDescription() + ")";\n    }\n}\n\n\n\n# @Log\n\nè¥ä½ å° @Log çåä½æ¾å¨ç±»ä¸ï¼éç¨äºä½ æä½¿ç¨çæ¥å¿è®°å½ç³»ç»çä»»ä½ä¸ç§ï¼ï¼ä¹åï¼ä½ å°æ¥æä¸ä¸ªéæç final log å­æ®µï¼ç¶åä½ å°±å¯ä»¥ä½¿ç¨è¯¥å­æ®µæ¥è¾åºæ¥å¿ã\n\n@Log\nprivate static final java.util.logging.Logger log = java.util.logging.Logger.getLogger(LogExample.class.getName());\n@Log4j\nprivate static final org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger(LogExample.class);\n@Log4j2\nprivate static final org.apache.logging.log4j.Logger log = org.apache.logging.log4j.LogManager.getLogger(LogExample.class);\n@Slf4j\nprivate static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(LogExample.class);\n@XSlf4j\nprivate static final org.slf4j.ext.XLogger log = org.slf4j.ext.XLoggerFactory.getXLogger(LogExample.class);\n@CommonsLog\nprivate static final org.apache.commons.logging.Log log = org.apache.commons.logging.LogFactory.getLog(LogExample.class);\n\n\n\n# @Synchronized\n\n@Synchronized æ¯åæ­¥æ¹æ³ä¿®é¥°ç¬¦çæ´å®å¨çåä½ãä¸ synchronized ä¸æ ·ï¼è¯¥æ³¨è§£åªè½åºç¨å¨éæåå®ä¾æ¹æ³ä¸ãå®çæä½ç±»ä¼¼äº synchronized å³é®å­ï¼ä½æ¯å®éå®å¨ä¸åçå¯¹è±¡ä¸ãsynchronized å³é®å­åºç¨å¨å®ä¾æ¹æ³æ¶ï¼éå®çæ¯ this å¯¹è±¡ï¼èåºç¨å¨éææ¹æ³ä¸éå®çæ¯ç±»å¯¹è±¡ãå¯¹äº @Synchronized æ³¨è§£å£°æçæ¹æ³æ¥è¯´ï¼å®éå®çæ¯\n\nælockã@Synchronized æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface Synchronized {\n  // æå®éå®çå­æ®µåç§°\n    String value() default "";\n}\n\n\nç¤ºä¾\n\npublic class SynchronizedDemo {\n    private final Object readLock = new Object();\n\n    @Synchronized\n    public static void hello() {\n        System.out.println("world");\n    }\n\n    @Synchronized\n    public int answerToLife() {\n        return 42;\n    }\n\n    @Synchronized("readLock")\n    public void foo() {\n        System.out.println("bar");\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class SynchronizedDemo {\n    private static final Object $LOCK = new Object[0];\n    private final Object $lock = new Object[0];\n    private final Object readLock = new Object();\n\n    public SynchronizedDemo() {\n    }\n\n    public static void hello() {\n        synchronized($LOCK) {\n            System.out.println("world");\n        }\n    }\n\n    public int answerToLife() {\n        synchronized(this.$lock) {\n            return 42;\n        }\n    }\n\n    public void foo() {\n        synchronized(this.readLock) {\n            System.out.println("bar");\n        }\n    }\n}\n\n\n\n# @Builder\n\nä½¿ç¨ @Builder æ³¨è§£å¯ä»¥ä¸ºæå®ç±»å®ç°å»ºé èæ¨¡å¼ï¼è¯¥æ³¨è§£å¯ä»¥æ¾å¨ç±»ãæé å½æ°ææ¹æ³ä¸ã@Builder æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target({TYPE, METHOD, CONSTRUCTOR})\n@Retention(SOURCE)\npublic @interface Builder {\n    @Target(FIELD)\n    @Retention(SOURCE)\n    public @interface Default {}\n\n  // åå»ºæ°çbuilderå®ä¾çæ¹æ³åç§°\n    String builderMethodName() default "builder";\n    // åå»ºBuilderæ³¨è§£ç±»å¯¹åºå®ä¾çæ¹æ³åç§°\n    String buildMethodName() default "build";\n    // builderç±»çåç§°\n    String builderClassName() default "";\n    \n    boolean toBuilder() default false;\n    \n    AccessLevel access() default lombok.AccessLevel.PUBLIC;\n    \n    @Target({FIELD, PARAMETER})\n    @Retention(SOURCE)\n    public @interface ObtainVia {\n        String field() default "";\n        String method() default "";\n        boolean isStatic() default false;\n    }\n}\n\n\nç¤ºä¾\n\n@Builder\npublic class BuilderDemo {\n    private final String firstname;\n    private final String lastname;\n    private final String email;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class BuilderDemo {\n    private final String firstname;\n    private final String lastname;\n    private final String email;\n\n    BuilderDemo(String firstname, String lastname, String email) {\n        this.firstname = firstname;\n        this.lastname = lastname;\n        this.email = email;\n    }\n\n    public static BuilderDemo.BuilderDemoBuilder builder() {\n        return new BuilderDemo.BuilderDemoBuilder();\n    }\n\n    public static class BuilderDemoBuilder {\n        private String firstname;\n        private String lastname;\n        private String email;\n\n        BuilderDemoBuilder() {\n        }\n\n        public BuilderDemo.BuilderDemoBuilder firstname(String firstname) {\n            this.firstname = firstname;\n            return this;\n        }\n\n        public BuilderDemo.BuilderDemoBuilder lastname(String lastname) {\n            this.lastname = lastname;\n            return this;\n        }\n\n        public BuilderDemo.BuilderDemoBuilder email(String email) {\n            this.email = email;\n            return this;\n        }\n\n        public BuilderDemo build() {\n            return new BuilderDemo(this.firstname, this.lastname, this.email);\n        }\n\n        public String toString() {\n            return "BuilderDemo.BuilderDemoBuilder(firstname=" + this.firstname + ", lastname=" + this.lastname + ", email=" + this.email + ")";\n        }\n    }\n}\n\n\n\n# @SneakyThrows\n\n@SneakyThrows æ³¨è§£ç¨äºèªå¨æåºå·²æ£æ¥çå¼å¸¸ï¼èæ éå¨æ¹æ³ä¸­ä½¿ç¨ throw è¯­å¥æ¾å¼æåºã@SneakyThrows æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target({ElementType.METHOD, ElementType.CONSTRUCTOR})\n@Retention(RetentionPolicy.SOURCE)\npublic @interface SneakyThrows {\n    // è®¾ç½®ä½ å¸æåä¸æçå¼å¸¸ç±»\n    Class<? extends Throwable>[] value() default java.lang.Throwable.class;\n}\n\n\nç¤ºä¾\n\npublic class SneakyThrowsDemo {\n    @SneakyThrows\n    @Override\n    protected Object clone() {\n        return super.clone();\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class SneakyThrowsDemo {\n    public SneakyThrowsDemo() {\n    }\n\n    protected Object clone() {\n        try {\n            return super.clone();\n        } catch (Throwable var2) {\n            throw var2;\n        }\n    }\n}\n\n\n\n# @NonNull\n\nä½ å¯ä»¥å¨æ¹æ³ææé å½æ°çåæ°ä¸ä½¿ç¨ @NonNull æ³¨è§£ï¼å®å°ä¼ä¸ºä½ èªå¨çæéç©ºæ ¡éªè¯­å¥ã@NonNull æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, ElementType.LOCAL_VARIABLE, ElementType.TYPE_USE})\n@Retention(RetentionPolicy.CLASS)\n@Documented\npublic @interface NonNull {\n\n}\n\n\nç¤ºä¾\n\npublic class NonNullDemo {\n    @Getter\n    @Setter\n    @NonNull\n    private String name;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class NonNullDemo {\n    @NonNull\n    private String name;\n\n    public NonNullDemo() {\n    }\n\n    @NonNull\n    public String getName() {\n        return this.name;\n    }\n\n    public void setName(@NonNull String name) {\n        if (name == null) {\n            throw new NullPointerException("name is marked non-null but is null");\n        } else {\n            this.name = name;\n        }\n    }\n}\n\n\n\n# @Clean\n\n@Clean æ³¨è§£ç¨äºèªå¨ç®¡çèµæºï¼ç¨å¨å±é¨åéä¹åï¼å¨å½ååéèå´åå³å°æ§è¡å®æ¯éåºä¹åä¼èªå¨æ¸çèµæºï¼èªå¨çæ try-finally è¿æ ·çä»£ç æ¥å³é­æµã\n\n@Target(ElementType.LOCAL_VARIABLE)\n@Retention(RetentionPolicy.SOURCE)\npublic @interface Cleanup {\n  // è®¾ç½®ç¨äºæ§è¡èµæºæ¸ç/åæ¶çæ¹æ³åç§°ï¼å¯¹åºæ¹æ³ä¸è½åå«ä»»ä½åæ°ï¼é»è®¤åç§°ä¸ºcloseã\n    String value() default "close";\n}\n\n\nç¤ºä¾\n\npublic class CleanupDemo {\n    public static void main(String[] args) throws IOException {\n        @Cleanup InputStream in = new FileInputStream(args[0]);\n        @Cleanup OutputStream out = new FileOutputStream(args[1]);\n        byte[] b = new byte[10000];\n        while (true) {\n            int r = in.read(b);\n            if (r == -1) break;\n            out.write(b, 0, r);\n        }\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class CleanupDemo {\n    public CleanupDemo() {\n    }\n\n    public static void main(String[] args) throws IOException {\n        FileInputStream in = new FileInputStream(args[0]);\n\n        try {\n            FileOutputStream out = new FileOutputStream(args[1]);\n\n            try {\n                byte[] b = new byte[10000];\n\n                while(true) {\n                    int r = in.read(b);\n                    if (r == -1) {\n                        return;\n                    }\n\n                    out.write(b, 0, r);\n                }\n            } finally {\n                if (Collections.singletonList(out).get(0) != null) {\n                    out.close();\n                }\n\n            }\n        } finally {\n            if (Collections.singletonList(in).get(0) != null) {\n                in.close();\n            }\n        }\n    }\n}\n\n\n\n# @With\n\nå¨ç±»çå­æ®µä¸åºç¨ @With æ³¨è§£ä¹åï¼å°ä¼èªå¨çæä¸ä¸ª withFieldName(newValue) çæ¹æ³ï¼è¯¥æ¹æ³ä¼åºäº newValue è°ç¨ç¸åºæé å½æ°ï¼åå»ºä¸ä¸ªå½åç±»å¯¹åºçå®ä¾ã@With æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@Target({ElementType.FIELD, ElementType.TYPE})\n@Retention(RetentionPolicy.SOURCE)\npublic @interface With {\n    AccessLevel value() default AccessLevel.PUBLIC;\n\n    With.AnyAnnotation[] onMethod() default {};\n\n    With.AnyAnnotation[] onParam() default {};\n\n    @Deprecated\n    @Retention(RetentionPolicy.SOURCE)\n    @Target({})\n    public @interface AnyAnnotation {\n    }\n}\n\n\nç¤ºä¾\n\npublic class WithDemo {\n    @With(AccessLevel.PROTECTED)\n    @NonNull\n    private final String name;\n    @With\n    private final int age;\n\n    public WithDemo(String name, int age) {\n        if (name == null) throw new NullPointerException();\n        this.name = name;\n        this.age = age;\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ Lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class WithDemo {\n    @NonNull\n    private final String name;\n    private final int age;\n\n    public WithDemo(String name, int age) {\n        if (name == null) {\n            throw new NullPointerException();\n        } else {\n            this.name = name;\n            this.age = age;\n        }\n    }\n\n    protected WithDemo withName(@NonNull String name) {\n        if (name == null) {\n            throw new NullPointerException("name is marked non-null but is null");\n        } else {\n            return this.name == name ? this : new WithDemo(name, this.age);\n        }\n    }\n\n    public WithDemo withAge(int age) {\n        return this.age == age ? this : new WithDemo(this.name, age);\n    }\n}\n\n\n\n# @Accessors\n\n@Accessors æ³¨è§£ç¨æ¥éç½®lombokå¦ä½äº§çåæ¾ç¤ºgettersåsettersçæ¹æ³ã@Accessorsæ³¨è§£æ¢å¯ä»¥æ³¨è§£å¨ç±»ä¸ä¹å¯ä»¥æ³¨è§£å¨å±æ§ä¸ @Accessorsæä¸ä¸ªå±æ§\n\n# fluent\n\nfluentä¸ºä¸ä¸ªå¸å°å¼ï¼å¦æä¸ºtrueçæçget/setæ¹æ³åæ²¡æset/getåç¼ï¼é»è®¤ä¸ºfalse ä¾å¦ï¼\n\n@Accessors(flunet = true)\npublic class MyClass {\n    @Getter\n    private int num;\n}\n\n\nçæçgetæ¹æ³ä¸ºnum()ï¼èä¸æ¯getNum()\n\n# chain\n\nchainä¸ºä¸ä¸ªå¸å°å¼ï¼å¦æä¸ºtrueçæçsetæ¹æ³è¿åthisï¼ä¸ºfalseçæçsetæ¹æ³æ¯voidç±»åãé»è®¤ä¸ºfalseï¼é¤éå½fluentä¸ºtrueæ¶ï¼chainé»è®¤åä¸ºtrue\n\n# prefix\n\nprefixä¸ºä¸ç³»åstringç±»åï¼å¯ä»¥æå®åç¼ï¼çæget/setæ¹æ³æ¶ä¼å»ææå®çåç¼ ä¾å¦ï¼\n\n@Accessors(prefix = "m")\npublic class MyClass {\n    @Getter\n    private int mNum;\n}\n\n\nçæçgetæ¹æ³ä¸ºgetNum()ï¼èä¸æ¯getMNum()\n\n\n# å¶å®ç¹æ§\n\n# val\n\nval ç¨å¨å±é¨åéåé¢ï¼ç¸å½äºå°åéå£°æä¸º finalï¼æ­¤å¤ Lombok å¨ç¼è¯æ¶è¿ä¼èªå¨è¿è¡ç±»åæ¨æ­ãval çä½¿ç¨ç¤ºä¾ï¼\n\npublic class ValExample {\n  public String example() {\n    val example = new ArrayList<String>();\n    example.add("Hello, World!");\n    val foo = example.get(0);\n    return foo.toLowerCase();\n  }\n  \n  public void example2() {\n    val map = new HashMap<Integer, String>();\n    map.put(0, "zero");\n    map.put(5, "five");\n    for (val entry : map.entrySet()) {\n      System.out.printf("%d: %s\\n", entry.getKey(), entry.getValue());\n    }\n  }\n}\n\n\nä»¥ä¸ä»£ç ç­ä»·äºï¼\n\npublic class ValExample {\n  public String example() {\n    final ArrayList<String> example = new ArrayList<String>();\n    example.add("Hello, World!");\n    final String foo = example.get(0);\n    return foo.toLowerCase();\n  }\n  \n  public void example2() {\n    final HashMap<Integer, String> map = new HashMap<Integer, String>();\n    map.put(0, "zero");\n    map.put(5, "five");\n    for (final Map.Entry<Integer, String> entry : map.entrySet()) {\n      System.out.printf("%d: %s\\n", entry.getKey(), entry.getValue());\n    }\n  }\n}\n\n\n\n# Lombokæ³¨è§£åç\n\nè¯´å° Lombokï¼æä»¬å°±å¾å»æå° JSR 269: Pluggable Annotation Processing API ãJSR 269 ä¹åæä»¬ä¹ææ³¨è§£è¿æ ·çç¥å¨ï¼å¯æ¯æä»¬æ¯å¦æ³è¦åä»ä¹å¿é¡»ä½¿ç¨åå°ï¼åå°çæ¹æ³å±éæ§è¾å¤§ãé¦åï¼å®å¿é¡»å®ä¹@Retentionä¸ºRetentionPolicy.RUNTIMEï¼åªè½å¨è¿è¡æ¶éè¿åå°æ¥è·åæ³¨è§£å¼ï¼ä½¿å¾è¿è¡æ¶ä»£ç æçéä½ãå¶æ¬¡ï¼å¦ææ³å¨ç¼è¯é¶æ®µå©ç¨æ³¨è§£æ¥è¿è¡ä¸äºæ£æ¥ï¼å¯¹ç¨æ·çæäºä¸åçä»£ç ç»åºéè¯¯æ¥åï¼åå°çä½¿ç¨æ¹æ³å°±æ è½ä¸ºåäºãè JSR 269 ä¹åæä»¬å¯ä»¥å¨ Javacçç¼è¯æå©ç¨æ³¨è§£åè¿äºäºæãæä»¥æä»¬åç°æ ¸å¿çåºåæ¯å¨ è¿è¡æ è¿æ¯ ç¼è¯æã\n\n\n\nä»ä¸å¾å¯ç¥ï¼Annotation Processing æ¯å¨è§£æåçæä¹é´çä¸ä¸ªæ­¥éª¤ãå·ä½è¯¦ç»æ­¥éª¤å¦ä¸ï¼\n\n\n\nä¸å¾æ¯ Lombok å¤çæµç¨ï¼å¨Javac è§£æææ½è±¡è¯­æ³æ ä¹å(AST), Lombok æ ¹æ®èªå·±çæ³¨è§£å¤çå¨ï¼å¨æçä¿®æ¹ ASTï¼å¢å æ°çèç¹(æè°ä»£ç )ï¼æç»éè¿åæåçæå­èç ã\n\nèªä»Java 6èµ·ï¼javacå°±æ¯æâJSR 269 Pluggable Annotation Processing APIâè§èï¼åªè¦ç¨åºå®ç°äºè¯¥APIï¼å°±è½å¨javacè¿è¡çæ¶åå¾å°è°ç¨ã\n\næç¤º\n\n 1. å¸¸ç¨çé¡¹ç®ç®¡çå·¥å·Mavenæä½¿ç¨çjavaç¼è¯å·¥å·æ¥æºäºéç½®çç¬¬ä¸æ¹å·¥å·ï¼å¦ææä»¬éç½®è¿ä¸ªç¬¬ä¸æ¹å·¥å·ä¸ºOracle javacçè¯ï¼é£ä¹Mavenä¹å°±ç´æ¥æ¯ælombokäº;\n 2. Intellij Ideaéç½®çç¼è¯å·¥å·ä¸ºOracle javacçè¯ï¼ä¹å°±ç´æ¥æ¯ælombokäºã\n\nIDEå·¥å·é®é¢è§£å³ï¼\n\næç¤º\n\nç°å¨æä¸ä¸ªAç±»ï¼å¶ä¸­æä¸äºå­æ®µï¼æ²¡æåå»ºå®ä»¬çsetterågetteræ¹æ³ï¼ä½¿ç¨äºlombokç@Dataæ³¨è§£ï¼å¦å¤æä¸ä¸ªBç±»ï¼å®è°ç¨äºAç±»å®ä¾çç¸åºå­æ®µçsetterågetteræ¹æ³\n\nç¼è¯Aç±»åBç±»æå¨çé¡¹ç®ï¼å¹¶ä¸ä¼æ¥éï¼å ä¸ºæç»çæçAç±»å­èç æä»¶ä¸­å­å¨ç¸åºå­æ®µçsetterågetteræ¹æ³\n\nä½æ¯ï¼IDEåç°Bç±»æºä»£ç ä¸­æä½¿ç¨çAç±»å®ä¾çsetterågetteræ¹æ³å¨Aç±»æºä»£ç ä¸­æ¾ä¸å°å®ä¹ï¼IDEä¼è®¤ä¸ºè¿æ¯éè¯¯\n\nè¦è§£å³ä»¥ä¸è¿ä¸ªä¸æ¯çæ­£éè¯¯çéè¯¯ï¼å¯ä»¥ä¸è½½å®è£Intellij Ideaä¸­ç"Lombok plugin"ã',normalizedContent:'# lombokä½¿ç¨æå\n\n\n\n * lombok ç®ä»\n * lombok å®è£\n   * æå»ºå·¥å·\n   * ide\n * lombok è¯¦è§£\n   * @getter and @setter\n   * constructor annotations\n   * @utilityclass\n   * @equalsandhashcode\n   * @tostring\n   * @data\n   * @log\n   * @synchronized\n   * @builder\n   * @sneakythrows\n   * @nonnull\n   * @clean\n   * @with\n   * @accessors\n   * å¶å®ç¹æ§\n * lombokæ³¨è§£åç\n\n\n\n\n# lombok ç®ä»\n\nlombok æ¯ä¸æ¬¾ java å¼åæä»¶ï¼ä½¿å¾ java å¼åèå¯ä»¥éè¿å¶å®ä¹çä¸äºæ³¨è§£æ¥æ¶é¤ä¸å¡å·¥ç¨ä¸­åé¿åç¹ççä»£ç ï¼å°¤å¶å¯¹äºç®åç java æ¨¡åå¯¹è±¡ï¼pojoï¼ãå¨å¼åç¯å¢ä¸­ä½¿ç¨ lombok æä»¶åï¼java å¼åäººåå¯ä»¥èçåºéå¤æå»ºï¼è¯¸å¦ hashcode å equals è¿æ ·çæ¹æ³ä»¥ååç§ä¸å¡å¯¹è±¡æ¨¡åç accessor å tostring ç­æ¹æ³çå¤§éæ¶é´ãå¯¹äºè¿äºæ¹æ³ï¼lombok è½å¤å¨ç¼è¯æºä»£ç æé´èªå¨å¸®æä»¬çæè¿äºæ¹æ³ï¼ä½å¹¶ä¸ä¼ååå°é£æ ·éä½ç¨åºçæ§è½ã\n\n\n# lombok å®è£\n\n\n# æå»ºå·¥å·\n\n * maven\n\nå¨ maven é¡¹ç®ç pom.xml æä»¶ä¸­æ·»å  lombok ä¾èµï¼\n\n<dependency>\n    <groupid>org.projectlombok</groupid>\n    <artifactid>lombok</artifactid>\n    <version>1.18.10</version>\n    <scope>provided</scope>\n</dependency>\n\n\n\n# ide\n\nç±äº lombok ä»å¨ç¼è¯é¶æ®µçæä»£ç ï¼æä»¥ä½¿ç¨ lombok æ³¨è§£çæºä»£ç ï¼å¨ ide ä¸­ä¼è¢«é«äº®æ¾ç¤ºéè¯¯ï¼éå¯¹è¿ä¸ªé®é¢å¯ä»¥éè¿å®è£ ide å¯¹åºçæä»¶æ¥è§£å³ãå·ä½çå®è£æ¹å¼å¯ä»¥åè:https://www.baeldung.com/lombok-ideã\n\nlombok in intellij idea\n\n\n\n\n# lombok è¯¦è§£\n\næ³¨è§£è¯´æ\n\n * valï¼ç¨å¨å±é¨åéåé¢ï¼ç¸å½äºå°åéå£°æä¸ºfinal\n\n * @nonnullï¼ç»æ¹æ³åæ°å¢å è¿ä¸ªæ³¨è§£ä¼èªå¨å¨æ¹æ³åå¯¹è¯¥åæ°è¿è¡æ¯å¦ä¸ºç©ºçæ ¡éªï¼å¦æä¸ºç©ºï¼åæåºnpeï¼nullpointerexceptionï¼\n\n * @cleanupï¼èªå¨ç®¡çèµæºï¼ç¨å¨å±é¨åéä¹åï¼å¨å½ååéèå´åå³å°æ§è¡å®æ¯éåºä¹åä¼èªå¨æ¸çèµæºï¼èªå¨çætry-finallyè¿æ ·çä»£ç æ¥å³é­æµ\n\n * @getter/@setterï¼ç¨å¨å±æ§ä¸ï¼åä¹ä¸ç¨èªå·±æåsetterågetteræ¹æ³äºï¼è¿å¯ä»¥æå®è®¿é®èå´\n\n * @tostringï¼ç¨å¨ç±»ä¸ï¼å¯ä»¥èªå¨è¦åtostringæ¹æ³ï¼å½ç¶è¿å¯ä»¥å å¶ä»åæ°ï¼ä¾å¦@tostring(exclude=âidâ)æé¤idå±æ§ï¼æè@tostring(callsuper=true, includefieldnames=true)è°ç¨ç¶ç±»çtostringæ¹æ³ï¼åå«ææå±æ§\n\n * @equalsandhashcodeï¼ç¨å¨ç±»ä¸ï¼èªå¨çæequalsæ¹æ³åhashcodeæ¹æ³\n\n * @noargsconstructor, @requiredargsconstructor and @allargsconstructorï¼ç¨å¨ç±»ä¸ï¼èªå¨çææ åæé åä½¿ç¨ææåæ°çæé å½æ°ä»¥åæææ@nonnullå±æ§ä½ä¸ºåæ°çæé å½æ°ï¼å¦ææå®staticname = âofâåæ°ï¼åæ¶è¿ä¼çæä¸ä¸ªè¿åç±»å¯¹è±¡çéæå·¥åæ¹æ³ï¼æ¯ä½¿ç¨æé å½æ°æ¹ä¾¿å¾å¤\n\n * @utilityclass:æ³¨è§£å¨ç±»ä¸ï¼æ·»å äºstaticåæ¶åå»ºäºä¸ä¸ªç§æçæé æ¹æ³\n\n * @dataï¼æ³¨è§£å¨ç±»ä¸ï¼ç¸å½äºåæ¶ä½¿ç¨äº@tostringã@equalsandhashcodeã@getterã@setterå@requiredargsconstrutorè¿äºæ³¨è§£ï¼å¯¹äºpojoç±»ååæç¨\n\n * @valueï¼ç¨å¨ç±»ä¸ï¼æ¯@dataçä¸å¯åå½¢å¼ï¼ç¸å½äºä¸ºå±æ§æ·»å finalå£°æï¼åªæä¾getteræ¹æ³ï¼èä¸æä¾setteræ¹æ³\n\n * @builderï¼ç¨å¨ç±»ãæé å¨ãæ¹æ³ä¸ï¼ä¸ºä½ æä¾å¤æçbuilder apisï¼è®©ä½ å¯ä»¥åå¦ä¸æ¹å¼ä¸æ ·è°ç¨person.builder().name("adam savage").city("san francisco").job("mythbusters").job("unchained reaction").build();æ´å¤è¯´æåèbuilder\n\n * @sneakythrowsï¼èªå¨æåæ£å¼å¸¸ï¼èæ éæ¾å¼å¨æ¹æ³ä¸ä½¿ç¨throwsè¯­å¥\n\n * @synchronizedï¼ç¨å¨æ¹æ³ä¸ï¼å°æ¹æ³å£°æä¸ºåæ­¥çï¼å¹¶èªå¨å éï¼èéå¯¹è±¡æ¯ä¸ä¸ªç§æçå±æ§$lockæ$lockï¼èjavaä¸­çsynchronizedå³é®å­éå¯¹è±¡æ¯thisï¼éå¨thisæèèªå·±çç±»å¯¹è±¡ä¸å­å¨å¯ä½ç¨ï¼å°±æ¯ä½ ä¸è½é»æ­¢éåæ§ä»£ç å»éthisæèç±»å¯¹è±¡ï¼è¿å¯è½ä¼å¯¼è´ç«äºæ¡ä»¶æèå¶å®çº¿ç¨éè¯¯\n\n * @getter(lazy=true)ï¼å¯ä»¥æ¿ä»£ç»å¸çdouble check lockæ ·æ¿ä»£ç \n\n * @logï¼æ ¹æ®ä¸åçæ³¨è§£çæä¸åç±»åçlogå¯¹è±¡ï¼ä½æ¯å®ä¾åç§°é½æ¯logï¼æå­ç§å¯éå®ç°ç±»\n\n * * @commonslog creates log = org.apache.commons.logging.logfactory.getlog(logexample.class);\n   * @log creates log = java.util.logging.logger.getlogger(logexample.class.getname());\n   * @log4j creates log = org.apache.log4j.logger.getlogger(logexample.class);\n   * @log4j2 creates log = org.apache.logging.log4j.logmanager.getlogger(logexample.class);\n   * @slf4j creates log = org.slf4j.loggerfactory.getlogger(logexample.class);\n   * @xslf4j creates log = org.slf4j.ext.xloggerfactory.getxlogger(logexample.class);\n\n\n# @getter and @setter\n\nä½ å¯ä»¥ä½¿ç¨ @getter æ @setter æ³¨éä»»ä½ç±»æå­æ®µï¼lombok ä¼èªå¨çæé»è®¤ç getter/setter æ¹æ³ã\n\n@getter\n\n@target({elementtype.field, elementtype.type})\n@retention(retentionpolicy.source)\npublic @interface getter {\n  // è¥getteræ¹æ³épublicçè¯ï¼å¯ä»¥è®¾ç½®å¯è®¿é®çº§å«\n    lombok.accesslevel value() default lombok.accesslevel.public;\n    anyannotation[] onmethod() default {};\n  // æ¯å¦å¯ç¨å»¶è¿åå§å\n    boolean lazy() default false;\n}\n\n\n@setter\n\n@target({elementtype.field, elementtype.type})\n@retention(retentionpolicy.source)\npublic @interface setter {\n  // è¥setteræ¹æ³épublicçè¯ï¼å¯ä»¥è®¾ç½®å¯è®¿é®çº§å«\n    lombok.accesslevel value() default lombok.accesslevel.public;\n    anyannotation[] onmethod() default {};\n    anyannotation[] onparam() default {};\n}\n\n\nä½¿ç¨ç¤ºä¾\n\n@getter\n@setter\npublic class getterandsetterdemo {\n    string firstname;\n    string lastname;\n    localdate dateofbirth;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class getterandsetterdemo {\n    string firstname;\n    string lastname;\n    localdate dateofbirth;\n\n    public getterandsetterdemo() {\n    }\n\n    // çç¥å¶å®setterågetteræ¹æ³\n    public string getfirstname() {\n        return this.firstname;\n    }\n\n    public void setfirstname(string firstname) {\n        this.firstname = firstname;\n    }\n}\n\n\nlazy getter\n\n@getter æ³¨è§£æ¯æä¸ä¸ª lazy å±æ§ï¼è¯¥å±æ§é»è®¤ä¸º falseãå½è®¾ç½®ä¸º true æ¶ï¼ä¼å¯ç¨å»¶è¿åå§åï¼å³å½é¦æ¬¡è°ç¨ getter æ¹æ³æ¶æè¿è¡åå§åã\n\nç¤ºä¾\n\npublic class lazygetterdemo {\n    public static void main(string[] args) {\n        lazygetterdemo m = new lazygetterdemo();\n        system.out.println("main instance is created");\n        m.getlazy();\n    }\n\n    @getter\n    private final string notlazy = createvalue("not lazy");\n\n    @getter(lazy = true)\n    private final string lazy = createvalue("lazy");\n\n    private string createvalue(string name) {\n        system.out.println("createvalue(" + name + ")");\n        return null;\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class lazygetterdemo {\n    private final string notlazy = this.createvalue("not lazy");\n    private final atomicreference<object> lazy = new atomicreference();\n\n    // å·²çç¥é¨åä»£ç \n    public string getnotlazy() {\n        return this.notlazy;\n    }\n\n    public string getlazy() {\n        object value = this.lazy.get();\n        if (value == null) {\n            synchronized(this.lazy) {\n                value = this.lazy.get();\n                if (value == null) {\n                    string actualvalue = this.createvalue("lazy");\n                    value = actualvalue == null ? this.lazy : actualvalue;\n                    this.lazy.set(value);\n                }\n            }\n        }\n\n        return (string)((string)(value == this.lazy ? null : value));\n    }\n}\n\n\néè¿ä»¥ä¸ä»£ç å¯ç¥ï¼è°ç¨ getlazy æ¹æ³æ¶ï¼è¥åç° value ä¸º nullï¼åä¼å¨åæ­¥ä»£ç åä¸­æ§è¡åå§åæä½ã\n\n\n# constructor annotations\n\n@noargsconstructor\n\nä½¿ç¨ @noargsconstructor æ³¨è§£å¯ä»¥ä¸ºæå®ç±»ï¼çæé»è®¤çæé å½æ°ï¼@noargsconstructor æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.source)\npublic @interface noargsconstructor {\n  // è¥è®¾ç½®è¯¥å±æ§ï¼å°ä¼çæä¸ä¸ªç§æçæé å½æ°ä¸çæä¸ä¸ªstaticnameæå®çéææ¹æ³\n    string staticname() default "";\n    anyannotation[] onconstructor() default {};\n  // è®¾ç½®çææé å½æ°çè®¿é®çº§å«ï¼é»è®¤æ¯public\n    accesslevel access() default lombok.accesslevel.public;\n  // è¥è®¾ç½®ä¸ºtrueï¼ååå§åææfinalçå­æ®µä¸º0/null/false\n    boolean force() default false;\n}\n\n\nç¤ºä¾\n\n@noargsconstructor(staticname = "getinstance")\npublic class noargsconstructordemo {\n    private long id;\n    private string name;\n    private int age;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class noargsconstructordemo {\n    private long id;\n    private string name;\n    private int age;\n\n    private noargsconstructordemo() {\n    }\n\n    public static noargsconstructordemo getinstance() {\n        return new noargsconstructordemo();\n    }\n}\n\n\n@allargsconstructor\n\nä½¿ç¨ @allargsconstructor æ³¨è§£å¯ä»¥ä¸ºæå®ç±»ï¼çæåå«æææåçæé å½æ°ï¼@allargsconstructor æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.source)\npublic @interface allargsconstructor {\n  // è¥è®¾ç½®è¯¥å±æ§ï¼å°ä¼çæä¸ä¸ªç§æçæé å½æ°ä¸çæä¸ä¸ªstaticnameæå®çéææ¹æ³\n    string staticname() default "";\n    anyannotation[] onconstructor() default {};\n  // è®¾ç½®çææé å½æ°çè®¿é®çº§å«ï¼é»è®¤æ¯public\n    accesslevel access() default lombok.accesslevel.public;\n}\n\n\nç¤ºä¾\n\n@allargsconstructor\npublic class allargsconstructordemo {\n    private long id;\n    private string name;\n    private int age;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class allargsconstructordemo {\n    private long id;\n    private string name;\n    private int age;\n\n    public allargsconstructordemo(long id, string name, int age) {\n        this.id = id;\n        this.name = name;\n        this.age = age;\n    }\n}\n\n\n@requiredargsconstructor\n\nä½¿ç¨ @requiredargsconstructor æ³¨è§£å¯ä»¥ä¸ºæå®ç±»å¿éåå§åçæååéï¼å¦ final æååéï¼çæå¯¹åºçæé å½æ°ï¼@requiredargsconstructor æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.source)\npublic @interface requiredargsconstructor {\n  // è¥è®¾ç½®è¯¥å±æ§ï¼å°ä¼çæä¸ä¸ªç§æçæé å½æ°ä¸çæä¸ä¸ªstaticnameæå®çéææ¹æ³\n    string staticname() default "";\n    anyannotation[] onconstructor() default {};\n  // è®¾ç½®çææé å½æ°çè®¿é®çº§å«ï¼é»è®¤æ¯public\n    accesslevel access() default lombok.accesslevel.public;\n}\n\n\nç¤ºä¾\n\n@requiredargsconstructor\npublic class requiredargsconstructordemo {\n    private final long id;\n    private string name;\n    private int age;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class requiredargsconstructordemo {\n    private final long id;\n    private string name;\n    private int age;\n\n    public requiredargsconstructordemo(long id) {\n        this.id = id;\n    }\n}\n\n\n\n# @utilityclass\n\nç¤ºä¾\n\n@utilityclass\npublic class securityutils {\n\n    public authentication getauthentication() {\n        return securitycontextholder.getcontext().getauthentication();\n    }\n\n    public simplifyuser getuser(authentication authentication) {\n        object principal = authentication.getprincipal();\n        if (principal instanceof simplifyuser) {\n            return (simplifyuser) principal;\n        }\n        return null;\n    }\n\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic final class securityutils {\n    public static authentication getauthentication() {\n        return securitycontextholder.getcontext().getauthentication();\n    }\n\n    private securityutils() {\n        throw new unsupportedoperationexception("this is a utility class and cannot be instantiated");\n    }\n}\n\n\n\n# @equalsandhashcode\n\nä½¿ç¨ @equalsandhashcode æ³¨è§£å¯ä»¥ä¸ºæå®ç±»çæ equals å hashcode æ¹æ³ï¼ @equalsandhashcode æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.source)\npublic @interface equalsandhashcode {\n  // æå®å¨çæçequalsåhashcodeæ¹æ³ä¸­éè¦æé¤çå­æ®µåè¡¨\n    string[] exclude() default {};\n    \n  // æ¾å¼ååºç¨äºidentityçå­æ®µï¼ä¸è¬æåµä¸non-static,non-transientå­æ®µä¼è¢«ç¨äºidentity\n    string[] of() default {};\n    \n  // æ è¯å¨æ§è¡å­æ®µè®¡ç®åï¼æ¯å¦è°ç¨ç¶ç±»çequalsåhashcodeæ¹æ³\n    boolean callsuper() default false;\n    \n    boolean donotusegetters() default false;\n    \n    anyannotation[] onparam() default {};\n    \n    @deprecated\n    @retention(retentionpolicy.source)\n    @target({})\n    @interface anyannotation {}\n    \n    @target(elementtype.field)\n    @retention(retentionpolicy.source)\n    public @interface exclude {}\n    \n    @target({elementtype.field, elementtype.method})\n    @retention(retentionpolicy.source)\n    public @interface include {\n        string replaces() default "";\n    }\n}\n\n\nç¤ºä¾\n\npublic class equalsandhashcodedemo {\n    string firstname;\n    string lastname;\n    localdate dateofbirth;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class equalsandhashcodedemo {\n    string firstname;\n    string lastname;\n    localdate dateofbirth;\n\n    public equalsandhashcodedemo() {\n    }\n\n    public boolean equals(object o) {\n        if (o == this) {\n            return true;\n        } else if (!(o instanceof equalsandhashcodedemo)) {\n            return false;\n        } else {\n            equalsandhashcodedemo other = (equalsandhashcodedemo)o;\n            if (!other.canequal(this)) {\n                return false;\n            } else {\n              // å·²çç¥å¤§éä»£ç \n        }\n    }\n\n    public int hashcode() {\n        int prime = true;\n        int result = 1;\n        object $firstname = this.firstname;\n        int result = result * 59 + ($firstname == null ? 43 : $firstname.hashcode());\n        object $lastname = this.lastname;\n        result = result * 59 + ($lastname == null ? 43 : $lastname.hashcode());\n        object $dateofbirth = this.dateofbirth;\n        result = result * 59 + ($dateofbirth == null ? 43 : $dateofbirth.hashcode());\n        return result;\n    }\n}\n\n\n\n# @tostring\n\nä½¿ç¨ @tostring æ³¨è§£å¯ä»¥ä¸ºæå®ç±»çæ tostring æ¹æ³ï¼ @tostring æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.source)\npublic @interface tostring {\n  // æå°è¾åºæ¶æ¯å¦åå«å­æ®µçåç§°\n    boolean includefieldnames() default true;\n    \n  // ååºæå°è¾åºæ¶ï¼éè¦æé¤çå­æ®µåè¡¨\n    string[] exclude() default {};\n    \n  // æ¾å¼çååºéè¦æå°è¾åºçå­æ®µåè¡¨\n    string[] of() default {};\n    \n  // æå°è¾åºçç»æä¸­æ¯å¦åå«ç¶ç±»çtostringæ¹æ³çè¿åç»æ\n    boolean callsuper() default false;\n    \n    boolean donotusegetters() default false;\n    \n    boolean onlyexplicitlyincluded() default false;\n    \n    @target(elementtype.field)\n    @retention(retentionpolicy.source)\n    public @interface exclude {}\n    \n    @target({elementtype.field, elementtype.method})\n    @retention(retentionpolicy.source)\n    public @interface include {\n        int rank() default 0;\n        string name() default "";\n    }\n}\n\n\nç¤ºä¾\n\n@tostring(exclude = {"dateofbirth"})\npublic class tostringdemo {\n    string firstname;\n    string lastname;\n    localdate dateofbirth;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class tostringdemo {\n    string firstname;\n    string lastname;\n    localdate dateofbirth;\n\n    public tostringdemo() {\n    }\n\n    public string tostring() {\n        return "tostringdemo(firstname=" + this.firstname + ", lastname=" + this.lastname + ")";\n    }\n}\n\n\n\n# @data\n\n@data æ³¨è§£ä¸åæ¶ä½¿ç¨ä»¥ä¸çæ³¨è§£çæææ¯ä¸æ ·çï¼\n\n@tostring\n@getter\n@setter\n@requiredargsconstructor\n@equalsandhashcode\n\n\n@data æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.source)\npublic @interface data {\n    string staticconstructor() default "";\n}\n\n\nç¤ºä¾\n\n@data\npublic class datademo {\n    private long id;\n    private string summary;\n    private string description;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class datademo {\n    private long id;\n    private string summary;\n    private string description;\n\n    public datademo() {\n    }\n\n    // çç¥summaryådescriptionæåå±æ§çsetterågetteræ¹æ³\n    public long getid() {\n        return this.id;\n    }\n  \n    public void setid(long id) {\n        this.id = id;\n    }\n\n    public boolean equals(object o) {\n        if (o == this) {\n            return true;\n        } else if (!(o instanceof datademo)) {\n            return false;\n        } else {\n            datademo other = (datademo)o;\n            if (!other.canequal(this)) {\n                return false;\n            } else {\n               // å·²çç¥å¤§éä»£ç \n            }\n        }\n    }\n\n    protected boolean canequal(object other) {\n        return other instanceof datademo;\n    }\n\n    public int hashcode() {\n        int prime = true;\n        int result = 1;\n        object $id = this.getid();\n        int result = result * 59 + ($id == null ? 43 : $id.hashcode());\n        object $summary = this.getsummary();\n        result = result * 59 + ($summary == null ? 43 : $summary.hashcode());\n        object $description = this.getdescription();\n        result = result * 59 + ($description == null ? 43 : $description.hashcode());\n        return result;\n    }\n\n    public string tostring() {\n        return "datademo(id=" + this.getid() + ", summary=" + this.getsummary() + ", description=" + this.getdescription() + ")";\n    }\n}\n\n\n\n# @log\n\nè¥ä½ å° @log çåä½æ¾å¨ç±»ä¸ï¼éç¨äºä½ æä½¿ç¨çæ¥å¿è®°å½ç³»ç»çä»»ä½ä¸ç§ï¼ï¼ä¹åï¼ä½ å°æ¥æä¸ä¸ªéæç final log å­æ®µï¼ç¶åä½ å°±å¯ä»¥ä½¿ç¨è¯¥å­æ®µæ¥è¾åºæ¥å¿ã\n\n@log\nprivate static final java.util.logging.logger log = java.util.logging.logger.getlogger(logexample.class.getname());\n@log4j\nprivate static final org.apache.log4j.logger log = org.apache.log4j.logger.getlogger(logexample.class);\n@log4j2\nprivate static final org.apache.logging.log4j.logger log = org.apache.logging.log4j.logmanager.getlogger(logexample.class);\n@slf4j\nprivate static final org.slf4j.logger log = org.slf4j.loggerfactory.getlogger(logexample.class);\n@xslf4j\nprivate static final org.slf4j.ext.xlogger log = org.slf4j.ext.xloggerfactory.getxlogger(logexample.class);\n@commonslog\nprivate static final org.apache.commons.logging.log log = org.apache.commons.logging.logfactory.getlog(logexample.class);\n\n\n\n# @synchronized\n\n@synchronized æ¯åæ­¥æ¹æ³ä¿®é¥°ç¬¦çæ´å®å¨çåä½ãä¸ synchronized ä¸æ ·ï¼è¯¥æ³¨è§£åªè½åºç¨å¨éæåå®ä¾æ¹æ³ä¸ãå®çæä½ç±»ä¼¼äº synchronized å³é®å­ï¼ä½æ¯å®éå®å¨ä¸åçå¯¹è±¡ä¸ãsynchronized å³é®å­åºç¨å¨å®ä¾æ¹æ³æ¶ï¼éå®çæ¯ this å¯¹è±¡ï¼èåºç¨å¨éææ¹æ³ä¸éå®çæ¯ç±»å¯¹è±¡ãå¯¹äº @synchronized æ³¨è§£å£°æçæ¹æ³æ¥è¯´ï¼å®éå®çæ¯\n\nælockã@synchronized æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target(elementtype.method)\n@retention(retentionpolicy.source)\npublic @interface synchronized {\n  // æå®éå®çå­æ®µåç§°\n    string value() default "";\n}\n\n\nç¤ºä¾\n\npublic class synchronizeddemo {\n    private final object readlock = new object();\n\n    @synchronized\n    public static void hello() {\n        system.out.println("world");\n    }\n\n    @synchronized\n    public int answertolife() {\n        return 42;\n    }\n\n    @synchronized("readlock")\n    public void foo() {\n        system.out.println("bar");\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class synchronizeddemo {\n    private static final object $lock = new object[0];\n    private final object $lock = new object[0];\n    private final object readlock = new object();\n\n    public synchronizeddemo() {\n    }\n\n    public static void hello() {\n        synchronized($lock) {\n            system.out.println("world");\n        }\n    }\n\n    public int answertolife() {\n        synchronized(this.$lock) {\n            return 42;\n        }\n    }\n\n    public void foo() {\n        synchronized(this.readlock) {\n            system.out.println("bar");\n        }\n    }\n}\n\n\n\n# @builder\n\nä½¿ç¨ @builder æ³¨è§£å¯ä»¥ä¸ºæå®ç±»å®ç°å»ºé èæ¨¡å¼ï¼è¯¥æ³¨è§£å¯ä»¥æ¾å¨ç±»ãæé å½æ°ææ¹æ³ä¸ã@builder æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target({type, method, constructor})\n@retention(source)\npublic @interface builder {\n    @target(field)\n    @retention(source)\n    public @interface default {}\n\n  // åå»ºæ°çbuilderå®ä¾çæ¹æ³åç§°\n    string buildermethodname() default "builder";\n    // åå»ºbuilderæ³¨è§£ç±»å¯¹åºå®ä¾çæ¹æ³åç§°\n    string buildmethodname() default "build";\n    // builderç±»çåç§°\n    string builderclassname() default "";\n    \n    boolean tobuilder() default false;\n    \n    accesslevel access() default lombok.accesslevel.public;\n    \n    @target({field, parameter})\n    @retention(source)\n    public @interface obtainvia {\n        string field() default "";\n        string method() default "";\n        boolean isstatic() default false;\n    }\n}\n\n\nç¤ºä¾\n\n@builder\npublic class builderdemo {\n    private final string firstname;\n    private final string lastname;\n    private final string email;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class builderdemo {\n    private final string firstname;\n    private final string lastname;\n    private final string email;\n\n    builderdemo(string firstname, string lastname, string email) {\n        this.firstname = firstname;\n        this.lastname = lastname;\n        this.email = email;\n    }\n\n    public static builderdemo.builderdemobuilder builder() {\n        return new builderdemo.builderdemobuilder();\n    }\n\n    public static class builderdemobuilder {\n        private string firstname;\n        private string lastname;\n        private string email;\n\n        builderdemobuilder() {\n        }\n\n        public builderdemo.builderdemobuilder firstname(string firstname) {\n            this.firstname = firstname;\n            return this;\n        }\n\n        public builderdemo.builderdemobuilder lastname(string lastname) {\n            this.lastname = lastname;\n            return this;\n        }\n\n        public builderdemo.builderdemobuilder email(string email) {\n            this.email = email;\n            return this;\n        }\n\n        public builderdemo build() {\n            return new builderdemo(this.firstname, this.lastname, this.email);\n        }\n\n        public string tostring() {\n            return "builderdemo.builderdemobuilder(firstname=" + this.firstname + ", lastname=" + this.lastname + ", email=" + this.email + ")";\n        }\n    }\n}\n\n\n\n# @sneakythrows\n\n@sneakythrows æ³¨è§£ç¨äºèªå¨æåºå·²æ£æ¥çå¼å¸¸ï¼èæ éå¨æ¹æ³ä¸­ä½¿ç¨ throw è¯­å¥æ¾å¼æåºã@sneakythrows æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target({elementtype.method, elementtype.constructor})\n@retention(retentionpolicy.source)\npublic @interface sneakythrows {\n    // è®¾ç½®ä½ å¸æåä¸æçå¼å¸¸ç±»\n    class<? extends throwable>[] value() default java.lang.throwable.class;\n}\n\n\nç¤ºä¾\n\npublic class sneakythrowsdemo {\n    @sneakythrows\n    @override\n    protected object clone() {\n        return super.clone();\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class sneakythrowsdemo {\n    public sneakythrowsdemo() {\n    }\n\n    protected object clone() {\n        try {\n            return super.clone();\n        } catch (throwable var2) {\n            throw var2;\n        }\n    }\n}\n\n\n\n# @nonnull\n\nä½ å¯ä»¥å¨æ¹æ³ææé å½æ°çåæ°ä¸ä½¿ç¨ @nonnull æ³¨è§£ï¼å®å°ä¼ä¸ºä½ èªå¨çæéç©ºæ ¡éªè¯­å¥ã@nonnull æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target({elementtype.field, elementtype.method, elementtype.parameter, elementtype.local_variable, elementtype.type_use})\n@retention(retentionpolicy.class)\n@documented\npublic @interface nonnull {\n\n}\n\n\nç¤ºä¾\n\npublic class nonnulldemo {\n    @getter\n    @setter\n    @nonnull\n    private string name;\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class nonnulldemo {\n    @nonnull\n    private string name;\n\n    public nonnulldemo() {\n    }\n\n    @nonnull\n    public string getname() {\n        return this.name;\n    }\n\n    public void setname(@nonnull string name) {\n        if (name == null) {\n            throw new nullpointerexception("name is marked non-null but is null");\n        } else {\n            this.name = name;\n        }\n    }\n}\n\n\n\n# @clean\n\n@clean æ³¨è§£ç¨äºèªå¨ç®¡çèµæºï¼ç¨å¨å±é¨åéä¹åï¼å¨å½ååéèå´åå³å°æ§è¡å®æ¯éåºä¹åä¼èªå¨æ¸çèµæºï¼èªå¨çæ try-finally è¿æ ·çä»£ç æ¥å³é­æµã\n\n@target(elementtype.local_variable)\n@retention(retentionpolicy.source)\npublic @interface cleanup {\n  // è®¾ç½®ç¨äºæ§è¡èµæºæ¸ç/åæ¶çæ¹æ³åç§°ï¼å¯¹åºæ¹æ³ä¸è½åå«ä»»ä½åæ°ï¼é»è®¤åç§°ä¸ºcloseã\n    string value() default "close";\n}\n\n\nç¤ºä¾\n\npublic class cleanupdemo {\n    public static void main(string[] args) throws ioexception {\n        @cleanup inputstream in = new fileinputstream(args[0]);\n        @cleanup outputstream out = new fileoutputstream(args[1]);\n        byte[] b = new byte[10000];\n        while (true) {\n            int r = in.read(b);\n            if (r == -1) break;\n            out.write(b, 0, r);\n        }\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class cleanupdemo {\n    public cleanupdemo() {\n    }\n\n    public static void main(string[] args) throws ioexception {\n        fileinputstream in = new fileinputstream(args[0]);\n\n        try {\n            fileoutputstream out = new fileoutputstream(args[1]);\n\n            try {\n                byte[] b = new byte[10000];\n\n                while(true) {\n                    int r = in.read(b);\n                    if (r == -1) {\n                        return;\n                    }\n\n                    out.write(b, 0, r);\n                }\n            } finally {\n                if (collections.singletonlist(out).get(0) != null) {\n                    out.close();\n                }\n\n            }\n        } finally {\n            if (collections.singletonlist(in).get(0) != null) {\n                in.close();\n            }\n        }\n    }\n}\n\n\n\n# @with\n\nå¨ç±»çå­æ®µä¸åºç¨ @with æ³¨è§£ä¹åï¼å°ä¼èªå¨çæä¸ä¸ª withfieldname(newvalue) çæ¹æ³ï¼è¯¥æ¹æ³ä¼åºäº newvalue è°ç¨ç¸åºæé å½æ°ï¼åå»ºä¸ä¸ªå½åç±»å¯¹åºçå®ä¾ã@with æ³¨è§£çå®ä¹å¦ä¸ï¼\n\n@target({elementtype.field, elementtype.type})\n@retention(retentionpolicy.source)\npublic @interface with {\n    accesslevel value() default accesslevel.public;\n\n    with.anyannotation[] onmethod() default {};\n\n    with.anyannotation[] onparam() default {};\n\n    @deprecated\n    @retention(retentionpolicy.source)\n    @target({})\n    public @interface anyannotation {\n    }\n}\n\n\nç¤ºä¾\n\npublic class withdemo {\n    @with(accesslevel.protected)\n    @nonnull\n    private final string name;\n    @with\n    private final int age;\n\n    public withdemo(string name, int age) {\n        if (name == null) throw new nullpointerexception();\n        this.name = name;\n        this.age = age;\n    }\n}\n\n\nä»¥ä¸ä»£ç ç»è¿ lombok ç¼è¯åï¼ä¼çæå¦ä¸ä»£ç ï¼\n\npublic class withdemo {\n    @nonnull\n    private final string name;\n    private final int age;\n\n    public withdemo(string name, int age) {\n        if (name == null) {\n            throw new nullpointerexception();\n        } else {\n            this.name = name;\n            this.age = age;\n        }\n    }\n\n    protected withdemo withname(@nonnull string name) {\n        if (name == null) {\n            throw new nullpointerexception("name is marked non-null but is null");\n        } else {\n            return this.name == name ? this : new withdemo(name, this.age);\n        }\n    }\n\n    public withdemo withage(int age) {\n        return this.age == age ? this : new withdemo(this.name, age);\n    }\n}\n\n\n\n# @accessors\n\n@accessors æ³¨è§£ç¨æ¥éç½®lombokå¦ä½äº§çåæ¾ç¤ºgettersåsettersçæ¹æ³ã@accessorsæ³¨è§£æ¢å¯ä»¥æ³¨è§£å¨ç±»ä¸ä¹å¯ä»¥æ³¨è§£å¨å±æ§ä¸ @accessorsæä¸ä¸ªå±æ§\n\n# fluent\n\nfluentä¸ºä¸ä¸ªå¸å°å¼ï¼å¦æä¸ºtrueçæçget/setæ¹æ³åæ²¡æset/getåç¼ï¼é»è®¤ä¸ºfalse ä¾å¦ï¼\n\n@accessors(flunet = true)\npublic class myclass {\n    @getter\n    private int num;\n}\n\n\nçæçgetæ¹æ³ä¸ºnum()ï¼èä¸æ¯getnum()\n\n# chain\n\nchainä¸ºä¸ä¸ªå¸å°å¼ï¼å¦æä¸ºtrueçæçsetæ¹æ³è¿åthisï¼ä¸ºfalseçæçsetæ¹æ³æ¯voidç±»åãé»è®¤ä¸ºfalseï¼é¤éå½fluentä¸ºtrueæ¶ï¼chainé»è®¤åä¸ºtrue\n\n# prefix\n\nprefixä¸ºä¸ç³»åstringç±»åï¼å¯ä»¥æå®åç¼ï¼çæget/setæ¹æ³æ¶ä¼å»ææå®çåç¼ ä¾å¦ï¼\n\n@accessors(prefix = "m")\npublic class myclass {\n    @getter\n    private int mnum;\n}\n\n\nçæçgetæ¹æ³ä¸ºgetnum()ï¼èä¸æ¯getmnum()\n\n\n# å¶å®ç¹æ§\n\n# val\n\nval ç¨å¨å±é¨åéåé¢ï¼ç¸å½äºå°åéå£°æä¸º finalï¼æ­¤å¤ lombok å¨ç¼è¯æ¶è¿ä¼èªå¨è¿è¡ç±»åæ¨æ­ãval çä½¿ç¨ç¤ºä¾ï¼\n\npublic class valexample {\n  public string example() {\n    val example = new arraylist<string>();\n    example.add("hello, world!");\n    val foo = example.get(0);\n    return foo.tolowercase();\n  }\n  \n  public void example2() {\n    val map = new hashmap<integer, string>();\n    map.put(0, "zero");\n    map.put(5, "five");\n    for (val entry : map.entryset()) {\n      system.out.printf("%d: %s\\n", entry.getkey(), entry.getvalue());\n    }\n  }\n}\n\n\nä»¥ä¸ä»£ç ç­ä»·äºï¼\n\npublic class valexample {\n  public string example() {\n    final arraylist<string> example = new arraylist<string>();\n    example.add("hello, world!");\n    final string foo = example.get(0);\n    return foo.tolowercase();\n  }\n  \n  public void example2() {\n    final hashmap<integer, string> map = new hashmap<integer, string>();\n    map.put(0, "zero");\n    map.put(5, "five");\n    for (final map.entry<integer, string> entry : map.entryset()) {\n      system.out.printf("%d: %s\\n", entry.getkey(), entry.getvalue());\n    }\n  }\n}\n\n\n\n# lombokæ³¨è§£åç\n\nè¯´å° lombokï¼æä»¬å°±å¾å»æå° jsr 269: pluggable annotation processing api ãjsr 269 ä¹åæä»¬ä¹ææ³¨è§£è¿æ ·çç¥å¨ï¼å¯æ¯æä»¬æ¯å¦æ³è¦åä»ä¹å¿é¡»ä½¿ç¨åå°ï¼åå°çæ¹æ³å±éæ§è¾å¤§ãé¦åï¼å®å¿é¡»å®ä¹@retentionä¸ºretentionpolicy.runtimeï¼åªè½å¨è¿è¡æ¶éè¿åå°æ¥è·åæ³¨è§£å¼ï¼ä½¿å¾è¿è¡æ¶ä»£ç æçéä½ãå¶æ¬¡ï¼å¦ææ³å¨ç¼è¯é¶æ®µå©ç¨æ³¨è§£æ¥è¿è¡ä¸äºæ£æ¥ï¼å¯¹ç¨æ·çæäºä¸åçä»£ç ç»åºéè¯¯æ¥åï¼åå°çä½¿ç¨æ¹æ³å°±æ è½ä¸ºåäºãè jsr 269 ä¹åæä»¬å¯ä»¥å¨ javacçç¼è¯æå©ç¨æ³¨è§£åè¿äºäºæãæä»¥æä»¬åç°æ ¸å¿çåºåæ¯å¨ è¿è¡æ è¿æ¯ ç¼è¯æã\n\n\n\nä»ä¸å¾å¯ç¥ï¼annotation processing æ¯å¨è§£æåçæä¹é´çä¸ä¸ªæ­¥éª¤ãå·ä½è¯¦ç»æ­¥éª¤å¦ä¸ï¼\n\n\n\nä¸å¾æ¯ lombok å¤çæµç¨ï¼å¨javac è§£æææ½è±¡è¯­æ³æ ä¹å(ast), lombok æ ¹æ®èªå·±çæ³¨è§£å¤çå¨ï¼å¨æçä¿®æ¹ astï¼å¢å æ°çèç¹(æè°ä»£ç )ï¼æç»éè¿åæåçæå­èç ã\n\nèªä»java 6èµ·ï¼javacå°±æ¯æâjsr 269 pluggable annotation processing apiâè§èï¼åªè¦ç¨åºå®ç°äºè¯¥apiï¼å°±è½å¨javacè¿è¡çæ¶åå¾å°è°ç¨ã\n\næç¤º\n\n 1. å¸¸ç¨çé¡¹ç®ç®¡çå·¥å·mavenæä½¿ç¨çjavaç¼è¯å·¥å·æ¥æºäºéç½®çç¬¬ä¸æ¹å·¥å·ï¼å¦ææä»¬éç½®è¿ä¸ªç¬¬ä¸æ¹å·¥å·ä¸ºoracle javacçè¯ï¼é£ä¹mavenä¹å°±ç´æ¥æ¯ælombokäº;\n 2. intellij ideaéç½®çç¼è¯å·¥å·ä¸ºoracle javacçè¯ï¼ä¹å°±ç´æ¥æ¯ælombokäºã\n\nideå·¥å·é®é¢è§£å³ï¼\n\næç¤º\n\nç°å¨æä¸ä¸ªaç±»ï¼å¶ä¸­æä¸äºå­æ®µï¼æ²¡æåå»ºå®ä»¬çsetterågetteræ¹æ³ï¼ä½¿ç¨äºlombokç@dataæ³¨è§£ï¼å¦å¤æä¸ä¸ªbç±»ï¼å®è°ç¨äºaç±»å®ä¾çç¸åºå­æ®µçsetterågetteræ¹æ³\n\nç¼è¯aç±»åbç±»æå¨çé¡¹ç®ï¼å¹¶ä¸ä¼æ¥éï¼å ä¸ºæç»çæçaç±»å­èç æä»¶ä¸­å­å¨ç¸åºå­æ®µçsetterågetteræ¹æ³\n\nä½æ¯ï¼ideåç°bç±»æºä»£ç ä¸­æä½¿ç¨çaç±»å®ä¾çsetterågetteræ¹æ³å¨aç±»æºä»£ç ä¸­æ¾ä¸å°å®ä¹ï¼ideä¼è®¤ä¸ºè¿æ¯éè¯¯\n\nè¦è§£å³ä»¥ä¸è¿ä¸ªä¸æ¯çæ­£éè¯¯çéè¯¯ï¼å¯ä»¥ä¸è½½å®è£intellij ideaä¸­ç"lombok plugin"ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Spring Bootæ´åSwagger",frontmatter:{title:"Spring Bootæ´åSwagger",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/ff62ec/"},regularPath:"/21.Simplify/01.Simplify%20Docs/02.Spring%20Boot%E6%95%B4%E5%90%88Swagger.html",relativePath:"21.Simplify/01.Simplify Docs/02.Spring Bootæ´åSwagger.md",key:"v-03f86a9e",path:"/pages/ff62ec/",headers:[{level:2,title:"çæ¬è¯´æ",slug:"çæ¬è¯´æ",normalizedTitle:"çæ¬è¯´æ",charIndex:27},{level:2,title:"åå»ºå·¥ç¨",slug:"åå»ºå·¥ç¨",normalizedTitle:"åå»ºå·¥ç¨",charIndex:120},{level:2,title:"åå»º entity",slug:"åå»º-entity",normalizedTitle:"åå»º entity",charIndex:2637},{level:2,title:"åå»º controller",slug:"åå»º-controller",normalizedTitle:"åå»º controller",charIndex:3452},{level:2,title:"Swagger æ ¸å¿éç½®æä»¶",slug:"swagger-æ ¸å¿éç½®æä»¶",normalizedTitle:"swagger æ ¸å¿éç½®æä»¶",charIndex:5080},{level:2,title:"å¯å¨é¡¹ç®",slug:"å¯å¨é¡¹ç®",normalizedTitle:"å¯å¨é¡¹ç®",charIndex:8493},{level:2,title:"æ¥çææ",slug:"æ¥çææ",normalizedTitle:"æ¥çææ",charIndex:10867},{level:2,title:"å¸¸ç¨æ³¨è§£è¯´æ",slug:"å¸¸ç¨æ³¨è§£è¯´æ",normalizedTitle:"å¸¸ç¨æ³¨è§£è¯´æ",charIndex:10960}],headersStr:"çæ¬è¯´æ åå»ºå·¥ç¨ åå»º entity åå»º controller Swagger æ ¸å¿éç½®æä»¶ å¯å¨é¡¹ç® æ¥çææ å¸¸ç¨æ³¨è§£è¯´æ",content:'# Spring Bootæ´åSwagger\n\n\n# çæ¬è¯´æ\n\nè½¯ä»¶                  çæ¬\nspring boot         2.3.5.RELEASE\nspringfox-swagger   3.0.0\n\n\n# åå»ºå·¥ç¨\n\nä½¿ç¨ Spring Initializr åå»ºå·¥ç¨ pom.xml æä»¶åå®¹å¦ä¸ ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.3.5.RELEASE</version>\n        <relativePath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    <groupId>com.ieooc.demo</groupId>\n    <artifactId>springfox-swagger-demo</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <name>springfox-swagger-demo</name>\n    <description>springfox-swagger åæ¨¡åæ´ådemo</description>\n\n    <properties>\n        <java.version>1.8</java.version>\n        <swagger.fox.version>3.0.0</swagger.fox.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n            <exclusions>\n                <exclusion>\n                    <groupId>org.junit.vintage</groupId>\n                    <artifactId>junit-vintage-engine</artifactId>\n                </exclusion>\n            </exclusions>\n        </dependency>\n\n        \x3c!--lombokææ·å¼åå·¥å·å--\x3e\n        <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <scope>provided</scope>\n        </dependency>\n\n        \x3c!--swagger ä¾èµ--\x3e\n        <dependency>\n            <groupId>io.springfox</groupId>\n            <artifactId>springfox-boot-starter</artifactId>\n            <version>${swagger.fox.version}</version>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n\n\n> å¼å¥lombokä¸ºäºç®åä»£ç ï¼å¯ä»¥ä¸å¼å¥ï¼ä¸å½±åswaggeréæã\n\nä¸»è¦ä¾èµ springfox-boot-starter ï¼è¿æ¯ç¨å®æ¹æä¾çåå«èªå¨éç½®ã\n\n\x3c!--swagger ä¾èµ--\x3e\n<dependency>\n    <groupId>io.springfox</groupId>\n    <artifactId>springfox-boot-starter</artifactId>\n    <version>${swagger.fox.version}</version>\n</dependency>\n\n\n\n# åå»º entity\n\næ°å»ºåå com.ieooc.demo.swagger.entity,åå»ºSysUserå®ä½ç±»ï¼åå®¹å¦ä¸ï¼\n\npackage com.ieooc.demo.swagger.entity;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.io.Serializable;\n\n/**\n * <p>\n * ç¨æ·è¡¨\n * </p>\n *\n * @author heyuqiang\n * @since 2020-08-30\n */\n@Data\n@EqualsAndHashCode(callSuper = false)\n@ApiModel(value = "SysUser", description = "ç¨æ·è¡¨")\npublic class SysUser implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @ApiModelProperty(value = "ä¸»é®ID")\n    private Integer userId;\n\n    @ApiModelProperty(value = "ç¨æ·å")\n    private String username;\n\n    @ApiModelProperty(value = "å¯ç ")\n    private String password;\n\n}\n\n\n\n> @Dataæ³¨è§£ç±lombokæä¾ï¼å¦ææ²¡ç¨å¼å¥lombokä¾èµï¼éè¦æå¨çægetter,setteræ¹æ³ã\n\n\n# åå»º controller\n\næ°å»ºåå com.ieooc.demo.swagger.controller,åå»ºSysUserControlleræ§å¶å¨ï¼åå®¹å¦ä¸ï¼\n\npackage com.ieooc.demo.swagger.controller;\n\n\nimport com.ieooc.demo.swagger.entity.SysUser;\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\nimport io.swagger.annotations.ApiParam;\nimport lombok.AllArgsConstructor;\nimport org.springframework.web.bind.annotation.*;\n\n/**\n * <p>\n * ç¨æ·ç®¡çæ¨¡å\n * </p>\n *\n * @author heyuqiang\n * @since 2020-08-30\n */\n@RestController\n@RequestMapping("/users")\n@AllArgsConstructor\n@Api(value = "user", tags = "ç¨æ·ç®¡ç")\npublic class SysUserController {\n\n    /**\n     * æ°å¢ç¨æ·\n     */\n    @PostMapping()\n    @ApiOperation(value = "saveUser", notes = "æ°å¢ç¨æ·")\n    public void saveUser(@ApiParam(value = "ç¨æ·ä¿¡æ¯") @RequestBody SysUser sysUser) {\n\n    }\n\n    /**\n     * æ ¹æ®ç¨æ·idå é¤ç¨æ·ä¿¡æ¯\n     */\n    @DeleteMapping("/{userId}")\n    @ApiOperation(value = "deleteById", notes = "æ ¹æ®ç¨æ·idå é¤ç¨æ·ä¿¡æ¯")\n    public void deleteById(@ApiParam(value = "ç¨æ·id") @PathVariable("userId") Integer userId) {\n\n    }\n\n    /**\n     * æ ¹æ ¹æ®ç¨æ·åæ¥è¯¢ç¨æ·è§è²ï¼æéä¿¡æ¯\n     */\n    @PutMapping("/{userId}")\n    @ApiOperation(value = "info", notes = "æ ¹æ®ç¨æ·åæ¥è¯¢ç¨æ·è§è²ï¼æéä¿¡æ¯")\n    public void info(@ApiParam(value = "ç¨æ·id") @PathVariable("userId") Integer userId,\n                     @ApiParam(value = "ç¨æ·ä¿¡æ¯") @RequestBody SysUser sysUser) {\n\n    }\n\n    /**\n     * æ ¹æ®ç¨æ·idæ¥è¯¢ç¨æ·ä¿¡æ¯\n     *\n     * @param userId ç¨æ·id\n     * @return ç¨æ·ä¿¡æ¯\n     */\n    @GetMapping("/{userId}")\n    @ApiOperation(value = "getUserVoById", notes = "æ ¹æ®ç¨æ·idæ¥è¯¢ç¨æ·ä¿¡æ¯")\n    public void getUserVoById(@ApiParam(value = "ç¨æ·id") @PathVariable Integer userId) {\n    }\n\n\n}\n\n\n> åå«äºå¸¸ç¨çå¢ãå ãæ¹ãæ¥ã\n\n\n# Swagger æ ¸å¿éç½®æä»¶\n\næ°å»ºåå com.ieooc.demo.swagger.config,åå»ºSwaggerAutoConfigurationéç½®ç±»ï¼åå®¹å¦ä¸ï¼\n\npackage com.ieooc.demo.swagger.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport springfox.documentation.builders.ApiInfoBuilder;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.service.ApiInfo;\nimport springfox.documentation.service.Contact;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger.web.*;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\nimport java.util.Arrays;\nimport java.util.LinkedHashSet;\n\n/**\n * @author heyuqiang\n * @date 2020/10/03\n * Swagger æ ¸å¿éç½®æä»¶\n * å®æ¹ææ¡£ï¼http://springfox.github.io/springfox/docs/current/\n */\n@Configuration\n@EnableSwagger2\npublic class SwaggerAutoConfiguration {\n\n    /**\n     * ç»ç»Docketå¯¹è±¡ï¼åå§åswaggerä¸»è¦éç½®\n     *\n     * @return Docket\n     */\n    @Bean\n    public Docket api() {\n        //èªå®ä¹éç½®ï¼æå®è§èï¼è¿éæ¯SWAGGER_2\n        return new Docket(DocumentationType.SWAGGER_2)\n                //å®ä¹æ¯å¦å¼å¯swaggerï¼falseä¸ºå³é­ï¼å¯ä»¥éè¿åéæ§å¶\n                .enable(true)\n                //è®¾å®Apiææ¡£å¤´ä¿¡æ¯ï¼è¿ä¸ªä¿¡æ¯ä¼å±ç¤ºå¨ææ¡£UIçå¤´é¨ä½ç½®\n                .apiInfo(apiInfo())\n                //æå®éè¦åå¸å°Swaggerçæ¥å£ç®å½ï¼ä¸æ¯æééç¬¦\n                .select()\n                .apis(RequestHandlerSelectors.basePackage("com.ieooc.demo.swagger.controller"))\n                .paths(PathSelectors.any())\n                .build()\n                //å°servletè·¯å¾æ å°ï¼å¦ææï¼æ·»å å°apisåºæ¬è·¯å¾\n                .pathMapping("/")\n                //æ¯æçéè®¯åè®®éå\n                .protocols(new LinkedHashSet<>(Arrays.asList("https", "http")));\n    }\n\n    /**\n     * èªå®ä¹APIææ¡£åºæ¬ä¿¡æ¯å®ä½\n     *\n     * @return ApiInfo\n     */\n    public ApiInfo apiInfo() {\n        return new ApiInfoBuilder()\n                //æå»ºèç³»å®ä½ï¼å¨UIçé¢ä¼æ¾ç¤º\n                .contact(new Contact("simplify", "https://www.ieooc.com", "info@ieooc.com"))\n                //æ é¢\n                .title("simplify title")\n                //æè¿°\n                .description("simplify description")\n                //è®¸å¯è¯URL\n                .license("simplify license")\n                //è®¸å¯è¯URL\n                .licenseUrl("simplify licenseUrl")\n                //æå¡æ¡æ¬¾URL\n                .termsOfServiceUrl("simplify termsOfServiceUrl")\n                //çæ¬\n                .version("v1.0")\n                .build();\n    }\n\n    /**\n     * UIéç½®\n     */\n    @Bean\n    UiConfiguration uiConfig() {\n        return UiConfigurationBuilder.builder()\n                .deepLinking(true)\n                .displayOperationId(false)\n                .defaultModelsExpandDepth(1)\n                .defaultModelExpandDepth(1)\n                .defaultModelRendering(ModelRendering.EXAMPLE)\n                .displayRequestDuration(false)\n                .docExpansion(DocExpansion.NONE)\n                .filter(false)\n                .maxDisplayedTags(null)\n                .operationsSorter(OperationsSorter.ALPHA)\n                .showExtensions(false)\n                .showCommonExtensions(false)\n                .tagsSorter(TagsSorter.ALPHA)\n                .supportedSubmitMethods(UiConfiguration.Constants.DEFAULT_SUBMIT_METHODS)\n                .validatorUrl(null)\n                .build();\n    }\n\n}\n\n\n\n> uiConfig å¯ééç½®ï¼é»è®¤å¯ä»¥åå»ºã\n\n\n# å¯å¨é¡¹ç®\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.3.5.RELEASE)\n\n2020-11-09 17:33:54.619  INFO 132 --- [           main] com.ieooc.demo.swagger.DemoApplication   : Starting DemoApplication on DESKTOP-7V8Q19U with PID 132 (D:\\IdeaProjects\\springfox-swagger-demo\\target\\classes started by heyuq in D:\\IdeaProjects\\springfox-swagger-demo)\n2020-11-09 17:33:54.622  INFO 132 --- [           main] com.ieooc.demo.swagger.DemoApplication   : No active profile set, falling back to default profiles: default\n2020-11-09 17:33:56.474  INFO 132 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2020-11-09 17:33:56.482  INFO 132 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2020-11-09 17:33:56.483  INFO 132 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]\n2020-11-09 17:33:56.657  INFO 132 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2020-11-09 17:33:56.657  INFO 132 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1815 ms\n2020-11-09 17:33:57.170  INFO 132 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService \'applicationTaskExecutor\'\n2020-11-09 17:33:57.390  INFO 132 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path \'\'\n2020-11-09 17:33:57.672  INFO 132 --- [           main] com.ieooc.demo.swagger.DemoApplication   : Started DemoApplication in 3.672 seconds (JVM running for 7.904)\n2020-11-09 17:34:17.480  INFO 132 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet \'dispatcherServlet\'\n2020-11-09 17:34:17.481  INFO 132 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet \'dispatcherServlet\'\n2020-11-09 17:34:17.486  INFO 132 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms\n\n\n\n# æ¥çææ\n\næµè§å¨è®¿é®ï¼http://localhost:8080/swagger-ui/index.html\n\n\n\nè³æ­¤ï¼springbootæ´åswagger3.0 å®æã\n\n\n# å¸¸ç¨æ³¨è§£è¯´æ\n\n@Api()ï¼æ³¨è§£ç±»ï¼æè¿°Controllerçä½ç¨\n\ttags = âæè¿°Controllerçä½ç¨â\n@ApiOperation()ï¼æ³¨è§£æ¹æ³ï¼æè¿°å·ä½æ¥å£çä½ç¨\n\tvalue=âå·ä½è¯´ææ¥å£çä½ç¨â\n    notes="æ¥å£æ¹æ³å¤æ³¨â\n@ApiImplicitParams()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ç»è¯·æ±åæ°ï¼å¯ä»¥åå«å¤ä¸ª@ApiImplicitParam()\n@ApiImplicitParam()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ä¸ªå·ä½çè¯·æ±åæ°\n\tnameï¼è¯·æ±åæ°å\n\tvalueï¼è¯·æ±åæ°æè¿°\n\trequiredï¼æ¯å¦å¿ä¼ \n\tdataTypeï¼åæ°ç±»å\n\tdefaultValueï¼é»è®¤å¼\n@ApiResponses()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ç»HTTPè¿åå¼ï¼å¯ä»¥åå«å¤ä¸ª@ApiResponse()\n@ApiResponse()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ä¸ªHTTPååºä¿¡æ¯\n\tcodeï¼HTTPè¿åå¼\n    messageï¼è¿åä¿¡æ¯\n    responseï¼æåºå¼å¸¸çç±»\n@ApiModel()ï¼æ³¨è§£Modelï¼æè¿°ååºæ°æ®Modelç±»\n@ApiModelProperty()ï¼æ³¨è§£å±æ§ï¼æè¿°ååºModelç±»çå±æ§\n@ApiIgnore()ï¼æ³¨è§£ç±»ï¼è¡¨ç¤ºå¿½ç¥è¿ä¸ªApi\n',normalizedContent:'# spring bootæ´åswagger\n\n\n# çæ¬è¯´æ\n\nè½¯ä»¶                  çæ¬\nspring boot         2.3.5.release\nspringfox-swagger   3.0.0\n\n\n# åå»ºå·¥ç¨\n\nä½¿ç¨ spring initializr åå»ºå·¥ç¨ pom.xml æä»¶åå®¹å¦ä¸ ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0" xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n    <parent>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-parent</artifactid>\n        <version>2.3.5.release</version>\n        <relativepath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    <groupid>com.ieooc.demo</groupid>\n    <artifactid>springfox-swagger-demo</artifactid>\n    <version>0.0.1-snapshot</version>\n    <name>springfox-swagger-demo</name>\n    <description>springfox-swagger åæ¨¡åæ´ådemo</description>\n\n    <properties>\n        <java.version>1.8</java.version>\n        <swagger.fox.version>3.0.0</swagger.fox.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-web</artifactid>\n        </dependency>\n\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-test</artifactid>\n            <scope>test</scope>\n            <exclusions>\n                <exclusion>\n                    <groupid>org.junit.vintage</groupid>\n                    <artifactid>junit-vintage-engine</artifactid>\n                </exclusion>\n            </exclusions>\n        </dependency>\n\n        \x3c!--lombokææ·å¼åå·¥å·å--\x3e\n        <dependency>\n            <groupid>org.projectlombok</groupid>\n            <artifactid>lombok</artifactid>\n            <scope>provided</scope>\n        </dependency>\n\n        \x3c!--swagger ä¾èµ--\x3e\n        <dependency>\n            <groupid>io.springfox</groupid>\n            <artifactid>springfox-boot-starter</artifactid>\n            <version>${swagger.fox.version}</version>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-maven-plugin</artifactid>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n\n\n> å¼å¥lombokä¸ºäºç®åä»£ç ï¼å¯ä»¥ä¸å¼å¥ï¼ä¸å½±åswaggeréæã\n\nä¸»è¦ä¾èµ springfox-boot-starter ï¼è¿æ¯ç¨å®æ¹æä¾çåå«èªå¨éç½®ã\n\n\x3c!--swagger ä¾èµ--\x3e\n<dependency>\n    <groupid>io.springfox</groupid>\n    <artifactid>springfox-boot-starter</artifactid>\n    <version>${swagger.fox.version}</version>\n</dependency>\n\n\n\n# åå»º entity\n\næ°å»ºåå com.ieooc.demo.swagger.entity,åå»ºsysuserå®ä½ç±»ï¼åå®¹å¦ä¸ï¼\n\npackage com.ieooc.demo.swagger.entity;\n\nimport io.swagger.annotations.apimodel;\nimport io.swagger.annotations.apimodelproperty;\nimport lombok.data;\nimport lombok.equalsandhashcode;\n\nimport java.io.serializable;\n\n/**\n * <p>\n * ç¨æ·è¡¨\n * </p>\n *\n * @author heyuqiang\n * @since 2020-08-30\n */\n@data\n@equalsandhashcode(callsuper = false)\n@apimodel(value = "sysuser", description = "ç¨æ·è¡¨")\npublic class sysuser implements serializable {\n\n    private static final long serialversionuid = 1l;\n\n    @apimodelproperty(value = "ä¸»é®id")\n    private integer userid;\n\n    @apimodelproperty(value = "ç¨æ·å")\n    private string username;\n\n    @apimodelproperty(value = "å¯ç ")\n    private string password;\n\n}\n\n\n\n> @dataæ³¨è§£ç±lombokæä¾ï¼å¦ææ²¡ç¨å¼å¥lombokä¾èµï¼éè¦æå¨çægetter,setteræ¹æ³ã\n\n\n# åå»º controller\n\næ°å»ºåå com.ieooc.demo.swagger.controller,åå»ºsysusercontrolleræ§å¶å¨ï¼åå®¹å¦ä¸ï¼\n\npackage com.ieooc.demo.swagger.controller;\n\n\nimport com.ieooc.demo.swagger.entity.sysuser;\nimport io.swagger.annotations.api;\nimport io.swagger.annotations.apioperation;\nimport io.swagger.annotations.apiparam;\nimport lombok.allargsconstructor;\nimport org.springframework.web.bind.annotation.*;\n\n/**\n * <p>\n * ç¨æ·ç®¡çæ¨¡å\n * </p>\n *\n * @author heyuqiang\n * @since 2020-08-30\n */\n@restcontroller\n@requestmapping("/users")\n@allargsconstructor\n@api(value = "user", tags = "ç¨æ·ç®¡ç")\npublic class sysusercontroller {\n\n    /**\n     * æ°å¢ç¨æ·\n     */\n    @postmapping()\n    @apioperation(value = "saveuser", notes = "æ°å¢ç¨æ·")\n    public void saveuser(@apiparam(value = "ç¨æ·ä¿¡æ¯") @requestbody sysuser sysuser) {\n\n    }\n\n    /**\n     * æ ¹æ®ç¨æ·idå é¤ç¨æ·ä¿¡æ¯\n     */\n    @deletemapping("/{userid}")\n    @apioperation(value = "deletebyid", notes = "æ ¹æ®ç¨æ·idå é¤ç¨æ·ä¿¡æ¯")\n    public void deletebyid(@apiparam(value = "ç¨æ·id") @pathvariable("userid") integer userid) {\n\n    }\n\n    /**\n     * æ ¹æ ¹æ®ç¨æ·åæ¥è¯¢ç¨æ·è§è²ï¼æéä¿¡æ¯\n     */\n    @putmapping("/{userid}")\n    @apioperation(value = "info", notes = "æ ¹æ®ç¨æ·åæ¥è¯¢ç¨æ·è§è²ï¼æéä¿¡æ¯")\n    public void info(@apiparam(value = "ç¨æ·id") @pathvariable("userid") integer userid,\n                     @apiparam(value = "ç¨æ·ä¿¡æ¯") @requestbody sysuser sysuser) {\n\n    }\n\n    /**\n     * æ ¹æ®ç¨æ·idæ¥è¯¢ç¨æ·ä¿¡æ¯\n     *\n     * @param userid ç¨æ·id\n     * @return ç¨æ·ä¿¡æ¯\n     */\n    @getmapping("/{userid}")\n    @apioperation(value = "getuservobyid", notes = "æ ¹æ®ç¨æ·idæ¥è¯¢ç¨æ·ä¿¡æ¯")\n    public void getuservobyid(@apiparam(value = "ç¨æ·id") @pathvariable integer userid) {\n    }\n\n\n}\n\n\n> åå«äºå¸¸ç¨çå¢ãå ãæ¹ãæ¥ã\n\n\n# swagger æ ¸å¿éç½®æä»¶\n\næ°å»ºåå com.ieooc.demo.swagger.config,åå»ºswaggerautoconfigurationéç½®ç±»ï¼åå®¹å¦ä¸ï¼\n\npackage com.ieooc.demo.swagger.config;\n\nimport org.springframework.context.annotation.bean;\nimport org.springframework.context.annotation.configuration;\nimport springfox.documentation.builders.apiinfobuilder;\nimport springfox.documentation.builders.pathselectors;\nimport springfox.documentation.builders.requesthandlerselectors;\nimport springfox.documentation.service.apiinfo;\nimport springfox.documentation.service.contact;\nimport springfox.documentation.spi.documentationtype;\nimport springfox.documentation.spring.web.plugins.docket;\nimport springfox.documentation.swagger.web.*;\nimport springfox.documentation.swagger2.annotations.enableswagger2;\n\nimport java.util.arrays;\nimport java.util.linkedhashset;\n\n/**\n * @author heyuqiang\n * @date 2020/10/03\n * swagger æ ¸å¿éç½®æä»¶\n * å®æ¹ææ¡£ï¼http://springfox.github.io/springfox/docs/current/\n */\n@configuration\n@enableswagger2\npublic class swaggerautoconfiguration {\n\n    /**\n     * ç»ç»docketå¯¹è±¡ï¼åå§åswaggerä¸»è¦éç½®\n     *\n     * @return docket\n     */\n    @bean\n    public docket api() {\n        //èªå®ä¹éç½®ï¼æå®è§èï¼è¿éæ¯swagger_2\n        return new docket(documentationtype.swagger_2)\n                //å®ä¹æ¯å¦å¼å¯swaggerï¼falseä¸ºå³é­ï¼å¯ä»¥éè¿åéæ§å¶\n                .enable(true)\n                //è®¾å®apiææ¡£å¤´ä¿¡æ¯ï¼è¿ä¸ªä¿¡æ¯ä¼å±ç¤ºå¨ææ¡£uiçå¤´é¨ä½ç½®\n                .apiinfo(apiinfo())\n                //æå®éè¦åå¸å°swaggerçæ¥å£ç®å½ï¼ä¸æ¯æééç¬¦\n                .select()\n                .apis(requesthandlerselectors.basepackage("com.ieooc.demo.swagger.controller"))\n                .paths(pathselectors.any())\n                .build()\n                //å°servletè·¯å¾æ å°ï¼å¦ææï¼æ·»å å°apisåºæ¬è·¯å¾\n                .pathmapping("/")\n                //æ¯æçéè®¯åè®®éå\n                .protocols(new linkedhashset<>(arrays.aslist("https", "http")));\n    }\n\n    /**\n     * èªå®ä¹apiææ¡£åºæ¬ä¿¡æ¯å®ä½\n     *\n     * @return apiinfo\n     */\n    public apiinfo apiinfo() {\n        return new apiinfobuilder()\n                //æå»ºèç³»å®ä½ï¼å¨uiçé¢ä¼æ¾ç¤º\n                .contact(new contact("simplify", "https://www.ieooc.com", "info@ieooc.com"))\n                //æ é¢\n                .title("simplify title")\n                //æè¿°\n                .description("simplify description")\n                //è®¸å¯è¯url\n                .license("simplify license")\n                //è®¸å¯è¯url\n                .licenseurl("simplify licenseurl")\n                //æå¡æ¡æ¬¾url\n                .termsofserviceurl("simplify termsofserviceurl")\n                //çæ¬\n                .version("v1.0")\n                .build();\n    }\n\n    /**\n     * uiéç½®\n     */\n    @bean\n    uiconfiguration uiconfig() {\n        return uiconfigurationbuilder.builder()\n                .deeplinking(true)\n                .displayoperationid(false)\n                .defaultmodelsexpanddepth(1)\n                .defaultmodelexpanddepth(1)\n                .defaultmodelrendering(modelrendering.example)\n                .displayrequestduration(false)\n                .docexpansion(docexpansion.none)\n                .filter(false)\n                .maxdisplayedtags(null)\n                .operationssorter(operationssorter.alpha)\n                .showextensions(false)\n                .showcommonextensions(false)\n                .tagssorter(tagssorter.alpha)\n                .supportedsubmitmethods(uiconfiguration.constants.default_submit_methods)\n                .validatorurl(null)\n                .build();\n    }\n\n}\n\n\n\n> uiconfig å¯ééç½®ï¼é»è®¤å¯ä»¥åå»ºã\n\n\n# å¯å¨é¡¹ç®\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: spring boot ::        (v2.3.5.release)\n\n2020-11-09 17:33:54.619  info 132 --- [           main] com.ieooc.demo.swagger.demoapplication   : starting demoapplication on desktop-7v8q19u with pid 132 (d:\\ideaprojects\\springfox-swagger-demo\\target\\classes started by heyuq in d:\\ideaprojects\\springfox-swagger-demo)\n2020-11-09 17:33:54.622  info 132 --- [           main] com.ieooc.demo.swagger.demoapplication   : no active profile set, falling back to default profiles: default\n2020-11-09 17:33:56.474  info 132 --- [           main] o.s.b.w.embedded.tomcat.tomcatwebserver  : tomcat initialized with port(s): 8080 (http)\n2020-11-09 17:33:56.482  info 132 --- [           main] o.apache.catalina.core.standardservice   : starting service [tomcat]\n2020-11-09 17:33:56.483  info 132 --- [           main] org.apache.catalina.core.standardengine  : starting servlet engine: [apache tomcat/9.0.39]\n2020-11-09 17:33:56.657  info 132 --- [           main] o.a.c.c.c.[tomcat].[localhost].[/]       : initializing spring embedded webapplicationcontext\n2020-11-09 17:33:56.657  info 132 --- [           main] w.s.c.servletwebserverapplicationcontext : root webapplicationcontext: initialization completed in 1815 ms\n2020-11-09 17:33:57.170  info 132 --- [           main] o.s.s.concurrent.threadpooltaskexecutor  : initializing executorservice \'applicationtaskexecutor\'\n2020-11-09 17:33:57.390  info 132 --- [           main] o.s.b.w.embedded.tomcat.tomcatwebserver  : tomcat started on port(s): 8080 (http) with context path \'\'\n2020-11-09 17:33:57.672  info 132 --- [           main] com.ieooc.demo.swagger.demoapplication   : started demoapplication in 3.672 seconds (jvm running for 7.904)\n2020-11-09 17:34:17.480  info 132 --- [nio-8080-exec-1] o.a.c.c.c.[tomcat].[localhost].[/]       : initializing spring dispatcherservlet \'dispatcherservlet\'\n2020-11-09 17:34:17.481  info 132 --- [nio-8080-exec-1] o.s.web.servlet.dispatcherservlet        : initializing servlet \'dispatcherservlet\'\n2020-11-09 17:34:17.486  info 132 --- [nio-8080-exec-1] o.s.web.servlet.dispatcherservlet        : completed initialization in 5 ms\n\n\n\n# æ¥çææ\n\næµè§å¨è®¿é®ï¼http://localhost:8080/swagger-ui/index.html\n\n\n\nè³æ­¤ï¼springbootæ´åswagger3.0 å®æã\n\n\n# å¸¸ç¨æ³¨è§£è¯´æ\n\n@api()ï¼æ³¨è§£ç±»ï¼æè¿°controllerçä½ç¨\n\ttags = âæè¿°controllerçä½ç¨â\n@apioperation()ï¼æ³¨è§£æ¹æ³ï¼æè¿°å·ä½æ¥å£çä½ç¨\n\tvalue=âå·ä½è¯´ææ¥å£çä½ç¨â\n    notes="æ¥å£æ¹æ³å¤æ³¨â\n@apiimplicitparams()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ç»è¯·æ±åæ°ï¼å¯ä»¥åå«å¤ä¸ª@apiimplicitparam()\n@apiimplicitparam()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ä¸ªå·ä½çè¯·æ±åæ°\n\tnameï¼è¯·æ±åæ°å\n\tvalueï¼è¯·æ±åæ°æè¿°\n\trequiredï¼æ¯å¦å¿ä¼ \n\tdatatypeï¼åæ°ç±»å\n\tdefaultvalueï¼é»è®¤å¼\n@apiresponses()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ç»httpè¿åå¼ï¼å¯ä»¥åå«å¤ä¸ª@apiresponse()\n@apiresponse()ï¼æ³¨è§£æ¥å£æ¹æ³ï¼æè¿°ä¸ä¸ªhttpååºä¿¡æ¯\n\tcodeï¼httpè¿åå¼\n    messageï¼è¿åä¿¡æ¯\n    responseï¼æåºå¼å¸¸çç±»\n@apimodel()ï¼æ³¨è§£modelï¼æè¿°ååºæ°æ®modelç±»\n@apimodelproperty()ï¼æ³¨è§£å±æ§ï¼æè¿°ååºmodelç±»çå±æ§\n@apiignore()ï¼æ³¨è§£ç±»ï¼è¡¨ç¤ºå¿½ç¥è¿ä¸ªapi\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"axiosä¸­æææ¡£",frontmatter:{title:"axiosä¸­æææ¡£",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/92c82f/"},regularPath:"/21.Simplify/01.Simplify%20Docs/03.axios%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3.html",relativePath:"21.Simplify/01.Simplify Docs/03.axiosä¸­æææ¡£.md",key:"v-31abbd86",path:"/pages/92c82f/",headers:[{level:2,title:"ä»ä¹æ¯ axiosï¼",slug:"ä»ä¹æ¯-axios",normalizedTitle:"ä»ä¹æ¯ axiosï¼",charIndex:69},{level:2,title:"ç¹æ§",slug:"ç¹æ§",normalizedTitle:"ç¹æ§",charIndex:134},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:277},{level:2,title:"æ¡ä¾",slug:"æ¡ä¾",normalizedTitle:"æ¡ä¾",charIndex:427},{level:2,title:"axios API",slug:"axios-api",normalizedTitle:"axios api",charIndex:1310},{level:3,title:"axios(config)",slug:"axios-config",normalizedTitle:"axios(config)",charIndex:1349},{level:3,title:"axios(url[, config])",slug:"axios-url-config",normalizedTitle:"axios(url[, config])",charIndex:1687},{level:2,title:"è¯·æ±æ¹æ³çå«å",slug:"è¯·æ±æ¹æ³çå«å",normalizedTitle:"è¯·æ±æ¹æ³çå«å",charIndex:1756},{level:2,title:"å¹¶å",slug:"å¹¶å",normalizedTitle:"å¹¶å",charIndex:1027},{level:2,title:"åå»ºå®ä¾",slug:"åå»ºå®ä¾",normalizedTitle:"åå»ºå®ä¾",charIndex:2164},{level:2,title:"å®ä¾æ¹æ³",slug:"å®ä¾æ¹æ³",normalizedTitle:"å®ä¾æ¹æ³",charIndex:2363},{level:2,title:"è¯·æ±éç½®",slug:"è¯·æ±éç½®",normalizedTitle:"è¯·æ±éç½®",charIndex:2657},{level:2,title:"ååºç»æ",slug:"ååºç»æ",normalizedTitle:"ååºç»æ",charIndex:6704},{level:2,title:"éç½®é»è®¤å¼",slug:"éç½®é»è®¤å¼",normalizedTitle:"éç½®é»è®¤å¼",charIndex:7505},{level:2,title:"å¨å±ç axios é»è®¤å¼",slug:"å¨å±ç-axios-é»è®¤å¼",normalizedTitle:"å¨å±ç axios é»è®¤å¼",charIndex:7536},{level:2,title:"èªå®ä¹å®ä¾é»è®¤å¼",slug:"èªå®ä¹å®ä¾é»è®¤å¼",normalizedTitle:"èªå®ä¹å®ä¾é»è®¤å¼",charIndex:7752},{level:2,title:"éç½®çä¼åé¡ºåº",slug:"éç½®çä¼åé¡ºåº",normalizedTitle:"éç½®çä¼åé¡ºåº",charIndex:8005},{level:2,title:"æ¦æªå¨",slug:"æ¦æªå¨",normalizedTitle:"æ¦æªå¨",charIndex:8344},{level:2,title:"éè¯¯å¤ç",slug:"éè¯¯å¤ç",normalizedTitle:"éè¯¯å¤ç",charIndex:7490},{level:2,title:"åæ¶",slug:"åæ¶",normalizedTitle:"åæ¶",charIndex:236},{level:2,title:"ä½¿ç¨ application/x-www-form-urlencoded format",slug:"ä½¿ç¨-application-x-www-form-urlencoded-format",normalizedTitle:"ä½¿ç¨ application/x-www-form-urlencoded format",charIndex:10904},{level:3,title:"æµè§å¨",slug:"æµè§å¨",normalizedTitle:"æµè§å¨",charIndex:114},{level:3,title:"Node.js",slug:"node-js",normalizedTitle:"node.js",charIndex:11623},{level:2,title:"Semver",slug:"semver",normalizedTitle:"semver",charIndex:11805},{level:2,title:"Promises",slug:"promises",normalizedTitle:"promises",charIndex:11888},{level:2,title:"TypeScript",slug:"typescript",normalizedTitle:"typescript",charIndex:11972},{level:2,title:"åè®®",slug:"åè®®",normalizedTitle:"åè®®",charIndex:12067}],headersStr:"ä»ä¹æ¯ axiosï¼ ç¹æ§ å®è£ æ¡ä¾ axios API axios(config) axios(url[, config]) è¯·æ±æ¹æ³çå«å å¹¶å åå»ºå®ä¾ å®ä¾æ¹æ³ è¯·æ±éç½® ååºç»æ éç½®é»è®¤å¼ å¨å±ç axios é»è®¤å¼ èªå®ä¹å®ä¾é»è®¤å¼ éç½®çä¼åé¡ºåº æ¦æªå¨ éè¯¯å¤ç åæ¶ ä½¿ç¨ application/x-www-form-urlencoded format æµè§å¨ Node.js Semver Promises TypeScript åè®®",content:"# axiosä¸­æææ¡£\n\næ¬¢è¿ä½¿ç¨ axiosï¼æ¬ææ¡£å°å¸®å©æ¨å¿«éä¸æã(troubleshooting.html) ä¸­çè§£ç­ï¼\n\n\n# ä»ä¹æ¯ axiosï¼\n\nAxios æ¯ä¸ä¸ªåºäº promise ç HTTP åºï¼å¯ä»¥ç¨å¨æµè§å¨å node.js ä¸­ã\n\n\n# ç¹æ§\n\n * ä»æµè§å¨ä¸­åå»º XMLHttpRequests\n * ä» node.js åå»º http è¯·æ±\n * æ¯æ Promise API\n * æ¦æªè¯·æ±åååº\n * è½¬æ¢è¯·æ±æ°æ®åååºæ°æ®\n * åæ¶è¯·æ±\n * èªå¨è½¬æ¢ JSON æ°æ®\n * å®¢æ·ç«¯æ¯æé²å¾¡ XSRF\n\n\n# å®è£\n\nä½¿ç¨ npm:\n\n$ npm install axios\n\n\nä½¿ç¨ bower:\n\n$ bower install axios\n\n\nä½¿ç¨ cdn:\n\n<script src=\"https://unpkg.com/axios/dist/axios.min.js\"><\/script>\n\n\n\n# æ¡ä¾\n\næ§è¡ GET è¯·æ±\n\n// ä¸ºç»å® ID ç user åå»ºè¯·æ±\naxios.get('/user?ID=12345')\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n\n// ä¸é¢çè¯·æ±ä¹å¯ä»¥è¿æ ·å\naxios.get('/user', {\n    params: {\n      ID: 12345\n    }\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n\n\næ§è¡ POST è¯·æ±\n\naxios.post('/user', {\n    firstName: 'Fred',\n    lastName: 'Flintstone'\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n\n\næ§è¡å¤ä¸ªå¹¶åè¯·æ±\n\nfunction getUserAccount() {\n  return axios.get('/user/12345');\n}\n\nfunction getUserPermissions() {\n  return axios.get('/user/12345/permissions');\n}\n\naxios.all([getUserAccount(), getUserPermissions()])\n  .then(axios.spread(function (acct, perms) {\n    // ä¸¤ä¸ªè¯·æ±ç°å¨é½æ§è¡å®æ\n  }));\n\n\n\n# axios API\n\nå¯ä»¥éè¿å axios ä¼ éç¸å³éç½®æ¥åå»ºè¯·æ±\n\n\n# axios(config)\n\n// åé POST è¯·æ±\naxios({\n  method: 'post',\n  url: '/user/12345',\n  data: {\n    firstName: 'Fred',\n    lastName: 'Flintstone'\n  }\n});\n// è·åè¿ç«¯å¾ç\naxios({\n  method:'get',\n  url:'http://bit.ly/2mTM3nY',\n  responseType:'stream'\n})\n  .then(function(response) {\n  response.data.pipe(fs.createWriteStream('ada_lovelace.jpg'))\n});\n\n\n\n# axios(url[, config])\n\n// åé GET è¯·æ±ï¼é»è®¤çæ¹æ³ï¼\naxios('/user/12345');\n\n\n\n# è¯·æ±æ¹æ³çå«å\n\nä¸ºæ¹ä¾¿èµ·è§ï¼ä¸ºæææ¯æçè¯·æ±æ¹æ³æä¾äºå«å\n\n * axios.request(config)\n * axios.get(url[, config])\n * axios.delete(url[, config])\n * axios.head(url[, config])\n * axios.options(url[, config])\n * axios.post(url[, data[, config]])\n * axios.put(url[, data[, config]])\n * axios.patch(url[, data[, config]])\n\næç¤º\n\nå¨ä½¿ç¨å«åæ¹æ³æ¶ï¼ urlãmethodãdata è¿äºå±æ§é½ä¸å¿å¨éç½®ä¸­æå®ã\n\n\n# å¹¶å\n\nå¤çå¹¶åè¯·æ±çå©æå½æ°\n\n * axios.all(iterable)\n * axios.spread(callback)\n\n\n# åå»ºå®ä¾\n\nå¯ä»¥ä½¿ç¨èªå®ä¹éç½®æ°å»ºä¸ä¸ª axios å®ä¾\n\n * axios.create([config])\n\nconst instance = axios.create({\n  baseURL: 'https://some-domain.com/api/',\n  timeout: 1000,\n  headers: {'X-Custom-Header': 'foobar'}\n});\n\n\n\n# å®ä¾æ¹æ³\n\nä»¥ä¸æ¯å¯ç¨çå®ä¾æ¹æ³ãæå®çéç½®å°ä¸å®ä¾çéç½®åå¹¶ã\n\n * axios#request(config)\n * axios#get(url[, config])\n * axios#delete(url[, config])\n * axios#head(url[, config])\n * axios#options(url[, config])\n * axios#post(url[, data[, config]])\n * axios#put(url[, data[, config]])\n * axios#patch(url[, data[, config]])\n\n\n# è¯·æ±éç½®\n\nè¿äºæ¯åå»ºè¯·æ±æ¶å¯ä»¥ç¨çéç½®éé¡¹ãåªæ url æ¯å¿éçãå¦ææ²¡ææå® methodï¼è¯·æ±å°é»è®¤ä½¿ç¨ get æ¹æ³ã\n\n{\n   // `url` æ¯ç¨äºè¯·æ±çæå¡å¨ URL\n  url: '/user',\n\n  // `method` æ¯åå»ºè¯·æ±æ¶ä½¿ç¨çæ¹æ³\n  method: 'get', // default\n\n  // `baseURL` å°èªå¨å å¨ `url` åé¢ï¼é¤é `url` æ¯ä¸ä¸ªç»å¯¹ URLã\n  // å®å¯ä»¥éè¿è®¾ç½®ä¸ä¸ª `baseURL` ä¾¿äºä¸º axios å®ä¾çæ¹æ³ä¼ éç¸å¯¹ URL\n  baseURL: 'https://some-domain.com/api/',\n\n  // `transformRequest` åè®¸å¨åæå¡å¨åéåï¼ä¿®æ¹è¯·æ±æ°æ®\n  // åªè½ç¨å¨ 'PUT', 'POST' å 'PATCH' è¿å ä¸ªè¯·æ±æ¹æ³\n  // åé¢æ°ç»ä¸­çå½æ°å¿é¡»è¿åä¸ä¸ªå­ç¬¦ä¸²ï¼æ ArrayBufferï¼æ Stream\n  transformRequest: [function (data, headers) {\n    // å¯¹ data è¿è¡ä»»æè½¬æ¢å¤ç\n    return data;\n  }],\n\n  // `transformResponse` å¨ä¼ éç» then/catch åï¼åè®¸ä¿®æ¹ååºæ°æ®\n  transformResponse: [function (data) {\n    // å¯¹ data è¿è¡ä»»æè½¬æ¢å¤ç\n    return data;\n  }],\n\n  // `headers` æ¯å³å°è¢«åéçèªå®ä¹è¯·æ±å¤´\n  headers: {'X-Requested-With': 'XMLHttpRequest'},\n\n  // `params` æ¯å³å°ä¸è¯·æ±ä¸èµ·åéç URL åæ°\n  // å¿é¡»æ¯ä¸ä¸ªæ æ ¼å¼å¯¹è±¡(plain object)æ URLSearchParams å¯¹è±¡\n  params: {\n    ID: 12345\n  },\n\n   // `paramsSerializer` æ¯ä¸ä¸ªè´è´£ `params` åºååçå½æ°\n  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)\n  paramsSerializer: function(params) {\n    return Qs.stringify(params, {arrayFormat: 'brackets'})\n  },\n\n  // `data` æ¯ä½ä¸ºè¯·æ±ä¸»ä½è¢«åéçæ°æ®\n  // åªéç¨äºè¿äºè¯·æ±æ¹æ³ 'PUT', 'POST', å 'PATCH'\n  // å¨æ²¡æè®¾ç½® `transformRequest` æ¶ï¼å¿é¡»æ¯ä»¥ä¸ç±»åä¹ä¸ï¼\n  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams\n  // - æµè§å¨ä¸å±ï¼FormData, File, Blob\n  // - Node ä¸å±ï¼ Stream\n  data: {\n    firstName: 'Fred'\n  },\n\n  // `timeout` æå®è¯·æ±è¶æ¶çæ¯«ç§æ°(0 è¡¨ç¤ºæ è¶æ¶æ¶é´)\n  // å¦æè¯·æ±è¯è´¹äºè¶è¿ `timeout` çæ¶é´ï¼è¯·æ±å°è¢«ä¸­æ­\n  timeout: 1000,\n\n   // `withCredentials` è¡¨ç¤ºè·¨åè¯·æ±æ¶æ¯å¦éè¦ä½¿ç¨å­è¯\n  withCredentials: false, // default\n\n  // `adapter` åè®¸èªå®ä¹å¤çè¯·æ±ï¼ä»¥ä½¿æµè¯æ´è½»æ¾\n  // è¿åä¸ä¸ª promise å¹¶åºç¨ä¸ä¸ªææçååº (æ¥é [response docs](#response-api)).\n  adapter: function (config) {\n    /* ... */\n  },\n\n // `auth` è¡¨ç¤ºåºè¯¥ä½¿ç¨ HTTP åºç¡éªè¯ï¼å¹¶æä¾å­æ®\n  // è¿å°è®¾ç½®ä¸ä¸ª `Authorization` å¤´ï¼è¦åæç°æçä»»æä½¿ç¨ `headers` è®¾ç½®çèªå®ä¹ `Authorization`å¤´\n  auth: {\n    username: 'janedoe',\n    password: 's00pers3cret'\n  },\n\n   // `responseType` è¡¨ç¤ºæå¡å¨ååºçæ°æ®ç±»åï¼å¯ä»¥æ¯ 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'\n  responseType: 'json', // default\n\n  // `responseEncoding` indicates encoding to use for decoding responses\n  // Note: Ignored for `responseType` of 'stream' or client-side requests\n  responseEncoding: 'utf8', // default\n\n   // `xsrfCookieName` æ¯ç¨ä½ xsrf token çå¼çcookieçåç§°\n  xsrfCookieName: 'XSRF-TOKEN', // default\n\n  // `xsrfHeaderName` is the name of the http header that carries the xsrf token value\n  xsrfHeaderName: 'X-XSRF-TOKEN', // default\n\n   // `onUploadProgress` åè®¸ä¸ºä¸ä¼ å¤çè¿åº¦äºä»¶\n  onUploadProgress: function (progressEvent) {\n    // Do whatever you want with the native progress event\n  },\n\n  // `onDownloadProgress` åè®¸ä¸ºä¸è½½å¤çè¿åº¦äºä»¶\n  onDownloadProgress: function (progressEvent) {\n    // å¯¹åçè¿åº¦äºä»¶çå¤ç\n  },\n\n   // `maxContentLength` å®ä¹åè®¸çååºåå®¹çæå¤§å°ºå¯¸\n  maxContentLength: 2000,\n\n  // `validateStatus` å®ä¹å¯¹äºç»å®çHTTP ååºç¶æç æ¯ resolve æ reject  promise ãå¦æ `validateStatus` è¿å `true` (æèè®¾ç½®ä¸º `null` æ `undefined`)ï¼promise å°è¢« resolve; å¦åï¼promise å°è¢« rejecte\n  validateStatus: function (status) {\n    return status >= 200 && status < 300; // default\n  },\n\n  // `maxRedirects` å®ä¹å¨ node.js ä¸­ follow çæå¤§éå®åæ°ç®\n  // å¦æè®¾ç½®ä¸º0ï¼å°ä¸ä¼ follow ä»»ä½éå®å\n  maxRedirects: 5, // default\n\n  // `socketPath` defines a UNIX Socket to be used in node.js.\n  // e.g. '/var/run/docker.sock' to send requests to the docker daemon.\n  // Only either `socketPath` or `proxy` can be specified.\n  // If both are specified, `socketPath` is used.\n  socketPath: null, // default\n\n  // `httpAgent` å `httpsAgent` åå«å¨ node.js ä¸­ç¨äºå®ä¹å¨æ§è¡ http å https æ¶ä½¿ç¨çèªå®ä¹ä»£çãåè®¸åè¿æ ·éç½®éé¡¹ï¼\n  // `keepAlive` é»è®¤æ²¡æå¯ç¨\n  httpAgent: new http.Agent({ keepAlive: true }),\n  httpsAgent: new https.Agent({ keepAlive: true }),\n\n  // 'proxy' å®ä¹ä»£çæå¡å¨çä¸»æºåç§°åç«¯å£\n  // `auth` è¡¨ç¤º HTTP åºç¡éªè¯åºå½ç¨äºè¿æ¥ä»£çï¼å¹¶æä¾å­æ®\n  // è¿å°ä¼è®¾ç½®ä¸ä¸ª `Proxy-Authorization` å¤´ï¼è¦åæå·²æçéè¿ä½¿ç¨ `header` è®¾ç½®çèªå®ä¹ `Proxy-Authorization` å¤´ã\n  proxy: {\n    host: '127.0.0.1',\n    port: 9000,\n    auth: {\n      username: 'mikeymike',\n      password: 'rapunz3l'\n    }\n  },\n\n  // `cancelToken` æå®ç¨äºåæ¶è¯·æ±ç cancel token\n  // ï¼æ¥çåé¢ç Cancellation è¿èäºè§£æ´å¤ï¼\n  cancelToken: new CancelToken(function (cancel) {\n  })\n}\n\n\n\n# ååºç»æ\n\næä¸ªè¯·æ±çååºåå«ä»¥ä¸ä¿¡æ¯\n\n{\n  // `data` ç±æå¡å¨æä¾çååº\n  data: {},\n\n  // `status` æ¥èªæå¡å¨ååºç HTTP ç¶æç \n  status: 200,\n\n  // `statusText` æ¥èªæå¡å¨ååºç HTTP ç¶æä¿¡æ¯\n  statusText: 'OK',\n\n  // `headers` æå¡å¨ååºçå¤´\n  headers: {},\n\n   // `config` æ¯ä¸ºè¯·æ±æä¾çéç½®ä¿¡æ¯\n  config: {},\n // 'request'\n  // `request` is the request that generated this response\n  // It is the last ClientRequest instance in node.js (in redirects)\n  // and an XMLHttpRequest instance the browser\n  request: {}\n}\n\n\nä½¿ç¨ then æ¶ï¼ä½ å°æ¥æ¶ä¸é¢è¿æ ·çååº :\n\naxios.get('/user/12345')\n  .then(function(response) {\n    console.log(response.data);\n    console.log(response.status);\n    console.log(response.statusText);\n    console.log(response.headers);\n    console.log(response.config);\n  });\n\n\nå¨ä½¿ç¨ catch æ¶ï¼æä¼ é rejection callback ä½ä¸º then çç¬¬äºä¸ªåæ°æ¶ï¼ååºå¯ä»¥éè¿ error å¯¹è±¡å¯è¢«ä½¿ç¨ï¼æ­£å¦å¨éè¯¯å¤çè¿ä¸èæè®²ã\n\n\n# éç½®é»è®¤å¼\n\nä½ å¯ä»¥æå®å°è¢«ç¨å¨åä¸ªè¯·æ±çéç½®é»è®¤å¼\n\n\n# å¨å±ç axios é»è®¤å¼\n\naxios.defaults.baseURL = 'https://api.example.com';\naxios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n\n\n\n# èªå®ä¹å®ä¾é»è®¤å¼\n\n// Set config defaults when creating the instance\nconst instance = axios.create({\n  baseURL: 'https://api.example.com'\n});\n\n// Alter defaults after instance has been created\ninstance.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n\n\n\n# éç½®çä¼åé¡ºåº\n\néç½®ä¼ä»¥ä¸ä¸ªä¼åé¡ºåºè¿è¡åå¹¶ãè¿ä¸ªé¡ºåºæ¯ï¼å¨ lib/defaults.js æ¾å°çåºçé»è®¤å¼ï¼ç¶åæ¯å®ä¾ç defaults å±æ§ï¼æåæ¯è¯·æ±ç config åæ°ãåèå°ä¼åäºåèãè¿éæ¯ä¸ä¸ªä¾å­ï¼\n\n// ä½¿ç¨ç±åºæä¾çéç½®çé»è®¤å¼æ¥åå»ºå®ä¾\n// æ­¤æ¶è¶æ¶éç½®çé»è®¤å¼æ¯ `0`\nvar instance = axios.create();\n\n// è¦ååºçè¶æ¶é»è®¤å¼\n// ç°å¨ï¼å¨è¶æ¶åï¼ææè¯·æ±é½ä¼ç­å¾ 2.5 ç§\ninstance.defaults.timeout = 2500;\n\n// ä¸ºå·²ç¥éè¦è±è´¹å¾é¿æ¶é´çè¯·æ±è¦åè¶æ¶è®¾ç½®\ninstance.get('/longRequest', {\n  timeout: 5000\n});\n\n\n\n# æ¦æªå¨\n\nå¨è¯·æ±æååºè¢« then æ catch å¤çåæ¦æªå®ä»¬ã\n\n// æ·»å è¯·æ±æ¦æªå¨\naxios.interceptors.request.use(function (config) {\n    // å¨åéè¯·æ±ä¹ååäºä»ä¹\n    return config;\n  }, function (error) {\n    // å¯¹è¯·æ±éè¯¯åäºä»ä¹\n    return Promise.reject(error);\n  });\n\n// æ·»å ååºæ¦æªå¨\naxios.interceptors.response.use(function (response) {\n    // å¯¹ååºæ°æ®åç¹ä»ä¹\n    return response;\n  }, function (error) {\n    // å¯¹ååºéè¯¯åç¹ä»ä¹\n    return Promise.reject(error);\n  });\n\n\nå¦æä½ æ³å¨ç¨åç§»é¤æ¦æªå¨ï¼å¯ä»¥è¿æ ·ï¼\n\nconst myInterceptor = axios.interceptors.request.use(function () {/*...*/});\naxios.interceptors.request.eject(myInterceptor);\n\n\nå¯ä»¥ä¸ºèªå®ä¹ axios å®ä¾æ·»å æ¦æªå¨\n\nconst instance = axios.create();\ninstance.interceptors.request.use(function () {/*...*/});\n\n\n\n# éè¯¯å¤ç\n\naxios.get('/user/12345')\n  .catch(function (error) {\n    if (error.response) {\n      // The request was made and the server responded with a status code\n      // that falls out of the range of 2xx\n      console.log(error.response.data);\n      console.log(error.response.status);\n      console.log(error.response.headers);\n    } else if (error.request) {\n      // The request was made but no response was received\n      // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n      // http.ClientRequest in node.js\n      console.log(error.request);\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      console.log('Error', error.message);\n    }\n    console.log(error.config);\n  });\n\n\nYå¯ä»¥ä½¿ç¨ validateStatus éç½®éé¡¹å®ä¹ä¸ä¸ªèªå®ä¹ HTTP ç¶æç çéè¯¯èå´ã\n\naxios.get('/user/12345', {\n  validateStatus: function (status) {\n    return status < 500; // Reject only if the status code is greater than or equal to 500\n  }\n})\n\n\n\n# åæ¶\n\nä½¿ç¨ cancel token åæ¶è¯·æ±\n\n> Axios ç cancel token API åºäºcancelable promises proposalï¼å®è¿å¤äºç¬¬ä¸é¶æ®µã\n\nå¯ä»¥ä½¿ç¨ CancelToken.source å·¥åæ¹æ³åå»º cancel tokenï¼åè¿æ ·ï¼\n\nconst CancelToken = axios.CancelToken;\nconst source = CancelToken.source();\n\naxios.get('/user/12345', {\n  cancelToken: source.token\n}).catch(function(thrown) {\n  if (axios.isCancel(thrown)) {\n    console.log('Request canceled', thrown.message);\n  } else {\n     // å¤çéè¯¯\n  }\n});\n\naxios.post('/user/12345', {\n  name: 'new name'\n}, {\n  cancelToken: source.token\n})\n\n// åæ¶è¯·æ±ï¼message åæ°æ¯å¯éçï¼\nsource.cancel('Operation canceled by the user.');\n\n\nè¿å¯ä»¥éè¿ä¼ éä¸ä¸ª executor å½æ°å° CancelToken çæé å½æ°æ¥åå»º cancel tokenï¼\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\naxios.get('/user/12345', {\n  cancelToken: new CancelToken(function executor(c) {\n    // executor å½æ°æ¥æ¶ä¸ä¸ª cancel å½æ°ä½ä¸ºåæ°\n    cancel = c;\n  })\n});\n\n// cancel the request\ncancel();\n\n\n> æ³¨æ: å¯ä»¥ä½¿ç¨åä¸ä¸ª cancel token åæ¶å¤ä¸ªè¯·æ±\n\n\n# ä½¿ç¨ application/x-www-form-urlencoded format\n\né»è®¤æåµä¸ï¼axioså°JavaScriptå¯¹è±¡åºååä¸ºJSONã è¦ä»¥application / x-www-form-urlencodedæ ¼å¼åéæ°æ®ï¼æ¨å¯ä»¥ä½¿ç¨ä»¥ä¸éé¡¹ä¹ä¸ã\n\n\n# æµè§å¨\n\nå¨æµè§å¨ä¸­ï¼æ¨å¯ä»¥ä½¿ç¨URLSearchParams APIï¼å¦ä¸æç¤ºï¼\n\nconst params = new URLSearchParams();\nparams.append('param1', 'value1');\nparams.append('param2', 'value2');\naxios.post('/foo', params);\n\n\n> è¯·æ³¨æï¼æææµè§å¨é½ä¸æ¯æURLSearchParamsï¼è¯·åécaniuse.comï¼ï¼ä½å¯ä»¥ä½¿ç¨polyfillï¼ç¡®ä¿å¡«åå¨å±ç¯å¢ï¼ã\n\næèï¼æ¨å¯ä»¥ä½¿ç¨qsåºç¼ç æ°æ®ï¼\n\nconst qs = require('qs');\naxios.post('/foo', qs.stringify({ 'bar': 123 }));\n\n\næèä»¥å¦ä¸ç§æ¹å¼ï¼ES6ï¼ï¼\n\nimport qs from 'qs';\nconst data = { 'bar': 123 };\nconst options = {\n  method: 'POST',\n  headers: { 'content-type': 'application/x-www-form-urlencoded' },\n  data: qs.stringify(data),\n  url,\n};\naxios(options);\n\n\n\n# Node.js\n\nå¨node.jsä¸­ï¼æ¨å¯ä»¥ä½¿ç¨querystringæ¨¡åï¼å¦ä¸æç¤ºï¼\n\nconst querystring = require('querystring');\naxios.post('http://something.com/', querystring.stringify({ foo: 'bar' }));\n\n\næ¨ä¹å¯ä»¥ä½¿ç¨qsåºã\n\n\n# Semver\n\nå¨axiosè¾¾å°1.0çæ¬ä¹åï¼ç ´åæ§æ´æ¹å°ä»¥æ°çæ¬¡è¦çæ¬åå¸ã ä¾å¦0.5.1å0.5.4å°å·æç¸åçAPIï¼ä½0.6.0å°å·æéå¤§ååã\n\n\n# Promises\n\naxios ä¾èµåçç ES6 Promise å®ç°èè¢«æ¯æ. å¦æä½ çç¯å¢ä¸æ¯æ ES6 Promiseï¼ä½ å¯ä»¥ä½¿ç¨ polyfill.\n\n\n# TypeScript\n\naxiosåæ¬TypeScriptå®ä¹ã\n\nimport axios from 'axios';\naxios.get('/user?ID=12345');\n\n\n\n# åè®®\n\nMIT",normalizedContent:"# axiosä¸­æææ¡£\n\næ¬¢è¿ä½¿ç¨ axiosï¼æ¬ææ¡£å°å¸®å©æ¨å¿«éä¸æã(troubleshooting.html) ä¸­çè§£ç­ï¼\n\n\n# ä»ä¹æ¯ axiosï¼\n\naxios æ¯ä¸ä¸ªåºäº promise ç http åºï¼å¯ä»¥ç¨å¨æµè§å¨å node.js ä¸­ã\n\n\n# ç¹æ§\n\n * ä»æµè§å¨ä¸­åå»º xmlhttprequests\n * ä» node.js åå»º http è¯·æ±\n * æ¯æ promise api\n * æ¦æªè¯·æ±åååº\n * è½¬æ¢è¯·æ±æ°æ®åååºæ°æ®\n * åæ¶è¯·æ±\n * èªå¨è½¬æ¢ json æ°æ®\n * å®¢æ·ç«¯æ¯æé²å¾¡ xsrf\n\n\n# å®è£\n\nä½¿ç¨ npm:\n\n$ npm install axios\n\n\nä½¿ç¨ bower:\n\n$ bower install axios\n\n\nä½¿ç¨ cdn:\n\n<script src=\"https://unpkg.com/axios/dist/axios.min.js\"><\/script>\n\n\n\n# æ¡ä¾\n\næ§è¡ get è¯·æ±\n\n// ä¸ºç»å® id ç user åå»ºè¯·æ±\naxios.get('/user?id=12345')\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n\n// ä¸é¢çè¯·æ±ä¹å¯ä»¥è¿æ ·å\naxios.get('/user', {\n    params: {\n      id: 12345\n    }\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n\n\næ§è¡ post è¯·æ±\n\naxios.post('/user', {\n    firstname: 'fred',\n    lastname: 'flintstone'\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n\n\næ§è¡å¤ä¸ªå¹¶åè¯·æ±\n\nfunction getuseraccount() {\n  return axios.get('/user/12345');\n}\n\nfunction getuserpermissions() {\n  return axios.get('/user/12345/permissions');\n}\n\naxios.all([getuseraccount(), getuserpermissions()])\n  .then(axios.spread(function (acct, perms) {\n    // ä¸¤ä¸ªè¯·æ±ç°å¨é½æ§è¡å®æ\n  }));\n\n\n\n# axios api\n\nå¯ä»¥éè¿å axios ä¼ éç¸å³éç½®æ¥åå»ºè¯·æ±\n\n\n# axios(config)\n\n// åé post è¯·æ±\naxios({\n  method: 'post',\n  url: '/user/12345',\n  data: {\n    firstname: 'fred',\n    lastname: 'flintstone'\n  }\n});\n// è·åè¿ç«¯å¾ç\naxios({\n  method:'get',\n  url:'http://bit.ly/2mtm3ny',\n  responsetype:'stream'\n})\n  .then(function(response) {\n  response.data.pipe(fs.createwritestream('ada_lovelace.jpg'))\n});\n\n\n\n# axios(url[, config])\n\n// åé get è¯·æ±ï¼é»è®¤çæ¹æ³ï¼\naxios('/user/12345');\n\n\n\n# è¯·æ±æ¹æ³çå«å\n\nä¸ºæ¹ä¾¿èµ·è§ï¼ä¸ºæææ¯æçè¯·æ±æ¹æ³æä¾äºå«å\n\n * axios.request(config)\n * axios.get(url[, config])\n * axios.delete(url[, config])\n * axios.head(url[, config])\n * axios.options(url[, config])\n * axios.post(url[, data[, config]])\n * axios.put(url[, data[, config]])\n * axios.patch(url[, data[, config]])\n\næç¤º\n\nå¨ä½¿ç¨å«åæ¹æ³æ¶ï¼ urlãmethodãdata è¿äºå±æ§é½ä¸å¿å¨éç½®ä¸­æå®ã\n\n\n# å¹¶å\n\nå¤çå¹¶åè¯·æ±çå©æå½æ°\n\n * axios.all(iterable)\n * axios.spread(callback)\n\n\n# åå»ºå®ä¾\n\nå¯ä»¥ä½¿ç¨èªå®ä¹éç½®æ°å»ºä¸ä¸ª axios å®ä¾\n\n * axios.create([config])\n\nconst instance = axios.create({\n  baseurl: 'https://some-domain.com/api/',\n  timeout: 1000,\n  headers: {'x-custom-header': 'foobar'}\n});\n\n\n\n# å®ä¾æ¹æ³\n\nä»¥ä¸æ¯å¯ç¨çå®ä¾æ¹æ³ãæå®çéç½®å°ä¸å®ä¾çéç½®åå¹¶ã\n\n * axios#request(config)\n * axios#get(url[, config])\n * axios#delete(url[, config])\n * axios#head(url[, config])\n * axios#options(url[, config])\n * axios#post(url[, data[, config]])\n * axios#put(url[, data[, config]])\n * axios#patch(url[, data[, config]])\n\n\n# è¯·æ±éç½®\n\nè¿äºæ¯åå»ºè¯·æ±æ¶å¯ä»¥ç¨çéç½®éé¡¹ãåªæ url æ¯å¿éçãå¦ææ²¡ææå® methodï¼è¯·æ±å°é»è®¤ä½¿ç¨ get æ¹æ³ã\n\n{\n   // `url` æ¯ç¨äºè¯·æ±çæå¡å¨ url\n  url: '/user',\n\n  // `method` æ¯åå»ºè¯·æ±æ¶ä½¿ç¨çæ¹æ³\n  method: 'get', // default\n\n  // `baseurl` å°èªå¨å å¨ `url` åé¢ï¼é¤é `url` æ¯ä¸ä¸ªç»å¯¹ urlã\n  // å®å¯ä»¥éè¿è®¾ç½®ä¸ä¸ª `baseurl` ä¾¿äºä¸º axios å®ä¾çæ¹æ³ä¼ éç¸å¯¹ url\n  baseurl: 'https://some-domain.com/api/',\n\n  // `transformrequest` åè®¸å¨åæå¡å¨åéåï¼ä¿®æ¹è¯·æ±æ°æ®\n  // åªè½ç¨å¨ 'put', 'post' å 'patch' è¿å ä¸ªè¯·æ±æ¹æ³\n  // åé¢æ°ç»ä¸­çå½æ°å¿é¡»è¿åä¸ä¸ªå­ç¬¦ä¸²ï¼æ arraybufferï¼æ stream\n  transformrequest: [function (data, headers) {\n    // å¯¹ data è¿è¡ä»»æè½¬æ¢å¤ç\n    return data;\n  }],\n\n  // `transformresponse` å¨ä¼ éç» then/catch åï¼åè®¸ä¿®æ¹ååºæ°æ®\n  transformresponse: [function (data) {\n    // å¯¹ data è¿è¡ä»»æè½¬æ¢å¤ç\n    return data;\n  }],\n\n  // `headers` æ¯å³å°è¢«åéçèªå®ä¹è¯·æ±å¤´\n  headers: {'x-requested-with': 'xmlhttprequest'},\n\n  // `params` æ¯å³å°ä¸è¯·æ±ä¸èµ·åéç url åæ°\n  // å¿é¡»æ¯ä¸ä¸ªæ æ ¼å¼å¯¹è±¡(plain object)æ urlsearchparams å¯¹è±¡\n  params: {\n    id: 12345\n  },\n\n   // `paramsserializer` æ¯ä¸ä¸ªè´è´£ `params` åºååçå½æ°\n  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)\n  paramsserializer: function(params) {\n    return qs.stringify(params, {arrayformat: 'brackets'})\n  },\n\n  // `data` æ¯ä½ä¸ºè¯·æ±ä¸»ä½è¢«åéçæ°æ®\n  // åªéç¨äºè¿äºè¯·æ±æ¹æ³ 'put', 'post', å 'patch'\n  // å¨æ²¡æè®¾ç½® `transformrequest` æ¶ï¼å¿é¡»æ¯ä»¥ä¸ç±»åä¹ä¸ï¼\n  // - string, plain object, arraybuffer, arraybufferview, urlsearchparams\n  // - æµè§å¨ä¸å±ï¼formdata, file, blob\n  // - node ä¸å±ï¼ stream\n  data: {\n    firstname: 'fred'\n  },\n\n  // `timeout` æå®è¯·æ±è¶æ¶çæ¯«ç§æ°(0 è¡¨ç¤ºæ è¶æ¶æ¶é´)\n  // å¦æè¯·æ±è¯è´¹äºè¶è¿ `timeout` çæ¶é´ï¼è¯·æ±å°è¢«ä¸­æ­\n  timeout: 1000,\n\n   // `withcredentials` è¡¨ç¤ºè·¨åè¯·æ±æ¶æ¯å¦éè¦ä½¿ç¨å­è¯\n  withcredentials: false, // default\n\n  // `adapter` åè®¸èªå®ä¹å¤çè¯·æ±ï¼ä»¥ä½¿æµè¯æ´è½»æ¾\n  // è¿åä¸ä¸ª promise å¹¶åºç¨ä¸ä¸ªææçååº (æ¥é [response docs](#response-api)).\n  adapter: function (config) {\n    /* ... */\n  },\n\n // `auth` è¡¨ç¤ºåºè¯¥ä½¿ç¨ http åºç¡éªè¯ï¼å¹¶æä¾å­æ®\n  // è¿å°è®¾ç½®ä¸ä¸ª `authorization` å¤´ï¼è¦åæç°æçä»»æä½¿ç¨ `headers` è®¾ç½®çèªå®ä¹ `authorization`å¤´\n  auth: {\n    username: 'janedoe',\n    password: 's00pers3cret'\n  },\n\n   // `responsetype` è¡¨ç¤ºæå¡å¨ååºçæ°æ®ç±»åï¼å¯ä»¥æ¯ 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'\n  responsetype: 'json', // default\n\n  // `responseencoding` indicates encoding to use for decoding responses\n  // note: ignored for `responsetype` of 'stream' or client-side requests\n  responseencoding: 'utf8', // default\n\n   // `xsrfcookiename` æ¯ç¨ä½ xsrf token çå¼çcookieçåç§°\n  xsrfcookiename: 'xsrf-token', // default\n\n  // `xsrfheadername` is the name of the http header that carries the xsrf token value\n  xsrfheadername: 'x-xsrf-token', // default\n\n   // `onuploadprogress` åè®¸ä¸ºä¸ä¼ å¤çè¿åº¦äºä»¶\n  onuploadprogress: function (progressevent) {\n    // do whatever you want with the native progress event\n  },\n\n  // `ondownloadprogress` åè®¸ä¸ºä¸è½½å¤çè¿åº¦äºä»¶\n  ondownloadprogress: function (progressevent) {\n    // å¯¹åçè¿åº¦äºä»¶çå¤ç\n  },\n\n   // `maxcontentlength` å®ä¹åè®¸çååºåå®¹çæå¤§å°ºå¯¸\n  maxcontentlength: 2000,\n\n  // `validatestatus` å®ä¹å¯¹äºç»å®çhttp ååºç¶æç æ¯ resolve æ reject  promise ãå¦æ `validatestatus` è¿å `true` (æèè®¾ç½®ä¸º `null` æ `undefined`)ï¼promise å°è¢« resolve; å¦åï¼promise å°è¢« rejecte\n  validatestatus: function (status) {\n    return status >= 200 && status < 300; // default\n  },\n\n  // `maxredirects` å®ä¹å¨ node.js ä¸­ follow çæå¤§éå®åæ°ç®\n  // å¦æè®¾ç½®ä¸º0ï¼å°ä¸ä¼ follow ä»»ä½éå®å\n  maxredirects: 5, // default\n\n  // `socketpath` defines a unix socket to be used in node.js.\n  // e.g. '/var/run/docker.sock' to send requests to the docker daemon.\n  // only either `socketpath` or `proxy` can be specified.\n  // if both are specified, `socketpath` is used.\n  socketpath: null, // default\n\n  // `httpagent` å `httpsagent` åå«å¨ node.js ä¸­ç¨äºå®ä¹å¨æ§è¡ http å https æ¶ä½¿ç¨çèªå®ä¹ä»£çãåè®¸åè¿æ ·éç½®éé¡¹ï¼\n  // `keepalive` é»è®¤æ²¡æå¯ç¨\n  httpagent: new http.agent({ keepalive: true }),\n  httpsagent: new https.agent({ keepalive: true }),\n\n  // 'proxy' å®ä¹ä»£çæå¡å¨çä¸»æºåç§°åç«¯å£\n  // `auth` è¡¨ç¤º http åºç¡éªè¯åºå½ç¨äºè¿æ¥ä»£çï¼å¹¶æä¾å­æ®\n  // è¿å°ä¼è®¾ç½®ä¸ä¸ª `proxy-authorization` å¤´ï¼è¦åæå·²æçéè¿ä½¿ç¨ `header` è®¾ç½®çèªå®ä¹ `proxy-authorization` å¤´ã\n  proxy: {\n    host: '127.0.0.1',\n    port: 9000,\n    auth: {\n      username: 'mikeymike',\n      password: 'rapunz3l'\n    }\n  },\n\n  // `canceltoken` æå®ç¨äºåæ¶è¯·æ±ç cancel token\n  // ï¼æ¥çåé¢ç cancellation è¿èäºè§£æ´å¤ï¼\n  canceltoken: new canceltoken(function (cancel) {\n  })\n}\n\n\n\n# ååºç»æ\n\næä¸ªè¯·æ±çååºåå«ä»¥ä¸ä¿¡æ¯\n\n{\n  // `data` ç±æå¡å¨æä¾çååº\n  data: {},\n\n  // `status` æ¥èªæå¡å¨ååºç http ç¶æç \n  status: 200,\n\n  // `statustext` æ¥èªæå¡å¨ååºç http ç¶æä¿¡æ¯\n  statustext: 'ok',\n\n  // `headers` æå¡å¨ååºçå¤´\n  headers: {},\n\n   // `config` æ¯ä¸ºè¯·æ±æä¾çéç½®ä¿¡æ¯\n  config: {},\n // 'request'\n  // `request` is the request that generated this response\n  // it is the last clientrequest instance in node.js (in redirects)\n  // and an xmlhttprequest instance the browser\n  request: {}\n}\n\n\nä½¿ç¨ then æ¶ï¼ä½ å°æ¥æ¶ä¸é¢è¿æ ·çååº :\n\naxios.get('/user/12345')\n  .then(function(response) {\n    console.log(response.data);\n    console.log(response.status);\n    console.log(response.statustext);\n    console.log(response.headers);\n    console.log(response.config);\n  });\n\n\nå¨ä½¿ç¨ catch æ¶ï¼æä¼ é rejection callback ä½ä¸º then çç¬¬äºä¸ªåæ°æ¶ï¼ååºå¯ä»¥éè¿ error å¯¹è±¡å¯è¢«ä½¿ç¨ï¼æ­£å¦å¨éè¯¯å¤çè¿ä¸èæè®²ã\n\n\n# éç½®é»è®¤å¼\n\nä½ å¯ä»¥æå®å°è¢«ç¨å¨åä¸ªè¯·æ±çéç½®é»è®¤å¼\n\n\n# å¨å±ç axios é»è®¤å¼\n\naxios.defaults.baseurl = 'https://api.example.com';\naxios.defaults.headers.common['authorization'] = auth_token;\naxios.defaults.headers.post['content-type'] = 'application/x-www-form-urlencoded';\n\n\n\n# èªå®ä¹å®ä¾é»è®¤å¼\n\n// set config defaults when creating the instance\nconst instance = axios.create({\n  baseurl: 'https://api.example.com'\n});\n\n// alter defaults after instance has been created\ninstance.defaults.headers.common['authorization'] = auth_token;\n\n\n\n# éç½®çä¼åé¡ºåº\n\néç½®ä¼ä»¥ä¸ä¸ªä¼åé¡ºåºè¿è¡åå¹¶ãè¿ä¸ªé¡ºåºæ¯ï¼å¨ lib/defaults.js æ¾å°çåºçé»è®¤å¼ï¼ç¶åæ¯å®ä¾ç defaults å±æ§ï¼æåæ¯è¯·æ±ç config åæ°ãåèå°ä¼åäºåèãè¿éæ¯ä¸ä¸ªä¾å­ï¼\n\n// ä½¿ç¨ç±åºæä¾çéç½®çé»è®¤å¼æ¥åå»ºå®ä¾\n// æ­¤æ¶è¶æ¶éç½®çé»è®¤å¼æ¯ `0`\nvar instance = axios.create();\n\n// è¦ååºçè¶æ¶é»è®¤å¼\n// ç°å¨ï¼å¨è¶æ¶åï¼ææè¯·æ±é½ä¼ç­å¾ 2.5 ç§\ninstance.defaults.timeout = 2500;\n\n// ä¸ºå·²ç¥éè¦è±è´¹å¾é¿æ¶é´çè¯·æ±è¦åè¶æ¶è®¾ç½®\ninstance.get('/longrequest', {\n  timeout: 5000\n});\n\n\n\n# æ¦æªå¨\n\nå¨è¯·æ±æååºè¢« then æ catch å¤çåæ¦æªå®ä»¬ã\n\n// æ·»å è¯·æ±æ¦æªå¨\naxios.interceptors.request.use(function (config) {\n    // å¨åéè¯·æ±ä¹ååäºä»ä¹\n    return config;\n  }, function (error) {\n    // å¯¹è¯·æ±éè¯¯åäºä»ä¹\n    return promise.reject(error);\n  });\n\n// æ·»å ååºæ¦æªå¨\naxios.interceptors.response.use(function (response) {\n    // å¯¹ååºæ°æ®åç¹ä»ä¹\n    return response;\n  }, function (error) {\n    // å¯¹ååºéè¯¯åç¹ä»ä¹\n    return promise.reject(error);\n  });\n\n\nå¦æä½ æ³å¨ç¨åç§»é¤æ¦æªå¨ï¼å¯ä»¥è¿æ ·ï¼\n\nconst myinterceptor = axios.interceptors.request.use(function () {/*...*/});\naxios.interceptors.request.eject(myinterceptor);\n\n\nå¯ä»¥ä¸ºèªå®ä¹ axios å®ä¾æ·»å æ¦æªå¨\n\nconst instance = axios.create();\ninstance.interceptors.request.use(function () {/*...*/});\n\n\n\n# éè¯¯å¤ç\n\naxios.get('/user/12345')\n  .catch(function (error) {\n    if (error.response) {\n      // the request was made and the server responded with a status code\n      // that falls out of the range of 2xx\n      console.log(error.response.data);\n      console.log(error.response.status);\n      console.log(error.response.headers);\n    } else if (error.request) {\n      // the request was made but no response was received\n      // `error.request` is an instance of xmlhttprequest in the browser and an instance of\n      // http.clientrequest in node.js\n      console.log(error.request);\n    } else {\n      // something happened in setting up the request that triggered an error\n      console.log('error', error.message);\n    }\n    console.log(error.config);\n  });\n\n\nyå¯ä»¥ä½¿ç¨ validatestatus éç½®éé¡¹å®ä¹ä¸ä¸ªèªå®ä¹ http ç¶æç çéè¯¯èå´ã\n\naxios.get('/user/12345', {\n  validatestatus: function (status) {\n    return status < 500; // reject only if the status code is greater than or equal to 500\n  }\n})\n\n\n\n# åæ¶\n\nä½¿ç¨ cancel token åæ¶è¯·æ±\n\n> axios ç cancel token api åºäºcancelable promises proposalï¼å®è¿å¤äºç¬¬ä¸é¶æ®µã\n\nå¯ä»¥ä½¿ç¨ canceltoken.source å·¥åæ¹æ³åå»º cancel tokenï¼åè¿æ ·ï¼\n\nconst canceltoken = axios.canceltoken;\nconst source = canceltoken.source();\n\naxios.get('/user/12345', {\n  canceltoken: source.token\n}).catch(function(thrown) {\n  if (axios.iscancel(thrown)) {\n    console.log('request canceled', thrown.message);\n  } else {\n     // å¤çéè¯¯\n  }\n});\n\naxios.post('/user/12345', {\n  name: 'new name'\n}, {\n  canceltoken: source.token\n})\n\n// åæ¶è¯·æ±ï¼message åæ°æ¯å¯éçï¼\nsource.cancel('operation canceled by the user.');\n\n\nè¿å¯ä»¥éè¿ä¼ éä¸ä¸ª executor å½æ°å° canceltoken çæé å½æ°æ¥åå»º cancel tokenï¼\n\nconst canceltoken = axios.canceltoken;\nlet cancel;\n\naxios.get('/user/12345', {\n  canceltoken: new canceltoken(function executor(c) {\n    // executor å½æ°æ¥æ¶ä¸ä¸ª cancel å½æ°ä½ä¸ºåæ°\n    cancel = c;\n  })\n});\n\n// cancel the request\ncancel();\n\n\n> æ³¨æ: å¯ä»¥ä½¿ç¨åä¸ä¸ª cancel token åæ¶å¤ä¸ªè¯·æ±\n\n\n# ä½¿ç¨ application/x-www-form-urlencoded format\n\né»è®¤æåµä¸ï¼axioså°javascriptå¯¹è±¡åºååä¸ºjsonã è¦ä»¥application / x-www-form-urlencodedæ ¼å¼åéæ°æ®ï¼æ¨å¯ä»¥ä½¿ç¨ä»¥ä¸éé¡¹ä¹ä¸ã\n\n\n# æµè§å¨\n\nå¨æµè§å¨ä¸­ï¼æ¨å¯ä»¥ä½¿ç¨urlsearchparams apiï¼å¦ä¸æç¤ºï¼\n\nconst params = new urlsearchparams();\nparams.append('param1', 'value1');\nparams.append('param2', 'value2');\naxios.post('/foo', params);\n\n\n> è¯·æ³¨æï¼æææµè§å¨é½ä¸æ¯æurlsearchparamsï¼è¯·åécaniuse.comï¼ï¼ä½å¯ä»¥ä½¿ç¨polyfillï¼ç¡®ä¿å¡«åå¨å±ç¯å¢ï¼ã\n\næèï¼æ¨å¯ä»¥ä½¿ç¨qsåºç¼ç æ°æ®ï¼\n\nconst qs = require('qs');\naxios.post('/foo', qs.stringify({ 'bar': 123 }));\n\n\næèä»¥å¦ä¸ç§æ¹å¼ï¼es6ï¼ï¼\n\nimport qs from 'qs';\nconst data = { 'bar': 123 };\nconst options = {\n  method: 'post',\n  headers: { 'content-type': 'application/x-www-form-urlencoded' },\n  data: qs.stringify(data),\n  url,\n};\naxios(options);\n\n\n\n# node.js\n\nå¨node.jsä¸­ï¼æ¨å¯ä»¥ä½¿ç¨querystringæ¨¡åï¼å¦ä¸æç¤ºï¼\n\nconst querystring = require('querystring');\naxios.post('http://something.com/', querystring.stringify({ foo: 'bar' }));\n\n\næ¨ä¹å¯ä»¥ä½¿ç¨qsåºã\n\n\n# semver\n\nå¨axiosè¾¾å°1.0çæ¬ä¹åï¼ç ´åæ§æ´æ¹å°ä»¥æ°çæ¬¡è¦çæ¬åå¸ã ä¾å¦0.5.1å0.5.4å°å·æç¸åçapiï¼ä½0.6.0å°å·æéå¤§ååã\n\n\n# promises\n\naxios ä¾èµåçç es6 promise å®ç°èè¢«æ¯æ. å¦æä½ çç¯å¢ä¸æ¯æ es6 promiseï¼ä½ å¯ä»¥ä½¿ç¨ polyfill.\n\n\n# typescript\n\naxiosåæ¬typescriptå®ä¹ã\n\nimport axios from 'axios';\naxios.get('/user?id=12345');\n\n\n\n# åè®®\n\nmit",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"vue-axios",frontmatter:{title:"vue-axios",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/305234/"},regularPath:"/21.Simplify/01.Simplify%20Docs/04.vue-axios.html",relativePath:"21.Simplify/01.Simplify Docs/04.vue-axios.md",key:"v-77f35f9e",path:"/pages/305234/",headers:[{level:2,title:"å®è£:",slug:"å®è£",normalizedTitle:"å®è£:",charIndex:31},{level:3,title:"CommonJS:",slug:"commonjs",normalizedTitle:"commonjs:",charIndex:39},{level:3,title:"Script:",slug:"script",normalizedTitle:"script:",charIndex:225},{level:2,title:"Usage:",slug:"usage",normalizedTitle:"usage:",charIndex:280}],headersStr:"å®è£: CommonJS: Script: Usage:",content:"# vue-axios\n\nåºäºvuejs çè½»åº¦å°è£\n\n\n# å®è£:\n\n\n# CommonJS:\n\nnpm install --save axios vue-axios\n\n\nå°ä¸é¢ä»£ç å å¥å¥å£æä»¶:\n\nimport Vue from 'vue'\nimport axios from 'axios'\nimport VueAxios from 'docs/zh/simplify/1140'\n\nVue.use(VueAxios, axios)\n\n\n\n# Script:\n\næç§è¿ä¸ªé¡ºåºåå«å¼å¥è¿ä¸ä¸ªæä»¶ï¼ vue, axios and vue-axios\n\n\n# Usage:\n\nThis wrapper bind axios to Vue or this if youâre using single file component.\n\nä½ å¯ä»¥æç§ä»¥ä¸æ¹å¼ä½¿ç¨:\n\nVue.axios.get(api).then((response) => {\n  console.log(response.data)\n})\n\nthis.axios.get(api).then((response) => {\n  console.log(response.data)\n})\n\nthis.$http.get(api).then((response) => {\n  console.log(response.data)\n})\n",normalizedContent:"# vue-axios\n\nåºäºvuejs çè½»åº¦å°è£\n\n\n# å®è£:\n\n\n# commonjs:\n\nnpm install --save axios vue-axios\n\n\nå°ä¸é¢ä»£ç å å¥å¥å£æä»¶:\n\nimport vue from 'vue'\nimport axios from 'axios'\nimport vueaxios from 'docs/zh/simplify/1140'\n\nvue.use(vueaxios, axios)\n\n\n\n# script:\n\næç§è¿ä¸ªé¡ºåºåå«å¼å¥è¿ä¸ä¸ªæä»¶ï¼ vue, axios and vue-axios\n\n\n# usage:\n\nthis wrapper bind axios to vue or this if youâre using single file component.\n\nä½ å¯ä»¥æç§ä»¥ä¸æ¹å¼ä½¿ç¨:\n\nvue.axios.get(api).then((response) => {\n  console.log(response.data)\n})\n\nthis.axios.get(api).then((response) => {\n  console.log(response.data)\n})\n\nthis.$http.get(api).then((response) => {\n  console.log(response.data)\n})\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå",frontmatter:{title:"èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/46a509/"},regularPath:"/21.Simplify/01.Simplify%20Docs/06.%E8%87%AA%E5%B7%B1%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AAjava11%E7%9A%84docker%E9%95%9C%E5%83%8F.html",relativePath:"21.Simplify/01.Simplify Docs/06.èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå.md",key:"v-6de74afa",path:"/pages/46a509/",headers:[{level:2,title:"èµæºåå¤",slug:"èµæºåå¤",normalizedTitle:"èµæºåå¤",charIndex:80},{level:3,title:"ä¸è½½java11çjdk",slug:"ä¸è½½java11çjdk",normalizedTitle:"ä¸è½½java11çjdk",charIndex:89},{level:2,title:"åå»ºDockerfileæä»¶",slug:"åå»ºdockerfileæä»¶",normalizedTitle:"åå»ºdockerfileæä»¶",charIndex:229},{level:2,title:"æå»ºéå(docker build)",slug:"æå»ºéå-docker-build",normalizedTitle:"æå»ºéå(docker build)",charIndex:832},{level:2,title:"æ¨éå°è¿ç¨ä»åº",slug:"æ¨éå°è¿ç¨ä»åº",normalizedTitle:"æ¨éå°è¿ç¨ä»åº",charIndex:2457},{level:2,title:"æ¨éè³æ¬å°ç§æharbor",slug:"æ¨éè³æ¬å°ç§æharbor",normalizedTitle:"æ¨éè³æ¬å°ç§æharbor",charIndex:2553},{level:2,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:70}],headersStr:"èµæºåå¤ ä¸è½½java11çjdk åå»ºDockerfileæä»¶ æå»ºéå(docker build) æ¨éå°è¿ç¨ä»åº æ¨éè³æ¬å°ç§æharbor æµè¯",content:"# èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå\n\næç¤º\n\næ¬æç¨åºäºubuntuå®æ¹éåï¼å¶ä½java11çdockeréåï¼ä»ä¾ä¸ªäººå­¦ä¹ åæµè¯ä½¿ç¨ã\n\n\n# èµæºåå¤\n\n\n# ä¸è½½java11çjdk\n\nä¸è½½å°åï¼https://www.oracle.com/java/technologies/javase-jdk11-downloads.html\n\néæ©linux-64ççæ¬ï¼jdk-11.0.11_linux-x64_bin.tar.gz\n\n\n# åå»ºDockerfileæä»¶\n\næä»¶åå®¹å¦ä¸ï¼\n\nFROM ubuntu:focal\n\nLABEL maintainer=\"info@ieooc.com\"\n\nADD jdk-11.0.11_linux-x64_bin.tar.gz /usr/local\n\n## è®¾ç½®æ¶åº\nRUN sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list \\\n          && apt-get update \\\n          && ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone \\\n          && apt-get install tzdata \\ \n          && apt-get clean \\\n          && apt-get autoclean \\\n          && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n## è®¾ç½®JAVAç¯å¢åé\nENV JAVA_HOME=/usr/local/jdk-11.0.11\nENV PATH=.:$JAVA_HOME/bin:$PATH\n\nCMD [\"/bin/bash\"]\n\n\n\n# æå»ºéå(docker build)\n\næè¿éjdk-11.0.11_linux-x64_bin.tar.gz åDockerfileæ¾å¨åä¸ä¸ªç®å½ä¸é¢çï¼ç´æ¥ç¨docker buildæå®å½åè·¯å¾å³å¯\n\ndocker build -t ä»åºè·¯å¾xxx/java:11 .\n\n\nä¾å¦ï¼\n\n$ docker build -t ieooc/java:11-jdk .\n[+] Building 31.3s (8/8) FINISHED\n => [internal] load build definition from Dockerfile                       0.1s\n => => transferring dockerfile: 684B                                       0.0s\n => [internal] load .dockerignore                                          0.0s\n => => transferring context: 2B                                            0.0s\n => [internal] load metadata for docker.io/library/ubuntu:focal            0.0s\n => [internal] load build context                                          6.7s\n => => transferring context: 181.76MB                                      6.7s\n => [1/3] FROM docker.io/library/ubuntu:focal                              0.1s\n => => resolve docker.io/library/ubuntu:focal                              0.0s\n => [2/3] ADD jdk-11.0.11_linux-x64_bin.tar.gz /usr/local                  5.3s\n => [3/3] RUN sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/ap  17.1s\n => exporting to image                                                     2.0s\n => => exporting layers                                                    2.0s\n => => writing image sha256:a1acc660560e92203cca1ecdcc4ff1fd88098e8f1133a  0.0s\n => => naming to docker.io/ieooc/java:11-jdk                               0.0s\n\n\næ¥çæå»ºç»æï¼\n\n$ docker images\nREPOSITORY          TAG        IMAGE ID       CREATED              SIZE\nieooc/java          11-jdk     a1acc660560e   About a minute ago   383MB\n\n\næ³¨æ\n\nåé¢ç.è¡¨ç¤ºå½åè·¯å¾ï¼å¦æä¸æ¯å½åè·¯å¾éè¦ç¨-fæå®\n\n\n# æ¨éå°è¿ç¨ä»åº\n\nåé¢å¦æ-tæå®äºä»åºçè·¯å¾ï¼åç´æ¥ä½¿ç¨docker pushå³å¯ ï¼å¦åç¨docker tag\n\n$ docker push ieooc/java:11-jdk\n\n\n\n# æ¨éè³æ¬å°ç§æharbor\n\néæ°ætag\n\n$ docker tag ieooc/java:11-jdk harbor.ieooc.com/library/java:11-jdk\n\n\nå¼å§æ¨é\n\n$ docker push harbor.ieooc.com/library/java:11-jdk\n\n\n\n# æµè¯\n\nï¼1ï¼æµè¯ubuntuæ¶åºï¼è¿å¥å®¹å¨è¾å¥date\n\nï¼2ï¼æµè¯javaç¯å¢ï¼è¿å¥å®¹å¨è¾å¥java -version\n\nï¼3ï¼æµè¯jdkæ¶åºï¼ç¼åä¸ä¸ª.javaæä»¶ï¼éé¢æå°LocalDateTimeæå°æ¶é´",normalizedContent:"# èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå\n\næç¤º\n\næ¬æç¨åºäºubuntuå®æ¹éåï¼å¶ä½java11çdockeréåï¼ä»ä¾ä¸ªäººå­¦ä¹ åæµè¯ä½¿ç¨ã\n\n\n# èµæºåå¤\n\n\n# ä¸è½½java11çjdk\n\nä¸è½½å°åï¼https://www.oracle.com/java/technologies/javase-jdk11-downloads.html\n\néæ©linux-64ççæ¬ï¼jdk-11.0.11_linux-x64_bin.tar.gz\n\n\n# åå»ºdockerfileæä»¶\n\næä»¶åå®¹å¦ä¸ï¼\n\nfrom ubuntu:focal\n\nlabel maintainer=\"info@ieooc.com\"\n\nadd jdk-11.0.11_linux-x64_bin.tar.gz /usr/local\n\n## è®¾ç½®æ¶åº\nrun sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list \\\n          && apt-get update \\\n          && ln -snf /usr/share/zoneinfo/$tz /etc/localtime && echo $tz > /etc/timezone \\\n          && apt-get install tzdata \\ \n          && apt-get clean \\\n          && apt-get autoclean \\\n          && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n## è®¾ç½®javaç¯å¢åé\nenv java_home=/usr/local/jdk-11.0.11\nenv path=.:$java_home/bin:$path\n\ncmd [\"/bin/bash\"]\n\n\n\n# æå»ºéå(docker build)\n\næè¿éjdk-11.0.11_linux-x64_bin.tar.gz ådockerfileæ¾å¨åä¸ä¸ªç®å½ä¸é¢çï¼ç´æ¥ç¨docker buildæå®å½åè·¯å¾å³å¯\n\ndocker build -t ä»åºè·¯å¾xxx/java:11 .\n\n\nä¾å¦ï¼\n\n$ docker build -t ieooc/java:11-jdk .\n[+] building 31.3s (8/8) finished\n => [internal] load build definition from dockerfile                       0.1s\n => => transferring dockerfile: 684b                                       0.0s\n => [internal] load .dockerignore                                          0.0s\n => => transferring context: 2b                                            0.0s\n => [internal] load metadata for docker.io/library/ubuntu:focal            0.0s\n => [internal] load build context                                          6.7s\n => => transferring context: 181.76mb                                      6.7s\n => [1/3] from docker.io/library/ubuntu:focal                              0.1s\n => => resolve docker.io/library/ubuntu:focal                              0.0s\n => [2/3] add jdk-11.0.11_linux-x64_bin.tar.gz /usr/local                  5.3s\n => [3/3] run sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/ap  17.1s\n => exporting to image                                                     2.0s\n => => exporting layers                                                    2.0s\n => => writing image sha256:a1acc660560e92203cca1ecdcc4ff1fd88098e8f1133a  0.0s\n => => naming to docker.io/ieooc/java:11-jdk                               0.0s\n\n\næ¥çæå»ºç»æï¼\n\n$ docker images\nrepository          tag        image id       created              size\nieooc/java          11-jdk     a1acc660560e   about a minute ago   383mb\n\n\næ³¨æ\n\nåé¢ç.è¡¨ç¤ºå½åè·¯å¾ï¼å¦æä¸æ¯å½åè·¯å¾éè¦ç¨-fæå®\n\n\n# æ¨éå°è¿ç¨ä»åº\n\nåé¢å¦æ-tæå®äºä»åºçè·¯å¾ï¼åç´æ¥ä½¿ç¨docker pushå³å¯ ï¼å¦åç¨docker tag\n\n$ docker push ieooc/java:11-jdk\n\n\n\n# æ¨éè³æ¬å°ç§æharbor\n\néæ°ætag\n\n$ docker tag ieooc/java:11-jdk harbor.ieooc.com/library/java:11-jdk\n\n\nå¼å§æ¨é\n\n$ docker push harbor.ieooc.com/library/java:11-jdk\n\n\n\n# æµè¯\n\nï¼1ï¼æµè¯ubuntuæ¶åºï¼è¿å¥å®¹å¨è¾å¥date\n\nï¼2ï¼æµè¯javaç¯å¢ï¼è¿å¥å®¹å¨è¾å¥java -version\n\nï¼3ï¼æµè¯jdkæ¶åºï¼ç¼åä¸ä¸ª.javaæä»¶ï¼éé¢æå°localdatetimeæå°æ¶é´",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"ä¼åDockerä¸­çSpring Bootåºç¨",frontmatter:{title:"ä¼åDockerä¸­çSpring Bootåºç¨",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/59f664/"},regularPath:"/21.Simplify/01.Simplify%20Docs/05.%E4%BC%98%E5%8C%96Docker%E4%B8%AD%E7%9A%84Spring%20Boot%E5%BA%94%E7%94%A8.html",relativePath:"21.Simplify/01.Simplify Docs/05.ä¼åDockerä¸­çSpring Bootåºç¨.md",key:"v-4c1cfbd2",path:"/pages/59f664/",headers:[{level:2,title:"Dockerå³é®æ¦å¿µ",slug:"dockerå³é®æ¦å¿µ",normalizedTitle:"dockerå³é®æ¦å¿µ",charIndex:335},{level:2,title:"éåå±åå®¹å¾éè¦",slug:"éåå±åå®¹å¾éè¦",normalizedTitle:"éåå±åå®¹å¾éè¦",charIndex:599},{level:2,title:"éåå±å½±åé¨ç½²",slug:"éåå±å½±åé¨ç½²",normalizedTitle:"éåå±å½±åé¨ç½²",charIndex:904},{level:2,title:"Dockerä¸­çSpring Bootåºç¨",slug:"dockerä¸­çspring-bootåºç¨",normalizedTitle:"dockerä¸­çspring bootåºç¨",charIndex:4},{level:2,title:"åå±æ¹æ³",slug:"åå±æ¹æ³",normalizedTitle:"åå±æ¹æ³",charIndex:1502},{level:2,title:"æ´æ·±å¥å°ç ç©¶åå±æ¹æ³",slug:"æ´æ·±å¥å°ç ç©¶åå±æ¹æ³",normalizedTitle:"æ´æ·±å¥å°ç ç©¶åå±æ¹æ³",charIndex:1943},{level:2,title:"éåå±çå½å¨æ",slug:"éåå±çå½å¨æ",normalizedTitle:"éåå±çå½å¨æ",charIndex:3964},{level:2,title:"æ¥æ±Dockerï¼è¿å¥åå±",slug:"æ¥æ±docker-è¿å¥åå±",normalizedTitle:"æ¥æ±dockerï¼è¿å¥åå±",charIndex:4312}],headersStr:"Dockerå³é®æ¦å¿µ éåå±åå®¹å¾éè¦ éåå±å½±åé¨ç½² Dockerä¸­çSpring Bootåºç¨ åå±æ¹æ³ æ´æ·±å¥å°ç ç©¶åå±æ¹æ³ éåå±çå½å¨æ æ¥æ±Dockerï¼è¿å¥åå±",content:'# ä¼åDockerä¸­çSpring Bootåºç¨\n\næç¤º\n\næä»ç»äºå¦ä½ä½¿ç¨Dockerä¸­çä¸äºå³é®æ¦å¿µåç»æç»ä»¶æ¥ä¼åSpring Bootåºç¨ç¨åºã\n\nDockeråè½å¼ºå¤§ä¸æäºä½¿ç¨ãDockeråè®¸å¼åäººåç å¶çè½¯ä»¶åå»ºå¯ç§»æ¤çéåãè¿äºéåå¯éå¤å°é¨ç½²ãä½ å¯ä»¥å¾å®¹æå°ä»Dockerä¸­è·å¾å¾å¤ä»·å¼ï¼ä½æ¯è¦ä»Dockerä¸­è·å¾æå¤§çä»·å¼ï¼éè¦çè§£ä¸äºæ¦å¿µãå¨è¿è¡æç»­éæåæç»­äº¤ä»æ¶ï¼å¦ä½æå»ºDockeréåå·æéè¦çä½ç¨ãå¨æ¬æä¸­ï¼æå°éç¹ä»ç»å¨è¿è¡è¿­ä»£å¼ååé¨ç½²æ¶ï¼å¦ä½éç¨æ´ææçæ¹æ³ä¸ºSpring Bootåºç¨ç¨åºæå»ºDockeréåãä¸ºSpring Bootåºç¨ç¨åºæå»ºDockeréåçæ åæ¹æ³æä¸äºç¼ºç¹ï¼å æ­¤å¨è¿éæä»¬è¦ä»ç»å¦ä½åå¾æ´å¥½ã\n\n\n# Dockerå³é®æ¦å¿µ\n\nDockeræåä¸ªå³é®æ¦å¿µï¼ images, layers, Dockerfile å Docker cacheãç®èè¨ä¹ï¼Dockerfileæè¿°äºå¦ä½æå»ºDockeréåãéåç±è®¸å¤å±ç»æãDockerfileä»åºç¡éåå¼å§ï¼å¹¶æ·»å äºå¶ä»å±ãå½æ°åå®¹æ·»å å°éåæ¶ï¼å°çæä¸ä¸ªæ°å±ãææå»ºçæ¯ä¸ªå±é½è¢«ç¼å­ï¼å æ­¤å¯ä»¥å¨åç»­æå»ºä¸­éå¤ä½¿ç¨ãå½Dockeræå»ºè¿è¡æ¶ï¼å®å¯ä»¥ä»ç¼å­ä¸­è·åéå¤ä½¿ç¨ä»»ä½å·²æå±ãè¿å°±åå°äºæ¯æ¬¡æå»ºæéçæ¶é´åç©ºé´ãä»»ä½å·²æ´æ¹æä»¥åå°æªæå»ºçåå®¹é½å°æ ¹æ®éè¦è¿è¡æå»ºã\n\n\n\n\n# éåå±åå®¹å¾éè¦\n\néååå±çéè¦æ§ãDockerç¼å­ä¸­çç°æå±ï¼åªæå½æ¹éåå±åå®¹æ²¡æåæ´æ¶ï¼æè½è¢«ä½¿ç¨ãå¨Dockeræå»ºæé´æ´æ¹çå±è¶å¤ï¼Dockeréè¦æ§è¡æ´å¤çå·¥ä½æ¥éå»ºéåãéåå±é¡ºåºä¹å¾éè¦ãå¦ææä¸ªå¾å±çææç¶å¾å±åæªæ´æ¹ï¼åè¯¥å¾å±å°±è½è¢«éç¨ãå æ­¤ï¼æå¥½ææ¯è¾é¢ç¹æ´æ¹çå¾å±æ¾å¨ä¸é¢ï¼ä»¥ä¾¿å¯¹å¶æ´æ¹ä¼å½±åè¾å°çå­å¾å±ã\n\néåå±çé¡ºåºååå®¹å¾éè¦ãå½ä½ æåºç¨ç¨åºæåä¸ºDockeréåæ¶ï¼æç®åçæ¹æ³æ¯å°æ´ä¸ªåºç¨ç¨åºæ¾ç½®å°ä¸ä¸ªåç¬çéåå±ä¸­ãä½æ¯ï¼å¦æè¯¥åºç¨ç¨åºåå«å¤§ééæåºä¾èµï¼é£ä¹å³ä½¿æ´æ¹å¾å°çä»£ç ï¼ä¹éè¦éæ°æå»ºæ´ä¸ªéåå±ãè¿å°±éè¦å¨Dockerç¼å­ä¸­ï¼è±è´¹å¤§éæå»ºæ¶é´åç©ºé´ã\n\n\n# éåå±å½±åé¨ç½²\n\né¨ç½²Dockeréåæ¶ï¼éåå±ä¹å¾éè¦ãå¨é¨ç½²Dockeréåä¹åï¼å®ä»¬ä¼è¢«æ¨éå°Dockerè¿ç¨ä»åºãè¯¥ä»åºæ¯ææé¨ç½²éåçæºå¤´ï¼å¹¶ä¸ç»å¸¸åå«åä¸éåçè®¸å¤çæ¬ãDockeréå¸¸é«æï¼æ¯ä¸ªå±ä»å­å¨ä¸æ¬¡ãä½æ¯ï¼å¯¹äºé¢ç¹é¨ç½²ä¸å·æä¸æ­éå»ºçå¤§ä½ç§¯å±çéåï¼è¿å°±ä¸è¡äºãå¤§ä½ç§¯å±çéåï¼å³ä½¿åé¨åªæå¾å°çæ´æ¹ï¼ä¹å¿é¡»åç¬å­å¨å¨ä»åºä¸­å¹¶å¨ç½ç»ä¸­æ¨éãå ä¸ºéè¦ç§»å¨å¹¶å­å¨ä¸åçåå®¹ï¼è¿å°±ä¼å¢å é¨ç½²æ¶é´ï¼\n\n\n# Dockerä¸­çSpring Bootåºç¨\n\nä½¿ç¨uber-jaræ¹æ³çSpring Bootåºç¨ç¨åºæ¬èº«å°±æ¯ç¬ç«çé¨ç½²ååãè¯¥æ¨¡åéå¸¸éåå¨èææºææå»ºåä¸è¿è¡é¨ç½²ï¼å ä¸ºè¯¥åºç¨ç¨åºå¯å¸¦æ¥æéçä¸åãä½æ¯ï¼è¿å¯¹Dockeré¨ç½²æ¯ä¸ä¸ªç¼ºç¹ï¼Dockerå·²ç»æä¾äºæåä¾èµé¡¹çæ¹æ³ãå°æ´ä¸ªSpring Boot JARæ¾å¥Dockeréåæ¯å¾å¸¸è§çï¼ä½æ¯ï¼è¿ä¼å¯¼è´Dockeréåçåºç¨ç¨åºå±ä¸­çä¸ååå®¹å¤ªå¤ã\n\n\n\nSpringç¤¾åºä¸­æ­£å¨è¿è¡æå³åå°è¿è¡Spring Bootåºç¨ç¨åºæ¶çé¨ç½²å¤§å°åæ¶é´çè®¨è®ºï¼å°¤å¶æ¯å¨Dockerä¸­ãå¨æçæ¥ï¼è¿æç»æ¯å¨ç®åæ§ä¸æçä¹é´è¿è¡æè¡¡ãä¸ºSpring Bootåºç¨ç¨åºæå»ºDockeréåçæå¸¸è§æ¹æ³æ¯ææè¯´çâåå±âæ¹æ³ãä»ææ¯ä¸è®²ï¼è¿ä¸æ¯æ­£ç¡®çï¼å ä¸ºDockerfileå®éä¸åå»ºäºå¤ä¸ªå±ï¼ä½æ¯å¯¹äºè®¨è®ºæ¥è¯´å·²ç»è¶³å¤äºã\n\n\n# åå±æ¹æ³\n\nè®©æä»¬çä¸ä¸åå±æ¹æ³ãåå±æ¹æ³å¿«éï¼ç®åï¼æäºçè§£åä½¿ç¨ãDockerçSpring Bootæå ååºäºåå±Dockerfileæ¥æå»ºä½ çDockeréåï¼\n\nFROM openjdk:8-jdk-alpine\nVOLUME /tmp\nARG JAR_FILE\nCOPY ${JAR_FILE} app.jar\nENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]\n\n\nå®çæç»ç»ææ¯ä¸ä¸ªæ­£å¸¸è¿è¡çDockeréåï¼å¶è¿è¡æ¹å¼ä¸ä½ ææSpring Bootåºç¨ç¨åºè¿è¡çæ¹å¼å®å¨ç¸åãä½æ¯ï¼ç±äºå®åºäºæ´ä¸ªåºç¨ç¨åºJARï¼å æ­¤å­å¨åå±æçé®é¢ãéçåºç¨ç¨åºæºçæ´æ¹ï¼æ´ä¸ªSpring Boot JARé½ä¼è¢«éå»ºãä¸æ¬¡æå»ºDockeréåæ¶ï¼å°éæ°æå»ºæ´ä¸ªåºç¨ç¨åºå±ï¼åæ¬ææä¸åçä¾èµåºã\n\nè®©æä»¬çä¸ä¸ªå·ä½çä¾å­ï¼ Spring Pet Clinicã\n\n\n# æ´æ·±å¥å°ç ç©¶åå±æ¹æ³\n\nåå±æ¹æ³ä½¿ç¨Open Boot JDKåºç¡éåä¹ä¸çSpring Boot JARä½ä¸ºDockerå±æå»ºDockeréåï¼\n\n$ docker images\nREPOSITORY                    TAG         IMAGE ID            CREATED             SIZE\nspringio/spring-petclinic     latest      94b0366d5ba2        16 seconds ago      140MB\n\n\nçæçDockeréåä¸º140 MBãä½ å¯ä»¥ä½¿ç¨docker history å½ä»¤æ£æ¥å¾å± ãä½ å¯ä»¥çå°Spring Bootåºç¨ç¨åºJARå·²å¤å¶å°éåä¸­ï¼å¤§å°ä¸º38.3 MBã\n\n$ docker history springio/spring-petclinic\nIMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\n94b0366d5ba2        52 seconds ago      /bin/sh -c #(nop)  ENTRYPOINT ["java" "-Djavâ¦   0B\n213dff56a4bd        53 seconds ago      /bin/sh -c #(nop) COPY file:d3551559c2aa35afâ¦   38.3MB\nbc453a32748e        6 minutes ago       /bin/sh -c #(nop)  ARG JAR_FILE                 0B\n7fe0bb0d8026        6 minutes ago       /bin/sh -c #(nop)  VOLUME [/tmp]                0B\ncc2179b8f042        8 days ago          /bin/sh -c set -x  && apk add --no-cache   oâ¦   97.4MB\n<missing>           8 days ago          /bin/sh -c #(nop)  ENV JAVA_ALPINE_VERSION=8â¦   0B\n<missing>           8 days ago          /bin/sh -c #(nop)  ENV JAVA_VERSION=8u151       0B\n<missing>           8 days ago          /bin/sh -c #(nop)  ENV PATH=/usr/local/sbin:â¦   0B\n<missing>           8 days ago          /bin/sh -c #(nop)  ENV JAVA_HOME=/usr/lib/jvâ¦   0B\n<missing>           8 days ago          /bin/sh -c {   echo \'#!/bin/sh\';   echo \'setâ¦   87B\n<missing>           8 days ago          /bin/sh -c #(nop)  ENV LANG=C.UTF-8             0B\n<missing>           5 months ago        /bin/sh -c #(nop)  CMD ["/bin/sh"]              0B\n<missing>           5 months ago        /bin/sh -c #(nop) ADD file:093f0723fa46f6cdbâ¦   4.15MB\n\n\nä¸æ¬¡æå»ºDockeréåæ¶ï¼å°éæ°åå»ºæ´ä¸ª38 MBçå±ï¼å ä¸ºéæ°æåäºJARæä»¶ã\n\nå¨æ­¤ç¤ºä¾ä¸­ï¼åºç¨ç¨åºçå¤§å°ç¸å¯¹è¾å°ï¼å ä¸ºä»åºäºspring-boot-starter-webåå¶ä»ä¾èµé¡¹ï¼ä¾å¦spring-actuatorï¼ãå¨å®éå¼åä¸­ï¼è¿äºå¤§å°éå¸¸è¦å¤§å¾å¤ï¼å ä¸ºå®ä»¬ä¸ä»åæ¬Spring Bootåºï¼è¿åæ¬å¶ä»ç¬¬ä¸æ¹åºãæ ¹æ®æçç»éªï¼å®éçSpring Bootåºç¨ç¨åºçå¤§å°èå´å¯è½å¨50 MBå°250 MBä¹é´ï¼å¦æä¸æ¯æ´å¤§çè¯ï¼ã\n\nä»ç»è§å¯è¯¥åºç¨ç¨åºï¼åºç¨ç¨åºJARä¸­åªæ372 KBæ¯åºç¨ç¨åºä»£ç ãå¶ä½38 MBæ¯ä¾èµåºãè¿æå³çå®éä¸åªæ0.1ï¼çå±å¨ååãå¶ä½99.9ï¼ä¸åã\n\n\n# éåå±çå½å¨æ\n\nè¿æ¯åºäºéåå±çåºæ¬èèï¼åå®¹ççå½å¨æãéåå±çåå®¹åºå·æç¸åççå½å¨æãSpring Bootåºç¨ç¨åºçåå®¹æä¸¤ä¸ªä¸åççå½å¨æï¼ä¸ç»å¸¸æ´æ¹çä¾èµåºåç»å¸¸æ´æ¹çåºç¨ç¨åºç±»ã\n\næ¯æ¬¡ç±äºåºç¨ç¨åºä»£ç æ´æ¹èéå»ºè¯¥å±æ¶ï¼ä¹ä¼åå«ä¸åçäºè¿å¶æä»¶ãå¨å¿«éçåºç¨ç¨åºå¼åç¯å¢ä¸­ï¼ä¸æ­æ´æ¹åéæ°é¨ç½²åºç¨ç¨åºä»£ç ï¼è¿ç§éå ææ¬å¯è½åå¾éå¸¸æè´µã\n\næ³è±¡ä¸ä¸ªåºç¨å¢éå¨Pet Clinicä¸è¿è¡è¿­ä»£ãå¢éæ¯å¤©æ´æ¹åéæ°é¨ç½²åºç¨ç¨åº10æ¬¡ãè¿10ä¸ªæ°å±çææ¬ä¸ºæ¯å¤©383 MBãå¦æä½¿ç¨æ´å¤å®éå¤§å°ï¼åæ¯å¤©æå¤å¯ä»¥è¾¾å°2.5 GBææ´å¤ãæç»å°æµªè´¹å¤§éçæå»ºæ¶é´ï¼é¨ç½²æ¶é´åDockerä»åºç©ºé´ã\n\nå¿«éè¿­ä»£çå¼ååäº¤ä»æ¯å³å®æä»¬æ¯ç»§ç»­ä½¿ç¨ç®åçåå±æ¹æ³ï¼è¿æ¯éç¨æ´ææçæ¿ä»£æ¹æ³ã\n\n\n# æ¥æ±Dockerï¼è¿å¥åå±\n\nå¨ç®åæ§åæçä¹é´è¿è¡æè¡¡æ¶ï¼æè®¤ä¸ºæ­£ç¡®çéæ©æ¯âåå±âæ¹æ³ãï¼å¯ä»¥ææ´å¤çå±ï¼ä½æ¯å¤ªå¤çå±å¯è½æå®³ï¼å¹¶ä¸è¿åäº Dockeræä½³å®è·µï¼ãå¨åå±æ¹æ³ä¸­ï¼æä»¬æå»ºDockeréåï¼ä»¥ä½¿Spring Bootåºç¨ç¨åºçä¾èµåºï¼å­å¨äºåºç¨ç¨åºä»£ç ä¸æ¹çä¸å±ä¸­ãè¿æ ·ï¼åå±å°éµå¾ªåå®¹çä¸åçå½å¨æãéè¿å°ä¸ç»å¸¸æ´æ¹çä¾èµåºæ¨å¥ä¸ä¸ªåç¬çå±ï¼å¹¶ä»å°åºç¨ç¨åºç±»ä¿çå¨é¡¶å±ï¼é£ä¹è¿­ä»£éå»ºåéæ°é¨ç½²å°±ä¼æ´å¿«ã\n\n\n\nåå±æ¹æ³å å¿«äºè¿­ä»£å¼åçéåº¦ï¼å¹¶æå¤§ç¨åº¦å°ç¼©ç­äºé¨ç½²æ¶é´ãå½ç¶å®éæçå åºç¨ç¨åºèå¼ï¼ä½æ¯å¹³åèè¨ï¼è¿å°ä½¿åºç¨ç¨åºé¨ç½²å¤§å°åå°90ï¼ï¼åæ¶ç¸åºå°ç¼©ç­äºé¨ç½²å¨æã',normalizedContent:'# ä¼ådockerä¸­çspring bootåºç¨\n\næç¤º\n\næä»ç»äºå¦ä½ä½¿ç¨dockerä¸­çä¸äºå³é®æ¦å¿µåç»æç»ä»¶æ¥ä¼åspring bootåºç¨ç¨åºã\n\ndockeråè½å¼ºå¤§ä¸æäºä½¿ç¨ãdockeråè®¸å¼åäººåç å¶çè½¯ä»¶åå»ºå¯ç§»æ¤çéåãè¿äºéåå¯éå¤å°é¨ç½²ãä½ å¯ä»¥å¾å®¹æå°ä»dockerä¸­è·å¾å¾å¤ä»·å¼ï¼ä½æ¯è¦ä»dockerä¸­è·å¾æå¤§çä»·å¼ï¼éè¦çè§£ä¸äºæ¦å¿µãå¨è¿è¡æç»­éæåæç»­äº¤ä»æ¶ï¼å¦ä½æå»ºdockeréåå·æéè¦çä½ç¨ãå¨æ¬æä¸­ï¼æå°éç¹ä»ç»å¨è¿è¡è¿­ä»£å¼ååé¨ç½²æ¶ï¼å¦ä½éç¨æ´ææçæ¹æ³ä¸ºspring bootåºç¨ç¨åºæå»ºdockeréåãä¸ºspring bootåºç¨ç¨åºæå»ºdockeréåçæ åæ¹æ³æä¸äºç¼ºç¹ï¼å æ­¤å¨è¿éæä»¬è¦ä»ç»å¦ä½åå¾æ´å¥½ã\n\n\n# dockerå³é®æ¦å¿µ\n\ndockeræåä¸ªå³é®æ¦å¿µï¼ images, layers, dockerfile å docker cacheãç®èè¨ä¹ï¼dockerfileæè¿°äºå¦ä½æå»ºdockeréåãéåç±è®¸å¤å±ç»æãdockerfileä»åºç¡éåå¼å§ï¼å¹¶æ·»å äºå¶ä»å±ãå½æ°åå®¹æ·»å å°éåæ¶ï¼å°çæä¸ä¸ªæ°å±ãææå»ºçæ¯ä¸ªå±é½è¢«ç¼å­ï¼å æ­¤å¯ä»¥å¨åç»­æå»ºä¸­éå¤ä½¿ç¨ãå½dockeræå»ºè¿è¡æ¶ï¼å®å¯ä»¥ä»ç¼å­ä¸­è·åéå¤ä½¿ç¨ä»»ä½å·²æå±ãè¿å°±åå°äºæ¯æ¬¡æå»ºæéçæ¶é´åç©ºé´ãä»»ä½å·²æ´æ¹æä»¥åå°æªæå»ºçåå®¹é½å°æ ¹æ®éè¦è¿è¡æå»ºã\n\n\n\n\n# éåå±åå®¹å¾éè¦\n\néååå±çéè¦æ§ãdockerç¼å­ä¸­çç°æå±ï¼åªæå½æ¹éåå±åå®¹æ²¡æåæ´æ¶ï¼æè½è¢«ä½¿ç¨ãå¨dockeræå»ºæé´æ´æ¹çå±è¶å¤ï¼dockeréè¦æ§è¡æ´å¤çå·¥ä½æ¥éå»ºéåãéåå±é¡ºåºä¹å¾éè¦ãå¦ææä¸ªå¾å±çææç¶å¾å±åæªæ´æ¹ï¼åè¯¥å¾å±å°±è½è¢«éç¨ãå æ­¤ï¼æå¥½ææ¯è¾é¢ç¹æ´æ¹çå¾å±æ¾å¨ä¸é¢ï¼ä»¥ä¾¿å¯¹å¶æ´æ¹ä¼å½±åè¾å°çå­å¾å±ã\n\néåå±çé¡ºåºååå®¹å¾éè¦ãå½ä½ æåºç¨ç¨åºæåä¸ºdockeréåæ¶ï¼æç®åçæ¹æ³æ¯å°æ´ä¸ªåºç¨ç¨åºæ¾ç½®å°ä¸ä¸ªåç¬çéåå±ä¸­ãä½æ¯ï¼å¦æè¯¥åºç¨ç¨åºåå«å¤§ééæåºä¾èµï¼é£ä¹å³ä½¿æ´æ¹å¾å°çä»£ç ï¼ä¹éè¦éæ°æå»ºæ´ä¸ªéåå±ãè¿å°±éè¦å¨dockerç¼å­ä¸­ï¼è±è´¹å¤§éæå»ºæ¶é´åç©ºé´ã\n\n\n# éåå±å½±åé¨ç½²\n\né¨ç½²dockeréåæ¶ï¼éåå±ä¹å¾éè¦ãå¨é¨ç½²dockeréåä¹åï¼å®ä»¬ä¼è¢«æ¨éå°dockerè¿ç¨ä»åºãè¯¥ä»åºæ¯ææé¨ç½²éåçæºå¤´ï¼å¹¶ä¸ç»å¸¸åå«åä¸éåçè®¸å¤çæ¬ãdockeréå¸¸é«æï¼æ¯ä¸ªå±ä»å­å¨ä¸æ¬¡ãä½æ¯ï¼å¯¹äºé¢ç¹é¨ç½²ä¸å·æä¸æ­éå»ºçå¤§ä½ç§¯å±çéåï¼è¿å°±ä¸è¡äºãå¤§ä½ç§¯å±çéåï¼å³ä½¿åé¨åªæå¾å°çæ´æ¹ï¼ä¹å¿é¡»åç¬å­å¨å¨ä»åºä¸­å¹¶å¨ç½ç»ä¸­æ¨éãå ä¸ºéè¦ç§»å¨å¹¶å­å¨ä¸åçåå®¹ï¼è¿å°±ä¼å¢å é¨ç½²æ¶é´ï¼\n\n\n# dockerä¸­çspring bootåºç¨\n\nä½¿ç¨uber-jaræ¹æ³çspring bootåºç¨ç¨åºæ¬èº«å°±æ¯ç¬ç«çé¨ç½²ååãè¯¥æ¨¡åéå¸¸éåå¨èææºææå»ºåä¸è¿è¡é¨ç½²ï¼å ä¸ºè¯¥åºç¨ç¨åºå¯å¸¦æ¥æéçä¸åãä½æ¯ï¼è¿å¯¹dockeré¨ç½²æ¯ä¸ä¸ªç¼ºç¹ï¼dockerå·²ç»æä¾äºæåä¾èµé¡¹çæ¹æ³ãå°æ´ä¸ªspring boot jaræ¾å¥dockeréåæ¯å¾å¸¸è§çï¼ä½æ¯ï¼è¿ä¼å¯¼è´dockeréåçåºç¨ç¨åºå±ä¸­çä¸ååå®¹å¤ªå¤ã\n\n\n\nspringç¤¾åºä¸­æ­£å¨è¿è¡æå³åå°è¿è¡spring bootåºç¨ç¨åºæ¶çé¨ç½²å¤§å°åæ¶é´çè®¨è®ºï¼å°¤å¶æ¯å¨dockerä¸­ãå¨æçæ¥ï¼è¿æç»æ¯å¨ç®åæ§ä¸æçä¹é´è¿è¡æè¡¡ãä¸ºspring bootåºç¨ç¨åºæå»ºdockeréåçæå¸¸è§æ¹æ³æ¯ææè¯´çâåå±âæ¹æ³ãä»ææ¯ä¸è®²ï¼è¿ä¸æ¯æ­£ç¡®çï¼å ä¸ºdockerfileå®éä¸åå»ºäºå¤ä¸ªå±ï¼ä½æ¯å¯¹äºè®¨è®ºæ¥è¯´å·²ç»è¶³å¤äºã\n\n\n# åå±æ¹æ³\n\nè®©æä»¬çä¸ä¸åå±æ¹æ³ãåå±æ¹æ³å¿«éï¼ç®åï¼æäºçè§£åä½¿ç¨ãdockerçspring bootæå ååºäºåå±dockerfileæ¥æå»ºä½ çdockeréåï¼\n\nfrom openjdk:8-jdk-alpine\nvolume /tmp\narg jar_file\ncopy ${jar_file} app.jar\nentrypoint ["java","-djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]\n\n\nå®çæç»ç»ææ¯ä¸ä¸ªæ­£å¸¸è¿è¡çdockeréåï¼å¶è¿è¡æ¹å¼ä¸ä½ ææspring bootåºç¨ç¨åºè¿è¡çæ¹å¼å®å¨ç¸åãä½æ¯ï¼ç±äºå®åºäºæ´ä¸ªåºç¨ç¨åºjarï¼å æ­¤å­å¨åå±æçé®é¢ãéçåºç¨ç¨åºæºçæ´æ¹ï¼æ´ä¸ªspring boot jaré½ä¼è¢«éå»ºãä¸æ¬¡æå»ºdockeréåæ¶ï¼å°éæ°æå»ºæ´ä¸ªåºç¨ç¨åºå±ï¼åæ¬ææä¸åçä¾èµåºã\n\nè®©æä»¬çä¸ä¸ªå·ä½çä¾å­ï¼ spring pet clinicã\n\n\n# æ´æ·±å¥å°ç ç©¶åå±æ¹æ³\n\nåå±æ¹æ³ä½¿ç¨open boot jdkåºç¡éåä¹ä¸çspring boot jarä½ä¸ºdockerå±æå»ºdockeréåï¼\n\n$ docker images\nrepository                    tag         image id            created             size\nspringio/spring-petclinic     latest      94b0366d5ba2        16 seconds ago      140mb\n\n\nçæçdockeréåä¸º140 mbãä½ å¯ä»¥ä½¿ç¨docker history å½ä»¤æ£æ¥å¾å± ãä½ å¯ä»¥çå°spring bootåºç¨ç¨åºjarå·²å¤å¶å°éåä¸­ï¼å¤§å°ä¸º38.3 mbã\n\n$ docker history springio/spring-petclinic\nimage               created             created by                                      size                comment\n94b0366d5ba2        52 seconds ago      /bin/sh -c #(nop)  entrypoint ["java" "-djavâ¦   0b\n213dff56a4bd        53 seconds ago      /bin/sh -c #(nop) copy file:d3551559c2aa35afâ¦   38.3mb\nbc453a32748e        6 minutes ago       /bin/sh -c #(nop)  arg jar_file                 0b\n7fe0bb0d8026        6 minutes ago       /bin/sh -c #(nop)  volume [/tmp]                0b\ncc2179b8f042        8 days ago          /bin/sh -c set -x  && apk add --no-cache   oâ¦   97.4mb\n<missing>           8 days ago          /bin/sh -c #(nop)  env java_alpine_version=8â¦   0b\n<missing>           8 days ago          /bin/sh -c #(nop)  env java_version=8u151       0b\n<missing>           8 days ago          /bin/sh -c #(nop)  env path=/usr/local/sbin:â¦   0b\n<missing>           8 days ago          /bin/sh -c #(nop)  env java_home=/usr/lib/jvâ¦   0b\n<missing>           8 days ago          /bin/sh -c {   echo \'#!/bin/sh\';   echo \'setâ¦   87b\n<missing>           8 days ago          /bin/sh -c #(nop)  env lang=c.utf-8             0b\n<missing>           5 months ago        /bin/sh -c #(nop)  cmd ["/bin/sh"]              0b\n<missing>           5 months ago        /bin/sh -c #(nop) add file:093f0723fa46f6cdbâ¦   4.15mb\n\n\nä¸æ¬¡æå»ºdockeréåæ¶ï¼å°éæ°åå»ºæ´ä¸ª38 mbçå±ï¼å ä¸ºéæ°æåäºjaræä»¶ã\n\nå¨æ­¤ç¤ºä¾ä¸­ï¼åºç¨ç¨åºçå¤§å°ç¸å¯¹è¾å°ï¼å ä¸ºä»åºäºspring-boot-starter-webåå¶ä»ä¾èµé¡¹ï¼ä¾å¦spring-actuatorï¼ãå¨å®éå¼åä¸­ï¼è¿äºå¤§å°éå¸¸è¦å¤§å¾å¤ï¼å ä¸ºå®ä»¬ä¸ä»åæ¬spring bootåºï¼è¿åæ¬å¶ä»ç¬¬ä¸æ¹åºãæ ¹æ®æçç»éªï¼å®éçspring bootåºç¨ç¨åºçå¤§å°èå´å¯è½å¨50 mbå°250 mbä¹é´ï¼å¦æä¸æ¯æ´å¤§çè¯ï¼ã\n\nä»ç»è§å¯è¯¥åºç¨ç¨åºï¼åºç¨ç¨åºjarä¸­åªæ372 kbæ¯åºç¨ç¨åºä»£ç ãå¶ä½38 mbæ¯ä¾èµåºãè¿æå³çå®éä¸åªæ0.1ï¼çå±å¨ååãå¶ä½99.9ï¼ä¸åã\n\n\n# éåå±çå½å¨æ\n\nè¿æ¯åºäºéåå±çåºæ¬èèï¼åå®¹ççå½å¨æãéåå±çåå®¹åºå·æç¸åççå½å¨æãspring bootåºç¨ç¨åºçåå®¹æä¸¤ä¸ªä¸åççå½å¨æï¼ä¸ç»å¸¸æ´æ¹çä¾èµåºåç»å¸¸æ´æ¹çåºç¨ç¨åºç±»ã\n\næ¯æ¬¡ç±äºåºç¨ç¨åºä»£ç æ´æ¹èéå»ºè¯¥å±æ¶ï¼ä¹ä¼åå«ä¸åçäºè¿å¶æä»¶ãå¨å¿«éçåºç¨ç¨åºå¼åç¯å¢ä¸­ï¼ä¸æ­æ´æ¹åéæ°é¨ç½²åºç¨ç¨åºä»£ç ï¼è¿ç§éå ææ¬å¯è½åå¾éå¸¸æè´µã\n\næ³è±¡ä¸ä¸ªåºç¨å¢éå¨pet clinicä¸è¿è¡è¿­ä»£ãå¢éæ¯å¤©æ´æ¹åéæ°é¨ç½²åºç¨ç¨åº10æ¬¡ãè¿10ä¸ªæ°å±çææ¬ä¸ºæ¯å¤©383 mbãå¦æä½¿ç¨æ´å¤å®éå¤§å°ï¼åæ¯å¤©æå¤å¯ä»¥è¾¾å°2.5 gbææ´å¤ãæç»å°æµªè´¹å¤§éçæå»ºæ¶é´ï¼é¨ç½²æ¶é´ådockerä»åºç©ºé´ã\n\nå¿«éè¿­ä»£çå¼ååäº¤ä»æ¯å³å®æä»¬æ¯ç»§ç»­ä½¿ç¨ç®åçåå±æ¹æ³ï¼è¿æ¯éç¨æ´ææçæ¿ä»£æ¹æ³ã\n\n\n# æ¥æ±dockerï¼è¿å¥åå±\n\nå¨ç®åæ§åæçä¹é´è¿è¡æè¡¡æ¶ï¼æè®¤ä¸ºæ­£ç¡®çéæ©æ¯âåå±âæ¹æ³ãï¼å¯ä»¥ææ´å¤çå±ï¼ä½æ¯å¤ªå¤çå±å¯è½æå®³ï¼å¹¶ä¸è¿åäº dockeræä½³å®è·µï¼ãå¨åå±æ¹æ³ä¸­ï¼æä»¬æå»ºdockeréåï¼ä»¥ä½¿spring bootåºç¨ç¨åºçä¾èµåºï¼å­å¨äºåºç¨ç¨åºä»£ç ä¸æ¹çä¸å±ä¸­ãè¿æ ·ï¼åå±å°éµå¾ªåå®¹çä¸åçå½å¨æãéè¿å°ä¸ç»å¸¸æ´æ¹çä¾èµåºæ¨å¥ä¸ä¸ªåç¬çå±ï¼å¹¶ä»å°åºç¨ç¨åºç±»ä¿çå¨é¡¶å±ï¼é£ä¹è¿­ä»£éå»ºåéæ°é¨ç½²å°±ä¼æ´å¿«ã\n\n\n\nåå±æ¹æ³å å¿«äºè¿­ä»£å¼åçéåº¦ï¼å¹¶æå¤§ç¨åº¦å°ç¼©ç­äºé¨ç½²æ¶é´ãå½ç¶å®éæçå åºç¨ç¨åºèå¼ï¼ä½æ¯å¹³åèè¨ï¼è¿å°ä½¿åºç¨ç¨åºé¨ç½²å¤§å°åå°90ï¼ï¼åæ¶ç¸åºå°ç¼©ç­äºé¨ç½²å¨æã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Spring Boot 2.3 æ°ç¹æ§ Layered Jar",frontmatter:{title:"Spring Boot 2.3 æ°ç¹æ§ Layered Jar",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/97d41d/"},regularPath:"/21.Simplify/01.Simplify%20Docs/07.Spring%20Boot%20%E6%96%B0%E7%89%B9%E6%80%A7%20Layered%20Jar.html",relativePath:"21.Simplify/01.Simplify Docs/07.Spring Boot æ°ç¹æ§ Layered Jar.md",key:"v-a146c5d8",path:"/pages/97d41d/",headers:[{level:2,title:"èæ¯",slug:"èæ¯",normalizedTitle:"èæ¯",charIndex:38},{level:2,title:"Layered Jar",slug:"layered-jar",normalizedTitle:"layered jar",charIndex:22},{level:2,title:"æ¥çéååå±ä¿¡æ¯",slug:"æ¥çéååå±ä¿¡æ¯",normalizedTitle:"æ¥çéååå±ä¿¡æ¯",charIndex:2911},{level:2,title:"æ¨¡ååçº§éæ°æå»º",slug:"æ¨¡ååçº§éæ°æå»º",normalizedTitle:"æ¨¡ååçº§éæ°æå»º",charIndex:3758},{level:2,title:"æ¯è¾ v1.0ãv1.1 éå",slug:"æ¯è¾-v1-0ãv1-1-éå",normalizedTitle:"æ¯è¾ v1.0ãv1.1 éå",charIndex:4747},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:11940}],headersStr:"èæ¯ Layered Jar æ¥çéååå±ä¿¡æ¯ æ¨¡ååçº§éæ°æå»º æ¯è¾ v1.0ãv1.1 éå æ»ç»",content:'# Spring Boot 2.3 æ°ç¹æ§ Layered Jar\n\n\n# èæ¯\n\nSpring Boot 2.3 ä¸ºå®¹å¨åé¨ç½²æä¾äºä¸ä¸ªæ°ç¹æ§ Layered Jarãéå¸¸ Spring Boot ç¨åºé½æ¯ä»¥ fat jar çæ¹å¼æå»ºçï¼æä»¶å¤§å°å¨è¾ 50Mã100M è¿æ ·å­ï¼å¯¹ docker image å¶å®å¾ä¸åå¥½ãDocker image æ¬èº«æ¯åå±ç»æï¼å¦ææä¸å±æ²¡æååå¨ pull æ¶å°±ä¸å¿ä¸ä¼ ï¼ä¸æ¦æååå°±è¦ä¸ä¼ æ´å±ãä¸ä¸ªç¨åºä¸­ï¼ç¨åºèªèº«ä»£ç ãèµæºçåæ´é¢çè¦è¿å¤§äºä¾èµåºçåæ´é¢çï¼å¤§å¤æ°æ¶åå ä¸ºå è¡ä»£ç ååå¯¼è´ä¸ä¼ æ´ä¸ª jar æä»¶ï¼æ è®ºæ¯å­å¨å ç¨è¿æ¯æ¶é´æçä¸é½æ¯å¾å¤§çæµªè´¹ï¼åèå¨å½åç½éä¸æ´æ¯ä¸ä¸ªä¸¥éé®é¢ã\n\n\n# Layered Jar\n\næ°ç¹æ§ layered jar ä¸ºä¸ååæ´é¢çåå®¹åç¦»æä¾äºæ¯æå·¥å·ï¼å¨æ­¤åºç¡ä¸åå±æå»º docker image å°±åå¾å¾å®¹æäºãæ¬è´¨ä¸è¿ä¸ªç¹æ§æ¯ org.springframework.boot:spring-boot-maven-plugin æä¾çä¸ä¸ªæ°ç layers éç½®é¡¹ï¼å½å¯ç¨ layers æ¨¡å¼æåæ¶ï¼ä¸ä¸ª spring-boot-jarmode-layertools jar ä¼æåå° fat jar ä¸­ï¼æ°ç¹æ§æ¯ç±è¿ä¸ª jar æä¾çãè¿éä¸æ·±å¥è§£æå®ç°ç»èï¼èæ¯éç¹å³æ³¨å¦ä½æ¨¡å¼åä½¿ç¨è¿ä¸ªç¹æ§è·å¾æ¶çã\n\nè¦ä½¿ç¨æ­¤åè½ï¼å¿é¡»å¯ç¨åå±åè½ï¼\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n<project>\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<layers>\n\t\t\t\t\t\t<enabled>true</enabled>\n\t\t\t\t\t</layers>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n</project>\n\n\né»è®¤æåµä¸ï¼å®ä¹äºä»¥ä¸å±ï¼\n\n * dependencies å¯¹äºçæ¬ä¸åå«çä»»ä½SNAPSHOTä¾èµé¡¹ã\n\n * spring-boot-loader ç¨äºjarå è½½ç¨åºç±»ã\n\n * snapshot-dependencies å¯¹äºå¶çæ¬åå«SNAPSHOTçä»»ä½ä¾èµé¡¹ã\n\n * application åºç¨ç¨åºç±»åèµæºã\n\nå±é¡ºåºå¾éè¦ï¼å ä¸ºå®ç¡®å®äºé¨ååºç¨ç¨åºæ´æ¹æ¶å¯ä»¥ç¼å­ååçå±çå¯è½æ§ãé»è®¤é¡ºåºä¸ºdependenciesï¼spring-boot-loaderï¼snapshot-dependenciesï¼applicationãåºè¯¥é¦åæ·»å æä¸å¯è½æ´æ¹çåå®¹ï¼ç¶åæ·»å æ´å¯è½æ´æ¹çå±ã\n\nå¢å éç½®ä¹å package æåï¼ç¶åå¯ä»¥æ§è¡ä»¥ä¸å½ä»¤éªè¯éç½®æ­£ç¡®ä¸å¦\n\n$ java -Djarmode=layertools -jar simplify-upms-biz.jar\n\n\nä¸ä¸ªç¤ºä¾è¾åºï¼\n\n\n\n\n\n\n\nÂ \n\n\n\nUsage:\n  java -Djarmode=layertools -jar simplify-upms-biz.jar\n\nAvailable commands:\n  list     List layers from the jar that can be extracted\n  extract  Extracts layers from the jar for image creation\n  help     Help about any command\n\n\nè¯¥extractå½ä»¤å¯ç¨äºè½»æ¾å°å°åºç¨ç¨åºæåä¸ºå¤ä¸ªå±ï¼ä»¥æ·»å å°Dockerfileä¸­ãè¿æ¯ä½¿ç¨jarmodeçDockerfileçç¤ºä¾ã\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\nÂ \n\n\nFROM adoptopenjdk:11-jre-hotspot as builder\nWORKDIR application\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} application.jar\nRUN java -Djarmode=layertools -jar application.jar extract\n\nFROM adoptopenjdk:11-jre-hotspot\n\nLABEL maintainer="info@ieooc.com"\nLABEL version="1.0"\nLABEL description="simplify-upms-biz"\n\nENV TZ=Asia/Shanghai\nWORKDIR application\n\nCOPY --from=builder application/dependencies/ ./\nCOPY --from=builder application/spring-boot-loader/ ./\nCOPY --from=builder application/snapshot-dependencies/ ./\nCOPY --from=builder application/application/ ./\n\nEXPOSE 4000\n\nENTRYPOINT ["java", "org.springframework.boot.loader.JarLauncher"]\n\n\næ³¨æ\n\nè¿æ¯ä¸ä¸ªå¤é¶æ®µçDockerfileãæå»ºå¨é¶æ®µæåä»¥åéè¦çç®å½ãæ¯ä¸ªCOPYå½ä»¤é½ä¸jarmodeæåçå±æå³ã\n\nå¯¹ä¸é¢ç Dockerfile éè¡è§£éä¸ä¸ï¼\n\n * 2 ä¸ª FROM ä¿æç»ä¸ä¸ºè¿è¡æ¶ä½¿ç¨çåºç¡éåå³å¯ï¼\n * ç®çæä»¶ä¿æ application.jar å³å¯ï¼å®è¦è· java -Djarmode=layertools -jaråé¢çæä»¶åä¸è´ï¼\n * LABELæå®ä½èåçæ¬ä¿¡æ¯ï¼éå¿é¡»é¡¹ãä½æ¯ç®æ¯ Spring Boot å®¹å¨åçè¯å¥½å®è·µ\n * 4 ä¸ª COPY 1 ä¸ª ENTRYPOINT ç§æå³å¯ï¼è¿æ¯æ¬ææ°ç¹æ§çå³é®ã\n\nç¶åï¼ç¨è¿ä¸ª Dockerfile æå»ºåºæ¥çéååå®¹å·²ç»æ¯æè§£åæå¤å±çéåäºï¼å½åæ´æºç ãèµæºãå¿«ç§çä¾èµãæ­£å¼çä¾èµæ¶ä¼ä¾æ¬¡å½±åæ´å¤å±éåï¼ä»èå®ç°æ¯æ¬¡æå»ºä¸ä¼ ä»åºæ¶å­å¨åä¼ è¾èæ¶æå°åã\n\næç¤º\n\nåè®¾ä»¥ä¸Dockerfileåå®¹ä½äºå½åç®å½ä¸­ï¼åå¯ä»¥ä½¿ç¨æå»ºdockeræ ådocker build .ï¼æèå¯ä»¥éæ©æå®åºç¨ç¨åºjarçè·¯å¾ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n$ docker build --build-arg JAR_FILE=./target/simplify-upms-biz.jar . -t simplify-upms-biz:v1.0\n\n\n\n# æ¥çéååå±ä¿¡æ¯\n\næä»¬éè¿docker inspect simplify-upms-biz:v1.0æ¥çéåçæ¯å±çæ£åå¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n// simplify-upms-biz:v1.0 çæ¬éååå±ä¿¡æ¯æè¦\n"Layers": [\n    "sha256:50644c29ef5a27c9a40c393a73ece2479de78325cae7d762ef3cdc19bf42dd0a",\n    "sha256:2104e5b926f69c4ad7a73be2c50541b8c2b8bd45ab882c9e5c4e388ccb556bef",\n    "sha256:f9a0984f718aa572e28dc4f776e4aa258f67e4f44ed5c63b6174962cc5617e78",\n    "sha256:d3f8c53ca74aa0fcc2e52c1ecd37f7507ccd6f8e63219ca60d05b94e68f524d5",\n    "sha256:2254b66d09be2cc6ae6feed4ea9f49dc4b14edaedbd7573d18d1f7d965389586",\n    "sha256:18bfcba3d17a9b06705a78c06cbc84e127f04a76fff70790af496b490b4a9e2e",\n    "sha256:28f08c714a6e10df22b986048e237dba87d850d25f4e03bea68cbf7de91b8841",\n    "sha256:e662f81e0c921b2a18dbe472d842185f2d767938b1118d83d4d1d2d1ce032e74",\n    "sha256:519d5530049b599f94a6ccbb15b4e659d01aa7b3f3bc18a772414a6c5aed0035"\n]\n\n\n\n# æ¨¡ååçº§éæ°æå»º\n\næä»¬å¯¹ simplify-upms-biz ç¨åºè¿è¡é¨åä¿®æ¹ï¼æ¨¡æå¼åè¿ç¨ï¼ï¼ç¶åéæ°æå»ºéå\n\n$ docker build --build-arg JAR_FILE=./target/simplify-upms-biz.jar . -t simplify-upms-biz:v1.1\n\n\næ­¤æ¶éååå±ä¿¡æ¯å¦ä¸ docker inspect simplify-upms-biz:v1.1\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n// simplify-upms-biz:v1.1 çæ¬éååå±ä¿¡æ¯æè¦\n"Layers": [\n    "sha256:50644c29ef5a27c9a40c393a73ece2479de78325cae7d762ef3cdc19bf42dd0a",\n    "sha256:2104e5b926f69c4ad7a73be2c50541b8c2b8bd45ab882c9e5c4e388ccb556bef",\n    "sha256:f9a0984f718aa572e28dc4f776e4aa258f67e4f44ed5c63b6174962cc5617e78",\n    "sha256:d3f8c53ca74aa0fcc2e52c1ecd37f7507ccd6f8e63219ca60d05b94e68f524d5",\n    "sha256:2254b66d09be2cc6ae6feed4ea9f49dc4b14edaedbd7573d18d1f7d965389586",\n    "sha256:18bfcba3d17a9b06705a78c06cbc84e127f04a76fff70790af496b490b4a9e2e",\n    "sha256:28f08c714a6e10df22b986048e237dba87d850d25f4e03bea68cbf7de91b8841",\n    "sha256:a1dc1f8cdf9ea2744fe64ecb20a9094ba8f094728c51b21ac6bf5e652916bdb0",\n    "sha256:f379fb50808d8e5483b276747d93b729308e7fe52de1d52c02a4912e6316c9fb"\n]\n\n\n\n# æ¯è¾ v1.0ãv1.1 éå\n\néè¿æ¯è¾ v1.0 å v1.1 çæ¬çéåæè¦ä¿¡æ¯ï¼æä»¬ä¼åç°åªææåçä¸å±åçäºååï¼æä»¬éè¿ Dive æ¯ä¸ä¸ªç¨ Go è¯­è¨ç¼åç Docker éååæå·¥å· æ¥ç¡®å®ä¸ä¸ æåä¸å±æ¯åäºåªäºäºæ\n\nä½¿ç¨éååæå·¥å·è¿è¡åæ\n\n docker run --rm -it \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    wagoodman/dive:latest simplify-upms-biz\n\n\nåæåå®¹è¾åºå¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nâ Layers âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ â â Current Layer Contents â£ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ\nCmp   Size  Command                                                                                  Permission     UID:GID       Size  Filetree\n    5.6 MB  FROM 31609b718dd2bed                                                                     -rw-r--r--         0:0      30 kB  â   â       âââ LatencyUtils-2.0.3.jar\n     12 MB  ALPINE_GLIBC_BASE_URL="https://github.com/sgerrand/alpine-pkg-glibc/releases/download" & -rw-r--r--         0:0     140 kB  â   â       âââ archaius-core-0.7.6.jar\n       0 B  mkdir -p /usr/lib/java/                                                                  -rw-r--r--         0:0     122 kB  â   â       âââ aspectjrt-1.9.6.jar\n    402 MB  #(nop) ADD file:65d2a21c343d4f40c5b76862829bee1b24ef58f2bd077129ce6e61765786a638 in .    -rw-r--r--         0:0     2.1 MB  â   â       âââ aspectjweaver-1.9.6.jar\n       0 B  WORKDIR /application                                                                     -rw-r--r--         0:0     878 kB  â   â       âââ bcpkix-jdk15on-1.64.jar\n     76 MB  COPY application/dependencies/ ./ # buildkit                                             -rw-r--r--         0:0     4.8 MB  â   â       âââ bcprov-jdk15on-1.64.jar\n    240 kB  COPY application/spring-boot-loader/ ./ # buildkit                                       -rw-r--r--         0:0     3.5 MB  â   â       âââ byte-buddy-1.10.18.jar\n     82 kB  COPY application/snapshot-dependencies/ ./ # buildkit                                    -rw-r--r--         0:0     201 kB  â   â       âââ checker-qual-2.11.1.jar\n    108 kB  COPY application/application/ ./ # buildkit                                              -rw-r--r--         0:0     505 kB  â   â       âââ classgraph-4.8.83.jar\n                                                                                                     -rw-r--r--         0:0      68 kB  â   â       âââ classmate-1.5.1.jar\nâ Layer Details ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ -rw-r--r--         0:0     348 kB  â   â       âââ commons-codec-1.14.jar\n                                                                                                     -rw-r--r--         0:0     588 kB  â   â       âââ commons-collections-3.2.2.jar\nTags:   (unavailable)                                                                                -rw-r--r--         0:0     354 kB  â   â       âââ commons-configuration-1.8.jar\nId:     bc864cc37f3f9cc88d08849efd54796b8f69644cfa4c3cc45cb49e66c7af381f                             -rw-r--r--         0:0      72 kB  â   â       âââ commons-fileupload-1.4.jar\nDigest: sha256:519d5530049b599f94a6ccbb15b4e659d01aa7b3f3bc18a772414a6c5aed0035                      -rw-r--r--         0:0     174 kB  â   â       âââ commons-io-2.2.jar\nCommand:                                                                                             -rw-r--r--         0:0     284 kB  â   â       âââ commons-lang-2.6.jar\nCOPY application/application/ ./ # buildkit                                                          -rw-r--r--         0:0     117 kB  â   â       âââ concurrentlinkedhashmap-lru-1.4.2.jar\n                                                                                                     -rw-r--r--         0:0     3.5 MB  â   â       âââ druid-1.2.3.jar\nâ Image Details ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ -rw-r--r--         0:0      20 kB  â   â       âââ druid-spring-boot-starter-1.2.3.jar\n                                                                                                     -rw-r--r--         0:0      14 kB  â   â       âââ error_prone_annotations-2.3.4.jar\n                                                                                                     -rw-r--r--         0:0     4.6 kB  â   â       âââ failureaccess-1.0.1.jar\nTotal Image size: 497 MB                                                                             -rw-r--r--         0:0     652 kB  â   â       âââ fastjson-1.2.71.jar\nPotential wasted space: 483 kB                                                                       -rw-r--r--         0:0     189 kB  â   â       âââ feign-core-10.10.1.jar\nImage efficiency score: 99 %                                                                         -rw-r--r--         0:0      30 kB  â   â       âââ feign-form-3.8.0.jar\n                                                                                                     -rw-r--r--         0:0      14 kB  â   â       âââ feign-form-spring-3.8.0.jar\nCount   Total Space  Path                                                                            -rw-r--r--         0:0      18 kB  â   â       âââ feign-hystrix-10.10.1.jar\n    2        430 kB  /etc/ssl/certs/ca-certificates.crt                                              -rw-r--r--         0:0     3.7 kB  â   â       âââ feign-slf4j-10.10.1.jar\n    2         30 kB  /lib/apk/db/installed                                                           -rw-r--r--         0:0     1.7 MB  â   â       âââ freemarker-2.3.30.jar\n    2         22 kB  /lib/apk/db/scripts.tar                                                         -rw-r--r--         0:0     2.8 MB  â   â       âââ guava-29.0-jre.jar\n    2         219 B  /lib/apk/db/triggers                                                            -rw-r--r--         0:0     1.3 MB  â   â       âââ hibernate-validator-6.1.6.Final.jar\n    2         198 B  /etc/apk/world                                                                  -rw-r--r--         0:0     180 kB  â   â       âââ httpasyncclient-4.1.4.jar\n    2           0 B  /var/cache/misc                                                                 -rw-r--r--         0:0     780 kB  â   â       âââ httpclient-4.5.13.jar\n    2           0 B  /lib/apk/db/lock                                                                -rw-r--r--         0:0     328 kB  â   â       âââ httpcore-4.4.14.jar\n    2           0 B  /usr/local/share                                                                -rw-r--r--         0:0     369 kB  â   â       âââ httpcore-nio-4.4.14.jar\n    2           0 B  /usr/bin/wget                                                                   -rw-r--r--         0:0     1.8 MB  â   â       âââ hutool-all-5.4.5.jar\n    2           0 B  /root                                                                           -rw-r--r--         0:0     468 kB  â   â       âââ hystrix-core-1.5.18.jar\n    2           0 B  /etc/apk/protected_paths.d                                                      -rw-r--r--         0:0     8.8 kB  â   â       âââ j2objc-annotations-1.3.jar\n\n\n\n# æ»ç»\n\næ è®ºä»æç¨ç¨åº¦è¿æ¯è¾¾å°çææä¸è®²ï¼layered jar é½éå¸¸å¼å¾ä½¿ç¨ãè¦ä½¿ç¨è¯¥ç¹æ§åªéè¦å¼å¯ pom ä¸­ä¸ä¸ªéç½®é¡¹å¹¶ä½¿ç¨ä¸ä¸ªå ä¹ä¸éè¦ä»»ä½ä¿®æ¹ç Dockerfile æ¨¡æ¿ï¼å ä¹é¶è´æè·å¾å¯è§çæ¶çã',normalizedContent:'# spring boot 2.3 æ°ç¹æ§ layered jar\n\n\n# èæ¯\n\nspring boot 2.3 ä¸ºå®¹å¨åé¨ç½²æä¾äºä¸ä¸ªæ°ç¹æ§ layered jarãéå¸¸ spring boot ç¨åºé½æ¯ä»¥ fat jar çæ¹å¼æå»ºçï¼æä»¶å¤§å°å¨è¾ 50mã100m è¿æ ·å­ï¼å¯¹ docker image å¶å®å¾ä¸åå¥½ãdocker image æ¬èº«æ¯åå±ç»æï¼å¦ææä¸å±æ²¡æååå¨ pull æ¶å°±ä¸å¿ä¸ä¼ ï¼ä¸æ¦æååå°±è¦ä¸ä¼ æ´å±ãä¸ä¸ªç¨åºä¸­ï¼ç¨åºèªèº«ä»£ç ãèµæºçåæ´é¢çè¦è¿å¤§äºä¾èµåºçåæ´é¢çï¼å¤§å¤æ°æ¶åå ä¸ºå è¡ä»£ç ååå¯¼è´ä¸ä¼ æ´ä¸ª jar æä»¶ï¼æ è®ºæ¯å­å¨å ç¨è¿æ¯æ¶é´æçä¸é½æ¯å¾å¤§çæµªè´¹ï¼åèå¨å½åç½éä¸æ´æ¯ä¸ä¸ªä¸¥éé®é¢ã\n\n\n# layered jar\n\næ°ç¹æ§ layered jar ä¸ºä¸ååæ´é¢çåå®¹åç¦»æä¾äºæ¯æå·¥å·ï¼å¨æ­¤åºç¡ä¸åå±æå»º docker image å°±åå¾å¾å®¹æäºãæ¬è´¨ä¸è¿ä¸ªç¹æ§æ¯ org.springframework.boot:spring-boot-maven-plugin æä¾çä¸ä¸ªæ°ç layers éç½®é¡¹ï¼å½å¯ç¨ layers æ¨¡å¼æåæ¶ï¼ä¸ä¸ª spring-boot-jarmode-layertools jar ä¼æåå° fat jar ä¸­ï¼æ°ç¹æ§æ¯ç±è¿ä¸ª jar æä¾çãè¿éä¸æ·±å¥è§£æå®ç°ç»èï¼èæ¯éç¹å³æ³¨å¦ä½æ¨¡å¼åä½¿ç¨è¿ä¸ªç¹æ§è·å¾æ¶çã\n\nè¦ä½¿ç¨æ­¤åè½ï¼å¿é¡»å¯ç¨åå±åè½ï¼\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n\n\n\n\n<project>\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupid>org.springframework.boot</groupid>\n\t\t\t\t<artifactid>spring-boot-maven-plugin</artifactid>\n\t\t\t\t<configuration>\n\t\t\t\t\t<layers>\n\t\t\t\t\t\t<enabled>true</enabled>\n\t\t\t\t\t</layers>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n</project>\n\n\né»è®¤æåµä¸ï¼å®ä¹äºä»¥ä¸å±ï¼\n\n * dependencies å¯¹äºçæ¬ä¸åå«çä»»ä½snapshotä¾èµé¡¹ã\n\n * spring-boot-loader ç¨äºjarå è½½ç¨åºç±»ã\n\n * snapshot-dependencies å¯¹äºå¶çæ¬åå«snapshotçä»»ä½ä¾èµé¡¹ã\n\n * application åºç¨ç¨åºç±»åèµæºã\n\nå±é¡ºåºå¾éè¦ï¼å ä¸ºå®ç¡®å®äºé¨ååºç¨ç¨åºæ´æ¹æ¶å¯ä»¥ç¼å­ååçå±çå¯è½æ§ãé»è®¤é¡ºåºä¸ºdependenciesï¼spring-boot-loaderï¼snapshot-dependenciesï¼applicationãåºè¯¥é¦åæ·»å æä¸å¯è½æ´æ¹çåå®¹ï¼ç¶åæ·»å æ´å¯è½æ´æ¹çå±ã\n\nå¢å éç½®ä¹å package æåï¼ç¶åå¯ä»¥æ§è¡ä»¥ä¸å½ä»¤éªè¯éç½®æ­£ç¡®ä¸å¦\n\n$ java -djarmode=layertools -jar simplify-upms-biz.jar\n\n\nä¸ä¸ªç¤ºä¾è¾åºï¼\n\n\n\n\n\n\n\nÂ \n\n\n\nusage:\n  java -djarmode=layertools -jar simplify-upms-biz.jar\n\navailable commands:\n  list     list layers from the jar that can be extracted\n  extract  extracts layers from the jar for image creation\n  help     help about any command\n\n\nè¯¥extractå½ä»¤å¯ç¨äºè½»æ¾å°å°åºç¨ç¨åºæåä¸ºå¤ä¸ªå±ï¼ä»¥æ·»å å°dockerfileä¸­ãè¿æ¯ä½¿ç¨jarmodeçdockerfileçç¤ºä¾ã\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \n\n\n\nÂ \n\n\nfrom adoptopenjdk:11-jre-hotspot as builder\nworkdir application\narg jar_file=target/*.jar\ncopy ${jar_file} application.jar\nrun java -djarmode=layertools -jar application.jar extract\n\nfrom adoptopenjdk:11-jre-hotspot\n\nlabel maintainer="info@ieooc.com"\nlabel version="1.0"\nlabel description="simplify-upms-biz"\n\nenv tz=asia/shanghai\nworkdir application\n\ncopy --from=builder application/dependencies/ ./\ncopy --from=builder application/spring-boot-loader/ ./\ncopy --from=builder application/snapshot-dependencies/ ./\ncopy --from=builder application/application/ ./\n\nexpose 4000\n\nentrypoint ["java", "org.springframework.boot.loader.jarlauncher"]\n\n\næ³¨æ\n\nè¿æ¯ä¸ä¸ªå¤é¶æ®µçdockerfileãæå»ºå¨é¶æ®µæåä»¥åéè¦çç®å½ãæ¯ä¸ªcopyå½ä»¤é½ä¸jarmodeæåçå±æå³ã\n\nå¯¹ä¸é¢ç dockerfile éè¡è§£éä¸ä¸ï¼\n\n * 2 ä¸ª from ä¿æç»ä¸ä¸ºè¿è¡æ¶ä½¿ç¨çåºç¡éåå³å¯ï¼\n * ç®çæä»¶ä¿æ application.jar å³å¯ï¼å®è¦è· java -djarmode=layertools -jaråé¢çæä»¶åä¸è´ï¼\n * labelæå®ä½èåçæ¬ä¿¡æ¯ï¼éå¿é¡»é¡¹ãä½æ¯ç®æ¯ spring boot å®¹å¨åçè¯å¥½å®è·µ\n * 4 ä¸ª copy 1 ä¸ª entrypoint ç§æå³å¯ï¼è¿æ¯æ¬ææ°ç¹æ§çå³é®ã\n\nç¶åï¼ç¨è¿ä¸ª dockerfile æå»ºåºæ¥çéååå®¹å·²ç»æ¯æè§£åæå¤å±çéåäºï¼å½åæ´æºç ãèµæºãå¿«ç§çä¾èµãæ­£å¼çä¾èµæ¶ä¼ä¾æ¬¡å½±åæ´å¤å±éåï¼ä»èå®ç°æ¯æ¬¡æå»ºä¸ä¼ ä»åºæ¶å­å¨åä¼ è¾èæ¶æå°åã\n\næç¤º\n\nåè®¾ä»¥ä¸dockerfileåå®¹ä½äºå½åç®å½ä¸­ï¼åå¯ä»¥ä½¿ç¨æå»ºdockeræ ådocker build .ï¼æèå¯ä»¥éæ©æå®åºç¨ç¨åºjarçè·¯å¾ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n$ docker build --build-arg jar_file=./target/simplify-upms-biz.jar . -t simplify-upms-biz:v1.0\n\n\n\n# æ¥çéååå±ä¿¡æ¯\n\næä»¬éè¿docker inspect simplify-upms-biz:v1.0æ¥çéåçæ¯å±çæ£åå¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n// simplify-upms-biz:v1.0 çæ¬éååå±ä¿¡æ¯æè¦\n"layers": [\n    "sha256:50644c29ef5a27c9a40c393a73ece2479de78325cae7d762ef3cdc19bf42dd0a",\n    "sha256:2104e5b926f69c4ad7a73be2c50541b8c2b8bd45ab882c9e5c4e388ccb556bef",\n    "sha256:f9a0984f718aa572e28dc4f776e4aa258f67e4f44ed5c63b6174962cc5617e78",\n    "sha256:d3f8c53ca74aa0fcc2e52c1ecd37f7507ccd6f8e63219ca60d05b94e68f524d5",\n    "sha256:2254b66d09be2cc6ae6feed4ea9f49dc4b14edaedbd7573d18d1f7d965389586",\n    "sha256:18bfcba3d17a9b06705a78c06cbc84e127f04a76fff70790af496b490b4a9e2e",\n    "sha256:28f08c714a6e10df22b986048e237dba87d850d25f4e03bea68cbf7de91b8841",\n    "sha256:e662f81e0c921b2a18dbe472d842185f2d767938b1118d83d4d1d2d1ce032e74",\n    "sha256:519d5530049b599f94a6ccbb15b4e659d01aa7b3f3bc18a772414a6c5aed0035"\n]\n\n\n\n# æ¨¡ååçº§éæ°æå»º\n\næä»¬å¯¹ simplify-upms-biz ç¨åºè¿è¡é¨åä¿®æ¹ï¼æ¨¡æå¼åè¿ç¨ï¼ï¼ç¶åéæ°æå»ºéå\n\n$ docker build --build-arg jar_file=./target/simplify-upms-biz.jar . -t simplify-upms-biz:v1.1\n\n\næ­¤æ¶éååå±ä¿¡æ¯å¦ä¸ docker inspect simplify-upms-biz:v1.1\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n// simplify-upms-biz:v1.1 çæ¬éååå±ä¿¡æ¯æè¦\n"layers": [\n    "sha256:50644c29ef5a27c9a40c393a73ece2479de78325cae7d762ef3cdc19bf42dd0a",\n    "sha256:2104e5b926f69c4ad7a73be2c50541b8c2b8bd45ab882c9e5c4e388ccb556bef",\n    "sha256:f9a0984f718aa572e28dc4f776e4aa258f67e4f44ed5c63b6174962cc5617e78",\n    "sha256:d3f8c53ca74aa0fcc2e52c1ecd37f7507ccd6f8e63219ca60d05b94e68f524d5",\n    "sha256:2254b66d09be2cc6ae6feed4ea9f49dc4b14edaedbd7573d18d1f7d965389586",\n    "sha256:18bfcba3d17a9b06705a78c06cbc84e127f04a76fff70790af496b490b4a9e2e",\n    "sha256:28f08c714a6e10df22b986048e237dba87d850d25f4e03bea68cbf7de91b8841",\n    "sha256:a1dc1f8cdf9ea2744fe64ecb20a9094ba8f094728c51b21ac6bf5e652916bdb0",\n    "sha256:f379fb50808d8e5483b276747d93b729308e7fe52de1d52c02a4912e6316c9fb"\n]\n\n\n\n# æ¯è¾ v1.0ãv1.1 éå\n\néè¿æ¯è¾ v1.0 å v1.1 çæ¬çéåæè¦ä¿¡æ¯ï¼æä»¬ä¼åç°åªææåçä¸å±åçäºååï¼æä»¬éè¿ dive æ¯ä¸ä¸ªç¨ go è¯­è¨ç¼åç docker éååæå·¥å· æ¥ç¡®å®ä¸ä¸ æåä¸å±æ¯åäºåªäºäºæ\n\nä½¿ç¨éååæå·¥å·è¿è¡åæ\n\n docker run --rm -it \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    wagoodman/dive:latest simplify-upms-biz\n\n\nåæåå®¹è¾åºå¦ä¸ï¼\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nâ layers âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ â â current layer contents â£ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ\ncmp   size  command                                                                                  permission     uid:gid       size  filetree\n    5.6 mb  from 31609b718dd2bed                                                                     -rw-r--r--         0:0      30 kb  â   â       âââ latencyutils-2.0.3.jar\n     12 mb  alpine_glibc_base_url="https://github.com/sgerrand/alpine-pkg-glibc/releases/download" & -rw-r--r--         0:0     140 kb  â   â       âââ archaius-core-0.7.6.jar\n       0 b  mkdir -p /usr/lib/java/                                                                  -rw-r--r--         0:0     122 kb  â   â       âââ aspectjrt-1.9.6.jar\n    402 mb  #(nop) add file:65d2a21c343d4f40c5b76862829bee1b24ef58f2bd077129ce6e61765786a638 in .    -rw-r--r--         0:0     2.1 mb  â   â       âââ aspectjweaver-1.9.6.jar\n       0 b  workdir /application                                                                     -rw-r--r--         0:0     878 kb  â   â       âââ bcpkix-jdk15on-1.64.jar\n     76 mb  copy application/dependencies/ ./ # buildkit                                             -rw-r--r--         0:0     4.8 mb  â   â       âââ bcprov-jdk15on-1.64.jar\n    240 kb  copy application/spring-boot-loader/ ./ # buildkit                                       -rw-r--r--         0:0     3.5 mb  â   â       âââ byte-buddy-1.10.18.jar\n     82 kb  copy application/snapshot-dependencies/ ./ # buildkit                                    -rw-r--r--         0:0     201 kb  â   â       âââ checker-qual-2.11.1.jar\n    108 kb  copy application/application/ ./ # buildkit                                              -rw-r--r--         0:0     505 kb  â   â       âââ classgraph-4.8.83.jar\n                                                                                                     -rw-r--r--         0:0      68 kb  â   â       âââ classmate-1.5.1.jar\nâ layer details ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ -rw-r--r--         0:0     348 kb  â   â       âââ commons-codec-1.14.jar\n                                                                                                     -rw-r--r--         0:0     588 kb  â   â       âââ commons-collections-3.2.2.jar\ntags:   (unavailable)                                                                                -rw-r--r--         0:0     354 kb  â   â       âââ commons-configuration-1.8.jar\nid:     bc864cc37f3f9cc88d08849efd54796b8f69644cfa4c3cc45cb49e66c7af381f                             -rw-r--r--         0:0      72 kb  â   â       âââ commons-fileupload-1.4.jar\ndigest: sha256:519d5530049b599f94a6ccbb15b4e659d01aa7b3f3bc18a772414a6c5aed0035                      -rw-r--r--         0:0     174 kb  â   â       âââ commons-io-2.2.jar\ncommand:                                                                                             -rw-r--r--         0:0     284 kb  â   â       âââ commons-lang-2.6.jar\ncopy application/application/ ./ # buildkit                                                          -rw-r--r--         0:0     117 kb  â   â       âââ concurrentlinkedhashmap-lru-1.4.2.jar\n                                                                                                     -rw-r--r--         0:0     3.5 mb  â   â       âââ druid-1.2.3.jar\nâ image details ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ -rw-r--r--         0:0      20 kb  â   â       âââ druid-spring-boot-starter-1.2.3.jar\n                                                                                                     -rw-r--r--         0:0      14 kb  â   â       âââ error_prone_annotations-2.3.4.jar\n                                                                                                     -rw-r--r--         0:0     4.6 kb  â   â       âââ failureaccess-1.0.1.jar\ntotal image size: 497 mb                                                                             -rw-r--r--         0:0     652 kb  â   â       âââ fastjson-1.2.71.jar\npotential wasted space: 483 kb                                                                       -rw-r--r--         0:0     189 kb  â   â       âââ feign-core-10.10.1.jar\nimage efficiency score: 99 %                                                                         -rw-r--r--         0:0      30 kb  â   â       âââ feign-form-3.8.0.jar\n                                                                                                     -rw-r--r--         0:0      14 kb  â   â       âââ feign-form-spring-3.8.0.jar\ncount   total space  path                                                                            -rw-r--r--         0:0      18 kb  â   â       âââ feign-hystrix-10.10.1.jar\n    2        430 kb  /etc/ssl/certs/ca-certificates.crt                                              -rw-r--r--         0:0     3.7 kb  â   â       âââ feign-slf4j-10.10.1.jar\n    2         30 kb  /lib/apk/db/installed                                                           -rw-r--r--         0:0     1.7 mb  â   â       âââ freemarker-2.3.30.jar\n    2         22 kb  /lib/apk/db/scripts.tar                                                         -rw-r--r--         0:0     2.8 mb  â   â       âââ guava-29.0-jre.jar\n    2         219 b  /lib/apk/db/triggers                                                            -rw-r--r--         0:0     1.3 mb  â   â       âââ hibernate-validator-6.1.6.final.jar\n    2         198 b  /etc/apk/world                                                                  -rw-r--r--         0:0     180 kb  â   â       âââ httpasyncclient-4.1.4.jar\n    2           0 b  /var/cache/misc                                                                 -rw-r--r--         0:0     780 kb  â   â       âââ httpclient-4.5.13.jar\n    2           0 b  /lib/apk/db/lock                                                                -rw-r--r--         0:0     328 kb  â   â       âââ httpcore-4.4.14.jar\n    2           0 b  /usr/local/share                                                                -rw-r--r--         0:0     369 kb  â   â       âââ httpcore-nio-4.4.14.jar\n    2           0 b  /usr/bin/wget                                                                   -rw-r--r--         0:0     1.8 mb  â   â       âââ hutool-all-5.4.5.jar\n    2           0 b  /root                                                                           -rw-r--r--         0:0     468 kb  â   â       âââ hystrix-core-1.5.18.jar\n    2           0 b  /etc/apk/protected_paths.d                                                      -rw-r--r--         0:0     8.8 kb  â   â       âââ j2objc-annotations-1.3.jar\n\n\n\n# æ»ç»\n\næ è®ºä»æç¨ç¨åº¦è¿æ¯è¾¾å°çææä¸è®²ï¼layered jar é½éå¸¸å¼å¾ä½¿ç¨ãè¦ä½¿ç¨è¯¥ç¹æ§åªéè¦å¼å¯ pom ä¸­ä¸ä¸ªéç½®é¡¹å¹¶ä½¿ç¨ä¸ä¸ªå ä¹ä¸éè¦ä»»ä½ä¿®æ¹ç dockerfile æ¨¡æ¿ï¼å ä¹é¶è´æè·å¾å¯è§çæ¶çã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡",frontmatter:{title:"Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/a60efa/"},regularPath:"/21.Simplify/01.Simplify%20Docs/08.Docker%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8TLS%E4%BF%9D%E6%8A%A4%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8BDocker%E6%9C%8D%E5%8A%A1.html",relativePath:"21.Simplify/01.Simplify Docs/08.Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡.md",key:"v-9d6dab12",path:"/pages/a60efa/",headers:[{level:2,title:"æå¡å¨ç¯å¢",slug:"æå¡å¨ç¯å¢",normalizedTitle:"æå¡å¨ç¯å¢",charIndex:78},{level:2,title:"Dockeræå¡ç«¯,å®¢æ·ç«¯åCAè¯ä¹¦",slug:"dockeræå¡ç«¯-å®¢æ·ç«¯åcaè¯ä¹¦",normalizedTitle:"dockeræå¡ç«¯,å®¢æ·ç«¯åcaè¯ä¹¦",charIndex:190},{level:2,title:"ä½¿ç¨OpenSSLåå»ºCAåæå¡ç«¯å¯é¥key",slug:"ä½¿ç¨opensslåå»ºcaåæå¡ç«¯å¯é¥key",normalizedTitle:"ä½¿ç¨opensslåå»ºcaåæå¡ç«¯å¯é¥key",charIndex:1076},{level:3,title:"æ­¥éª¤1:çæCAç§é¥ca-key.pem",slug:"æ­¥éª¤1-çæcaç§é¥ca-key-pem",normalizedTitle:"æ­¥éª¤1:çæcaç§é¥ca-key.pem",charIndex:1167},{level:3,title:"æ­¥éª¤2:ä½¿ç¨CAç§é¥çæèªç­¾åCAè¯ä¹¦ca.pem",slug:"æ­¥éª¤2-ä½¿ç¨caç§é¥çæèªç­¾åcaè¯ä¹¦ca-pem",normalizedTitle:"æ­¥éª¤2:ä½¿ç¨caç§é¥çæèªç­¾åcaè¯ä¹¦ca.pem",charIndex:1631},{level:3,title:"çææå¡å¨ç§é¥server-key.pemåè¯ä¹¦ç­¾åè¯·æ±server-csr",slug:"çææå¡å¨ç§é¥server-key-pemåè¯ä¹¦ç­¾åè¯·æ±server-csr",normalizedTitle:"çææå¡å¨ç§é¥server-key.pemåè¯ä¹¦ç­¾åè¯·æ±server-csr",charIndex:2738},{level:3,title:"ç¼åextfile.cnf",slug:"ç¼åextfile-cnf",normalizedTitle:"ç¼åextfile.cnf",charIndex:3131},{level:3,title:"ä½¿ç¨CAè¯ä¹¦çææå¡å¨ç­¾åè¯ä¹¦server-cert.pem",slug:"ä½¿ç¨caè¯ä¹¦çææå¡å¨ç­¾åè¯ä¹¦server-cert-pem",normalizedTitle:"ä½¿ç¨caè¯ä¹¦çææå¡å¨ç­¾åè¯ä¹¦server-cert.pem",charIndex:3920},{level:2,title:"å©ç¨CAåå»ºå®¢æ·ç«¯å¯é¥key",slug:"å©ç¨caåå»ºå®¢æ·ç«¯å¯é¥key",normalizedTitle:"å©ç¨caåå»ºå®¢æ·ç«¯å¯é¥key",charIndex:4359},{level:3,title:"æ­¥éª¤1:çæå®¢æ·ç«¯ç§é¥key.pemåè¯ä¹¦ç­¾åè¯·æ±client-csr",slug:"æ­¥éª¤1-çæå®¢æ·ç«¯ç§é¥key-pemåè¯ä¹¦ç­¾åè¯·æ±client-csr",normalizedTitle:"æ­¥éª¤1:çæå®¢æ·ç«¯ç§é¥key.pemåè¯ä¹¦ç­¾åè¯·æ±client-csr",charIndex:4500},{level:3,title:"æ­¥éª¤2:ç¼åæ©å±éç½®æä»¶extfile.cnf",slug:"æ­¥éª¤2-ç¼åæ©å±éç½®æä»¶extfile-cnf",normalizedTitle:"æ­¥éª¤2:ç¼åæ©å±éç½®æä»¶extfile.cnf",charIndex:4960},{level:3,title:"æ­¥éª¤3:çæç­¾åæä»¶cert.pem",slug:"æ­¥éª¤3-çæç­¾åæä»¶cert-pem",normalizedTitle:"æ­¥éª¤3:çæç­¾åæä»¶cert.pem",charIndex:5167},{level:3,title:"ä¿®æ¹æä»¶æé",slug:"ä¿®æ¹æä»¶æé",normalizedTitle:"ä¿®æ¹æä»¶æé",charIndex:5448},{level:2,title:"å¯å¨Dockerå®æ¤è¿ç¨",slug:"å¯å¨dockerå®æ¤è¿ç¨",normalizedTitle:"å¯å¨dockerå®æ¤è¿ç¨",charIndex:5650},{level:3,title:"éæ°å è½½éç½®",slug:"éæ°å è½½éç½®",normalizedTitle:"éæ°å è½½éç½®",charIndex:8050},{level:3,title:"éæ°å¯å¨",slug:"éæ°å¯å¨",normalizedTitle:"éæ°å¯å¨",charIndex:8094},{level:3,title:"éå¯åæ¥çæå¡ç¶æï¼",slug:"éå¯åæ¥çæå¡ç¶æ",normalizedTitle:"éå¯åæ¥çæå¡ç¶æï¼",charIndex:8137},{level:2,title:"ä½¿ç¨è¯ä¹¦è¿æ¥",slug:"ä½¿ç¨è¯ä¹¦è¿æ¥",normalizedTitle:"ä½¿ç¨è¯ä¹¦è¿æ¥",charIndex:479},{level:2,title:"docker-java å¯ç¨TLS",slug:"docker-java-å¯ç¨tls",normalizedTitle:"docker-java å¯ç¨tls",charIndex:10853}],headersStr:"æå¡å¨ç¯å¢ Dockeræå¡ç«¯,å®¢æ·ç«¯åCAè¯ä¹¦ ä½¿ç¨OpenSSLåå»ºCAåæå¡ç«¯å¯é¥key æ­¥éª¤1:çæCAç§é¥ca-key.pem æ­¥éª¤2:ä½¿ç¨CAç§é¥çæèªç­¾åCAè¯ä¹¦ca.pem çææå¡å¨ç§é¥server-key.pemåè¯ä¹¦ç­¾åè¯·æ±server-csr ç¼åextfile.cnf ä½¿ç¨CAè¯ä¹¦çææå¡å¨ç­¾åè¯ä¹¦server-cert.pem å©ç¨CAåå»ºå®¢æ·ç«¯å¯é¥key æ­¥éª¤1:çæå®¢æ·ç«¯ç§é¥key.pemåè¯ä¹¦ç­¾åè¯·æ±client-csr æ­¥éª¤2:ç¼åæ©å±éç½®æä»¶extfile.cnf æ­¥éª¤3:çæç­¾åæä»¶cert.pem ä¿®æ¹æä»¶æé å¯å¨Dockerå®æ¤è¿ç¨ éæ°å è½½éç½® éæ°å¯å¨ éå¯åæ¥çæå¡ç¶æï¼ ä½¿ç¨è¯ä¹¦è¿æ¥ docker-java å¯ç¨TLS",content:'# Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡\n\næç¤º\n\nåèå®æ¹æç¨å®ç°éè¿èªå®ä¹è¯ä¹¦å¯¹è¿ç¨Dockerä¸»æºçå®å¨è®¿é®åæ§å¶ã\n\n\n\n\n# æå¡å¨ç¯å¢\n\n * Ubuntu 20.04 LTS focal\n * Docker Version Server: Docker Engine - Community Engine:Versionï¼20.10.3\n\n\n# Dockeræå¡ç«¯,å®¢æ·ç«¯åCAè¯ä¹¦\n\né»è®¤æåµä¸ï¼Dockeréè¿éèç½çUnixå¥æ¥å­è¿è¡ãå®è¿å¯ä»¥éæ©ä½¿ç¨HTTPå¥æ¥å­è¿è¡éä¿¡ã\n\nè¿éæä¸ä¸ªè§è²,Dockeræå¡ç«¯åDockerå®¢æ·ç«¯åCAç­¾åçè¯ä¹¦\n\n * Dockeræå¡ç«¯ï¼å¯¹åºè¿è¡Dockerå®æ¤ç¨åºçä¸»æº\n   * éè¿å¼æ¾ç«¯å£(ä¸è¬ä¸º2376)æ¯æè¿ç¨è¿æ¥\n   * éè¿æå®tlsverifyæ å¿å¹¶å°Dockerçtlscacertæ å¿æåå¯ä¿¡çCAè¯ä¹¦æ¥å¯ç¨TLSä»¥å®ç°å®å¨è®¿é®(ä»åè®¸ç±è¯¥CAç­¾åçè¯ä¹¦è¿è¡èº«ä»½éªè¯çå®¢æ·ç«¯è¿æ¥)\n * Dockerå®¢æ·ç«¯ï¼å³é»è®¤æåµä¸çDockerä¸»æº\n   * å½ä½¿ç¨è¯ä¹¦è¿æ¥æ¶,ä»è½è¿æ¥å°å·æè¯¥CAç­¾åçè¯ä¹¦çæå¡å¨\n * CAç­¾åçè¯ä¹¦\n   * ä½ç¨ï¼æå¡ç«¯åå®¢æ·ç«¯è¯ä¹¦é½åªå¯¹åºä¸ä»½ä¿¡ä»»åè¡¨ï¼ä¿¡ä»»åè¡¨éæ¯æå¡ç«¯çä¿¡æ¯(å¦ipæååç­ç­)ï¼æå¡ç«¯æææå¡ç«¯è¯ä¹¦ï¼ä»æ¥åææå®¢æ·ç«¯è¯ä¹¦çä¸»æºè®¿é®(è¿éå¯ä»¥åå ä¸å¶ä»çéå¶,è¯¦æè§ä¸æ)\n\næ³¨æ\n\n * Dockeræå¡ç«¯ä¹å¯ä»¥ä¸å¼å¯TLSéªè¯ï¼ä¸è¿è¿æ ·å­å¾ä¸å®å¨ï¼çäº§ç¯å¢ä¸åºå½å°½éé¿åãå¦æåªæ¯è¯éªæ§çï¼å¯ä»¥æå®å³é­TLSéªè¯,ä½åªå¯¹ç¹å®ä¸»æºå¼æ¾ï¼æ¹æ³è§åæ/etc/docker/daemon.jsonéç½®ç¸å³\n * å¦æDockeræå¡ç«¯æ²¡æå¼å¯TLSéªè¯ï¼åDockerå®¢æ·ç«¯ä¸éè¦ä½¿ç¨è¯ä¹¦è¿æ¥ãä½å¦æå®¢æ·ç«¯ä¸ä½¿ç¨è¯ä¹¦è¿æ¥å¼å¯äºTLSéªè¯çæå¡ç«¯ï¼åä¼æ¥é,å¦ä¸:\n\nGet http://è¿ç¨ä¸»æºip:2376/v1.38/version: net/http: HTTP/1.x transport connection broken: malformed HTTP response "\\x15\\x03\\x01\\x00\\x02\\x02".\n* Are you trying to connect to a TLS-enabled daemon without TLS?\n\n\n * å¦æDockerå®¢æ·ç«¯è¿æ¥æ¶ä½¿ç¨çè¯ä¹¦åä¸å«ç®çä¸»æºçä¿¡æ¯,åä¼æç¤ºå¯¹æ¹ä¸»æºä¸å¨è¯ä¹¦ä¿¡ä»»åè¡¨å,è®¿é®å¤±è´¥\n\n\n# ä½¿ç¨OpenSSLåå»ºCAåæå¡ç«¯å¯é¥key\n\næ³¨æ\n\nå°ä»¥ä¸ç¤ºä¾ä¸­çææ$HOSTå®ä¾æ¿æ¢ä¸ºDockerå®æ¤ç¨åºä¸»æºçååæIPå°å\n\nä»¥ä¸æ­¥éª¤å¨Dockeræå¡ç«¯è¿è¡:\n\n\n# æ­¥éª¤1:çæCAç§é¥ca-key.pem\n\næç¤º\n\nca-key.pemæ¯ä¸ä¸ªä¸´æ¶æä»¶ï¼æåå¯ä»¥å é¤ã\n\n$ openssl genrsa -aes256 -out ca-key.pem 4096\n\n\nä¾å­å¦ä¸ï¼éè¦è®¾ç½®å¯ç å¹¶éªè¯ï¼èªå®ä¹è¾å¥å¯ç ï¼è®°ä½åé¢éè¦ç¨ï¼\n\n$ openssl genrsa -aes256 -out ca-key.pem 4096\nGenerating RSA private key, 4096 bit long modulus (2 primes)\n......++++\n....................................................................................................++++\ne is 65537 (0x010001)\nEnter pass phrase for ca-key.pem:\nVerifying - Enter pass phrase for ca-key.pem:\n\n\n\n# æ­¥éª¤2:ä½¿ç¨CAç§é¥çæèªç­¾åCAè¯ä¹¦ca.pem\n\næç¤º\n\nçæè¯ä¹¦æ¶ï¼éè¿-days 365è®¾ç½®è¯ä¹¦çæææãåä½ä¸ºå¤©ï¼é»è®¤æåµä¸ä¸º30å¤©ãæäºCAè¯ä¹¦å,å°±å¯ä»¥åå»ºæå¡å¨å¯é¥åè¯ä¹¦ç­¾åè¯·æ±ï¼CSRï¼äº\n\n$ openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem\n\n\nä¾å­å¦ä¸ï¼éè¦éªè¯å¯ç å¹¶è¾å¥ä¿¡æ¯ï¼(å¶ä»å±æ§ç´æ¥åè½¦ä¹æ²¡å³ç³»,åæ­£ä¹åªæ¯èªå·±ç¨çè¯ä¹¦)\n\næ³¨æ\n\nå°ä»¥ä¸ç¤ºä¾ä¸­çææ$HOSTå®ä¾æ¿æ¢ä¸ºDockerå®æ¤ç¨åºä¸»æºçååæIPå°å\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n$ openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem\nEnter pass phrase for ca-key.pem: # è¾å¥ä¸ä¸æ­¥è®¾ç½®çå¯ç  åè½¦\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter \'.\', the field will be left blank.\n-----\nCountry Name (2 letter code) [AU]:CN\nState or Province Name (full name) [Some-State]:BeiJing\nLocality Name (eg, city) []:BeiJing\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:Docker Inc\nOrganizational Unit Name (eg, section) []:IT Dept\nCommon Name (e.g. server FQDN or YOUR name) []:$HOST # è¿éå¦ææ²¡æååå¯ä»¥æ¿æ¢æä¸»æºIP\nEmail Address []:info@ieooc.com\n\n\n\n# çææå¡å¨ç§é¥server-key.pemåè¯ä¹¦ç­¾åè¯·æ±server-csr\n\næç¤º\n\nCSR:Certificate Signing Request,è¯ä¹¦ç­¾åè¯·æ±,server-csræ¯ä¸ä¸ªä¸´æ¶æä»¶ï¼çæserver-cert.pemä»¥åï¼å¯ä»¥å é¤ã\n\næ³¨æ\n\næ³¨æè¿éçCNä¿¡æ¯å¯¹åºçæ¯æå¡å¨æå¨ä¸»æºåå,å¦ææ²¡æçè¯ä¹æ²¡å³ç³»,å¯ä»¥éè¿ä¸ä¸æ­¥çextfile.cnféç½®IPå°åè¿æ¥\n\nç¬¬ä¸æ­¥ï¼çææå¡å¨ç§é¥server-key.pem\n\n$ openssl genrsa -out server-key.pem 4096\n\n\nç¬¬äºæ­¥ï¼ä½¿ç¨æå¡å¨ç§é¥å¦å CNä¿¡æ¯çæè¯ä¹¦ç­¾åè¯·æ±server-csr.pem\n\n$ openssl req -subj "/CN=$HOST" -sha256 -new -key server-key.pem -out server.csr\n\n\n\n# ç¼åextfile.cnf\n\næç¤º\n\nè¿ä¸ªæä»¶ç¨äºæå®ä¸ä¸æ­¥çæç­¾åè¯ä¹¦çä¸äºå±æ§éç½®,è¿éæä»¬ä¸»è¦ç¨å°ä¸¤ä¸ªå±æ§,å¦æè¦å¶ä»è¦æ±(å¦éå¶æå®ipèå´çå®¢æ·ç«¯æè½è¿æ¥)çå¯ä»¥çOpenSSL x509v3_configææ¡£\n\n * subjectAltNameï¼ ä¸»é¢å¤éåç§°,æ¯æç¹åä¸ä¸æ­¥çæserver.csræ¶æç¨çéé¡¹-subj "/CN=10.17.1.101"çä¸è¥¿,è¿ä¸ªæ´åä¸ä¸ªè¯´æè¡¥å,è¿éå¯ä»¥å¡«ä¿¡ä»»çDNSåååä¸»æºIPç­ç­,å ä¸ºæ²¡æåå,æä»¥æåªå¡«äºDockeræå¡å¨çä¸»æºIPï¼å¦å¤,éè¦ç¹å«æ³¨æ,è¿éå¯¹åºçæçæ¯ä¸ä»½ä¿¡ä»»åè¡¨,è¿éæè¯´çä¿¡ä»»æ¯å¯¹æå¡ç«¯çä¿¡ä»»,æä»¥å¡«çæ¯æå¡ç«¯çä¿¡æ¯(å¦åå,IP),æä¹åçå°ææç« è¯´è¿éçåè¡¨æ¯å®¢æ·ç«¯çåè¡¨,åªæå¨åè¡¨ä¸­çå®¢æ·ç«¯æè½è®¿é®æå¡å¨,è¿ç§è¯´æ³æ¯éè¯¯,å¨ä½¿ç¨è¯ä¹¦è¿æ¥å°æå¡å¨æ¶,ä¼æ¥éè¯´æå¡å¨IPä¸å¨ä¿¡ä»»åè¡¨ä¸­( å¦è¿ç¨ä¸»æºipä¸ºip3,è¯ä¹¦çä¿¡ä»»åè¡¨ä¸ºip1åip2æ¶,è¥ä½¿ç¨è¯¥è¯ä¹¦è®¿é®è¿ç¨ä¸»æº,åä¼æ¥éx509: certificate is valid for ip1, ip2, not ip3)\n * extendedKeyUsageï¼ æ©å±å¯é¥ç¨æ³,æ­¤æ©å±åå«ä¸ä¸ªç¨æ³åè¡¨ï¼ç¨äºæç¤ºè¯ä¹¦å¬é¥å¯ç¨äºçç®ç\n\nç±äºå¯ä»¥éè¿IPå°ååDNSåç§°å»ºç«TLSè¿æ¥ï¼å æ­¤å¨åå»ºè¯ä¹¦æ¶éè¦æå®IPå°åãä¾å¦ï¼åè®¸ä½¿ç¨10.10.10.20å127.0.0.1è¿è¡è¿æ¥ï¼\n\n$ echo subjectAltName = DNS:$HOST,IP:10.10.10.20,IP:127.0.0.1 >> extfile.cnf\n\n\nå°Dockerå®æ¤ç¨åºå¯é¥çæ©å±ä½¿ç¨å±æ§è®¾ç½®ä¸ºä»ç¨äºæå¡å¨èº«ä»½éªè¯\n\n$ echo extendedKeyUsage = serverAuth >> extfile.cnf\n\n\n\n# ä½¿ç¨CAè¯ä¹¦çææå¡å¨ç­¾åè¯ä¹¦server-cert.pem\n\næç¤º\n\nä¸é¢æ»å±çæäºä¸¤å¤§æ¨¡åçæä»¶åä¸ä¸ªextfile.cnféç½®æä»¶,è¿ä¸é¨åä¹é´æ¯å½¼æ­¤ç¬ç«ç,å°äºè¿ä¸æ­¥,ä¹æ¯æåä¸æ­¥æçæ­£åäºæ´å\n\nè¿éè¦ç¨å°çæä¸¤ä¸ªæä»¶ï¼\n\n * (1)CAç§é¥ca-key.pemåCAç­¾åæä»¶ca.pem\n * (2)è¯ä¹¦ç­¾åè¯·æ±server-csr(3)éç½®æä»¶extfile.cnf\n\næä»¤å¦ä¸:\n\n$ openssl x509 -req -days 365 -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out server-cert.pem -extfile extfile.cnf\n\n\næ§å¶å°è¾åºï¼\n\nSignature ok\nsubject=CN = your.host.com\nGetting CA Private Key\n\n\nè³æ­¤,Dockeræå¡ç«¯å¯é¥åå»ºå®æ¯ã\n\n\n# å©ç¨CAåå»ºå®¢æ·ç«¯å¯é¥key\n\næç¤º\n\nçæå¯é¥éè¦ä½¿ç¨CAç§é¥åç­¾åæä»¶,ä¸ºç®åæµç¨,é¿åCAæä»¶å¨æå¡ç«¯åå®¢æ·ç«¯ä¹é´çä¼ è¾,ä»¥ä¸æ­¥éª¤ä»å¨Dockeræå¡ç«¯è¿è¡\n\nåå»ºå®¢æ·ç«¯å¯é¥çè¿ç¨åæå¡ç«¯ç±»ä¼¼,CAç¸å³å·²ç»åå»ºå¥½äº,extfile.cnféç½®æä»¶ä¹ç®åå¾å¤,å·ä½å¦ä¸\n\n\n# æ­¥éª¤1:çæå®¢æ·ç«¯ç§é¥key.pemåè¯ä¹¦ç­¾åè¯·æ±client-csr\n\nçæå®¢æ·ç«¯ç§é¥key.pem\n\nopenssl genrsa -out key.pem 4096\n\n\næ§å¶å°è¾åºï¼\n\nGenerating RSA private key, 4096 bit long modulus (2 primes)\n.............................++++\n......................................................................................................................................................++++\ne is 65537 (0x010001)\n\n\nè¯ä¹¦ç­¾åè¯·æ±client-csr\n\n$ openssl req -subj \'/CN=client\' -new -key key.pem -out client.csr\n\n\n\n# æ­¥éª¤2:ç¼åæ©å±éç½®æä»¶extfile.cnf\n\næ³¨æ\n\nå¦ææ¯å¨åæåå»ºæå¡å¨ç§é¥çæä»¶å¤¹ä¸,åºè¯¥è¿æåæ¥çextfile.cnfæä»¶,ä¸ºé¿åè¦å,å¯ä»¥åæ§è¡éå½å\n\n$ mv extfile.cnf extfile.cnf.old\n\n\nåå»ºæ©å±éç½®æä»¶å¹¶ä½¿å¯é¥éç¨äºå®¢æ·ç«¯èº«ä»½éªè¯çæä»¤å¦ä¸:\n\n$ echo extendedKeyUsage = clientAuth >> extfile.cnf\n\n\n\n# æ­¥éª¤3:çæç­¾åæä»¶cert.pem\n\n$ openssl x509 -req -days 365 -sha256 -in client.csr -CA ca.pem -CAkey ca-key.pem \\\n  -CAcreateserial -out cert.pem -extfile extfile.cnf\n\n\næ§å¶å°è¾åºï¼\n\n\n\n\n\nÂ \n\n\nSignature ok\nsubject=/CN=client\nGetting CA Private Key\nEnter pass phrase for ca-key.pem: # è¾å¥éªè¯å¯ç  åè½¦\n\n\n\n# ä¿®æ¹æä»¶æé\n\næ­¥éª¤1:å é¤ä¸¤ä¸ªè¯ä¹¦ç­¾åè¯·æ±æä»¶\n\n$ rm -v client.csr server.csr\n\n\næ­¥éª¤2:ä¿®æ¹å¯é¥æä»¶æéä¸ºåªç±ææèè¯»å\n\n$ chmod -v 0400 ca-key.pem key.pem server-key.pem\n\n\næ­¥éª¤3:ä¿®æ¹è¯ä¹¦æä»¶æéä¸ºåªè¯»\n\n$ chmod -v 0444 ca.pem server-cert.pem cert.pem\n\n\n\n# å¯å¨Dockerå®æ¤è¿ç¨\n\nå¯å¨Dockerå®æ¤è¿ç¨æä¸¤ç§æ¹æ³,ç´æ¥ç¨å¸¦åæä»¤æèä¿®æ¹daemon.jsonéç½®æä»¶,å¦å¤,è¿æä¸ç§æ¹å¼ä½¿ç¨systemctlä¿®æ¹docker.serviceæä»¶,è¿ç§ä¸æ¨è,è¿éä¸ä½ä»ç».éè¦æ³¨æçæ¯,ä¸ç®¡æ¯åªä¸ç§æ¹æ³,åªè¦å¯¹åä¸å±æ§åäºéç½®,é½ä¼å¯¼è´å²çªèå¯å¨å¤±è´¥.æä»¥å»ºè®®åªä½¿ç¨ä¸ç§.\n\næ³¨æ\n\nçå¬unix:///var/run/docker.sockæ¯ä¸ºäºå®ç°æ¬æºdockerç´æ¥æ§å¶,çå¬tcp://0.0.0.0:2376è¡¨ç¤ºçå¬2376ç«¯å£ææè¿æ¥,åè¿éå¼å¯äºTLSéªè¯,åä¼æ ¹æ®æä»¬ç»å®çTLSæä»¶å»åéªè¯\n\næå¡ç«¯éè¦çTLSæä»¶æCAè¯ä¹¦ca.pem,æå¡ç«¯è¯ä¹¦server-cert.pem,æå¡ç«¯å¯é¥server-key.pem\n\nå°Dockeræå¡åæ­¢ï¼ç¶åä¿®æ¹dockeræå¡æä»¶\n\n$ vim /usr/lib/systemd/system/docker.service\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network-online.target firewalld.service containerd.service\nWants=network-online.target\nRequires=docker.socket containerd.service\n\n[Service]\nType=notify\n# the default is not to use systemd for cgroups because the delegate issues still\n# exists and systemd currently does not support the cgroup feature set required\n# for containers run by docker\n#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock\nExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --tlsverify --tlscacert=/opt/docker-ssl/ca.pem --tlscert=/opt/docker-ssl/server-cert.pem --tlskey=/opt/docker-ssl/server-key.pem -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2376\nTimeoutSec=0\nRestartSec=2\nRestart=always\n\n# Note that StartLimit* options were moved from "Service" to "Unit" in systemd 229.\n# Both the old, and new location are accepted by systemd 229 and up, so using the old location\n# to make them work for either version of systemd.\nStartLimitBurst=3\n\n# Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.\n# Both the old, and new name are accepted by systemd 230 and up, so using the old name to make\n# this option work for either version of systemd.\nStartLimitInterval=60s\n\n# Having non-zero Limit*s causes performance problems due to accounting overhead\n# in the kernel. We recommend using cgroups to do container-local accounting.\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\n\n# Comment TasksMax if your systemd version does not support it.\n# Only systemd 226 and above support this option.\nTasksMax=infinity\n\n# set delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\n\n# kill only the docker process, not all processes in the cgroup\nKillMode=process\nOOMScoreAdjust=-500\n\n[Install]\nWantedBy=multi-user.target\n\n\n\n# éæ°å è½½éç½®\n\n$ sudo systemctl daemon-reload\n\n\n\n# éæ°å¯å¨\n\n$ sudo systemctl restart docker\n\n\n\n# éå¯åæ¥çæå¡ç¶æï¼\n\n$ systemctl status docker \n\n\næ§å¶å°è¾åºï¼\n\nâ docker.service - Docker Application Container Engine\n     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)\n     Active: active (running) since Mon 2021-03-01 17:41:53 CST; 5min ago\nTriggeredBy: â docker.socket\n       Docs: https://docs.docker.com\n   Main PID: 3604191 (dockerd)\n      Tasks: 30\n     Memory: 56.0M\n     CGroup: /system.slice/docker.service\n             ââ3604191 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --tlsverify --tlscacert=/opt/docker-ssl/ca.pem --tlscert=/opt/docker-ssl/server-cert.pem --tlskey=/opt/docker-ssl/server-key.pem -H unix:/>\n             ââ3604407 /usr/bin/docker-proxy -proto tcp -host-ip 127.0.0.1 -host-port 1514 -container-ip 172.18.0.2 -container-port 10514\n\nMar 01 17:41:52 harbor dockerd[3604191]: time="2021-03-01T17:41:52.112268091+08:00" level=error msg="failed to start container" container=070eb39f7a00c182e7247b744d66289db8c91d5e762bc5127f68aa8481fc97d9 error="failed to initialize l>\nMar 01 17:41:52 harbor dockerd[3604191]: time="2021-03-01T17:41:52.148018184+08:00" level=error msg="753ed974e6c469f1fb0a40405563aaa9ea39596462fee72bec4f8edc4bcd90f2 cleanup: failed to delete container from containerd: no such conta>\nMar 01 17:41:52 harbor dockerd[3604191]: time="2021-03-01T17:41:52.148052892+08:00" level=error msg="failed to start container" container=753ed974e6c469f1fb0a40405563aaa9ea39596462fee72bec4f8edc4bcd90f2 error="failed to initialize l>\nMar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01T17:41:53.111270963+08:00" level=info msg="Loading containers: done."\nMar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01T17:41:53.138717581+08:00" level=info msg="Docker daemon" commit=46229ca graphdriver(s)=overlay2 version=20.10.3\nMar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01T17:41:53.138839158+08:00" level=info msg="Daemon has completed initialization"\nMar 01 17:41:53 harbor systemd[1]: Started Docker Application Container Engine.\nMar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01T17:41:53.157523613+08:00" level=info msg="API listen on /run/docker.sock"\nMar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01T17:41:53.168302054+08:00" level=info msg="API listen on /var/run/docker.sock"\nMar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01T17:41:53.173756154+08:00" level=info msg="API listen on [::]:2376"\n\n\nå·²ç»çæã\n\n\n# ä½¿ç¨è¯ä¹¦è¿æ¥\n\nå¤å¶ ca.pem , cert.pem , key.pem ä¸ä¸ªæä»¶å°å®¢æ·ç«¯\n\nå®¢æ·ç«¯éè¦çTLSæä»¶æCAè¯ä¹¦ca.pem,å®¢æ·ç«¯è¯ä¹¦cert.pem,å®¢æ·ç«¯å¯é¥key.pem\n\næ³¨æ\n\nå°ä»¥ä¸ç¤ºä¾ä¸­çææ$HOSTå®ä¾æ¿æ¢ä¸ºDockerå®æ¤ç¨åºä¸»æºçååæIPå°åï¼è¿æ¥çæä»¤æ ¼å¼å¦ä¸,ä»¥docker --versionä¸ºä¾\n\n$ docker --tlsverify --tlscacert=ca.pem --tlscert=cert.pem --tlskey=key.pem -H=$HOST:2376 --version\n\n\n\n# docker-java å¯ç¨TLS\n\né¡¹ç®éä½¿ç¨dockerçjavaå®¢æ·ç«¯docker-javaè°ç¨dockerï¼ä¸ºäºæ¯æTLSï¼å¨åå»ºå®¢æ·ç«¯æ¶ï¼éè¦å¢å TLSè®¾ç½®ã\n\né¦åå°ca.pem cert.pem key.pemè¿ä¸ä¸ªæä»¶æ·è´å°æ¬å°ï¼ä¾å¦E:\\\\docker\\\\",\n\nç¶åDefaultDockerClientConfigéwithDockerTlsVerifyè®¾ä¸ºtrueï¼å¹¶è®¾ç½®certpathä¸ºåæ·è´çç®å½ã\n\nCopyDefaultDockerClientConfig.Builder builder =\n                DefaultDockerClientConfig.createDefaultConfigBuilder()\n                    .withDockerHost("tcp://" + server + ":2375")\n                    .withApiVersion("1.30");\n            if (containerConfiguration.getDockerTlsVerify()) {\n                builder = builder.withDockerTlsVerify(true)\n                    .withDockerCertPath("E:\\\\docker\\\\");\n            }\n\treturn  DockerClientBuilder.getInstance(builder.build()).build()\n\t\t\t\n\n\nå¤§å·¥æå®ã',normalizedContent:'# dockerå®¢æ·ç«¯ä½¿ç¨tlsä¿æ¤è¿æ¥è¿ç¨dockeræå¡\n\næç¤º\n\nåèå®æ¹æç¨å®ç°éè¿èªå®ä¹è¯ä¹¦å¯¹è¿ç¨dockerä¸»æºçå®å¨è®¿é®åæ§å¶ã\n\n\n\n\n# æå¡å¨ç¯å¢\n\n * ubuntu 20.04 lts focal\n * docker version server: docker engine - community engine:versionï¼20.10.3\n\n\n# dockeræå¡ç«¯,å®¢æ·ç«¯åcaè¯ä¹¦\n\né»è®¤æåµä¸ï¼dockeréè¿éèç½çunixå¥æ¥å­è¿è¡ãå®è¿å¯ä»¥éæ©ä½¿ç¨httpå¥æ¥å­è¿è¡éä¿¡ã\n\nè¿éæä¸ä¸ªè§è²,dockeræå¡ç«¯ådockerå®¢æ·ç«¯åcaç­¾åçè¯ä¹¦\n\n * dockeræå¡ç«¯ï¼å¯¹åºè¿è¡dockerå®æ¤ç¨åºçä¸»æº\n   * éè¿å¼æ¾ç«¯å£(ä¸è¬ä¸º2376)æ¯æè¿ç¨è¿æ¥\n   * éè¿æå®tlsverifyæ å¿å¹¶å°dockerçtlscacertæ å¿æåå¯ä¿¡çcaè¯ä¹¦æ¥å¯ç¨tlsä»¥å®ç°å®å¨è®¿é®(ä»åè®¸ç±è¯¥caç­¾åçè¯ä¹¦è¿è¡èº«ä»½éªè¯çå®¢æ·ç«¯è¿æ¥)\n * dockerå®¢æ·ç«¯ï¼å³é»è®¤æåµä¸çdockerä¸»æº\n   * å½ä½¿ç¨è¯ä¹¦è¿æ¥æ¶,ä»è½è¿æ¥å°å·æè¯¥caç­¾åçè¯ä¹¦çæå¡å¨\n * caç­¾åçè¯ä¹¦\n   * ä½ç¨ï¼æå¡ç«¯åå®¢æ·ç«¯è¯ä¹¦é½åªå¯¹åºä¸ä»½ä¿¡ä»»åè¡¨ï¼ä¿¡ä»»åè¡¨éæ¯æå¡ç«¯çä¿¡æ¯(å¦ipæååç­ç­)ï¼æå¡ç«¯æææå¡ç«¯è¯ä¹¦ï¼ä»æ¥åææå®¢æ·ç«¯è¯ä¹¦çä¸»æºè®¿é®(è¿éå¯ä»¥åå ä¸å¶ä»çéå¶,è¯¦æè§ä¸æ)\n\næ³¨æ\n\n * dockeræå¡ç«¯ä¹å¯ä»¥ä¸å¼å¯tlséªè¯ï¼ä¸è¿è¿æ ·å­å¾ä¸å®å¨ï¼çäº§ç¯å¢ä¸åºå½å°½éé¿åãå¦æåªæ¯è¯éªæ§çï¼å¯ä»¥æå®å³é­tlséªè¯,ä½åªå¯¹ç¹å®ä¸»æºå¼æ¾ï¼æ¹æ³è§åæ/etc/docker/daemon.jsonéç½®ç¸å³\n * å¦ædockeræå¡ç«¯æ²¡æå¼å¯tlséªè¯ï¼ådockerå®¢æ·ç«¯ä¸éè¦ä½¿ç¨è¯ä¹¦è¿æ¥ãä½å¦æå®¢æ·ç«¯ä¸ä½¿ç¨è¯ä¹¦è¿æ¥å¼å¯äºtlséªè¯çæå¡ç«¯ï¼åä¼æ¥é,å¦ä¸:\n\nget http://è¿ç¨ä¸»æºip:2376/v1.38/version: net/http: http/1.x transport connection broken: malformed http response "\\x15\\x03\\x01\\x00\\x02\\x02".\n* are you trying to connect to a tls-enabled daemon without tls?\n\n\n * å¦ædockerå®¢æ·ç«¯è¿æ¥æ¶ä½¿ç¨çè¯ä¹¦åä¸å«ç®çä¸»æºçä¿¡æ¯,åä¼æç¤ºå¯¹æ¹ä¸»æºä¸å¨è¯ä¹¦ä¿¡ä»»åè¡¨å,è®¿é®å¤±è´¥\n\n\n# ä½¿ç¨opensslåå»ºcaåæå¡ç«¯å¯é¥key\n\næ³¨æ\n\nå°ä»¥ä¸ç¤ºä¾ä¸­çææ$hostå®ä¾æ¿æ¢ä¸ºdockerå®æ¤ç¨åºä¸»æºçååæipå°å\n\nä»¥ä¸æ­¥éª¤å¨dockeræå¡ç«¯è¿è¡:\n\n\n# æ­¥éª¤1:çæcaç§é¥ca-key.pem\n\næç¤º\n\nca-key.pemæ¯ä¸ä¸ªä¸´æ¶æä»¶ï¼æåå¯ä»¥å é¤ã\n\n$ openssl genrsa -aes256 -out ca-key.pem 4096\n\n\nä¾å­å¦ä¸ï¼éè¦è®¾ç½®å¯ç å¹¶éªè¯ï¼èªå®ä¹è¾å¥å¯ç ï¼è®°ä½åé¢éè¦ç¨ï¼\n\n$ openssl genrsa -aes256 -out ca-key.pem 4096\ngenerating rsa private key, 4096 bit long modulus (2 primes)\n......++++\n....................................................................................................++++\ne is 65537 (0x010001)\nenter pass phrase for ca-key.pem:\nverifying - enter pass phrase for ca-key.pem:\n\n\n\n# æ­¥éª¤2:ä½¿ç¨caç§é¥çæèªç­¾åcaè¯ä¹¦ca.pem\n\næç¤º\n\nçæè¯ä¹¦æ¶ï¼éè¿-days 365è®¾ç½®è¯ä¹¦çæææãåä½ä¸ºå¤©ï¼é»è®¤æåµä¸ä¸º30å¤©ãæäºcaè¯ä¹¦å,å°±å¯ä»¥åå»ºæå¡å¨å¯é¥åè¯ä¹¦ç­¾åè¯·æ±ï¼csrï¼äº\n\n$ openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem\n\n\nä¾å­å¦ä¸ï¼éè¦éªè¯å¯ç å¹¶è¾å¥ä¿¡æ¯ï¼(å¶ä»å±æ§ç´æ¥åè½¦ä¹æ²¡å³ç³»,åæ­£ä¹åªæ¯èªå·±ç¨çè¯ä¹¦)\n\næ³¨æ\n\nå°ä»¥ä¸ç¤ºä¾ä¸­çææ$hostå®ä¾æ¿æ¢ä¸ºdockerå®æ¤ç¨åºä¸»æºçååæipå°å\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n$ openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem\nenter pass phrase for ca-key.pem: # è¾å¥ä¸ä¸æ­¥è®¾ç½®çå¯ç  åè½¦\nyou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nwhat you are about to enter is what is called a distinguished name or a dn.\nthere are quite a few fields but you can leave some blank\nfor some fields there will be a default value,\nif you enter \'.\', the field will be left blank.\n-----\ncountry name (2 letter code) [au]:cn\nstate or province name (full name) [some-state]:beijing\nlocality name (eg, city) []:beijing\norganization name (eg, company) [internet widgits pty ltd]:docker inc\norganizational unit name (eg, section) []:it dept\ncommon name (e.g. server fqdn or your name) []:$host # è¿éå¦ææ²¡æååå¯ä»¥æ¿æ¢æä¸»æºip\nemail address []:info@ieooc.com\n\n\n\n# çææå¡å¨ç§é¥server-key.pemåè¯ä¹¦ç­¾åè¯·æ±server-csr\n\næç¤º\n\ncsr:certificate signing request,è¯ä¹¦ç­¾åè¯·æ±,server-csræ¯ä¸ä¸ªä¸´æ¶æä»¶ï¼çæserver-cert.pemä»¥åï¼å¯ä»¥å é¤ã\n\næ³¨æ\n\næ³¨æè¿éçcnä¿¡æ¯å¯¹åºçæ¯æå¡å¨æå¨ä¸»æºåå,å¦ææ²¡æçè¯ä¹æ²¡å³ç³»,å¯ä»¥éè¿ä¸ä¸æ­¥çextfile.cnféç½®ipå°åè¿æ¥\n\nç¬¬ä¸æ­¥ï¼çææå¡å¨ç§é¥server-key.pem\n\n$ openssl genrsa -out server-key.pem 4096\n\n\nç¬¬äºæ­¥ï¼ä½¿ç¨æå¡å¨ç§é¥å¦å cnä¿¡æ¯çæè¯ä¹¦ç­¾åè¯·æ±server-csr.pem\n\n$ openssl req -subj "/cn=$host" -sha256 -new -key server-key.pem -out server.csr\n\n\n\n# ç¼åextfile.cnf\n\næç¤º\n\nè¿ä¸ªæä»¶ç¨äºæå®ä¸ä¸æ­¥çæç­¾åè¯ä¹¦çä¸äºå±æ§éç½®,è¿éæä»¬ä¸»è¦ç¨å°ä¸¤ä¸ªå±æ§,å¦æè¦å¶ä»è¦æ±(å¦éå¶æå®ipèå´çå®¢æ·ç«¯æè½è¿æ¥)çå¯ä»¥çopenssl x509v3_configææ¡£\n\n * subjectaltnameï¼ ä¸»é¢å¤éåç§°,æ¯æç¹åä¸ä¸æ­¥çæserver.csræ¶æç¨çéé¡¹-subj "/cn=10.17.1.101"çä¸è¥¿,è¿ä¸ªæ´åä¸ä¸ªè¯´æè¡¥å,è¿éå¯ä»¥å¡«ä¿¡ä»»çdnsåååä¸»æºipç­ç­,å ä¸ºæ²¡æåå,æä»¥æåªå¡«äºdockeræå¡å¨çä¸»æºipï¼å¦å¤,éè¦ç¹å«æ³¨æ,è¿éå¯¹åºçæçæ¯ä¸ä»½ä¿¡ä»»åè¡¨,è¿éæè¯´çä¿¡ä»»æ¯å¯¹æå¡ç«¯çä¿¡ä»»,æä»¥å¡«çæ¯æå¡ç«¯çä¿¡æ¯(å¦åå,ip),æä¹åçå°ææç« è¯´è¿éçåè¡¨æ¯å®¢æ·ç«¯çåè¡¨,åªæå¨åè¡¨ä¸­çå®¢æ·ç«¯æè½è®¿é®æå¡å¨,è¿ç§è¯´æ³æ¯éè¯¯,å¨ä½¿ç¨è¯ä¹¦è¿æ¥å°æå¡å¨æ¶,ä¼æ¥éè¯´æå¡å¨ipä¸å¨ä¿¡ä»»åè¡¨ä¸­( å¦è¿ç¨ä¸»æºipä¸ºip3,è¯ä¹¦çä¿¡ä»»åè¡¨ä¸ºip1åip2æ¶,è¥ä½¿ç¨è¯¥è¯ä¹¦è®¿é®è¿ç¨ä¸»æº,åä¼æ¥éx509: certificate is valid for ip1, ip2, not ip3)\n * extendedkeyusageï¼ æ©å±å¯é¥ç¨æ³,æ­¤æ©å±åå«ä¸ä¸ªç¨æ³åè¡¨ï¼ç¨äºæç¤ºè¯ä¹¦å¬é¥å¯ç¨äºçç®ç\n\nç±äºå¯ä»¥éè¿ipå°åådnsåç§°å»ºç«tlsè¿æ¥ï¼å æ­¤å¨åå»ºè¯ä¹¦æ¶éè¦æå®ipå°åãä¾å¦ï¼åè®¸ä½¿ç¨10.10.10.20å127.0.0.1è¿è¡è¿æ¥ï¼\n\n$ echo subjectaltname = dns:$host,ip:10.10.10.20,ip:127.0.0.1 >> extfile.cnf\n\n\nå°dockerå®æ¤ç¨åºå¯é¥çæ©å±ä½¿ç¨å±æ§è®¾ç½®ä¸ºä»ç¨äºæå¡å¨èº«ä»½éªè¯\n\n$ echo extendedkeyusage = serverauth >> extfile.cnf\n\n\n\n# ä½¿ç¨caè¯ä¹¦çææå¡å¨ç­¾åè¯ä¹¦server-cert.pem\n\næç¤º\n\nä¸é¢æ»å±çæäºä¸¤å¤§æ¨¡åçæä»¶åä¸ä¸ªextfile.cnféç½®æä»¶,è¿ä¸é¨åä¹é´æ¯å½¼æ­¤ç¬ç«ç,å°äºè¿ä¸æ­¥,ä¹æ¯æåä¸æ­¥æçæ­£åäºæ´å\n\nè¿éè¦ç¨å°çæä¸¤ä¸ªæä»¶ï¼\n\n * (1)caç§é¥ca-key.pemåcaç­¾åæä»¶ca.pem\n * (2)è¯ä¹¦ç­¾åè¯·æ±server-csr(3)éç½®æä»¶extfile.cnf\n\næä»¤å¦ä¸:\n\n$ openssl x509 -req -days 365 -sha256 -in server.csr -ca ca.pem -cakey ca-key.pem -cacreateserial -out server-cert.pem -extfile extfile.cnf\n\n\næ§å¶å°è¾åºï¼\n\nsignature ok\nsubject=cn = your.host.com\ngetting ca private key\n\n\nè³æ­¤,dockeræå¡ç«¯å¯é¥åå»ºå®æ¯ã\n\n\n# å©ç¨caåå»ºå®¢æ·ç«¯å¯é¥key\n\næç¤º\n\nçæå¯é¥éè¦ä½¿ç¨caç§é¥åç­¾åæä»¶,ä¸ºç®åæµç¨,é¿åcaæä»¶å¨æå¡ç«¯åå®¢æ·ç«¯ä¹é´çä¼ è¾,ä»¥ä¸æ­¥éª¤ä»å¨dockeræå¡ç«¯è¿è¡\n\nåå»ºå®¢æ·ç«¯å¯é¥çè¿ç¨åæå¡ç«¯ç±»ä¼¼,caç¸å³å·²ç»åå»ºå¥½äº,extfile.cnféç½®æä»¶ä¹ç®åå¾å¤,å·ä½å¦ä¸\n\n\n# æ­¥éª¤1:çæå®¢æ·ç«¯ç§é¥key.pemåè¯ä¹¦ç­¾åè¯·æ±client-csr\n\nçæå®¢æ·ç«¯ç§é¥key.pem\n\nopenssl genrsa -out key.pem 4096\n\n\næ§å¶å°è¾åºï¼\n\ngenerating rsa private key, 4096 bit long modulus (2 primes)\n.............................++++\n......................................................................................................................................................++++\ne is 65537 (0x010001)\n\n\nè¯ä¹¦ç­¾åè¯·æ±client-csr\n\n$ openssl req -subj \'/cn=client\' -new -key key.pem -out client.csr\n\n\n\n# æ­¥éª¤2:ç¼åæ©å±éç½®æä»¶extfile.cnf\n\næ³¨æ\n\nå¦ææ¯å¨åæåå»ºæå¡å¨ç§é¥çæä»¶å¤¹ä¸,åºè¯¥è¿æåæ¥çextfile.cnfæä»¶,ä¸ºé¿åè¦å,å¯ä»¥åæ§è¡éå½å\n\n$ mv extfile.cnf extfile.cnf.old\n\n\nåå»ºæ©å±éç½®æä»¶å¹¶ä½¿å¯é¥éç¨äºå®¢æ·ç«¯èº«ä»½éªè¯çæä»¤å¦ä¸:\n\n$ echo extendedkeyusage = clientauth >> extfile.cnf\n\n\n\n# æ­¥éª¤3:çæç­¾åæä»¶cert.pem\n\n$ openssl x509 -req -days 365 -sha256 -in client.csr -ca ca.pem -cakey ca-key.pem \\\n  -cacreateserial -out cert.pem -extfile extfile.cnf\n\n\næ§å¶å°è¾åºï¼\n\n\n\n\n\nÂ \n\n\nsignature ok\nsubject=/cn=client\ngetting ca private key\nenter pass phrase for ca-key.pem: # è¾å¥éªè¯å¯ç  åè½¦\n\n\n\n# ä¿®æ¹æä»¶æé\n\næ­¥éª¤1:å é¤ä¸¤ä¸ªè¯ä¹¦ç­¾åè¯·æ±æä»¶\n\n$ rm -v client.csr server.csr\n\n\næ­¥éª¤2:ä¿®æ¹å¯é¥æä»¶æéä¸ºåªç±ææèè¯»å\n\n$ chmod -v 0400 ca-key.pem key.pem server-key.pem\n\n\næ­¥éª¤3:ä¿®æ¹è¯ä¹¦æä»¶æéä¸ºåªè¯»\n\n$ chmod -v 0444 ca.pem server-cert.pem cert.pem\n\n\n\n# å¯å¨dockerå®æ¤è¿ç¨\n\nå¯å¨dockerå®æ¤è¿ç¨æä¸¤ç§æ¹æ³,ç´æ¥ç¨å¸¦åæä»¤æèä¿®æ¹daemon.jsonéç½®æä»¶,å¦å¤,è¿æä¸ç§æ¹å¼ä½¿ç¨systemctlä¿®æ¹docker.serviceæä»¶,è¿ç§ä¸æ¨è,è¿éä¸ä½ä»ç».éè¦æ³¨æçæ¯,ä¸ç®¡æ¯åªä¸ç§æ¹æ³,åªè¦å¯¹åä¸å±æ§åäºéç½®,é½ä¼å¯¼è´å²çªèå¯å¨å¤±è´¥.æä»¥å»ºè®®åªä½¿ç¨ä¸ç§.\n\næ³¨æ\n\nçå¬unix:///var/run/docker.sockæ¯ä¸ºäºå®ç°æ¬æºdockerç´æ¥æ§å¶,çå¬tcp://0.0.0.0:2376è¡¨ç¤ºçå¬2376ç«¯å£ææè¿æ¥,åè¿éå¼å¯äºtlséªè¯,åä¼æ ¹æ®æä»¬ç»å®çtlsæä»¶å»åéªè¯\n\næå¡ç«¯éè¦çtlsæä»¶æcaè¯ä¹¦ca.pem,æå¡ç«¯è¯ä¹¦server-cert.pem,æå¡ç«¯å¯é¥server-key.pem\n\nå°dockeræå¡åæ­¢ï¼ç¶åä¿®æ¹dockeræå¡æä»¶\n\n$ vim /usr/lib/systemd/system/docker.service\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[unit]\ndescription=docker application container engine\ndocumentation=https://docs.docker.com\nafter=network-online.target firewalld.service containerd.service\nwants=network-online.target\nrequires=docker.socket containerd.service\n\n[service]\ntype=notify\n# the default is not to use systemd for cgroups because the delegate issues still\n# exists and systemd currently does not support the cgroup feature set required\n# for containers run by docker\n#execstart=/usr/bin/dockerd -h fd:// --containerd=/run/containerd/containerd.sock\nexecstart=/usr/bin/dockerd -h fd:// --containerd=/run/containerd/containerd.sock --tlsverify --tlscacert=/opt/docker-ssl/ca.pem --tlscert=/opt/docker-ssl/server-cert.pem --tlskey=/opt/docker-ssl/server-key.pem -h unix:///var/run/docker.sock -h tcp://0.0.0.0:2376\ntimeoutsec=0\nrestartsec=2\nrestart=always\n\n# note that startlimit* options were moved from "service" to "unit" in systemd 229.\n# both the old, and new location are accepted by systemd 229 and up, so using the old location\n# to make them work for either version of systemd.\nstartlimitburst=3\n\n# note that startlimitinterval was renamed to startlimitintervalsec in systemd 230.\n# both the old, and new name are accepted by systemd 230 and up, so using the old name to make\n# this option work for either version of systemd.\nstartlimitinterval=60s\n\n# having non-zero limit*s causes performance problems due to accounting overhead\n# in the kernel. we recommend using cgroups to do container-local accounting.\nlimitnofile=infinity\nlimitnproc=infinity\nlimitcore=infinity\n\n# comment tasksmax if your systemd version does not support it.\n# only systemd 226 and above support this option.\ntasksmax=infinity\n\n# set delegate yes so that systemd does not reset the cgroups of docker containers\ndelegate=yes\n\n# kill only the docker process, not all processes in the cgroup\nkillmode=process\noomscoreadjust=-500\n\n[install]\nwantedby=multi-user.target\n\n\n\n# éæ°å è½½éç½®\n\n$ sudo systemctl daemon-reload\n\n\n\n# éæ°å¯å¨\n\n$ sudo systemctl restart docker\n\n\n\n# éå¯åæ¥çæå¡ç¶æï¼\n\n$ systemctl status docker \n\n\næ§å¶å°è¾åºï¼\n\nâ docker.service - docker application container engine\n     loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)\n     active: active (running) since mon 2021-03-01 17:41:53 cst; 5min ago\ntriggeredby: â docker.socket\n       docs: https://docs.docker.com\n   main pid: 3604191 (dockerd)\n      tasks: 30\n     memory: 56.0m\n     cgroup: /system.slice/docker.service\n             ââ3604191 /usr/bin/dockerd -h fd:// --containerd=/run/containerd/containerd.sock --tlsverify --tlscacert=/opt/docker-ssl/ca.pem --tlscert=/opt/docker-ssl/server-cert.pem --tlskey=/opt/docker-ssl/server-key.pem -h unix:/>\n             ââ3604407 /usr/bin/docker-proxy -proto tcp -host-ip 127.0.0.1 -host-port 1514 -container-ip 172.18.0.2 -container-port 10514\n\nmar 01 17:41:52 harbor dockerd[3604191]: time="2021-03-01t17:41:52.112268091+08:00" level=error msg="failed to start container" container=070eb39f7a00c182e7247b744d66289db8c91d5e762bc5127f68aa8481fc97d9 error="failed to initialize l>\nmar 01 17:41:52 harbor dockerd[3604191]: time="2021-03-01t17:41:52.148018184+08:00" level=error msg="753ed974e6c469f1fb0a40405563aaa9ea39596462fee72bec4f8edc4bcd90f2 cleanup: failed to delete container from containerd: no such conta>\nmar 01 17:41:52 harbor dockerd[3604191]: time="2021-03-01t17:41:52.148052892+08:00" level=error msg="failed to start container" container=753ed974e6c469f1fb0a40405563aaa9ea39596462fee72bec4f8edc4bcd90f2 error="failed to initialize l>\nmar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01t17:41:53.111270963+08:00" level=info msg="loading containers: done."\nmar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01t17:41:53.138717581+08:00" level=info msg="docker daemon" commit=46229ca graphdriver(s)=overlay2 version=20.10.3\nmar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01t17:41:53.138839158+08:00" level=info msg="daemon has completed initialization"\nmar 01 17:41:53 harbor systemd[1]: started docker application container engine.\nmar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01t17:41:53.157523613+08:00" level=info msg="api listen on /run/docker.sock"\nmar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01t17:41:53.168302054+08:00" level=info msg="api listen on /var/run/docker.sock"\nmar 01 17:41:53 harbor dockerd[3604191]: time="2021-03-01t17:41:53.173756154+08:00" level=info msg="api listen on [::]:2376"\n\n\nå·²ç»çæã\n\n\n# ä½¿ç¨è¯ä¹¦è¿æ¥\n\nå¤å¶ ca.pem , cert.pem , key.pem ä¸ä¸ªæä»¶å°å®¢æ·ç«¯\n\nå®¢æ·ç«¯éè¦çtlsæä»¶æcaè¯ä¹¦ca.pem,å®¢æ·ç«¯è¯ä¹¦cert.pem,å®¢æ·ç«¯å¯é¥key.pem\n\næ³¨æ\n\nå°ä»¥ä¸ç¤ºä¾ä¸­çææ$hostå®ä¾æ¿æ¢ä¸ºdockerå®æ¤ç¨åºä¸»æºçååæipå°åï¼è¿æ¥çæä»¤æ ¼å¼å¦ä¸,ä»¥docker --versionä¸ºä¾\n\n$ docker --tlsverify --tlscacert=ca.pem --tlscert=cert.pem --tlskey=key.pem -h=$host:2376 --version\n\n\n\n# docker-java å¯ç¨tls\n\né¡¹ç®éä½¿ç¨dockerçjavaå®¢æ·ç«¯docker-javaè°ç¨dockerï¼ä¸ºäºæ¯ætlsï¼å¨åå»ºå®¢æ·ç«¯æ¶ï¼éè¦å¢å tlsè®¾ç½®ã\n\né¦åå°ca.pem cert.pem key.pemè¿ä¸ä¸ªæä»¶æ·è´å°æ¬å°ï¼ä¾å¦e:\\\\docker\\\\",\n\nç¶ådefaultdockerclientconfigéwithdockertlsverifyè®¾ä¸ºtrueï¼å¹¶è®¾ç½®certpathä¸ºåæ·è´çç®å½ã\n\ncopydefaultdockerclientconfig.builder builder =\n                defaultdockerclientconfig.createdefaultconfigbuilder()\n                    .withdockerhost("tcp://" + server + ":2375")\n                    .withapiversion("1.30");\n            if (containerconfiguration.getdockertlsverify()) {\n                builder = builder.withdockertlsverify(true)\n                    .withdockercertpath("e:\\\\docker\\\\");\n            }\n\treturn  dockerclientbuilder.getinstance(builder.build()).build()\n\t\t\t\n\n\nå¤§å·¥æå®ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"docker-maven-plugin",frontmatter:{title:"docker-maven-plugin",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/779e01/"},regularPath:"/21.Simplify/01.Simplify%20Docs/09.docker-maven-plugin.html",relativePath:"21.Simplify/01.Simplify Docs/09.docker-maven-plugin.md",key:"v-1572d344",path:"/pages/779e01/",headers:[{level:2,title:"ä»ç»",slug:"ä»ç»",normalizedTitle:"ä»ç»",charIndex:69},{level:2,title:"fabric8ioåspotifyçå¯¹æ¯",slug:"fabric8ioåspotifyçå¯¹æ¯",normalizedTitle:"fabric8ioåspotifyçå¯¹æ¯",charIndex:434},{level:3,title:"1 Stars",slug:"_1-stars",normalizedTitle:"1 stars",charIndex:752},{level:3,title:"2 ææ¡£æç¨æ§",slug:"_2-ææ¡£æç¨æ§",normalizedTitle:"2 ææ¡£æç¨æ§",charIndex:897},{level:3,title:"3 æ´æ°é¢ç",slug:"_3-æ´æ°é¢ç",normalizedTitle:"3 æ´æ°é¢ç",charIndex:1308},{level:3,title:"4 åè½",slug:"_4-åè½",normalizedTitle:"4 åè½",charIndex:1380},{level:2,title:"dockerHost éç½®",slug:"dockerhost-éç½®",normalizedTitle:"dockerhost éç½®",charIndex:2091},{level:3,title:"1 dockerå®æ¹ççå¬éç½®",slug:"_1-dockerå®æ¹ççå¬éç½®",normalizedTitle:"1 dockerå®æ¹ççå¬éç½®",charIndex:2146},{level:3,title:"2 fabric8io çä¸»æºéç½®",slug:"_2-fabric8io-çä¸»æºéç½®",normalizedTitle:"2 fabric8io çä¸»æºéç½®",charIndex:2302},{level:2,title:"fabric8ioçdocker-mavenæä»¶çä½¿ç¨",slug:"fabric8ioçdocker-mavenæä»¶çä½¿ç¨",normalizedTitle:"fabric8ioçdocker-mavenæä»¶çä½¿ç¨",charIndex:2759},{level:3,title:"1 åèéç½®",slug:"_1-åèéç½®",normalizedTitle:"1 åèéç½®",charIndex:2791},{level:3,title:"2 mvnæä»¤è¯´æ",slug:"_2-mvnæä»¤è¯´æ",normalizedTitle:"2 mvnæä»¤è¯´æ",charIndex:5092},{level:3,title:"3 æä»¤å®è·µ",slug:"_3-æä»¤å®è·µ",normalizedTitle:"3 æä»¤å®è·µ",charIndex:5671},{level:3,title:"4 æ³¨æäºé¡¹",slug:"_4-æ³¨æäºé¡¹",normalizedTitle:"4 æ³¨æäºé¡¹",charIndex:5852},{level:2,title:"åèææ¡£:",slug:"åèææ¡£",normalizedTitle:"åèææ¡£:",charIndex:6230}],headersStr:"ä»ç» fabric8ioåspotifyçå¯¹æ¯ 1 Stars 2 ææ¡£æç¨æ§ 3 æ´æ°é¢ç 4 åè½ dockerHost éç½® 1 dockerå®æ¹ççå¬éç½® 2 fabric8io çä¸»æºéç½® fabric8ioçdocker-mavenæä»¶çä½¿ç¨ 1 åèéç½® 2 mvnæä»¤è¯´æ 3 æä»¤å®è·µ 4 æ³¨æäºé¡¹ åèææ¡£:",content:'# docker-maven-plugin\n\næç¤º\n\nè¿æ¯ä¸ä¸ªMavenæä»¶ï¼ç¨äºæå»ºDockeræ ååç®¡çç¨äºéææµè¯çå®¹å¨ã\n\n\n# ä»ç»\n\nfabric8ioçæä»¶ä¸ä»æ¯æéè¿dockerfileådocker-composeæä»¶è¿è¡dockeréåæé (build),éåæ¨é(push),è¿æ¯æå¯¹å®¹å¨æä½(å¦run,stop,removeç­),ä¹å°±æ¯è¯´å®å¯ä»¥å®ç°å¯¹Dockerä»æå»ºéåå°è¿è¡åæ¨éå®æ´çæ§å¶æµç¨,è¿æ¯å®ç¬æ ä¸å¸çå°æ¹.\n\nå¨ä¼å¤docker-mavenæä»¶ä¸­,fabric8ioçdocker-maven-pluginæ¯«æ çé®æ¯æå¼ºå¤§ç.\n\nç°å¨ç½ä¸ç¸å³çæç¨å¤§å¤æ¯ä½¿ç¨spotifyç,æ¬äººä¸å¼å§ä¹æ¯ç¨spotify,ä½åç°ä½¿ç¨èµ·æ¥å¾æå±éæ§,ç¶åå°±æ¾å¶ä»çdocker-mavenæä»¶,æç»ææå°äºfabric8ioçæä»¶.ç®åæ¥è¯´,spotifyè½åçäº,fabric8ioé½è½å,èä¸fabric8ioéæ©æ´å¤,åè½æ´å¤.\n\n\n# fabric8ioåspotifyçå¯¹æ¯\n\nä¸é¢ç¨fabric8ioåspotifyä»£æå¶æä»¶\n\né¦å,å¨å¯¹æ¯ä¹å,è¦åè®¤è¯ä¸ä¸ªè§ç¹,ä¸ç®¡ä½¿ç¨åªä¸ç§dockeræä»¶æ¥æé image,é½æ¯ä¸ä¸ç´æ¥ç¨Dockerfileç¼åç®å,èä¸å¯å¤ç¨,ä¸ç¨å­¦ä¹ ä¸åæä»¶ä¸åçæé è§å.è¿ä¸ç¹ä¹å¨spotifyçgithubé¡¹ç®çREADMEææ¡£éæç¹å«å¼ºè°,ä¸ºæ­¤ä»ä»¬è¿ç¹å°å¼åäºä¸ä¸ªdockerfile-mavenæä»¶,è¿ä¸ªæä»¶å¼ºå¶è¦æ±ä½¿ç¨Dockerfile,ä»ä»¬è®¤ä¸ºè¿ææ¯æ­£é,äºå®ä¹æ¯å¦æ­¤.\n\nå¾å¤äººéæ©ç¨spotifyæ¯å ä¸ºæè°"ä»Starsãææ¡£æç¨æ§ä»¥åæ´æ°é¢çä¸ä¸ªçº¬åº¦èè",é£ä¸é¢æä»¬å°±åä»è¿ä¸èæ¥åç®åçå¯¹æ¯.åå¯¹æ¯åè½.\n\n\n# 1 Stars\n\næªè³ç®å(2021å¹´3æ),åæä»¶staræ°å¦ä¸ï¼\n\n * fabric8io/dockerfile-maven 1.4K+\n * spotify/dockerfile-maven 2.4+\n * spotify/docker-maven-plugin 2.5+\n\n\n# 2 ææ¡£æç¨æ§\n\nè¿éæ¯«æ çé®æ¯spotifyçææ¡£æ´å®¹æç¨,å ä¸ºä¸ç®¡æ¯docker-maven-pluginè¿æ¯dockerfile-maven,spotifyçæè°ææ¡£é½åªæ¯æ¾å¨å¯¹åºgithubé¡¹ç®çé¦é¡µ,å°±æ¯ä¸ä»½READMEçMarkDownææ¡£èå·²,å¯è¯»æ§å¾å¼º,å¯ä»¥ç®åä¸æ.ç¸ä¿¡è¿ä¹æ¯spotifyæä»¶æ¥æå¤§éStarsçåå .\n\nç¸æ¯ä¹ä¸,fabric8ioçgithubçREADMEç¸å½äºä»ä¹é½æ²¡å,å°±åªæ¯ç®åç²æ´å°ç»äºç¨æ·æåçè®¿é®é¾æ¥,è½ç¶ä¹æä¸ä¸ªç®åç"introlmd",ä½æ¯å¯¹äºæå»ºé¡¹ç®æ²¡æå¤ªå¤§çå¸®å©,æåè¿æ¯å¾æ¥çç¨æ·æå\n\nfabric8ioçç¨æ·æååå®¹ç¸å½ä¸°å¯,è¿ä¹æ¯å ä¸ºå®åè½æ¯è¾å¼ºå¤§.æä»¥è¿éè§ä»è§æº.å¦å¤,å¦æä½¿ç¨Dockerfileådocker-composeæä»¶çè¯,å¶å®å¯ä»¥é¿å¼å¤§é¨åçéç½®,å©ä¸çéç½®é½æ¯å ä¸ºå®é¢å¤çåè½,æä»¥å¶ææ¡£è½ç¶å¤æ,ä½éç½®å´å¯ä»¥å¾ç®å.\n\n\n# 3 æ´æ°é¢ç\n\næªè³ç®å,fabric8ioæè¿ä¸æ¬¡æ´æ°æ¨éæ¯å¨2020å¹´9æ28æ¥,spotifyçé¡¹ç®åæ¯2019å¹´10æ15æ¥ã\n\n\n# 4 åè½\n\nè¿ææ¯è¦æ¯è¾çéç¹ï¼ä¹æ¯ fabric8ioå¨é¢ç¢¾åspotifyçå°æ¹\n\n# 1 å¯¹dockerfileådocker-composeæä»¶éç½®çæ¯æ\n\næªè³å°2019å¹´1æã spotifyæååæ¯æèªå®ä¹dockerfileæä»¶çä½ç½®ï¼å¨è¿ä¹ådockerfileå¿é¡»å®è£ä¸å®çè§åæ¾ç½®æè¡ãå¯¹äºdocker-compose.ymlæä»¶çæ¯æä¸ºé¶ã\n\nfabric8ioå¾æ©å°±æ¯æèªå®ä¹dockerfileæä»¶ådocker-compose.ymlæä»¶çå¯¼å¥äºãä¸è¿ç®åå¯¹docker-compose.ymlçæ¬ä¸æ¯æ3.0åæ´æ°ãå¯¹äºæç®åæ¥è¯´æ¯å¤ç¨äºï¼ä»¥åå¸æä¼æ´æ°æ¯æã\n\nå¯¹äºæè¿ç§åæ¬¢æå¯å¨åæ°æ¾å¨docker-composeæä»¶çäººæ¥è¯´ï¼å¯¹docker-composeçæ¯æå¾éè¦ï¼èä¸è¿æ ·å°±å®å¨å¥ç¦»äºæä»¶å¯¹dockeræå»ºåè¿è¡åæ°çç¹çéç½®äºã\n\n# 2 å¯¹dockerå®¹å¨çæ§å¶\n\nfabric8ioçæä¸¤å¤§åè½:\n\n 1. æé å¹¶æ¨éDockeréå\n 2. å¯å¨ååæ­¢Dockerå®¹å¨\n\nä¹å°±æ¯è¯´éè¿fabric8ioçdockeræä»¶,æä»¬å¯ä»¥å®ç°å¯¹Dockerä»æå»ºéåå°è¿è¡åæ¨éå®æ´çæ§å¶æµç¨\n\nèåæ¬spotifyå¨åçå¶ä»æä»¶åä»æç¬¬ä¸é¨ååè½,å³æé å¹¶æ¨ééå,èæ²¡æå®ç°å¯¹å®¹å¨çæ§å¶.è¿ä¹æ¯æä½¿ç¨fabric8ioèä¸ä½¿ç¨spotifyçæä¸»è¦åå .\n\n# 2 å¯¹è¿ç¨dockerä¸»æºçè¿æ¥æ¯æ\n\nspotifyåªæ¯æå¨æ¬æºdockerçéåbuildãtagãpushï¼èfabric8ioå¯ä»¥ç¨äºè¿ç¨ä¸»æºï¼è¿ä¸ªæ¶åè¦æ³¨æ dockerHost é¡¹çéç½®ã\n\n\n# dockerHost éç½®\n\næ³¨æ\n\ndockerHostçéç½®ådockerå®æ¹çéç½®è§åä¸å¤ªä¸æ ·\n\n\n# 1 dockerå®æ¹ççå¬éç½®\n\ndockerå¯ä»¥éç½®ä¸ç§ä¸åç±»åçSocketè¯·æ±ï¼unixï¼tcpï¼å fdï¼å¶ä¸­ fd å unix éå¸¸ç¨äºæ¬æºè¿æ¥ï¼tcp ç¨äº ip è¿æ¥ãä¸èå¨ /etc/docker/daemon.json çéç½®é¡¹ä¸º hostsï¼éè¦æ³¨æä¸æ¯æ http(https)\n\n\n# 2 fabric8io çä¸»æºéç½®\n\nfabric8ioç çdockerHostæ¯æ tcp åhttpï¼httpsï¼ä¸¤ç§æ ¼å¼\n\n# 1 tcp\n\nå¦æä½¿ç¨tcpååªè½ä½¿ç¨ 2375 å 2376ç«¯å£ï¼åå«å¯¹åºä¸å å¯éªè¯åå å¯éªè¯ è¿ä¸ªæ¶åå¨urlééç½®å¶ä»ç«¯å£æ¯æ æçã ï¼ä¹å°±æ¯è¯´ï¼æå¡å¨è®¾ç½®äºçå¬ tcp:///0.0.0.0:9999ï¼fabric8ioçæä»¶è®¾ç½® tcp:å¬ç½ip:9999ï¼ä¹æ¯æ æçï¼è¿ä¸ªæ¶åå¦æå¯ç¨äºsslå å¯çè¯å°±åªè½ä¸èµ·ç¨ 2376ï¼\n\n# 2 http/https\n\nè¿ä¸ªæ¶åç«¯å£æ¯å¯ä»¥èªå®ä¹ç å³æ¯è¯´ç´æ¥ç¨ http://å¬ç½ipï¼ååï¼:9999 å³å¯ã\n\n# 3 ç«¯å£æ¥éçæç¤º\n\nç«¯å£é®é¢è¿æ¥æ¶ä¼æ¥é ï¼ Cannot create docker access object org.apache.http.ProtocolException: The server failed to respond with a valid HTTP response\n\n\n# fabric8ioçdocker-mavenæä»¶çä½¿ç¨\n\n\n# 1 åèéç½®\n\nå¦ææ¯æ³è¦å¿«éå¯å¨,å¯ä»¥åèä¸é¢çéç½®\n\nè¿ç¨Dockerçæ§å¶åéç½®å¯ä»¥çè¿ä¸ç¯æç« :Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡\n\nä¸é¢ä½¿ç¨Dockerfileå®ædockeréåæå»º,ä½¿ç¨docker-compose.ymlå®ædockerå®¹å¨å¯å¨åæ°æ§å¶\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <properties>\n        <docker.plugin.version>0.34.1</docker.plugin.version>\n        <docker.host>https://10.17.1.101:2376</docker.host>\n        <docker.registry>10.17.1.101</docker.registry>\n        <docker.registry.namespace>library</docker.registry.namespace>\n        <docker.registry.username>admin</docker.registry.username>\n        <docker.registry.password>Harbor12345</docker.registry.password>\n    </properties>\n\n    <plugin>\n        <groupId>io.fabric8</groupId>\n        <artifactId>docker-maven-plugin</artifactId>\n        <version>${docker.plugin.version}</version>\n        \x3c!--å¨å±éç½®--\x3e\n        <configuration>\n            \x3c!--è¿ç¨dockerä¸»æºå°å,ç¨äºå®ædockeråé¡¹åè½--\x3e\n            <dockerHost>${docker.host}</dockerHost>\n            \x3c!--dockerè¿ç¨è®¿é®æéè¯ä¹¦å°å,å¦ædockerè¿ç¨ä¸»æºæ²¡æå¯ç¨TLSéªè¯åä¸éè¦éè¯ä¹¦--\x3e\n            <certPath>${project.basedir}/docker/ssh</certPath>\n            \x3c!--registryå°å,ç¨äºæ¨é,æåéå--\x3e\n            <registry>${docker.registry}</registry>\n            <authConfig>\n                <push>\n                    <username>${docker.registry.username}</username>\n                    <password>${docker.registry.password}</password>\n                </push>\n            </authConfig>\n            <images>\n                <image>\n                    \x3c!--éåå(å«çæ¬å·)--\x3e\n                    <name>${docker.registry}/${docker.registry.namespace}/${project.name}:${project.version}</name>\n                    <build>\n                        \x3c!--ä½¿ç¨dockerFileæä»¶--\x3e\n                        <dockerFile>${project.basedir}/Dockerfile</dockerFile>\n                    </build>\n                </image>\n            </images>\n        </configuration>\n    </plugin>\n</project>\n\n\nå¯ä»¥çå°,å¶å®éç½®æ¯ç¸å½ç®åæ¸æ°ç,åªè¦ä½ ç¡®ä¿Dockerfileådocker-compose.ymlç¬¦åè§è,è½å¤ä½¿ç¨,è¿ä¸ªæä»¶å°±å¯ä»¥ä»£æ¿ä½ ä½¿ç¨äº,èä½ ä»éè¦ç»å®éç½®ä¸äºæåºç¡çææä¿¡æ¯ã\n\næç¤º\n\nå¦æéç½®å¯ç¨TLSéªè¯ï¼Windows 10 ç³»ç»éè¦å°ca.pem,cert.pem,key.pemè¿ä¸ä¸ªæä»¶å¤å¶å°C:\\Users\\${USER}\\.dockerç®å½ä¸ã\n\n\n# 2 mvnæä»¤è¯´æ\n\nMAVENæä»¤                åè½\ndocker:start           åå»ºåå¯å¨å®¹å¨\ndocker:stop            åæ­¢å¹¶éæ¯å®¹å¨\ndocker:build           æå»ºéå\ndocker:watch           èªå¨è¿è¡éå»ºåéå¯\ndocker:push            å°éåæ¨éå°registry\ndocker:remove          ä»æ¬å°dockerä¸»æºå é¤éå\ndocker:logs            æ¾ç¤ºå®¹å¨æ¥å¿\ndocker:source          å°docker build archiveéå å°Mavené¡¹ç®\ndocker:save            å°éåä¿å­å°æä»¶\ndocker:volume-create   åå»ºå·ä»¥å¨å®¹å¨ä¹é´å±äº«æ°æ®\ndocker:volume-remove   å é¤åå»ºçå·\n\næ³¨æ,startårunæ¯åä¹ç,å¯ä»¥äºç¸ä»£æ¿,å¦å¤,è¿éçstopåremoveåå¨dockerçä¸ä¸æ ·,dockerçstopä¼ä¿çå®¹å¨,è¿éé»è®¤æ¯åæ­¢å¹¶éæ¯(å½ç¶ä¹å¯ä»¥å¨poméç½®æmvnåæ°éæå®keepContainerä½¿å¶ä¸éæ¯),ä½æ¯æè®¤ä¸ºä¸è¬æ¯ä¸ä¼ç¨å°æåç,stopå°±æ¯ä¸ºäºremove\n\n\n# 3 æä»¤å®è·µ\n\nè¿éæè´´ä¸ä¸æå¸¸ç¨çmavenæä»¤ è¿æ ·å°±å¯ä»¥å®æä»æåå°å®¹å¨è¿è¡çå®æ´æµç¨\n\n$ mvn clean package docker:stop docker:remove docker:build docker:run \n\n\nä¸æ¯æ¯ä¸æ¬¡è¿è¡é½è¦æ¨éç,å¦æè¦çè¯å¯ä»¥åç¬è°ç¨docker:push\n\n$ mvn docker:push\n\n\n\n# 4 æ³¨æäºé¡¹\n\ndocker:run è¿éæä¸ªå,docker:runæ¯å¨åå°æ§è¡,ä¹å°±æ¯è¯´,å®å¹¶ä¸è½åä½¿ç¨dockerä¸ä¸ç´æ¥docker start -dæ¥å®ç°åå°è¿è¡,æä»¥å¦ææ¯å¨å½ä»¤è¡ä¸å¯å¨çè¯,æCtrl+Cå°±ç´æ¥éåºäº,æ¹æ³æ¯å½ä»¤è¡ä¸å¯å¨çæ¶åä½¿ç¨å¦ä¸æä»¤åè£æåå°è¿è¡\n\n$ nohup mvn docker:run & \n\n\nå¦ææ¯ç¨IDEæ§å¶çè¯å°±ä¸ç¨æå¿,å ä¸ºIDEåªæ¯çæ§è¿è¡æ¥å¿èå·²,IDEè¿ééåºä¸å½±åå¶å¨è¿ç¨æå¡å¨ä¸çè¿è¡.\n\nå¦å¤,docker:runä¹åçæä»¤ä¸ä¼è¿è¡,å ä¸ºrunä¹åå®ä¼çæ§Javaç¨åºçæ§å¶å°è¾åºç´å°è¿è¡ç»æ,èä¸è¬Java Webç¨åºæ¯ä½ä¸ºæå¡å¨ä¸ç´è¿è¡ç,æä»¥å°±å¯¼è´docker:runåé¢çæä»¤ä¸æ§è¡ è§£å³æ¹æ³æä¸¤ä¸ª,ç¬¬ä¸,è®©docker:runæ¾æå,ç¬¬äº,å¦å¤åç¬æ§è¡ç¬¬äºæ¡mvnæä»¤\n\n\n# åèææ¡£:\n\n * githubé¡¹ç®å°å:https://github.com/fabric8io/docker-maven-plugin\n * ç¨æ·æå:http://dmp.fabric8.io/',normalizedContent:'# docker-maven-plugin\n\næç¤º\n\nè¿æ¯ä¸ä¸ªmavenæä»¶ï¼ç¨äºæå»ºdockeræ ååç®¡çç¨äºéææµè¯çå®¹å¨ã\n\n\n# ä»ç»\n\nfabric8ioçæä»¶ä¸ä»æ¯æéè¿dockerfileådocker-composeæä»¶è¿è¡dockeréåæé (build),éåæ¨é(push),è¿æ¯æå¯¹å®¹å¨æä½(å¦run,stop,removeç­),ä¹å°±æ¯è¯´å®å¯ä»¥å®ç°å¯¹dockerä»æå»ºéåå°è¿è¡åæ¨éå®æ´çæ§å¶æµç¨,è¿æ¯å®ç¬æ ä¸å¸çå°æ¹.\n\nå¨ä¼å¤docker-mavenæä»¶ä¸­,fabric8ioçdocker-maven-pluginæ¯«æ çé®æ¯æå¼ºå¤§ç.\n\nç°å¨ç½ä¸ç¸å³çæç¨å¤§å¤æ¯ä½¿ç¨spotifyç,æ¬äººä¸å¼å§ä¹æ¯ç¨spotify,ä½åç°ä½¿ç¨èµ·æ¥å¾æå±éæ§,ç¶åå°±æ¾å¶ä»çdocker-mavenæä»¶,æç»ææå°äºfabric8ioçæä»¶.ç®åæ¥è¯´,spotifyè½åçäº,fabric8ioé½è½å,èä¸fabric8ioéæ©æ´å¤,åè½æ´å¤.\n\n\n# fabric8ioåspotifyçå¯¹æ¯\n\nä¸é¢ç¨fabric8ioåspotifyä»£æå¶æä»¶\n\né¦å,å¨å¯¹æ¯ä¹å,è¦åè®¤è¯ä¸ä¸ªè§ç¹,ä¸ç®¡ä½¿ç¨åªä¸ç§dockeræä»¶æ¥æé image,é½æ¯ä¸ä¸ç´æ¥ç¨dockerfileç¼åç®å,èä¸å¯å¤ç¨,ä¸ç¨å­¦ä¹ ä¸åæä»¶ä¸åçæé è§å.è¿ä¸ç¹ä¹å¨spotifyçgithubé¡¹ç®çreadmeææ¡£éæç¹å«å¼ºè°,ä¸ºæ­¤ä»ä»¬è¿ç¹å°å¼åäºä¸ä¸ªdockerfile-mavenæä»¶,è¿ä¸ªæä»¶å¼ºå¶è¦æ±ä½¿ç¨dockerfile,ä»ä»¬è®¤ä¸ºè¿ææ¯æ­£é,äºå®ä¹æ¯å¦æ­¤.\n\nå¾å¤äººéæ©ç¨spotifyæ¯å ä¸ºæè°"ä»starsãææ¡£æç¨æ§ä»¥åæ´æ°é¢çä¸ä¸ªçº¬åº¦èè",é£ä¸é¢æä»¬å°±åä»è¿ä¸èæ¥åç®åçå¯¹æ¯.åå¯¹æ¯åè½.\n\n\n# 1 stars\n\næªè³ç®å(2021å¹´3æ),åæä»¶staræ°å¦ä¸ï¼\n\n * fabric8io/dockerfile-maven 1.4k+\n * spotify/dockerfile-maven 2.4+\n * spotify/docker-maven-plugin 2.5+\n\n\n# 2 ææ¡£æç¨æ§\n\nè¿éæ¯«æ çé®æ¯spotifyçææ¡£æ´å®¹æç¨,å ä¸ºä¸ç®¡æ¯docker-maven-pluginè¿æ¯dockerfile-maven,spotifyçæè°ææ¡£é½åªæ¯æ¾å¨å¯¹åºgithubé¡¹ç®çé¦é¡µ,å°±æ¯ä¸ä»½readmeçmarkdownææ¡£èå·²,å¯è¯»æ§å¾å¼º,å¯ä»¥ç®åä¸æ.ç¸ä¿¡è¿ä¹æ¯spotifyæä»¶æ¥æå¤§éstarsçåå .\n\nç¸æ¯ä¹ä¸,fabric8ioçgithubçreadmeç¸å½äºä»ä¹é½æ²¡å,å°±åªæ¯ç®åç²æ´å°ç»äºç¨æ·æåçè®¿é®é¾æ¥,è½ç¶ä¹æä¸ä¸ªç®åç"introlmd",ä½æ¯å¯¹äºæå»ºé¡¹ç®æ²¡æå¤ªå¤§çå¸®å©,æåè¿æ¯å¾æ¥çç¨æ·æå\n\nfabric8ioçç¨æ·æååå®¹ç¸å½ä¸°å¯,è¿ä¹æ¯å ä¸ºå®åè½æ¯è¾å¼ºå¤§.æä»¥è¿éè§ä»è§æº.å¦å¤,å¦æä½¿ç¨dockerfileådocker-composeæä»¶çè¯,å¶å®å¯ä»¥é¿å¼å¤§é¨åçéç½®,å©ä¸çéç½®é½æ¯å ä¸ºå®é¢å¤çåè½,æä»¥å¶ææ¡£è½ç¶å¤æ,ä½éç½®å´å¯ä»¥å¾ç®å.\n\n\n# 3 æ´æ°é¢ç\n\næªè³ç®å,fabric8ioæè¿ä¸æ¬¡æ´æ°æ¨éæ¯å¨2020å¹´9æ28æ¥,spotifyçé¡¹ç®åæ¯2019å¹´10æ15æ¥ã\n\n\n# 4 åè½\n\nè¿ææ¯è¦æ¯è¾çéç¹ï¼ä¹æ¯ fabric8ioå¨é¢ç¢¾åspotifyçå°æ¹\n\n# 1 å¯¹dockerfileådocker-composeæä»¶éç½®çæ¯æ\n\næªè³å°2019å¹´1æã spotifyæååæ¯æèªå®ä¹dockerfileæä»¶çä½ç½®ï¼å¨è¿ä¹ådockerfileå¿é¡»å®è£ä¸å®çè§åæ¾ç½®æè¡ãå¯¹äºdocker-compose.ymlæä»¶çæ¯æä¸ºé¶ã\n\nfabric8ioå¾æ©å°±æ¯æèªå®ä¹dockerfileæä»¶ådocker-compose.ymlæä»¶çå¯¼å¥äºãä¸è¿ç®åå¯¹docker-compose.ymlçæ¬ä¸æ¯æ3.0åæ´æ°ãå¯¹äºæç®åæ¥è¯´æ¯å¤ç¨äºï¼ä»¥åå¸æä¼æ´æ°æ¯æã\n\nå¯¹äºæè¿ç§åæ¬¢æå¯å¨åæ°æ¾å¨docker-composeæä»¶çäººæ¥è¯´ï¼å¯¹docker-composeçæ¯æå¾éè¦ï¼èä¸è¿æ ·å°±å®å¨å¥ç¦»äºæä»¶å¯¹dockeræå»ºåè¿è¡åæ°çç¹çéç½®äºã\n\n# 2 å¯¹dockerå®¹å¨çæ§å¶\n\nfabric8ioçæä¸¤å¤§åè½:\n\n 1. æé å¹¶æ¨édockeréå\n 2. å¯å¨ååæ­¢dockerå®¹å¨\n\nä¹å°±æ¯è¯´éè¿fabric8ioçdockeræä»¶,æä»¬å¯ä»¥å®ç°å¯¹dockerä»æå»ºéåå°è¿è¡åæ¨éå®æ´çæ§å¶æµç¨\n\nèåæ¬spotifyå¨åçå¶ä»æä»¶åä»æç¬¬ä¸é¨ååè½,å³æé å¹¶æ¨ééå,èæ²¡æå®ç°å¯¹å®¹å¨çæ§å¶.è¿ä¹æ¯æä½¿ç¨fabric8ioèä¸ä½¿ç¨spotifyçæä¸»è¦åå .\n\n# 2 å¯¹è¿ç¨dockerä¸»æºçè¿æ¥æ¯æ\n\nspotifyåªæ¯æå¨æ¬æºdockerçéåbuildãtagãpushï¼èfabric8ioå¯ä»¥ç¨äºè¿ç¨ä¸»æºï¼è¿ä¸ªæ¶åè¦æ³¨æ dockerhost é¡¹çéç½®ã\n\n\n# dockerhost éç½®\n\næ³¨æ\n\ndockerhostçéç½®ådockerå®æ¹çéç½®è§åä¸å¤ªä¸æ ·\n\n\n# 1 dockerå®æ¹ççå¬éç½®\n\ndockerå¯ä»¥éç½®ä¸ç§ä¸åç±»åçsocketè¯·æ±ï¼unixï¼tcpï¼å fdï¼å¶ä¸­ fd å unix éå¸¸ç¨äºæ¬æºè¿æ¥ï¼tcp ç¨äº ip è¿æ¥ãä¸èå¨ /etc/docker/daemon.json çéç½®é¡¹ä¸º hostsï¼éè¦æ³¨æä¸æ¯æ http(https)\n\n\n# 2 fabric8io çä¸»æºéç½®\n\nfabric8ioç çdockerhostæ¯æ tcp åhttpï¼httpsï¼ä¸¤ç§æ ¼å¼\n\n# 1 tcp\n\nå¦æä½¿ç¨tcpååªè½ä½¿ç¨ 2375 å 2376ç«¯å£ï¼åå«å¯¹åºä¸å å¯éªè¯åå å¯éªè¯ è¿ä¸ªæ¶åå¨urlééç½®å¶ä»ç«¯å£æ¯æ æçã ï¼ä¹å°±æ¯è¯´ï¼æå¡å¨è®¾ç½®äºçå¬ tcp:///0.0.0.0:9999ï¼fabric8ioçæä»¶è®¾ç½® tcp:å¬ç½ip:9999ï¼ä¹æ¯æ æçï¼è¿ä¸ªæ¶åå¦æå¯ç¨äºsslå å¯çè¯å°±åªè½ä¸èµ·ç¨ 2376ï¼\n\n# 2 http/https\n\nè¿ä¸ªæ¶åç«¯å£æ¯å¯ä»¥èªå®ä¹ç å³æ¯è¯´ç´æ¥ç¨ http://å¬ç½ipï¼ååï¼:9999 å³å¯ã\n\n# 3 ç«¯å£æ¥éçæç¤º\n\nç«¯å£é®é¢è¿æ¥æ¶ä¼æ¥é ï¼ cannot create docker access object org.apache.http.protocolexception: the server failed to respond with a valid http response\n\n\n# fabric8ioçdocker-mavenæä»¶çä½¿ç¨\n\n\n# 1 åèéç½®\n\nå¦ææ¯æ³è¦å¿«éå¯å¨,å¯ä»¥åèä¸é¢çéç½®\n\nè¿ç¨dockerçæ§å¶åéç½®å¯ä»¥çè¿ä¸ç¯æç« :dockerå®¢æ·ç«¯ä½¿ç¨tlsä¿æ¤è¿æ¥è¿ç¨dockeræå¡\n\nä¸é¢ä½¿ç¨dockerfileå®ædockeréåæå»º,ä½¿ç¨docker-compose.ymlå®ædockerå®¹å¨å¯å¨åæ°æ§å¶\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n\n    <properties>\n        <docker.plugin.version>0.34.1</docker.plugin.version>\n        <docker.host>https://10.17.1.101:2376</docker.host>\n        <docker.registry>10.17.1.101</docker.registry>\n        <docker.registry.namespace>library</docker.registry.namespace>\n        <docker.registry.username>admin</docker.registry.username>\n        <docker.registry.password>harbor12345</docker.registry.password>\n    </properties>\n\n    <plugin>\n        <groupid>io.fabric8</groupid>\n        <artifactid>docker-maven-plugin</artifactid>\n        <version>${docker.plugin.version}</version>\n        \x3c!--å¨å±éç½®--\x3e\n        <configuration>\n            \x3c!--è¿ç¨dockerä¸»æºå°å,ç¨äºå®ædockeråé¡¹åè½--\x3e\n            <dockerhost>${docker.host}</dockerhost>\n            \x3c!--dockerè¿ç¨è®¿é®æéè¯ä¹¦å°å,å¦ædockerè¿ç¨ä¸»æºæ²¡æå¯ç¨tlséªè¯åä¸éè¦éè¯ä¹¦--\x3e\n            <certpath>${project.basedir}/docker/ssh</certpath>\n            \x3c!--registryå°å,ç¨äºæ¨é,æåéå--\x3e\n            <registry>${docker.registry}</registry>\n            <authconfig>\n                <push>\n                    <username>${docker.registry.username}</username>\n                    <password>${docker.registry.password}</password>\n                </push>\n            </authconfig>\n            <images>\n                <image>\n                    \x3c!--éåå(å«çæ¬å·)--\x3e\n                    <name>${docker.registry}/${docker.registry.namespace}/${project.name}:${project.version}</name>\n                    <build>\n                        \x3c!--ä½¿ç¨dockerfileæä»¶--\x3e\n                        <dockerfile>${project.basedir}/dockerfile</dockerfile>\n                    </build>\n                </image>\n            </images>\n        </configuration>\n    </plugin>\n</project>\n\n\nå¯ä»¥çå°,å¶å®éç½®æ¯ç¸å½ç®åæ¸æ°ç,åªè¦ä½ ç¡®ä¿dockerfileådocker-compose.ymlç¬¦åè§è,è½å¤ä½¿ç¨,è¿ä¸ªæä»¶å°±å¯ä»¥ä»£æ¿ä½ ä½¿ç¨äº,èä½ ä»éè¦ç»å®éç½®ä¸äºæåºç¡çææä¿¡æ¯ã\n\næç¤º\n\nå¦æéç½®å¯ç¨tlséªè¯ï¼windows 10 ç³»ç»éè¦å°ca.pem,cert.pem,key.pemè¿ä¸ä¸ªæä»¶å¤å¶å°c:\\users\\${user}\\.dockerç®å½ä¸ã\n\n\n# 2 mvnæä»¤è¯´æ\n\nmavenæä»¤                åè½\ndocker:start           åå»ºåå¯å¨å®¹å¨\ndocker:stop            åæ­¢å¹¶éæ¯å®¹å¨\ndocker:build           æå»ºéå\ndocker:watch           èªå¨è¿è¡éå»ºåéå¯\ndocker:push            å°éåæ¨éå°registry\ndocker:remove          ä»æ¬å°dockerä¸»æºå é¤éå\ndocker:logs            æ¾ç¤ºå®¹å¨æ¥å¿\ndocker:source          å°docker build archiveéå å°mavené¡¹ç®\ndocker:save            å°éåä¿å­å°æä»¶\ndocker:volume-create   åå»ºå·ä»¥å¨å®¹å¨ä¹é´å±äº«æ°æ®\ndocker:volume-remove   å é¤åå»ºçå·\n\næ³¨æ,startårunæ¯åä¹ç,å¯ä»¥äºç¸ä»£æ¿,å¦å¤,è¿éçstopåremoveåå¨dockerçä¸ä¸æ ·,dockerçstopä¼ä¿çå®¹å¨,è¿éé»è®¤æ¯åæ­¢å¹¶éæ¯(å½ç¶ä¹å¯ä»¥å¨poméç½®æmvnåæ°éæå®keepcontainerä½¿å¶ä¸éæ¯),ä½æ¯æè®¤ä¸ºä¸è¬æ¯ä¸ä¼ç¨å°æåç,stopå°±æ¯ä¸ºäºremove\n\n\n# 3 æä»¤å®è·µ\n\nè¿éæè´´ä¸ä¸æå¸¸ç¨çmavenæä»¤ è¿æ ·å°±å¯ä»¥å®æä»æåå°å®¹å¨è¿è¡çå®æ´æµç¨\n\n$ mvn clean package docker:stop docker:remove docker:build docker:run \n\n\nä¸æ¯æ¯ä¸æ¬¡è¿è¡é½è¦æ¨éç,å¦æè¦çè¯å¯ä»¥åç¬è°ç¨docker:push\n\n$ mvn docker:push\n\n\n\n# 4 æ³¨æäºé¡¹\n\ndocker:run è¿éæä¸ªå,docker:runæ¯å¨åå°æ§è¡,ä¹å°±æ¯è¯´,å®å¹¶ä¸è½åä½¿ç¨dockerä¸ä¸ç´æ¥docker start -dæ¥å®ç°åå°è¿è¡,æä»¥å¦ææ¯å¨å½ä»¤è¡ä¸å¯å¨çè¯,æctrl+cå°±ç´æ¥éåºäº,æ¹æ³æ¯å½ä»¤è¡ä¸å¯å¨çæ¶åä½¿ç¨å¦ä¸æä»¤åè£æåå°è¿è¡\n\n$ nohup mvn docker:run & \n\n\nå¦ææ¯ç¨ideæ§å¶çè¯å°±ä¸ç¨æå¿,å ä¸ºideåªæ¯çæ§è¿è¡æ¥å¿èå·²,ideè¿ééåºä¸å½±åå¶å¨è¿ç¨æå¡å¨ä¸çè¿è¡.\n\nå¦å¤,docker:runä¹åçæä»¤ä¸ä¼è¿è¡,å ä¸ºrunä¹åå®ä¼çæ§javaç¨åºçæ§å¶å°è¾åºç´å°è¿è¡ç»æ,èä¸è¬java webç¨åºæ¯ä½ä¸ºæå¡å¨ä¸ç´è¿è¡ç,æä»¥å°±å¯¼è´docker:runåé¢çæä»¤ä¸æ§è¡ è§£å³æ¹æ³æä¸¤ä¸ª,ç¬¬ä¸,è®©docker:runæ¾æå,ç¬¬äº,å¦å¤åç¬æ§è¡ç¬¬äºæ¡mvnæä»¤\n\n\n# åèææ¡£:\n\n * githubé¡¹ç®å°å:https://github.com/fabric8io/docker-maven-plugin\n * ç¨æ·æå:http://dmp.fabric8.io/',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"Inneræ³¨è§£ä½¿ç¨è¯´æ",frontmatter:{title:"Inneræ³¨è§£ä½¿ç¨è¯´æ",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/9dfd5c/"},regularPath:"/21.Simplify/01.Simplify%20Docs/10.Inner%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.html",relativePath:"21.Simplify/01.Simplify Docs/10.Inneræ³¨è§£ä½¿ç¨è¯´æ.md",key:"v-613443b0",path:"/pages/9dfd5c/",headers:[{level:2,title:"Innerçè¯ç",slug:"innerçè¯ç",normalizedTitle:"innerçè¯ç",charIndex:18},{level:2,title:"Innerçå¤çæµç¨",slug:"innerçå¤çæµç¨",normalizedTitle:"innerçå¤çæµç¨",charIndex:746},{level:3,title:"ç»ä¸çignore-urlå¤ç",slug:"ç»ä¸çignore-urlå¤ç",normalizedTitle:"ç»ä¸çignore-urlå¤ç",charIndex:761},{level:2,title:"ç»ä¸çå®å¨æ§å¤ç",slug:"ç»ä¸çå®å¨æ§å¤ç",normalizedTitle:"ç»ä¸çå®å¨æ§å¤ç",charIndex:2847},{level:2,title:"åççä½¿ç¨@Inneræ³¨è§£",slug:"åççä½¿ç¨-inneræ³¨è§£",normalizedTitle:"åççä½¿ç¨@inneræ³¨è§£",charIndex:3882},{level:2,title:"æå¡ç½å³headeræ¸ç",slug:"æå¡ç½å³headeræ¸ç",normalizedTitle:"æå¡ç½å³headeræ¸ç",charIndex:5503}],headersStr:"Innerçè¯ç Innerçå¤çæµç¨ ç»ä¸çignore-urlå¤ç ç»ä¸çå®å¨æ§å¤ç åççä½¿ç¨@Inneræ³¨è§£ æå¡ç½å³headeræ¸ç",content:'# Inneræ³¨è§£ä½¿ç¨è¯´æ\n\n\n# Innerçè¯ç\n\nPigä¸­Urlçè®¿é®å¤§è´åä¸ºä¸¤ç§ï¼ä¸ç§æ¯ç±Gatewayç½å³ä»å¤ç½è·¯ç±è¿æ¥ï¼ä¸ç§æ¯åç½éè¿Feignè¿è¡åé¨æå¡è°ç¨ãé£æä»¬ç»åSecurityå°±å­å¨ä»¥ä¸å ç§åºç¨åºæ¯ï¼\n\n 1. å¤é¨ä»Gatewayè®¿é®ï¼éè¦é´æï¼eg.CURDæä½ï¼ãè¿ç§æ¯æå¸¸ä½¿ç¨çï¼ç¨æ·ç»å½åæ­£å¸¸è®¿é®æ¥å£ï¼ä¸éè¦æä»¬åä»ä¹å¤çï¼å¯è½æçæ¥å£éè¦å æéå­æ®µï¼ã\n 2. å¤é¨ä»Gatewayè®¿é®ï¼ä¸éè¦é´æï¼eg.ç­ä¿¡éªè¯ç ï¼ãéè¦æä»¬å°uriå å¥å°security.oauth2.client.ignore-urlséç½®ä¸­ï¼å¯ä»¥ä¸éè¦é´æè®¿é®\n 3. åé¨æå¡é´ç¨Feignè®¿é®ï¼ä¸éè¦é´æï¼eg.Authæ¥è¯¢ç¨æ·ä¿¡æ¯ï¼ãä¹æ¯éè¦æä»¬å°uriå å¥å°security.oauth2.client.ignore-urlséç½®ä¸­ï¼é£ä¸ç¬¬äºç§çåºå«å°±æ¯è¿ç§æåµä¸å¤§å¤æ°é½æ¯æå¡å¯ä»¥è¯·æ±å¦ä¸ä¸ªæå¡çæææ°æ®ï¼ä¸åçº¦æï¼é£æä»¬å¦æä»ä»åªéç½®ignore-urlçè¯ï¼å¤é¨ææäººé½å¯ä»¥éè¿urlè¯·æ±å°æä»¬åé¨çé¾æ¥ï¼å®å¨è¾¾ä¸å°ä¿éã\n\né´äºä¸è¿°ç¬¬ä¸ç§æåµï¼æä»¬éç½®äºignore-urlåFeignï¼æ­¤æ¶è¯¥æ¥å£ä¸éè¦é´æï¼æå¡åé¨éè¿Feignè®¿é®ï¼æå¡å¤é¨éè¿urlä¹å¯ä»¥è®¿é®ï¼æä»¥Pigä¸­ï¼å å¥äºä¸ç§@RequestHeader(SecurityConstants.FROM)çå¤çæ¹å¼ãå³å¨æ¥å£æ¹æ³ä¸­ï¼å¯¹å¤´é¨è¿è¡å¤æ­ï¼åªæè¯·æ±å¸¦ä¸ç¸åºçHeaderåæ°æ¶ï¼æåè®¸éè¿è®¿é®ï¼å¦åæåºå¼å¸¸ãé£è¿æ¶åå¶å®æä»¬å¨å¤ç½éè¿Gatewayè®¿é®çæ¶åï¼ä¹å¯ä»¥æå¨å¸¦ä¸è¿ä¸ªHeaderåæ°ï¼æ¥è¾¾å°è¿ä¸ªç®çãæä»¥æä»¬ä¾¿å¨Gatewayä¸­è®¾ç½®äºä¸ä¸ªGlobalFilterè¿æ»¤å¨ï¼\n\n\n# Innerçå¤çæµç¨\n\n\n# ç»ä¸çignore-urlå¤ç\n\né¦åæä»¬æ¥ççè¿ä¸ªæ³¨è§£çä»£ç \n\n@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface Inner {\n   /**\n    * æ¯å¦AOPç»ä¸å¤ç(å¯ä»¥çè§£ä¸ºæ¯å¦ä»åè®¸Feignä¹é´è°ç¨)\n    *\n    * @return false, true\n    */\n   boolean value() default true;\n\n   /**\n    * éè¦ç¹æ®å¤ç©ºçå­æ®µ(é¢ç)\n    *\n    * @return {}\n    */\n   String[] field() default {};\n}\n\n\né¦åï¼å¨æä»¬é¡¹ç®å è½½é¶æ®µï¼æä»¬è·åæInneræ³¨è§£çç±»åæ¹æ³ï¼ç¶åè·åæä»¬éç½®çuriï¼ç»è¿æ­£åæ¿æ¢åé¢çå¯ååæ°ä¸º*ï¼ç¶åå°æ­¤uriå å¥å°ignore-urlä¸­ãæ­¤æ¶æä»¬å°±è½è¾¾å°ææInneréç½®çæ¹æ³/ç±»ä¸çæ¥å£å°åï¼é½ç»ä¸å¨é¡¹ç®å è½½é¶æ®µèªå¨å¸®æä»¬å å°ignore-urlä¸­ï¼ä¸éè¦æä»¬æå¨éç½®ï¼åå»äºå¾å¤å¼åå·¥ä½ï¼åæ¶ä¹è½é¿åæä»¬å¿è®°éç½®ï¼èæµªè´¹å¼åæ¶é´ãæ ¸å¿ä»£ç å¦ä¸ï¼\n\n@Slf4j\n@Configuration\n@ConditionalOnExpression("!\'${security.oauth2.client.ignore-urls}\'.isEmpty()")\n@ConfigurationProperties(prefix = "security.oauth2.client")\npublic class PermitAllUrlProperties implements InitializingBean {\n   private static final Pattern PATTERN = Pattern.compile("\\\\{(.*?)\\\\}");\n   @Autowired\n   private WebApplicationContext applicationContext;\n   @Getter\n   @Setter\n   private List<String> ignoreUrls = new ArrayList<>();\n   @Override\n   public void afterPropertiesSet() {\n      RequestMappingHandlerMapping mapping = applicationContext.getBean(RequestMappingHandlerMapping.class);\n      Map<RequestMappingInfo, HandlerMethod> map = mapping.getHandlerMethods();\n      map.keySet().forEach(info -> {\n         HandlerMethod handlerMethod = map.get(info);\n         // è·åæ¹æ³ä¸è¾¹çæ³¨è§£ æ¿ä»£path variable ä¸º *\n         Inner method = AnnotationUtils.findAnnotation(handlerMethod.getMethod(), Inner.class);\n         Optional.ofNullable(method)\n               .ifPresent(inner -> info.getPatternsCondition().getPatterns()\n                     .forEach(url -> ignoreUrls.add(ReUtil.replaceAll(url, PATTERN, StringPool.ASTERISK))));\n         // è·åç±»ä¸è¾¹çæ³¨è§£, æ¿ä»£path variable ä¸º *\n         Inner controller = AnnotationUtils.findAnnotation(handlerMethod.getBeanType(), Inner.class);\n         Optional.ofNullable(controller)\n               .ifPresent(inner -> info.getPatternsCondition().getPatterns()\n                     .forEach(url -> ignoreUrls.add(ReUtil.replaceAll(url, PATTERN, StringPool.ASTERISK))));\n      });\n   }\n}\n\n\n\n# ç»ä¸çå®å¨æ§å¤ç\n\né£ä¸é¢è®²å°çï¼å¦ææä»¬ä¸å¸æè¿ä¸ªurlå¯ä»¥ç´æ¥è¢«å¤ç½è°ç¨ï¼ä»è½å¨Feignæå¡ä¸­è°ç¨ï¼æ¹å¦ä½ç»ä¸å¤çå¢ï¼\n\næä»¬ä½¿ç¨ä¸ä¸ªSpring-AOPï¼å¨å¯¹ææInneræ³¨è§£çæ¹æ³åä¸ä¸ªç¯ç»å¢å¼ºçåç¹ï¼è¿è¡ç»ä¸çå¤çãå¨ä¸é¢æä»¬æå°çInnerçvalueåæ°ï¼å½è¯¥åæ°ä¸ºtrueæ¶ï¼æä»¬å¯¹æ¹æ³çå¥åè¿è¡å¤æ­ï¼ä»å½ç¬¦åæä»¬å®å¶çå¥åè§åæ¶ï¼Pigxè¿éæ¯ç¨ç@RequestHeader(SecurityConstants.FROM) ä¸SecurityConstants.FROM_INåæ¯è¾ï¼,æä»¬å¯¹å®è¿è¡æ¾è¡ï¼ä¸ç¬¦åæ¶ï¼æåºå¼å¸¸ï¼å½valueä¸ºfalseæ¶ï¼å±ä¸åä»»ä½å¤çï¼æ­¤æ¶Innerä»èµ·å°äºä¸ä¸ªignore-urlçä½ç¨ã\n\n@Slf4j\n@Aspect\n@AllArgsConstructor\npublic class PigSecurityInnerAspect {\n   private final HttpServletRequest request;\n\n   @SneakyThrows\n   @Around("@annotation(inner)")\n   public Object around(ProceedingJoinPoint point, Inner inner) {\n      String header = request.getHeader(SecurityConstants.FROM);\n      if (inner.value() && !StrUtil.equals(SecurityConstants.FROM_IN, header)) {\n         log.warn("è®¿é®æ¥å£ {} æ²¡ææé", point.getSignature().getName());\n         throw new AccessDeniedException("Access is denied");\n      }\n      return point.proceed();\n   }\n}\n\n\néè¿è¿ä¸¤æ­¥å¢ï¼æä»¬é¦åæ¯å¨å è½½æ¶éè¿æ¾å°Inneræ³¨è§£ï¼å°ç¸åºçuriå å¥å°ignore-urlä¸­ï¼è¾¾å°èªå¨åéç½®çç®çï¼ä¹åæä»¬åä½¿ç¨åé¢å¯¹Innerçæ¹æ³è¿è¡ç¯ç»å¤çï¼è¾¾å°å®å¨æ§å¶ãå¯¹æ¯ä¹åçå¤çæ¹å¼ï¼ç°å¨æä»¬ä½¿ç¨ä¸ä¸ª@Inneræ³¨è§£ï¼å°±è½å¾å¿«çæ»¡è¶³ä¸é¢è¯´çä¸¤ç§åºæ¯ï¼å¤§å¤§èçäºæä»¬çå¼åæ¶é´ã\n\n\n# åççä½¿ç¨@Inneræ³¨è§£\n\nä¸é¢æå°çä¸¤ç§åºç¨åºæ¯ï¼å¨æä»¬çä»£ç ä¸­ï¼å¶å®é½æ¯å¯ä»¥ä½¿ç¨Inneræ³¨è§£çï¼ä¸é¢ç»åFeignåä¸ä¸ªç®åçç¤ºä¾ï¼ç¤ºä¾åºæ¯å°±æ¯æä»¬çç¨æ·å¯ç ç»å½ä¸­çä¸ç¯ï¼\n\n 1. å¨æ¥å£ä¸ä½¿ç¨@Inneræ³¨è§£ï¼ä½¿å¾urlæ éé´æ\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n/**\n * è·åæå®ç¨æ·å¨é¨ä¿¡æ¯\n *\n * @return ç¨æ·ä¿¡æ¯\n */\n@Inner\n@GetMapping("/info/{username}")\npublic R info(@PathVariable String username) {\n   SysUser user = userService.getOne(Wrappers.<SysUser>query()\n         .lambda().eq(SysUser::getUsername, username));\n   if (user == null) {\n      return R.failed(null, String.format("ç¨æ·ä¿¡æ¯ä¸ºç©º %s", username));\n   }\n   return R.ok(userService.findUserInfo(user));\n}\n\n\n 1. ç¼åFeignæ¥å£\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n@FeignClient(contextId = "remoteUserService", value = ServiceNameConstants.UMPS_SERVICE)\npublic interface RemoteUserService {\n    /**\n     * éè¿ç¨æ·åæ¥è¯¢ç¨æ·ãè§è²ä¿¡æ¯\n     *\n     * @param username ç¨æ·å\n     * @param from     è°ç¨æ å¿\n     * @return R\n     */\n    @GetMapping("/user/info/{username}")\n    R<UserInfo> info(@PathVariable("username") String username\n          , @RequestHeader(SecurityConstants.FROM) String from);\n}\n\n\n 1. Feign-Clientä¸­è°ç¨æ¥å£ï¼å¸¦ä¸SecurityConstants.FROM_INåæ°ä¸ºåé¨è¯å«\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n/**\n * ç¨æ·å¯ç ç»å½\n *\n * @param username ç¨æ·å\n * @return\n * @throws UsernameNotFoundException\n */\n@Override\n@SneakyThrows\npublic UserDetails loadUserByUsername(String username) {\n   Cache cache = cacheManager.getCache(CacheConstants.USER_DETAILS);\n   if (cache != null && cache.get(username) != null) {\n      return (PigxUser) cache.get(username).get();\n   }\n   R<UserInfo> result = remoteUserService.info(username, SecurityConstants.FROM_IN);\n   UserDetails userDetails = getUserDetails(result);\n   cache.put(username, userDetails);\n   return userDetails;\n}\n\n\n\n# æå¡ç½å³headeræ¸ç\n\n@Component\npublic class HttpRequestGlobalFilter implements GlobalFilter, Ordered {\n\n    @Override\n    public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n\n        // 1ãæ¸çè¯·æ±å¤´ä¸­fromåæ°ï¼ä¿è¯æ¥å£å®å¨ã\n        ServerHttpRequest request = exchange.getRequest().mutate()\n                .headers(httpHeaders -> httpHeaders.remove(SecurityConstants.FROM)).build();\n        // 2ãéåStripPrefix\n        addOriginalRequestUrl(exchange, request.getURI());\n        String path = request.getURI().getRawPath();\n        String newPath = "/" + Arrays.stream(StringUtils.tokenizeToStringArray(path, "/")).skip(1)\n                .collect(Collectors.joining("/"));\n        ServerHttpRequest newRequest = request.mutate().path(newPath).build();\n        exchange.getAttributes().put(GATEWAY_REQUEST_URL_ATTR, newRequest.getURI());\n\n        return chain.filter(exchange.mutate().request(newRequest).build());\n    }\n\n    @Override\n    public int getOrder() {\n        return -1000;\n    }\n}\n\n\nç°å¨/info/{username} è¿ä¸ªuriä»ç½å³å¤é¨æä»¬è®¿é®æ¯æ¥éçï¼ä¸è¬æ¥è¯´æå¡é½æ¯èµ°ç½å³æ´é²æ¥å£ï¼ï¼èFeignåé¨å¸¦ä¸åæ°æ¯å¯ä»¥æ­£å¸¸è®¿é®çãå¤§ååæåæ¯å¤éã',normalizedContent:'# inneræ³¨è§£ä½¿ç¨è¯´æ\n\n\n# innerçè¯ç\n\npigä¸­urlçè®¿é®å¤§è´åä¸ºä¸¤ç§ï¼ä¸ç§æ¯ç±gatewayç½å³ä»å¤ç½è·¯ç±è¿æ¥ï¼ä¸ç§æ¯åç½éè¿feignè¿è¡åé¨æå¡è°ç¨ãé£æä»¬ç»åsecurityå°±å­å¨ä»¥ä¸å ç§åºç¨åºæ¯ï¼\n\n 1. å¤é¨ä»gatewayè®¿é®ï¼éè¦é´æï¼eg.curdæä½ï¼ãè¿ç§æ¯æå¸¸ä½¿ç¨çï¼ç¨æ·ç»å½åæ­£å¸¸è®¿é®æ¥å£ï¼ä¸éè¦æä»¬åä»ä¹å¤çï¼å¯è½æçæ¥å£éè¦å æéå­æ®µï¼ã\n 2. å¤é¨ä»gatewayè®¿é®ï¼ä¸éè¦é´æï¼eg.ç­ä¿¡éªè¯ç ï¼ãéè¦æä»¬å°uriå å¥å°security.oauth2.client.ignore-urlséç½®ä¸­ï¼å¯ä»¥ä¸éè¦é´æè®¿é®\n 3. åé¨æå¡é´ç¨feignè®¿é®ï¼ä¸éè¦é´æï¼eg.authæ¥è¯¢ç¨æ·ä¿¡æ¯ï¼ãä¹æ¯éè¦æä»¬å°uriå å¥å°security.oauth2.client.ignore-urlséç½®ä¸­ï¼é£ä¸ç¬¬äºç§çåºå«å°±æ¯è¿ç§æåµä¸å¤§å¤æ°é½æ¯æå¡å¯ä»¥è¯·æ±å¦ä¸ä¸ªæå¡çæææ°æ®ï¼ä¸åçº¦æï¼é£æä»¬å¦æä»ä»åªéç½®ignore-urlçè¯ï¼å¤é¨ææäººé½å¯ä»¥éè¿urlè¯·æ±å°æä»¬åé¨çé¾æ¥ï¼å®å¨è¾¾ä¸å°ä¿éã\n\né´äºä¸è¿°ç¬¬ä¸ç§æåµï¼æä»¬éç½®äºignore-urlåfeignï¼æ­¤æ¶è¯¥æ¥å£ä¸éè¦é´æï¼æå¡åé¨éè¿feignè®¿é®ï¼æå¡å¤é¨éè¿urlä¹å¯ä»¥è®¿é®ï¼æä»¥pigä¸­ï¼å å¥äºä¸ç§@requestheader(securityconstants.from)çå¤çæ¹å¼ãå³å¨æ¥å£æ¹æ³ä¸­ï¼å¯¹å¤´é¨è¿è¡å¤æ­ï¼åªæè¯·æ±å¸¦ä¸ç¸åºçheaderåæ°æ¶ï¼æåè®¸éè¿è®¿é®ï¼å¦åæåºå¼å¸¸ãé£è¿æ¶åå¶å®æä»¬å¨å¤ç½éè¿gatewayè®¿é®çæ¶åï¼ä¹å¯ä»¥æå¨å¸¦ä¸è¿ä¸ªheaderåæ°ï¼æ¥è¾¾å°è¿ä¸ªç®çãæä»¥æä»¬ä¾¿å¨gatewayä¸­è®¾ç½®äºä¸ä¸ªglobalfilterè¿æ»¤å¨ï¼\n\n\n# innerçå¤çæµç¨\n\n\n# ç»ä¸çignore-urlå¤ç\n\né¦åæä»¬æ¥ççè¿ä¸ªæ³¨è§£çä»£ç \n\n@target({elementtype.method, elementtype.type})\n@retention(retentionpolicy.runtime)\n@documented\npublic @interface inner {\n   /**\n    * æ¯å¦aopç»ä¸å¤ç(å¯ä»¥çè§£ä¸ºæ¯å¦ä»åè®¸feignä¹é´è°ç¨)\n    *\n    * @return false, true\n    */\n   boolean value() default true;\n\n   /**\n    * éè¦ç¹æ®å¤ç©ºçå­æ®µ(é¢ç)\n    *\n    * @return {}\n    */\n   string[] field() default {};\n}\n\n\né¦åï¼å¨æä»¬é¡¹ç®å è½½é¶æ®µï¼æä»¬è·åæinneræ³¨è§£çç±»åæ¹æ³ï¼ç¶åè·åæä»¬éç½®çuriï¼ç»è¿æ­£åæ¿æ¢åé¢çå¯ååæ°ä¸º*ï¼ç¶åå°æ­¤uriå å¥å°ignore-urlä¸­ãæ­¤æ¶æä»¬å°±è½è¾¾å°ææinneréç½®çæ¹æ³/ç±»ä¸çæ¥å£å°åï¼é½ç»ä¸å¨é¡¹ç®å è½½é¶æ®µèªå¨å¸®æä»¬å å°ignore-urlä¸­ï¼ä¸éè¦æä»¬æå¨éç½®ï¼åå»äºå¾å¤å¼åå·¥ä½ï¼åæ¶ä¹è½é¿åæä»¬å¿è®°éç½®ï¼èæµªè´¹å¼åæ¶é´ãæ ¸å¿ä»£ç å¦ä¸ï¼\n\n@slf4j\n@configuration\n@conditionalonexpression("!\'${security.oauth2.client.ignore-urls}\'.isempty()")\n@configurationproperties(prefix = "security.oauth2.client")\npublic class permitallurlproperties implements initializingbean {\n   private static final pattern pattern = pattern.compile("\\\\{(.*?)\\\\}");\n   @autowired\n   private webapplicationcontext applicationcontext;\n   @getter\n   @setter\n   private list<string> ignoreurls = new arraylist<>();\n   @override\n   public void afterpropertiesset() {\n      requestmappinghandlermapping mapping = applicationcontext.getbean(requestmappinghandlermapping.class);\n      map<requestmappinginfo, handlermethod> map = mapping.gethandlermethods();\n      map.keyset().foreach(info -> {\n         handlermethod handlermethod = map.get(info);\n         // è·åæ¹æ³ä¸è¾¹çæ³¨è§£ æ¿ä»£path variable ä¸º *\n         inner method = annotationutils.findannotation(handlermethod.getmethod(), inner.class);\n         optional.ofnullable(method)\n               .ifpresent(inner -> info.getpatternscondition().getpatterns()\n                     .foreach(url -> ignoreurls.add(reutil.replaceall(url, pattern, stringpool.asterisk))));\n         // è·åç±»ä¸è¾¹çæ³¨è§£, æ¿ä»£path variable ä¸º *\n         inner controller = annotationutils.findannotation(handlermethod.getbeantype(), inner.class);\n         optional.ofnullable(controller)\n               .ifpresent(inner -> info.getpatternscondition().getpatterns()\n                     .foreach(url -> ignoreurls.add(reutil.replaceall(url, pattern, stringpool.asterisk))));\n      });\n   }\n}\n\n\n\n# ç»ä¸çå®å¨æ§å¤ç\n\né£ä¸é¢è®²å°çï¼å¦ææä»¬ä¸å¸æè¿ä¸ªurlå¯ä»¥ç´æ¥è¢«å¤ç½è°ç¨ï¼ä»è½å¨feignæå¡ä¸­è°ç¨ï¼æ¹å¦ä½ç»ä¸å¤çå¢ï¼\n\næä»¬ä½¿ç¨ä¸ä¸ªspring-aopï¼å¨å¯¹ææinneræ³¨è§£çæ¹æ³åä¸ä¸ªç¯ç»å¢å¼ºçåç¹ï¼è¿è¡ç»ä¸çå¤çãå¨ä¸é¢æä»¬æå°çinnerçvalueåæ°ï¼å½è¯¥åæ°ä¸ºtrueæ¶ï¼æä»¬å¯¹æ¹æ³çå¥åè¿è¡å¤æ­ï¼ä»å½ç¬¦åæä»¬å®å¶çå¥åè§åæ¶ï¼pigxè¿éæ¯ç¨ç@requestheader(securityconstants.from) ä¸securityconstants.from_inåæ¯è¾ï¼,æä»¬å¯¹å®è¿è¡æ¾è¡ï¼ä¸ç¬¦åæ¶ï¼æåºå¼å¸¸ï¼å½valueä¸ºfalseæ¶ï¼å±ä¸åä»»ä½å¤çï¼æ­¤æ¶innerä»èµ·å°äºä¸ä¸ªignore-urlçä½ç¨ã\n\n@slf4j\n@aspect\n@allargsconstructor\npublic class pigsecurityinneraspect {\n   private final httpservletrequest request;\n\n   @sneakythrows\n   @around("@annotation(inner)")\n   public object around(proceedingjoinpoint point, inner inner) {\n      string header = request.getheader(securityconstants.from);\n      if (inner.value() && !strutil.equals(securityconstants.from_in, header)) {\n         log.warn("è®¿é®æ¥å£ {} æ²¡ææé", point.getsignature().getname());\n         throw new accessdeniedexception("access is denied");\n      }\n      return point.proceed();\n   }\n}\n\n\néè¿è¿ä¸¤æ­¥å¢ï¼æä»¬é¦åæ¯å¨å è½½æ¶éè¿æ¾å°inneræ³¨è§£ï¼å°ç¸åºçuriå å¥å°ignore-urlä¸­ï¼è¾¾å°èªå¨åéç½®çç®çï¼ä¹åæä»¬åä½¿ç¨åé¢å¯¹innerçæ¹æ³è¿è¡ç¯ç»å¤çï¼è¾¾å°å®å¨æ§å¶ãå¯¹æ¯ä¹åçå¤çæ¹å¼ï¼ç°å¨æä»¬ä½¿ç¨ä¸ä¸ª@inneræ³¨è§£ï¼å°±è½å¾å¿«çæ»¡è¶³ä¸é¢è¯´çä¸¤ç§åºæ¯ï¼å¤§å¤§èçäºæä»¬çå¼åæ¶é´ã\n\n\n# åççä½¿ç¨@inneræ³¨è§£\n\nä¸é¢æå°çä¸¤ç§åºç¨åºæ¯ï¼å¨æä»¬çä»£ç ä¸­ï¼å¶å®é½æ¯å¯ä»¥ä½¿ç¨inneræ³¨è§£çï¼ä¸é¢ç»åfeignåä¸ä¸ªç®åçç¤ºä¾ï¼ç¤ºä¾åºæ¯å°±æ¯æä»¬çç¨æ·å¯ç ç»å½ä¸­çä¸ç¯ï¼\n\n 1. å¨æ¥å£ä¸ä½¿ç¨@inneræ³¨è§£ï¼ä½¿å¾urlæ éé´æ\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n/**\n * è·åæå®ç¨æ·å¨é¨ä¿¡æ¯\n *\n * @return ç¨æ·ä¿¡æ¯\n */\n@inner\n@getmapping("/info/{username}")\npublic r info(@pathvariable string username) {\n   sysuser user = userservice.getone(wrappers.<sysuser>query()\n         .lambda().eq(sysuser::getusername, username));\n   if (user == null) {\n      return r.failed(null, string.format("ç¨æ·ä¿¡æ¯ä¸ºç©º %s", username));\n   }\n   return r.ok(userservice.finduserinfo(user));\n}\n\n\n 1. ç¼åfeignæ¥å£\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n@feignclient(contextid = "remoteuserservice", value = servicenameconstants.umps_service)\npublic interface remoteuserservice {\n    /**\n     * éè¿ç¨æ·åæ¥è¯¢ç¨æ·ãè§è²ä¿¡æ¯\n     *\n     * @param username ç¨æ·å\n     * @param from     è°ç¨æ å¿\n     * @return r\n     */\n    @getmapping("/user/info/{username}")\n    r<userinfo> info(@pathvariable("username") string username\n          , @requestheader(securityconstants.from) string from);\n}\n\n\n 1. feign-clientä¸­è°ç¨æ¥å£ï¼å¸¦ä¸securityconstants.from_inåæ°ä¸ºåé¨è¯å«\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n/**\n * ç¨æ·å¯ç ç»å½\n *\n * @param username ç¨æ·å\n * @return\n * @throws usernamenotfoundexception\n */\n@override\n@sneakythrows\npublic userdetails loaduserbyusername(string username) {\n   cache cache = cachemanager.getcache(cacheconstants.user_details);\n   if (cache != null && cache.get(username) != null) {\n      return (pigxuser) cache.get(username).get();\n   }\n   r<userinfo> result = remoteuserservice.info(username, securityconstants.from_in);\n   userdetails userdetails = getuserdetails(result);\n   cache.put(username, userdetails);\n   return userdetails;\n}\n\n\n\n# æå¡ç½å³headeræ¸ç\n\n@component\npublic class httprequestglobalfilter implements globalfilter, ordered {\n\n    @override\n    public mono<void> filter(serverwebexchange exchange, gatewayfilterchain chain) {\n\n        // 1ãæ¸çè¯·æ±å¤´ä¸­fromåæ°ï¼ä¿è¯æ¥å£å®å¨ã\n        serverhttprequest request = exchange.getrequest().mutate()\n                .headers(httpheaders -> httpheaders.remove(securityconstants.from)).build();\n        // 2ãéåstripprefix\n        addoriginalrequesturl(exchange, request.geturi());\n        string path = request.geturi().getrawpath();\n        string newpath = "/" + arrays.stream(stringutils.tokenizetostringarray(path, "/")).skip(1)\n                .collect(collectors.joining("/"));\n        serverhttprequest newrequest = request.mutate().path(newpath).build();\n        exchange.getattributes().put(gateway_request_url_attr, newrequest.geturi());\n\n        return chain.filter(exchange.mutate().request(newrequest).build());\n    }\n\n    @override\n    public int getorder() {\n        return -1000;\n    }\n}\n\n\nç°å¨/info/{username} è¿ä¸ªuriä»ç½å³å¤é¨æä»¬è®¿é®æ¯æ¥éçï¼ä¸è¬æ¥è¯´æå¡é½æ¯èµ°ç½å³æ´é²æ¥å£ï¼ï¼èfeignåé¨å¸¦ä¸åæ°æ¯å¯ä»¥æ­£å¸¸è®¿é®çãå¤§ååæåæ¯å¤éã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"Java8 Stream",frontmatter:{title:"Java8 Stream",date:"2022-02-09T13:15:12.000Z",permalink:"/pages/5f71ee/"},regularPath:"/21.Simplify/01.Simplify%20Docs/11.Java8%20Stream.html",relativePath:"21.Simplify/01.Simplify Docs/11.Java8 Stream.md",key:"v-2da1a437",path:"/pages/5f71ee/",headers:[{level:2,title:"1 Streamæ¦è¿°",slug:"_1-streamæ¦è¿°",normalizedTitle:"1 streamæ¦è¿°",charIndex:21},{level:2,title:"2 Streamçåå»º",slug:"_2-streamçåå»º",normalizedTitle:"2 streamçåå»º",charIndex:35},{level:2,title:"3 Streamçä½¿ç¨",slug:"_3-streamçä½¿ç¨",normalizedTitle:"3 streamçä½¿ç¨",charIndex:50},{level:3,title:"3.1 éå/å¹é(foreach/find/match)",slug:"_3-1-éå-å¹é-foreach-find-match",normalizedTitle:"3.1 éå/å¹é(foreach/find/match)",charIndex:67},{level:3,title:"3.2 ç­é(filter)",slug:"_3-2-ç­é-filter",normalizedTitle:"3.2 ç­é(filter)",charIndex:102},{level:3,title:"3.3 èå(max/min/count)",slug:"_3-3-èå-max-min-count",normalizedTitle:"3.3 èå(max/min/count)",charIndex:122},{level:3,title:"3.4 æ å°(map/flatMap)",slug:"_3-4-æ å°-map-flatmap",normalizedTitle:"3.4 æ å°(map/flatmap)",charIndex:149},{level:3,title:"3.5 å½çº¦(reduce)",slug:"_3-5-å½çº¦-reduce",normalizedTitle:"3.5 å½çº¦(reduce)",charIndex:174},{level:3,title:"3.6 æ¶é(collect)",slug:"_3-6-æ¶é-collect",normalizedTitle:"3.6 æ¶é(collect)",charIndex:194},{level:3,title:"3.7 æåº(sorted)",slug:"_3-7-æåº-sorted",normalizedTitle:"3.7 æåº(sorted)",charIndex:215},{level:3,title:"3.8 æå/ç»å",slug:"_3-8-æå-ç»å",normalizedTitle:"3.8 æå/ç»å",charIndex:235}],headersStr:"1 Streamæ¦è¿° 2 Streamçåå»º 3 Streamçä½¿ç¨ 3.1 éå/å¹é(foreach/find/match) 3.2 ç­é(filter) 3.3 èå(max/min/count) 3.4 æ å°(map/flatMap) 3.5 å½çº¦(reduce) 3.6 æ¶é(collect) 3.7 æåº(sorted) 3.8 æå/ç»å",content:'# Java8 Stream\n\n\n\n * 1 Streamæ¦è¿°\n * 2 Streamçåå»º\n * 3 Streamçä½¿ç¨\n   * 3.1 éå/å¹é(foreach/find/match)\n   * 3.2 ç­é(filter)\n   * 3.3 èå(max/min/count)\n   * 3.4 æ å°(map/flatMap)\n   * 3.5 å½çº¦(reduce)\n   * 3.6 æ¶é(collect)\n   * 3.7 æåº(sorted)\n   * 3.8 æå/ç»å\n\n\n\nåè´´ä¸å ä¸ªæ¡ä¾ï¼æ°´å¹³é«è¶çåå­¦å¯ä»¥ææä¸ä¸ï¼\n\n 1. ä»åå·¥éåä¸­ç­éåºsalaryå¤§äº8000çåå·¥ï¼å¹¶æ¾ç½®å°æ°çéåéã\n 2. ç»è®¡åå·¥çæé«èªèµãå¹³åèªèµãèªèµä¹åã\n 3. å°åå·¥æèªèµä»é«å°ä½æåºï¼åæ ·èªèµèå¹´é¾å°èå¨åã\n 4. å°åå·¥ææ§å«åç±»ï¼å°åå·¥ææ§å«åå°åºåç±»ï¼å°åå·¥æèªèµæ¯å¦é«äº8000åä¸ºä¸¤é¨åã\n\nç¨ä¼ ç»çè¿­ä»£å¤çä¹ä¸æ¯å¾é¾ï¼ä½ä»£ç å°±æ¾å¾åä½äºï¼è·Streamç¸æ¯é«ä¸ç«å¤ã\n\n\n# 1 Streamæ¦è¿°\n\nJava 8 æ¯ä¸ä¸ªéå¸¸æåççæ¬ï¼è¿ä¸ªçæ¬æ°å¢çStreamï¼éååçæ¬åºç°ç Lambda ï¼ç»æä»¬æä½éåï¼Collectionï¼æä¾äºæå¤§çä¾¿å©ã\n\né£ä¹ä»ä¹æ¯Streamï¼\n\næç¤º\n\nStreamå°è¦å¤ççåç´ éåçä½ä¸ç§æµï¼å¨æµçè¿ç¨ä¸­ï¼åå©Stream APIå¯¹æµä¸­çåç´ è¿è¡æä½ï¼æ¯å¦ï¼ç­éãæåºãèåç­ã\n\nStreamå¯ä»¥ç±æ°ç»æéååå»ºï¼å¯¹æµçæä½åä¸ºä¸¤ç§ï¼\n\n 1. ä¸­é´æä½ï¼æ¯æ¬¡è¿åä¸ä¸ªæ°çæµï¼å¯ä»¥æå¤ä¸ªã\n 2. ç»ç«¯æä½ï¼æ¯ä¸ªæµåªè½è¿è¡ä¸æ¬¡ç»ç«¯æä½ï¼ç»ç«¯æä½ç»æåæµæ æ³åæ¬¡ä½¿ç¨ãç»ç«¯æä½ä¼äº§çä¸ä¸ªæ°çéåæå¼ã\n\nå¦å¤ï¼Streamæå ä¸ªç¹æ§ï¼\n\n 1. streamä¸å­å¨æ°æ®ï¼èæ¯æç§ç¹å®çè§åå¯¹æ°æ®è¿è¡è®¡ç®ï¼ä¸è¬ä¼è¾åºç»æã\n 2. streamä¸ä¼æ¹åæ°æ®æºï¼éå¸¸æåµä¸ä¼äº§çä¸ä¸ªæ°çéåæä¸ä¸ªå¼ã\n 3. streamå·æå»¶è¿æ§è¡ç¹æ§ï¼åªæè°ç¨ç»ç«¯æä½æ¶ï¼ä¸­é´æä½æä¼æ§è¡ã\n\n\n# 2 Streamçåå»º\n\nStreamå¯ä»¥éè¿éåæ°ç»åå»ºã\n\n1ãéè¿ java.util.Collection.stream() æ¹æ³ç¨éååå»ºæµ\n\nList<String> list = Arrays.asList("a", "b", "c");\n// åå»ºä¸ä¸ªé¡ºåºæµ\nStream<String> stream = list.stream();\n// åå»ºä¸ä¸ªå¹¶è¡æµ\nStream<String> parallelStream = list.parallelStream();\n\n\n2ãä½¿ç¨java.util.Arrays.stream(T[] array)æ¹æ³ç¨æ°ç»åå»ºæµ\n\nint[] array={1,3,5,6,8};\nIntStream stream = Arrays.stream(array);\n\n\n3ãä½¿ç¨Streamçéææ¹æ³ï¼of()ãiterate()ãgenerate()\n\nStream<Integer> stream = Stream.of(1, 2, 3, 4, 5, 6);\n\nStream<Integer> stream2 = Stream.iterate(0, (x) -> x + 3).limit(4);\nstream2.forEach(System.out::println);\n\nStream<Double> stream3 = Stream.generate(Math::random).limit(3);\nstream3.forEach(System.out::println);\n\n\nè¾åºç»æï¼\n\n> 0 3 6 9\n> \n> 0.6796156909271994\n> \n> 0.1914314208854283\n> \n> 0.8116932592396652\n\nstreamåparallelStreamçç®ååºåï¼ streamæ¯é¡ºåºæµï¼ç±ä¸»çº¿ç¨æé¡ºåºå¯¹æµæ§è¡æä½ï¼èparallelStreamæ¯å¹¶è¡æµï¼åé¨ä»¥å¤çº¿ç¨å¹¶è¡æ§è¡çæ¹å¼å¯¹æµè¿è¡æä½ï¼ä½åææ¯æµä¸­çæ°æ®å¤çæ²¡æé¡ºåºè¦æ±ãä¾å¦ç­ééåä¸­çå¥æ°ï¼ä¸¤èçå¤çä¸åä¹å¤ï¼\n\n\n\nå¦ææµä¸­çæ°æ®éè¶³å¤å¤§ï¼å¹¶è¡æµå¯ä»¥å å¿«å¤éåº¦ã\n\né¤äºç´æ¥åå»ºå¹¶è¡æµï¼è¿å¯ä»¥éè¿parallel()æé¡ºåºæµè½¬æ¢æå¹¶è¡æµï¼\n\nOptional<Integer> findFirst = list.stream().parallel().filter(x->x>6).findFirst();\n\n\n\n# 3 Streamçä½¿ç¨\n\nå¨ä½¿ç¨streamä¹åï¼åçè§£ä¸ä¸ªæ¦å¿µï¼Optional ã\n\næç¤º\n\nOptionalç±»æ¯ä¸ä¸ªå¯ä»¥ä¸ºnullçå®¹å¨å¯¹è±¡ãå¦æå¼å­å¨åisPresent()æ¹æ³ä¼è¿åtrueï¼è°ç¨get()æ¹æ³ä¼è¿åè¯¥å¯¹è±¡ã æ´è¯¦ç»è¯´æè¯·è§ï¼èé¸æç¨Java 8 Optionalç±»\n\næ¥ä¸æ¥ï¼å¤§æ¹ä»£ç åä½ è¢­æ¥ï¼æå°ç¨20ä¸ªæ¡ä¾å°Streamçä½¿ç¨æ´å¾ææç½ç½ï¼åªè¦è·çæ²ä¸éä»£ç ï¼å°±è½å¾å¥½å°ææ¡ã\n\n\n\næ¡ä¾ä½¿ç¨çåå·¥ç±»\n\nè¿æ¯åé¢æ¡ä¾ä¸­ä½¿ç¨çåå·¥ç±»ï¼\n\nList<Person> personList = new ArrayList<Person>();\npersonList.add(new Person("Tom", 8900, "male", "New York"));\npersonList.add(new Person("Jack", 7000, "male", "Washington"));\npersonList.add(new Person("Lily", 7800, "female", "Washington"));\npersonList.add(new Person("Anni", 8200, "female", "New York"));\npersonList.add(new Person("Owen", 9500, "male", "New York"));\npersonList.add(new Person("Alisa", 7900, "female", "New York"));\n\nclass Person {\n\tprivate String name;  // å§å\n\tprivate int salary; // èªèµ\n\tprivate int age; // å¹´é¾\n\tprivate String sex; //æ§å«\n\tprivate String area;  // å°åº\n\n\t// æé æ¹æ³\n\tpublic Person(String name, int salary, int age,String sex,String area) {\n\t\tthis.name = name;\n\t\tthis.salary = salary;\n\t\tthis.age = age;\n\t\tthis.sex = sex;\n\t\tthis.area = area;\n\t}\n\t// çç¥äºgetåsetï¼è¯·èªè¡æ·»å \n\n}\n\n\n\n# 3.1 éå/å¹é(foreach/find/match)\n\nStreamä¹æ¯æ¯æç±»ä¼¼éåçéååå¹éåç´ çï¼åªæ¯Streamä¸­çåç´ æ¯ä»¥Optionalç±»åå­å¨çãStreamçéåãå¹ééå¸¸ç®åã\n\n\n\n// importå·²çç¥ï¼è¯·èªè¡æ·»å ï¼åé¢ä»£ç äº¦æ¯\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n        List<Integer> list = Arrays.asList(7, 6, 9, 3, 8, 2, 1);\n\n        // éåè¾åºç¬¦åæ¡ä»¶çåç´ \n        list.stream().filter(x -> x > 6).forEach(System.out::println);\n        // å¹éç¬¬ä¸ä¸ª\n        Optional<Integer> findFirst = list.stream().filter(x -> x > 6).findFirst();\n        // å¹éä»»æï¼éç¨äºå¹¶è¡æµï¼\n        Optional<Integer> findAny = list.parallelStream().filter(x -> x > 6).findAny();\n        // æ¯å¦åå«ç¬¦åç¹å®æ¡ä»¶çåç´ \n        boolean anyMatch = list.stream().anyMatch(x -> x > 6);\n        System.out.println("å¹éç¬¬ä¸ä¸ªå¼ï¼" + findFirst.get());\n        System.out.println("å¹éä»»æä¸ä¸ªå¼ï¼" + findAny.get());\n        System.out.println("æ¯å¦å­å¨å¤§äº6çå¼ï¼" + anyMatch);\n    }\n}\n\n\n\n# 3.2 ç­é(filter)\n\nç­éï¼æ¯æç§ä¸å®çè§åæ ¡éªæµä¸­çåç´ ï¼å°ç¬¦åæ¡ä»¶çåç´ æåå°æ°çæµä¸­çæä½ã\n\n\n\næ¡ä¾ä¸ï¼ç­éåºIntegeréåä¸­å¤§äº7çåç´ ï¼å¹¶æå°åºæ¥\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Integer> list = Arrays.asList(6, 7, 3, 8, 1, 2, 9);\n\t\tStream<Integer> stream = list.stream();\n\t\tstream.filter(x -> x > 7).forEach(System.out::println);\n\t}\n}\n\n\né¢æç»æï¼\n\n> 8\n> \n> 9\n\næ¡ä¾äºï¼ ç­éåå·¥ä¸­å·¥èµé«äº8000çäººï¼å¹¶å½¢ææ°çéåã å½¢ææ°éåä¾èµcollectï¼æ¶éï¼ï¼åææè¯¦ç»ä»ç»ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\t\tpersonList.add(new Person("Anni", 8200, 24, "female", "New York"));\n\t\tpersonList.add(new Person("Owen", 9500, 25, "male", "New York"));\n\t\tpersonList.add(new Person("Alisa", 7900, 26, "female", "New York"));\n\n\t\tList<String> fiterList = personList.stream().filter(x -> x.getSalary() > 8000).map(Person::getName)\n\t\t\t\t.collect(Collectors.toList());\n\t\tSystem.out.print("é«äº8000çåå·¥å§åï¼" + fiterList);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> é«äº8000çåå·¥å§åï¼[Tom, Anni, Owen]\n\n\n# 3.3 èå(max/min/count)\n\nmaxãminãcountè¿äºå­ç¼ä½ ä¸å®ä¸éçï¼æ²¡éï¼å¨mysqlä¸­æä»¬å¸¸ç¨å®ä»¬è¿è¡æ°æ®ç»è®¡ãJava streamä¸­ä¹å¼å¥äºè¿äºæ¦å¿µåç¨æ³ï¼æå¤§å°æ¹ä¾¿äºæä»¬å¯¹éåãæ°ç»çæ°æ®ç»è®¡å·¥ä½ã\n\n\n\næ¡ä¾ä¸ï¼è·åStringéåä¸­æé¿çåç´ ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<String> list = Arrays.asList("adnm", "admmt", "pot", "xbangd", "weoujgsd");\n\n\t\tOptional<String> max = list.stream().max(Comparator.comparing(String::length));\n\t\tSystem.out.println("æé¿çå­ç¬¦ä¸²ï¼" + max.get());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> æé¿çå­ç¬¦ä¸²ï¼weoujgsd\n\næ¡ä¾äºï¼è·åIntegeréåä¸­çæå¤§å¼ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Integer> list = Arrays.asList(7, 6, 9, 4, 11, 6);\n\n\t\t// èªç¶æåº\n\t\tOptional<Integer> max = list.stream().max(Integer::compareTo);\n\t\t// èªå®ä¹æåº\n\t\tOptional<Integer> max2 = list.stream().max(new Comparator<Integer>() {\n\t\t\t@Override\n\t\t\tpublic int compare(Integer o1, Integer o2) {\n\t\t\t\treturn o1.compareTo(o2);\n\t\t\t}\n\t\t});\n\t\tSystem.out.println("èªç¶æåºçæå¤§å¼ï¼" + max.get());\n\t\tSystem.out.println("èªå®ä¹æåºçæå¤§å¼ï¼" + max2.get());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> èªç¶æåºçæå¤§å¼ï¼11\n> \n> èªå®ä¹æåºçæå¤§å¼ï¼11\n\næ¡ä¾ä¸ï¼è·ååå·¥å·¥èµæé«çäººã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\t\tpersonList.add(new Person("Anni", 8200, 24, "female", "New York"));\n\t\tpersonList.add(new Person("Owen", 9500, 25, "male", "New York"));\n\t\tpersonList.add(new Person("Alisa", 7900, 26, "female", "New York"));\n\n\t\tOptional<Person> max = personList.stream().max(Comparator.comparingInt(Person::getSalary));\n\t\tSystem.out.println("åå·¥å·¥èµæå¤§å¼ï¼" + max.get().getSalary());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> åå·¥å·¥èµæå¤§å¼ï¼9500\n\næ¡ä¾åï¼è®¡ç®Integeréåä¸­å¤§äº6çåç´ çä¸ªæ°ã\n\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Integer> list = Arrays.asList(7, 6, 4, 8, 2, 11, 9);\n\n\t\tlong count = list.stream().filter(x -> x > 6).count();\n\t\tSystem.out.println("listä¸­å¤§äº6çåç´ ä¸ªæ°ï¼" + count);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> listä¸­å¤§äº6çåç´ ä¸ªæ°ï¼4\n\n\n# 3.4 æ å°(map/flatMap)\n\næ å°ï¼å¯ä»¥å°ä¸ä¸ªæµçåç´ æç§ä¸å®çæ å°è§åæ å°å°å¦ä¸ä¸ªæµä¸­ãåä¸ºmapåflatMapï¼\n\n * mapï¼æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºåæ°ï¼è¯¥å½æ°ä¼è¢«åºç¨å°æ¯ä¸ªåç´ ä¸ï¼å¹¶å°å¶æ å°æä¸ä¸ªæ°çåç´ ã\n * flatMapï¼æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºåæ°ï¼å°æµä¸­çæ¯ä¸ªå¼é½æ¢æå¦ä¸ä¸ªæµï¼ç¶åææææµè¿æ¥æä¸ä¸ªæµã\n\n\n\n\n\næ¡ä¾ä¸ï¼è±æå­ç¬¦ä¸²æ°ç»çåç´ å¨é¨æ¹ä¸ºå¤§åãæ´æ°æ°ç»æ¯ä¸ªåç´ +3ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tString[] strArr = { "abcd", "bcdd", "defde", "fTr" };\n\t\tList<String> strList = Arrays.stream(strArr).map(String::toUpperCase).collect(Collectors.toList());\n\n\t\tList<Integer> intList = Arrays.asList(1, 3, 5, 7, 9, 11);\n\t\tList<Integer> intListNew = intList.stream().map(x -> x + 3).collect(Collectors.toList());\n\n\t\tSystem.out.println("æ¯ä¸ªåç´ å¤§åï¼" + strList);\n\t\tSystem.out.println("æ¯ä¸ªåç´ +3ï¼" + intListNew);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> æ¯ä¸ªåç´ å¤§åï¼[ABCD, BCDD, DEFDE, FTR]\n> \n> æ¯ä¸ªåç´ +3ï¼[4, 6, 8, 10, 12, 14]\n\næ¡ä¾äºï¼å°åå·¥çèªèµå¨é¨å¢å 1000ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\t\tpersonList.add(new Person("Anni", 8200, 24, "female", "New York"));\n\t\tpersonList.add(new Person("Owen", 9500, 25, "male", "New York"));\n\t\tpersonList.add(new Person("Alisa", 7900, 26, "female", "New York"));\n\n\t\t// ä¸æ¹ååæ¥åå·¥éåçæ¹å¼\n\t\tList<Person> personListNew = personList.stream().map(person -> {\n\t\t\tPerson personNew = new Person(person.getName(), 0, 0, null, null);\n\t\t\tpersonNew.setSalary(person.getSalary() + 10000);\n\t\t\treturn personNew;\n\t\t}).collect(Collectors.toList());\n\t\tSystem.out.println("ä¸æ¬¡æ¹å¨åï¼" + personList.get(0).getName() + "--\x3e" + personList.get(0).getSalary());\n\t\tSystem.out.println("ä¸æ¬¡æ¹å¨åï¼" + personListNew.get(0).getName() + "--\x3e" + personListNew.get(0).getSalary());\n\n\t\t// æ¹ååæ¥åå·¥éåçæ¹å¼\n\t\tList<Person> personListNew2 = personList.stream().map(person -> {\n\t\t\tperson.setSalary(person.getSalary() + 10000);\n\t\t\treturn person;\n\t\t}).collect(Collectors.toList());\n\t\tSystem.out.println("äºæ¬¡æ¹å¨åï¼" + personList.get(0).getName() + "--\x3e" + personListNew.get(0).getSalary());\n\t\tSystem.out.println("äºæ¬¡æ¹å¨åï¼" + personListNew2.get(0).getName() + "--\x3e" + personListNew.get(0).getSalary());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> ä¸æ¬¡æ¹å¨åï¼Tomâ>8900\n> \n> ä¸æ¬¡æ¹å¨åï¼Tomâ>18900\n> \n> äºæ¬¡æ¹å¨åï¼Tomâ>18900\n> \n> äºæ¬¡æ¹å¨åï¼Tomâ>18900\n\næ¡ä¾ä¸ï¼å°ä¸¤ä¸ªå­ç¬¦æ°ç»åå¹¶æä¸ä¸ªæ°çå­ç¬¦æ°ç»ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<String> list = Arrays.asList("m,k,l,a", "1,3,5,7");\n\t\tList<String> listNew = list.stream().flatMap(s -> {\n\t\t\t// å°æ¯ä¸ªåç´ è½¬æ¢æä¸ä¸ªstream\n\t\t\tString[] split = s.split(",");\n\t\t\tStream<String> s2 = Arrays.stream(split);\n\t\t\treturn s2;\n\t\t}).collect(Collectors.toList());\n\n\t\tSystem.out.println("å¤çåçéåï¼" + list);\n\t\tSystem.out.println("å¤çåçéåï¼" + listNew);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> å¤çåçéåï¼[m-k-l-a, 1-3-5]\n> \n> å¤çåçéåï¼[m, k, l, a, 1, 3, 5]\n\n\n# 3.5 å½çº¦(reduce)\n\nå½çº¦ï¼ä¹ç§°ç¼©åï¼é¡¾åæä¹ï¼æ¯æä¸ä¸ªæµç¼©åæä¸ä¸ªå¼ï¼è½å®ç°å¯¹éåæ±åãæ±ä¹ç§¯åæ±æå¼æä½ã\n\næ¡ä¾ä¸ï¼æ±Integeréåçåç´ ä¹åãä¹ç§¯åæå¤§å¼ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Integer> list = Arrays.asList(1, 3, 2, 8, 11, 4);\n\t\t// æ±åæ¹å¼1\n\t\tOptional<Integer> sum = list.stream().reduce((x, y) -> x + y);\n\t\t// æ±åæ¹å¼2\n\t\tOptional<Integer> sum2 = list.stream().reduce(Integer::sum);\n\t\t// æ±åæ¹å¼3\n\t\tInteger sum3 = list.stream().reduce(0, Integer::sum);\n\t\t\n\t\t// æ±ä¹ç§¯\n\t\tOptional<Integer> product = list.stream().reduce((x, y) -> x * y);\n\n\t\t// æ±æå¤§å¼æ¹å¼1\n\t\tOptional<Integer> max = list.stream().reduce((x, y) -> x > y ? x : y);\n\t\t// æ±æå¤§å¼åæ³2\n\t\tInteger max2 = list.stream().reduce(1, Integer::max);\n\n\t\tSystem.out.println("listæ±åï¼" + sum.get() + "," + sum2.get() + "," + sum3);\n\t\tSystem.out.println("listæ±ç§¯ï¼" + product.get());\n\t\tSystem.out.println("listæ±åï¼" + max.get() + "," + max2);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> listæ±åï¼29,29,29\n> \n> listæ±ç§¯ï¼2112\n> \n> listæ±åï¼11,11\n\næ¡ä¾äºï¼æ±ææåå·¥çå·¥èµä¹ååæé«å·¥èµã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\t\tpersonList.add(new Person("Anni", 8200, 24, "female", "New York"));\n\t\tpersonList.add(new Person("Owen", 9500, 25, "male", "New York"));\n\t\tpersonList.add(new Person("Alisa", 7900, 26, "female", "New York"));\n\n\t\t// æ±å·¥èµä¹åæ¹å¼1ï¼\n\t\tOptional<Integer> sumSalary = personList.stream().map(Person::getSalary).reduce(Integer::sum);\n\t\t// æ±å·¥èµä¹åæ¹å¼2ï¼\n\t\tInteger sumSalary2 = personList.stream().reduce(0, (sum, p) -> sum += p.getSalary(),\n\t\t\t\t(sum1, sum2) -> sum1 + sum2);\n\t\t// æ±å·¥èµä¹åæ¹å¼3ï¼\n\t\tInteger sumSalary3 = personList.stream().reduce(0, (sum, p) -> sum += p.getSalary(), Integer::sum);\n\n\t\t// æ±æé«å·¥èµæ¹å¼1ï¼\n\t\tInteger maxSalary = personList.stream().reduce(0, (max, p) -> max > p.getSalary() ? max : p.getSalary(),\n\t\t\t\tInteger::max);\n\t\t// æ±æé«å·¥èµæ¹å¼2ï¼\n\t\tInteger maxSalary2 = personList.stream().reduce(0, (max, p) -> max > p.getSalary() ? max : p.getSalary(),\n\t\t\t\t(max1, max2) -> max1 > max2 ? max1 : max2);\n\n\t\tSystem.out.println("å·¥èµä¹åï¼" + sumSalary.get() + "," + sumSalary2 + "," + sumSalary3);\n\t\tSystem.out.println("æé«å·¥èµï¼" + maxSalary + "," + maxSalary2);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> å·¥èµä¹åï¼49300,49300,49300\n> \n> æé«å·¥èµï¼9500,9500\n\n\n# 3.6 æ¶é(collect)\n\ncollectï¼æ¶éï¼å¯ä»¥è¯´æ¯åå®¹æç¹å¤ãåè½æä¸°å¯çé¨åäºãä»å­é¢ä¸å»çè§£ï¼å°±æ¯æä¸ä¸ªæµæ¶éèµ·æ¥ï¼æç»å¯ä»¥æ¯æ¶éæä¸ä¸ªå¼ä¹å¯ä»¥æ¶éæä¸ä¸ªæ°çéåã\n\næç¤º\n\ncollectä¸»è¦ä¾èµjava.util.stream.Collectorsç±»åç½®çéææ¹æ³ã\n\n# 3.6.1 å½é(toList/toSet/toMap)\n\nå ä¸ºæµä¸å­å¨æ°æ®ï¼é£ä¹å¨æµä¸­çæ°æ®å®æå¤çåï¼éè¦å°æµä¸­çæ°æ®éæ°å½éå°æ°çéåéãtoListãtoSetåtoMapæ¯è¾å¸¸ç¨ï¼å¦å¤è¿ætoCollectionãtoConcurrentMapç­å¤æä¸äºçç¨æ³ã\n\nä¸é¢ç¨ä¸ä¸ªæ¡ä¾æ¼ç¤ºtoListãtoSetåtoMapï¼\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Integer> list = Arrays.asList(1, 6, 3, 4, 6, 7, 9, 6, 20);\n\t\tList<Integer> listNew = list.stream().filter(x -> x % 2 == 0).collect(Collectors.toList());\n\t\tSet<Integer> set = list.stream().filter(x -> x % 2 == 0).collect(Collectors.toSet());\n\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\t\tpersonList.add(new Person("Anni", 8200, 24, "female", "New York"));\n\t\t\n\t\tMap<?, Person> map = personList.stream().filter(p -> p.getSalary() > 8000)\n\t\t\t\t.collect(Collectors.toMap(Person::getName, p -> p));\n\t\tSystem.out.println("toList:" + listNew);\n\t\tSystem.out.println("toSet:" + set);\n\t\tSystem.out.println("toMap:" + map);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> toListï¼[6, 4, 6, 6, 20]\n> \n> toSetï¼[4, 20, 6]\n> \n> toMapï¼{Tom=mutest.Person@5fd0d5ae, Anni=mutest.Person@2d98a335}\n\n# 3.6.2 ç»è®¡(count/averaging)\n\nCollectorsæä¾äºä¸ç³»åç¨äºæ°æ®ç»è®¡çéææ¹æ³ï¼\n\n * è®¡æ°ï¼count\n\n * å¹³åå¼ï¼averagingIntãaveragingLongãaveragingDouble\n\n * æå¼ï¼maxByãminBy\n\n * æ±åï¼summingIntãsummingLongãsummingDouble\n\n * ç»è®¡ä»¥ä¸ææï¼summarizingIntãsummarizingLongãsummarizingDouble\n\næ¡ä¾ï¼ç»è®¡åå·¥äººæ°ãå¹³åå·¥èµãå·¥èµæ»é¢ãæé«å·¥èµã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\n\t\t// æ±æ»æ°\n\t\tLong count = personList.stream().collect(Collectors.counting());\n\t\t// æ±å¹³åå·¥èµ\n\t\tDouble average = personList.stream().collect(Collectors.averagingDouble(Person::getSalary));\n\t\t// æ±æé«å·¥èµ\n\t\tOptional<Integer> max = personList.stream().map(Person::getSalary).collect(Collectors.maxBy(Integer::compare));\n\t\t// æ±å·¥èµä¹å\n\t\tInteger sum = personList.stream().collect(Collectors.summingInt(Person::getSalary));\n\t\t// ä¸æ¬¡æ§ç»è®¡ææä¿¡æ¯\n\t\tDoubleSummaryStatistics collect = personList.stream().collect(Collectors.summarizingDouble(Person::getSalary));\n\n\t\tSystem.out.println("åå·¥æ»æ°ï¼" + count);\n\t\tSystem.out.println("åå·¥å¹³åå·¥èµï¼" + average);\n\t\tSystem.out.println("åå·¥å·¥èµæ»åï¼" + sum);\n\t\tSystem.out.println("åå·¥å·¥èµææç»è®¡ï¼" + collect);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> åå·¥æ»æ°ï¼3\n> \n> åå·¥å¹³åå·¥èµï¼7900.0\n> \n> åå·¥å·¥èµæ»åï¼23700\n> \n> åå·¥å·¥èµææç»è®¡ï¼DoubleSummaryStatistics{count=3, sum=23700.000000,min=7000.000000, average=7900.000000, max=8900.000000}\n\n# 3.6.3 åç»(partitioningBy/groupingBy)\n\n * ååºï¼å°streamææ¡ä»¶åä¸ºä¸¤ä¸ªMapï¼æ¯å¦åå·¥æèªèµæ¯å¦é«äº8000åä¸ºä¸¤é¨åã\n * åç»ï¼å°éååä¸ºå¤ä¸ªMapï¼æ¯å¦åå·¥ææ§å«åç»ãæåçº§åç»åå¤çº§åç»ã\n\n\n\næ¡ä¾ï¼å°åå·¥æèªèµæ¯å¦é«äº8000åä¸ºä¸¤é¨åï¼å°åå·¥ææ§å«åå°åºåç»\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, "female", "Washington"));\n\t\tpersonList.add(new Person("Anni", 8200, "female", "New York"));\n\t\tpersonList.add(new Person("Owen", 9500, "male", "New York"));\n\t\tpersonList.add(new Person("Alisa", 7900, "female", "New York"));\n\n\t\t// å°åå·¥æèªèµæ¯å¦é«äº8000åç»\n        Map<Boolean, List<Person>> part = personList.stream().collect(Collectors.partitioningBy(x -> x.getSalary() > 8000));\n        // å°åå·¥ææ§å«åç»\n        Map<String, List<Person>> group = personList.stream().collect(Collectors.groupingBy(Person::getSex));\n        // å°åå·¥åææ§å«åç»ï¼åæå°åºåç»\n        Map<String, Map<String, List<Person>>> group2 = personList.stream().collect(Collectors.groupingBy(Person::getSex, Collectors.groupingBy(Person::getArea)));\n        System.out.println("åå·¥æèªèµæ¯å¦å¤§äº8000åç»æåµï¼" + part);\n        System.out.println("åå·¥ææ§å«åç»æåµï¼" + group);\n        System.out.println("åå·¥ææ§å«ãå°åºï¼" + group2);\n\t}\n}\n\n\nè¾åºç»æï¼\n\nåå·¥æèªèµæ¯å¦å¤§äº8000åç»æåµï¼{false=[mutest.Person@2d98a335, mutest.Person@16b98e56, mutest.Person@7ef20235], true=[mutest.Person@27d6c5e0, mutest.Person@4f3f5b24, mutest.Person@15aeb7ab]}\nåå·¥ææ§å«åç»æåµï¼{female=[mutest.Person@16b98e56, mutest.Person@4f3f5b24, mutest.Person@7ef20235], male=[mutest.Person@27d6c5e0, mutest.Person@2d98a335, mutest.Person@15aeb7ab]}\nåå·¥ææ§å«ãå°åºï¼{female={New York=[mutest.Person@4f3f5b24, mutest.Person@7ef20235], Washington=[mutest.Person@16b98e56]}, male={New York=[mutest.Person@27d6c5e0, mutest.Person@15aeb7ab], Washington=[mutest.Person@2d98a335]}}\n\n\n# 3.6.4 æ¥å(joining)\n\njoiningå¯ä»¥å°streamä¸­çåç´ ç¨ç¹å®çè¿æ¥ç¬¦ï¼æ²¡æçè¯ï¼åç´æ¥è¿æ¥ï¼è¿æ¥æä¸ä¸ªå­ç¬¦ä¸²ã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\n\t\tString names = personList.stream().map(p -> p.getName()).collect(Collectors.joining(","));\n\t\tSystem.out.println("ææåå·¥çå§åï¼" + names);\n\t\tList<String> list = Arrays.asList("A", "B", "C");\n\t\tString string = list.stream().collect(Collectors.joining("-"));\n\t\tSystem.out.println("æ¼æ¥åçå­ç¬¦ä¸²ï¼" + string);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> ææåå·¥çå§åï¼Tom,Jack,Lily\n> \n> æ¼æ¥åçå­ç¬¦ä¸²ï¼A-B-C\n\n# 3.6.5 å½çº¦(reducing)\n\nCollectorsç±»æä¾çreducingæ¹æ³ï¼ç¸æ¯äºstreamæ¬èº«çreduceæ¹æ³ï¼å¢å äºå¯¹èªå®ä¹å½çº¦çæ¯æã\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\t\tpersonList.add(new Person("Tom", 8900, 23, "male", "New York"));\n\t\tpersonList.add(new Person("Jack", 7000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 7800, 21, "female", "Washington"));\n\n\t\t// æ¯ä¸ªåå·¥åå»èµ·å¾ç¹åçèªèµä¹åï¼è¿ä¸ªä¾å­å¹¶ä¸ä¸¥è°¨ï¼ä½ä¸æ¶æ²¡æ³å°å¥½çä¾å­ï¼\n\t\tInteger sum = personList.stream().collect(Collectors.reducing(0, Person::getSalary, (i, j) -> (i + j - 5000)));\n\t\tSystem.out.println("åå·¥æ£ç¨èªèµæ»åï¼" + sum);\n\n\t\t// streamçreduce\n\t\tOptional<Integer> sum2 = personList.stream().map(Person::getSalary).reduce(Integer::sum);\n\t\tSystem.out.println("åå·¥èªèµæ»åï¼" + sum2.get());\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> åå·¥æ£ç¨èªèµæ»åï¼8700\n> \n> åå·¥èªèµæ»åï¼23700\n\n\n# 3.7 æåº(sorted)\n\nsortedï¼ä¸­é´æä½ãæä¸¤ç§æåºï¼\n\n * sorted()ï¼èªç¶æåºï¼æµä¸­åç´ éå®ç°Comparableæ¥å£\n * sorted(Comparator com)ï¼Comparatoræåºå¨èªå®ä¹æåº\n\næ¡ä¾ï¼å°åå·¥æå·¥èµç±é«å°ä½ï¼å·¥èµä¸æ ·åæå¹´é¾ç±å¤§å°å°ï¼æåº\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tList<Person> personList = new ArrayList<Person>();\n\n\t\tpersonList.add(new Person("Sherry", 9000, 24, "female", "New York"));\n\t\tpersonList.add(new Person("Tom", 8900, 22, "male", "Washington"));\n\t\tpersonList.add(new Person("Jack", 9000, 25, "male", "Washington"));\n\t\tpersonList.add(new Person("Lily", 8800, 26, "male", "New York"));\n\t\tpersonList.add(new Person("Alisa", 9000, 26, "female", "New York"));\n\n\t\t// æå·¥èµååºæåºï¼èªç¶æåºï¼\n\t\tList<String> newList = personList.stream().sorted(Comparator.comparing(Person::getSalary)).map(Person::getName)\n\t\t\t\t.collect(Collectors.toList());\n\t\t// æå·¥èµååºæåº\n\t\tList<String> newList2 = personList.stream().sorted(Comparator.comparing(Person::getSalary).reversed())\n\t\t\t\t.map(Person::getName).collect(Collectors.toList());\n\t\t// åæå·¥èµåæå¹´é¾ååºæåº\n\t\tList<String> newList3 = personList.stream()\n\t\t\t\t.sorted(Comparator.comparing(Person::getSalary).thenComparing(Person::getAge)).map(Person::getName)\n\t\t\t\t.collect(Collectors.toList());\n\t\t// åæå·¥èµåæå¹´é¾èªå®ä¹æåºï¼éåºï¼\n\t\tList<String> newList4 = personList.stream().sorted((p1, p2) -> {\n\t\t\tif (p1.getSalary() == p2.getSalary()) {\n\t\t\t\treturn p2.getAge() - p1.getAge();\n\t\t\t} else {\n\t\t\t\treturn p2.getSalary() - p1.getSalary();\n\t\t\t}\n\t\t}).map(Person::getName).collect(Collectors.toList());\n\n\t\tSystem.out.println("æå·¥èµååºæåºï¼" + newList);\n\t\tSystem.out.println("æå·¥èµéåºæåºï¼" + newList2);\n\t\tSystem.out.println("åæå·¥èµåæå¹´é¾ååºæåºï¼" + newList3);\n\t\tSystem.out.println("åæå·¥èµåæå¹´é¾èªå®ä¹éåºæåºï¼" + newList4);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> æå·¥èµååºæåºï¼[Lily, Tom, Sherry, Jack, Alisa]\n> \n> æå·¥èµéåºæåºï¼[Sherry, Jack, Alisa, Tom, Lily]\n> \n> åæå·¥èµåæå¹´é¾ååºæåºï¼[Lily, Tom, Sherry, Jack, Alisa]\n> \n> åæå·¥èµåæå¹´é¾èªå®ä¹éåºæåºï¼[Alisa, Jack, Sherry, Tom, Lily]\n\n\n# 3.8 æå/ç»å\n\næµä¹å¯ä»¥è¿è¡åå¹¶ãå»éãéå¶ãè·³è¿ç­æä½ã\n\n\n\n\n\n\n\npublic class StreamTest {\n\tpublic static void main(String[] args) {\n\t\tString[] arr1 = { "a", "b", "c", "d" };\n\t\tString[] arr2 = { "d", "e", "f", "g" };\n\n\t\tStream<String> stream1 = Stream.of(arr1);\n\t\tStream<String> stream2 = Stream.of(arr2);\n\t\t// concat:åå¹¶ä¸¤ä¸ªæµ distinctï¼å»é\n\t\tList<String> newList = Stream.concat(stream1, stream2).distinct().collect(Collectors.toList());\n\t\t// limitï¼éå¶ä»æµä¸­è·å¾ånä¸ªæ°æ®\n\t\tList<Integer> collect = Stream.iterate(1, x -> x + 2).limit(10).collect(Collectors.toList());\n\t\t// skipï¼è·³è¿ånä¸ªæ°æ®\n\t\tList<Integer> collect2 = Stream.iterate(1, x -> x + 2).skip(1).limit(5).collect(Collectors.toList());\n\n\t\tSystem.out.println("æµåå¹¶ï¼" + newList);\n\t\tSystem.out.println("limitï¼" + collect);\n\t\tSystem.out.println("skipï¼" + collect2);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> æµåå¹¶ï¼[a, b, c, d, e, f, g]\n> \n> limitï¼[1, 3, 5, 7, 9, 11, 13, 15, 17, 19]\n> \n> skipï¼[3, 5, 7, 9, 11]\n\nç»æè¯­\n\nå¥½ï¼ä»¥ä¸å°±æ¯å¨é¨åå®¹ï¼è½åæçå°è¿éï¼ä½ ä¸å®å¾ææ¶è·ï¼é£ä¹å¨ä¸å¨æ¿offerçå°æï¼ç¹ä¸ªèµåèµ°å§ï¼å¬è¯´è¿ä¹åçäºº2021å¹´é½äº¤äºå¥½è¿ï¼',normalizedContent:'# java8 stream\n\n\n\n * 1 streamæ¦è¿°\n * 2 streamçåå»º\n * 3 streamçä½¿ç¨\n   * 3.1 éå/å¹é(foreach/find/match)\n   * 3.2 ç­é(filter)\n   * 3.3 èå(max/min/count)\n   * 3.4 æ å°(map/flatmap)\n   * 3.5 å½çº¦(reduce)\n   * 3.6 æ¶é(collect)\n   * 3.7 æåº(sorted)\n   * 3.8 æå/ç»å\n\n\n\nåè´´ä¸å ä¸ªæ¡ä¾ï¼æ°´å¹³é«è¶çåå­¦å¯ä»¥ææä¸ä¸ï¼\n\n 1. ä»åå·¥éåä¸­ç­éåºsalaryå¤§äº8000çåå·¥ï¼å¹¶æ¾ç½®å°æ°çéåéã\n 2. ç»è®¡åå·¥çæé«èªèµãå¹³åèªèµãèªèµä¹åã\n 3. å°åå·¥æèªèµä»é«å°ä½æåºï¼åæ ·èªèµèå¹´é¾å°èå¨åã\n 4. å°åå·¥ææ§å«åç±»ï¼å°åå·¥ææ§å«åå°åºåç±»ï¼å°åå·¥æèªèµæ¯å¦é«äº8000åä¸ºä¸¤é¨åã\n\nç¨ä¼ ç»çè¿­ä»£å¤çä¹ä¸æ¯å¾é¾ï¼ä½ä»£ç å°±æ¾å¾åä½äºï¼è·streamç¸æ¯é«ä¸ç«å¤ã\n\n\n# 1 streamæ¦è¿°\n\njava 8 æ¯ä¸ä¸ªéå¸¸æåççæ¬ï¼è¿ä¸ªçæ¬æ°å¢çstreamï¼éååçæ¬åºç°ç lambda ï¼ç»æä»¬æä½éåï¼collectionï¼æä¾äºæå¤§çä¾¿å©ã\n\né£ä¹ä»ä¹æ¯streamï¼\n\næç¤º\n\nstreamå°è¦å¤ççåç´ éåçä½ä¸ç§æµï¼å¨æµçè¿ç¨ä¸­ï¼åå©stream apiå¯¹æµä¸­çåç´ è¿è¡æä½ï¼æ¯å¦ï¼ç­éãæåºãèåç­ã\n\nstreamå¯ä»¥ç±æ°ç»æéååå»ºï¼å¯¹æµçæä½åä¸ºä¸¤ç§ï¼\n\n 1. ä¸­é´æä½ï¼æ¯æ¬¡è¿åä¸ä¸ªæ°çæµï¼å¯ä»¥æå¤ä¸ªã\n 2. ç»ç«¯æä½ï¼æ¯ä¸ªæµåªè½è¿è¡ä¸æ¬¡ç»ç«¯æä½ï¼ç»ç«¯æä½ç»æåæµæ æ³åæ¬¡ä½¿ç¨ãç»ç«¯æä½ä¼äº§çä¸ä¸ªæ°çéåæå¼ã\n\nå¦å¤ï¼streamæå ä¸ªç¹æ§ï¼\n\n 1. streamä¸å­å¨æ°æ®ï¼èæ¯æç§ç¹å®çè§åå¯¹æ°æ®è¿è¡è®¡ç®ï¼ä¸è¬ä¼è¾åºç»æã\n 2. streamä¸ä¼æ¹åæ°æ®æºï¼éå¸¸æåµä¸ä¼äº§çä¸ä¸ªæ°çéåæä¸ä¸ªå¼ã\n 3. streamå·æå»¶è¿æ§è¡ç¹æ§ï¼åªæè°ç¨ç»ç«¯æä½æ¶ï¼ä¸­é´æä½æä¼æ§è¡ã\n\n\n# 2 streamçåå»º\n\nstreamå¯ä»¥éè¿éåæ°ç»åå»ºã\n\n1ãéè¿ java.util.collection.stream() æ¹æ³ç¨éååå»ºæµ\n\nlist<string> list = arrays.aslist("a", "b", "c");\n// åå»ºä¸ä¸ªé¡ºåºæµ\nstream<string> stream = list.stream();\n// åå»ºä¸ä¸ªå¹¶è¡æµ\nstream<string> parallelstream = list.parallelstream();\n\n\n2ãä½¿ç¨java.util.arrays.stream(t[] array)æ¹æ³ç¨æ°ç»åå»ºæµ\n\nint[] array={1,3,5,6,8};\nintstream stream = arrays.stream(array);\n\n\n3ãä½¿ç¨streamçéææ¹æ³ï¼of()ãiterate()ãgenerate()\n\nstream<integer> stream = stream.of(1, 2, 3, 4, 5, 6);\n\nstream<integer> stream2 = stream.iterate(0, (x) -> x + 3).limit(4);\nstream2.foreach(system.out::println);\n\nstream<double> stream3 = stream.generate(math::random).limit(3);\nstream3.foreach(system.out::println);\n\n\nè¾åºç»æï¼\n\n> 0 3 6 9\n> \n> 0.6796156909271994\n> \n> 0.1914314208854283\n> \n> 0.8116932592396652\n\nstreamåparallelstreamçç®ååºåï¼ streamæ¯é¡ºåºæµï¼ç±ä¸»çº¿ç¨æé¡ºåºå¯¹æµæ§è¡æä½ï¼èparallelstreamæ¯å¹¶è¡æµï¼åé¨ä»¥å¤çº¿ç¨å¹¶è¡æ§è¡çæ¹å¼å¯¹æµè¿è¡æä½ï¼ä½åææ¯æµä¸­çæ°æ®å¤çæ²¡æé¡ºåºè¦æ±ãä¾å¦ç­ééåä¸­çå¥æ°ï¼ä¸¤èçå¤çä¸åä¹å¤ï¼\n\n\n\nå¦ææµä¸­çæ°æ®éè¶³å¤å¤§ï¼å¹¶è¡æµå¯ä»¥å å¿«å¤éåº¦ã\n\né¤äºç´æ¥åå»ºå¹¶è¡æµï¼è¿å¯ä»¥éè¿parallel()æé¡ºåºæµè½¬æ¢æå¹¶è¡æµï¼\n\noptional<integer> findfirst = list.stream().parallel().filter(x->x>6).findfirst();\n\n\n\n# 3 streamçä½¿ç¨\n\nå¨ä½¿ç¨streamä¹åï¼åçè§£ä¸ä¸ªæ¦å¿µï¼optional ã\n\næç¤º\n\noptionalç±»æ¯ä¸ä¸ªå¯ä»¥ä¸ºnullçå®¹å¨å¯¹è±¡ãå¦æå¼å­å¨åispresent()æ¹æ³ä¼è¿åtrueï¼è°ç¨get()æ¹æ³ä¼è¿åè¯¥å¯¹è±¡ã æ´è¯¦ç»è¯´æè¯·è§ï¼èé¸æç¨java 8 optionalç±»\n\næ¥ä¸æ¥ï¼å¤§æ¹ä»£ç åä½ è¢­æ¥ï¼æå°ç¨20ä¸ªæ¡ä¾å°streamçä½¿ç¨æ´å¾ææç½ç½ï¼åªè¦è·çæ²ä¸éä»£ç ï¼å°±è½å¾å¥½å°ææ¡ã\n\n\n\næ¡ä¾ä½¿ç¨çåå·¥ç±»\n\nè¿æ¯åé¢æ¡ä¾ä¸­ä½¿ç¨çåå·¥ç±»ï¼\n\nlist<person> personlist = new arraylist<person>();\npersonlist.add(new person("tom", 8900, "male", "new york"));\npersonlist.add(new person("jack", 7000, "male", "washington"));\npersonlist.add(new person("lily", 7800, "female", "washington"));\npersonlist.add(new person("anni", 8200, "female", "new york"));\npersonlist.add(new person("owen", 9500, "male", "new york"));\npersonlist.add(new person("alisa", 7900, "female", "new york"));\n\nclass person {\n\tprivate string name;  // å§å\n\tprivate int salary; // èªèµ\n\tprivate int age; // å¹´é¾\n\tprivate string sex; //æ§å«\n\tprivate string area;  // å°åº\n\n\t// æé æ¹æ³\n\tpublic person(string name, int salary, int age,string sex,string area) {\n\t\tthis.name = name;\n\t\tthis.salary = salary;\n\t\tthis.age = age;\n\t\tthis.sex = sex;\n\t\tthis.area = area;\n\t}\n\t// çç¥äºgetåsetï¼è¯·èªè¡æ·»å \n\n}\n\n\n\n# 3.1 éå/å¹é(foreach/find/match)\n\nstreamä¹æ¯æ¯æç±»ä¼¼éåçéååå¹éåç´ çï¼åªæ¯streamä¸­çåç´ æ¯ä»¥optionalç±»åå­å¨çãstreamçéåãå¹ééå¸¸ç®åã\n\n\n\n// importå·²çç¥ï¼è¯·èªè¡æ·»å ï¼åé¢ä»£ç äº¦æ¯\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n        list<integer> list = arrays.aslist(7, 6, 9, 3, 8, 2, 1);\n\n        // éåè¾åºç¬¦åæ¡ä»¶çåç´ \n        list.stream().filter(x -> x > 6).foreach(system.out::println);\n        // å¹éç¬¬ä¸ä¸ª\n        optional<integer> findfirst = list.stream().filter(x -> x > 6).findfirst();\n        // å¹éä»»æï¼éç¨äºå¹¶è¡æµï¼\n        optional<integer> findany = list.parallelstream().filter(x -> x > 6).findany();\n        // æ¯å¦åå«ç¬¦åç¹å®æ¡ä»¶çåç´ \n        boolean anymatch = list.stream().anymatch(x -> x > 6);\n        system.out.println("å¹éç¬¬ä¸ä¸ªå¼ï¼" + findfirst.get());\n        system.out.println("å¹éä»»æä¸ä¸ªå¼ï¼" + findany.get());\n        system.out.println("æ¯å¦å­å¨å¤§äº6çå¼ï¼" + anymatch);\n    }\n}\n\n\n\n# 3.2 ç­é(filter)\n\nç­éï¼æ¯æç§ä¸å®çè§åæ ¡éªæµä¸­çåç´ ï¼å°ç¬¦åæ¡ä»¶çåç´ æåå°æ°çæµä¸­çæä½ã\n\n\n\næ¡ä¾ä¸ï¼ç­éåºintegeréåä¸­å¤§äº7çåç´ ï¼å¹¶æå°åºæ¥\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<integer> list = arrays.aslist(6, 7, 3, 8, 1, 2, 9);\n\t\tstream<integer> stream = list.stream();\n\t\tstream.filter(x -> x > 7).foreach(system.out::println);\n\t}\n}\n\n\né¢æç»æï¼\n\n> 8\n> \n> 9\n\næ¡ä¾äºï¼ ç­éåå·¥ä¸­å·¥èµé«äº8000çäººï¼å¹¶å½¢ææ°çéåã å½¢ææ°éåä¾èµcollectï¼æ¶éï¼ï¼åææè¯¦ç»ä»ç»ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\t\tpersonlist.add(new person("anni", 8200, 24, "female", "new york"));\n\t\tpersonlist.add(new person("owen", 9500, 25, "male", "new york"));\n\t\tpersonlist.add(new person("alisa", 7900, 26, "female", "new york"));\n\n\t\tlist<string> fiterlist = personlist.stream().filter(x -> x.getsalary() > 8000).map(person::getname)\n\t\t\t\t.collect(collectors.tolist());\n\t\tsystem.out.print("é«äº8000çåå·¥å§åï¼" + fiterlist);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> é«äº8000çåå·¥å§åï¼[tom, anni, owen]\n\n\n# 3.3 èå(max/min/count)\n\nmaxãminãcountè¿äºå­ç¼ä½ ä¸å®ä¸éçï¼æ²¡éï¼å¨mysqlä¸­æä»¬å¸¸ç¨å®ä»¬è¿è¡æ°æ®ç»è®¡ãjava streamä¸­ä¹å¼å¥äºè¿äºæ¦å¿µåç¨æ³ï¼æå¤§å°æ¹ä¾¿äºæä»¬å¯¹éåãæ°ç»çæ°æ®ç»è®¡å·¥ä½ã\n\n\n\næ¡ä¾ä¸ï¼è·åstringéåä¸­æé¿çåç´ ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<string> list = arrays.aslist("adnm", "admmt", "pot", "xbangd", "weoujgsd");\n\n\t\toptional<string> max = list.stream().max(comparator.comparing(string::length));\n\t\tsystem.out.println("æé¿çå­ç¬¦ä¸²ï¼" + max.get());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> æé¿çå­ç¬¦ä¸²ï¼weoujgsd\n\næ¡ä¾äºï¼è·åintegeréåä¸­çæå¤§å¼ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<integer> list = arrays.aslist(7, 6, 9, 4, 11, 6);\n\n\t\t// èªç¶æåº\n\t\toptional<integer> max = list.stream().max(integer::compareto);\n\t\t// èªå®ä¹æåº\n\t\toptional<integer> max2 = list.stream().max(new comparator<integer>() {\n\t\t\t@override\n\t\t\tpublic int compare(integer o1, integer o2) {\n\t\t\t\treturn o1.compareto(o2);\n\t\t\t}\n\t\t});\n\t\tsystem.out.println("èªç¶æåºçæå¤§å¼ï¼" + max.get());\n\t\tsystem.out.println("èªå®ä¹æåºçæå¤§å¼ï¼" + max2.get());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> èªç¶æåºçæå¤§å¼ï¼11\n> \n> èªå®ä¹æåºçæå¤§å¼ï¼11\n\næ¡ä¾ä¸ï¼è·ååå·¥å·¥èµæé«çäººã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\t\tpersonlist.add(new person("anni", 8200, 24, "female", "new york"));\n\t\tpersonlist.add(new person("owen", 9500, 25, "male", "new york"));\n\t\tpersonlist.add(new person("alisa", 7900, 26, "female", "new york"));\n\n\t\toptional<person> max = personlist.stream().max(comparator.comparingint(person::getsalary));\n\t\tsystem.out.println("åå·¥å·¥èµæå¤§å¼ï¼" + max.get().getsalary());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> åå·¥å·¥èµæå¤§å¼ï¼9500\n\næ¡ä¾åï¼è®¡ç®integeréåä¸­å¤§äº6çåç´ çä¸ªæ°ã\n\nimport java.util.arrays;\nimport java.util.list;\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<integer> list = arrays.aslist(7, 6, 4, 8, 2, 11, 9);\n\n\t\tlong count = list.stream().filter(x -> x > 6).count();\n\t\tsystem.out.println("listä¸­å¤§äº6çåç´ ä¸ªæ°ï¼" + count);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> listä¸­å¤§äº6çåç´ ä¸ªæ°ï¼4\n\n\n# 3.4 æ å°(map/flatmap)\n\næ å°ï¼å¯ä»¥å°ä¸ä¸ªæµçåç´ æç§ä¸å®çæ å°è§åæ å°å°å¦ä¸ä¸ªæµä¸­ãåä¸ºmapåflatmapï¼\n\n * mapï¼æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºåæ°ï¼è¯¥å½æ°ä¼è¢«åºç¨å°æ¯ä¸ªåç´ ä¸ï¼å¹¶å°å¶æ å°æä¸ä¸ªæ°çåç´ ã\n * flatmapï¼æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºåæ°ï¼å°æµä¸­çæ¯ä¸ªå¼é½æ¢æå¦ä¸ä¸ªæµï¼ç¶åææææµè¿æ¥æä¸ä¸ªæµã\n\n\n\n\n\næ¡ä¾ä¸ï¼è±æå­ç¬¦ä¸²æ°ç»çåç´ å¨é¨æ¹ä¸ºå¤§åãæ´æ°æ°ç»æ¯ä¸ªåç´ +3ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tstring[] strarr = { "abcd", "bcdd", "defde", "ftr" };\n\t\tlist<string> strlist = arrays.stream(strarr).map(string::touppercase).collect(collectors.tolist());\n\n\t\tlist<integer> intlist = arrays.aslist(1, 3, 5, 7, 9, 11);\n\t\tlist<integer> intlistnew = intlist.stream().map(x -> x + 3).collect(collectors.tolist());\n\n\t\tsystem.out.println("æ¯ä¸ªåç´ å¤§åï¼" + strlist);\n\t\tsystem.out.println("æ¯ä¸ªåç´ +3ï¼" + intlistnew);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> æ¯ä¸ªåç´ å¤§åï¼[abcd, bcdd, defde, ftr]\n> \n> æ¯ä¸ªåç´ +3ï¼[4, 6, 8, 10, 12, 14]\n\næ¡ä¾äºï¼å°åå·¥çèªèµå¨é¨å¢å 1000ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\t\tpersonlist.add(new person("anni", 8200, 24, "female", "new york"));\n\t\tpersonlist.add(new person("owen", 9500, 25, "male", "new york"));\n\t\tpersonlist.add(new person("alisa", 7900, 26, "female", "new york"));\n\n\t\t// ä¸æ¹ååæ¥åå·¥éåçæ¹å¼\n\t\tlist<person> personlistnew = personlist.stream().map(person -> {\n\t\t\tperson personnew = new person(person.getname(), 0, 0, null, null);\n\t\t\tpersonnew.setsalary(person.getsalary() + 10000);\n\t\t\treturn personnew;\n\t\t}).collect(collectors.tolist());\n\t\tsystem.out.println("ä¸æ¬¡æ¹å¨åï¼" + personlist.get(0).getname() + "--\x3e" + personlist.get(0).getsalary());\n\t\tsystem.out.println("ä¸æ¬¡æ¹å¨åï¼" + personlistnew.get(0).getname() + "--\x3e" + personlistnew.get(0).getsalary());\n\n\t\t// æ¹ååæ¥åå·¥éåçæ¹å¼\n\t\tlist<person> personlistnew2 = personlist.stream().map(person -> {\n\t\t\tperson.setsalary(person.getsalary() + 10000);\n\t\t\treturn person;\n\t\t}).collect(collectors.tolist());\n\t\tsystem.out.println("äºæ¬¡æ¹å¨åï¼" + personlist.get(0).getname() + "--\x3e" + personlistnew.get(0).getsalary());\n\t\tsystem.out.println("äºæ¬¡æ¹å¨åï¼" + personlistnew2.get(0).getname() + "--\x3e" + personlistnew.get(0).getsalary());\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> ä¸æ¬¡æ¹å¨åï¼tomâ>8900\n> \n> ä¸æ¬¡æ¹å¨åï¼tomâ>18900\n> \n> äºæ¬¡æ¹å¨åï¼tomâ>18900\n> \n> äºæ¬¡æ¹å¨åï¼tomâ>18900\n\næ¡ä¾ä¸ï¼å°ä¸¤ä¸ªå­ç¬¦æ°ç»åå¹¶æä¸ä¸ªæ°çå­ç¬¦æ°ç»ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<string> list = arrays.aslist("m,k,l,a", "1,3,5,7");\n\t\tlist<string> listnew = list.stream().flatmap(s -> {\n\t\t\t// å°æ¯ä¸ªåç´ è½¬æ¢æä¸ä¸ªstream\n\t\t\tstring[] split = s.split(",");\n\t\t\tstream<string> s2 = arrays.stream(split);\n\t\t\treturn s2;\n\t\t}).collect(collectors.tolist());\n\n\t\tsystem.out.println("å¤çåçéåï¼" + list);\n\t\tsystem.out.println("å¤çåçéåï¼" + listnew);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> å¤çåçéåï¼[m-k-l-a, 1-3-5]\n> \n> å¤çåçéåï¼[m, k, l, a, 1, 3, 5]\n\n\n# 3.5 å½çº¦(reduce)\n\nå½çº¦ï¼ä¹ç§°ç¼©åï¼é¡¾åæä¹ï¼æ¯æä¸ä¸ªæµç¼©åæä¸ä¸ªå¼ï¼è½å®ç°å¯¹éåæ±åãæ±ä¹ç§¯åæ±æå¼æä½ã\n\næ¡ä¾ä¸ï¼æ±integeréåçåç´ ä¹åãä¹ç§¯åæå¤§å¼ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<integer> list = arrays.aslist(1, 3, 2, 8, 11, 4);\n\t\t// æ±åæ¹å¼1\n\t\toptional<integer> sum = list.stream().reduce((x, y) -> x + y);\n\t\t// æ±åæ¹å¼2\n\t\toptional<integer> sum2 = list.stream().reduce(integer::sum);\n\t\t// æ±åæ¹å¼3\n\t\tinteger sum3 = list.stream().reduce(0, integer::sum);\n\t\t\n\t\t// æ±ä¹ç§¯\n\t\toptional<integer> product = list.stream().reduce((x, y) -> x * y);\n\n\t\t// æ±æå¤§å¼æ¹å¼1\n\t\toptional<integer> max = list.stream().reduce((x, y) -> x > y ? x : y);\n\t\t// æ±æå¤§å¼åæ³2\n\t\tinteger max2 = list.stream().reduce(1, integer::max);\n\n\t\tsystem.out.println("listæ±åï¼" + sum.get() + "," + sum2.get() + "," + sum3);\n\t\tsystem.out.println("listæ±ç§¯ï¼" + product.get());\n\t\tsystem.out.println("listæ±åï¼" + max.get() + "," + max2);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> listæ±åï¼29,29,29\n> \n> listæ±ç§¯ï¼2112\n> \n> listæ±åï¼11,11\n\næ¡ä¾äºï¼æ±ææåå·¥çå·¥èµä¹ååæé«å·¥èµã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\t\tpersonlist.add(new person("anni", 8200, 24, "female", "new york"));\n\t\tpersonlist.add(new person("owen", 9500, 25, "male", "new york"));\n\t\tpersonlist.add(new person("alisa", 7900, 26, "female", "new york"));\n\n\t\t// æ±å·¥èµä¹åæ¹å¼1ï¼\n\t\toptional<integer> sumsalary = personlist.stream().map(person::getsalary).reduce(integer::sum);\n\t\t// æ±å·¥èµä¹åæ¹å¼2ï¼\n\t\tinteger sumsalary2 = personlist.stream().reduce(0, (sum, p) -> sum += p.getsalary(),\n\t\t\t\t(sum1, sum2) -> sum1 + sum2);\n\t\t// æ±å·¥èµä¹åæ¹å¼3ï¼\n\t\tinteger sumsalary3 = personlist.stream().reduce(0, (sum, p) -> sum += p.getsalary(), integer::sum);\n\n\t\t// æ±æé«å·¥èµæ¹å¼1ï¼\n\t\tinteger maxsalary = personlist.stream().reduce(0, (max, p) -> max > p.getsalary() ? max : p.getsalary(),\n\t\t\t\tinteger::max);\n\t\t// æ±æé«å·¥èµæ¹å¼2ï¼\n\t\tinteger maxsalary2 = personlist.stream().reduce(0, (max, p) -> max > p.getsalary() ? max : p.getsalary(),\n\t\t\t\t(max1, max2) -> max1 > max2 ? max1 : max2);\n\n\t\tsystem.out.println("å·¥èµä¹åï¼" + sumsalary.get() + "," + sumsalary2 + "," + sumsalary3);\n\t\tsystem.out.println("æé«å·¥èµï¼" + maxsalary + "," + maxsalary2);\n\t}\n}\n\n\nè¾åºç»æï¼\n\n> å·¥èµä¹åï¼49300,49300,49300\n> \n> æé«å·¥èµï¼9500,9500\n\n\n# 3.6 æ¶é(collect)\n\ncollectï¼æ¶éï¼å¯ä»¥è¯´æ¯åå®¹æç¹å¤ãåè½æä¸°å¯çé¨åäºãä»å­é¢ä¸å»çè§£ï¼å°±æ¯æä¸ä¸ªæµæ¶éèµ·æ¥ï¼æç»å¯ä»¥æ¯æ¶éæä¸ä¸ªå¼ä¹å¯ä»¥æ¶éæä¸ä¸ªæ°çéåã\n\næç¤º\n\ncollectä¸»è¦ä¾èµjava.util.stream.collectorsç±»åç½®çéææ¹æ³ã\n\n# 3.6.1 å½é(tolist/toset/tomap)\n\nå ä¸ºæµä¸å­å¨æ°æ®ï¼é£ä¹å¨æµä¸­çæ°æ®å®æå¤çåï¼éè¦å°æµä¸­çæ°æ®éæ°å½éå°æ°çéåéãtolistãtosetåtomapæ¯è¾å¸¸ç¨ï¼å¦å¤è¿ætocollectionãtoconcurrentmapç­å¤æä¸äºçç¨æ³ã\n\nä¸é¢ç¨ä¸ä¸ªæ¡ä¾æ¼ç¤ºtolistãtosetåtomapï¼\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<integer> list = arrays.aslist(1, 6, 3, 4, 6, 7, 9, 6, 20);\n\t\tlist<integer> listnew = list.stream().filter(x -> x % 2 == 0).collect(collectors.tolist());\n\t\tset<integer> set = list.stream().filter(x -> x % 2 == 0).collect(collectors.toset());\n\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\t\tpersonlist.add(new person("anni", 8200, 24, "female", "new york"));\n\t\t\n\t\tmap<?, person> map = personlist.stream().filter(p -> p.getsalary() > 8000)\n\t\t\t\t.collect(collectors.tomap(person::getname, p -> p));\n\t\tsystem.out.println("tolist:" + listnew);\n\t\tsystem.out.println("toset:" + set);\n\t\tsystem.out.println("tomap:" + map);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> tolistï¼[6, 4, 6, 6, 20]\n> \n> tosetï¼[4, 20, 6]\n> \n> tomapï¼{tom=mutest.person@5fd0d5ae, anni=mutest.person@2d98a335}\n\n# 3.6.2 ç»è®¡(count/averaging)\n\ncollectorsæä¾äºä¸ç³»åç¨äºæ°æ®ç»è®¡çéææ¹æ³ï¼\n\n * è®¡æ°ï¼count\n\n * å¹³åå¼ï¼averagingintãaveraginglongãaveragingdouble\n\n * æå¼ï¼maxbyãminby\n\n * æ±åï¼summingintãsumminglongãsummingdouble\n\n * ç»è®¡ä»¥ä¸ææï¼summarizingintãsummarizinglongãsummarizingdouble\n\næ¡ä¾ï¼ç»è®¡åå·¥äººæ°ãå¹³åå·¥èµãå·¥èµæ»é¢ãæé«å·¥èµã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\n\t\t// æ±æ»æ°\n\t\tlong count = personlist.stream().collect(collectors.counting());\n\t\t// æ±å¹³åå·¥èµ\n\t\tdouble average = personlist.stream().collect(collectors.averagingdouble(person::getsalary));\n\t\t// æ±æé«å·¥èµ\n\t\toptional<integer> max = personlist.stream().map(person::getsalary).collect(collectors.maxby(integer::compare));\n\t\t// æ±å·¥èµä¹å\n\t\tinteger sum = personlist.stream().collect(collectors.summingint(person::getsalary));\n\t\t// ä¸æ¬¡æ§ç»è®¡ææä¿¡æ¯\n\t\tdoublesummarystatistics collect = personlist.stream().collect(collectors.summarizingdouble(person::getsalary));\n\n\t\tsystem.out.println("åå·¥æ»æ°ï¼" + count);\n\t\tsystem.out.println("åå·¥å¹³åå·¥èµï¼" + average);\n\t\tsystem.out.println("åå·¥å·¥èµæ»åï¼" + sum);\n\t\tsystem.out.println("åå·¥å·¥èµææç»è®¡ï¼" + collect);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> åå·¥æ»æ°ï¼3\n> \n> åå·¥å¹³åå·¥èµï¼7900.0\n> \n> åå·¥å·¥èµæ»åï¼23700\n> \n> åå·¥å·¥èµææç»è®¡ï¼doublesummarystatistics{count=3, sum=23700.000000,min=7000.000000, average=7900.000000, max=8900.000000}\n\n# 3.6.3 åç»(partitioningby/groupingby)\n\n * ååºï¼å°streamææ¡ä»¶åä¸ºä¸¤ä¸ªmapï¼æ¯å¦åå·¥æèªèµæ¯å¦é«äº8000åä¸ºä¸¤é¨åã\n * åç»ï¼å°éååä¸ºå¤ä¸ªmapï¼æ¯å¦åå·¥ææ§å«åç»ãæåçº§åç»åå¤çº§åç»ã\n\n\n\næ¡ä¾ï¼å°åå·¥æèªèµæ¯å¦é«äº8000åä¸ºä¸¤é¨åï¼å°åå·¥ææ§å«åå°åºåç»\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, "female", "washington"));\n\t\tpersonlist.add(new person("anni", 8200, "female", "new york"));\n\t\tpersonlist.add(new person("owen", 9500, "male", "new york"));\n\t\tpersonlist.add(new person("alisa", 7900, "female", "new york"));\n\n\t\t// å°åå·¥æèªèµæ¯å¦é«äº8000åç»\n        map<boolean, list<person>> part = personlist.stream().collect(collectors.partitioningby(x -> x.getsalary() > 8000));\n        // å°åå·¥ææ§å«åç»\n        map<string, list<person>> group = personlist.stream().collect(collectors.groupingby(person::getsex));\n        // å°åå·¥åææ§å«åç»ï¼åæå°åºåç»\n        map<string, map<string, list<person>>> group2 = personlist.stream().collect(collectors.groupingby(person::getsex, collectors.groupingby(person::getarea)));\n        system.out.println("åå·¥æèªèµæ¯å¦å¤§äº8000åç»æåµï¼" + part);\n        system.out.println("åå·¥ææ§å«åç»æåµï¼" + group);\n        system.out.println("åå·¥ææ§å«ãå°åºï¼" + group2);\n\t}\n}\n\n\nè¾åºç»æï¼\n\nåå·¥æèªèµæ¯å¦å¤§äº8000åç»æåµï¼{false=[mutest.person@2d98a335, mutest.person@16b98e56, mutest.person@7ef20235], true=[mutest.person@27d6c5e0, mutest.person@4f3f5b24, mutest.person@15aeb7ab]}\nåå·¥ææ§å«åç»æåµï¼{female=[mutest.person@16b98e56, mutest.person@4f3f5b24, mutest.person@7ef20235], male=[mutest.person@27d6c5e0, mutest.person@2d98a335, mutest.person@15aeb7ab]}\nåå·¥ææ§å«ãå°åºï¼{female={new york=[mutest.person@4f3f5b24, mutest.person@7ef20235], washington=[mutest.person@16b98e56]}, male={new york=[mutest.person@27d6c5e0, mutest.person@15aeb7ab], washington=[mutest.person@2d98a335]}}\n\n\n# 3.6.4 æ¥å(joining)\n\njoiningå¯ä»¥å°streamä¸­çåç´ ç¨ç¹å®çè¿æ¥ç¬¦ï¼æ²¡æçè¯ï¼åç´æ¥è¿æ¥ï¼è¿æ¥æä¸ä¸ªå­ç¬¦ä¸²ã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\n\t\tstring names = personlist.stream().map(p -> p.getname()).collect(collectors.joining(","));\n\t\tsystem.out.println("ææåå·¥çå§åï¼" + names);\n\t\tlist<string> list = arrays.aslist("a", "b", "c");\n\t\tstring string = list.stream().collect(collectors.joining("-"));\n\t\tsystem.out.println("æ¼æ¥åçå­ç¬¦ä¸²ï¼" + string);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> ææåå·¥çå§åï¼tom,jack,lily\n> \n> æ¼æ¥åçå­ç¬¦ä¸²ï¼a-b-c\n\n# 3.6.5 å½çº¦(reducing)\n\ncollectorsç±»æä¾çreducingæ¹æ³ï¼ç¸æ¯äºstreamæ¬èº«çreduceæ¹æ³ï¼å¢å äºå¯¹èªå®ä¹å½çº¦çæ¯æã\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\t\tpersonlist.add(new person("tom", 8900, 23, "male", "new york"));\n\t\tpersonlist.add(new person("jack", 7000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 7800, 21, "female", "washington"));\n\n\t\t// æ¯ä¸ªåå·¥åå»èµ·å¾ç¹åçèªèµä¹åï¼è¿ä¸ªä¾å­å¹¶ä¸ä¸¥è°¨ï¼ä½ä¸æ¶æ²¡æ³å°å¥½çä¾å­ï¼\n\t\tinteger sum = personlist.stream().collect(collectors.reducing(0, person::getsalary, (i, j) -> (i + j - 5000)));\n\t\tsystem.out.println("åå·¥æ£ç¨èªèµæ»åï¼" + sum);\n\n\t\t// streamçreduce\n\t\toptional<integer> sum2 = personlist.stream().map(person::getsalary).reduce(integer::sum);\n\t\tsystem.out.println("åå·¥èªèµæ»åï¼" + sum2.get());\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> åå·¥æ£ç¨èªèµæ»åï¼8700\n> \n> åå·¥èªèµæ»åï¼23700\n\n\n# 3.7 æåº(sorted)\n\nsortedï¼ä¸­é´æä½ãæä¸¤ç§æåºï¼\n\n * sorted()ï¼èªç¶æåºï¼æµä¸­åç´ éå®ç°comparableæ¥å£\n * sorted(comparator com)ï¼comparatoræåºå¨èªå®ä¹æåº\n\næ¡ä¾ï¼å°åå·¥æå·¥èµç±é«å°ä½ï¼å·¥èµä¸æ ·åæå¹´é¾ç±å¤§å°å°ï¼æåº\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tlist<person> personlist = new arraylist<person>();\n\n\t\tpersonlist.add(new person("sherry", 9000, 24, "female", "new york"));\n\t\tpersonlist.add(new person("tom", 8900, 22, "male", "washington"));\n\t\tpersonlist.add(new person("jack", 9000, 25, "male", "washington"));\n\t\tpersonlist.add(new person("lily", 8800, 26, "male", "new york"));\n\t\tpersonlist.add(new person("alisa", 9000, 26, "female", "new york"));\n\n\t\t// æå·¥èµååºæåºï¼èªç¶æåºï¼\n\t\tlist<string> newlist = personlist.stream().sorted(comparator.comparing(person::getsalary)).map(person::getname)\n\t\t\t\t.collect(collectors.tolist());\n\t\t// æå·¥èµååºæåº\n\t\tlist<string> newlist2 = personlist.stream().sorted(comparator.comparing(person::getsalary).reversed())\n\t\t\t\t.map(person::getname).collect(collectors.tolist());\n\t\t// åæå·¥èµåæå¹´é¾ååºæåº\n\t\tlist<string> newlist3 = personlist.stream()\n\t\t\t\t.sorted(comparator.comparing(person::getsalary).thencomparing(person::getage)).map(person::getname)\n\t\t\t\t.collect(collectors.tolist());\n\t\t// åæå·¥èµåæå¹´é¾èªå®ä¹æåºï¼éåºï¼\n\t\tlist<string> newlist4 = personlist.stream().sorted((p1, p2) -> {\n\t\t\tif (p1.getsalary() == p2.getsalary()) {\n\t\t\t\treturn p2.getage() - p1.getage();\n\t\t\t} else {\n\t\t\t\treturn p2.getsalary() - p1.getsalary();\n\t\t\t}\n\t\t}).map(person::getname).collect(collectors.tolist());\n\n\t\tsystem.out.println("æå·¥èµååºæåºï¼" + newlist);\n\t\tsystem.out.println("æå·¥èµéåºæåºï¼" + newlist2);\n\t\tsystem.out.println("åæå·¥èµåæå¹´é¾ååºæåºï¼" + newlist3);\n\t\tsystem.out.println("åæå·¥èµåæå¹´é¾èªå®ä¹éåºæåºï¼" + newlist4);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> æå·¥èµååºæåºï¼[lily, tom, sherry, jack, alisa]\n> \n> æå·¥èµéåºæåºï¼[sherry, jack, alisa, tom, lily]\n> \n> åæå·¥èµåæå¹´é¾ååºæåºï¼[lily, tom, sherry, jack, alisa]\n> \n> åæå·¥èµåæå¹´é¾èªå®ä¹éåºæåºï¼[alisa, jack, sherry, tom, lily]\n\n\n# 3.8 æå/ç»å\n\næµä¹å¯ä»¥è¿è¡åå¹¶ãå»éãéå¶ãè·³è¿ç­æä½ã\n\n\n\n\n\n\n\npublic class streamtest {\n\tpublic static void main(string[] args) {\n\t\tstring[] arr1 = { "a", "b", "c", "d" };\n\t\tstring[] arr2 = { "d", "e", "f", "g" };\n\n\t\tstream<string> stream1 = stream.of(arr1);\n\t\tstream<string> stream2 = stream.of(arr2);\n\t\t// concat:åå¹¶ä¸¤ä¸ªæµ distinctï¼å»é\n\t\tlist<string> newlist = stream.concat(stream1, stream2).distinct().collect(collectors.tolist());\n\t\t// limitï¼éå¶ä»æµä¸­è·å¾ånä¸ªæ°æ®\n\t\tlist<integer> collect = stream.iterate(1, x -> x + 2).limit(10).collect(collectors.tolist());\n\t\t// skipï¼è·³è¿ånä¸ªæ°æ®\n\t\tlist<integer> collect2 = stream.iterate(1, x -> x + 2).skip(1).limit(5).collect(collectors.tolist());\n\n\t\tsystem.out.println("æµåå¹¶ï¼" + newlist);\n\t\tsystem.out.println("limitï¼" + collect);\n\t\tsystem.out.println("skipï¼" + collect2);\n\t}\n}\n\n\nè¿è¡ç»æï¼\n\n> æµåå¹¶ï¼[a, b, c, d, e, f, g]\n> \n> limitï¼[1, 3, 5, 7, 9, 11, 13, 15, 17, 19]\n> \n> skipï¼[3, 5, 7, 9, 11]\n\nç»æè¯­\n\nå¥½ï¼ä»¥ä¸å°±æ¯å¨é¨åå®¹ï¼è½åæçå°è¿éï¼ä½ ä¸å®å¾ææ¶è·ï¼é£ä¹å¨ä¸å¨æ¿offerçå°æï¼ç¹ä¸ªèµåèµ°å§ï¼å¬è¯´è¿ä¹åçäºº2021å¹´é½äº¤äºå¥½è¿ï¼',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"ä»ä¹æ¯ Kubernetes",frontmatter:{title:"ä»ä¹æ¯ Kubernetes",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/e51b3b/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/01.%E4%BB%80%E4%B9%88%E6%98%AF%20Kubernetes.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/01.ä»ä¹æ¯ Kubernetes.md",key:"v-a0a5c11c",path:"/pages/e51b3b/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:21},{level:2,title:"ç¹ç¹",slug:"ç¹ç¹",normalizedTitle:"ç¹ç¹",charIndex:284},{level:2,title:"ä»ä¼ ç»å°å®¹å¨åé¨ç½²",slug:"ä»ä¼ ç»å°å®¹å¨åé¨ç½²",normalizedTitle:"ä»ä¼ ç»å°å®¹å¨åé¨ç½²",charIndex:380},{level:3,title:"ä¼ ç»çé¨ç½²æ¹å¼",slug:"ä¼ ç»çé¨ç½²æ¹å¼",normalizedTitle:"ä¼ ç»çé¨ç½²æ¹å¼",charIndex:396},{level:3,title:"å®¹å¨åé¨ç½²çä¼å¿",slug:"å®¹å¨åé¨ç½²çä¼å¿",normalizedTitle:"å®¹å¨åé¨ç½²çä¼å¿",charIndex:530},{level:2,title:"ä¸ºä»ä¹éè¦ Kubernetes",slug:"ä¸ºä»ä¹éè¦-kubernetes",normalizedTitle:"ä¸ºä»ä¹éè¦ kubernetes",charIndex:870}],headersStr:"æ¦è¿° ç¹ç¹ ä»ä¼ ç»å°å®¹å¨åé¨ç½² ä¼ ç»çé¨ç½²æ¹å¼ å®¹å¨åé¨ç½²çä¼å¿ ä¸ºä»ä¹éè¦ Kubernetes",content:"# ä»ä¹æ¯ Kubernetes\n\n\n# æ¦è¿°\n\n\n\nKubernetes æ¯ Google 2014 å¹´åå»ºç®¡ççï¼æ¯ Google 10 å¤å¹´å¤§è§æ¨¡å®¹å¨ç®¡çææ¯ Borg çå¼æºçæ¬ã\n\nKubernetes æ¯å®¹å¨éç¾¤ç®¡çç³»ç»ï¼æ¯ä¸ä¸ªå¼æºçå¹³å°ï¼å¯ä»¥å®ç°å®¹å¨éç¾¤çèªå¨åé¨ç½²ãèªå¨æ©ç¼©å®¹ãç»´æ¤ç­åè½ãä½¿ç¨ Kubernetes æä»¬å¯ä»¥ï¼\n\n * å¿«éé¨ç½²åºç¨\n * å¿«éæ©å±åºç¨\n * æ ç¼å¯¹æ¥æ°çåºç¨åè½\n * èçèµæºï¼ä¼åç¡¬ä»¶èµæºçä½¿ç¨\n\nKubernetes çç®æ æ¯ä¿è¿å®åç»ä»¶åå·¥å·ççæç³»ç»ï¼ä»¥åè½»åºç¨ç¨åºå¨å¬æäºæç§æäºä¸­è¿è¡çè´æã\n\n\n# ç¹ç¹\n\n * å¯ç§»æ¤ï¼ æ¯æå¬æäºï¼ç§æäºï¼æ··åäºï¼å¤éäºï¼å¤ä¸ªå¬å±äºï¼\n * å¯æ©å±ï¼ æ¨¡ååï¼æä»¶åï¼å¯æè½½ï¼å¯ç»å\n * èªå¨åï¼ èªå¨é¨ç½²ï¼èªå¨éå¯ï¼èªå¨å¤å¶ï¼èªå¨ä¼¸ç¼©/æ©å±\n\n\n# ä»ä¼ ç»å°å®¹å¨åé¨ç½²\n\n\n\n\n# ä¼ ç»çé¨ç½²æ¹å¼\n\nä¼ ç»çåºç¨é¨ç½²æ¹å¼æ¯éè¿æä»¶æèæ¬æ¥å®è£åºç¨ãè¿æ ·åçç¼ºç¹æ¯åºç¨çè¿è¡ãéç½®ãç®¡çãææçå­å¨æå°ä¸å½åæä½ç³»ç»ç»å®ï¼è¿æ ·åå¹¶ä¸å©äºåºç¨çåçº§æ´æ°/åæ»ç­æä½ï¼å½ç¶ä¹å¯ä»¥éè¿åå»ºèæºçæ¹å¼æ¥å®ç°æäºåè½ï¼ä½æ¯èææºéå¸¸éï¼å¹¶ä¸å©äºå¯ç§»æ¤æ§ã\n\n\n# å®¹å¨åé¨ç½²çä¼å¿\n\n * å¿«éåå»º/é¨ç½²åºç¨ï¼ ä¸èææºç¸æ¯ï¼å®¹å¨éåçåå»ºæ´å å®¹æã\n * æç»­å¼åãéæåé¨ç½²ï¼ æä¾å¯é ä¸é¢ç¹çå®¹å¨éåæå»º/é¨ç½²ï¼å¹¶ä½¿ç¨å¿«éåç®åçåæ»(ç±äºéåä¸å¯åæ§)ã\n * å¼ååè¿è¡ç¸åç¦»ï¼ å¨ build æè release é¶æ®µåå»ºå®¹å¨éåï¼ä½¿å¾åºç¨ååºç¡è®¾æ½è§£è¦ã\n * å¼åï¼æµè¯åçäº§ç¯å¢ä¸è´æ§ï¼ å¨æ¬å°æå¤ç½ï¼çäº§ç¯å¢ï¼è¿è¡çä¸è´æ§ã\n * äºå¹³å°æå¶ä»æä½ç³»ç»ï¼ å¯ä»¥å¨ UbuntuãRHELãCoreOSãon-premãGoogle Container Engine æå¶å®ä»»ä½ç¯å¢ä¸­è¿è¡ã\n * åå¸å¼ï¼å¼¹æ§ï¼å¾®æå¡åï¼ åºç¨ç¨åºåä¸ºæ´å°çãç¬ç«çé¨ä»¶ï¼å¯ä»¥å¨æé¨ç½²åç®¡çã\n * èµæºéç¦»\n * èµæºå©ç¨æ´é«æ\n\n\n# ä¸ºä»ä¹éè¦ Kubernetes\n\nå¯ä»¥å¨ç©çæèææºç Kubernetes éç¾¤ä¸è¿è¡å®¹å¨ååºç¨ï¼Kubernetes è½æä¾ä¸ä¸ªä»¥ âå®¹å¨ä¸ºä¸­å¿çåºç¡æ¶æâï¼æ»¡è¶³å¨çäº§ç¯å¢ä¸­è¿è¡åºç¨çä¸äºå¸¸è§éæ±ï¼å¦ï¼\n\n * å¤ä¸ªè¿ç¨ååå·¥ä½\n * å­å¨ç³»ç»æè½½\n * åºç¨å¥åº·æ£æ¥\n * åºç¨å®ä¾çå¤å¶\n * èªå¨ä¼¸ç¼©/æ©å±\n * æ³¨åä¸åç°\n * è´è½½åè¡¡\n * æ»å¨æ´æ°\n * èµæºçæ§\n * æ¥å¿è®¿é®\n * è°è¯åºç¨ç¨åº\n * æä¾è®¤è¯åææ",normalizedContent:"# ä»ä¹æ¯ kubernetes\n\n\n# æ¦è¿°\n\n\n\nkubernetes æ¯ google 2014 å¹´åå»ºç®¡ççï¼æ¯ google 10 å¤å¹´å¤§è§æ¨¡å®¹å¨ç®¡çææ¯ borg çå¼æºçæ¬ã\n\nkubernetes æ¯å®¹å¨éç¾¤ç®¡çç³»ç»ï¼æ¯ä¸ä¸ªå¼æºçå¹³å°ï¼å¯ä»¥å®ç°å®¹å¨éç¾¤çèªå¨åé¨ç½²ãèªå¨æ©ç¼©å®¹ãç»´æ¤ç­åè½ãä½¿ç¨ kubernetes æä»¬å¯ä»¥ï¼\n\n * å¿«éé¨ç½²åºç¨\n * å¿«éæ©å±åºç¨\n * æ ç¼å¯¹æ¥æ°çåºç¨åè½\n * èçèµæºï¼ä¼åç¡¬ä»¶èµæºçä½¿ç¨\n\nkubernetes çç®æ æ¯ä¿è¿å®åç»ä»¶åå·¥å·ççæç³»ç»ï¼ä»¥åè½»åºç¨ç¨åºå¨å¬æäºæç§æäºä¸­è¿è¡çè´æã\n\n\n# ç¹ç¹\n\n * å¯ç§»æ¤ï¼ æ¯æå¬æäºï¼ç§æäºï¼æ··åäºï¼å¤éäºï¼å¤ä¸ªå¬å±äºï¼\n * å¯æ©å±ï¼ æ¨¡ååï¼æä»¶åï¼å¯æè½½ï¼å¯ç»å\n * èªå¨åï¼ èªå¨é¨ç½²ï¼èªå¨éå¯ï¼èªå¨å¤å¶ï¼èªå¨ä¼¸ç¼©/æ©å±\n\n\n# ä»ä¼ ç»å°å®¹å¨åé¨ç½²\n\n\n\n\n# ä¼ ç»çé¨ç½²æ¹å¼\n\nä¼ ç»çåºç¨é¨ç½²æ¹å¼æ¯éè¿æä»¶æèæ¬æ¥å®è£åºç¨ãè¿æ ·åçç¼ºç¹æ¯åºç¨çè¿è¡ãéç½®ãç®¡çãææçå­å¨æå°ä¸å½åæä½ç³»ç»ç»å®ï¼è¿æ ·åå¹¶ä¸å©äºåºç¨çåçº§æ´æ°/åæ»ç­æä½ï¼å½ç¶ä¹å¯ä»¥éè¿åå»ºèæºçæ¹å¼æ¥å®ç°æäºåè½ï¼ä½æ¯èææºéå¸¸éï¼å¹¶ä¸å©äºå¯ç§»æ¤æ§ã\n\n\n# å®¹å¨åé¨ç½²çä¼å¿\n\n * å¿«éåå»º/é¨ç½²åºç¨ï¼ ä¸èææºç¸æ¯ï¼å®¹å¨éåçåå»ºæ´å å®¹æã\n * æç»­å¼åãéæåé¨ç½²ï¼ æä¾å¯é ä¸é¢ç¹çå®¹å¨éåæå»º/é¨ç½²ï¼å¹¶ä½¿ç¨å¿«éåç®åçåæ»(ç±äºéåä¸å¯åæ§)ã\n * å¼ååè¿è¡ç¸åç¦»ï¼ å¨ build æè release é¶æ®µåå»ºå®¹å¨éåï¼ä½¿å¾åºç¨ååºç¡è®¾æ½è§£è¦ã\n * å¼åï¼æµè¯åçäº§ç¯å¢ä¸è´æ§ï¼ å¨æ¬å°æå¤ç½ï¼çäº§ç¯å¢ï¼è¿è¡çä¸è´æ§ã\n * äºå¹³å°æå¶ä»æä½ç³»ç»ï¼ å¯ä»¥å¨ ubuntuãrhelãcoreosãon-premãgoogle container engine æå¶å®ä»»ä½ç¯å¢ä¸­è¿è¡ã\n * åå¸å¼ï¼å¼¹æ§ï¼å¾®æå¡åï¼ åºç¨ç¨åºåä¸ºæ´å°çãç¬ç«çé¨ä»¶ï¼å¯ä»¥å¨æé¨ç½²åç®¡çã\n * èµæºéç¦»\n * èµæºå©ç¨æ´é«æ\n\n\n# ä¸ºä»ä¹éè¦ kubernetes\n\nå¯ä»¥å¨ç©çæèææºç kubernetes éç¾¤ä¸è¿è¡å®¹å¨ååºç¨ï¼kubernetes è½æä¾ä¸ä¸ªä»¥ âå®¹å¨ä¸ºä¸­å¿çåºç¡æ¶æâï¼æ»¡è¶³å¨çäº§ç¯å¢ä¸­è¿è¡åºç¨çä¸äºå¸¸è§éæ±ï¼å¦ï¼\n\n * å¤ä¸ªè¿ç¨ååå·¥ä½\n * å­å¨ç³»ç»æè½½\n * åºç¨å¥åº·æ£æ¥\n * åºç¨å®ä¾çå¤å¶\n * èªå¨ä¼¸ç¼©/æ©å±\n * æ³¨åä¸åç°\n * è´è½½åè¡¡\n * æ»å¨æ´æ°\n * èµæºçæ§\n * æ¥å¿è®¿é®\n * è°è¯åºç¨ç¨åº\n * æä¾è®¤è¯åææ",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Kubernetes å®è£åçåå¤",frontmatter:{title:"Kubernetes å®è£åçåå¤",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/43a41d/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/02.Kubernetes%20%E5%AE%89%E8%A3%85%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/02.Kubernetes å®è£åçåå¤.md",key:"v-229229ee",path:"/pages/43a41d/",headers:[{level:2,title:"åææ¡ä»¶",slug:"åææ¡ä»¶",normalizedTitle:"åææ¡ä»¶",charIndex:58},{level:2,title:"é¨ç½²ç®æ ",slug:"é¨ç½²ç®æ ",normalizedTitle:"é¨ç½²ç®æ ",charIndex:277},{level:2,title:"ç¯å¢ä»ç»",slug:"ç¯å¢ä»ç»",normalizedTitle:"ç¯å¢ä»ç»",charIndex:454},{level:2,title:"ä¿®æ¹ä¸»æºå",slug:"ä¿®æ¹ä¸»æºå",normalizedTitle:"ä¿®æ¹ä¸»æºå",charIndex:867},{level:2,title:"ä¿®æ¹/etc/hostsæä»¶",slug:"ä¿®æ¹-etc-hostsæä»¶",normalizedTitle:"ä¿®æ¹/etc/hostsæä»¶",charIndex:1044},{level:2,title:"éç½®æ¶é´åæ­¥",slug:"éç½®æ¶é´åæ­¥",normalizedTitle:"éç½®æ¶é´åæ­¥",charIndex:1170},{level:2,title:"å³é­swap",slug:"å³é­swap",normalizedTitle:"å³é­swap",charIndex:1299},{level:2,title:"åè®¸ iptables æ£æ¥æ¡¥æ¥æµé",slug:"åè®¸-iptables-æ£æ¥æ¡¥æ¥æµé",normalizedTitle:"åè®¸ iptables æ£æ¥æ¡¥æ¥æµé",charIndex:1651},{level:2,title:"æ£æ¥æéç«¯å£",slug:"æ£æ¥æéç«¯å£",normalizedTitle:"æ£æ¥æéç«¯å£",charIndex:2122},{level:3,title:"æ§å¶å¹³é¢èç¹",slug:"æ§å¶å¹³é¢èç¹",normalizedTitle:"æ§å¶å¹³é¢èç¹",charIndex:2133},{level:3,title:"å·¥ä½èç¹",slug:"å·¥ä½èç¹",normalizedTitle:"å·¥ä½èç¹",charIndex:2532},{level:2,title:"å®è£Docker",slug:"å®è£docker",normalizedTitle:"å®è£docker",charIndex:2881}],headersStr:"åææ¡ä»¶ é¨ç½²ç®æ  ç¯å¢ä»ç» ä¿®æ¹ä¸»æºå ä¿®æ¹/etc/hostsæä»¶ éç½®æ¶é´åæ­¥ å³é­swap åè®¸ iptables æ£æ¥æ¡¥æ¥æµé æ£æ¥æéç«¯å£ æ§å¶å¹³é¢èç¹ å·¥ä½èç¹ å®è£Docker",content:'# Kubernetes å®è£åçåå¤\n\nå®æ¹ææ¡£\n\nå®è£ kubeadm ä½¿ç¨ kubeadm åå»ºéç¾¤\n\n\n# åææ¡ä»¶\n\næ¬æ¬¡é¨ç½²æç¨éç¨ Ubuntu çæ¬å®è£ kubernetes éç¾¤ç¯å¢ï¼éç¾¤èç¹ä¸º 1 ä¸» 2 ä»æ¨¡å¼ï¼æå¡å¨ï¼æèææºï¼åºæ¬è¦æ±ï¼å¦ä¸ï¼\n\n * OSï¼Ubuntu 18.04.5 LTS\n * CPUï¼æä½è¦æ±ï¼1 CPU 2 æ ¸\n * åå­ï¼æä½è¦æ±ï¼2GB\n * ç£çï¼æä½è¦æ±ï¼20GB\n * ç½ç»ï¼å¯ä»¥è®¿é®å¤ç½ï¼ä¸éç¾¤ä¸­çæææºå¨çç½ç»å¯ä»¥ç¸äºéä¿¡\n\nåºäºCentOS 7 é¨ç½²K8Sæç¨\n\nè¯·ç¹å»è¿é\n\n\n# é¨ç½²ç®æ \n\nå¦ä¸å¾ï¼ç»åºäºæ¬ç« è¦é¨ç½²çç®æ éç¾¤çåºæ¬ç¯å¢ï¼å®æ¥æä¸ä¸ªMasterèç¹åä¸¤ä¸ªNodeèç¹ãåNodeä¸»æºçéç½®æ¹å¼åºæ¬ç¸åã\n\n\n\nåä¸»æºä¸éç¨çå®¹å¨è¿è¡æ¶ç¯å¢ä¸ºDockerï¼ä¸ºPodæä¾ç½ç»åè½çCNIæ¯calicoï¼å®è¿è¡ä¸ºæç®¡äºKubernetesä¹ä¸çPodå¯¹è±¡ï¼å¦å¤ï¼åºç¡éä»¶è¿åæ¬CoreDNSç¨äºåç§°è§£æåæå¡åç°ã\n\n\n# ç¯å¢ä»ç»\n\næä½ç³»ç»ãå®¹å¨å¼æåKubernetesçç¸å³çæ¬å¦ä¸ï¼\n\n * OS: Ubuntu 18.04.5 LTS\n * Container runtime: Docker CE 20.10.0\n * Kubernetes: v1.20\n\nåå»ºä¸å°èææºï¼åå«å½åå¦ä¸ï¼\n\nä¸»æºå           IPå°å             è§è²       OS               éç½®\nk8s-master1   192.168.31.101   master   Ubuntu 18.04.5   2æ ¸2G\nk8s-node1     192.168.31.102   worker   Ubuntu 18.04.5   2æ ¸2G\nk8s-node2     192.168.31.103   worker   Ubuntu 18.04.5   2æ ¸2G\n\næç¤º\n\næ ç¹æ®è¯´æä»¥ä¸æä½å¨ææèç¹æ§è¡\n\n\n# ä¿®æ¹ä¸»æºå\n\nå¨åä¸å±åç½ä¸­ä¸»æºåä¸åºè¯¥ç¸åï¼æä»¥æä»¬éè¦åä¿®æ¹ã\n\n#masterèç¹:\nhostnamectl set-hostname k8s-master\n#node1èç¹ï¼\nhostnamectl set-hostname k8s-node1\n#node2èç¹:\nhostnamectl set-hostname k8s-node2\n\n\n\n# ä¿®æ¹/etc/hostsæä»¶\n\ncat >> /etc/hosts << EOF\n192.168.31.101 k8s-master\n192.168.31.102 k8s-node1\n192.168.31.103 k8s-node2\nEOF\n\n\n\n# éç½®æ¶é´åæ­¥\n\nä½¿ç¨chronyåæ­¥æ¶é´ï¼éç½®masterèç¹ä¸ç½ç»NTPæå¡å¨åæ­¥æ¶é´ï¼æænodeèç¹ä¸masterèç¹åæ­¥æ¶é´ã\n\nsudo apt install ntpdate  \nsudo ntpdate ntp.aliyun.com\n\n\n\n# å³é­swap\n\nswapoff -a\nyes | cp /etc/fstab /etc/fstab_bak\ncat /etc/fstab_bak |grep -v swap > /etc/fstab\n\n\nä½¿ç¨free -hå½ä»¤æ£æ¥éç½®æ¯å¦çæ\n\n[root@k8s-master etc]# free -h   \ntotal        used        free      shared  buff/cache   available\nMem:           1.8G        142M        1.5G        8.5M        122M        1.5G\nSwap:            0B          0B          0B\n\n\n\n# åè®¸ iptables æ£æ¥æ¡¥æ¥æµé\n\nç¡®ä¿ br_netfilter æ¨¡åè¢«å è½½ãè¿ä¸æä½å¯ä»¥éè¿è¿è¡ lsmod | grep br_netfilter æ¥å®æãè¥è¦æ¾å¼å è½½è¯¥æ¨¡åï¼å¯æ§è¡ sudo modprobe br_netfilterã\n\nä¸ºäºè®©ä½ ç Linux èç¹ä¸ç iptables è½å¤æ­£ç¡®å°æ¥çæ¡¥æ¥æµéï¼ä½ éè¦ç¡®ä¿å¨ä½ ç sysctl éç½®ä¸­å° net.bridge.bridge-nf-call-iptables è®¾ç½®ä¸º 1ãä¾å¦ï¼\n\ncat <<EOF | sudo tee /etc/modules-load.d/k8s.conf\nbr_netfilter\nEOF\n\n\ncat <<EOF | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF\n\n\nsysctl --system\n\n\næ´å¤çç¸å³ç»èå¯æ¥çç½ç»æä»¶éæ±é¡µé¢ã\n\n\n# æ£æ¥æéç«¯å£\n\n\n# æ§å¶å¹³é¢èç¹\n\nåè®®    æ¹å   ç«¯å£èå´        ä½ç¨                        ä½¿ç¨è\nTCP   å¥ç«   6443        Kubernetes API æå¡å¨        ææç»ä»¶\nTCP   å¥ç«   2379-2380   etcd æå¡å¨å®¢æ·ç«¯ API           kube-apiserver, etcd\nTCP   å¥ç«   10250       Kubelet API               kubelet èªèº«ãæ§å¶å¹³é¢ç»ä»¶\nTCP   å¥ç«   10251       kube-scheduler            kube-scheduler èªèº«\nTCP   å¥ç«   10252       kube-controller-manager   kube-controller-manager èªèº«\n\n\n# å·¥ä½èç¹\n\nåè®®    æ¹å   ç«¯å£èå´          ä½ç¨             ä½¿ç¨è\nTCP   å¥ç«   10250         Kubelet API    kubelet èªèº«ãæ§å¶å¹³é¢ç»ä»¶\nTCP   å¥ç«   30000-32767   NodePort æå¡â    ææç»ä»¶\n\nâ  NodePort æå¡ çé»è®¤ç«¯å£èå´ã\n\nä½¿ç¨ * æ è®°çä»»æç«¯å£å·é½å¯ä»¥è¢«è¦çï¼æä»¥ä½ éè¦ä¿è¯æå®å¶çç«¯å£æ¯å¼æ¾çã\n\nè½ç¶æ§å¶å¹³é¢èç¹å·²ç»åå«äº etcd çç«¯å£ï¼ä½ ä¹å¯ä»¥ä½¿ç¨èªå®ä¹çå¤é¨ etcd éç¾¤ï¼ææ¯æå®èªå®ä¹ç«¯å£ã\n\nä½ ä½¿ç¨ç Pod ç½ç»æä»¶ (è§ä¸) ä¹å¯è½éè¦æäºç¹å®ç«¯å£å¼å¯ãç±äºåä¸ª Pod ç½ç»æä»¶é½ææä¸åï¼ è¯·åéä»ä»¬åèªææ¡£ä¸­å¯¹ç«¯å£çè¦æ±ã\n\n\n# å®è£Docker\n\nå¨æ¯ä¸ªèç¹ä¸ï¼æ ¹æ®å®è£ Docker å¼æ ä¸ºä½ ç Linux åè¡çå®è£ Dockerã ä½ å¯ä»¥å¨æ­¤æä»¶ä¸­æ¾å°ææ°çç»è¿éªè¯ç Docker çæ¬ ä¾èµå³ç³»ã\n\nStep 1 : å®è£å¿è¦çä¸äºç³»ç»å·¥å·\n\nsudo apt-get update\nsudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common\n\n\nStep 2 : å®è£GPGè¯ä¹¦\n\nsudo curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n\n\nStep 3 : åå¥è½¯ä»¶æºä¿¡æ¯\n\nsudo add-apt-repository "deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"\n\n\nStep 4 : æ´æ°å¹¶å®è£v19.03.0ççDocker-CE\n\nsudo apt-get install docker-ce=5:19.03.0~3-0~ubuntu-bionic docker-ce-cli=5:19.03.0~3-0~ubuntu-bionic containerd.io -y\n\n\nStep 5 ï¼éç½® Docker å®æ¤ç¨åºï¼å°¤å¶æ¯ä½¿ç¨ systemd æ¥ç®¡çå®¹å¨ç cgroupï¼éç½®éåå é\n\ncat <<EOF | sudo tee /etc/docker/daemon.json\n{\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "100m"\n  },\n  "storage-driver": "overlay2",\n  "registry-mirrors": ["https://registry.cn-beijing.aliyuncs.com"]\n}\nEOF\n\n\nStep 6 ï¼éæ°å¯å¨ Docker å¹¶å¨å¯å¨æ¶å¯ç¨\n\nsudo systemctl enable docker\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n\nStep 7 ï¼ å»ºç« docker ç¨æ·ç»\n\né»è®¤æåµä¸ï¼docker å½ä»¤ä¼ä½¿ç¨ Unix socket ä¸ Docker å¼æéè®¯ãèåªæ root ç¨æ·å docker ç»çç¨æ·æå¯ä»¥è®¿é® Docker å¼æç Unix socketãåºäºå®å¨èèï¼ä¸è¬ Linux ç³»ç»ä¸ä¸ä¼ç´æ¥ä½¿ç¨ root ç¨æ·ãå æ­¤ï¼æ´å¥½å°åæ³æ¯å°éè¦ä½¿ç¨ docker çç¨æ·å å¥ docker ç¨æ·ç»ã\n\nåæ¢å°æ®éç¨æ·ï¼å°å½åç¨æ·å å¥ docker ç»ï¼\n\n$ sudo usermod -aG docker $USER\n\n\néåºå½åç»ç«¯å¹¶éæ°ç»å½ï¼è¿è¡å¦ä¸æµè¯ã',normalizedContent:'# kubernetes å®è£åçåå¤\n\nå®æ¹ææ¡£\n\nå®è£ kubeadm ä½¿ç¨ kubeadm åå»ºéç¾¤\n\n\n# åææ¡ä»¶\n\næ¬æ¬¡é¨ç½²æç¨éç¨ ubuntu çæ¬å®è£ kubernetes éç¾¤ç¯å¢ï¼éç¾¤èç¹ä¸º 1 ä¸» 2 ä»æ¨¡å¼ï¼æå¡å¨ï¼æèææºï¼åºæ¬è¦æ±ï¼å¦ä¸ï¼\n\n * osï¼ubuntu 18.04.5 lts\n * cpuï¼æä½è¦æ±ï¼1 cpu 2 æ ¸\n * åå­ï¼æä½è¦æ±ï¼2gb\n * ç£çï¼æä½è¦æ±ï¼20gb\n * ç½ç»ï¼å¯ä»¥è®¿é®å¤ç½ï¼ä¸éç¾¤ä¸­çæææºå¨çç½ç»å¯ä»¥ç¸äºéä¿¡\n\nåºäºcentos 7 é¨ç½²k8sæç¨\n\nè¯·ç¹å»è¿é\n\n\n# é¨ç½²ç®æ \n\nå¦ä¸å¾ï¼ç»åºäºæ¬ç« è¦é¨ç½²çç®æ éç¾¤çåºæ¬ç¯å¢ï¼å®æ¥æä¸ä¸ªmasterèç¹åä¸¤ä¸ªnodeèç¹ãånodeä¸»æºçéç½®æ¹å¼åºæ¬ç¸åã\n\n\n\nåä¸»æºä¸éç¨çå®¹å¨è¿è¡æ¶ç¯å¢ä¸ºdockerï¼ä¸ºpodæä¾ç½ç»åè½çcniæ¯calicoï¼å®è¿è¡ä¸ºæç®¡äºkubernetesä¹ä¸çpodå¯¹è±¡ï¼å¦å¤ï¼åºç¡éä»¶è¿åæ¬corednsç¨äºåç§°è§£æåæå¡åç°ã\n\n\n# ç¯å¢ä»ç»\n\næä½ç³»ç»ãå®¹å¨å¼æåkubernetesçç¸å³çæ¬å¦ä¸ï¼\n\n * os: ubuntu 18.04.5 lts\n * container runtime: docker ce 20.10.0\n * kubernetes: v1.20\n\nåå»ºä¸å°èææºï¼åå«å½åå¦ä¸ï¼\n\nä¸»æºå           ipå°å             è§è²       os               éç½®\nk8s-master1   192.168.31.101   master   ubuntu 18.04.5   2æ ¸2g\nk8s-node1     192.168.31.102   worker   ubuntu 18.04.5   2æ ¸2g\nk8s-node2     192.168.31.103   worker   ubuntu 18.04.5   2æ ¸2g\n\næç¤º\n\næ ç¹æ®è¯´æä»¥ä¸æä½å¨ææèç¹æ§è¡\n\n\n# ä¿®æ¹ä¸»æºå\n\nå¨åä¸å±åç½ä¸­ä¸»æºåä¸åºè¯¥ç¸åï¼æä»¥æä»¬éè¦åä¿®æ¹ã\n\n#masterèç¹:\nhostnamectl set-hostname k8s-master\n#node1èç¹ï¼\nhostnamectl set-hostname k8s-node1\n#node2èç¹:\nhostnamectl set-hostname k8s-node2\n\n\n\n# ä¿®æ¹/etc/hostsæä»¶\n\ncat >> /etc/hosts << eof\n192.168.31.101 k8s-master\n192.168.31.102 k8s-node1\n192.168.31.103 k8s-node2\neof\n\n\n\n# éç½®æ¶é´åæ­¥\n\nä½¿ç¨chronyåæ­¥æ¶é´ï¼éç½®masterèç¹ä¸ç½ç»ntpæå¡å¨åæ­¥æ¶é´ï¼æænodeèç¹ä¸masterèç¹åæ­¥æ¶é´ã\n\nsudo apt install ntpdate  \nsudo ntpdate ntp.aliyun.com\n\n\n\n# å³é­swap\n\nswapoff -a\nyes | cp /etc/fstab /etc/fstab_bak\ncat /etc/fstab_bak |grep -v swap > /etc/fstab\n\n\nä½¿ç¨free -hå½ä»¤æ£æ¥éç½®æ¯å¦çæ\n\n[root@k8s-master etc]# free -h   \ntotal        used        free      shared  buff/cache   available\nmem:           1.8g        142m        1.5g        8.5m        122m        1.5g\nswap:            0b          0b          0b\n\n\n\n# åè®¸ iptables æ£æ¥æ¡¥æ¥æµé\n\nç¡®ä¿ br_netfilter æ¨¡åè¢«å è½½ãè¿ä¸æä½å¯ä»¥éè¿è¿è¡ lsmod | grep br_netfilter æ¥å®æãè¥è¦æ¾å¼å è½½è¯¥æ¨¡åï¼å¯æ§è¡ sudo modprobe br_netfilterã\n\nä¸ºäºè®©ä½ ç linux èç¹ä¸ç iptables è½å¤æ­£ç¡®å°æ¥çæ¡¥æ¥æµéï¼ä½ éè¦ç¡®ä¿å¨ä½ ç sysctl éç½®ä¸­å° net.bridge.bridge-nf-call-iptables è®¾ç½®ä¸º 1ãä¾å¦ï¼\n\ncat <<eof | sudo tee /etc/modules-load.d/k8s.conf\nbr_netfilter\neof\n\n\ncat <<eof | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\neof\n\n\nsysctl --system\n\n\næ´å¤çç¸å³ç»èå¯æ¥çç½ç»æä»¶éæ±é¡µé¢ã\n\n\n# æ£æ¥æéç«¯å£\n\n\n# æ§å¶å¹³é¢èç¹\n\nåè®®    æ¹å   ç«¯å£èå´        ä½ç¨                        ä½¿ç¨è\ntcp   å¥ç«   6443        kubernetes api æå¡å¨        ææç»ä»¶\ntcp   å¥ç«   2379-2380   etcd æå¡å¨å®¢æ·ç«¯ api           kube-apiserver, etcd\ntcp   å¥ç«   10250       kubelet api               kubelet èªèº«ãæ§å¶å¹³é¢ç»ä»¶\ntcp   å¥ç«   10251       kube-scheduler            kube-scheduler èªèº«\ntcp   å¥ç«   10252       kube-controller-manager   kube-controller-manager èªèº«\n\n\n# å·¥ä½èç¹\n\nåè®®    æ¹å   ç«¯å£èå´          ä½ç¨             ä½¿ç¨è\ntcp   å¥ç«   10250         kubelet api    kubelet èªèº«ãæ§å¶å¹³é¢ç»ä»¶\ntcp   å¥ç«   30000-32767   nodeport æå¡â    ææç»ä»¶\n\nâ  nodeport æå¡ çé»è®¤ç«¯å£èå´ã\n\nä½¿ç¨ * æ è®°çä»»æç«¯å£å·é½å¯ä»¥è¢«è¦çï¼æä»¥ä½ éè¦ä¿è¯æå®å¶çç«¯å£æ¯å¼æ¾çã\n\nè½ç¶æ§å¶å¹³é¢èç¹å·²ç»åå«äº etcd çç«¯å£ï¼ä½ ä¹å¯ä»¥ä½¿ç¨èªå®ä¹çå¤é¨ etcd éç¾¤ï¼ææ¯æå®èªå®ä¹ç«¯å£ã\n\nä½ ä½¿ç¨ç pod ç½ç»æä»¶ (è§ä¸) ä¹å¯è½éè¦æäºç¹å®ç«¯å£å¼å¯ãç±äºåä¸ª pod ç½ç»æä»¶é½ææä¸åï¼ è¯·åéä»ä»¬åèªææ¡£ä¸­å¯¹ç«¯å£çè¦æ±ã\n\n\n# å®è£docker\n\nå¨æ¯ä¸ªèç¹ä¸ï¼æ ¹æ®å®è£ docker å¼æ ä¸ºä½ ç linux åè¡çå®è£ dockerã ä½ å¯ä»¥å¨æ­¤æä»¶ä¸­æ¾å°ææ°çç»è¿éªè¯ç docker çæ¬ ä¾èµå³ç³»ã\n\nstep 1 : å®è£å¿è¦çä¸äºç³»ç»å·¥å·\n\nsudo apt-get update\nsudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common\n\n\nstep 2 : å®è£gpgè¯ä¹¦\n\nsudo curl -fssl https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n\n\nstep 3 : åå¥è½¯ä»¶æºä¿¡æ¯\n\nsudo add-apt-repository "deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"\n\n\nstep 4 : æ´æ°å¹¶å®è£v19.03.0ççdocker-ce\n\nsudo apt-get install docker-ce=5:19.03.0~3-0~ubuntu-bionic docker-ce-cli=5:19.03.0~3-0~ubuntu-bionic containerd.io -y\n\n\nstep 5 ï¼éç½® docker å®æ¤ç¨åºï¼å°¤å¶æ¯ä½¿ç¨ systemd æ¥ç®¡çå®¹å¨ç cgroupï¼éç½®éåå é\n\ncat <<eof | sudo tee /etc/docker/daemon.json\n{\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "100m"\n  },\n  "storage-driver": "overlay2",\n  "registry-mirrors": ["https://registry.cn-beijing.aliyuncs.com"]\n}\neof\n\n\nstep 6 ï¼éæ°å¯å¨ docker å¹¶å¨å¯å¨æ¶å¯ç¨\n\nsudo systemctl enable docker\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n\nstep 7 ï¼ å»ºç« docker ç¨æ·ç»\n\né»è®¤æåµä¸ï¼docker å½ä»¤ä¼ä½¿ç¨ unix socket ä¸ docker å¼æéè®¯ãèåªæ root ç¨æ·å docker ç»çç¨æ·æå¯ä»¥è®¿é® docker å¼æç unix socketãåºäºå®å¨èèï¼ä¸è¬ linux ç³»ç»ä¸ä¸ä¼ç´æ¥ä½¿ç¨ root ç¨æ·ãå æ­¤ï¼æ´å¥½å°åæ³æ¯å°éè¦ä½¿ç¨ docker çç¨æ·å å¥ docker ç¨æ·ç»ã\n\nåæ¢å°æ®éç¨æ·ï¼å°å½åç¨æ·å å¥ docker ç»ï¼\n\n$ sudo usermod -ag docker $user\n\n\néåºå½åç»ç«¯å¹¶éæ°ç»å½ï¼è¿è¡å¦ä¸æµè¯ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"å®è£ kubeadm",frontmatter:{title:"å®è£ kubeadm",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/248b3e/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/03.%E5%AE%89%E8%A3%85%20kubeadm.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/03.å®è£ kubeadm.md",key:"v-0792908f",path:"/pages/248b3e/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:39},{level:2,title:"éç½®è½¯ä»¶æº",slug:"éç½®è½¯ä»¶æº",normalizedTitle:"éç½®è½¯ä»¶æº",charIndex:97},{level:2,title:"å®è£ kubeadmï¼kubeletï¼kubectl",slug:"å®è£-kubeadm-kubelet-kubectl",normalizedTitle:"å®è£ kubeadmï¼kubeletï¼kubectl",charIndex:432},{level:2,title:"è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet",slug:"è®¾ç½®-kubelet-èªå¯å¨-å¹¶å¯å¨-kubelet",normalizedTitle:"è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet",charIndex:778}],headersStr:"æ¦è¿° éç½®è½¯ä»¶æº å®è£ kubeadmï¼kubeletï¼kubectl è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet",content:'# å®è£ kubeadm\n\næç¤º\n\næ ç¹æ®è¯´æä»¥ä¸æä½å¨ææèç¹æ§è¡\n\n\n# æ¦è¿°\n\nkubeadm æ¯ kubernetes çéç¾¤å®è£å·¥å·ï¼è½å¤å¿«éå®è£ kubernetes éç¾¤\n\n\n# éç½®è½¯ä»¶æº\n\nå½å¤æç¨æ·»å  Google æºï¼å½åå±è½äºï¼ãæä»¬æ·»å é¿éæºã\n\n1ï¼ç±äºæ¯å¨éæ åçå­å¨åºåä¸è½½ Kubernetesï¼æä»¥ï¼éè¦ç¡®ä¿è½¯ä»¶è¢«ææãè¿éï¼æä»¬éè¿æ·»å ç­¾åå¯é¥å®æææï¼\n\nsudo curl -fsSL https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add -\n\n\n2ï¼ç¶åï¼æ·»å é¿éçæºï¼å³å¯ï¼\n\nsudo apt-add-repository "deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main"\n\n\n3ï¼æ´æ°\n\nsudo apt update\n\n\n\n# å®è£ kubeadmï¼kubeletï¼kubectl\n\nå¨ææèç¹ä¸å®è£æå®çæ¬ kubeletãkubeadm å kubectl, æ³¨æ kubeadm ççæ¬å·\n\nsudo apt install kubelet=1.20.0-00 kubeadm=1.20.0-00 kubectl=1.20.0-00 -y\n\n\n * kubeadmï¼ç¨äºåå§å Kubernetes éç¾¤\n * kubectlï¼Kubernetes çå½ä»¤è¡å·¥å·ï¼ä¸»è¦ä½ç¨æ¯é¨ç½²åç®¡çåºç¨ï¼æ¥çåç§èµæºï¼åå»ºï¼å é¤åæ´æ°ç»ä»¶\n * kubeletï¼ä¸»è¦è´è´£å¯å¨ Pod åå®¹å¨\n\næ³¨æ\n\nå®è£å®æåï¼è¦ç¡®ä¿kubeadmç­ç¨åºæä»¶ççæ¬ï¼è¿å°ä¹æ¯åé¢åå§åKuberneteséç¾¤æ¶éè¦æç¡®æå®ççæ¬å·ã\n\n\n# è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet\n\nsudo systemctl enable kubelet && sudo systemctl start kubelet\n',normalizedContent:'# å®è£ kubeadm\n\næç¤º\n\næ ç¹æ®è¯´æä»¥ä¸æä½å¨ææèç¹æ§è¡\n\n\n# æ¦è¿°\n\nkubeadm æ¯ kubernetes çéç¾¤å®è£å·¥å·ï¼è½å¤å¿«éå®è£ kubernetes éç¾¤\n\n\n# éç½®è½¯ä»¶æº\n\nå½å¤æç¨æ·»å  google æºï¼å½åå±è½äºï¼ãæä»¬æ·»å é¿éæºã\n\n1ï¼ç±äºæ¯å¨éæ åçå­å¨åºåä¸è½½ kubernetesï¼æä»¥ï¼éè¦ç¡®ä¿è½¯ä»¶è¢«ææãè¿éï¼æä»¬éè¿æ·»å ç­¾åå¯é¥å®æææï¼\n\nsudo curl -fssl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add -\n\n\n2ï¼ç¶åï¼æ·»å é¿éçæºï¼å³å¯ï¼\n\nsudo apt-add-repository "deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main"\n\n\n3ï¼æ´æ°\n\nsudo apt update\n\n\n\n# å®è£ kubeadmï¼kubeletï¼kubectl\n\nå¨ææèç¹ä¸å®è£æå®çæ¬ kubeletãkubeadm å kubectl, æ³¨æ kubeadm ççæ¬å·\n\nsudo apt install kubelet=1.20.0-00 kubeadm=1.20.0-00 kubectl=1.20.0-00 -y\n\n\n * kubeadmï¼ç¨äºåå§å kubernetes éç¾¤\n * kubectlï¼kubernetes çå½ä»¤è¡å·¥å·ï¼ä¸»è¦ä½ç¨æ¯é¨ç½²åç®¡çåºç¨ï¼æ¥çåç§èµæºï¼åå»ºï¼å é¤åæ´æ°ç»ä»¶\n * kubeletï¼ä¸»è¦è´è´£å¯å¨ pod åå®¹å¨\n\næ³¨æ\n\nå®è£å®æåï¼è¦ç¡®ä¿kubeadmç­ç¨åºæä»¶ççæ¬ï¼è¿å°ä¹æ¯åé¢åå§åkuberneteséç¾¤æ¶éè¦æç¡®æå®ççæ¬å·ã\n\n\n# è®¾ç½® kubelet èªå¯å¨ï¼å¹¶å¯å¨ kubelet\n\nsudo systemctl enable kubelet && sudo systemctl start kubelet\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"éç½® kubeadm",frontmatter:{title:"éç½® kubeadm",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/f792df/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/04.%E9%85%8D%E7%BD%AE%20kubeadm.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/04.éç½® kubeadm.md",key:"v-0ba2fba8",path:"/pages/f792df/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:36},{level:2,title:"éè¿éç½®æä»¶æ¹å¼",slug:"éè¿éç½®æä»¶æ¹å¼",normalizedTitle:"éè¿éç½®æä»¶æ¹å¼",charIndex:650},{level:2,title:"æ¥çåæåéå",slug:"æ¥çåæåéå",normalizedTitle:"æ¥çåæåéå",charIndex:1920},{level:2,title:"éè¿å½ä»¤è¡æ¹å¼",slug:"éè¿å½ä»¤è¡æ¹å¼",normalizedTitle:"éè¿å½ä»¤è¡æ¹å¼",charIndex:3048}],headersStr:"æ¦è¿° éè¿éç½®æä»¶æ¹å¼ æ¥çåæåéå éè¿å½ä»¤è¡æ¹å¼",content:'# éç½® kubeadm\n\næ³¨æ\n\nä»å¨Masterèç¹ä¸æä½\n\n\n# æ¦è¿°\n\nkubeadmå·²ç»è¿å¥GAé¶æ®µï¼å¶æ§å¶é¢åå§ååå å¥èç¹æ­¥éª¤é½æ¯æå¤§éå¯å®å¶åå®¹ï¼å æ­¤kubeadmè¿æä¾äºéç½®æä»¶åè½ç¨äºå¤æå®å¶ãåæ¶ï¼kubeadmå°éç½®æä»¶ä»¥ConfigMapçå½¢å¼ä¿å­å°éç¾¤ä¸­ï¼ä¾¿äºåç»­çæ¥è¯¢ååçº§å·¥ä½ãkubeadm configå­å½ä»¤æä¾äºå¯¹è¿ä¸ç»åè½çæ¯æï¼\n\n * kubeadm config upload from-fileï¼ç±éç½®æä»¶ä¸ä¼ å°éç¾¤ä¸­çæConfigMapã\n * kubeadm config upload from-flagsï¼ç±éç½®åæ°çæConfigMapã\n * kubeadm config viewï¼æ¥çå½åéç¾¤ä¸­çéç½®å¼ã\n * kubeadm config print init-defaultsï¼è¾åºkubeadm inité»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config print join-defaultsï¼è¾åºkubeadm joiné»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config migrateï¼å¨æ°æ§çæ¬ä¹é´è¿è¡éç½®è½¬æ¢ã\n * kubeadm config images listï¼ååºæéçéååè¡¨ã\n * kubeadm config images pullï¼æåéåå°æ¬å°ã\n\nå®æ¹ææ¡£\n\nkubeadm init æå°éç½®\n\næä¸¤ç§æ¹å¼å¯ä»¥åå§åMasterèç¹ï¼åå«æ¯å½ä»¤è¡æ¹å¼åéç½®æä»¶æ¹å¼ï¼è¿éæ¨èä½¿ç¨éè¿éç½®æä»¶æ¹å¼\n\n\n# éè¿éç½®æä»¶æ¹å¼\n\nå¯¼åºéç½®æä»¶\n\nkubeadm config print init-defaults > init-config.yaml\n\n\nä¿®æ¹éç½®ä¸ºå¦ä¸åå®¹\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\nÂ \nÂ \n\nÂ \nÂ \n\n\nÂ \nÂ \n\n\n\n\napiVersion: kubeadm.k8s.io/v1beta2\nbootstrapTokens:\n  - groups:\n      - system:bootstrappers:kubeadm:default-node-token\n    token: abcdef.0123456789abcdef\n    ttl: 24h0m0s\n    usages:\n      - signing\n      - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  # ä¿®æ¹ä¸ºä¸»èç¹ IP\n  advertiseAddress: 192.168.31.101\n  bindPort: 6443\nnodeRegistration:\n  criSocket: /var/run/dockershim.sock\n  name: k8s-master\n  taints:\n    - effect: NoSchedule\n      key: node-role.kubernetes.io/master\n---\napiServer:\n  timeoutForControlPlane: 4m0s\napiVersion: kubeadm.k8s.io/v1beta2\n# æ§å¶å¹³é¢çæ¥å¥ç«¯ç¹ï¼æä»¬è¿ééæ©ééå°192.168.31.101è¿ä¸IPä¸\ncontrolPlaneEndpoint: "192.168.31.101:6443"\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns:\n  type: CoreDNS\netcd:\n  local:\n    dataDir: /var/lib/etcd\n# å½åä¸è½è®¿é® Googleï¼ä¿®æ¹ä¸ºé¿éäº\nimageRepository: registry.aliyuncs.com/google_containers\nkind: ClusterConfiguration\n# çæ¬å·è¦ä¸é¨ç½²çç®æ çæ¬ä¿æä¸è´\nkubernetesVersion: v1.20.0\nnetworking:\n  dnsDomain: cluster.local\n  # éç½®æ Calico çé»è®¤ç½æ®µ\n  podSubnet: 10.244.0.0/16\n  serviceSubnet: 10.96.0.0/12\nscheduler: {}\n\n\nå°ä¸é¢çåå®¹ä¿å­ä¸ºinit-config.yamlå¤ç¨ã\n\n\n# æ¥çåæåéå\n\næ¥çæééååè¡¨\n\nkubeadm config images list --config init-config.yaml\n\n\næåéå\n\nkubeadm config images pull --config init-config.yaml\n\n\næ¥çéå\n\nroot@k8s-master:/home/heyuqiang# docker images \nREPOSITORY                                                        TAG        IMAGE ID       CREATED         SIZE\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.20.0    10cc881966cf   5 months ago    118MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.20.0    3138b6e3d471   5 months ago    46.4MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.20.0    ca9843d3b545   5 months ago    122MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.20.0    b9fa1895dcaa   5 months ago    116MB\nregistry.aliyuncs.com/google_containers/etcd                      3.4.13-0   0369cf4303ff   8 months ago    253MB\nregistry.aliyuncs.com/google_containers/coredns                   1.7.0      bfe3a36ebd25   11 months ago   45.2MB\nregistry.aliyuncs.com/google_containers/pause                     3.2        80d28bedfe5d   15 months ago   683kB\n\n\nå¨éåä¸è½½å®æä¹åï¼å°±å¯ä»¥è¿è¡å®è£äºã\n\n\n# éè¿å½ä»¤è¡æ¹å¼\n\n# kubeadm init \n--apiserver-advertise-address=192.168.31.101\n--image-repository registry.aliyuncs.com/google_containers \n--kubernetes-version=v1.20.0 \n--service-cidr=10.96.0.0/12 \n--pod-network-cidr=10.244.0.0/16 \n--token-ttl=0\n\n\nå½ä»¤ä¸­çåéé¡¹ç®åè¯´æå¦ä¸ï¼\n\n * --apiserver-advertise-addressï¼apiserveréåç»å¶å®ç»ä»¶çIPå°åï¼ä¸è¬åºè¯¥ä¸ºMasterèç¹ç¨äºéç¾¤åé¨éä¿¡çIPå°å\n\n * --image-repositoryï¼æå®è¦ä½¿ç¨çéåä»åºï¼é»è®¤ä¸ºgcr.io\n\n * kubernetes-versionï¼kubernetesç¨åºç»ä»¶ççæ¬å·ï¼å¿é¡»è¦ä¸åé¢å®è£ççæ¬ä¸è´\n\n * --service-cidrï¼éç¾¤åé¨èæç½ç»ï¼Podç»ä¸è®¿é®å¥å£ï¼serviceçç½ç»å°åèå´ï¼å¶å¼ä¸ºCIDRæ ¼å¼çç½ç»å°åï¼é»è®¤å°åä¸º10.96.0.0/12\n\n * --pod-network-cidrï¼Podç½ç»çå°åèå´ï¼å¶å¼ä¸ºCIDRæ ¼å¼çç½ç»å°åï¼éå¸¸ï¼Flannelç½ç»æä»¶çé»è®¤ä¸º10.244.0.0/16ï¼Project Calicoæä»¶çé»è®¤å¼ä¸º192.168.0.0/16ï¼æ¬ç« ä½¿ç¨çæ¯calicoæä»¶ï¼æä»¥ä¸é¢é¨ç½²CNIç½ç»æä»¶æ¶éè¦ä¸è¿éè®¾ç½®çä¿æä¸è´ã\n\n * --token-ttlï¼å±äº«ä»¤çï¼tokenï¼çè¿ææ¶é¿ï¼é»è®¤ä¸º24å°æ¶ï¼0è¡¨ç¤ºæ°¸ä¸è¿æï¼ä¸ºé²æ­¢ä¸å®å¨å­å¨ç­åå å¯¼è´çä»¤çæ³é²å±åéç¾¤å®å¨ï¼å»ºè®®ä¸ºå¶è®¾å®è¿ææ¶é¿ãæªè®¾å®è¯¥éé¡¹æ¶ï¼å¨tokenè¿æåï¼è¥ææååéç¾¤ä¸­å å¥å¶å®èç¹ï¼å¯ä»¥ä½¿ç¨å¦ä¸å½ä»¤éæ°åå»º tokenï¼å¹¶çæèç¹å å¥å½ä»¤ã\n   \n   kubeadm token create --print-join-command\n   ',normalizedContent:'# éç½® kubeadm\n\næ³¨æ\n\nä»å¨masterèç¹ä¸æä½\n\n\n# æ¦è¿°\n\nkubeadmå·²ç»è¿å¥gaé¶æ®µï¼å¶æ§å¶é¢åå§ååå å¥èç¹æ­¥éª¤é½æ¯æå¤§éå¯å®å¶åå®¹ï¼å æ­¤kubeadmè¿æä¾äºéç½®æä»¶åè½ç¨äºå¤æå®å¶ãåæ¶ï¼kubeadmå°éç½®æä»¶ä»¥configmapçå½¢å¼ä¿å­å°éç¾¤ä¸­ï¼ä¾¿äºåç»­çæ¥è¯¢ååçº§å·¥ä½ãkubeadm configå­å½ä»¤æä¾äºå¯¹è¿ä¸ç»åè½çæ¯æï¼\n\n * kubeadm config upload from-fileï¼ç±éç½®æä»¶ä¸ä¼ å°éç¾¤ä¸­çæconfigmapã\n * kubeadm config upload from-flagsï¼ç±éç½®åæ°çæconfigmapã\n * kubeadm config viewï¼æ¥çå½åéç¾¤ä¸­çéç½®å¼ã\n * kubeadm config print init-defaultsï¼è¾åºkubeadm inité»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config print join-defaultsï¼è¾åºkubeadm joiné»è®¤åæ°æä»¶çåå®¹ã\n * kubeadm config migrateï¼å¨æ°æ§çæ¬ä¹é´è¿è¡éç½®è½¬æ¢ã\n * kubeadm config images listï¼ååºæéçéååè¡¨ã\n * kubeadm config images pullï¼æåéåå°æ¬å°ã\n\nå®æ¹ææ¡£\n\nkubeadm init æå°éç½®\n\næä¸¤ç§æ¹å¼å¯ä»¥åå§åmasterèç¹ï¼åå«æ¯å½ä»¤è¡æ¹å¼åéç½®æä»¶æ¹å¼ï¼è¿éæ¨èä½¿ç¨éè¿éç½®æä»¶æ¹å¼\n\n\n# éè¿éç½®æä»¶æ¹å¼\n\nå¯¼åºéç½®æä»¶\n\nkubeadm config print init-defaults > init-config.yaml\n\n\nä¿®æ¹éç½®ä¸ºå¦ä¸åå®¹\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\nÂ \nÂ \n\nÂ \nÂ \n\n\nÂ \nÂ \n\n\n\n\napiversion: kubeadm.k8s.io/v1beta2\nbootstraptokens:\n  - groups:\n      - system:bootstrappers:kubeadm:default-node-token\n    token: abcdef.0123456789abcdef\n    ttl: 24h0m0s\n    usages:\n      - signing\n      - authentication\nkind: initconfiguration\nlocalapiendpoint:\n  # ä¿®æ¹ä¸ºä¸»èç¹ ip\n  advertiseaddress: 192.168.31.101\n  bindport: 6443\nnoderegistration:\n  crisocket: /var/run/dockershim.sock\n  name: k8s-master\n  taints:\n    - effect: noschedule\n      key: node-role.kubernetes.io/master\n---\napiserver:\n  timeoutforcontrolplane: 4m0s\napiversion: kubeadm.k8s.io/v1beta2\n# æ§å¶å¹³é¢çæ¥å¥ç«¯ç¹ï¼æä»¬è¿ééæ©ééå°192.168.31.101è¿ä¸ipä¸\ncontrolplaneendpoint: "192.168.31.101:6443"\ncertificatesdir: /etc/kubernetes/pki\nclustername: kubernetes\ncontrollermanager: {}\ndns:\n  type: coredns\netcd:\n  local:\n    datadir: /var/lib/etcd\n# å½åä¸è½è®¿é® googleï¼ä¿®æ¹ä¸ºé¿éäº\nimagerepository: registry.aliyuncs.com/google_containers\nkind: clusterconfiguration\n# çæ¬å·è¦ä¸é¨ç½²çç®æ çæ¬ä¿æä¸è´\nkubernetesversion: v1.20.0\nnetworking:\n  dnsdomain: cluster.local\n  # éç½®æ calico çé»è®¤ç½æ®µ\n  podsubnet: 10.244.0.0/16\n  servicesubnet: 10.96.0.0/12\nscheduler: {}\n\n\nå°ä¸é¢çåå®¹ä¿å­ä¸ºinit-config.yamlå¤ç¨ã\n\n\n# æ¥çåæåéå\n\næ¥çæééååè¡¨\n\nkubeadm config images list --config init-config.yaml\n\n\næåéå\n\nkubeadm config images pull --config init-config.yaml\n\n\næ¥çéå\n\nroot@k8s-master:/home/heyuqiang# docker images \nrepository                                                        tag        image id       created         size\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.20.0    10cc881966cf   5 months ago    118mb\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.20.0    3138b6e3d471   5 months ago    46.4mb\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.20.0    ca9843d3b545   5 months ago    122mb\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.20.0    b9fa1895dcaa   5 months ago    116mb\nregistry.aliyuncs.com/google_containers/etcd                      3.4.13-0   0369cf4303ff   8 months ago    253mb\nregistry.aliyuncs.com/google_containers/coredns                   1.7.0      bfe3a36ebd25   11 months ago   45.2mb\nregistry.aliyuncs.com/google_containers/pause                     3.2        80d28bedfe5d   15 months ago   683kb\n\n\nå¨éåä¸è½½å®æä¹åï¼å°±å¯ä»¥è¿è¡å®è£äºã\n\n\n# éè¿å½ä»¤è¡æ¹å¼\n\n# kubeadm init \n--apiserver-advertise-address=192.168.31.101\n--image-repository registry.aliyuncs.com/google_containers \n--kubernetes-version=v1.20.0 \n--service-cidr=10.96.0.0/12 \n--pod-network-cidr=10.244.0.0/16 \n--token-ttl=0\n\n\nå½ä»¤ä¸­çåéé¡¹ç®åè¯´æå¦ä¸ï¼\n\n * --apiserver-advertise-addressï¼apiserveréåç»å¶å®ç»ä»¶çipå°åï¼ä¸è¬åºè¯¥ä¸ºmasterèç¹ç¨äºéç¾¤åé¨éä¿¡çipå°å\n\n * --image-repositoryï¼æå®è¦ä½¿ç¨çéåä»åºï¼é»è®¤ä¸ºgcr.io\n\n * kubernetes-versionï¼kubernetesç¨åºç»ä»¶ççæ¬å·ï¼å¿é¡»è¦ä¸åé¢å®è£ççæ¬ä¸è´\n\n * --service-cidrï¼éç¾¤åé¨èæç½ç»ï¼podç»ä¸è®¿é®å¥å£ï¼serviceçç½ç»å°åèå´ï¼å¶å¼ä¸ºcidræ ¼å¼çç½ç»å°åï¼é»è®¤å°åä¸º10.96.0.0/12\n\n * --pod-network-cidrï¼podç½ç»çå°åèå´ï¼å¶å¼ä¸ºcidræ ¼å¼çç½ç»å°åï¼éå¸¸ï¼flannelç½ç»æä»¶çé»è®¤ä¸º10.244.0.0/16ï¼project calicoæä»¶çé»è®¤å¼ä¸º192.168.0.0/16ï¼æ¬ç« ä½¿ç¨çæ¯calicoæä»¶ï¼æä»¥ä¸é¢é¨ç½²cniç½ç»æä»¶æ¶éè¦ä¸è¿éè®¾ç½®çä¿æä¸è´ã\n\n * --token-ttlï¼å±äº«ä»¤çï¼tokenï¼çè¿ææ¶é¿ï¼é»è®¤ä¸º24å°æ¶ï¼0è¡¨ç¤ºæ°¸ä¸è¿æï¼ä¸ºé²æ­¢ä¸å®å¨å­å¨ç­åå å¯¼è´çä»¤çæ³é²å±åéç¾¤å®å¨ï¼å»ºè®®ä¸ºå¶è®¾å®è¿ææ¶é¿ãæªè®¾å®è¯¥éé¡¹æ¶ï¼å¨tokenè¿æåï¼è¥ææååéç¾¤ä¸­å å¥å¶å®èç¹ï¼å¯ä»¥ä½¿ç¨å¦ä¸å½ä»¤éæ°åå»º tokenï¼å¹¶çæèç¹å å¥å½ä»¤ã\n   \n   kubeadm token create --print-join-command\n   ',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"ä½¿ç¨ kubeadm é¨ç½² Master èç¹",frontmatter:{title:"ä½¿ç¨ kubeadm é¨ç½² Master èç¹",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/91b30f/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/05.%E4%BD%BF%E7%94%A8%20kubeadm%20%E9%83%A8%E7%BD%B2%20Master%20%E8%8A%82%E7%82%B9.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/05.ä½¿ç¨ kubeadm é¨ç½² Master èç¹.md",key:"v-89e63956",path:"/pages/91b30f/",headers:[{level:2,title:"è¿è¡ kubeadm init å½ä»¤å®è£ Master",slug:"è¿è¡-kubeadm-init-å½ä»¤å®è£-master",normalizedTitle:"è¿è¡ kubeadm init å½ä»¤å®è£ master",charIndex:49},{level:2,title:"éç½® kubectl",slug:"éç½®-kubectl",normalizedTitle:"éç½® kubectl",charIndex:7970},{level:2,title:"éªè¯æ¯å¦æå",slug:"éªè¯æ¯å¦æå",normalizedTitle:"éªè¯æ¯å¦æå",charIndex:8645},{level:2,title:"kubeadm init çæ§è¡è¿ç¨",slug:"kubeadm-init-çæ§è¡è¿ç¨",normalizedTitle:"kubeadm init çæ§è¡è¿ç¨",charIndex:11618}],headersStr:"è¿è¡ kubeadm init å½ä»¤å®è£ Master éç½® kubectl éªè¯æ¯å¦æå kubeadm init çæ§è¡è¿ç¨",content:'# ä½¿ç¨ kubeadm é¨ç½² Master èç¹\n\næ³¨æ\n\nä»å¨Masterèç¹ä¸æä½\n\n\n# è¿è¡ kubeadm init å½ä»¤å®è£ Master\n\nè³æ­¤ï¼åå¤å·¥ä½å·²ç»å°±ç»ªãæ§è¡ kubeadm init å½ä»¤å³å¯ä¸é®å®è£ Kubernetes ç Masterã\n\nå¨å¼å§ä¹åéè¦æ³¨æï¼kubeadm çå®è£è¿ç¨ä¸æ¶åç½ç»æä»¶ï¼CNIï¼çåå§åï¼å æ­¤ kubeadm åæ­¥å®è£å®æçéç¾¤ä¸å·å¤ç½ç»åè½ï¼ä»»ä½ Pod åæ¬èªå¸¦ç CoreDNS é½æ æ³æ­£å¸¸å·¥ä½ãèç½ç»æä»¶çå®è£å¾å¾å¯¹ kubeadm init å½ä»¤çåæ°æä¸å®çè¦æ±ãä¾å¦ï¼å®è£ Calico æä»¶æ¶éè¦æå® --pod-network-cidr=192.168.0.0/16ã\n\næ¥ä¸æ¥ä½¿ç¨ kubeadm init å½ä»¤ï¼ä½¿ç¨åé¢åå»ºçéç½®æä»¶è¿è¡éç¾¤çåå§åï¼\n\nkubeadm init --config=init-config.yaml | tee kubeadm-init.log\n\n\nè¿½å ç tee kubeadm-init.log ç¨ä»¥è¾åºæ¥å¿ãè¿è¡åï¼æ§å¶å°å°è¾åºå¦ä¸åå®¹ï¼\n\nroot@k8s-master:/home/heyuqiang# kubeadm init --config=init-config.yaml | tee kubeadm-init.log\n[init] Using Kubernetes version: v1.20.0\n[preflight] Running pre-flight checks\n        [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.0. Latest validated version: 19.03\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action in beforehand using \'kubeadm config images pull\'\n[certs] Using certificateDir folder "/etc/kubernetes/pki"\n[certs] Generating "ca" certificate and key\n[certs] Generating "apiserver" certificate and key\n[certs] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.31.101]\n[certs] Generating "apiserver-kubelet-client" certificate and key\n[certs] Generating "front-proxy-ca" certificate and key\n[certs] Generating "front-proxy-client" certificate and key\n[certs] Generating "etcd/ca" certificate and key\n[certs] Generating "etcd/server" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [k8s-master localhost] and IPs [192.168.31.101 127.0.0.1 ::1]\n[certs] Generating "etcd/peer" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [k8s-master localhost] and IPs [192.168.31.101 127.0.0.1 ::1]\n[certs] Generating "etcd/healthcheck-client" certificate and key\n[certs] Generating "apiserver-etcd-client" certificate and key\n[certs] Generating "sa" key and public key\n[kubeconfig] Using kubeconfig folder "/etc/kubernetes"\n[kubeconfig] Writing "admin.conf" kubeconfig file\n[kubeconfig] Writing "kubelet.conf" kubeconfig file\n[kubeconfig] Writing "controller-manager.conf" kubeconfig file\n[kubeconfig] Writing "scheduler.conf" kubeconfig file\n[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] Starting the kubelet\n[control-plane] Using manifest folder "/etc/kubernetes/manifests"\n[control-plane] Creating static Pod manifest for "kube-apiserver"\n[control-plane] Creating static Pod manifest for "kube-controller-manager"\n[control-plane] Creating static Pod manifest for "kube-scheduler"\n[etcd] Creating static Pod manifest for local etcd in "/etc/kubernetes/manifests"\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 4m0s\n[apiclient] All control plane components are healthy after 24.004707 seconds\n[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace\n[kubelet] Creating a ConfigMap "kubelet-config-1.20" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] Skipping phase. Please see --upload-certs\n[mark-control-plane] Marking the node k8s-master as control-plane by adding the labels "node-role.kubernetes.io/master=\'\'" and "node-role.kubernetes.io/control-plane=\'\' (deprecated)"\n[mark-control-plane] Marking the node k8s-master as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]\n[bootstrap-token] Using token: abcdef.0123456789abcdef\n[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace\n[kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key\n[addons] Applied essential addon: CoreDNS\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nYou can now join any number of control-plane nodes by copying certificate authorities\nand service account keys on each node and then running the following as root:\n\n  kubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \\\n    --control-plane \n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n\n\nè¿éæä¸ä¸ªè­¦åï¼æææ¯è¯´Dockerççæ¬ä¸å¨Kubernetesçå¯ç¨åè¡¨ä¸­ï¼ä¸è¿ç»è¿æµè¯ä¸å½±åä½¿ç¨ï¼å¼ºè¿«çå¯ä»¥éæ©éçº§Dockerçæ¬\n\n[preflight] Running pre-flight checks\n        [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.0. Latest validated version: 19.03\n\n\nè¿éæ¥è¯´æä¸ä¸ä¸å¾è¿åçä¿¡æ¯ä¸­æä»¬éè¦æ³¨æçå°æ¹ï¼\n\n# ä¸é¢æ¯æåå®æç¬¬ä¸ä¸ªæ§å¶å¹³é¢èç¹åå§åçæç¤ºä¿¡æ¯ååç»­éè¦å®æçæ­¥éª¤\nYour Kubernetes control-plane has initialized successfully!\n\n# è¦å¼å§ä½¿ç¨ç¾¤éï¼æ¨éè¦ä»¥æ®éç¨æ·èº«ä»½è¿è¡ä»¥ä¸å½ä»¤ï¼\nTo start using your cluster, you need to run the following as a regular user:\n\n  # Setup 1 : å¤å¶Kuberneteséç¾¤ç®¡çåè®¤è¯å°Kuberneteséç¾¤æ¶ä½¿ç¨çkubeconfigéç½®æä»¶ï¼\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n# æä»¬ä¹å¯ä»¥ä¸åä¸è¿°è®¾å®ï¼èä½¿ç¨ç¯å¢åéKUBECONFIGä¸ºkubeletç­æå®é»è®¤ä½¿ç¨çkubeconfigï¼\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\n# Setup 2 : ç®¡çåéè¦ä½¿ç¨ç½ç»æä»¶ä¸ºKuberneteséç¾¤é¨ç½²Podç½ç»ï¼å·ä½éç¨çæä»¶åå³äºç®¡çåï¼\nYou should now deploy a pod network to the cluster.\nRun "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\n# Setup 3 : ä½¿ç¨rootç¨æ·èº«ä»½è¿è¡ä¸ä¸å½ä»¤ï¼å¯ä»¥éè¿è¯ä¹¦è®¤è¯æ¹å¼æ·»å æ§å¶èç¹ï¼\nYou can now join any number of control-plane nodes by copying certificate authorities\nand service account keys on each node and then running the following as root:\n\n  kubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \\\n    --control-plane \n\n# Setup 4 : ä½¿ç¨rootç¨æ·èº«ä»½è¿è¡ä¸ä¸å½ä»¤ï¼å¯ä»¥éè¿è¯ä¹¦è®¤è¯æ¹å¼æ·»å ä»»ææ°éçå·¥ä½èç¹ï¼\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n\n\næ³¨æ\n\nè®°å½ä¸åå§åç»æä¸­çkubeadm joinå½ä»¤ï¼é¨ç½²workerèç¹æ¶ä¼ç¨å°\n\næç¤º\n\nå¦æå®è£ kubernetes çæ¬åä¸è½½çéåçæ¬ä¸ç»ä¸åä¼åºç° timed out waiting for the condition éè¯¯ãä¸­éå¤±è´¥ææ¯æ³ä¿®æ¹éç½®å¯ä»¥ä½¿ç¨ kubeadm reset å½ä»¤éç½®éç½®ï¼åååå§åæä½å³å¯ã\n\n\n# éç½® kubectl\n\nkubectl æ¯ç®¡ç Kubernetes Cluster çå½ä»¤è¡å·¥å·ï¼åé¢æä»¬å·²ç»å¨ææçèç¹å®è£äº kubectlãMaster åå§åå®æåéè¦åä¸äºéç½®å·¥ä½ï¼ç¶å kubectl å°±è½ä½¿ç¨äºã ä¾ç§ kubeadm init è¾åºçæåæç¤ºï¼æ¨èç¨ Linux æ®éç¨æ·æ§è¡ kubectlã\n\nåæ¢å°æ®éç¨æ·ubuntuï¼ä¿å­éç¾¤å®å¨éç½®æä»¶å°å½åç¨æ·.kubeç®å½\n\nsu - ubuntu\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n#å¯ç¨ kubectl å½ä»¤èªå¨è¡¥å¨åè½ï¼æ³¨ééæ°ç»å½çæï¼\necho "source <(kubectl completion bash)" >> ~/.bashrc\n\n\néè¦è¿äºéç½®å½ä»¤çåå æ¯ï¼Kubernetes éç¾¤é»è®¤éè¦å å¯æ¹å¼è®¿é®ãæä»¥ï¼è¿å æ¡å½ä»¤ï¼å°±æ¯å°ååé¨ç½²çæç Kubernetes éç¾¤çå®å¨éç½®æä»¶ï¼ä¿å­å°å½åç¨æ·ç .kube ç®å½ä¸ï¼kubectl é»è®¤ä¼ä½¿ç¨è¿ä¸ªç®å½ä¸çææä¿¡æ¯è®¿é® Kubernetes éç¾¤ã å¦æä¸è¿ä¹åçè¯ï¼æä»¬æ¯æ¬¡é½éè¦éè¿ export KUBECONFIG ç¯å¢åéåè¯ kubectl è¿ä¸ªå®å¨éç½®æä»¶çä½ç½®ã éç½®å®æå ubuntu ç¨æ·å°±å¯ä»¥ä½¿ç¨ kubectl å½ä»¤ç®¡çéç¾¤äºã\n\n\n# éªè¯æ¯å¦æå\n\nç¡®è®¤åä¸ªç»ä»¶é½å¤äºhealthyç¶æã æ¥çèç¹ç¶æ\n\n[ubuntu@k8s-master ~]$ kubectl get nodes\nNAME         STATUS     ROLES    AGE   VERSION\nk8s-master   Ready   master   23m   v1.20.0\n\n\nå¯ä»¥çå°ï¼å½ååªå­å¨1ä¸ªmasterèç¹ï¼å¹¶ä¸è¿ä¸ªèç¹çç¶ææ¯ NotReadyã ä½¿ç¨ kubectl describe å½ä»¤æ¥æ¥çè¿ä¸ªèç¹ï¼Nodeï¼å¯¹è±¡çè¯¦ç»ä¿¡æ¯ãç¶æåäºä»¶ï¼Eventï¼ï¼\n\nubuntu@k8s-master:~/.kube$ kubectl describe node k8s-master\n......\nEvents:\n  Type    Reason                   Age                From        Message\n  ----    ------                   ----               ----        -------\n  Normal  NodeHasSufficientMemory  43m (x7 over 43m)  kubelet     Node k8s-master status is now: NodeHasSufficientMemory\n  Normal  NodeHasNoDiskPressure    43m (x7 over 43m)  kubelet     Node k8s-master status is now: NodeHasNoDiskPressure\n  Normal  NodeHasSufficientPID     43m (x7 over 43m)  kubelet     Node k8s-master status is now: NodeHasSufficientPID\n  Normal  Starting                 42m                kubelet     Starting kubelet.\n  Normal  NodeHasSufficientMemory  42m                kubelet     Node k8s-master status is now: NodeHasSufficientMemory\n  Normal  NodeHasNoDiskPressure    42m                kubelet     Node k8s-master status is now: NodeHasNoDiskPressure\n  Normal  NodeHasSufficientPID     42m                kubelet     Node k8s-master status is now: NodeHasSufficientPID\n  Normal  NodeAllocatableEnforced  42m                kubelet     Updated Node Allocatable limit across pods\n  Normal  Starting                 42m                kube-proxy  Starting kube-proxy.\n\n\néè¿ kubectl describe æä»¤çè¾åºï¼æä»¬å¯ä»¥çå° NodeNotReady çåå å¨äºï¼æä»¬å°æªé¨ç½²ä»»ä½ç½ç»æä»¶ï¼kube-proxy ç­ç»ä»¶è¿å¤äº starting ç¶æã\n\nå¦å¤ï¼æä»¬è¿å¯ä»¥éè¿ kubectl æ£æ¥è¿ä¸ªèç¹ä¸åä¸ªç³»ç» Pod çç¶æï¼å¶ä¸­ï¼kube-system æ¯ Kubernetes é¡¹ç®é¢ççç³»ç» Pod çå·¥ä½ç©ºé´ï¼Namespaceï¼æ³¨æå®å¹¶ä¸æ¯ Linux Namespaceï¼å®åªæ¯ Kubernetes ååä¸åå·¥ä½ç©ºé´çåä½ï¼ï¼\n\nkubectl get pod -n kube-system -o wide\n\n\nubuntu@k8s-master:~$ kubectl get pod -n kube-system -o wide\nNAME                                      READY   STATUS    RESTARTS   AGE   IP           NODE              NOMINATED NODE   READINESS GATES\ncoredns-7f89b7bc75-d4drw                  0/1     Pending   0          44m   <none>       <none>            <none>           <none>\ncoredns-7f89b7bc75-xzjfp                  0/1     Pending   0          44m   <none>       <none>            <none>           <none>\netcd-k8s-master                      1/1     Running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-apiserver-k8s-master            1/1     Running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-controller-manager-k8s-master   1/1     Running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-proxy-55q6f                          1/1     Running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-scheduler-k8s-master            1/1     Running   0          44m   192.168.31.101   k8s-master   <none>           <none>\n\n\nå¯ä»¥çå°ï¼CoreDNS ä¾èµäºç½ç»ç Pod é½å¤äº Pending ç¶æï¼å³è°åº¦å¤±è´¥ãè¿å½ç¶æ¯ç¬¦åé¢æçï¼å ä¸ºè¿ä¸ª Master èç¹çç½ç»å°æªå°±ç»ªã\n\nè³æ­¤ä¸»èç¹éç½®å®æã\n\n\n# kubeadm init çæ§è¡è¿ç¨\n\n * initï¼æå®çæ¬è¿è¡åå§åæä½\n * preflightï¼åå§ååçæ£æ¥åä¸è½½æéè¦ç Docker éåæä»¶\n * kubelet-startï¼çæ kubelet çéç½®æä»¶ var/lib/kubelet/config.yamlï¼æ²¡æè¿ä¸ªæä»¶ kubelet æ æ³å¯å¨ï¼æä»¥åå§åä¹åç kubelet å®éä¸å¯å¨ä¸ä¼æå\n * certificatesï¼çæ Kubernetes ä½¿ç¨çè¯ä¹¦ï¼å­æ¾å¨ /etc/kubernetes/pki ç®å½ä¸­\n * kubeconfigï¼çæ KubeConfig æä»¶ï¼å­æ¾å¨ /etc/kubernetes ç®å½ä¸­ï¼ç»ä»¶ä¹é´éä¿¡éè¦ä½¿ç¨å¯¹åºæä»¶\n * control-planeï¼ä½¿ç¨ /etc/kubernetes/manifest ç®å½ä¸ç YAML æä»¶ï¼å®è£ Master ç»ä»¶\n * etcdï¼ä½¿ç¨ /etc/kubernetes/manifest/etcd.yaml å®è£ Etcd æå¡\n * wait-control-planeï¼ç­å¾ control-plan é¨ç½²ç Master ç»ä»¶å¯å¨\n * apiclientï¼æ£æ¥ Master ç»ä»¶æå¡ç¶æã\n * uploadconfigï¼æ´æ°éç½®\n * kubeletï¼ä½¿ç¨ configMap éç½® kubelet\n * patchnodeï¼æ´æ° CNI ä¿¡æ¯å° Node ä¸ï¼éè¿æ³¨éçæ¹å¼è®°å½\n * mark-control-planeï¼ä¸ºå½åèç¹ææ ç­¾ï¼æäºè§è² Masterï¼åä¸å¯è°åº¦æ ç­¾ï¼è¿æ ·é»è®¤å°±ä¸ä¼ä½¿ç¨ Master èç¹æ¥è¿è¡ Pod\n * bootstrap-tokenï¼çæ token è®°å½ä¸æ¥ï¼åè¾¹ä½¿ç¨ kubeadm join å¾éç¾¤ä¸­æ·»å èç¹æ¶ä¼ç¨å°\n * addonsï¼å®è£éå ç»ä»¶ CoreDNS å kube-proxy',normalizedContent:'# ä½¿ç¨ kubeadm é¨ç½² master èç¹\n\næ³¨æ\n\nä»å¨masterèç¹ä¸æä½\n\n\n# è¿è¡ kubeadm init å½ä»¤å®è£ master\n\nè³æ­¤ï¼åå¤å·¥ä½å·²ç»å°±ç»ªãæ§è¡ kubeadm init å½ä»¤å³å¯ä¸é®å®è£ kubernetes ç masterã\n\nå¨å¼å§ä¹åéè¦æ³¨æï¼kubeadm çå®è£è¿ç¨ä¸æ¶åç½ç»æä»¶ï¼cniï¼çåå§åï¼å æ­¤ kubeadm åæ­¥å®è£å®æçéç¾¤ä¸å·å¤ç½ç»åè½ï¼ä»»ä½ pod åæ¬èªå¸¦ç coredns é½æ æ³æ­£å¸¸å·¥ä½ãèç½ç»æä»¶çå®è£å¾å¾å¯¹ kubeadm init å½ä»¤çåæ°æä¸å®çè¦æ±ãä¾å¦ï¼å®è£ calico æä»¶æ¶éè¦æå® --pod-network-cidr=192.168.0.0/16ã\n\næ¥ä¸æ¥ä½¿ç¨ kubeadm init å½ä»¤ï¼ä½¿ç¨åé¢åå»ºçéç½®æä»¶è¿è¡éç¾¤çåå§åï¼\n\nkubeadm init --config=init-config.yaml | tee kubeadm-init.log\n\n\nè¿½å ç tee kubeadm-init.log ç¨ä»¥è¾åºæ¥å¿ãè¿è¡åï¼æ§å¶å°å°è¾åºå¦ä¸åå®¹ï¼\n\nroot@k8s-master:/home/heyuqiang# kubeadm init --config=init-config.yaml | tee kubeadm-init.log\n[init] using kubernetes version: v1.20.0\n[preflight] running pre-flight checks\n        [warning systemverification]: this docker version is not on the list of validated versions: 20.10.0. latest validated version: 19.03\n[preflight] pulling images required for setting up a kubernetes cluster\n[preflight] this might take a minute or two, depending on the speed of your internet connection\n[preflight] you can also perform this action in beforehand using \'kubeadm config images pull\'\n[certs] using certificatedir folder "/etc/kubernetes/pki"\n[certs] generating "ca" certificate and key\n[certs] generating "apiserver" certificate and key\n[certs] apiserver serving cert is signed for dns names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and ips [10.96.0.1 192.168.31.101]\n[certs] generating "apiserver-kubelet-client" certificate and key\n[certs] generating "front-proxy-ca" certificate and key\n[certs] generating "front-proxy-client" certificate and key\n[certs] generating "etcd/ca" certificate and key\n[certs] generating "etcd/server" certificate and key\n[certs] etcd/server serving cert is signed for dns names [k8s-master localhost] and ips [192.168.31.101 127.0.0.1 ::1]\n[certs] generating "etcd/peer" certificate and key\n[certs] etcd/peer serving cert is signed for dns names [k8s-master localhost] and ips [192.168.31.101 127.0.0.1 ::1]\n[certs] generating "etcd/healthcheck-client" certificate and key\n[certs] generating "apiserver-etcd-client" certificate and key\n[certs] generating "sa" key and public key\n[kubeconfig] using kubeconfig folder "/etc/kubernetes"\n[kubeconfig] writing "admin.conf" kubeconfig file\n[kubeconfig] writing "kubelet.conf" kubeconfig file\n[kubeconfig] writing "controller-manager.conf" kubeconfig file\n[kubeconfig] writing "scheduler.conf" kubeconfig file\n[kubelet-start] writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] starting the kubelet\n[control-plane] using manifest folder "/etc/kubernetes/manifests"\n[control-plane] creating static pod manifest for "kube-apiserver"\n[control-plane] creating static pod manifest for "kube-controller-manager"\n[control-plane] creating static pod manifest for "kube-scheduler"\n[etcd] creating static pod manifest for local etcd in "/etc/kubernetes/manifests"\n[wait-control-plane] waiting for the kubelet to boot up the control plane as static pods from directory "/etc/kubernetes/manifests". this can take up to 4m0s\n[apiclient] all control plane components are healthy after 24.004707 seconds\n[upload-config] storing the configuration used in configmap "kubeadm-config" in the "kube-system" namespace\n[kubelet] creating a configmap "kubelet-config-1.20" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] skipping phase. please see --upload-certs\n[mark-control-plane] marking the node k8s-master as control-plane by adding the labels "node-role.kubernetes.io/master=\'\'" and "node-role.kubernetes.io/control-plane=\'\' (deprecated)"\n[mark-control-plane] marking the node k8s-master as control-plane by adding the taints [node-role.kubernetes.io/master:noschedule]\n[bootstrap-token] using token: abcdef.0123456789abcdef\n[bootstrap-token] configuring bootstrap tokens, cluster-info configmap, rbac roles\n[bootstrap-token] configured rbac rules to allow node bootstrap tokens to get nodes\n[bootstrap-token] configured rbac rules to allow node bootstrap tokens to post csrs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured rbac rules to allow the csrapprover controller automatically approve csrs from a node bootstrap token\n[bootstrap-token] configured rbac rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] creating the "cluster-info" configmap in the "kube-public" namespace\n[kubelet-finalize] updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key\n[addons] applied essential addon: coredns\n[addons] applied essential addon: kube-proxy\n\nyour kubernetes control-plane has initialized successfully!\n\nto start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $home/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $home/.kube/config\n  sudo chown $(id -u):$(id -g) $home/.kube/config\n\nalternatively, if you are the root user, you can run:\n\n  export kubeconfig=/etc/kubernetes/admin.conf\n\nyou should now deploy a pod network to the cluster.\nrun "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nyou can now join any number of control-plane nodes by copying certificate authorities\nand service account keys on each node and then running the following as root:\n\n  kubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \\\n    --control-plane \n\nthen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n\n\nè¿éæä¸ä¸ªè­¦åï¼æææ¯è¯´dockerççæ¬ä¸å¨kubernetesçå¯ç¨åè¡¨ä¸­ï¼ä¸è¿ç»è¿æµè¯ä¸å½±åä½¿ç¨ï¼å¼ºè¿«çå¯ä»¥éæ©éçº§dockerçæ¬\n\n[preflight] running pre-flight checks\n        [warning systemverification]: this docker version is not on the list of validated versions: 20.10.0. latest validated version: 19.03\n\n\nè¿éæ¥è¯´æä¸ä¸ä¸å¾è¿åçä¿¡æ¯ä¸­æä»¬éè¦æ³¨æçå°æ¹ï¼\n\n# ä¸é¢æ¯æåå®æç¬¬ä¸ä¸ªæ§å¶å¹³é¢èç¹åå§åçæç¤ºä¿¡æ¯ååç»­éè¦å®æçæ­¥éª¤\nyour kubernetes control-plane has initialized successfully!\n\n# è¦å¼å§ä½¿ç¨ç¾¤éï¼æ¨éè¦ä»¥æ®éç¨æ·èº«ä»½è¿è¡ä»¥ä¸å½ä»¤ï¼\nto start using your cluster, you need to run the following as a regular user:\n\n  # setup 1 : å¤å¶kuberneteséç¾¤ç®¡çåè®¤è¯å°kuberneteséç¾¤æ¶ä½¿ç¨çkubeconfigéç½®æä»¶ï¼\n  mkdir -p $home/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $home/.kube/config\n  sudo chown $(id -u):$(id -g) $home/.kube/config\n\n# æä»¬ä¹å¯ä»¥ä¸åä¸è¿°è®¾å®ï¼èä½¿ç¨ç¯å¢åékubeconfigä¸ºkubeletç­æå®é»è®¤ä½¿ç¨çkubeconfigï¼\nalternatively, if you are the root user, you can run:\n\n  export kubeconfig=/etc/kubernetes/admin.conf\n\n# setup 2 : ç®¡çåéè¦ä½¿ç¨ç½ç»æä»¶ä¸ºkuberneteséç¾¤é¨ç½²podç½ç»ï¼å·ä½éç¨çæä»¶åå³äºç®¡çåï¼\nyou should now deploy a pod network to the cluster.\nrun "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\n# setup 3 : ä½¿ç¨rootç¨æ·èº«ä»½è¿è¡ä¸ä¸å½ä»¤ï¼å¯ä»¥éè¿è¯ä¹¦è®¤è¯æ¹å¼æ·»å æ§å¶èç¹ï¼\nyou can now join any number of control-plane nodes by copying certificate authorities\nand service account keys on each node and then running the following as root:\n\n  kubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \\\n    --control-plane \n\n# setup 4 : ä½¿ç¨rootç¨æ·èº«ä»½è¿è¡ä¸ä¸å½ä»¤ï¼å¯ä»¥éè¿è¯ä¹¦è®¤è¯æ¹å¼æ·»å ä»»ææ°éçå·¥ä½èç¹ï¼\nthen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n\n\næ³¨æ\n\nè®°å½ä¸åå§åç»æä¸­çkubeadm joinå½ä»¤ï¼é¨ç½²workerèç¹æ¶ä¼ç¨å°\n\næç¤º\n\nå¦æå®è£ kubernetes çæ¬åä¸è½½çéåçæ¬ä¸ç»ä¸åä¼åºç° timed out waiting for the condition éè¯¯ãä¸­éå¤±è´¥ææ¯æ³ä¿®æ¹éç½®å¯ä»¥ä½¿ç¨ kubeadm reset å½ä»¤éç½®éç½®ï¼åååå§åæä½å³å¯ã\n\n\n# éç½® kubectl\n\nkubectl æ¯ç®¡ç kubernetes cluster çå½ä»¤è¡å·¥å·ï¼åé¢æä»¬å·²ç»å¨ææçèç¹å®è£äº kubectlãmaster åå§åå®æåéè¦åä¸äºéç½®å·¥ä½ï¼ç¶å kubectl å°±è½ä½¿ç¨äºã ä¾ç§ kubeadm init è¾åºçæåæç¤ºï¼æ¨èç¨ linux æ®éç¨æ·æ§è¡ kubectlã\n\nåæ¢å°æ®éç¨æ·ubuntuï¼ä¿å­éç¾¤å®å¨éç½®æä»¶å°å½åç¨æ·.kubeç®å½\n\nsu - ubuntu\nmkdir -p $home/.kube\nsudo cp -i /etc/kubernetes/admin.conf $home/.kube/config\nsudo chown $(id -u):$(id -g) $home/.kube/config\n\n#å¯ç¨ kubectl å½ä»¤èªå¨è¡¥å¨åè½ï¼æ³¨ééæ°ç»å½çæï¼\necho "source <(kubectl completion bash)" >> ~/.bashrc\n\n\néè¦è¿äºéç½®å½ä»¤çåå æ¯ï¼kubernetes éç¾¤é»è®¤éè¦å å¯æ¹å¼è®¿é®ãæä»¥ï¼è¿å æ¡å½ä»¤ï¼å°±æ¯å°ååé¨ç½²çæç kubernetes éç¾¤çå®å¨éç½®æä»¶ï¼ä¿å­å°å½åç¨æ·ç .kube ç®å½ä¸ï¼kubectl é»è®¤ä¼ä½¿ç¨è¿ä¸ªç®å½ä¸çææä¿¡æ¯è®¿é® kubernetes éç¾¤ã å¦æä¸è¿ä¹åçè¯ï¼æä»¬æ¯æ¬¡é½éè¦éè¿ export kubeconfig ç¯å¢åéåè¯ kubectl è¿ä¸ªå®å¨éç½®æä»¶çä½ç½®ã éç½®å®æå ubuntu ç¨æ·å°±å¯ä»¥ä½¿ç¨ kubectl å½ä»¤ç®¡çéç¾¤äºã\n\n\n# éªè¯æ¯å¦æå\n\nç¡®è®¤åä¸ªç»ä»¶é½å¤äºhealthyç¶æã æ¥çèç¹ç¶æ\n\n[ubuntu@k8s-master ~]$ kubectl get nodes\nname         status     roles    age   version\nk8s-master   ready   master   23m   v1.20.0\n\n\nå¯ä»¥çå°ï¼å½ååªå­å¨1ä¸ªmasterèç¹ï¼å¹¶ä¸è¿ä¸ªèç¹çç¶ææ¯ notreadyã ä½¿ç¨ kubectl describe å½ä»¤æ¥æ¥çè¿ä¸ªèç¹ï¼nodeï¼å¯¹è±¡çè¯¦ç»ä¿¡æ¯ãç¶æåäºä»¶ï¼eventï¼ï¼\n\nubuntu@k8s-master:~/.kube$ kubectl describe node k8s-master\n......\nevents:\n  type    reason                   age                from        message\n  ----    ------                   ----               ----        -------\n  normal  nodehassufficientmemory  43m (x7 over 43m)  kubelet     node k8s-master status is now: nodehassufficientmemory\n  normal  nodehasnodiskpressure    43m (x7 over 43m)  kubelet     node k8s-master status is now: nodehasnodiskpressure\n  normal  nodehassufficientpid     43m (x7 over 43m)  kubelet     node k8s-master status is now: nodehassufficientpid\n  normal  starting                 42m                kubelet     starting kubelet.\n  normal  nodehassufficientmemory  42m                kubelet     node k8s-master status is now: nodehassufficientmemory\n  normal  nodehasnodiskpressure    42m                kubelet     node k8s-master status is now: nodehasnodiskpressure\n  normal  nodehassufficientpid     42m                kubelet     node k8s-master status is now: nodehassufficientpid\n  normal  nodeallocatableenforced  42m                kubelet     updated node allocatable limit across pods\n  normal  starting                 42m                kube-proxy  starting kube-proxy.\n\n\néè¿ kubectl describe æä»¤çè¾åºï¼æä»¬å¯ä»¥çå° nodenotready çåå å¨äºï¼æä»¬å°æªé¨ç½²ä»»ä½ç½ç»æä»¶ï¼kube-proxy ç­ç»ä»¶è¿å¤äº starting ç¶æã\n\nå¦å¤ï¼æä»¬è¿å¯ä»¥éè¿ kubectl æ£æ¥è¿ä¸ªèç¹ä¸åä¸ªç³»ç» pod çç¶æï¼å¶ä¸­ï¼kube-system æ¯ kubernetes é¡¹ç®é¢ççç³»ç» pod çå·¥ä½ç©ºé´ï¼namespaceï¼æ³¨æå®å¹¶ä¸æ¯ linux namespaceï¼å®åªæ¯ kubernetes ååä¸åå·¥ä½ç©ºé´çåä½ï¼ï¼\n\nkubectl get pod -n kube-system -o wide\n\n\nubuntu@k8s-master:~$ kubectl get pod -n kube-system -o wide\nname                                      ready   status    restarts   age   ip           node              nominated node   readiness gates\ncoredns-7f89b7bc75-d4drw                  0/1     pending   0          44m   <none>       <none>            <none>           <none>\ncoredns-7f89b7bc75-xzjfp                  0/1     pending   0          44m   <none>       <none>            <none>           <none>\netcd-k8s-master                      1/1     running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-apiserver-k8s-master            1/1     running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-controller-manager-k8s-master   1/1     running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-proxy-55q6f                          1/1     running   0          44m   192.168.31.101   k8s-master   <none>           <none>\nkube-scheduler-k8s-master            1/1     running   0          44m   192.168.31.101   k8s-master   <none>           <none>\n\n\nå¯ä»¥çå°ï¼coredns ä¾èµäºç½ç»ç pod é½å¤äº pending ç¶æï¼å³è°åº¦å¤±è´¥ãè¿å½ç¶æ¯ç¬¦åé¢æçï¼å ä¸ºè¿ä¸ª master èç¹çç½ç»å°æªå°±ç»ªã\n\nè³æ­¤ä¸»èç¹éç½®å®æã\n\n\n# kubeadm init çæ§è¡è¿ç¨\n\n * initï¼æå®çæ¬è¿è¡åå§åæä½\n * preflightï¼åå§ååçæ£æ¥åä¸è½½æéè¦ç docker éåæä»¶\n * kubelet-startï¼çæ kubelet çéç½®æä»¶ var/lib/kubelet/config.yamlï¼æ²¡æè¿ä¸ªæä»¶ kubelet æ æ³å¯å¨ï¼æä»¥åå§åä¹åç kubelet å®éä¸å¯å¨ä¸ä¼æå\n * certificatesï¼çæ kubernetes ä½¿ç¨çè¯ä¹¦ï¼å­æ¾å¨ /etc/kubernetes/pki ç®å½ä¸­\n * kubeconfigï¼çæ kubeconfig æä»¶ï¼å­æ¾å¨ /etc/kubernetes ç®å½ä¸­ï¼ç»ä»¶ä¹é´éä¿¡éè¦ä½¿ç¨å¯¹åºæä»¶\n * control-planeï¼ä½¿ç¨ /etc/kubernetes/manifest ç®å½ä¸ç yaml æä»¶ï¼å®è£ master ç»ä»¶\n * etcdï¼ä½¿ç¨ /etc/kubernetes/manifest/etcd.yaml å®è£ etcd æå¡\n * wait-control-planeï¼ç­å¾ control-plan é¨ç½²ç master ç»ä»¶å¯å¨\n * apiclientï¼æ£æ¥ master ç»ä»¶æå¡ç¶æã\n * uploadconfigï¼æ´æ°éç½®\n * kubeletï¼ä½¿ç¨ configmap éç½® kubelet\n * patchnodeï¼æ´æ° cni ä¿¡æ¯å° node ä¸ï¼éè¿æ³¨éçæ¹å¼è®°å½\n * mark-control-planeï¼ä¸ºå½åèç¹ææ ç­¾ï¼æäºè§è² masterï¼åä¸å¯è°åº¦æ ç­¾ï¼è¿æ ·é»è®¤å°±ä¸ä¼ä½¿ç¨ master èç¹æ¥è¿è¡ pod\n * bootstrap-tokenï¼çæ token è®°å½ä¸æ¥ï¼åè¾¹ä½¿ç¨ kubeadm join å¾éç¾¤ä¸­æ·»å èç¹æ¶ä¼ç¨å°\n * addonsï¼å®è£éå ç»ä»¶ coredns å kube-proxy',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"å®è£ç½ç»æä»¶",frontmatter:{title:"å®è£ç½ç»æä»¶",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/1d4070/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/06.%E5%AE%89%E8%A3%85%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/06.å®è£ç½ç»æä»¶.md",key:"v-080f0c7c",path:"/pages/1d4070/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:43},{level:2,title:"ä»ä¹æ¯ CNI",slug:"ä»ä¹æ¯-cni",normalizedTitle:"ä»ä¹æ¯ cni",charIndex:295},{level:2,title:"Kubernetes ä¸­ç CNI æä»¶",slug:"kubernetes-ä¸­ç-cni-æä»¶",normalizedTitle:"kubernetes ä¸­ç cni æä»¶",charIndex:471},{level:2,title:"ä»ä¹æ¯ Calico",slug:"ä»ä¹æ¯-calico",normalizedTitle:"ä»ä¹æ¯ calico",charIndex:938},{level:2,title:"å®è£ç½ç»æä»¶ Calico",slug:"å®è£ç½ç»æä»¶-calico",normalizedTitle:"å®è£ç½ç»æä»¶ calico",charIndex:1148},{level:2,title:"ä¸è½½éç½®æä»¶",slug:"ä¸è½½éç½®æä»¶",normalizedTitle:"ä¸è½½éç½®æä»¶",charIndex:1288},{level:2,title:"ä¿®æ¹éç½®",slug:"ä¿®æ¹éç½®",normalizedTitle:"ä¿®æ¹éç½®",charIndex:1359},{level:2,title:"åºç¨éç½®æ¸åå¹¶é¨ç½²ç½ç»æä»¶",slug:"åºç¨éç½®æ¸åå¹¶é¨ç½²ç½ç»æä»¶",normalizedTitle:"åºç¨éç½®æ¸åå¹¶é¨ç½²ç½ç»æä»¶",charIndex:1689},{level:2,title:"ç¡®è®¤å®è£æ¯å¦æå",slug:"ç¡®è®¤å®è£æ¯å¦æå",normalizedTitle:"ç¡®è®¤å®è£æ¯å¦æå",charIndex:3722},{level:2,title:"è§£å³ ImagePullBackOff",slug:"è§£å³-imagepullbackoff",normalizedTitle:"è§£å³ imagepullbackoff",charIndex:4233}],headersStr:"æ¦è¿° ä»ä¹æ¯ CNI Kubernetes ä¸­ç CNI æä»¶ ä»ä¹æ¯ Calico å®è£ç½ç»æä»¶ Calico ä¸è½½éç½®æä»¶ ä¿®æ¹éç½® åºç¨éç½®æ¸åå¹¶é¨ç½²ç½ç»æä»¶ ç¡®è®¤å®è£æ¯å¦æå è§£å³ ImagePullBackOff",content:'# å®è£ç½ç»æä»¶\n\næ³¨æ\n\nä» Master èç¹å®è£å³å¯ï¼å·¥ä½èç¹æ éå®è£\n\n\n# æ¦è¿°\n\nå®¹å¨ç½ç»æ¯å®¹å¨éæ©è¿æ¥å°å¶ä»å®¹å¨ãä¸»æºåå¤é¨ç½ç»çæºå¶ãå®¹å¨ç runtime æä¾äºåç§ç½ç»æ¨¡å¼ï¼æ¯ç§æ¨¡å¼é½ä¼äº§çä¸åçä½éªãä¾å¦ï¼Docker é»è®¤æåµä¸å¯ä»¥ä¸ºå®¹å¨éç½®ä»¥ä¸ç½ç»ï¼\n\n * noneï¼ å°å®¹å¨æ·»å å°ä¸ä¸ªå®¹å¨ä¸é¨çç½ç»å æ ä¸­ï¼æ²¡æå¯¹å¤è¿æ¥ã\n * hostï¼ å°å®¹å¨æ·»å å°ä¸»æºçç½ç»å æ ä¸­ï¼æ²¡æéç¦»ã\n * default bridgeï¼ é»è®¤ç½ç»æ¨¡å¼ãæ¯ä¸ªå®¹å¨å¯ä»¥éè¿ IP å°åç¸äºè¿æ¥ã\n * èªå®ä¹ç½æ¡¥ï¼ ç¨æ·å®ä¹çç½æ¡¥ï¼å·ææ´å¤ççµæ´»æ§ãéç¦»æ§åå¶ä»ä¾¿å©åè½ã\n\n\n# ä»ä¹æ¯ CNI\n\nCNI(Container Network Interface) æ¯ä¸ä¸ªæ åçï¼éç¨çæ¥å£ãå¨å®¹å¨å¹³å°ï¼Dockerï¼Kubernetesï¼Mesos å®¹å¨ç½ç»è§£å³æ¹æ¡ flannelï¼calicoï¼weaveãåªè¦æä¾ä¸ä¸ªæ åçæ¥å£ï¼å°±è½ä¸ºåæ ·æ»¡è¶³è¯¥åè®®çææå®¹å¨å¹³å°æä¾ç½ç»åè½ï¼è CNI æ­£æ¯è¿æ ·çä¸ä¸ªæ åæ¥å£åè®®ã\n\n\n# Kubernetes ä¸­ç CNI æä»¶\n\nCNI çåè¡·æ¯åå»ºä¸ä¸ªæ¡æ¶ï¼ç¨äºå¨éç½®æéæ¯å®¹å¨æ¶å¨æéç½®éå½çç½ç»éç½®åèµæºãæä»¶è´è´£ä¸ºæ¥å£éç½®åç®¡ç IP å°åï¼å¹¶ä¸éå¸¸æä¾ä¸ IP ç®¡çãæ¯ä¸ªå®¹å¨ç IP åéãä»¥åå¤ä¸»æºè¿æ¥ç¸å³çåè½ãå®¹å¨è¿è¡æ¶ä¼è°ç¨ç½ç»æä»¶ï¼ä»èå¨å®¹å¨å¯å¨æ¶åé IP å°åå¹¶éç½®ç½ç»ï¼å¹¶å¨å é¤å®¹å¨æ¶åæ¬¡è°ç¨å®ä»¥æ¸çè¿äºèµæºã\n\nè¿è¡æ¶æåè°å¨å³å®äºå®¹å¨åºè¯¥å å¥åªä¸ªç½ç»ä»¥åå®éè¦è°ç¨åªä¸ªæä»¶ãç¶åï¼æä»¶ä¼å°æ¥å£æ·»å å°å®¹å¨ç½ç»å½åç©ºé´ä¸­ï¼ä½ä¸ºä¸ä¸ª veth å¯¹çä¸ä¾§ãæ¥çï¼å®ä¼å¨ä¸»æºä¸è¿è¡æ´æ¹ï¼åæ¬å° veth çå¶ä»é¨åè¿æ¥å°ç½æ¡¥ãåä¹åï¼å®ä¼éè¿è°ç¨åç¬ç IPAMï¼IPå°åç®¡çï¼æä»¶æ¥åé IP å°åå¹¶è®¾ç½®è·¯ç±ã\n\nå¨ Kubernetes ä¸­ï¼kubelet å¯ä»¥å¨éå½çæ¶é´è°ç¨å®æ¾å°çæä»¶ï¼ä¸ºéè¿ kubelet å¯å¨ç podè¿è¡èªå¨çç½ç»éç½®ã\n\nKubernetes ä¸­å¯éç CNI æä»¶å¦ä¸ï¼\n\n * Flannel\n * Calico\n * Canal\n * Weave\n\n\n# ä»ä¹æ¯ Calico\n\nCalico ä¸ºå®¹å¨åèææºæä¾äºå®å¨çç½ç»è¿æ¥è§£å³æ¹æ¡ï¼å¹¶ç»è¿äºå¤§è§æ¨¡çäº§éªè¯ï¼å¨å¬æäºåè·¨æ°åä¸ªéç¾¤èç¹ä¸­ï¼ï¼å¯ä¸ Kubernetesï¼OpenShiftï¼Dockerï¼Mesosï¼DC / OS å OpenStack éæã\n\nCalico è¿æä¾ç½ç»å®å¨è§åçå¨æå®æ½ãä½¿ç¨ Calico çç®åç­ç¥è¯­è¨ï¼æ¨å¯ä»¥å®ç°å¯¹å®¹å¨ï¼èææºå·¥ä½è´è½½åè£¸æºä¸»æºç«¯ç¹ä¹é´éä¿¡çç»ç²åº¦æ§å¶ã\n\n\n# å®è£ç½ç»æä»¶ Calico\n\næç¤º\n\næªæ­¢å°æç« åè¡¨æ¥æ 2021 å¹´ 05 æ 18 æ¥ï¼Calico å®æ¹çæ¬ä¸º v3.18.3\n\nåèå®æ¹ææ¡£å®è£ï¼https://docs.projectcalico.org/getting-started/kubernetes/\n\n\n# ä¸è½½éç½®æä»¶\n\nwget https://docs.projectcalico.org/manifests/calico.yaml\n\n\n\n# ä¿®æ¹éç½®\n\nä¸è½½å®åè¿éè¦ä¿®æ¹éé¢å®ä¹Podç½ç»ï¼CALICO_IPV4POOL_CIDRï¼ï¼ä¸åé¢kubeadm initå½ä»¤ä¸­ä½¿ç¨ç--pod-network-cidréé¡¹æå®çä¸æ ·ï¼å¤§æ¦å¨calico.yamlæä»¶çç¬¬3684è¡å·¦å³ï¼ä¸åçæ¬ä½ç½®å¯è½ä¸ä¸æ ·ï¼\n\n# æ¾å°å¦ä¸åå®¹\n            # - name: CALICO_IPV4POOL_CIDR\n            #   value: "192.168.0.0/16"\n# å»ææ³¨éå¹¶æ¿æ¢ä¸º          \n            - name: CALICO_IPV4POOL_CIDR\n              value: "10.244.0.0/16"\n\n\n\n# åºç¨éç½®æ¸åå¹¶é¨ç½²ç½ç»æä»¶\n\nå¨ Master èç¹æä½å³å¯\n\nkubectl apply -f calico.yaml\n\n\nå®è£æ¶æ¾ç¤ºå¦ä¸è¾åº\n\nubuntu@k8s-master:~$ kubectl apply -f calico.yaml\nconfigmap/calico-config created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\nclusterrole.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrole.rbac.authorization.k8s.io/calico-node created\nclusterrolebinding.rbac.authorization.k8s.io/calico-node created\ndaemonset.apps/calico-node created\nserviceaccount/calico-node created\ndeployment.apps/calico-kube-controllers created\nserviceaccount/calico-kube-controllers created\npoddisruptionbudget.policy/calico-kube-controllers created\n\n\n\n# ç¡®è®¤å®è£æ¯å¦æå\n\nkubectl get pod -n kube-system -l k8s-app=calico-node\n\n# éè¦ç­å¾ææç¶æä¸º Runningï¼æ³¨ææ¶é´å¯è½è¾ä¹ï¼3 - 5 åéçæ ·å­\nNAME                READY   STATUS    RESTARTS   AGE\ncalico-node-r52c6   1/1     Running   0          114s\n\n\nåæ¬¡æ¥çmasterèç¹ç¶æå·²ç»ä¸ºreadyç¶æï¼\n\nkubectl get nodes\n\n# æ§å¶å°è¾åº\nNAME              STATUS   ROLES                  AGE   VERSION\nk8s-master   Ready    control-plane,master   16h   v1.20.0\n\n\nè³æ­¤ï¼Kubernetes ç Master èç¹å°±é¨ç½²å®æäºãå¦æä½ åªéè¦ä¸ä¸ªåèç¹ç Kubernetesï¼ç°å¨ä½ å°±å¯ä»¥ä½¿ç¨äºãä¸è¿ï¼å¨é»è®¤æåµä¸ï¼Kubernetes ç Master èç¹æ¯ä¸è½è¿è¡ç¨æ· Pod çã\n\n\n# è§£å³ ImagePullBackOff\n\nå¨ä½¿ç¨ watch kubectl get pods --all-namespaces å½ä»¤è§å¯ Pods ç¶ææ¶å¦æåºç° ImagePullBackOff æ æ³ Running çæåµï¼è¯·å°è¯ä½¿ç¨å¦ä¸æ­¥éª¤å¤çï¼\n\n * Master ä¸­å é¤ Nodesï¼kubectl delete nodes <NAME>\n * Slave ä¸­éç½®éç½®ï¼kubeadm reset\n * Slave éå¯è®¡ç®æºï¼reboot\n * Slave éæ°å å¥éç¾¤ï¼kubeadm join',normalizedContent:'# å®è£ç½ç»æä»¶\n\næ³¨æ\n\nä» master èç¹å®è£å³å¯ï¼å·¥ä½èç¹æ éå®è£\n\n\n# æ¦è¿°\n\nå®¹å¨ç½ç»æ¯å®¹å¨éæ©è¿æ¥å°å¶ä»å®¹å¨ãä¸»æºåå¤é¨ç½ç»çæºå¶ãå®¹å¨ç runtime æä¾äºåç§ç½ç»æ¨¡å¼ï¼æ¯ç§æ¨¡å¼é½ä¼äº§çä¸åçä½éªãä¾å¦ï¼docker é»è®¤æåµä¸å¯ä»¥ä¸ºå®¹å¨éç½®ä»¥ä¸ç½ç»ï¼\n\n * noneï¼ å°å®¹å¨æ·»å å°ä¸ä¸ªå®¹å¨ä¸é¨çç½ç»å æ ä¸­ï¼æ²¡æå¯¹å¤è¿æ¥ã\n * hostï¼ å°å®¹å¨æ·»å å°ä¸»æºçç½ç»å æ ä¸­ï¼æ²¡æéç¦»ã\n * default bridgeï¼ é»è®¤ç½ç»æ¨¡å¼ãæ¯ä¸ªå®¹å¨å¯ä»¥éè¿ ip å°åç¸äºè¿æ¥ã\n * èªå®ä¹ç½æ¡¥ï¼ ç¨æ·å®ä¹çç½æ¡¥ï¼å·ææ´å¤ççµæ´»æ§ãéç¦»æ§åå¶ä»ä¾¿å©åè½ã\n\n\n# ä»ä¹æ¯ cni\n\ncni(container network interface) æ¯ä¸ä¸ªæ åçï¼éç¨çæ¥å£ãå¨å®¹å¨å¹³å°ï¼dockerï¼kubernetesï¼mesos å®¹å¨ç½ç»è§£å³æ¹æ¡ flannelï¼calicoï¼weaveãåªè¦æä¾ä¸ä¸ªæ åçæ¥å£ï¼å°±è½ä¸ºåæ ·æ»¡è¶³è¯¥åè®®çææå®¹å¨å¹³å°æä¾ç½ç»åè½ï¼è cni æ­£æ¯è¿æ ·çä¸ä¸ªæ åæ¥å£åè®®ã\n\n\n# kubernetes ä¸­ç cni æä»¶\n\ncni çåè¡·æ¯åå»ºä¸ä¸ªæ¡æ¶ï¼ç¨äºå¨éç½®æéæ¯å®¹å¨æ¶å¨æéç½®éå½çç½ç»éç½®åèµæºãæä»¶è´è´£ä¸ºæ¥å£éç½®åç®¡ç ip å°åï¼å¹¶ä¸éå¸¸æä¾ä¸ ip ç®¡çãæ¯ä¸ªå®¹å¨ç ip åéãä»¥åå¤ä¸»æºè¿æ¥ç¸å³çåè½ãå®¹å¨è¿è¡æ¶ä¼è°ç¨ç½ç»æä»¶ï¼ä»èå¨å®¹å¨å¯å¨æ¶åé ip å°åå¹¶éç½®ç½ç»ï¼å¹¶å¨å é¤å®¹å¨æ¶åæ¬¡è°ç¨å®ä»¥æ¸çè¿äºèµæºã\n\nè¿è¡æ¶æåè°å¨å³å®äºå®¹å¨åºè¯¥å å¥åªä¸ªç½ç»ä»¥åå®éè¦è°ç¨åªä¸ªæä»¶ãç¶åï¼æä»¶ä¼å°æ¥å£æ·»å å°å®¹å¨ç½ç»å½åç©ºé´ä¸­ï¼ä½ä¸ºä¸ä¸ª veth å¯¹çä¸ä¾§ãæ¥çï¼å®ä¼å¨ä¸»æºä¸è¿è¡æ´æ¹ï¼åæ¬å° veth çå¶ä»é¨åè¿æ¥å°ç½æ¡¥ãåä¹åï¼å®ä¼éè¿è°ç¨åç¬ç ipamï¼ipå°åç®¡çï¼æä»¶æ¥åé ip å°åå¹¶è®¾ç½®è·¯ç±ã\n\nå¨ kubernetes ä¸­ï¼kubelet å¯ä»¥å¨éå½çæ¶é´è°ç¨å®æ¾å°çæä»¶ï¼ä¸ºéè¿ kubelet å¯å¨ç podè¿è¡èªå¨çç½ç»éç½®ã\n\nkubernetes ä¸­å¯éç cni æä»¶å¦ä¸ï¼\n\n * flannel\n * calico\n * canal\n * weave\n\n\n# ä»ä¹æ¯ calico\n\ncalico ä¸ºå®¹å¨åèææºæä¾äºå®å¨çç½ç»è¿æ¥è§£å³æ¹æ¡ï¼å¹¶ç»è¿äºå¤§è§æ¨¡çäº§éªè¯ï¼å¨å¬æäºåè·¨æ°åä¸ªéç¾¤èç¹ä¸­ï¼ï¼å¯ä¸ kubernetesï¼openshiftï¼dockerï¼mesosï¼dc / os å openstack éæã\n\ncalico è¿æä¾ç½ç»å®å¨è§åçå¨æå®æ½ãä½¿ç¨ calico çç®åç­ç¥è¯­è¨ï¼æ¨å¯ä»¥å®ç°å¯¹å®¹å¨ï¼èææºå·¥ä½è´è½½åè£¸æºä¸»æºç«¯ç¹ä¹é´éä¿¡çç»ç²åº¦æ§å¶ã\n\n\n# å®è£ç½ç»æä»¶ calico\n\næç¤º\n\næªæ­¢å°æç« åè¡¨æ¥æ 2021 å¹´ 05 æ 18 æ¥ï¼calico å®æ¹çæ¬ä¸º v3.18.3\n\nåèå®æ¹ææ¡£å®è£ï¼https://docs.projectcalico.org/getting-started/kubernetes/\n\n\n# ä¸è½½éç½®æä»¶\n\nwget https://docs.projectcalico.org/manifests/calico.yaml\n\n\n\n# ä¿®æ¹éç½®\n\nä¸è½½å®åè¿éè¦ä¿®æ¹éé¢å®ä¹podç½ç»ï¼calico_ipv4pool_cidrï¼ï¼ä¸åé¢kubeadm initå½ä»¤ä¸­ä½¿ç¨ç--pod-network-cidréé¡¹æå®çä¸æ ·ï¼å¤§æ¦å¨calico.yamlæä»¶çç¬¬3684è¡å·¦å³ï¼ä¸åçæ¬ä½ç½®å¯è½ä¸ä¸æ ·ï¼\n\n# æ¾å°å¦ä¸åå®¹\n            # - name: calico_ipv4pool_cidr\n            #   value: "192.168.0.0/16"\n# å»ææ³¨éå¹¶æ¿æ¢ä¸º          \n            - name: calico_ipv4pool_cidr\n              value: "10.244.0.0/16"\n\n\n\n# åºç¨éç½®æ¸åå¹¶é¨ç½²ç½ç»æä»¶\n\nå¨ master èç¹æä½å³å¯\n\nkubectl apply -f calico.yaml\n\n\nå®è£æ¶æ¾ç¤ºå¦ä¸è¾åº\n\nubuntu@k8s-master:~$ kubectl apply -f calico.yaml\nconfigmap/calico-config created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\nclusterrole.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrole.rbac.authorization.k8s.io/calico-node created\nclusterrolebinding.rbac.authorization.k8s.io/calico-node created\ndaemonset.apps/calico-node created\nserviceaccount/calico-node created\ndeployment.apps/calico-kube-controllers created\nserviceaccount/calico-kube-controllers created\npoddisruptionbudget.policy/calico-kube-controllers created\n\n\n\n# ç¡®è®¤å®è£æ¯å¦æå\n\nkubectl get pod -n kube-system -l k8s-app=calico-node\n\n# éè¦ç­å¾ææç¶æä¸º runningï¼æ³¨ææ¶é´å¯è½è¾ä¹ï¼3 - 5 åéçæ ·å­\nname                ready   status    restarts   age\ncalico-node-r52c6   1/1     running   0          114s\n\n\nåæ¬¡æ¥çmasterèç¹ç¶æå·²ç»ä¸ºreadyç¶æï¼\n\nkubectl get nodes\n\n# æ§å¶å°è¾åº\nname              status   roles                  age   version\nk8s-master   ready    control-plane,master   16h   v1.20.0\n\n\nè³æ­¤ï¼kubernetes ç master èç¹å°±é¨ç½²å®æäºãå¦æä½ åªéè¦ä¸ä¸ªåèç¹ç kubernetesï¼ç°å¨ä½ å°±å¯ä»¥ä½¿ç¨äºãä¸è¿ï¼å¨é»è®¤æåµä¸ï¼kubernetes ç master èç¹æ¯ä¸è½è¿è¡ç¨æ· pod çã\n\n\n# è§£å³ imagepullbackoff\n\nå¨ä½¿ç¨ watch kubectl get pods --all-namespaces å½ä»¤è§å¯ pods ç¶ææ¶å¦æåºç° imagepullbackoff æ æ³ running çæåµï¼è¯·å°è¯ä½¿ç¨å¦ä¸æ­¥éª¤å¤çï¼\n\n * master ä¸­å é¤ nodesï¼kubectl delete nodes <name>\n * slave ä¸­éç½®éç½®ï¼kubeadm reset\n * slave éå¯è®¡ç®æºï¼reboot\n * slave éæ°å å¥éç¾¤ï¼kubeadm join',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"ä½¿ç¨ kubeadm éç½® Worker èç¹",frontmatter:{title:"ä½¿ç¨ kubeadm éç½® Worker èç¹",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/b23692/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/07.%E4%BD%BF%E7%94%A8%20kubeadm%20%E9%85%8D%E7%BD%AE%20Worker%20%E8%8A%82%E7%82%B9.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/07.ä½¿ç¨ kubeadm éç½® Worker èç¹.md",key:"v-5840b4cb",path:"/pages/b23692/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:30},{level:2,title:"å å¥éç¾¤",slug:"å å¥éç¾¤",normalizedTitle:"å å¥éç¾¤",charIndex:304},{level:2,title:"éªè¯æ¯å¦æå",slug:"éªè¯æ¯å¦æå",normalizedTitle:"éªè¯æ¯å¦æå",charIndex:2259},{level:2,title:"éç½®kubectlå½ä»¤èªå¨è¡¥å¨åè½",slug:"éç½®kubectlå½ä»¤èªå¨è¡¥å¨åè½",normalizedTitle:"éç½®kubectlå½ä»¤èªå¨è¡¥å¨åè½",charIndex:2602},{level:2,title:"æµè¯éç¾¤åä¸ªç»ä»¶",slug:"æµè¯éç¾¤åä¸ªç»ä»¶",normalizedTitle:"æµè¯éç¾¤åä¸ªç»ä»¶",charIndex:9430},{level:2,title:"éªè¯kube-proxy",slug:"éªè¯kube-proxy",normalizedTitle:"éªè¯kube-proxy",charIndex:10289},{level:2,title:"åæ­¢æå¡",slug:"åæ­¢æå¡",normalizedTitle:"åæ­¢æå¡",charIndex:11737},{level:2,title:"Podè°åº¦å°Masterèç¹",slug:"podè°åº¦å°masterèç¹",normalizedTitle:"podè°åº¦å°masterèç¹",charIndex:11912},{level:2,title:"kube-proxyå¼å¯ipvs",slug:"kube-proxyå¼å¯ipvs",normalizedTitle:"kube-proxyå¼å¯ipvs",charIndex:12484},{level:2,title:"ç§»é¤èç¹åéç¾¤",slug:"ç§»é¤èç¹åéç¾¤",normalizedTitle:"ç§»é¤èç¹åéç¾¤",charIndex:14420}],headersStr:"æ¦è¿° å å¥éç¾¤ éªè¯æ¯å¦æå éç½®kubectlå½ä»¤èªå¨è¡¥å¨åè½ æµè¯éç¾¤åä¸ªç»ä»¶ éªè¯kube-proxy åæ­¢æå¡ Podè°åº¦å°Masterèç¹ kube-proxyå¼å¯ipvs ç§»é¤èç¹åéç¾¤",content:'# ä½¿ç¨ kubeadm éç½® Worker èç¹\n\n\n# æ¦è¿°\n\né¨ç½²workerèç¹ Kubernetes ç Worker èç¹è· Master èç¹å ä¹æ¯ç¸åçï¼å®ä»¬è¿è¡ççé½æ¯ä¸ä¸ª kubelet ç»ä»¶ãå¯ä¸çåºå«å¨äºï¼å¨ kubeadm init çè¿ç¨ä¸­ï¼kubelet å¯å¨åï¼Master èç¹ä¸è¿ä¼èªå¨è¿è¡ kube-apiserverãkube-schedulerãkube-controller-manger è¿ä¸ä¸ªç³»ç» Podã å¨ k8s-node1 å k8s-node2 ä¸åå«æ§è¡å¦ä¸å½ä»¤ï¼å°å¶æ³¨åå° Cluster ä¸­ï¼\n\næ³¨æ\n\nåæ¢å° Worker èç¹ï¼æ§è¡å¦ä¸å½ä»¤å å¥éç¾¤ï¼æ³¨æä½¿ç¨rootç¨æ·æ§è¡å½ä»¤\n\n\n# å å¥éç¾¤\n\næ§è¡ä»¥ä¸å½ä»¤å°èç¹æ¥å¥éç¾¤\n\nkubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n\n\nå¦ææ§è¡kubeadm initæ¶æ²¡æè®°å½ä¸å å¥éç¾¤çå½ä»¤ï¼å¯ä»¥éè¿ä»¥ä¸å½ä»¤éæ°åå»º kubeadm token create --print-join-command å¨k8s-node1ä¸æ§è¡kubeadm join ï¼\n\nroot@k8s-node1:/home/heyuqiang# kubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n>     --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n[preflight] Running pre-flight checks\n        [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.0. Latest validated version: 19.03\n[preflight] Reading configuration from the cluster...\n[preflight] FYI: You can look at this config file with \'kubectl -n kube-system get cm kubeadm-config -o yaml\'\n[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] Starting the kubelet\n[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun \'kubectl get nodes\' on the control-plane to see this node join the cluster.\n\n\néå¤æ§è¡ä»¥ä¸æä½å°k8s-node2ä¹å è¿å»ï¼æ³¨æéæ°æ§è¡kubeadm token create --print-join-commandï¼ã ç¶åæ ¹æ®æç¤ºï¼æä»¬å¯ä»¥éè¿ kubectl get nodes æ¥çèç¹çç¶æï¼\n\nè¯´æï¼\n\n * token\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç token ä¿¡æ¯\n   * å¯ä»¥éè¿ kubeadm token list å½ä»¤æå°åº token ä¿¡æ¯\n   * å¦æ token è¿æï¼å¯ä»¥ä½¿ç¨ kubeadm token create å½ä»¤åå»ºæ°ç token\n * discovery-token-ca-cert-hash\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç sha256 ä¿¡æ¯\n   * å¯ä»¥éè¿ openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2>/dev/null | openssl dgst -sha256 -hex | sed \'s/^.* //\' å½ä»¤æ¥ç sha256 ä¿¡æ¯\n\n\n# éªè¯æ¯å¦æå\n\nåå° k8s-master æå¡å¨,å¯ä»¥çå° node æåå å¥ master\n\nubuntu@k8s-master:~$ kubectl get nodes \nNAME              STATUS   ROLES                  AGE     VERSION\nk8s-master   Ready    control-plane,master   16h     v1.20.0\nk8s-node1    Ready    <none>                 2m35s   v1.20.0\nk8s-node2    Ready    <none>                 80s     v1.20.0\n\n\n\n# éç½®kubectlå½ä»¤èªå¨è¡¥å¨åè½\n\necho "source <(kubectl completion bash)" >> ~/.profile\n\n\næç¤º\n\nå¦æ node èç¹å å¥ master æ¶éç½®æé®é¢å¯ä»¥å¨ node èç¹ä¸ä½¿ç¨ kubeadm reset éç½®éç½®åä½¿ç¨ kubeadm join å½ä»¤éæ°å å¥å³å¯ãå¸æå¨ master èç¹å é¤ node ï¼å¯ä»¥ä½¿ç¨ kubeadm delete nodes å é¤ã\n\nnodesç¶æå¨é¨ä¸ºreadyï¼ç±äºæ¯ä¸ªèç¹é½éè¦å¯å¨è¥å¹²ç»ä»¶ï¼å¦ænodeèç¹çç¶ææ¯ NotReadyï¼å¯ä»¥æ¥çææèç¹podç¶æï¼ç¡®ä¿ææpodæåæåå°éåå¹¶å¤äºrunningç¶æï¼\n\n[ubuntu@k8s-master ~]$ kubectl get pod --all-namespaces -o wide\nNAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE     IP              NODE              NOMINATED NODE   READINESS GATES\nkube-system   calico-kube-controllers-6d7b4db76c-76gqb   1/1     Running   0          11m     10.244.98.194   k8s-master   <none>           <none>\nkube-system   calico-node-bnsp4                          1/1     Running   0          3m37s   10.17.8.82      k8s-node2    <none>           <none>\nkube-system   calico-node-cptwc                          1/1     Running   0          4m52s   192.168.31.102      k8s-node1    <none>           <none>\nkube-system   calico-node-r52c6                          1/1     Running   0          11m     192.168.31.101      k8s-master   <none>           <none>\nkube-system   coredns-7f89b7bc75-d4drw                   1/1     Running   0          16h     10.244.98.195   k8s-master   <none>           <none>\nkube-system   coredns-7f89b7bc75-xzjfp                   1/1     Running   0          16h     10.244.98.193   k8s-master   <none>           <none>\nkube-system   etcd-k8s-master                       1/1     Running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-apiserver-k8s-master             1/1     Running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-controller-manager-k8s-master    1/1     Running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-proxy-2cffv                           1/1     Running   0          3m37s   10.17.8.82      k8s-node2    <none>           <none>\nkube-system   kube-proxy-55q6f                           1/1     Running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-proxy-kg6m7                           1/1     Running   0          4m52s   192.168.31.102      k8s-node1    <none>           <none>\nkube-system   kube-scheduler-k8s-master             1/1     Running   0          16h     192.168.31.101      k8s-master   <none>           <none>\n\n\nè¿æ¶ï¼ææçèç¹é½å·²ç» Readyï¼Kubernetes Cluster åå»ºæåï¼ä¸ååå¤å°±ç»ªã å¦æpodç¶æä¸ºPendingãContainerCreatingãImagePullBackOff é½è¡¨æ Pod æ²¡æå°±ç»ªï¼Running ææ¯å°±ç»ªç¶æã å¦ææpodæç¤ºInit:ImagePullBackOffï¼è¯´æè¿ä¸ªpodçéåå¨å¯¹åºèç¹ä¸æåå¤±è´¥ï¼æä»¬å¯ä»¥éè¿ kubectl describe pod æ¥ç Pod å·ä½æåµï¼ä»¥ç¡®è®¤æåå¤±è´¥çéåï¼\n\n[ubuntu@k8s-master ~]$ kubectl describe pod calico-node-lh5j2 --namespace=kube-system\n......\nEvents:\n  Type     Reason     Age    From               Message\n  ----     ------     ----   ----               -------\n  Normal   Scheduled  4m56s  default-scheduler  Successfully assigned kube-system/calico-node-bnsp4 to k8s-node2\n  Normal   Pulling    4m45s  kubelet            Pulling image "docker.io/calico/cni:v3.19.0"\n  Normal   Pulled     4m7s   kubelet            Successfully pulled image "docker.io/calico/cni:v3.19.0" in 38.679699261s\n  Normal   Created    4m6s   kubelet            Created container upgrade-ipam\n  Normal   Started    4m6s   kubelet            Started container upgrade-ipam\n  Normal   Pulled     4m5s   kubelet            Container image "docker.io/calico/cni:v3.19.0" already present on machine\n  Normal   Created    4m4s   kubelet            Created container install-cni\n  Normal   Started    4m4s   kubelet            Started container install-cni\n  Normal   Pulling    3m56s  kubelet            Pulling image "docker.io/calico/pod2daemon-flexvol:v3.19.0"\n  Normal   Pulled     2m29s  kubelet            Successfully pulled image "docker.io/calico/pod2daemon-flexvol:v3.19.0" in 1m26.543216669s\n  Normal   Created    2m28s  kubelet            Created container flexvol-driver\n  Normal   Started    2m27s  kubelet            Started container flexvol-driver\n  Normal   Pulling    2m26s  kubelet            Pulling image "docker.io/calico/node:v3.19.0"\n  Normal   Pulled     101s   kubelet            Successfully pulled image "docker.io/calico/node:v3.19.0" in 44.442030701s\n  Normal   Created    100s   kubelet            Created container calico-node\n  Normal   Started    100s   kubelet            Started container calico-node\n  Warning  Unhealthy  96s    kubelet            Readiness probe failed: 2021-05-21 01:38:10.203 [INFO][149] confd/health.go 180: Number of node(s) with BGP peering established = 0\ncalico/node is not ready: BIRD is not ready: BGP not established with 192.168.31.101,192.168.31.102\n\n\næ¥çmasterèç¹ä¸è½½äºåªäºéå\n\n[ubuntu@k8s-master ~]$ docker images\nREPOSITORY                                                        TAG        IMAGE ID       CREATED         SIZE\ncalico/node                                                       v3.19.0    b0744cc52c19   3 weeks ago     153MB\ncalico/pod2daemon-flexvol                                         v3.19.0    a5decf77918d   3 weeks ago     21.7MB\ncalico/cni                                                        v3.19.0    3d17cd6307a4   3 weeks ago     146MB\ncalico/kube-controllers                                           v3.19.0    c51610d08fdf   3 weeks ago     60.6MB\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.20.0    10cc881966cf   5 months ago    118MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.20.0    ca9843d3b545   5 months ago    122MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.20.0    3138b6e3d471   5 months ago    46.4MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.20.0    b9fa1895dcaa   5 months ago    116MB\nregistry.aliyuncs.com/google_containers/etcd                      3.4.13-0   0369cf4303ff   8 months ago    253MB\nregistry.aliyuncs.com/google_containers/coredns                   1.7.0      bfe3a36ebd25   11 months ago   45.2MB\nregistry.aliyuncs.com/google_containers/pause                     3.2        80d28bedfe5d   15 months ago   683kB\n\n\næ¥çworkerèç¹ä¸è½½äºåªäºéåï¼\n\nubuntu@k8s-node1:~$ docker images\nREPOSITORY                                           TAG       IMAGE ID       CREATED         SIZE\ncalico/node                                          v3.19.0   b0744cc52c19   3 weeks ago     153MB\ncalico/pod2daemon-flexvol                            v3.19.0   a5decf77918d   3 weeks ago     21.7MB\ncalico/cni                                           v3.19.0   3d17cd6307a4   3 weeks ago     146MB\nregistry.aliyuncs.com/google_containers/kube-proxy   v1.20.0   10cc881966cf   5 months ago    118MB\nregistry.aliyuncs.com/google_containers/pause        3.2       80d28bedfe5d   15 months ago   683kB\n\n\n\n# æµè¯éç¾¤åä¸ªç»ä»¶\n\né¦åéªè¯kube-apiserver, kube-controller-manager, kube-scheduler, pod network æ¯å¦æ­£å¸¸ï¼ é¨ç½²ä¸ä¸ª Nginx Deploymentï¼åå«2ä¸ªPod åèï¼https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\n\n[ubuntu@k8s-master ~]$ kubectl create deployment nginx --image=nginx:alpine\ndeployment.apps/nginx created\n\n[ubuntu@k8s-master ~]$ kubectl scale deployment nginx --replicas=2\ndeployment.apps/nginx scaled\n\n\néªè¯Nginx Podæ¯å¦æ­£ç¡®è¿è¡ï¼å¹¶ä¸ä¼åé10.244.å¼å¤´çéç¾¤IP\n\n[ubuntu@k8s-master ~]$ kubectl get pods -l app=nginx -o wide      \nNAME                     READY   STATUS    RESTARTS   AGE   IP              NODE             NOMINATED NODE   READINESS GATES\nnginx-565785f75c-6bjgm   1/1     Running   0          45s   10.244.86.1     k8s-node1   <none>           <none>\nnginx-565785f75c-qdnbg   1/1     Running   0          22s   10.244.156.65   k8s-node2   <none>           <none>\n\n\n\n# éªè¯kube-proxy\n\nä»¥ NodePort æ¹å¼å¯¹å¤æä¾æå¡ åèï¼https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/\n\n[ubuntu@k8s-master ~]$ kubectl expose deployment nginx --port=80 --type=NodePort\nservice/nginx exposed\n\n[ubuntu@k8s-master ~]$ kubectl get services nginx\nNAME    TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE\nnginx   NodePort   10.108.73.221   <none>        80:31622/TCP   25s\n\n\nå¯ä»¥éè¿ä»»æ NodeIP:Port å¨éç¾¤å¤é¨è®¿é®è¿ä¸ªæå¡ï¼\n\n[ubuntu@k8s-master ~]$ curl 192.168.31.101:31622\n[ubuntu@k8s-master ~]$ curl 192.168.31.102:31622\n[ubuntu@k8s-master ~]$ curl 192.168.31.103:31622\n\n\næåéªè¯ä¸ä¸dns, pod networkæ¯å¦æ­£å¸¸ï¼ è¿è¡Busyboxå¹¶è¿å¥äº¤äºæ¨¡å¼\n\n[ubuntu@k8s-master ~]$ kubectl run -it curl --image=radial/busyboxplus:curl\nIf you don\'t see a command prompt, try pressing enter.\n\n\nè¾å¥nslookup nginxæ¥çæ¯å¦å¯ä»¥æ­£ç¡®è§£æåºéç¾¤åçIPï¼ä»¥éªè¯DNSæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ nslookup nginx\nServer:    10.96.0.10\nAddress 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local\n\nName:      nginx\nAddress 1: 10.108.73.221 nginx.default.svc.cluster.local\n\n\néè¿æå¡åè¿è¡è®¿é®ï¼éªè¯kube-proxyæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ curl http://nginx/\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n......\n</body>\n</html>\n# åå«è®¿é®ä¸ä¸2ä¸ªPodçåç½IPï¼éªè¯è·¨Nodeçç½ç»éä¿¡æ¯å¦æ­£å¸¸\n[ root@curl:/ ]$ curl 10.244.86.1\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n......\n</body>\n</html>\n[ root@curl:/ ]$ curl 10.244.156.65\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n......\n</body>\n</html>\n\n\n\n# åæ­¢æå¡\n\n[ubuntu@k8s-master ~]$ kubectl delete deployment nginx\ndeployment.apps "nginx" deleted\n\n[ubuntu@k8s-master ~]$ kubectl delete service nginx\nservice "nginx" deleted\n\n\n\n# Podè°åº¦å°Masterèç¹\n\nåºäºå®å¨èèï¼é»è®¤éç½®ä¸Kubernetesä¸ä¼å°Podè°åº¦å°Masterèç¹ãæ¥çTaintså­æ®µé»è®¤éç½®ï¼\n\n[ubuntu@k8s-master ~]$ kubectl describe node k8s-master \n......\nTaints:             node-role.kubernetes.io/master:NoSchedule\n\n\nå¦æå¸æå°k8s-masterä¹å½ä½Nodeèç¹ä½¿ç¨ï¼å¯ä»¥æ§è¡å¦ä¸å½ä»¤,å¶ä¸­k8s-masteræ¯ä¸»æºèç¹hostnameï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master-\n\n\nä¿®æ¹åTaintså­æ®µç¶æï¼\n\n[ubuntu@k8s-master ~]$ kubectl describe node k8s-master                             \n......\nTaints:             <none>\n\n\nå¦æè¦æ¢å¤Master Onlyç¶æï¼æ§è¡å¦ä¸å½ä»¤ï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master=:NoSchedule\n\n\n\n# kube-proxyå¼å¯ipvs\n\nä¿®æ¹ConfigMapçkube-system/kube-proxyä¸­çconfig.confï¼mode: âipvsâï¼\n\n[ubuntu@k8s-master ~]$ kubectl edit cm kube-proxy -n kube-system\nconfigmap/kube-proxy edited\nä¹åéå¯åä¸ªèç¹ä¸çkube-proxy pod\n\n[ubuntu@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy | awk \'{system("kubectl delete pod "$1" -n kube-system")}\'\npod "kube-proxy-2w9sh" deleted\npod "kube-proxy-gw4lx" deleted\npod "kube-proxy-thv4c" deleted\n[ubuntu@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy\nkube-proxy-6qlgv                        1/1     Running   0          65s\nkube-proxy-fdtjd                        1/1     Running   0          47s\nkube-proxy-m8zkx                        1/1     Running   0          52s\n[ubuntu@k8s-master ~]$\n\n\næ¥çæ¥å¿ï¼\n\n[ubuntu@k8s-master ~]$ kubectl logs kube-proxy-6qlgv -n kube-system\nI1213 09:50:15.414493       1 server_others.go:189] Using ipvs Proxier.\nW1213 09:50:15.414908       1 proxier.go:365] IPVS scheduler not specified, use rr by default\nI1213 09:50:15.415021       1 server_others.go:216] Tearing down inactive rules.\nI1213 09:50:15.461658       1 server.go:464] Version: v1.13.0\nI1213 09:50:15.467827       1 conntrack.go:52] Setting nf_conntrack_max to 131072\nI1213 09:50:15.467997       1 config.go:202] Starting service config controller\nI1213 09:50:15.468010       1 controller_utils.go:1027] Waiting for caches to sync for service config controller\nI1213 09:50:15.468092       1 config.go:102] Starting endpoints config controller\nI1213 09:50:15.468100       1 controller_utils.go:1027] Waiting for caches to sync for endpoints config controller\nI1213 09:50:15.568766       1 controller_utils.go:1034] Caches are synced for endpoints config controller\nI1213 09:50:15.568950       1 controller_utils.go:1034] Caches are synced for service config controller\n[ubuntu@k8s-master ~]$\n\n\næ¥å¿ä¸­æå°åºäºUsing ipvs Proxierï¼è¯´æipvsæ¨¡å¼å·²ç»å¼å¯ã\n\nè³æ­¤ï¼1ä¸ªMasterï¼å¹¶éå¸¦2ä¸ªNodeçkuberneteséç¾¤åºç¡è®¾ç½®å·²ç»é¨ç½²å®æï¼å¹¶ä¸å¶æ ¸å¿åè½å¯ä»¥æ­£å¸¸ä½¿ç¨ã\n\n\n# ç§»é¤èç¹åéç¾¤\n\nkuberneteséç¾¤ç§»é¤èç¹ï¼ä»¥ç§»é¤k8s-node2èç¹ä¸ºä¾ï¼å¨Masterèç¹ä¸è¿è¡ï¼\n\nkubectl drain k8s-node2 --delete-local-data --force --ignore-daemonsets\nkubectl delete node k8s-node2\n\n\nä¸é¢ä¸¤æ¡å½ä»¤æ§è¡å®æåï¼å¨k8s-node2èç¹æ§è¡æ¸çå½ä»¤ï¼éç½®kubeadmçå®è£ç¶æï¼\n\nkubeadm reset\n\n\nå¨masterä¸å é¤nodeå¹¶ä¸ä¼æ¸çk8s-node2è¿è¡çå®¹å¨ï¼éè¦å¨å é¤èç¹ä¸é¢æå¨è¿è¡æ¸çå½ä»¤ã å¦æä½ æ³éæ°éç½®éç¾¤ï¼ä½¿ç¨æ°çåæ°éæ°è¿è¡kubeadm initæèkubeadm joinå³å¯ã\n\nè³æ­¤3ä¸ªèç¹çéç¾¤æ­å»ºå®æï¼åç»­å¯ä»¥ç»§ç»­æ·»å nodeèç¹ï¼æèé¨ç½²dashboardãhelmåç®¡çå·¥å·ãEFKæ¥å¿ç³»ç»ãPrometheus Operatorçæ§ç³»ç»ãrook+cephå­å¨ç³»ç»ç­ç»ä»¶ã',normalizedContent:'# ä½¿ç¨ kubeadm éç½® worker èç¹\n\n\n# æ¦è¿°\n\né¨ç½²workerèç¹ kubernetes ç worker èç¹è· master èç¹å ä¹æ¯ç¸åçï¼å®ä»¬è¿è¡ççé½æ¯ä¸ä¸ª kubelet ç»ä»¶ãå¯ä¸çåºå«å¨äºï¼å¨ kubeadm init çè¿ç¨ä¸­ï¼kubelet å¯å¨åï¼master èç¹ä¸è¿ä¼èªå¨è¿è¡ kube-apiserverãkube-schedulerãkube-controller-manger è¿ä¸ä¸ªç³»ç» podã å¨ k8s-node1 å k8s-node2 ä¸åå«æ§è¡å¦ä¸å½ä»¤ï¼å°å¶æ³¨åå° cluster ä¸­ï¼\n\næ³¨æ\n\nåæ¢å° worker èç¹ï¼æ§è¡å¦ä¸å½ä»¤å å¥éç¾¤ï¼æ³¨æä½¿ç¨rootç¨æ·æ§è¡å½ä»¤\n\n\n# å å¥éç¾¤\n\næ§è¡ä»¥ä¸å½ä»¤å°èç¹æ¥å¥éç¾¤\n\nkubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n\n\nå¦ææ§è¡kubeadm initæ¶æ²¡æè®°å½ä¸å å¥éç¾¤çå½ä»¤ï¼å¯ä»¥éè¿ä»¥ä¸å½ä»¤éæ°åå»º kubeadm token create --print-join-command å¨k8s-node1ä¸æ§è¡kubeadm join ï¼\n\nroot@k8s-node1:/home/heyuqiang# kubeadm join 192.168.31.101:6443 --token abcdef.0123456789abcdef \\\n>     --discovery-token-ca-cert-hash sha256:cff67f08d748fb39c91199ce5515817dfffc5e6dd8a94448693fd3cbb6885eb3 \n[preflight] running pre-flight checks\n        [warning systemverification]: this docker version is not on the list of validated versions: 20.10.0. latest validated version: 19.03\n[preflight] reading configuration from the cluster...\n[preflight] fyi: you can look at this config file with \'kubectl -n kube-system get cm kubeadm-config -o yaml\'\n[kubelet-start] writing kubelet configuration to file "/var/lib/kubelet/config.yaml"\n[kubelet-start] writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"\n[kubelet-start] starting the kubelet\n[kubelet-start] waiting for the kubelet to perform the tls bootstrap...\n\nthis node has joined the cluster:\n* certificate signing request was sent to apiserver and a response was received.\n* the kubelet was informed of the new secure connection details.\n\nrun \'kubectl get nodes\' on the control-plane to see this node join the cluster.\n\n\néå¤æ§è¡ä»¥ä¸æä½å°k8s-node2ä¹å è¿å»ï¼æ³¨æéæ°æ§è¡kubeadm token create --print-join-commandï¼ã ç¶åæ ¹æ®æç¤ºï¼æä»¬å¯ä»¥éè¿ kubectl get nodes æ¥çèç¹çç¶æï¼\n\nè¯´æï¼\n\n * token\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç token ä¿¡æ¯\n   * å¯ä»¥éè¿ kubeadm token list å½ä»¤æå°åº token ä¿¡æ¯\n   * å¦æ token è¿æï¼å¯ä»¥ä½¿ç¨ kubeadm token create å½ä»¤åå»ºæ°ç token\n * discovery-token-ca-cert-hash\n   * å¯ä»¥éè¿å®è£ master æ¶çæ¥å¿æ¥ç sha256 ä¿¡æ¯\n   * å¯ä»¥éè¿ openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2>/dev/null | openssl dgst -sha256 -hex | sed \'s/^.* //\' å½ä»¤æ¥ç sha256 ä¿¡æ¯\n\n\n# éªè¯æ¯å¦æå\n\nåå° k8s-master æå¡å¨,å¯ä»¥çå° node æåå å¥ master\n\nubuntu@k8s-master:~$ kubectl get nodes \nname              status   roles                  age     version\nk8s-master   ready    control-plane,master   16h     v1.20.0\nk8s-node1    ready    <none>                 2m35s   v1.20.0\nk8s-node2    ready    <none>                 80s     v1.20.0\n\n\n\n# éç½®kubectlå½ä»¤èªå¨è¡¥å¨åè½\n\necho "source <(kubectl completion bash)" >> ~/.profile\n\n\næç¤º\n\nå¦æ node èç¹å å¥ master æ¶éç½®æé®é¢å¯ä»¥å¨ node èç¹ä¸ä½¿ç¨ kubeadm reset éç½®éç½®åä½¿ç¨ kubeadm join å½ä»¤éæ°å å¥å³å¯ãå¸æå¨ master èç¹å é¤ node ï¼å¯ä»¥ä½¿ç¨ kubeadm delete nodes å é¤ã\n\nnodesç¶æå¨é¨ä¸ºreadyï¼ç±äºæ¯ä¸ªèç¹é½éè¦å¯å¨è¥å¹²ç»ä»¶ï¼å¦ænodeèç¹çç¶ææ¯ notreadyï¼å¯ä»¥æ¥çææèç¹podç¶æï¼ç¡®ä¿ææpodæåæåå°éåå¹¶å¤äºrunningç¶æï¼\n\n[ubuntu@k8s-master ~]$ kubectl get pod --all-namespaces -o wide\nnamespace     name                                       ready   status    restarts   age     ip              node              nominated node   readiness gates\nkube-system   calico-kube-controllers-6d7b4db76c-76gqb   1/1     running   0          11m     10.244.98.194   k8s-master   <none>           <none>\nkube-system   calico-node-bnsp4                          1/1     running   0          3m37s   10.17.8.82      k8s-node2    <none>           <none>\nkube-system   calico-node-cptwc                          1/1     running   0          4m52s   192.168.31.102      k8s-node1    <none>           <none>\nkube-system   calico-node-r52c6                          1/1     running   0          11m     192.168.31.101      k8s-master   <none>           <none>\nkube-system   coredns-7f89b7bc75-d4drw                   1/1     running   0          16h     10.244.98.195   k8s-master   <none>           <none>\nkube-system   coredns-7f89b7bc75-xzjfp                   1/1     running   0          16h     10.244.98.193   k8s-master   <none>           <none>\nkube-system   etcd-k8s-master                       1/1     running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-apiserver-k8s-master             1/1     running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-controller-manager-k8s-master    1/1     running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-proxy-2cffv                           1/1     running   0          3m37s   10.17.8.82      k8s-node2    <none>           <none>\nkube-system   kube-proxy-55q6f                           1/1     running   0          16h     192.168.31.101      k8s-master   <none>           <none>\nkube-system   kube-proxy-kg6m7                           1/1     running   0          4m52s   192.168.31.102      k8s-node1    <none>           <none>\nkube-system   kube-scheduler-k8s-master             1/1     running   0          16h     192.168.31.101      k8s-master   <none>           <none>\n\n\nè¿æ¶ï¼ææçèç¹é½å·²ç» readyï¼kubernetes cluster åå»ºæåï¼ä¸ååå¤å°±ç»ªã å¦æpodç¶æä¸ºpendingãcontainercreatingãimagepullbackoff é½è¡¨æ pod æ²¡æå°±ç»ªï¼running ææ¯å°±ç»ªç¶æã å¦ææpodæç¤ºinit:imagepullbackoffï¼è¯´æè¿ä¸ªpodçéåå¨å¯¹åºèç¹ä¸æåå¤±è´¥ï¼æä»¬å¯ä»¥éè¿ kubectl describe pod æ¥ç pod å·ä½æåµï¼ä»¥ç¡®è®¤æåå¤±è´¥çéåï¼\n\n[ubuntu@k8s-master ~]$ kubectl describe pod calico-node-lh5j2 --namespace=kube-system\n......\nevents:\n  type     reason     age    from               message\n  ----     ------     ----   ----               -------\n  normal   scheduled  4m56s  default-scheduler  successfully assigned kube-system/calico-node-bnsp4 to k8s-node2\n  normal   pulling    4m45s  kubelet            pulling image "docker.io/calico/cni:v3.19.0"\n  normal   pulled     4m7s   kubelet            successfully pulled image "docker.io/calico/cni:v3.19.0" in 38.679699261s\n  normal   created    4m6s   kubelet            created container upgrade-ipam\n  normal   started    4m6s   kubelet            started container upgrade-ipam\n  normal   pulled     4m5s   kubelet            container image "docker.io/calico/cni:v3.19.0" already present on machine\n  normal   created    4m4s   kubelet            created container install-cni\n  normal   started    4m4s   kubelet            started container install-cni\n  normal   pulling    3m56s  kubelet            pulling image "docker.io/calico/pod2daemon-flexvol:v3.19.0"\n  normal   pulled     2m29s  kubelet            successfully pulled image "docker.io/calico/pod2daemon-flexvol:v3.19.0" in 1m26.543216669s\n  normal   created    2m28s  kubelet            created container flexvol-driver\n  normal   started    2m27s  kubelet            started container flexvol-driver\n  normal   pulling    2m26s  kubelet            pulling image "docker.io/calico/node:v3.19.0"\n  normal   pulled     101s   kubelet            successfully pulled image "docker.io/calico/node:v3.19.0" in 44.442030701s\n  normal   created    100s   kubelet            created container calico-node\n  normal   started    100s   kubelet            started container calico-node\n  warning  unhealthy  96s    kubelet            readiness probe failed: 2021-05-21 01:38:10.203 [info][149] confd/health.go 180: number of node(s) with bgp peering established = 0\ncalico/node is not ready: bird is not ready: bgp not established with 192.168.31.101,192.168.31.102\n\n\næ¥çmasterèç¹ä¸è½½äºåªäºéå\n\n[ubuntu@k8s-master ~]$ docker images\nrepository                                                        tag        image id       created         size\ncalico/node                                                       v3.19.0    b0744cc52c19   3 weeks ago     153mb\ncalico/pod2daemon-flexvol                                         v3.19.0    a5decf77918d   3 weeks ago     21.7mb\ncalico/cni                                                        v3.19.0    3d17cd6307a4   3 weeks ago     146mb\ncalico/kube-controllers                                           v3.19.0    c51610d08fdf   3 weeks ago     60.6mb\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.20.0    10cc881966cf   5 months ago    118mb\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.20.0    ca9843d3b545   5 months ago    122mb\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.20.0    3138b6e3d471   5 months ago    46.4mb\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.20.0    b9fa1895dcaa   5 months ago    116mb\nregistry.aliyuncs.com/google_containers/etcd                      3.4.13-0   0369cf4303ff   8 months ago    253mb\nregistry.aliyuncs.com/google_containers/coredns                   1.7.0      bfe3a36ebd25   11 months ago   45.2mb\nregistry.aliyuncs.com/google_containers/pause                     3.2        80d28bedfe5d   15 months ago   683kb\n\n\næ¥çworkerèç¹ä¸è½½äºåªäºéåï¼\n\nubuntu@k8s-node1:~$ docker images\nrepository                                           tag       image id       created         size\ncalico/node                                          v3.19.0   b0744cc52c19   3 weeks ago     153mb\ncalico/pod2daemon-flexvol                            v3.19.0   a5decf77918d   3 weeks ago     21.7mb\ncalico/cni                                           v3.19.0   3d17cd6307a4   3 weeks ago     146mb\nregistry.aliyuncs.com/google_containers/kube-proxy   v1.20.0   10cc881966cf   5 months ago    118mb\nregistry.aliyuncs.com/google_containers/pause        3.2       80d28bedfe5d   15 months ago   683kb\n\n\n\n# æµè¯éç¾¤åä¸ªç»ä»¶\n\né¦åéªè¯kube-apiserver, kube-controller-manager, kube-scheduler, pod network æ¯å¦æ­£å¸¸ï¼ é¨ç½²ä¸ä¸ª nginx deploymentï¼åå«2ä¸ªpod åèï¼https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\n\n[ubuntu@k8s-master ~]$ kubectl create deployment nginx --image=nginx:alpine\ndeployment.apps/nginx created\n\n[ubuntu@k8s-master ~]$ kubectl scale deployment nginx --replicas=2\ndeployment.apps/nginx scaled\n\n\néªè¯nginx podæ¯å¦æ­£ç¡®è¿è¡ï¼å¹¶ä¸ä¼åé10.244.å¼å¤´çéç¾¤ip\n\n[ubuntu@k8s-master ~]$ kubectl get pods -l app=nginx -o wide      \nname                     ready   status    restarts   age   ip              node             nominated node   readiness gates\nnginx-565785f75c-6bjgm   1/1     running   0          45s   10.244.86.1     k8s-node1   <none>           <none>\nnginx-565785f75c-qdnbg   1/1     running   0          22s   10.244.156.65   k8s-node2   <none>           <none>\n\n\n\n# éªè¯kube-proxy\n\nä»¥ nodeport æ¹å¼å¯¹å¤æä¾æå¡ åèï¼https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/\n\n[ubuntu@k8s-master ~]$ kubectl expose deployment nginx --port=80 --type=nodeport\nservice/nginx exposed\n\n[ubuntu@k8s-master ~]$ kubectl get services nginx\nname    type       cluster-ip      external-ip   port(s)        age\nnginx   nodeport   10.108.73.221   <none>        80:31622/tcp   25s\n\n\nå¯ä»¥éè¿ä»»æ nodeip:port å¨éç¾¤å¤é¨è®¿é®è¿ä¸ªæå¡ï¼\n\n[ubuntu@k8s-master ~]$ curl 192.168.31.101:31622\n[ubuntu@k8s-master ~]$ curl 192.168.31.102:31622\n[ubuntu@k8s-master ~]$ curl 192.168.31.103:31622\n\n\næåéªè¯ä¸ä¸dns, pod networkæ¯å¦æ­£å¸¸ï¼ è¿è¡busyboxå¹¶è¿å¥äº¤äºæ¨¡å¼\n\n[ubuntu@k8s-master ~]$ kubectl run -it curl --image=radial/busyboxplus:curl\nif you don\'t see a command prompt, try pressing enter.\n\n\nè¾å¥nslookup nginxæ¥çæ¯å¦å¯ä»¥æ­£ç¡®è§£æåºéç¾¤åçipï¼ä»¥éªè¯dnsæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ nslookup nginx\nserver:    10.96.0.10\naddress 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local\n\nname:      nginx\naddress 1: 10.108.73.221 nginx.default.svc.cluster.local\n\n\néè¿æå¡åè¿è¡è®¿é®ï¼éªè¯kube-proxyæ¯å¦æ­£å¸¸\n\n[ root@curl:/ ]$ curl http://nginx/\n<!doctype html>\n<html>\n<head>\n<title>welcome to nginx!</title>\n......\n</body>\n</html>\n# åå«è®¿é®ä¸ä¸2ä¸ªpodçåç½ipï¼éªè¯è·¨nodeçç½ç»éä¿¡æ¯å¦æ­£å¸¸\n[ root@curl:/ ]$ curl 10.244.86.1\n<!doctype html>\n<html>\n<head>\n<title>welcome to nginx!</title>\n......\n</body>\n</html>\n[ root@curl:/ ]$ curl 10.244.156.65\n<!doctype html>\n<html>\n<head>\n<title>welcome to nginx!</title>\n......\n</body>\n</html>\n\n\n\n# åæ­¢æå¡\n\n[ubuntu@k8s-master ~]$ kubectl delete deployment nginx\ndeployment.apps "nginx" deleted\n\n[ubuntu@k8s-master ~]$ kubectl delete service nginx\nservice "nginx" deleted\n\n\n\n# podè°åº¦å°masterèç¹\n\nåºäºå®å¨èèï¼é»è®¤éç½®ä¸kubernetesä¸ä¼å°podè°åº¦å°masterèç¹ãæ¥çtaintså­æ®µé»è®¤éç½®ï¼\n\n[ubuntu@k8s-master ~]$ kubectl describe node k8s-master \n......\ntaints:             node-role.kubernetes.io/master:noschedule\n\n\nå¦æå¸æå°k8s-masterä¹å½ä½nodeèç¹ä½¿ç¨ï¼å¯ä»¥æ§è¡å¦ä¸å½ä»¤,å¶ä¸­k8s-masteræ¯ä¸»æºèç¹hostnameï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master-\n\n\nä¿®æ¹åtaintså­æ®µç¶æï¼\n\n[ubuntu@k8s-master ~]$ kubectl describe node k8s-master                             \n......\ntaints:             <none>\n\n\nå¦æè¦æ¢å¤master onlyç¶æï¼æ§è¡å¦ä¸å½ä»¤ï¼\n\nkubectl taint node k8s-master node-role.kubernetes.io/master=:noschedule\n\n\n\n# kube-proxyå¼å¯ipvs\n\nä¿®æ¹configmapçkube-system/kube-proxyä¸­çconfig.confï¼mode: âipvsâï¼\n\n[ubuntu@k8s-master ~]$ kubectl edit cm kube-proxy -n kube-system\nconfigmap/kube-proxy edited\nä¹åéå¯åä¸ªèç¹ä¸çkube-proxy pod\n\n[ubuntu@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy | awk \'{system("kubectl delete pod "$1" -n kube-system")}\'\npod "kube-proxy-2w9sh" deleted\npod "kube-proxy-gw4lx" deleted\npod "kube-proxy-thv4c" deleted\n[ubuntu@k8s-master ~]$ kubectl get pod -n kube-system | grep kube-proxy\nkube-proxy-6qlgv                        1/1     running   0          65s\nkube-proxy-fdtjd                        1/1     running   0          47s\nkube-proxy-m8zkx                        1/1     running   0          52s\n[ubuntu@k8s-master ~]$\n\n\næ¥çæ¥å¿ï¼\n\n[ubuntu@k8s-master ~]$ kubectl logs kube-proxy-6qlgv -n kube-system\ni1213 09:50:15.414493       1 server_others.go:189] using ipvs proxier.\nw1213 09:50:15.414908       1 proxier.go:365] ipvs scheduler not specified, use rr by default\ni1213 09:50:15.415021       1 server_others.go:216] tearing down inactive rules.\ni1213 09:50:15.461658       1 server.go:464] version: v1.13.0\ni1213 09:50:15.467827       1 conntrack.go:52] setting nf_conntrack_max to 131072\ni1213 09:50:15.467997       1 config.go:202] starting service config controller\ni1213 09:50:15.468010       1 controller_utils.go:1027] waiting for caches to sync for service config controller\ni1213 09:50:15.468092       1 config.go:102] starting endpoints config controller\ni1213 09:50:15.468100       1 controller_utils.go:1027] waiting for caches to sync for endpoints config controller\ni1213 09:50:15.568766       1 controller_utils.go:1034] caches are synced for endpoints config controller\ni1213 09:50:15.568950       1 controller_utils.go:1034] caches are synced for service config controller\n[ubuntu@k8s-master ~]$\n\n\næ¥å¿ä¸­æå°åºäºusing ipvs proxierï¼è¯´æipvsæ¨¡å¼å·²ç»å¼å¯ã\n\nè³æ­¤ï¼1ä¸ªmasterï¼å¹¶éå¸¦2ä¸ªnodeçkuberneteséç¾¤åºç¡è®¾ç½®å·²ç»é¨ç½²å®æï¼å¹¶ä¸å¶æ ¸å¿åè½å¯ä»¥æ­£å¸¸ä½¿ç¨ã\n\n\n# ç§»é¤èç¹åéç¾¤\n\nkuberneteséç¾¤ç§»é¤èç¹ï¼ä»¥ç§»é¤k8s-node2èç¹ä¸ºä¾ï¼å¨masterèç¹ä¸è¿è¡ï¼\n\nkubectl drain k8s-node2 --delete-local-data --force --ignore-daemonsets\nkubectl delete node k8s-node2\n\n\nä¸é¢ä¸¤æ¡å½ä»¤æ§è¡å®æåï¼å¨k8s-node2èç¹æ§è¡æ¸çå½ä»¤ï¼éç½®kubeadmçå®è£ç¶æï¼\n\nkubeadm reset\n\n\nå¨masterä¸å é¤nodeå¹¶ä¸ä¼æ¸çk8s-node2è¿è¡çå®¹å¨ï¼éè¦å¨å é¤èç¹ä¸é¢æå¨è¿è¡æ¸çå½ä»¤ã å¦æä½ æ³éæ°éç½®éç¾¤ï¼ä½¿ç¨æ°çåæ°éæ°è¿è¡kubeadm initæèkubeadm joinå³å¯ã\n\nè³æ­¤3ä¸ªèç¹çéç¾¤æ­å»ºå®æï¼åç»­å¯ä»¥ç»§ç»­æ·»å nodeèç¹ï¼æèé¨ç½²dashboardãhelmåç®¡çå·¥å·ãefkæ¥å¿ç³»ç»ãprometheus operatorçæ§ç³»ç»ãrook+cephå­å¨ç³»ç»ç­ç»ä»¶ã',charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"æ¦å¿µæ»ç»",frontmatter:{title:"æ¦å¿µæ»ç»",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/cfa4e2/"},regularPath:"/22.Kubernetes/01.Kubernetes%20%E5%85%A5%E9%97%A8/08.%E6%A6%82%E5%BF%B5%E6%80%BB%E7%BB%93.html",relativePath:"22.Kubernetes/01.Kubernetes å¥é¨/08.æ¦å¿µæ»ç».md",key:"v-4de06ab6",path:"/pages/cfa4e2/",headers:[{level:2,title:"ä»ä¹æ¯ Kubernetes",slug:"ä»ä¹æ¯-kubernetes",normalizedTitle:"ä»ä¹æ¯ kubernetes",charIndex:11},{level:2,title:"Kubernetes Master",slug:"kubernetes-master",normalizedTitle:"kubernetes master",charIndex:756},{level:2,title:"Kubernetes Node",slug:"kubernetes-node",normalizedTitle:"kubernetes node",charIndex:865},{level:2,title:"Kubernetes æ¶æ",slug:"kubernetes-æ¶æ",normalizedTitle:"kubernetes æ¶æ",charIndex:1538}],headersStr:"ä»ä¹æ¯ Kubernetes Kubernetes Master Kubernetes Node Kubernetes æ¶æ",content:"# æ¦å¿µæ»ç»\n\n\n# ä»ä¹æ¯ Kubernetes\n\nKubernetes æ¯ä¸ä¸ªå¼æºç Docker å®¹å¨ç¼æç³»ç»ï¼å®å¯ä»¥è°åº¦è®¡ç®éç¾¤çèç¹ï¼å¨æç®¡çä¸é¢çä½ä¸ï¼ä¿è¯å®ä»¬æç¨æ·ææçç¶æè¿è¡ãéè¿ä½¿ç¨ãlabelsãåãpodsãçæ¦å¿µï¼Kubernetes å°åºç¨æé»è¾ååè¿è¡åç»ï¼æ¹ä¾¿ç®¡çåæå¡åç°ã\n\n\n\n * podsï¼ æ¯ä¸ç»ç´§å¯å³èçå®¹å¨éåï¼å®ä»¬å±äº« IPC(è¿ç¨é´éä¿¡)ãNetwork(ç½ç») å UTS namespace(UTS å½åç©ºé´æ¯ Linux å½åç©ºé´çä¸ä¸ªå­ç³»ç»ï¼ä¸»è¦ä½ç¨æ¯å®æå¯¹å®¹å¨ Hostname å Domain çéç¦»ï¼åæ¶ä¿å­åæ ¸åç§°ãçæ¬ãä»¥ååºå±ä½ç³»ç»æç±»åç­ä¿¡æ¯)ï¼æ¯ Kubernetes è°åº¦çåºæ¬åä½ã\n * labelsï¼ é®å¼å¯¹(key/value)æ ç­¾ï¼å¯ä»¥è¢«å³èå°å¦ Pod è¿æ ·çå¯¹è±¡ä¸ï¼ä¸»è¦ä½ç¨æ¯ç»ç¨æ·ä¸ä¸ªç´è§çæåï¼æ¯å¦è¿ä¸ª Pod æ¯ç¨æ¥æ¾ç½®æ°æ®åºç\n * GUIï¼ ç¨æ·å¾å½¢çé¢ï¼å¯ä»¥æ¯ Web ç¨æ·çé¢ï¼æ¯å¦ä½¿ç¨ kubernetes-dashboard ç»ä»¶ï¼ç¨æ·å¯ä»¥éè¿ Dashboard å¨ Kubernetes éç¾¤ä¸­é¨ç½²å®¹å¨åçåºç¨ï¼å¯ä»¥æ¥çéç¾¤ä¸­åºç¨çè¿è¡æåµï¼åæ¶ä¹è½å¤åºäº Dashboard åå»ºæä¿®æ¹é¨ç½²ãä»»å¡ãæå¡ç­ Kubernetes çèµæºãéè¿é¨ç½²åå¯¼ï¼ç¨æ·è½å¤å¯¹é¨ç½²è¿è¡æ©ç¼©å®¹ï¼è¿è¡æ»å¨æ´æ°ãéå¯ Pod åé¨ç½²æ°åºç¨ãå½ç¶ï¼éè¿ Dashboard ä¹è½å¤æ¥ç Kubernetes èµæºçç¶æ\n * kubectlï¼ ç¨äºç®¡ç Kubernetes éç¾¤çå½ä»¤è¡å·¥å·\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãAPI æ³¨åååç°ç­æºå¶\n * Kubernetes Masterï¼ Kubernetes éç¾¤ä¸»èç¹ï¼ä¸»è¦ç± kube-apiserverãkube-schedulerãkube-controller-managerãetcd åä¸ªæ¨¡åç»æ\n * Kubernetes Nodeï¼ Kubernetes éç¾¤å­èç¹ï¼ä¸»è¦ç± kubeletãkube-proxyãruntime ä¸ä¸ªæ¨¡åç»æ\n * Image Registryï¼ éåä»åºï¼æ¯å¦ï¼Ducker HUB æ Docker ç§æ\n\n\n# Kubernetes Master\n\n\n\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãAPI æ³¨åååç°ç­æºå¶\n * kube-schedulerï¼ è´è´£èµæºçè°åº¦ï¼æç§é¢å®çè°åº¦ç­ç¥å° Pod è°åº¦å°ç¸åºçæºå¨ä¸\n * kube-controller-managerï¼ è´è´£ç»´æ¤éç¾¤çç¶æï¼æ¯å¦æéæ£æµãèªå¨æ©å±ãæ»å¨æ´æ°ç­\n * etcdï¼ CoreOS åºäº Raft å¼åçåå¸å¼ key-value å­å¨ï¼å¯ç¨äºæå¡åç°ãå±äº«éç½®ä»¥åä¸è´æ§ä¿éï¼å¦æ°æ®åºéä¸»ãåå¸å¼éç­ï¼\n\n\n# Kubernetes Node\n\n\n\n * runtimeï¼ è´è´£éåç®¡çä»¥å Pod åå®¹å¨ççæ­£è¿è¡ï¼CRIï¼Container Runtime Interfaceï¼ï¼é»è®¤çå®¹å¨è¿è¡æ¶ä¸º Dockerï¼è¿æ¯æ RKT å®¹å¨\n * kubeletï¼ è´è´£ç»´æå®¹å¨ççå½å¨æï¼åæ¶ä¹è´è´£ Volumeï¼CVIï¼Container Volume Interfaceï¼åç½ç»ï¼CNIï¼Container Network Interfaceï¼çç®¡ç\n * kube-proxyï¼ è´è´£ä¸º Service æä¾ cluster åé¨çæå¡åç°åè´è½½åè¡¡\n\n\n# Kubernetes æ¶æ\n\n\n\n",normalizedContent:"# æ¦å¿µæ»ç»\n\n\n# ä»ä¹æ¯ kubernetes\n\nkubernetes æ¯ä¸ä¸ªå¼æºç docker å®¹å¨ç¼æç³»ç»ï¼å®å¯ä»¥è°åº¦è®¡ç®éç¾¤çèç¹ï¼å¨æç®¡çä¸é¢çä½ä¸ï¼ä¿è¯å®ä»¬æç¨æ·ææçç¶æè¿è¡ãéè¿ä½¿ç¨ãlabelsãåãpodsãçæ¦å¿µï¼kubernetes å°åºç¨æé»è¾ååè¿è¡åç»ï¼æ¹ä¾¿ç®¡çåæå¡åç°ã\n\n\n\n * podsï¼ æ¯ä¸ç»ç´§å¯å³èçå®¹å¨éåï¼å®ä»¬å±äº« ipc(è¿ç¨é´éä¿¡)ãnetwork(ç½ç») å uts namespace(uts å½åç©ºé´æ¯ linux å½åç©ºé´çä¸ä¸ªå­ç³»ç»ï¼ä¸»è¦ä½ç¨æ¯å®æå¯¹å®¹å¨ hostname å domain çéç¦»ï¼åæ¶ä¿å­åæ ¸åç§°ãçæ¬ãä»¥ååºå±ä½ç³»ç»æç±»åç­ä¿¡æ¯)ï¼æ¯ kubernetes è°åº¦çåºæ¬åä½ã\n * labelsï¼ é®å¼å¯¹(key/value)æ ç­¾ï¼å¯ä»¥è¢«å³èå°å¦ pod è¿æ ·çå¯¹è±¡ä¸ï¼ä¸»è¦ä½ç¨æ¯ç»ç¨æ·ä¸ä¸ªç´è§çæåï¼æ¯å¦è¿ä¸ª pod æ¯ç¨æ¥æ¾ç½®æ°æ®åºç\n * guiï¼ ç¨æ·å¾å½¢çé¢ï¼å¯ä»¥æ¯ web ç¨æ·çé¢ï¼æ¯å¦ä½¿ç¨ kubernetes-dashboard ç»ä»¶ï¼ç¨æ·å¯ä»¥éè¿ dashboard å¨ kubernetes éç¾¤ä¸­é¨ç½²å®¹å¨åçåºç¨ï¼å¯ä»¥æ¥çéç¾¤ä¸­åºç¨çè¿è¡æåµï¼åæ¶ä¹è½å¤åºäº dashboard åå»ºæä¿®æ¹é¨ç½²ãä»»å¡ãæå¡ç­ kubernetes çèµæºãéè¿é¨ç½²åå¯¼ï¼ç¨æ·è½å¤å¯¹é¨ç½²è¿è¡æ©ç¼©å®¹ï¼è¿è¡æ»å¨æ´æ°ãéå¯ pod åé¨ç½²æ°åºç¨ãå½ç¶ï¼éè¿ dashboard ä¹è½å¤æ¥ç kubernetes èµæºçç¶æ\n * kubectlï¼ ç¨äºç®¡ç kubernetes éç¾¤çå½ä»¤è¡å·¥å·\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãapi æ³¨åååç°ç­æºå¶\n * kubernetes masterï¼ kubernetes éç¾¤ä¸»èç¹ï¼ä¸»è¦ç± kube-apiserverãkube-schedulerãkube-controller-managerãetcd åä¸ªæ¨¡åç»æ\n * kubernetes nodeï¼ kubernetes éç¾¤å­èç¹ï¼ä¸»è¦ç± kubeletãkube-proxyãruntime ä¸ä¸ªæ¨¡åç»æ\n * image registryï¼ éåä»åºï¼æ¯å¦ï¼ducker hub æ docker ç§æ\n\n\n# kubernetes master\n\n\n\n * kube-apiserverï¼ æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãapi æ³¨åååç°ç­æºå¶\n * kube-schedulerï¼ è´è´£èµæºçè°åº¦ï¼æç§é¢å®çè°åº¦ç­ç¥å° pod è°åº¦å°ç¸åºçæºå¨ä¸\n * kube-controller-managerï¼ è´è´£ç»´æ¤éç¾¤çç¶æï¼æ¯å¦æéæ£æµãèªå¨æ©å±ãæ»å¨æ´æ°ç­\n * etcdï¼ coreos åºäº raft å¼åçåå¸å¼ key-value å­å¨ï¼å¯ç¨äºæå¡åç°ãå±äº«éç½®ä»¥åä¸è´æ§ä¿éï¼å¦æ°æ®åºéä¸»ãåå¸å¼éç­ï¼\n\n\n# kubernetes node\n\n\n\n * runtimeï¼ è´è´£éåç®¡çä»¥å pod åå®¹å¨ççæ­£è¿è¡ï¼criï¼container runtime interfaceï¼ï¼é»è®¤çå®¹å¨è¿è¡æ¶ä¸º dockerï¼è¿æ¯æ rkt å®¹å¨\n * kubeletï¼ è´è´£ç»´æå®¹å¨ççå½å¨æï¼åæ¶ä¹è´è´£ volumeï¼cviï¼container volume interfaceï¼åç½ç»ï¼cniï¼container network interfaceï¼çç®¡ç\n * kube-proxyï¼ è´è´£ä¸º service æä¾ cluster åé¨çæå¡åç°åè´è½½åè¡¡\n\n\n# kubernetes æ¶æ\n\n\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"Kubernetes Dashboard",frontmatter:{title:"Kubernetes Dashboard",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/11af34/"},regularPath:"/22.Kubernetes/02.Kubernetes%20%E5%AE%9E%E8%B7%B5/01.Kubernetes%20Dashboard.html",relativePath:"22.Kubernetes/02.Kubernetes å®è·µ/01.Kubernetes Dashboard.md",key:"v-eb9fcf56",path:"/pages/11af34/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:27},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:88},{level:2,title:"è®¿é®",slug:"è®¿é®",normalizedTitle:"è®¿é®",charIndex:263},{level:2,title:"ç»å½",slug:"ç»å½",normalizedTitle:"ç»å½",charIndex:9137},{level:2,title:"æ¸ç",slug:"æ¸ç",normalizedTitle:"æ¸ç",charIndex:10944}],headersStr:"æ¦è¿° å®è£ è®¿é® ç»å½ æ¸ç",content:'# Kubernetes Dashboard\n\n\n# æ¦è¿°\n\nKubernetes Dashboard æ¯ Kubernetes éç¾¤ç Web UIï¼ç¨äºç®¡çéç¾¤ã\n\n\n# å®è£\n\nGitHub å°åï¼Kubernetes Dashboard\n\nä¸è½½éç½®æä»¶\n\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml\n\n\né»è®¤æåµä¸ï¼Serviceç±»åä¸ºClusterIPï¼åªè½ç¨äºéç¾¤åé¨è®¿é®ï¼è¿éæå®ä½¿ç¨"NodePort"ç±»åï¼å¹¶ä½¿ç¨åºå®ç«¯å£30001ï¼å°å¶åå¸éç¾¤å¤é¨è®¿é®\n\né¦åæ·è´å®æ¹æºæä»¶ï¼å¾å°kubernetes-dashboard.yaml\n\ncp recommended.yaml kubernetes-dashboard.yaml\n\n\nä¿®æ¹kubernetes-dashboard.yamléç½®å¦ä¸:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Copyright 2017 The Kubernetes Authors.\n#\n# Licensed under the Apache License, Version 2.0 (the "License");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an "AS IS" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: kubernetes-dashboard\n\n---\n\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\n\n---\n\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  # ä¿®æ¹ç±»åä¸º NodePort è®¿é®\n  type: NodePort\n  ports:\n    - port: 443\n      targetPort: 8443\n      # è®¾ç½®ç«¯å£å·ä¸º 30001\n      nodePort: 30001\n  selector:\n    k8s-app: kubernetes-dashboard\n\n---\n\napiVersion: v1\nkind: Secret\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-certs\n  namespace: kubernetes-dashboard\ntype: Opaque\n\n---\n\napiVersion: v1\nkind: Secret\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-csrf\n  namespace: kubernetes-dashboard\ntype: Opaque\ndata:\n  csrf: ""\n\n---\n\napiVersion: v1\nkind: Secret\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-key-holder\n  namespace: kubernetes-dashboard\ntype: Opaque\n\n---\n\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-settings\n  namespace: kubernetes-dashboard\n\n---\n\nkind: Role\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nrules:\n  # Allow Dashboard to get, update and delete Dashboard exclusive secrets.\n  - apiGroups: [""]\n    resources: ["secrets"]\n    resourceNames: ["kubernetes-dashboard-key-holder", "kubernetes-dashboard-certs", "kubernetes-dashboard-csrf"]\n    verbs: ["get", "update", "delete"]\n    # Allow Dashboard to get and update \'kubernetes-dashboard-settings\' config map.\n  - apiGroups: [""]\n    resources: ["configmaps"]\n    resourceNames: ["kubernetes-dashboard-settings"]\n    verbs: ["get", "update"]\n    # Allow Dashboard to get metrics.\n  - apiGroups: [""]\n    resources: ["services"]\n    resourceNames: ["heapster", "dashboard-metrics-scraper"]\n    verbs: ["proxy"]\n  - apiGroups: [""]\n    resources: ["services/proxy"]\n    resourceNames: ["heapster", "http:heapster:", "https:heapster:", "dashboard-metrics-scraper", "http:dashboard-metrics-scraper"]\n    verbs: ["get"]\n\n---\n\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\nrules:\n  # Allow Metrics Scraper to get metrics from the Metrics server\n  - apiGroups: ["metrics.k8s.io"]\n    resources: ["pods", "nodes"]\n    verbs: ["get", "list", "watch"]\n\n---\n\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: Role\n  name: kubernetes-dashboard\nsubjects:\n  - kind: ServiceAccount\n    name: kubernetes-dashboard\n    namespace: kubernetes-dashboard\n\n---\n\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: kubernetes-dashboard\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: kubernetes-dashboard\nsubjects:\n  - kind: ServiceAccount\n    name: kubernetes-dashboard\n    namespace: kubernetes-dashboard\n\n---\n\nkind: Deployment\napiVersion: apps/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  replicas: 1\n  revisionHistoryLimit: 10\n  selector:\n    matchLabels:\n      k8s-app: kubernetes-dashboard\n  template:\n    metadata:\n      labels:\n        k8s-app: kubernetes-dashboard\n    spec:\n      containers:\n        - name: kubernetes-dashboard\n          # ä¿®æ¹éåå°åä¸ºé¿éäº\n          image: registry.aliyuncs.com/google_containers/dashboard:v2.2.0\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 8443\n              protocol: TCP\n          args:\n            - --auto-generate-certificates\n            - --namespace=kubernetes-dashboard\n            # Uncomment the following line to manually specify Kubernetes API server Host\n            # If not specified, Dashboard will attempt to auto discover the API server and connect\n            # to it. Uncomment only if the default does not work.\n            # - --apiserver-host=http://my-address:port\n          volumeMounts:\n            - name: kubernetes-dashboard-certs\n              mountPath: /certs\n              # Create on-disk volume to store exec logs\n            - mountPath: /tmp\n              name: tmp-volume\n          livenessProbe:\n            httpGet:\n              scheme: HTTPS\n              path: /\n              port: 8443\n            initialDelaySeconds: 30\n            timeoutSeconds: 30\n          securityContext:\n            allowPrivilegeEscalation: false\n            readOnlyRootFilesystem: true\n            runAsUser: 1001\n            runAsGroup: 2001\n      volumes:\n        - name: kubernetes-dashboard-certs\n          secret:\n            secretName: kubernetes-dashboard-certs\n        - name: tmp-volume\n          emptyDir: {}\n      serviceAccountName: kubernetes-dashboard\n      nodeSelector:\n        "kubernetes.io/os": linux\n      # Comment the following tolerations if Dashboard must not be deployed on master\n      tolerations:\n        - key: node-role.kubernetes.io/master\n          effect: NoSchedule\n\n---\n\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: dashboard-metrics-scraper\n  name: dashboard-metrics-scraper\n  namespace: kubernetes-dashboard\nspec:\n  ports:\n    - port: 8000\n      targetPort: 8000\n  selector:\n    k8s-app: dashboard-metrics-scraper\n\n---\n\nkind: Deployment\napiVersion: apps/v1\nmetadata:\n  labels:\n    k8s-app: dashboard-metrics-scraper\n  name: dashboard-metrics-scraper\n  namespace: kubernetes-dashboard\nspec:\n  replicas: 1\n  revisionHistoryLimit: 10\n  selector:\n    matchLabels:\n      k8s-app: dashboard-metrics-scraper\n  template:\n    metadata:\n      labels:\n        k8s-app: dashboard-metrics-scraper\n      annotations:\n        seccomp.security.alpha.kubernetes.io/pod: \'runtime/default\'\n    spec:\n      containers:\n        - name: dashboard-metrics-scraper\n          image: kubernetesui/metrics-scraper:v1.0.6\n          ports:\n            - containerPort: 8000\n              protocol: TCP\n          livenessProbe:\n            httpGet:\n              scheme: HTTP\n              path: /\n              port: 8000\n            initialDelaySeconds: 30\n            timeoutSeconds: 30\n          volumeMounts:\n            - mountPath: /tmp\n              name: tmp-volume\n          securityContext:\n            allowPrivilegeEscalation: false\n            readOnlyRootFilesystem: true\n            runAsUser: 1001\n            runAsGroup: 2001\n      serviceAccountName: kubernetes-dashboard\n      nodeSelector:\n        "kubernetes.io/os": linux\n      # Comment the following tolerations if Dashboard must not be deployed on master\n      tolerations:\n        - key: node-role.kubernetes.io/master\n          effect: NoSchedule\n      volumes:\n        - name: tmp-volume\n          emptyDir: {}\n\n\né¨ç½²kubernetes-dashboard\n\n# é¨ç½²\nkubectl create -f kubernetes-dashboard.yaml\n\n# æ¥ç\nkubectl -n kubernetes-dashboard get pods\nkubectl -n kubernetes-dashboard get service kubernetes-dashboard\nkubectl -n kubernetes-dashboard describe service kubernetes-dashboard\n\n# éªè¯podæ¯å¦æ­£å¸¸è¿è¡\nkubectl get pod -n kubernetes-dashboard -l k8s-app=kubernetes-dashboard\nNAME                                    READY   STATUS    RESTARTS   AGE\nkubernetes-dashboard-5dbf55bd9d-9f97k   1/1     Running   0          68s\n\n\nä»ä¸é¢çåé¦ç»ææ¥çï¼podè¿è¡æ­£å¸¸ï¼å¹¶ä¸å·²ç»å°±ç»ªã\n\n\n# è®¿é®\n\nDashboardå·²ç»æ´é²å¨ç«¯å£30001(HTTPS)ä¸,ç°å¨å¯ä»¥ç¨æµè§å¨è¾å¥å°åï¼https://<node-ip>:<nodePort>è®¿é® Dashboardï¼å ä¸ºè¯ä¹¦åå é¤ç«çæµè§å¨å¤å¶å®æµè§å¨æ æ³ç´æ¥æå¼é¡µé¢\n\nChrome æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nFirefox æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nç¹å» æ¥åé£é©å¹¶ç»§ç»­ å³å¯æ¾ç¤ºæ¬¢è¿çé¢\n\n\n\n\n# ç»å½\n\næä»¬éç¨ Token æ¹å¼ç»å½\n\næä»¬é¦åå¨kubernetes-dashboardå½åç©ºé´ä¸­åå»ºåä¸ºadmin-userçServiceAccountã\n\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\nEOF\n\n\nä¸ºadmin-userç¨æ·åå»ºä¸ä¸ªClusterRoleBinding\n\ncat <<EOF | kubectl apply -f -\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\nEOF\n\n\nè·å¾ä¸ä¸ªBearer Token\n\nkubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath="{.secrets[0].name}") -o go-template="{{.data.token | base64decode}}"\n\n\nåºè¯¥æå°åºå¦ä¸åå®¹ï¼\n\neyJhbGciOiJSUzI1NiIsImtpZCI6ImRnV2dKVHNrZUliRU1fRmlsZHhMcGt3VmVmVm5PYW5BOFIxYVc3NHRfVm8ifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLTh2djg5Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIyMjFhYWE5Zi1jNjBlLTRlNmYtYTY4NC02NTM4YWU3MjYwM2UiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.IsGz8pcjnsWyaHm21okD3iN1UEblYs0237Xp6KTJbR-UDpmECRwLUeLHceEjIjtrv55jAS2PB2hKe0LQ1FYHeEKsgw8OiEhpHmM06Ua59ehQiT2PYbLS022-g63bIbKdOWT7Dkd212iHCNQMfoho2pzqULsyfLMublw47R6xEReeira4kQORrEyXKGt8-xYiYCtXTtWoXWYmpp7N2dey9Dnb5WIFqVTaAomZFvUUpWnP2skdrGt_cE4N3BEOF_5L2D-V_HDs7cmhl6OdMfdGj3W8KzaCSnrWz_QhsYqAzyTF8RBFz7t-KzkYZVLz8Zfqwq4G5Oc-KH6xJR8-1wK2LQ\n\n\nç°å¨å¤å¶Bearer Tokenå¹¶å°å¶ç²è´´å°ç»å½å±å¹ä¸çè¾å¥ token *å­æ®µä¸­ãåå»ç»å½æé®å³å¯ãæ¨ç°å¨ä»¥ç®¡çåèº«ä»½ç»å½ã\n\nå·¥ä½éç¶æ\n\n\n\nNodes\n\n\n\n\n# æ¸ç\n\nç§»é¤adminServiceAccountåClusterRoleBinding\n\nkubectl -n kubernetes-dashboard delete serviceaccount admin-user\nkubectl -n kubernetes-dashboard delete clusterrolebinding admin-user\n',normalizedContent:'# kubernetes dashboard\n\n\n# æ¦è¿°\n\nkubernetes dashboard æ¯ kubernetes éç¾¤ç web uiï¼ç¨äºç®¡çéç¾¤ã\n\n\n# å®è£\n\ngithub å°åï¼kubernetes dashboard\n\nä¸è½½éç½®æä»¶\n\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml\n\n\né»è®¤æåµä¸ï¼serviceç±»åä¸ºclusteripï¼åªè½ç¨äºéç¾¤åé¨è®¿é®ï¼è¿éæå®ä½¿ç¨"nodeport"ç±»åï¼å¹¶ä½¿ç¨åºå®ç«¯å£30001ï¼å°å¶åå¸éç¾¤å¤é¨è®¿é®\n\né¦åæ·è´å®æ¹æºæä»¶ï¼å¾å°kubernetes-dashboard.yaml\n\ncp recommended.yaml kubernetes-dashboard.yaml\n\n\nä¿®æ¹kubernetes-dashboard.yamléç½®å¦ä¸:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# copyright 2017 the kubernetes authors.\n#\n# licensed under the apache license, version 2.0 (the "license");\n# you may not use this file except in compliance with the license.\n# you may obtain a copy of the license at\n#\n#     http://www.apache.org/licenses/license-2.0\n#\n# unless required by applicable law or agreed to in writing, software\n# distributed under the license is distributed on an "as is" basis,\n# without warranties or conditions of any kind, either express or implied.\n# see the license for the specific language governing permissions and\n# limitations under the license.\n\napiversion: v1\nkind: namespace\nmetadata:\n  name: kubernetes-dashboard\n\n---\n\napiversion: v1\nkind: serviceaccount\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\n\n---\n\nkind: service\napiversion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  # ä¿®æ¹ç±»åä¸º nodeport è®¿é®\n  type: nodeport\n  ports:\n    - port: 443\n      targetport: 8443\n      # è®¾ç½®ç«¯å£å·ä¸º 30001\n      nodeport: 30001\n  selector:\n    k8s-app: kubernetes-dashboard\n\n---\n\napiversion: v1\nkind: secret\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-certs\n  namespace: kubernetes-dashboard\ntype: opaque\n\n---\n\napiversion: v1\nkind: secret\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-csrf\n  namespace: kubernetes-dashboard\ntype: opaque\ndata:\n  csrf: ""\n\n---\n\napiversion: v1\nkind: secret\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-key-holder\n  namespace: kubernetes-dashboard\ntype: opaque\n\n---\n\nkind: configmap\napiversion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard-settings\n  namespace: kubernetes-dashboard\n\n---\n\nkind: role\napiversion: rbac.authorization.k8s.io/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nrules:\n  # allow dashboard to get, update and delete dashboard exclusive secrets.\n  - apigroups: [""]\n    resources: ["secrets"]\n    resourcenames: ["kubernetes-dashboard-key-holder", "kubernetes-dashboard-certs", "kubernetes-dashboard-csrf"]\n    verbs: ["get", "update", "delete"]\n    # allow dashboard to get and update \'kubernetes-dashboard-settings\' config map.\n  - apigroups: [""]\n    resources: ["configmaps"]\n    resourcenames: ["kubernetes-dashboard-settings"]\n    verbs: ["get", "update"]\n    # allow dashboard to get metrics.\n  - apigroups: [""]\n    resources: ["services"]\n    resourcenames: ["heapster", "dashboard-metrics-scraper"]\n    verbs: ["proxy"]\n  - apigroups: [""]\n    resources: ["services/proxy"]\n    resourcenames: ["heapster", "http:heapster:", "https:heapster:", "dashboard-metrics-scraper", "http:dashboard-metrics-scraper"]\n    verbs: ["get"]\n\n---\n\nkind: clusterrole\napiversion: rbac.authorization.k8s.io/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\nrules:\n  # allow metrics scraper to get metrics from the metrics server\n  - apigroups: ["metrics.k8s.io"]\n    resources: ["pods", "nodes"]\n    verbs: ["get", "list", "watch"]\n\n---\n\napiversion: rbac.authorization.k8s.io/v1\nkind: rolebinding\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nroleref:\n  apigroup: rbac.authorization.k8s.io\n  kind: role\n  name: kubernetes-dashboard\nsubjects:\n  - kind: serviceaccount\n    name: kubernetes-dashboard\n    namespace: kubernetes-dashboard\n\n---\n\napiversion: rbac.authorization.k8s.io/v1\nkind: clusterrolebinding\nmetadata:\n  name: kubernetes-dashboard\nroleref:\n  apigroup: rbac.authorization.k8s.io\n  kind: clusterrole\n  name: kubernetes-dashboard\nsubjects:\n  - kind: serviceaccount\n    name: kubernetes-dashboard\n    namespace: kubernetes-dashboard\n\n---\n\nkind: deployment\napiversion: apps/v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  replicas: 1\n  revisionhistorylimit: 10\n  selector:\n    matchlabels:\n      k8s-app: kubernetes-dashboard\n  template:\n    metadata:\n      labels:\n        k8s-app: kubernetes-dashboard\n    spec:\n      containers:\n        - name: kubernetes-dashboard\n          # ä¿®æ¹éåå°åä¸ºé¿éäº\n          image: registry.aliyuncs.com/google_containers/dashboard:v2.2.0\n          imagepullpolicy: always\n          ports:\n            - containerport: 8443\n              protocol: tcp\n          args:\n            - --auto-generate-certificates\n            - --namespace=kubernetes-dashboard\n            # uncomment the following line to manually specify kubernetes api server host\n            # if not specified, dashboard will attempt to auto discover the api server and connect\n            # to it. uncomment only if the default does not work.\n            # - --apiserver-host=http://my-address:port\n          volumemounts:\n            - name: kubernetes-dashboard-certs\n              mountpath: /certs\n              # create on-disk volume to store exec logs\n            - mountpath: /tmp\n              name: tmp-volume\n          livenessprobe:\n            httpget:\n              scheme: https\n              path: /\n              port: 8443\n            initialdelayseconds: 30\n            timeoutseconds: 30\n          securitycontext:\n            allowprivilegeescalation: false\n            readonlyrootfilesystem: true\n            runasuser: 1001\n            runasgroup: 2001\n      volumes:\n        - name: kubernetes-dashboard-certs\n          secret:\n            secretname: kubernetes-dashboard-certs\n        - name: tmp-volume\n          emptydir: {}\n      serviceaccountname: kubernetes-dashboard\n      nodeselector:\n        "kubernetes.io/os": linux\n      # comment the following tolerations if dashboard must not be deployed on master\n      tolerations:\n        - key: node-role.kubernetes.io/master\n          effect: noschedule\n\n---\n\nkind: service\napiversion: v1\nmetadata:\n  labels:\n    k8s-app: dashboard-metrics-scraper\n  name: dashboard-metrics-scraper\n  namespace: kubernetes-dashboard\nspec:\n  ports:\n    - port: 8000\n      targetport: 8000\n  selector:\n    k8s-app: dashboard-metrics-scraper\n\n---\n\nkind: deployment\napiversion: apps/v1\nmetadata:\n  labels:\n    k8s-app: dashboard-metrics-scraper\n  name: dashboard-metrics-scraper\n  namespace: kubernetes-dashboard\nspec:\n  replicas: 1\n  revisionhistorylimit: 10\n  selector:\n    matchlabels:\n      k8s-app: dashboard-metrics-scraper\n  template:\n    metadata:\n      labels:\n        k8s-app: dashboard-metrics-scraper\n      annotations:\n        seccomp.security.alpha.kubernetes.io/pod: \'runtime/default\'\n    spec:\n      containers:\n        - name: dashboard-metrics-scraper\n          image: kubernetesui/metrics-scraper:v1.0.6\n          ports:\n            - containerport: 8000\n              protocol: tcp\n          livenessprobe:\n            httpget:\n              scheme: http\n              path: /\n              port: 8000\n            initialdelayseconds: 30\n            timeoutseconds: 30\n          volumemounts:\n            - mountpath: /tmp\n              name: tmp-volume\n          securitycontext:\n            allowprivilegeescalation: false\n            readonlyrootfilesystem: true\n            runasuser: 1001\n            runasgroup: 2001\n      serviceaccountname: kubernetes-dashboard\n      nodeselector:\n        "kubernetes.io/os": linux\n      # comment the following tolerations if dashboard must not be deployed on master\n      tolerations:\n        - key: node-role.kubernetes.io/master\n          effect: noschedule\n      volumes:\n        - name: tmp-volume\n          emptydir: {}\n\n\né¨ç½²kubernetes-dashboard\n\n# é¨ç½²\nkubectl create -f kubernetes-dashboard.yaml\n\n# æ¥ç\nkubectl -n kubernetes-dashboard get pods\nkubectl -n kubernetes-dashboard get service kubernetes-dashboard\nkubectl -n kubernetes-dashboard describe service kubernetes-dashboard\n\n# éªè¯podæ¯å¦æ­£å¸¸è¿è¡\nkubectl get pod -n kubernetes-dashboard -l k8s-app=kubernetes-dashboard\nname                                    ready   status    restarts   age\nkubernetes-dashboard-5dbf55bd9d-9f97k   1/1     running   0          68s\n\n\nä»ä¸é¢çåé¦ç»ææ¥çï¼podè¿è¡æ­£å¸¸ï¼å¹¶ä¸å·²ç»å°±ç»ªã\n\n\n# è®¿é®\n\ndashboardå·²ç»æ´é²å¨ç«¯å£30001(https)ä¸,ç°å¨å¯ä»¥ç¨æµè§å¨è¾å¥å°åï¼https://<node-ip>:<nodeport>è®¿é® dashboardï¼å ä¸ºè¯ä¹¦åå é¤ç«çæµè§å¨å¤å¶å®æµè§å¨æ æ³ç´æ¥æå¼é¡µé¢\n\nchrome æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nfirefox æµè§å¨æ¾ç¤ºå¦ä¸\n\n\n\nç¹å» æ¥åé£é©å¹¶ç»§ç»­ å³å¯æ¾ç¤ºæ¬¢è¿çé¢\n\n\n\n\n# ç»å½\n\næä»¬éç¨ token æ¹å¼ç»å½\n\næä»¬é¦åå¨kubernetes-dashboardå½åç©ºé´ä¸­åå»ºåä¸ºadmin-userçserviceaccountã\n\ncat <<eof | kubectl apply -f -\napiversion: v1\nkind: serviceaccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\neof\n\n\nä¸ºadmin-userç¨æ·åå»ºä¸ä¸ªclusterrolebinding\n\ncat <<eof | kubectl apply -f -\napiversion: rbac.authorization.k8s.io/v1\nkind: clusterrolebinding\nmetadata:\n  name: admin-user\nroleref:\n  apigroup: rbac.authorization.k8s.io\n  kind: clusterrole\n  name: cluster-admin\nsubjects:\n- kind: serviceaccount\n  name: admin-user\n  namespace: kubernetes-dashboard\neof\n\n\nè·å¾ä¸ä¸ªbearer token\n\nkubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath="{.secrets[0].name}") -o go-template="{{.data.token | base64decode}}"\n\n\nåºè¯¥æå°åºå¦ä¸åå®¹ï¼\n\neyjhbgcioijsuzi1niisimtpzci6imrnv2dkvhnrzuliru1frmlszhhmcgt3vmvmvm5pyw5bofixyvc3nhrfvm8ifq.eyjpc3mioijrdwjlcm5ldgvzl3nlcnzpy2vhy2nvdw50iiwia3vizxjuzxrlcy5pby9zzxj2awnlywnjb3vudc9uyw1lc3bhy2uioijrdwjlcm5ldgvzlwrhc2hib2fyzcisimt1ymvybmv0zxmuaw8vc2vydmljzwfjy291bnqvc2vjcmv0lm5hbwuioijhzg1pbi11c2vylxrva2vulth2djg5iiwia3vizxjuzxrlcy5pby9zzxj2awnlywnjb3vudc9zzxj2awnllwfjy291bnqubmftzsi6imfkbwlulxvzzxiilcjrdwjlcm5ldgvzlmlvl3nlcnzpy2vhy2nvdw50l3nlcnzpy2utywnjb3vudc51awqioiiymjfhywe5zi1jnjblltrlnmytyty4nc02ntm4ywu3mjywm2uilcjzdwiioijzexn0zw06c2vydmljzwfjy291bnq6a3vizxjuzxrlcy1kyxnoym9hcmq6ywrtaw4tdxnlcij9.isgz8pcjnswyahm21okd3in1ueblys0237xp6ktjbr-udpmecrwluelhceejijtrv55jas2pb2hke0lq1fyheeksgw8oiehphmm06ua59ehqit2pybls022-g63bibkdowt7dkd212ihcnqmfoho2pzqulsyflmublw47r6xereeira4kqorreyxkgt8-xyiyctxttwoxwympp7n2dey9dnb5wifqvtaaomzfvuupwnp2skdrgt_ce4n3beof_5l2d-v_hds7cmhl6odmfdgj3w8kzacsnrwz_qhsyqazytf8rbfz7t-kzkyzvlz8zfqwq4g5oc-kh6xjr8-1wk2lq\n\n\nç°å¨å¤å¶bearer tokenå¹¶å°å¶ç²è´´å°ç»å½å±å¹ä¸çè¾å¥ token *å­æ®µä¸­ãåå»ç»å½æé®å³å¯ãæ¨ç°å¨ä»¥ç®¡çåèº«ä»½ç»å½ã\n\nå·¥ä½éç¶æ\n\n\n\nnodes\n\n\n\n\n# æ¸ç\n\nç§»é¤adminserviceaccountåclusterrolebinding\n\nkubectl -n kubernetes-dashboard delete serviceaccount admin-user\nkubectl -n kubernetes-dashboard delete clusterrolebinding admin-user\n',charsets:{cjk:!0},lastUpdated:"2022/02/09, 14:16:28",lastUpdatedTimestamp:1644387388e3},{title:"æ´åäºå¹³å°ç¸å³éç½®ï¼åé¨ï¼",frontmatter:{title:"æ´åäºå¹³å°ç¸å³éç½®ï¼åé¨ï¼",date:"2022-02-09T13:37:49.000Z",permalink:"/pages/f61a3d/"},regularPath:"/22.Kubernetes/03.%E5%86%85%E9%83%A8%E5%B9%B3%E5%8F%B0%E5%AF%B9%E6%8E%A5/01.%E6%95%B4%E5%90%88%E4%BA%91%E5%B9%B3%E5%8F%B0%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%EF%BC%88%E5%86%85%E9%83%A8%EF%BC%89.html",relativePath:"22.Kubernetes/03.åé¨å¹³å°å¯¹æ¥/01.æ´åäºå¹³å°ç¸å³éç½®ï¼åé¨ï¼.md",key:"v-183d693e",path:"/pages/f61a3d/",headers:[{level:2,title:"Kubernetes è°æ´ nodePort ç«¯å£èå´",slug:"kubernetes-è°æ´-nodeport-ç«¯å£èå´",normalizedTitle:"kubernetes è°æ´ nodeport ç«¯å£èå´",charIndex:66},{level:2,title:"èªå¨æ¸çå®æç Job",slug:"èªå¨æ¸çå®æç-job",normalizedTitle:"èªå¨æ¸çå®æç job",charIndex:2883}],headersStr:"Kubernetes è°æ´ nodePort ç«¯å£èå´ èªå¨æ¸çå®æç Job",content:"# æ´åäºå¹³å°ç¸å³éç½®\n\næç¤º\n\næ¬å°èä»ä¸ºæºæ§æå­¦äºå¹³å°å¯¹æ¥k8såçå®å¶ä¼åéç½®ï¼ä¸å­¦ä¹ k8såé¨ç½²æ å³ï¼ä»å±åé¨ä½¿ç¨\n\n\n# Kubernetes è°æ´ nodePort ç«¯å£èå´\n\nsudo vim /etc/kubernetes/manifests/kube-apiserver.yaml\n\n\næ·»å --service-node-port-range=1-65535å°/etc/kubernetes/manifests/kube-apiserver.yamlç´æ¥ä¿å­å³å¯çæ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\napiVersion: v1\nkind: Pod\nmetadata:\n  annotations:\n    kubeadm.kubernetes.io/kube-apiserver.advertise-address.endpoint: 192.168.31.101:6443\n  creationTimestamp: null\n  labels:\n    component: kube-apiserver\n    tier: control-plane\n  name: kube-apiserver\n  namespace: kube-system\nspec:\n  containers:\n  - command:\n    - kube-apiserver\n    - --advertise-address=192.168.31.101\n    - --service-node-port-range=1-65535\n    - --allow-privileged=true\n    - --authorization-mode=Node,RBAC\n    - --client-ca-file=/etc/kubernetes/pki/ca.crt\n    - --enable-admission-plugins=NodeRestriction\n    - --enable-bootstrap-token-auth=true\n    - --etcd-cafile=/etc/kubernetes/pki/etcd/ca.crt\n    - --etcd-certfile=/etc/kubernetes/pki/apiserver-etcd-client.crt\n    - --etcd-keyfile=/etc/kubernetes/pki/apiserver-etcd-client.key\n    - --etcd-servers=https://127.0.0.1:2379\n    - --insecure-port=0\n    - --kubelet-client-certificate=/etc/kubernetes/pki/apiserver-kubelet-client.crt\n    - --kubelet-client-key=/etc/kubernetes/pki/apiserver-kubelet-client.key\n    - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname\n    - --proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt\n    - --proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client.key\n    - --requestheader-allowed-names=front-proxy-client\n    - --requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt\n    - --requestheader-extra-headers-prefix=X-Remote-Extra-\n    - --requestheader-group-headers=X-Remote-Group\n    - --requestheader-username-headers=X-Remote-User\n    - --secure-port=6443\n    - --service-account-issuer=https://kubernetes.default.svc.cluster.local\n    - --service-account-key-file=/etc/kubernetes/pki/sa.pub\n    - --service-account-signing-key-file=/etc/kubernetes/pki/sa.key\n    - --service-cluster-ip-range=10.96.0.0/12\n    - --feature-gates=TTLAfterFinished=true\n    - --tls-cert-file=/etc/kubernetes/pki/apiserver.crt\n    - --tls-private-key-file=/etc/kubernetes/pki/apiserver.key\n    image: registry.aliyuncs.com/google_containers/kube-apiserver:v1.20.0\n    imagePullPolicy: IfNotPresent\n    livenessProbe:\n      failureThreshold: 8\n      httpGet:\n        host: 192.168.31.101\n        path: /livez\n        port: 6443\n        scheme: HTTPS\n      initialDelaySeconds: 10\n      periodSeconds: 10\n      timeoutSeconds: 15\n    name: kube-apiserver\n    readinessProbe:\n      failureThreshold: 3\n      httpGet:\n        host: 192.168.31.101\n        path: /readyz\n        port: 6443\n        scheme: HTTPS\n      periodSeconds: 1\n      timeoutSeconds: 15\n    resources:\n\n\n\n# èªå¨æ¸çå®æç Job\n\nk8sä¹åçjobå®æåï¼å¦æä¸ç¨cronjobç®¡çï¼é½ä¸ä¼èªå¨å é¤ï¼è¯¥jobå¯¹è±¡åå¶ç¸å³çpodå¯¹è±¡é½ä¼ä¿å­ä»¥ä¾¿æ¥çè®°å½ã\n\nç¶èå¨1.12çæ¬ä¹åï¼k8sæåºäºéè¿TTLèªå¨å é¤Jobçç¹æ§ï¼å½åä»å¯¹jobçæï¼å¯¹ Complete å Failed ç¶æçJobé½ä¼èªå¨å é¤ï¼ä»¥åä¼éæ­¥å¯¹ææçå¶ä»èµæºå¯¹è±¡çæã\n\nå³äºspec.ttlSecondsAfterFinishedå±æ§çä¸ç§å«ä¹\n\nttlSecondsAfterFinished: 0 #å¨jobæ§è¡å®æ¶é©¬ä¸å é¤\nttlSecondsAfterFinished: 100 #å¨jobæ§è¡å®åï¼ç­å¾100såå é¤\n\n\nè¥ä¸è®¾ç½®ttlSecondsAfterFinishedè¿ä¸ªå±æ§åä¸ä¼èªå¨å é¤\n\næä½å®è·µ\n\nè¿ä¸ªç¹æ§ç°å¨å¨v1.12çæ¬æ¯alphaé¶æ®µï¼èä¸é»è®¤å³é­çï¼éè¦æå¨å¼å¯ã\n\néè¦ä¿®æ¹çç»ä»¶åæ¬apiserverãcontrolleråschedulerã\n\nä¿®æ¹/etc/kubernetes/manifestsä¸é¢å¯¹åºçä¸ä¸ª.yamléææä»¶ï¼å å¥- --feature-gates=TTLAfterFinished=trueå½ä»¤ï¼ç¶åä»¤å¯¹åºçpodéæ°è¿è¡å³å¯ã\n\nä¾å¦ä¿®æ¹åçkube-scheduler.yamlçspecé¨åå¦ä¸ï¼kube-apiserver.yamlåkube-controller-manager.yamlä¹å¨specé¨åå å¥- --feature-gates=TTLAfterFinished=trueå³å¯ã\n\nsudo vim /etc/kubernetes/manifests/kube-scheduler.yaml\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\napiVersion: v1\n...\nspec:\n  containers:\n  - command:\n    - kube-scheduler\n    - --authentication-kubeconfig=/etc/kubernetes/scheduler.conf\n    - --authorization-kubeconfig=/etc/kubernetes/scheduler.conf\n    - --bind-address=127.0.0.1\n    - --kubeconfig=/etc/kubernetes/scheduler.conf\n    - --leader-elect=true\n    - --port=0\n    - --feature-gates=TTLAfterFinished=true\n ...\n",normalizedContent:"# æ´åäºå¹³å°ç¸å³éç½®\n\næç¤º\n\næ¬å°èä»ä¸ºæºæ§æå­¦äºå¹³å°å¯¹æ¥k8såçå®å¶ä¼åéç½®ï¼ä¸å­¦ä¹ k8såé¨ç½²æ å³ï¼ä»å±åé¨ä½¿ç¨\n\n\n# kubernetes è°æ´ nodeport ç«¯å£èå´\n\nsudo vim /etc/kubernetes/manifests/kube-apiserver.yaml\n\n\næ·»å --service-node-port-range=1-65535å°/etc/kubernetes/manifests/kube-apiserver.yamlç´æ¥ä¿å­å³å¯çæ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\napiversion: v1\nkind: pod\nmetadata:\n  annotations:\n    kubeadm.kubernetes.io/kube-apiserver.advertise-address.endpoint: 192.168.31.101:6443\n  creationtimestamp: null\n  labels:\n    component: kube-apiserver\n    tier: control-plane\n  name: kube-apiserver\n  namespace: kube-system\nspec:\n  containers:\n  - command:\n    - kube-apiserver\n    - --advertise-address=192.168.31.101\n    - --service-node-port-range=1-65535\n    - --allow-privileged=true\n    - --authorization-mode=node,rbac\n    - --client-ca-file=/etc/kubernetes/pki/ca.crt\n    - --enable-admission-plugins=noderestriction\n    - --enable-bootstrap-token-auth=true\n    - --etcd-cafile=/etc/kubernetes/pki/etcd/ca.crt\n    - --etcd-certfile=/etc/kubernetes/pki/apiserver-etcd-client.crt\n    - --etcd-keyfile=/etc/kubernetes/pki/apiserver-etcd-client.key\n    - --etcd-servers=https://127.0.0.1:2379\n    - --insecure-port=0\n    - --kubelet-client-certificate=/etc/kubernetes/pki/apiserver-kubelet-client.crt\n    - --kubelet-client-key=/etc/kubernetes/pki/apiserver-kubelet-client.key\n    - --kubelet-preferred-address-types=internalip,externalip,hostname\n    - --proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt\n    - --proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client.key\n    - --requestheader-allowed-names=front-proxy-client\n    - --requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt\n    - --requestheader-extra-headers-prefix=x-remote-extra-\n    - --requestheader-group-headers=x-remote-group\n    - --requestheader-username-headers=x-remote-user\n    - --secure-port=6443\n    - --service-account-issuer=https://kubernetes.default.svc.cluster.local\n    - --service-account-key-file=/etc/kubernetes/pki/sa.pub\n    - --service-account-signing-key-file=/etc/kubernetes/pki/sa.key\n    - --service-cluster-ip-range=10.96.0.0/12\n    - --feature-gates=ttlafterfinished=true\n    - --tls-cert-file=/etc/kubernetes/pki/apiserver.crt\n    - --tls-private-key-file=/etc/kubernetes/pki/apiserver.key\n    image: registry.aliyuncs.com/google_containers/kube-apiserver:v1.20.0\n    imagepullpolicy: ifnotpresent\n    livenessprobe:\n      failurethreshold: 8\n      httpget:\n        host: 192.168.31.101\n        path: /livez\n        port: 6443\n        scheme: https\n      initialdelayseconds: 10\n      periodseconds: 10\n      timeoutseconds: 15\n    name: kube-apiserver\n    readinessprobe:\n      failurethreshold: 3\n      httpget:\n        host: 192.168.31.101\n        path: /readyz\n        port: 6443\n        scheme: https\n      periodseconds: 1\n      timeoutseconds: 15\n    resources:\n\n\n\n# èªå¨æ¸çå®æç job\n\nk8sä¹åçjobå®æåï¼å¦æä¸ç¨cronjobç®¡çï¼é½ä¸ä¼èªå¨å é¤ï¼è¯¥jobå¯¹è±¡åå¶ç¸å³çpodå¯¹è±¡é½ä¼ä¿å­ä»¥ä¾¿æ¥çè®°å½ã\n\nç¶èå¨1.12çæ¬ä¹åï¼k8sæåºäºéè¿ttlèªå¨å é¤jobçç¹æ§ï¼å½åä»å¯¹jobçæï¼å¯¹ complete å failed ç¶æçjobé½ä¼èªå¨å é¤ï¼ä»¥åä¼éæ­¥å¯¹ææçå¶ä»èµæºå¯¹è±¡çæã\n\nå³äºspec.ttlsecondsafterfinishedå±æ§çä¸ç§å«ä¹\n\nttlsecondsafterfinished: 0 #å¨jobæ§è¡å®æ¶é©¬ä¸å é¤\nttlsecondsafterfinished: 100 #å¨jobæ§è¡å®åï¼ç­å¾100såå é¤\n\n\nè¥ä¸è®¾ç½®ttlsecondsafterfinishedè¿ä¸ªå±æ§åä¸ä¼èªå¨å é¤\n\næä½å®è·µ\n\nè¿ä¸ªç¹æ§ç°å¨å¨v1.12çæ¬æ¯alphaé¶æ®µï¼èä¸é»è®¤å³é­çï¼éè¦æå¨å¼å¯ã\n\néè¦ä¿®æ¹çç»ä»¶åæ¬apiserverãcontrolleråschedulerã\n\nä¿®æ¹/etc/kubernetes/manifestsä¸é¢å¯¹åºçä¸ä¸ª.yamléææä»¶ï¼å å¥- --feature-gates=ttlafterfinished=trueå½ä»¤ï¼ç¶åä»¤å¯¹åºçpodéæ°è¿è¡å³å¯ã\n\nä¾å¦ä¿®æ¹åçkube-scheduler.yamlçspecé¨åå¦ä¸ï¼kube-apiserver.yamlåkube-controller-manager.yamlä¹å¨specé¨åå å¥- --feature-gates=ttlafterfinished=trueå³å¯ã\n\nsudo vim /etc/kubernetes/manifests/kube-scheduler.yaml\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ \n\n\n\napiversion: v1\n...\nspec:\n  containers:\n  - command:\n    - kube-scheduler\n    - --authentication-kubeconfig=/etc/kubernetes/scheduler.conf\n    - --authorization-kubeconfig=/etc/kubernetes/scheduler.conf\n    - --bind-address=127.0.0.1\n    - --kubeconfig=/etc/kubernetes/scheduler.conf\n    - --leader-elect=true\n    - --port=0\n    - --feature-gates=ttlafterfinished=true\n ...\n",charsets:{cjk:!0},lastUpdated:"2022/02/09, 13:47:26",lastUpdatedTimestamp:1644385646e3},{title:"æ¯æè¿ä¸ªé¡¹ç®",frontmatter:{title:"æ¯æè¿ä¸ªé¡¹ç®",date:"2020-05-12T15:09:57.000Z",permalink:"/pages/1b12ed",sidebar:!1,article:!1},regularPath:"/99.%E6%94%AF%E6%8C%81/01.%E6%94%AF%E6%8C%81.html",relativePath:"99.æ¯æ/01.æ¯æ.md",key:"v-09f5c492",path:"/pages/1b12ed/",headers:[{level:3,title:"ç¨ç±åçµ",slug:"ç¨ç±åçµ",normalizedTitle:"ç¨ç±åçµ",charIndex:2},{level:2,title:"è´è°¢",slug:"è´è°¢",normalizedTitle:"è´è°¢",charIndex:186}],headersStr:"ç¨ç±åçµ è´è°¢",content:"# ç¨ç±åçµ\n\næ¬ç«å¨é¨ææ¡£ç±ä½èå·¥ä½åå­¦ä¹ ä¸­æ¶éæ´çï¼å¦ææ¨æ­£å¨ä½¿ç¨è¿ä¸ªé¡¹ç®å¹¶æè§è¯å¥½ï¼æèæ¯æ³æ¯ææç»§ç»­å¼åï¼æ¨å¯ä»¥éè¿å¦ä¸ä»»ææ¹å¼æ¯ææï¼\n\n 1. Starå¹¶åäº« ä¸»é¢é¡¹ç® ð\n 2. ä¿çä¸»é¢ footer(é¡µè) çä¸»é¢é¾æ¥ ð\n 3. éè¿ä»¥ä¸äºç»´ç  ä¸æ¬¡æ§ææ¬¾ã æå¤åä¼ä¹°ä¸æ¯ åå¡ è¶ãðµ\n\nè°¢è°¢ï¼ â¤ï¸\n\nå¾®ä¿¡   æ¯ä»å®\n     \n\n\n# è´è°¢\n\næè°¢ç»äºæ¯æçæåï¼æ¨çæ¯ææ¯æåè¿çå¨å ð",normalizedContent:"# ç¨ç±åçµ\n\næ¬ç«å¨é¨ææ¡£ç±ä½èå·¥ä½åå­¦ä¹ ä¸­æ¶éæ´çï¼å¦ææ¨æ­£å¨ä½¿ç¨è¿ä¸ªé¡¹ç®å¹¶æè§è¯å¥½ï¼æèæ¯æ³æ¯ææç»§ç»­å¼åï¼æ¨å¯ä»¥éè¿å¦ä¸ä»»ææ¹å¼æ¯ææï¼\n\n 1. starå¹¶åäº« ä¸»é¢é¡¹ç® ð\n 2. ä¿çä¸»é¢ footer(é¡µè) çä¸»é¢é¾æ¥ ð\n 3. éè¿ä»¥ä¸äºç»´ç  ä¸æ¬¡æ§ææ¬¾ã æå¤åä¼ä¹°ä¸æ¯ åå¡ è¶ãðµ\n\nè°¢è°¢ï¼ â¤ï¸\n\nå¾®ä¿¡   æ¯ä»å®\n     \n\n\n# è´è°¢\n\næè°¢ç»äºæ¯æçæåï¼æ¨çæ¯ææ¯æåè¿çå¨å ð",charsets:{cjk:!0},lastUpdated:"2022/02/09, 17:09:54",lastUpdatedTimestamp:1644397794e3},{title:"åå®¢æç« ",frontmatter:{archivesPage:!0,title:"åå®¢æç« ",permalink:"/blog/",article:!1},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-0a72df0a",path:"/blog/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/02/08, 17:44:18",lastUpdatedTimestamp:1644313458e3},{title:"Home",frontmatter:{home:!0,heroImage:"/img/logo.png",heroText:"Javaå¨æ ",tagline:"ðæéæ æ¯ï¼æ¯å°å¯æ±ï¼ææ¯æ éï¼æ­¢äºæ¯",actionText:"äºèç½ Java å¨æ å·¥ç¨å¸ â",actionLink:"/pages/250f21/",bannerBg:"none",features:[{title:"ç­é¨æ¡æ¶æºç å­¦ä¹ ",details:"ææ¡ Intellij IDEAãMavenãBootstrapãSpringãSpring MVCãMyBatisãHttpClient ç­å·¥å·ä¸æ¡æ¶çä½¿ç¨ï¼å¹¶å¼å§å¼å¥æ¶æçæ¦å¿µï¼ä¸ºâå¾®æå¡æ¶æâé¶æ®µæä¸åå®çåºç¡"},{title:"èªå¨åå·¥å·ä¸é¢",details:"Mavené¡¹ç®å·¥å·ï¼Gitåå¸å¼çæ¬æ§å¶ï¼Sonarä»£ç è´¨éæ£æµå¹³å°ï¼Jenkins DevOpsèªå¨å"},{title:"å¾®æå¡æ¶æä¸é¢",details:"ä»åºå± Linux çå®è£å°æç» DevOps çæéæè½ãåæ¬ä½ä¸éäº Spring BootãSpring CloudãSpring Cloud AlibabaãDubboãZookeeperãRedisãELKãRabbitMQãUbuntuãDockerãKubernetesãJenkins ç­å¨æ æè½"}],postList:"none"},regularPath:"/",relativePath:"index.md",key:"v-363a61d8",path:"/",headers:[{level:2,title:"ðç¹å«ç¨æ·",slug:"ðç¹å«ç¨æ·",normalizedTitle:"ðç¹å«ç¨æ·",charIndex:14},{level:2,title:"â¡ï¸æªæ¥...",slug:"â¡ï¸æªæ¥",normalizedTitle:"â¡ï¸æªæ¥...",charIndex:646}],headersStr:"ðç¹å«ç¨æ· â¡ï¸æªæ¥...",content:"æ¯æè¿ä¸ªé¡¹ç®\n\n\n\n\n\n# ðç¹å«ç¨æ·\n\nOpenHarmony\n\nå¼æ¾åå­å¼æºåºéä¼\n\nMyBatis-Pluså®ç½\n\nðä¸ºç®åå¼åèç\n\nDeepin ç¤¾åº\n\nDeepin åºç¨å¼åææ¯åäº«ãDTKå¼åç»éªç­\n\nVFormå®ç½\n\nä½ä»£ç è¡¨åä¼éæ¹æ¡ï¼ææ½å¼è®¾è®¡ï¼ä¸é®çææºç \n\n- name: OpenHarmony\n  desc: å¼æ¾åå­å¼æºåºéä¼\n  link: https://docs.openharmony.cn/pages/000000/\n  bgColor: '#f1f1f1'\n  textColor: '#2A3344'\n- name: MyBatis-Pluså®ç½\n  desc: ðä¸ºç®åå¼åèç\n  link: https://baomidou.com/\n  bgColor: '#f1f1f1'\n  textColor: '#2A3344'\n- name: Deepin ç¤¾åº\n  desc: Deepin åºç¨å¼åææ¯åäº«ãDTKå¼åç»éªç­\n  link: https://docs.deepin.org\n  bgColor: '#f1f1f1'\n  textColor: '#2A3344'\n- name: VFormå®ç½\n  desc: ä½ä»£ç è¡¨åä¼éæ¹æ¡ï¼ææ½å¼è®¾è®¡ï¼ä¸é®çææºç \n  link: http://www.vform666.com\n  bgColor: '#f1f1f1'\n  textColor: '#2A3344'\n\n\n\n\n# â¡ï¸æªæ¥...\n\næç¤º\n\næå¾ VuePress v2.0 ä»¥å VitePress çæ­£å¼åå¸...\n\nå±æ¶ï¼VuePress 1.x ç¼è¯æ¢çç¼ºç¹å°å¾å°æå¤§çæ¹åãæå°ä¼è§æåµæä¸»é¢åçº§è³ VuePress v2.0 æ VitePressãè¿å¸æå¤§å®¶å¤å¤ ðæ¯æ åï¼æç»­å³æ³¨å§~\n\n\n\n\n\n\nHappy Wish\nNew You\nYear Luck\n2022 Tomorrow\n\n",normalizedContent:"æ¯æè¿ä¸ªé¡¹ç®\n\n\n\n\n\n# ðç¹å«ç¨æ·\n\nopenharmony\n\nå¼æ¾åå­å¼æºåºéä¼\n\nmybatis-pluså®ç½\n\nðä¸ºç®åå¼åèç\n\ndeepin ç¤¾åº\n\ndeepin åºç¨å¼åææ¯åäº«ãdtkå¼åç»éªç­\n\nvformå®ç½\n\nä½ä»£ç è¡¨åä¼éæ¹æ¡ï¼ææ½å¼è®¾è®¡ï¼ä¸é®çææºç \n\n- name: openharmony\n  desc: å¼æ¾åå­å¼æºåºéä¼\n  link: https://docs.openharmony.cn/pages/000000/\n  bgcolor: '#f1f1f1'\n  textcolor: '#2a3344'\n- name: mybatis-pluså®ç½\n  desc: ðä¸ºç®åå¼åèç\n  link: https://baomidou.com/\n  bgcolor: '#f1f1f1'\n  textcolor: '#2a3344'\n- name: deepin ç¤¾åº\n  desc: deepin åºç¨å¼åææ¯åäº«ãdtkå¼åç»éªç­\n  link: https://docs.deepin.org\n  bgcolor: '#f1f1f1'\n  textcolor: '#2a3344'\n- name: vformå®ç½\n  desc: ä½ä»£ç è¡¨åä¼éæ¹æ¡ï¼ææ½å¼è®¾è®¡ï¼ä¸é®çææºç \n  link: http://www.vform666.com\n  bgcolor: '#f1f1f1'\n  textcolor: '#2a3344'\n\n\n\n\n# â¡ï¸æªæ¥...\n\næç¤º\n\næå¾ vuepress v2.0 ä»¥å vitepress çæ­£å¼åå¸...\n\nå±æ¶ï¼vuepress 1.x ç¼è¯æ¢çç¼ºç¹å°å¾å°æå¤§çæ¹åãæå°ä¼è§æåµæä¸»é¢åçº§è³ vuepress v2.0 æ vitepressãè¿å¸æå¤§å®¶å¤å¤ ðæ¯æ åï¼æç»­å³æ³¨å§~\n\n\n\n\n\n\nhappy wish\nnew you\nyear luck\n2022 tomorrow\n\n",charsets:{cjk:!0},lastUpdated:"2022/02/10, 09:38:09",lastUpdatedTimestamp:1644457089e3},{title:"å¸¸è§é®é¢ä¸è§£å³æ¹æ¡",frontmatter:{title:"å¸¸è§é®é¢ä¸è§£å³æ¹æ¡",date:"2022-02-09T10:51:04.000Z",permalink:"/pages/7b6be8/"},regularPath:"/04.Ubuntu/02.Ubuntu%20%E4%BD%BF%E7%94%A8/05.%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html",relativePath:"04.Ubuntu/02.Ubuntu ä½¿ç¨/05.å¸¸è§é®é¢ä¸è§£å³æ¹æ¡.md",key:"v-250b49a5",path:"/pages/7b6be8/",headers:[{level:2,title:"VirtualBoxä¸­Ubuntuæ¡¥æ¥DHCPå§ç»åå°ç¸åIPå°åé®é¢",slug:"virtualboxä¸­ubuntuæ¡¥æ¥dhcpå§ç»åå°ç¸åipå°åé®é¢",normalizedTitle:"virtualboxä¸­ubuntuæ¡¥æ¥dhcpå§ç»åå°ç¸åipå°åé®é¢",charIndex:16},{level:2,title:"vi/vimæ¨¡å¼ä¸çç²è´´",slug:"vi-vimæ¨¡å¼ä¸çç²è´´",normalizedTitle:"vi/vimæ¨¡å¼ä¸çç²è´´",charIndex:442}],headersStr:"VirtualBoxä¸­Ubuntuæ¡¥æ¥DHCPå§ç»åå°ç¸åIPå°åé®é¢ vi/vimæ¨¡å¼ä¸çç²è´´",content:"# å¸¸è§é®é¢ä¸è§£å³æ¹æ¡\n\n\n# VirtualBoxä¸­Ubuntuæ¡¥æ¥DHCPå§ç»åå°ç¸åIPå°åé®é¢\n\nå¦é¢ï¼å°½ç®¡å¨åå»º/åéäºUbuntuåæ´æ¹äºMACç©çå°åï¼ä½ç³»ç»å¯å¨åå§ç»å¾å°ç¸åçIPå°åãç¾åº¦äºå¾å¤æ²¡å¾å°è§£ï¼åæ¥è°·æ­çäºäºèå¤çå¸å­ï¼æå¤åç°æä¸ªæä»¶ /etc/machine-idï¼éé¢å­æ¾äºæºå¨IDï¼å¹¶å°è¯ä¿®æ¹æä¸åå¼åï¼DHCPè½å¾å°ä¸åIPå°åäºã\n\n/etc/machine-id æ¯ä¸ä¸ªåªè¯»æä»¶ï¼æéæ¯444ï¼å³,r--r--r--ï¼ãå ç§æ¹æ³ä»»éå¶ä¸ï¼\n\n * ç´æ¥ä½¿ç¨rootå¼ºå¶ä¿å­ã\n * åchmodä¿®æ¹å¶æéï¼è®©å®å¯åï¼ç¶åä¿®æ¹å®ï¼åå°æéæ¹åã\n * sudoå°å®å é¤ï¼ç¶ååå»ºä¸ä¸ªå¹¶åå¥ä¸äºå­ç¬¦ï¼åæ¹åæéã\n\nmachine-idä¸­çå¼æ¯ä¸ä¸²å­æ¯æ°å­ç»åï¼åºè¯¥æ¯åºå®é¿åº¦ã\n\nå¦æåªä¿®æ¹å¶ä¸­ä¸ä¸ªå­ç¬¦ï¼å³ï¼æ ¼å¼ä»åæ³ï¼ï¼åç³»ç»éå¯åï¼è¯¥å¼ä¸ä¼æ¹åï¼å¦æè¡ä¹±ä¿®æ¹ä¸ä¸ï¼ä½¿å®ç¼ºå ä½ï¼å¤å ä½ï¼éæ³å­ç¬¦ç­ï¼åç³»ç»éå¯åï¼è¯¥å¼ä¼èªå¨éæ°åéã\n\n\n# vi/vimæ¨¡å¼ä¸çç²è´´\n\nå ä¸ºlinuxç³»ç»åwinç³»ç»çå·®å¼æ§ï¼ææ¶åå¨winç¯å¢è¿è¡çpythonä»£ç ä¼æ¾å¨Linuxç³»ç»ä¸æ§è¡ï¼è¿ä¸ªæ¶åå°±éè¦æwinç³»ç»ä¸IDEä¸çä»£ç copyä¸æ¥ï¼å¨Linuxæä»¶vi/wimæ¨¡å¼ä¸è¿è¡ç²è´´ï¼ä½æ¯ä¼åç°ç²è´´è¿æ¥çä»£ç å¤åºäºå¾å¤ç©ºæ ¼\n\nè¿æ¯å ä¸ºæ·è´çææ¬ä¸­å·²ç»æè¡¨ç¤ºç¼©è¿çç©ºæ ¼æèå¶è¡¨ç¬¦çè¯ï¼å®ä»¬ä¹ä¼è¢«å½æå­ç¬¦ä¸²ï¼èè¢«ç¼©è¿ï¼ä»èå½¢æå¦ä¸å¾æç¤ºçæ ·å¼\n\nè§£å³åæ³ï¼\n\n 1. å¨æ·è´åè¾å¥:set paste (è¿æ ·çè¯ï¼vimå°±ä¸ä¼å¯å¨èªå¨ç¼©è¿ï¼èåªæ¯çº¯æ·è´ç²è´´ï¼\n 2. æ·è´å®æä¹åï¼è¾å¥:set nopaste (å³é­paste)",normalizedContent:"# å¸¸è§é®é¢ä¸è§£å³æ¹æ¡\n\n\n# virtualboxä¸­ubuntuæ¡¥æ¥dhcpå§ç»åå°ç¸åipå°åé®é¢\n\nå¦é¢ï¼å°½ç®¡å¨åå»º/åéäºubuntuåæ´æ¹äºmacç©çå°åï¼ä½ç³»ç»å¯å¨åå§ç»å¾å°ç¸åçipå°åãç¾åº¦äºå¾å¤æ²¡å¾å°è§£ï¼åæ¥è°·æ­çäºäºèå¤çå¸å­ï¼æå¤åç°æä¸ªæä»¶ /etc/machine-idï¼éé¢å­æ¾äºæºå¨idï¼å¹¶å°è¯ä¿®æ¹æä¸åå¼åï¼dhcpè½å¾å°ä¸åipå°åäºã\n\n/etc/machine-id æ¯ä¸ä¸ªåªè¯»æä»¶ï¼æéæ¯444ï¼å³,r--r--r--ï¼ãå ç§æ¹æ³ä»»éå¶ä¸ï¼\n\n * ç´æ¥ä½¿ç¨rootå¼ºå¶ä¿å­ã\n * åchmodä¿®æ¹å¶æéï¼è®©å®å¯åï¼ç¶åä¿®æ¹å®ï¼åå°æéæ¹åã\n * sudoå°å®å é¤ï¼ç¶ååå»ºä¸ä¸ªå¹¶åå¥ä¸äºå­ç¬¦ï¼åæ¹åæéã\n\nmachine-idä¸­çå¼æ¯ä¸ä¸²å­æ¯æ°å­ç»åï¼åºè¯¥æ¯åºå®é¿åº¦ã\n\nå¦æåªä¿®æ¹å¶ä¸­ä¸ä¸ªå­ç¬¦ï¼å³ï¼æ ¼å¼ä»åæ³ï¼ï¼åç³»ç»éå¯åï¼è¯¥å¼ä¸ä¼æ¹åï¼å¦æè¡ä¹±ä¿®æ¹ä¸ä¸ï¼ä½¿å®ç¼ºå ä½ï¼å¤å ä½ï¼éæ³å­ç¬¦ç­ï¼åç³»ç»éå¯åï¼è¯¥å¼ä¼èªå¨éæ°åéã\n\n\n# vi/vimæ¨¡å¼ä¸çç²è´´\n\nå ä¸ºlinuxç³»ç»åwinç³»ç»çå·®å¼æ§ï¼ææ¶åå¨winç¯å¢è¿è¡çpythonä»£ç ä¼æ¾å¨linuxç³»ç»ä¸æ§è¡ï¼è¿ä¸ªæ¶åå°±éè¦æwinç³»ç»ä¸ideä¸çä»£ç copyä¸æ¥ï¼å¨linuxæä»¶vi/wimæ¨¡å¼ä¸è¿è¡ç²è´´ï¼ä½æ¯ä¼åç°ç²è´´è¿æ¥çä»£ç å¤åºäºå¾å¤ç©ºæ ¼\n\nè¿æ¯å ä¸ºæ·è´çææ¬ä¸­å·²ç»æè¡¨ç¤ºç¼©è¿çç©ºæ ¼æèå¶è¡¨ç¬¦çè¯ï¼å®ä»¬ä¹ä¼è¢«å½æå­ç¬¦ä¸²ï¼èè¢«ç¼©è¿ï¼ä»èå½¢æå¦ä¸å¾æç¤ºçæ ·å¼\n\nè§£å³åæ³ï¼\n\n 1. å¨æ·è´åè¾å¥:set paste (è¿æ ·çè¯ï¼vimå°±ä¸ä¼å¯å¨èªå¨ç¼©è¿ï¼èåªæ¯çº¯æ·è´ç²è´´ï¼\n 2. æ·è´å®æä¹åï¼è¾å¥:set nopaste (å³é­paste)",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3},{title:"Ubuntu éç½®éæipåå¨æip",frontmatter:{title:"Ubuntu éç½®éæipåå¨æip",date:"2022-02-09T10:56:45.000Z",permalink:"/pages/63ed35/"},regularPath:"/04.Ubuntu/02.Ubuntu%20%E4%BD%BF%E7%94%A8/04.Ubuntu%20%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81ip%E5%92%8C%E5%8A%A8%E6%80%81ip.html",relativePath:"04.Ubuntu/02.Ubuntu ä½¿ç¨/04.Ubuntu éç½®éæipåå¨æip.md",key:"v-2617300a",path:"/pages/63ed35/",headers:[{level:2,title:"ubuntu18.04 éç½®éæip",slug:"ubuntu18-04-éç½®éæip",normalizedTitle:"ubuntu18.04 éç½®éæip",charIndex:31},{level:2,title:"ubuntu18.04 éç½®å¨æip",slug:"ubuntu18-04-éç½®å¨æip",normalizedTitle:"ubuntu18.04 éç½®å¨æip",charIndex:1713}],headersStr:"ubuntu18.04 éç½®éæip ubuntu18.04 éç½®å¨æip",content:"# Ubuntu 18.04 éç½®éæipåå¨æip\n\n\n# ubuntu18.04 éç½®éæip\n\nubuntu18.04 éç¨çæ¯netplanæ¥ç®¡çnetworkãé¦åæä»¬è¿å¥å°/etc/netplanç®å½ä¸ï¼æ¥æ¾é»è®¤çç½ç»éç½®æä»¶ï¼æä»¶åæä¸º.yamlãæè¿éé»è®¤çéç½®æä»¶åä¸ºï¼00-installer-config.yaml\n\n\n\n\nÂ \n\n\nroot@heyuqiang:/etc/netplan# cd /etc/netplan\nroot@heyuqiang:/etc/netplan# ls\n00-installer-config.yaml\n\n\nç¼è¾ç½ç»éç½®æä»¶ä¹åï¼åæ¥çèªå·±çç½å¡åç§°ï¼æçæ¯ens160ã\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nroot@heyuqiang:/etc/netplan# ifconfig\nens160: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 192.168.1.100  netmask 255.255.0.0  broadcast 10.17.255.255\n        inet6 fe80::20c:29ff:fe85:5736  prefixlen 64  scopeid 0x20<link>\n        ether 00:0c:29:85:57:36  txqueuelen 1000  (Ethernet)\n        RX packets 11068  bytes 7835851 (7.8 MB)\n        RX errors 0  dropped 496  overruns 0  frame 0\n        TX packets 1626  bytes 137807 (137.8 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10<host>\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 106  bytes 8598 (8.5 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 106  bytes 8598 (8.5 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n\nç¼è¾ç½ç»éç½®æä»¶00-installer-config.yamlï¼åå®¹å¦ä¸ï¼\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n# Let NetworkManager manage all devices on this system\nnetwork:\n  version: 2\n  ethernets:\n     ens160: #éç½®çç½å¡åç§°,ä½¿ç¨ifconfig -aæ¥çå¾å°\n       dhcp4: no #dhcp4å³é­\n       addresses: [192.168.1.100/24] #è®¾ç½®æ¬æºIPåæ©ç \n       gateway4: 192.168.1.1 #è®¾ç½®ç½å³\n       nameservers:\n         addresses: [192.168.1.1] #è®¾ç½®DNS\n\n\nä½¿ç¨å½ä»¤ï¼ä½¿éæipçæã\n\nsudo netplan apply\n\n\nç¼è¾ç½ç»éç½®æä»¶ä¹åï¼ä½¿ç¨ifconfigå½ä»¤æ¥çéç½®æåµï¼å¦æéç½®æåä¸å¾ä¸­ipä¼åæèªå·±è®¾ç½®çipã\n\n\n# ubuntu18.04 éç½®å¨æip\n\nä¿®æ¹ç½ç»éç½®æä»¶çåå®¹å¦ä¸ï¼\n\n\n\n\n\n\nÂ \n\n\n\n# This is the network config written by 'subiquity'\nnetwork:\n  ethernets:\n    ens160:\n      dhcp4: true\n  version: 2\n\n\nä½¿ç¨å½ä»¤ï¼ä½¿å¨æipçæã\n\nsudo netplan apply\n\n\nä¹ååä½¿ç¨ifconfigå½ä»¤æ¥çéç½®æåµï¼å¦æéç½®æåä¸å¾ä¸­ipä¼åæå¨æçipã",normalizedContent:"# ubuntu 18.04 éç½®éæipåå¨æip\n\n\n# ubuntu18.04 éç½®éæip\n\nubuntu18.04 éç¨çæ¯netplanæ¥ç®¡çnetworkãé¦åæä»¬è¿å¥å°/etc/netplanç®å½ä¸ï¼æ¥æ¾é»è®¤çç½ç»éç½®æä»¶ï¼æä»¶åæä¸º.yamlãæè¿éé»è®¤çéç½®æä»¶åä¸ºï¼00-installer-config.yaml\n\n\n\n\nÂ \n\n\nroot@heyuqiang:/etc/netplan# cd /etc/netplan\nroot@heyuqiang:/etc/netplan# ls\n00-installer-config.yaml\n\n\nç¼è¾ç½ç»éç½®æä»¶ä¹åï¼åæ¥çèªå·±çç½å¡åç§°ï¼æçæ¯ens160ã\n\n\n\nÂ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nroot@heyuqiang:/etc/netplan# ifconfig\nens160: flags=4163<up,broadcast,running,multicast>  mtu 1500\n        inet 192.168.1.100  netmask 255.255.0.0  broadcast 10.17.255.255\n        inet6 fe80::20c:29ff:fe85:5736  prefixlen 64  scopeid 0x20<link>\n        ether 00:0c:29:85:57:36  txqueuelen 1000  (ethernet)\n        rx packets 11068  bytes 7835851 (7.8 mb)\n        rx errors 0  dropped 496  overruns 0  frame 0\n        tx packets 1626  bytes 137807 (137.8 kb)\n        tx errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73<up,loopback,running>  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10<host>\n        loop  txqueuelen 1000  (local loopback)\n        rx packets 106  bytes 8598 (8.5 kb)\n        rx errors 0  dropped 0  overruns 0  frame 0\n        tx packets 106  bytes 8598 (8.5 kb)\n        tx errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n\nç¼è¾ç½ç»éç½®æä»¶00-installer-config.yamlï¼åå®¹å¦ä¸ï¼\n\n\n\n\n\n\n\nÂ \nÂ \nÂ \nÂ \nÂ \n\n\n# let networkmanager manage all devices on this system\nnetwork:\n  version: 2\n  ethernets:\n     ens160: #éç½®çç½å¡åç§°,ä½¿ç¨ifconfig -aæ¥çå¾å°\n       dhcp4: no #dhcp4å³é­\n       addresses: [192.168.1.100/24] #è®¾ç½®æ¬æºipåæ©ç \n       gateway4: 192.168.1.1 #è®¾ç½®ç½å³\n       nameservers:\n         addresses: [192.168.1.1] #è®¾ç½®dns\n\n\nä½¿ç¨å½ä»¤ï¼ä½¿éæipçæã\n\nsudo netplan apply\n\n\nç¼è¾ç½ç»éç½®æä»¶ä¹åï¼ä½¿ç¨ifconfigå½ä»¤æ¥çéç½®æåµï¼å¦æéç½®æåä¸å¾ä¸­ipä¼åæèªå·±è®¾ç½®çipã\n\n\n# ubuntu18.04 éç½®å¨æip\n\nä¿®æ¹ç½ç»éç½®æä»¶çåå®¹å¦ä¸ï¼\n\n\n\n\n\n\nÂ \n\n\n\n# this is the network config written by 'subiquity'\nnetwork:\n  ethernets:\n    ens160:\n      dhcp4: true\n  version: 2\n\n\nä½¿ç¨å½ä»¤ï¼ä½¿å¨æipçæã\n\nsudo netplan apply\n\n\nä¹ååä½¿ç¨ifconfigå½ä»¤æ¥çéç½®æåµï¼å¦æéç½®æåä¸å¾ä¸­ipä¼åæå¨æçipã",charsets:{cjk:!0},lastUpdated:"2022/02/09, 11:02:52",lastUpdatedTimestamp:1644375772e3}],themeConfig:{nav:[{text:"é¦é¡µ",link:"/"},{text:"æå",items:[{text:"åºç¡",items:[{text:"åºç¡è®¾æ½å³æå¡",link:"/pages/250f21/"},{text:"å¹³å°å³æå¡",link:"/pages/f04654/"},{text:"å¾®æå¡è§£å³å¤æé®é¢",link:"/pages/58bcba/"},{text:"Spring Cloud",link:"/pages/b05793/"},{text:"Spring Cloud Alibaba",link:"/pages/1946f3/"}]},{text:"é«çº§",items:[{text:"Docker",link:"/pages/aeaf26/"},{text:"Kubernetes",link:"/pages/059418/"}]},{text:"ä¸é¢",items:[{text:"Spring Security OAuth2",link:"/pages/fbef9a/"},{text:"ä¼ä¸çº§ DevOps CI/CDå®è·µ",link:"/pages/72ccd6/"},{text:"Simplify Docs",link:"/pages/d49c54/"}]}]},{text:"å¨çº¿ææ¡£",items:[{text:"åç«¯ææ¡£",items:[{text:"Element - ç½ç«å¿«éæåå·¥å·",link:"https://element.eleme.cn/#/zh-CN"},{text:"Lodash Documentation",link:"https://lodash.com/docs/#defaultsDeep"},{text:"Nuxt.js - Vue.js éç¨åºç¨æ¡æ¶",link:"https://zh.nuxtjs.org"},{text:"Vue.js",link:"https://cn.vuejs.org/v2/api/"},{text:"Vue CLI",link:"https://cli.vuejs.org/zh/"},{text:"Vuex",link:"https://vuex.vuejs.org/zh/api/#vuex-store"},{text:"VuePress ä¸­æææ¡£",link:"https://www.vuepress.cn"}]},{text:"åç«¯ææ¡£",items:[{text:"Google Guavaå®æ¹æç¨",link:"https://ifeve.com/google-guava/"},{text:"Docker Documentation",link:"https://docs.docker.com/"}]}]},{text:"å¨çº¿å·¥å·",items:[{text:"å¨çº¿ç¼è¾",items:[{text:"å¨çº¿ç½æ¿",link:"https://excalidraw.com/"},{text:"JSON ç¼è¾å¨",link:"https://www.bejson.com/jsoneditoronline"},{text:"MD è¡¨æ ¼çæ",link:"https://tableconvert.com/"},{text:"CRON è¡¨è¾¾å¼",link:"http://cron.qqe2.com/"},{text:"ä»£ç æ ¼å¼å",link:"https://tool.oschina.net/codeformat/html"},{text:"äºç»´ç çæå¨",link:"https://cli.im/"},{text:"å¨çº¿ç¼ç è½¬æ¢",link:"http://tool.chinaz.com/tools/native_ascii.aspx"}]},{text:"å¨çº¿æå¡",items:[{text:"æµç¨å¾æç»´å¯¼å¾",link:"https://www.processon.com"},{text:"ç»å¾å·¥å·",link:"https://excalidraw.com"}]},{text:"å¼æºéå",items:[{text:"OPSXéåç«",link:"https://developer.aliyun.com/mirror/"},{text:"AZUREéåç«",link:"https://mirror.azure.cn/"},{text:"Docker Hub",link:"https://hub.docker.com/"}]}]},{text:"ðæ¯æ",link:"/pages/1b12ed/"},{text:"è¿åæ§ç",link:"https://www.pigcs.com/"}],sidebarDepth:2,logo:"/img/logo.png",repo:"xugaoyi/vuepress-theme-vdoing",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",sidebar:{"/01.æå/":[{title:"åºç¡",collapsable:!1,children:[["01.åºç¡/01.åºç¡è®¾æ½å³æå¡.md","åºç¡è®¾æ½å³æå¡","/pages/250f21/"],["01.åºç¡/02.å¹³å°å³æå¡.md","å¹³å°å³æå¡","/pages/f04654/"],["01.åºç¡/03.å¾®æå¡è§£å³å¤æé®é¢.md","å¾®æå¡è§£å³å¤æé®é¢","/pages/58bcba/"],["01.åºç¡/04.Spring Cloud.md","Spring Cloud","/pages/b05793/"],["01.åºç¡/05.Spring Cloud Alibaba.md","Spring Cloud Alibaba","/pages/1946f3/"]]},{title:"é«çº§",collapsable:!1,children:[["02.é«çº§/01.Docker.md","Docker","/pages/aeaf26/"],["02.é«çº§/02.Kubernetes.md","Kubernetes","/pages/059418/"]]},{title:"ä¸é¢",collapsable:!1,children:[["03.ä¸é¢/01.Spring Security OAuth2.md","Spring Security OAuth2","/pages/fbef9a/"],["03.ä¸é¢/02.ä¼ä¸çº§ DevOps å®è·µ.md","ä¼ä¸çº§ DevOps CI/CDå®è·µ","/pages/72ccd6/"]]}],catalogue:{},"/02.Linux/":[{title:"Linux",collapsable:!1,children:[["01.Linux/01.Linux ç®ä».md","Linux ç®ä»","/pages/202ee1/"],["01.Linux/02.Linux ä¸ Windows æ¯è¾.md","Linux ä¸ Windows æ¯è¾","/pages/715f2d/"],["01.Linux/03.Linux è¿ç¨æ§å¶ç®¡ç.md","Linux è¿ç¨æ§å¶ç®¡ç","/pages/56abb4/"],["01.Linux/04.Linux çç®å½ç»æ.md","Linux çç®å½ç»æ","/pages/1e9034/"],["01.Linux/05.Linux æä½æä»¶ç®å½.md","Linux æä½æä»¶ç®å½","/pages/8ad474/"],["01.Linux/06.Linux ç³»ç»ç®¡çå½ä»¤.md","Linux ç³»ç»ç®¡çå½ä»¤","/pages/6f8d47/"],["01.Linux/07.Linux å¼å³æºå½ä»¤.md","Linux å¼å³æºå½ä»¤","/pages/ef1cfd/"],["01.Linux/08.Linux åç¼©å½ä»¤.md","Linux åç¼©å½ä»¤","/pages/657e76/"],["01.Linux/09.Linux ç¼è¾å¨.md","Linux ç¼è¾å¨","/pages/287d9f/"],["01.Linux/10.Linux è½¯ä»¶åç®¡ç.md","Linux è½¯ä»¶åç®¡ç","/pages/0d3526/"],["01.Linux/11.Linux ç¨æ·åç»ç®¡ç.md","Linux ç¨æ·åç»ç®¡ç","/pages/037bdb/"],["01.Linux/12.Linux æä»¶æéç®¡ç.md","Linux æä»¶æéç®¡ç","/pages/c29423/"],["01.Linux/13.Linux LVM ç£çæ©å®¹.md","Linux LVM ç£çæ©å®¹","/pages/6afa9f/"]]}],"/03.CentOS/":[{title:"å¥é¨",collapsable:!1,children:[["01.å¥é¨/01.ä»ä¹æ¯ CentOS.md","ä»ä¹æ¯ CentOS","/pages/8eb38e/"],["01.å¥é¨/02.CentOS 7 ä¸­ä½¿ç¨é¿éäºçyumæº.md","CentOS 7 ä¸­ä½¿ç¨é¿éäºçyumæº","/pages/4d8bf7/"],["01.å¥é¨/03.CentOS 7 è®¾ç½® SSH éè¿å¯é¥ç»å½.md","CentOS 7 è®¾ç½® SSH éè¿å¯é¥ç»å½","/pages/801448/"],["01.å¥é¨/04.CentOS 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥.md","CentOS 7 æ¶é´ä¸ç½ç»æ¶é´åæ­¥","/pages/72cb23/"],["01.å¥é¨/05.CentOS 7 å®è£Jdkå¹¶éç½®ç¯å¢åé.md","CentOS 7 å®è£Jdkå¹¶éç½®ç¯å¢åé","/pages/b65cee/"],["01.å¥é¨/06.CentOS 7 éç½®éæipåå¨æip.md","CentOS 7 éç½®éæipåå¨æip","/pages/8a00d6/"],["01.å¥é¨/07.CentOS 7 å®è£ Nginx.md","CentOS 7 å®è£ Nginx","/pages/2bd107/"],["01.å¥é¨/08.CentOS 7 å®è£ Tomcat.md","CentOS 7 å®è£ Tomcat","/pages/b0c71d/"],["01.å¥é¨/09.CentOS 7 å®è£ MySQL.md","CentOS 7 å®è£ MySQL","/pages/3748a2/"],["01.å¥é¨/10.CentOS 7 å®è£ MongoDB.md","CentOS 7 å®è£ MongoDB","/pages/866b2e/"],["01.å¥é¨/11.CentOS 7 å®è£ NodeJS.md","CentOS 7 å®è£ NodeJS","/pages/39ed97/"],["01.å¥é¨/12.CentOS 7 å®è£ Gitlab.md","CentOS 7 å®è£ Gitlab","/pages/5cddbb/"],["01.å¥é¨/13.CentOS 7 å®è£ SonarQube.md","CentOS 7 å®è£ SonarQube","/pages/1dfc9f/"],["01.å¥é¨/14.CentOS 7 å®è£ Jenkins.md","CentOS 7 å®è£ Jenkins","/pages/893d19/"],["01.å¥é¨/15.CentOS 7 å®è£ Redis.md","CentOS 7 å®è£ Redis","/pages/54c917/"],["01.å¥é¨/16.CentOS 7 å®è£ TigerVNC Server.md","CentOS 7 å®è£ TigerVNC Server","/pages/8c6aad/"],["01.å¥é¨/17.CentOS 7 å®è£ NFS.md","CentOS 7 å®è£ NFS","/pages/50595e/"]]},{title:"é«çº§",collapsable:!1,children:[["02.é«çº§/01.CentOS7 LVMæä½å®æ.md","CentOS7 LVMæä½å®æ","/pages/619aa3/"]]},{title:"å®æ",collapsable:!1,children:[["03.å®æ/01.é¨ç½²åå°portal-webé¡¹ç®.md","é¨ç½²åå°portal-webé¡¹ç®","/pages/1b51c8/"],["03.å®æ/02.é¨ç½²åç«¯ITPé¡¹ç®.md","é¨ç½²åç«¯ITPé¡¹ç®","/pages/7ba23c/"]]}],"/04.Ubuntu/":[{title:"Ubuntu",collapsable:!1,children:[["01.Ubuntu/01.ä»ä¹æ¯ Ubuntu.md","ä»ä¹æ¯ Ubuntu","/pages/49420c/"]]},{title:"Ubuntu ä½¿ç¨",collapsable:!1,children:[["02.Ubuntu ä½¿ç¨/01.Ubuntu å®è£æç¨.md","Ubuntu å®è£æç¨","/pages/075d45/"],["02.Ubuntu ä½¿ç¨/02.Ubuntu æ´æ¢å½åæº.md","Ubuntu æ´æ¢å½åæº","/pages/5d8a7e/"],["02.Ubuntu ä½¿ç¨/03.Ubuntu å¼åç¯å¢åééç½®.md","Ubuntu å¼åç¯å¢åééç½®","/pages/65555a/"],["02.Ubuntu ä½¿ç¨/04.Ubuntu éç½®éæipåå¨æip.md","Ubuntu éç½®éæipåå¨æip","/pages/63ed35/"],["02.Ubuntu ä½¿ç¨/05.å¸¸è§é®é¢ä¸è§£å³æ¹æ¡.md","å¸¸è§é®é¢ä¸è§£å³æ¹æ¡","/pages/7b6be8/"]]}],"/05.MacOS/":[{title:"macOS",collapsable:!1,children:[["01.macOS/01.macOSå¼åç¯å¢å®è£.md","macOSå¼åç¯å¢å®è£","/pages/d6e0ac/"],["01.macOS/02.macOSç»ç«¯å©å¨iTerm2.md","macOSç»ç«¯å©å¨iTerm2","/pages/3b1a68/"],["01.macOS/03.macOSèªå¸¦ç»ç«¯ç¾å.md","macOSèªå¸¦ç»ç«¯ç¾å","/pages/078f4d/"],["01.macOS/04.macOSå¸¸ç¨è½¯ä»¶.md","macOSå¸¸ç¨è½¯ä»¶","/pages/9ee77d/"]]}],"/06.GitLab/":[{title:"GitLab",collapsable:!1,children:[["01.GitLab/01.ä»ä¹æ¯ Git.md","ä»ä¹æ¯ Git","/pages/22c758/"],["01.GitLab/02.å®è£ Git.md","å®è£ Git","/pages/75dfd9/"],["01.GitLab/03.Git çä¸è¬å·¥ä½æµç¨.md","Git çä¸è¬å·¥ä½æµç¨","/pages/8383bb/"],["01.GitLab/04.Git çåºæ¬æä½.md","Git çåºæ¬æä½","/pages/20e9b1/"],["01.GitLab/05.TortoiseGit ç®å Git æä½.md","TortoiseGit ç®å Git æä½","/pages/7eca40/"],["01.GitLab/06.ä»ä¹æ¯ GitLab.md","ä»ä¹æ¯ GitLab","/pages/89c106/"],["01.GitLab/07.åºäº Docker å®è£ GitLab.md","åºäº Docker å®è£ GitLab","/pages/ffc177/"],["01.GitLab/08.GitLab çåºæ¬è®¾ç½®.md","GitLab çåºæ¬è®¾ç½®","/pages/655544/"],["01.GitLab/09.GitLab çè´¦æ·ç®¡ç.md","GitLab çè´¦æ·ç®¡ç","/pages/0ba162/"],["01.GitLab/10.GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®.md","GitLab åå»ºç¬¬ä¸ä¸ªé¡¹ç®","/pages/aa27ff/"],["01.GitLab/11.GitLab ä½¿ç¨ SSH åå¯ç»å½.md","GitLab ä½¿ç¨ SSH åå¯ç»å½","/pages/2b230d/"]]}],"/07.Nexus/":[{title:"Nexus",collapsable:!1,children:[["01.Nexus/01.ä»ä¹æ¯ Nexus.md","ä»ä¹æ¯ Nexus","/pages/ceff17/"],["01.Nexus/02.åºäº Docker å®è£ Nexus.md","åºäº Docker å®è£ Nexus","/pages/dc57a4/"],["01.Nexus/03.Nexuséç½®é¿éäºä»£çä»åº.md","Nexuséç½®é¿éäºä»£çä»åº","/pages/159c7d/"],["01.Nexus/04.Maven ä»åºä»ç».md","Maven ä»åºä»ç»","/pages/ee14ce/"],["01.Nexus/05.å¨é¡¹ç®ä¸­ä½¿ç¨ Maven ç§æ.md","å¨é¡¹ç®ä¸­ä½¿ç¨ Maven ç§æ","/pages/433dea/"],["01.Nexus/06.Maven pomæä»¶æ ç­¾å¤§å¨è¯¦è§£.md","Maven pomæä»¶æ ç­¾å¤§å¨è¯¦è§£","/pages/d1f496/"],["01.Nexus/07.å°é¡¹ç®æ¨éå° Maven ä¸­å¤®ä»åºå®è·µ.md","å°é¡¹ç®æ¨éå° Maven ä¸­å¤®ä»åºå®è·µ","/pages/f28aa7/"]]}],"/08.Registry/":[{title:"Registry",collapsable:!1,children:[["01.Registry/01.å®è£ Docker Registry ç§æ.md","å®è£ Docker Registry ç§æ","/pages/654ea2/"],["01.Registry/02.éç½® Docker Registry å®¢æ·ç«¯.md","éç½® Docker Registry å®¢æ·ç«¯","/pages/87fa6f/"],["01.Registry/03.é¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨.md","é¨ç½² Harbor ä¼ä¸çº§Registryæå¡å¨","/pages/22b02b/"],["01.Registry/04.é¨ç½² Docker å¯è§åç®¡çå·¥å·Portainer.md","é¨ç½² Docker å¯è§åç®¡çå·¥å·Portainer","/pages/7ad507/"]]}],"/09.Redis/":[{title:"Redis",collapsable:!1,children:[["01.Redis/01.Redis ç®ä».md","Redis ç®ä»","/pages/5b81e8/"],["01.Redis/02.åºäºæºç ç¼è¯å®è£ Redis.md","åºäºæºç ç¼è¯å®è£ Redis","/pages/3f32a2/"],["01.Redis/03.åºäº Docker å®è£ Redis.md","åºäº Docker å®è£ Redis","/pages/7a3c10/"]]}],"/10.Nginx/":[{title:"Nginx",collapsable:!1,children:[["01.Nginx/01.ä»ä¹æ¯ Nginx.md","ä»ä¹æ¯ Nginx","/pages/8c9288/"],["01.Nginx/02.Nginx å®è£SSLè¯ä¹¦.md","Nginx å®è£SSLè¯ä¹¦","/pages/df904c/"],["01.Nginx/03.Nginx å¼å¯gzipåç¼©.md","Nginx å¼å¯gzipåç¼©","/pages/73e9ae/"],["01.Nginx/04.Nginx locationæ­£ååæ³.md","Nginx locationæ­£ååæ³","/pages/9d4443/"]]}],"/11.MongoDB/":[{title:"MongoDB",collapsable:!1,children:[["01.MongoDB/01.ä»ä¹æ¯MongoDB.md","ä»ä¹æ¯MongoDB","/pages/035a1b/"],["01.MongoDB/02.CentOS7 ç¦»çº¿å®è£MongoDB.md","CentOS7 ç¦»çº¿å®è£MongoDB","/pages/25c76e/"]]}],"/12.MinIO/":[{title:"Minioæå¡å¨",collapsable:!1,children:[["01.Minioæå¡å¨/01.Minioå¿«éå¥é¨æå.md","Minioå¿«éå¥é¨æå","/pages/76dc6a/"],["01.Minioæå¡å¨/02.Minio Dockerå¿«éå¥é¨.md","Minio Dockerå¿«éå¥é¨","/pages/0cd85f/"],["01.Minioæå¡å¨/03.Minioçº å ç å¿«éå¥é¨.md","Minioçº å ç å¿«éå¥é¨","/pages/6bd2f8/"],["01.Minioæå¡å¨/04.åå¸å¼Minioå¿«éå¥é¨.md","åå¸å¼Minioå¿«éå¥é¨","/pages/8153b1/"],["01.Minioæå¡å¨/05.å¦ä½ä½¿ç¨ TLS ä¿æ¤å¯¹ MinIO æå¡å¨çè®¿é®.md","å¦ä½ä½¿ç¨ TLS ä¿æ¤å¯¹ MinIO æå¡å¨çè®¿é®","/pages/98cf59/"],["01.Minioæå¡å¨/06.Minioå­å¨æ¡¶éç¥æå.md","Minioå­å¨æ¡¶éç¥æå","/pages/50e89b/"],["01.Minioæå¡å¨/07.Minioæå¡éå¶ç§æ·.md","Minioæå¡éå¶ç§æ·","/pages/f9e3a2/"],["01.Minioæå¡å¨/08.Minio Serveréç½®æå.md","Minio Serveréç½®æå","/pages/625c17/"],["01.Minioæå¡å¨/09.Minioå¤ç§æ·ï¼Multi-tenantï¼é¨ç½²æå.md","Minioå¤ç§æ·ï¼Multi-tenantï¼é¨ç½²æå","/pages/9b5f74/"]]},{title:"Minioå®¢æ·ç«¯å¿«éå¥é¨æå",collapsable:!1,children:[["02.Minioå®¢æ·ç«¯å¿«éå¥é¨æå/01.Minioå®¢æ·ç«¯å¿«éå¥é¨æå.md","Minioå®¢æ·ç«¯å¿«éå¥é¨æå","/pages/17c975/"],["02.Minioå®¢æ·ç«¯å¿«éå¥é¨æå/02.Minio Clientå®å¨æå.md","Minio Clientå®å¨æå","/pages/538f88/"]]},{title:"Minio SDKs",collapsable:!1,children:[["03.Minio SDKs/01.Java Clientå¿«éå¥é¨æå.md","Java Clientå¿«éå¥é¨æå","/pages/53a165/"],["03.Minio SDKs/02.Java Client APIåèææ¡£.md","Java Client APIåèææ¡£","/pages/b8b311/"]]},{title:"å®æç§ç±",collapsable:!1,children:[["04.å®æç§ç±/01.ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦.md","ä½¿ç¨CertbotçæLet's Encryptè¯ä¹¦","/pages/4a395a/"],["04.å®æç§ç±/02.ä½¿ç¨ MinIO æå¡å¨è®¾ç½® Nginx ä»£ç.md","ä½¿ç¨ MinIO æå¡å¨è®¾ç½® Nginx ä»£ç","/pages/7acf5a/"]]},{title:"Minioé¨ç½²",collapsable:!1,children:[["05.Minioé¨ç½²/01.Minioé¨ç½²å¿«éå¥é¨.md","Minioé¨ç½²å¿«éå¥é¨","/pages/542516/"],["05.Minioé¨ç½²/02.ä½¿ç¨Docker Swarmé¨ç½²Minio.md","ä½¿ç¨Docker Swarmé¨ç½²Minio","/pages/b1ea49/"],["05.Minioé¨ç½²/03.ä½¿ç¨Kubernetesé¨ç½²Minio.md","ä½¿ç¨Kubernetesé¨ç½²Minio","/pages/01eafc/"],["05.Minioé¨ç½²/04.å¨ Docker Compose ä¸é¨ç½² MinIO.md","å¨ Docker Compose ä¸é¨ç½² MinIO","/pages/46c251/"]]}],"/13.RabbitMQ/":[{title:"å¿«éå¥é¨",collapsable:!1,children:[["01.å¿«éå¥é¨/01.RabbitMQ ç®ä».md","RabbitMQ ç®ä»","/pages/d710e9/"],["01.å¿«éå¥é¨/02.RabbitMQ å¿«éå¥é¨.md","RabbitMQ å¿«éå¥é¨","/pages/1a684e/"],["01.å¿«éå¥é¨/03.RabbitMQ æ¶æ¯æ¨¡å.md","RabbitMQ æ¶æ¯æ¨¡å","/pages/05a61a/"],["01.å¿«éå¥é¨/04.Springæ´åRabbitMQ.md","Springæ´åRabbitMQ","/pages/36085c/"]]},{title:"é«çº§ç¨æ³",collapsable:!1,children:[["02.é«çº§ç¨æ³/01.TTLéå_æ­»ä¿¡éå.md","TTLéå_æ­»ä¿¡éå","/pages/c5c502/"]]}],"/14.å¾®æå¡/":[{title:"å¾®æå¡ç®ä»",collapsable:!1,children:[["01.å¾®æå¡ç®ä»/01.æå»ºåä½åºç¨æ¨¡å.md","æå»ºåä½åºç¨æ¨¡å","/pages/593778/"],["01.å¾®æå¡ç®ä»/02.èµ°ååä½å°ç±.md","èµ°ååä½å°ç±","/pages/72d00f/"],["01.å¾®æå¡ç®ä»/03.å¾®æå¡-è§£å³å¤æé®é¢.md","å¾®æå¡-è§£å³å¤æé®é¢","/pages/0b2d6e/"],["01.å¾®æå¡ç®ä»/04.å¾®æå¡çä¼ç¹.md","å¾®æå¡çä¼ç¹","/pages/47dac2/"],["01.å¾®æå¡ç®ä»/05.å¾®æå¡çç¼ºç¹.md","å¾®æå¡çç¼ºç¹","/pages/fb92c3/"]]}],"/15.Spring Cloud Gateway/":[{title:"Spring Cloud Gateway",collapsable:!1,children:[["01.Spring Cloud Gateway/01.Spring Cloud ä¹ Gateway.md","Spring Cloud ä¹ Gateway","/pages/aa8849/"],["01.Spring Cloud Gateway/02.Spring Cloud Gateway éç½®å¤§å¨.md","Spring Cloud Gateway éç½®å¤§å¨","/pages/f0610e/"],["01.Spring Cloud Gateway/03.Spring Cloud Gateway ä¸­æå®ç½ææ¡£.md","Spring Cloud Gateway ä¸­æå®ç½ææ¡£","/pages/f7b8bf/"]]}],"/16.Spring Cloud Alibaba/":[{title:"Spring Cloud Alibaba",collapsable:!1,children:[["01.Spring Cloud Alibaba/01.ç®ä».md","ç®ä»","/pages/b62716/"],["01.Spring Cloud Alibaba/02.æå¡æ³¨åä¸åç°.md","æå¡æ³¨åä¸åç°","/pages/e48516/"],["01.Spring Cloud Alibaba/03.Nacos discovery.md","Nacos discovery","/pages/01bdf6/"],["01.Spring Cloud Alibaba/04.Nacos config.md","Nacos config","/pages/3a1e7d/"]]}],"/17.Docker/":[{title:"Docker",collapsable:!1,children:[["01.Docker/01.ä»ä¹æ¯ Docker.md","ä»ä¹æ¯ Docker","/pages/555c55/"],["01.Docker/02.ä¸ºä»ä¹è¦ä½¿ç¨ Docker.md","ä¸ºä»ä¹è¦ä½¿ç¨ Docker","/pages/d1d9db/"]]},{title:"Docker åºæ¬æ¦å¿µ",collapsable:!1,children:[["02.Docker åºæ¬æ¦å¿µ/01.Docker åºæ¬æ¦å¿µ.md","Docker åºæ¬æ¦å¿µ","/pages/ad1da1/"],["02.Docker åºæ¬æ¦å¿µ/02.Docker å¼æ.md","Docker å¼æ","/pages/77a885/"],["02.Docker åºæ¬æ¦å¿µ/03.Docker ç³»ç»æ¶æ.md","Docker ç³»ç»æ¶æ","/pages/f566e4/"],["02.Docker åºæ¬æ¦å¿µ/04.Docker éå.md","Docker éå","/pages/546146/"],["02.Docker åºæ¬æ¦å¿µ/05.Docker å®¹å¨.md","Docker å®¹å¨","/pages/c9e8a8/"],["02.Docker åºæ¬æ¦å¿µ/06.Docker ä»åº.md","Docker ä»åº","/pages/f00cd0/"]]},{title:"å®è£ Docker",collapsable:!1,children:[["03.å®è£ Docker/01.å®è£ Docker.md","å®è£ Docker","/pages/11ef44/"],["03.å®è£ Docker/02.Ubuntu å®è£ Docker.md","Ubuntu å®è£ Docker","/pages/748872/"],["03.å®è£ Docker/03.CentOS å®è£ Docker.md","CentOS å®è£ Docker","/pages/102284/"],["03.å®è£ Docker/04.macOS å®è£ Docker.md","macOS å®è£ Docker","/pages/847488/"],["03.å®è£ Docker/05.Windows å®è£ Docker.md","Windows å®è£ Docker","/pages/c4f755/"],["03.å®è£ Docker/06.Docker éåå éå¨.md","Docker éåå éå¨","/pages/87062e/"]]},{title:"Docker éå",collapsable:!1,children:[["04.Docker éå/01.ä½¿ç¨ Docker éå.md","ä½¿ç¨ Docker éå","/pages/13e1d1/"],["04.Docker éå/02.Docker è·åéå.md","Docker è·åéå","/pages/840a1a/"],["04.Docker éå/03.Docker ååºéå.md","Docker ååºéå","/pages/be83bd/"],["04.Docker éå/04.Docker å é¤æ¬å°éå.md","Docker å é¤æ¬å°éå","/pages/058894/"],["04.Docker éå/05.Docker éåå¯¼å¥å¯¼åº.md","Docker éåå¯¼å¥å¯¼åº","/pages/79f5f4/"],["04.Docker éå/06.å©ç¨ commit çè§£éåææ.md","å©ç¨ commit çè§£éåææ","/pages/134f38/"],["04.Docker éå/07.ä½¿ç¨ Dockerfile å®å¶éå.md","ä½¿ç¨ Dockerfile å®å¶éå","/pages/ffea77/"],["04.Docker éå/08.Dockerfile æä»¤è¯¦è§£.md","Dockerfile æä»¤è¯¦è§£","/pages/6d2add/"],["04.Docker éå/09.Dockerfile å¤é¶æ®µæå»º.md","Dockerfile å¤é¶æ®µæå»º","/pages/f99491/"],["04.Docker éå/10.éåçå®ç°åç.md","éåçå®ç°åç","/pages/3937d4/"]]},{title:"Docker å®¹å¨",collapsable:!1,children:[["05.Docker å®¹å¨/01.æä½ Docker å®¹å¨.md","æä½ Docker å®¹å¨","/pages/7e034a/"],["05.Docker å®¹å¨/02.Docker å¯å¨å®¹å¨.md","Docker å¯å¨å®¹å¨","/pages/f5a508/"],["05.Docker å®¹å¨/03.Docker å®æ¤æè¿è¡.md","Docker å®æ¤æè¿è¡","/pages/4c0f60/"],["05.Docker å®¹å¨/04.Docker ç»æ­¢å®¹å¨.md","Docker ç»æ­¢å®¹å¨","/pages/a777e4/"],["05.Docker å®¹å¨/05.Docker è¿å¥å®¹å¨.md","Docker è¿å¥å®¹å¨","/pages/9efa8d/"],["05.Docker å®¹å¨/06.Docker å¯¼åºåå¯¼å¥å®¹å¨.md","Docker å¯¼åºåå¯¼å¥å®¹å¨","/pages/d3a79f/"],["05.Docker å®¹å¨/07.Docker å é¤å®¹å¨.md","Docker å é¤å®¹å¨","/pages/8b2f36/"]]},{title:"è®¿é® Docker ä»åº",collapsable:!1,children:[["06.è®¿é® Docker ä»åº/01.è®¿é® Docker ä»åº.md","è®¿é® Docker ä»åº","/pages/c0886b/"],["06.è®¿é® Docker ä»åº/02.Docker Hub.md","Docker Hub","/pages/ebce48/"],["06.è®¿é® Docker ä»åº/03.Docker ç§æä»åº.md","Docker ç§æä»åº","/pages/92e266/"],["06.è®¿é® Docker ä»åº/04.Docker ç§æä»åºé«çº§éç½®.md","Docker ç§æä»åºé«çº§éç½®","/pages/141d21/"]]},{title:"Docker æ°æ®ç®¡ç",collapsable:!1,children:[["07.Docker æ°æ®ç®¡ç/01.Docker æ°æ®ç®¡ç.md","Docker æ°æ®ç®¡ç","/pages/bcfae7/"],["07.Docker æ°æ®ç®¡ç/02.Docker æ°æ®å·.md","Docker æ°æ®å·","/pages/5f0882/"],["07.Docker æ°æ®ç®¡ç/03.çå¬ä¸»æºç®å½.md","çå¬ä¸»æºç®å½","/pages/565ee4/"]]},{title:"Docker ä¸åå®¢ Compose",collapsable:!1,children:[["08.Docker ä¸åå®¢ Compose/01.ä»ä¹æ¯ Docker Compose.md","ä»ä¹æ¯ Docker Compose","/pages/e17a65/"],["08.Docker ä¸åå®¢ Compose/02.Docker Compose å®è£ä¸å¸è½½.md","Docker Compose å®è£ä¸å¸è½½","/pages/f7fbae/"],["08.Docker ä¸åå®¢ Compose/03.Docker Compose å¥é¨.md","Docker Compose å¥é¨","/pages/a48959/"],["08.Docker ä¸åå®¢ Compose/04.Docker Compose å½ä»¤è¯´æ.md","Docker Compose å½ä»¤è¯´æ","/pages/cddd90/"],["08.Docker ä¸åå®¢ Compose/05.Docker Compose æ¨¡æ¿æä»¶.md","Docker Compose æ¨¡æ¿æä»¶","/pages/5e9e65/"],["08.Docker ä¸åå®¢ Compose/06.Docker Compose å®æ WordPress.md","Docker Compose å®æ WordPress","/pages/7285c6/"],["08.Docker ä¸åå®¢ Compose/07.Docker Compose å®æ Tomcat.md","Docker Compose å®æ Tomcat","/pages/8a9ceb/"],["08.Docker ä¸åå®¢ Compose/08.Docker Compose å®æ MySQL.md","Docker Compose å®æ MySQL","/pages/853cbd/"],["08.Docker ä¸åå®¢ Compose/09.Docker Compose å¸¸ç¨å½ä»¤.md","Docker Compose å¸¸ç¨å½ä»¤","/pages/f508e3/"],["08.Docker ä¸åå®¢ Compose/10.YAML éç½®æä»¶è¯­è¨.md","YAML éç½®æä»¶è¯­è¨","/pages/bd41de/"],["08.Docker ä¸åå®¢ Compose/11.éï¼ä¸ºä»ä¹è¯´ JSON ä¸éååéç½®æä»¶ï¼.md","éï¼ä¸ºä»ä¹è¯´ JSON ä¸éååéç½®æä»¶ï¼","/pages/0c8168/"]]},{title:"å¸¸è§é®é¢",collapsable:!1,children:[["09.å¸¸è§é®é¢/01.dockerç£çç©ºé´ä¸è¶³è§£å³åæ³.md","dockerç£çç©ºé´ä¸è¶³è§£å³åæ³","/pages/be0094/"]]}],"/18.Kubernetes/":[{title:"Kubernetes å¥é¨",collapsable:!1,children:[["01.Kubernetes å¥é¨/01.ä»ä¹æ¯ Kubernetes.md","ä»ä¹æ¯ Kubernetes","/pages/419ea5/"],["01.Kubernetes å¥é¨/02.Kubernetes å®è£åçåå¤.md","Kubernetes å®è£åçåå¤","/pages/b2e7fa/"],["01.Kubernetes å¥é¨/03.å®è£ kubeadm.md","å®è£ kubeadm","/pages/babf51/"],["01.Kubernetes å¥é¨/05.éç½® kubeadm.md","éç½® kubeadm","/pages/14ea2d/"],["01.Kubernetes å¥é¨/06.ä½¿ç¨ kubeadm é¨ç½² Master èç¹.md","ä½¿ç¨ kubeadm é¨ç½² Master èç¹","/pages/9b17d0/"],["01.Kubernetes å¥é¨/07.å®è£ç½ç»æä»¶.md","å®è£ç½ç»æä»¶","/pages/9477b8/"],["01.Kubernetes å¥é¨/08.ä½¿ç¨ kubeadm éç½® Worker èç¹.md","ä½¿ç¨ kubeadm éç½® Worker èç¹","/pages/f6617c/"],["01.Kubernetes å¥é¨/09.æ¦å¿µæ»ç».md","æ¦å¿µæ»ç»","/pages/f4b696/"]]},{title:"Kubernetes å®è·µ",collapsable:!1,children:[["02.Kubernetes å®è·µ/01.Kubernetes Dashboard.md","Kubernetes Dashboard","/pages/e68987/"],["02.Kubernetes å®è·µ/02.NFS é«å¯ç¨æ¹æ¡.md","NFS é«å¯ç¨æ¹æ¡","/pages/1b012a/"],["02.Kubernetes å®è·µ/03.ç¦»çº¿é¨ç½² Kubernetess + KubeSphere.md","ç¦»çº¿é¨ç½² Kubernetess + KubeSphere","/pages/8a1473/"]]}],"/19.Spring Security OAuth2/":[{title:"Spring Security OAuth2",collapsable:!1,children:[["01.Spring Security OAuth2/01.ä»ç».md","ä»ç»","/pages/1b4b4e/"],["01.Spring Security OAuth2/02.ä¸ºä»ä¹éè¦ OAuth2.md","ä¸ºä»ä¹éè¦ OAuth2","/pages/17b300/"],["01.Spring Security OAuth2/03.å¼æ¾å¹³å°.md","å¼æ¾å¹³å°","/pages/5cb943/"],["01.Spring Security OAuth2/04.ä»¤ççè®¿é®ä¸å·æ°.md","ä»¤ççè®¿é®ä¸å·æ°","/pages/37f648/"],["01.Spring Security OAuth2/05.å®¢æ·ç«¯æææ¨¡å¼.md","å®¢æ·ç«¯æææ¨¡å¼","/pages/fbe541/"]]},{title:"åå»ºæ¡ä¾å·¥ç¨",collapsable:!1,children:[["02.åå»ºæ¡ä¾å·¥ç¨/01.åå»ºæ¡ä¾å·¥ç¨é¡¹ç®.md","åå»ºæ¡ä¾å·¥ç¨é¡¹ç®","/pages/00c356/"],["02.åå»ºæ¡ä¾å·¥ç¨/02.åå»ºç»ä¸çä¾èµç®¡çæ¨¡å.md","åå»ºç»ä¸çä¾èµç®¡çæ¨¡å","/pages/c3686c/"]]},{title:"åå»ºè®¤è¯æå¡å¨",collapsable:!1,children:[["03.åå»ºè®¤è¯æå¡å¨/01.æææå¡å¨éç½®.md","æææå¡å¨éç½®","/pages/5eb137/"],["03.åå»ºè®¤è¯æå¡å¨/02.åºäºåå­å­å¨ä»¤ç.md","åºäºåå­å­å¨ä»¤ç","/pages/2279cf/"],["03.åå»ºè®¤è¯æå¡å¨/03.åºäº JDBC å­å¨ä»¤ç.md","åºäº JDBC å­å¨ä»¤ç","/pages/9b9a7b/"],["03.åå»ºè®¤è¯æå¡å¨/04.RBAC åºäºè§è²çæéæ§å¶.md","RBAC åºäºè§è²çæéæ§å¶","/pages/cee981/"],["03.åå»ºè®¤è¯æå¡å¨/05.åºäº RBAC çèªå®ä¹è®¤è¯.md","åºäº RBAC çèªå®ä¹è®¤è¯","/pages/4bff79/"],["03.åå»ºè®¤è¯æå¡å¨/06.JWTä»¤ç.md","JWTä»¤ç","/pages/8dc90c/"]]},{title:"åå»ºèµæºæå¡å¨",collapsable:!1,children:[["04.åå»ºèµæºæå¡å¨/01.èµæºæå¡å¨éç½®.md","èµæºæå¡å¨éç½®","/pages/3414a7/"]]},{title:"åå¸å¼ç³»ç»è®¤è¯æ¹æ¡",collapsable:!1,children:[["05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/01.ä»ä¹æ¯åå¸å¼ç³»ç».md","ä»ä¹æ¯åå¸å¼ç³»ç»","/pages/d62ff2/"],["05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/02.åå¸å¼è®¤è¯éæ±.md","åå¸å¼è®¤è¯éæ±","/pages/16b31e/"],["05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/03.åå¸å¼è®¤è¯æ¹æ¡.md","åå¸å¼è®¤è¯æ¹æ¡","/pages/d6bec0/"],["05.åå¸å¼ç³»ç»è®¤è¯æ¹æ¡/04.åå¸å¼è®¤è¯å®æ.md","åå¸å¼è®¤è¯å®æ","/pages/7b210e/"]]}],"/20.DevOps/":[{title:"å¥é¨",collapsable:!1,children:[["01.å¥é¨/01.è½¯ä»¶å·¥ç¨ä»ç».md","è½¯ä»¶å·¥ç¨ä»ç»","/pages/11f8a5/"],["01.å¥é¨/02.æç»­ç»§æ¿æµç¨è¯´æ.md","æç»­ç»§æ¿æµç¨è¯´æ","/pages/5b4493/"],["01.å¥é¨/03.Gitlabä»£ç æç®¡æå¡å¨å®è£.md","Gitlabä»£ç æç®¡æå¡å¨å®è£","/pages/eaeddc/"],["01.å¥é¨/04.Jenkinsèªå¨åæå¡å¨å®è£.md","Jenkinsèªå¨åæå¡å¨å®è£","/pages/605fde/"],["01.å¥é¨/05.Jenkinsæä»¶ç®¡ç.md","Jenkinsæä»¶ç®¡ç","/pages/6519b5/"],["01.å¥é¨/06.Jenkinsç¨æ·æéç®¡ç.md","Jenkinsç¨æ·æéç®¡ç","/pages/61d667/"],["01.å¥é¨/07.Jenkinså­è¯ç®¡ç.md","Jenkinså­è¯ç®¡ç","/pages/a1fe86/"],["01.å¥é¨/08.Mavenå®è£åéç½®.md","Mavenå®è£åéç½®","/pages/c15beb/"],["01.å¥é¨/09.Tomcatå®è£åéç½®.md","Tomcatå®è£åéç½®","/pages/9d384b/"]]},{title:"å®æ",collapsable:!1,children:[["02.å®æ/01.Jenkinsæå»ºMavené¡¹ç®.md","Jenkinsæå»ºMavené¡¹ç®","/pages/5448da/"],["02.å®æ/02.Jenkinså¸¸ç¨æå»ºè§¦åå¨.md","Jenkinså¸¸ç¨æå»ºè§¦åå¨","/pages/bf228f/"],["02.å®æ/03.Jenkinsåæ°åæå»º.md","Jenkinsåæ°åæå»º","/pages/991f2e/"],["02.å®æ/04.Jenkinséç½®é®ç®±æå¡å¨.md","Jenkinséç½®é®ç®±æå¡å¨","/pages/bd7581/"],["02.å®æ/05.SonarQubeèªå¨ä»£ç å®¡æ¥å·¥å·.md","SonarQubeèªå¨ä»£ç å®¡æ¥å·¥å·","/pages/e2748f/"],["02.å®æ/06.Jenkinsæ´åSonarQubeå®ç°ä»£ç å®¡æ¥.md","Jenkinsæ´åSonarQubeå®ç°ä»£ç å®¡æ¥","/pages/848aec/"],["02.å®æ/07.å¾®æå¡æç»­éæ(ä¸).md","å¾®æå¡æç»­éæ(ä¸)","/pages/8e8067/"],["02.å®æ/08.å¾®æå¡æç»­éæ(ä¸).md","å¾®æå¡æç»­éæ(ä¸)","/pages/b7044d/"]]}],"/21.Simplify/":[{title:"Simplify Docs",collapsable:!1,children:[["01.Simplify Docs/01.Lombokä½¿ç¨æå.md","Lombokä½¿ç¨æå","/pages/d49c54/"],["01.Simplify Docs/02.Spring Bootæ´åSwagger.md","Spring Bootæ´åSwagger","/pages/ff62ec/"],["01.Simplify Docs/03.axiosä¸­æææ¡£.md","axiosä¸­æææ¡£","/pages/92c82f/"],["01.Simplify Docs/04.vue-axios.md","vue-axios","/pages/305234/"],["01.Simplify Docs/05.ä¼åDockerä¸­çSpring Bootåºç¨.md","ä¼åDockerä¸­çSpring Bootåºç¨","/pages/59f664/"],["01.Simplify Docs/06.èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå.md","èªå·±å¶ä½ä¸ä¸ªjava11çdockeréå","/pages/46a509/"],["01.Simplify Docs/07.Spring Boot æ°ç¹æ§ Layered Jar.md","Spring Boot 2.3 æ°ç¹æ§ Layered Jar","/pages/97d41d/"],["01.Simplify Docs/08.Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡.md","Dockerå®¢æ·ç«¯ä½¿ç¨TLSä¿æ¤è¿æ¥è¿ç¨Dockeræå¡","/pages/a60efa/"],["01.Simplify Docs/09.docker-maven-plugin.md","docker-maven-plugin","/pages/779e01/"],["01.Simplify Docs/10.Inneræ³¨è§£ä½¿ç¨è¯´æ.md","Inneræ³¨è§£ä½¿ç¨è¯´æ","/pages/9dfd5c/"],["01.Simplify Docs/11.Java8 Stream.md","Java8 Stream","/pages/5f71ee/"]]}],"/22.Kubernetes/":[{title:"Kubernetes å¥é¨",collapsable:!1,children:[["01.Kubernetes å¥é¨/01.ä»ä¹æ¯ Kubernetes.md","ä»ä¹æ¯ Kubernetes","/pages/e51b3b/"],["01.Kubernetes å¥é¨/02.Kubernetes å®è£åçåå¤.md","Kubernetes å®è£åçåå¤","/pages/43a41d/"],["01.Kubernetes å¥é¨/03.å®è£ kubeadm.md","å®è£ kubeadm","/pages/248b3e/"],["01.Kubernetes å¥é¨/04.éç½® kubeadm.md","éç½® kubeadm","/pages/f792df/"],["01.Kubernetes å¥é¨/05.ä½¿ç¨ kubeadm é¨ç½² Master èç¹.md","ä½¿ç¨ kubeadm é¨ç½² Master èç¹","/pages/91b30f/"],["01.Kubernetes å¥é¨/06.å®è£ç½ç»æä»¶.md","å®è£ç½ç»æä»¶","/pages/1d4070/"],["01.Kubernetes å¥é¨/07.ä½¿ç¨ kubeadm éç½® Worker èç¹.md","ä½¿ç¨ kubeadm éç½® Worker èç¹","/pages/b23692/"],["01.Kubernetes å¥é¨/08.æ¦å¿µæ»ç».md","æ¦å¿µæ»ç»","/pages/cfa4e2/"]]},{title:"Kubernetes å®è·µ",collapsable:!1,children:[["02.Kubernetes å®è·µ/01.Kubernetes Dashboard.md","Kubernetes Dashboard","/pages/11af34/"]]},{title:"åé¨å¹³å°å¯¹æ¥",collapsable:!1,children:[["03.åé¨å¹³å°å¯¹æ¥/01.æ´åäºå¹³å°ç¸å³éç½®ï¼åé¨ï¼.md","æ´åäºå¹³å°ç¸å³éç½®ï¼åé¨ï¼","/pages/f61a3d/"]]}],"/99.æ¯æ/":[["01.æ¯æ.md","æ¯æè¿ä¸ªé¡¹ç®","/pages/1b12ed"]]},updateBar:{showToArticle:!1},category:!1,tag:!1,author:{name:"heyuqiang",href:"https://github.com/heyuqiang"},social:{icons:[{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:785056500@qq.com"},{iconClass:"icon-github",title:"GitHub",link:"https://github.com/heyuqiang"},{iconClass:"icon-erji",title:"å¬é³ä¹",link:"https://music.163.com/#/playlist?id=755597173"}]},footer:{createYear:2019,copyrightInfo:"PigxCloud, Inc."}}};t(151),t(207),t(139);var cc=t(217),lc=t(218),dc=(t(371),t(232),t(43));var uc={computed:{$filterPosts:function(){return this.$site.pages.filter((function(n){var e=n.frontmatter,t=e.pageComponent,r=e.article,o=e.home;return!(t||!1===r||!0===o)}))},$sortPosts:function(){return(n=this.$filterPosts).sort((function(n,e){var t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(dc.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(dc.a)(n,e)})),n;var n},$sortPostsByDate:function(){return(n=this.$filterPosts).sort((function(n,e){return Object(dc.a)(n,e)})),n;var n},$groupPosts:function(){return function(n){for(var e={},t={},r=function(r,o){var i=n[r].frontmatter,a=i.categories,s=i.tags;"array"===Object(dc.n)(a)&&a.forEach((function(t){t&&(e[t]||(e[t]=[]),e[t].push(n[r]))})),"array"===Object(dc.n)(s)&&s.forEach((function(e){e&&(t[e]||(t[e]=[]),t[e].push(n[r]))}))},o=0,i=n.length;o<i;o++)r(o);return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags:function(){return function(n){var e=[],t=[];for(var r in n.categories)e.push({key:r,length:n.categories[r].length});for(var o in n.tags)t.push({key:o,length:n.tags[o].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Po.component(cc.default),Po.component(lc.default);function pc(n){return n.toString().padStart(2,"0")}t(375);Po.component("Badge",(function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,716))})),Po.component("CodeBlock",(function(){return Promise.resolve().then(t.bind(null,217))})),Po.component("CodeGroup",(function(){return Promise.resolve().then(t.bind(null,218))}));t(376),t(377);var mc=[function(n){n.Vue,n.options;var e=n.router;n.siteData;n.isServer||e.afterEach((function(){var n;n=function(){setTimeout((function(){var n,e;void 0===window._AdBlockInit&&(n=document.getElementsByClassName("wwads-cn"),e=document.querySelector(".wwads-content"),n[0]&&!e&&(n[0].innerHTML="<style>.wwads-horizontal,.wwads-vertical{background-color:#f4f8fa;padding:5px;min-height:120px;margin-top:20px;box-sizing:border-box;border-radius:3px;font-family:sans-serif;display:flex;min-width:150px;position:relative;overflow:hidden;}.wwads-horizontal{flex-wrap:wrap;justify-content:center}.wwads-vertical{flex-direction:column;align-items:center;padding-bottom:32px}.wwads-horizontal a,.wwads-vertical a{text-decoration:none}.wwads-horizontal .wwads-img,.wwads-vertical .wwads-img{margin:5px}.wwads-horizontal .wwads-content,.wwads-vertical .wwads-content{margin:5px}.wwads-horizontal .wwads-content{flex:130px}.wwads-vertical .wwads-content{margin-top:10px}.wwads-horizontal .wwads-text,.wwads-content .wwads-text{font-size:14px;line-height:1.4;color:#0e1011;-webkit-font-smoothing:antialiased}.wwads-horizontal .wwads-poweredby,.wwads-vertical .wwads-poweredby{display:block;font-size:11px;color:#a6b7bf;margin-top:1em}.wwads-vertical .wwads-poweredby{position:absolute;left:10px;bottom:10px}.wwads-horizontal .wwads-poweredby span,.wwads-vertical .wwads-poweredby span{transition:all 0.2s ease-in-out;margin-left:-1em}.wwads-horizontal .wwads-poweredby span:first-child,.wwads-vertical .wwads-poweredby span:first-child{opacity:0}.wwads-horizontal:hover .wwads-poweredby span,.wwads-vertical:hover .wwads-poweredby span{opacity:1;margin-left:0}.wwads-horizontal .wwads-hide,.wwads-vertical .wwads-hide{position:absolute;right:-23px;bottom:-23px;width:46px;height:46px;border-radius:23px;transition:all 0.3s ease-in-out;cursor:pointer;}.wwads-horizontal .wwads-hide:hover,.wwads-vertical .wwads-hide:hover{background:rgb(0 0 0 /0.05)}.wwads-horizontal .wwads-hide svg,.wwads-vertical .wwads-hide svg{position:absolute;left:10px;top:10px;fill:#a6b7bf}.wwads-horizontal .wwads-hide:hover svg,.wwads-vertical .wwads-hide:hover svg{fill:#3E4546}</style><a href='https://wwads.cn/page/whitelist-wwads' class='wwads-img' target='_blank' rel='nofollow'><img src='https://cdn.jsdelivr.net/gh/xugaoyi/image_store@master/blog/wwads.2a3pidhlh4ys.webp' width='130'></a><div class='wwads-content'><a href='https://wwads.cn/page/whitelist-wwads' class='wwads-text' target='_blank' rel='nofollow'>ä¸ºäºæ¬ç«çé¿æè¿è¥ï¼è¯·å°æä»¬çç½ç«å å¥å¹¿åæ¦æªå¨çç½ååï¼æè°¢æ¨çæ¯æï¼<span style='color: #11a8cd'>å¦ä½æ·»å ç½åå?</span></a><a href='https://wwads.cn/page/end-user-privacy' class='wwads-poweredby' title='ä¸ç»´å¹¿å ï½ è®©å¹¿åæ´ä¼éï¼ä¸æç¨' target='_blank'><span>ä¸ç»´</span><span>å¹¿å</span></a></div><a class='wwads-hide' onclick='parentNode.remove()' title='éèå¹¿å'><svg xmlns='http://www.w3.org/2000/svg' width='6' height='7'><path d='M.879.672L3 2.793 5.121.672a.5.5 0 11.707.707L3.708 3.5l2.12 2.121a.5.5 0 11-.707.707l-2.12-2.12-2.122 2.12a.5.5 0 11-.707-.707l2.121-2.12L.172 1.378A.5.5 0 01.879.672z'></path></svg></a>"))}),3e3)},"complete"===document.readyState||"interactive"===document.readyState?setTimeout(n,1):document.addEventListener("DOMContentLoaded",n),setTimeout((function(){var n=document.querySelector(".pageB");if(n){var e=n.querySelector(".wwads-hide");e&&(e.onclick=function(){n.style.display="none"}),n.style.display="flex"}}),0)}))},function(n){var e=n.Vue,t=(n.options,n.router,n.siteData);t.pages.map((function(n){var e=n.frontmatter,r=e.date,o=e.author;"string"==typeof r&&"Z"===r.charAt(r.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return"".concat(n.getUTCFullYear(),"-").concat(pc(n.getUTCMonth()+1),"-").concat(pc(n.getUTCDate())," ").concat(pc(n.getUTCHours()),":").concat(pc(n.getUTCMinutes()),":").concat(pc(n.getUTCSeconds()))}(r)),o?n.author=o:t.themeConfig.author&&(n.author=t.themeConfig.author)})),e.mixin(uc)},{},function(n){n.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{},function(){"undefined"!=typeof window&&function(n,e,t){function r(n){var t=e.createElement("div");t.className="heart",o.push({el:t,x:n.clientX-5,y:n.clientY-5,scale:1,alpha:1,color:"#11a8cd"}),e.body.appendChild(t)}var o=[];n.requestAnimationFrame=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(n){setTimeout(n,1e3/60)},function(n){var t=e.createElement("style");t.type="text/css";try{t.appendChild(e.createTextNode(n))}catch(e){t.styleSheet.cssText=n}e.getElementsByTagName("head")[0].appendChild(t)}(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),function(){var e="function"==typeof n.onclick&&n.onclick;n.onclick=function(n){var t=!0;n.path&&n.path.forEach((function(n){1===n.nodeType&&"string"==typeof n.className&&n.className.indexOf("theme-vdoing-content")>-1&&(t=!1)})),t&&(e&&e(),r(n))}}(),function n(){for(var t=0;t<o.length;t++)o[t].alpha<=0?(e.body.removeChild(o[t].el),o.splice(t,1)):(o[t].y--,o[t].scale+=.004,o[t].alpha-=.013,o[t].el.style.cssText="left:"+o[t].x+"px;top:"+o[t].y+"px;opacity:"+o[t].alpha+";transform:scale("+o[t].scale+","+o[t].scale+") rotate(45deg);background:"+o[t].color+";z-index:99999");requestAnimationFrame(n)}()}(window,document)}],gc=[];t(210);function hc(n,e){return(hc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}t(211),t(212);function bc(n){return(bc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function fc(n,e){if(e&&("object"===Ta(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function vc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=bc(n);if(e){var o=bc(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return fc(this,t)}}var kc=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&hc(n,e)}(t,n);var e=vc(t);function t(){return ls(this,t),e.apply(this,arguments)}return us(t)}(function(){function n(){ls(this,n),this.store=new Po({data:{state:{}}})}return us(n,[{key:"$get",value:function(n){return this.store.state[n]}},{key:"$set",value:function(n,e){Po.set(this.store.state,n,e)}},{key:"$emit",value:function(){var n;(n=this.store).$emit.apply(n,arguments)}},{key:"$on",value:function(){var n;(n=this.store).$on.apply(n,arguments)}}]),n}());Object.assign(kc.prototype,{getPageAsyncComponent:$a,getLayoutAsyncComponent:Ga,getAsyncComponent:Fa,getVueComponent:Ha});var yc={install:function(n){var e=new kc;n.$vuepress=e,n.prototype.$vuepress=e}};function xc(n){n.beforeEach((function(e,t,r){if(wc(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){var o=e.path.replace(/\/$/,"")+".html";wc(n,o)?r(o):r()}else r();else{var i=e.path+"/",a=e.path+".html";wc(n,a)?r(a):wc(n,i)?r(i):r()}}))}function wc(n,e){var t=e.toLowerCase();return n.options.routes.some((function(n){return n.path.toLowerCase()===t}))}var Sc={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(n){var e=this.pageKey||this.$parent.$page.key;return Ja("pageKey",e),Po.component(e)||Po.component(e,$a(e)),Po.component(e)?n(e):n("")}},_c={functional:!0,props:{slotKey:String,required:!0},render:function(n,e){var t=e.props,r=e.slots;return n("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Ec={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Tc=(t(378),t(379),Object(oc.a)(Ec,(function(){var n=this.$createElement,e=this._self._c||n;return e("span",[e("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[e("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),e("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),e("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function Ic(){return(Ic=Object(r.a)(regeneratorRuntime.mark((function n(e){var t,r,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:sc.routerBase||sc.base,xc(r=new _a({base:t,mode:"history",fallback:!1,routes:ac,scrollBehavior:function(n,e,t){return t||(n.hash?!Po.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})}})),o={},n.prev=4,n.next=7,Promise.all(mc.filter((function(n){return"function"==typeof n})).map((function(n){return n({Vue:Po,options:o,router:r,siteData:sc,isServer:e})})));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.error(n.t0);case 12:return i=new Po(Object.assign(o,{router:r,render:function(n){return n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},gc.map((function(e){return n(e)})))])}})),n.abrupt("return",{app:i,router:r});case 14:case"end":return n.stop()}}),n,null,[[4,9]])})))).apply(this,arguments)}Po.config.productionTip=!1,Po.use(_a),Po.use(yc),Po.mixin(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Po;Ea(e),t.$vuepress.$set("siteData",e);var r=n(t.$vuepress.$get("siteData")),o=new r,i=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(o)),a={};return Object.keys(i).reduce((function(n,e){return e.startsWith("$")&&(n[e]=i[e].get),n}),a),{computed:a}}((function(n){return function(){function e(){ls(this,e)}return us(e,[{key:"setPage",value:function(n){this.__page=n}},{key:"$site",get:function(){return n}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var n,e,t=this.$site.locales,r=void 0===t?{}:t;for(var o in r)"/"===o?e=r[o]:0===this.$page.path.indexOf(o)&&(n=r[o]);return n||e||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var n=this.$page.frontmatter.canonicalUrl;return"string"==typeof n&&n}},{key:"$title",get:function(){var n=this.$page,e=this.$page.frontmatter.metaTitle;if("string"==typeof e)return e;var t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var n=function(n){if(n){var e=n.filter((function(n){return"description"===n.name}))[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),e}()}),sc)),Po.component("Content",Sc),Po.component("ContentSlotsDistributor",_c),Po.component("OutboundLink",Tc),Po.component("ClientOnly",{functional:!0,render:function(n,e){var t=e.parent,r=e.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Po.component("Layout",Ga("Layout")),Po.component("NotFound",Ga("NotFound")),Po.prototype.$withBase=function(n){var e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.2",hash:"5547af4"},function(n){return Ic.apply(this,arguments)}(!1).then((function(n){var e=n.app;n.router.onReady((function(){e.$mount("#app")}))}))}]);