(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{549:function(s,t,r){"use strict";r.r(t);var a=r(29),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"基于源码编译安装-redis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基于源码编译安装-redis"}},[s._v("#")]),s._v(" 基于源码编译安装 Redis")]),s._v(" "),r("h2",{attrs:{id:"依赖"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#依赖"}},[s._v("#")]),s._v(" 依赖")]),s._v(" "),r("table",[r("thead",[r("tr",[r("th",[s._v("依赖")]),s._v(" "),r("th",[s._v("版本")])])]),s._v(" "),r("tbody",[r("tr",[r("td",[s._v("操作系统")]),s._v(" "),r("td",[s._v("centos7")])]),s._v(" "),r("tr",[r("td",[s._v("redis")]),s._v(" "),r("td",[s._v("5.0.0")])])])]),s._v(" "),r("h2",{attrs:{id:"安装redis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装redis"}},[s._v("#")]),s._v(" 安装Redis")]),s._v(" "),r("p",[s._v("下面介绍在CentOS环境下，Redis的安装与部署，Redis从3.0版本以后增加了集群功能。")]),s._v(" "),r("p",[r("strong",[s._v("步骤如下：")])]),s._v(" "),r("p",[s._v("由于Redis是用C语言编写，所以编译时需要gcc，")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("yum "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++\n")])])]),r("p",[s._v("通过官网下载 地址："),r("a",{attrs:{href:"http://download.redis.io/releases/redis-5.0.0.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://download.redis.io/releases/redis-5.0.0.tar.gz"),r("OutboundLink")],1)]),s._v(" "),r("p",[s._v("或 使用linux wget命令：")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-5.0.0.tar.gz\n")])])]),r("p",[s._v("把源码包上传到linux服务器，在上传的目录下进行解压")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf redis-5.0.0.tar.gz\n")])])]),r("p",[s._v("进入解压后的目录进行编译make，指定目录安装make install 如 /usr/local/redis")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-5.0.0/\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("这里进redis-5.0.0/目录下直接make编译就好了"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PREFIX")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis  （指定编译路径）\n")])])]),r("p",[s._v("进入安装目录bin下")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/redis/bin\n")])])]),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -al")]),s._v("\ntotal "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("32628")]),s._v("\ndrwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("134")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4366600")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-benchmark\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082744")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-check-aof\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082744")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-check-rdb\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4783504")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-cli\nlrwxrwxrwx "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-sentinel -"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" redis-server\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082744")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-server\n")])])]),r("ul",[r("li",[s._v("redis-benchmark redis性能测试工具")]),s._v(" "),r("li",[s._v("redis-check-aof AOF文件修复工具")]),s._v(" "),r("li",[s._v("redis-check-rdb RDB文件修复工具")]),s._v(" "),r("li",[s._v("redis-cli redis命令行客户端")]),s._v(" "),r("li",[s._v("redis.conf redis配置文件")]),s._v(" "),r("li",[s._v("redis-sentinal redis集群管理工具")]),s._v(" "),r("li",[s._v("redis-server redis服务进程")])]),s._v(" "),r("h2",{attrs:{id:"启动redis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#启动redis"}},[s._v("#")]),s._v(" 启动Redis")]),s._v(" "),r("p",[s._v("后端模式启动")]),s._v(" "),r("p",[s._v("1）从redis的源码目录中复制redis.conf到redis的安装目录bin下。")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /root/redis-5.0.0/redis.conf /usr/local/redis/bin\n")])])]),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis-5.0.0"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -al")]),s._v("\ntotal "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("240")]),s._v("\ndrwxrwxr-x   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("309")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndr-xr-x---.  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" root root  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("75104")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 00-RELEASENOTES\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("53")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" BUGS\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1894")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" CONTRIBUTING\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1487")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" COPYING\ndrwxrwxr-x   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04 deps\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("376")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" .gitignore\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" INSTALL\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("151")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" Makefile\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4223")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" MANIFESTO\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20555")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 01.Redis 简介.md\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("62155")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" redis.conf\n-rwxrwxr-x   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("275")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" runtest\n-rwxrwxr-x   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("280")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" runtest-cluster\n-rwxrwxr-x   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("281")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" runtest-sentinel\n-rw-rw-r--   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9710")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" sentinel.conf\ndrwxrwxr-x   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8192")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 src\ndrwxrwxr-x  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("167")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" tests\ndrwxrwxr-x   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" root root  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Oct "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" utils\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis-5.0.0"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/redis/bin/")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -al")]),s._v("\ntotal "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("32692")]),s._v("\ndrwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("152")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":07 "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4366600")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-benchmark\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082744")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-check-aof\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082744")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-check-rdb\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4783504")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-cli\n-rw-r--r-- "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("62155")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":07 redis.conf\nlrwxrwxrwx "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-sentinel -"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" redis-server\n-rwxr-xr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082744")]),s._v(" Nov "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05 redis-server\n")])])]),r("p",[s._v("2）修改配置文件 （是否后台启动）")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/redis/bin/redis.conf\n")])])]),r("p",[s._v("找到 daemonize 按i 进入编辑模式 把no 改为 yes")]),s._v(" "),r("p",[s._v("按ESC + :wq 保存退出")]),s._v(" "),r("p",[s._v("执行如下命令启动redis：")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/redis/bin\n./redis-server ./redis.conf\n")])])]),r("p",[s._v("3.查看是否启动成功")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n")])])]),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux|grep redis")]),s._v("\nroot     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13853")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("153980")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7636")]),s._v(" ?        Ssl  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":10   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 ./redis-server "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379\nroot     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13858")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("112808")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("968")]),s._v(" pts/0    S+   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":10   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" --color"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto redis\n")])])]),r("p",[s._v("redis默认端口为 6379，可更改redis.conf文件，修改端口号")]),s._v(" "),r("h2",{attrs:{id:"关闭redis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#关闭redis"}},[s._v("#")]),s._v(" 关闭Redis")]),s._v(" "),r("p",[s._v("强行终止redis进程可能会导致redis持久化数据丢失。")]),s._v(" "),r("p",[s._v("正确停止Redis的方式应该是向Redis发送SHUTDOWN命令，")]),s._v(" "),r("p",[s._v("命令为：")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/redis\n./bin/redis-cli "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n")])])]),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("强行终止redis\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("pkill")]),s._v(" redis-server\n")])])]),r("h2",{attrs:{id:"设置密码"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置密码"}},[s._v("#")]),s._v(" 设置密码")]),s._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("vi /usr/local/redis/bin/redis.conf\n")])])]),r("p",[s._v("找到"),r("code",[s._v("# requirepass foobared")]),s._v("去掉注释将"),r("code",[s._v("foobared")]),s._v("替换成需要配置的密码即可。")]),s._v(" "),r("div",{staticClass:"language- extra-class"},[r("div",{staticClass:"highlight-lines"},[r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("div",{staticClass:"highlighted"},[s._v(" ")]),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br")]),r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v('################################## SECURITY ###################################\n\n# Require clients to issue AUTH <PASSWORD> before processing any other\n# commands.  This might be useful in environments in which you do not trust\n# others with access to the host running redis-server.\n#\n# This should stay commented out for backward compatibility and because most\n# people do not need auth (e.g. they run their own servers).\n#\n# Warning: since Redis is pretty fast an outside user can try up to\n# 150k passwords per second against a good box. This means that you should\n# use a very strong password otherwise it will be very easy to break.\n#\n# requirepass foobared\n\n# Command renaming.\n#\n# It is possible to change the name of dangerous commands in a shared\n# environment. For instance the CONFIG command may be renamed into something\n# hard to guess so that it will still be available for internal-use tools\n# but not available for general clients.\n#\n# Example:\n#\n# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52\n#\n# It is also possible to completely kill a command by renaming it into\n# an empty string:\n#\n# rename-command CONFIG ""\n#\n# Please note that changing the name of commands that are logged into the\n# AOF file or transmitted to replicas may cause problems.\n')])])]),r("h2",{attrs:{id:"开机自启"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#开机自启"}},[s._v("#")]),s._v(" 开机自启")]),s._v(" "),r("p",[s._v("centos 7以上是用Systemd进行系统初始化的，Systemd 是 Linux 系统中最新的初始化系统（init），它主要的设计目标是克服 sysvinit 固有的缺点，提高系统的启动速度。\nSystemd服务文件以.service结尾，比如现在要建立redis为开机启动，如果用yum install命令安装的，yum命令会自动创建redis.service文件，直接用命令systemcel enable redis.service设置开机启动即可")]),s._v(" "),r("p",[s._v("在系统服务目录里创建redis.service文件")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/systemd/system/redis.service\n")])])]),r("p",[s._v("写入以下内容：")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("redis-server\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])])]),r("p",[s._v("注意：ExecStart配置成自己的路径")]),s._v(" "),r("p",[s._v("配置描述：")]),s._v(" "),r("ul",[r("li",[s._v("Description:描述服务")]),s._v(" "),r("li",[s._v("After:描述服务类别")]),s._v(" "),r("li",[s._v("[Service]服务运行参数的设置")]),s._v(" "),r("li",[s._v("Type=forking是后台运行的形式")]),s._v(" "),r("li",[s._v("ExecStart为服务的具体运行命令")]),s._v(" "),r("li",[s._v("ExecReload为重启命令")]),s._v(" "),r("li",[s._v("ExecStop为停止命令")]),s._v(" "),r("li",[s._v("PrivateTmp=True表示给服务分配独立的临时空间")]),s._v(" "),r("li",[s._v("注意：[Service]的启动、重启、停止命令全部要求使用绝对路径")]),s._v(" "),r("li",[s._v("[Install]运行级别下服务安装的相关设置，可设置为多用户，即系统运行级别为3")])]),s._v(" "),r("p",[s._v("重载系统服务：")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("systemctl daemon-reload\n")])])]),r("p",[s._v("测试并加入开机自启")]),s._v(" "),r("p",[s._v("先关闭redis-server")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("systemctl stop redis.service\n")])])]),r("p",[s._v("开启redis-server")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("systemctl start redis.service\t\n")])])]),r("blockquote",[r("p",[s._v("如果服务是开启状态，使用此命令会启动失败。")])]),s._v(" "),r("p",[s._v("开启成功，将服务加入开机自启")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("systemctl "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis.service\n")])])]),r("blockquote",[r("p",[s._v("注意后面不能跟空格")])]),s._v(" "),r("p",[s._v("reboot #重启")]),s._v(" "),r("p",[s._v("查看服务运行状态：")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("systemctl status redis.service\n")])])]),r("p",[s._v("全部命令")]),s._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("systemctl start redis.service "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动redis服务")]),s._v("\nsystemctl "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis.service "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置开机自启动 ")]),s._v("\nsystemctl disable redis.service "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止开机自启动 ")]),s._v("\nsystemctl status redis.service "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看服务当前状态 ")]),s._v("\nsystemctl restart redis.service　 "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重新启动服务 ")]),s._v("\nsystemctl list-units --type"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看所有已启动的服务")]),s._v("\n")])])]),r("p",[s._v("至此redis安装配置完毕。")]),s._v(" "),r("p",[s._v("good luck !")])])}),[],!1,null,null,null);t.default=e.exports}}]);