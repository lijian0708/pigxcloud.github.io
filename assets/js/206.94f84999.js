(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{675:function(t,a,e){"use strict";e.r(a);var s=e(29),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"gitlab代码托管服务器安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab代码托管服务器安装"}},[t._v("#")]),t._v(" Gitlab代码托管服务器安装"),e("Badge",{attrs:{text:"gitlab-ce-13.12.4"}})],1),t._v(" "),e("h2",{attrs:{id:"概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),e("p",[e("img",{attrs:{src:"/img/2021-06-15_093937.jpeg",alt:"Gitlab"}})]),t._v(" "),e("p",[t._v("GitLab 是一个用于仓库管理系统的开源项目，使用"),e("a",{attrs:{href:"https://baike.baidu.com/item/Git",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),e("OutboundLink")],1),t._v("作为代码管理工具，并在此基础上搭建起来的Web服务。安装方法是参考GitLab在GitHub上的Wiki页面。")]),t._v(" "),e("h2",{attrs:{id:"硬件要求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#硬件要求"}},[t._v("#")]),t._v(" 硬件要求")]),t._v(" "),e("p",[t._v("下表列出了部署Gitlab的最低和建议的硬件配置。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("资源")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("最小配置")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("推荐配置")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CPU")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4 CPU")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8 CPU")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Mem")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4 GB")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8 GB")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Disk")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("40 GB")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("160 GB")])])])]),t._v(" "),e("h2",{attrs:{id:"安装依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("CentOS")])]),t._v(" "),e("p",[t._v("在 CentOS 7/8 上，下面的命令也会在系统防火墙中打开 HTTP、HTTPS 和 SSH 访问。 这是一个可选步骤，如果您打算仅从"),e("strong",[t._v("本地网络访问 GitLab")]),t._v(" 或 "),e("strong",[t._v("关闭防火墙")]),t._v("，则"),e("strong",[t._v("可以跳过")]),t._v("它。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" policycoreutils-python openssh-server perl\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" sshd\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start sshd\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" firewall-cmd --permanent --add-service"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" firewall-cmd --permanent --add-service"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl reload firewalld\n")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("Ubuntu")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" openssh-server ca-certificates tzdata perl\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[t._v("#")]),t._v(" 下载")]),t._v(" "),e("p",[t._v("官方社区版本:  "),e("a",{attrs:{href:"https://packages.gitlab.com/gitlab/gitlab-ce",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitLab CE"),e("OutboundLink")],1)]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Distro/Version")]),t._v(" "),e("th",[t._v("OS")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-13.12.4-ce.0.el7.x86_64.rpm",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitlab-ce-13.12.4-ce.0.el7.x86_64.rpm"),e("OutboundLink")],1)]),t._v(" "),e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/app/gitlab/gitlab-ce/search?dist=el%2F7",target:"_blank",rel:"noopener noreferrer"}},[t._v("el/7"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("CentOS 7")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/8/gitlab-ce-13.12.4-ce.0.el8.x86_64.rpm",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitlab-ce-13.12.4-ce.0.el8.x86_64.rpm"),e("OutboundLink")],1)]),t._v(" "),e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/app/gitlab/gitlab-ce/search?dist=el%2F8",target:"_blank",rel:"noopener noreferrer"}},[t._v("el/8"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("CentOS 8")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/gitlab/gitlab-ce/packages/ubuntu/bionic/gitlab-ce_13.12.4-ce.0_amd64.deb",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitlab-ce_13.12.4-ce.0_amd64.deb"),e("OutboundLink")],1)]),t._v(" "),e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/app/gitlab/gitlab-ce/search?dist=ubuntu%2Fbionic",target:"_blank",rel:"noopener noreferrer"}},[t._v("ubuntu/bionic"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Ubuntu 18.04 LTS")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/gitlab/gitlab-ce/packages/ubuntu/focal/gitlab-ce_13.12.4-ce.0_amd64.deb",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitlab-ce_13.12.4-ce.0_amd64.deb"),e("OutboundLink")],1)]),t._v(" "),e("td",[e("a",{attrs:{href:"https://packages.gitlab.com/app/gitlab/gitlab-ce/search?dist=ubuntu%2Ffocal",target:"_blank",rel:"noopener noreferrer"}},[t._v("ubuntu/focal"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Ubuntu 20.04 LTS")])])])]),t._v(" "),e("p",[e("strong",[t._v("根据操作系统版本选择对应软件包版本，点击右上角"),e("code",[t._v("Download")]),t._v("按钮下载软件包")])]),t._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),e("p",[t._v("下载 GitLab 包后，使用以下命令安装它：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# GitLab Community Edition")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Debian/Ubuntu")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" dpkg -i gitlab-ce_"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".deb\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CentOS/RHEL")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -Uvh gitlab-ce-"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".rpm\n")])])]),e("p",[t._v("安装过程需要些时间，如果出现日志，则说明安装成功。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("ubuntu@ubuntu:~$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" dpkg -i gitlab-ce_13.12.4-ce.0_amd64.deb \nSelecting previously unselected package gitlab-ce.\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Reading database "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("71349")]),t._v(" files and directories currently installed."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nPreparing to unpack gitlab-ce_13.12.4-ce.0_amd64.deb "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nUnpacking gitlab-ce "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.12")]),t._v(".4-ce.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nSetting up gitlab-ce "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.12")]),t._v(".4-ce.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nIt looks like GitLab has not been configured yet"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" skipping the upgrade script.\n\n       *.                  *.\n      ***                 ***\n     *****               *****\n    .******             *******\n    ********            ********\n   ,,,,,,,,,***********,,,,,,,,,\n  ,,,,,,,,,,,*********,,,,,,,,,,,\n  .,,,,,,,,,,,*******,,,,,,,,,,,,\n      ,,,,,,,,,*****,,,,,,,,,.\n         ,,,,,,,****,,,,,,\n            .,,,***,,,,\n                ,*,.\n  \n\n\n     _______ __  __          __\n    / ____"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" /_/ /   ____ _/ /_\n   / / __/ / __/ /   / __ "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("/ __ "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  / /_/ / / /_/ /___/ /_/ / /_/ /\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("____/_/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("__/_____/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("__,_/_.___/\n  \n\nThank you "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" installing GitLab"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nGitLab was unable to detect a valid "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hostname")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" your instance.\nPlease configure a URL "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" your GitLab instance by setting "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("external_url`\nconfiguration "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /etc/gitlab/gitlab.rb file.\nThen, you can start your GitLab instance by running the following command:\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl reconfigure\n\nFor a comprehensive list of configuration options please see the Omnibus GitLab readme\nhttps://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/01.软件工程介绍.md\n\nHelp us improve the installation experience, "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("let")]),t._v(" us know how we did with a "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" minute survey:\nhttps://gitlab.fra1.qualtrics.com/jfe/form/SV_6kVqZANThUQ1bZb?installation"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("omnibus"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("release")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("-12\n")])])]),e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),e("p",[t._v("修改gitlab配置文件指定服务器ip和自定义端口：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/gitlab/gitlab.rb\n")])])]),e("p",[t._v("找到"),e("code",[t._v("external_url 'http://gitlab.example.com'")]),t._v("并修改为当前服务器"),e("code",[t._v("IP")]),t._v("或"),e("code",[t._v("域名")]),t._v("地址。")]),t._v(" "),e("h2",{attrs:{id:"重启"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重启"}},[t._v("#")]),t._v(" 重启")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl reconfigure\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("重新配置gitlab可能消耗几分钟的时间，根据硬件配置有关，请耐心等待即可。")])]),t._v(" "),e("h2",{attrs:{id:"首次访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#首次访问"}},[t._v("#")]),t._v(" 首次访问")]),t._v(" "),e("p",[t._v("在您第一次访问时，您将被重定向到密码重置屏幕。 提供初始管理员帐户的密码，您将被重定向回登录页面。 使用默认帐户的用户名 root 登录。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/img/2021-06-15_142444.jpg",alt:"GitLab Community Edition"}})]),t._v(" "),e("p",[t._v("有关安装和配置的详细说明，请参阅我们的"),e("a",{attrs:{href:"https://docs.gitlab.com/omnibus/README.html#installation-and-configuration-using-omnibus-package",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),e("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);a.default=n.exports}}]);