(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{559:function(t,a,s){"use strict";s.r(a);var n=s(29),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"minio纠删码快速入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minio纠删码快速入门"}},[t._v("#")]),t._v(" Minio纠删码快速入门")]),t._v(" "),s("p",[t._v("Minio使用纠删码"),s("code",[t._v("erasure code")]),t._v("和校验和"),s("code",[t._v("checksum")]),t._v("来保护数据免受硬件故障和无声数据损坏。 即便您丢失一半数量（N/2）的硬盘，您仍然可以恢复数据。")]),t._v(" "),s("h2",{attrs:{id:"什么是纠删码erasure-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是纠删码erasure-code"}},[t._v("#")]),t._v(" 什么是纠删码erasure code?")]),t._v(" "),s("p",[t._v("纠删码是一种恢复丢失和损坏数据的数学算法， Minio采用Reed-Solomon code将对象拆分成N/2数据和N/2 奇偶校验块。 这就意味着如果是12块盘，一个对象会被分成6个数据块、6个奇偶校验块，你可以丢失任意6块盘（不管其是存放的数据块还是奇偶校验块），你仍可以从剩下的盘中的数据进行恢复，是不是很NB，感兴趣的同学请翻墙google。")]),t._v(" "),s("h2",{attrs:{id:"为什么纠删码有用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么纠删码有用"}},[t._v("#")]),t._v(" 为什么纠删码有用?")]),t._v(" "),s("p",[t._v("纠删码的工作原理和RAID或者复制不同，像RAID6可以在损失两块盘的情况下不丢数据，而Minio纠删码可以在丢失一半的盘的情况下，仍可以保证数据安全。 而且Minio纠删码是作用在对象级别，可以一次恢复一个对象，而RAID是作用在卷级别，数据恢复时间很长。 Minio对每个对象单独编码，存储服务一经部署，通常情况下是不需要更换硬盘或者修复。Minio纠删码的设计目标是为了性能和尽可能的使用硬件加速。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/erasure-code.jpg",alt:"Erasure"}})]),t._v(" "),s("h2",{attrs:{id:"什么是位衰减bit-rot保护"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是位衰减bit-rot保护"}},[t._v("#")]),t._v(" 什么是位衰减bit rot保护?")]),t._v(" "),s("p",[t._v("位衰减又被称为数据腐化"),s("code",[t._v("Data Rot")]),t._v("、无声数据损坏"),s("code",[t._v("Silent Data Corruption")]),t._v(",是目前硬盘数据的一种严重数据丢失问题。硬盘上的数据可能会神不知鬼不觉就损坏了，也没有什么错误日志。正所谓明枪易躲，暗箭难防，这种背地里犯的错比硬盘直接咔咔宕了还危险。 不过不用怕，Minio纠删码采用了高速"),s("a",{attrs:{href:"https://blog.minio.io/accelerating-blake2b-by-4x-using-simd-in-go-assembly-33ef16c8a56b#.jrp1fdwer",target:"_blank",rel:"noopener noreferrer"}},[t._v("BLAKE2"),s("OutboundLink")],1),t._v(" 基于哈希的校验和来防范位衰减。")]),t._v(" "),s("h2",{attrs:{id:"驱动器如何用于擦除代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#驱动器如何用于擦除代码"}},[t._v("#")]),t._v(" 驱动器如何用于擦除代码？")]),t._v(" "),s("p",[t._v("MinIO 将您提供的驱动器分成"),s("em",[t._v("4 到 16 个")]),t._v("驱动器的擦除编码集。因此，您提供的驱动器数量必须是这些数字之一的倍数。每个对象都被写入一个单一的纠删码集。")]),t._v(" "),s("p",[t._v("Minio 使用最大可能的 EC 集大小，该大小分为给定的驱动器数量。例如，"),s("em",[t._v("18个驱动器")]),t._v("配置为"),s("em",[t._v("2组9个驱动器")]),t._v("，"),s("em",[t._v("24个驱动器")]),t._v("配置为"),s("em",[t._v("2组12个驱动器")]),t._v("。这适用于将 MinIO 作为独立纠删码部署运行的场景。"),s("a",{attrs:{href:"https://docs.minio.io/docs/distributed-minio-quickstart-guide.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("然而，"),s("OutboundLink")],1),t._v("在"),s("a",{attrs:{href:"https://docs.minio.io/docs/distributed-minio-quickstart-guide.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("分布式设置"),s("OutboundLink")],1),t._v("中，选择"),s("a",{attrs:{href:"https://docs.minio.io/docs/distributed-minio-quickstart-guide.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("基于节点（亲和性）的"),s("OutboundLink")],1),t._v("擦除条带大小。")]),t._v(" "),s("h2",{attrs:{id:"minio纠删码快速入门-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minio纠删码快速入门-2"}},[t._v("#")]),t._v(" Minio纠删码快速入门")]),t._v(" "),s("h3",{attrs:{id:"_1-先决条件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-先决条件"}},[t._v("#")]),t._v(" 1.  先决条件")]),t._v(" "),s("p",[t._v("安装 MinIO - "),s("RouterLink",{attrs:{to:"/12.MinIO/01.Minio服务器/"}},[t._v("MinIO 快速入门指南")])],1),t._v(" "),s("h3",{attrs:{id:"_2-以纠删码模式运行minio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-以纠删码模式运行minio"}},[t._v("#")]),t._v(" 2. 以纠删码模式运行Minio")]),t._v(" "),s("p",[t._v("示例: 使用Minio，在12个盘中启动Minio服务。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MINIO_ROOT_USER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("admin "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MINIO_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("password ./minio server /mnt/data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".12"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" --console-address "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":9001"')]),t._v("\n")])])]),s("p",[t._v("示例: 使用Minio Docker镜像，在8块盘中启动Minio服务。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(":9000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9001")]),t._v(":9001 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --name minio "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data1:/data1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data2:/data2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data3:/data3 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data4:/data4 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data5:/data5 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data6:/data6 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data7:/data7 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /mnt/data8:/data8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  minio/minio server /data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" --console-address "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":9001"')]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-验证是否设置成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-验证是否设置成功"}},[t._v("#")]),t._v(" 3. 验证是否设置成功")]),t._v(" "),s("p",[t._v("你可以随意拔掉硬盘，看Minio是否可以正常读写。")]),t._v(" "),s("blockquote",[s("p",[t._v("原文: https://docs.min.io/docs/minio-erasure-code-quickstart-guide.html")])])])}),[],!1,null,null,null);a.default=e.exports}}]);