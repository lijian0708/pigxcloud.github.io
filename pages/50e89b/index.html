<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Minio存储桶通知指南 | Java全栈</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="🚀有道无术，术尚可求，有术无道，止于术">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.9b63dc7f.css" as="style"><link rel="preload" href="/assets/js/app.31569fb0.js" as="script"><link rel="preload" href="/assets/js/2.df69d635.js" as="script"><link rel="preload" href="/assets/js/94.dede140a.js" as="script"><link rel="prefetch" href="/assets/js/10.788e911f.js"><link rel="prefetch" href="/assets/js/100.5869e407.js"><link rel="prefetch" href="/assets/js/101.4735f8c8.js"><link rel="prefetch" href="/assets/js/102.0afc9257.js"><link rel="prefetch" href="/assets/js/103.deaaedc9.js"><link rel="prefetch" href="/assets/js/104.e5de9bfa.js"><link rel="prefetch" href="/assets/js/105.04f52d11.js"><link rel="prefetch" href="/assets/js/106.a0c4adf4.js"><link rel="prefetch" href="/assets/js/107.72cf41ff.js"><link rel="prefetch" href="/assets/js/108.2185b4f1.js"><link rel="prefetch" href="/assets/js/109.a1966f5b.js"><link rel="prefetch" href="/assets/js/11.76e4b896.js"><link rel="prefetch" href="/assets/js/110.f0666616.js"><link rel="prefetch" href="/assets/js/111.2d52e7dc.js"><link rel="prefetch" href="/assets/js/112.7705a466.js"><link rel="prefetch" href="/assets/js/113.2f1ab226.js"><link rel="prefetch" href="/assets/js/114.4aa4d6ae.js"><link rel="prefetch" href="/assets/js/115.4a9765c7.js"><link rel="prefetch" href="/assets/js/116.31d2b63f.js"><link rel="prefetch" href="/assets/js/117.d2af2299.js"><link rel="prefetch" href="/assets/js/118.70b7c00b.js"><link rel="prefetch" href="/assets/js/119.50227395.js"><link rel="prefetch" href="/assets/js/12.88aeacb8.js"><link rel="prefetch" href="/assets/js/120.b2f1f2eb.js"><link rel="prefetch" href="/assets/js/121.e9e3e5bf.js"><link rel="prefetch" href="/assets/js/122.8821ca4c.js"><link rel="prefetch" href="/assets/js/123.5c481679.js"><link rel="prefetch" href="/assets/js/124.90aefb34.js"><link rel="prefetch" href="/assets/js/125.3c2d8a2e.js"><link rel="prefetch" href="/assets/js/126.ca38566c.js"><link rel="prefetch" href="/assets/js/127.74131025.js"><link rel="prefetch" href="/assets/js/128.da48cef5.js"><link rel="prefetch" href="/assets/js/129.3122af0d.js"><link rel="prefetch" href="/assets/js/13.ef864632.js"><link rel="prefetch" href="/assets/js/130.1e22d289.js"><link rel="prefetch" href="/assets/js/131.706af342.js"><link rel="prefetch" href="/assets/js/132.50c671ee.js"><link rel="prefetch" href="/assets/js/133.db98fa8a.js"><link rel="prefetch" href="/assets/js/134.7fe8cf44.js"><link rel="prefetch" href="/assets/js/135.6219a109.js"><link rel="prefetch" href="/assets/js/136.27f3f774.js"><link rel="prefetch" href="/assets/js/137.b4e57291.js"><link rel="prefetch" href="/assets/js/138.82aaf97d.js"><link rel="prefetch" href="/assets/js/139.cab10f5a.js"><link rel="prefetch" href="/assets/js/14.ddfa3e6b.js"><link rel="prefetch" href="/assets/js/140.4b42a53f.js"><link rel="prefetch" href="/assets/js/141.ba14455a.js"><link rel="prefetch" href="/assets/js/142.4acedada.js"><link rel="prefetch" href="/assets/js/143.e89a5e92.js"><link rel="prefetch" href="/assets/js/144.27ae0dda.js"><link rel="prefetch" href="/assets/js/145.6bbfb61f.js"><link rel="prefetch" href="/assets/js/146.55df497b.js"><link rel="prefetch" href="/assets/js/147.40936f4a.js"><link rel="prefetch" href="/assets/js/148.4be699c3.js"><link rel="prefetch" href="/assets/js/149.fc77592a.js"><link rel="prefetch" href="/assets/js/15.68f8ce44.js"><link rel="prefetch" href="/assets/js/150.e7fb1666.js"><link rel="prefetch" href="/assets/js/151.40ff52a0.js"><link rel="prefetch" href="/assets/js/152.fda432cf.js"><link rel="prefetch" href="/assets/js/153.1b165d6b.js"><link rel="prefetch" href="/assets/js/154.3bb5bcb3.js"><link rel="prefetch" href="/assets/js/155.6cd504f2.js"><link rel="prefetch" href="/assets/js/156.b1ff07fd.js"><link rel="prefetch" href="/assets/js/157.57a6101a.js"><link rel="prefetch" href="/assets/js/158.0a18c4db.js"><link rel="prefetch" href="/assets/js/159.89815b25.js"><link rel="prefetch" href="/assets/js/16.aff0328f.js"><link rel="prefetch" href="/assets/js/160.9a45fd99.js"><link rel="prefetch" href="/assets/js/161.82e463d5.js"><link rel="prefetch" href="/assets/js/162.5a06785b.js"><link rel="prefetch" href="/assets/js/163.08555c19.js"><link rel="prefetch" href="/assets/js/164.9f890f94.js"><link rel="prefetch" href="/assets/js/165.2e875427.js"><link rel="prefetch" href="/assets/js/166.3f418177.js"><link rel="prefetch" href="/assets/js/167.06c2cc48.js"><link rel="prefetch" href="/assets/js/168.3e5efe52.js"><link rel="prefetch" href="/assets/js/169.637e7376.js"><link rel="prefetch" href="/assets/js/17.125748af.js"><link rel="prefetch" href="/assets/js/170.319e96c6.js"><link rel="prefetch" href="/assets/js/171.a09af050.js"><link rel="prefetch" href="/assets/js/172.23d78708.js"><link rel="prefetch" href="/assets/js/173.c057313f.js"><link rel="prefetch" href="/assets/js/174.8d168208.js"><link rel="prefetch" href="/assets/js/175.d81d3c21.js"><link rel="prefetch" href="/assets/js/176.8ba38854.js"><link rel="prefetch" href="/assets/js/177.620927ce.js"><link rel="prefetch" href="/assets/js/178.3c001e58.js"><link rel="prefetch" href="/assets/js/179.0acd475a.js"><link rel="prefetch" href="/assets/js/18.fa6cd919.js"><link rel="prefetch" href="/assets/js/180.e910d853.js"><link rel="prefetch" href="/assets/js/181.7798460e.js"><link rel="prefetch" href="/assets/js/182.3c1fc210.js"><link rel="prefetch" href="/assets/js/183.8cc80600.js"><link rel="prefetch" href="/assets/js/184.fff56765.js"><link rel="prefetch" href="/assets/js/185.c63f91e5.js"><link rel="prefetch" href="/assets/js/186.7870decd.js"><link rel="prefetch" href="/assets/js/187.3cb205f3.js"><link rel="prefetch" href="/assets/js/188.3215c6b1.js"><link rel="prefetch" href="/assets/js/189.5e324d91.js"><link rel="prefetch" href="/assets/js/19.4bac67a7.js"><link rel="prefetch" href="/assets/js/190.71194c3e.js"><link rel="prefetch" href="/assets/js/191.3d513d7f.js"><link rel="prefetch" href="/assets/js/192.66f1b9c4.js"><link rel="prefetch" href="/assets/js/193.cfe9beef.js"><link rel="prefetch" href="/assets/js/194.d54494f6.js"><link rel="prefetch" href="/assets/js/195.91f8acc9.js"><link rel="prefetch" href="/assets/js/196.a727b0fb.js"><link rel="prefetch" href="/assets/js/197.dcd6487d.js"><link rel="prefetch" href="/assets/js/198.4734520f.js"><link rel="prefetch" href="/assets/js/199.4946dc06.js"><link rel="prefetch" href="/assets/js/20.c78801f0.js"><link rel="prefetch" href="/assets/js/200.72242046.js"><link rel="prefetch" href="/assets/js/201.87f62686.js"><link rel="prefetch" href="/assets/js/202.38ace3e6.js"><link rel="prefetch" href="/assets/js/203.2827a086.js"><link rel="prefetch" href="/assets/js/204.4c8342e0.js"><link rel="prefetch" href="/assets/js/205.e1de7f41.js"><link rel="prefetch" href="/assets/js/206.94f84999.js"><link rel="prefetch" href="/assets/js/207.95ca2dd7.js"><link rel="prefetch" href="/assets/js/208.f293b55a.js"><link rel="prefetch" href="/assets/js/209.056b496b.js"><link rel="prefetch" href="/assets/js/21.64cc6926.js"><link rel="prefetch" href="/assets/js/210.7f232344.js"><link rel="prefetch" href="/assets/js/211.748e6034.js"><link rel="prefetch" href="/assets/js/212.06e705a7.js"><link rel="prefetch" href="/assets/js/213.a9f317f4.js"><link rel="prefetch" href="/assets/js/214.65b257a7.js"><link rel="prefetch" href="/assets/js/215.1260a609.js"><link rel="prefetch" href="/assets/js/216.c1b39ca2.js"><link rel="prefetch" href="/assets/js/217.084bb897.js"><link rel="prefetch" href="/assets/js/218.02aa4cd9.js"><link rel="prefetch" href="/assets/js/219.35339213.js"><link rel="prefetch" href="/assets/js/22.cacbe2f9.js"><link rel="prefetch" href="/assets/js/220.1c043025.js"><link rel="prefetch" href="/assets/js/221.af0028af.js"><link rel="prefetch" href="/assets/js/222.43ea3237.js"><link rel="prefetch" href="/assets/js/223.8c59c2c8.js"><link rel="prefetch" href="/assets/js/224.ceff003f.js"><link rel="prefetch" href="/assets/js/225.d7aa9f36.js"><link rel="prefetch" href="/assets/js/226.7d7574e8.js"><link rel="prefetch" href="/assets/js/227.3786dac4.js"><link rel="prefetch" href="/assets/js/228.67433714.js"><link rel="prefetch" href="/assets/js/229.874cf521.js"><link rel="prefetch" href="/assets/js/23.70f001e8.js"><link rel="prefetch" href="/assets/js/230.63255993.js"><link rel="prefetch" href="/assets/js/231.2771635e.js"><link rel="prefetch" href="/assets/js/232.1a846631.js"><link rel="prefetch" href="/assets/js/233.7950c15f.js"><link rel="prefetch" href="/assets/js/234.9c9d2947.js"><link rel="prefetch" href="/assets/js/235.3423e660.js"><link rel="prefetch" href="/assets/js/236.2d15acb2.js"><link rel="prefetch" href="/assets/js/237.5e3e145a.js"><link rel="prefetch" href="/assets/js/238.ffb20d88.js"><link rel="prefetch" href="/assets/js/239.2d0bd5a9.js"><link rel="prefetch" href="/assets/js/24.e4a1dc80.js"><link rel="prefetch" href="/assets/js/240.987df996.js"><link rel="prefetch" href="/assets/js/241.9e67aa11.js"><link rel="prefetch" href="/assets/js/242.20c57ba1.js"><link rel="prefetch" href="/assets/js/243.b3b4e01f.js"><link rel="prefetch" href="/assets/js/25.607f30bb.js"><link rel="prefetch" href="/assets/js/26.60c54e7d.js"><link rel="prefetch" href="/assets/js/27.48c44b2e.js"><link rel="prefetch" href="/assets/js/28.eb44c0ba.js"><link rel="prefetch" href="/assets/js/29.3f35baff.js"><link rel="prefetch" href="/assets/js/3.c76bdb66.js"><link rel="prefetch" href="/assets/js/30.5ceb6f39.js"><link rel="prefetch" href="/assets/js/31.df68a33c.js"><link rel="prefetch" href="/assets/js/32.0870e048.js"><link rel="prefetch" href="/assets/js/33.3b446daa.js"><link rel="prefetch" href="/assets/js/34.fd564325.js"><link rel="prefetch" href="/assets/js/35.0e1dceb3.js"><link rel="prefetch" href="/assets/js/36.6ea040e9.js"><link rel="prefetch" href="/assets/js/37.d0f64292.js"><link rel="prefetch" href="/assets/js/38.da592564.js"><link rel="prefetch" href="/assets/js/39.f2413731.js"><link rel="prefetch" href="/assets/js/4.ce850d9b.js"><link rel="prefetch" href="/assets/js/40.7c003d2a.js"><link rel="prefetch" href="/assets/js/41.61dee31e.js"><link rel="prefetch" href="/assets/js/42.dc1cfeb4.js"><link rel="prefetch" href="/assets/js/43.3fe14024.js"><link rel="prefetch" href="/assets/js/44.b66c9969.js"><link rel="prefetch" href="/assets/js/45.281f7712.js"><link rel="prefetch" href="/assets/js/46.fb40bb01.js"><link rel="prefetch" href="/assets/js/47.311785d3.js"><link rel="prefetch" href="/assets/js/48.0070f89f.js"><link rel="prefetch" href="/assets/js/49.0a752342.js"><link rel="prefetch" href="/assets/js/5.1faa936b.js"><link rel="prefetch" href="/assets/js/50.d46282a9.js"><link rel="prefetch" href="/assets/js/51.5a52f209.js"><link rel="prefetch" href="/assets/js/52.1ec82ee7.js"><link rel="prefetch" href="/assets/js/53.01e08d71.js"><link rel="prefetch" href="/assets/js/54.0ef033a3.js"><link rel="prefetch" href="/assets/js/55.602b8614.js"><link rel="prefetch" href="/assets/js/56.3a886341.js"><link rel="prefetch" href="/assets/js/57.feae1a28.js"><link rel="prefetch" href="/assets/js/58.6d2f12be.js"><link rel="prefetch" href="/assets/js/59.9325c1da.js"><link rel="prefetch" href="/assets/js/6.5a088ba5.js"><link rel="prefetch" href="/assets/js/60.a265bf7c.js"><link rel="prefetch" href="/assets/js/61.30146ded.js"><link rel="prefetch" href="/assets/js/62.662b760a.js"><link rel="prefetch" href="/assets/js/63.5d59c7f0.js"><link rel="prefetch" href="/assets/js/64.faabd330.js"><link rel="prefetch" href="/assets/js/65.9ced9383.js"><link rel="prefetch" href="/assets/js/66.2ff8ca8d.js"><link rel="prefetch" href="/assets/js/67.9000451e.js"><link rel="prefetch" href="/assets/js/68.c63a2ef0.js"><link rel="prefetch" href="/assets/js/69.8c8e119e.js"><link rel="prefetch" href="/assets/js/7.8f4bed74.js"><link rel="prefetch" href="/assets/js/70.de3ec280.js"><link rel="prefetch" href="/assets/js/71.0009b157.js"><link rel="prefetch" href="/assets/js/72.31a06f9d.js"><link rel="prefetch" href="/assets/js/73.e84721d3.js"><link rel="prefetch" href="/assets/js/74.8da44d3d.js"><link rel="prefetch" href="/assets/js/75.0c64e4b0.js"><link rel="prefetch" href="/assets/js/76.3db2aba9.js"><link rel="prefetch" href="/assets/js/77.b00b1560.js"><link rel="prefetch" href="/assets/js/78.53a1c343.js"><link rel="prefetch" href="/assets/js/79.1218161f.js"><link rel="prefetch" href="/assets/js/8.b1937d38.js"><link rel="prefetch" href="/assets/js/80.b85cb7a2.js"><link rel="prefetch" href="/assets/js/81.d4f058f7.js"><link rel="prefetch" href="/assets/js/82.bd0f843c.js"><link rel="prefetch" href="/assets/js/83.b6f1d5c6.js"><link rel="prefetch" href="/assets/js/84.e3469377.js"><link rel="prefetch" href="/assets/js/85.1f3e7bd0.js"><link rel="prefetch" href="/assets/js/86.179e9bc8.js"><link rel="prefetch" href="/assets/js/87.9c3f44b4.js"><link rel="prefetch" href="/assets/js/88.79659ee4.js"><link rel="prefetch" href="/assets/js/89.bea5895d.js"><link rel="prefetch" href="/assets/js/9.ebe72a00.js"><link rel="prefetch" href="/assets/js/90.a7bf2270.js"><link rel="prefetch" href="/assets/js/91.82f3a339.js"><link rel="prefetch" href="/assets/js/92.89864afc.js"><link rel="prefetch" href="/assets/js/93.6a775a5a.js"><link rel="prefetch" href="/assets/js/95.e182e5da.js"><link rel="prefetch" href="/assets/js/96.bca74f0c.js"><link rel="prefetch" href="/assets/js/97.0b7a1a08.js"><link rel="prefetch" href="/assets/js/98.33ae82c8.js"><link rel="prefetch" href="/assets/js/99.4f690b51.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9b63dc7f.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Java全栈" class="logo"> <span class="site-name can-hide">Java全栈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><!----> <span class="title" style="display:;">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/250f21/" class="nav-link">基础设施即服务</a></li><li class="dropdown-subitem"><a href="/pages/f04654/" class="nav-link">平台即服务</a></li><li class="dropdown-subitem"><a href="/pages/58bcba/" class="nav-link">微服务解决复杂问题</a></li><li class="dropdown-subitem"><a href="/pages/b05793/" class="nav-link">Spring Cloud</a></li><li class="dropdown-subitem"><a href="/pages/1946f3/" class="nav-link">Spring Cloud Alibaba</a></li></ul></li><li class="dropdown-item"><h4>高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/aeaf26/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/pages/059418/" class="nav-link">Kubernetes</a></li></ul></li><li class="dropdown-item"><h4>专题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/fbef9a/" class="nav-link">Spring Security OAuth2</a></li><li class="dropdown-subitem"><a href="/pages/72ccd6/" class="nav-link">企业级 DevOps CI/CD实践</a></li><li class="dropdown-subitem"><a href="/pages/d49c54/" class="nav-link">Simplify Docs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线文档" class="dropdown-title"><!----> <span class="title" style="display:;">在线文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element - 网站快速成型工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://lodash.com/docs/#defaultsDeep" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lodash Documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zh.nuxtjs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxt.js - Vue.js 通用应用框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://vuex.vuejs.org/zh/api/#vuex-store" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuex
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.vuepress.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>后端文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://ifeve.com/google-guava/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google Guava官方教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker Documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线工具" class="dropdown-title"><!----> <span class="title" style="display:;">在线工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>在线编辑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://excalidraw.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线白板
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSON 编辑器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tableconvert.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MD 表格生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CRON 表达式
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.oschina.net/codeformat/html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码格式化
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  二维码生成器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://tool.chinaz.com/tools/native_ascii.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线编码转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>在线服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.processon.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  流程图思维导图
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://excalidraw.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  画图工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>开源镜像</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.aliyun.com/mirror/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OPSX镜像站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mirror.azure.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AZURE镜像站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker Hub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/1b12ed/" class="nav-link">💖支持</a></div><div class="nav-item"><a href="https://www.pigcs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  返回旧版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><!----> <span class="title" style="display:;">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/250f21/" class="nav-link">基础设施即服务</a></li><li class="dropdown-subitem"><a href="/pages/f04654/" class="nav-link">平台即服务</a></li><li class="dropdown-subitem"><a href="/pages/58bcba/" class="nav-link">微服务解决复杂问题</a></li><li class="dropdown-subitem"><a href="/pages/b05793/" class="nav-link">Spring Cloud</a></li><li class="dropdown-subitem"><a href="/pages/1946f3/" class="nav-link">Spring Cloud Alibaba</a></li></ul></li><li class="dropdown-item"><h4>高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/aeaf26/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/pages/059418/" class="nav-link">Kubernetes</a></li></ul></li><li class="dropdown-item"><h4>专题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/fbef9a/" class="nav-link">Spring Security OAuth2</a></li><li class="dropdown-subitem"><a href="/pages/72ccd6/" class="nav-link">企业级 DevOps CI/CD实践</a></li><li class="dropdown-subitem"><a href="/pages/d49c54/" class="nav-link">Simplify Docs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线文档" class="dropdown-title"><!----> <span class="title" style="display:;">在线文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element - 网站快速成型工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://lodash.com/docs/#defaultsDeep" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lodash Documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zh.nuxtjs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxt.js - Vue.js 通用应用框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://vuex.vuejs.org/zh/api/#vuex-store" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuex
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.vuepress.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>后端文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://ifeve.com/google-guava/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google Guava官方教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker Documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线工具" class="dropdown-title"><!----> <span class="title" style="display:;">在线工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>在线编辑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://excalidraw.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线白板
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSON 编辑器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tableconvert.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MD 表格生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CRON 表达式
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.oschina.net/codeformat/html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码格式化
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  二维码生成器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://tool.chinaz.com/tools/native_ascii.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线编码转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>在线服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.processon.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  流程图思维导图
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://excalidraw.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  画图工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>开源镜像</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.aliyun.com/mirror/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OPSX镜像站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mirror.azure.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AZURE镜像站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker Hub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/1b12ed/" class="nav-link">💖支持</a></div><div class="nav-item"><a href="https://www.pigcs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  返回旧版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Minio服务器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/76dc6a/" class="sidebar-link">Minio快速入门指南</a></li><li><a href="/pages/0cd85f/" class="sidebar-link">Minio Docker快速入门</a></li><li><a href="/pages/6bd2f8/" class="sidebar-link">Minio纠删码快速入门</a></li><li><a href="/pages/8153b1/" class="sidebar-link">分布式Minio快速入门</a></li><li><a href="/pages/98cf59/" class="sidebar-link">如何使用 TLS 保护对 MinIO 服务器的访问</a></li><li><a href="/pages/50e89b/" aria-current="page" class="active sidebar-link">Minio存储桶通知指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#前提条件" class="sidebar-link">前提条件</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用amqp发布minio事件" class="sidebar-link">使用AMQP发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-将amqp-endpoint添加到minio" class="sidebar-link">第一步: 将AMQP endpoint添加到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-使用minio客户端启用bucket通知" class="sidebar-link">第二步: 使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-在rabbitmq上进行验证" class="sidebar-link">第三步:在RabbitMQ上进行验证</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用mqtt发布minio事件" class="sidebar-link">使用MQTT发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-添加mqtt-endpoint到minio" class="sidebar-link">第一步: 添加MQTT endpoint到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-使用minio客户端启用bucket通知-2" class="sidebar-link">第二步: 使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-验证mqtt" class="sidebar-link">第三步：验证MQTT</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用elasticsearch发布minio事件" class="sidebar-link">使用Elasticsearch发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-确保至少满足第低要求" class="sidebar-link">第一步：确保至少满足第低要求</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-把es集成到minio中" class="sidebar-link">第二步：把ES集成到Minio中</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-使用minio客户端启用bucket通知" class="sidebar-link">第三步：使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第四步-验证es" class="sidebar-link">第四步：验证ES</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用redis发布minio事件" class="sidebar-link">使用Redis发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-集成redis到minio" class="sidebar-link">第一步：集成Redis到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-使用minio客户端启用bucket通知-3" class="sidebar-link">第二步: 使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-验证redis" class="sidebar-link">第三步：验证Redis</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用nats发布minio事件" class="sidebar-link">使用NATS发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-集成nats到minio" class="sidebar-link">第一步：集成NATS到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-使用minio客户端启用bucket通知-4" class="sidebar-link">第二步: 使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-验证nats" class="sidebar-link">第三步：验证NATS</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用postgresql发布minio事件" class="sidebar-link">使用PostgreSQL发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-确保确保至少满足第低要求" class="sidebar-link">第一步：确保确保至少满足第低要求</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-集成postgresql到minio" class="sidebar-link">第二步：集成PostgreSQL到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-使用minio客户端启用bucket通知-2" class="sidebar-link">第三步：使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第四步-验证postgresql" class="sidebar-link">第四步：验证PostgreSQL</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用mysql发布minio事件" class="sidebar-link">使用MySQL发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-确保确保至少满足第低要求-2" class="sidebar-link">第一步：确保确保至少满足第低要求</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-集成mysql到minio" class="sidebar-link">第二步：集成MySQL到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-使用minio客户端启用bucket通知-3" class="sidebar-link">第三步：使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第四步-验证mysql" class="sidebar-link">第四步：验证MySQL</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用kafka发布minio事件" class="sidebar-link">使用Kafka发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-确保确保至少满足第低要求-3" class="sidebar-link">第一步：确保确保至少满足第低要求</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-集成kafka到minio" class="sidebar-link">第二步：集成Kafka到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-使用minio客户端启用bucket通知-4" class="sidebar-link">第三步：使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第四步-验证kafka" class="sidebar-link">第四步：验证Kafka</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#使用webhook发布minio事件" class="sidebar-link">使用Webhook发布Minio事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/50e89b/#第一步-集成mysql到minio" class="sidebar-link">第一步：集成MySQL到Minio</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第二步-使用minio客户端启用bucket通知-5" class="sidebar-link">第二步：使用Minio客户端启用bucket通知</a></li><li class="sidebar-sub-header"><a href="/pages/50e89b/#第三步-采用thumbnailer进行验证" class="sidebar-link">第三步：采用Thumbnailer进行验证</a></li></ul></li></ul></li><li><a href="/pages/f9e3a2/" class="sidebar-link">Minio服务限制租户</a></li><li><a href="/pages/625c17/" class="sidebar-link">Minio Server配置指南</a></li><li><a href="/pages/9b5f74/" class="sidebar-link">Minio多租户（Multi-tenant）部署指南</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Minio客户端快速入门指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/17c975/" class="sidebar-link">Minio客户端快速入门指南</a></li><li><a href="/pages/538f88/" class="sidebar-link">Minio Client完全指南</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Minio SDKs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/53a165/" class="sidebar-link">Java Client快速入门指南</a></li><li><a href="/pages/b8b311/" class="sidebar-link">Java Client API参考文档</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>实战秘籍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/4a395a/" class="sidebar-link">使用Certbot生成Let's Encrypt证书</a></li><li><a href="/pages/7acf5a/" class="sidebar-link">使用 MinIO 服务器设置 Nginx 代理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Minio部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/542516/" class="sidebar-link">Minio部署快速入门</a></li><li><a href="/pages/b1ea49/" class="sidebar-link">使用Docker Swarm部署Minio</a></li><li><a href="/pages/01eafc/" class="sidebar-link">使用Kubernetes部署Minio</a></li><li><a href="/pages/46c251/" class="sidebar-link">在 Docker Compose 上部署 MinIO</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><span data-v-0c557b5e>MinIO</span></li><li data-v-0c557b5e><span data-v-0c557b5e>Minio服务器</span></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="https://github.com/heyuqiang" target="_blank" title="作者" class="beLink" data-v-0c557b5e>heyuqiang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-02-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Minio存储桶通知指南<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="minio存储桶通知指南"><a href="#minio存储桶通知指南" class="header-anchor">#</a> Minio存储桶通知指南</h1> <p>存储桶（Bucket）如果发生改变,比如上传对象和删除对象，可以使用存储桶事件通知机制进行监控，并通过以下方式发布出去:</p> <table><thead><tr><th style="text-align:left;">Notification Targets</th></tr></thead> <tbody><tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#AMQP" target="_blank" rel="noopener noreferrer"><code>AMQP</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#MQTT" target="_blank" rel="noopener noreferrer"><code>MQTT</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#Elasticsearch" target="_blank" rel="noopener noreferrer"><code>Elasticsearch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#Redis" target="_blank" rel="noopener noreferrer"><code>Redis</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#NATS" target="_blank" rel="noopener noreferrer"><code>NATS</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#PostgreSQL" target="_blank" rel="noopener noreferrer"><code>PostgreSQL</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#MySQL" target="_blank" rel="noopener noreferrer"><code>MySQL</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#apache-kafka" target="_blank" rel="noopener noreferrer"><code>Apache Kafka</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><a href="https://www.bookstack.cn/read/MinioCookbookZH/6.md#webhooks" target="_blank" rel="noopener noreferrer"><code>Webhooks</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr></tbody></table> <h2 id="前提条件"><a href="#前提条件" class="header-anchor">#</a> 前提条件</h2> <ul><li>从<a href="https://docs.min.io/docs/minio-quickstart-guide" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载并安装Minio Server。</li> <li>从<a href="https://docs.min.io/docs/minio-client-quickstart-guide" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载并安装Minio Client。</li></ul> <h2 id="使用amqp发布minio事件"><a href="#使用amqp发布minio事件" class="header-anchor">#</a> 使用AMQP发布Minio事件</h2> <p>从<a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载安装RabbitMQ。</p> <h3 id="第一步-将amqp-endpoint添加到minio"><a href="#第一步-将amqp-endpoint添加到minio" class="header-anchor">#</a> 第一步: 将AMQP endpoint添加到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。AMQP配置信息是在<code>notify</code>这个节点下的<code>amqp</code>节点下，在这里为你的AMQP实例创建配置信息键值对，key是你的AMQP endpoint的名称，value是下面表格中列列的键值对集合。</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>enable</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">(必须) 此AMQP server endpoint是否可用</td></tr> <tr><td style="text-align:left;"><code>url</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) AMQP server endpoint, 例如. <code>amqp://myuser:mypassword@localhost:5672</code></td></tr> <tr><td style="text-align:left;"><code>exchange</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">exchange名称</td></tr> <tr><td style="text-align:left;"><code>routingKey</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">发布用的Routing key</td></tr> <tr><td style="text-align:left;"><code>exchangeType</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">exchange类型</td></tr> <tr><td style="text-align:left;"><code>deliveryMode</code></td> <td style="text-align:left;"><em>uint8</em></td> <td style="text-align:left;">发布方式。 0或1 - 瞬态; 2 - 持久。</td></tr> <tr><td style="text-align:left;"><code>mandatory</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">Publishing related bool.</td></tr> <tr><td style="text-align:left;"><code>immediate</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">Publishing related bool.</td></tr> <tr><td style="text-align:left;"><code>durable</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">Exchange declaration related bool.</td></tr> <tr><td style="text-align:left;"><code>internal</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">Exchange declaration related bool.</td></tr> <tr><td style="text-align:left;"><code>noWait</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">Exchange declaration related bool.</td></tr> <tr><td style="text-align:left;"><code>autoDeleted</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">Exchange declaration related bool.</td></tr></tbody></table> <p>下面展示的是RabbitMQ的配置示例:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;amqp&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;url&quot;: &quot;amqp://myuser:mypassword@localhost:5672&quot;,        &quot;exchange&quot;: &quot;bucketevents&quot;,        &quot;routingKey&quot;: &quot;bucketlogs&quot;,        &quot;exchangeType&quot;: &quot;fanout&quot;,        &quot;deliveryMode&quot;: 0,        &quot;mandatory&quot;: false,        &quot;immediate&quot;: false,        &quot;durable&quot;: false,        &quot;internal&quot;: false,        &quot;noWait&quot;: false,        &quot;autoDeleted&quot;: false    }}
</code></pre></div><p>更新完配置文件后，重启Minio Server让配置生效。如果一切顺利，Minio Server会在启动时输出一行信息，类似 <code>SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:amqp</code>。</p> <p>Minio支持<a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">RabbitMQ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中所有的交换方式，这次我们采用 <code>fanout</code> 交换。</p> <p>注意一下，你可以听从你内心的想法，想配几个AMQP服务就配几个，只要每个AMQP服务实例有不同的ID (比如前面示例中的&quot;1&quot;) 和配置信息。</p> <h3 id="第二步-使用minio客户端启用bucket通知"><a href="#第二步-使用minio客户端启用bucket通知" class="header-anchor">#</a> 第二步: 使用Minio客户端启用bucket通知</h3> <p>如果一个JPEG图片上传到<code>myminio</code> server里的<code>images</code> 存储桶或者从桶中删除，一个存储桶事件通知就会被触发。 这里ARN值是<code>arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:amqp</code>，想了解更多关于ARN的信息，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">AWS ARN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> documentation.</p> <div class="language- extra-class"><pre class="language-text"><code>mc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:amqp --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:amqp s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第三步-在rabbitmq上进行验证"><a href="#第三步-在rabbitmq上进行验证" class="header-anchor">#</a> 第三步:在RabbitMQ上进行验证</h3> <p>下面将要出场的python程序会等待队列交换T<code>bucketevents</code>并在控制台中输出事件通知。我们使用的是<a href="https://www.rabbitmq.com/tutorials/tutorial-three-python.html" target="_blank" rel="noopener noreferrer">Pika Python Client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来实现此功能。</p> <div class="language- extra-class"><pre class="language-text"><code>#!/usr/bin/env pythonimport pikaconnection = pika.BlockingConnection(pika.ConnectionParameters(        host='localhost'))channel = connection.channel()channel.exchange_declare(exchange='bucketevents',                         exchange_type='fanout')result = channel.queue_declare(exclusive=False)queue_name = result.method.queuechannel.queue_bind(exchange='bucketevents',                   queue=queue_name)print(' [*] Waiting for logs. To exit press CTRL+C')def callback(ch, method, properties, body):    print(&quot; [x] %r&quot; % body)channel.basic_consume(callback,                      queue=queue_name,                      no_ack=False)channel.start_consuming()
</code></pre></div><p>执行示例中的python程序来观察RabbitMQ事件。</p> <div class="language- extra-class"><pre class="language-text"><code>python rabbit.py
</code></pre></div><p>另开一个terminal终端并上传一张JPEG图片到<code>images</code>存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p>一旦上传完毕，你应该会通过RabbitMQ收到下面的事件通知。</p> <div class="language- extra-class"><pre class="language-text"><code>python rabbit.py‘{“Records”:[{“eventVersion”:”2.0&quot;,”eventSource”:”aws:s3&quot;,”awsRegion”:”us-east-1&quot;,”eventTime”:”2016–09–08T22:34:38.226Z”,”eventName”:”s3:ObjectCreated:Put”,”userIdentity”:{“principalId”:”minio”},”requestParameters”:{“sourceIPAddress”:”10.1.10.150:44576&quot;},”responseElements”:{},”s3&quot;:{“s3SchemaVersion”:”1.0&quot;,”configurationId”:”Config”,”bucket”:{“name”:”images”,”ownerIdentity”:{“principalId”:”minio”},”arn”:”arn:aws:s3:::images”},”object”:{“key”:”myphoto.jpg”,”size”:200436,”sequencer”:”147279EAF9F40933&quot;}}}],”level”:”info”,”msg”:””,”time”:”2016–09–08T15:34:38–07:00&quot;}\n
</code></pre></div><h2 id="使用mqtt发布minio事件"><a href="#使用mqtt发布minio事件" class="header-anchor">#</a> 使用MQTT发布Minio事件</h2> <p>从 <a href="https://mosquitto.org/" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>安装MQTT Broker。</p> <h3 id="第一步-添加mqtt-endpoint到minio"><a href="#第一步-添加mqtt-endpoint到minio" class="header-anchor">#</a> 第一步: 添加MQTT endpoint到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。MQTT配置信息是在<code>notify</code>这个节点下的<code>mqtt</code>节点下，在这里为你的MQTT实例创建配置信息键值对，key是你的MQTT endpoint的名称，value是下面表格中列列的键值对集合。</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>enable</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">(必须) 这个 server endpoint是否可用?</td></tr> <tr><td style="text-align:left;"><code>broker</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) MQTT server endpoint, 例如. <code>tcp://localhost:1883</code></td></tr> <tr><td style="text-align:left;"><code>topic</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 要发布的MQTT主题的名称, 例如. <code>minio</code></td></tr> <tr><td style="text-align:left;"><code>qos</code></td> <td style="text-align:left;"><em>int</em></td> <td style="text-align:left;">设置服务质量级别</td></tr> <tr><td style="text-align:left;"><code>clientId</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">MQTT代理识别Minio的唯一ID</td></tr> <tr><td style="text-align:left;"><code>username</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">连接MQTT server的用户名 (如果需要的话)</td></tr> <tr><td style="text-align:left;"><code>password</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">链接MQTT server的密码 (如果需要的话)</td></tr></tbody></table> <p>以下是一个MQTT的配置示例:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;mqtt&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;broker&quot;: &quot;tcp://localhost:1883&quot;,        &quot;topic&quot;: &quot;minio&quot;,        &quot;qos&quot;: 1,        &quot;clientId&quot;: &quot;minio&quot;,        &quot;username&quot;: &quot;&quot;,        &quot;password&quot;: &quot;&quot;    }}
</code></pre></div><p>更新完配置文件后，重启Minio Server让配置生效。如果一切顺利，Minio Server会在启动时输出一行信息，类似 <code>SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mqtt</code>。</p> <p>Minio支持任何支持MQTT 3.1或3.1.1的MQTT服务器，并且可以通过TCP，TLS或Websocket连接使用<code>tcp://</code>, <code>tls://</code>, or <code>ws://</code>分别作为代理URL的方案。 更多信息，请参考 <a href="http://www.eclipse.org/paho/clients/golang/" target="_blank" rel="noopener noreferrer">Go Client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>注意一下，你还是和之前AMQP一样可以听从你内心的想法，想配几个MQTT服务就配几个，只要每个MQTT服务实例有不同的ID (比如前面示例中的&quot;1&quot;) 和配置信息。</p> <h3 id="第二步-使用minio客户端启用bucket通知-2"><a href="#第二步-使用minio客户端启用bucket通知-2" class="header-anchor">#</a> 第二步: 使用Minio客户端启用bucket通知</h3> <p>如果一个JPEG图片上传到<code>myminio</code> server里的<code>images</code> 存储桶或者从桶中删除，一个存储桶事件通知就会被触发。 这里ARN值是<code>arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mqtt</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>mc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:mqtt --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:amqp s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第三步-验证mqtt"><a href="#第三步-验证mqtt" class="header-anchor">#</a> 第三步：验证MQTT</h3> <p>下面的python程序等待mqtt主题<code>/ minio</code>，并在控制台上打印事件通知。 我们使用<a href="https://pypi.python.org/pypi/paho-mqtt/" target="_blank" rel="noopener noreferrer">paho-mqtt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>库来执行此操作。</p> <div class="language- extra-class"><pre class="language-text"><code>#!/usr/bin/env pythonfrom __future__ import print_functionimport paho.mqtt.client as mqtt# The callback for when the client receives a CONNACK response from the server.def on_connect(client, userdata, flags, rc):    print(&quot;Connected with result code&quot;, rc)    # Subscribing in on_connect() means that if we lose the connection and    # reconnect then subscriptions will be renewed.    client.subscribe(&quot;/minio&quot;)# The callback for when a PUBLISH message is received from the server.def on_message(client, userdata, msg):    print(msg.payload)client = mqtt.Client()client.on_connect = on_connectclient.on_message = on_messageclient.connect(&quot;localhost:1883&quot;, 1883, 60)# Blocking call that processes network traffic, dispatches callbacks and# handles reconnecting.# Other loop*() functions are available that give a threaded interface and a# manual interface.client.loop_forever()
</code></pre></div><p>执行这个python示例程序来观察MQTT事件。</p> <div class="language- extra-class"><pre class="language-text"><code>python mqtt.py
</code></pre></div><p>打开一个新的terminal终端并上传一张JPEG图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p>一旦上传完毕，你应该会通过MQTT收到下面的事件通知。</p> <div class="language- extra-class"><pre class="language-text"><code>python mqtt.py{“Records”:[{“eventVersion”:”2.0&quot;,”eventSource”:”aws:s3&quot;,”awsRegion”:”us-east-1&quot;,”eventTime”:”2016–09–08T22:34:38.226Z”,”eventName”:”s3:ObjectCreated:Put”,”userIdentity”:{“principalId”:”minio”},”requestParameters”:{“sourceIPAddress”:”10.1.10.150:44576&quot;},”responseElements”:{},”s3&quot;:{“s3SchemaVersion”:”1.0&quot;,”configurationId”:”Config”,”bucket”:{“name”:”images”,”ownerIdentity”:{“principalId”:”minio”},”arn”:”arn:aws:s3:::images”},”object”:{“key”:”myphoto.jpg”,”size”:200436,”sequencer”:”147279EAF9F40933&quot;}}}],”level”:”info”,”msg”:””,”time”:”2016–09–08T15:34:38–07:00&quot;}
</code></pre></div><h2 id="使用elasticsearch发布minio事件"><a href="#使用elasticsearch发布minio事件" class="header-anchor">#</a> 使用Elasticsearch发布Minio事件</h2> <p>安装 <a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。</p> <p>这个通知目标支持两种格式: <em>namespace</em> and <em>access</em>。</p> <p>如果使用的是 <em>namespace</em> 格式, Minio将桶中的对象与索引中的文档进行同步。对于Minio的每一个事件，ES都会创建一个document,这个document的ID就是存储桶以及存储对象的名称。事件的其他细节存储在document的正文中。因此，如果一个已经存在的对象在Minio中被覆盖，在ES中的相对应的document也会被更新。如果一个对象被删除，相对应的document也会从index中删除。</p> <p>如果使用的是<em>access</em>格式，Minio将事件作为document加到ES的index中。对于每一个事件，ES同样会创建一个document,这个document包含事件的所有细节，document的时间戳设置为事件的时间戳，并将该document加到ES的index中。这个document的ID是由ES随机生成的。在<em>access</em>格式下，没有文档会被删除或者修改，对于一个对象的操作，都会生成新的document附加到index中。</p> <p>下面的步骤展示的是在<code>namespace</code>格式下，如何使用通知目标。另一种格式和这个很类似，为了不让你们说我墨迹，就不再赘述了。</p> <h3 id="第一步-确保至少满足第低要求"><a href="#第一步-确保至少满足第低要求" class="header-anchor">#</a> 第一步：确保至少满足第低要求</h3> <p>Minio要求使用的是ES 5.X系统版本。如果使用的是低版本的ES，也没关系，ES官方支持升级迁移，详情请看<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-upgrade.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="第二步-把es集成到minio中"><a href="#第二步-把es集成到minio中" class="header-anchor">#</a> 第二步：把ES集成到Minio中</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。ES配置信息是在<code>notify</code>这个节点下的<code>elasticsearch</code>节点下，在这里为你的ES实例创建配置信息键值对，key是你的ES的名称，value是下面表格中列列的键值对集合。</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>enable</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">(必须) 是否启用这个配置?</td></tr> <tr><td style="text-align:left;"><code>format</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 是<code>namespace</code> 还是 <code>access</code></td></tr> <tr><td style="text-align:left;"><code>url</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) ES地址，比如: <code>http://localhost:9200</code></td></tr> <tr><td style="text-align:left;"><code>index</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 给Minio用的index</td></tr></tbody></table> <p>以下是ES的一个配置示例:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;elasticsearch&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;format&quot;: &quot;namespace&quot;,        &quot;url&quot;: &quot;http://127.0.0.1:9200&quot;,        &quot;index&quot;: &quot;minio_events&quot;    }},
</code></pre></div><p>更新完配置文件后，重启Minio Server让配置生效。如果一切顺利，Minio Server会在启动时输出一行信息，类似 <code>SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:elasticsearch</code>。</p> <p>注意一下，你又可以再一次听从你内心的想法，想配几个ES服务就配几个，只要每个ES服务实例有不同的ID (比如前面示例中的&quot;1&quot;) 和配置信息。</p> <h3 id="第三步-使用minio客户端启用bucket通知"><a href="#第三步-使用minio客户端启用bucket通知" class="header-anchor">#</a> 第三步：使用Minio客户端启用bucket通知</h3> <p>我们现在可以在一个叫<code>images</code>的存储桶上开启事件通知。一旦有文件被创建或者覆盖，一个新的ES的document会被创建或者更新到之前咱配的index里。如果一个已经存在的对象被删除，这个对应的document也会从index中删除。因此，这个ES index里的行，就映射着<code>images</code>存储桶里的对象。</p> <p>要配置这种存储桶通知，我们需要用到前面步骤Minio输出的ARN信息。更多有关ARN的资料，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>有了<code>mc</code>这个工具，这些配置信息很容易就能添加上。假设咱们的Minio服务别名叫<code>myminio</code>,可执行下列脚本：</p> <div class="language- extra-class"><pre class="language-text"><code>mc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:elasticsearch --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:elasticsearch s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第四步-验证es"><a href="#第四步-验证es" class="header-anchor">#</a> 第四步：验证ES</h3> <p>上传一张图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p>使用curl查到<code>minio_events</code> index中的内容。</p> <div class="language- extra-class"><pre class="language-text"><code>$ curl  &quot;http://localhost:9200/minio_events/_search?pretty=true&quot;{  &quot;took&quot; : 40,  &quot;timed_out&quot; : false,  &quot;_shards&quot; : {    &quot;total&quot; : 5,    &quot;successful&quot; : 5,    &quot;failed&quot; : 0  },  &quot;hits&quot; : {    &quot;total&quot; : 1,    &quot;max_score&quot; : 1.0,    &quot;hits&quot; : [      {        &quot;_index&quot; : &quot;minio_events&quot;,        &quot;_type&quot; : &quot;event&quot;,        &quot;_id&quot; : &quot;images/myphoto.jpg&quot;,        &quot;_score&quot; : 1.0,        &quot;_source&quot; : {          &quot;Records&quot; : [            {              &quot;eventVersion&quot; : &quot;2.0&quot;,              &quot;eventSource&quot; : &quot;minio:s3&quot;,              &quot;awsRegion&quot; : &quot;us-east-1&quot;,              &quot;eventTime&quot; : &quot;2017-03-30T08:00:41Z&quot;,              &quot;eventName&quot; : &quot;s3:ObjectCreated:Put&quot;,              &quot;userIdentity&quot; : {                &quot;principalId&quot; : &quot;minio&quot;              },              &quot;requestParameters&quot; : {                &quot;sourceIPAddress&quot; : &quot;127.0.0.1:38062&quot;              },              &quot;responseElements&quot; : {                &quot;x-amz-request-id&quot; : &quot;14B09A09703FC47B&quot;,                &quot;x-minio-origin-endpoint&quot; : &quot;http://192.168.86.115:9000&quot;              },              &quot;s3&quot; : {                &quot;s3SchemaVersion&quot; : &quot;1.0&quot;,                &quot;configurationId&quot; : &quot;Config&quot;,                &quot;bucket&quot; : {                  &quot;name&quot; : &quot;images&quot;,                  &quot;ownerIdentity&quot; : {                    &quot;principalId&quot; : &quot;minio&quot;                  },                  &quot;arn&quot; : &quot;arn:aws:s3:::images&quot;                },                &quot;object&quot; : {                  &quot;key&quot; : &quot;myphoto.jpg&quot;,                  &quot;size&quot; : 6474,                  &quot;eTag&quot; : &quot;a3410f4f8788b510d6f19c5067e60a90&quot;,                  &quot;sequencer&quot; : &quot;14B09A09703FC47B&quot;                }              },              &quot;source&quot; : {                &quot;host&quot; : &quot;127.0.0.1&quot;,                &quot;port&quot; : &quot;38062&quot;,                &quot;userAgent&quot; : &quot;Minio (linux; amd64) minio-go/2.0.3 mc/2017-02-15T17:57:25Z&quot;              }            }          ]        }      }    ]  }}
</code></pre></div><p>这个输出显示在ES中为这个事件创建了一个document。</p> <p>这里我们可以看到这个document ID就是存储桶和对象的名称。如果用的是<code>access</code>格式，这个document ID就是由ES随机生成的。</p> <h2 id="使用redis发布minio事件"><a href="#使用redis发布minio事件" class="header-anchor">#</a> 使用Redis发布Minio事件</h2> <p>安装 <a href="http://redis.io/download" target="_blank" rel="noopener noreferrer">Redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。为了演示，我们将数据库密码设为&quot;yoursecret&quot;。</p> <p>这种通知目标支持两种格式: <em>namespace</em> 和 <em>access</em>。</p> <p>如果用的是<em>namespacee</em>格式，Minio将存储桶里的对象同步成Redis hash中的条目。对于每一个条目，对应一个存储桶里的对象，其key都被设为&quot;存储桶名称/对象名称&quot;，value都是一个有关这个Minio对象的JSON格式的事件数据。如果对象更新或者删除，hash中对象的条目也会相应的更新或者删除。</p> <p>如果使用的是<em>access</em>,Minio使用<a href="https://redis.io/commands/rpush" target="_blank" rel="noopener noreferrer">RPUSH<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>将事件添加到list中。这个list中每一个元素都是一个JSON格式的list,这个list中又有两个元素，第一个元素是时间戳的字符串，第二个元素是一个含有在这个存储桶上进行操作的事件数据的JSON对象。在这种格式下，list中的元素不会更新或者删除。</p> <p>下面的步骤展示如何在<code>namespace</code>和<code>access</code>格式下使用通知目标。</p> <h3 id="第一步-集成redis到minio"><a href="#第一步-集成redis到minio" class="header-anchor">#</a> 第一步：集成Redis到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。Redis配置信息是在<code>notify</code>这个节点下的<code>redis</code>节点下，在这里为你的Redis实例创建配置信息键值对，key是你的Redis端的名称，value是下面表格中的键值对里面值的集合。</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>enable</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">(必须) 这个配置是否可用?</td></tr> <tr><td style="text-align:left;"><code>format</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 是 <code>namespace</code> 还是 <code>access</code></td></tr> <tr><td style="text-align:left;"><code>address</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) Redis服务地址，比如: <code>localhost:6379</code></td></tr> <tr><td style="text-align:left;"><code>password</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选) Redis服务密码</td></tr> <tr><td style="text-align:left;"><code>key</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 事件要存储到redis key的名称。如果用的是<code>namespace</code>格式的话，则是一个hash,如果是<code>access</code>格式的话，则是一个list</td></tr></tbody></table> <p>下面是一个Redis配置示例:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;redis&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;address&quot;: &quot;127.0.0.1:6379&quot;,        &quot;password&quot;: &quot;yoursecret&quot;,        &quot;key&quot;: &quot;bucketevents&quot;    }}
</code></pre></div><p>更新完配置文件后，重启Minio Server让配置生效。如果一切顺利，Minio Server会在启动时输出一行信息，类似 <code>SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:redis</code>。</p> <p>注意一下，你永远都可以听从你内心的想法，想配几个Redis服务就配几个，只要每个Redis服务实例有不同的ID (比如前面示例中的&quot;1&quot;) 和配置信息。</p> <h3 id="第二步-使用minio客户端启用bucket通知-3"><a href="#第二步-使用minio客户端启用bucket通知-3" class="header-anchor">#</a> 第二步: 使用Minio客户端启用bucket通知</h3> <p>我们现在可以在一个叫<code>images</code>的存储桶上开启事件通知。一旦有文件被创建或者覆盖，一个新的key会被创建,或者一个已经存在的key就会被更新到之前配置好的redis hash里。如果一个已经存在的对象被删除，这个对应的key也会从hash中删除。因此，这个Redis hash里的行，就映射着<code>images</code>存储桶里的<code>.jpg</code>对象。</p> <p>要配置这种存储桶通知，我们需要用到前面步骤Minio输出的ARN信息。更多有关ARN的资料，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>有了<code>mc</code>这个工具，这些配置信息很容易就能添加上。假设咱们的Minio服务别名叫<code>myminio</code>,可执行下列脚本：</p> <div class="language- extra-class"><pre class="language-text"><code>mc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:redis --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:redis s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第三步-验证redis"><a href="#第三步-验证redis" class="header-anchor">#</a> 第三步：验证Redis</h3> <p>启动<code>redis-cli</code>这个Redis客户端程序来检查Redis中的内容. 运行<code>monitor</code>Redis命令将会输出在Redis上执行的每个命令的。</p> <div class="language- extra-class"><pre class="language-text"><code>redis-cli -a yoursecret127.0.0.1:6379&gt; monitorOK
</code></pre></div><p>打开一个新的terminal终端并上传一张JPEG图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p>在上一个终端中，你将看到Minio在Redis上执行的操作：</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; monitorOK1490686879.650649 [0 172.17.0.1:44710] &quot;PING&quot;1490686879.651061 [0 172.17.0.1:44710] &quot;HSET&quot; &quot;minio_events&quot; &quot;images/myphoto.jpg&quot; &quot;{\&quot;Records\&quot;:[{\&quot;eventVersion\&quot;:\&quot;2.0\&quot;,\&quot;eventSource\&quot;:\&quot;minio:s3\&quot;,\&quot;awsRegion\&quot;:\&quot;us-east-1\&quot;,\&quot;eventTime\&quot;:\&quot;2017-03-28T07:41:19Z\&quot;,\&quot;eventName\&quot;:\&quot;s3:ObjectCreated:Put\&quot;,\&quot;userIdentity\&quot;:{\&quot;principalId\&quot;:\&quot;minio\&quot;},\&quot;requestParameters\&quot;:{\&quot;sourceIPAddress\&quot;:\&quot;127.0.0.1:52234\&quot;},\&quot;responseElements\&quot;:{\&quot;x-amz-request-id\&quot;:\&quot;14AFFBD1ACE5F632\&quot;,\&quot;x-minio-origin-endpoint\&quot;:\&quot;http://192.168.86.115:9000\&quot;},\&quot;s3\&quot;:{\&quot;s3SchemaVersion\&quot;:\&quot;1.0\&quot;,\&quot;configurationId\&quot;:\&quot;Config\&quot;,\&quot;bucket\&quot;:{\&quot;name\&quot;:\&quot;images\&quot;,\&quot;ownerIdentity\&quot;:{\&quot;principalId\&quot;:\&quot;minio\&quot;},\&quot;arn\&quot;:\&quot;arn:aws:s3:::images\&quot;},\&quot;object\&quot;:{\&quot;key\&quot;:\&quot;myphoto.jpg\&quot;,\&quot;size\&quot;:2586,\&quot;eTag\&quot;:\&quot;5d284463f9da279f060f0ea4d11af098\&quot;,\&quot;sequencer\&quot;:\&quot;14AFFBD1ACE5F632\&quot;}},\&quot;source\&quot;:{\&quot;host\&quot;:\&quot;127.0.0.1\&quot;,\&quot;port\&quot;:\&quot;52234\&quot;,\&quot;userAgent\&quot;:\&quot;Minio (linux; amd64) minio-go/2.0.3 mc/2017-02-15T17:57:25Z\&quot;}}]}&quot;
</code></pre></div><p>在这我们可以看到Minio在<code>minio_events</code>这个key上执行了<code>HSET</code>命令。</p> <p>如果用的是<code>access</code>格式，那么<code>minio_events</code>就是一个list,Minio就会调用<code>RPUSH</code>添加到list中。这个list的消费者会使用<code>BLPOP</code>从list的最左端删除list元素。</p> <h2 id="使用nats发布minio事件"><a href="#使用nats发布minio事件" class="header-anchor">#</a> 使用NATS发布Minio事件</h2> <p>安装 <a href="http://nats.io/" target="_blank" rel="noopener noreferrer">NATS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="第一步-集成nats到minio"><a href="#第一步-集成nats到minio" class="header-anchor">#</a> 第一步：集成NATS到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。参考下面的示例修改NATS的配置:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;nats&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;address&quot;: &quot;0.0.0.0:4222&quot;,        &quot;subject&quot;: &quot;bucketevents&quot;,        &quot;username&quot;: &quot;yourusername&quot;,        &quot;password&quot;: &quot;yoursecret&quot;,        &quot;token&quot;: &quot;&quot;,        &quot;secure&quot;: false,        &quot;pingInterval&quot;: 0        &quot;streaming&quot;: {            &quot;enable&quot;: false,            &quot;clusterID&quot;: &quot;&quot;,            &quot;clientID&quot;: &quot;&quot;,            &quot;async&quot;: false,            &quot;maxPubAcksInflight&quot;: 0        }    }},
</code></pre></div><p>更新完配置文件后，重启Minio Server让配置生效。<code>bucketevents</code>是NATS在这个例子中使用的主题。</p> <p>Minio服务也支持 <a href="http://nats.io/documentation/streaming/nats-streaming-intro/" target="_blank" rel="noopener noreferrer">NATS Streaming mode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，这种模式额外提供了像 <code>Message/event persistence</code>, <code>At-least-once-delivery</code>, 以及 <code>Publisher rate limiting</code>这样的功能。如果想让Minio服务发送通知到NATS Streaming server,参考下面示面进行配置：</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;nats&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;address&quot;: &quot;0.0.0.0:4222&quot;,        &quot;subject&quot;: &quot;bucketevents&quot;,        &quot;username&quot;: &quot;yourusername&quot;,        &quot;password&quot;: &quot;yoursecret&quot;,        &quot;token&quot;: &quot;&quot;,        &quot;secure&quot;: false,        &quot;pingInterval&quot;: 0        &quot;streaming&quot;: {            &quot;enable&quot;: true,            &quot;clusterID&quot;: &quot;test-cluster&quot;,            &quot;clientID&quot;: &quot;minio-client&quot;,            &quot;async&quot;: true,            &quot;maxPubAcksInflight&quot;: 10        }    }},
</code></pre></div><p>更多关于 <code>clusterID</code>, <code>clientID</code> 的信息，请看 <a href="https://github.com/nats-io/nats-streaming-server/blob/master/README.md" target="_blank" rel="noopener noreferrer">NATS documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. 关于 <code>maxPubAcksInflight</code> ，请看 <a href="https://github.com/nats-io/go-nats-streaming#publisher-rate-limiting" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="第二步-使用minio客户端启用bucket通知-4"><a href="#第二步-使用minio客户端启用bucket通知-4" class="header-anchor">#</a> 第二步: 使用Minio客户端启用bucket通知</h3> <p>我们现在可以在一个叫<code>images</code>的存储桶上开启事件通知，一旦<code>myminio</code> server上有文件 从<code>images</code>存储桶里删除或者上传到存储桶中，事件即被触发。在这里，ARN的值是<code>arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:nats</code>。 更多有关ARN的资料，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language- extra-class"><pre class="language-text"><code>mc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:nats --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:nats s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第三步-验证nats"><a href="#第三步-验证nats" class="header-anchor">#</a> 第三步：验证NATS</h3> <p>如果你用的是NATS server，请查看下面的示例程序来记录添加到NATS的存储桶通知。</p> <div class="language- extra-class"><pre class="language-text"><code>package main// Import Go and NATS packagesimport (    &quot;log&quot;    &quot;runtime&quot;    &quot;github.com/nats-io/nats&quot;)func main() {    // Create server connection    natsConnection, _ := nats.Connect(&quot;nats://yourusername:yoursecret@localhost:4222&quot;)    log.Println(&quot;Connected&quot;)    // Subscribe to subject    log.Printf(&quot;Subscribing to subject 'bucketevents'\n&quot;)    natsConnection.Subscribe(&quot;bucketevents&quot;, func(msg *nats.Msg) {        // Handle the message        log.Printf(&quot;Received message '%s\n&quot;, string(msg.Data)+&quot;'&quot;)    })    // Keep the connection alive    runtime.Goexit()}
go run nats.go2016/10/12 06:39:18 Connected2016/10/12 06:39:18 Subscribing to subject 'bucketevents'
</code></pre></div><p>打开一个新的terminal终端并上传一张JPEG图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p><code>nats.go</code>示例程序将事件通知打印到控制台。</p> <div class="language- extra-class"><pre class="language-text"><code>go run nats.go2016/10/12 06:51:26 Connected2016/10/12 06:51:26 Subscribing to subject 'bucketevents'2016/10/12 06:51:33 Received message '{&quot;EventType&quot;:&quot;s3:ObjectCreated:Put&quot;,&quot;Key&quot;:&quot;images/myphoto.jpg&quot;,&quot;Records&quot;:[{&quot;eventVersion&quot;:&quot;2.0&quot;,&quot;eventSource&quot;:&quot;aws:s3&quot;,&quot;awsRegion&quot;:&quot;us-east-1&quot;,&quot;eventTime&quot;:&quot;2016-10-12T13:51:33Z&quot;,&quot;eventName&quot;:&quot;s3:ObjectCreated:Put&quot;,&quot;userIdentity&quot;:{&quot;principalId&quot;:&quot;minio&quot;},&quot;requestParameters&quot;:{&quot;sourceIPAddress&quot;:&quot;[::1]:57106&quot;},&quot;responseElements&quot;:{},&quot;s3&quot;:{&quot;s3SchemaVersion&quot;:&quot;1.0&quot;,&quot;configurationId&quot;:&quot;Config&quot;,&quot;bucket&quot;:{&quot;name&quot;:&quot;images&quot;,&quot;ownerIdentity&quot;:{&quot;principalId&quot;:&quot;minio&quot;},&quot;arn&quot;:&quot;arn:aws:s3:::images&quot;},&quot;object&quot;:{&quot;key&quot;:&quot;myphoto.jpg&quot;,&quot;size&quot;:56060,&quot;eTag&quot;:&quot;1d97bf45ecb37f7a7b699418070df08f&quot;,&quot;sequencer&quot;:&quot;147CCD1AE054BFD0&quot;}}}],&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;&quot;,&quot;time&quot;:&quot;2016-10-12T06:51:33-07:00&quot;}
</code></pre></div><p>如果你用的是NATS Streaming server,请查看下面的示例程序来记录添加到NATS的存储桶通知。</p> <div class="language- extra-class"><pre class="language-text"><code>package main// Import Go and NATS packagesimport (    &quot;fmt&quot;    &quot;runtime&quot;    &quot;github.com/nats-io/go-nats-streaming&quot;)func main() {    natsConnection, _ := stan.Connect(&quot;test-cluster&quot;, &quot;test-client&quot;)    log.Println(&quot;Connected&quot;)    // Subscribe to subject    log.Printf(&quot;Subscribing to subject 'bucketevents'\n&quot;)    natsConnection.Subscribe(&quot;bucketevents&quot;, func(m *stan.Msg) {        // Handle the message        fmt.Printf(&quot;Received a message: %s\n&quot;, string(m.Data))    })    // Keep the connection alive    runtime.Goexit()}
go run nats.go2017/07/07 11:47:40 Connected2017/07/07 11:47:40 Subscribing to subject 'bucketevents'
</code></pre></div><p>打开一个新的terminal终端并上传一张JPEG图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p><code>nats.go</code>示例程序将事件通知打印到控制台。</p> <div class="language- extra-class"><pre class="language-text"><code>Received a message: {&quot;EventType&quot;:&quot;s3:ObjectCreated:Put&quot;,&quot;Key&quot;:&quot;images/myphoto.jpg&quot;,&quot;Records&quot;:[{&quot;eventVersion&quot;:&quot;2.0&quot;,&quot;eventSource&quot;:&quot;minio:s3&quot;,&quot;awsRegion&quot;:&quot;&quot;,&quot;eventTime&quot;:&quot;2017-07-07T18:46:37Z&quot;,&quot;eventName&quot;:&quot;s3:ObjectCreated:Put&quot;,&quot;userIdentity&quot;:{&quot;principalId&quot;:&quot;minio&quot;},&quot;requestParameters&quot;:{&quot;sourceIPAddress&quot;:&quot;192.168.1.80:55328&quot;},&quot;responseElements&quot;:{&quot;x-amz-request-id&quot;:&quot;14CF20BD1EFD5B93&quot;,&quot;x-minio-origin-endpoint&quot;:&quot;http://127.0.0.1:9000&quot;},&quot;s3&quot;:{&quot;s3SchemaVersion&quot;:&quot;1.0&quot;,&quot;configurationId&quot;:&quot;Config&quot;,&quot;bucket&quot;:{&quot;name&quot;:&quot;images&quot;,&quot;ownerIdentity&quot;:{&quot;principalId&quot;:&quot;minio&quot;},&quot;arn&quot;:&quot;arn:aws:s3:::images&quot;},&quot;object&quot;:{&quot;key&quot;:&quot;myphoto.jpg&quot;,&quot;size&quot;:248682,&quot;eTag&quot;:&quot;f1671feacb8bbf7b0397c6e9364e8c92&quot;,&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;userDefined&quot;:{&quot;content-type&quot;:&quot;image/jpeg&quot;},&quot;versionId&quot;:&quot;1&quot;,&quot;sequencer&quot;:&quot;14CF20BD1EFD5B93&quot;}},&quot;source&quot;:{&quot;host&quot;:&quot;192.168.1.80&quot;,&quot;port&quot;:&quot;55328&quot;,&quot;userAgent&quot;:&quot;Minio (linux; amd64) minio-go/2.0.4 mc/DEVELOPMENT.GOGET&quot;}}],&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;&quot;,&quot;time&quot;:&quot;2017-07-07T11:46:37-07:00&quot;}
</code></pre></div><h2 id="使用postgresql发布minio事件"><a href="#使用postgresql发布minio事件" class="header-anchor">#</a> 使用PostgreSQL发布Minio事件</h2> <p>安装 <a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 数据库。为了演示，我们将&quot;postgres&quot;用户的密码设为<code>password</code>，并且创建了一个<code>minio_events</code>数据库来存储事件信息。</p> <p>这个通知目标支持两种格式: <em>namespace</em> and <em>access</em>。</p> <p>如果使用的是<em>namespace</em>格式，Minio将存储桶里的对象同步成数据库表中的行。每一行有两列：key和value。key是这个对象的存储桶名字加上对象名，value都是一个有关这个Minio对象的JSON格式的事件数据。如果对象更新或者删除，表中相应的行也会相应的更新或者删除。</p> <p>如果使用的是<em>access</em>,Minio将将事件添加到表里，行有两列：event_time 和 event_data。event_time是事件在Minio server里发生的时间，event_data是有关这个Minio对象的JSON格式的事件数据。在这种格式下，不会有行会被删除或者修改。</p> <p>下面的步骤展示的是如何在<code>namespace</code>格式下使用通知目标，<code>*access*</code>差不多，不再赘述，我相信你可以触类旁通，举一反三，不要让我失望哦。</p> <h3 id="第一步-确保确保至少满足第低要求"><a href="#第一步-确保确保至少满足第低要求" class="header-anchor">#</a> 第一步：确保确保至少满足第低要求</h3> <p>Minio要求PostgresSQL9.5版本及以上。 Minio用了PostgreSQL9.5引入的<a href="https://www.postgresql.org/docs/9.5/static/sql-insert.html#SQL-ON-CONFLICT" target="_blank" rel="noopener noreferrer"><code>INSERT ON CONFLICT</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (aka UPSERT) 特性,以及9.4引入的 <a href="https://www.postgresql.org/docs/9.4/static/datatype-json.html" target="_blank" rel="noopener noreferrer">JSONB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 数据类型。</p> <h3 id="第二步-集成postgresql到minio"><a href="#第二步-集成postgresql到minio" class="header-anchor">#</a> 第二步：集成PostgreSQL到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。PostgreSQL配置信息是在<code>notify</code>这个节点下的<code>postgresql</code>节点下，在这里为你的PostgreSQL实例创建配置信息键值对，key是你的PostgreSQL的名称，value是下面表格中列列的键值对集合。</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>enable</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">(必须)此配置是否启用</td></tr> <tr><td style="text-align:left;"><code>format</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 是 <code>namespace</code> 还是 <code>access</code></td></tr> <tr><td style="text-align:left;"><code>connectionString</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选) PostgreSQL的<a href="https://godoc.org/github.com/lib/pq#hdr-Connection_String_Parameters" target="_blank" rel="noopener noreferrer">连接参数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。比如可以用来设置 <code>sslmode</code></td></tr> <tr><td style="text-align:left;"><code>table</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 事件对应的表名，如果该表不存在，Mniio server会在启动时创建。</td></tr> <tr><td style="text-align:left;"><code>host</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选) PostgresSQL的主机名，默认是<code>localhost</code></td></tr> <tr><td style="text-align:left;"><code>port</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选) PostgreSQL的端口号，默认是<code>5432</code></td></tr> <tr><td style="text-align:left;"><code>user</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选)数据库用户名，默认是运行Minio server进程的用户</td></tr> <tr><td style="text-align:left;"><code>password</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选) 数据库密码</td></tr> <tr><td style="text-align:left;"><code>database</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选)库名</td></tr></tbody></table> <p>下面是一个PostgreSQL配置示例:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;postgresql&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;format&quot;: &quot;namespace&quot;,        &quot;connectionString&quot;: &quot;sslmode=disable&quot;,        &quot;table&quot;: &quot;bucketevents&quot;,        &quot;host&quot;: &quot;127.0.0.1&quot;,        &quot;port&quot;: &quot;5432&quot;,        &quot;user&quot;: &quot;postgres&quot;,        &quot;password&quot;: &quot;password&quot;,        &quot;database&quot;: &quot;minio_events&quot;    }}
</code></pre></div><p>注意一下，为了演示，咱们这把SSL禁掉了，但是为了安全起见，不建议在生产环境这么弄。</p> <p>更新完配置文件后，重启Minio Server让配置生效。如果一切顺利，Minio Server会在启动时输出一行信息，类似 <code>SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:postgresql</code>。</p> <p>和之前描述的一样，你也可以添加多个PostreSQL实例，只要ID不重复就行。</p> <h3 id="第三步-使用minio客户端启用bucket通知-2"><a href="#第三步-使用minio客户端启用bucket通知-2" class="header-anchor">#</a> 第三步：使用Minio客户端启用bucket通知</h3> <p>我们现在可以在一个叫<code>images</code>的存储桶上开启事件通知，一旦上有文件上传到存储桶中，PostgreSQL中会insert一条新的记录或者一条已经存在的记录会被update，如果一个存在对象被删除，一条对应的记录也会从PostgreSQL表中删除。因此，PostgreSQL表中的行，对应的就是存储桶里的一个对象。</p> <p>要配置这种存储桶通知，我们需要用到前面步骤中Minio输出的ARN信息。更多有关ARN的资料，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>有了<code>mc</code>这个工具，这些配置信息很容易就能添加上。假设Minio服务别名叫<code>myminio</code>,可执行下列脚本：</p> <div class="language- extra-class"><pre class="language-text"><code># Create bucket named `images` in myminiomc mb myminio/images# Add notification configuration on the `images` bucket using the MySQL ARN. The --suffix argument filters events.mc events add myminio/images arn:minio:sqs:us-east-1:1:postgresql --suffix .jpg# Print out the notification configuration on the `images` bucket.mc events list myminio/imagesmc events list myminio/imagesarn:minio:sqs:us-east-1:1:postgresql s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第四步-验证postgresql"><a href="#第四步-验证postgresql" class="header-anchor">#</a> 第四步：验证PostgreSQL</h3> <p>打开一个新的terminal终端并上传一张JPEG图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p>打开一个PostgreSQL终端列出表 <code>bucketevents</code> 中所有的记录。</p> <div class="language- extra-class"><pre class="language-text"><code>$ psql -h 127.0.0.1 -U postgres -d minio_eventsminio_events=# select * from bucketevents;key                 |                      value--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- images/myphoto.jpg | {&quot;Records&quot;: [{&quot;s3&quot;: {&quot;bucket&quot;: {&quot;arn&quot;: &quot;arn:aws:s3:::images&quot;, &quot;name&quot;: &quot;images&quot;, &quot;ownerIdentity&quot;: {&quot;principalId&quot;: &quot;minio&quot;}}, &quot;object&quot;: {&quot;key&quot;: &quot;myphoto.jpg&quot;, &quot;eTag&quot;: &quot;1d97bf45ecb37f7a7b699418070df08f&quot;, &quot;size&quot;: 56060, &quot;sequencer&quot;: &quot;147CE57C70B31931&quot;}, &quot;configurationId&quot;: &quot;Config&quot;, &quot;s3SchemaVersion&quot;: &quot;1.0&quot;}, &quot;awsRegion&quot;: &quot;us-east-1&quot;, &quot;eventName&quot;: &quot;s3:ObjectCreated:Put&quot;, &quot;eventTime&quot;: &quot;2016-10-12T21:18:20Z&quot;, &quot;eventSource&quot;: &quot;aws:s3&quot;, &quot;eventVersion&quot;: &quot;2.0&quot;, &quot;userIdentity&quot;: {&quot;principalId&quot;: &quot;minio&quot;}, &quot;responseElements&quot;: {}, &quot;requestParameters&quot;: {&quot;sourceIPAddress&quot;: &quot;[::1]:39706&quot;}}]}(1 row)
</code></pre></div><h2 id="使用mysql发布minio事件"><a href="#使用mysql发布minio事件" class="header-anchor">#</a> 使用MySQL发布Minio事件</h2> <p>安装 <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">MySQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. 为了演示，我们将&quot;postgres&quot;用户的密码设为<code>password</code>，并且创建了一个<code>miniodb</code>数据库来存储事件信息。</p> <p>这个通知目标支持两种格式: <em>namespace</em> and <em>access</em>。</p> <p>如果使用的是<em>namespace</em>格式，Minio将存储桶里的对象同步成数据库表中的行。每一行有两列：key_name和value。key_name是这个对象的存储桶名字加上对象名，value都是一个有关这个Minio对象的JSON格式的事件数据。如果对象更新或者删除，表中相应的行也会相应的更新或者删除。</p> <p>如果使用的是<em>access</em>,Minio将将事件添加到表里，行有两列：event_time 和 event_data。event_time是事件在Minio server里发生的时间，event_data是有关这个Minio对象的JSON格式的事件数据。在这种格式下，不会有行会被删除或者修改。</p> <p>下面的步骤展示的是如何在<code>namespace</code>格式下使用通知目标，<code>*access*</code>差不多，不再赘述。</p> <h3 id="第一步-确保确保至少满足第低要求-2"><a href="#第一步-确保确保至少满足第低要求-2" class="header-anchor">#</a> 第一步：确保确保至少满足第低要求</h3> <p>Minio要求MySQL 版本 5.7.8及以上，Minio使用了MySQL5.7.8版本引入的 <a href="https://dev.mysql.com/doc/refman/5.7/en/json.html" target="_blank" rel="noopener noreferrer">JSON<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 数据类型。我们使用的是MySQL5.7.17进行的测试。</p> <h3 id="第二步-集成mysql到minio"><a href="#第二步-集成mysql到minio" class="header-anchor">#</a> 第二步：集成MySQL到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。MySQL配置信息是在<code>notify</code>这个节点下的<code>mysql</code>节点下，在这里为你的MySQL实例创建配置信息键值对，key是你的PostgreSQL的名称，value是下面表格中列列的键值对集合。</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>enable</code></td> <td style="text-align:left;"><em>bool</em></td> <td style="text-align:left;">(必须)此配置是否启用？</td></tr> <tr><td style="text-align:left;"><code>format</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须)是 <code>namespace</code> 还是 <code>access</code></td></tr> <tr><td style="text-align:left;"><code>dsnString</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(可选)MySQL的 <a href="https://github.com/go-sql-driver/mysql#dsn-data-source-name" target="_blank" rel="noopener noreferrer">Data-Source-Name连接串<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。如果没设值，连接信息将使用下列参数： <code>host</code>, <code>port</code>, <code>user</code>, <code>password</code> 以及 <code>database</code></td></tr> <tr><td style="text-align:left;"><code>table</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">(必须) 事件对应的表名，如果该表不存在，Mniio server会在启动时创建。</td></tr> <tr><td style="text-align:left;"><code>host</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">MySQL server主机名 (如果 <code>dsnString</code> 是空才会使用此配置)。</td></tr> <tr><td style="text-align:left;"><code>port</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">MySQL server端口号 (如果 <code>dsnString</code> 是空才会使用此配置)。</td></tr> <tr><td style="text-align:left;"><code>user</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">数据库用户名 (如果 <code>dsnString</code> 是空才会使用此配置)。</td></tr> <tr><td style="text-align:left;"><code>password</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">数据库密码(如果 <code>dsnString</code> 是空才会使用此配置)。</td></tr> <tr><td style="text-align:left;"><code>database</code></td> <td style="text-align:left;"><em>string</em></td> <td style="text-align:left;">数据库名(如果 <code>dsnString</code> 是空才会使用此配置)。</td></tr></tbody></table> <p>下面是一个MySQL配置示例:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;mysql&quot;: {        &quot;1&quot;: {                &quot;enable&quot;: true,                &quot;dsnString&quot;: &quot;&quot;,                &quot;table&quot;: &quot;minio_images&quot;,                &quot;host&quot;: &quot;172.17.0.1&quot;,                &quot;port&quot;: &quot;3306&quot;,                &quot;user&quot;: &quot;root&quot;,                &quot;password&quot;: &quot;password&quot;,                &quot;database&quot;: &quot;miniodb&quot;        }}
</code></pre></div><p>更新完配置文件后，重启Minio Server让配置生效。如果一切顺利，Minio Server会在启动时输出一行信息，类似 <code>SQS ARNs: arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:mysql</code>。</p> <p>和之前描述的一样，你也可以添加多个MySQL实例，只要ID不重复就行。</p> <h3 id="第三步-使用minio客户端启用bucket通知-3"><a href="#第三步-使用minio客户端启用bucket通知-3" class="header-anchor">#</a> 第三步：使用Minio客户端启用bucket通知</h3> <p>我们现在可以在一个叫<code>images</code>的存储桶上开启事件通知，一旦上有文件上传到存储桶中，MySQL中会insert一条新的记录或者一条已经存在的记录会被update，如果一个存在对象被删除，一条对应的记录也会从MySQL表中删除。因此，MySQL表中的行，对应的就是存储桶里的一个对象。</p> <p>要配置这种存储桶通知，我们需要用到前面步骤Minio输出的ARN信息。更多有关ARN的资料，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>有了<code>mc</code>这个工具，这些配置信息很容易就能添加上。假设咱们的Minio服务别名叫<code>myminio</code>,可执行下列脚本：</p> <div class="language- extra-class"><pre class="language-text"><code># Create bucket named `images` in myminiomc mb myminio/images# Add notification configuration on the `images` bucket using the MySQL ARN. The --suffix argument filters events.mc events add myminio/images arn:minio:sqs:us-east-1:1:postgresql --suffix .jpg# Print out the notification configuration on the `images` bucket.mc events list myminio/imagesarn:minio:sqs:us-east-1:1:postgresql s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第四步-验证mysql"><a href="#第四步-验证mysql" class="header-anchor">#</a> 第四步：验证MySQL</h3> <p>打开一个新的terminal终端并上传一张JPEG图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p>打开一个MySQL终端列出表 <code>minio_images</code> 中所有的记录。</p> <div class="language- extra-class"><pre class="language-text"><code>$ mysql -h 172.17.0.1 -P 3306 -u root -p miniodbmysql&gt; select * from minio_images;+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| key_name           | value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| images/myphoto.jpg | {&quot;Records&quot;: [{&quot;s3&quot;: {&quot;bucket&quot;: {&quot;arn&quot;: &quot;arn:aws:s3:::images&quot;, &quot;name&quot;: &quot;images&quot;, &quot;ownerIdentity&quot;: {&quot;principalId&quot;: &quot;minio&quot;}}, &quot;object&quot;: {&quot;key&quot;: &quot;myphoto.jpg&quot;, &quot;eTag&quot;: &quot;467886be95c8ecfd71a2900e3f461b4f&quot;, &quot;size&quot;: 26, &quot;sequencer&quot;: &quot;14AC59476F809FD3&quot;}, &quot;configurationId&quot;: &quot;Config&quot;, &quot;s3SchemaVersion&quot;: &quot;1.0&quot;}, &quot;awsRegion&quot;: &quot;us-east-1&quot;, &quot;eventName&quot;: &quot;s3:ObjectCreated:Put&quot;, &quot;eventTime&quot;: &quot;2017-03-16T11:29:00Z&quot;, &quot;eventSource&quot;: &quot;aws:s3&quot;, &quot;eventVersion&quot;: &quot;2.0&quot;, &quot;userIdentity&quot;: {&quot;principalId&quot;: &quot;minio&quot;}, &quot;responseElements&quot;: {&quot;x-amz-request-id&quot;: &quot;14AC59476F809FD3&quot;, &quot;x-minio-origin-endpoint&quot;: &quot;http://192.168.86.110:9000&quot;}, &quot;requestParameters&quot;: {&quot;sourceIPAddress&quot;: &quot;127.0.0.1:38260&quot;}}]} |+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.01 sec)
</code></pre></div><h2 id="使用kafka发布minio事件"><a href="#使用kafka发布minio事件" class="header-anchor">#</a> 使用Kafka发布Minio事件</h2> <p>安装<a href="http://kafka.apache.org/" target="_blank" rel="noopener noreferrer"> Apache Kafka<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="第一步-确保确保至少满足第低要求-3"><a href="#第一步-确保确保至少满足第低要求-3" class="header-anchor">#</a> 第一步：确保确保至少满足第低要求</h3> <p>Minio要求Kafka版本0.10或者0.9.Minio内部使用了 <a href="https://github.com/Shopify/sarama/" target="_blank" rel="noopener noreferrer">Shopify/sarama<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 库，因此需要和该库有同样的版本兼容性。</p> <h3 id="第二步-集成kafka到minio"><a href="#第二步-集成kafka到minio" class="header-anchor">#</a> 第二步：集成Kafka到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。参考下面的示例更新Kafka配置：</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;kafka&quot;: {    &quot;1&quot;: {        &quot;enable&quot;: true,        &quot;brokers&quot;: [&quot;localhost:9092&quot;],        &quot;topic&quot;: &quot;bucketevents&quot;    }}
</code></pre></div><p>重启Minio server让配置生效。<code>bucketevents</code>是本示例用到的Kafka主题（topic）。</p> <h3 id="第三步-使用minio客户端启用bucket通知-4"><a href="#第三步-使用minio客户端启用bucket通知-4" class="header-anchor">#</a> 第三步：使用Minio客户端启用bucket通知</h3> <p>我们现在可以在一个叫<code>images</code>的存储桶上开启事件通知，一旦上有文件上传到存储桶中，事件将被触发。在这里，ARN的值是<code>arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:kafka</code>。更多有关ARN的资料，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language- extra-class"><pre class="language-text"><code>mc mb myminio/imagesmc events add  myminio/images arn:minio:sqs:us-east-1:1:kafka --suffix .jpgmc events list myminio/imagesarn:minio:sqs:us-east-1:1:kafka s3:ObjectCreated:*,s3:ObjectRemoved:* Filter: suffix=”.jpg”
</code></pre></div><h3 id="第四步-验证kafka"><a href="#第四步-验证kafka" class="header-anchor">#</a> 第四步：验证Kafka</h3> <p>我们使用 <a href="https://github.com/edenhill/kafkacat" target="_blank" rel="noopener noreferrer">kafkacat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 将所有的通知输出到控制台。</p> <div class="language- extra-class"><pre class="language-text"><code>kafkacat -C -b localhost:9092 -t bucketevents
</code></pre></div><p>打开一个新的terminal终端并上传一张JPEG图片到<code>images</code> 存储桶。</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp myphoto.jpg myminio/images
</code></pre></div><p><code>kafkacat</code> 输出事件通知到控制台。</p> <div class="language- extra-class"><pre class="language-text"><code>kafkacat -b localhost:9092 -t bucketevents{&quot;EventType&quot;:&quot;s3:ObjectCreated:Put&quot;,&quot;Key&quot;:&quot;images/myphoto.jpg&quot;,&quot;Records&quot;:[{&quot;eventVersion&quot;:&quot;2.0&quot;,&quot;eventSource&quot;:&quot;aws:s3&quot;,&quot;awsRegion&quot;:&quot;us-east-1&quot;,&quot;eventTime&quot;:&quot;2017-01-31T10:01:51Z&quot;,&quot;eventName&quot;:&quot;s3:ObjectCreated:Put&quot;,&quot;userIdentity&quot;:{&quot;principalId&quot;:&quot;88QR09S7IOT4X1IBAQ9B&quot;},&quot;requestParameters&quot;:{&quot;sourceIPAddress&quot;:&quot;192.173.5.2:57904&quot;},&quot;responseElements&quot;:{&quot;x-amz-request-id&quot;:&quot;149ED2FD25589220&quot;,&quot;x-minio-origin-endpoint&quot;:&quot;http://192.173.5.2:9000&quot;},&quot;s3&quot;:{&quot;s3SchemaVersion&quot;:&quot;1.0&quot;,&quot;configurationId&quot;:&quot;Config&quot;,&quot;bucket&quot;:{&quot;name&quot;:&quot;images&quot;,&quot;ownerIdentity&quot;:{&quot;principalId&quot;:&quot;88QR09S7IOT4X1IBAQ9B&quot;},&quot;arn&quot;:&quot;arn:aws:s3:::images&quot;},&quot;object&quot;:{&quot;key&quot;:&quot;myphoto.jpg&quot;,&quot;size&quot;:541596,&quot;eTag&quot;:&quot;04451d05b4faf4d62f3d538156115e2a&quot;,&quot;sequencer&quot;:&quot;149ED2FD25589220&quot;}}}],&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;&quot;,&quot;time&quot;:&quot;2017-01-31T15:31:51+05:30&quot;}
</code></pre></div><h2 id="使用webhook发布minio事件"><a href="#使用webhook发布minio事件" class="header-anchor">#</a> 使用Webhook发布Minio事件</h2> <p><a href="https://en.wikipedia.org/wiki/Webhook" target="_blank" rel="noopener noreferrer">Webhooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 采用推的方式获取数据，而不是一直去拉取。</p> <h3 id="第一步-集成mysql到minio"><a href="#第一步-集成mysql到minio" class="header-anchor">#</a> 第一步：集成MySQL到Minio</h3> <p>Minio Server的配置文件默认路径是 <code>~/.minio/config.json</code>。参考下面的示例更新Webhook配置：</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;webhook&quot;: {  &quot;1&quot;: {    &quot;enable&quot;: true,    &quot;endpoint&quot;: &quot;http://localhost:3000/&quot;}
</code></pre></div><p>endpoint是监听webhook通知的服务。保存配置文件并重启Minio服务让配配置生效。注意一下，在重启Minio时，这个endpoint必须是启动并且可访问到。</p> <h3 id="第二步-使用minio客户端启用bucket通知-5"><a href="#第二步-使用minio客户端启用bucket通知-5" class="header-anchor">#</a> 第二步：使用Minio客户端启用bucket通知</h3> <p>我们现在可以在一个叫<code>images</code>的存储桶上开启事件通知，一旦上有文件上传到存储桶中，事件将被触发。在这里，ARN的值是<code>arn![:minio:](https://www.emoji-cheat-sheet.com/graphics/emojis/minio.png)sqs![:us-east-1:](https://www.emoji-cheat-sheet.com/graphics/emojis/us-east-1.png)1:webhook</code>。更多有关ARN的资料，请参考<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language- extra-class"><pre class="language-text"><code>mc mb myminio/imagesmc mb myminio/images-thumbnailmc events add myminio/images arn:minio:sqs:us-east-1:1:webhook --events put --suffix .jpg
</code></pre></div><p>验证事件通知是否配置正确：</p> <div class="language- extra-class"><pre class="language-text"><code>mc events list myminio/images
</code></pre></div><p>你应该可以收到如下的响应：</p> <div class="language- extra-class"><pre class="language-text"><code>arn:minio:sqs:us-east-1:1:webhook   s3:ObjectCreated:*   Filter: suffix=&quot;.jpg&quot;
</code></pre></div><h3 id="第三步-采用thumbnailer进行验证"><a href="#第三步-采用thumbnailer进行验证" class="header-anchor">#</a> 第三步：采用Thumbnailer进行验证</h3> <p>我们使用 <a href="https://github.com/minio/thumbnailer" target="_blank" rel="noopener noreferrer">Thumbnailer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来监听Minio通知。如果有文件上传于是Minio服务，Thumnailer监听到该通知，生成一个缩略图并上传到Minio服务。安装Thumbnailer:</p> <div class="language- extra-class"><pre class="language-text"><code>git clone https://github.com/minio/thumbnailer/npm install
</code></pre></div><p>然后打开Thumbnailer的<code>config/webhook.json</code>配置文件，添加有关Minio server的配置，使用下面的方式启动Thumbnailer:</p> <div class="language- extra-class"><pre class="language-text"><code>NODE_ENV=webhook node thumbnail-webhook.js
</code></pre></div><p>Thumbnailer运行在<code>http://localhost:3000/</code>。下一步，配置Minio server,让其发送消息到这个URL（第一步提到的），并使用 <code>mc</code> 来设置存储桶通知（第二步提到的）。然后上传一张图片到Minio server:</p> <div class="language- extra-class"><pre class="language-text"><code>mc cp ~/images.jpg myminio/images.../images.jpg:  8.31 KB / 8.31 KB ┃▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓┃ 100.00% 59.42 KB/s 0s
</code></pre></div><p>稍等片刻，然后使用mc ls检查存储桶的内容 -，你将看到有个缩略图出现了。</p> <div class="language- extra-class"><pre class="language-text"><code>mc ls myminio/images-thumbnail[2017-02-08 11:39:40 IST]   992B images-thumbnail.jpg
</code></pre></div><p><em>注意</em> 如果你用的是 <a href="https://docs.min.io/docs/distributed-minio-quickstart-guide" target="_blank" rel="noopener noreferrer">distributed Minio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,请修改所有节点的 <code>~/.minio/config.json</code>。</p> <blockquote><p>原文: https://docs.min.io/docs/minio-bucket-notification-guide.html</p></blockquote></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/02/09, 11:41:52</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/98cf59/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">如何使用 TLS 保护对 MinIO 服务器的访问</div></a> <a href="/pages/f9e3a2/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Minio服务限制租户</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/98cf59/" class="prev">如何使用 TLS 保护对 MinIO 服务器的访问</a></span> <span class="next"><a href="/pages/f9e3a2/">Minio服务限制租户</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:785056500@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/heyuqiang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span>PigxCloud, Inc.</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.31569fb0.js" defer></script><script src="/assets/js/2.df69d635.js" defer></script><script src="/assets/js/94.dede140a.js" defer></script>
  </body>
</html>
