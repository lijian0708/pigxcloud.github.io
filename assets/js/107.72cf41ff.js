(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{576:function(e,o,r){"use strict";r.r(o);var t=r(29),s=Object(t.a)({},(function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"在-docker-compose-上部署-minio"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#在-docker-compose-上部署-minio"}},[e._v("#")]),e._v(" 在 Docker Compose 上部署 MinIO")]),e._v(" "),r("p",[e._v("Docker Compose 允许定义和运行单主机、多容器 Docker 应用程序。")]),e._v(" "),r("p",[e._v("使用 Compose，您可以使用 Compose 文件来配置 MinIO 服务。然后，使用单个命令，您可以从您的配置中创建和启动所有分布式 MinIO 实例。分布式 MinIO 实例将部署在同一主机上的多个容器中。这是基于分布式 MinIO 设置开发、测试和登台环境的好方法。")]),e._v(" "),r("h2",{attrs:{id:"_1-先决条件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-先决条件"}},[e._v("#")]),e._v(" 1. 先决条件")]),e._v(" "),r("ul",[r("li",[e._v("熟悉"),r("a",{attrs:{href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Compose"),r("OutboundLink")],1),e._v("。")]),e._v(" "),r("li",[e._v("Docker 安装在您的机器上。从"),r("a",{attrs:{href:"https://www.docker.com/products/container-runtime#/download",target:"_blank",rel:"noopener noreferrer"}},[e._v("这里"),r("OutboundLink")],1),e._v("下载相关的安装程序。")])]),e._v(" "),r("h2",{attrs:{id:"_2-在-docker-compose-上运行分布式-minio"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-在-docker-compose-上运行分布式-minio"}},[e._v("#")]),e._v(" 2. 在 Docker Compose 上运行分布式 MinIO")]),e._v(" "),r("p",[e._v("要在 Docker Compose 上部署分布式 MinIO，请将"),r("a",{attrs:{href:"https://github.com/minio/minio/blob/master/docs/orchestration/docker-compose/docker-compose.yaml?raw=true",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-compose.yaml"),r("OutboundLink")],1),e._v("和"),r("a",{attrs:{href:"https://github.com/minio/minio/blob/master/docs/orchestration/docker-compose/nginx.conf?raw=true",target:"_blank",rel:"noopener noreferrer"}},[e._v("nginx.conf"),r("OutboundLink")],1),e._v("下载到您当前的工作目录。请注意，Docker Compose 会拉取 MinIO Docker 映像，因此无需显式下载 MinIO 二进制文件。然后运行以下命令之一")]),e._v(" "),r("h3",{attrs:{id:"gnu-linux-和-macos"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gnu-linux-和-macos"}},[e._v("#")]),e._v(" GNU/Linux 和 macOS")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker-compose")]),e._v(" pull\n"),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker-compose")]),e._v(" up\n")])])]),r("p",[e._v("或者")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" stack deploy --compose-file docker-compose.yaml minio\n")])])]),r("h3",{attrs:{id:"windows"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[e._v("#")]),e._v(" Windows")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("docker-compose.exe pull\ndocker-compose.exe up\n")])])]),r("p",[e._v("或者")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" stack deploy --compose-file docker-compose.yaml minio\n")])])]),r("p",[e._v("现在可以在主机上的 9000 端口访问分布式实例，继续访问 Web 浏览器http://127.0.0.1:9000/。这里 4 个 MinIO 服务器实例通过 Nginx 负载均衡进行反向代理。")]),e._v(" "),r("h3",{attrs:{id:"notes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("默认情况下，Docker Compose 文件使用最新 MinIO 服务器版本的 Docker 镜像。您可以更改镜像标签以拉取特定的"),r("a",{attrs:{href:"https://hub.docker.com/r/minio/minio/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MinIO Docker 镜像"),r("OutboundLink")],1),e._v("。")])]),e._v(" "),r("li",[r("p",[e._v("默认创建了 4 个 minio 分布式实例。您可以向 MinIO Compose 部署添加更多 MinIO 服务（最多 16 个）。添加服务")]),e._v(" "),r("ul",[r("li",[e._v("复制服务定义并适当更改新服务的名称。")]),e._v(" "),r("li",[e._v("更新每个服务中的命令部分。")]),e._v(" "),r("li",[e._v("在 Nginx 配置文件中的 upstream 指令中添加一个新的 MinIO 服务器实例。")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://docs.min.io/docs/distributed-minio-quickstart-guide",target:"_blank",rel:"noopener noreferrer"}},[e._v("在此处"),r("OutboundLink")],1),e._v("阅读有关分布式 MinIO 的更多信息。")])])]),e._v(" "),r("h3",{attrs:{id:"进一步探索"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#进一步探索"}},[e._v("#")]),e._v(" 进一步探索")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.docker.com/compose/overview/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Compose 概述"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://docs.min.io/docs/minio-docker-quickstart-guide",target:"_blank",rel:"noopener noreferrer"}},[e._v("MinIO Docker 快速入门指南"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://docs.min.io/docs/minio-erasure-code-quickstart-guide",target:"_blank",rel:"noopener noreferrer"}},[e._v("MinIO 纠删码快速入门指南"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);o.default=s.exports}}]);