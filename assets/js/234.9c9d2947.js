(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{703:function(t,s,a){"use strict";a.r(s);var e=a(29),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"安装-kubeadm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-kubeadm"}},[t._v("#")]),t._v(" 安装 kubeadm")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("无特殊说明以下操作在所有节点执行")])]),t._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),a("p",[t._v("kubeadm 是 kubernetes 的集群安装工具，能够快速安装 kubernetes 集群")]),t._v(" "),a("h2",{attrs:{id:"配置软件源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置软件源"}},[t._v("#")]),t._v(" 配置软件源")]),t._v(" "),a("p",[t._v("国外教程添加 Google 源（国内屏蔽了）。我们添加阿里源。")]),t._v(" "),a("p",[t._v("1）由于是在非标准的存储库内下载 Kubernetes，所以，需要确保软件被授权。这里，我们通过添加签名密钥完成授权：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -fsSL https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" apt-key "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -\n")])])]),a("p",[t._v("2）然后，添加阿里的源，即可：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('sudo apt-add-repository "deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main"\n')])])]),a("p",[t._v("3）更新")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\n")])])]),a("h2",{attrs:{id:"安装-kubeadm-kubelet-kubectl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-kubeadm-kubelet-kubectl"}},[t._v("#")]),t._v(" 安装 kubeadm，kubelet，kubectl")]),t._v(" "),a("p",[t._v("在所有节点上安装指定版本 kubelet、kubeadm 和 kubectl, "),a("strong",[t._v("注意 kubeadm 的版本号")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("kubelet")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.20")]),t._v(".0-00 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("kubeadm")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.20")]),t._v(".0-00 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("kubectl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.20")]),t._v(".0-00 -y\n")])])]),a("ul",[a("li",[t._v("kubeadm：用于初始化 Kubernetes 集群")]),t._v(" "),a("li",[t._v("kubectl：Kubernetes 的命令行工具，主要作用是部署和管理应用，查看各种资源，创建，删除和更新组件")]),t._v(" "),a("li",[t._v("kubelet：主要负责启动 Pod 和容器")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("安装完成后，要确保kubeadm等程序文件的版本，这将也是后面初始化Kubernetes集群时需要明确指定的版本号。")])]),t._v(" "),a("h2",{attrs:{id:"设置-kubelet-自启动-并启动-kubelet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-kubelet-自启动-并启动-kubelet"}},[t._v("#")]),t._v(" 设置 kubelet 自启动，并启动 kubelet")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" kubelet "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start kubelet\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);