(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{512:function(a,s,t){"use strict";t.r(s);var e=t(29),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"centos-7-安装-jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-安装-jenkins"}},[a._v("#")]),a._v(" CentOS 7 安装 Jenkins")]),a._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),t("p",[a._v("Jenkins是一个"),t("a",{attrs:{href:"https://baike.baidu.com/item/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/8105369",target:"_blank",rel:"noopener noreferrer"}},[a._v("开源软件"),t("OutboundLink")],1),a._v("项目，是基于"),t("a",{attrs:{href:"https://baike.baidu.com/item/Java/85979",target:"_blank",rel:"noopener noreferrer"}},[a._v("Java"),t("OutboundLink")],1),a._v("开发的一种"),t("a",{attrs:{href:"https://baike.baidu.com/item/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/6250744",target:"_blank",rel:"noopener noreferrer"}},[a._v("持续集成"),t("OutboundLink")],1),a._v("工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件项目可以进行持续集成")]),a._v(" "),t("h2",{attrs:{id:"环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),t("h3",{attrs:{id:"安装maven"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装maven"}},[a._v("#")]),a._v(" 安装maven")]),a._v(" "),t("p",[a._v("复制文件"),t("code",[a._v("apache-maven-3.5.0-bin.tar.gz")]),a._v(" 到 "),t("code",[a._v("/usr/local")])]),a._v(" "),t("h3",{attrs:{id:"解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[a._v("#")]),a._v(" 解压")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zxvf apache-maven-3.5.0-bin.tar.gz\n")])])]),t("h3",{attrs:{id:"备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份"}},[a._v("#")]),a._v(" 备份")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" apache-maven-3.5.0-bin.tar.gz /root/software/\n")])])]),t("h3",{attrs:{id:"配置maven"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置maven"}},[a._v("#")]),a._v(" 配置maven")]),a._v(" "),t("p",[a._v("设置环境变量 编辑 "),t("code",[a._v("/etc/profile")]),a._v(" 在文档最后追加一下内容：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## maven env")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MAVEN_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/apache-maven-3.5.0\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$MAVEN_HOME")]),a._v("/bin\n")])])]),t("p",[a._v("使配置文件生效：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),t("h3",{attrs:{id:"验证maven"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证maven"}},[a._v("#")]),a._v(" 验证maven")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mvn -v\n")])])]),t("p",[a._v("正确配置jdk会输出一下内容：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost apache-maven-3.5.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mvn -v")]),a._v("\nApache Maven "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.5")]),a._v(".0 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ff8f5e7444045639af65f6095c62210b5713f426"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2017")]),a._v("-04-04T03:39:06+08:00"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nMaven home: /usr/local/apache-maven-3.5.0\nJava version: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),a._v(".0_141, vendor: Oracle Corporation\nJava home: /usr/local/java/jdk1.8.0_221/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"linux"')]),a._v(", version: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"3.10.0-514.21.1.el7.x86_64"')]),a._v(", arch: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"amd64"')]),a._v(", family: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"unix"')]),a._v("\n")])])]),t("p",[a._v("大功告成maven安装成功！")]),a._v(" "),t("h2",{attrs:{id:"部署tomcat8-运行jenkins-war"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署tomcat8-运行jenkins-war"}},[a._v("#")]),a._v(" 部署Tomcat8 运行Jenkins.war")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" software\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" servers\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("p",[a._v("目录用途说明：software 用于存放所有使用到的安装包文件；servers 用于部署所有tomcat等各种服务器运行程序")])]),a._v(" "),t("h3",{attrs:{id:"准备安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备安装"}},[a._v("#")]),a._v(" 准备安装")]),a._v(" "),t("p",[a._v("复制"),t("code",[a._v("apache-tomcat-8.5.16.tar.gz")]),a._v(" 到 "),t("code",[a._v("/root/servers")]),a._v(" 目录下。")]),a._v(" "),t("h3",{attrs:{id:"解压-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压-2"}},[a._v("#")]),a._v(" 解压")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/servers\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zxvf apache-tomcat-8.5.16.tar.gz\n")])])]),t("p",[a._v("备份安装包到 "),t("code",[a._v("/root/software")]),a._v(" 以便以后使用。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" apache-tomcat-8.5.16.tar.gz /root/software\n")])])]),t("p",[a._v("重命名apache-tomcat-8.5.16 为 jenkins-tomcat8")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" apache-tomcat-8.5.16 jenkins-tomcat8\n")])])]),t("h3",{attrs:{id:"修改端口与配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改端口与配置"}},[a._v("#")]),a._v(" 修改端口与配置")]),a._v(" "),t("p",[a._v("编辑"),t("code",[a._v("conf/server.xml")]),a._v("修改端口共3处：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /root/servers/jenkins-tomcat8/conf/server.xml\n")])])]),t("p",[a._v("增加 "),t("code",[a._v('URIEncoding="UTF-8"')]),a._v(" 解决tomcat 中文乱码问题。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("Connector "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8080"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("protocol")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"HTTP/1.1"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("connectionTimeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"20000"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("redirectPort")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8443"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("URIEncoding")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"UTF-8"')]),a._v(" /"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("h3",{attrs:{id:"内存调优"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存调优"}},[a._v("#")]),a._v(" 内存调优")]),a._v(" "),t("p",[a._v("编辑"),t("code",[a._v("bin/catalina.sh")]),a._v(" 设置"),t("code",[a._v("JAVA_OPTS")]),a._v(" 提高JVM栈内存"),t("code",[a._v("Increase JVM heap memory")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /root/servers/jenkins-tomcat8/bin/catalina.sh\n")])])]),t("p",[a._v("增加如下内容：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1024m -Xmx2048m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:+DisableExplicitGC"\n')])])]),t("h2",{attrs:{id:"启动并验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动并验证"}},[a._v("#")]),a._v(" 启动并验证")]),a._v(" "),t("p",[a._v("启动tomcat服务")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("/opt/jenkins-tomcat8/bin/startup.sh\n")])])]),t("p",[a._v("查看日志")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v(" -f /opt/jenkins-tomcat8/logs/catalina.out\n")])])]),t("p",[a._v("浏览器访问地址："),t("code",[a._v("http://server_ip:8080")]),a._v("，看到tomcat默认欢迎页面说明部署成功了！")]),a._v(" "),t("h2",{attrs:{id:"设置-jenkins-tomcat-开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置-jenkins-tomcat-开机启动"}},[a._v("#")]),a._v(" 设置 Jenkins-tomcat 开机启动")]),a._v(" "),t("p",[a._v("使用root用户编辑 "),t("code",[a._v("/etc/rc.local")]),a._v(" 文件，执行命令：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/rc.local\n")])])]),t("p",[a._v("加入：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## jenkins-tomcat8")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" - root -c "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/opt/jenkins-tomcat8/bin/startup.sh'")]),a._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("p",[a._v("第一次使用开机启动时需要为"),t("code",[a._v("/etc/rc.local")]),a._v(" 文件赋权限")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /etc/rc.local\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /etc/rc.d/rc.local\n")])])])]),a._v(" "),t("h2",{attrs:{id:"部署jenkins-war"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署jenkins-war"}},[a._v("#")]),a._v(" 部署jenkins.war")]),a._v(" "),t("p",[a._v("删除 "),t("code",[a._v("tomcat-tomcat8/webapps/")]),a._v(" 里面所有项目文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf /root/servers/jenkins-tomcat8/webapps/*\n")])])]),t("p",[a._v("复制 "),t("code",[a._v("jenkins.war")]),a._v(" 到 "),t("code",[a._v("/root/servers/jenkins-tomcat8/webapps/")]),a._v(" 目录下")]),a._v(" "),t("p",[a._v("停止并重新启动tomcat服务")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("/root/servers/jenkins-tomcat8/bin/shutdown.sh\n/root/servers/jenkins-tomcat8/bin/startup.sh\n")])])]),t("h2",{attrs:{id:"启动jenkins安装程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动jenkins安装程序"}},[a._v("#")]),a._v(" 启动jenkins安装程序")]),a._v(" "),t("p",[a._v("浏览器访问地址："),t("code",[a._v("http://server_ip:8080/jenkins")]),a._v(" 运行jenkins安装程序。")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("p",[a._v("首次访问jenkins我们需要提供超级管理员密码，超级管理员密码串在jenkins首次启动后会自动生成，存放在"),t("code",[a._v("/root/.jenkins/secrets/initialAdminPassword")]),a._v(" 文件中。")])]),a._v(" "),t("p",[a._v("获取超级管理密码执行命令：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /root/.jenkins/secrets/initialAdminPassword\n")])])]),t("p",[a._v("复制密码串并粘贴到"),t("code",[a._v("Administrator password")]),a._v("输入框内点击"),t("code",[a._v("Continue")])]),a._v(" "),t("h2",{attrs:{id:"插件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件安装"}},[a._v("#")]),a._v(" 插件安装")]),a._v(" "),t("h3",{attrs:{id:"经典安装模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#经典安装模式"}},[a._v("#")]),a._v(" 经典安装模式")]),a._v(" "),t("p",[a._v("鼠标单击左侧蓝色框安装社区推荐插件包"),t("code",[a._v("Install suggested plugins")]),a._v(" Install plugins the Jenkins community finds most useful 安装插件，这一步安装插件受网络影响安装时间可能比较长，"),t("strong",[a._v("建议普通用户选择推荐安装")])]),a._v(" "),t("h3",{attrs:{id:"自定义安装模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义安装模式"}},[a._v("#")]),a._v(" 自定义安装模式")]),a._v(" "),t("p",[a._v("右侧灰色背景框是插件可选框，可以理解为插件自定义选择安装，建议有一些经验的用户使用；本演示教程已经典安装模式为例。")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("p",[a._v("开始安装插件包，在右侧可以看到事实的安装日志。绿色对勾表示安装成功")])]),a._v(" "),t("h2",{attrs:{id:"创建admin用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建admin用户"}},[a._v("#")]),a._v(" 创建Admin用户")]),a._v(" "),t("p",[a._v("这里我们先简单设置一个用户，后续的配置中我们会创建一个超级管理员账户。")]),a._v(" "),t("p",[a._v("点击"),t("code",[a._v("Save and Finish")]),a._v(" 完成用户创建。")]),a._v(" "),t("p",[a._v("至此，Jenkins部署完成 (゜-゜)つロ 干杯~")])])}),[],!1,null,null,null);s.default=r.exports}}]);