(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{577:function(_,t,v){"use strict";v.r(t);var r=v(29),a=Object(r.a)({},(function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"rabbitmq-快速入门"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-快速入门"}},[_._v("#")]),_._v(" RabbitMQ 快速入门")]),_._v(" "),v("h2",{attrs:{id:"思维导图"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#思维导图"}},[_._v("#")]),_._v(" 思维导图")]),_._v(" "),v("p",[v("img",{attrs:{src:"/img/2021-12-07_160535.png",alt:"img"}})]),_._v(" "),v("h2",{attrs:{id:"什么是消息队列"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#什么是消息队列"}},[_._v("#")]),_._v(" 什么是消息队列")]),_._v(" "),v("p",[v("strong",[_._v("消息")]),_._v("指的是两个应用间传递的数据。数据的类型有很多种形式，可能只包含文本字符串，也可能包含嵌入对象。")]),_._v(" "),v("p",[v("strong",[_._v("“消息队列(Message Queue)”是在消息的传输过程中保存消息的容器")]),_._v("。在消息队列中，通常有生产者和消费者两个角色。生产者只负责发送数据到消息队列，谁从消息队列中取出数据处理，他不管。消费者只负责从消息队列中取出数据处理，他不管这是谁发送的数据。")]),_._v(" "),v("p",[v("img",{attrs:{src:"/img/2021-12-07_160536.png",alt:"img"}})]),_._v(" "),v("h2",{attrs:{id:"为什么使用消息队列"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用消息队列"}},[_._v("#")]),_._v(" 为什么使用消息队列")]),_._v(" "),v("p",[_._v("主要有三个作用：")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("解耦")]),_._v("。如图所示。假设有系统B、C、D都需要系统A的数据，于是系统A调用三个方法发送数据到B、C、D。这时，系统D不需要了，那就需要在系统A把相关的代码删掉。假设这时有个新的系统E需要数据，这时系统A又要增加调用系统E的代码。为了降低这种强耦合，就可以使用MQ，"),v("strong",[_._v("系统A只需要把数据发送到MQ，其他系统如果需要数据，则从MQ中获取即可")]),_._v("。")])]),_._v(" "),v("p",[v("img",{attrs:{src:"/img/2021-12-07_160537.png",alt:"img"}})]),_._v(" "),v("ul",[v("li",[_._v("异步。如图所示。一个客户端请求发送进来，系统A会调用系统B、C、D三个系统，同步请求的话，响应时间就是系统A、B、C、D的总和，也就是800ms。"),v("strong",[_._v("如果使用MQ，系统A发送数据到MQ，然后就可以返回响应给客户端，不需要再等待系统B、C、D的响应，可以大大地提高性能")]),_._v("。对于一些非必要的业务，比如发送短信，发送邮件等等，就可以采用MQ。")])]),_._v(" "),v("p",[v("img",{attrs:{src:"/img/2021-12-07_160538.png",alt:"img"}})]),_._v(" "),v("ul",[v("li",[_._v("削峰。如图所示。这其实是MQ一个很重要的应用。假设系统A在某一段时间请求数暴增，有5000个请求发送过来，系统A这时就会发送5000条SQL进入MySQL进行执行，MySQL对于如此庞大的请求当然处理不过来，MySQL就会崩溃，导致系统瘫痪。"),v("strong",[_._v("如果使用MQ，系统A不再是直接发送SQL到数据库，而是把数据发送到MQ，MQ短时间积压数据是可以接受的，然后由消费者每次拉取2000条进行处理，防止在请求峰值时期大量的请求直接发送到MySQL导致系统崩溃")]),_._v("。")])]),_._v(" "),v("p",[v("img",{attrs:{src:"/img/2021-12-07_160539.png",alt:"img"}})]),_._v(" "),v("h2",{attrs:{id:"rabbitmq-的特点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-的特点"}},[_._v("#")]),_._v(" RabbitMQ 的特点")]),_._v(" "),v("p",[_._v("RabbitMQ是一款使用Erlang语言开发的，实现AMQP(高级消息队列协议)的开源消息中间件。首先要知道一些RabbitMQ的特点，"),v("a",{attrs:{href:"https://www.rabbitmq.com/",target:"_blank",rel:"noopener noreferrer"}},[_._v("官网"),v("OutboundLink")],1),_._v("可查：")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("可靠性。支持持久化，传输确认，发布确认等保证了MQ的可靠性。")])]),_._v(" "),v("li",[v("p",[_._v("灵活的分发消息策略。这应该是RabbitMQ的一大特点。在消息进入MQ前由Exchange(交换机)进行路由消息。分发消息策略有：简单模式、工作队列模式、发布订阅模式、路由模式、通配符模式。")])]),_._v(" "),v("li",[v("p",[_._v("支持集群。多台RabbitMQ服务器可以组成一个集群，形成一个逻辑Broker。")])]),_._v(" "),v("li",[v("p",[_._v("多种协议。RabbitMQ支持多种消息队列协议，比如 STOMP、MQTT 等等。")])]),_._v(" "),v("li",[v("p",[_._v("支持多种语言客户端。RabbitMQ几乎支持所有常用编程语言，包括 Java、.NET、Ruby 等等。")])]),_._v(" "),v("li",[v("p",[_._v("可视化管理界面。RabbitMQ提供了一个易用的用户界面，使得用户可以监控和管理消息 Broker。")])]),_._v(" "),v("li",[v("p",[_._v("插件机制。RabbitMQ提供了许多插件，可以通过插件进行扩展，也可以编写自己的插件。")])])]),_._v(" "),v("h2",{attrs:{id:"rabbitmq-的工作原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-的工作原理"}},[_._v("#")]),_._v(" RabbitMQ 的工作原理")]),_._v(" "),v("p",[_._v("下图是RabbitMQ的基本结构：")]),_._v(" "),v("p",[v("img",{attrs:{src:"/img/2021-12-07_160540.png",alt:"img"}})]),_._v(" "),v("p",[_._v("组成部分说明：")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("Broker：消息队列服务进程，此进程包括两个部分：Exchange和Queue")])]),_._v(" "),v("li",[v("p",[_._v("Exchange：消息队列交换机，按一定的规则将消息路由转发到某个队列，对消息进行过虑。")])]),_._v(" "),v("li",[v("p",[_._v("Queue：消息队列，存储消息的队列，消息到达队列并转发给指定的")])]),_._v(" "),v("li",[v("p",[_._v("Producer：消息生产者，即生产方客户端，生产方客户端将消息发送")])]),_._v(" "),v("li",[v("p",[_._v("Consumer：消息消费者，即消费方客户端，接收MQ转发的消息。")])])]),_._v(" "),v("p",[_._v("生产者发送消息流程：")]),_._v(" "),v("p",[_._v("1、生产者和Broker建立TCP连接。")]),_._v(" "),v("p",[_._v("2、生产者和Broker建立通道。")]),_._v(" "),v("p",[_._v("3、生产者通过通道消息发送给Broker，由Exchange将消息进行转发。")]),_._v(" "),v("p",[_._v("4、Exchange将消息转发到指定的Queue（队列）")]),_._v(" "),v("p",[_._v("消费者接收消息流程：")]),_._v(" "),v("p",[_._v("1、消费者和Broker建立TCP连接")]),_._v(" "),v("p",[_._v("2、消费者和Broker建立通道")]),_._v(" "),v("p",[_._v("3、消费者监听指定的Queue（队列）")]),_._v(" "),v("p",[_._v("4、当有消息到达Queue时Broker默认将消息推送给消费者。")]),_._v(" "),v("p",[_._v("5、消费者接收到消息。")]),_._v(" "),v("p",[_._v("6、ack回复")])])}),[],!1,null,null,null);t.default=a.exports}}]);