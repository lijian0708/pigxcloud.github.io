(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{510:function(a,t,s){"use strict";s.r(t);var e=s(29),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"centos-7-安装-gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-安装-gitlab"}},[a._v("#")]),a._v(" CentOS 7 安装 Gitlab")]),a._v(" "),s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),s("p",[a._v("GitLab 是一个用于仓库管理系统的开源项目，使用"),s("a",{attrs:{href:"https://baike.baidu.com/item/Git",target:"_blank",rel:"noopener noreferrer"}},[a._v("Git"),s("OutboundLink")],1),a._v("作为代码管理工具，并在此基础上搭建起来的Web服务。安装方法是参考GitLab在GitHub上的Wiki页面。")]),a._v(" "),s("h2",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[a._v("#")]),a._v(" 下载")]),a._v(" "),s("p",[a._v("访问官方下载地址："),s("a",{attrs:{href:"https://packages.gitlab.com/gitlab/gitlab-ce",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://packages.gitlab.com/gitlab/gitlab-ce"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("打开下载地址，在"),s("code",[a._v("Search by package name...")]),a._v("一栏输入"),s("code",[a._v("gitlab-ce-11.8.1-ce.0.el7.x86_64.rpm")]),a._v("，下载"),s("code",[a._v("Distro/Version")]),a._v("为"),s("code",[a._v("el/7")]),a._v("的"),s("code",[a._v("rpm")]),a._v("包")]),a._v(" "),s("h3",{attrs:{id:"安装并配置必要的依赖项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装并配置必要的依赖项"}},[a._v("#")]),a._v(" 安装并配置必要的依赖项")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" policycoreutils-python openssh-server\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" sshd\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start sshd\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" firewall-cmd --permanent --add-service"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl reload firewalld\n")])])]),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("h3",{attrs:{id:"拷贝安装包并安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拷贝安装包并安装"}},[a._v("#")]),a._v(" 拷贝安装包并安装")]),a._v(" "),s("p",[a._v("将下载的"),s("code",[a._v("gitlab-ce-11.8.1-ce.0.el7.x86_64.rpm")]),a._v("安装包，拷贝到服务器任意目录，执行一下命令进行安装。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -i gitlab-ce-11.8.1-ce.0.el7.x86_64.rpm\n")])])]),s("p",[a._v("安装过程需要些时间，如果出现日志，则说明安装成功。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("安装日志\n")])])]),s("h3",{attrs:{id:"修改gitlab配置文件指定服务器ip和自定义端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改gitlab配置文件指定服务器ip和自定义端口"}},[a._v("#")]),a._v(" 修改gitlab配置文件指定服务器ip和自定义端口：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/gitlab/gitlab.rb\n")])])]),s("p",[a._v("找到"),s("code",[a._v("external_url 'http://gitlab.example.com'")]),a._v("并修改为当前服务器"),s("code",[a._v("IP")]),a._v("或"),s("code",[a._v("域名")]),a._v("地址")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("配置文件内容\n")])])]),s("h3",{attrs:{id:"重置并启动gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重置并启动gitlab"}},[a._v("#")]),a._v(" 重置并启动GitLab")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# gitlab-ctl reconfigure\n# gitlab-ctl restart\n")])])]),s("p",[a._v("提示 "),s("code",[a._v('"ok: run:"')]),a._v("表示启动成功")]),a._v(" "),s("h2",{attrs:{id:"创建access-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建access-token"}},[a._v("#")]),a._v(" 创建Access Token")]),a._v(" "),s("p",[a._v("浏览器打开页面："),s("code",[a._v("http://主机ip/profile/personal_access_tokens")])]),a._v(" "),s("p",[a._v("图片")]),a._v(" "),s("p",[a._v("Name随便填写。过期时间不填默认永久有效，勾选所有权限，点击"),s("code",[a._v("Create personal access token")]),a._v("按钮"),s("strong",[a._v("生成token")]),a._v("。")]),a._v(" "),s("p",[a._v("图片")]),a._v(" "),s("p",[a._v("点击"),s("code",[a._v("Create personal access token")]),a._v("按钮完成按钮置灰后，页面上方位置显示了我们新创建了"),s("code",[a._v("access token")]),a._v("。请复制保存，部署后端项目portal-web配置gitlab相关配置时使用。")]),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),s("p",[a._v("需要注意的是该页面只显示一次，如果没有及时保存可重新创建即可。")])]),a._v(" "),s("h2",{attrs:{id:"完全卸载删除gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完全卸载删除gitlab"}},[a._v("#")]),a._v(" 完全卸载删除gitlab")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),s("p",[a._v("如安装过程中遇到问题可以尝试完全卸载后重新安装")])]),a._v(" "),s("h3",{attrs:{id:"停止gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止gitlab"}},[a._v("#")]),a._v(" 停止gitlab")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("gitlab-ctl stop\n")])])]),s("h3",{attrs:{id:"卸载gitlab-注意这里写的是gitlab-ce"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载gitlab-注意这里写的是gitlab-ce"}},[a._v("#")]),a._v(" 卸载gitlab（注意这里写的是gitlab-ce）")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -e gitlab-ce\n")])])]),s("h3",{attrs:{id:"查看gitlab进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看gitlab进程"}},[a._v("#")]),a._v(" 查看gitlab进程")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" aux "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" gitlab\n")])])]),s("h3",{attrs:{id:"杀掉第一个进程-就是带有好多-的进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#杀掉第一个进程-就是带有好多-的进程"}},[a._v("#")]),a._v(" 杀掉第一个进程（就是带有好多.............的进程）")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" -9 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("18777")]),a._v("\n")])])]),s("p",[a._v("杀掉后，在ps aux | grep gitlab确认一遍，还有没有gitlab的进程")]),a._v(" "),s("h3",{attrs:{id:"删除所有包含gitlab文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除所有包含gitlab文件"}},[a._v("#")]),a._v(" 删除所有包含gitlab文件")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" / -name gitlab "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf\n")])])]),s("h2",{attrs:{id:"验证安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证安装"}},[a._v("#")]),a._v(" 验证安装")]),a._v(" "),s("p",[a._v("浏览器访问："),s("code",[a._v("http://serverIP")]),a._v(",即可看到"),s("code",[a._v("gitlab")]),a._v("的登录页面，首次登录"),s("strong",[a._v("输入两次新密码")]),a._v("，即设置"),s("code",[a._v("root")]),a._v("用户的密码。")]),a._v(" "),s("p",[a._v("至此，gitlab部署完成 (゜-゜)つロ 干杯~")])])}),[],!1,null,null,null);t.default=r.exports}}]);